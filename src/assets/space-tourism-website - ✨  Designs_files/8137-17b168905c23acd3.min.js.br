"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="09d02f6a-8baa-5d28-80c8-b85075908c5e")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[8137],{870879:(e,r,n)=>{r.D0=r.Xd=void 0,n(205453),n(59774);var i=n(687323);Object.defineProperty(r,"Xd",{enumerable:!0,get:function(){return i.createKiwiCodec}}),n(26310),n(888856),n(258132),n(325036);var a=n(588750);Object.defineProperty(r,"D0",{enumerable:!0,get:function(){return a.parseSchema}}),n(429277)},16229:(e,r,n)=>{},397283:(e,r,n)=>{n.d(r,{C2:()=>f,CE:()=>d,Cr:()=>c,Ec:()=>b,FJ:()=>p,Gu:()=>o,Kk:()=>a,Pv:()=>i,QL:()=>_,Qu:()=>s,T:()=>l,Vr:()=>E,XK:()=>A,Xu:()=>g,YM:()=>v,ed:()=>S,g2:()=>y,iU:()=>h,kA:()=>u,lK:()=>T,oA:()=>m,q3:()=>w,zc:()=>I});let i="resource_connect_modal--urlValidation--CSB3V",a="resource_connect_modal--icon--L6BIW",o="resource_connect_modal--urlValidationLeft--0SSFc",s="resource_connect_modal--urlValidationText--J5OBw",l="resource_connect_modal--urlErrorText--a0oW-",c="resource_connect_modal--bold--9RS7P",d="resource_connect_modal--connectImg--GhuBU",u="resource_connect_modal--connectionIntroFooter--XOIRL",p="resource_connect_modal--connectIntroFooterButtons--cDSf8",m="resource_connect_modal--connectIntroText--Nm3IA",h="resource_connect_modal--message--ICAf8",_="resource_connect_modal--inputs---DKiP",g="resource_connect_modal--inputError--aiMql resource_connect_modal--inputs---DKiP",f="resource_connect_modal--learnMore--4VxkZ modal--blueLink--9GcJu blue_link--blueLink--9rlnd",E="resource_connect_modal--actionStrip--Iy3mR",y="resource_connect_modal--titleWithArrow--wTLNS",b="resource_connect_modal--planRow--usTcI",v="resource_connect_modal--timestampInfoContainer--S5Sbh",T="resource_connect_modal--settingsOption--MadGc",I="resource_connect_modal--iconContainer--eFuiE",S="resource_connect_modal--optionLabel--t4Y1C",w="resource_connect_modal--optionDescription--FzyId",A="resource_connect_modal--stepDescription--PoJa1"},93911:(e,r,n)=>{},697906:(e,r,n)=>{n.d(r,{Ys:()=>o,_U:()=>a,p$:()=>i});let i="team_tile--emptyState--V-Q4V tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd",a="team_tile--emptyTitle--eXex6 tiles_view--emptyTitle--3Vwmu",o="team_tile--joinSpinner--w04qe"},410936:(e,r,n)=>{n.d(r,{CZ:()=>c,Qp:()=>l,RF:()=>a,RL:()=>m,hv:()=>i,kz:()=>h,nv:()=>p,qE:()=>d,qS:()=>u,uj:()=>o,yu:()=>s});let i="base_badge--backgroundLight--agxeS",a="base_badge--backgroundWarning--i7d2I",o="base_badge--backgroundWhite--ZqZgN",s="base_badge--borderStrong--makDy",l="base_badge--height24--PMSUp text--fontPos11--2LvXf text--_fontBase--QdLsd",c="base_badge--heightSixteen--BEJT8 text--fontPos9--naThA text--_fontBase--QdLsd",d="base_badge--badgeIconContainer--Gu5zx",u="base_badge--badge--cbfYy base_badge--backgroundLight--agxeS",p="base_badge--badgeContentContainerWithIcon--ECslI",m="base_badge--badgeTooltip--Qz3RM",h="base_badge--tooltipLink--KpcPS"},602145:(e,r,n)=>{n.d(r,{$c:()=>m,BN:()=>l,BQ:()=>o,JM:()=>s,Sl:()=>i,XO:()=>d,ZW:()=>u,nJ:()=>c,u1:()=>h,wr:()=>a,zA:()=>p});let i="feed_page--hubFile--uHbnb feed_page--resourceLinkTag--5KQz7",a="feed_page--prototypeIcon--JlZyq",o="feed_page--tileUpperLeftWrapper--mwqC-",s="feed_page--tileEditorIcon--ymAxC",l="feed_page--resourcePreview--IePch",c="feed_page--redesignedResourcePreview--MjW2w",d="feed_page--resourcePreviewContentWrapper--H1eHK",u="feed_page--resourcePreviewContentWrapperFigJamDots---54d- feed_page--resourcePreviewContentWrapper--H1eHK",p="feed_page--resourcePreviewContentWrapperThumbnailSet--QlsAU feed_page--resourcePreviewContentWrapper--H1eHK",m="feed_page--resourcePreviewContentWrapperRadiusCursorOverride--kfxmj",h="feed_page--spinner--Z0jz3"},727769:(e,r,n)=>{n.d(r,{avatar:()=>u,genericSelectorExternalTeamsIcon:()=>c,genericSelectorInner:()=>s,genericSelectorModal:()=>o,genericSelectorModalCancel:()=>l,modal:()=>i,modalBackdrop:()=>a,workspaceSelectorModal:()=>p,workspaceSelectorModalInner:()=>m,workspaceTitleWrapper:()=>d});let i="index--modal--vmXNN",a="index--modalBackdrop--VqLCO",o="index--genericSelectorModal--3aSLC index--modalBackdrop--VqLCO text--fontPos13--xW8hS text--_fontBase--QdLsd",s="index--genericSelectorInner--HBJH2",l="index--genericSelectorModalCancel--WOjxG",c="index--genericSelectorExternalTeamsIcon--KL8jt",d="index--workspaceTitleWrapper--e9YT2",u="index--avatar--nIkKj",p="index--workspaceSelectorModal--KqRLO index--modalBackdrop--VqLCO",m="index--workspaceSelectorModalInner--6wXm6 index--genericSelectorInner--HBJH2"},950781:(e,r,n)=>{},722541:(e,r,n)=>{},357202:(e,r,n)=>{n.d(r,{$J:()=>m,Az:()=>d,Hx:()=>a,Pl:()=>f,Wy:()=>i,Yg:()=>s,_D:()=>h,au:()=>_,bO:()=>g,ce:()=>l,fe:()=>p,ik:()=>o,oK:()=>c,y3:()=>u});let i="dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",a="dragging_resource--resizingDraggingLibraryItem--h5-J0 dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",o="dragging_resource--draggingFragment--ckSxw dragging_resource--_draggingResource--RyWym",s="dragging_resource--isDraggingOverCanvas--PgYby",l="dragging_resource--isDraggingLibraryItemOverCanvas---q3C7 dragging_resource--isDraggingOverCanvas--PgYby",c="dragging_resource--isDraggingFragmentOverCanvas--JzTDI dragging_resource--isDraggingOverCanvas--PgYby",d="dragging_resource--draggingWidget--t0JuE dragging_resource--_draggingResource--RyWym",u="dragging_resource--draggingTemplate--q-s5W dragging_resource--_draggingResource--RyWym",p="dragging_resource--draggingPlugin--krda0 dragging_resource--_draggingResource--RyWym",m="dragging_resource--draggingFace--3qq2- dragging_resource--_draggingResource--RyWym",h="dragging_resource--draggingTool--zfhjm dragging_resource--_draggingResource--RyWym",_="dragging_resource--draggingLibraryItemList--Cuvnd dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",g="dragging_resource--draggingLibraryItemListName--kNTa4 ellipsis--ellipsis--Tjyfa",f="dragging_resource--expandAnimation--4FamY"},41740:(e,r,n)=>{n.d(r,{RG:()=>i,bv:()=>s,dO:()=>o,ue:()=>a});let i="multiplayer_onboarding--contentNudge--KflAC",a="multiplayer_onboarding--footerContainerNudge--nBkOA",o="multiplayer_onboarding--footerButtonNudge--4CJm-",s="multiplayer_onboarding--boldText--c42DO"},600310:(e,r,n)=>{},957552:(e,r,n)=>{n.d(r,{$M:()=>a,Bi:()=>v,Fb:()=>h,Fl:()=>c,J7:()=>S,JQ:()=>P,KR:()=>l,Kb:()=>f,MP:()=>A,Nv:()=>N,Q3:()=>D,RR:()=>p,Sp:()=>C,Tz:()=>u,Vl:()=>s,cO:()=>o,cf:()=>x,cu:()=>g,dL:()=>b,g:()=>O,gW:()=>U,gf:()=>M,h1:()=>V,hI:()=>k,i2:()=>R,ii:()=>i,iz:()=>d,kU:()=>I,o6:()=>y,pB:()=>T,vG:()=>E,wH:()=>B,wp:()=>m,xB:()=>F,xc:()=>_,xm:()=>L,yZ:()=>w});let i="community_cards--cardLayoutContainer--nPcgb",a="community_cards--cardSubtitleRowSizing--9WRul",o="community_cards--cardBottomRowSizing--sT6xQ",s="community_cards--cardImageContainer--8ngfu base_community_cards--base_cardImageContainer--jpAKE base_community_cards--_hasBorder--kFIag",l="community_cards--cardHover_TopLeft--yGcAk",c="community_cards--cardBottomRow_MetadataContainer--QLUfh",d="community_cards--cardBottomRow_Metadata_HoverText--McZzP",u="community_cards--cardBottomRow_Metadata_HoverText_AnimateHeight--4wdBR community_cards--cardBottomRow_Metadata_HoverText--McZzP",p="community_cards--cardBottomRow_Metadata_AuthorName_WithHoverText--GJXdW",m="community_cards--cardBottomRowAvatarDropdown--2uCLR",h="community_cards--cardBottomRow_Metadata_AvatarContainer--6-CIe",_="community_cards--cardBottomRow_Metadata_TextContainer--ewZLG",g="community_cards--cardBottomRow_Metadata_PrimaryText--tktO3 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",f="community_cards--base_cardBottomRow_Metadata_SecondaryText---Tn2M text--fontPos11--2LvXf text--_fontBase--QdLsd",E="community_cards--cardBottomRow_Metadata_AuthorName_WithDropdown--Fk7tl",y="community_cards--cardBottomRow_ResourceActionContainer--hgEhI",b="community_cards--cardBottomRow_ResourceActionButton--v146M",v="community_cards--cardHover_Center--hzP7R community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",T="community_cards--cardHover_Cover--kIVQS community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",I="community_cards--cardHover_BottomLeft--XlAgk community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",S="community_cards--cardHover_BottomRight--5So4- community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",w="community_cards--publisherDropdown--m7Bx2",A="community_cards--publisherDropdownContent_Row--iIBB3",C="community_cards--publisherDropdownContent_Row_Text--7hDpO text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",N="community_cards--creatorPreviewDummySpace_Name--fb75z",L="community_cards--creatorPreviewDummySpace_Avatar--LLBj8",O="community_cards--figjamTileMeta--Sh90c",R="community_cards--figjamTextMetadataCaret--bqK8s",P="community_cards--figjamMetadataContainer--4kXQt",D="community_cards--defaultCursor--K5TUO",M="community_cards--figjamTextMetadataContainer--LBupv",k="community_cards--figjamTextMetadataContainerFull--VPsvv",F="community_cards--figjamTextMetadataLockIcon--yazii",x="community_cards--figjamTextMetadataErrorContainer--XDHyT",U="community_cards--figjamTextMetadataName--wP7vv text--fontPos12--YsUAh text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",B="community_cards--subtextDetails--2-EUq",V="community_cards--subtextPublishers--BR4-w ellipsis--ellipsis--Tjyfa"},135060:(e,r,n)=>{n.d(r,{K8:()=>i});let i="hub_file_viewer--zoomDropdownKeyboardShortcut--uixb-"},312949:(e,r,n)=>{n.d(r,{GC:()=>u,PJ:()=>d,Rt:()=>v,SL:()=>g,Tm:()=>E,Uz:()=>_,Vg:()=>s,Yk:()=>m,ZF:()=>f,aq:()=>l,bx:()=>h,g4:()=>i,g8:()=>a,i3:()=>y,jG:()=>p,qc:()=>b,qr:()=>c,vu:()=>o});let i="universal_posting_modal--loadingContainer--5giX-",a="universal_posting_modal--modalClose--eqgHH",o="universal_posting_modal--playgroundtoolbar--62laP",s="universal_posting_modal--grid--Jdvpe",l="universal_posting_modal--previewModal--XtKWL universal_posting_modal--modalBase--HkH3v",c="universal_posting_modal--footer--A-QeR",d="universal_posting_modal--footerText--Pp0H1 universal_posting_modal--_userSelectNone--dHUZk",u="universal_posting_modal--buttonGroup--C-atN",p="universal_posting_modal--scrollContainer--YtNZ-",m="universal_posting_modal--workspaceBarContainer--VHcn1",h="universal_posting_modal--desktopMessageContainer--QXif3 text--fontPos16--oMC-G text--_fontBase--QdLsd",_="universal_posting_modal--desktopMessageTitle--3XDQ-",g="universal_posting_modal--desktopMessageSubTitle--UGHlr",f="universal_posting_modal--searchQuery--07ulH",E="universal_posting_modal--universalPostingSearchContainer--BFSZI",y="universal_posting_modal--xIcon--9icra",b="universal_posting_modal--searchIcon--r7rXz search--searchIconBrowseIA--WYUGA search--searchIcon--0Agiv",v="universal_posting_modal--searchInput--fTx57 search--communityLandingSearchInput--Mtiu3 search--searchInput__OLD--m2Hef text--fontPos13--xW8hS text--_fontBase--QdLsd text--fontPos14--OL9Hp text--_fontBase--QdLsd"},218889:(e,r,n)=>{n.d(r,{G9:()=>s,Kf:()=>i,Tg:()=>a,gL:()=>o,vI:()=>l});let i="edit_component_prop_picker--inputContainer--B8MrR",a="edit_component_prop_picker--textArea--SQ8dT edit_component_prop_picker--baseInput--xQ5tc raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u sf_pro--uiFontWithSFProFallback--m-p9V",o="edit_component_prop_picker--variableBoundInputContainer--BVQ2Q",s="edit_component_prop_picker--detachButton--mHZfV",l="edit_component_prop_picker--booleanCellOverride--F9fS2"},527659:(e,r,n)=>{n.r(r),n.d(r,{_thumbnailBase:()=>f,buttons:()=>l,contextMenu:()=>T,fieldContainer:()=>o,fieldContainerFaded:()=>s,gridContainer:()=>h,label:()=>i,learnMore:()=>a,listContainer:()=>m,listItemContainer:()=>_,listItemRemoveButton:()=>g,offlineIcon:()=>P,outerContainer:()=>c,outerContainerBorderBottom:()=>d,publishCTA:()=>A,scrollContainer_grid:()=>p,scrollContainer_list:()=>u,skeletonText:()=>R,skeletonThumbnailGrid:()=>O,skeletonThumbnailList:()=>L,thumbnailGrid:()=>y,thumbnailGridBase:()=>E,thumbnailList:()=>v,thumbnailListBase:()=>b,tryAgain:()=>D,trying:()=>M,warning:()=>I,warningIcon:()=>C,warningIconList:()=>N,warningOfflineContainer:()=>S,warningPublish:()=>w});let i="preferred_values_instance_picker--label--to5M3",a="preferred_values_instance_picker--learnMore--zD-c7",o="preferred_values_instance_picker--fieldContainer--JJx3j",s="preferred_values_instance_picker--fieldContainerFaded--Z8-Oj preferred_values_instance_picker--fieldContainer--JJx3j",l="preferred_values_instance_picker--buttons---ohnK",c="preferred_values_instance_picker--outerContainer---jRbV",d="preferred_values_instance_picker--outerContainerBorderBottom--eh6jg preferred_values_instance_picker--outerContainer---jRbV",u="preferred_values_instance_picker--scrollContainer_list--kaH92",p="preferred_values_instance_picker--scrollContainer_grid--8kvKL",m="preferred_values_instance_picker--listContainer--BPie-",h="preferred_values_instance_picker--gridContainer--2LTF6",_="preferred_values_instance_picker--listItemContainer--a4t-g",g="preferred_values_instance_picker--listItemRemoveButton--HO05L",f="preferred_values_instance_picker--_thumbnailBase--eAxDp",E="preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",y="preferred_values_instance_picker--thumbnailGrid--XHfz- preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp drilldown_item--_thumbnailContainer--kDsBt",b="preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",v="preferred_values_instance_picker--thumbnailList--nGJE1 drilldown_item--_thumbnailContainer--kDsBt preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",T="preferred_values_instance_picker--contextMenu--qSN6X",I="preferred_values_instance_picker--warning--bgA-c",S="preferred_values_instance_picker--warningOfflineContainer--9BcdC",w="preferred_values_instance_picker--warningPublish--fB8Mq preferred_values_instance_picker--warning--bgA-c",A="preferred_values_instance_picker--publishCTA--FlNCB",C="preferred_values_instance_picker--warningIcon--2TXXz",N="preferred_values_instance_picker--warningIconList--aDgpb preferred_values_instance_picker--warningIcon--2TXXz",L="preferred_values_instance_picker--skeletonThumbnailList--sAAp7 preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",O="preferred_values_instance_picker--skeletonThumbnailGrid--UVfqq preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",R="preferred_values_instance_picker--skeletonText--YCONM",P="preferred_values_instance_picker--offlineIcon--4JDDc",D="preferred_values_instance_picker--tryAgain--UNg1i",M="preferred_values_instance_picker--trying--HmoFd"},631970:(e,r,n)=>{n.d(r,{Dt:()=>o,K8:()=>i,Zh:()=>a,c6:()=>s,e:()=>l});let i="prop_assignment_row--variantPillContainer--I73vy",a="prop_assignment_row--bindingIcon--EAEMs",o="prop_assignment_row--selectedIcon--8fypm",s="prop_assignment_row--ui3ShowOnRowHover---TwLe",l="prop_assignment_row--ui3SelectedIcon--Opfq2"},779179:(e,r,n)=>{n.d(r,{Gp:()=>g,NJ:()=>l,QK:()=>m,UV:()=>a,V:()=>d,WC:()=>u,Ww:()=>p,_o:()=>i,dc:()=>_,kL:()=>s,mh:()=>o,r9:()=>h,sC:()=>f,xn:()=>c});let i="scrubbable_control--scrubCursorSvg--pav0z",a="scrubbable_control--containerInLiveScrub--P5bqH",o="scrubbable_control--scrubbingDisabled--TDxTX",s="scrubbable_control--container--Y1X4e",l="scrubbable_control--noScrubCursor--xmhcD",c="scrubbable_control--containerBordered--Pq8Lq raw_components--borderFocusWithin--BaipZ scrubbable_control--container--Y1X4e",d="scrubbable_control--noIconInputSpacer--IE5yD",u="scrubbable_control--flushLeft--3jk-p",p="scrubbable_control--inputNarrow--BHcl-",m="scrubbable_control--inactiveLabel--qI8ZV",h="scrubbable_control--disabled--vp-59",_="scrubbable_control--disableHoverBorder--y5AhV",g="scrubbable_control--variableControl--DqEyP",f="scrubbable_control--scrubbableInput--Sv3BW"},546366:(e,r,n)=>{n.d(r,{P:()=>i});let i="feature_callout--featureCallout---qPZ7"},440046:(e,r,n)=>{n.d(r,{Pd:()=>a,S3:()=>c,_H:()=>s,_t:()=>l,io:()=>o,xK:()=>d,zr:()=>i});let i="main_view--root--uFXxy",a="main_view--leftHalf--D2ctr",o="main_view--rightHalf--t2aqF",s="main_view--leftPanel--wD96C",l="main_view--rightPanels--Id6Dj",c="main_view--centerPanel--5lkgL",d="main_view--rightPanel---MhPC"},624600:(e,r,n)=>{n.d(r,{kL:()=>i});let i="footer_banner--container--HxFNE"},404319:(e,r,n)=>{n.d(r,{B8:()=>c,BN:()=>s,Hi:()=>i,_K:()=>a,rH:()=>d,u$:()=>o,uu:()=>l});let i="fullscreen_accessibility_tree--debugModeNode--aGne7",a="fullscreen_accessibility_tree--debugModeNodeTransition--PP1HR",o="fullscreen_accessibility_tree--debugModeNodeRender1--sOwjz fullscreen_accessibility_tree--debugModeNode--aGne7",s="fullscreen_accessibility_tree--debugModeNodeRender2--d5GgH fullscreen_accessibility_tree--debugModeNode--aGne7",l="fullscreen_accessibility_tree--debugModeNodeRender3--ferOf fullscreen_accessibility_tree--debugModeNode--aGne7",c="fullscreen_accessibility_tree--debugModeNodeRender4--fiCWb fullscreen_accessibility_tree--debugModeNode--aGne7",d="fullscreen_accessibility_tree--node--WGNTu"},493834:(e,r,n)=>{n.d(r,{Kt:()=>c,LE:()=>s,NV:()=>l,Qq:()=>d,l8:()=>a,ro:()=>o,zc:()=>i});let i="action_option--iconContainer--LFlTl action_option--_iconContainerBase--FtOiz",a="action_option--checkMarkContainer--hq6Bt action_option--iconContainer--LFlTl action_option--_iconContainerBase--FtOiz",o="action_option--rightIconContainer--rTqI4",s="action_option--shortcut--w0R75 action_option--rightIconContainer--rTqI4",l="action_option--optionContainer--ru4UN",c="action_option--optionContainerLimitWidth--aaElZ",d="action_option--text--fSMIm"},958668:(e,r,n)=>{n.d(r,{Kn:()=>c,P3:()=>h,RS:()=>m,VO:()=>l,Xu:()=>u,hr:()=>d,i3:()=>g,ig:()=>o,kG:()=>p,nL:()=>a,q_:()=>s,vi:()=>i,zG:()=>_});let i="attachment--thumbnailButton--CfAkK",a="attachment--thumbnailButtonFigmake--Cc6Ow",o="attachment--selectedThumbnailButton--x2RnD attachment--thumbnailButton--CfAkK",s="attachment--thumbnailImage--Jx4fa",l="attachment--lightOverlay--F8qzZ attachment--overlay--dIw1C",c="attachment--publishedThumbnailContainer--oFj0f",d="attachment--pendingThumbnailContainer--iL-xu",u="attachment--darkOverlay--l3K9x attachment--overlay--dIw1C",p="attachment--composerContainer--mP7Kx",m="attachment--pendingThumbnailContainerFigmake--jql83",h="attachment--deleteBadge--9aSjm",_="attachment--deleteBadgeFigmake--Lfstf",g="attachment--xIcon--hhlua"},649567:(e,r,n)=>{n.d(r,{$S:()=>c,Du:()=>S,F7:()=>o,GI:()=>b,In:()=>I,KK:()=>L,Lo:()=>_,MJ:()=>g,OM:()=>h,Qq:()=>A,SD:()=>P,UR:()=>s,VM:()=>l,WJ:()=>O,WO:()=>w,YD:()=>C,aW:()=>R,eX:()=>a,ex:()=>N,g2:()=>v,k8:()=>f,lo:()=>E,wC:()=>p,wG:()=>d,wb:()=>u,xH:()=>y,xS:()=>i,xe:()=>m,zl:()=>T});let i="thread_comment--threadHeaderLeft--gppoV thread_comment--_threadHeader--59aR8",a="thread_comment--threadHeaderRight--1gMsu thread_comment--_threadHeader--59aR8",o="thread_comment--threadHeaderContainer--0TaTS",s="thread_comment--threadHeaderButton--psBeY",l="thread_comment--threadHeaderButtonInactive--LhTNi",c="thread_comment--addReactionButton--n1Dj5",d="thread_comment--loader--GUeJt",u="thread_comment--threadContainer--oH8Ia",p="thread_comment--threadContainerCommunityDetailsPage--W6Cmv thread_comment--threadContainer--oH8Ia",m="thread_comment--threadContainerAnimated--OT8HU thread_comment--threadContainer--oH8Ia",h="thread_comment--threadContainerInner--Bzqm7",_="thread_comment--threadElement--4grcZ thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos13--xW8hS text--_fontBase--QdLsd",g="thread_comment--threadElementReplyContainer--6vz0m thread_comment--threadElement--4grcZ thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos13--xW8hS text--_fontBase--QdLsd",f="thread_comment--threadSubelementNoMargin--aGW6z",E="thread_comment--indentedQuickReplyThreadSubelement--PR9a5 thread_comment--threadSubelementNoMargin--aGW6z",y="thread_comment--quickReplyThreadSubelementNoMargin--MD3aF thread_comment--threadSubelementNoMargin--aGW6z",b="thread_comment--indentedThreadSubelement--gs1fI thread_comment--threadSubelement--7-le3 thread_comment--threadSubelementNoMargin--aGW6z",v="thread_comment--rightJustified--lK8hG",T="thread_comment--leftJustified--HHuN0",I="thread_comment--quickReplyThreadElement--cZUZj thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd",S="thread_comment--authorAvatar--xOCLt",w="thread_comment--authorHandle--fmYkb thread_comment--headerLabel--Oq7ar",A="thread_comment--text--FHTSU",C="thread_comment--grayLabel--6ZZkD thread_comment--headerLabel--Oq7ar",N="thread_comment--iconButtonSpace--VkGFf",L="thread_comment--attachmentsContainer--lOeTy",O="thread_comment--reactionsContainer--n2YcQ",R="thread_comment--resolvedIcon--YSM3V",P="thread_comment--loadingAvatar--82RED comment_cluster_elements--loadingSpinner--6derj"},149906:(e,r,n)=>{n.d(r,{Gm:()=>f,MP:()=>h,OX:()=>l,Sg:()=>o,U0:()=>a,bQ:()=>g,fP:()=>i,i8:()=>_,iQ:()=>u,mr:()=>s,o1:()=>E,oD:()=>d,q9:()=>m,uX:()=>p,xu:()=>c});let i="thread_comment_composer--inputSectionWrapper--Bxyab",a="thread_comment_composer--newComment--eYLj7",o="thread_comment_composer--composerEmpty--VgMY7",s="thread_comment_composer--highlighted--GPAOe",l="thread_comment_composer--editableTypeahead--9R6Yd text--fontPos13--xW8hS text--_fontBase--QdLsd",c="thread_comment_composer--leftComposerButtonGroup--6jQ3I",d="thread_comment_composer--submitUpArrowIcon--e8uT9",u="thread_comment_composer--submitUpArrowIconDisabled--iPBY3 thread_comment_composer--submitUpArrowIcon--e8uT9",p="thread_comment_composer--textButton--GUo5c",m="thread_comment_composer--editSubmitButtons--GyqGL",h="thread_comment_composer--replyComposerContainer---8DSl",_="thread_comment_composer--replyAuthorElement--qze1r",g="thread_comment_composer--errorFallback--G5K6y text--fontPos13--xW8hS text--_fontBase--QdLsd thread_comment_composer--inputSectionWrapper--Bxyab",f="thread_comment_composer--errorFallbackNewComment--xlyNp thread_comment_composer--errorFallback--G5K6y text--fontPos13--xW8hS text--_fontBase--QdLsd thread_comment_composer--inputSectionWrapper--Bxyab thread_comment_composer--newComment--eYLj7",E="thread_comment_composer--actions--7LRnN"},404712:(e,r,n)=>{},957070:(e,r,n)=>{n.d(r,{sx:()=>i});let i="fullscreen_view--fontsIcon--a4W8y"},61674:(e,r,n)=>{n.d(r,{GM:()=>i});let i="keyboard_shortcut_panel--spacerTab--yNO02"},645801:(e,r,n)=>{n.d(r,{QT:()=>i});let i="component_sidebar_asset_tile--focusableElementWrapper---mXHu"},527603:(e,r,n)=>{n.d(r,{FF:()=>h,GR:()=>p,Ib:()=>_,Ms:()=>l,N4:()=>g,NK:()=>f,OD:()=>y,Ol:()=>C,Tq:()=>S,UA:()=>E,Vk:()=>m,Vs:()=>i,XK:()=>O,Yc:()=>T,aC:()=>A,aS:()=>s,bF:()=>w,bo:()=>a,fh:()=>o,hs:()=>L,nl:()=>c,oV:()=>u,v:()=>I,vZ:()=>b,wi:()=>v,xC:()=>N,yg:()=>d});let i="library_item_tile--tile--okxBn",a="library_item_tile--tileFigJam--BkXTr library_item_tile--tile--okxBn",o="library_item_tile--tileGrid--wgcTu library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",s="library_item_tile--tileGridBase--xcbaX library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",l="library_item_tile--tileGridCompact--a7lPd library_item_tile--tileGridBase--xcbaX library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",c="library_item_tile--tileList--yPfDI library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",d="library_item_tile--tileListLarge--aoNFs library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",u="library_item_tile--tileListLargeNoPadding--QnDtc library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",p="library_item_tile--thumbAndNameWrapper--FT1HH",m="library_item_tile--thumbAndNameWrapperGrayscale--FGh2L library_item_tile--thumbAndNameWrapper--FT1HH",h="library_item_tile--thumb--MNoWO",_="library_item_tile--thumbWithShadowOnHover--V8LMf library_item_tile--thumb--MNoWO",g="library_item_tile--thumbScaledDown--usdag library_item_tile--thumb--MNoWO",f="library_item_tile--thumbFullPage--ox1s1",E="library_item_tile--nameGrid--rnFsh library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",y="library_item_tile--nameList--ezsvn library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",b="library_item_tile--nameListLarge--5iAF2 library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",v="library_item_tile--thumbWrapper--fmgue library_item_tile--thumbWrapperNoBg--dq7A6",T="library_item_tile--thumbWrapperNoBg--dq7A6",I="library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6",S="library_item_tile--thumbWrapperListView--zLZLK library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6",w="library_item_tile--variableSetThumb--cCo2-",A="library_item_tile--variableTypeIcon--58dL0",C="library_item_tile--thumbContainer--7rKmQ",N="library_item_tile--numVariants--tOsFg library_item_tile--_numVariantsBase--039pu",L="library_item_tile--numVariantsList--aGNbh library_item_tile--_numVariantsBase--039pu",O="library_item_tile--tileBorder--clelb"},547952:(e,r,n)=>{},540964:(e,r,n)=>{n.d(r,{g_:()=>a,j3:()=>i});let i="inset 0px 0px 0px 0.5px var(--color-border)",a="5px"},234505:(e,r,n)=>{},938674:(e,r,n)=>{n.d(r,{Bj:()=>g,DE:()=>f,Dy:()=>i,Lo:()=>u,S8:()=>l,VW:()=>s,bu:()=>h,hD:()=>E,iU:()=>d,iY:()=>m,or:()=>a,p:()=>_,u0:()=>o,vD:()=>p,z8:()=>c});let i="multiplayer_cursors--cursor--n8aPY",a="multiplayer_cursors--cursorPointer--ya3cR",o="multiplayer_cursors--cursorImage--hYFE4",s="multiplayer_cursors--nameContainer--O1WsV",l="multiplayer_cursors--nameContainerCloserToCursor--8L8SW",c="multiplayer_cursors--isPointingRight--eOPEm",d="multiplayer_cursors--message--1NMSI multiplayer_cursors--nameContainer--O1WsV",u="multiplayer_cursors--messageText--jI1cQ",p="multiplayer_cursors--topMessageLine--uwXou",m="multiplayer_cursors--cursorName--i776D",h="multiplayer_cursors--cursorNameSmall--Cy-9n",_="multiplayer_cursors--multiplayerHighFiveCenteringContainer--knxoP",g="multiplayer_cursors--multiplayerPointerForHighFive--hpa2g",f="multiplayer_cursors--multiplayerPointerForHighFiveHidden--V-bo-",E="multiplayer_cursors--chatBackground--hGJJf"},622978:(e,r,n)=>{n.d(r,{E7:()=>u,EA:()=>c,EU:()=>d,P0:()=>l,TK:()=>o,V3:()=>i,W5:()=>a,aN:()=>s});let i="object_row--layerIcon--dTOdu",a="object_row--customLayerIcon--SlCXj object_row--layerIcon--dTOdu",o="object_row--customMenuLayerIcon--JK53S object_row--layerIcon--dTOdu",s="object_row--customComponentMenuLayerIcon--SWH-7 object_row--layerIcon--dTOdu",l="object_row--iconWrapper--ivRSW",c="object_row--stickyIconWrapper--UycmN",d="object_row--stickyIconWrapperOutOfView--riwK8",u="object_row--iconOverlay--gPp-S"},214758:(e,r,n)=>{},492929:(e,r,n)=>{n.d(r,{X3:()=>i,f$:()=>a,lo:()=>s,x7:()=>o});let i="chit--chitThumbnail--KxCGp",a="chit--chitAlpha--Mn-aK",o="chit--chit--WdWdx",s="chit--chitBorder--ydYLm"},651425:(e,r,n)=>{n.d(r,{$:()=>b,$f:()=>s,As:()=>f,Bx:()=>v,DQ:()=>C,Gz:()=>u,K5:()=>o,LK:()=>w,Om:()=>l,UU:()=>_,Ul:()=>A,VB:()=>d,ZM:()=>y,ab:()=>a,bE:()=>S,cZ:()=>c,fz:()=>g,it:()=>I,lF:()=>E,mL:()=>T,n:()=>i,vQ:()=>h,y4:()=>m,yW:()=>p,zz:()=>N});let i="colors_inspect_panel--colorContainer--uDe3T",a="colors_inspect_panel--colorContainerUI3--JoJy0 colors_inspect_panel--colorContainer--uDe3T",o="colors_inspect_panel--propertyColorRowTall--5z3CC colors_inspect_panel--_propertyColorRow--gGOzK inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni",s="colors_inspect_panel--propertyColorRowTallUI3--UBAV1 colors_inspect_panel--_propertyColorRow--gGOzK inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni",l="colors_inspect_panel--propertyColorRowShortUI3--KuuY- colors_inspect_panel--_propertyColorRow--gGOzK inspect_panels--basePropertyRow--dLxSz inspect_panels--_basePropertyRow--StmAE",c="colors_inspect_panel--propertyRowTwoColumn--opscx",d="colors_inspect_panel--styleNameRow--RknQ9 inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni",u="colors_inspect_panel--paintIcon--MVzOV",p="colors_inspect_panel--paintName--t-J8u text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",m="colors_inspect_panel--styleNameContainer--HbhgI text--fontPos11--2LvXf text--_fontBase--QdLsd inspect_panels--tallRow--W9eni",h="colors_inspect_panel--styleNameContainerUI3--98G0T",_="colors_inspect_panel--stylePaintRow--5EqOv",g="colors_inspect_panel--gradientPaintRow--CYk-v",f="colors_inspect_panel--paintColor--3DbXu text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa ellipsis--ellipsis--Tjyfa",E="colors_inspect_panel--gradientSingleRow--OZZVn",y="colors_inspect_panel--rowInStyle--DcVuq",b="colors_inspect_panel--gradientVariableSingleRow--Hse0d",v="colors_inspect_panel--deletedIcon--mbkH9",T="colors_inspect_panel--blendModeUI3--NIfqt ellipsis--ellipsis--Tjyfa",I="colors_inspect_panel--variableIndentUI3--xVkgJ",S="colors_inspect_panel--rawColorUI3--1jNdn",w="colors_inspect_panel--rawColorUI3Label--kkgH1 ellipsis--ellipsis--Tjyfa",A="colors_inspect_panel--rawColorUIGradientLabel--dUAE- ellipsis--ellipsis--Tjyfa",C="colors_inspect_panel--rawColorUI3Hoverable--iWU5n",N="colors_inspect_panel--rawColorIndentUI3--BIVFU"},892299:(e,r,n)=>{n.d(r,{DV:()=>h,Dn:()=>p,FL:()=>y,KQ:()=>g,LG:()=>S,MC:()=>v,N4:()=>m,Om:()=>E,PD:()=>o,VM:()=>T,Y7:()=>_,cL:()=>u,ed:()=>a,gn:()=>s,lN:()=>f,lS:()=>d,l_:()=>I,lo:()=>l,v9:()=>i,wr:()=>c,yr:()=>b});let i="collapsible_property_panel--showOnTitleHover--yqPoD",a="collapsible_property_panel--panelTitleRowOuter--i5K0R",o="collapsible_property_panel--emptyPanelTitleRowOuter---pBf9 collapsible_property_panel--panelTitleRowOuter--i5K0R",s="collapsible_property_panel--ui3Row--9nUnV collapsible_property_panel--_hoverTarget--eRHji",l="collapsible_property_panel--ui3RowSelected--FZgmc",c="collapsible_property_panel--largePreviewRow--0k3Kr",d="collapsible_property_panel--ui3RowButtons--xHUX3",u="collapsible_property_panel--styleTitle--a7BMw",p="collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",m="collapsible_property_panel--titleButton--7yILK",h="collapsible_property_panel--fadeOutOnTitleUnhover--15rtL",_="collapsible_property_panel--panelTitleRowInGrid--Kq3wh collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",g="collapsible_property_panel--panelTitleRowInGridWithButton--8yQlq",f="collapsible_property_panel--panelEmptyTitleRowInGrid--TlCXf collapsible_property_panel--panelEmptyTitleRow--vDg0z collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",E="collapsible_property_panel--panelStyleTitle--R1Tqo collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",y="collapsible_property_panel--panelMixedMessage--UuCKj",b="collapsible_property_panel--panelTitleText--vFGYT",v="collapsible_property_panel--titleButtons--k6Lxk",T="collapsible_property_panel--dropdownOption--cy1JZ",I="collapsible_property_panel--updateIcon--0YXMO",S="collapsible_property_panel--addButtonContainer--KbnzE"},433906:(e,r,n)=>{n.d(r,{A:()=>i,BI:()=>m,C_:()=>g,Hs:()=>f,Rb:()=>u,Tu:()=>a,W1:()=>p,gE:()=>s,hg:()=>c,lG:()=>l,p3:()=>d,p5:()=>o,t7:()=>h,wH:()=>_});let i="style_title--collapsedPanelPreviewTitle--jpW2- collapsible_property_panel--styleRowTitle--YsCp4",a="style_title--readOnly--6RqsN",o="style_title--selectedCollapsedPanelPreviewTitle--x1waj style_title--collapsedPanelPreviewTitle--jpW2- collapsible_property_panel--styleRowTitle--YsCp4",s="style_title--numTextStyleOverrides--VcFQr",l="style_title--narrowCollapsedPanelPreviewTitle---OnQ7",c="style_title--collapsedPanelPreviewIcon--TYMgV",d="style_title--styleTitleName--lJDZI ellipsis--ellipsis--Tjyfa",u="style_title--customTitleName--Y--0d",p="style_title--ui3SelectionStyleItemTitle--bYnM2",m="style_title--hoverable--V2b9S",h="style_title--ui3SelectionStyleItemTitleStretch--h-OHJ",_="style_title--selected--9K15m",g="style_title--secondarySelected--gqSFt",f="style_title--pointerEvents--9-qzp"},18327:(e,r,n)=>{n.d(r,{Lt:()=>c,Qz:()=>o,Wv:()=>i,be:()=>d,d_:()=>m,f0:()=>p,hF:()=>u,hL:()=>h,in:()=>a,kL:()=>s,t_:()=>l});let i="combo_box--selectInputExpanded--SgrsN select--selectInputExpanded--Lz6m4",a="combo_box--focused--vZXh1 select--selectInputFocused--c-NQ7",o="combo_box--containerDisabled--bNA2c combo_box--_container--uIFGE raw_components--singleRowHeight--dKM4t",s="combo_box--container--Vml-n combo_box--_container--uIFGE raw_components--singleRowHeight--dKM4t select--comboBoxShowChevronOnHover--rVuud",l="combo_box--selectDisabled--yJxRy combo_box--_select--T75K- select--comboBoxSelectDisabled--EWdld select--_comboBoxSelect--zpLTH",c="combo_box--select--JMl-q select--comboBoxSelect--T-iQ- select--_comboBoxSelect--zpLTH combo_box--_select--T75K- select--comboBoxSelectDisabled--EWdld select--_comboBoxSelect--zpLTH",d="combo_box--selectInput--fikB4 raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",u="combo_box--input--CW6xE raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",p="combo_box--scrubbableControl--t9lCI raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t combo_box--_scrubbableControlBase--jZV-D",m="combo_box--withSvg--BjUJI",h="combo_box--noBorderOnFocus--7Ago-"},367995:(e,r,n)=>{n.d(r,{TQ:()=>i});let i="containing_assets_panel--componentName--Lwkmx"},228217:(e,r,n)=>{n.d(r,{$r:()=>k,BT:()=>R,Bx:()=>$,Cv:()=>P,EC:()=>d,EX:()=>o,FV:()=>N,GB:()=>I,GI:()=>l,H:()=>p,IX:()=>E,I_:()=>_,Is:()=>S,Kx:()=>z,L3:()=>M,MX:()=>A,NI:()=>D,O1:()=>w,QK:()=>B,RK:()=>F,TL:()=>m,Tp:()=>V,Xd:()=>b,YJ:()=>g,Z6:()=>C,cD:()=>a,eV:()=>i,hj:()=>Y,kA:()=>y,kv:()=>K,mH:()=>W,mK:()=>s,n1:()=>u,np:()=>O,os:()=>f,p:()=>G,py:()=>h,ug:()=>T,vc:()=>v,wM:()=>L,wh:()=>c,x7:()=>x,zc:()=>U,zm:()=>H});let i="paint_panels--variableValue--2xpUO ellipsis--ellipsis--Tjyfa",a="paint_panels--typeContainer--e-3I2",o="paint_panels--colorInput--nSz13",s="paint_panels--noMargin--qdWOe",l="paint_panels--typeContainerHidden--5zTrp paint_panels--typeContainer--e-3I2",c="paint_panels--colorInputHidden--ZojfD paint_panels--colorInput--nSz13",d="paint_panels--opacityInputHidden--I2GEk",u="paint_panels--opacityInputContainer--oqlsk",p="paint_panels--strokeInput--Zg8DO raw_components--flushLeft--YH-5P",m="paint_panels--strokeWeight---jmn2 raw_components--borderFocusWithin--BaipZ",h="paint_panels--strokeWeightNew--HHR3i raw_components--borderFocusWithin--BaipZ",_="paint_panels--strokeWeightVar--gxKxA",g="paint_panels--strokeWeightVarNew--CkN1w",f="paint_panels--strokeAlign--UKGAx",E="paint_panels--strokeAlignNew--6VVfv",y="paint_panels--strokeAlignInput--P3fhz",b="paint_panels--strokeAlignChevron--9p1Hk",v="paint_panels--leftEndCap--tHF9y",T="paint_panels--endpointRow--k5uAa",I="paint_panels--swapCap--eAzkX",S="paint_panels--rightEndCap--Oy9SG",w="paint_panels--endPointSvg--E5Qlh",A="paint_panels--endPointSvgShort--YHOkF",C="paint_panels--endPointOption--NrunB",N="paint_panels--advancedStroke--653Nf",L="paint_panels--paintPanelColorValueContainer--squRD paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",O="paint_panels--fitToSizePaintPanelColorValueContainer--XMkEF paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",R="paint_panels--paintPanelVariableValueContainer--bxDVz paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",P="paint_panels--fitToSizePaintPanelVariableValueContainer---k9XP paint_panels--paintPanelVariableValueContainer--bxDVz paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",D="paint_panels--paintPanelValueSelected--QHJsV",M="paint_panels--paintPanelValueSelectedSecondary--6uSZ2",k="paint_panels--paintPanelIconContainer--l4u-f",F="paint_panels--paintPanelRow--NZUf3",x="paint_panels--chit--twQEy",U="paint_panels--iconContainer--1gum-",B="paint_panels--inactiveLabel--gsLwE transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO",V="paint_panels--onDrop--Va3gz",G="paint_panels--paintRowIcons--5b-UG",H="paint_panels--iconVisibleOnHover--1rweo",K="paint_panels--checkbox--1acob",W="paint_panels--checkboxLabel--q0GyI",z="paint_panels--checkboxLabelRow--ZNgFg",$="paint_panels--deletedIcon--nXIQH",Y="paint_panels--ui3EndpointFlipped--JAuAi"},386160:(e,r,n)=>{},210983:(e,r,n)=>{n.d(r,{Rh:()=>o,Tw:()=>i,iw:()=>a});let i="prototype_video_playback_panel--videoErrorPanelFooter--cdsDJ",a="prototype_video_playback_panel--ui3VideoErrorText--l6t6c",o="prototype_video_playback_panel--ui3VideoErrorLink--y1RWa"},973219:(e,r,n)=>{n.d(r,{Ah:()=>E,BI:()=>M,Bg:()=>T,CZ:()=>N,DS:()=>k,Dn:()=>L,EA:()=>d,LE:()=>w,LJ:()=>u,No:()=>f,O1:()=>h,PB:()=>b,PQ:()=>i,Pf:()=>s,Tz:()=>D,U:()=>g,X0:()=>S,Z4:()=>m,Zz:()=>C,_Z:()=>c,a2:()=>v,ai:()=>_,bW:()=>R,ht:()=>A,iY:()=>P,kR:()=>a,l$:()=>I,pc:()=>p,pq:()=>o,sI:()=>O,vR:()=>y,wh:()=>l});let i="raw_components--border--SKh2u",a="raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip",o="raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",s="raw_components--label--4LcC7 raw_components--base--T7G0z",l="raw_components--labelInactive--tm1fU raw_components--label--4LcC7 raw_components--base--T7G0z",c="raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",d="raw_components--textInputSoftDisabled--M5O7I",u="raw_components--noPlaceholderLine--KBoD7",p="raw_components--textAreaInput--mi1Ag raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",m="raw_components--noLeftBorder--QE-ZB",h="raw_components--squareRightBorder--ktojw",_="raw_components--chevron--nJiSt",g="raw_components--wide--F33jp",f="raw_components--transparentIconButtonEnabled--l2bm3 raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",E="raw_components--iconButtonDisabled--SoTjK raw_components--_iconButton---ybo6",y="raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6",b="raw_components--outlineButton--FyUoF",v="raw_components--modalPanel--wmDfl",T="raw_components--propertiesPanelErrorBox--N2p6o",I="raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",S="raw_components--row200--Dgjc6 raw_components--row200Height--wotRv raw_components--_row--rHucX",w="raw_components--row150--2Q0-i raw_components--_rowHeight150--ZzVcZ raw_components--_row--rHucX",A="raw_components--row125--J20Ob raw_components--_rowHeight125--G2mEi raw_components--_row--rHucX",C="raw_components--labelRow--wxp77 raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",N="raw_components--rowSelected--M2Eip",L="raw_components--panelTitle--VAQQA",O="raw_components--panelTitleWithoutChevron--qIjza",R="raw_components--collapsiblePanelTitle--PXa3p",P="raw_components--panelTitleExtended--GoX-m raw_components--panelTitle--VAQQA",D="raw_components--panelTitleFaded--cUUkM raw_components--panelTitle--VAQQA",M="raw_components--hoverable--TNiAp",k="raw_components--panelIconContainer--V9E3Z"},151685:(e,r,n)=>{n.d(r,{AN:()=>g,BB:()=>p,BI:()=>w,CU:()=>L,Df:()=>V,H9:()=>B,HT:()=>E,Hi:()=>l,IK:()=>f,IZ:()=>A,JB:()=>M,O:()=>x,Om:()=>k,P2:()=>y,QF:()=>T,Qc:()=>m,Qw:()=>_,UY:()=>o,Vb:()=>h,Wm:()=>v,ZM:()=>P,ai:()=>u,fE:()=>O,hF:()=>s,hH:()=>a,kL:()=>i,l8:()=>C,nJ:()=>N,pR:()=>c,re:()=>R,sS:()=>F,tN:()=>d,uK:()=>I,w$:()=>U,x1:()=>b,x7:()=>G,yF:()=>S,z6:()=>D});let i="select--container--UJhOt raw_components--singleRowHeight--dKM4t",a="select--hiddenInput--3smCs raw_components--selectHiddenInput--bJ8vl",o="select--safariVoiceover--meUJ0",s="select--input--meQUx raw_components--base--T7G0z raw_components--border--SKh2u raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t ellipsis--ellipsis--Tjyfa",l="select--fauxFocus--D1GLI",c="select--inputDisabled--08EdX select--input--meQUx raw_components--base--T7G0z raw_components--border--SKh2u raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t ellipsis--ellipsis--Tjyfa",d="select--inputTextWrapper--kEwIr",u="select--chevron--KfTY2",p="select--inputWithSvg--t6hLE",m="select--inputAlignRight--5HWz5",h="select--inputSvg--Sqy6u",_="select--backgroundOnHover--5kQnp",g="select--inputText--I3JIv select--inputTextWrapper--kEwIr",f="select--inputTextTruncated--j6p-H ellipsis--ellipsis--Tjyfa",E="select--inputTextFill--H3tO-",y="select--dropdownContainer--0zweb _overlayBase--_overlayBase--Rkj8l",b="select--dropdownScrollClip--5ft6D",v="select--dropdown--8DAM-",T="select--dropdownContentWrapper--yDAla",I="select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",S="select--divider--HfbAX",w="select--optionFocused--8DSsx select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",A="select--optionDisabled--fEanh select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",C="select--optionHeader--34zhZ select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",N="select--optionTruncatedText--QqUBO",L="select--optionTextRemoveRightPadding--ULI6k",O="select--optionFullWidth--sW3Zl",R="select--optionText--D3BVM select--optionTruncatedText--QqUBO ellipsis--ellipsis--Tjyfa",P="select--rightLabel--I-ojL",D="select--check--xQ8c3",M="select--rightCheck--UdnTu",k="select--rightCheckText--vWTPu",F="select--topScrollIndicator--nys8N select--scrollIndicator--U0Wy-",x="select--bottomScrollIndicator--C7EE7 select--scrollIndicator--U0Wy-",U="select--scrollIndicatorChevron--9-te-",B="select--optionIcon--yngNx",V="select--iconToReplaceCheck--MMwXJ",G="select--chit--WI9C6"},960598:(e,r,n)=>{n.d(r,{Kk:()=>s,be:()=>i,j1:()=>o,kk:()=>a});let i="stack_panel_v4--selectInput--DdAPZ",a="stack_panel_v4--comboBoxInput--ewblc dimension_input--comboBoxInput--J0jWQ",o="stack_panel_v4--comboBoxPillsContainer--BiDzq dimension_input--comboBoxPillsContainer--Uv3fj",s="stack_panel_v4--icon--PJRhG"},689119:(e,r,n)=>{n.d(r,{Ev:()=>d,Ii:()=>s,Qb:()=>c,Vf:()=>i,Z7:()=>l,jO:()=>a,lG:()=>o,t:()=>u});let i="states_panel--errorStateWithCloseButtonBox--jayB0 states_panel--errorStateBoxBase--NGwjK",a="states_panel--errorStateBoxFlush--LYAGK states_panel--errorStateBox--AYnRU states_panel--errorStateBoxBase--NGwjK",o="states_panel--errorStateBoxRegular--nhPoJ states_panel--errorStateBox--AYnRU states_panel--errorStateBoxBase--NGwjK",s="states_panel--errorStateBoxHeader--zgSnc",l="states_panel--errorStateBoxTitle--pZ8tj",c="states_panel--errorStateBoxTitleText--VY8En",d="states_panel--errorStateBoxWarningIcon--5BPCj",u="states_panel--ui3ErrorStateBoxContent--07s-y"},115073:(e,r,n)=>{n.d(r,{$P:()=>u,D0:()=>a,He:()=>p,Hn:()=>i,Q:()=>c,S:()=>o,_f:()=>m,qv:()=>l,ut:()=>d,y7:()=>s});let i="style_picker--pickerTitleRow--Eoe-0",a="style_picker--pickerTitle--xydlB header_modal--headerModalTitle--32hFx",o="style_picker--loadingSpinner--JIN5X",s="style_picker--emptyStateContainer--wOVrQ",l="style_picker--emptyStateMessage--Z11Lr text--fontPos11--2LvXf text--_fontBase--QdLsd",c="style_picker--createStyleButton--UcGo9",d="style_picker--browseLibrariesButton--KtnxN",u="style_picker--search--2I-82",p="style_picker--contextMenu--3hOCZ",m="style_picker--restoreStyleButtonRow--rzSEs"},100987:(e,r,n)=>{n.d(r,{QK:()=>a,hF:()=>i});let i="transform_panel--input--nRDX0 raw_components--flushLeft--YH-5P",a="transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO"},483189:(e,r,n)=>{n.d(r,{H5:()=>u,Od:()=>c,Pf:()=>l,Pv:()=>s,RF:()=>i,Y7:()=>p,by:()=>h,hF:()=>d,ig:()=>m,kb:()=>a,pG:()=>o});let i="ui3_modal_rows--ui3TwoColumnModalRow--ktXqt ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",a="ui3_modal_rows--left--5-4DR",o="ui3_modal_rows--right--TTLb7",s="ui3_modal_rows--ui3OneColumnModalRow--wLU6K ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",l="ui3_modal_rows--label--vQA2E",c="ui3_modal_rows--ui3LabelOneInputRow--kpsQB ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",d="ui3_modal_rows--input--WH2lM",u="ui3_modal_rows--ui3LabelOneInputDoubleRow--8P9kp ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",p="ui3_modal_rows--ui3LabelTwoInputRow---zU18 ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",m="ui3_modal_rows--leftInput--pkjk8",h="ui3_modal_rows--rightInput--mOj6z"},627977:(e,r,n)=>{n.d(r,{nW:()=>i,zF:()=>a});let i="plugin_parameter_entry--pillIcon--y5eMK",a="plugin_parameter_entry--pluginLabelIcon--ct5AV plugin_parameter_entry--pillIcon--y5eMK"},575164:(e,r,n)=>{n.d(r,{Tk:()=>i,ZR:()=>a});let i="quick_actions--noresult--qrETa quick_actions--centerItemsVertically--4COtP",a="quick_actions--pluginIcon--d9b13"},708115:(e,r,n)=>{n.d(r,{kv:()=>a,wn:()=>i});let i="quick_actions--resultDisabled--tjdlc",a="quick_actions--checkbox--jhzha"},709864:(e,r,n)=>{n.d(r,{Dn:()=>b,FE:()=>A,FH:()=>g,Jk:()=>p,LY:()=>y,Mg:()=>O,QO:()=>I,S0:()=>_,Sn:()=>w,UF:()=>L,WB:()=>f,Xf:()=>a,Y7:()=>d,cm:()=>m,hF:()=>s,i5:()=>h,l4:()=>o,n$:()=>N,om:()=>c,r2:()=>T,r4:()=>v,sH:()=>i,sy:()=>S,vu:()=>C,wR:()=>l,wg:()=>u,zj:()=>E});let i="zoom_menu--zoomMenuBase--Uy7YH",a="zoom_menu--zoomMenu--3OqMw",o="zoom_menu--fullHeightSidebarZoomMenu--ElxlP",s="zoom_menu--input---hdA- input--darkInput--zfbnG",l="zoom_menu--zoomMenuContainer--DJXOL",c="zoom_menu--zoomMenuContainerActive--E7m0j",d="zoom_menu--fullHeightSidebarZoomMenuContainer--So738",u="zoom_menu--fullHeightSidebarZoomMenuContainerActive--jPaQb zoom_menu--fullHeightSidebarZoomMenuContainer--So738",p="zoom_menu--fullHeightSidebarZoomMenuContainerCollapsed--FpFJm zoom_menu--fullHeightSidebarZoomMenuContainer--So738",m="zoom_menu--zoomAmount--Qb6gL",h="zoom_menu--fullHeightSidebarZoomAmount---M-Dz zoom_menu--zoomAmount--Qb6gL",_="zoom_menu--fullHeightSidebarZoomAmountActive--EKFn- zoom_menu--fullHeightSidebarZoomAmount---M-Dz zoom_menu--zoomAmount--Qb6gL",g="zoom_menu--chevronContainer---jqeH",f="zoom_menu--fullHeightSidebarChevronActive--s0s-C",E="zoom_menu--zoomInputContainer---Xqu1",y="zoom_menu--middleZoomButton--17GYR",b="zoom_menu--zoomMiddleChevronContainer--XxlkP",v="zoom_menu--zoomMiddleChevronContainerActive--dN2OQ zoom_menu--zoomMiddleChevronContainer--XxlkP",T="zoom_menu--zoomMiddleChevronSVGContainer--6TlCz",I="zoom_menu--zoomMinus--wljce",S="zoom_menu--zoomPlus--B-iye",w="zoom_menu--enabled--JWySc",A="zoom_menu--feedZoomPan--AxC05",C="zoom_menu--active--WlOsd",N="zoom_menu--annotationsCategoryAllIcon--PAi2c",L="zoom_menu--annotationsCategoryIcon--PoqHO",O="zoom_menu--annotationCategoryLabel--9Fsmx"},875495:(e,r,n)=>{n.d(r,{Bx:()=>u,EE:()=>s,Gq:()=>c,Hw:()=>d,Io:()=>a,Mk:()=>o,Qq:()=>l,yQ:()=>p,zr:()=>i});let i="variable_pill--root--0ibUT",a="variable_pill--pill--NU8eR variable_pill_base--pillBase--HIf9B",o="variable_pill--useHover--S6o02",s="variable_pill--forceHover--EDu9s",l="variable_pill--text--Fm5k5",c="variable_pill--invalid--dxyCJ",d="variable_pill--nameAndIcons--Cyvcc",u="variable_pill--deletedIcon--QaRlG",p="variable_pill--ui3PillHeight--rEy4E"},134671:(e,r,n)=>{n.d(r,{Er:()=>s,Fi:()=>m,JJ:()=>a,N:()=>p,Q_:()=>d,RH:()=>o,Uq:()=>c,eK:()=>u,pv:()=>i,xH:()=>l});let i="variable_pill_base--pillBase--HIf9B",a="variable_pill_base--pillHasIcon--qR8Mw",o="variable_pill_base--pillSelected--WuPhz",s="variable_pill_base--pillDisableHover--A9znd",l="variable_pill_base--pillDefault--5YSwx",c="variable_pill_base--pillDefaultComponent--GMeSg",d="variable_pill_base--pillDisabled--Xci9C",u="variable_pill_base--pillDisabledTertiary--C2fJb",p="variable_pill_base--pillInSelection--HupPT",m="variable_pill_base--pillNarrow--Oai69"},522242:(e,r,n)=>{n.d(r,{QW:()=>a,qS:()=>i});let i="go_to_stripe_button--badge--aJn3P text--fontPos12--YsUAh text--_fontBase--QdLsd",a="go_to_stripe_button--warningIcon--eeAU7"},515640:(e,r,n)=>{n.d(r,{k:()=>i});let i="dock--dockDesign--kbym5 dock--dock--A6jIs"},269100:(e,r,n)=>{},968638:(e,r,n)=>{n.d(r,{$C:()=>h,B6:()=>g,BG:()=>C,Cq:()=>L,D1:()=>l,F$:()=>s,FV:()=>p,Gy:()=>A,JW:()=>R,MJ:()=>d,ML:()=>D,NH:()=>m,QF:()=>O,UK:()=>c,VJ:()=>b,Vx:()=>F,Xb:()=>i,Y2:()=>P,Y9:()=>M,YB:()=>x,ZK:()=>f,Zv:()=>N,_P:()=>a,c6:()=>o,ez:()=>U,k7:()=>B,kQ:()=>V,lI:()=>v,lO:()=>T,lP:()=>u,o2:()=>w,od:()=>E,ot:()=>k,sI:()=>S,vt:()=>_,y2:()=>y,zZ:()=>I});let i="resource_tiles--showOnHover--2v687",a="resource_tiles--figjamPluginRowIconHoverBg--0GjEb",o="resource_tiles--fauxFocused--Tk7MC",s="resource_tiles--optionsButtonActive--CnmDE resource_tiles--optionsButton--B7MN2",l="resource_tiles--optionsButtonShowOnHover--kJQHm resource_tiles--optionsButton--B7MN2 resource_tiles--showOnHover--2v687",c="resource_tiles--pluginTitleBadgeContainer--Q-9cz",d="resource_tiles--browsePluginTile--Dl1N0 resource_tiles--_browsePluginTileBase--V7a7Y resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X",u="resource_tiles--pluginTileIcon--rmGOy resource_tiles--_browseTileIconBase--DDmKv",p="resource_tiles--pluginTileMeta--xgpJR",m="resource_tiles--browsePluginTileDevModeWizard--ApW9E",h="resource_tiles--browsePluginTileSmall--t70Gg resource_tiles--_browsePluginTileBase--V7a7Y resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X",_="resource_tiles--pluginTileIconLoading--mas66 resource_tiles--pluginTileIcon--rmGOy resource_tiles--_browseTileIconBase--DDmKv",g="resource_tiles--pluginTileName--9Isog text--fontPos12--YsUAh text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",f="resource_tiles--pluginTileSubheader--Fihho text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",E="resource_tiles--ctaButtonContainer--z2HxW",y="resource_tiles--priceBadgeContainer--6O7DF",b="resource_tiles--widgetMonetizationBadge--hXbF6",v="resource_tiles--ctaButton--qu-bG",T="resource_tiles--cta--JU9XJ text--fontPos12--YsUAh text--_fontBase--QdLsd",I="resource_tiles--buttonSubmenuChevron--af8r9",S="resource_tiles--buttonSubmenuChevronWhite--c7pTT resource_tiles--buttonSubmenuChevron--af8r9",w="resource_tiles--rowChevron--tIIjl",A="resource_tiles--widgetTileSmall--gtI7m resource_tiles--_widgetTileBase--pKu3B resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X text--fontPos11--2LvXf text--_fontBase--QdLsd",C="resource_tiles--widgetTile--OjUTk resource_tiles--_widgetTileBase--pKu3B resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X text--fontPos12--YsUAh text--_fontBase--QdLsd",N="resource_tiles--widgetTileIconSmall--Dox02 resource_tiles--_widgetTileIconBase--vgb2t resource_tiles--_browseTileIconBase--DDmKv",L="resource_tiles--widgetTileIcon--hGlOB resource_tiles--_widgetTileIconBase--vgb2t resource_tiles--_browseTileIconBase--DDmKv",O="resource_tiles--widgetTileMetadata--Ggrsh",R="resource_tiles--widgetTileNameContainer--HqAEf",P="resource_tiles--widgetTileName--hvW06 ellipsis--ellipsis--Tjyfa",D="resource_tiles--widgetTileSubheader--7-TT- ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",M="resource_tiles--paymentErrorIcon--w-8j9",k="resource_tiles--relativeContainer--7lvHF",F="resource_tiles--redDot---lNFV red_dot--baseRedDot--pgZV7",x="resource_tiles--saveButtonEditorSmall--Jt970 resource_tiles--_saveButton--mDwpY",U="resource_tiles--saveButtonVisible---tZad",B="resource_tiles--saveButtonEditorLarge--nKxZq resource_tiles--_saveButton--mDwpY",V="resource_tiles--svg16--B1UCN"},634218:(e,r,n)=>{n.d(r,{CY:()=>y,EJ:()=>S,EO:()=>C,JF:()=>m,Jg:()=>u,K1:()=>i,P9:()=>d,R2:()=>f,Rh:()=>p,SM:()=>c,TX:()=>E,UR:()=>v,Vw:()=>a,Wc:()=>h,Y5:()=>b,eo:()=>_,fp:()=>g,hS:()=>A,jT:()=>o,nd:()=>s,qG:()=>I,x7:()=>w,xR:()=>T,yl:()=>l});let i="header_modal--modalBackground--bcAoR",a="header_modal--transparentBackground--pG9jD",o="header_modal--modalContainer--yIJSk",s="header_modal--bottomSection--qH4em",l="header_modal--modal--2JYEN modal--modalShadow--d-rJf",c="header_modal--upperModal--guwaL header_modal--modal--2JYEN modal--modalShadow--d-rJf",d="header_modal--modal__scroll--T2IVi",u="header_modal--headerWithBottomBorder--O1ODQ",p="header_modal--headerSmall--WlWbO header_modal--header--M56yS",m="header_modal--headerLarge--JMHqT header_modal--header--M56yS",h="header_modal--headerHidden--JWFxb",_="header_modal--headerIconImg--OHQqh plugin--pluginIconBase--yAG5F",g="header_modal--headerIconSvg--dgaEs",f="header_modal--headerModalTitle--32hFx",E="header_modal--headerModalTitleWithoutOverflow--eQPzZ header_modal--headerModalTitle--32hFx ellipsis--ellipsis--Tjyfa",y="header_modal--fixedTop--eHgXF",b="header_modal--fixedCenter--wSN6F",v="header_modal--confirmationBody--ViOqF text--fontPos11--2LvXf text--_fontBase--QdLsd",T="header_modal--confirmationText--76-iq text--fontPos11--2LvXf text--_fontBase--QdLsd",I="header_modal--confirmButtonBox--FEPg6",S="header_modal--confirmationButton--Y-1oj text--fontPos11--2LvXf text--_fontBase--QdLsd",w="header_modal--cancelButton--3zDCc header_modal--confirmationButton--Y-1oj text--fontPos11--2LvXf text--_fontBase--QdLsd",A="header_modal--rightButtonsClassName--plY48",C="header_modal--modalBorderRadiusOverride--mLoQR"},639088:(e,r,n)=>{n.d(r,{Be:()=>s,DD:()=>_,Do:()=>C,F4:()=>b,G6:()=>l,Hx:()=>c,KA:()=>f,Lt:()=>A,Lu:()=>a,N4:()=>w,Rt:()=>S,U0:()=>v,Vq:()=>h,_Z:()=>g,aY:()=>y,bE:()=>u,iZ:()=>I,jE:()=>m,kL:()=>T,pL:()=>i,p_:()=>o,v0:()=>d,yl:()=>p,z3:()=>E});let i="modal--confirmButton--SNUDv",a="modal--cancelLink--gmgMU modal--button--ZJmGG",o="modal--list--AYXsM",s="modal--blueLink--9GcJu blue_link--blueLink--9rlnd",l="modal--modalFooterButtonGroup--G-glC",c="modal--modalFooter--doArv",d="modal--buttonRow--o2A0S",u="modal--groupedButtonRow--bwN6C modal--buttonRow--o2A0S",p="modal--modal--fXC8G modal--modalShadow--d-rJf modal--modalBare--AlP7E",m="modal--modalContent--P643j",h="modal--important--qfd6R",_="modal--title--sEkWg",g="modal--textInput---r1fJ",f="modal--tfaQrCode--Xy6Qb",E="modal--error--Kk49K",y="modal--code--zhp08",b="modal--codes--U1NYW",v="modal--avatarWithHandle--AJpEE",T="modal--container--LVq8G",I="modal--blockQuote--bzdW1 text--fontPos11--2LvXf text--_fontBase--QdLsd",S="modal--blockQuoteHeader--IKpaG",w="modal--blockQuoteText--nDUnj ellipsis--ellipsis--Tjyfa",A="modal--select--a5n-Q",C="modal--loadingSpinnerContainer--u3V2x"},809086:(e,r,n)=>{n.d(r,{$T:()=>l,Ar:()=>A,B9:()=>u,FQ:()=>T,Hn:()=>N,IL:()=>s,Lq:()=>c,Ny:()=>w,OQ:()=>y,P1:()=>_,TI:()=>m,ZA:()=>E,ZO:()=>h,_S:()=>o,a5:()=>I,b:()=>a,dC:()=>f,gF:()=>C,gh:()=>b,jS:()=>g,nW:()=>S,oX:()=>v,uS:()=>p,w0:()=>d,wV:()=>i});let i="pointer_modal--announcementPointerModalDark--9DD-M pointer_modal--announcementPointerModal---X9Ui",a="pointer_modal--closeButton--yKnli",o="pointer_modal--closeButtonExtraSpacing--e8erM",s="pointer_modal--announcementPointerModalLight--AaKLA pointer_modal--announcementPointerModal---X9Ui",l="pointer_modal--noPaddingPointerModal--avTDn pointer_modal--pointerModal--wrpFz",c="pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz",d="pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",u="pointer_modal--walkThroughModalAnimateFast--Xm453 pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",p="pointer_modal--closeButtonWhite--nj2uk",m="pointer_modal--primaryCtaButtonLight--WnZAX pointer_modal--primaryCtaButton--Snffw",h="pointer_modal--primaryCtaButtonDark--ZWijN pointer_modal--primaryCtaButton--Snffw",_="pointer_modal--secondaryCtaLinkButton--aoJ64",g="pointer_modal--secondaryCtaButtonLight---Dv4E pointer_modal--secondaryCtaButton--Jg0Yu",f="pointer_modal--secondaryCtaButtonDark--dKbwo pointer_modal--secondaryCtaButton--Jg0Yu",E="pointer_modal--footerDiv--JtCDN",y="pointer_modal--ctaContainer--luZLz",b="pointer_modal--noMotion--YIicU",v="pointer_modal--topTriangleBackground--bAkvB pointer_modal--topTriangle--eTQ3K",T="pointer_modal--topTriangleForeground--BZxHM pointer_modal--topTriangle--eTQ3K",I="pointer_modal--bottomTriangleBackground--GHZc5 pointer_modal--bottomTriangle--iDHi9",S="pointer_modal--bottomTriangleForeground--2hiBJ pointer_modal--bottomTriangle--iDHi9",w="pointer_modal--rightTriangleBackground--fw0l3 pointer_modal--rightTriangle--rQltw",A="pointer_modal--rightTriangleForeground--ReV7J pointer_modal--rightTriangle--rQltw",C="pointer_modal--leftTriangleBackground--GAtIC pointer_modal--leftTriangle--p5eQp",N="pointer_modal--leftTriangleForeground--shkXU pointer_modal--leftTriangle--p5eQp"},105100:(e,r,n)=>{n.d(r,{CU:()=>a,Uk:()=>o,hR:()=>i});let i="offline_prototype--progressIcon--Ye9zS",a="offline_prototype--learnMoreLink--SXs6g",o="offline_prototype--slidesOfflineButton--NCOL-"},784500:(e,r,n)=>{n.d(r,{Fp:()=>d,HF:()=>a,UT:()=>s,g7:()=>c,kv:()=>l,v6:()=>i,zG:()=>o});let i="options_menu--optionMenuResponsiveViewer--nakUc options_menu--optionMenu--9fG9u",a="options_menu--optionMenuForFooter--HiOGO options_menu--optionMenu--9fG9u",o="options_menu--optionMenuButton--9sq9i",s="options_menu--buttonChevron--N2JHA",l="options_menu--dropdownButtonForFooter--UIPTM",c="options_menu--deviceName--qS44h",d="options_menu--optionsMenuIconFixed--zXwsG"},201140:(e,r,n)=>{n.d(r,{$7:()=>s,Jf:()=>p,KK:()=>o,Qs:()=>l,S4:()=>_,Tp:()=>i,Xw:()=>c,h2:()=>g,lJ:()=>m,q9:()=>u,t0:()=>a,wc:()=>d,xQ:()=>h});let i="prototype--background--C7T7U",a="prototype--backgroundTransparent--g5yZq",o="prototype--documentationContainer---zYeR",s="prototype--noScrollBars--Hz0hJ",l="prototype--content--9zE6J",c="prototype--contentMiddle--sqEVr",d="prototype--contentMiddleWithHeader--Qr1mu",u="prototype--viewerContainer--8C5YF",p="prototype--viewerContainerFullScale--bf-Sp prototype--viewerContainer--8C5YF",m="prototype--viewer--uYMkg",h="prototype--footerContainer--AikxI",_="prototype--commentsNextCursor--uIXBd",g="prototype--suppressFocusRings--uoAQT"},908462:(e,r,n)=>{n.d(r,{UL:()=>s,c6:()=>a,jG:()=>o,so:()=>i});let i="right_sidebar_panel--sidebarContainer--VeCtS right_sidebar_panel--container--CtQ1g",a="right_sidebar_panel--sidebarContainerHidden--POHqM right_sidebar_panel--container--CtQ1g",o="right_sidebar_panel--scrollContainer--ORIOM right_sidebar_panel--sidebarDragContainer--n0xNj",s="right_sidebar_panel--withoutHeaderMargin--R9T7p"},169752:(e,r,n)=>{n.d(r,{Dg:()=>o,Qs:()=>i,S:()=>l,qg:()=>d,qr:()=>s,v0:()=>c,xC:()=>a,zP:()=>u});let i="rcs_components--content--N7eCo text--fontPos11--2LvXf text--_fontBase--QdLsd",a="rcs_components--contentFeatureUpdate--BQecL text--fontPos11--2LvXf text--_fontBase--QdLsd rcs_components--contentLarge--1qHKL rcs_components--leftRightContent--5yuzu",o="rcs_components--imgContainer--JofI3",s="rcs_components--footer--l5bb0",l="rcs_components--footerStepCounter--jKzRi",c="rcs_components--buttonRow--OfMRY",d="rcs_components--fullscreenBackground--tIex6",u="rcs_components--loadingSpinner--rOHo1"},336229:(e,r,n)=>{n.d(r,{Hj:()=>i,pO:()=>a});let i="onboarding--promoPointerTitle--Z1b9a text--fontPos13--xW8hS text--_fontBase--QdLsd",a="onboarding--lowZIndexPointerModal--9C2QH pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz"},464758:(e,r,n)=>{n.d(r,{$9:()=>i,E7:()=>l,Gv:()=>c,Lq:()=>m,SI:()=>u,gH:()=>d,hj:()=>p,ig:()=>a,mj:()=>o,s1:()=>h,vL:()=>s});let i="styles_properties_form--textPreviewContainer---jjb4 styles_properties_form--previewContainer--SH1Yk",a="styles_properties_form--gridAndEffectPreviewContainer--9q2FM styles_properties_form--previewContainer--SH1Yk",o="styles_properties_form--loadedFillPreviewContainer--36WiC styles_properties_form--fillPreviewSize--GiUdz",s="styles_properties_form--loadingFillPreviewContainer--WPdS6 styles_properties_form--fillPreviewSize--GiUdz",l="styles_properties_form--noBorder--EcrkL",c="styles_properties_form--stylePreview--tJF78",d="styles_properties_form--textStylePreview--Jp6WQ",u="styles_properties_form--textStylePreviewInverted--GeC3b",p="styles_properties_form--fillStylePreview--xOVAg styles_properties_form--fillPreviewSize--GiUdz",m="styles_properties_form--loading--0A0hy",h="styles_properties_form--isLoaded--2czdf"},527041:(e,r,n)=>{n.d(r,{BA:()=>T,D:()=>I,E0:()=>E,I6:()=>O,KY:()=>i,NM:()=>l,SB:()=>p,SM:()=>w,T3:()=>_,TH:()=>d,U1:()=>g,UE:()=>o,Ym:()=>A,_Z:()=>a,cr:()=>u,eO:()=>f,hP:()=>C,jG:()=>s,jm:()=>N,ln:()=>h,nM:()=>y,p$:()=>S,ry:()=>L,sI:()=>m,sM:()=>b,uH:()=>v,wY:()=>c});let i="multi_select_list--actionBar--T9qpZ",a="multi_select_list--actionBarVisible--3rWgr multi_select_list--actionBar--T9qpZ",o="multi_select_list--arrow--CW8ia",s="multi_select_list--scrollContainer--B-Dk-",l="multi_select_list--scrollContent--bCmOd",c="multi_select_list--tableWrapper--pDejK",d="multi_select_list--tableWithNewScrollContext--Iffr4",u="multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",p="multi_select_list--actionBarContentContainerVisible--AEaW4 multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",m="multi_select_list--menuBarDropdown--Lf9-4",h="multi_select_list--stickyHeader--FkV5r",_="multi_select_list--stickyHeaderWithBanner--9IDR1 multi_select_list--stickyHeader--FkV5r",g="multi_select_list--headerRow--22Lao",f="multi_select_list--headerRowDisabled--zG4LU multi_select_list--headerRow--22Lao multi_select_list--_disabled--INopV",E="multi_select_list--checkboxColumn--SgkHV",y="multi_select_list--row--nfio-",b="multi_select_list--unselectedCheckbox--KAaaj",v="multi_select_list--rowWithRoundedBorder--im1TP",T="multi_select_list--notFirstRowInSelectedGroup--3m6oH",I="multi_select_list--notLastRowInSelectedGroup--N4myp",S="multi_select_list--emptyState--QQcOE",w="multi_select_list--batchActionCount--R41SC",A="multi_select_list--batchActionClear--7q1Vl",C="multi_select_list--actionButton--D2K4w",N="multi_select_list--longList--Oz-Pp",L="multi_select_list--longListDisabled--x8onM multi_select_list--longList--Oz-Pp multi_select_list--_disabled--INopV",O="multi_select_list--highlightedRow--W4ZZn"},232922:(e,r,n)=>{n.d(r,{AL:()=>S,BI:()=>_,Cu:()=>y,DL:()=>d,FH:()=>I,Fp:()=>i,G7:()=>f,Hl:()=>a,LH:()=>T,MO:()=>h,Nn:()=>w,TV:()=>u,UD:()=>E,VQ:()=>v,Vs:()=>m,e6:()=>p,hv:()=>b,j7:()=>o,ko:()=>l,nP:()=>s,vO:()=>c,yH:()=>g});let i="voice_users--voiceParticipantAvatar--7mhMG",a="voice_users--overflowRow--dyDR2",o="voice_users--nameAndSuffixContainer--GGoKj",s="voice_users--flexContainer--bWLmT",l="voice_users--flexLeftContainer--EVDRS",c="voice_users--flexRightContainer--Su6EL",d="voice_users--voiceParticipantName--MPxav text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",u="voice_users--voiceParticipantNameGreyedOut--4zNHd text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",p="voice_users--participantStatus--cnVtZ",m="voice_users--participantRowNewPadding--b0v2c",h="voice_users--participantRow--D4Yar",_="voice_users--hoverable--tq5aE",g="voice_users--containsCursor--Wx6C4",f="voice_users--secondaryMenuIconButtonContainer--aAh8o",E="voice_users--showSecondaryDropdownOnHover--AWGE6",y="voice_users--currentUserHeaderRow--Jiv6z",b="voice_users--secondaryActionsMenuButton--2emFq",v="voice_users--secondaryActionsMenuButtonActive--QoLJK",T="voice_users--multiplayerUserView--7nAcD",I="voice_users--userSuffixNew--husrg text--fontPos11--2LvXf text--_fontBase--QdLsd",S="voice_users--voiceUserHeadphonesIcon--wLuPW",w="voice_users--mutedContainer--JL7uZ"},227510:(e,r,n)=>{n.d(r,{Aw:()=>_,DV:()=>a,FY:()=>s,Hn:()=>d,Jj:()=>p,R_:()=>i,ZS:()=>l,cg:()=>m,e6:()=>h,kQ:()=>c,nf:()=>u,ti:()=>o});let i="lexical_editor_theme--heading--SosJn",a="lexical_editor_theme--codeBlock--TJ-Fu",o="lexical_editor_theme--inlineCode--jE754",s="lexical_editor_theme--paragraph--GBDXU",l="lexical_editor_theme--textBold--tWO8-",c="lexical_editor_theme--textItalic--vqDDt",d="lexical_editor_theme--textStrikethrough--CHepi",u="lexical_editor_theme--link--IC2wz",p="lexical_editor_theme--linkReadOnly--h-PyL",m="lexical_editor_theme--listOl--Ae2L-",h="lexical_editor_theme--listUl--EMQyv",_="lexical_editor_theme--listItem--tt5uP"},240854:(e,r,n)=>{},333571:(e,r,n)=>{n.d(r,{GE:()=>c,KQ:()=>s,QH:()=>o,Sw:()=>a,_J:()=>i,ky:()=>l,lx:()=>d});let i="loading_content--shimmerAnimation--qZjRw",a="loading_content--shimmerOnMenuAnimation--U9c8t loading_content--shimmerAnimation--qZjRw",o="loading_content--lightShimmerAnimation--Iz23-",s="loading_content--loadingText--MFUIw",l="loading_content--loadingTextOnMenu--WrELp loading_content--loadingText--MFUIw",c="loading_content--loadingImage--eB8Kt",d="loading_content--loadingPrimary--HsesM"},498055:(e,r,n)=>{n.d(r,{$g:()=>o,F:()=>p,K_:()=>m,Mn:()=>c,OZ:()=>d,PG:()=>a,Pu:()=>s,WL:()=>g,h:()=>h,q5:()=>l,uz:()=>_,yM:()=>u,zr:()=>i});let i="loading_spinner--root--vwYfu",a="loading_spinner--sizeSmall--CN0gS",o="loading_spinner--sizeMedium--J1-SL",s="loading_spinner--sizeLarge--MeIU0",l="loading_spinner--cssBackedSizeSmall--5-Rgv",c="loading_spinner--cssBackedSizeMedium--8gATq",d="loading_spinner--cssBackedSizeLarge--18-ZE",u="loading_spinner--svgContainer--KOY5x",p="loading_spinner--centered--pql-M",m="loading_spinner--matchTextColor--BmEuU",h="loading_spinner--grayColor--GhzPN",_="loading_spinner--blueSpinner--trQsm loading_spinner--root--vwYfu",g="loading_spinner--cssBacked--oIWj-"},29814:(e,r,n)=>{n.d(r,{Ak:()=>h,K5:()=>m,OH:()=>a,Pj:()=>d,c0:()=>c,cQ:()=>l,d6:()=>p,lE:()=>o,m8:()=>u,nf:()=>s,qr:()=>i});let i="footer--footer--JB9iL",a="footer--footerHidden--U2SCb footer--footer--JB9iL",o="footer--replayKeyboardShortcut--Lqop8",s="footer--replayButtonContainer--XR1gy",l="footer--replayButton--fKqPi footer--pill--a9ne7",c="footer--debugToolsContainer--WeB-G",d="footer--frameCounterContainer--oMKsY",u="footer--frameCounterResponsive--XW-b7 footer--frameCounter--5AU-l footer--pill--a9ne7",p="footer--frameCounterText--hv93-",m="footer--footerOptionsMenuSeparator--5rW7E",h="footer--embedFrameCounterText--OS77U"},603826:(e,r,n)=>{n.d(r,{A4:()=>I,CK:()=>l,Cu:()=>w,Dv:()=>p,FR:()=>i,RK:()=>b,SA:()=>y,SC:()=>d,Tr:()=>f,VA:()=>u,Vj:()=>g,W0:()=>m,WM:()=>T,XK:()=>a,ag:()=>_,gO:()=>h,m2:()=>o,m4:()=>c,ol:()=>S,q6:()=>v,vS:()=>E,yl:()=>s});let i="generic_tile_DEPRECATED--selectedContainer--ybkd4 generic_tile_DEPRECATED--container--XotGi",a="generic_tile_DEPRECATED--tileBorder---DBQk",o="generic_tile_DEPRECATED--subtitleWrapperInner--ncwf-",s="generic_tile_DEPRECATED--genericTile--6ezs8",l="generic_tile_DEPRECATED--gridView--ICika",c="generic_tile_DEPRECATED--standaloneFileTile--lmMfZ generic_tile_DEPRECATED--container--XotGi",d="generic_tile_DEPRECATED--subtitleContainer--y18L5",u="generic_tile_DEPRECATED--subtitle--SkL2a ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile_DEPRECATED--flexHorizontally--kRrGY",p="generic_tile_DEPRECATED--disabledSubtitle--yTOPL generic_tile_DEPRECATED--subtitle--SkL2a ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile_DEPRECATED--flexHorizontally--kRrGY",m="generic_tile_DEPRECATED--settings--cInfj",h="generic_tile_DEPRECATED--ellipsis--jqPWA ellipsis--ellipsis--Tjyfa",_="generic_tile_DEPRECATED--subtitleMetadata--94sE7 text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",g="generic_tile_DEPRECATED--modifiedMetadata--AphD2",f="generic_tile_DEPRECATED--genericTileRedesign--ySqO2",E="generic_tile_DEPRECATED--topLeftControls--hrfPC",y="generic_tile_DEPRECATED--topRightControls--bIPIz",b="generic_tile_DEPRECATED--visible--dakmY",v="generic_tile_DEPRECATED--bottomControls--Ro4JX",T="generic_tile_DEPRECATED--facepile--MZY4B",I="generic_tile_DEPRECATED--control--xjbn-",S="generic_tile_DEPRECATED--viewOnlyLabel--4apxb",w="generic_tile_DEPRECATED--itemsViewTitle--Uxr-A"},755571:(e,r,n)=>{n.d(r,{Pf:()=>o,bb:()=>a,zr:()=>i});let i="truncated_text--root--kx5Ta ellipsis--ellipsis--Tjyfa",a="truncated_text--rootTruncateStart--aClXJ",o="truncated_text--directionFix--T1NOI"},728075:(e,r,n)=>{n.d(r,{$C:()=>g,$b:()=>eM,$r:()=>m,A4:()=>ed,AN:()=>ee,Af:()=>eu,Ah:()=>j,B8:()=>eH,B9:()=>B,DE:()=>en,DN:()=>eO,Dd:()=>x,De:()=>d,Dr:()=>l,FQ:()=>eP,JI:()=>H,JT:()=>h,K4:()=>eF,L5:()=>e$,LL:()=>eh,Me:()=>_,N0:()=>I,OF:()=>eW,PN:()=>a,PQ:()=>eG,Po:()=>S,Pp:()=>V,Py:()=>M,Q1:()=>eV,Q2:()=>eA,QE:()=>eY,QQ:()=>s,Qw:()=>N,R2:()=>ef,R3:()=>c,RO:()=>L,Rv:()=>ej,SW:()=>U,Sb:()=>C,T2:()=>eD,Td:()=>X,Tn:()=>eK,U8:()=>T,Uw:()=>z,Vm:()=>o,Wn:()=>f,Ws:()=>el,X8:()=>eb,Z6:()=>b,Zv:()=>ez,Zz:()=>eB,_M:()=>ec,_P:()=>ep,_x:()=>K,a6:()=>W,aT:()=>ek,az:()=>eI,bu:()=>O,c6:()=>eE,dV:()=>p,eN:()=>eT,eg:()=>i,ev:()=>ei,fU:()=>eg,fV:()=>J,fh:()=>eS,g$:()=>$,gn:()=>eo,h3:()=>eN,i4:()=>eR,iU:()=>eC,is:()=>A,jR:()=>E,jc:()=>ey,k0:()=>R,k7:()=>G,mO:()=>ev,n7:()=>em,nG:()=>Q,nL:()=>ex,o$:()=>eU,oK:()=>F,oW:()=>P,p5:()=>e_,pZ:()=>ew,qH:()=>Z,qm:()=>w,qt:()=>et,t1:()=>k,vD:()=>Y,vY:()=>ea,vh:()=>y,w3:()=>u,wO:()=>q,wl:()=>es,xr:()=>v,xu:()=>er,yG:()=>eL,zt:()=>D});let i="#e5e5e5",a="rgba(0, 0, 0, 0.8)",o="#fff",s="#333333",l="#fff",c="#000",d="#e6e6e6",u="#667799",p="#007be5",m="#9747ff",h="#ff24bd",_="#f24822",g="#ffcd29",f="#14ae5c",E="rgba(30, 30, 30, 1)",y="rgba(117, 117, 117, 1)",b="rgba(179, 179, 179, 1)",v="rgba(230, 230, 230, 1)",T="rgba(217, 217, 217, 1)",I="rgba(242, 72, 34, 1)",S="rgba(255, 199, 194, 1)",w="rgba(255, 166, 41, 1)",A="rgba(252, 209, 156, 1)",C="rgba(255, 205, 41, 1)",N="rgba(255, 232, 163, 1)",L="rgba(20, 174, 92, 1)",O="rgba(175, 244, 198, 1)",R="rgba(13, 153, 255, 1)",P="rgba(189, 227, 255, 1)",D="rgba(151, 71, 255, 1)",M="rgba(228, 204, 255, 1)",k="rgba(255, 255, 255, 1)",F="rgba(175, 188, 207, 1)",x="rgba(230, 230, 230, 1)",U="rgba(255, 175, 163, 1)",B="rgba(255, 196, 112, 1)",V="rgba(255, 217, 102, 1)",G="rgba(133, 224, 163, 1)",H="rgba(128, 202, 255, 1)",K="rgba(217, 184, 255, 1)",W="rgba(255, 189, 242, 1)",z="rgba(230, 230, 230, 1)",$="rgba(151, 151, 151, 1)",Y="rgba(255, 153, 248, 1)",j="rgba(255, 174, 79, 1)",q="rgba(255, 238, 0, 1)",X="rgba(134, 250, 22, 1)",Z="rgba(111, 255, 246, 1)",J="rgba(179, 143, 255, 1)",Q="rgba(255, 255, 255, 1)",ee="rgba(175, 175, 175, 1)",et="rgba(255, 160, 249, 1)",er="rgba(255, 184, 104, 1)",en="rgba(255, 242, 52, 1)",ei="rgba(174, 255, 97, 1)",ea="rgba(126, 255, 247, 1)",eo="rgba(188, 155, 255, 1)",es="rgba(255, 255, 255, 1)",el="rgba(17, 17, 17, 1)",ec="rgba(117, 117, 117, 1)",ed="rgba(217, 217, 217, 1)",eu="rgba(224, 62, 26, 1)",ep="rgba(251, 188, 182, 1)",em="rgba(247, 151, 34, 1)",eh="rgba(255, 196, 112, 1)",e_="rgba(243, 193, 27, 1)",eg="rgba(249, 223, 144, 1)",ef="rgba(25, 143, 81, 1)",eE="rgba(161, 232, 185, 1)",ey="rgba(12, 140, 233, 1)",eb="rgba(168, 215, 250, 1)",ev="rgba(138, 56, 245, 1)",eT="rgba(214, 182, 251, 1)",eI="rgba(255, 255, 255, 1)",eS="rgba(102, 119, 153, 1)",ew="rgba(242, 72, 34, 1)",eA="rgba(255, 166, 41, 1)",eC="rgba(255, 205, 41, 1)",eN="rgba(20, 174, 92, 1)",eL="rgba(13, 153, 255, 1)",eO="rgba(151, 71, 255, 1)",eR="rgba(255, 36, 189, 1)",eP="rgba(230, 230, 230, 1)",eD="rgba(175, 188, 207, 1)",eM="rgba(252, 163, 151, 1)",ek="rgba(255, 196, 112, 1)",eF="rgba(247, 209, 95, 1)",ex="rgba(121, 210, 151, 1)",eU="rgba(124, 196, 248, 1)",eB="rgba(209, 168, 255, 1)",eV="rgba(253, 156, 224, 1)",eG="rgba(230, 230, 230, 1)",eH="rgba(41, 39, 52, 1)",eK="rgba(250, 248, 245, 1)",eW="rgba(63, 201, 156, 1)",ez="rgba(200, 115, 74, 1)",e$="rgba(241, 188, 62, 1)",eY="rgba(196, 213, 106, 1)",ej="#f8f8f8"},479760:(e,r,n)=>{n.d(r,{ss:()=>i});let i=11},786175:(e,r,n)=>{n.d(r,{compareChangesModalWidth:()=>h,curatorTertiaryModalZ:()=>f,defaultCornerRadius:()=>m,designToolbarHeight:()=>l,devHandoffAssetPreviewMaxHeight:()=>d,devHandoffAssetPreviewMaxWidth:()=>c,helpWidgetSizePlusMargin:()=>s,modalZ:()=>y,rulerThickness:()=>p,scrollBarXHeight:()=>i,scrollBarYWidth:()=>a,secondaryModalZ:()=>E,stylePickerMaxHeight:()=>u,templateModalTeamName:()=>g,topBarZ:()=>_,trackPadding:()=>o});let i="6px",a="6px",o="2px",s="64px",l="48px",c="44px",d="44px",u="300px",p="20px",m="2px",h="3000px",_=3,g=2,f=7,E=9,y=10},701417:(e,r,n)=>{n.d(r,{LF:()=>a,hX:()=>o,km:()=>i});let i="24px",a="44px",o="17px"},475869:(e,r,n)=>{n.d(r,{FX:()=>s,QU:()=>a,Us:()=>i,ZV:()=>l,rz:()=>o});let i="40px",a="12px",o="16px",s="16px",l="40px"},297691:(e,r,n)=>{n.d(r,{az:()=>i,i0:()=>a});let i="toolbar_action--hideOnMobile--nG2oh",a="toolbar_action--hideOnDesktop--caccx"},143628:(e,r,n)=>{n.d(r,{B7:()=>m,E3:()=>i,H0:()=>d,Kk:()=>o,My:()=>p,Nl:()=>c,Oy:()=>a,Xy:()=>l,hR:()=>u,m$:()=>s});let i="visual_bell--base--Q4n07",a="visual_bell--fplBase--oYGmj",o="visual_bell--icon--rn9Ns",s="visual_bell--iconUI3Color--1jcVh",l="visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",c="visual_bell--customIconCircle--LwQJ3 visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",d="visual_bell--customIconError--wr7b0 visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",u="visual_bell--progressIcon--RYZye",p="visual_bell--slidesVisualBell--arXfI",m="visual_bell--slidesVisualBellIcon--LAt8o"},887835:(e,r,n)=>{n.d(r,{Kv:()=>p,Le:()=>s,Lq:()=>c,Qo:()=>u,Sn:()=>d,X9:()=>i,Xr:()=>m,f$:()=>l,k8:()=>o,wH:()=>a});let i="slides_color_controls--panelToggle--kL4qJ",a="slides_color_controls--selected--FUTwH",o="slides_color_controls--colorChit--pdLKf",s="slides_color_controls--chitBackground--Vlkza",l="slides_color_controls--chitAlpha--GJlf2 chit--chitAlpha--Mn-aK",c="slides_color_controls--editChitButton--Am-hP",d="slides_color_controls--enabled--3SYlu",u="slides_color_controls--shownForTests--S2xlM",p="slides_color_controls--renameColorInput--7gA0L raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u",m="slides_color_controls--gradientControlContainer--1GsYu"},484938:(e,r,n)=>{n.d(r,{Oe:()=>a,RJ:()=>s,g0:()=>o,mu:()=>l,yE:()=>i});let i="feed_post_zoom_pan--zoomPanContainer--zUqcL",a="feed_post_zoom_pan--zoomPanInteractionLayer--8w-cl",o="feed_post_zoom_pan--guidelineLayer--p6ik- feed_post_zoom_pan--zoomPanInteractionLayer--8w-cl",s="feed_post_zoom_pan--transformedImage--hjQSb",l="feed_post_zoom_pan--zoomControls--8PqPP feed_post_detail_modal--contentOverlayPill--1jsoj"},639798:(e,r,n)=>{n.d(r,{D9:()=>i,ZS:()=>o,oO:()=>a});let i="whiteboard_text_style_control--offscreenMeasurementContainer--BKhB1",a="whiteboard_text_style_control--selectInputForMeasurement--slyc8",o="whiteboard_text_style_control--optionForMeasurement--Am6OD"},599095:(e,r,n)=>{n.d(r,{Wh:()=>a,ec:()=>i});let i="menu_selector--flexColumn--KvuRu",a="menu_selector--flexRow--j-QSP"},731560:(e,r,n)=>{n.d(r,{$d:()=>I,$y:()=>p,B4:()=>F,BE:()=>B,BN:()=>P,Bx:()=>y,F0:()=>_,FK:()=>g,ID:()=>V,Lt:()=>a,SN:()=>D,Sk:()=>C,WX:()=>v,Wq:()=>U,ZJ:()=>S,Zh:()=>h,ac:()=>b,cP:()=>M,cq:()=>T,dP:()=>k,dR:()=>i,eB:()=>w,gz:()=>A,i0:()=>l,iD:()=>O,ll:()=>f,pN:()=>d,qs:()=>c,rh:()=>x,sD:()=>s,t3:()=>L,uh:()=>R,vu:()=>o,vy:()=>u,xI:()=>N,yG:()=>m,z6:()=>E});let i="toolbar--focusVisibleHover--yhCHK",a="toolbar--select--nPSf7",o="toolbar--active--gPMV7",s="toolbar--hand--aTLiK",l="toolbar--animate--Ykugz",c="toolbar--universalInsertCollage--8Mfz2",d="toolbar--universalInsert--zBZ5L",u="toolbar--universalInsertGoogleClassroom--lmwPr",p="toolbar--fakeButtonContainer--6x-IE",m="toolbar--toolbarFakeButtonTarget--ezcU0",h="toolbar--passthruLayout--fN4I1",_="toolbar--horizontalButton--fku14",g="toolbar--horizontalButtonDisabled--dTdTJ",f="toolbar--pointerEventsDisabled--O-23A",E="toolbar--tool--gLSDg",y="toolbar--toolIconIsDragging--I05Ql",b="toolbar--shapeAndStickyShadow--fBa-X",v="toolbar--hasDropShadow--Jng2W",T="toolbar--easeInDltItemFill--hEoHS",I="toolbar--shapeSpawnAnimation--l7z9o",S="toolbar--customAnimatedStickyV3--nF1jr",w="toolbar--bottomStickyV3--9S3Np toolbar--stickyAnimationPropertiesV3--kAjJ1",A="toolbar--middleStickyV3--3UJRP toolbar--stickyAnimationPropertiesV3--kAjJ1",C="toolbar--topStickyV3--AcNdy toolbar--stickyAnimationPropertiesV3--kAjJ1",N="toolbar--middleStickyContainerV3--qT3ep toolbar--backgroundStickyV3--HKPKb",L="toolbar--bottomStickyContainerV3--NYDOa toolbar--backgroundStickyV3--HKPKb",O="toolbar--fakeStickyContainer--AK9jp toolbar--backgroundStickyV3--HKPKb",R="toolbar--stickyOuterV3--ooJsb",P="toolbar--stickyCurlV3--hoyCr",D="toolbar--stickyMaskContainerV3--f2inx",M="toolbar--stickyMaskDynamicV3--LlmXc",k="toolbar--stickyMaskStaticV3--7ThBF",F="toolbar--showCurlV3--enAx7",x="toolbar--noTransition---ULgx",U="toolbar--stickyBaseV3--c-nvN",B="toolbar--reverse--spDLs",V="toolbar--fakeStickyV3--j8iUl toolbar--stickyAnimationPropertiesV3--kAjJ1"},889381:(e,r,n)=>{n.d(r,{A:()=>_});var i=n(721571),a=n(181340),o=n(267760),s=n(261769),l=n(259114),c=n(682394),d=n(151236),u=n(587005),p=n(23574),m=(e=>(e[e.CONNECTED=0]="CONNECTED",e[e.DISCONNECTED=1]="DISCONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e))(m||{}),h=(e=>(e.SHED_LOAD="shed-load",e.VIEW_ERRORS="view-errors",e))(h||{});class _{constructor(e,r,n,i,o,s={},c){this.args=e,this.viewRegistry=n,this.clientOptions=s,this.connection=new l.A(i,o,e,this.emitter,s),this.connection.addObserver(this),this.session=new a.A(e,r,n,this.emitter,(e,r)=>{this.requestPaginationChange(e,r)},()=>this.connection.isInitial(),e=>{this.clientOptions.retryErroredViewSubscriptions&&this.retrySubscription(e,"view-errors")},e=>{let r=this.subscriptionRetries.get(e);return r?(clearTimeout(r.retryTimer),this.subscriptionRetries.delete(e),r.backoff.attemptsSoFar()):0},c,s.shouldBubbleUpNonNullableResultErrors,s.errorsLoggedForAnalyticsFraction,s.useUnitTestObjectStore,s.enableClientSideOptionalCheck),this.addEventListener(this.healthListener.bind(this));for(let e=0;e<(s?.preloadedViews?.length??0);e++){let r=s?.preloadedViews?.[e],n=s?.preloadedViewArgs?.[e]??{};this.session.subscribe(r,n,()=>{}),this.preloadViewKeys.add((0,d.J)(r._name,n))}for(let e=0;e<(s?.mismatchedViews?.length??0);e++){let r=s?.mismatchedViews?.[e],n=s?.mismatchedViewArgs?.[e]??{};this.mismatchedPreloadMsgs.push({messageType:"unsubscribe",viewName:r,args:n})}}transactionId=1;syncDelayForDebugging=0;syncRequests=new Map;pendingGlobalOptimisticUpdates=new Set;globalOptimisticUpdateResolutionCallbacks=[];session;connection;emitter=new s.b;healthListeners=new Set;pendingOptimisticMutationList=[];pendingMutationList=[];preloadViewKeys=new Set;mismatchedPreloadMsgs=[];subscriptionRetries=new Map;cleanup(){this.connection.cleanup()}async connect(){await this.connection.connect()}async close(){await this.connection.closeWithoutReconnecting()}get userId(){return this.args.userId}addEventListener(e){return this.emitter.addListener(e)}setOptionalMissingForView(e,r){this.session.setOptionalMissingForView(e,r)}unsetOptionalMissingForView(e){this.session.unsetOptionalMissingForView(e)}removeEventListener(e){return this.emitter.removeListener(e)}healthListener(e){if("CONNECTION_STATE"===e.type){let r=this.getHealthStatusForConnectionState(e.state);for(let e of this.healthListeners)e(r)}}getHealthStatus(){return this.getHealthStatusForConnectionState(this.connection.getState())}getHealthStatusForConnectionState(e){return"connected"===e.type?0:"connecting"===e.type?2:1}addHealthListener(e){return this.healthListeners.add(e),()=>this.removeHealthListener(e)}removeHealthListener(e){this.healthListeners.delete(e)}sendExistingSubscriptions(){if(this.connection.isInitial())for(let e of this.mismatchedPreloadMsgs)this.connection.send(e);for(let{viewRef:e,args:r,traceId:n}of(this.session.startReconnectionStateForPaginationQueries(),this.session.uniqueSubscriptions()))if(!(this.connection.isInitial()&&this.preloadViewKeys.has((0,d.J)(e._name,r)))){if(!this.clientOptions.shouldSplayDesktopBellViewSubscription||this.clientOptions.splayDesktopBellConnConfig?.timesUtc.length||this.connection.isInitial()||"ActiveFileUsersForFileView"!==e._name&&"FilePresenterData"!==e._name&&"FileWithCommentsAndReactions"!==e._name&&"OrgByIdForPlanUserView"!==e._name&&"OrgByIdForPlanView"!==e._name&&"StatsigTeamsOrderView"!==e._name)this.requestSubscription(e,r,this.connection.isInitial()?"initial_load":"refresh",n);else{let i=Math.floor(3e5*Math.random()),a=this.connection.getConnectionCount();(0,o.yy)(i).then(()=>{a===this.connection.getConnectionCount()&&this.requestSubscription(e,r,this.connection.isInitial()?"initial_load":"refresh",n)})}}}handleMessage(e){switch(e.messageType){case"authSuccess":if(this.args.sessionId=e.sessionId,this.args.anonymousUserId=e.anonymousUserId,!this.connection.isAuthenticated()){(0,o.QI)(!1,"Expected connection to be in authenticated state");break}for(let e of this.syncRequests.values())this.requestSync(e);break;case"pendingMutations":this.hasUnresolvedGlobalOptimisticUpdates()?(this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.session.applyMutations(e.mutations)}),this.pendingMutationList.push(e.mutations),this.session.resolvePendingServerIdList(e.mutations)):this.session.applyMutations(e.mutations);break;case"syncFail":let r=this.syncRequests.get(e.transactionId);if(r){let n=r?.getRetryAfterMs();if(!n){this.handleAfterOptimisticUpdateResolved(e.transactionId);return}(0,o.QI)(!r.retryTimeout,"Already scheduled retry for sync request."),r.retryNumber++,r.retryTimeout=setTimeout(()=>{r.retryTimeout=null,this.requestSync(r)},n)}else(0,o.QI)(!1,"Received syncFail for unknown sync request"),this.handleAfterOptimisticUpdateResolved(e.transactionId);break;case"synced":let n=this.syncRequests.get(e.transactionId);n&&(n.successCallback(),(0,o.QI)(!n.retryTimeout,"Sync request completed successfully while having a retry scheduled. This should never happen."));break;case"viewLoaded":this.emitEvent({type:"DONE",viewName:e.viewName});break;case"viewSubscriptionFailed":"shed-load"===e.errorCode?(this.subscriptionRetries.has(e.liveViewKey)||this.reportSubscriptionError(e.liveViewKey,e.errorCode),this.retrySubscription(e.liveViewKey,"shed-load")):(this.emitter.emit({type:"ERROR",error:new i.rT(e.errorCode)}),this.reportSubscriptionError(e.liveViewKey,e.errorCode),this.session.cleanupFailedSubscription(e.liveViewKey))}}onConnectionOpen(){this.sendExistingSubscriptions()}onConnectionClose(){this.clearSubscriptionRetries()}requestSubscription(e,r,n,i){let a={messageType:"subscribe",viewName:e._name,viewHash:e._hash,loadType:n,args:r,traceId:i},o=this.getViewPriority(e,n);this.connection.isConnected()&&(this.connection.send(a),this.emitter.emit({type:"SUBSCRIBE_VIEW_SERVER",view:e,args:r,priority:o,traceId:i}))}requestPaginationChange(e,r){let n={messageType:"paginationChangeMessage",operationType:"LoadNext",queryId:e,count:r.count,paginationArgs:r};this.connection.isConnected()&&this.connection.send(n)}subscribeBase(e,r,n,i){let a=this.session.hasActiveSubscriptions(e._name,r),o=this.session.subscribe(e,r,n,i);return a||(this.emitter.emit({type:"SUBSCRIBE_VIEW_CLIENT",view:e,priority:this.getViewPriority(e,"initial_load"),args:r,traceId:i}),this.requestSubscription(e,r,"initial_load",i)),o}getUnsubscribeFunction(e){return()=>{e.clientUnsubscribed=!0,(0,o.VG)(()=>{if(e.unsubscribe(),!this.session.hasActiveSubscriptions(e.view._name,e.args)&&this.connection.isConnected()){this.connection.send({messageType:"unsubscribe",viewName:e.view._name,args:e.args}),this.emitter.emit({type:"UNSUBSCRIBE_VIEW_SERVER",view:e.view,args:e.args});let r=(0,d.J)(e.view._name,e.args);clearTimeout(this.subscriptionRetries.get(r)?.retryTimer),this.subscriptionRetries.delete(r)}},2e3)}}getViewResult(e,r){return this.session.getViewResult(e,r)}viewHasStaticQueries(e){return!!this.viewRegistry.get(e._name)?.hasStaticQueries()}getViewPriority(e,r){return this.viewRegistry.get(e._name)?.getPriority(r)??i.$M}subscribe(e,r,n,i){let a=r;this.viewHasStaticQueries(e)&&!r.__requestId&&(a={...r,__requestId:(0,c.A)()});let o=this.subscribeBase(e,a,n,i);return this.getUnsubscribeFunction(o)}hasUnresolvedGlobalOptimisticUpdates(){return this.pendingGlobalOptimisticUpdates.size>0}handleBeforeOptimisticUpdateApplied(e){this.pendingGlobalOptimisticUpdates.add(e)}handleAfterOptimisticUpdateResolved(e){if(this.pendingGlobalOptimisticUpdates.delete(e),!this.hasUnresolvedGlobalOptimisticUpdates()){let e=this.globalOptimisticUpdateResolutionCallbacks;this.globalOptimisticUpdateResolutionCallbacks=[],this.emitter.emit({type:"MUTATIONS_BLOCKED_ON_OPTIMISTIC_UPDATE",count:e.length}),this.session.batchMutations(()=>{for(let r of e)r()}),this.pendingOptimisticMutationList=[],this.pendingMutationList=[]}}checkPotentiallyMissingMutations(e,r){if(this.clientOptions.checkPotentiallyMissingOptimisticMutations){if("create"===e||"update"===e)for(let[n,i]of Object.entries(r))for(let a in i){let o=i[a];if("create"===e&&!o.uuid)continue;let s=!1;for(let e of this.pendingMutationList)for(let[r,i]of Object.entries(e))if(n===r)for(let e of Object.values(i.instances))e.uuid&&o.uuid&&e.uuid===o.uuid?s=!0:e.id===a&&(s=!0);if(!s&&"update"===e){let e=o.uuid?this.session.stores[n]?.queries.instanceStatesByUuid.get(o.uuid):this.session.stores[n]?.queries.instanceStates.get(a);e&&(s=Object.keys(o).every(r=>JSON.stringify(o[r])===JSON.stringify(e.serverFields[r])))}this.emitter.emit({type:"PENDING_MUTATION_EXISTENCE",exist:s,objectName:n,optimisticInstance:o,operationType:e,optimisticMutations:r,pendingServerMutations:this.pendingMutationList})}else if("delete"===e)for(let[n,i]of Object.entries(r))for(let a of Object.keys(i)){let i=!1;for(let e of this.pendingMutationList)for(let[r,o]of Object.entries(e))if(n===r)for(let e of Object.values(o.queries))"error"in e||!1!==e.results[a]||(i=!0);this.emitter.emit({type:"PENDING_MUTATION_EXISTENCE",exist:i,objectName:n,optimisticInstance:null,operationType:e,optimisticMutations:r,pendingServerMutations:this.pendingMutationList})}}}async applyMutations(e,r,n){let i;let a=this.transactionId;this.transactionId++;let[s,l,c]=this.session.applyShadowMutations(a,e,n),d=new Set;for(let e of c)e instanceof p.Ay?d.add(e.context.viewKey):(0,o.QI)(!1,"Expected observer to be a ClientLiveViewQueryNode");this.handleBeforeOptimisticUpdateApplied(a);try{i=await r}catch(r){throw this.session.removeShadowMutations(a,e,!1),this.handleAfterOptimisticUpdateResolved(a),r}let u=!1;try{this.emitter.emit({type:"OPTIMISTIC_MUTATION_CREATED",transactionId:a}),await this.sync(a,s,l,d),this.emitter.emit({type:"OPTIMISTIC_MUTATION_COMPLETED",transactionId:a,mutationType:n}),u=!0}finally{this.pendingOptimisticMutationList.push(e),this.clientOptions.shouldChangeOptimisticMutationRevertOrder?this.globalOptimisticUpdateResolutionCallbacks.unshift(()=>{this.session.removeShadowMutations(a,e,u)}):this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.session.removeShadowMutations(a,e,u)}),u&&"create"!==n&&this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.checkPotentiallyMissingMutations(n,e)}),this.handleAfterOptimisticUpdateResolved(a)}return i}waitForServerSideObjectsWithUUIDs(e){let r=[];for(let[n,i]of Object.entries(e))for(let e of Object.keys(i))r.push(this.getIdFromUuid(n,e));return Promise.all(r)}async applyMutationsWithUUID(e,r,n){let i;let a=this.transactionId;this.transactionId++;let[s,l,c]=this.session.applyShadowMutationsWithUUID(a,e,n);this.handleBeforeOptimisticUpdateApplied(a);let d=new Set;for(let e of c)e instanceof p.Ay?d.add(e.context.viewKey):(0,o.QI)(!1,"Expected observer to be a ClientLiveViewQueryNode");try{i=await r}catch(r){throw this.session.removeShadowMutationsWithUUID(a,e,!1),this.handleAfterOptimisticUpdateResolved(a),r}let u=!1;try{"create"===n&&0===Object.keys(l).length?(this.emitter.emit({type:"WAIT_SERVER_OBJECTS_STARTED",mutations:e}),await this.waitForServerSideObjectsWithUUIDs(e),await (0,o.yy)(this.syncDelayForDebugging),this.emitter.emit({type:"WAIT_SERVER_OBJECTS_ENDED",mutations:e})):(this.emitter.emit({type:"OPTIMISTIC_MUTATION_CREATED",transactionId:a}),await this.sync(a,s,l,d),this.emitter.emit({type:"OPTIMISTIC_MUTATION_COMPLETED",transactionId:a,mutationType:"update"===n?"uuid_update":"delete"===n?"uuid_delete":"uuid_computed_create"})),u=!0}finally{this.pendingOptimisticMutationList.push(e),this.globalOptimisticUpdateResolutionCallbacks.unshift(()=>{this.session.removeShadowMutationsWithUUID(a,e,u)}),u&&this.globalOptimisticUpdateResolutionCallbacks.push(()=>this.checkPotentiallyMissingMutations(n,e)),this.handleAfterOptimisticUpdateResolved(a)}return i}getIdFromUuid(e,r){return this.session.getIdFromUuid(e,r)}requestSync(e){this.connection.isConnected()&&(this.connection.send(e.toPayload()),this.emitter.emit({type:"SYNC_STARTED",transactionId:e.transactionId,mutatedObjects:e.objectNameToQueryIds?[...e.objectNameToQueryIds.keys()]:[]}))}async sync(e=this.transactionId++,r,n,i){let[a,s]=(0,o.dS)(),l=new u.Q(e,s,r,n,i);this.syncRequests.set(e,l),this.requestSync(l),await a,this.syncDelayForDebugging&&await (0,o.yy)(this.syncDelayForDebugging),this.syncRequests.delete(e),this.emitter.emit({type:"SYNC_COMPLETED",transactionId:e})}retrySubscription(e,r){this.subscriptionRetries.has(e)||this.subscriptionRetries.set(e,{backoff:new o._c(this.clientOptions.subscriptionRetryBackoffConfig)});let n=this.subscriptionRetries.get(e);if(!n.retryTimer){if(n.backoff.shouldAttempt()){let a=n.backoff.nextBackoffMs();n.retryTimer=setTimeout(()=>{n.retryTimer=void 0;let a=this.session.getActiveSubscription(e);if(!a)return;"view-errors"===r&&this.connection.send({messageType:"unsubscribe",viewName:a.viewRef._name,args:a.args});let o=this.connection.isInitial()?"initial_load":"refresh",s="view-errors"===r?i.aG.P3:this.getViewPriority(a.viewRef,o);this.emitter.emit({type:"SUBSCRIBE_VIEW_CLIENT",view:a.viewRef,priority:s,args:a.args,traceId:a.traceId}),this.requestSubscription(a.viewRef,a.args,o,a.traceId)},a)}else this.subscriptionRetries.delete(e)}}clearSubscriptionRetries(){for(let e of this.subscriptionRetries.values())clearTimeout(e.retryTimer);this.subscriptionRetries.clear()}reportSubscriptionError(e,r){this.emitter.emit({type:"SUBSCRIPTION_ERROR",errorCode:r,liveViewKey:e})}emitEvent(e){this.emitter.emit(e)}get debug(){let e=this.session.getViewSubscriptionsForDebugging(),r={},n={};for(let[i,a]of Object.entries(e))"loading"===a.status&&(r[i]=a),"errors"===a.status&&(n[i]=a);return{subscriptions:e,loadingSubscriptions:r,failedSubscriptions:n,prettyPrintLiveViewTree:e=>this.session.prettyPrintLiveViewTree(e),setOptimisticUpdateResolutionDelay:e=>this.syncDelayForDebugging=e,setOptionalMissingForView:(e,r)=>this.setOptionalMissingForView(e,r),unsetOptionalMissingForView:e=>this.unsetOptionalMissingForView(e),...this.connection.debug}}}},320583:(e,r,n)=>{n.d(r,{Agb:()=>i.Agb,Go1:()=>i.Go1,Hw9:()=>i.Hw9,N4S:()=>i.N4S,QKp:()=>i.QKp,TOI:()=>i.TOI,_YF:()=>i._YF,bUL:()=>i.bUL,y4I:()=>i.y4I,zRx:()=>i.zRx});var i=n(187919)},942506:(e,r,n)=>{n.d(r,{$U:()=>P,C7:()=>o,Fh:()=>a,Jj:()=>A,KC:()=>S,OL:()=>_,QK:()=>D,QR:()=>l,Sh:()=>f,TO:()=>C,X5:()=>u,Xn:()=>h,_D:()=>i,aL:()=>s,bp:()=>m,gR:()=>T,lc:()=>d,nf:()=>p,nr:()=>g,qT:()=>R,rD:()=>c,s$:()=>M,w_:()=>N,xX:()=>O,yo:()=>w,zx:()=>I});var i=(e=>(e.IS_GUEST="ORG::IS_GUEST",e.IS_MEMBER="ORG::IS_MEMBER",e.IS_ADMIN="ORG::IS_ADMIN",e.CAN_SELF_UPGRADE="ORG::CAN_SELF_UPGRADE",e.CANNOT_JOIN_ORG_USER_EXTERNAL_CONTENT_RESTRICTED="ORG::CANNOT_JOIN_ORG_USER_EXTERNAL_CONTENT_RESTRICTED",e.CANNOT_JOIN_ORG_GUESTS_BANNED="ORG::CANNOT_JOIN_ORG_GUESTS_BANNED",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="ORG::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="ORG::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="ORG::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e.CAN_USE_FIGMA_AI="ORG::CAN_USE_FIGMA_AI",e.CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE="ORG::CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE",e.HOST_PLAN_HAS_FIGMA_AI_ENABLED="ORG::HOST_PLAN_HAS_FIGMA_AI_ENABLED",e))(i||{}),a=(e=>(e.CAN_VIEW="TEAM::CAN_VIEW",e.CAN_EDIT="TEAM::CAN_EDIT",e.CAN_ADMIN="TEAM::CAN_ADMIN",e.IS_OWNER="TEAM::IS_OWNER",e.EDIT_ROLE_ACCESS="TEAM::EDIT_ROLE_ACCESS",e.ADMIN_ROLE_ACCESS="TEAM::ADMIN_ROLE_ACCESS",e.CAN_DISCOVER="TEAM::CAN_DISCOVER",e.CAN_DELETE="TEAM::CAN_DELETE",e.CAN_SELF_UPGRADE="TEAM::CAN_SELF_UPGRADE",e.CAN_VIEW_IN_ADMIN="TEAM::CAN_VIEW_IN_ADMIN",e.CAN_VIEW_LIMITED_INFO="TEAM::CAN_VIEW_LIMITED_INFO",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="TEAM::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="TEAM::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="TEAM::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e.CAN_USE_FIGMA_AI="TEAM::CAN_USE_FIGMA_AI",e.CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE="TEAM::CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE",e.HOST_PLAN_HAS_FIGMA_AI_ENABLED="TEAM::HOST_PLAN_HAS_FIGMA_AI_ENABLED",e))(a||{}),o=(e=>(e.CAN_VIEW="FOLDER::CAN_VIEW",e.CAN_EDIT="FOLDER::CAN_EDIT",e.IS_OWNER="FOLDER::IS_OWNER",e.CAN_DISCOVER="FOLDER::CAN_DISCOVER",e.CAN_CREATE_COOPER_FILE="FOLDER::CAN_CREATE_COOPER_FILE",e.CAN_CREATE_FIGJAM_FILE="FOLDER::CAN_CREATE_FIGJAM_FILE",e.CAN_CREATE_DESIGN_FILE="FOLDER::CAN_CREATE_DESIGN_FILE",e.CAN_CREATE_SITES_FILE="FOLDER::CAN_CREATE_SITES_FILE",e.CAN_CREATE_SLIDES_FILE="FOLDER::CAN_CREATE_SLIDES_FILE",e.CAN_CREATE_FIGMAKE_FILE="FOLDER::CAN_CREATE_FIGMAKE_FILE",e.CAN_MODIFY_ROLES="FOLDER::CAN_MODIFY_ROLES",e.CAN_MOVE="FOLDER::CAN_MOVE",e.CAN_TRANSFER_EXTERNALLY="FOLDER::CAN_TRANSFER_EXTERNALLY",e.CAN_TRANSFER_COPY="FOLDER::CAN_TRANSFER_COPY",e.CAN_TRASH="FOLDER::CAN_TRASH",e.CAN_RESTORE="FOLDER::CAN_RESTORE",e.CAN_PERMANENTLY_DELETE="FOLDER::CAN_PERMANENTLY_DELETE",e.SHOULD_USE_CONNECTED_PLAN_USER_DESIGN="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_DESIGN",e.SHOULD_USE_CONNECTED_PLAN_USER_FIGJAM="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_FIGJAM",e.SHOULD_USE_CONNECTED_PLAN_USER_SLIDES="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_SLIDES",e.SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE",e.SHOULD_USE_CONNECTED_PLAN_USER_SITES="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_SITES",e.CAN_CONNECT="FOLDER::CAN_CONNECT",e.CAN_VIEW_LIMITED_INFO="FOLDER::CAN_VIEW_LIMITED_INFO",e))(o||{}),s=(e=>(e.CAN_VIEW_PROTOTYPE="REPO::CAN_VIEW_PROTOTYPE",e.CAN_VIEW="REPO::CAN_VIEW",e.CAN_EDIT="REPO::CAN_EDIT",e.CAN_ADMIN="REPO::CAN_ADMIN",e.IS_OWNER="REPO::IS_OWNER",e.CAN_MANAGE="REPO::CAN_MANAGE",e.CAN_MOVE="REPO::CAN_MOVE",e.CAN_VIEW_LINK_ACCESS="REPO::CAN_VIEW_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS="REPO::CAN_EDIT_LINK_ACCESS",e.CAN_VIEW_PROTOTYPE_LINK_ACCESS="REPO::CAN_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ORG_VIEW_LINK_ACCESS="REPO::CAN_ORG_VIEW_LINK_ACCESS",e.CAN_ORG_EDIT_LINK_ACCESS="REPO::CAN_ORG_EDIT_LINK_ACCESS",e.CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS="REPO::CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_DISCOVER="REPO::CAN_DISCOVER",e.SHOULD_USE_CONNECTED_PLAN_USER="REPO::SHOULD_USE_CONNECTED_PLAN_USER",e))(s||{}),l=(e=>(e.CAN_VIEW_PROTOTYPE="FILE::CAN_VIEW_PROTOTYPE",e.CAN_VIEW="FILE::CAN_VIEW",e.CAN_EDIT="FILE::CAN_EDIT",e.CAN_EDIT_CANVAS="FILE::CAN_EDIT_CANVAS",e.CAN_PUBLISH_TEMPLATE="FILE::CAN_PUBLISH_TEMPLATE",e.CAN_INSERT_TEMPLATE="FILE::CAN_INSERT_TEMPLATE",e.CAN_ADMIN="FILE::CAN_ADMIN",e.IS_OWNER="FILE::IS_OWNER",e.CAN_BECOME_EDITOR="FILE::CAN_BECOME_EDITOR",e.CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT="FILE::CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT",e.CAN_MANAGE="FILE::CAN_MANAGE",e.HAS_ROLE_ACCESS="FILE::HAS_ROLE_ACCESS",e.CAN_BE_MENTIONED_IN_COMMENT="FILE::CAN_BE_MENTIONED_IN_COMMENT",e.CAN_DOWNLOAD_FILE="FILE::CAN_DOWNLOAD_FILE",e.CAN_EXPORT="FILE::CAN_EXPORT",e.CAN_ACCESS_FILE_THROUGH_API="FILE::CAN_ACCESS_FILE_THROUGH_API",e.CAN_MODIFY_ROLES="FILE::CAN_MODIFY_ROLES",e.CAN_VIEW_METADATA="FILE::CAN_VIEW_METADATA",e.CAN_GAIN_VIEW="FILE::CAN_GAIN_VIEW",e.CAN_GAIN_VIEW_PROTOTYPE="FILE::CAN_GAIN_VIEW_PROTOTYPE",e.CAN_ACCESS_FRAGMENTS="FILE::CAN_ACCESS_FRAGMENTS",e.CAN_ACCESS_LIBRARY="FILE::CAN_ACCESS_LIBRARY",e.CAN_RENAME="FILE::CAN_RENAME",e.CAN_DELETE="FILE::CAN_DELETE",e.CAN_TRASH="FILE::CAN_TRASH",e.CAN_RESTORE="FILE::CAN_RESTORE",e.CAN_RESTORE_TO_OTHER_FOLDERS="FILE::CAN_RESTORE_TO_OTHER_FOLDERS",e.CAN_PERMANENTLY_DELETE="FILE::CAN_PERMANENTLY_DELETE",e.CAN_MOVE="FILE::CAN_MOVE",e.CAN_FAVORITE="FILE::CAN_FAVORITE",e.CAN_VIEW_AND_CREATE_COMMENTS="FILE::CAN_VIEW_AND_CREATE_COMMENTS",e.CAN_MOVE_COMMENTS="FILE::CAN_MOVE_COMMENTS",e.CAN_EDIT_IGNORE_PAID_STATUS="FILE::CAN_EDIT_IGNORE_PAID_STATUS",e.CAN_EDIT_IGNORE_EDU_GRACE_PERIOD="FILE::CAN_EDIT_IGNORE_EDU_GRACE_PERIOD",e.CAN_VIEW_LINK_ACCESS="FILE::CAN_VIEW_LINK_ACCESS",e.CAN_ORG_VIEW_LINK_ACCESS="FILE::CAN_ORG_VIEW_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS="FILE::CAN_EDIT_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS_IGNORE_PASSWORDS="FILE::CAN_EDIT_LINK_ACCESS_IGNORE_PASSWORDS",e.CAN_ORG_EDIT_LINK_ACCESS="FILE::CAN_ORG_EDIT_LINK_ACCESS",e.CAN_VIEW_METADATA_LINK_ACCESS="FILE::CAN_VIEW_METADATA_LINK_ACCESS",e.CAN_VIEW_PROTOTYPE_LINK_ACCESS="FILE::CAN_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS="FILE::CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ACCESS_FULL_DEV_MODE="FILE::CAN_ACCESS_FULL_DEV_MODE",e.IS_ELIGIBLE_FOR_DEV_MODE_TRIAL="FILE::IS_ELIGIBLE_FOR_DEV_MODE_TRIAL",e.IS_IN_DEV_MODE_TRIAL="FILE::IS_IN_DEV_MODE_TRIAL",e.DEV_MODE_TRIAL_REQUEST_PENDING="FILE::DEV_MODE_TRIAL_REQUEST_PENDING",e.DEV_MODE_REQUEST_PENDING="FILE::DEV_MODE_REQUEST_PENDING",e.DEV_MODE_REQUEST_DENIED="FILE::DEV_MODE_REQUEST_DENIED",e.CAN_ACCESS_DEV_MODE_ENTRY_POINT="FILE::CAN_ACCESS_DEV_MODE_ENTRY_POINT",e.CAN_ACCESS_FULL_DEV_MODE_ORG_PLUS="FILE::CAN_ACCESS_FULL_DEV_MODE_ORG_PLUS",e.CAN_ACCESS_FULL_CODE_CONNECT="FILE::CAN_ACCESS_FULL_CODE_CONNECT",e.CAN_USE_DEV_MODE_DEMO_FILE="FILE::CAN_USE_DEV_MODE_DEMO_FILE",e.CAN_USE_FIGMA_AI="FILE::CAN_USE_FIGMA_AI",e.CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE="FILE::CAN_USE_FIGMA_AI_IGNORE_AI_TOGGLE",e.CAN_USE_FIGJAM_AI="FILE::CAN_USE_FIGJAM_AI",e.CAN_USE_SLIDES_AI="FILE::CAN_USE_SLIDES_AI",e.CAN_USE_FIGMAKE_AI="FILE::CAN_USE_FIGMAKE_AI",e.CAN_USE_FRAGMENT_SEARCH_AI="FILE::CAN_USE_FRAGMENT_SEARCH_AI",e.CAN_USE_SLIDES_DESIGN_TOGGLE="FILE::CAN_USE_SLIDES_DESIGN_TOGGLE",e.CANNOT_PUBLISH_TO_COMMUNITY="FILE::CANNOT_PUBLISH_TO_COMMUNITY",e.CAN_SEND_WEBHOOK="FILE::CAN_SEND_WEBHOOK",e.IS_WORKSPACE_VISIBLE="FILE::IS_WORKSPACE_VISIBLE",e.CAN_PIN_TO_WORKSPACE="FILE::CAN_PIN_TO_WORKSPACE",e.CAN_VIEW_WORKSPACE_PIN="FILE::CAN_VIEW_WORKSPACE_PIN",e.SEAT_TYPE_PAID_STATUS_TEST_PERMISSION="FILE::SEAT_TYPE_PAID_STATUS_TEST_PERMISSION",e.MUST_UPGRADE_TO_SHARE_DRAFT="FILE::MUST_UPGRADE_TO_SHARE_DRAFT",e.MUST_REQUEST_ACCOUNT_UPGRADE_TO_EDIT="FILE::MUST_REQUEST_ACCOUNT_UPGRADE_TO_EDIT",e.MUST_REQUEST_EDITOR_ROLE_TO_EDIT="FILE::MUST_REQUEST_EDITOR_ROLE_TO_EDIT",e.CAN_ACCESS="FILE::CAN_ACCESS",e.CAN_CREATE_BRANCH="FILE::CAN_CREATE_BRANCH",e.CAN_EDIT_OR_ACCESS_FULL_DEV_MODE="FILE::CAN_EDIT_OR_ACCESS_FULL_DEV_MODE",e.SHOULD_USE_CONNECTED_PLAN_USER="FILE::SHOULD_USE_CONNECTED_PLAN_USER",e.SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE="FILE::SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE",e.MUST_REQUEST_UPGRADE_TO_EDIT_DEVELOPER_LINKS="FILE::MUST_REQUEST_UPGRADE_TO_EDIT_DEVELOPER_LINKS",e.CAN_RUN_EXTENSIONS="FILE::CAN_RUN_EXTENSIONS",e))(l||{}),c=(e=>(e.CAN_VIEW="COLLECTION_PAGE::CAN_VIEW",e))(c||{}),d=(e=>(e.CAN_VIEW="HUB_FILE::CAN_VIEW",e.CAN_DUPLICATE="HUB_FILE::CAN_DUPLICATE",e.CAN_ADMIN_COMMENTS="HUB_FILE::CAN_ADMIN_COMMENTS",e))(d||{}),u=(e=>(e.CAN_VIEW="PLUGIN::CAN_VIEW",e.CAN_ADMIN_COMMENTS="PLUGIN::CAN_ADMIN_COMMENTS",e))(u||{}),p=(e=>(e.CAN_VIEW="LITMUS_PROJECT::CAN_VIEW",e))(p||{}),m=(e=>(e.CAN_VIEW="WORKSPACE::CAN_VIEW",e.CAN_ADMIN="WORKSPACE::CAN_ADMIN",e.CAN_CREATE_TEAM="WORKSPACE::CAN_CREATE_TEAM",e))(m||{}),h=(e=>(e.IS_GUEST="PLAN::IS_GUEST",e.IS_MEMBER="PLAN::IS_MEMBER",e.IS_ADMIN="PLAN::IS_ADMIN",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="PLAN::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="PLAN::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="PLAN::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e.CAN_UPGRADE_COLLABORATOR="PLAN::CAN_UPGRADE_COLLABORATOR",e.CAN_UPGRADE_DEVELOPER="PLAN::CAN_UPGRADE_DEVELOPER",e.CAN_UPGRADE_EXPERT="PLAN::CAN_UPGRADE_EXPERT",e.CAN_USE_FILE_VIEW_HISTORY="PLAN::CAN_USE_FILE_VIEW_HISTORY",e.NEED_UPGRADE_COLLABORATOR="PLAN::NEED_UPGRADE_COLLABORATOR",e.NEED_UPGRADE_DEVELOPER="PLAN::NEED_UPGRADE_DEVELOPER",e.NEED_UPGRADE_EXPERT="PLAN::NEED_UPGRADE_EXPERT",e.CAN_CONNECT="PLAN::CAN_CONNECT",e.CAN_VIEW_INVOICES="PLAN::CAN_VIEW_INVOICES",e))(h||{}),_=(e=>(e.TEAM="team",e.ORGANIZATION="organization",e))(_||{}),g=(e=>(e.CAN_ADMIN="PROFILE::CAN_ADMIN",e.CAN_SELL_RESOURCES_ON_COMMUNITY="PROFILE::CAN_SELL_RESOURCES_ON_COMMUNITY",e))(g||{}),f=(e=>(e.CAN_VIEW="RESOURCE::CAN_VIEW",e))(f||{});let E=["FILE::CAN_EDIT","FILE::CAN_MANAGE","FILE::CAN_EDIT_CANVAS","FILE::CAN_PUBLISH_TEMPLATE","FILE::CAN_RENAME","FILE::CAN_MOVE_COMMENTS","FILE::CAN_EDIT_IGNORE_PAID_STATUS","FILE::CAN_EDIT_IGNORE_EDU_GRACE_PERIOD","FILE::CAN_BECOME_EDITOR","FILE::CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT"],y=[...E,"FILE::CAN_MODIFY_ROLES","FILE::CAN_DELETE"],b=["FOLDER::CAN_VIEW","FOLDER::CAN_DISCOVER","FOLDER::CAN_EDIT","FOLDER::CAN_MODIFY_ROLES","FOLDER::CAN_CREATE_DESIGN_FILE","FOLDER::CAN_CREATE_FIGJAM_FILE","FOLDER::CAN_CREATE_SLIDES_FILE"];[...b],[...b],[...E],[...y];var v=(e=>(e.Allow="ALLOW",e.Deny="DENY",e))(v||{});let T=100,I=300,S=900,w=999;var A=(e=>(e.ORG="ORG",e.HUB_FILE="HUB_FILE",e.TEAM="TEAM",e.FOLDER="FOLDER",e.FILE_REPO="FILE_REPO",e.FILE="FILE",e.PLUGIN="PLUGIN",e.WORKSPACE="WORKSPACE",e.PLAN="PLAN",e.COLLECTION_PAGE="COLLECTION_PAGE",e.LITMUS_PROJECT="LITMUS_PROJECT",e.PROFILE="PROFILE",e.RESOURCE="RESOURCE",e))(A||{}),C=(e=>(e.TEST_FLAG="test_flag",e.CAMPFIRE="campfire",e.CAMPFIRE_PERMISSIONS_SHUTOFF="campfire_permissions_shutoff",e.CAN_DISCOVER_PENDING_INVITE="can_discover_pending_invite",e.COMMUNITY_HUB_ADMIN="community_hub_admin",e.COMMUNITY_HUB_REVIEWER="community_hub_admin_reviewer",e.COMMUNITY_HUB_IMAGE_INSPECTION="community_hub_image_inspection",e.EXEMPT_GUESTS_FROM_MFA_REQUIREMENT="exempt_guests_from_mfa_requirement",e.EXT_PLUGIN_CAN_VIEW_PERMS_V2_REFACTOR="ext_plugin_can_view_perms_v2_refactor",e.FC_GENERAL="fc_general",e.FILE_CANVAS_MENTION_CAN_ACCESS="file_canvas_mentions_can_access",e.COMMENT_MENTIONS_CAN_ACCESS="comment_mentions_can_access",e.SITES="sites",e.SITES_K12_GOOGLE_ORG_ENABLED="sts_k12_google_org_enabled",e.PERM_ENABLE_DEBUGGER_LOG_FOR_USER="perm_enable_debugger_log_for_user",e.PRO_TEMPLATES_FIGJAM="pro_templates_figjam",e.ORG_FILE_EXPORT_SETTING="org_file_export_setting",e.FC_PLAN_ENABLED="fc_plan_enabled",e.COOPER="cooper",e.SANCTIONED_TEAMS="sanctioned_teams",e.LITMUS="dt_litmus",e.DS_STS_KIT="ds_sts_kit",e.COOPER_TEMPLATE_DISCOVERY_VIA_RES_PLAT="cooper_template_discovery_via_res_plat",e.MFA_WITH_GOOGLE_SSO="mfa_with_google_sso",e.DEV_MODE_DEMO_FILE="dev_mode_demo_file",e.PRODUCT_TRIALS_LG="product_trials_lg",e.RES_PLAT_INTERNAL_RESOURCES="res_plat_internal_resources",e.SLIDES_STARTER_TEAM_DESIGN_TOGGLE="slides_starter_team_design_toggle",e.LITMUS_GUEST_ACCESS="litmus_guest_access",e.BAKE="bake",e.COOPER_TEMPLATE_DISCOVERY_VIA_CMTY_HUB="cooper_template_discovery_via_cmty_hub",e.PERMISSIONS_ARGUMENTS_ENABLED="permissions_arguments_enabled",e.BAKE_STARTER_LIMIT="bake_starter_limit",e.PERMISSION_ARGUMENTS_FOR_LINK_ACCESS="permission_arguments_for_link_access",e))(C||{}),N=(e=>(e.ALLOWED="public_link_controls_setting_allowed",e.PASSWORD_REQUIRED="public_link_controls_setting_password_required",e.EXPIRATION_REQUIRED="public_link_controls_setting_expiration_required",e.EXP_AND_PWD_REQUIRED="public_link_controls_setting_password_and_expiration_required",e.BANNED="public_link_controls_setting_banned",e))(N||{}),L=(e=>(e.IAM="iam",e.UNOWNED="unowned",e.WORKFLOW="workflow",e.SEARCH_CORE="search_core",e.COMMUNITY="community",e.DEVELOPER_TOOLS="developer_tools",e.SCALE="scale",e.EXTENSIBILITY="extensibility",e.BILLING="billing",e.MONETIZATION="monetization",e.SLIDES="slides",e.WAYFINDING="wayfinding",e.AI_INFRA="ai_infra",e.DS_ECOSYSTEMS="ds_ecosystems",e.BUZZ="buzz",e.SITES="sites",e.ACTIVATION="activation",e.AI_FOR_PRODUCTION="ai_for_production",e))(L||{});let O=3,R=6,P=15;var D=(e=>(e.TEST="test",e.FILE_DENY_CONNECTED_GUEST_CAN_MOVE="file_deny_connected_guest_can_move",e.FILE_REPO_DENY_CONNECTED_GUEST_CAN_MOVE="file_repo_deny_connected_guest_can_move",e.CONNECTED_FOLDER_DENY_CAN_TRASH_DESPITE_CAN_MANAGE_LIFECYCLE="connected_folder_deny_can_trash_despite_can_manage_lifecycle",e.PLAN_DENY_CAN_CONNECT_IF_AT_CONNECTION_LIMIT="plan_deny_can_connect_if_at_connection_limit",e.FOLDER_CREATE_SITE_FILE_DENY_K12_ORG="folder_create_site_file_deny_k12_org",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_K12_ORG="folder_create_figmake_file_deny_k12_org",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_STARTER_TEAM="folder_create_figmake_file_deny_starter_team",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_STUDENT_TEAM="folder_create_figmake_file_deny_student_team",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_AI_DISABLED="folder_create_figmake_file_deny_ai_disabled",e.FILE_DENY_EDIT_SITE_FILE_K12_ORG="file_deny_edit_site_file_k12_org",e.FILE_DENY_EDIT_FIGMAKE_FILE_K12_ORG="file_deny_edit_figmake_file_k12_org",e.FILE_CREATE_SITE_FILE_DENY_SITES_DISABLED="file_create_site_file_deny_sites_disabled",e.FILE_DENY_EDIT_SITE_FILE_SITES_DISABLED="file_deny_edit_site_file_sites_disabled",e.FOLDER_CREATE_COOPER_FILE_DENY_COOPER_DISABLED="folder_create_cooper_file_deny_cooper_disabled",e.FILE_DENY_EDIT_COOPER_FILE_COOPER_DISABLED="file_deny_edit_cooper_file_cooper_disabled",e.FILE_CREATE_SITE_FILE_DENY_RESTRICTED_SITES_PLAN_USER="file_create_site_file_deny_restricted_sites_plan_user",e.FILE_DENY_EDIT_FIGMAKE_FILE_STARTER="file_deny_edit_figmake_file_starter",e.FILE_DENY_EDIT_FIGMAKE_FILE_STUDENT="file_deny_edit_figmake_file_student",e.FILE_DENY_EDIT_SITE_FILE_STARTER="file_deny_edit_site_file_starter",e))(D||{});let M=2;var k=(e=>(e.LINK_ACCESS_FILE_KEY="link_access_file_key",e.BILLABLE_PRODUCT="billable_product",e))(k||{})},187919:(e,r,n)=>{n.d(r,{Agb:()=>a.Ag,Go1:()=>a.Go,Hw9:()=>o.Hw9,N4S:()=>o.N4S,QKp:()=>i.QK,TOI:()=>i.TO,_YF:()=>a._Y,bUL:()=>a.bU,y4I:()=>a.y4,zRx:()=>o.zRx}),n(278175),n(851304),n(152283),n(285810),n(60129),n(747115),n(183715),n(888710),n(12858),n(326234),n(409694),n(241989),n(911442),n(955635),n(234124);var i=n(942506);n(379007),n(54741),n(639237);var a=n(349031),o=n(340454);n(694556),{...i.Fh,...i.C7,...i.aL,...i.QR,...i._D,...i.lc,...i.nf,...i.X5,...i.bp,...i.Xn,...i.rD,...i.nr,...i.Sh}},728540:(e,r,n)=>{n.d(r,{u:()=>f});var i=n(848318),a=n(44509),o=n(379338),s=n(696286),l=n(277246),c=n(32790),d=n(396436),u=n(208649),p=n(834996),m=n(887057),h=n(97859),_=n(50258),g=n(609970);function f(){(0,u.F$)("prototype-lib").then(()=>{async function e(e){if(window.androidProtoPreloadedTabStart=performance.now(),!(0,o.Ay)().user_data){a.Ay.replace(e.path,null),a.Ay.reload("preloaded tab not logged in");return}try{let{data:{meta:r}}=await _.S.getIncludeFolderTeamCanEdit({includeFolderTeamCanEdit:!0,fileKey:e.fileKey}),n=r.parent_org_id;(0,o.Hk)(r),console.log(`Opening file ${e.fileKey} in a preloaded tab at ${e.path} with org ${n}`),(0,o.Ay)().org_id=n,(0,h.Ri)(),window.startUserStateXHR(),a.Ay.replace(e.path,null),await (0,s.n)(E,()=>d.t)}catch(r){console.error("Reloading because of",r),a.Ay.replace(e.path,null),a.Ay.reload("preloaded tab error")}}window.androidProtoFsPreloaded=performance.now(),c.xK.start("androidProtoEditorPreloaded"),window.startPreloadedTab=e})}function E(){let e=(0,l.s)();return"prototype"!==(0,p.z3)()?null:i.createElement(m.uW.Provider,{value:e},i.createElement(g.V,null))}},136426:(e,r,n)=>{n.d(r,{wZ:()=>d,xv:()=>s});var i=n(464012),a=n(783286);let o=a.A.createLazyComponent(()=>n.e(7981).then(n.bind(n,586670)).then(e=>e.AutosaveLogOutModal),(0,i.Ij)("AutosaveLogOutModal")),s=(0,i.Ju)(o),l=a.A.createLazyComponent(()=>n.e(7981).then(n.bind(n,586670)).then(e=>e.HasAutosaveChangesModal),(0,i.Ij)("HasAutosaveChangesModal"));(0,i.Ju)(l);let c=a.A.createLazyComponent(()=>n.e(7981).then(n.bind(n,23703)).then(e=>e.AutosaveLearnMoreModal),(0,i.Ij)("AutosaveLearnMoreModal")),d=(0,i.Ju)(c)},478550:(e,r,n)=>{n.d(r,{B7:()=>u.B,In:()=>d.I,dR:()=>m,lk:()=>_,u3:()=>f});var i=n(464012),a=n(783594),o=n(206616),s=n(497178),l=n(422389),c=n(488238),d=n(67438),u=n(859085);let p=a.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(6896),n.e(9727),n.e(7509),n.e(3663),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(5974),n.e(8355),n.e(9567),n.e(6739),n.e(785),n.e(4297),n.e(8187),n.e(2677)]).then(n.bind(n,39915)).then(e=>e.UniversalUpgradeSequence),(0,i.Ij)("UniversalUpgradeSequence")),m=(0,i.Ju)(p,"UniversalUpgradeSequence"),h=a.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(6896),n.e(9727),n.e(7509),n.e(3663),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(5974),n.e(8355),n.e(9567),n.e(6739),n.e(785),n.e(4297),n.e(8187),n.e(2677)]).then(n.bind(n,748874)).then(e=>e.UpgradeContactSalesModal),(0,i.Ij)("UpgradeContactSalesModal")),_=(0,i.Ju)(h,"UpgradeContactSalesModal"),g=a.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(6896),n.e(9727),n.e(7509),n.e(3663),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(5974),n.e(8355),n.e(9567),n.e(6739),n.e(785),n.e(4297),n.e(8187),n.e(2677)]).then(n.bind(n,396960)).then(e=>e.OrgUpgradeMultiTeamModal),(0,i.Ij)("OrgUpgradeMultiTeamModal")),f=(0,i.Ju)(g,"OrgUpgradeMultiTeamModal"),E=a.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(6896),n.e(9727),n.e(7509),n.e(3663),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(5974),n.e(8355),n.e(9567),n.e(6739),n.e(785),n.e(4297),n.e(8187),n.e(2677)]).then(n.bind(n,949364)).then(e=>e.OrgUpgradeSingleTeamModal),(0,i.Ij)("OrgUpgradeSingleTeamModal"));(0,i.Ju)(E,"OrgUpgradeSingleTeamModal"),(0,i.Ju)(l.Y),(0,i.Ju)(c.T),(0,i.Ju)(o.T),(0,i.Ju)(s.D)},545754:(e,r,n)=>{n.d(r,{w:()=>P});var i=n(848318),a=n(716544),o=n(776402),s=n(777611),l=n(731755),c=n(921494),d=n(145015),u=n(17755),p=n(442313),m=n(500276),h=n(478550),_=n(885132),g=n(748604),f=n(790355),E=n(449737),y=n(194546),b=n(155651),v=n(776130),T=n(376780),I=n(511231),S=n(710665),w=n(572699),A=n(993421),C=n(515673),N=n(869368),L=n(523896),O=n(696163),R=n(315391);function P(e){let{open:r,onClose:n}=e,a=o.hS({open:r,onClose:n});return i.createElement(s.bL,{manager:a,width:"fit-content"},i.createElement(l.vo,null,i.createElement(l.nB,null,i.createElement(D,{...e}))))}function D({upsellSource:e,isProCurrent:r,onClose:n,onDone:o,teamId:s,openCheckoutInNewTab:l,chooseStarterPlan:d,chooseProPlan:S,chooseOrgPlan:P,chooseEduPlan:D,currency:k,updateCurrency:F,planComparisonModalHeaderOverride:x,planComparisonChartOverride:U,seatComparisonChartOverride:B}){let V=(0,a.wA)(),[G,H]=(0,i.useState)((0,I.LN)()),K=(0,c.R)(e=>(0,v.vp)(e.user,e.currentUserOrgId,e.currentTeamId)),W=(0,w.n4)(),z=function(e){let r=(0,_.GC)({currency:e,tier:A.Ju.PRO,renewalTerm:A.IX.YEAR,showCents:!1}),n=(0,_.GC)({currency:e,tier:A.Ju.PRO,renewalTerm:A.IX.MONTH,showCents:!1}),i=(0,_.GC)({currency:e,tier:A.Ju.ORG,renewalTerm:A.IX.YEAR,showCents:!1});return"loading"===r.status||"loading"===n.status||"loading"===i.status?{[T.Ag.STARTER]:null,[T.Ag.STUDENT]:null,[T.Ag.PRO]:null,[T.Ag.ORG]:null}:{[T.Ag.STARTER]:null,[T.Ag.STUDENT]:null,[T.Ag.PRO]:{monthly:n.data,annual:r.data},[T.Ag.ORG]:{monthly:null,annual:i.data}}}(k??G),$=W===T.Ag.PRO?"807px":"945px";return i.createElement(b.fu,{name:L.QO,properties:{upsellSource:e,teamId:s||K?.teamId}},i.createElement("div",{className:u.s.grid.gap16.p36.selectNone.$,style:m.sx.add({width:$}).$},x??(null!==x&&i.createElement(M,null)),U??i.createElement(O.f,{currency:k??G,updateCurrency:F??(e=>{H(e),V(f.oB())}),chooseStarterPlan:d,chooseProPlan:S??(r=>{let i=s||K?.teamId;n?.(),i?(V(y.WX({teamId:i,billingPeriod:r,currency:k??G,openInNewTab:l,entryPoint:C.TN.PLAN_COMPARISON_MODAL})),o?.()):V((0,E.to)({type:h.dR,data:{plan:h.In.PRO,upsellSource:e,billingPeriod:r,openInNewTab:l,onDone:o}}))}),chooseOrgPlan:P??(()=>{n?.(),V(y.Bq({currency:k??G,upsellSource:e,openInNewTab:l,entryPoint:C.TN.PLAN_COMPARISON_MODAL})),o?.()}),chooseEduPlan:D??(()=>{n?.();let e=s||K?.teamId;e?(V(y.Vm({teamId:e})),o?.()):V((0,E.to)({type:g.q}))}),isProCurrent:r,prices:z,teamPlan:W}),i.createElement(N.hK,{height:8}),B??i.createElement(R.L,null),i.createElement("p",{className:u.s.colorTextSecondary.$},(0,p.tx)("plan_comparison.campfire.applicable_taxes"))))}function M(){return i.createElement(i.Fragment,null,i.createElement("div",{className:u.s.textHeadingLarge.$},(0,p.tx)("plan_comparison.campfire.title")),i.createElement("div",{className:u.s.textHeadingMedium.fontNormal.$},(0,p.tx)("plan_comparison.campfire.description",{plan:i.createElement("span",{className:u.s.textHeadingMedium.fontMedium.$},(0,p.tx)("plan_comparison.campfire.description.plan")),seat:i.createElement("span",{className:u.s.textHeadingMedium.fontMedium.$},(0,p.tx)("plan_comparison.campfire.description.seat")),learnMoreLink:i.createElement(d.Us,{className:u.s.textHeadingMedium.fontNormal.$,href:S.zZ,target:"_blank",trusted:!0},(0,p.tx)("plan_comparison.campfire.description.learn_more"))})))}},885132:(e,r,n)=>{n.d(r,{GC:()=>u,Jh:()=>p}),n(128080),n(579020);var i=n(442313),a=n(63817),o=n(95646),s=n(171063),l=n(595919);n(890477);var c=n(511231),d=n(993421);function u({currency:e,tier:r,renewalTerm:n,showCents:u}){return(0,o.jv)({billableProductKeys:l.N_,baseQuery:{currency:e,tier:r,renewalTerm:n,unit:d.IX.MONTH}}).transform(r=>{var n,o,d;return n=l.N_.dict(e=>r[e].amount),o=l.N_.dict(r=>{var i;return i=n[r],new c.vr(e).formatMoney(i,{showCents:u})}),d=l.N_.dict(e=>r[e].key),l.Ye.dict(e=>({id:e,displayName:(0,a.JT)(e),displayPrice:e===s.Gu.VIEW?(0,i.t)("checkout.free"):o[e],description:(0,a.JZ)(e),priceKey:d[e]}))})}function p(e){let r=l.N_.dict(r=>e[r].key);return JSON.stringify(Object.keys(r).sort().reduce((e,n)=>({...e,[n]:r[n]}),{}))}},232420:(e,r,n)=>{function i({isAnnual:e,numEditors:r,noCents:n,unitCost:i,monthlyUnitCostForStrikethrough:a,currency:o}){let s=new LocalizeCurrency(o),l=s.formatMoney(i,{showCents:!n}),c=t("all_carts.num_editors.seat_rename",{numEditors:r}),d=t("all_carts.plural_months",{months:e?12:1});return"number"==typeof a&&e?tx("all_carts.cost_equation_strikethrough_unit_price",{strikethroughUnitPrice:React.createElement("span",{className:styles.strikethrough},s.formatMoney(a,{showCents:!n})),money:l,editors:c,billingTime:d}):tx("all_carts.cost_equation",{money:l,editors:c,billingTime:d})}function a({currentBillingPeriod:e,numEditors:r,noCents:n,shouldStrikethroughMonthlyUnitCostIfAnnual:a,currency:o}){let{getWhiteboardUnitCost:s}=useTeamUpgradeBillingPrices({currency:o});return React.createElement(i,{isAnnual:e===BillingPeriod.ANNUAL,numEditors:r,unitCost:s(e),noCents:n,currency:o,monthlyUnitCostForStrikethrough:a?s(BillingPeriod.MONTHLY):void 0})}function o(e,r){return Math.ceil((1-12*e/(12*r))*100)}n.d(r,{U1:()=>o}),n(848318),n(716544),n(536384),n(453822),n(773969),n(145015),n(442313),n(180423),n(943202),n(376780),n(511231),n(515673),n(16229)},61485:(e,r,n)=>{n.d(r,{RR:()=>u,XT:()=>p,sx:()=>m});var i=n(848318),a=n(157907),o=n(579020),s=n(95650),l=n(379338),c=n(369600),d=n(572699);function u(e){let r=(0,d.tJ)().unwrapOr(null),n=(0,c.q5)();return!!(0,a.k)().campfire||(e?.preferOpenFilePlan&&n?.plan?!!n.plan.campfireModelEnabledAt:r?!!r.campfireModelEnabledAt:!!(0,l.tl)().campfire_model_enabled)}function p(){return function(e){let r=u(),n=!!(0,a.k)()[e];return i.useEffect(()=>{r&&!n&&(0,o.sx)("Campfire feature flag mismatch warning",{featureFlagName:e})},[r,n,e]),!!r&&n}("campfire_org_invite_with_bundle")}function m(){let e=u();return!(0,a.k)().campfire_cart_kill_switch&&!!(function(e){let r=(0,s.A)(),n=(0,l.tl)().analyze_data_flow_v2_until;return!!n&&(0,s.A)(n).isBefore(r)}()||e||(0,a.k)().campfire_cart||(0,a.k)().campfire_cart_early_rollout)}},556179:(e,r,n)=>{n.d(r,{tI:()=>i}),n(63817).r3,n(63817).CM,n(63817).SI,n(63817).kj,n(63817).NU,n(63817).Tm,n(63817).JT,n(63817).nf,n(63817).V5;let i=n(63817).tI;n(63817).mb,n(63817).Qi},186323:(e,r,n)=>{n.d(r,{R:()=>i});let i=n(61485).RR;n(61485).XT},915171:(e,r,n)=>{n.d(r,{BC:()=>a,iO:()=>i}),n(691778).b_,n(691778).Ji,n(691778).sH;let i=n(691778).iO;n(215108).E;let a=n(309390).B;n(691778).TF,n(691778).iA,n(691778).PS,n(691778).IM},675519:(e,r,n)=>{n.d(r,{$X:()=>s,BZ:()=>l,cF:()=>o,fF:()=>a});var i=n(965845);let a="Org admin settings onboarding - - billing tab";i.J7.DASHBOARD,i.J7.WORKSPACES,i.J7.TEAMS,i.J7.MEMBERS,i.J7.ACTIVITY,i.J7.BILLING,i.J7.RESOURCES,i.J7.SETTINGS,i.J7.CONTENT;let o="org_admin_settings_billing_groups_secondary_tab_onboarding_key",s="org_admin_settings_billing_overview_secondary_tab_onboarding_key",l={[i.SN.ABANDONED_DRAFTS]:"org_admin_unassigned_drafts_onboarding_key",[i.SN.TEAMS]:"org_admin_settings_teams_tab_onboarding_key",[i.SN.WORKSPACES]:"",[i._d.APPROVED_PLUGINS]:"",[i._d.APPROVED_WIDGETS]:"",[i._d.LIBRARIES]:"",[i._d.SHARED_FONTS]:"",[i.G_.BILLING_GROUPS]:o,[i.G_.INVOICES]:"",[i.G_.OVERVIEW]:s,[i.SN.CONNECTED_PROJECTS]:"org_admin_connected_projects_tab_onboarding_key"}},787481:(e,r,n)=>{n.d(r,{nj:()=>i});let i="admin_view_resource_tab"},71224:(e,r,n)=>{n.d(r,{Ki:()=>T,f9:()=>w});var i=n(848318),a=n(320583);n(397579);var o=n(493554),s=n(195507),l=n(925025),c=n(308746),d=n(837764),u=n(87089),p=n(376780),m=n(635547),h=n(793954),_=n(380859),g=n(124740),f=n(183905),E=n(980753),y=n(453805),b=n(216279);let v=new h.Ef([],{threshold:.1,matchAllTokens:!0,tokenize:!1,distance:300,keys:[{name:"name",weight:1},{name:"owner.handle",weight:1},{name:"owner.email",weight:1}]});function T({searchQuery:e,filters:r,sortConfig:n,enabled:a=!0,membersMap:c,firstPageSize:p,isEndUserSurface:h=!1,orgId:_}){let{optimisticIds:g,addOptimisticIds:f,setServerData:E}=(0,d.K)(),{subscription:b,status:T}=function({searchQuery:e,filters:r,sortConfig:n,enabled:i=!0,firstPageSize:a,extraTeamIds:s=[],isEndUserSurface:c=!1,orgId:d}){let p=(0,u.dq)(),h=(0,o.Rs)(m.jl4,{orgId:d??p,firstPageSize:a||25,queryParams:w(e,r,n,c),extraTeamIds:s},{enabled:i}),_=l.r.LOADING;return"loaded"===h.status?_=l.r.SUCCESS:"errors"===h.status&&(_=l.r.FAILURE),{subscription:h,status:_}}({searchQuery:e,filters:r,sortConfig:n,enabled:a,firstPageSize:p,extraTeamIds:g,isEndUserSurface:h,orgId:_}),A=T===l.r.SUCCESS&&!b.data?.orgTeams?.isLoadingNextPage,C=A&&b.data?.orgTeams&&b.data.orgTeams.hasNextPage()?()=>{b.data.orgTeams.loadNext(p||25)}:void 0;i.useEffect(()=>{T===l.r.SUCCESS&&E((b.data?.orgTeams||[]).filter(e=>!!e.teamId).map(e=>({id:e.teamId})))},[T,b.data,E]);let N=i.useMemo(()=>{var e,n,i;return b.data?(e=b.data,n=c,i=r,(e.orgTeams||[]).filter(e=>!!e.team).map(e=>S(e.team,n,e.memberCount?Number(e.memberCount):null)).filter(e=>I(e,i))):[]},[b.data,c,r]),L=i.useMemo(()=>b.data?function(e,r,n,i){let a=(0,s.oA)(e.org),o=(a&&a.teamsByIdInAdmin.status===s.tT.Loaded?((0,s.oA)(a.teamsByIdInAdmin)||[]).map(e=>e.team):s.oA(e.org)?.teamsById||[]).map(e=>S(e,r)).filter(e=>I(e,n));return i?(v.set(o),v.search(i)):o}(b.data,c,r,e):[],[b.data,c,r,e]),{trackPerformanceEvent:O}=(0,y.S)("teams_table_fetch_performance","livegraph");return(0,i.useEffect)(()=>{O("fetch_end")},[O,N.length]),(0,i.useEffect)(()=>{T===l.r.FAILURE&&O("fetch_error")},[O,T]),(0,i.useEffect)(()=>{O("fetch_start")},[O]),{status:T,teams:N,optimisticTeams:L,fetchMore:C,allTeamsFetched:A&&!C,addOptimisticIds:f}}function I(e,r){return!(r?.orphanedTeamFilter&&e.owner||r?.teamMembershipFilter&&r.teamMembershipFilter!==e.userTeamMembership||r?.orgAccessFilter&&r.orgAccessFilter!==e.org_access||r?.discoverabilityFilter&&(r.discoverabilityFilter===f.Fb.ORG_BROWSABLE&&e.org_access!==a.bUL.PRIVATE||r.discoverabilityFilter===f.Fb.HIDDEN&&e.org_access!==a.bUL.SECRET)||r?.workspaceFilter&&(r.workspaceFilter===E.O&&null!==e.workspace_id||r.workspaceFilter!==E.O&&r.workspaceFilter!==e.workspace_id))}function S(e,r,n){let i=r[e.id]??0,a=s.oA(e.ownerRole)?.user??null;return{...e,id:e.id,created_at:e.createdAt?.toISOString(),img_url:e.imgUrl||void 0,org_id:e.orgId,name:e.name,description:e.description||"",hidden:e.hidden,org_browsable:e.orgBrowsable,license_group_id:e.licenseGroupId,workspace_id:e.workspaceId,org_access:e.orgAccess||null,projects:Number(e.projectsCount)||0,editors:Number(e.editorsCount)||0,restrictions_list:e.restrictionsList||null,subscription:e.subscription||null,subscription_raw:e._subscriptionRaw||null,stripe_customer_id:e.stripeCustomerId||null,student_team_at:e.studentTeamAt?.toISOString()||null,student_team_state:e.studentTeamState||p.kU.STUDENT_TEAM_NULL,student_autoverifying_team_at:e.studentAutoverifyingTeamAt?.toISOString()||null,student_team:!!e.studentTeamAt,pro_team:!1,org_team:!0,starter_team:e.isStarterTeam||!1,grace_period_end:e.gracePeriodEnd?.toISOString()||null,grace_period_type:e.gracePeriodType||null,last_upgraded_at:null,deleted_at:e.deletedAt?.toISOString()||null,license_group:null,default_permission:e.defaultPermission,vat_gst_id:e.vatGstId||void 0,tax_id_verification_status:e.taxIdVerificationStatus||void 0,ai_features_disabled:!!e.aiFeaturesDisabledAt,legal_name:e.legalName||null,sharing_audience_control:e.sharingAudienceControlComputed||void 0,orphaned:!a,member_count:"number"==typeof n?Math.max(n+i,0):void 0,owner:a&&{id:a.id,name:a.name||void 0,handle:a.handle||"",img_url:a.imgUrl||"",email:a.email||void 0,description:a.description,org_id:e.orgId||void 0},experiment_assignments:[],userTeamMembership:null===e.roleOnObjectTeamForUser?g.ig.NOT_JOINED:g.ig.JOINED,sanctioned_at:s.oA(e.sanctionedAt)?.toISOString()||null}}function w(e,r,n,i){let a=(0,b.R)(r?.orgAccessFilter,r?.discoverabilityFilter);return String((0,c.lF)({...n&&{sort_by:n.columnName},...n&&{order_by:n.isReversed?_.dy.DESC:_.dy.ASC},...e&&{search_query:e},...a&&{org_access:a},...r?.orphanedTeamFilter&&{teams_without_owners:r.orphanedTeamFilter},...r?.teamMembershipFilter&&{member_of_filter:null!==r.teamMembershipFilter},...r?.teamMembershipFilter&&{teams_member_of:r.teamMembershipFilter===g.ig.JOINED},...r?.workspaceFilter&&{workspace_id:r.workspaceFilter},...i&&{is_end_user_surface:i}}))}},645906:(e,r,n)=>{n.d(r,{I:()=>u}),n(848318),n(716544),n(536384),n(17755),n(442313),n(895104);var i=n(412168);n(37257),n(790355);var a=n(834996),o=n(572699),s=n(668249),l=n(632859),c=n(701058);n(789863),n(965845),n(430330),n(977508);var d=n(139348);function u(){var e,r;let n=(0,a._6)(),u=(0,i.E)(),p=(0,o.gI)({migrationGroup:s.L.GROUP_9,component:"WorkspaceAdminBreadcrumbs"});return u||(e=n,r=p,"teamAdminConsole"!==e.view&&"orgAdminSettings"!==e.view&&("licenseGroup"===e.view&&e.subView===c.GN.ADMIN&&!!r||"billingGroupDashboard"===e.view&&e.selectedTab===l.D.ALL_REQUESTS||"workspace"===e.view&&e.subView===d.V0.ADMIN&&!!r||"orgDomainManagement"===e.view||"abandonedDraftFiles"===e.view||"seatRequests"===e.view))}},602247:(e,r,n)=>{n.d(r,{Qf:()=>g,zz:()=>E});var i=n(848318),a=n(992277),o=n(430285),s=n(730169),l=n(695635);n(493554);var c=n(195507),d=n(653959),u=n(502255),p=n(595919),m=n(890477),h=n(635547);let _=p.Ye.dict(()=>({assigned:0,available:0,total:0}));function g(e,r){let[n,a]=i.useState({status:"loading",data:_}),o=i.useCallback(()=>{(0,l.Ek)(h.rRb,{planParentId:e,planType:r}).then(e=>{a({status:"loaded",data:f(e)})}).catch(()=>{a({status:"errors",data:_})})},[e,r]);return(0,s.h)(()=>{o()}),{...n,refetch:o}}function f(e){let r=(0,c.oA)(e?.plan);if(!r)throw Error("received no plan while loading seat counts");let n=r.availableSeatCounts,i=r.assignedSeatCounts;return p.Ye.dict(e=>{let r=i.find(({billableProductKey:r})=>(0,m.Zx)(r)===e),a=n.find(({billableProductKey:r})=>(0,m.Zx)(r)===e),o=y(r?.count),s=y(a?.count);return{assigned:o,available:s,total:o+s}})}function E(e,r,n){let i=function(e,r,n){let[i]=(0,d.IT)((0,h.rRb)({planParentId:e,planType:r}),n);try{return i.transform(f)}catch(n){return(0,u.$D)(a.e.SCALE,n,{extra:{planType:r,planParentId:e}}),o.Qw.errorSuspendable(n,{release:()=>{}})}}(e,r,n),[s]=(0,d.mI)(i);if("loaded"===s.status)return s.data;if("errors"===s.status){let e=[s.errors].flat()[0];if(e)throw e}throw Error("Error fetching seat counts")}function y(e){return parseInt(e??"0",10)}},869507:(e,r,n)=>{n.d(r,{l4:()=>a,l_:()=>i});let i="Team admin settings onboarding - billing",a="team_admin_settings_billing_overview_secondary_tab_onboarding_key"},106483:(e,r,n)=>{n.d(r,{RQ:()=>a,cm:()=>o,jU:()=>i}),n(856472),n(42776);let i="organize-favorite-menu",a="team-link-context-menu";var o=(e=>(e.PENDING_ASSET_TRANSFER="pending_asset_transfer",e.PENDING_RESOURCE_CONNECTION="pending_resource_connection",e.ACTIVE_RESOURCE_CONNECTION="active_resource_connection",e))(o||{})},748604:(e,r,n)=>{n.d(r,{q:()=>s});var i=n(729411),a=n(464012);let o=i.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(6896),n.e(9727),n.e(7509),n.e(3663),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(5974),n.e(8355),n.e(9567),n.e(6739),n.e(3455),n.e(6514),n.e(4892),n.e(9215),n.e(7363),n.e(7824),n.e(785),n.e(5499),n.e(3890),n.e(6436),n.e(2308),n.e(4297),n.e(1092),n.e(6372),n.e(8204),n.e(5287),n.e(8187),n.e(9890),n.e(8717)]).then(n.bind(n,822273)).then(e=>e.EduUpgradeModal),(0,a.Ij)("EduUpgradeModal")),s=(0,a.Ju)(o,"EDU_UPGRADE_MODAL")},668122:(e,r,n)=>{n.d(r,{$T:()=>Y,g5:()=>K,nw:()=>W});var i=n(445777),a=n(772138),o=n(992277),s=n(157907),l=n(128080),c=n.n(l),d=n(44509),u=n(308746),p=n(502255),m=n(431118),h=n(442313),_=n(852338),g=n(885193),f=n(92537),E=n(126751),y=n(832571),b=n(376780),v=n(168482),T=n(542700),I=n(412429),S=n(154209),w=n(710665),A=n(694253),C=n(338159),N=n(632859),L=n(701058),O=n(965845),R=n(380859),P=n(515673),D=n(430330),M=n(748288),k=n(783235),F=n(217084),x=n(518429),U=n(977508),B=n(672182),V=n(139348),G=n(980753);let H={feed:{slug:"feed",i18nName:()=>(0,h.t)("view_selectors.file_browser.feed"),hasMissingResource:()=>!1},resourceUnavailable:{slug:"resourceUnavailable",i18nName:()=>(0,h.t)("view_selectors.file_browser.resource_unavailable"),hasMissingResource:()=>!1,isNonUrlAddressable:!0},deletedFiles:{slug:"trashed",i18nName:()=>(0,h.t)("view_selectors.file_browser.trash"),hasMissingResource:()=>!1},trashedFolders:{slug:"trashed-projects",i18nName:()=>(0,h.t)("view_selectors.file_browser.trash"),hasMissingResource:()=>!1},teamCreation:{slug:"create-team",i18nName:()=>(0,h.t)("view_selectors.file_browser.create_new_team"),hasMissingResource:()=>!1,skipBrowserHistory:()=>!0},folder:{slug:"project",hasMissingResource:()=>!1},team:{slug:"team",hasMissingResource:(e,r)=>{let{teamId:n}=r;return r.teamViewTab===U.A$.BILLING&&(!(0,A.canAdminTeam)(n,e)||!e.teams[n]||!e.teams[n].pro_team)},missingResourceType:F.Ft.TEAM,areDifferent:(e,r)=>e.teamId!==r.teamId},allProjects:{slug:"all-projects",hasMissingResource:(e,r)=>!(e.currentTeamId&&e.teams[e.currentTeamId]),missingResourceType:F.Ft.TEAM},limitedTeamSharedProjects:{slug:"shared-projects",i18nName:()=>(0,h.t)("sidebar.all_shared_projects"),hasMissingResource:()=>!1,missingResourceType:F.Ft.TEAM},teamAdminConsole:{slug:"team-admin-console",hasMissingResource:(e,r)=>{let{teamId:n}=r;return(r.teamAdminConsoleViewTab===U.Iv.BILLING||r.teamAdminConsoleViewTab===U.Iv.DASHBOARD)&&(!(0,A.canAdminTeam)(n,e)||!e.teams[n]||e.teams[n].student_team||!(0,w.w5)(e.teams[n]))},missingResourceType:F.Ft.TEAM,areDifferent:(e,r)=>e.teamId!==r.teamId||e.teamAdminConsoleViewTab!==r.teamAdminConsoleViewTab||e.teamAdminConsoleViewSecondaryTab!==r.teamAdminConsoleViewSecondaryTab},addAnnualPlan:{slug:"add-annual-plan",i18nName:()=>(0,h.t)("view_selectors.file_browser.add_an_annual_plan"),hasMissingResource:(e,r)=>!(r.teamId in e.teams),missingResourceType:F.Ft.TEAM},addCollaborators:{slug:"add-collaborators",i18nName:()=>(0,h.t)("view_selectors.file_browser.add_collaborators"),hasMissingResource:()=>!1},teamUpgrade:{slug:"upgrade-team",hasMissingResource:(e,r)=>!(0,s.k)().redirect_starter_team_loophole&&null===r.teamId&&(0,F.jX)(r.teamFlowType)||!!r.teamId&&!(r.teamId in e.teams),missingResourceType:F.Ft.TEAM,areDifferent:(e,r)=>e.teamId!==r.teamId||e.paymentStep!==r.paymentStep,skipBrowserHistory:e=>e.paymentStep===P.tn.CONFIRM_PAY},promoReview:{slug:"promo-review",hasMissingResource:(e,r)=>!(r.teamId in e.teams),missingResourceType:F.Ft.TEAM,areDifferent:(e,r)=>e.teamId!==r.teamId,skipBrowserHistory:()=>!0},eduReview:{slug:"edu-review",hasMissingResource:(e,r)=>!(r.teamId in e.teams),missingResourceType:F.Ft.TEAM,areDifferent:(e,r)=>e.teamId!==r.teamId,skipBrowserHistory:()=>!0},teamFeed:{slug:"feed-posts",i18nName:()=>(0,h.t)("view_selectors.file_browser.feed"),hasMissingResource:()=>!1,areDifferent:(e,r)=>e.postUuid!==r.postUuid},litmus:{slug:"litmus",hasMissingResource:()=>!1},componentBrowser:{slug:"your-libraries",hasMissingResource:()=>!1},componentBrowserLibrary:{slug:"library",hasMissingResource:()=>!1},sharedWithYou:{slug:"shared-with-you",hasMissingResource:()=>!1},seatRequests:{slug:"seat-requests",i18nName:()=>(0,h.t)("admin_dashboard.requests.seat_title"),hasMissingResource:(e,r)=>{if(r.adminPlanType!==D.O.ORG)return!(r.planId in e.teams);{let r=(0,A.getPermissionsStateMemoized)(e),n=(0,S.wA)(r),i=(0,I.xw)(r);return!n||!i||!(0,A.canAdminOrg)(e.currentUserOrgId,r)}}},workspace:{slug:"workspace",missingResourceType:F.Ft.WORKSPACE,hasMissingResource:(e,r)=>{let n=(0,A.getPermissionsStateMemoized)(e),i=(0,S.wA)(n),a=(0,I.xw)(n);if(!i||!a||!i.bigma_enabled)return!0;switch(r.subView){case V.V0.DIRECTORY:case V.V0.ADMIN:default:return!1}},areDifferent:(e,r)=>e.subView!==r.subView||e.workspaceId!==r.workspaceId||e.selectedTab!==r.selectedTab},licenseGroup:{slug:"billing-group",missingResourceType:F.Ft.LICENSE_GROUP,hasMissingResource:(e,r)=>{let n=(0,A.getPermissionsStateMemoized)(e),i=(0,S.wA)(n),a=(0,I.xw)(n);return!i||!a||!i.bigma_enabled||r.subView===L.GN.ADMIN&&!(0,A.canAdminOrg)(e.currentUserOrgId,n)&&!a.license_admin},areDifferent:(e,r)=>e.subView!==r.subView||e.licenseGroupId!==r.licenseGroupId||e.selectedTab!==r.selectedTab},billingGroupDashboard:{slug:"billing-group-dashboard",hasMissingResource:(e,r)=>{let n=(0,A.getPermissionsStateMemoized)(e),i=(0,S.wA)(n),a=(0,I.xw)(n);return!i||!a||!i.bigma_enabled},areDifferent:(e,r)=>e!==r},orgDomainManagement:{slug:"domains",i18nName:()=>(0,h.t)("view_selectors.file_browser.org_domain_management"),hasMissingResource:(e,r)=>{let n=(0,A.getPermissionsStateMemoized)(e),i=(0,S.wA)(n),a=(0,I.xw)(n);return!i||!a||!(0,A.canAdminOrg)(e.currentUserOrgId,n)}},abandonedDraftFiles:{slug:"abandoned_draft_files",i18nName:()=>(0,h.t)("org_admin_tab.abandoned_drafts"),hasMissingResource:(e,r)=>{let n=(0,A.getPermissionsStateMemoized)(e);return function({isAdminOrg:e,permissions:r,teams:n,view:i}){if(i.adminPlanType!==D.O.ORG)return!(i.planId in n);{let n=(0,S.wA)(r),i=(0,I.xw)(r);return!n||!i||!e}}({isAdminOrg:(0,A.canAdminOrg)(e.currentUserOrgId,n),permissions:n,teams:e.teams,view:r})}},orgAdminSettings:{slug:"admin",i18nName:()=>(0,h.t)("view_selectors.file_browser.org_admin"),hasMissingResource:(e,r)=>{let n=(0,A.getPermissionsStateMemoized)(e),i=(0,S.wA)(n),a=(0,I.xw)(n),o=n.currentUserOrgId&&(0,S.kA)(n.orgById[n.currentUserOrgId]);return!(i&&a&&(r.orgAdminSettingsViewTab!==O.J7.WORKSPACES&&r.orgAdminSettingsViewSecondaryTab!==O.SN.WORKSPACES||!n.currentUserOrgId||o)&&((0,A.canAdminOrg)(e.currentUserOrgId,n)||a.license_admin||a.workspace_users?.some(e=>"admin"===e.permission)))||r.orgAdminSettingsViewTab===O.J7.BILLING&&r.orgAdminSettingsViewSecondaryTab===O.G_.BILLING_GROUPS&&!o},areDifferent:(e,r)=>e.orgAdminSettingsViewTab!==r.orgAdminSettingsViewTab||e.orgAdminSettingsViewSecondaryTab!==r.orgAdminSettingsViewSecondaryTab||!c()(e.orgAdminMembersTabFilters,r.orgAdminMembersTabFilters)||!c()(e.orgAdminMembersTabSort,r.orgAdminMembersTabSort)},search:{slug:"search",hasMissingResource:()=>!1,areDifferent:(e,r)=>e.entryPoint!==r.entryPoint,stripFuidParam:e=>"community"===e.entryPoint},user:{slug:"user",i18nName:()=>(0,h.t)("view_selectors.file_browser.user"),hasMissingResource:()=>!1,areDifferent:(e,r)=>e.userViewTab!==r.userViewTab||e.userId!==r.userId},recentsAndSharing:{slug:"recents-and-sharing",i18nName:()=>(0,h.t)("view_selectors.file_browser.recents_and_sharing"),hasMissingResource:()=>!1},draftsToMove:{slug:"drafts-to-move",i18nName:()=>(0,h.t)("view_selectors.file_browser.drafts_to_move"),hasMissingResource:()=>!1},resourceHub:{slug:"resources",i18nName:()=>(0,h.t)("view_selectors.file_browser.resource_hub"),hasMissingResource:()=>!1}},K=Object.keys(H),W=Object.values(H).map(e=>e.slug),z=e=>/^[0-9]+$/.test(e);function $({resourceType:e,matchingViewName:r,extra:n}){(0,p.$D)(o.e.EXPLORE,Error(`Invalid ${e} ID while parsing selected view ${r} from path`),{extra:{matchingViewName:r,...n}})}class Y{pathToSelectedView(e,r,n,i){if("my_plugins"===r[1]&&e.user)return{view:"user",userId:e.user.id,userViewTab:B.o.PLUGINS};if("files"!==r[1])return null;if("drafts"===r[2])return{view:"folder",folderId:e.user?.drafts_folder_id};if("recent"===r[2])return{view:"recentsAndSharing"};let l=K.find(e=>H[e].slug===r[2]);if(!l)return null;switch(l){case"folder":{let e=r[3];if((0,s.k)().file_browser_url_id_validation_logging&&!z(e))return $({resourceType:"folder",matchingViewName:l,extra:{folderId:e}}),null;if(!e)return{view:"resourceUnavailable",resourceType:F.Ft.PROJECT};let i=!1;return n&&null!=(0,u.qg)(n).renameProject&&(i="true"===(0,u.qg)(n).renameProject),{view:l,folderId:e,shouldShowRenameModal:i}}case"allProjects":case"team":{let i,o,c,d,p,m=U.A$.HOME;if(4===r.length){let e=(0,a.K)(U.A$,r[r.length-1]);e&&e!==U.A$.PROFILE&&(m=e)}if(5===r.length||6===r.length){if("restore"===r[5])return null;let e=(0,a.K)(U.A$,r[r.length-1]);e&&e!==U.A$.PROFILE&&(m=e)}if(!z(p=e.currentTeamId?e.currentTeamId:r[3]))return void 0!==p&&$({resourceType:"team",matchingViewName:l,extra:{teamId:p,ps_benchmark:!0,"!!state.currentTeamId":!!e.currentTeamId,"!!state.currentUserOrgId":!!e.currentUserOrgId,"parts.length":r.length}}),null;let h=p&&e.teams[p];if(h&&n){let e=new URLSearchParams(n).get("upgrade_type");e&&(d=(0,a.K)(b.G_,e))}return n&&null!=(0,u.xL)(n).rciid&&(0,s.k)().fc_general&&(0,s.k)().fc_plan_enabled&&(i=(0,u.xL)(n).rciid),h&&n&&null!=(0,u.qg)(n).proUpgrade&&(o="true"===(0,u.qg)(n).proUpgrade),n&&null!=(0,u.qg)(n).assetTransferRequest&&(c=(0,u.qg)(n).assetTransferRequest),{view:"team",teamId:p,teamViewTab:m,upgradeModalType:d,isProUpgrade:o,assetTransferRequestId:c,showResourceConnectionInviteModal:i}}case"teamAdminConsole":{let i,o;if(!e.currentTeamId)return null;let c=null,d=null,p=(0,s.k)().fc_general&&(0,s.k)().fc_plan_enabled;if(p){if(r.length>=4){let e=(0,a.K)(U.Iv,r[3]);if(e&&(c=e),e&&r.length>=5){let n=r[4];switch(e){case U.Iv.CONTENT:i=(0,a.K)(U.F9,n);break;case U.Iv.BILLING:i=(0,a.K)(U.pu,n)}}}}else{let e=(0,a.K)(U.Iv,r[r.length-1]);e&&(c=e)}if(d=e.currentTeamId,(0,s.k)().file_browser_url_id_validation_logging&&!z(d))return $({resourceType:"team",matchingViewName:l,extra:{currentTeamId:d}}),null;let m=!!e.teams[d]?.pro_team;c||(c=m?U.Iv.DASHBOARD:U.Iv.MEMBERS);let h="";return m&&n&&(0,u.qg)(n).dashEntryPoint&&(c=U.Iv.DASHBOARD,h=(0,u.qg)(n).dashEntryPoint),c===U.Iv.CONTENT&&i===U.F9.CONNECTED_PROJECTS&&n&&null!=(0,u.xL)(n).rciid&&p&&(o=(0,u.xL)(n).rciid),{view:l,teamId:d,teamAdminConsoleViewTab:c,teamAdminConsoleViewSecondaryTab:i,isProTeam:m,dashDeepLinkEntryPoint:h,showResourceConnectionInviteModal:o}}case"limitedTeamSharedProjects":{let r;if((0,s.k)().limited_plan_spaces&&e.currentTeamId&&(r=e.currentTeamId),!r)return null;return{view:"limitedTeamSharedProjects"}}case"addAnnualPlan":case"addCollaborators":return{view:l,teamId:r[3]};case"teamUpgrade":{let e=new URLSearchParams(n),i=!!(0,s.k)().redirect_starter_team_loophole&&!(0,s.k)().close_starter_team_loophole,a=Object.values(F.SC).includes(r[4])?r[4]:F.SC.UPGRADE_EXISTING_TEAM;if(i&&a!==F.SC.UPGRADE_EXISTING_TEAM)return(0,p.$D)(o.e.MONETIZATION_UPGRADES,Error("Invalid team flow type while parsing selected view from path"),{extra:{matchingViewName:l,parts:r}}),{view:"teamCreation",fromNewTab:!0};let c=Object.values(P.tn).includes(r[4])?r[4]:P.tn.CHOOSE_PLAN,d=r[5]||c,u=e.get("planType")?parseInt(e.get("planType")):a===F.SC.UPGRADE_EXISTING_TEAM?F.Sc.TEAM:void 0,m=(0,F.ck)(a,d)?void 0:u,h=r[3];if("n"===h){if(h=null,i)return(0,p.$D)(o.e.MONETIZATION_UPGRADES,Error("Null team ID while parsing selected view from path"),{extra:{matchingViewName:l,parts:r}}),{view:"teamCreation",fromNewTab:!0}}else if((0,s.k)().file_browser_url_id_validation_logging&&!z(h))return $({resourceType:"team",matchingViewName:l,extra:{teamId:h}}),null;return{view:l,teamFlowType:a,teamId:h,paymentStep:d,...e.get("entryPoint")?{entryPoint:parseInt(e.get("entryPoint"))}:{},...e.get("billingPeriod")?{billingPeriod:parseInt(e.get("billingPeriod"))}:{},...e.get("onCompleteRedirectFileKey")?{searchParams:{onCompleteRedirectFileKey:e.get("onCompleteRedirectFileKey"),onCompleteRedirectNodeId:e.get("onCompleteRedirectNodeId")}}:{},...m?{planType:m}:{}}}case"promoReview":{let e=r[3];if((0,s.k)().file_browser_url_id_validation_logging&&!z(e))return $({resourceType:"team",matchingViewName:l,extra:{teamId:e}}),null;return{view:l,teamId:r[3],teamName:r[4]}}case"eduReview":{let e=r[3];if((0,s.k)().file_browser_url_id_validation_logging&&!z(e))return $({resourceType:"team",matchingViewName:l,extra:{teamId:e}}),null;return{view:l,teamId:e}}case"licenseGroup":{let e;let i=(0,y.g)(r[5]),a=(0,T.E)(n);i===L.RM.MEMBERS&&(e=a??R.oU);let o=new URLSearchParams(d.Ay.location.search).get(E.u5),c=o?(0,E.vQ)(o):void 0,u=r[3];if((0,s.k)().file_browser_url_id_validation_logging&&!z(u))return $({resourceType:"license group",matchingViewName:l,extra:{licenseGroupId:u}}),null;return{view:l,subView:L.GN.ADMIN,licenseGroupId:u,selectedTab:i,orgAdminMembersTabSort:e,orgAdminOriginTab:c}}case"billingGroupDashboard":return{view:l,selectedTab:(0,a.K)(N.D,r[3]??"")??N.D.REQUESTS};case"seatRequests":if(null===e.currentUserOrgId)return{view:l,adminPlanType:D.O.TEAM,planId:e.currentTeamId??""};return{view:l,adminPlanType:D.O.ORG,planId:e.currentUserOrgId};case"workspace":{let e=r[3];if(((0,a.K)(V.V0,r[4])||V.V0.DIRECTORY)===V.V0.ADMIN){let i;let o=(0,a.K)(V.m2,r[5])||V.rj[0],c=(0,T.E)(n);if(o===V.m2.MEMBERS&&(i=c??R.oU),(0,s.k)().file_browser_url_id_validation_logging&&!z(e))return $({resourceType:"workspace",matchingViewName:l,extra:{workspaceId:e}}),null;return{view:l,subView:V.V0.ADMIN,workspaceId:e,selectedTab:o,orgAdminMembersTabSort:i}}{let n=e;if(e===G.O)n=null;else if((0,s.k)().file_browser_url_id_validation_logging&&!z(e))return $({resourceType:"workspace",matchingViewName:l,extra:{workspaceId:e}}),null;return{view:l,subView:V.V0.DIRECTORY,workspaceId:n,selectedTab:(0,a.K)(V.dN,r[5])||V.Fi[0]}}}case"orgAdminSettings":{let i,o;if(r.length>=4&&(i=(0,a.K)(O.J7,r[3]))&&r.length>=5){let e=r[4];switch(i){case O.J7.RESOURCES:o=(0,a.K)(O._d,e);break;case O.J7.CONTENT:o=(0,a.K)(O.SN,e);break;case O.J7.BILLING:o=(0,a.K)(O.G_,e??"")}}i===O.J7.WORKSPACES?(i=O.J7.CONTENT,o=O.SN.WORKSPACES):i===O.J7.TEAMS&&(i=O.J7.CONTENT,o=O.SN.TEAMS);let l={view:"orgAdminSettings",orgAdminSettingsViewTab:i=i??O.J7.DASHBOARD,orgAdminSettingsViewSecondaryTab:o,orgAdminMembersTabFilters:R.J0,orgAdminMembersTabSort:R.oU};i===O.J7.DASHBOARD&&n&&null!=(0,u.qg)(n).dashEntryPoint&&(l.dashDeepLinkEntryPoint=(0,u.qg)(n).dashEntryPoint);let c=(0,v.rT)(n,e.licenseGroups);i===O.J7.MEMBERS&&c&&(l.orgAdminMembersTabFilters=c);let d=(0,T.E)(n);if(i===O.J7.MEMBERS&&n&&"date-upgraded"===(0,u.qg)(n).initialSort?l.orgAdminMembersTabSort={columnName:R.Od.DESIGN_ROLE,isReversed:!0}:i===O.J7.MEMBERS&&d&&(l.orgAdminMembersTabSort=d),i===O.J7.MEMBERS&&n&&null!=(0,u.qg)(n).orgJoinRequest&&(l.membersTabOrgJoinRequest=(0,u.qg)(n).orgJoinRequest),n&&null!=(0,u.qg)(n).assetTransferRequest&&(l.teamsTabAssetTransferRequest=(0,u.qg)(n).assetTransferRequest),i===O.J7.RESOURCES&&n&&(o===O._d.APPROVED_PLUGINS||o===O._d.APPROVED_WIDGETS)){let e=(0,u.qg)(n).eid;l.selectedExtensionId=e}return i===O.J7.CONTENT&&o===O.SN.CONNECTED_PROJECTS&&n&&null!=(0,u.xL)(n).rciid&&(0,s.k)().fc_general&&(0,s.k)().fc_plan_enabled&&(l.showResourceConnectionInviteModal=(0,u.xL)(n).rciid),l}case"search":return{view:"search",entryPoint:"url:internal",previousView:{view:"recentsAndSharing"}};case"user":{if(r.length<4||!e.user)return null;let a=r[3],o=B.o.INTERNAL_PROFILE;if("settings"===r[r.length-1]&&a===e.user.id){let e=n&&(0,u.qg)(n).tab,r=i?i.slice(1):void 0;return{view:"recentsAndSharing",accountModalTab:e||F.bb.ACCOUNT,accountModalTabSection:r}}if("plugins"===r[r.length-1])return{view:"recentsAndSharing",accountModalTab:F.bb.PLUGINS};if("email_unsubscribe"===r[r.length-1]&&a===e.user.id){let e=n&&(0,u.qg)(n).policy;if(e)return{view:"recentsAndSharing",emailPolicyToUnsubscribeFrom:e};return{view:"recentsAndSharing",accountModalTab:F.bb.NOTIFICATIONS}}return(0,s.k)().xr_debounce_threshold&&"posts"===r[r.length-1]&&(o=B.o.INTERNAL_PROFILE_POSTS),{view:"user",userId:a,userViewTab:o}}case"feed":if(n){let e=(0,u.qg)(n);if(e.quickReplyFileKey&&e.quickReplyThreadId)return{view:"feed",quickReplyInfo:{fileKey:e.quickReplyFileKey,threadId:e.quickReplyThreadId}}}return{view:"feed"};case"teamFeed":{if(null===e.currentUserOrgId||!(0,s.k)().xr_debounce_threshold)return null;let n=new URLSearchParams(d.Ay.location.search);return{view:"teamFeed",postUuid:r[3],creatorId:n.get("creator_id")??void 0}}case"sharedWithYou":{let e;return r.length>=4&&(e="projects"===r[3]?x.G.PROJECTS:x.G.FILES),{view:"sharedWithYou",tab:e||x.G.FILES}}case"recentsAndSharing":{let e;if(r.length>=4&&(e=(0,a.K)(M.G,r[r.length-1])),!e)return{view:"recentsAndSharing"};return{view:"recentsAndSharing",tab:e}}case"teamCreation":return{view:l,fromNewTab:!0};case"abandonedDraftFiles":if(null===e.currentUserOrgId)return{view:l,abandonedDraftFolderId:r[r.length-1],adminPlanType:D.O.TEAM,planId:e.currentTeamId??""};return{view:l,abandonedDraftFolderId:r[r.length-1],adminPlanType:D.O.ORG,planId:e.currentUserOrgId};case"componentBrowser":if(!(0,s.k)().dt_component_browser)return null;return{view:"componentBrowser"};case"componentBrowserLibrary":{if(!(0,s.k)().dt_component_browser)return null;let e=r[3];if(!e)return{view:"componentBrowser"};return{view:"componentBrowserLibrary",libraryKey:e,componentKey:r[5]}}case"litmus":return null;case"resourceHub":if(!(0,_.yl)())return null;return{view:"resourceHub"};default:return{view:l}}}requireHistoryChange(e,r){let n=K.find(r=>r===e.view),a=K.find(e=>e===r.view);if(!n&&!a)return!1;let o=n&&H[n].skipBrowserHistory;if(o&&o(e))return!1;if(n!==a)return!0;if(n&&n===a){let i=H[n].areDifferent;return!!i&&i(e,r)}(0,i.KF)(!1,"view selector code which should be unreachable was reached")}selectedViewToPath(e,r){let n=K.find(r=>r===e.view);if(!n)return null;let a=H[n];if(a.isNonUrlAddressable)return null;let o={},l=a.slug;"folder"===e.view&&r.user?.drafts_folder_id===e.folderId&&(l="drafts");let c="";c=(0,C.i)(r);let p=`/files${c}/${l}`;switch(e.view){case"folder":if("drafts"===l)break;p+=`/${e.folderId}`;let h=this.selectedViewName(e,r);h&&(p+=`/${(0,m.sy)(h)}`);break;case"team":let _=this.selectedViewName(e,r)||"Team";r.currentTeamId?p=`/files${c}/all-projects`:(p+=`/${e.teamId}/${(0,m.sy)(_)}`,e.teamViewTab&&(p+=`/${e.teamViewTab}`));break;case"allProjects":e.isProUpgrade&&(o={...o,proUpgrade:e.isProUpgrade});break;case"componentBrowserLibrary":if(!(0,s.k)().dt_component_browser)break;p+=`/${e.libraryKey}`,e.componentKey?p+=`/component/${e.componentKey}/Component`:p+="/Library";break;case"teamAdminConsole":e.teamAdminConsoleViewTab&&(p+=`/${e.teamAdminConsoleViewTab}`),(0,s.k)().fc_general&&(0,s.k)().fc_plan_enabled&&e.teamAdminConsoleViewSecondaryTab&&(p+=`/${e.teamAdminConsoleViewSecondaryTab}`),this.appendQueryParams(o,[g.mL,g.UC]);break;case"addAnnualPlan":case"addCollaborators":case"eduReview":p+=`/${e.teamId}`;break;case"teamUpgrade":null===e.teamId?p+="/n":p+=`/${e.teamId}`,e.teamFlowType&&(p+=`/${e.teamFlowType}`),e.paymentStep&&(p+=`/${e.paymentStep}`);let f=new URLSearchParams(d.Ay.location.search);(e.searchParams||f)&&(o={...o,...f.get("onCompleteRedirectFileKey")?{onCompleteRedirectFileKey:f.get("onCompleteRedirectFileKey")}:{},...f.get("onCompleteRedirectNodeId")?{onCompleteRedirectNodeId:f.get("onCompleteRedirectNodeId")}:{},...e.searchParams}),e.billingPeriod&&(o={...o,billingPeriod:e.billingPeriod}),e.entryPoint&&(o={...o,entryPoint:e.entryPoint});let y=e.planType||F.Sc.UNDETERMINED;y&&(o={...o,planType:y});break;case"promoReview":p+=`/${e.teamId}/${e.teamName}`;break;case"abandonedDraftFiles":p+=`/${e.abandonedDraftFolderId}`;break;case"orgAdminSettings":e.orgAdminSettingsViewTab&&(p+=`/${e.orgAdminSettingsViewTab}`,"members"===e.orgAdminSettingsViewTab&&(e.orgAdminMembersTabFilters&&(o={...o,...(0,v.OA)(e.orgAdminMembersTabFilters,r.licenseGroups)}),e.orgAdminMembersTabSort&&(o={...o,...(0,T.n)(e.orgAdminMembersTabSort)})),e.orgAdminSettingsViewSecondaryTab&&(p+=`/${e.orgAdminSettingsViewSecondaryTab}`),this.appendQueryParams(o,[g.mL,g.UC]));break;case"licenseGroup":p+=`/${e.licenseGroupId}/${e.subView}/${e.selectedTab}`,e.selectedTab===L.RM.MEMBERS&&e.orgAdminMembersTabSort&&(o={...o,...(0,T.n)(e.orgAdminMembersTabSort)}),e.orgAdminOriginTab&&(o={...o,[E.u5]:e.orgAdminOriginTab});break;case"billingGroupDashboard":e.selectedTab===N.D.ALL_REQUESTS&&(p+=`/${e.selectedTab}`);break;case"workspace":switch(e.subView){case V.V0.ADMIN:p+=`/${e.workspaceId}/${e.subView}/${e.selectedTab}`,e.selectedTab===V.m2.MEMBERS&&e.orgAdminMembersTabSort&&(o={...o,...(0,T.n)(e.orgAdminMembersTabSort)});break;case V.V0.DIRECTORY:p+=`/${e.workspaceId??G.O}/${e.subView}/${e.selectedTab}`}break;case"search":let b=r.search.parameters;switch(o={model_type:b.searchModelType,...b.query&&{q:b.query},...b.fileTypeFilter&&{file_type:b.fileTypeFilter},...null!==b.rerank&&{rerank:b.rerank}},b.searchScope){case k.Rx.ORG:case k.Rx.ORG_GUEST:case k.Rx.PERSONAL:break;case k.Rx.COMMUNITY:p="/community/search";break;default:(0,i.xb)(b.searchScope)}break;case"user":let I=this.selectedViewName(e,r),S=I?`/${(0,m.sy)(I)}`:"";e.userViewTab===B.o.INTERNAL_PROFILE?p+=`/${e.userId}${S}`:e.userViewTab===B.o.INTERNAL_PROFILE_POSTS?p+=`/${e.userId}/posts`:e.userViewTab===B.o.PLUGINS&&(p+=`/${e.userId}/plugins`);break;case"teamFeed":e.postUuid&&(p+=`/${e.postUuid}`),e.creatorId&&(o={...o,creator_id:e.creatorId});break;case"sharedWithYou":case"recentsAndSharing":e.tab&&(p+=`/${e.tab}`);break;case"resourceHub":p=d.Ay.location.pathname,new URLSearchParams(d.Ay.location.search).forEach((e,r)=>{"fuid"!==r&&(o[r]=e)});break;case"litmus":"feed"===e.subView&&(p+=`/${e.projectId}`)}let w=!a.stripFuidParam||!a.stripFuidParam(e);return(r.user&&w&&(o.fuid=r.user.id),window.isAppShell&&(o._app_shell="1"),0!==Object.keys(o).length)?`${p}?${(0,u.lF)(o)}`:p}selectedViewName(e,r){let n=K.find(r=>r===e.view);if(!n)return null;switch(e.view){case"folder":let i=r.folders[e.folderId];if(!i)return null;return(0,f.CI)(i);case"team":return r.teams[e.teamId]?.name??(0,h.t)("view_selectors.file_browser.team");case"teamAdminConsole":let a=r.teams[e.teamId]?.name;return(0,h.t)("view_selectors.file_browser.team_admin_console_with_name",{adminTeamName:a})??(0,h.t)("view_selectors.file_browser.team_admin_console_generic");case"teamUpgrade":if(e.teamFlowType===F.SC.CREATE_AND_UPGRADE||null===e.teamId)return(0,h.t)("view_selectors.file_browser.create_new_team");let o=r.teams[e.teamId]?.name;if(o)return(0,h.t)("view_selectors.file_browser.team_upgrade_with_name",{teamName:o});return(0,h.t)("view_selectors.file_browser.team_upgrade_generic");case"search":let{query:s}=r.search.parameters;return s?(0,h.t)("view_selectors.file_browser.search_results_with_query",{query:s}):(0,h.t)("view_selectors.file_browser.search_results_generic");case"user":let{orgUsersByOrgId:l,currentUserOrgId:c}=r,d=c&&l[c]||{};if(e.userViewTab===B.o.INTERNAL_PROFILE||e.userViewTab===B.o.INTERNAL_PROFILE_POSTS){let r=d[e.userId];return r?r.user.handle:""}if(e.userViewTab===B.o.PLUGINS)return(0,h.t)("view_selectors.file_browser.plugins");return"User";case"licenseGroup":return(0,h.t)("view_selectors.file_browser.billing_admin");case"workspace":if(e.subView===V.V0.ADMIN)return(0,h.t)("view_selectors.file_browser.workspace_admin");if(!e.workspaceId)return(0,h.t)("view_selectors.file_browser.other_teams");return(0,h.t)("view_selectors.file_browser.workspace");default:if(H[n].i18nName)return H[n].i18nName();return null}}selectedViewHasMissingResources(e,r){let n=K.find(e=>e===r.view);return!!n&&H[n].hasMissingResource(e,r)}selectedViewMissingResourceType(e){let r=K.find(r=>r===e.view);if(r)return H[r].missingResourceType}appendQueryParams(e,r){let n=new URLSearchParams(d.Ay.location.search);r.forEach(r=>{n.has(r)&&(e[r]=n.get(r))})}}},615399:(e,r,n)=>{n.d(r,{q:()=>o});var i=n(39773),a=n(528737);let o=(0,a.Q)(i.zl,"FileBrowser");(0,a.h)("filebrowser-loading-page",e=>{e.setAttribute("id",""),e.classList.remove("hidden"),e.classList.remove("fadeOut")})},180608:(e,r,n)=>{n(848318).createContext({canGoBack:!1,canGoForward:!1,goBack:()=>{},goForward:()=>{}})},412168:(e,r,n)=>{n.d(r,{E:()=>o}),n(848318);var i=n(35030),a=n(141039);function o(){return!!a.eD||(0,i.ce)()}n(344946),n(180608)},974465:(e,r,n)=>{n.d(r,{y:()=>b});var i=n(848318),a=n(716544);n(629829),n(730169),n(442313);var o=n(859569),s=n(650889),l=n(670804),c=n(449737),d=n(155651);n(386117);var u=n(481540),p=n(254310),m=n(402840),h=n(188591),_=n(732939),g=n(30807),f=n(757123),E=n(448306);n(680505);var y=n(417669);function b({plugins:e,renderPluginDropdownButton:r}){return i.createElement(d.QE.Consumer,null,n=>i.createElement(v,{plugins:e,trackingContext:n.name,renderPluginDropdownButton:r}))}function v({plugins:e,trackingContext:r,renderPluginDropdownButton:n}){let d=(0,a.wA)(),g=(0,E.j_)(p.A5.PluginItemsView.canAdminOrg),f=(0,o.B)(),{showing:b,show:v,data:w}=(0,E.Di)();i.useEffect(()=>{d(l.Xt())},[d]);let A=i.useMemo(()=>e.map(e=>({plugin:e,version:(0,m.uF)(e)})),[e]),C=i.useCallback(({version:e})=>e.name??"",[]),N=i.useCallback(({plugin:e},n)=>{(0,u.Cu)({context:r,text:"Plugin Tile",pluginId:e.id}),f(e,n)},[f,r]),L=i.useCallback(e=>{if(1!==e.length)return;let r=e[0].plugin;d((0,c.to)({type:_.H,data:{plugin:r},showModalsBeneath:!0}))},[d]),O=i.useCallback((e,r,n)=>{1===e.length&&v({data:{publishedResource:e[0].plugin,targetRect:{top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1},index:n}})},[v]),R=i.useCallback(({plugin:e})=>i.createElement(I,{plugin:e,renderPluginDropdownButton:n}),[n]);return i.createElement(i.Fragment,null,i.createElement(s.A,{items:A,getAriaLabel:C,viewType:h.XU.GRID,handleOpenItem:N,handleContextMenu:O,handleDeleteKey:g.unwrapOr(!1)?L:void 0,multiselectDisabled:!0,isDraggable:!1,gridViewProps:{tileClassName:y.i1,containerStyle:S.grid,renderTile:T,renderTileFooter:R}}),b&&w&&i.createElement(E.ii,{dropdownData:w}))}function T({plugin:e}){return i.createElement(g.Ce,{plugin:e,isPublishing:!1,showNewBadge:!1,isPublicOverride:!1})}function I({plugin:e,renderPluginDropdownButton:r}){return i.createElement(g.Xg,{showInstallCount:!0,plugin:e,isPublicOverride:!1,dropdown:r?i.createElement(f.r,{resource:e}):void 0})}n(93911);let S={grid:{padding:"x15fnm84",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,$$css:!0}}},104536:(e,r,n)=>{n.d(r,{N:()=>g});var i=n(848318),a=n(716544);n(629829),n(442313);var o=n(871612),s=n(650889),l=n(670804),c=n(449737);n(625069);var d=n(254310),u=n(402840),p=n(188591),m=n(935165),h=n(732939),_=n(448306);function g({widgets:e}){let r=(0,a.wA)(),n=(0,_.j_)(d.A5.WidgetItemsView.canAdminOrg);i.useEffect(()=>{r(l.gI())},[r]);let m=(0,o.s)(),{showing:g,show:b,data:v}=(0,_.Di)(),T=i.useMemo(()=>e.map(e=>({widget:e,version:(0,u.uF)(e)})),[e]),I=i.useCallback(({version:e})=>e.name??"",[]),S=i.useCallback(({widget:e},r)=>m(e,r),[m]),w=i.useCallback(e=>{if(1!==e.length)return;let n=e[0].widget;r((0,c.to)({type:h.H,data:{plugin:n},showModalsBeneath:!0}))},[r]),A=i.useCallback((e,r,n)=>{1===e.length&&b({data:{publishedResource:e[0].widget,targetRect:{top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1},index:n}})},[b]);return i.createElement(i.Fragment,null,i.createElement(s.A,{items:T,getAriaLabel:I,viewType:p.XU.GRID,handleOpenItem:S,handleContextMenu:A,handleDeleteKey:n.unwrapOr(!1)?w:void 0,multiselectDisabled:!0,isDraggable:!1,gridViewProps:{containerStyle:y.grid,renderTile:E,renderTileFooter:f}}),g&&v&&i.createElement(_.ii,{dropdownData:v}))}function f({widget:e,version:r}){return i.createElement("div",{className:"x78zum5 x1q0g3np xsdox4t x87ps6o"},i.createElement(m.aA,{widget:e,version:r,viewContext:"OrgWidgetsView"}))}function E({widget:e,version:r}){return i.createElement(m.Ke,{widget:e,version:r,isInItemsView:!0})}n(680505),n(93911);let y={grid:{padding:"x15fnm84",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,$$css:!0}}},680505:(e,r,n)=>{n(848318),n(402840)},42776:(e,r,n)=>{n.d(r,{x:()=>i});let i="FILE_CREATION_OMNICREATE_DROPDOWN";var a=(e=>(e.DESIGN="RESOURCE_CREATION_DESIGN_OPTION",e.WHITEBOARD="RESOURCE_CREATION_WHITEBOARD_OPTION",e.SLIDES="RESOURCE_CREATION_SLIDES_OPTION",e.SITES="RESOURCE_CREATION_SITES_OPTION",e.IMPORT="RESOURCE_IMPORT_OPTION",e.COOPER="RESOURCE_CREATION_COOPER_OPTION",e.FIGMAKE="RESOURCE_CREATION_FIGMAKE_OPTION",e))(a||{})},237461:(e,r,n)=>{n.d(r,{AH:()=>_,GI:()=>E,pH:()=>f});var i=n(848318),a=n(716544),o=n(430285);n(351766);var s=n(493554),l=n(280198),c=n(442313),d=n(988346),u=n(449737);n(717752);var p=n(661780),m=n(541641),h=n(635547);let _="workspace";function g(e,r){let n=Array.from(e.keys()),i=Array.from(r.keys());return n.length===i.length&&n.every(n=>(0,a.bN)(e.get(n),r.get(n)))}function f(e,r={}){let n=function(e,r={}){let n=(0,p.TA)(),l=(0,a.d4)(e=>e.currentUserOrgId),c=i.useMemo(()=>e.map(e=>({fileKey:e,orgId:l})),[e,l]),d=(0,s.p)(h.PG0,c,r),u=(0,m.Au)(l),_=o.Qw.all([u,...d.map(e=>e.result)]);return o.Qw.useTransform(_,([r,...i])=>{let a=new Map;return i.forEach((i,o)=>{let{file:s}=i,c=e[o],d=s?.computedWorkspace?.workspace??null;if(!l||!s||!d){a.set(c,null);return}let u=d.pinnedFiles,p=u?.find(e=>e.file?.key===c),m=!!u&&u.length>=y,h=!!r&&r===d.id,_=d.canAdmin,g=p?.creator?.id===n,f=!p&&(h||_)&&(s.canPinToWorkspace||s.canEdit),E=f&&!m,b=p&&(g||_);if(f){a.set(c,{shouldShowPinFileToWorkspaceAction:f,canPinFileToWorkspace:E,canEditPin:!1,existingFilePinId:null,workspaceHasMaxPins:m});return}if(b){a.set(c,{shouldShowPinFileToWorkspaceAction:f,canPinFileToWorkspace:E,canEditPin:!0,existingFilePinId:p.id,workspaceHasMaxPins:m});return}a.set(c,{shouldShowPinFileToWorkspaceAction:!1,canPinFileToWorkspace:!1,canEditPin:!1,existingFilePinId:null,workspaceHasMaxPins:m})}),a},g)}(i.useMemo(()=>e?[e]:[],[e]),r);return o.Qw.useTransformShallowEqual(n,r=>r.get(e??""))}function E(e){let r=(0,a.wA)();return i.useCallback((n,i)=>{if(i){r(l.s.error((0,c.t)("file_browser.pinning.add_pin_error_max_pins",{maxNumWorkspacePins:y})));return}r(u.to({type:(0,d.a)(),data:{fileKey:n,source:e}}))},[r,e])}let y=8},37257:(e,r,n)=>{n(848318),n(629829),n(536384),n(775038),n(543072)},948895:(e,r,n)=>{n.d(r,{De:()=>u.D,G4:()=>M.G,v2:()=>E,U2:()=>D.U2,T1:()=>w,LK:()=>p.L,Hl:()=>N,hO:()=>i.h,d3:()=>y,eQ:()=>b,SW:()=>A,ni:()=>P,G1:()=>i.G,uZ:()=>T,yt:()=>C,m1:()=>I,cN:()=>D.cN});var i=n(518937),a=n(445777),o=n(39773),s=n(579020),l=n(507152),c=n(701780),d=n(4434),u=n(769515),p=n(469643),m=n(104720),h=n(454869),_=n(783235),g=n(240207),f=n(742876);let E="FRAGMENT_SEARCH_PEEK_MODAL";function y(e,r,n,i,o,s,l){return i?{entry_point:e,session_id:r,search_id:n,componentSuggestionSessionId:(0,g.r6)(),query_type:function(e){switch(e.type){case"input-text":return"text";case"input-selection":return"selection";case"input-image":return"image";default:(0,a.xb)(e)}}(i),query_text:"input-text"===i.type?i.value:void 0,query_node_id:"input-selection"===i.type?i.node.guid:void 0,query_is_image_selection:function(e){switch(e.type){case"input-text":case"input-image":return;case"input-selection":return(0,h.A)(e.node)||1===e.node.childCount&&(0,h.A)(e.node.childrenNodes[0]);default:(0,a.xb)(e)}}(i),query_file_key:i.file_key,...function(e){switch(e.type){case"input-text":case"input-image":return;case"input-selection":return{query_width:e.node.absoluteBoundingBox.w,query_height:e.node.absoluteBoundingBox.h};default:(0,a.xb)(e)}}(i),...v(s),is_in_preview:o,is_community_fragment_search:!!l}:{entry_point:e,session_id:r,search_id:n,is_in_preview:o,componentSuggestionSessionId:(0,g.r6)(),...v(s),is_community_fragment_search:!!l}}function b(e){switch(e){case"percent_match":return"relevance";case"last_modified":return"last_modified";case void 0:return;default:(0,a.xb)(e)}}function v(e){return e&&e.searchModelType===_.uH.FILES?{filterFolderIds:e.folderIds,filterTeamIds:e.teamIds,filterCreatorIds:e.creatorIds}:null}function T(e){return e?.type===E}function I(e,r=378){let n=Math.min(e.x,e.y);if(n>r){let i=r/n;return new c.Mi(e.x*i,e.y*i)}return e}var S=(e=>(e.FragmentSearch="fragment-search",e.GPT="gpt-vision",e))(S||{});function w(e,r="fragment-search"){let n;n="fragment-search"===r?I(new c.Mi(e.size.x,e.size.y)):I(function(e,r){let n=Math.max(e.x,e.y);if(n>2048){let r=2048/n;return new c.Mi(e.x*r,e.y*r)}return e}(new c.Mi(e.size.x,e.size.y),0),768);let i=(0,m._G)(n,e.guid,!1,void 0,!1,!0);return i&&i.pixels&&i.pixelSize&&i.displaySize&&(0,m.Pv)(i.pixels,i.pixelSize).split(";base64,").pop()||null}async function A(e,r,n){return r.x!==e.width||r.y!==e.height?{type:"image",value:function(e,r){let n=document.createElement("canvas"),i=n.getContext("2d");n.width=r.x,n.height=r.y,i?.drawImage(e,0,0,r.x,r.y);let a=n.toDataURL("image/png").split(",");if(a.length>=2)return a[1];throw Error("Invalid data URL format")}(e,r)}:{type:"image",value:await (0,f.t)(n)}}function C(e){return new Promise((r,n)=>{let i=document.createElement("img"),a=URL.createObjectURL(e);i.onload=()=>{r(i),URL.revokeObjectURL(a)},i.onerror=e=>{n(e),URL.revokeObjectURL(a)},i.src=a})}async function N(e,r,n,c,u,p,m){let h=(0,l.g)(),_=Date.now(),g=o.zl.get(d.dd),f=y(r,g,h,e,!1,n,p),E="input-selection"===e.type?function(e){let r=e.editInfo;return{query_is_top_level_node:e.isTopLevelFrame(),query_num_descendant_nodes:e.getVisibleDescendantIds().length,query_is_component:e.isComponentish,query_depth_from_top_level_frame:e.depthFromTopLevelFrame,query_created_at:r?.createdAt,query_last_edited_at:r?.lastEditedAt,query_last_edited_by:r?.userId,query_edit_info_valid:!!r,query_node_type:e.type}}(e.node):{};i.h.setFragmentSearchLoading(h,e,c,p,u),(0,s.sx)("Fragment search query",{...E,...f},{forwardToDatadog:!0});let b={session_id:g,search_id:h,node_id:"input-selection"===e.type?e.node.guid:""};try{let o=[];switch(e.type){case"input-image":o=await O(e,b,n,u,p);break;case"input-text":o=await R(e,b,n,u,p);break;case"input-selection":o=await L(e,b,n,u,p);break;default:(0,a.xb)(e)}let l=[];if(l=p?o.map(e=>({...e,type:"hub-file-fragment"})):o.map(e=>({...e,type:"fig-file-fragment"})),i.h.getSearchId(p)!==h)return;(0,s.sx)("Fragment search time to load",{...f,elapsed_time:Date.now()-_}),(0,s.sx)("Fragment search result",{...f,count:o.length}),i.h.setFragmentSearchResults(h,l,r,p),m&&m()}catch(e){if(i.h.getSearchId(p)!==h)return;i.h.setFragmentSearchError(h,e,p)}}async function L(e,r,n,i,a){let{node:o,file_key:s}=e,l=w(o);if(!l)throw Error("Failed to export thumbnail");return(await u.D.postFragmentSearch({type:"image",value:l},s,r,n,i,a)).data.meta.results}async function O(e,r,n,i,a){let o=await C(e.imageFile),s=I(new c.Mi(o.width,o.height)),l=await A(o,s,e.imageFile);return(await u.D.postFragmentSearch(l,e.file_key,r,n,i,a)).data.meta.results}async function R(e,r,n,i,a){return(await u.D.postFragmentSearch({type:"text",value:e.value},e.file_key,r,n,i,a)).data.meta.results}async function P(e,r){let n=(await u.D.getFragmentData({file_key:r,node_id:e.guid})).data.meta.results;p.L.setIndexedFragmentData(n)}var D=n(540781),M=n(661249)},785439:(e,r,n)=>{n.d(r,{l1:()=>ep.l}),n(381767);var i=n(848318),a=n(716544),o=n(445777),s=n(719670),l=n(831932),c=n(286913),d=n(354054),u=n(928001),p=n(783235),m=n(188591),h=n(827742),_=n(376025),g=n(157907),f=n(493554),E=n(771186),y=n(166365),b=n(442313),v=n(698400),T=n(163256),I=n(409851),S=n(635547),w=n(630479),A=n(984770),C=n(127366),N=n(421270),L=n(469729),O=n(992692),R=n(864311),P=n(150269),D=n(505145),M=n(44395),k=n(625002),F=n(727585),x=n(559361);let U={[p.uH.HUB_FILES]:M.A,[p.uH.PUBLIC_PLUGINS]:k.A,[p.uH.PRIVATE_PLUGINS]:null,[p.uH.PUBLIC_PROFILES]:D.A,[p.uH.FILES]:null,[p.uH.PROJECTS]:null,[p.uH.TEAMS]:null,[p.uH.USERS]:null,[p.uH.PUBLIC_WIDGETS]:F.A,[p.uH.PRIVATE_WIDGETS]:null},B={[p.uH.PUBLIC_PLUGINS]:N.Of,[p.uH.PRIVATE_PLUGINS]:C.Of,[p.uH.PUBLIC_PROFILES]:P.hP,[p.uH.PUBLIC_WIDGETS]:L.nD.listStyle,[p.uH.PRIVATE_WIDGETS]:L.uB.listStyle};class V extends i.Component{componentDidMount(){!this.props.isLoading&&this.props.search.queryId!==this.props.search.lastAckedQueryId&&this.props.search.parameters.query.length>0&&(this.props.setSearchLastAckedQueryId(this.props.search.queryId),this.props.setLastLoadedQuery(this.props.search.sessionId,this.props.search.parameters.query,this.props.search.queryId),w.vj.Session.trackClientResult(this.props.search,this.props.selectedView))}componentDidUpdate(){!this.props.isLoading&&this.props.search.queryId!==this.props.search.lastAckedQueryId&&this.props.search.parameters.query.length>0&&(this.props.setSearchLastAckedQueryId(this.props.search.queryId),this.props.setLastLoadedQuery(this.props.search.sessionId,this.props.search.parameters.query,this.props.search.queryId),w.vj.Session.trackClientResult(this.props.search,this.props.selectedView))}renderContent(){let e;if(this.props.viewMode_DEPRECATED===m.XU.LIST)e=B[this.props.searchModelType]??P.p_;else if(this.props.viewMode_DEPRECATED===m.XU.GRID)switch(this.props.searchModelType){case p.uH.FILES:case p.uH.TEAMS:case p.uH.PROJECTS:case p.uH.PUBLIC_PLUGINS:case p.uH.PRIVATE_PLUGINS:case p.uH.PUBLIC_WIDGETS:case p.uH.PRIVATE_WIDGETS:case p.uH.USERS:break;case p.uH.PUBLIC_PROFILES:case p.uH.HUB_FILES:case p.uH.PUBLIC_PROFILES:e=P.Vg;break;default:(0,o.xb)(this.props.searchModelType)}else(0,o.xb)(this.props.viewMode_DEPRECATED);e+=this.props.isLoggedIn?` ${P.Vz}`:"";let r=this.props.didSucceed&&0===this.props.searchResults.length;return i.createElement(E.x,{isLoading:this.props.isLoading,className:P.g4},()=>this.props.didFail?i.createElement(H,{illustration:x.A,resourceTypeDisplayString:this.props.failureMessage||(0,b.t)("search.search_model_type.search_error"),searchModelType:this.props.searchModelType,query:null,activePlan:this.props.activePlan,activeWorkspaceFilter:this.props.activeWorkspaceFilter,onResetWorkspaceFilter:this.props.onResetWorkspaceFilter}):r?i.createElement(H,{illustration:U[this.props.searchModelType],resourceTypeDisplayString:(0,p.hf)(this.props.searchModelType),searchModelType:this.props.searchModelType,query:this.props.query,activePlan:this.props.activePlan,activeWorkspaceFilter:this.props.activeWorkspaceFilter,onResetWorkspaceFilter:this.props.onResetWorkspaceFilter}):i.createElement("div",{className:P.sb},i.createElement("div",{className:e},i.createElement(O.L,{searchModelType:this.props.searchModelType,searchResults:this.props.searchResults,viewMode_DEPRECATED:this.props.viewMode_DEPRECATED,planFilter:this.props.planFilter}))))}renderProjectContextMenu(){let e=(0,v.H)(this.props.dropdownShown);return(0,I.D6)(this.props.currentOrgId)&&e&&i.createElement(T.p,{folder:e,useLGPerms:!0})}render(){let e=this.props.searchModelType===p.uH.FILES?void 0:this.props.viewMode_DEPRECATED===m.XU.LIST?P.UL:P.G2;return i.createElement(A.Q0,{isDropdown:!1,...this.props},i.createElement("div",{className:e},this.renderContent()),this.props.searchModelType===p.uH.PROJECTS&&this.renderProjectContextMenu())}}V.displayName="SearchResultView";let G=(0,a.Ng)((e,r)=>{let n=(0,R.z[r.searchModelType])(e.search.parameters,e.viewBarViewModeOptionByView);return{viewMode_DEPRECATED:(0,g.k)().file_browser_ia_overhaul_remove_list_view?m.XU.GRID:n.viewMode,isLoggedIn:!!e.user,search:e.search,activeWorkspaceFilter:e.search.parameters.workspaceFilter,activePlan:e.search.parameters.planFilter,dropdownShown:e.dropdownShown,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView}},(e,r)=>({onResetWorkspaceFilter:()=>{e(d.HI({}))},setSearchLastAckedQueryId:r=>{e(d.ej({lastAckedQueryId:r}))},setLastLoadedQuery:(r,n,i)=>{e(d.w2({sessionId:r,query:n,queryId:i}))}}))(V);function H(e){let{query:r,resourceTypeDisplayString:n}=e,o=(0,a.d4)(e=>e.currentUserOrgId),s="NON_ORG_TEAMS"!==e.activePlan&&e.activePlan||o,l=(0,f.Rs)(S.N63,{orgId:s??null}),c=i.useMemo(()=>"loaded"===l.status?l.data?.org?.workspaces:[],[l]),d=c?.find(r=>null!=e.activeWorkspaceFilter&&r.id===e.activeWorkspaceFilter),u=e.onResetWorkspaceFilter,p=i.useMemo(()=>i.createElement(i.Fragment,null,n,null!==r?i.createElement(i.Fragment,null,"\xa0",i.createElement("span",{className:P.xV},r)):null,null!=d&&i.createElement(i.Fragment,null," in the ",i.createElement("span",{className:P.xV},d.name)," workspace",i.createElement("br",null),i.createElement(_.E,{className:P.YF,onClick:()=>{u&&u()},"aria-label":(0,b.t)("search.empty_state.try_searching_whole_org")},(0,b.tx)("search.empty_state.try_searching_whole_org")))),[r,u,d,n]);return i.createElement("div",{className:P.p$},e.illustration&&i.createElement(y.B,{className:P.IC,svg:e.illustration,useOriginalSrcFills_DEPRECATED:!0}),i.createElement("div",{className:P.jI},i.createElement("span",{className:P.q6},p)),e.cta?i.createElement("div",{className:P.Ki},e.cta):null)}H.displayName="SearchResultEmptyState";class K extends i.Component{constructor(e){super(e),this.onScroll=e=>{this.updateIsTop(e.target)},this.updateIsTop=e=>{this.props.setScrollTop(window.pageYOffset)},this.shouldScroll=()=>0!==this.props.searchScrollTop,this.getLoadingKey=()=>d.$P.loadingKeyForPayload({parameters:this.props.parameters}),this.isLoading=()=>u.VP(this.props.loadingState,this.getLoadingKey()),this.didSucceed=()=>u.GH(this.props.loadingState,this.getLoadingKey()),this.didFail=()=>u.aF(this.props.loadingState,this.getLoadingKey()),this.getFailedReason=()=>u.Fl(this.props.loadingStateFailureReasons,this.getLoadingKey());let r=this.getFilteredResults(e.searchResults??[],e.sortFilterConfig);this.state={showContainer:!this.shouldScroll(),filteredFileResults:r}}componentDidMount(){window.addEventListener("scroll",this.onScroll,!0),this.shouldScroll()?setTimeout(()=>{window.scrollTo(0,this.props.searchScrollTop),this.setState({showContainer:!0})},0):this.updateIsTop({})}componentWillUnmount(){window.removeEventListener("scroll",this.onScroll,!0)}componentDidUpdate(e){if(this.props.searchModelType===p.uH.FILES){let r=e.searchResults??W,n=this.props.searchResults??W,i=r.length!==n.length;if(!i)for(let e=0;e<r.length;e++)(0,s.c2)(r[e],n[e])||(i=!0);if(i){let e=this.getFilteredResults(n,this.props.sortFilterConfig);this.setState({...this.state,filteredFileResults:e})}}}getFilteredResults(e,r){return this.props.searchModelType===p.uH.FILES?e.filter(e=>{let n=e.model;switch(r.filters.fileType){case m.t2.ANY:return!0;case m.t2.DESIGN:return"design"===n.editor_type;case m.t2.FIGJAM:return"whiteboard"===n.editor_type;case m.t2.SITES:return"sites"===n.editor_type;case m.t2.SLIDES:return"slides"===n.editor_type;case m.t2.PROTOTYPE:return!1;default:(0,o.xb)(r.filters.fileType)}}):e}render(){let e=this.props.searchResults??W,r=this.getFilteredResults(e,this.props.sortFilterConfig);return i.createElement(c.r,{key:"unified-search",toolbar:l.Ay.mobile?i.createElement(h.o,null):void 0,viewbar:i.createElement(R.Z,{sortControlsDisabled:0===e.length}),viewBarSticky:!0,content:i.createElement(G,{didFail:this.didFail(),didSucceed:this.didSucceed(),failureMessage:this.getFailedReason(),isLoading:this.isLoading(),onChangeSortState:this.props.onChangeSortState,planFilter:this.props.parameters.planFilter,query:this.props.completedQuery,searchModelType:this.props.searchModelType,searchResults:r,searchScope:this.props.parameters.searchScope,sortState:this.props.parameters.sortState})})}}K.displayName="SearchPageView";let W=[];(0,a.Ng)((e,r)=>{let n=e.search.parameters,i=e.search.responses[r.searchModelType];return{parameters:n,completedQuery:e.search.completedQueries[r.searchModelType],searchResults:i?.results||null,loadingState:e.loadingState,loadingStateFailureReasons:e.loadingStateFailureReasons,searchScrollTop:e.search.searchScrollTop,sortFilterConfig:e.tileSortFilterStateByView.search}},e=>({onChangeSortState:r=>{e(d.qv({sortState:r}))},setScrollTop:r=>{e(d.PP({top:r}))}}))(K),n(536384),n(730169),n(753131),n(26039);var z=n(792647);n(282424),n(197945),n(428721),n(698973),n(884060),n(925025),n(650309),n(273121),n(640839).uQ;var $=n(39773),Y=n(818754);n(948895),n(449737),n(834996);var j=n(412213);n(672870);var q=n(314068),X=n(575492),Z=n(71358),J=n(464012),Q=n(117592),ee=n(558317),et=n(127001),er=n(860244),en=n(759071),ei=n(594277),ea=n(708717),eo=n(773985),es=n(513790),el=n(27776),ec=n(981129);let ed=(0,Y.jz)(el.RAo),eu=(0,Y.jz)(el.aIx);(0,J.Ju)(function(){let e=(0,a.wA)(),r=(0,a.d4)(e=>e.modalShown),n=(0,a.d4)(e=>e.search.sessionId),o=(0,$.md)(eo.Q),[s,l]=(0,$.fp)(j.z5),c=(0,$.md)(j.L8),d=(0,ea.A)();i.useEffect(()=>()=>{n&&w.vj.Session.searchModalExit(n)},[n]);let u=i.useCallback(()=>{e(Z.ky()),s&&(l(null),d(p.uR.DROPDOWN,s))},[e,l,s,d]);if(!r)return null;let m=r.data.width?{width:`${r.data.width-2*ed}px`}:void 0;return i.createElement(Q.aF,{absolutePosition:{top:r.data.top,left:r.data.left},padding:`0 0 ${ed}px 0`,size:r.data.width??eu,tintedModalBackground:!1,useModalViewScroll:!1,maxHeight:"90vh",onHide:u,popStack:!0,"data-testid":"facetedSearchModal"},i.createElement(z.dP,null,i.createElement(en.a3.Provider,{value:en.Vm.PREVIEW},i.createElement("div",{className:ec.PP,style:m},i.createElement(q.Y,{hideSearchPreview:r.data?.hideSearchPreview})),i.createElement(X.P,{className:ec.xx},s&&i.createElement("div",{className:ec.v$},i.createElement(ee.s,{facetType:s,id:"facet-panel",path:[3]})),i.createElement(ei.L,{id:"suggestions",path:[4]}),r.data.hideSearchPreview?null:o||c.length>0?i.createElement(er.j,{id:"search-results",path:[5]}):i.createElement(et.n,{id:"recents",path:[5]})))))},es.r),n(992277),n(430285),n(502255),n(625069),n(713547),n(254310),n(376780),n(694253),n(572699),(0,Y.jz)(el.RAo),n(182059),n(17755),n(790355),n(291333),n(661780),n(205397),n(995095),n(453953),n(703060);var ep=n(734466)},734466:(e,r,n)=>{n.d(r,{l:()=>I});var i=n(848318),a=n(716544),o=n(39773),s=n(166365),l=n(17755),c=n(442313),d=n(412213),u=n(83895),p=n(558317),m=n(808046),h=n(708717),_=n(541968),g=n(790355),f=n(291333),E=n(950738),y=n(783235),b=n(96),v=n(154709);let T=e=>{switch(e){case y.WY.RESOURCE:return(0,c.tx)("search.preview_section.all_files");case y.WY.CREATOR:return(0,c.tx)("search.facets.created_by",{creator:(0,c.t)("search.facets.anyone")});case y.WY.SPACE:return(0,c.tx)("search.facets.space",{space:(0,c.t)("search.facets.all_spaces")});default:return""}};function I({dropdownId:e,facetType:r,containerRef:n,hasQuickActionsStyling:c,contentTargetRef:I}){let S=(0,a.wA)(),w=i.useRef(null),A=I||w,C=(0,E.Um)(),N=C?.type===e,L=(0,o.md)((0,d.l4)(r??null)),O=(0,m.f)(),R=(0,h.A)(),P=y.uR.DROPDOWN,D=c?l.s.relative.lhNormal.flex.h24.bRadius4.px8.py4.b1.colorBorder.fontMedium.$:b.P2,M=c?l.s.ml8.flex.itemsCenter.$:b.dN,k=n&&n.current?n.current.getBoundingClientRect().right:void 0;return i.createElement("div",{className:D,onMouseDown:n=>{n.stopPropagation(),S(f.an()),N?(S(g.oB()),R(P,r)):A.current&&(n.preventDefault(),S(g.j7({type:e,data:{facetType:r,targetRect:A.current.getBoundingClientRect()}})),O(P,r))},onClick:e=>e.stopPropagation(),role:"button",tabIndex:-1},i.createElement("span",{ref:A,className:l.s.noWrap.$},!L||(0,u.II)(L)?T(r):(0,u.yA)(L)),i.createElement("div",{className:M},i.createElement(s.B,{svg:v.A,className:`${b.OW} ${N?b.iw:""}`})),N&&i.createElement(_.G,{dropdownId:e,dropdownChild:i.createElement(p.s,{facetType:r,id:"",path:[]}),containerRefRight:k,limitHeight:c}))}},381767:(e,r,n)=>{n.d(r,{lV:()=>R,ye:()=>x,wA:()=>D,D$:()=>P});var i=n(848318),a=n(716544),o=n(445777),s=n(376025),l=n(493080),c=n(157907),d=n(579020),u=n(166365),p=n(17755),m=n(442313);n(576220);var h=n(734466),_=n(540248),g=n(541968),f=n(790355),E=n(354054),y=n(291333);n(481540),n(574667),n(661780),n(376780),n(748288);var b=n(783235),v=n(188591),T=n(161922),I=n(300132),S=n(108098),w=n(937053);n(723621);var A=n(219205),C=n(341921);let N="tile_sort_filter--option--E6-xu dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L";var L=n(154709);class O extends i.PureComponent{render(){let e="deletedFiles"===this.props.selectedView.view,r=this.props.options.tileSortFilterConfig.viewMode===v.XU.LIST;return i.createElement("div",{className:"tile_sort_filter--dropdownCollectionContainer--Dnyyh"},e&&i.createElement(k,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu}),i.createElement(x,{config:this.props.options.tileSortFilterConfig}),!r&&!this.props.hideSortMenu&&i.createElement(U,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu}),r&&i.createElement(S.z,{query:"(max-width: 1120px)"},i.createElement(U,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu})))}}function R(e){let r=(0,a.d4)(e=>e.teams),n=(0,a.d4)(e=>e.orgById);if(!e.planOption?.plan_id)return null;let o="org"===e.planOption.plan_type&&e.planOption.plan_id?n[e.planOption.plan_id]?.img_url:r[e.planOption.plan_id]?.img_url;return i.createElement("div",{className:p.s.flex.itemsCenter.$},i.createElement(w.H,{entityId:e.planOption.plan_id,entityName:e.planOption.label,imgUrl:o}))}O.displayName="TileSortFilter";let P={values:[v.ue.ASC,v.ue.DESC],valuesToDisplayText:(e,r)=>{switch(e){case v.ue.ASC:switch(r){case v.rR.TIME:return(0,m.t)("tile.sort_filter.sort_direction_oldest_first");case v.rR.ALPHABETICAL:return(0,m.t)("tile.sort_filter.sort_direction_a_to_z");default:return(0,m.t)("tile.sort_filter.sort_direction_ascending")}case v.ue.DESC:switch(r){case v.rR.TIME:return(0,m.t)("tile.sort_filter.sort_direction_newest_first");case v.rR.ALPHABETICAL:return(0,m.t)("tile.sort_filter.sort_direction_z_to_a");default:return(0,m.t)("tile.sort_filter.sort_direction_descending")}default:(0,o.xb)(e)}}};function D(e){let r=(0,a.wA)(),n=(0,i.useRef)(null),o=(0,a.d4)(e=>e.dropdownShown),h=o?.type===e.dropdownId,E=(0,a.d4)(e=>e.selectedView),b=(0,c.k)().file_browser_ia_overhaul_m1_dropdowns,S=e=>{e.stopPropagation()},w=i=>{r(y.an()),h?r(f.oB()):n.current&&r(f.j7({type:e.dropdownId,data:{targetRect:n.current.getBoundingClientRect()}})),S(i)},A=()=>{h&&r(f.oB())},O=r=>e.includeSortDirection,R=e.disabled?"tile_sort_filter--dropdownContainerDisabled--lYOaX tile_sort_filter--dropdownContainer--443h- text--fontPos11--2LvXf text--_fontBase--QdLsd":"tile_sort_filter--dropdownContainer--443h- text--fontPos11--2LvXf text--_fontBase--QdLsd",D=(r,n)=>{(0,d.sx)("Sort Changed - Dropdown",{oldValueString:`${e.checkedValue}`,newValueString:`${r}`,model:`${e.searchModelType}`,dir:n===v.ue.ASC?"asc":n===v.ue.DESC?"desc":void 0}),e.onChange(r,n)},M=i.createElement(g.G,{dropdownId:e.dropdownId,dropdownChild:i.createElement(_.j,{checkedValue:e.checkedValue,currentDirection:e.includeSortDirection?e.currentDirection:null,tileSortValues:e.includeSortDirection?e.tileSortValues:[],dirValuesToDisplayText:P.valuesToDisplayText,values:e.values,valuesToDisplayText:e.valuesToDisplayText,onChange:e.onChange})}),k=[];e.values.length>1&&(e.hideSortOptionLabel||k.push({isChecked:!1,disabled:!0,displayText:(0,m.t)("tile.sort_filter.sort_by_label")}),e.values.forEach(r=>{let n=r===e.checkedValue;k.push({callback:()=>{D(r)},className:N,isChecked:n,render:()=>i.createElement(I.S,{checked:n,text:e.valuesToDisplayText[r]}),highlightWhenActive:!0,displayText:""})}),e.includeSortDirection&&k.push({displayText:"",separator:!0})),e.includeSortDirection&&(k.push({isChecked:!1,disabled:!0,displayText:(0,m.t)("tile.sort_filter.order_label")}),e.tileSortValues.forEach(r=>{if(O(e.checkedValue)){let n=e.currentDirection===r;k.push({callback:()=>{D(e.checkedValue,r)},className:N,isChecked:n,render:()=>i.createElement(I.S,{checked:n,text:P.valuesToDisplayText(r,(0,C.E)(e.checkedValue))}),highlightWhenActive:!0,displayText:""})}}));let F=h?i.createElement(l.J,{enabled:b},i.createElement(T.j,{parentRect:o.data.targetRect,minWidth:162,showPoint:e.isMobile??!0,lean:"right",leanPadding:0,items:k,onSelectItem:function(e){A(),e.callback&&e.callback("",null,r)},dispatch:r})):null;return e.isMobile?F:i.createElement("div",{className:`${R} ${e.className||""} ${p.s.m0.$}`},i.createElement(s.E,{onClick:e=>{S(e),w(e)},"aria-expanded":h},i.createElement("span",{ref:n},e.textWhenClosedPrefix,e.hideValueWhenClosed||e.valuesToDisplayText[e.checkedValue]),i.createElement("div",{className:"tile_sort_filter--caretContainer--kkZQq"},i.createElement(u.B,{svg:L.A,className:`tile_sort_filter--caret--AJHA9 ${h?"tile_sort_filter--caretDown--hIOid":""}`}))),h?"search"===E.view?M:F:null)}let M={dropdownId:"tile-filter-creator-dropdown",values:[v.rJ.ANY,v.rJ.SELF,v.rJ.OTHER],textWhenClosedPrefix:"",valuesToDisplayText:{[v.rJ.ANY]:(0,m.tx)("tile.sort_filter.created_by_anyone"),[v.rJ.SELF]:(0,m.tx)("tile.sort_filter.created_by_you"),[v.rJ.OTHER]:(0,m.tx)("tile.sort_filter.created_by_others")}};class k extends i.PureComponent{constructor(){super(...arguments),this.onChange=e=>{let r=this.props.options.tileSortFilterConfig,n={...r,filters:{...r.filters,creator:e}};this.props.dispatch(f.JF({selectedView:this.props.selectedView,config:n}))}}render(){return i.createElement(D,{dropdownId:M.dropdownId,values:M.values,textWhenClosedPrefix:M.textWhenClosedPrefix,valuesToDisplayText:M.valuesToDisplayText,includeSortDirection:!1,checkedValue:this.props.options.tileSortFilterConfig.filters.creator,onChange:this.onChange,hideSortOptionLabel:!0})}}k.displayName="TileFilterCreatorDropdown",v.Jh.CAN_BE_RESTORED_DELETED,v.Jh.CAN_BE_VIEWED,v.Jh.CAN_BE_RESTORED_DELETED,(0,m.tx)("tile.sort_filter.can_be_restored_permanently_deleted"),v.Jh.CAN_BE_VIEWED,(0,m.tx)("tile.sort_filter.can_be_viewed");let F={dropdownId:"tile-filter-file-type-dropdown",values:[v.t2.ANY,v.t2.DESIGN,v.t2.FIGJAM],valuesToDisplayText:{[v.t2.ANY]:(0,m.tx)("tile.sort_filter.filter_by_all_files"),[v.t2.DESIGN]:(0,m.tx)("tile.sort_filter.filter_by_design_files"),[v.t2.FIGJAM]:(0,m.tx)("tile.sort_filter.filter_by_figjam_files"),[v.t2.PROTOTYPE]:(0,m.tx)("tile.sort_filter.filter_by_prototype_files"),[v.t2.SITES]:(0,m.tx)("tile.sort_filter.filter_by_sites_files"),[v.t2.SLIDES]:(0,m.tx)("tile.sort_filter.filter_by_slides_files")}};function x(e){let r=(0,a.wA)(),n=(0,a.d4)(e=>e.selectedView),o="search"===n.view,s=(0,A.oz)(),d=(0,c.k)().file_browser_ia_overhaul_m1_dropdowns,u="sharedWithYou"===n.view||"recentsAndSharing"===n.view,p=F.values;return(p=(0,c.k)().piper?p.concat([v.t2.SLIDES]):p,p=u?p.concat([v.t2.PROTOTYPE]):p,p=s?p.concat([v.t2.SITES]):p,"search"===n.view)?i.createElement(h.l,{dropdownId:"full-search-results-resource-facet-dropdown",facetType:b.WY.RESOURCE}):i.createElement(l.J,{enabled:d},i.createElement(D,{dropdownId:F.dropdownId,values:p,valuesToDisplayText:F.valuesToDisplayText,includeSortDirection:!1,checkedValue:e.config.filters.fileType,onChange:i=>{let a={...e.config,filters:{...e.config.filters,fileType:i}};o&&r(E.Rz({fileTypeFilter:i})),r(f.JF({selectedView:n,config:a,tab:e.tab}))},hideSortOptionLabel:!0,disabled:e.filterControlsDisabled,isMobile:e.isMobile}))}class U extends i.PureComponent{constructor(){super(...arguments),this.getDefaultSortOrder=e=>({[v.C0.NAME]:v.ue.ASC,[v.C0.CREATED_AT]:v.ue.DESC,[v.C0.TOUCHED_AT]:v.ue.DESC,[v.C0.TRASHED_AT]:v.ue.DESC,[v.C0.SEARCH_RELEVANCE]:v.ue.DESC,[v.C0.PROJECT_NAME]:v.ue.ASC,[v.C0.ACCESSED_AT]:v.ue.DESC,[v.C0.SHARED_AT]:v.ue.DESC,[v.C0.OWNER]:v.ue.DESC})[e]||v.ue.ASC,this.onChange=(e,r)=>{let n=this.props.options.tileSortFilterConfig,i=void 0===r?this.getDefaultSortOrder(e):r,a={...n,sort:{key:e,dir:i}};this.props.dispatch(f.JF({selectedView:this.props.selectedView,config:a,tab:this.props.tab}))}}componentDidMount(){this.props.options.sortKeys.some(e=>e===this.props.options.tileSortFilterConfig.sort.key)||this.onChange(this.props.options.sortKeys[this.props.options.sortKeys.length-1],this.props.options.tileSortFilterConfig.sort.dir)}render(){return i.createElement(l.J,null,i.createElement(D,{...function(e={}){return{dropdownId:"tile-sort-dropdown",textWhenClosedPrefix:"",valuesToDisplayText:{[v.C0.CREATED_AT]:(0,m.tx)("tile.sort_filter.sort_date_created"),[v.C0.TOUCHED_AT]:(0,m.tx)("tile.sort_filter.sort_last_modified"),[v.C0.ACCESSED_AT]:(0,m.tx)("tile.sort_filter.sort_last_viewed"),[v.C0.NAME]:(0,m.tx)("tile.sort_filter.sort_alphabetical"),[v.C0.TRASHED_AT]:(0,m.tx)("tile.sort_filter.sort_date_trashed"),[v.C0.SEARCH_RELEVANCE]:(0,m.tx)("tile.sort_filter.sort_relevance"),[v.C0.SHARED_AT]:(0,m.tx)("tile.sort_filter.date_shared"),...e}}}(),values:this.props.options.sortKeys,includeSortDirection:!0,tileSortValues:P.values,currentDirection:this.props.options.tileSortFilterConfig.sort.dir,checkedValue:this.props.options.tileSortFilterConfig.sort.key,onChange:this.onChange,isMobile:this.props.isMobile}))}}U.displayName="TileSortDropdown"},995095:(e,r,n)=>{var i=n(848318);n(381767),n(188591),n(453953);var a=n(231849);class o extends i.PureComponent{render(){return i.createElement("div",{className:`${a.kL} ${this.props.className||""}`},i.createElement("div",{className:a.zu},this.props.leftSide),!!this.props.center&&i.createElement("div",{className:a.gX},this.props.center),i.createElement("div",{className:a.ok},this.props.rightSide))}}o.displayName="BasicViewBar"},163256:(e,r,n)=>{n.d(r,{p:()=>z});var i=n(848318),a=n(716544),o=n(493080),s=n(157907),l=n(579020),c=n(818754),d=n(700267),u=n(493554),p=n(195507),m=n(653959),h=n(17755),_=n(280198),g=n(442313),f=n(444207),E=n(72641),y=n(926327),b=n(477229),v=n(943058),T=n(887537),I=n(237846),S=n(110448),w=n(187513),A=n(85442),C=n(54018),N=n(449737),L=n(155651),O=n(481540),R=n(976308),P=n(57589),D=n(376780),M=n(635547),k=n(694253),F=n(922030),x=n(988540),U=n(404658),B=n(183905),V=n(785534),G=n(161922),H=n(515071),K=n(349788),W=n(27776);function z({className:e,folder:r,useLGPerms:n,onRenameClick:z}){let $=(0,a.d4)(e=>e.dropdownShown),Y=(0,a.wA)(),j=(0,u.Rs)(M.vhY,{folderId:r.id}),q=(0,s.k)().file_browser_ia_overhaul_m1_dropdowns,X=(0,p.oA)(p.oA(j.data)?.project?.pendingAssetTransferRequest),Z=X&&{id:X.id,source_user_email:X.sourceUser?.email,destination_user_email:X.destinationUser?.email,is_transfer_copy:X.isTransferCopy}||void 0,J=(0,L.j6)(),Q=function(e){let r=(0,a.d4)(e=>(0,k.getPermissionsState)(e)),n=(0,a.d4)(e=>e.currentUserOrgId),i=(0,a.d4)(e=>e.orgById[e.currentUserOrgId]),o=(0,a.d4)(e=>e.currentTeamId),u=(0,a.d4)(e=>e.loadedFolders),p=(0,V.S)(),L=(0,m.n_)(P.Ct),O=(0,m.n_)(P.k4),M=n||o,G=n?D.OL.ORG:D.OL.TEAM,z=(0,a.d4)(e=>e.teams),$=(0,d.YO)(e),Y=(0,a.wA)();return({folder:e,onRenameClick:a,shouldShowJoinButton:o,pendingTransfer:d})=>{let m=e.teamId,k=e&&m?z[m]:void 0,V=k?k.org_id:e.orgId;if("loaded"!==$.status)return[];let j=!!$.data?.canEdit,q=!!$.data?.canTrash,X=!!$.data?.canShare,Z=!!$.data?.canMove,J=!!$.data?.canRestore,Q=!!$.data?.canPermanentlyDelete,ee=(0,s.k)().fc_general&&!!$.data?.canConnect,et=e.teamId?r.teams[e.teamId]:void 0,er=!!$.data?.canSeeTransferOption,en=!!$.data?.canEditDescription,ei=!!$.data?.canTransferExternally,ea=()=>{Y((0,P.jl)({folderId:e.id,loadedFolders:u})),Y(N.to({type:K.W,data:{folderId:e.id}}))},eo=()=>{Y(C.ZJ({folderId:e.id,teamId:e.teamId,isSubscribed:!e.isSubscribed}))},es=()=>{let r=(0,U.EE)(e.id,n);Y(A.S({url:r}))},el=()=>{Y(N.to({type:(0,T.C)(),data:{folder:e}}))},ec=()=>{Y((0,P.jl)({folderId:e.id,loadedFolders:u})),Y(N.to({type:I.J,data:{folderId:e.id}}))},ed=({canAccessPaidFeatures:e,shouldTransferCopy:r,team:n})=>{let i=(0,s.k)().enable_starter_project_transfers;if(!n||!ei){ep();return}if(e||i){eu(r);return}Y(N.to({type:H.DV,data:{team:n,resource:x.Bi.PROJECT_TRANSFER,currentPlan:R.F.Plan.STARTER,upsellPlan:R.F.Plan.PRO,editorType:null}}))},eu=r=>{e.teamId&&Y(N.to({type:(0,E.Lg)(),data:{folderId:e.id,teamId:e.teamId,entryPoint:E.Lq.PROJECT_SETTINGS,shouldTransferCopy:r}}))},ep=()=>{e.teamId&&Y(N.to({type:(0,y.Y)(),data:{planId:M,planType:G,planName:(i?i.name:z[e.teamId]?.name)||"",entryPoint:E.Lq.PROJECT_SETTINGS,resourceType:"folder",resourceIdOrKey:e.id}}))},em=()=>{d&&Y(N.to({type:(0,S.d)(),data:{pending:d,canTransferProject:ei}}))},eh=(r,n)=>({displayText:r,disabled:(0,s.k)().asset_transfer_admin_list?!er:!ei,callback:()=>ed({canAccessPaidFeatures:!!(et&&(0,F.PS)(et)),shouldTransferCopy:n,team:et}),trackingEventName:n?"Folder Transfer Copy Click":"Folder Transfer Click",trackingProperties:{folderId:e.id,canUserAccessProFeature:!!(et&&(0,F.PS)(et)),entryPoint:"Folder Context Menu"}}),e_=window.innerWidth<=(0,c.hG)(W.tgj),eg=!X||!e_,ef=(0,s.k)().folder_settings_modal,eE=[];return e.trashedAt?(J&&eE.push({displayText:(0,g.t)("project_menu.restore"),callback:()=>{(0,l.sx)("Folder Restore Click",{folderId:e.id,teamId:m,orgId:V}),k&&!(0,F.rR)(k,{type:F.sK.ADD_PROJECT})?Y(N.to({type:H.DV,data:{team:k,resource:x.vL.FOLDER,action:B.ZN.CREATE_FOLDER,currentPlan:R.F.Plan.STARTER,upsellPlan:R.F.Plan.PRO,editorType:null}})):O({folderId:e.id,team:k}).catch(()=>{Y(_.s.error((0,g.t)("file_browser.api_folder.error_when_restoring")))})},disabled:!J}),Q&&eE.push({displayText:(0,g.t)("project_menu.permanently_delete"),callback:()=>{(0,l.sx)("Folder Permanently Delete Click",{folderId:e.id,teamId:e.teamId,orgId:V}),Y(N.to({type:(0,v.U)(),data:{folder:e,folderOrgId:V}}))},disabled:!Q})):ef?(eE.push({displayText:(0,g.t)("file_browser.copy_link"),callback:es}),o||(eg||eE.push({displayText:(0,g.t)("sidebar.share"),callback:ea}),(V===M||m===M)&&eE.push({displayText:(0,g.t)("sidebar.move_project"),callback:ec,disabled:!Z}),p||eE.push({displayText:e.isSubscribed?(0,g.t)("sidebar.remove_from_favorites"):(0,g.t)("sidebar.add_to_favorites"),callback:eo}),eE.push({displayText:"",separator:!0}),eE.push({displayText:(0,g.t)("project_menu.settings"),callback:()=>{Y(N.to({type:w.l,data:{folderId:e.id}}))},trackingEventName:"Folder Settings Click",trackingProperties:{folderId:e.id,entryPoint:"Folder Context Menu"}}))):(e.description&&(eE.push({displayText:(0,g.t)("project_menu.description"),disabled:!0},{displayText:e.description,displayTextClassName:h.s.colorTextMenuSecondary.preWrap.$,disabled:!0},{displayText:"",separator:!0}),en&&eE.push({displayText:(0,g.t)("project_menu.edit_description"),callback:el},{displayText:"",separator:!0})),!e.description&&en&&eE.push({displayText:(0,g.t)("project_menu.add_description"),callback:el}),eE.push({displayText:(0,g.t)("file_browser.copy_link"),callback:es}),o||(eg||eE.push({displayText:(0,g.t)("sidebar.share"),callback:ea}),(V===M||m===M)&&eE.push({displayText:(0,g.t)("sidebar.move_project"),callback:ec,disabled:!Z}),a&&eE.push({displayText:(0,g.t)("sidebar.rename"),callback:()=>{a&&a(e)},disabled:!j}),p||eE.push({displayText:e.isSubscribed?(0,g.t)("sidebar.remove_from_favorites"):(0,g.t)("sidebar.add_to_favorites"),callback:eo}),eE.push({displayText:"",separator:!0}),ee&&eE.push({displayText:(0,g.t)("project_menu.connect"),callback:()=>{Y(N.to({type:f.C,data:{folder:{...e,plan:{key:{type:V?D.OL.ORG:D.OL.TEAM,parentId:V||m},name:(V?i?.name:k?.name)||""}},entryPoint:f.wR.PROJECT_SETTINGS}}))},disabled:!1}),er&&!d&&(eE.push(eh((0,g.t)("project_menu.transfer"),!1)),eE.push(eh((0,g.t)("project_menu.send_a_copy"),!0))),d&&er&&eE.push({displayText:"",separator:!0},{displayText:(0,g.t)("project_menu.pending_transfer_request"),disabled:!0},{displayText:(0,g.t)("project_menu.view_transfer_details"),callback:()=>em()},{displayText:"",separator:!0}),eE.push({displayText:(0,g.t)("project_menu.move_to_trash"),callback:()=>{(0,l.sx)("Folder Trash Click",{folderId:e.id,teamId:e.teamId,orgId:V,entryPoint:"Folder Context Menu"}),e.folderPerms?.canSkipDeletionConfirmation?L({folderId:e.id}).catch(()=>{Y(_.s.error((0,g.t)("file_browser.api_folder.error_when_moving_to_trash")))}):Y(N.to({type:(0,b.V)(),data:{folder:e}}))},disabled:!q}))),eE}}(r.id),ee=$?.data?.targetRect;if(!ee)return null;let et=Q({folder:r,useLGPerms:n,onRenameClick:z,pendingTransfer:Z});return i.createElement(L.fu,{name:"Folder Context Menu"},i.createElement(o.J,{enabled:q},i.createElement(G.j,{className:e,items:et,parentRect:ee,showPoint:!1,lean:"right",dispatch:Y,onSelectItem:(e,r)=>{e.callback&&e.callback("",{},Y,r),e.trackingProperties&&(0,O.Cu)({...J.properties,trackingContext:e.trackingEventName||J.name,...e.trackingProperties})},shouldUsePortal:!0,autofocusPrevOnDismount:!0})))}},533384:(e,r,n)=>{n.d(r,{W:()=>D});var i=n(848318),a=n(716544),o=n(493080),s=n(157907),l=n(818754),c=n(280198),d=n(442313),u=n(335547),p=n(539578),m=n(85442),h=n(790355),_=n(449737),g=n(292217),f=n(162072),E=n(57589),y=n(376780),b=n(622812),v=n(24096),T=n(694253),I=n(404658),S=n(995946),w=n(183905),A=n(142899),C=n(161922),N=n(764745),L=n(800146),O=n(213226),R=n(27776),P=n(777246);function D({className:e,team:r,onRenameClick:n,onChangeTeamIconClick:D,teamRoleRequests:M,canDeleteTeam:k}){let F=(0,a.d4)(e=>e.dropdownShown),x=(0,a.wA)(),U=(0,s.k)().file_browser_ia_overhaul_m1_dropdowns,B=(function(){let e=(0,a.d4)(e=>(0,T.getPermissionsState)(e)),r=(0,a.d4)(e=>e.selectedView),n=(0,a.d4)(e=>e.teamRoleRequests),o=(0,a.wA)();return({team:a,onRenameClick:s,onChangeTeamIconClick:C,teamRoleRequests:D,canDeleteTeam:M})=>{let k=()=>{o(h.oB()),o(_.to({type:O.p,data:{teamId:a.id}}))},F=(0,f.GR)(o,a.id),x=e=>{o(_.to({type:N.$,data:{team:e}}))},U=(0,f.GR)(o,a.id,S.e6.ADMIN),B=(0,f.GR)(o,a.id,S.e6.OWNER),V=e=>{if(!D)return;let r=D[e.id].id;o(g.lT({requestId:r}))},G=e=>{o(_.to({type:O.p,data:{teamId:e.id}}))},H=()=>{o(h.oB());let e=!!a.org_id,r=e=>{o(_.to({type:L.H,data:{team:a,subscriptionStatus:e}}))};e?r(!0):A.$.getSubscriptionStatus({teamId:a.id}).then(({data:e})=>{r(e.meta&&e.meta.subscription_will_renew)}).catch(e=>{e.data?.message&&o(c.s.error(e.data.message))})},K=e.roles.byTeamId[a.id]||{},W=Object.keys(K).filter(e=>!K[e].pending).length,z=(0,T.canAdminTeam)(a.id,e),$=a?.org_access===y.bU.PUBLIC||W>1,Y=M??(0,T.hasAdminRoleAccessOnTeam)(a.id,e),j=(0,v.R$)(e.user,e.currentUserOrgId),q=window.innerWidth<=(0,l.hG)(R.tgj),X=[{displayText:(0,d.t)("file_browser.copy_link"),callback:()=>{let e=(0,w.bL)(a.id,a.org_id);o(m.S({url:e}))}}];return"search"===r.view&&a.org_id!==e.currentUserOrgId||(a.canEditTeamContents&&q&&!j&&X.push({displayText:(0,d.t)("file_browser.team.new_project"),callback:()=>{o((0,E.SX)({where:I.Ah.FolderListView,team:{...a,canAdmin:z}}))}}),q&&X.push({displayText:(0,d.t)("file_browser.team.invite"),callback:()=>{o(_.to({type:(0,u.T)(),data:{teamId:a.id,notifyOnSuccess:!0}}))}}),z&&X.push({displayText:(0,d.t)("team_view.toolbar.rename"),callback:()=>{o(h.oB()),s&&s(a)}}),z&&C&&X.push({displayText:(0,d.t)("team_view.toolbar.change_icon"),callback:()=>{o(h.oB()),C&&C(a)}}),X.push(...(()=>{let r=[];return((0,T.hasViewerRoleAccessOnTeam)(a.id,e)?$&&r.push({displayText:(0,d.t)("team_view.toolbar.leave_team"),callback:k}):a.org_id&&(0,b.YP)(a,n[a.id],e,a.org_id)!==b.gO.CLICK_JOIN&&r.push({displayText:"",render:()=>i.createElement(p.m,{key:"main-cta",className:P.M,isCardActive:!1,onBypassRequestOverride:B,onJoin:F,onJoinAsAdmin:U,onJoinRequestOverride:x,onLeave:G,onWithdrawRequestForTeamOverride:V,team:a,useLinks:!0}),highlightWhenActive:!0}),Y&&r.push({displayText:(0,d.t)("team_view.toolbar.delete_team"),callback:H}),0===r.length)?[]:[{displayText:"",separator:!0},...r]})())),X}})()({team:r,onRenameClick:n,onChangeTeamIconClick:D,teamRoleRequests:M,canDeleteTeam:k});return i.createElement(o.J,{enabled:U},i.createElement(C.j,{className:e,items:B,parentRect:F?.data?.targetRect,showPoint:!1,lean:"right",dispatch:x,onSelectItem:(e,r)=>{e.callback&&e.callback("",{},x,r)},autofocusPrevOnDismount:!0}))}},94451:(e,r,n)=>{n.d(r,{BT:()=>l,Un:()=>u});var i=n(988520),a=n(741419),o=n(179703),s=n(39773);let l=(0,n(33069).SG)(()=>a.Ez5.canvasGrid().canvasGridArray),c=(0,s.eU)(e=>{let r=e(l),n=[];return r.forEach((e,r)=>{e.forEach((e,i)=>{let a=(0,o.UN)().get(e);a&&n.push({id:e,coord:{row:r,col:i},node:a})})}),n}),d=(0,s.eU)(e=>{let r=e(c),n=new Map;return r.forEach(e=>n.set(e.id,e)),n}),u=(0,s.eU)(e=>{let r=e(l),n=e(d);return r.reduce((e,r,a)=>(e[a]=r.map(e=>n.get(e)).filter(i.Vq),e),{})})},750820:(e,r,n)=>{n.d(r,{$j:()=>o});var i=n(39773),a=n(94451);function o({row:e,x:r=0,y:n=0}){let o=i.zl.get(a.Un)[e];o&&o.forEach(e=>{var i;(i=e.node?.parentNode?.type==="MODULE"?e.node.parentNode:e.node)&&(i.overlayTransform.m02!==r||i.overlayTransform.m12!==n)&&(i.overlayTransform={...i.overlayTransform,m02:r,m12:n})})}},646298:(e,r,n)=>{n.d(r,{k:()=>i});let i=/_INTERNAL_PILL_KEY_[0-9]+_/g},156912:(e,r,n)=>{n.d(r,{cH:()=>a}),n(848318),n(992277),n(741419),n(157907);var i=n(39773);n(502255),n(185067),n(51910),n(369600),n(382326),n(810573),n(935518);let a=(0,i.eU)(!1)},810573:(e,r,n)=>{n.d(r,{Oq:()=>a}),n(848318),n(157907);var i=n(39773);n(379338);let a=(0,i.eU)(!1)},418747:(e,r,n)=>{n.d(r,{_:()=>l});var i=n(848318),a=n(166365),o=n(754617),s=n(214912);function l({is24x24:e}){return i.createElement(a.B,{svg:s.A,className:o.K,svgClassName:e?o.B:void 0})}},597986:(e,r,n)=>{n.d(r,{C2:()=>d,Gx:()=>u});var i=n(848318),a=n(442313),o=n(567627),s=n(653013),l=n(737539),c=n(410936);function d({badges:e},r,n){return e.some(e=>e===l.s.FIGMA_PARTNER)?i.createElement(o.c,{showBorder:r,is24x24:n}):null}function u(e){let r=i.createElement("a",{href:"https://www.figma.com/partners/",target:"_blank",className:c.RL,onClick:e=>{e.stopPropagation()}},(0,a.tx)("community.detail_view.figma_partner_this_creator_is"),i.createElement("span",{className:c.kz},(0,a.tx)("community.learn_more")));return i.createElement(s.m_,{preview:r},e.children)}},473574:(e,r,n)=>{n.d(r,{$3:()=>y,QP:()=>E,V6:()=>m,op:()=>f});var i=n(848318),a=n(716544),o=n(442313);n(706721);var s=n(364370),l=n(625069),c=n(526830),d=n(755461),u=n(173270);function p(e){let r=(0,s.bV)(e.resource.monetized_resource_metadata);return i.createElement(u.Ex,{background:"light",height:e.height},r)}function m({height:e,backgroundColor:r,border:n}){return i.createElement(u.Ex,{height:e,background:r||"light",border:n},(0,o.tx)("community.buyer.purchased"))}function h(e){return i.createElement(u.Ex,{background:"light",height:e.height},(0,o.tx)("community.resource_tiles.paid"))}function _(e){return i.createElement(u.Ex,{background:"light",height:e.height},(0,o.tx)("community.resource_tiles.paid"))}function g(e){return i.createElement(u.Ex,{background:"light",height:e.height},(0,o.tx)("community.resource_tiles.free"))}var f=(e=>(e.PURCHASED="purchased",e.OFF_PLATFORM="off_platform",e.FREEMUM="freemium",e.PRICE="price",e.FREE="free",e))(f||{});function E({resource:e,height:r,validBadges:n=Object.values(f)}){return y({resource:e,height:r,validBadges:n,authedActiveCommunityProfile:(0,a.d4)(e=>"authedActiveCommunityProfile"in e?e.authedActiveCommunityProfile:null)})}function y({resource:e,height:r,validBadges:n=Object.values(f),authedActiveCommunityProfile:a}){return e?!(a&&(0,l.cs)(a))&&(0,d.t)(e)&&e.community_resource_payment&&(0,s.QQ)(e.community_resource_payment)?n.includes("purchased")?i.createElement(m,{height:r}):null:(0,c.PM)(e)?n.includes("freemium")?i.createElement(_,{height:r}):null:(0,c.m3)(e)?n.includes("price")?i.createElement(p,{resource:e,height:r}):null:(0,c.zF)(e)?n.includes("off_platform")?i.createElement(h,{height:r}):null:n.includes("free")?i.createElement(g,{height:r}):null:null}},157410:(e,r,n)=>{n.d(r,{w5:()=>c,mG:()=>l});var i=n(848318);n(536384);var a=n(579020);n(473889),n(17755),n(882439);var o=n(442313),s=n(23354);function l(e,r,n,i){(0,a.sx)("cmty_purchase_button_click",{context:r,resource_type:(0,s.Dl)(e),resource_id:e.id,user_id:n,profile_id:i})}function c({metadata:e,condensed:r}){return i.createElement("span",{className:r?"purchase_button_view--freeTrialCondensed--zoo-d text--fontPos9--naThA text--_fontBase--QdLsd":"purchase_button_view--freeTrial--KSIhj text--fontPos13--xW8hS text--_fontBase--QdLsd"},r?(0,o.tx)("community.resource.free_trial_days",{days:e.trial_length_in_days}):(0,o.tx)("community.resource.includes_free_trial_days",{days:e.trial_length_in_days}))}n(364370),n(376780),n(526830),n(467733),n(677251),n(503024),n(229424)},733370:(e,r,n)=>{n.d(r,{$O:()=>l,Jv:()=>s,TI:()=>a,rc:()=>o});var i=n(848318);function a(){return i.createElement("svg",{viewBox:"0 0 8 12",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 7.75L7 10V1H1V10L4 7.75ZM0.45 11.6625C0.26459 11.8016 0 11.6693 0 11.4375V0.5625C0 0.25184 0.25184 0 0.5625 0H7.4375C7.74816 0 8 0.25184 8 0.5625V11.4375C8 11.6693 7.73541 11.8016 7.55 11.6625L4 9L0.45 11.6625Z",fill:"var(--color-icon, black)"}))}function o(){return i.createElement("svg",{viewBox:"0 0 8 12",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M0 0.5625C0 0.25184 0.25184 0 0.5625 0H7.4375C7.74816 0 8 0.25184 8 0.5625V11.4375C8 11.6693 7.73541 11.8016 7.55 11.6625L4 9L0.45 11.6625C0.26459 11.8016 0 11.6693 0 11.4375V0.5625Z",fill:"var(--color-icon, black)"}))}function s(){return i.createElement("svg",{height:"100%",viewBox:"0 0 10 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 9.98876L9 13.2775V1.02772H1V13.2775L5 9.98876ZM0.609261 14.9148C0.363725 15.1167 0 14.937 0 14.6139V0.770787C0 0.345093 0.335786 0 0.75 0H9.25C9.66421 0 10 0.345093 10 0.770787V14.6139C10 14.937 9.63628 15.1167 9.39074 14.9148L5 11.3049L0.609261 14.9148Z",fill:"var(--color-icon, black)"}))}function l(){return i.createElement("svg",{height:"100%",viewBox:"0 0 10 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M0 0.770787C0 0.345093 0.335786 0 0.75 0H9.25C9.66421 0 10 0.345093 10 0.770787V14.6139C10 14.937 9.63628 15.1167 9.39074 14.9148L5 11.3049L0.609261 14.9148C0.363725 15.1167 0 14.937 0 14.6139V0.770787Z",fill:"var(--color-icon, black)"}))}},606835:(e,r,n)=>{n.d(r,{r5:()=>d});var i=n(848318);n(716544);var a=n(911734);n(579020),n(757033);var o=n(17755);n(442313);var s=n(280679),l=n(690947);n(176283),n(23354),n(377623);var c=n(902213);function d({authors:e}){return i.createElement("div",null,e.map(e=>i.createElement(a.N_,{className:"author_dropdown_preview--authorPreviewListRow--XiWec text--fontPos12--YsUAh text--_fontBase--QdLsd",to:new c.xn({profileHandle:e.profile_handle}).to,key:e.id},i.createElement(s.e,{entity:e}),i.createElement("div",{className:"author_dropdown_preview--authorPreviewListName--sVzBY"},i.createElement("span",{className:o.s.ellipsis.noWrap.overflowHidden.$},e.name),i.createElement(l.l,{profile:e})))))}n(155651),n(822599)},653013:(e,r,n)=>{n.d(r,{So:()=>c,m_:()=>d});var i=n(848318),a=n(536384),o=n.n(a);n(502255);let s=(()=>{let e=[];return["scroll","resize"].forEach(r=>{window.addEventListener(r,()=>{e=e.filter(e=>l(e.el,!1,e.initialHPosition,e.initialVPosition))})}),{set:(r,n,i)=>{e.push({el:r,initialHPosition:n,initialVPosition:i})}}})(),l=(e,r=!1,n,i)=>{if(!e||!("true"===e.parentNode.getAttribute("show-dropdown")||e.parentNode===document.activeElement||e.parentNode?.firstChild===document.activeElement||e===document.activeElement)&&!r)return!1;if(e.parentNode instanceof HTMLElement&&"true"===e.parentNode.dataset.disableRepositioning)return!0;e.dataset.vPosition=i||"below",e.dataset.hPosition="";let a=e.getBoundingClientRect();return a.bottom>window.innerHeight-20?e.dataset.vPosition="above":a.top<20&&(e.dataset.vPosition="below"),a.right>window.innerWidth-100?e.dataset.hPosition="right":a.left<20?e.dataset.hPosition="left":e.dataset.hPosition!==n&&(e.dataset.hPosition=n),!0};function c({children:e,preview:r,className:n,dropdownClassName:a,horizontalPosition:c,verticalPosition:d,disableRepositioning:u,borderRadius:p,allowHoverOnDropdownContents:m=!0}){let h=i.useRef(null),[_,g]=i.useState(!1),[f,E]=i.useState(0),y=e=>{window.innerWidth<500||(E(setTimeout(()=>{let r=h.current;r&&r.parentNode&&(r.parentNode.setAttribute("show-dropdown",e+""),!1===e?setTimeout(()=>{g(e)},150):(s.set(r,c,d),g(e)))},150)),clearTimeout(f))};return i.useLayoutEffect(()=>{_&&!u&&l(h.current,!0,c,d)},[_]),i.createElement("div",{className:n||"dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd","show-dropdown":"false",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),tabIndex:0,"data-disable-repositioning":u,"data-hover-dropdown":!0},i.createElement("div",{onMouseLeave:m?void 0:()=>y(!1)},e),i.createElement("div",{className:o()("dropdown--dropdownContents--BqcL5",a),style:p?{borderRadius:`${p}px`}:{},"data-v-position":d||"below","data-h-position":c||"",ref:h,"data-dropdown-contents":!0},_&&r))}function d({preview:e,children:r}){return i.createElement(c,{className:o()({"dropdown--tooltip--Sh4Vu dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd":!0}),preview:e,horizontalPosition:"center"},r)}},453868:(e,r,n)=>{n.d(r,{O7:()=>l,Xy:()=>c});var i=n(848318),a=n(401463),o=n(872621),s=n(57968),l=(e=>(e.DETAIL="detail",e.UNIVERSAL_INSERT="universal_insert",e))(l||{});function c(e){let r={onLoad:e.onLoad,loading:"lazy",draggable:e.draggable};return i.createElement(a.c,{sizes:function(e){switch(e){case"universal_insert":return;case"detail":r=s.a.COMMUNITY_HUB_FILE_THUMBNAIL_DETAIL;break;default:r=s.a.COMMUNITY_HUB_FILE_THUMBNAIL_DEFAULT}var r,n=Object.entries(r).map(([e,r],n)=>`(min-width: ${e}px) ${r}vw`);return n.push("100vw"),n.join(", ")}(e.thumbnailContext),srcSet:function(e,r,n,i){let a;if(!e||!r)return"";let o=Object.entries(n||{});if(!n){let n=function(e){if(!e)return;let r=e.lastIndexOf("/"),n=e.indexOf(".",r);return e.substring(r+1,n)}(r);o=Object.keys(s.B.COMMUNITY_HUB_FILE_THUMBNAIL).map(r=>[r,`/community/file/${e}/thumbnail/${r}?signature=${n}`])}return(o.push(["1600",r]),"universal_insert"===i?o.map(([e,r])=>{let n=Math.round(parseInt(e)/80*10)/10;return`${r} ${n}x`}):o.map(([e,r])=>`${r} ${e}w`)).join(", ")}(e.hubFileId,e.image,e.resizedThumbnailUrls,e.thumbnailContext),src:e.image,image_type:o.y.COMMUNITY_HUB_FILE_THUMBNAIL,alt:e.alt,className:e.className,imageProps:r})}},541550:(e,r,n)=>{n.d(r,{Cv:()=>S,Mr:()=>I});var i=n(848318),a=n(536384),o=n.n(a);n(431118);var s=n(645736),l=n(291499);n(17755),n(442313);var c=n(521874),d=n(473574);n(690947);var u=n(453868),p=n(433526),m=n(176283),h=n(23354),_=n(852338),g=n(544795);n(902213),n(155651);var f=n(376780),E=n(526830);n(836301);var y=n(48437);n(606835);var b=n(772897),v=n(602145),T=n(424579);function I({resource:e,showMonetizationBadge:r}){let n=(0,d.QP)({resource:e,height:"24"});if(r&&n)return i.createElement("div",{className:v.BQ},n);let a=(0,c.n)({badges:e.badges});return a?i.createElement("div",{className:v.BQ},i.createElement(c.v,null,a)):null}function S({resource:e,isMetaHidden:r,onIntersectionChange:n,onClickOverride:a,index:c,subView:d}){let S=(0,m.J)(),w=(0,_.X5)(),A=(0,h.qD)(e),C=e.client_meta&&JSON.parse(e.client_meta)?.background_color,N=e.thumbnail_is_set;e.viewer_mode===f.y4.WHITEBOARD&&(C={r:1,g:1,b:1});let L=i.createElement(u.Xy,{image:e.thumbnail_url,hubFileId:e.id,onLoad:e=>e.target.style.opacity="1",alt:A.name,resizedThumbnailUrls:e.resized_thumbnail_urls}),O=N?v.zA:e.viewer_mode===f.y4.WHITEBOARD?v.ZW:v.XO;return i.createElement("div",{className:v.Sl,"data-testid":"hub-file-tile"},i.createElement(s.a,{onIntersectionChange:e=>n?.(e)}),i.createElement(p.A6,{to:(0,h._t)({resource:e}),onClick:r=>{(0,g.cB)("hub_file",e.id,c,S,d)},onClickOverride:a,className:w?v.nJ:v.BN},i.createElement("div",{className:o()(O,{[v.$c]:w}),style:{backgroundColor:C&&`rgb(${255*C.r}, ${255*C.g}, ${255*C.b})`}},L,e.viewer_mode===f.y4.PROTOTYPE&&i.createElement(l.t,{svg:T.A,className:v.wr,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:T.A}),i.createElement("div",{className:v.JM},i.createElement(y.dn,{editorType:(0,h.JJ)(e.viewer_mode)})),!r&&i.createElement(I,{resource:e,showMonetizationBadge:!1}))),!r&&i.createElement(b.my,{resource:e,type:E.vt.HUB_FILE}))}},145074:(e,r,n)=>{n(848318),n(596227);var i=n(157907),a=n(39773);n(579020);var o=n(420216);n(44509),n(722941),n(936436),n(727769);var s=(e=>(e[e.CLOSED=0]="CLOSED",e[e.PRELOAD=1]="PRELOAD",e[e.OPEN=2]="OPEN",e))(s||{});let l=(0,i.k)().iframe_triggered_one_tap?`/login_iframe?with_community_header=true&type=fixedmodal&one_tap_origin=${o.DT.COMMUNITY}`:"/login_iframe?with_community_header=true&type=fixedmodal";(0,a.eU)({state:0,url:l,mounted:!1}),(0,a.eU)(!1)},596227:(e,r,n)=>{n(848318);var i=n(39773);n(722941),n(166365),n(155651),n(576854),n(145074),n(936436),n(727769),(0,i.eU)(null)},936436:(e,r,n)=>{n.d(r,{A:()=>o});var i=n(848318),a=n(727769);function o({children:e,className:r,style:n,onClick:o,showInnerModal:s,onCloseModal:l}){let[c,d]=i.useState(null),[u,p]=i.useState(!1);i.useEffect(()=>{},[]);let m=!u&&!1!==s;return i.createElement("div",{ref:e=>d(e),className:r||a.modalBackdrop,role:"button",tabIndex:0,style:n,onClick:e=>{o?.(),e.target.isSameNode(c)&&(l?.(),p(!0),setTimeout(()=>p(!1),400))}},i.createElement("div",{className:a.modal,style:{opacity:m?1:0,transform:m?"scale(1)":"scale(0.95)"}},e))}},582371:(e,r,n)=>{n(848318),n(536384),n(831932),n(166365),n(17755),n(442313),n(364370),n(503024),n(653013)},803448:(e,r,n)=>{n.d(r,{X:()=>a});var i=n(848318);function a(e){let[r,n]=i.useState(!0);return i.useEffect(()=>{let r=new Image;r.onload=()=>{let e=r.width/r.height;n(!(Math.abs(e-2)<Math.abs(e-16/9)))},r.src=e||""},[e]),r}n(23354),n(262531)},706721:(e,r,n)=>{n.d(r,{I:()=>l});var i=n(493554),a=n(364370),o=n(635547),s=n(526830);function l(e){let r=e&&(0,s.m3)(e)?e.monetized_resource_metadata.id:"-1",n=(0,i.Rs)(o.oro,{monetizedResourceMetadataId:r},{enabled:!0});if("loaded"!==n.status||n.errors?.length)return e?.community_resource_payment;{let{communityResourcePayment:e}=n.data;if(!e)return;return(0,a.xs)(e)}}},931990:(e,r,n)=>{n.d(r,{aZ:()=>l}),n(379338);var i=n(442313),a=n(695621),o=n(181670);let s={[o.LJ.visualAssets]:()=>(0,i.t)("community.categories.visual_assets"),[o.LJ.development]:()=>(0,i.t)("community.categories.development"),[o.LJ.accessibility]:()=>(0,i.t)("categories.accessibility"),[o.LJ.brainstorming]:()=>(0,i.t)("categories.brainstorming"),[o.LJ.classroomActivities]:()=>(0,i.t)("categories.classroom_activities"),[o.LJ.designTemplates]:()=>(0,i.t)("community.categories.design_templates"),[o.LJ.designTools]:()=>(0,i.t)("community.categories.design_tools"),[o.LJ.desktopAppsWebsites]:()=>(0,i.t)("categories.desktop_apps_websites"),[o.LJ.diagramming]:()=>(0,i.t)("categories.diagramming"),[o.LJ.editingEffects]:()=>(0,i.t)("categories.editing_effects"),[o.LJ.education]:()=>(0,i.t)("community.categories.education"),[o.LJ.fileOrganization]:()=>(0,i.t)("categories.file_organization"),[o.LJ.fontsTypography]:()=>(0,i.t)("categories.fonts_typography"),[o.LJ.funGames]:()=>(0,i.t)("categories.fun_games"),[o.LJ.icons]:()=>(0,i.t)("community.categories.icons"),[o.LJ.illustrations]:()=>(0,i.t)("categories.illustrations"),[o.LJ.importExport]:()=>(0,i.t)("categories.import_export"),[o.LJ.libraries]:()=>(0,i.t)("categories.libraries"),[o.LJ.mobileApps]:()=>(0,i.t)("categories.mobile_apps"),[o.LJ.portfolios]:()=>(0,i.t)("categories.portfolios"),[o.LJ.calendarTemplates]:()=>(0,i.t)("categories.calendar_templates"),[o.LJ.presentations]:()=>(0,i.t)("categories.presentations"),[o.LJ.prototypingAnimation]:()=>(0,i.t)("categories.prototyping_animation"),[o.LJ.resumes]:()=>(0,i.t)("categories.resumes"),[o.LJ.shapesColors]:()=>(0,i.t)("categories.shapes_colors"),[o.LJ.stockPhotography]:()=>(0,i.t)("categories.stock_photography"),[o.LJ.strategicPlanning]:()=>(0,i.t)("categories.strategic_planning"),[o.LJ.teamMeetings]:()=>(0,i.t)("categories.team_meetings"),[o.LJ.tutorials]:()=>(0,i.t)("categories.tutorials"),[o.LJ.uiKits]:()=>(0,i.t)("categories.ui_kits"),[o.LJ.wireframes]:()=>(0,i.t)("categories.wireframes"),[o.LJ.whiteboarding]:()=>(0,i.t)("community.categories.whiteboarding")};function l(e){if(e.i18n_meta?.title)return(0,i.Yd)(e.i18n_meta.title,e.title);let r=(0,a.S)(e.url_slug,o.LJ);return r?s[r]?.()??e.title:e.title}},905899:(e,r,n)=>{n.d(r,{y$:()=>d,Lj:()=>l,EU:()=>c});var i=n(848318);n(536384),n(831932);var a=n(442313);n(606835),n(653013),n(902213),n(155651);var o=n(602145),s=n(105487);function l(e){let r=e.community_publishers.accepted;return 0===r.length?"":1===e.community_publishers.accepted.length?r[0].name:(0,a.t)("community.publisher_with_suffix",{publisherName:r[0].name,publishersSuffix:(0,a.t)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:r.length-1})})}function c(e){let r=e.community_publishers.accepted;if(0===r.length)return"";let n=r.length>1,o=i.createElement("span",{className:n?s.sA:s.cy},r[0].name),l=i.createElement("span",{className:s.Zz},(0,a.t)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:r.length-1})),c=(0,a.tx)("community.publisher_with_suffix",{publisherName:o,publishersSuffix:l});return i.createElement("span",{className:n?s.tF:s.cy},(0,a.tx)("community.resource_tiles.by_author",{author:n?c:o}))}function d(){return i.createElement("svg",{className:o.u1,viewBox:"0 0 50 50"},i.createElement("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"}))}},23354:(e,r,n)=>{n.d(r,{Cg:()=>V,Co:()=>T,DV:()=>F,Dl:()=>R,HD:()=>I,JJ:()=>A,KG:()=>G,KH:()=>K,N6:()=>H,Qy:()=>$,UI:()=>k,Uu:()=>B,_t:()=>M,cX:()=>O,iX:()=>N,lW:()=>x,nF:()=>W,qD:()=>w,r7:()=>L,rk:()=>C,ss:()=>P,vC:()=>U});var i=n(445777),a=n(886450);n(157907);var o=n(128080),s=n.n(o),l=n(44509);n(651386);var c=n(431118),d=n(753433);n(126757);var u=n(327206);n(310519),n(817990);var p=n(532398);n(601963),n(901647);var m=n(604613),h=n(376780),_=n(526830),g=n(478789);n(302302);var f=n(515673),E=n(677251);n(262531);var y=n(366236);n(367909);var b=n(695621),v=n(991026);n(786175);let T=new RegExp(/^[\w.]{0,30}$/),I=new RegExp(/^\w{0,15}$/);function S(e){return"current_hub_file_version_id"in e?e.versions[e.current_hub_file_version_id]:"current_plugin_version_id"in e&&e.current_plugin_version_id?e.versions[e.current_plugin_version_id]:void 0}function w(e){return S(e)}function A(e){switch(e){case h.y4.SLIDE_TEMPLATE:return g.LE.SLIDES;case h.y4.WHITEBOARD:return g.LE.FIGJAM;case h.y4.SITE_TEMPLATE:return g.LE.SITES;case h.y4.CANVAS:case h.y4.PROTOTYPE:default:return g.LE.FIGMA}}function C(e){switch(e){case h._Y.DESIGN:return g.LE.FIGMA;case h._Y.WHITEBOARD:return g.LE.FIGJAM;case h._Y.SLIDES:return g.LE.SLIDES;case h._Y.SITES:return g.LE.SITES;case h._Y.COOPER:case h._Y.FIGMAKE:return null;default:(0,i.xb)(e)}}let N=[h.y4.CANVAS,h.y4.PROTOTYPE,h.y4.LIBRARY];function L(e){return"viewer_mode"in e&&e.viewer_mode===h.y4.LIBRARY}function O(e){return null!==e&&"viewer_mode"in e&&e.viewer_mode===h.y4.SLIDE_TEMPLATE}function R(e){return function(e){switch(e){case _.vt.HUB_FILE:return p.Uo.FILE;case _.vt.PLUGIN:return p.Uo.PLUGIN;case _.vt.WIDGET:return p.Uo.WIDGET}}((0,v.Vm)(e))}function P(e,{plural:r=!1}={}){let n=(0,v.Vm)(e);switch(n){case _.vt.HUB_FILE:return r?p.UF.FILE:p.Uo.FILE;case _.vt.PLUGIN:return r?p.UF.PLUGIN:p.Uo.PLUGIN;case _.vt.WIDGET:return r?p.UF.WIDGET:p.Uo.WIDGET;default:(0,i.xb)(n)}}var D=(e=>(e.HUB_FILES="hub_files",e.PLUGINS="plugins",e.WIDGETS="widgets",e))(D||{});function M({resource:e}){return k({path:R(e),id:e.id,name:S(e)?.name??""})}function k({path:e,id:r,name:n}){let i=(0,c.fs)(n||"");return`/community/${e}/${r}${""===i?"":"/"}${i}`}function F(e){return`${location.origin}${M({resource:e})}`}function x(e){var r=document.createElement("input");r.style.position="fixed",r.style.top="-1000px",r.value=e,r.classList.add(m.Dm),document.body.appendChild(r),r.select(),r.focus(),document.execCommand("copy"),r.parentNode.removeChild(r)}function U(e,r){if(r)return r+" | Figma";if("/community"===l.Ay.location.pathname||!e)return"Figma Community | Explore Free Design Files, Plugins & More";if("/community/plugins"===l.Ay.location.pathname)return"Powerful Plugins Made Just For Figma";if("/community/widgets"===l.Ay.location.pathname)return"Customize your space with Widgets";let n=[];e.sort_by===d.e.Browse.PUBLISHED_AT?n.push("Newest"):e.sort_by===d.e.Browse.ALL_TIME?n.push("Top"):e.sort_by===d.e.Browse.POPULAR&&n.push("Trending");let i=(0,b.S)(e.editor_type,E.FW);return i===E.FW.FIGJAM?n.push("FigJam"):i===E.FW.FIGMA&&n.push("Figma"),e.resourceType===u.L.BrowseResourceTypes.FILES?n.push("Files"):e.resourceType===u.L.BrowseResourceTypes.WIDGETS?n.push("Widgets"):e.resourceType===u.L.BrowseResourceTypes.PLUGINS?n.push("Plugins"):n.push("Resources"),e.tags?.length>0&&n.push(`tagged as ${e.tags.join(", ")}`),e.query&&n.push(`matching "${e.query}"`),n.join(" ")+" | Figma"}function B(e){return e?.stripe_account_status&&e.stripe_account_status!==y.P5.NONE&&e.stripe_account_status!==y.P5.ACCEPTED}function V(e){return s()(e,(0,f.EB)())}async function G(e){try{let r=await fetch(e),n=new Uint8Array(await r.arrayBuffer());return{type:"image",url:e,sha1:(0,a.Et)(n),buffer:n}}catch{return null}}function H(e){let r={},n=(0,v.XW)(e)?e.carousel_media.images:e.carousel_media_urls,i=(0,v.XW)(e)?e.carousel_media.videos:"carousel_videos"in e&&e?.carousel_videos;return n&&Object.entries(n).forEach(([e,n])=>{r[e]={...n,type:"image"}}),i&&Object.entries(i).forEach(([e,n])=>{r[e]={...n,type:"video"}}),Object.entries(r).sort(([e],[r])=>parseInt(e)-parseInt(r)).map(([e,r])=>r)}function K(e,{pluralized:r,capitalized:n}={}){return function(e,{pluralized:r,capitalized:n}={}){return z((()=>{switch(e){case _.vt.PLUGIN:return"plugin";case _.vt.WIDGET:return"widget";case"comment":return"comment";case _.vt.HUB_FILE:return"hub file";default:throw Error("Unsupported Type")}})(),{pluralized:r,capitalized:n})}((0,v.Vm)(e),{pluralized:r,capitalized:n})}function W(e,{pluralized:r,capitalized:n}={}){return e?z(_.bD.WIDGET,{pluralized:r,capitalized:n}):z(_.bD.PLUGIN,{pluralized:r,capitalized:n})}function z(e,{pluralized:r,capitalized:n}={}){return e+=r?"s":"",n&&void 0!==e[0]&&(e=e[0].toUpperCase()+e.substr(1)),e}function $(e){let r=e.current_hub_file_version_id?e.current_hub_file_version_id:e.current_plugin_version_id||"";return e.versions[r]?.created_at||""}},852338:(e,r,n)=>{n.d(r,{DU:()=>g,Dw:()=>_,GM:()=>m,Qx:()=>y,Su:()=>f,Tg:()=>h,X5:()=>d,uY:()=>u,yl:()=>E});var i=n(848318),a=n(157907),o=n(39773),s=n(579463);n(727341),n(967867);var l=n(305719),c=n(376780);function d(){let{getConfig:e}=(0,s.I7)("cmty_resource_tile_and_row_redesign");return e().get("enabled",!1)}function u(){let{getConfig:e}=(0,s.I7)("cmty_slides_publishing"),r=!!(0,a.k)().piper_community_templates_publish;return(0,i.useCallback)(()=>e().get("enabled",!1)||r,[r,e])}var p=(e=>(e.ASSET_PANEL_ONLY="asset_panel_only",e.ASSET_PANEL_AND_TOOLBAR="asset_panel_and_toolbar",e))(p||{});function m(){let{getConfig:e}=(0,s.I7)("exp_cmty_visual_assets"),r=(0,o.md)(l.UQ),n=(0,a.k)().cmty_visual_assets;return(0,i.useCallback)(()=>n&&r?e().get("entrypoint",null):null,[e,r,n])}function h(){return!!(0,a.k)().cmty_rdp_resource_platform}function _(e){return(0,i.useCallback)(()=>!!e&&[c._Y.DESIGN,c._Y.WHITEBOARD,c._Y.SITES,c._Y.COOPER].includes(e)&&!!(0,a.k)().cmty_file_publishing_rearch,[e])}function g(e){return!!(0,a.k)().cmty_lib_admin_publish||e&&[c._Y.SLIDES,c._Y.COOPER].includes(e)}function f(){return!!(0,a.k)().cmty_sites_full_file_publishing}function E(){return!!(0,a.k)().cmty_resource_hub}function y(){return!!(0,a.k)().cooper_internal_publish_select_publish_scope}},476070:(e,r,n)=>{n.d(r,{M:()=>o});var i=n(878028),a=(e=>(e.by_creator="by_creator",e.by_tags="by_tags",e))(a||{});function o(e){return i.z.object({types:i.z.array(i.z.nativeEnum(a)),content:i.z.array(e)})}},355232:(e,r,n)=>{n.d(r,{Gu:()=>I,MU:()=>m,gV:()=>S,sT:()=>_,wl:()=>p}),n(848318);var i=n(210709);n(44509);var a=n(367909),o=n(753433),s=n(149063),l=n(126757),c=n(327206),d=n(497478),u=n(601963);function p(e,r){return _(e,r)||(0,d.J5)(e,r)||function(e,r){let n=decodeURIComponent(e||location.pathname);if(!g.test(n)||f.test(n)||E.test(n))return;let i=("/"===n[0]?n.slice(1):n).split("/"),l={resourceType:void 0,tags:[],editor_type:void 0,sort_by:(0,o.H)(),price:a.C.ALL,category:null,creators:s.Z.ALL};for(let e=0;e<b.length&&0!==i.length;e++){let r=b[e](i,l);r&&r[0]&&(i=r[1],l={...l,...r[0]})}let{editorType:c,resourceType:d}=(0,u.zs)(l.editor_type,l.resourceType);l.editor_type=c,l.resourceType=d;let p=new URLSearchParams(location.search),m=(()=>{let e=p.get("creators");return e&&e===s.Z.FOLLOWING?e:l.creators})();return{...l,creators:m}}(e)}function m(e){return"query"in e?function(e){let r=new URLSearchParams({resource_type:e.resourceType,sort_by:e.sort_by,query:e.query,editor_type:(0,u.zs)(e.editor_type,e.resourceType).editorType,price:e.price,creators:e.creators&&s.Z.isSearchType(e.creators)?e.creators:s.Z.ALL}).toString();return`/community/search?${r}`}(e):"category"in e&&null!==e.category?(0,d.iB)(e):function(e){let r="/community";e.tags?.length&&(r+=`/tag/${e.tags.join(",")}`);let{editorType:n,resourceType:i}=(0,u.zs)(e.editor_type,e.resourceType);e.editor_type!==n?e.resourceType=(0,u.zs)(e.editor_type).resourceType:e.resourceType!==i&&(e.resourceType=i),e.resourceType!==c.L.BrowseResourceTypes.MIXED&&(r+=`/${e.resourceType}`),(0,u.zs)(e.editor_type,e.resourceType).editorType!==l.k.Editors.ALL&&(r+=`/${e.editor_type}`),e.price&&a.C.FOR_URL_SLUG.indexOf(e.price)>-1&&(r+=`/${e.price}`),e.creators===s.Z.FIGMA_PARTNER&&(r+=`/${e.creators}`),e.sort_by&&e.sort_by!==(0,o.H)()&&(e.sort_by===o.e.Browse.PUBLISHED_AT?r+="/new":e.sort_by===o.e.Browse.POPULAR&&(r+="/trending")),v[r]&&(r=v[r]);let d={};e.creators===s.Z.FOLLOWING&&(d.creators=e.creators);let p=Object.keys(d).length>0?new URLSearchParams(d).toString():void 0;return p&&(r+=`?${p}`),r}(e)}let h=/^\/community\/search$/;function _(e,r){if(!(e||=location.pathname).match(h))return null;let n=new URLSearchParams(r||=location.search),i=n.get("query");if(!i)return null;let l=n.get("resource_type");if(!l)return null;let c=n.get("sort_by")||o.e.Search.RELEVANCY,d=(0,u.zs)(n.get("editor_type")??void 0,l).editorType;return{resourceType:l,sort_by:c,editor_type:d,query:i,price:n.get("price")||a.C.ALL,creators:(()=>{let e=n.get("creators");return s.Z.isSearchType(e)?e:s.Z.ALL})()}}let g=/^\/community/,f=/^\/community\/collections?\/?/,E=/^\/community\/(file|plugin|widget)\//;var y=(e=>(e.NEW="new",e.POPULAR="popular",e.TRENDING="trending",e.TAG="tag",e.COMMUNITY="community",e))(y||{});let b=[function(e){return"community"===e[0]&&[{},e.slice(1)]},function(e){return"tag"===e[0]&&!!e[1]&&[{tags:e[1].split(",")},e.slice(2)]},function(e){let r=e[0];return Object.values(c.L.BrowseResourceTypes).indexOf(r)>-1&&[{resourceType:r},e.slice(1)]},function(e,r){let n=e[0];return Object.values(l.k.Editors).indexOf(n)>-1&&[{editor_type:(0,u.zs)(n,r.resourceType).editorType},e.slice(1)]},function(e){let r=e[0];return a.C.FOR_URL_SLUG.indexOf(r)>-1&&[{price:r},e.slice(1)]},function(e){let r=e[0];return r===s.Z.FIGMA_PARTNER&&[{creators:r},e.slice(1)]},function(e){let r=null;return"new"===e[0]&&(r=o.e.Browse.PUBLISHED_AT),"popular"===e[0]&&(r=o.e.Browse.ALL_TIME),"trending"===e[0]&&(r=o.e.Browse.POPULAR),!!r&&[{sort_by:r},e.slice(1)]}],v={"/community/mixed":"/community"};var T=(e=>(e.SEARCH="/community/search",e))(T||{});function I(){let e=(0,u.pJ)();return{resourceType:e.resourceType,sort_by:(0,o.H)(),editor_type:e.editorType,price:a.C.ALL,tags:[],category:null,creators:s.Z.ALL}}function S(e){return/\/community\/(file|plugin|widget)\/\d+/.test(e)?{reactRouterHandled:!0,subView:"resourcePage"}:/^\/@/.test(e)?{reactRouterHandled:!0,subView:"handle"}:/\/community*/.test(e)?{reactRouterHandled:!0,subView:"searchAndBrowse"}:(i.k.warn(`If this is firing, it means you're trying to use logged-out Community routing on a non-Community URL.
url: ${e}`),{reactRouterHandled:!1,subView:!1})}(()=>{let e=(0,u.pJ)();return e.resourceType,o.e.Search.RELEVANCY,e.editorType,a.C.ALL,s.Z.ALL})()},695621:(e,r,n)=>{n.d(r,{S:()=>i});function i(e,r,n){return Object.values(r).includes(e)?e:n}},364370:(e,r,n)=>{n.d(r,{F8:()=>_,Lt:()=>L,Mj:()=>f,QQ:()=>w,UO:()=>C,V4:()=>N,WD:()=>g,X2:()=>T,XR:()=>v,Yp:()=>E,ae:()=>h,bV:()=>b,mZ:()=>u,up:()=>I,vf:()=>m,vi:()=>S,wF:()=>p,xs:()=>O,zt:()=>y});var i=n(31661),a=n(442313),o=n(816159),s=n(511231),l=n(526830),c=n(324964),d=n(467733);let u=2,p=1e3;function m(e){if(e?.price){let{price:r}=e;return .01*r}}function h(e){return e?100*e:0}function _(e){return e%1!=0}function g(e,r){return r>e}function f(e,r){return r/e>1.5}function E(e){return e<u||e>=p}function y(e,r){if(!e||!r)return"";let n=1200*e*(1-r/100);return(0,a.t)("community.buyer.price_per_year",{priceString:I(n,n%100!=0)})}function b(e,r=!1){let{price:n,is_subscription:i}=e;if(!i)return I(n,!1);if(r){let r=e.annual_price||0;return(0,a.t)("community.buyer.price_per_year",{priceString:I(r,r%100!=0)})}return(0,a.t)("community.buyer.price_per_month",{priceString:I(n,n%100!=0)})}function v(e){let r=b(e),n=(0,d.Uv)(e)?(0,a.t)("community.buyer.subscribe"):(0,a.t)("community.buyer.buy");return`${n} ${r}`}function T(e){let{price:r,is_subscription:n}=e,i=I(r,r%100!=0);return n?(0,a.t)("community.buyer.price_per_month_subscription",{priceString:i}):(0,a.t)("community.buyer.price_one_time_payment",{priceString:i})}function I(e,r=!1){return new s.vr("usd").formatMoney(e,{showCents:r})}function S(e){switch(e){case d.bG.DOESNT_MEET_NEEDS:return(0,a.t)("community.buyer.refund_reason.doesnt_meet_needs");case d.bG.TECHNICAL_ISSUES:return(0,a.t)("community.buyer.refund_reason.technical_issues");case d.bG.TOO_EXPENSIVE:return(0,a.t)("community.buyer.refund_reason.too_expensive");case d.bG.FOUND_ALTERNATIVE:return(0,a.t)("community.buyer.refund_reason.found_alternative");case d.bG.OTHER:return(0,a.t)("community.buyer.refund_reason.other")}}function w(e){return!!e&&(e.subscription_expires_at&&!isNaN(Date.parse(e.subscription_expires_at))?new Date(e.subscription_expires_at).getTime()+864e5>new Date().getTime()&&!A(e,c.G3.DISPUTED):A(e,c.G3.SUCCEEDED))}function A(e,r){return!!e.status&&e.status===r}function C(e){return e.status===c.G3.SUBSCRIPTION_PAYMENT_FAILED||e.status===c.G3.INVOICE_FINALIZATION_FAILED}function N(e,r){if((0,l.I0)(r)||(0,l.xQ)(r)){let n=(r.plugin_publishers?.accepted||[]).map(e=>e.id),a=(r.plugin_publishers?.pending||[]).map(e=>e.id),o=new Set(n.concat(a)),{pass:s,fail:l}=(0,i.j)(e,e=>o.has(e.id)||e.id===r.creator.id);return{usersCanPurchase:l,publishers:s}}{let n=new Set((0,o.D)(r)),{pass:a,fail:s}=(0,i.j)(e,e=>n.has(e.id));return{usersCanPurchase:s,publishers:a}}}function L({resource:e,payment:r}){let n=e.monetized_resource_metadata;return!!(n&&(0,d.Uv)(n))&&!!n.trial_length_in_days&&(!r||!r.subscription_expires_at)}function O(e){return{status:c.QK[e.status],purchased_at:e.purchasedAt?new Date(e.purchasedAt).toISOString():null,subscription_expires_at:e.subscriptionExpiresAt?new Date(e.subscriptionExpiresAt).toISOString():null,subscription_canceled_at:e.subscriptionCanceledAt?new Date(e.subscriptionCanceledAt).toISOString():null,refund_reason:e.refundReason,monetized_resource_metadata_id:e.monetizedResourceMetadataId,subscription_interval:e.subscriptionInterval}}},110221:(e,r,n)=>{n.d(r,{c:()=>a});var i=n(302302);function a(e){return!!(e&&(e.entity_type===i.o1.ORG||e.entity_type===i.o1.TEAM))}},544795:(e,r,n)=>{n.d(r,{AC:()=>y,G8:()=>f,K2:()=>h,Pg:()=>T,Ul:()=>v,X_:()=>_,Y5:()=>b,cB:()=>I,mk:()=>E});var i=n(445777),a=n(197638),o=n.n(a),s=n(579020),l=n(442313);n(126757),n(327206);var c=n(817990),d=n(376780);n(526830);var u=n(783235),p=n(23354);n(852338);var m=n(991026);function h(e){return(0,m.Gl)(e)?p.qD(e)?.name:e.name}function _(e,r){switch(e){case c.vt.WIDGET:case c.vt.PLUGIN:if(r)return(0,l.tx)("community.using.try_in");return(0,l.tx)("community.using.open_in");case c.vt.FIGJAM_TEMPLATE:return(0,l.tx)("community.duplicate.open_in_figjam");case c.vt.SLIDE_TEMPLATE:return(0,l.tx)("community.use_slide_template");case c.vt.SITE_TEMPLATE:case c.vt.COOPER_TEMPLATE_FILE:case c.vt.COOPER_TEMPLATE_ASSET:return(0,l.tx)("community.duplicate.use_template");case c.vt.UI_KIT:case c.vt.DESIGN_TEMPLATE:case c.vt.PROTOTYPE:return(0,l.tx)("community.duplicate.open_in_figma");default:(0,i.xb)(e)}}function g(e){let r=document.createElement("div");return r.innerHTML=o().sanitize(e),r.innerText}function f(e,r,n){if(e.tagline)return e.tagline;if(!e.description)return"";let i=(r=r||g)(e.description);return n?function(e){let r=e?.match(/[^.!?\r\n]+[.!?\r\n]+/);return r?r[0].trim():e??""}(i):i}function E(e){return"user_count"in e?e.user_count??0:"unique_run_count"in e?e.unique_run_count:"duplicate_count"in e?e.duplicate_count:0}function y(e){return!!e.publishing_status&&[d.KB.PENDING_PUBLIC,d.KB.PENDING_USER_VISUAL_COMPLIANCE,d.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishing_status)}function b(e){return!!e.publishing_status&&[d.KB.PENDING_PUBLIC,d.KB.PENDING_USER_VISUAL_COMPLIANCE].includes(e.publishing_status)}function v(e){return e.publishing_status===d.KB.APPROVED_PUBLIC}function T(e){return!!e.publishing_status&&[d.KB.DELISTED,d.KB.DELISTED_CREATOR_STRIPE_DISABLED].includes(e.publishing_status)}function I(...e){let{trackingEventName:r,trackingProperties:n}=function(e,r,n,i,a="feed"){return{trackingEventName:"Community Resource Clicked",trackingProperties:{resource_type:e,community_resource_id:r,subView:a,scope:u.Rx.COMMUNITY,index:n,searchSessionId:i}}}(...e);(0,s.sx)(r,n)}},991026:(e,r,n)=>{n.d(r,{Gl:()=>d,Vm:()=>c,XW:()=>p,qY:()=>m,ws:()=>u});var i=n(445777),a=n(992277),o=n(502255);n(817990),n(544339);var s=n(376780),l=n(526830);function c(e){var r;return u(e)||"resource_type"in e&&(r=e).publishing_status&&[s.KB.ORG_PRIVATE,s.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(r.publishing_status)?e.resource_type:(0,l.U)(e)?l.vt.HUB_FILE:(0,l.xQ)(e)?l.vt.WIDGET:(0,l.I0)(e)?l.vt.PLUGIN:void(0,i.xb)(e)}function d(e){return!("resource_type"in e)}function u(e){return"resource_type"in e}function p(e){return"content"in e}function m(e){return e.content.hub_file?e.content.hub_file:e.content.plugin?e.content.plugin:e.content.widget?e.content.widget:void(0,o.$D)(a.e.COMMUNITY,Error("Resource has no content"),{extra:{resourceId:e.id}})}n(478789)},994351:(e,r,n)=>{n.d(r,{Ac:()=>o,aV:()=>c,nS:()=>s,pO:()=>l}),n(848318);var i=n(66325),a=n(308746);function o(e){}n(502255);class s{get params(){return this._params}get search(){return this._search}get state(){return this._state}constructor(...e){let[r,n,i]=e;this._params=r??{},this._search=n??{},this._state=i??{}}copyWith(e,r,n){return new this.constructor({...this._params,...e},{...this._search,...r},{...this._state,...n})}get pathname(){let e=this.constructor;return(0,i.tW)(e.path,"serializeParams"in e?e.serializeParams(this._params):this._params)}get queryString(){let e=Object.fromEntries(Object.entries(this._search).filter(([,e])=>void 0!==e));if(0===Object.keys(e).length)return"";let r=this.constructor,n="encodeQueryString"in r?r.encodeQueryString??a.lF:a.lF;return`?${n(e)}`}get href(){return`${this.pathname}${this.queryString}`}get to(){return{pathname:this.pathname,search:this.queryString,state:this._state}}}function l(e){return function(r,n={}){let a=(0,i.B6)(r,{...n,path:e.path});return a?{...a,params:"deserializeParams"in e?e.deserializeParams(a.params):a.params}:null}}function c(e,r){return`${e}${r}`}},160837:(e,r,n)=>{n.d(r,{c9:()=>o,oW:()=>l,tx:()=>s});var i=n(725478);let a="8065774696727";function o(e,r){(0,i.ny)({name:e.name,email:e.email},{ticketForms:["community"],fields:r,suppressAnswerBot:!0})}function s(e){return o(e,[{id:a,value:"community_product_question"}])}function l(e){return o(e,[{id:a,value:"community_refund"}])}},327206:(e,r,n)=>{var i;n.d(r,{L:()=>i}),(e=>{e.BrowseResourceTypes={FILES:"files",PLUGINS:"plugins",WIDGETS:"widgets",MIXED:"mixed",COOPER_TEMPLATE_ASSETS:"cooper_template_assets"},e.UniqueResourceTypes=Object.keys(e.BrowseResourceTypes).filter(e=>"MIXED"!==e).map(r=>e.BrowseResourceTypes[r]),e.SearchResourceTypes={...e.BrowseResourceTypes,PROFILES:"profiles"}})(i||(i={})),i.BrowseResourceTypes.FILES,i.BrowseResourceTypes.PLUGINS,i.BrowseResourceTypes.WIDGETS},310519:(e,r,n)=>{n.d(r,{S:()=>s,to:()=>d});var i=n(878028),a=n(526830),o=n(817990),s=(e=>(e.file="hub_files",e.plugin="plugins",e.widget="widgets",e))(s||{}),l=(e=>(e.hub_file="file",e.plugin="plugin",e.widget="widget",e))(l||{});let c=i.z.object({model:o.UL,score:i.z.number()}),d=i.z.object({results:i.z.array(c),total_hits:i.z.number().optional()});i.z.object({comments:i.z.array(a.KS).nullable(),total_count:i.z.number().optional()});var u=(e=>(e.DescriptionView="descriptionViewSection",e.CommentsView="commentsViewSection",e))(u||{})},181670:(e,r,n)=>{function i(e){return!!e&&void 0!==e.query}n.d(r,{LJ:()=>a,OE:()=>i});var a=(e=>(e.accessibility="accessibility",e.brainstorming="brainstorming",e.classroomActivities="classroom-activities",e.dataTemplates="data-templates",e.designInspirations="design-inspirations",e.designTemplates="design-templates",e.designTools="design-tools",e.desktopAppsWebsites="website-templates",e.development="development",e.deviceMockups="device-mockups",e.diagramming="diagramming",e.editingEffects="editing-effects",e.education="education",e.fileOrganization="file-organization",e.fontsTypography="fonts-typography",e.funGames="fun-games",e.icons="icons",e.illustrations="illustrations",e.importExport="import-export",e.instagramTemplates="instagram-templates",e.laptopMockups="laptop-mockups",e.lessonPlans="lesson-plans",e.libraries="libraries",e.mobileApps="mobile-apps",e.portfolios="portfolio-templates",e.calendarTemplates="calendar-templates",e.presentations="presentations",e.prototypingAnimation="prototyping-animation",e.resumes="resume-templates",e.shapesColors="shapes-colors",e.socialMediaTemplates="social-media-templates",e.stockPhotography="stock-photography",e.strategicPlanning="strategic-planning",e.teamMeetings="team-meetings",e.tutorials="design-tutorials",e.uiKits="ui-kits",e.visualAssets="visual-assets",e.websiteTemplates="website-templates",e.whiteboarding="whiteboarding",e.wireframes="wireframes",e.workshopTemplates="workshop-templates",e))(a||{}),o=(e=>(e.LANDING="landing",e.NAV="nav",e))(o||{})},817990:(e,r,n)=>{n.d(r,{Bn:()=>N,Q3:()=>w,UL:()=>L,Y9:()=>O,_s:()=>A,vt:()=>E});var i=n(878028),a=n(476070),o=n(376780),s=n(737539),l=n(324964),c=n(336901),d=n(478789),u=n(302302),p=n(931516),m=n(467733),h=n(677251),_=n(262531),g=n(991973),f=n(624907),E=(e=>(e.DESIGN_TEMPLATE="design_template",e.FIGJAM_TEMPLATE="figjam_template",e.PLUGIN="plugin",e.WIDGET="widget",e.SLIDE_TEMPLATE="slide_template",e.UI_KIT="ui_kit",e.PROTOTYPE="prototype",e.SITE_TEMPLATE="site_template",e.COOPER_TEMPLATE_ASSET="cooper_template_asset",e.COOPER_TEMPLATE_FILE="cooper_template_file",e))(E||{});let y=i.z.object({id:i.z.string(),resource_type:i.z.nativeEnum(E),editor_types:i.z.array(i.z.nativeEnum(f.q)),created_at:i.z.string(),rdp_url:i.z.string(),name:i.z.string(),tagline:i.z.string().nullish(),description:i.z.string().nullish(),like_count:i.z.number(),user_count:i.z.number().nullish(),saved_at:i.z.string().nullish(),category_id:i.z.string().nullable(),category_slug:i.z.string().nullish(),parent_category_slug:i.z.string().nullish(),tags:i.z.array(i.z.string()).optional(),icon_url:i.z.string().nullish(),thumbnail_url:i.z.string().optional(),thumbnail_src_set:_.P1.nullish(),carousel_media:i.z.object({images:_.fE,videos:_.Fy.optional()}).optional(),unpublished_at:i.z.string().nullable(),publishing_status:i.z.nativeEnum(o.KB).nullable(),badges:i.z.array(i.z.nativeEnum(s.s)),monetized_resource_metadata:i.Ip.ignore(m.ii).optional(),community_resource_payment:l.fe.optional(),is_3rd_party_monetized:i.z.boolean(),third_party_m10n_url:i.z.string().nullable(),support_contact:i.z.string().nullable()}).and(u.xK),b=i.z.object({id:i.z.string(),resource_type:i.z.nativeEnum(E),editor_types:i.z.array(i.z.nativeEnum(f.q)),created_at:i.z.string(),name:i.z.string(),tagline:i.z.string().nullish(),description:i.z.string().nullish(),category_id:i.z.string().nullable(),category_slug:i.z.string().nullish(),parent_category_slug:i.z.string().nullish(),tags:i.z.array(i.z.string()).optional(),icon_url:i.z.string().nullish(),thumbnail_url:i.z.string().optional(),thumbnail_src_set:_.P1.nullish(),unpublished_at:i.z.string().nullable(),publishing_status:i.z.nativeEnum(o.KB).nullable()}).and(u.xK);i.z.object({id:i.z.string(),versions:i.z.record(i.z.string(),d.V_),duplicate_count:i.z.number(),created_at:i.z.string(),cover_image_carousel_media_id:i.z.string().optional(),redirect_canvas_url:i.z.string().optional(),current_hub_file_version_id:i.z.string(),viewer_mode:i.z.nativeEnum(o.y4),scaling_mode:i.Ip.ignore(),thumbnail_is_set:i.z.boolean().nullable(),saved_at:i.z.string().optional(),recently_duplicated:i.z.boolean().optional(),related_content:(0,a.M)(i.z.lazy(()=>i.Ip.ignore())),verification_status:i.z.nativeEnum(o.iS).optional(),monetization_status:i.z.nativeEnum(m.UC).optional(),community_resource_payment:l.fe.optional(),library_key:i.z.unknown().optional(),fig_file_metadata:i.z.object({key:i.z.string(),file:c.L,roles:i.z.array(i.Ip.ignore())}).optional()}),i.z.object({id:i.z.string(),versions:i.z.record(h.Px),current_plugin_version_id:i.z.string().nullable(),is_widget:i.z.coerce.boolean(),install_count:i.z.number(),roles:h.R2,org_id:i.z.string().nullable(),created_at:i.z.string(),current_user_has_run:i.z.boolean().optional(),current_user_first_ran_at:i.z.string().optional(),unique_run_count:i.z.number(),editor_type:i.z.nativeEnum(h.HK),saved_at:i.z.string().optional(),related_content:(0,a.M)(i.z.lazy(()=>h.Lz)),hide_related_content_by_others:i.z.boolean().optional(),install_status:i.z.nativeEnum(h.u8).optional(),profile_install_status:i.z.nativeEnum(h.u8).optional(),monetization_status:i.z.nativeEnum(m.UC).optional(),community_resource_payment:l.fe.optional(),third_party_m10n_status:i.z.nativeEnum(m.PN).optional(),creator_policy:i.z.string(),plugin_publishers:u.I7.optional()});let v=i.z.object({id:i.z.string(),file_key:i.z.string(),node_id:i.z.string(),component_key:i.z.string(),checkpoint_id:i.z.string(),file_checkpoint_id:i.z.string(),content_hash:i.z.string(),containing_frame:i.z.object({name:i.z.string(),node_id:i.z.string(),page_id:i.z.string(),page_name:i.z.string(),background_color:i.z.string()}),min_node_height:i.z.number(),min_node_width:i.z.number(),name:i.z.string(),user_id:i.z.string(),publishing_client_version:i.z.number(),description:i.z.string(),created_at:i.z.string(),updated_at:i.z.string(),unpublished_at:i.z.string().nullable(),state_group_id:i.z.string().nullable(),last_published_by_user:i.z.boolean(),destination_key:i.z.string().nullable(),full_hierarchy_path:i.z.string().nullable(),library_hierarchy_path_id:i.z.string(),description_rt:i.z.string(),hub_file_id:i.z.string().nullable(),user_facing_version:i.z.string(),type:i.z.nativeEnum(p.PW),canvas_url:i.z.string(),thumbnail_url:i.z.string(),library_key:i.z.string()}),T=i.z.object({node_id:i.z.string(),name:i.z.string(),thumbnail_url:i.z.string().nullable(),unpublished_at:i.z.string().nullable(),canvas_url:i.z.string().nullable(),updated_at:i.z.string().nullable(),description:i.z.string().nullable(),description_rt:i.z.string().nullable(),meta:i.z.unknown().nullable(),team_id:i.z.string().nullable(),hub_file_id:i.z.string().nullable(),ai_score:i.z.number().nullable(),lexical_score:i.z.number().nullable(),fuse_score:i.z.number().nullable(),server_score:i.z.number().nullable(),containing_frame:i.z.unknown().nullable(),publishing_client_version:i.z.number().nullable(),component_key:i.z.string().nullable(),min_node_width:i.z.number().nullable(),min_node_height:i.z.number().nullable(),content_hash:i.z.string().nullable(),userFacingVersion:i.z.string().nullable(),destination_key:i.z.string().nullable(),isLocal:i.z.boolean().nullable(),_component_v2_record:v.optional()}),I=i.z.object({id:i.z.string(),file_key:i.z.string(),file_version_id:i.z.string(),name:i.z.string(),description:i.z.string().nullable(),publish_scope:i.z.nativeEnum(g.i),org_id:i.z.string().nullable(),license_group_id:i.z.string().nullable(),team_id:i.z.string().nullable(),published_by_user_id:i.z.string().nullable(),unpublished_at:i.z.string().nullable(),created_at:i.z.string(),updated_at:i.z.string(),signed_thumbnail_url:i.z.string().optional(),client_meta:i.z.string().optional(),has_custom_thumbnail:i.z.boolean().optional(),signed_canvas_url:i.z.string().optional(),library_key:i.z.string()}),S=i.z.object({hub_file:i.Ip.ignore(d.NS).optional(),plugin:i.Ip.ignore(h.Lz).optional(),widget:i.Ip.ignore(h.sM).optional(),template:i.Ip.ignore(I).optional(),component_v2:i.Ip.ignore(T).optional()}),w=y.and(i.z.object({content:S,carousel_media:i.z.object({images:_.fE,videos:_.Fy.optional()})}));b.and(i.z.object({content:S}));let A=i.z.object({dimensions:i.z.object({job_title:i.z.array(i.z.string()),paid_status:i.z.array(i.z.string())}),recommendations:i.z.array(i.z.object({resources:i.z.array(y),properties:i.z.object({job_title:i.z.string(),paid_status:i.z.string()})}))}),C=y.and(i.z.object({resource_type:i.z.enum(["design_template","figjam_template","slide_template"])})),N=i.z.object({recommended_resources:i.z.array(C),internal_resources:i.z.array(C)}),L=y.and(i.z.object({content:i.z.optional(S),carousel_media:i.z.object({images:_.fE,videos:_.Fy.optional()}).optional()})),O=i.z.array(L)},624907:(e,r,n)=>{n.d(r,{q:()=>i}),n(126757);var i=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.SLIDES="slides",e.DEV_HANDOFF="dev_handoff",e.SITES="sites",e.COOPER="cooper",e))(i||{})},34370:(e,r,n)=>{n.d(r,{Sq:()=>R,Xw:()=>O,fu:()=>k,vu:()=>F});var i=n(848318),a=n(716544),o=n(67074),s=n(792978),l=n(356505),c=n(258904),d=n(163814);n(629829);var u=n(157907),p=n(536384),m=n.n(p),h=n(20149),_=n(221769),g=n(109728),f=n(166365),E=n(442313),y=n(544795),b=n(967882),v=n(532398),T=n(85442),I=n(376780),S=n(312120),w=n(191372),A=n(7690);let C={enter:{y:20,opacity:0},center:{y:0,opacity:1},exit:{y:-20,opacity:0}};function N(e,r){return e%(r.length+1)}function L(e,r){return N(e,r)===r.length}var O=(e=>(e[e.STOPPED=0]="STOPPED",e[e.PLAYING=1]="PLAYING",e))(O||{});function R({publishedResourceContent:e,draftSubmissionStatus:r,carouselMediaField:n,nameField:a,authorField:s,publishScopeField:l,onAnimationStateChange:c,showThumbnailWithLetterbox:d}){let u=!!l,p=e&&!u?new v.Tg({resourceId:e.id}).href:"",_=(0,g.H)(e),E=u?b.uX:b.Un,[y,T]=(0,i.useState)(0),I=L(y,E),[C,O]=(0,i.useState)(I?0:1);return(0,i.useEffect)(()=>{c?.(C)},[C,c]),(0,i.useEffect)(()=>{let e=setInterval(()=>{T(n=>{if(N(n,E)===E.length-1){if(!_.current&&"failure"!==r)return n+2;O(0),clearInterval(e)}return n+1})},1200);return()=>{clearInterval(e)}},[r,_,E]),(0,i.useEffect)(()=>()=>{c?.(0)},[c]),i.createElement("div",{className:m()(w.kL,{[w.BD]:!I,[w.z3]:I&&"failure"===r})},i.createElement("div",{className:w.fH},i.createElement(P,{animationFrameIndex:y,interstitialHeaders:E,publishedResourceContent:e})),i.createElement(o._,{href:p,newTab:!0,trusted:!0},i.createElement(h.P.div,{className:m()(w.ME,{[w.BD]:!I,[w.z3]:I&&"failure"===r}),initial:{scale:1},animate:{scale:I?1.08:void 0},transition:I?{type:"spring",stiffness:562,damping:30,mass:1,duration:.4}:void 0,whileHover:{scale:I?1.12:void 0}},i.createElement(S.x,{size:"large",hideLikeAndUsage:u,publishedResourceContent:I?e:void 0,carouselMediaField:n,nameField:I?a:void 0,authorField:I?s:void 0,showThumbnailWithLetterbox:d,thumbnailStyle:I?"failure"===r?x.previewTileImageContainerError:void 0:x.previewTileImageContainerInterstitial}))),I&&"success"===r&&i.createElement("div",{className:w.Wo,"aria-hidden":!0},i.createElement(f.B,{svg:A.A})))}function P({animationFrameIndex:e,interstitialHeaders:r,publishedResourceContent:n}){let a;let o=L(e,r);return n&&(a="publishing_status"in n?n.publishing_status:I.KB.ORG_PRIVATE),i.createElement(_.N,null,i.createElement(h.P.div,{key:e,variants:C,style:{position:"absolute"},initial:"enter",animate:"center",exit:o?void 0:"exit",transition:o?{y:{type:"spring",stiffness:562,damping:30,mass:1,duration:.4}}:{y:{type:"spring",stiffness:300,damping:200,duration:.6}}},i.createElement(D,{header:(()=>{let n=N(e,r);return r[n]?r[n]():a===I.KB.APPROVED_PUBLIC?b.MY.public():a===I.KB.ORG_PRIVATE?b.MY.private():a&&(0,y.AC)({publishing_status:a})?b.MY.inReview():b.MY.error()})(),subheader:(()=>{if(o){if(a===I.KB.APPROVED_PUBLIC)return b.I_.public();if(a===I.KB.ORG_PRIVATE)return b.I_.private();if(a&&(0,y.AC)({publishing_status:a})){let e=(0,u.k)().cmty_m10n_poll_hub_file_statuses_on_publish&&(0,y.Y5)({publishing_status:a});return i.createElement(i.Fragment,null,b.I_.inReview(),e&&i.createElement(i.Fragment,null," ",i.createElement(M,null)))}return b.I_.error()}})()})))}function D({header:e,subheader:r}){return i.createElement("div",{className:w.ND},i.createElement("span",{className:w.wx},e),!!r&&i.createElement("span",{className:w.m_},r))}function M(){return i.createElement(s.N,{href:"https://help.figma.com/hc/articles/360040035974-Publish-files-to-the-Community#01H8CZTYDFMDWEK19N8TSNXVVC",newTab:!0,trusted:!0},(0,E.t)("community.publishing.learn_more_about_our_guidelines"))}function k({publishedHubFile:e}){let r=(0,a.wA)(),n=new v.Tg({resourceId:e.id}).href,[o,u]=i.useState(!1);return i.useEffect(()=>{u(!1)},[n]),i.createElement(i.Fragment,null,i.createElement(l.$n,{variant:"secondary",onClick:async()=>{await r(T.S({url:new URL(n,document.baseURI).href})),u(!0)}},i.createElement("span",{className:"x78zum5 x195vfkc"},o?i.createElement(i.Fragment,null,i.createElement(c.l,null),(0,E.tx)("community.publishing.copied")):i.createElement(i.Fragment,null,i.createElement(d.N,null),(0,E.tx)("community.publishing.copy_link")))),i.createElement(s.N.Button,{href:n,newTab:!0,trusted:!0},(0,E.t)("community.publishing.go_to_community")))}function F({libraryKey:e,showText:r=!0}){let n=(0,a.wA)(),[o,s]=i.useState(!1),u=new URL(`/design/new?type=cooper&cooper-template-library-key=${e}`,document.baseURI).href;return i.useEffect(()=>{s(!1)},[u]),i.createElement(i.Fragment,null,i.createElement(l.$n,{variant:"secondary",onClick:async()=>{await n(T.S({url:u})),s(!0)}},i.createElement("span",{className:"x78zum5 x195vfkc"},o?i.createElement(i.Fragment,null,i.createElement(c.l,null),r&&(0,E.tx)("community.publishing.copied")):i.createElement(i.Fragment,null,i.createElement(d.N,null),r&&(0,E.tx)("community.publishing.copy_link")))))}let x={previewTileImageContainerInterstitial:{opacity:"xbyyjgo",$$css:!0},previewTileImageContainerError:{filter:"xy712c7",$$css:!0}}},485211:(e,r,n)=>{n.d(r,{iB:()=>l});var i=n(997894),a=n(526830),o=n(37055),s=n(341355);let l=i.M4.Query({fetch:async e=>(await o.c.getAll({editorType:e})).data.meta});i.M4.Query({fetch:async({categorySlug:e,tagSlug:r})=>(await o.c.getCategoryBySlug(e,{tagSlug:r})).data.meta}),i.M4.Query({fetch:async e=>(await s.A.getCommunityShelves({categorySlug:e,shelfType:a.cS.CATEGORY_PAGE})).data.meta[0]})},497478:(e,r,n)=>{n.d(r,{J5:()=>y,iB:()=>b}),n(848318);var i=n(44509);n(653959);var a=n(308746),o=n(367909),s=n(695621),l=n(994351),c=n(753433),d=n(149063),u=n(126757),p=n(327206),m=n(181670);n(485211);var h=n(54494),_=n(601963),g=Object.getPrototypeOf,f=Reflect.get,E=(e,r,n)=>f(g(e),n,r);function y(e,r){let n;let a=decodeURIComponent(e||i.Ay.location.pathname);try{let e=(0,l.pO)(I)(a);if(!e)return null;n=e.params}catch(e){return null}let s=I.parseQueryString(r||i.Ay.location.search),u=n.categorySlug,p=n.tagSlug,{resourceType:m,editorType:h}=(0,_.zs)(s.editor_type,s.resource_type),g={category:u,resourceType:m,editor_type:h,price:s.price||o.C.ALL,creators:d.Z.ALL,sort_by:(0,c.H)(),tags:p?[p]:[]},f=s.sort_by;f&&[c.e.Browse.ALL_TIME,c.e.Browse.PUBLISHED_AT,c.e.Browse.POPULAR].includes(f)&&(g.sort_by=f);let E=s.creators;return E&&[d.Z.FIGMA_PARTNER,d.Z.FOLLOWING].includes(E)&&(g.creators=E),g}function b(e){let r=(0,s.S)(e.category,m.LJ);if(void 0===r)return"/community";let{resourceType:n,editorType:i}=(0,_.zs)(e.editor_type,e.resourceType);return new I({categorySlug:r,tagSlug:e.tags[0]},{resource_type:n,editor_type:i,price:e.price,sort_by:e.sort_by,creators:e.creators}).href}class v extends l.nS{}v.deserializeParams=e=>{let r=(0,s.S)(e.categorySlug,m.LJ);if(void 0===r)throw Error(`CategoryRoute: Invalid category slug ${e.categorySlug}`);return{...e,categorySlug:r}},v.serializeParams=e=>e,v.parseQueryString=e=>{let r=(0,a.xL)(e);return{resource_type:(0,s.S)(r.resource_type,p.L.BrowseResourceTypes),editor_type:(0,s.S)(r.editor_type,u.k.Editors),price:(0,s.S)(r.price,o.C.Price),sort_by:(0,s.S)(r.sort_by,c.e.Browse),creators:(0,s.S)(r.creators,d.Z.Browse)}};let T=class extends v{};(0,l.Ac)(T),T.path="/community/:categorySlug/:tagSlug?";let I=T,S=class extends v{};(0,l.Ac)(S),S.path=(0,l.aV)(h.VR,I.path),S.serializeParams=e=>({...(0,h.FZ)(e),...E(S,S,"serializeParams").call(void 0,e)}),S.deserializeParams=e=>({...(0,h.CS)(e),...E(S,S,"deserializeParams").call(void 0,e)}),S.parseQueryString=e=>({...(0,h.p7)(e),...E(S,S,"parseQueryString").call(void 0,e)}),Array.from(Object.values(m.LJ)).map(e=>new I({categorySlug:e}).href)},532398:(e,r,n)=>{n.d(r,{Tg:()=>_,UF:()=>u,Uo:()=>d});var i=n(308746),a=n(994351),o=n(217084),s=Object.getPrototypeOf,l=Reflect.get,c=(e,r,n)=>l(s(e),n,r),d=(e=>(e.FILE="file",e.WIDGET="widget",e.PLUGIN="plugin",e))(d||{}),u=(e=>(e.FILE="files",e.WIDGET="widgets",e.PLUGIN="plugins",e))(u||{});class p extends a.nS{constructor(e,r){super(e,r)}}p.deserializeParams=e=>({...e,apiResourceType:e.apiResourceType}),p.serializeParams=e=>e,p.parseQueryString=e=>{let r=(0,i.xL)(e);return{comment:r.comment,checkout:r.checkout,rating:r.rating}};let m=class extends p{};(0,a.Ac)(m),m.path="/community/:apiResourceType(file|plugin|widget)/:resourceId/:urlSlug?";let h=class extends p{constructor(e,r){super({...e,apiResourceType:"file"},r)}};(0,a.Ac)(h),h.path="/community/:apiResourceType(file)/:resourceId/:urlSlug?",h.serializeParams=e=>c(h,h,"serializeParams").call(void 0,{...e,apiResourceType:"file"}),h.parseQueryString=e=>{let r=(0,i.xL)(e);return{...c(h,h,"parseQueryString").call(void 0,e),preview:(()=>{let e=r.preview;if(void 0!==e)return parseInt(e)===o.G4.DEFAULT?o.G4.DEFAULT:e})(),freemium_preview:r.freemium_preview}};let _=h},54494:(e,r,n)=>{n.d(r,{CS:()=>d,FZ:()=>c,VR:()=>l,p7:()=>u}),n(848318);var i=n(308746),a=n(695621),o=n(994351),s=n(901647);let l=(0,o.aV)("/files/:team(team)?/:id([0-9]+)","/resources");function c(e){return"teamId"in e?{team:"team",id:e.teamId}:{id:e.orgId}}function d(e){return"team"===e.team?{teamId:e.id}:{orgId:e.id}}function u(e){return{fuid:(0,i.xL)(e).fuid}}let p=class extends o.nS{};(0,o.Ac)(p),p.path=(0,o.aV)(l,"/:tab(internal|community)"),p.serializeParams=e=>({...c(e),tab:e.tab}),p.deserializeParams=e=>({...d(e),tab:(0,a.S)(e.tab,s.N$,s.N$.INTERNAL)}),p.parseQueryString=u},601963:(e,r,n)=>{n.d(r,{pJ:()=>c,zs:()=>l}),n(848318);var i=n(445777),a=n(157907);n(44509);var o=n(126757),s=n(327206);function l(e=o.k.Editors.ALL,r){switch(e){case o.k.Editors.ALL:case o.k.Editors.FIGMA:case o.k.Editors.FIGJAM:switch(r){case void 0:return{editorType:e,resourceType:s.L.BrowseResourceTypes.MIXED};case s.L.SearchResourceTypes.PROFILES:return{editorType:o.k.Editors.ALL,resourceType:r};default:return{editorType:e,resourceType:r}}case o.k.Editors.SITES:if((0,a.k)().cmty_sites_template_discovery)switch(r){case s.L.BrowseResourceTypes.FILES:return{editorType:e,resourceType:r};case s.L.BrowseResourceTypes.MIXED:case void 0:return{editorType:e,resourceType:s.L.BrowseResourceTypes.FILES};default:return{editorType:o.k.Editors.ALL,resourceType:r}}return{editorType:o.k.Editors.ALL,resourceType:r??s.L.BrowseResourceTypes.MIXED};case o.k.Editors.COOPER:if((0,a.k)().cooper_template_discovery_via_cmty_hub)switch(r){case s.L.BrowseResourceTypes.FILES:return{editorType:e,resourceType:r};case s.L.BrowseResourceTypes.MIXED:case void 0:return{editorType:e,resourceType:s.L.BrowseResourceTypes.FILES};default:return{editorType:o.k.Editors.ALL,resourceType:r}}return{editorType:o.k.Editors.ALL,resourceType:r??s.L.BrowseResourceTypes.MIXED};case o.k.Editors.PROTOTYPE:switch(r){case s.L.BrowseResourceTypes.FILES:return{editorType:e,resourceType:r};case s.L.BrowseResourceTypes.MIXED:case void 0:return{editorType:e,resourceType:s.L.BrowseResourceTypes.FILES};default:return{editorType:o.k.Editors.ALL,resourceType:r}}case o.k.Editors.DEV_MODE:switch(r){case s.L.BrowseResourceTypes.PLUGINS:return{editorType:e,resourceType:r};case s.L.BrowseResourceTypes.MIXED:case void 0:return{editorType:e,resourceType:s.L.BrowseResourceTypes.PLUGINS};default:return{editorType:o.k.Editors.ALL,resourceType:r}}case o.k.Editors.SLIDES:switch(r){case s.L.BrowseResourceTypes.FILES:case s.L.BrowseResourceTypes.PLUGINS:return{editorType:e,resourceType:r};case s.L.BrowseResourceTypes.MIXED:case void 0:return{editorType:e,resourceType:s.L.BrowseResourceTypes.FILES};default:return{editorType:o.k.Editors.ALL,resourceType:r}}default:(0,i.xb)(e)}}function c(){return l()}},580008:(e,r,n)=>{n.d(r,{Pc:()=>i});let i=()=>[]},610023:(e,r,n)=>{n.d(r,{U9:()=>i,ZI:()=>o,c$:()=>s,hZ:()=>a});let i=function(){return!1},a=function(){return!1},o=function(){return{showDakotaFieldPicker:!1,filteredFieldTypes:[]}},s=function(){return{status:"loaded",data:[]}}},432411:(e,r,n)=>{n.d(r,{U5:()=>o});var i=n(848318);n(897392),n(157907);var a=n(39773);n(541525),n(645221),n(806965),n(51910),n(369600),n(419521),n(382326);let o=(0,a.eU)(!0);i.createContext({connectedInstancesByTlf:new Map,connectedInstancesByTlfGroupedSiblings:new Map,connectedInstancesByGuid:new Map,connectedInstanceTree:void 0,analyticsByComponentKey:new Map})},531074:(e,r,n)=>{n.d(r,{rZ:()=>K,yT:()=>z});var i=n(848318),a=n(891627),o=n(716544),s=n(425642),l=n(376025),c=n(859989),d=n(453843),u=n(157907),p=n(39773),m=n(536384),h=n.n(m),_=n(654104),g=n(540428),f=n(355834),E=n(566699),y=n(882439),b=n(442313),v=n(895104),T=n(646298),I=n(464079),S=n(547449),w=n(89503),A=n(851183),C=n(350451),N=n(729658),L=n(85442),O=n(790355),R=n(604613),P=n(503024),D=n(60546),M=n(163566),k=n(256429),F=n(613198),x=n(635642),U=n(913030),B=n(464604),V=n(974006);let G=(0,p.eU)(!1),H=(e,r={})=>(0,s.WI)(e.map(e=>e.lines.length>0?(0,A.kt)(e.lines,!0):null)).join("\n\n").replace(w.Z4,"").replace(w.M$,"").replace(w.NT,"").replace(w.Q6,"").replace(N.G6,"").replace(N.P1,"").replace(T.k,e=>{let n=r[e];return n?"INSTANCE"===n.type||"D2C"===n.type?`/* ${n.name} */`:`/* ${n.message} */`:"/* unknown instance */"});function K({source:e,title:r,selectedAll:n,additionalTrackingProperties:a,...o}){let s=(0,D.ks)(),c=(0,I.v4)(),d=(0,i.useMemo)(()=>({name:"Copy code button",type:"code connect"!==e?c.type:void 0,pluginId:"code connect"!==e?c.id:void 0,selectedAll:n,source:e,title:r,isDevMode:s,...a}),[s,c.id,c.type,n,e,r,a]),u=(0,S.TM)();return e?i.createElement(y.e6,{...o,className:h()(B.AF,B.cL,u&&B.BB),trackingProperties:d}):i.createElement(l.E,{...o,className:h()(B.AF,B.cL,u&&B.BB)})}function W({onClick:e,copyAllActionEnabled:r=!1,onMouseEnter:n,onMouseLeave:a,title:o,isCopyingAll:s=!1,additionalTrackingProperties:l}){return i.createElement(K,{onClick:e,"aria-label":(0,b.t)("inspect_panel.copy"),htmlAttributes:{"data-tooltip":r?(0,b.t)("inspect_panel.code.copy_all_shift"):void 0,"data-tooltip-type":P.Ib.TEXT,onMouseEnter:n,onMouseLeave:a},source:"codegen",title:o,selectedAll:s,additionalTrackingProperties:l},i.createElement(E.U,{svg:V.A},i.createElement(c.X,null)))}function z(e){let{code:r,section:n,hasCodeDiff:s,collapseLongSections:l=!0,bottomPadding:c=!1,copyActionEnabled:d=!0,copyAllActionEnabled:u=!0,hideHints:m=!1,recordingKey:g,additionalHeaderActions:f=null,footerActions:E=null,type:y="default",leftHeaderActions:T=null,hideHeader:I=!1,copyButtonContainer:S,additionalTrackingProperties:w,onInstancePillClick:C}=e;n.collapseAfterIndex||(n={...n,collapseAfterIndex:15});let N=(0,o.d4)(e=>Object.keys(e.mirror.sceneGraphSelection)[0]),P=(0,o.wA)(),D=function(e,r){let n=(0,o.wA)();return(0,x.IG)(e.lines,e.language,e.pills,n,r)}(n,C),[k,F]=i.useState(l),[U,V]=i.useState(!1),[K,z]=(0,p.fp)(G),X=u&&K;i.useEffect(()=>{F(l)},[N,l]);let Z=i.useMemo(()=>k&&n.collapseAfterIndex?D.slice(0,n.collapseAfterIndex):D,[D,n.collapseAfterIndex,k]),J=n.collapseAfterIndex?D.length-n.collapseAfterIndex:0,Q=e.codeToCopy||r,ee=e.sectionToCopy||n,et=i.useCallback(()=>{if(!X)return H([ee],ee.pills);{let e=Q.reduce((e,r)=>Object.assign(e,r.pills),{});return H(Q,e)}},[Q,ee,X]),er=i.useCallback(()=>{let e=et();e&&P(L.lW({stringToCopy:e,ignoreLineBreaks:!1}))},[P,et]),en=_.rf(_.Pt(g,"copy"),"click",er),ei=i.useCallback(()=>{P(L.lW({stringToCopy:window.getSelection()?.toString()||et(),ignoreLineBreaks:!1}))},[P,et]),ea=i.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:r,clientY:n}=e;P(O.j7({type:R.Sl,data:{clientX:r,clientY:n,onCopyText:ei}}))},[ei,P]),eo=i.useCallback(e=>{u&&z(e.shiftKey),V(!0)},[z,u]),es=_.rf(_.Pt(g,"copy"),"mouseenter",eo),el=i.useCallback(e=>{z(!1),V(!1)},[z]),ec=i.useCallback(e=>{z(U&&u&&e.shiftKey)},[U,z,u]);i.useEffect(()=>(document.addEventListener("keydown",ec),document.addEventListener("keyup",ec),()=>{document.removeEventListener("keydown",ec),document.removeEventListener("keyup",ec)}),[ec]);let ed=function(e){switch(e){case"Modifier":return(0,b.t)("inspect_panel.code.modifier");case"Code":return(0,b.t)("inspect_panel.code.code");case"Style":return(0,b.t)("inspect_panel.code.style");case"Variables":return(0,b.t)("inspect_panel.code.variables");case"Layout":return(0,b.t)("inspect_panel.properties.layout");case"Position":return(0,b.t)("inspect_panel.code.position");case"Other":return(0,b.t)("inspect_panel.code.other");case"Typography":return(0,b.t)("inspect_panel.typography.title");default:return e}}(n.name),eu=U||X,ep=i.useRef(null),em=(0,i.useMemo)(()=>function(){return i.createElement(W,{onClick:en,copyAllActionEnabled:u,onMouseEnter:es,onMouseLeave:el,title:n.name,isCopyingAll:X,additionalTrackingProperties:w})},[en,u,es,el,n.name,X,w]);return i.createElement(i.Fragment,null,S&&S.current&&d&&(0,a.createPortal)(i.createElement(em,null),S.current),i.createElement(M.VZ,{hideHeader:!0,noPadding:!c,noBorder:!0,recordingKey:`code:${n.name}`},i.createElement(x.GM.Provider,{value:{ref:ep}},i.createElement(q,{content:i.createElement($,{code:n,lines:Z,hideHints:m||eu,hasCodeDiff:s,isCopyHighlightActive:eu,onInstancePillClick:e.onInstancePillClick}),copyHoverClassName:d&&eu?B.TJ:void 0,footer:E?i.createElement(j,{type:y},E):void 0,header:!I&&i.createElement(Y,{type:y,rowRef:ep,muted:n.isTextSegment,actions:i.createElement(i.Fragment,null,f||i.createElement(v.M,null),d&&i.createElement(em,null)),title:ed,leftActions:T,titleAccessory:e.titleAccessory}),leftGutter:s?function(e,r=!1){return i.createElement("div",{className:h()(B.x4,{[B.R]:r})},e.map((e,r)=>i.createElement("div",{className:h()({[B.BJ]:!0,[B.L6]:e.diff===A.j5.ADDED,[B.pG]:e.diff===A.j5.REMOVED}),key:r},e.diff===A.j5.ADDED?"+":e.diff===A.j5.REMOVED?"-":null)))}(Z,eu):i.createElement("div",{className:B.BA},Z.map((e,r)=>i.createElement("div",{className:B.eT,key:r},r+1))),onContextMenu:ea,onShowMore:()=>F(!1),shouldShowMore:k&&J>0,showMoreLinesCount:J,type:y}))))}function $({code:e,lines:r,hideHints:n,hasCodeDiff:a,isCopyHighlightActive:o=!1,onInstancePillClick:s}){let l=i.useCallback(e=>{let r;let n=e.target;n.classList.contains("instance-pill")?r=n:n.parentElement?.classList.contains("instance-pill")&&(r=n.parentElement),r&&s?.(r.dataset.id||"")},[s]),c=({index:s})=>{let c=r[s],p=8*(0,A.Gj)(c).length+16+8,m=i.createElement("span",{style:{display:"inline-block",paddingLeft:p,paddingRight:8,textIndent:-16,flexGrow:1},key:"code","data-testid":`${e.name}${s}`,onClick:l},c.code),_=(0,u.k)().dt_enterprise_codegen_development,g=null;c?.d2cType==="component"&&(g=i.createElement(d.k,{className:B.ee}));let f=c.hint,E=void 0!==f&&f.type===C.bv.Tooltip?i.createElement(F.A,{hint:(0,F.x)(f),hidden:n}):null,y=e.lines[s]?.diff;return i.createElement("div",{key:s,className:h()({[B.n8]:!0,[B.vN]:y===A.j5.ADDED&&!o,[B.rq]:y===A.j5.REMOVED&&!o,[B.R0]:a&&y!==A.j5.ADDED&&y!==A.j5.REMOVED&&!o,[B.r9]:a&&y===A.j5.REMOVED&&o})},_&&g,m,E)};return i.createElement("code",{className:h()(B.Zh,U.y),"data-lang":e.language,style:{minWidth:"100%",whiteSpace:"normal"}},r.map((e,r)=>c({index:r})))}function Y({title:e,muted:r,actions:n,type:a,leftActions:o,rowRef:s,titleAccessory:l}){let c=(0,S.TM)();return i.createElement("div",{className:B.Tw,ref:s},i.createElement("div",{className:h()({[B.S7]:!0,[B.aW]:"connected"===a,[B.jW]:"manual"===a,[B.JM]:"connected-playground"===a})},o,c?i.createElement("div",{className:r?B.fH:B.Cq,"data-testid":"devHandoffFocusPanelTitle"},e):i.createElement(k.xw,{className:r?B.fH:B.Cq,"data-testid":"devHandoffFocusPanelTitle"},e),l,i.createElement("div",{className:B.zB},n)))}function j({children:e,type:r}){return i.createElement("div",{className:B.p4},i.createElement("div",{className:h()({[B.I$]:!0,[B.aW]:"connected"===r,[B.jW]:"manual"===r})},e))}function q({header:e,content:r,leftGutter:n,footer:a,type:o,shouldShowMore:s,showMoreLinesCount:l,onShowMore:c,onContextMenu:d,copyHoverClassName:u}){let[p,m]=i.useState(null),_=p&&p.value?B.Lo:B.ZP,E=i.useCallback(e=>{m({value:e})},[]),y=!!n,v=!!a,T=i.useRef(null),I=(0,S.TM)();return i.createElement("div",{className:h()(B._X,I&&B.v2)},e,i.createElement("div",{className:h()(B.is,u,{[B.Eu]:y,[B.xP]:v,[B.aW]:"connected"===o,[B.jW]:"manual"===o})},y&&n,i.createElement("div",{className:B.jJ},i.createElement(g.Z,{onCanScrollChanged:E,className:h()(_),scrollBarAlways:!0,childRef:T},i.createElement("div",{onContextMenu:d,style:{width:"fit-content",minWidth:"100%"},ref:T},r)),s&&i.createElement("div",{className:B.cH},i.createElement(f.d,{label:(0,b.t)("dev_handoff.code.show_more",{count:l}),onClick:c})))),v&&a)}},464079:(e,r,n)=>{n.d(r,{A0:()=>f,AC:()=>I,Ap:()=>E,LK:()=>g,MT:()=>m,NU:()=>y,Pt:()=>T,S8:()=>b,XP:()=>v,p:()=>_,uz:()=>h,v4:()=>w,xv:()=>S});var i=n(848318),a=n(716544),o=n(39773),s=n(697401),l=n(442313),c=n(96447),d=n(402840),u=n(241917),p=n(432205);let m="FIGMA_PROPERTIES",h="WEB",_="IOS",g="ANDROID",f="CSSBUILDER",E="IOS_UIKIT",y="ANDROID_XML",b={[h]:{type:"first-party",id:h},[_]:{type:"first-party",id:_},[E]:{type:"first-party",id:E},[g]:{type:"first-party",id:g},[y]:{type:"first-party",id:y}};function v(e){let r="string"==typeof e?{type:"first-party",id:e}:e;return r&&r.id&&("first-party"!==r.type||b[r.id])?r:{type:"first-party",id:h}}function T(e){let r=(0,c.$1)(),n=(0,c.j8)();return(0,i.useMemo)(()=>({format(i){if(i?.type==="first-party")switch(i?.id){case f:return"CssBuilder";case h:return(0,l.t)("dev_handoff.code.lang_css");case _:return(0,l.t)("dev_handoff.code.lang_swiftui");case E:return(0,l.t)("dev_handoff.code.lang_uikit");case g:return(0,l.t)("dev_handoff.code.lang_compose");case y:return(0,l.t)("dev_handoff.code.lang_android_xml");case m:return(0,l.t)("dev_handoff.code.lang_figma")}if(e){let a=i?.type==="local-plugin"?r[i.id]:i?.type==="published-plugin"&&e.plugin_id===i?.id?n[i.id]??e:null;if(a)return 1===(0,p.m)(a).length?a.name:(0,p.X)(a,i?.pluginLanguage??"").label??a.name}return""}}),[n,r,e])}function I(e){let r=(0,a.d4)(e=>e.selectedView),n="fullscreen"===r.view?r.editorType:null,i=(0,c.S0)((e?.type!=="first-party"?e?.id:"")??"",{searchLocalPlugins:!0,searchPublishedPlugins:!0}),{plugin:o}=(0,c._P)((e?.type==="published-plugin"?e?.id:"0")??"0",e?.type==="published-plugin");if(!e||"orgAdminSettings"!==r.view&&n!==u.nT.DevHandoff)return null;let s=i||o;return s&&(0,d.M5)(s)?s:null}function S(e,r){if(!e||!e.codeSyntax)return null;switch(r){case h:case f:return e.codeSyntax[0]??null;case g:case y:return e.codeSyntax[1]??null;case _:case E:return e.codeSyntax[2]??null}return null}function w(){let e=(0,o.md)(s.D),r=(0,a.d4)(e=>e.mirror.appModel.devHandoffCodeLanguage),n=(0,a.d4)(e=>e.selectedView),l=r;return"orgAdminSettings"===n.view&&e&&(l=e),(0,i.useMemo)(()=>v(l),[l])}},480859:(e,r,n)=>{n.d(r,{BT:()=>o,Ju:()=>l,q$:()=>s});var i=n(741419);let a=[];function o(e){a.push(e),a.length&&i.w3z.setIsNodeChangeCallbackRegistered(!0)}function s(e){(a=a.filter(r=>r!==e)).length||i.w3z.setIsNodeChangeCallbackRegistered(!1)}function l(){}},915162:(e,r,n)=>{n.d(r,{W8:()=>c,pq:()=>d});var i=n(848318),a=n(157907),o=n(39773);let s=(0,o.eU)(new Map),l=(0,o.eU)(null,(e,r,{nodeId:n,suggestions:i})=>{let a=new Map(e(s));0===i.length?a.delete(n):a.set(n,i),r(s,a)});function c(e,r){o.zl.set(l,{nodeId:e,suggestions:r})}function d(e,r){let n=(0,o.Xr)(l);i.useEffect(()=>{(0,a.k)().dt_ccv2_on_canvas&&("loaded"===r.status?n({nodeId:e.guid,suggestions:r.data}):n({nodeId:e.guid,suggestions:[]}))},[r,n,e])}},361214:(e,r,n)=>{function i(e){return!!e?.mirror&&1===Object.keys(e.mirror.sceneGraphSelection).length}n.d(r,{Mx:()=>i}),n(741419),n(897392),n(493554),n(369600),n(635547),n(483372)},806965:(e,r,n)=>{n(45584)},524327:(e,r,n)=>{n.d(r,{JW:()=>s});var i=n(848318);n(716544);var a=n(376025);n(741419),n(157907),n(39773),n(921494);var o=n(654104);function s({text:e,isActive:r,onClick:n,recordingKey:s,isSingle:l}){return i.createElement(a.E,{recordingKey:o.Pt(s,"tab"),onClick:n,actionOnPointerDown:!0,className:l?"dev_handoff_panel_tab_group--tabsHeaderSingle--G5OnU dev_handoff_panel_tab_group--tabFocus--f8Y7h":r?"dev_handoff_panel_tab_group--tabActive--Ex7NX legacy_pages_panel--tabActive--hmo0j legacy_pages_panel--tab--inhND dev_handoff_panel_tab_group--tabFocus--f8Y7h":"dev_handoff_panel_tab_group--tab--Y0iYX legacy_pages_panel--tab--inhND dev_handoff_panel_tab_group--tabFocus--f8Y7h",htmlAttributes:{"data-label":e}},e)}n(17755),n(442313),n(895104),n(775038),n(27408),n(405866),n(727341),n(406834),n(99624),n(274548),n(836301),n(409389),n(259078),n(176477),n(386160)},918444:(e,r,n)=>{n.d(r,{HT:()=>l,RB:()=>c});var i=n(39773),a=n(119310);let o=(0,i.eU)(void 0),s=(0,a.bt)(e=>e.universalInsertModal.initialFdView),l=(0,i.t_)(e=>{let r=e(s),n=e(o);return r||n||"recents_and_saved"}),c=(0,i.eU)(!1)},686483:(e,r,n)=>{n.d(r,{lz:()=>m,sX:()=>h}),n(848318);var i=n(741419);n(157907);var a=n(39773),o=n(818754),s=n(577023),l=n(27776);let c=(0,o.jz)(l.QBm),d=300+c,u=640+c;function p(e){return Math.max(d,Math.min(u,e||0))}function m(){return p((0,s.UX)())}function h(){return p(i.Ez5?.editorPreferences().devHandoffInspectSplitPosition.getCopy()??0)}(0,a.eU)(!1)},58802:(e,r,n)=>{n.d(r,{d1:()=>o,hj:()=>a});var i=n(39773);(0,i.eU)(null);let a=(0,i.eU)(null),o=(0,i.eU)({fn:null});(0,i.eU)(!1)},640533:(e,r,n)=>{n(848318),n(741419),n(179703),n(39773),n(579020);var i=n(379338);n(882439),n(442313),n(802780),n(180423),n(201494),n(176629),n(339599),n(139736),n(662275),n(45584),n(35315),n(61614),n(495052),n(334366),n(151144),n(58802),n(722541),(0,i.ck)("bfb358109ac5994e69048d8390d3a0c334253aa8")},639375:(e,r,n)=>{var i=n(39773),a=n(818754),o=n(27776);let s=(0,a.jz)(o.YI7),l=(0,a.jz)(o.Qhc);(0,i.eU)(s+l)},657218:(e,r,n)=>{n.d(r,{e:()=>s}),n(848318);var i=n(39773);n(808471);var a=n(60546);let o=(0,i.eU)(!1);function s(){let e=(0,a.LS)(),[r]=(0,i.fp)(o);return r&&e}},935529:(e,r,n)=>{n.d(r,{Nc:()=>d,U4:()=>p,_I:()=>u,tn:()=>c,xo:()=>m});var i=n(716544),a=n(493554),o=n(369600),s=n(635547),l=n(53818);let c=(0,l.n)(e=>{let r=(0,o.tB)({openFile:e.openFile??null});return r?.canAccessFullDevMode??!0}),d=(0,l.n)(e=>{let r=(0,o.tB)({openFile:e.openFile??null});return r?.canAccessDevModeEntryPoint??!0});function u(){return(0,i.d4)(c)}function p(){return(0,i.d4)(d)}function m(){let e=(0,o.tS)(),r=(0,a.Rs)(s.F$0,{key:e||""},{enabled:!!e});return!!r.data?.file&&"error"!==r.data.file.status&&(r.data?.file?.data?.hasPermission??!1)}},518682:(e,r,n)=>{n.d(r,{O:()=>q});var i=n(848318),a=n(716544),o=n(897378),s=n(397257),l=n(748749),c=n(423526),d=n(191504),u=n(741419),p=n(673906),m=n(573446);n(39773);var h=n(536384),_=n.n(h);n(260986);var g=n(579020),f=n(818754),E=n(808471),y=n(182059);n(919414);var b=n(166365),v=n(442313),T=n(547449),I=n(649220),S=n(30598),w=n(185067),A=n(712041),C=n(790355),N=n(727341);n(577023),n(339599);var L=n(449977);n(369600);var O=n(621816);n(207715),n(24096);var R=n(661458);n(753515);var P=n(483372),D=n(503024),M=n(760804);n(163566);var k=n(803243),F=n(405817),x=n(246633),U=n(302839),B=n(861709),V=n(786175);let G="asset_panel--exportMeta--C-dRt",H="asset_panel--dot--dR7Yw",K="asset_panel--sourceName--uwyAu ellipsis--ellipsis--Tjyfa";var W=n(815368),z=n(839808);let $=4*(0,f.jz)(V.devHandoffAssetPreviewMaxWidth),Y=4*(0,f.jz)(V.devHandoffAssetPreviewMaxHeight),j=e=>e.stopPropagation(),q={format:e=>e};i.memo(({assetInfo:e,openFileKey:r,disabled:n,media:h,showGuids:f,saveAsState:V,dropdownShown:X,isSelected:Z})=>{let J=(0,E.nl)(),Q=(0,T.lv)(),ee=(0,N.GS)(),{assetId:et,assetName:er,thumbnailVersion:en}=e,ei=e.instancesGUIDs?.[0]??e.duplicateGUIDs?.[0]??et,ea=(0,I.O)({assetId:ei,thumbnailVersion:en,width:$,height:Y,scale:4}),eo=(0,O.e)(e.sourceLibraryKey??(0,m.l)(""),{enabled:!!e.sourceLibraryKey}),es=function(e,r){let{exportSettings:n}=(0,w.mJ)(e)??{exportSettings:null};return n?.[0]?.imageType??(r&P.PW.ASSET_ICON?"SVG":"PNG")}(et,e.type),el=(0,S.aT)(e),ec=(0,a.wA)(),ed=i.useCallback(async e=>{e.stopPropagation(),(0,g.sx)("Asset Panel Export Clicked"),await (0,R.Dc)(R.hV.Export,V,ec,"export-assets-handoff",[ei],"export-assets-handoff",{[ei]:es}),ec(A.rg()),ec(C.oB())},[ei,ec,es,V]),eu=i.useCallback(e=>{h.length>0&&r?ec(C.j7({type:"save-media-select",data:{assetId:ei}})):ed(e),e.stopPropagation()},[ec,ed,h,ei,r]),ep=(0,B.d)(!1,void 0,ei),em=i.useCallback(e=>{ep?.(),e.stopPropagation()},[ep]),eh=e?.instancesGUIDs??e?.duplicateGUIDs??[et],e_=i.useCallback(e=>{p.l7.user("image-type-change",()=>{u.glU.setDevHandoffAssetExport(et,e)})},[et]),eg=!!(e.type&P.PW.ASSET_COMPONENT),ef=!!(e.type&P.PW.ASSET_ICON),eE=!!(e.type&P.PW.ASSET_IMAGE),ey=!!(e.type&P.PW.ASSET_GIF),eb=!!(e.type&P.PW.ASSET_VIDEO),ev=ey||eb,eT=(ef||eE)&&!ev,eI=!!e.sourceLibraryKey,eS=!!eo.data?.isHubFile,ew=i.useMemo(()=>[i.createElement(F.N5,{key:"png",value:"PNG"}),i.createElement(F.N5,{key:"jpeg",value:"JPEG"}),...ef?[i.createElement(F.N5,{key:"svg",value:"SVG"})]:[],i.createElement(F.N5,{key:"pdf",value:"PDF"})],[ef]),eA=e=>{let r=e.split(".");if(!r||!(r.length>1))return{name:e,extension:""};{let e=r[r.length-1];return{name:r.slice(0,r.length-2).join("."),extension:e}}};return i.createElement("div",{className:"asset_panel--assetContainer----LF9",onMouseEnter:()=>u.Ez5.canvasViewState().temporarilyHoveredNodes.set(eh),onMouseLeave:()=>u.Ez5.canvasViewState().temporarilyHoveredNodes.set([]),onClick:()=>L.tJ([e?.instancesGUIDs?.[0]??et]),role:"link",tabIndex:0},i.createElement("div",{className:_()("asset_panel--assetRow--0VUJr text--fontPos11--2LvXf text--_fontBase--QdLsd",{"asset_panel--assetRowLegacy--soWWd":!Q,"asset_panel--forceHovered--GZMWo":X?.type==="save-media-select"&&X.data.assetId===ei||X?.type===`asset-image-type-${et}`||J})},i.createElement("div",{className:"asset_panel--assetPreview--nTOgs",style:ea.backgroundStyle},ea&&i.createElement(M.J,{className:"asset_panel--assetPreviewImage--kTyjo",src:ea.url})),i.createElement("div",{className:"asset_panel--assetDetails--xfCbP"},i.createElement("div",{className:"asset_panel--assetName--exM4m ellipsis--ellipsis--Tjyfa"},f?`${er} (${et})`:er),eg&&!Z?i.createElement("div",{className:"asset_panel--componentAssetType--oeu0C asset_panel--assetType--hIg9Q ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},i.createElement(b.B,{svg:z.A}),i.createElement("div",{className:"asset_panel--componentAssetTypeEllipsis--0gm6v ellipsis--ellipsis--Tjyfa"},(0,v.tx)("dev_handoff.assets.instance"))):i.createElement("div",{className:"asset_panel--assetType--hIg9Q ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},i.createElement(S.$R,{assetInfo:e,media:eT?h:[],dataTestId:"assetPanel",shouldShowTypeLabel:!0}))),i.createElement("div",{className:"asset_panel--buttons--QytN9"},eT&&i.createElement(i.Fragment,null,i.createElement(F.SV,{id:`asset-image-type-${et}`,property:es,formatter:F.A3,onChange:e_,dispatch:ec,disabled:n,dropdownShown:X,onMouseDown:j,dropdownWidth:150,dropdownAlignment:"right"},ew),i.createElement("div",{className:"asset_panel--exportIcon--aQQXS"},i.createElement(function(){let e=h.length>0&&null!==r;if(ee&&!e)return i.createElement("div",{className:"asset_panel--exportIconDeprecatedBg--YHE5a"},i.createElement(o.K,{variant:"secondary",onClick:eu,"aria-label":n?(0,v.t)("fullscreen.properties_panel.export_disabled"):(0,v.t)("fullscreen.export.export"),disabled:n,htmlAttributes:{"data-tooltip":n?(0,v.t)("fullscreen.properties_panel.export_disabled"):(0,v.t)("fullscreen.export.export"),"data-tooltip-type":D.Ib.TEXT},recordingKey:`export-${et}`},i.createElement(s.b,null)));let a=e?x.DK:x.K0;return i.createElement(a,{svg:W.A,onClick:eu,"data-tooltip-type":D.Ib.TEXT,"data-tooltip":n?(0,v.t)("fullscreen.properties_panel.export_disabled"):(0,v.t)("fullscreen.export.export"),disabled:n,className:"asset_panel--button--y-FhH",containerClassName:"asset_panel--iconButtonWithChevron--XVR2n",isBackgroundTransparent:!0,recordingKey:`export-${et}`})},null),X?.type==="save-media-select"&&i.createElement(i.Fragment,null,i.createElement("div",{className:"asset_panel--inputBlocker--YgNiW"}),i.createElement(y.ms,{className:"asset_panel--exportDropdown--Vh-cX"},h.map(e=>{let{name:n,extension:a}=eA(e.name);return i.createElement(y.gS,{onClick:e=>{e.stopPropagation(),ec(C.oB())},href:(0,k.ij)(r,e.hash),target:"_blank",key:e.hash,className:"asset_panel--exportOption--oLQE6","data-tooltip-type":D.Ib.TEXT,"data-dropdown-tooltip":e.name,recordingKey:"asset-export-source"},i.createElement("div",null,(0,v.t)("fullscreen.export.source")),i.createElement("div",{className:G},i.createElement(S.yP,{pxWidth:e.width,pxHeight:e.height,dataTestId:"assetPanel"}),i.createElement("div",{className:H},"\xb7"),i.createElement("div",{className:K,"data-content-start":n,"data-content-end":a?`.${a}`:void 0})))}),i.createElement(y.gS,{key:"export",className:"asset_panel--layerExportOption--bl77J",onClick:ed,recordingKey:"asset-export-layer"},i.createElement("div",null,(0,v.t)("fullscreen.export.layer_export")),i.createElement("div",{className:G},i.createElement(S.$R,{assetInfo:e,dataTestId:"assetPanel",hideDot:!0}),i.createElement("div",{className:H},"\xb7"),i.createElement("div",{className:K},F.A3.format(es)))))))),ev&&i.createElement(i.Fragment,null,i.createElement(U.uQ,{property:ey?"GIF":"MP4",formatter:q,isDisabled:!0}),i.createElement("a",{href:el??"",target:"_blank"},i.createElement(o.K,{"aria-label":(0,v.t)("fullscreen.export.export"),disabled:!el,htmlAttributes:{"data-tooltip":(0,v.t)("fullscreen.export.export"),"data-tooltip-type":D.Ib.TEXT}},i.createElement(s.b,null)))),eg&&!Z&&i.createElement(o.K,{variant:"secondary",onClick:em,"aria-label":eS?(0,v.t)("design_systems.instance_panel.view_library_in_community"):eI?(0,v.t)("dev_handoff.library.view"):(0,v.t)("design_systems.instance_panel.go_to_main_component"),htmlAttributes:{"data-tooltip":eS?(0,v.t)("design_systems.instance_panel.view_library_in_community"):eI?(0,v.t)("dev_handoff.library.view"):(0,v.t)("design_systems.instance_panel.go_to_main_component"),"data-tooltip-type":D.Ib.TEXT}},eS?i.createElement(l.c,null):eI?i.createElement(c.l,null):i.createElement(d.K,null)))))})},383186:(e,r,n)=>{n.d(r,{T1:()=>G,p5:()=>B});var i=n(848318),a=n(716544),o=n(897378),s=n(356877),l=n(261274),c=n(741419),d=n(157907),u=n(39773),p=n(536384),m=n.n(p),h=n(541525),_=n(701780),g=n(442313),f=n(915162),E=n(677965),y=n(848312),b=n(351855),v=n(800592),T=n(302029),I=n(185067),S=n(449737),w=n(326971),A=n(104720),C=n(51910),N=n(369600),L=n(997894),O=n(503024),R=n(985265),P=n(101217),D=n(163566),M=n(931423),k=n(954255),F=n(918547),x=n(820536),U=n(168080);let B=L.M4.Query({fetch:async e=>(await P.$W.getCodeSuggestions_DEPRECATED(e)).data.meta.results}),V=L.M4.Query({fetch:async e=>(await R.Q.getCodeConnectMapping(e)).data.meta});function G(e){let r=function(e,r){let n=Math.max(e.x,e.y);if(n>224){let r=224/n;return new _.Mi(e.x*r,e.y*r)}return e}(new _.Mi(e.size.x,e.size.y),0),n=!0;(0,d.k)().dt_ccv2_non_contents_only_thumbnail&&(n=!1);let i=(0,A._G)(r,e.guid,n,c.tvY.TRANSPARENT,!1,!0);return i&&i.pixels&&i.pixelSize&&i.displaySize&&(0,A.Pv)(i.pixels,i.pixelSize).split(";base64,").pop()||null}function H({children:e}){return i.createElement("div",{className:U.Vg},e)}function K({noPadding:e,connectedInfo:r}){return i.createElement(D.VZ,{titleAccessory:i.createElement($,null),noPadding:e,title:(0,g.t)("dev_handoff.codebase_suggestions.inspect_panel_connected_header_title"),recordingKey:"codebaseSuggestionPanel"},i.createElement(x.w,{item:r}))}function W(){let e=(0,w.dh)(),r=(0,w.nn)(),n=(0,a.Pj)();return i.useMemo(()=>{let i=n.getState();return{pageId:e,pageName:r,userId:i.user&&i.user.id}},[n,e,r])}function z({results:e,selectedNode:r}){let n=(0,h.hC)(),a=W();return i.useEffect(()=>{n("code_connect_v2.codebase_suggestions_rendered",{nodeId:r.guid,...a,location:"inspect_panel",renderedSuggestionsCount:e.length,renderedSuggestionsSetData:JSON.stringify(e.map(e=>({name:e.name,src_path:e.srcPath})))})},[]),null}function $(){return i.createElement("div",{className:U.E3},i.createElement(o.K,{htmlAttributes:{"data-tooltip-type":O.Ib.SPECIAL,"data-tooltip":k.N,"data-tooltip-show-immediately":!0,"data-tooltip-interactive":!0,"data-tooltip-show-below":!0,"data-tooltip-timeout-delay":50},"aria-label":(0,g.t)("dev_handoff.codebase_suggestions.info_tooltip_button")},i.createElement(l.B,null)))}function Y({noPadding:e,children:r}){return i.createElement(D.VZ,{titleAccessory:i.createElement($,null),noPadding:e,title:(0,g.t)("dev_handoff.codebase_suggestions.inspect_panel_disconnected_header_title"),recordingKey:"codebaseSuggestionPanel"},r)}function j({selectedNode:e,fileKey:r,noPadding:n}){let o=!!(0,d.k)().dt_ccv2_dd,l=(0,C.eY)(),c=(0,u.md)(N._S),p=(0,a.wA)(),m=(0,i.useRef)(null),{backingNodeId:_,backingLibraryKey:T,backingComponentKey:I}=(0,E.K)(e.guid,l,c),w=G(e)??"",[A]=(0,L.IT)(B({name:e.name,thumbnailB64:w,fileKey:r,nodeId:e.guid,metadata:{},componentKey:I,backingNodeId:_??void 0,backingLibraryKey:T??void 0}),{enabled:!!(0,d.k)().dt_ccv2&&!o});(0,f.pq)(e,A);let O=o?v.d:A,R=O?.status==="loaded",P=(0,b.s)({result:O?.data,status:O?.status}),D=(0,h.hC)(),k=W(),x=P.data.map(e=>({name:e.name,src_path:e.srcPath})),V=(r,n)=>{let{y:i}=n,a=0;m.current&&(a=m.current.getBoundingClientRect().left-P.width),D("code_connect_v2.codebase_suggestions_results_interaction",{nodeId:e.guid,...k,location:"inspect_panel",renderedSuggestionsCount:P.data.length,renderedSuggestionsSetData:JSON.stringify(x),suggestionData:JSON.stringify(x[r]),action:"click"}),P.setOpen(r,{x:a,y:i})},K=(0,i.useMemo)(()=>{let e=(0,d.k)().dt_ccv2_all_data_internal?P.data.length:3,r=P.index??0,n=r-r%e,i=P.data.slice(n,n+e);for(;i.length<e;)i.push({id:"",thumbnail:"",srcPath:"",name:"",type:"placeholder"});return i},[P.data,P.index]),$=r=>{D("code_connect_v2.codebase_suggestions_results_interaction",{nodeId:e.guid,...k,location:"inspect_panel",renderedSuggestionsCount:P.data.length,renderedSuggestionsSetData:JSON.stringify(x),suggestionData:JSON.stringify(x[r]),action:"hover"})},j=(r,n)=>{D("code_connect_v2.codebase_suggestion_reference_clicked",{nodeId:e.guid,...k,location:"inspect_panel",renderedSuggestionsCount:P.data.length,renderedSuggestionsSetData:JSON.stringify(x),suggestionData:JSON.stringify(x[r]),clickedReferenceUrl:n?n.url:void 0,clickedReferenceType:n?n.type:void 0,componentNameCopied:n?n.componentName:void 0})};if(0===P.data.length&&R)return i.createElement(Y,{noPadding:n},i.createElement(z,{selectedNode:e,results:K}),i.createElement("div",{className:U.Vg},i.createElement("span",{className:U.qf},(0,g.t)("dev_handoff.codebase_suggestions.codebase_suggestions_not_found_message"))));let q=()=>{P.setKeepWindowOpen(!1),p(S.Lo())};return i.createElement(Y,{noPadding:n},i.createElement(s.ds,null,i.createElement("div",{ref:m,className:U.kL},i.createElement(H,null,R&&i.createElement(z,{selectedNode:e,results:K}),R?K.map((e,r)=>"placeholder"===e.type?i.createElement(M.u_,{key:r}):i.createElement(M.jO,{onClick:V,onHover:$,key:e.id,item:e,index:r,isSelected:e.id===P.selectedItem?.id})):i.createElement(i.Fragment,null,i.createElement(M.AZ,null),i.createElement(M.AZ,null),i.createElement(M.AZ,null)))),R&&i.createElement(y.q_,{window:P,onPageThrough:r=>{D("code_connect_v2.codebase_suggestions_results_interaction",{nodeId:e.guid,...k,location:"inspect_panel",renderedSuggestionsCount:P.data.length,renderedSuggestionsSetData:JSON.stringify(x),suggestionData:JSON.stringify(x[r]),action:"page_through"})},onReferenceClicked:j,onZoomClicked:()=>{let{data:e,setKeepWindowOpen:r}=P;r(!0),p(S.to({type:F.dU,data:{data:e,onClose:q,onReferenceClicked:j},showModalsBeneath:!0}))}})))}i.memo(function({headerPanel:e}){let[r,n]=(0,i.useState)(!1),a=(0,I.VW)(),o=!!(0,d.k)().dt_ccv2&&(a?.type==="FRAME"||a?.type==="SYMBOL"||a?.type==="INSTANCE"||a?.type==="ROUNDED_RECTANGLE"&&a?.fills.some(e=>"IMAGE"===e.type)),s=(0,N.tS)(),l=function(e){let r=(0,u.md)(N._S),n=(0,I.VW)(),i=(0,N.tS)(),a=(0,C.eY)(),{backingComponentKey:o,backingLibraryKey:s}=(0,E.K)(n.guid,a,r),l=!!(0,d.k)().dt_ccv2&&!!n?.guid&&!!s&&!!i,[c]=(0,L.IT)(V({assetKey:o,backingLibraryKey:s,language:e,openFileKey:i}),{enabled:l});if("loaded"!==c.status)return;let p=c.data;return{id:p.mapping_id,thumbnail:p.thumbnail_url,name:p.name,srcPath:p.src_path,isConnected:"connected"===p.state}}("React");if(!o||!a||!s)return null;let c=l&&l.isConnected?i.createElement(K,{noPadding:e,connectedInfo:l}):i.createElement(j,{noPadding:e,selectedNode:a,fileKey:s});return i.createElement(i.Fragment,null,i.createElement(T.G,{open:r,onClose:()=>{n(!1)}}),i.createElement("div",{className:m()(e&&U.AG)},c))})},869410:(e,r,n)=>{n.d(r,{yT:()=>H,MW:()=>K});var i=n(848318),a=n(716544);n(992277),n(741419);var o=n(157907),s=n(39773);n(171659),n(579020),n(95650),n(379338),n(502255),n(453822),n(385150),n(166365);var l=n(816910),c=n(442313);n(895104),n(156912);var d=n(531074),u=n(464079);n(547449),n(185067),n(730169),n(397579),n(673481),n(278775),n(449737),n(405866),n(449977),n(974326),n(950738),n(51910),n(369600),n(661780);var p=n(792478);n(617767),n(997894),n(153059),n(931516);var m=n(503024);n(163566),n(106579),n(256429),n(302839),n(345908),n(419521);var h=n(41015);n(292292),h.H4.NONE,n(382326),n(5506);var _=n(776402),g=n(777611),f=n(731755),E=n(376025),y=n(356505),b=n(859989),v=n(541525),T=n(566699),I=n(85442),S=n(449502),w=n(464012),A=n(610227),C=n(974006),N=(e=>(e[e.REACT=0]="REACT",e[e.SWIFTUI=1]="SWIFTUI",e[e.COMPOSE=2]="COMPOSE",e[e.HTML=3]="HTML",e))(N||{});function L({language:e}){switch(e){case 0:return i.createElement(O,null);case 1:return i.createElement(R,null);case 2:return i.createElement(P,null);case 3:return i.createElement(D,null);default:return null}}function O(){let e=(0,a.wA)();return i.createElement("ol",{className:A.Gg,"aria-label":(0,c.t)("dev_handoff.code.lang_react")},i.createElement("li",{className:A.gY},i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"1")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.modal_install_package")),i.createElement("div",{className:A.G5},i.createElement("div",{className:A.jt},"npm install @figma/code-connect"),i.createElement("div",{className:A.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_install_command"),onClick:()=>e(I.lW({stringToCopy:"npm install @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"react-step1"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))),i.createElement("li",{className:A.gY},i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"2")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),i.createElement("div",{className:A.G5},i.createElement("div",{className:A.jt},"npx figma connect"),i.createElement("div",{className:A.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_connect_command"),onClick:()=>e(I.lW({stringToCopy:"npx figma connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"react-step2"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))),i.createElement("li",{className:A.gY},i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"3")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),i.createElement("div",{className:A.G5},i.createElement("div",{className:A.jt},"npx figma connect publish "),i.createElement("div",{className:A.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_publish_command"),onClick:()=>e(I.lW({stringToCopy:"npx figma connect publish"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"react-step3"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))))}function R(){let e=(0,a.wA)();return i.createElement("ol",{className:A.Gg,"aria-label":(0,c.t)("dev_handoff.code.lang_swiftui")},i.createElement("li",{className:A.gY}," ",i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"1")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.modal_install")),i.createElement("div",{className:A.G5},i.createElement("div",{className:A.jt},"npm install -g @figma/code-connect"),i.createElement("div",{className:A.fq},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_global_install_command"),onClick:()=>e(I.lW({stringToCopy:"npm install -g @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"swift-step1"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))),i.createElement("li",{className:A.gY}," ",i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"2")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.swift.add_snippet")),i.createElement("div",{className:A.G5},i.createElement("div",{className:A.as},'dependencies: [\n\u2003\u2003...,\n\u2003\u2003.package(url: "https://github.com/figma/code-connect", from: "1.0.0"),\n]'),i.createElement("div",{className:A.fq},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_swift_package_snippet"),onClick:()=>e(I.lW({stringToCopy:`dependencies: [
		...,
		.package(url:"https://github.com/figma/code-connect", from: "1.0.0"),
]`,ignoreLineBreaks:!1})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"swift-step2"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))),i.createElement("li",{className:A.gY}," ",i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"3")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),i.createElement("div",{className:A.G5},i.createElement("div",{className:A.jt},'figma connect create "<url_to_node>"'),i.createElement("div",{className:A.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_swift_connect_command"),onClick:()=>e(I.lW({stringToCopy:"figma connect create"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"swift-step3"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))),i.createElement("li",{className:A.gY}," ",i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"4")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),i.createElement("div",{className:A.G5},i.createElement("div",null,"figma connect publish "),i.createElement("div",{className:A.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_swift_publish_command"),onClick:()=>e(I.lW({stringToCopy:"figma connect publish"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"swift-step4"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))))}function P(){let e=(0,a.wA)();return i.createElement("ol",{className:A.Gg,"aria-label":(0,c.t)("dev_handoff.code.lang_compose")},i.createElement("li",{className:A.gY},i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"1")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.modal_install")),i.createElement("div",{className:A.G5},i.createElement("div",{className:A.jt},"npm install -g @figma/code-connect"),i.createElement("div",{className:A.fq},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_global_install_command"),onClick:()=>e(I.lW({stringToCopy:"npm install -g @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"compose-step1"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))),i.createElement("li",{className:A.gY},i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"2")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.compose.add_plugin_snippet")),i.createElement("div",{className:A.G5},i.createElement("div",{className:A.as},'plugins { \n\u2003\u2003...\n\u2003\u2003id("com.figma.code.connect") version "1.+"\n} \n\ndependencies { \n\u2003\u2003...\n\u2003\u2003implementation("com.figma.code.connect:plugin:1.+")\n}'),i.createElement("div",{className:A.fq},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_compose_plugin_snippet"),onClick:()=>e(I.lW({stringToCopy:`plugins {
		...
		id("com.figma.code.connect") version "1.+"
}

dependencies {
		...
		implementation("com.figma.code.connect:plugin:1.+")
}`,ignoreLineBreaks:!1})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"compose-step2"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))),i.createElement("li",{className:A.gY},i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"3")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),i.createElement("div",{className:A.G5},i.createElement("div",{className:A.jt},'figma connect create "<url_to_node>"'),i.createElement("div",{className:A.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_compose_connect_command"),onClick:()=>e(I.lW({stringToCopy:"figma connect create"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"compose-step3"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))),i.createElement("li",{className:A.gY},i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"4")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),i.createElement("div",{className:A.G5},i.createElement("div",null,"figma connect publish "),i.createElement("div",{className:A.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_compose_publish_command"),onClick:()=>e(I.lW({stringToCopy:"figma connect publish"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"compose-step4"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))))}function D(){let e=(0,a.wA)();return i.createElement("ol",{className:A.Gg,"aria-label":(0,c.t)("dev_handoff.code.lang_html")},i.createElement("li",{className:A.gY},i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"1")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.modal_install_package")),i.createElement("div",{className:A.G5},i.createElement("div",{className:A.jt},"npm install @figma/code-connect"),i.createElement("div",{className:A.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_html_install_command"),onClick:()=>e(I.lW({stringToCopy:"npm install @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"html-step1"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))),i.createElement("li",{className:A.gY},i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"2")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),i.createElement("div",{className:A.G5},i.createElement("div",{className:A.jt},"npx figma connect"),i.createElement("div",{className:A.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_html_connect_command"),onClick:()=>e(I.lW({stringToCopy:"npx figma connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"html-step2"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))),i.createElement("li",{className:A.gY},i.createElement("div",{className:A.YN},i.createElement("div",{className:A.v_},"3")),i.createElement("div",{className:A.M7},i.createElement("div",{className:A.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),i.createElement("div",{className:A.G5},i.createElement("div",{className:A.jt},"npx figma connect publish "),i.createElement("div",{className:A.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("dev_handoff.code_connect.modal_copy_html_publish_command"),onClick:()=>e(I.lW({stringToCopy:"npx figma connect publish"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":m.Ib.TEXT},source:"code connect",title:"html-step3"},i.createElement(T.U,{svg:C.A},i.createElement(b.X,null))))))))}(0,w.Ju)(function(e){let[r,n]=(0,i.useState)(0),s=(0,v.hC)(),d=(0,a.wA)(),u=_.hS({...e,onClose:()=>{s("code_connect.connect_to_codebase.popup_closed"),e.onClose()}});return i.createElement(g.bL,{htmlAttributes:{"data-testid":"upgrade_choose_plan_modal"},manager:u,width:800},i.createElement(f.Wk,null,i.createElement("div",{className:A.kL},i.createElement("div",{className:A.pz},i.createElement("h1",{className:A.tb},(0,c.tx)("dev_handoff.code_connect.title")),i.createElement("h2",{className:A.J$},(0,c.tx)("dev_handoff.code_connect.modal_text")),i.createElement(E.E,{className:0===r?A.xR:A.s6,onClick:()=>{s("code_connect.connect_to_codebase.language_selected",{language:"react"}),n(0)}},(0,c.t)("dev_handoff.code.lang_react")),i.createElement(E.E,{className:1===r?A.xR:A.s6,onClick:()=>{s("code_connect.connect_to_codebase.language_selected",{language:"swiftui"}),n(1)}},(0,c.t)("dev_handoff.code.lang_swiftui")),i.createElement(E.E,{className:2===r?A.xR:A.s6,onClick:()=>{s("code_connect.connect_to_codebase.language_selected",{language:"compose"}),n(2)}},(0,c.t)("dev_handoff.code.lang_compose")),(0,o.k)().dt_code_connect_modal_updates&&i.createElement(E.E,{className:3===r?A.xR:A.s6,onClick:()=>n(3)},i.createElement("div",{className:A.Sd},(0,c.t)("dev_handoff.code.lang_html"),i.createElement("span",{className:A.X4},(0,c.t)("dev_handoff.code.lang_html_examples")))),i.createElement("div",{className:A.jH}),i.createElement("span",{className:A.Iw},i.createElement(y.IK,{variant:"primary",onClick:()=>{s("code_connect.connect_to_codebase.view_docs_github_clicked"),d((0,S.RK)({rawInput:"https://github.com/figma/code-connect"}))},iconPrefix:i.createElement("div",{className:A.F9},i.createElement(l.f,null))},(0,c.tx)("dev_handoff.code_connect.modal_github_button")))),i.createElement("div",{className:A.Qs},i.createElement(L,{language:r})))))},"CodeConnectModal",w.ZU.YES);let M={Swift:"swift",TypeScript:"jsx"};function k({updatedAt:e}){let r=React.useMemo(()=>e?dayjs(e).fromNow():"",[e]);return React.createElement(BadgeDeprecated,{color:BadgeColor.DEFAULT,text:t("dev_handoff.figmadocs.connected"),icon:React.createElement(Icon16ApprovedCheckmark,null),className:styles.connectedBadge,dataTooltipType:TooltipType.TEXT,dataTooltip:t("dev_handoff.figmadocs.connected_last_published_at",{lastPublishedAt:r}),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50})}function F({notConnected:e}){let r=React.createElement(Link,{href:"https://www.figma.com/code-connect-docs/","aria-label":t("dev_handoff.figmadocs.learn_more"),trusted:!0,newTab:!0},tx("dev_handoff.figmadocs.learn_more"));return React.createElement("div",{className:styles.ccBadgeTooltip,"data-preferred-theme":"dark","data-editor-theme":"dev-handoff"},e?tx("dev_handoff.figmadocs.not_connected_tooltip",{learnMore:r}):tx("dev_handoff.figmadocs.connected_tooltip",{learnMore:r}))}let x={boxShadow:"var(--elevation-500)",borderRadius:"var(--radius-medium)",backgroundColor:"var(--color-bg-tooltip)","--color-bg":"var(--color-bg-tooltip)"},U={type:"dialog",openOnHover:!0,placement:"bottom-end",softDismiss:!0};function B(e){try{let{url:r}=e,n=new URL(r),i=n.pathname,a=i.split("/"),o="",s=-1;if(r.includes("github")||r.includes("gitlab")){let e=a.indexOf("blob");-1===e&&(e=a.indexOf("tree"));let r=a.slice(e+2).join("/");o=r.length>0?r:a[a.length-1]}else if(r.includes("bitbucket")){s=a.indexOf("src");let e=a.slice(s+2).join("/");o=e.length>0?e:a[a.length-1]}else r.includes("dev.azure")&&(o=n.searchParams.get("path")??i).startsWith("/")&&(o=o.slice(1));return React.createElement("span",{className:styles.linkFilePath},o)}catch(e){return null}}let V=e=>{let r=React.useMemo(()=>e?dayjs(e).fromNow():void 0,[e]);return r?t("dev_handoff.figmadocs.connected_last_published_at",{lastPublishedAt:r}):void 0};function G({source:e,updatedAt:r,hideFavIcon:n=!1}){let i=V(r);return React.createElement("div",{className:styles.fileLinkWrapper,"data-tooltip":i},React.createElement(Link,{href:e,newTab:!0},React.createElement("div",{className:styles.fileLink},!n&&React.createElement(LinkFavicon,{url:e}),React.createElement(B,{url:e}))))}function H(e){switch(e){case u.uz:case u.A0:return"React";case u.p:case u.Ap:return"SwiftUI";default:return}}let K=(0,s.eU)(!1);(0,p.Wh)(()=>(0,s.eU)(!1))},29847:(e,r,n)=>{n.d(r,{q:()=>function e(r,n){if(r.childrenNodes.length>0)for(let i of r.childrenNodes)"INSTANCE"===i.type&&(n.push(i),e(i,n));return n}}),n(848318),n(39773),n(171659),n(6819),n(695635),n(653959),n(156912),n(464079),n(967867),n(51910),n(369600),n(635547),n(382326),n(869410)},98880:(e,r,n)=>{n.d(r,{X:()=>w});var i=n(848318),a=n(897378),o=n(859989),s=n(741419),l=n(39773),c=n(536384),d=n.n(c),u=n(330821);n(921494);var p=n(442313),m=n(246972),h=n(773422),_=n(3418),g=n(487497),f=n(163566),E=n(302839),y=n(541910),b=n(318100),v=n(547449),T=n(474842),I=n(18906);let S={format:()=>(0,p.t)("inspect_panel.copy_as")};function w(e){let{basisContent:r="",changeContent:n=""}=e,a=i.useMemo(()=>(0,u.pR)(r,n).map(e=>{let r=e.added?I.Qs:e.removed?I.Tk:"";return i.createElement("span",{key:e.value,className:r},e.value)}),[r,n]);return i.createElement(A,{content:i.createElement(i.Fragment,null,a),contentToCopy:n,showVariable:!1})}function A({content:e,contentToCopy:r,showVariable:n=!0}){let c=(0,v.lv)(),u=c?I.Rd:I.O7,{value:w,eventHandlers:A,isHovered:C}=(0,f.ZQ)(u,u),[N,L]=i.useState(!1),O=i.useRef(null),{Dropdown:R,toggleDropdown:P,dropdownTargetRef:D,isDropdownShown:M}=(0,_.B)("CONTENT_COPY_DROPDOWN"),k=(0,y.oU)("TEXT_DATA",{type:s.Z_n.STRING,resolvedType:s.rXF.STRING,value:r}),F=k.variableDisplayName,x=!!F&&n,U=(0,g.uV)(k?.variable),B=(0,h.t8)(k?.variable?.node_id),V=(0,f.Cm)(r,"text_content"),G=(0,f.Cm)(c?U:F,"text_variable"),H=[{displayText:(0,p.t)("inspect_panel.copy_variable_name"),callback:G},{displayText:(0,p.t)("inspect_panel.copy_variable_content"),callback:V}],K=C||N,W=x&&!c?i.createElement(i.Fragment,null,i.createElement(E.uQ,{ref:D,containerClassName:d()(I.$1,I.zv),formatter:S,property:null,onClick:P}),i.createElement(R,{items:H,showPoint:!0})):i.createElement(i.Fragment,null,i.createElement(m.$Q,{matchingVars:k?.matchingVars,rowRef:O,isHovered:K,recordingKey:"content_panel"}),i.createElement("div",{className:c?I.cp:void 0},i.createElement(a.K,{htmlAttributes:A,onClick:V,"aria-label":(0,p.t)("inspect_panel.copy")},i.createElement(o.X,null)))),{collapsedInspectionPanelAtom:z,collapseEnabled:$}=(0,f.QZ)(c?"content":void 0),[Y]=(0,l.fp)(z),j=c?(0,p.t)("inspect_panel.property.content_text"):(0,p.t)("inspect_panel.property.content"),q=c&&"string"==typeof e;return i.createElement(f.VZ,{title:j,hideHeader:!0,noPadding:!0,recordingKey:"content"},i.createElement("div",{className:d()(c?I.op:I.Om,!Y&&I.iL),onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1),ref:O},i.createElement(f.SH,{title:j,isHovered:K||M,recordingKey:"contentHeader",additionalHeaders:W,isCollapsedAtom:z,collapseEnabled:$,collapsedHeaders:q?i.createElement(T.G,{text:e}):void 0}),i.createElement(f.ln,{isCollapsed:Y,childrenWrapperClassname:I.eR},x&&!c&&i.createElement("div",{className:I.Zn},i.createElement(b.wG,{text:F,disableHover:!0,dataTestId:"textVariableName",tooltip:r})),i.createElement("div",{className:d()(I.P_,w),dir:"auto","data-testid":"textContent"},e),x&&c&&i.createElement(f._p,{copyValue:null,variableId:k.variable?.node_id,className:I.tl},i.createElement(b.wG,{text:U??F,onClick:G,dataTestId:"textVariableName",thumbnailValue:B,fullWidth:!0,ui3Height:!0,endTruncate:!0})))))}},547449:(e,r,n)=>{n.d(r,{TM:()=>h,UP:()=>m,lv:()=>p});var i=n(848318),a=n(622876),o=n(157907),s=n(579463),l=n(935529),c=n(974326),d=n(60546);function u(){let{getConfig:e}=(0,s.I7)("exp_dt_insp_improvements"),r="ui3"===(0,a.DP)().version,n=(0,d.ks)(),u=(0,l._I)(),p=!(0,c.T)()&&r&&n&&u&&!(0,o.k)().dt_ccv2;return i.useMemo(()=>{if(!p)return{};let r=e();return{isInInspectionImprovements:r.get("small_improvements",!1),isInUnifyCode:r.get("unify_code",!1),isInUnifyColors:r.get("unify_colors",!1),inBucketForExperience:p}},[e,p])}function p(){let{isInInspectionImprovements:e,inBucketForExperience:r}=u();return!!e||!!r&&!!(0,o.k)().dt_insp_improvements}function m(){let{isInUnifyColors:e,inBucketForExperience:r}=u();return!!e||!!r&&!!(0,o.k)().dt_insp_unify_color}function h(){let{isInUnifyCode:e,inBucketForExperience:r}=u();return!!e||!!r&&!!(0,o.k)().dt_insp_unify_code}},27408:(e,r,n)=>{n.d(r,{xb:()=>b,Rk:()=>y,FO:()=>T,ev:()=>v});var i=n(848318),a=n(716544),o=n(39773),s=n(379338),l=n(816910),c=n(442313),d=n(176477),u=n(405866),p=n(60546),m=n(106579);function h(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},i.createElement("g",{clipPath:"url(#a)"},i.createElement("mask",{id:"b",width:16,height:16,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},i.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.346 15.89c.252.099.54.093.794-.03l3.294-1.585a1 1 0 0 0 .566-.901V2.626a1 1 0 0 0-.566-.901L12.14.14a.996.996 0 0 0-1.137.193L4.697 6.087 1.95 4.002a.666.666 0 0 0-.85.037l-.882.802a.667.667 0 0 0 0 .986L2.6 8 .217 10.173a.667.667 0 0 0 .001.986l.881.802a.666.666 0 0 0 .851.037l2.747-2.085 6.306 5.754c.1.1.217.175.343.224Zm.656-11.522L7.217 8l4.785 3.632V4.368Z",clipRule:"evenodd"})),i.createElement("g",{mask:"url(#b)"},i.createElement("path",{fill:"#0065A9",d:"M15.434 1.727 12.137.14A.997.997 0 0 0 11 .333L.208 10.173a.667.667 0 0 0 0 .986l.882.802a.667.667 0 0 0 .851.037L14.938 2.14A.662.662 0 0 1 16 2.667v-.039a1 1 0 0 0-.566-.9Z"}),i.createElement("g",{filter:"url(#c)"},i.createElement("path",{fill:"#007ACC",d:"m15.434 14.273-3.297 1.587A.996.996 0 0 1 11 15.667L.208 5.827a.667.667 0 0 1 0-.986l.882-.802a.667.667 0 0 1 .851-.037l12.997 9.859A.662.662 0 0 0 16 13.333v.039a1 1 0 0 1-.566.9Z"})),i.createElement("g",{filter:"url(#d)"},i.createElement("path",{fill:"#1F9CF0",d:"M12.137 15.86A.997.997 0 0 1 11 15.667a.586.586 0 0 0 1-.415V.747a.586.586 0 0 0-1-.414c.3-.3.755-.377 1.137-.193l3.296 1.585a1 1 0 0 1 .567.901v10.748a1 1 0 0 1-.567.901l-3.296 1.585Z"})),i.createElement("path",{fill:"url(#e)",fillRule:"evenodd",d:"M11.336 15.89c.252.099.54.093.794-.03l3.294-1.585a1 1 0 0 0 .566-.901V2.626a1 1 0 0 0-.566-.901L12.13.14a.996.996 0 0 0-1.137.193L4.687 6.087 1.94 4a.666.666 0 0 0-.85.038l-.882.802a.667.667 0 0 0 0 .986L2.59 8 .208 10.173a.667.667 0 0 0 0 .986l.881.802a.666.666 0 0 0 .851.037l2.747-2.085 6.306 5.754c.1.1.217.175.343.224Zm.657-11.522L7.208 8l4.785 3.632V4.368Z",clipRule:"evenodd",opacity:.25,style:{mixBlendMode:"overlay"}}))),i.createElement("defs",null,i.createElement("filter",{id:"c",width:32.676,height:28.759,x:-8.343,y:-4.467,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:4.167}),i.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_0_3"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_0_3",result:"shape"})),i.createElement("filter",{id:"d",width:21.667,height:32.584,x:2.667,y:-8.292,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:4.167}),i.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_0_3"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_0_3",result:"shape"})),i.createElement("linearGradient",{id:"e",x1:7.99,x2:7.99,y1:.041,y2:15.959,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#fff"}),i.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),i.createElement("clipPath",{id:"a"},i.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"}))))}let _="hint_panels--hintPanel--MUqNV",g="hint_panels--icon--EMIdH",f=(0,s.ck)("aae0db2814117595e45cc509d52e79e7cc31333c"),E=(0,s.ck)("ae3807b6d650b52da20879078b85a0df23ee056a"),y="dev_handoff_dismissed_vscode_extension_hint",b="dev_handoff_dismissed_inspect_panel_plugins_hint";function v(){return(0,p.LS)()?null:i.createElement(m.u,{className:_,idForTests:"hintVSCodeForFigma",userFlag:y,title:(0,c.t)("dev_handoff.vscode.hint.title"),iconComponent:i.createElement("div",{className:"hint_panels--iconContainer--R8QBk"},i.createElement(h,null)),hintText:(0,c.t)("dev_handoff.vscode.hint"),hintLinkText:(0,c.t)("dev_handoff.vscode.hint.link"),hintLinkUrl:"https://marketplace.visualstudio.com/items?itemName=figma.figma-vscode-extension",hintLinkOnNewLine:!0})}function T(){let e=(0,p.LS)(),[r,n]=(0,o.fp)(d.H),s=(0,a.wA)(),h=i.useCallback(()=>{n(d._.PLUGIN),s(u.b({[b]:!0}))},[n,s]);return e?i.createElement(m.u,{className:_,idForTests:"hintInspectPlugins",userFlag:b,title:(0,c.t)("dev_handoff.inspect_panel.plugins_hint.title"),hintText:i.createElement(i.Fragment,null,i.createElement("div",{className:"hint_panels--iconRow--SXq7J"},i.createElement("img",{alt:"",className:g,src:f}),i.createElement("div",{className:g},i.createElement(l.f,null)),i.createElement("img",{alt:"",className:g,src:E})),(0,c.tx)("dev_handoff.inspect_panel.plugins_hint")),hintLinkText:(0,c.t)("dev_handoff.inspect_panel.plugins_hint.link"),hintLinkOnClick:h,hintLinkOnNewLine:!0}):null}},649220:(e,r,n)=>{n.d(r,{O:()=>c});var i=n(848318),a=n(741419),o=n(341927),s=n(789269);let l={};function c({assetId:e,thumbnailVersion:r,width:n,height:c,scale:d}){let u=function({assetId:e,width:r,height:n,scale:i}){return`${e}-${r}x${n}@${i}x`}({assetId:e,width:n,height:c,scale:d}),[p,m]=i.useState(l[u]?.url),h=(0,o.c6)(e);return(i.useEffect(()=>{let i=async()=>{await (0,s.Jr)().loadAllImagesUnder([e],a.MoD.NON_ANIMATED_ONLY,"handoff.assetPreview");let[i,o]=a.Vzr.generateThumbnailForNode(e,n,c,d,{forceContentsOnly:!0});if(o.length>0){let e=l?.[u]?.url;e&&URL.revokeObjectURL(e);let n=URL.createObjectURL(new Blob([o]));l[u]={url:n,version:r,error:null},m(n)}},o=!!l?.[u],p=o&&l[u].version!==r,h=o&&!!l[u].error;o&&(!p||h)||i().catch(e=>{l[u]={error:e},console.error(e)})},[e,c,d,n,u,r]),p)?{url:p,backgroundStyle:h}:{backgroundStyle:h}}},30598:(e,r,n)=>{n.d(r,{$R:()=>g,aT:()=>E,yP:()=>_});var i=n(848318),a=n(716544),o=n(741419),s=n(442313);n(361214);var l=n(203839),c=n(207694),d=n(51910),u=n(369600),p=n(483372),m=n(803243),h=n(185067);function _({pxWidth:e,pxHeight:r,dataTestId:n}){let{unit:a}=(0,l.gc)(),s=a===o.tKW.SCALED,c=e=>(e??0).toLocaleString("en",{maximumFractionDigits:2}),d=c(e),u=c(r),p=i.createElement("span",{"data-testid":`${n}Width`},d),m=i.createElement("span",{"data-testid":`${n}Height`},u);return i.createElement(i.Fragment,null,p,"\u2009x\u2009",m,i.createElement("span",{"data-testid":`${n}Unit`},s?" (px)":""))}function g({assetInfo:e,media:r,dataTestId:n,shouldShowTypeLabel:a,hideDot:o}){let s=(0,h.mJ)(e.instancesGUIDs?.[0]??e.assetId),l=s?.size?.x??0,c=s?.size?.y??0;if(r&&r.length>0){let e=r[0];l=e.width,c=e.height}return i.createElement(f,{assetType:e.type,pxWidth:l,pxHeight:c,dataTestId:n,hideDot:o,shouldShowTypeLabel:a})}function f({assetType:e,pxWidth:r,pxHeight:n,dataTestId:a,hideDot:o,shouldShowTypeLabel:l}){let c=e&p.PW.ASSET_VIDEO?(0,s.t)("dev_handoff.assets.video"):e&p.PW.ASSET_GIF?(0,s.t)("dev_handoff.assets.gif"):e&p.PW.ASSET_IMAGE?(0,s.t)("dev_handoff.assets.image"):e&p.PW.ASSET_ICON?(0,s.t)("dev_handoff.assets.icon"):e&p.PW.ASSET_COMPONENT?(0,s.t)("dev_handoff.assets.instance"):void 0;return i.createElement("span",null,l&&c,!o&&i.createElement(i.Fragment,null,"\xa0","\xb7 "),i.createElement(_,{pxWidth:r,pxHeight:n,dataTestId:a}))}function E(e){let r=(0,a.d4)(u.sS),n=(0,d.eY)(),[o,s]=i.useState(null);if(o)return o;if(!(e.type&(p.PW.ASSET_GIF|p.PW.ASSET_VIDEO)))return null;let l=n.get(e.assetId);if(!l)return null;let h=c.N9(l?.fills)?.filter(e=>e.opacity>0&&e.visible);if(!h)return null;for(let e of h)if(e.animatedImage||e.video){if(!r)return null;(0,m.tW)({paint:e,fileKey:r}).then(e=>{s(e)});break}return o}},341927:(e,r,n)=>{n.d(r,{c6:()=>g});var i=n(848318),a=n(716544),o=n(741419),s=n(579020),l=n(702),c=n(543072),d=n(744149),u=n(870769),p=n(778727),m=n(747314),h=n(931516),_=n(487497);function g(e){let r=function(e,r){let n=function(e){let r=(0,_.jY)(),n=(0,a.d4)(p.FZ),i=(0,a.d4)(m.c5);return(0,u.NY)(e,r,n,i)}(e),g=(0,d.DP)(),f=n?.containing_frame?.backgroundColor??"";return n?.type===h.PW.STATE_GROUP&&n.fill_color&&(f=n.fill_color),i.useCallback(()=>{let r=g&&("light"===g||"dark"===g)?g:"dark";if(!e)return f&&!(0,c.ty)(f)?(0,c.HD)(f)?"dark":"light":r;l.sn.start("dev_mode_calculate_component_color");let n=o.w3z.getApproximateNodeColor(e),i=l.sn.stop("dev_mode_calculate_component_color");return i&&(0,s.sx)("dev_mode_calculate_component_color",{elapsedMs:i},{forwardToDatadog:!0}),(0,c.HD)(n)?"light":"dark"},[f,e,void 0,g])}(e);return"dark"===(0,i.useMemo)(r,[r])?f:E}let f={background:"#383838"},E={background:"#f5f5f5"}},537116:(e,r,n)=>{n.d(r,{Bv:()=>_,wS:()=>h,x9:()=>g});var i=n(848318);n(716544),n(781131);var a=n(741419);n(897392);var o=n(179703);n(653959),n(442313);var s=n(574146);n(718451);var l=n(51910);n(369600);var c=n(997894),d=n(175334),u=n(353304);n(152301);var p=n(478622);n(976035),n(461758),n(139476),n(185067),c.M4.Query({fetch:async({componentKey:e})=>{try{let r=await d.Z.getLibraryComponentV2Destination({componentKey:e});if(!r||!r.data||!r.data.meta)return null;return{nodeId:r.data.meta.node_id,fileKey:r.data.meta.file_key,component:r.data.meta.component,componentSet:r.data.meta.component_set}}catch(e){return null}},enabled:e=>e.enabled}),c.M4.Query({fetch:async({statusResult:e})=>{if(!e||!e.componentKey||!e.canvasUrl)return{};let r=e.isVariant?e.dataStateGroupId:e.dataComponentId,n=e.dataStateGroupId??null,i=e.dataStorageKey,o=await s.Eo.getCanvas({canvas_url:e.canvasUrl});if(!o)return{};let l=a.glU.loadDetachedComponent(r??"",i,o,n);return l?{result:{...e,dataLocation:"temp-scene",dataComponentId:l}}:{}},enabled:e=>e.enabled});let m=i.createContext({status:"loading"});function h(){return i.useContext(m)||{status:"errors"}}function _(e,r){let n=h();return function(e,r){if("loaded"===r.status){let n="temp-scene"===r.result.dataLocation,i=r.result.dataComponentId??"",a=n?r.result.dataStateGroupId:(0,u.Yi)([i],e)??(0,p.nM)(e,[i]),o=n?g(i):e.get(i);return r.result.isVariant&&a?{backingSymbol:o,backingStateGroup:n?g(a):e.get(a)}:{backingSymbol:o,backingStateGroup:null}}}((0,l.eY)(),n)||{backingSymbol:e,backingStateGroup:r}}function g(e){return new o.qo(a.juq.DETACHED_COMPONENTS).get(e)}},203441:(e,r,n)=>{n.d(r,{$G:()=>_,Cs:()=>g,I9:()=>f,Ud:()=>E,oz:()=>m}),n(848318);var i=n(716544),a=n(425642),o=n(741419);n(77708);var s=n(442313),l=n(718451);n(207694),n(369600);var c=n(153059),d=n(46171);function u(e){return(0,l.gl)(e)?0:e??0}function p(e){return"NONE"!==e&&"GRID"!==e}function m(e,r){return p(e)||!!r&&p(r.stackMode)}function h(e,r,n){return p(e.stackMode)?e[r]:e.inferredAutoLayoutResult?.[n]}function _(e){let r;let n=(0,i.d4)(e=>e.mirror.selectionProperties),a=(0,i.d4)(c.AF);if(e)return{distance:{top:{distance:0,type:"distance"},bottom:{distance:0,type:"distance"},left:{distance:0,type:"distance"},right:{distance:0,type:"distance"}},border:{top:0,bottom:0,left:0,right:0},radius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},padding:{top:0,bottom:0,left:0,right:0},width:0,height:0};let o=a?.parentNode||null,s=function(e){let r=e?.borderStrokeWeightsIndependent;if((0,l.hS)(r)&&r){let{borderTopVisible:r,borderBottomVisible:n,borderLeftVisible:i,borderRightVisible:a,borderTopWeight:o,borderBottomWeight:s,borderLeftWeight:l,borderRightWeight:c}=e;return{top:r?u(o):0,bottom:n?u(s):0,left:i?u(l):0,right:a?u(c):0}}let n=e?.strokePaints;if((0,l.hS)(n)&&Array.isArray(n)&&n.length>0){let r=(n?.filter(e=>e?.visible&&(e?.opacity??0>0))||[]).length>0?u(e?.strokeWeight):0;return{top:r,bottom:r,left:r,right:r}}return{top:0,bottom:0,left:0,right:0}}(n),p=(0,d.AF)(n),_={topLeft:u(p.topLeft),topRight:u(p.topRight),bottomRight:u(p.bottomRight),bottomLeft:u(p.bottomLeft)},g=m(n.stackMode,n.inferredAutoLayoutResult);r=g?{top:u(h(n,"stackVerticalPadding","stackPaddingTop")),bottom:u(h(n,"stackPaddingBottom","stackPaddingBottom")),left:u(h(n,"stackHorizontalPadding","stackPaddingLeft")),right:u(h(n,"stackPaddingRight","stackPaddingRight"))}:{top:0,bottom:0,left:0,right:0};let f=g&&n.bordersTakeSpace?{top:r.top+s.top,bottom:r.bottom+s.bottom,left:r.left+s.left,right:r.right+s.right}:{...r},E=u(n.width)-f.left-f.right,y=u(n.height)-f.top-f.bottom;return{distance:o&&("HORIZONTAL"===o.stackMode||"VERTICAL"===o.stackMode)&&a?.stackPositioning!=="ABSOLUTE"?function(e,r){if(!e||!r||"NONE"===r.stackMode||"GRID"===r.stackMode)return{};let n=r.childrenNodes.filter(e=>e?.stackPositioning!=="ABSOLUTE").map(e=>e?.guid),i=n.indexOf(e.guid),a=0===i,o=i===n.length-1;return"HORIZONTAL"===r.stackMode?{top:{distance:r.stackTopPadding,type:"padding"},bottom:{distance:r.stackBottomPadding,type:"padding"},left:a?{distance:r.stackLeftPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},right:o?{distance:r.stackRightPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"}}:{top:a?{distance:r.stackTopPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},bottom:o?{distance:r.stackBottomPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},left:{distance:r.stackLeftPadding,type:"padding"},right:{distance:r.stackRightPadding,type:"padding"}}}(a,o):function(e,r){if(!e||!r||"CANVAS"===r.type||"DOCUMENT"===r.type||"SECTION"===r.type)return{};let n=r.absoluteBoundingBox.w,i=r.absoluteBoundingBox.h,a=r.absoluteBoundingBox.y,o=r.absoluteBoundingBox.x,s=e.absoluteBoundingBox.w,l=e.absoluteBoundingBox.h,c=e.absoluteBoundingBox.y,d=e.absoluteBoundingBox.x;return{top:{distance:c-a,type:"distance"},bottom:{distance:a+i-(l+c),type:"distance"},left:{distance:d-o,type:"distance"},right:{distance:n+o-(d+s),type:"distance"}}}(a,o),border:s,radius:_,padding:r,width:E,height:y}}let g=(e="NONE")=>"HORIZONTAL"===e||"VERTICAL"===e;function f(e=0,r,n){if(!n||(0,l.gl)(r))return e;let i={[o.mKm.FILL_CONTAINER]:(0,s.t)("inspect_panel.properties.fill"),[o.mKm.HUG_CONTENT]:(0,s.t)("inspect_panel.properties.hug"),[o.mKm.FIXED]:(0,s.t)("inspect_panel.properties.fixed")}[r||o.mKm.FIXED],a="string"==typeof e?e:(e||0).toLocaleString("en",{maximumFractionDigits:2})+"px";return`${i} (${a})`}function E(...e){let[r=0,n=0,i=0,o=0]=e;return(0,a.Ef)(e)?0!==r?[r]:void 0:[r,n,i,o]}},955529:(e,r,n)=>{n.d(r,{Fj:()=>l});var i=n(848318),a=n(716544);n(39773),n(921494),n(77441),n(919414),n(464079),n(547449),n(185067),n(717587),n(870769);var o=n(778727),s=n(937254);function l(e=""){let r=(0,a.d4)(o.cM),n=(0,a.d4)(s.wi),c=i.useMemo(()=>Object.values(r).find(r=>r.key===e),[r,e]),d=i.useMemo(()=>Object.values(n).find(r=>r.key===e),[n,e]);return c??d}n(931516),n(60546),n(487497),n(509195),n(541910)},413335:(e,r,n)=>{n.d(r,{M4:()=>d,lA:()=>c});var i=n(716544);n(741419),n(547449),n(119699),n(51910);var a=n(153059),o=n(487497),s=n(537116),l=n(185067);function c(){let e=(0,o.jY)(),r=(0,s.wS)(),n=(0,i.d4)(e=>e.mirror.selectionProperties.symbolGUIDsBackingSelectionContainer),a=(0,i.d4)(e=>e.mirror.selectionProperties.numSelected);if("loaded"===r.status&&r.result.dataComponentId)return"temp-scene"===r.result.dataLocation&&r.result.componentKey?(0,s.x9)(r.result.dataComponentId):(0,l.Zl)(e,r.result.dataComponentId);if(1!==a||!n)return null;let c=Object.keys(n)[0];return(0,l.Zl)(e,c)}function d(){let e=(0,o.jY)(),r=(0,s.wS)();return function e(r,n,i){let a=(0,l.Zl)(r,n);return a?"SYMBOL"===a.type||"INSTANCE"===a.type||a.isStateGroup||a.detachedInfo?a:a.parentGuid?e(r,a.parentGuid):null:null}(e,(0,i.d4)(a.vD),r)}},466191:(e,r,n)=>{n.d(r,{V0:()=>L,_y:()=>D,ls:()=>O,vV:()=>M});var i=n(848318),a=n(891627),o=n(716544),s=n(764932),l=n(209045),c=n(596616),d=n(258904),u=n(622876),p=n(157907),m=n(731545),h=n(442313),_=n(464079);n(587);var g=n(935529),f=n(547449),E=n(989068),y=n(670804),b=n(790355),v=n(950738),T=n(87089),I=n(677251),S=n(503024),w=n(836301),A=n(161922),C=n(302839),N=n(79137);function L({codeLanguage:e,onChange:r,shouldHideLanguagesWithNoAltUnitSupport:n,onlyShowFirstPartyLanguages:i,showAddInsteadOfBrowse:a,addCodegenPluginCallback:s,currentSavedCodeLanguage:l,skipBrowsePlugins:c}){let d=(0,_.AC)(e),u=(0,_.Pt)(d),p=(0,T.sZ)(),m=(0,o.d4)(e=>e.whitelistedPlugins),h=(0,I.ow)(d,m,p)?e:{type:"first-party",id:"WEB"},g=(0,E.Z)({codeLanguage:h,onChange:r,shouldHideLanguagesWithNoAltUnitSupport:n,onlyShowFirstPartyLanguages:i,formatter:u,showAddInsteadOfBrowse:a,addCodegenPluginCallback:s,currentSavedCodeLanguage:l,skipBrowsePlugins:c});return{codeLanguage:h,onCodeLanguageChange:r,codeLanguageOptions:g,activeCodegenPlugin:d,formatter:u}}function O({dropdownId:e,disabled:r,codeLanguageApi:n,onDropdownHidden:a,parentElementId:o}){let{codeLanguage:s,activeCodegenPlugin:l,formatter:c,codeLanguageOptions:d}=n,u=l&&"first-party"!==s.type?i.createElement(w.d,{plugin:l}):null;return i.createElement(D,{dropdownId:e,onDropdownHidden:a,disabled:r,parentElementId:o,value:s,formatter:c,items:d,icon:u,activatePathOnMount:"local-plugin"!==s.type?[c.format(s)]:d[0]?[d[0].displayText]:void 0})}function R(){let{version:e}=(0,u.DP)();return"ui2"===e?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:N.aC,"aria-hidden":!0},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2069 5.20724L7.70688 10.7072L6.99977 11.4144L6.29266 10.7072L3.29266 7.70724L4.70688 6.29303L6.99977 8.58592L11.7927 3.79303L13.2069 5.20724Z",fill:"var(--color-icon"})):i.createElement(d.l,{className:N.aC,"aria-hidden":!0})}let P=(e,r)=>e.separator?i.createElement(s.wv,{key:`${r}_seperator`}):e.header?i.createElement(s.hE,null,e.displayText):e.children?i.createElement(s.g8,{key:r},i.createElement(s.ZP,{hasChecked:e.isChildChecked||e.isChecked||!1},e.icon&&i.createElement(s.Q$,null,e.icon),e.displayText),i.createElement(s.MJ,null,e.children.map(e=>P(e,`${r}-${e.name}`)))):void 0===e.isChecked?i.createElement(s.q7,{key:r,onClick:e.callback},e.icon&&i.createElement(s.Q$,null,e.icon),e.displayText):i.createElement(l.q7,{key:r,"aria-checked":e.isChecked,className:N.mL,onClick:e.callback},i.createElement("span",{className:N.ZU},i.createElement(R,null),e.icon&&i.createElement(s.Q$,null,e.icon),e.displayText));function D({dropdownId:e,disabled:r,onDropdownHidden:n,parentElementId:l,formatter:d,value:u,items:_,icon:E,activatePathOnMount:T}){let I=(0,p.k)().fpl_code_menu,w=(0,g._I)(),L=(0,f.lv)(),{manager:O,getTriggerProps:R}=s.b(),D=i.useId(),M=(0,o.wA)();i.useEffect(()=>M(y.aq()),[M]);let k=(0,v.Um)(),F=i.useRef(null),x=k?.type===e;return I?i.createElement(s.bL,{manager:O},i.createElement(c.h,{htmlFor:e},(0,h.t)("dev_handoff.code.language")),i.createElement(m.e,{lead:E,...R({id:D})},T?.[0]??(0,h.t)("dev_handoff.code.language")),i.createElement(s.mc,null,_.map(e=>P(e,e.name)))):i.createElement("div",{className:N.aD,"data-tooltip":(0,h.t)("dev_handoff.code.language"),"data-tooltip-type":S.Ib.TEXT,"data-tooltip-show-above":!0},i.createElement("div",{className:L?N.SD:N.lj},i.createElement(C.uQ,{formatter:d,property:u,icon:E,onClick:()=>{x?M(b.oB()):w&&M(b.j7({type:e}))},inputClassName:N.UD,ref:F,dataTestId:"code_language_dropdown",isDisabled:r})),x&&!r&&F.current&&(0,a.createPortal)(i.createElement("div",{className:N.aD},i.createElement(A.j,{activatePathOnMount:T,alwaysShowCheckMarkOffset:!0,dispatch:M,items:_,lean:"right",leanPadding:8,onDropdownHidden:n,onSelectItem:e=>{e.callback&&e.callback("",null,M)},parentRect:F.current.getBoundingClientRect(),showPoint:!1})),document.getElementById(l||"dev-handoff-inspect-panel")))}function M({dropdownId:e,disabled:r,onDropdownHidden:n,parentElementId:l,formatter:d,value:u,items:_,activatePathOnMount:f}){let E=(0,p.k)().fpl_code_menu,T=(0,g._I)(),{manager:I,getTriggerProps:w}=s.b(),L=i.useId(),O=(0,o.wA)();i.useEffect(()=>O(y.aq()),[O]);let R=(0,v.Um)(),D=i.useRef(null);if(E)return i.createElement(s.bL,{manager:I},i.createElement(c.h,{htmlFor:e},(0,h.t)("dev_handoff.code.options")),i.createElement(m.e,{...w({id:L})},f?.[0]??(0,h.t)("dev_handoff.code.options")),i.createElement(s.mc,null,_.map(e=>P(e,e.name))));let M=R?.type===e;return i.createElement("div",{className:N.aD,"data-tooltip":(0,h.t)("dev_handoff.code.options"),"data-tooltip-type":S.Ib.TEXT,"data-tooltip-show-above":!0},i.createElement("div",{className:N.SD},i.createElement(C.uQ,{formatter:d,property:u,onClick:()=>{M?O(b.oB()):T&&O(b.j7({type:e}))},inputClassName:N.UD,ref:D,dataTestId:"list_preferences_dropdown",isDisabled:r})),M&&!r&&D.current&&(0,a.createPortal)(i.createElement("div",{className:N.aD},i.createElement(A.j,{activatePathOnMount:f,alwaysShowCheckMarkOffset:!0,dispatch:O,items:_,lean:"right",leanPadding:8,onDropdownHidden:n,onSelectItem:e=>{e.callback&&e.callback("",null,O)},parentRect:D.current.getBoundingClientRect(),showPoint:!1})),document.getElementById(l||"dev-handoff-inspect-panel")))}},138001:(e,r,n)=>{n.d(r,{n2:()=>G});var i=n(848318),a=n(891627),o=n(716544),s=n(475020),l=n(707005),c=n(853224),d=n(622876),u=n(741419),p=n(157907),m=n(39773),h=n(536384),_=n.n(h),g=n(303035),f=n(654104),E=n(442313),y=n(524327),b=n(935529),v=n(547449),T=n(466191),I=n(771313),S=n(203839),w=n(311967),A=n(790355),C=n(136031),N=n(727341),L=n(339599),O=n(950738),R=n(841747),P=n(503024),D=n(836301),M=n(161922),k=n(163566),F=n(302839);n(717587);var x=n(132015);let U="DEV_HANDOFF_LANGUAGE_DROPDOWN",B="DEV_HANDOFF_PREFERENCES_DROPDOWN";function V({parentElementId:e,dropdownPrefix:r,preferenceOptions:n,preferences:l,supportsAlternativeUnits:d}){let p=(0,b._I)(),m=(0,o.wA)(),h=(0,O.Um)(),_=i.useRef(null),g=r?`${r}_DEV_HANDOFF_PREFERENCES_DROPDOWN`:B,f=h?.type===g;return i.createElement(i.Fragment,null,i.createElement("div",{ref:_},i.createElement(s.d,{onClick:()=>{f?m(A.oB()):p&&m(A.j7({type:g}))},"aria-label":(0,E.t)("dev_handoff.inspect_settings"),"aria-expanded":f,disabled:!n||n?.length===0,recordingKey:"preferencesDropdownButton",htmlAttributes:{"data-tooltip":(0,E.t)("dev_handoff.inspect_settings"),"data-tooltip-type":P.Ib.TEXT,"data-tooltip-show-above":!0}},i.createElement(c.A,null))),f&&n&&l&&_.current&&(0,a.createPortal)(i.createElement(M.j,{items:n,onSelectItem:e=>{e.callback&&e.callback("",null,m)},recordingKey:"preferencesDropdown",dispatch:m,parentRect:_.current.getBoundingClientRect(),showPoint:!1,alwaysShowCheckMarkOffset:!0,activatePathOnMount:d?l.unit===u.tKW.PIXEL?n[1]?[n[1].displayText]:void 0:n[2]?[n[2].displayText]:void 0:void 0}),document.getElementById(e||"dev-handoff-inspect-panel")))}function G({dropdownPrefix:e,inspectionModeLayout:r="drop-down",preferencesApi:n,parentElementId:a,hidePreferencesForList:s}){let l=(0,o.wA)(),c=(0,b._I)(),u=(0,v.lv)(),{inspectionMode:p,setInspectionMode:m,inspectionModes:h}=n,f=(0,O.Um)(),E=i.useMemo(()=>h.map(e=>i.createElement(F.c$,{key:e,value:e,recordingKey:e})),[h]),y="ui3"===(0,d.DP)().version,T=L.z4.getIsExtension(),S=u?I.Ov:I.a9;return i.createElement(k.VZ,{hideHeader:!0,noPadding:!0,noBorder:!0,recordingKey:"preferences"},i.createElement("div",{className:x.NR},!T&&("drop-down"===r?i.createElement(F.l6,{className:x.VM,dispatch:l,dropdownShown:f,dropdownWidth:y?"120px":"auto",formatter:I.a9,id:`${e}_dev_handoff_inspection_mode`,onChange:m,onShowDropdownOverride:c?void 0:g.lQ,property:p,recordingKey:"dev_handoff_inspection_mode"},E):i.createElement(Y,{onTabClick:m,selectedTabKey:p,tabs:h.map(e=>({key:e,label:S.format(e),Icon:S.icon(e)})),recordingKey:"preferences-tabs"})),i.createElement("div",{className:_()(x.d2,u&&x.HN)},n.codeLanguageApi&&i.createElement(u?K:H,{dropdownPrefix:e,preferencesApi:{...n,codeLanguageApi:n.codeLanguageApi},parentElementId:a,hidePreferencesForList:s}))))}function H({dropdownPrefix:e,preferencesApi:r,parentElementId:n}){let{preferenceOptions:a,preferences:o,supportsAlternativeUnits:s,inspectionMode:l}=r,c=L.z4.getIsExtension()||"code"===l,d=e?`${e}_DEV_HANDOFF_LANGUAGE_DROPDOWN`:U;return i.createElement(i.Fragment,null,c&&i.createElement(T.ls,{dropdownId:d,codeLanguageApi:r.codeLanguageApi,parentElementId:n}),i.createElement(V,{parentElementId:n,dropdownPrefix:e,preferenceOptions:c?a:void 0,preferences:c?o:void 0,supportsAlternativeUnits:s}))}function K({dropdownPrefix:e,preferencesApi:r,parentElementId:n,hidePreferencesForList:a}){let o=(0,R.AF)(),{preferenceOptions:s,inspectionMode:l,codeLanguageApi:c,skipHeadersInNewInspectPanelExperience:d}=r;return s&&c&&o?"properties"===l?!(0,p.k)().dt_insp_impr_fast_follows||a?null:i.createElement($,{preferenceOptions:s,codeLanguageApi:c,dropdownPrefix:e,parentElementId:n}):i.createElement(W,{preferenceOptions:s,codeLanguageApi:c,dropdownPrefix:e,parentElementId:n,skipPreferencesHeaders:d}):null}function W({preferenceOptions:e,codeLanguageApi:r,dropdownPrefix:n,parentElementId:a,skipPreferencesHeaders:o}){let s=n?`${n}_DEV_HANDOFF_LANGUAGE_DROPDOWN`:U,{activeCodegenPlugin:l,codeLanguage:c,codeLanguageOptions:d,formatter:u}=r,p=l&&"first-party"!==c.type?i.createElement(D.d,{plugin:l}):null,m=u.format(c),h="local-plugin"!==c.type?[m]:[d[0].displayText],_=i.useMemo(()=>{let r=o?void 0:{displayText:(0,E.t)("dev_handoff.language_dropdown.preferences_header",{languageOrPlugin:m}),header:!0};return[...d,{separator:!0,displayText:""},...r?[r]:[],...e]},[d,e,m,o]);return i.createElement(T._y,{dropdownId:s,items:_,formatter:u,value:c,icon:p,activatePathOnMount:h,parentElementId:a})}let z=new C.yt;function $({preferenceOptions:e,codeLanguageApi:r,dropdownPrefix:n,parentElementId:a}){let o=n?`${n}_PREFERENCES_DROPDOWN`:B,{codeLanguage:s}=r,l=(0,S.Em)(),c=(0,S.ie)(),d=(0,m.md)(w.v);if("first-party"!==s.type)return null;let u=d?(0,E.t)("dev_handoff.variables.panel_display_code_syntax"):(0,E.t)("dev_handoff.variables.panel_display_figma_name");return i.createElement(T.vV,{dropdownId:o,items:e,formatter:z,value:c,activatePathOnMount:[l?c:u],parentElementId:a})}function Y({tabs:e,onTabClick:r,selectedTabKey:n,recordingKey:a}){let o=(0,N.GS)(),s=(0,v.lv)(),c=e.reduce((e,r)=>(e[r.key]=!0,e),{}),[d,,u]=l.t.useManagedTabs(c,n,r,{recordingKey:"devHandoffPanelTabs"});return i.createElement("div",{className:_()(x.rb,s&&x.LX)},o?i.createElement(l.t.TabStrip,{manager:u},e.map(e=>i.createElement(l.t.Tab,{key:e.key,...d[e.key]},e.label))):e.map(o=>i.createElement(y.JW,{key:o.key,text:o.label,isActive:n===o.key,onClick:()=>r(o.key),recordingKey:f.Pt(a,o.key)||"",isSingle:1===e.length})))}},379181:(e,r,n)=>{n.d(r,{j6:()=>L});var i=n(848318),a=n(716544),o=n(776402),s=n(777611),l=n(731755),c=n(960955),d=n(596616),u=n(609759),p=n(303035),m=n(442313),h=n(464079),_=n(466191),g=n(203839),f=n(360399),E=n(950738),y=n(464012),b=n(189317),v=n(302839),T=n(268904),I=n(89739);let S=new f.KD({min:.1}),w=[3,2,1,.5,1/3],A=new class{parse(e){return"1/3"===e?3:"1/2"===e?2:"2"===e||"3"===e?1/Number.parseInt(e):1}format(e=1){return"0.3"===e.toFixed(1)?"3":"0.5"===e.toFixed(1)?"2":2===e||3===e?`1/${e}`:(0,m.t)("dev_handoff.alternative_units.no_scale")}};function C({scaleFactor:e,onChange:r,onDropdownHidden:n,className:o,inputClassName:s,autoFocus:l}){let c=(0,a.wA)(),d=(0,E.Um)(),u=(0,T.R)();return i.createElement(v.l6,{autoFocus:l,className:o,dispatch:c,dropdownShown:d,dropdownWidth:u?"120px":"auto",formatter:A,id:"SCALE_FACTOR",inputClassName:s,onChange:r,onDropdownHidden:n,property:e},w.map(r=>i.createElement(v.c$,{key:r,value:r,selected:r===e,fullWidth:!0})))}function N({codeLanguage:e}){let r=(0,g.$s)(e);switch(e.id){case h.p:case h.Ap:return(0,m.tx)("dev_handoff.alternative_units.description_scale_factor_ios");case h.LK:case h.NU:return(0,m.tx)("dev_handoff.alternative_units.description_scale_factor_android");case h.uz:return(0,m.tx)("dev_handoff.alternative_units.description_scale_factor_web")}return(0,m.tx)("dev_handoff.alternative_units.description_scale_factor_third_party",{unitName:r})}let L=(0,y.Ju)(function(e){let r=(0,h.v4)(),[n,a]=i.useState(r),f=(0,g.aq)(n),E=(0,g.gc)(n.id),y=(0,g.Bs)(),v=(0,T.R)(),w=o.hS(e),A=i.useCallback(e=>{e&&y(n,f,{scaleFactor:e})},[n,y,f]),L="first-party"===n.type&&(n.id===h.LK||n.id===h.NU||n.id===h.p||n.id===h.Ap),O="first-party"===n.type&&(n.id===h.uz||n.id===h.A0),R=(0,u.A)(()=>{O&&y(n,f,{customSettings:{onlyText:"true"===(E.customSettings?.onlyText||"false")?"false":"true"}})},250),P=E?.scaleFactor??1,D=(0,_.V0)({onChange:a,codeLanguage:n,shouldHideLanguagesWithNoAltUnitSupport:!0,skipBrowsePlugins:!0});return i.createElement(s.bL,{manager:w,width:"md"},i.createElement(l.vo,null,i.createElement(l.Y9,null,i.createElement(l.hE,null,(0,m.t)("dev_handoff.alternative_units.unit_settings_modal_title")),i.createElement(l.jk,null,i.createElement("div",{className:I.DT},i.createElement(_.ls,{dropdownId:"DEV_HANDOFF_MODAL_CODE_LANGUAGE_DROPDOWN",codeLanguageApi:D})))),i.createElement(l.nB,null,L?i.createElement("div",{className:I.iF},i.createElement(C,{scaleFactor:P,onChange:A,onDropdownHidden:p.lQ,className:I.j8,autoFocus:!0}),i.createElement("div",{className:I.rc})):i.createElement("div",{className:I.hq},i.createElement(b.Q7,{className:I.IC,property:P,formatter:S,onChange:A,autoFocus:!0})),i.createElement("div",{className:I.A3},i.createElement(N,{codeLanguage:n})),O&&(v?i.createElement(c.S,{checked:E.customSettings?.onlyText==="true",label:i.createElement(d.J,null,(0,m.tx)("dev_handoff.alternative_units.only_apply_rem_on_text",{rem:i.createElement("span",{className:I.D0},(0,m.tx)("dev_handoff.alternative_units.rem_unit"))})),onChange:R}):i.createElement("div",{className:I.sM},i.createElement(c.S,{checked:E.customSettings?.onlyText==="true",label:i.createElement(d.J,null,(0,m.tx)("dev_handoff.alternative_units.only_apply_rem_on_text",{rem:i.createElement("span",{className:I.D0},(0,m.tx)("dev_handoff.alternative_units.rem_unit"))})),onChange:R}))))))},"SCALE_FACTOR_MODAL")},203839:(e,r,n)=>{n.d(r,{$s:()=>O,Bs:()=>S,Em:()=>N,SF:()=>k,aq:()=>C,b1:()=>R,gc:()=>T,ie:()=>M,lX:()=>I,qM:()=>A,wA:()=>D,wQ:()=>P});var i=n(848318),a=n(716544),o=n(741419),s=n(157907),l=n(3757),c=n.n(l),d=n(6819),u=n(541525),p=n(442313),m=n(464079),h=n(547449),_=n(650080),g=n(96447),f=n(339599),E=n(950774),y=n(677251),b=n(432205);let v={scaledWeb:"rem",scaledIOS:"pt",scaledAndroid:"dp",scaledAndroidText:"sp",pixel:"px"};function T(e){let r=(0,m.v4)().id,n=(0,a.d4)(e=>e.mirror.appModel.devHandoffPreferences),o=e??r;return(0,i.useMemo)(()=>n.codeExtensionPreferences?.[o]??{},[n,o])}function I(){let e=d.D.getState()?.mirror?.appModel,r=e?.devHandoffCodeLanguage?.id??"";return e?.devHandoffPreferences?.codeExtensionPreferences?.[r]??{}}function S(){let e=(0,a.d4)(e=>e.mirror.appModel.devHandoffPreferences),r=(0,u.U)();return(0,i.useCallback)((n,i,a)=>{let{customSettings:s,...l}=a;c()(l)||(void 0!==l.unit&&(l.unit=l.unit===o.tKW.PIXEL?v.pixel:L(n,i)),r("Dev Mode Preference Changed",{languageType:n.type,languageId:n.id,...l})),(0,_.D8)(e,n,a)},[e,r])}let w=({codeLanguage:e,preferences:r,options:n={},scaleEverywhere:i})=>!!(!i&&f.z4.shouldAvoidScaling())||(i?r.customSettings?.onlyText==="true"&&!n?.isTextProperty:"first-party"===e.type&&(e.id===m.uz||e.id===m.A0)&&r.customSettings?.onlyText==="true"&&!n?.isTextProperty);function A(e,r,n,i){let a=function(e,r,n,i){let a=(0,m.v4)(),l=e??a,c=function(e,r,n=e=>e,i){let a=(0,m.v4)(),l=e??a,c=function(e){let r=(0,m.v4)(),n=e??r,{unit:i=o.tKW.PIXEL,scaleFactor:a=1}=T(n.id);return"first-party"===n.type&&n.id===m.MT?1:i===o.tKW.SCALED?a:1}(l),d=T(l.id),u=(0,h.lv)()&&(0,s.k)().dt_insp_impr_fast_follows;return 1===c||0===c||w({codeLanguage:l,preferences:d,options:i,scaleEverywhere:u})?r.map(e=>void 0===e?void 0:n(e)):r.map(e=>void 0===e?void 0:n(e/c))}(l,r,n,i),d=M(l,i),u=T(l.id);return w({codeLanguage:l,preferences:u,options:i,scaleEverywhere:(0,h.lv)()&&(0,s.k)().dt_insp_impr_fast_follows})?c.map(e=>`${e}${v.pixel}`):c.map(e=>`${e}${d}`)}(e,[r],n,i);if(void 0!==r)return a[0]}function C(e){let{id:r,type:n}=e;return(0,g.S0)(r,{searchLocalPlugins:"local-plugin"===n,searchPublishedPlugins:"published-plugin"===n})}function N(e){let r=(0,m.v4)(),n=C(e??r);return(0,_.ZA)(e??r,n)}function L(e,r,n){let{id:i,type:a,pluginLanguage:o}=e;if("first-party"!==a&&r){let e=(0,b.X)(r,o),n=(0,_.K6)(r,e);if(n)return n.scaledUnit}switch(i){case m.uz:return v.scaledWeb;case m.p:case m.Ap:return v.scaledIOS;case m.LK:case m.NU:if(n?.isTextProperty)return v.scaledAndroidText;return v.scaledAndroid;default:return v.scaledWeb}}function O(e,r){let n=C(e);return L(e,n,r)}function R(e){switch(e){case m.uz:return(0,p.t)("dev_handoff.alternative_units.rem_unit");case m.LK:case m.NU:return(0,p.t)("dev_handoff.alternative_units.dp_unit");case m.p:case m.Ap:return(0,p.t)("dev_handoff.alternative_units.pt_unit");default:return(0,p.t)("dev_handoff.alternative_units.rem_unit")}}function P(e){let r=(0,m.v4)();return D(e??r)}function D(e){let r=O(e);return"first-party"===e.type?R(e.id):r}function M(e,r){let n=(0,m.v4)(),i=e??n,a=function(e){let r=(0,m.v4)(),n=e??r,i=T(n.id)?.unit??o.tKW.PIXEL;return"first-party"===n.type&&n.id===m.MT?o.tKW.PIXEL:i}(i),s=O(i,r);return a===o.tKW.PIXEL?v.pixel:s}function k({localCodeLanguage:e,includeActions:r=!0,includeSelectSettings:n=!0}={}){let a=(0,m.v4)(),o=e??a,s=(0,m.AC)(o),l=T(o.id),c=S();return i.useMemo(()=>(function({includeActions:e=!1,includeSelectSettings:r=!0,codeLanguage:n,plugin:i,codeExtensionPreferences:a,onChangePreferences:o}){let s=[];if(!i||"first-party"===n.type||(0,_.GL)(i)!==n.id)return s;for(let l of(0,_.zZ)(i,(0,b.X)(i,n.pluginLanguage)))e&&(0,y.Wt)(l)&&s.push({name:l.propertyName,displayText:l?.label||l.propertyName,callback:()=>E.d1.codegenPreferencesChange({propertyName:l.propertyName}),recordingKey:l.propertyName}),r&&(0,y.ZV)(l)&&s.push({name:l.propertyName,recordingKey:l.propertyName,displayText:l?.label??l.propertyName,children:l.options.map((e,r)=>({name:e.value,displayText:e.label,isChecked:a?.customSettings?.[l.propertyName]?a?.customSettings?.[l.propertyName]===e.value:0===r,callback:()=>o(n,i,{customSettings:{...a?.customSettings,[l.propertyName]:e.value}}),recordingKey:e.value}))});return s})({includeActions:r,includeSelectSettings:n,codeLanguage:o,plugin:s,codeExtensionPreferences:l,onChangePreferences:c}),[r,n,o,s,l,c])}},486822:(e,r,n)=>{n.d(r,{q:()=>E});var i=n(848318),a=n(716544),o=n(741419),s=n(39773),l=n(442313),c=n(464079),d=n(547449),u=n(650080),p=n(771313),m=n(379181),h=n(203839),_=n(449737),g=n(44841),f=n(311967);function E(e){let r=(0,h.SF)(),n=(0,p.sQ)(),E=function(e){let r=(0,c.v4)(),n=e??r,s=(0,c.AC)(n),p=(0,h.wQ)(n),g=(0,h.Em)(n),f=(0,h.gc)(n.id),E=(0,h.Bs)(),y=(0,a.wA)(),b=(0,d.lv)();return i.useMemo(()=>{let e=[];if(!g)return e;let r=f?.unit||o.tKW.PIXEL;return b||e.push({displayText:(0,l.t)("dev_handoff.alternative_units.dimension_unit"),header:!0}),e.push(...u.zq.map(e=>{let i=e===o.tKW.PIXEL?(0,l.t)("dev_handoff.alternative_units.pixel_unit"):p;return{name:e.toString(),displayText:i,isChecked:r===e,callback:()=>E(n,s,{unit:e}),recordingKey:e===o.tKW.PIXEL?"pixel":"scaled"}}),{displayText:(0,l.t)("dev_handoff.alternative_units.unit_settings_menu_option"),callback:()=>y((0,_.to)({type:m.j6})),recordingKey:"setScaleFactor"}),e},[g,f?.unit,p,E,n,s,y,b])}(e),y=(0,c.v4)(),b=e??y,{updateDefaultCodegenSettings:v,isSetToDefault:T}=(0,g.Q)(),I=(0,d.lv)(),[S,w]=(0,s.fp)(f.v),A=(0,c.AC)(b),C=(0,c.Pt)(A).format(b);return i.useMemo(()=>{let e=[];return E.length>0&&(I&&!n&&e.push({displayText:(0,l.t)("dev_handoff.language_dropdown.preferences_header_unit",{languageOrPlugin:C}),header:!0}),e.push(...E)),r.length>0&&e.length>0&&e.push({displayText:"",separator:!0}),e.push(...r),e.length>0&&e.push({separator:!0,displayText:""}),n?e.push({displayText:(0,l.t)("dev_handoff.code.settings.set_as_default"),callback:()=>{v()},isChecked:T}):b?.type==="first-party"&&I&&(e.push({displayText:(0,l.t)("dev_handoff.variables.panel_display"),header:!0}),e.push({displayText:(0,l.t)("dev_handoff.variables.panel_display_code_syntax"),isChecked:S,callback:()=>{w(!0)}}),e.push({displayText:(0,l.t)("dev_handoff.variables.panel_display_figma_name"),isChecked:!S,callback:()=>{w(!1)}})),e},[r,T,E,v,n,S,w,b?.type,I,C])}},501096:(e,r,n)=>{n.d(r,{Co:()=>R,Iy:()=>A,Me:()=>L,SD:()=>w,TU:()=>I,WV:()=>O});var i=n(992277),a=n(897392),o=n(878028),s=n(149334),l=n(6819),c=n(858423),d=n(502255),u=n(431118),p=n(507152),m=n(757033),h=n(481540),_=n(617767),g=n(997894),f=n(931516),E=n(50258),y=n(947232),b=n(353304);let v=o.z.object({id:o.z.string(),node_id:o.z.string(),file_key:o.z.string(),link_name:o.z.string(),link_url:o.z.string(),is_user_override:o.z.boolean(),link_preview_json:o.z.any()}),T=o.z.object({meta:o.z.array(v)});async function I({fileKey:e,nodeId:r,includeInheritedLinks:n}){let i=(await E.S.getRelatedLinks({nodeId:r,fileKey:e})).data,a=T.safeParse(i);if(!a.success)throw Error("Invalid response from server");let o=a.data.meta.map(e=>({id:e.id,nodeId:e.node_id,linkName:e.link_name,linkUrl:e.link_url,fileKey:e.file_key,isUserOverride:!!e.is_user_override,linkPreviewJson:e.link_preview_json}));if(!n)return o;let s=l.D.getState().mirror.sceneGraph,c=(0,b.k4)([r],s),d=(0,b.Yi)([r],s),u=await S(e,c),p=await S(e,d);return[...o,...u.map(e=>({...e,nodeId:r,mainComponentId:c})),...p.map(e=>({...e,nodeId:r,mainComponentId:d}))]}async function S(e,r){let n=l.D.getState().mirror.sceneGraph;if(!r)return[];let i=n.get(r);if(!i)return[];let{publishID:o}=i,s=a.fn(a.sH(o)),c=i.sourceLibraryKey,d=(await g.M4.fetch(_.Cs.LibrariesByLibraryKeysQuery({libraryKeys:[c],subscriptionFileKey:l.D.getState().openFile?.key??null,orgId:l.D.getState().currentUserOrgId})))[0],u=null;return d&&((0,f.ZA)(d)&&(0,f.xA)(d)?u=d.hub_file_id:"library_file_key"in d&&(u=d.library_file_key)),await I({fileKey:u??e,nodeId:s?o??"":r,includeInheritedLinks:!1})}async function w(e){let r=new Set([e]),n=new Map,i=new Map,o=l.D.getState().mirror.sceneGraph,s=(s,l,c)=>{if(!l)return;let d=o.get(l);if(!d)return;let{publishID:u,guid:p}=d,m=c.find(e=>e.library_key===d.sourceLibraryKey),h=null;if(m&&((0,f.ZA)(m)&&(0,f.xA)(m)?h=m.hub_file_id:"library_file_key"in m&&(h=m.library_file_key)),!h||!u||!a.fn(a.sH(u))||h===e){n.set(p,s),i.set(p,l);return}n.set(u,s),i.set(u,l),r.add(h)},c=o.get("0:0")?.findAllWithCriteria({types:["INSTANCE"]}).map(([e])=>e);if(c&&c.length>0){let e=new Set;for(let r of c){let n=o.get(r);if(!n||"INSTANCE"!==n.type)continue;let i=n.symbolId;if(!i)continue;let a=o.get(i);a?.sourceLibraryKey&&e.add(a?.sourceLibraryKey)}let r=await g.M4.fetch(_.Cs.LibrariesByLibraryKeysQuery({libraryKeys:Array.from(e),subscriptionFileKey:l.D.getState().openFile?.key??null,orgId:l.D.getState().currentUserOrgId}));for(let e of c){let n=o.get(e);if(!n||"INSTANCE"!==n.type)continue;s(e,n.symbolId,r);let i=(0,b.Yi)([e],o);s(e,i,r)}}let d=await m.Ay.post("/api/files/related_links",{file_keys:Array.from(r.values())}),u=[];return d.data.meta.forEach(r=>{let a=e===r.file_key&&!!o.get(o.guidFromDeveloperFriendlyId(r.node_id)),s={id:r.id,linkName:r.link_name,linkUrl:r.link_url,fileKey:r.file_key,isUserOverride:!!r.is_user_override,linkPreviewJson:r.link_preview_json};a&&u.push({...s,nodeId:r.node_id,mainComponentId:void 0}),n.has(r.node_id)&&u.push({...s,nodeId:n.get(r.node_id),mainComponentId:i.get(r.node_id)})}),u}async function A({fileKey:e,nodeId:r,url:n,name:i,nodeType:a,pluginId:o,source:s}){if((await I({fileKey:e??"",nodeId:r??""})).find(e=>e.linkUrl===n))throw Error(`Link already exists on node ${r} with url ${n}`);return N({fileKey:e,nodeId:r,url:n,name:i,nodeType:a,pluginId:o,source:s})}async function C(e){let r;try{let n=await y.E.getLinkMetadata({text:e}),i=n?.data?.meta;i?.title&&(r=decodeURIComponent(i?.title))}catch(e){}finally{if(!r){let n=(0,s.Gw)(e);r=n?(0,u.Zr)(n):"N/A"}}return r}async function N({url:e,nodeId:r,fileKey:n,name:i,onPost:a,nodeType:o,pluginId:d,source:u}){let _="";if(i)_=i;else{let r=(0,s.FB)(e);if(r?.toLowerCase()==="github.com")_="Github";else if(r?.toLowerCase()==="jira.com"||r?.toLowerCase()==="atlassian.net"){_="Jira";let r=function(e){for(let r of M){let n=e.match(r);if(n?.[1])return n[1]}return null}(e);r&&(_=`Issue ${r}`)}else _=await C(e)}let g={node_id:r??"",link_name:_,link_url:e},f=m.Ay.post(`/api/files/${n}/related_links`,g);return a&&a(),c.WB()?.optimisticallyCreate({DeveloperRelatedLink:{[`optimistic-link-${p.g()}`]:{nodeId:r??"",fileKey:n??"",linkName:_,linkUrl:e,isUserOverride:!1,linkPreviewJson:null}}},f),f.then(e=>((0,h.ds)("Dev Handoff Related Links Added New Link Success",n,l.D.getState(),{nodeId:r,nodeType:o,source:u,pluginId:d}),e))}async function L({fileKey:e,nodeId:r,currentUrl:n,newValue:i,nodeType:a,pluginId:o,source:s}){let d=(await I({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return d||D({nodeId:r,url:n}),function({fileKey:e,nodeId:r,linkId:n,name:i,url:a,isUserOverride:o,clearLinkPreview:s,nodeType:d,pluginId:u,source:p}){let _={node_id:r,link_id:n,new_link_name:i,new_link_url:a};void 0!==o&&(_.is_user_override=o),s&&(_.link_preview_json=null);let g=m.Ay.put(`/api/files/${e}/related_links`,_);return c.WB()?.optimisticallyUpdate({DeveloperRelatedLink:{[n]:{linkName:i,linkUrl:a,isUserOverride:o,linkPreviewJson:s?"":void 0}}},g),g.then(n=>((0,h.ds)("Dev Handoff Related Links Edit Link Success",e,l.D.getState(),{nodeId:r,nodeType:d,source:p,pluginId:u}),n))}({fileKey:e,nodeId:r,linkId:d.id,name:i.name||d.linkName,url:i.url||d.linkUrl,isUserOverride:!1,clearLinkPreview:!0,nodeType:a,pluginId:o,source:s})}async function O({fileKey:e,nodeId:r,url:n,nodeType:i,pluginId:a,source:o}){let s=(await I({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return s||D({nodeId:r,url:n}),function({fileKey:e,nodeId:r,linkId:n,nodeType:i,pluginId:a,source:o}){let s=m.Ay.del(`/api/files/${e}/related_links`,{node_id:r,link_id:n});return c.WB()?.optimisticallyDelete({DeveloperRelatedLink:{[n]:null}},s),s.then(n=>((0,h.ds)("Dev Handoff Related Links Delete Link Success",e,l.D.getState(),{nodeId:r,nodeType:i,source:o,pluginId:a}),n))}({fileKey:e,nodeId:r,linkId:s.id,nodeType:i,pluginId:a,source:o})}async function R({fileKey:e,nodeId:r,url:n,linkPreviewJson:i}){let a=(await I({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return a||D({nodeId:r,url:n}),P({link:a,linkPreviewJson:i})}async function P({link:e,linkPreviewJson:r}){try{let n=m.Ay.put(`/api/files/${e.fileKey}/related_links/link_preview`,{node_id:e.nodeId,link_id:e.id,link_preview_json:r});c.WB()?.optimisticallyUpdate({DeveloperRelatedLink:{[e.id]:{linkPreviewJson:JSON.stringify(r)}}},n),await n}catch(n){(0,d.$D)(i.e.DEVELOPER_TOOLS,n,{extra:{link:e,linkPreviewJson:r}})}}function D({nodeId:e,url:r}){throw Error(`url ${r} and nodeId ${e} not found`)}o.z.object({node_id:o.z.string(),link_name:o.z.string(),link_url:o.z.string()}),o.z.object({meta:v});let M=[/\/browse\/([A-Z]+-\d+)/,/selectedIssue=([A-Z]+-\d+)/,/issues\/([A-Z]+-\d+)/]},370255:(e,r,n)=>{n.d(r,{eS:()=>c});var i=n(952423),a=n(442313);n(537116);var o=n(413335),s=n(52004);n(691232),n(166917);var l=n(487497);function c(){let e=(0,s.kl)("numSelected"),r=(0,l.Vr)(),n=(0,o.lA)();return 1===e&&r&&r.isAlive?function(e,r){let n=e.isState?e.parentNode:null,o=n?.name||e.name,s=r?.isState?r?.parentNode?.name:r?.name,l="SYMBOL"===e.type||"INSTANCE"===e.type;return{id:e.guid,name:o,backingSymbolName:s,type:function(e,r,n=null,o=!1,s){if(!e?.isAlive)return null;let l=e.type;if((0,i.GI)(e)&&(l="STAMP"),n?.status==="loaded"&&"SYMBOL"!==l&&"INSTANCE"!==l)return(0,a.tx)("inspect_panel.node_type.detached_component");if("BOOLEAN_OPERATION"===l)switch(e.booleanOperation){case"UNION":return(0,a.tx)("inspect_panel.node_type.union");case"INTERSECT":return(0,a.tx)("inspect_panel.node_type.intersect");case"SUBTRACT":return(0,a.tx)("inspect_panel.node_type.subtract");case"XOR":return(0,a.tx)("inspect_panel.node_type.exclude")}switch(l){case"VECTOR":return(0,a.tx)("inspect_panel.node_type.vector");case"STAR":return(0,a.tx)("inspect_panel.node_type.star");case"LINE":return(0,a.tx)("inspect_panel.node_type.line");case"ELLIPSE":return(0,a.tx)("inspect_panel.node_type.ellipse");case"RECTANGLE":case"ROUNDED_RECTANGLE":return(0,a.tx)("inspect_panel.node_type.rectangle");case"REGULAR_POLYGON":return(0,a.tx)("inspect_panel.node_type.polygon");case"TEXT":return(0,a.tx)("inspect_panel.node_type.text");case"SLICE":return(0,a.tx)("inspect_panel.node_type.slice");case"GROUP":case"FRAME":if(e.isStateGroup)return(0,a.tx)("inspect_panel.node_type.main_component_set");if(o&&("HORIZONTAL"===e.stackMode||"VERTICAL"===e.stackMode))return(0,a.tx)("inspect_panel.node_type.frame_auto_layout");if("HORIZONTAL"===e.stackMode)return(0,a.tx)("inspect_panel.node_type.horizontal_al");if("VERTICAL"===e.stackMode)return(0,a.tx)("inspect_panel.node_type.vertical_al");else if(e.resizeToFit)return(0,a.tx)("inspect_panel.node_type.group");else return(0,a.tx)("inspect_panel.node_type.frame");case"SYMBOL":if(e.isState||r?.isStateGroup)return(0,a.tx)("inspect_panel.node_type.main_variant");return(0,a.tx)("inspect_panel.node_type.main_component");case"INSTANCE":return(0,a.tx)("inspect_panel.node_type.instance");case"STICKY":case"SHAPE_WITH_TEXT":case"CONNECTOR":case"STAMP":return(0,a.tx)("inspect_panel.node_type.figjam");case"SECTION":return(0,a.tx)("inspect_panel.node_type.section");case"WIDGET":return(0,a.tx)("inspect_panel.node_type.widget");case"CANVAS":return(0,a.tx)("inspect_panel.node_type.page");case"TABLE":return(0,a.tx)("inspect_panel.node_type.table")}return null}(e,n,null),isSymbol:e.isStateGroup||l,isComponentSetOrComponent:e.isStateGroup||"SYMBOL"===e.type,isFrame:"FRAME"===e.type,isSection:"SECTION"===e.type,isText:"TEXT"===e.type}}(r,n):null}},780336:(e,r,n)=>{n.d(r,{Ib:()=>F,Zy:()=>U,q1:()=>B,vY:()=>V});var i=n(848318),a=n(376025),o=n(565460),s=n(939983),l=n(741419),c=n(673906),d=n(179703),u=n(39773),p=n(536384),m=n.n(p),h=n(6819),_=n(921494),g=n(303035),f=n(166365),E=n(442313),y=n(649220),b=n(30598),v=n(481540),T=n(577023),I=n(449977),S=n(51910),w=n(328759),A=n(207715),C=n(166917),N=n(483372),L=n(503024),O=n(336800),R=n(760804),P=n(545289),D=n(348522),M=n(523860),k=n(85206);let F=(0,u.eU)(new Map);function x(e){let{isHovered:r,selection:n}=(0,_.R)(r=>({isHovered:r.mirror.appModel.hoveredNode===e.guid,selection:r.mirror.sceneGraphSelection})),[a,o]=i.useState(!1),s=i.useRef(null);i.useEffect(()=>{s.current&&e.isSelected&&s.current.scrollIntoView({block:"nearest"})},[e.isSelected]);let c="SYMBOL"===e.type||"INSTANCE"===e.type||e.isInstanceSublayer||e.isSymbolSublayer||B.includes(e.type),d=[D.nM,e._className];e.isSelected&&d.push(D.wH),r&&d.push(D.yo),c&&d.push(D.HR),e.isExpanded(e.guid)&&d.push(D.sz),e.isAncestorSelected&&d.push(D.bx),0!==e.indentation&&d.push(D.BT);let p=Array.from({length:e.indentation},(e,r)=>r+1);return i.createElement("div",{ref:s,className:m()(d),"data-fullscreen-intercept":!0,onContextMenu:r=>e.openContextMenu(r,e.guid),onDoubleClick:r=>e.isExpandable&&e.toggleExpanded(r,e.guid),onMouseDown:r=>{(0,w.S)("html_tree"),e.didSelectRow(e.guid);let i=Object.keys(n);if(u.zl.set(O.m,null),l.Ez5?.editorState().focusedAnnotationId.set(null),r.metaKey){var a;n[a=e.guid]?I.D$([a]):I.Dh([a])}else r.shiftKey&&i.length>0?I.GL(i[i.length-1],e.guid):l.w3z.selectAndPanToNode(e.guid)},onMouseEnter:()=>{o(!0),I.Uc(e.guid)},onMouseLeave:()=>{o(!1),I.Uc(I.Hr)},role:"button",tabIndex:0},i.createElement("div",{className:D.M4},p.map(e=>i.createElement("div",{key:e,className:D.Mh})),e.children),i.createElement(W,{name:e.name,guid:e.guid,isRowHovered:a}))}function U(e){return i.createElement(f.B,{onMouseDown:e.visible?r=>{r.preventDefault(),r.stopPropagation(),e.onMouseDown?.(r)}:void 0,className:m()(D.GE,e.visible&&D.RK),svg:e.expanded?M.A:k.A,dataTestId:`devHandoffLayersRow.toggle-${e.name}`})}let B=["TABLE","TABLE_CELL","WASHI_TAPE","STAMP","STICKY","SHAPE_WITH_TEXT","WIDGET"];function V(e,r){let n=e?.type??N.PW.NOT_ASSET,i=n&(N.PW.ASSET_IMAGE|N.PW.ASSET_ICON);return r?i:n&N.PW.ASSET_IMAGE}function G(e){return"SYMBOL"===e||"INSTANCE"===e}function H({guid:e}){let r=(0,u.md)(F).get(e);if(!r)return null;let n=r.state;return"added"===n?i.createElement("div",{className:D.vN}):"changed"===n?i.createElement("div",{className:D.tD}):"removed"===n?i.createElement("div",{className:D.rq}):null}function K(e){return i.createElement(x,{...e,_className:e.hasChildren?D.aw:void 0},i.createElement(U,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:r=>e.toggleExpanded(r,e.guid),name:e.name}),i.createElement(P.Bf,{className:D.V3,guid:e.guid}),i.createElement("span",{className:D.Hn},e.name," ",e.showGuids&&` (${e.guid})`),i.createElement(H,{guid:e.guid}))}function W({isRowHovered:e,guid:r,name:n}){let l=(0,C.Fk)((e,r)=>e.get(r)?.isLockedInDevMode,r);return l||e?i.createElement(a.E,{actionOnPointerDown:!0,onClick:()=>{let e=(0,d.UN)().get(r);e&&c.l7.user("set-locked-in-dev-mode",()=>{e.isLockedInDevMode=!e.isLockedInDevMode;let r=h.D.getState(),n=r.openFile?.key;n&&(0,v.GS)("dev_mode.set_node_locked",n,r,{locked:e.isLockedInDevMode,nodeId:e.guid,nodeType:e.type,isLockedInDesignMode:e.locked,opacity:e.opacity,fillOpacity:e.fills[0]?.opacity})})},"aria-label":(0,E.t)("dev_handoff.layers_panel.locked_tooltip"),className:D.hz,"aria-pressed":l,htmlAttributes:{"data-testid":`devHandoffLayersRow.lockIcon-${n}`,"data-tooltip":(0,E.t)("dev_handoff.layers_panel.locked_tooltip"),"data-tooltip-type":L.Ib.TEXT,"data-tooltip-show-right":!0}},l?i.createElement(o.s,null):i.createElement(s.r,null)):null}function z(e){return i.createElement(x,{...e,_className:D.aw},i.createElement(U,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:r=>e.toggleExpanded(r,e.guid),name:e.name}),i.createElement(P.Bf,{className:D.V3,guid:e.guid}),i.createElement("span",{className:D.Hn},e.name," ",e.showGuids&&` (${e.guid})`),i.createElement(H,{guid:e.guid}))}function $(e){var r,n;let a;let o=(0,S.eY)(),s=e.inheritedTextStyle;if(s){let e=l.Pt4.getStyleNodeId(s.key,s.version);a=o.get(e)?.name}let c=e.isInstanceSublayer?(r=e.name,n=e.textContent,r===n?.trim().replace(/\s+/gm," ")):e.autoRename;return i.createElement(x,{...e,_className:D.yL},i.createElement(U,{visible:!1,expanded:!1,name:e.name}),i.createElement(P.Bf,{className:D.V3,guid:e.guid}),c?null:i.createElement("span",{className:D.Hn},e.name," ",e.showGuids&&` (${e.guid})`),i.createElement("span",{className:D.P_},e.textContent),i.createElement("span",{className:D.bT}," \xb7 ",a),i.createElement(H,{guid:e.guid}))}function Y(e){return i.createElement(i.Fragment,null,i.createElement(P.Bf,{className:m()(D.V3,D.MS,{[D.hR]:!e.figJam}),guid:e.guid}),i.createElement("span",{className:m()(D.Hn,D.MS)},e.name,e.showGuids&&` (${e.guid})`))}function j(e){let r=e.guid;return i.createElement(x,{...e},i.createElement(U,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(r),onMouseDown:n=>e.toggleExpanded(n,r),name:e.name}),i.createElement(Y,{guid:r,name:e.name,showGuids:e.showGuids}),i.createElement(H,{guid:e.guid}))}function q(e){let r=e.guid;return i.createElement(x,{...e},i.createElement(U,{visible:!1,expanded:!1,onMouseDown:g.lQ,name:e.name}),i.createElement(Y,{guid:r,name:e.name,showGuids:e.showGuids,figJam:!0}),i.createElement(H,{guid:e.guid}))}function X(e){let{assetInfo:r}=e;return r?i.createElement(J,{...e,assetInfo:r}):i.createElement(K,{...e})}function Z({guid:e,assetInfo:r,hasEnabledStaticImagePaint:n}){let a=r.type&N.PW.ASSET_IMAGE||n,o=(0,y.O)({assetId:e,thumbnailVersion:r.thumbnailVersion,width:64,height:64,scale:2});return i.createElement(R.J,{className:m()(D.ZE,a?D.Ym:D.ye),style:o.backgroundStyle,src:o.url})}function J(e){let{assetInfo:r}=e;return i.createElement(x,{...e,_className:D.Re},i.createElement(U,{visible:!1,expanded:!1,name:e.name}),i.createElement(Z,{guid:e.guid,assetInfo:r,hasEnabledStaticImagePaint:e.hasEnabledStaticImagePaint}),i.createElement(i.Fragment,null,G(e.type)?i.createElement(Y,{guid:e.guid,name:e.name,showGuids:!1}):i.createElement(i.Fragment,null,i.createElement("span",{className:D.Hn},e.name," ",e.showGuids&&` (${e.guid})`),i.createElement("span",{className:D.UZ},i.createElement(b.$R,{assetInfo:r,dataTestId:"layerPanelAsset"})))))}i.memo(e=>{let r=(0,A.J2)((0,T.UK)().showGuids),n=(0,A.J2)(l.Ez5.devHandoffState().automaticIconDetection),a=i.useMemo(()=>l.w3z.getOrAddAssetInfo(e.guid),[e.guid]),o=(0,S.eY)().get(e.guid);if(!o)return null;let s=o.devToolsOrderedVisibleChildren,c=function(e,r,n){return B.includes(e.type)?q:n&&V(n,r)?X:G(e.type)?j:"FRAME"===e.type&&e.isStack?z:"TEXT"===e.type?$:K}(o,n,a);if(!c)return null;let d=s.length>0&&!(a&&V(a,n));return i.createElement(c,{absoluteBoundingBox:o.absoluteBoundingBox,assetInfo:a,autoRename:o.autoRename,didSelectRow:e.didSelectRow,guid:o.guid,hasChildren:d,hasEnabledStaticImagePaint:o.hasEnabledStaticImagePaint,indentation:e.indentation,inheritedTextStyle:o.inheritedTextStyle,isAncestorSelected:e.isAncestorSelected,isExpandable:!e.isRoot&&d,isExpanded:e.isExpanded,isInstanceSublayer:o.isInstanceSublayer,isSelected:e.isSelected,isSymbolSublayer:o.isSymbolSublayer,name:o.name,openContextMenu:e.openContextMenu,showGuids:r,stackMode:o.inferredAutoLayoutResult?o.inferredAutoLayoutResult.stackMode:o.stackMode,textContent:o.textContent,toggleExpanded:e.toggleExpanded,type:o.type})})},34055:(e,r,n)=>{n.d(r,{Ym:()=>d});var i=n(379338),a=n(935529),o=n(481540),s=n(376780),l=n(241917),c=n(665539);function d(e,r,n,u,p={}){let m=r===l.nT.DevHandoff,h=r===l.nT.Illustration,_={source:n,hasSeatForDevMode:(0,a.tn)(e),...p},g=e.openFile?.key;if((0,o.ds)(m?"Enter Inspect Mode":h?"Enter Illustration Mode":"Enter Design Mode",g,e,_,{forwardToDatadog:u}),(0,i.Ay)().org_id&&g&&"init"!==n){if(h)return;let e=m?s.Mr.DEV_MODE_FILE_SEEN:s.Mr.DESIGN_FILE_SEEN;c.L.postRecentActivity({fileKey:g,activityType:e})}}},734346:(e,r,n)=>{function i(e){let[r,n]=e.split("-");if(n){let[e,r]=n.split("_");return`${e}:${r}`}}n.d(r,{xg:()=>i})},769344:(e,r,n)=>{n.d(r,{d:()=>a});var i=n(670673);(0,i.Fu)("dev_mode_should_see_paywall_reminder");let a=(0,i.Fu)("dev_mode_seen_paywall_reminder")},278775:(e,r,n)=>{(0,n(39773).eU)([])},956681:(e,r,n)=>{n.d(r,{a:()=>en});var i=n(848318),a=n(716544),o=n(992277),s=n(897378),l=n(376025),c=n(67074),d=n(743791),u=n(647035),p=n(579510),m=n(261274),h=n(41054),_=n(915381),g=n(741419),f=n(536384),E=n.n(f),y=n(397579),b=n(857188),v=n(470403),T=n(575492),I=n(17755),S=n(923376),w=n(442313),A=n(697714),C=n(496611),N=n(547449),L=n(541989),O=n(929683),R=n(834087),P=n(73091),D=n(727341),M=n(769615),k=n(577023),F=n(773422),x=n(974326),U=n(950738),B=n(691232),V=n(503024),G=n(781806),H=n(176386),K=n(356408),W=n(487497),z=n(70529),$=n(163566),Y=n(319640),j=n(509195),q=n(302839),X=n(727218),Z=n(541910),J=n(949651),Q=n(318100),ee=n(243315),et=n(778935),er=n(881983);function en({variableId:e,onClose:r,isDetailsModal:n,inlineCloseButton:a,surface:o,entryPoint:s,maxHeight:l,canOpenLibrary:c}){let d=(0,F.u)(e),u=(0,x.T)()?"vscode":"dev_mode",p=d?.subscriptionStatus==="LOCAL"&&d.isSoftDeleted,m=i.useMemo(()=>({entrypoint:s,variableType:d?.resolvedType!==void 0?(0,J.Hr)(d.resolvedType):void 0,variableOrigin:d?.subscriptionStatus==="LOCAL"?"local":"library",product:u,isDeleted:p,surface:o}),[s,p,d?.resolvedType,d?.subscriptionStatus,o,u]);return i.createElement(P.gs,{name:"details",enabled:!!d,trackingProps:m},i.createElement(T.P,{maxHeight:l,className:er.PM},i.createElement(ei,{variableId:e,onClose:r,isDetailsModal:n,inlineCloseButton:a,canOpenLibrary:c})))}function ei({variableId:e,onClose:r,isDetailsModal:n,inlineCloseButton:o,canOpenLibrary:l=!0}){let c=(0,a.wA)(),u=(0,P.ON)(),p=function({variableId:e,isDetailsModal:r}){let n=(0,F.u)(e),i=(0,F.G6)(n?.variableSetId),a=(0,F.Kd)(n?.node_id),o=i?.modes.find(e=>e.id===i?.defaultModeID),s=(0,Z.yK)(n?.node_id);return{variable:n??void 0,variableSet:i,variableSetKey:a??void 0,modeForModal:r&&s?s.modeId.guid:o?.id}}({variableId:e,isDetailsModal:n}),m=(0,y.ZC)(e),h=p.variable?.variableSetId,_=(0,y.ZC)(h),[g,f]=i.useState(null);i.useEffect(()=>{n?m&&m!==e&&f(null):_&&_!==h&&f(null)},[n,m,e,_,h]);let E=!!p.variable&&!!p.variableSet&&!!p.variableSetKey&&!!p.modeForModal;i.useEffect(()=>{E||(c(A.F.enqueue({message:"Variable details could not be loaded"})),r())},[E,c,r]);let v=i.useCallback(e=>{e.event.keyCode===b.Uz.ESCAPE&&(u("escape_pressed"),e.event.preventDefault(),e.accept(),r())},[u,r]),T=i.useCallback(()=>{u("description_expanded")},[u]),{variable:I,variableSet:S,variableSetKey:N,modeForModal:L}=p??{},O=g??L,R=eg(e,N,O);if(!E)return null;let D="LOCAL"===I.subscriptionStatus&&I.isSoftDeleted;return i.createElement(G.vL,{handleKeyDown:v,name:"dev-mode-variable-details",focusOnMount:!0},i.createElement($.VZ,{title:"variable-info",hideHeader:!0,recordingKey:"dev-var-details-header",noPadding:!0},i.createElement("div",{className:er.Ct},o?i.createElement("div",{className:er.h6},i.createElement(ea,{variable:I}),i.createElement(s.K,{onClick:r,"aria-label":(0,w.t)("dev_handoff.variables.details_button_close_aria_label")},i.createElement(d.L,null))):i.createElement(ea,{variable:I}),n&&!D&&i.createElement(eo,{variableId:e,libraryKey:I?.subscriptionStatus==="SUBSCRIBED"?I.library_key:void 0,isLocal:I?.subscriptionStatus==="LOCAL",onClose:r,canOpenLibrary:l}),i.createElement(C.X,{description:I.description,containerClassName:er.h_,onExpand:T,dataTestId:"var-details-description"}))),i.createElement($.VZ,{title:"variable-value",hideHeader:!0,recordingKey:"dev-var-details-value",noPadding:!0},i.createElement("div",{className:er.Ct},i.createElement(ec,{name:(0,w.t)("dev_handoff.variables.details_collection"),value:S?.name,copyValue:null,trackingName:"collection"}),i.createElement(el,{setSelectedMode:f,selectedMode:O,modeOptions:S?.modes??[],jumpsCollection:R}),i.createElement(ef,{variableId:I.node_id,currentVarSetKey:N,currentlySelectedModeId:O,expandByDefault:!n,onClose:r,canOpenLibrary:l}),i.createElement(eE,{variableId:I.node_id}))),i.createElement(ey,{codeSyntax:I.codeSyntax}))}function ea({variable:e}){let r=(0,W.Cj)(e.name),n=(0,P.ON)(),a="LOCAL"===e.subscriptionStatus&&e.isSoftDeleted,{ref:o,...s}=(0,z.X)(e.name),c=a?{"data-tooltip":(0,w.t)("variables.variable_was_deleted"),"data-tooltip-type":V.Ib.TEXT}:void 0,d=i.useCallback(()=>{r&&(n("row_copied",{type:"name"}),r())},[r,n]);return i.createElement(l.E,{className:er.L$,onClick:d,htmlAttributes:s??c},a&&i.createElement(Q.B3,null),i.createElement("span",{className:er.cG,ref:o,"data-testid":"var-details-name"},e.name))}function eo({variableId:e,libraryKey:r,isLocal:n,onClose:a,canOpenLibrary:s}){let l=(0,P.KP)("full_table",O.Nh.VariableDetailsModal),c=(0,M.b)({libraryKey:r,isDevHandoff:!0,isDevModeOverview:!1,isDevModeVarsTable:!0,devModeVarsTableSelection:e,devModeFocusId:void 0}),d=(0,B.B)(r||"",{enabled:!!r}),u=(0,R.g)({onShow:a,entryPoint:O.Nh.VariableDetailsModal,variableId:e});return n||"loaded"===c.status&&"loaded"===d.status?s?i.createElement(v.tH,{boundaryKey:"varsTable_detailsEntry",fallback:v.H4.NONE_I_KNOW_WHAT_IM_DOING,team:o.e.DEVELOPER_TOOLS,sentryTags:{area:o.e.DEVELOPER_TOOLS}},i.createElement(L.J,{libraryName:d?.data,containerClassName:er.Yv,link:c.data,isLocal:n,localFallback:(0,w.t)("dev_handoff.variables.details_local"),onClickLocalFallback:u,onTrackClickName:l,dataTestId:"var-details-library",recordingKey:"library_name"})):i.createElement(L.J,{libraryName:d?.data,containerClassName:er.Yv,isLocal:n,dataTestId:"var-details-library"}):i.createElement(L.J,{containerClassName:er.Yv,loading:!0})}let es=new class{format(e){return e.name}};function el({selectedMode:e,setSelectedMode:r,modeOptions:n,jumpsCollection:o}){let s=(0,a.wA)(),l=(0,P.ON)(),c=(0,U.Um)(),d=i.useMemo(()=>n.find(r=>r.id===e),[e,n]),u=(0,N.UP)(),p=i.useCallback(n=>{l("change_mode",{previous:e,current:n.id}),r(n.id)},[e,r,l]);if(!d||!n||n.length<2)return null;let m=u?o?er.i2:er.y2:er.IZ;return i.createElement($._p,{className:er.VL,disableDetailModalEntry:!0},i.createElement("span",{className:er.xZ},(0,w.tx)("dev_handoff.variables.details_mode")),i.createElement("span",{className:m,"data-testid":"var-details-mode"},i.createElement(q.l6,{id:"mode_dropdown",dispatch:s,dropdownShown:c,property:d,onChange:p,formatter:es},n.map(e=>i.createElement(q.c$,{key:`${e.id}`,value:e},e.name)))))}function ec({name:e,trackingName:r,trackingProps:n={},value:a,copyValue:o,children:s}){let l=(0,P.ON)(),c=i.useCallback(()=>{null!==o?l("row_copied",{type:r,...n}):l("row_clicked",{type:r,...n})},[o,l,r,n]);return s?i.createElement($._p,{copyValue:o,onCopy:c,disableDetailModalEntry:!0,showTooltipAbove:!0},s):i.createElement($._p,{name:e,value:a,copyValue:o,onCopy:c,disableDetailModalEntry:!0,showTooltipAbove:!0})}function ed(e,r){let n=(0,Z.Px)();return i.useMemo(()=>e&&r?{...n,[e]:r}:n,[n,e,r])}let eu=(0,et.ex)("variable_value_from_other_mode",function({modeName:e,collectionName:r}){return i.createElement("div",{className:I.s.cursorDefault.colorTextTooltip.wFitContent.$},(0,w.tx)("dev_handoff.variables.details_value_from_other_mode",{modeName:i.createElement("span",{className:I.s.fontSemiBold.$},e),collectionName:i.createElement("span",{className:I.s.fontSemiBold.$},r)}))},e=>({modeName:e.getAttribute("data-tooltip-mode"),collectionName:e.getAttribute("data-tooltip-collection")}));function ep({variableId:e,onClose:r,canOpenLibrary:n}){let a=(0,D.GS)(),d=(0,F.u)(e),m=d?.subscriptionStatus==="LOCAL",h=d?.subscriptionStatus==="LOCAL"&&d.isSoftDeleted,_=d?.subscriptionStatus==="SUBSCRIBED"?d.library_key:void 0,g=(0,P.KP)("full_table",O.Nh.VariableDetailsModal),f=(0,M.b)({libraryKey:_,isDevHandoff:!0,isDevModeOverview:!1,isDevModeVarsTable:!0,devModeVarsTableSelection:e,devModeFocusId:void 0}),y=f.data?.link,b=(0,R.g)({onShow:r,entryPoint:O.Nh.VariableDetailsModal,variableId:e}),T=i.useCallback(()=>{g({type:m?"local":"library"}),m&&b()},[m,g,b]);return d&&!h&&n&&(d?.subscriptionStatus!=="SUBSCRIBED"||"loaded"===f.status)?m?i.createElement("div",{className:er.Iw},a?i.createElement(s.K,{"aria-label":(0,w.t)("dev_handoff.variables.details_view_in_collection"),htmlAttributes:{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":(0,w.t)("dev_handoff.variables.details_view_in_collection")},onClick:T},i.createElement(u.E,null)):i.createElement(l.E,{"aria-label":(0,w.t)("dev_handoff.variables.details_view_in_collection"),className:er.YI,onClick:T,htmlAttributes:{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":(0,w.t)("dev_handoff.variables.details_view_in_collection")}},i.createElement(u.E,null))):f.data?.type==="community"?i.createElement(l.E,{disabled:!0,className:E()(er.WF,er.Iw),"aria-label":(0,w.t)("dev_handoff.variables.details_from_community"),htmlAttributes:{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":(0,w.t)("dev_handoff.variables.details_from_community")}},i.createElement(p.U,null)):y?i.createElement(v.tH,{boundaryKey:"varsTable_detailsEntry",fallback:v.H4.NONE_I_KNOW_WHAT_IM_DOING,team:o.e.DEVELOPER_TOOLS,sentryTags:{area:o.e.DEVELOPER_TOOLS}},i.createElement(c._,{className:E()(er.YI,er.Iw),newTab:!0,href:y,trusted:!0,onClick:T,"aria-label":(0,w.t)("dev_handoff.variables.details_view_in_collection"),htmlAttributes:{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":(0,w.t)("dev_handoff.variables.details_view_in_collection")}},i.createElement(u.E,null))):null:null}function em({variableData:e,varSetKeyToModeID:r,originalSetID:n,showArrow:a,showDotDotDot:o,numberOfAliases:s,showCollapsedTooltip:c,someAliasOutsideCollection:d,onToggle:u,onClose:p,canOpenLibrary:f}){let y=(0,N.UP)(),b=(0,F.u)(e.value),v=(0,F.BQ)(e.value,r),T=(0,F.t8)(e.value,r),I=(0,F.G6)(b?.variableSetId),S=(0,F.Kd)(b?.node_id),A=(0,W.Cj)(b?.name),C=(0,P.ON)(),L=i.useCallback(()=>{A&&(A(),C("row_copied",{type:"alias"}))},[A,C]),O=i.useMemo(()=>{if(b?.variableSetId===n||!S||!I)return null;let e=r?.[S]??I?.defaultModeID,i=I?.modes.find(r=>r.id===e);return i?{modeName:i.name,collectionName:I.name}:null},[n,I,r,b,S]),R=(0,w.t)("dev_handoff.variables.details_value_show_more",{count:s-2}),{ref:D,...M}=(0,z.X)(R),k="MIXED"!==v&&v?.type!==g.Z_n.COLOR,x=y&&!k;return i.createElement(i.Fragment,null,i.createElement("div",{className:E()(er.FO,y&&er.z4)},x?i.createElement(K.On,{color:v.value,variable:b,label:b?.name??(0,w.t)("variables.missing_name"),onClick:L,shouldStretch:!0}):i.createElement(Q.wG,{thumbnailValue:T,text:b?.name??(0,w.t)("variables.missing_name"),onClick:L,isDeleted:b?(0,J.eF)(b):void 0,fullWidth:y,containerClassName:y?er.dD:void 0}),d&&i.createElement("div",{className:er._Z},O&&i.createElement(m.B,{"data-tooltip-type":V.Ib.SPECIAL,"data-tooltip":eu,"data-tooltip-mode":O.modeName,"data-tooltip-collection":O.collectionName,className:er.LU})),!y&&i.createElement("div",{className:er.Dd}),i.createElement(ep,{onClose:p,variableId:e.value,canOpenLibrary:f})),a?i.createElement("div",{className:E()(er.aI,k&&er.S5)},i.createElement(h.Q,null)):o?i.createElement("div",{className:E()(er.my,k&&er.mH)},i.createElement(l.E,{onClick:u,"aria-label":(0,w.t)("dev_handoff.variables.details_value_expand_aria_label"),className:er.X1,htmlAttributes:M},i.createElement(_.f,{className:er.Kk}),i.createElement("div",{className:er.Pn,ref:D},R)),c&&i.createElement(m.B,{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":(0,w.t)("dev_handoff.variables.details_values_not_all_from_same_mode"),className:er.Kk})):null)}function eh({value:e,noChain:r}){let n=e?.type===g.Z_n.FLOAT?(0,$.nd)(e.value,""):e?.value?.toString(),a=(0,W.Cj)(n),o=(0,P.ON)(),{ref:s,...c}=(0,z.X)(n),d=i.useCallback(()=>{a&&(a(),o("row_copied",{type:"value"}))},[a,o]);switch(e.type){case g.Z_n.STRING:case g.Z_n.BOOLEAN:case g.Z_n.FLOAT:return i.createElement(l.E,{onClick:d,className:E()(er.Uq,e.type===g.Z_n.STRING&&er.TQ),htmlAttributes:{...c,"data-testid":"var-details-value"},ref:s},n);case g.Z_n.COLOR:return i.createElement(e_,{value:e,noChain:r});default:return null}}function e_({value:e,noChain:r}){let n=(0,N.UP)(),a=(0,k.Ku)(),o=(0,j.Ig)(),s=(0,Y.q)(e.value,a,o,{alphaInPercent:!0}).value,c=(0,W.Cj)(s),d=(0,P.ON)(),u=i.useCallback(()=>{c&&(c(),d("row_copied",{type:"value"}))},[c,d]),{ref:p,...m}=(0,z.X)(s),h={...m,"data-testid":"var-details-value"};return n?i.createElement("div",{className:er.b0},i.createElement(K._z,{color:e.value,value:s,onClick:u,labelRef:p,htmlAttributes:h,pillClassName:r?er.Jd:void 0})):i.createElement(l.E,{onClick:u,className:er.du,htmlAttributes:h},i.createElement(H.J,{color:e.value}),i.createElement("div",{className:er.qn,ref:p},s))}function eg(e,r,n){let a=ed(r,n),o=(0,F.u)(e),s=(0,F.Xv)(e,a),l=(0,F.hg)((s??[]).map(e=>e.type===g.Z_n.ALIAS?e.value:void 0)),c=o?.variableSetId;return i.useMemo(()=>l.some((e,r)=>!!e&&r>0&&e?.variableSetId!==c),[l,c])}function ef({variableId:e,currentVarSetKey:r,currentlySelectedModeId:n,expandByDefault:a,onClose:o,canOpenLibrary:s}){let l=(0,N.UP)(),[c,d]=i.useState(!1),u=a||c,p=ed(r,n),m=(0,F.u)(e),h=(0,F.Xv)(e,p),_=(0,P.ON)(),f=i.useCallback(()=>{_("toggle_alias_chain",{type:u?"collapse":"expand"}),d(e=>!e)},[u,_]),y=eg(e,r,n);if(!m||!h||0===h.length)return null;let b=h.length>2,v=h[0],T=h[h.length-1],I=h.length>1?u?h:[v,T]:[T];if(1===h.length&&(T.type===g.Z_n.STRING||T.type===g.Z_n.BOOLEAN||T.type===g.Z_n.FLOAT)){let e=T.type===g.Z_n.FLOAT?(0,$.nd)(T.value,""):T.value.toString();return i.createElement(ec,{trackingName:"value",name:(0,w.t)("dev_handoff.variables.details_value"),value:e,copyValue:e})}return i.createElement("div",{className:er.e9},i.createElement("span",{className:er.xZ},(0,w.tx)("dev_handoff.variables.details_value")),i.createElement("div",{className:E()(er.n8,T.type!==g.Z_n.COLOR&&er.jl,l&&T.type===g.Z_n.COLOR&&er.ZK,l&&T.type!==g.Z_n.COLOR&&er.mu)},I.map((e,r)=>{let n=r===I.length-1;return e.type===g.Z_n.ALIAS?i.createElement(em,{key:r,canOpenLibrary:s,numberOfAliases:h.length,onClose:o,onToggle:f,originalSetID:m?.variableSetId,showArrow:b?!n&&u:!n,showCollapsedTooltip:b&&!u&&y,showDotDotDot:!!b&&!n&&!u,someAliasOutsideCollection:y,varSetKeyToModeID:p,variableData:e}):i.createElement(eh,{key:r,value:e,noChain:1===h.length})})))}function eE({variableId:e}){let r=(0,F.u)(e),n=(0,P.ON)(),a=(0,w.t)("dev_handoff.variables.details_scope"),o=(0,z.X)(a);return r?.scopes&&r.scopes.length>0&&r.scopes[0]!==g.j0r.ALL_SCOPES?i.createElement(S.c,{className:er.e9,onClick:()=>n("row_clicked",{type:"scopes"})},i.createElement("span",{className:er.xZ},i.createElement("span",{className:er.qg,...o},a),i.createElement("div",{"data-tooltip":(0,w.t)("dev_handoff.variables.details_scope_info"),"data-tooltip-type":V.Ib.TEXT,className:er.Kk},i.createElement(m.B,null))),i.createElement("div",{className:er.Wu},r.scopes.map(e=>i.createElement("div",{key:e.toString(),className:er.qg,"data-testid":`var-details-scope-${e.toString()}`},(0,ee.Us)(e,{devMode:!0}))))):null}function ey({codeSyntax:e}){return e&&Object.keys(e).length>0?i.createElement(i.Fragment,null,i.createElement("div",{className:I.s.h8.$}),i.createElement($.VZ,{title:(0,w.t)("dev_handoff.variables.details_code_syntax"),recordingKey:"dev-var-details-code-syntax"},Object.entries(e).map(([e,r])=>{let n=(0,X.ov)(e);return null===n?null:i.createElement(ec,{key:n,trackingName:"code_syntax",trackingProps:{codeSyntaxPlatform:(0,X.r8)(n)},name:(0,X.lo)(n),value:r,copyValue:r})}))):null}},207702:(e,r,n)=>{n.d(r,{A8:()=>u,eT:()=>p});var i=n(848318),a=n(716544),o=n(39773),s=n(397579),l=n(185067);n(790355);var c=n(449737),d=n(773422);function u(){let e=(0,a.d4)(e=>"devModeVariablesTableSelectedVariable"in e.selectedView?e.selectedView.devModeVariablesTableSelectedVariable:void 0),r=(0,d.u)(e),n=(0,d.Rb)(),o=!!r,s=i.useMemo(()=>o&&"SUBSCRIBED"!==r.subscriptionStatus||!e?null:n.find(r=>e.includes(r.keyForPublish)),[o,e,n,r?.subscriptionStatus]);return s?s.node_id:r?.node_id??null}function p(){let e=(0,l.uQ)(),r=(0,s.ZC)(e),n=(0,a.wA)();i.useEffect(()=>{r&&e!==r&&n(c.AS())},[n,r,e])}n(834996),n(725608),(0,o.E3)("last-used-dev-mode-variable-set",null),(0,o.eU)("ALL_VARIABLES")},73091:(e,r,n)=>{n.d(r,{KP:()=>m,ON:()=>p,gs:()=>h});var i=n(848318),a=n(541525),o=n(464079),s=n(771313),l=n(155651);let c=i.createContext({}),d="dev_mode.variables.",u={};function p(){let e=(0,a.hC)(),{name:r,enabled:n=!0,trackingProps:o}=i.useContext(c);return i.useCallback((i,a=u)=>{r&&n&&e(d+r,{action:i,...o,...a})},[o,n,r,e])}function m(e,r){let n=(0,a.hC)();return i.useCallback((i=u)=>{n(d+e,{action:"click_on_entry_point",entrypoint:r,...i})},[r,e,n])}function h({children:e,enabled:r=!0,skipOpenAndClose:n=!1,name:p,trackingProps:m=u}){let h=(0,a.hC)(),_=(0,o.v4)().id,[g]=(0,s.$h)(),f=i.useMemo(()=>({codeLanguage:_,inspectView:g,...m}),[m,_,g]),E=i.useMemo(()=>({name:p,enabled:r,trackingProps:f}),[p,r,f]);return(i.useEffect(()=>{if(p&&r&&!n)return h(d+p,{action:"view_opened",...f}),()=>{h(d+p,{action:"view_closed",...f})}},[]),p)?i.createElement(l.fu,{name:p,enabled:r,properties:f},i.createElement(c.Provider,{value:E},e)):i.createElement(i.Fragment,null,e)}},431861:(e,r,n)=>{n.d(r,{cR:()=>l,d:()=>s,hv:()=>d,pc:()=>c});var i=n(39773),a=n(670673),o=n(475125);(0,i.eU)(void 0);let s=(0,i.eU)(!1),l=(0,i.eU)(!1),c=(0,i.eU)(!1),d=(0,a.Fu)(o.Ih)},629840:(e,r,n)=>{n.d(r,{D0:()=>s,zi:()=>o});var i=n(741419),a=n(442313);function o(e){switch(e){case i.zIx.BUILD:return(0,a.t)("dev_handoff.status.ready_for_dev");case i.zIx.COMPLETED:return(0,a.t)("dev_handoff.status.completed");case i.zIx.NONE:return null}}function s(e){if(e.length>0){let r=e[0].metadata;return{status:r?.status??null,nodes:e.map(e=>({id:e.node_id,name:e.node_name}))}}return{status:null,nodes:[]}}},119699:(e,r,n)=>{n.d(r,{Wl:()=>s,hA:()=>l,l7:()=>o,s4:()=>c}),n(848318);var i=n(716544);n(741419),n(39773),n(523035),n(541525),n(921494),n(935529),n(658890),n(34055),n(790355),n(912712),n(51910),n(207715),n(241917);var a=n(60546);function o(){return(0,i.d4)(e=>s(e.selectedView))}function s(e){return!!e&&e?.view==="fullscreen"&&e?.showOverview===!0}function l(){return(0,i.d4)(e=>c(e.selectedView)??null)}function c(e){if(e)return(0,a.$A)(e)?e.devModeFocusId:void 0}n(431861),n(942415)},500215:(e,r,n)=>{n.d(r,{L:()=>D});var i=n(988520),a=n(992277),o=n(741419),s=n(673906),l=n(39773),c=n(6819),d=n(695635),u=n(502255),p=n(963376),m=n(442313),h=n(536915),_=n(58802),g=n(935529),f=n(431861),E=n(629840),y=n(405866),b=n(481540),v=n(992444),T=n(913380),I=n(376780),S=n(635547),w=n(158349),A=n(779564),C=n(420861),N=n(200502);function L({status:e,prevStatus:r,source:n,numNodesUpdated:i,nodeId:a,nodeType:o,isReadOnly:s,description:l,isEdited:d}){let u=c.D.getState();(0,b.ds)("dev_handoff_edit_status",u.openFile?.key,u,{status:e,prevStatus:r,source:n,numNodesUpdated:i,nodeId:a,nodeType:o,isViewOnly:s,hasDescription:""!==l,description:l,isEdited:d},{forwardToDatadog:!0})}async function O(e,r,n,i,d){let p;let m=c.D.dispatch,h=c.D.getState(),_=h.openFile?.key||"",g=d??void 0,y=performance.now();if(l.zl.set(f.pc,!0),r===o.zIx.BUILD||r===o.zIx.COMPLETED)try{let e=await (0,w.m)(_,(0,E.zi)(r)??void 0,g,m,!0);p=e?.id,_&&!p&&(0,u.$D)(a.e.DEVELOPER_TOOLS,Error("[Dev mode activity] createSavepoint returned no id"))}catch(e){(0,u.$D)(a.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error creating version on status change: "+e.stack))}let v=!1;(0,s.l7)(s.zk.SYSTEM,"store-status-activity",()=>{A.e.recordStatusChange({fileKey:_,nodes:e,status:r,description:g,versionId:p}).then(()=>{v=!0}).catch(e=>{(0,u.$D)(a.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error creating activity: "+e.stack))}).finally(()=>{let r=performance.now()-y;(0,b.ds)("dev_handoff_status_activity",_,h,{elapsedMs:r,status:n,source:i,savedVersion:!!p,savedActivity:v,nodeIds:e.map(e=>e.id)},{forwardToDatadog:!0}),l.zl.set(f.pc,!1)})})}function R(e){switch(e){case o.zIx.BUILD:return"ready_for_dev";case o.zIx.COMPLETED:return"completed";default:return"none"}}async function P(e,r){let n=e.map(({id:e,isUpdated:n})=>n?{fileKey:r,nodeId:e}:null).filter(i.Vq);if(0===n.length)return{};let a=await (0,d.S8)(S.WND,n),o={};return a.forEach(({result:e},r)=>{if(e.data?.file.status==="loaded"){let i=e.data.file.data?.devModeActivity.filter(e=>e.activityType===I.o6.STATUS_CHANGE).sort((e,r)=>r.timestamp.getTime()-e.timestamp.getTime())||[],a=n[r],s=i[0];a&&s&&(o[a.nodeId]=s.id)}}),o}async function D({nodeIds:e,status:r,description:n,sourceForLogging:i,editScopeType:a}){let d=c.D.getState(),u=d.mirror.sceneGraph,E=d.openFile?.key??"",I=d.user?.id??"",S=o.w3z.isReadOnly(o.SES.NODE_STATUS),w=R(r),A=c.D.dispatch;if(r===o.zIx.BUILD){A((0,y.b)({has_marked_ready_for_dev:!0})),(0,p.YQ)({id:"marked_ready_for_dev",properties:{nodeIds:e}});let r=l.zl.get(_.hj);if(r&&e.includes(r)){let e=l.zl.get(_.d1);e.fn?.()}}let D=new Map,M=new Map,k=[];for(let n of e){let e=u.get(n);if(e){let i=e.getStatusInfo().status;D.set(n,e.hasBeenEditedSinceLastStatusChange),M.set(n,R(i));let a=(0,N.S7)(u,n,e.containingCanvas||""),s=i===o.zIx.BUILD&&r===o.zIx.BUILD,l="";if(e.containingCanvas){let r=u.get(e.containingCanvas);r&&(l=r.name)}k.push({id:n,name:e.name,type:e.type,pageName:l,prevStatus:i,previewBackground:a,isUpdated:s})}}if(S){let s=d.openFile,l={status:w,canAccessDevModeRaw:s?.canAccessFullDevMode,canAccessDevModeEntryPoint:s?.canAccessDevModeEntryPoint,canAccessDevMode:(0,g.tn)(d),fileRepoId:s?.fileRepoId,userOrgId:d.user?.org_id,currentTeamId:d.currentTeamId,currentUserOrgId:d.currentUserOrgId,source:i,numNodes:e.length,editScopeType:a,userIdForMultiplayer:I,linkAccess:s?.linkAccess,fileCanEdit:s?.canEdit,fileCanEditCanvas:s?.canEditCanvas,fileCanEditIgnoreEduGracePeriod:s?.canEditIgnoreEduGracePeriod,canManage:s?.canManage,canView:s?.canView,isTeamTemplate:s?.isTeamTemplate,isTryFile:s?.isTryFile,viewerExportRestricted:s?.viewerExportRestricted,fileHasPartialOrgUser:!!s?.currentPartialOrgUser,fileHasCurrentTeamUser:!!s?.currentTeamUser,hasEditRole:s?.hasEditRole?.data};(0,b.ds)("temp_debug_set_status_view_only",s?.key,d,l);let c=!1;setTimeout(()=>{c||(0,b.ds)("temp_debug_set_status_view_only_failed",s?.key,d,l)},2e3),o.h3O.sendSetNodeStatus(e,r,n??"",I);let[u]=await Promise.all([P(k,E),(0,T.n)()]);if(c=!0,(0,g.tn)(d))for(let{id:e,name:i,type:a,pageName:o,prevStatus:s,previewBackground:l}of k)C.f.recordStatusChange({fileKey:E,nodeId:e,nodeName:i,nodeType:a,status:r,prevStatus:s,description:n||void 0,pageName:o,previewBackground:l,prevActivityId:u[e]||null});for(let{id:a,type:o}of(O(k,r,w,i,n),k))L({status:w,source:i,numNodesUpdated:e.length,nodeId:a,nodeType:o,isReadOnly:S,description:n??"",prevStatus:M.get(a)??w,isEdited:D.get(a)??!1})}else{if(!navigator.onLine){(0,h.j)("offlineSettingNodeStatus",!0,{message:(0,m.t)("dev_handoff.status.offline")});return}(0,s.l7)(a,"set-nodes-status",()=>{for(let{id:e}of k){let i=u.get(e);i&&i.setStatus(r,I,n??void 0)}v.Y5.triggerAction("commit")});let o=await P(k,E);for(let{id:e,name:i,type:a,pageName:s,prevStatus:l,previewBackground:c}of k)(0,g.tn)(d)&&C.f.recordStatusChange({fileKey:E,nodeId:e,nodeName:i,nodeType:a,status:r,prevStatus:l,description:n||void 0,pageName:s,previewBackground:c,prevActivityId:o[e]||null});for(let{id:a,type:o}of(O(k,r,w,i,n),k))L({status:w,source:i,numNodesUpdated:e.length,nodeId:a,nodeType:o,isReadOnly:S,description:n??"",prevStatus:M.get(a)??w,isEdited:D.get(a)??!1})}!function(e){let r=l.zl.get(f.d),n=l.zl.get(f.cR),i=l.zl.get(f.hv)?.data;e!==o.zIx.BUILD||r||n||i||l.zl.set(f.d,!0)}(r)}},942415:(e,r,n)=>{n(848318),n(716544),n(992277);var i=n(39773);n(579020),n(541525),n(730169),n(502255),n(935529),(0,n(792478).Wh)(()=>(0,i.eU)(!1),{preserveValue:!1}),(0,i.eU)(""),(0,i.eU)("");var a=(e=>(e.ALL="ALL",e.RECENTLY_VIEWED="RECENTLY_VIEWED",e.BUILD="BUILD",e.COMPLETED="COMPLETED",e))(a||{}),o=(e=>(e.RECENT="RECENT",e.PAGE="PAGE",e.ALPHABETICAL="ALPHABETICAL",e))(o||{})},549090:(e,r,n)=>{n.d(r,{E1:()=>l,ei:()=>s});var i=n(921494),a=n(379338);n(51910);var o=n(166917);function s(e,r=!1,n){return(0,o.Fk)((e,r,i)=>r&&function(e,r,n){let i=e.get(r)?.editInfo;return!i||n&&i.userId===a.Ay().user_data?.id||0===i.lastEditedAt?null:(i.lastEditedAt=1e3*i.lastEditedAt,i.createdAt=1e3*i.createdAt,i)}(n??e,r,i)||null,e,r)}function l(){let{lastViewedStamp:e,lastEditedStamp:r}=(0,i.R)(e=>({fileKey:e.openFile?.key,lastViewedStamp:e.versionHistory.lastViewed,lastEditedStamp:e.versionHistory.lastEdited}));return function(e,r){if(!e)return r?new Date(r):void 0;if(!r)return e?new Date(e):void 0;let n=new Date(e),i=new Date(r);return n>i?n:i}(e,r)}var c=(e=>(e.NOT_RECENT="NOT_RECENT",e.RECENTLY_EDITED="RECENTLY_EDITED",e.RECENTLY_CREATED="RECENTLY_CREATED",e))(c||{})},817818:(e,r,n)=>{n.d(r,{t:()=>E});var i=n(848318),a=n(716544),o=n(493080),s=n(157907),l=n(303035),c=n(442313),d=n(106483),u=n(687174),p=n(790355),m=n(409851),h=n(831718),_=n(161922);let g=(e,r,n,i={})=>e?[{displayText:r||"",callback:n,...i}]:[],f=()=>{let e=(0,a.d4)(e=>e.dropdownShown);return e&&e?.type===d.jU?e:null};function E(e){let r=(0,a.wA)(),n=(0,a.d4)(e=>e.currentTeamId),d=(0,a.d4)(e=>e.currentUserOrgId),E=(0,a.d4)(e=>e.mobileNavShown),y=(0,a.d4)(e=>e.favorites.collapsedCustomSections),b=i.useMemo(()=>(0,m.t$)(e.sections,e.customSectionOrdering),[e.sections,e.customSectionOrdering]),v=f();if(null==v)return null;let{updateFavorite:T,resourceId:I,resourceType:S,isFavorited:w,currentSectionId:A}=e,C=function(e){let{dispatch:r,currentOrgId:n,currentTeamId:i,collapsedCustomSections:a,updateFavorite:o,resourceId:d,resourceType:m,isFavorited:_,currentSectionId:f,sections:E}=e,y=(e,i)=>{o(e,i),r(p.oB()),e&&i&&(a.delete(i),r(u.U6({collapsedCustomSections:a})),h.Fp({type:"topLevel",id:"custom",orgId:n,sectionId:i},!0))},b=E.map(e=>({displayText:""===e.name?(0,c.t)("sidebar.starred"):e.name,isChecked:_&&f===e.id,alwaysShowCheckMarkOffset:!0,callback:()=>y(!(_&&f===e.id),e.id)})),v=[...g(_,null,l.lQ,{separator:!0}),...g(_,(0,c.t)("favorited_resources.remove_from_sidebar"),()=>y(!1))],T=i&&(0,s.k)().ps_benchmark,I=[...g(!e.showFavoriteOptionsOnly&&!T,(0,c.t)("favorited_resources.create_a_new_section"),()=>{void 0===e.mobileNavShown||e.mobileNavShown||r(p.PY());let n=f?E.findIndex(e=>e.id===f):0;m&&r(u.to({movingResource:{resourceId:d,isFavorited:!0,resourceType:m}})),r(u.pS({newCustomSectionIndex:n})),r(p.oB())})],S=[{displayText:"",separator:!0}],w=E.find(e=>e.id===f),A=_?`${(0,c.t)("favorited_resources.indicate_section_prefix")}: ${w?.name||(0,c.t)("sidebar.starred")}`:(0,c.t)("favorited_resources.add_to_sidebar");return E.length>4?[{displayText:A,children:[...b,...S,...I]},...v]:[...g(!0,(0,c.t)("favorited_resources.add_to_sidebar"),l.lQ,{disabled:!0}),...b,...S,...v,...S,...I]}({dispatch:r,currentOrgId:d,currentTeamId:n,collapsedCustomSections:y,updateFavorite:T,resourceId:I,resourceType:S,isFavorited:w,currentSectionId:A,sections:b,mobileNavShown:E});return i.createElement(o.J,{enabled:(0,s.k)().file_browser_ia_overhaul_m1_dropdowns},i.createElement(_.j,{autofocusPrevOnDismount:!0,items:C,parentRect:v.data.targetRect,showPoint:!!e.showPoint,lean:"right",recordingKey:"organize-favorited-dropdown",dispatch:r,onSelectItem:(e,n)=>{e.callback?.("",{},r,n)},shouldUsePortal:!0}))}},712041:(e,r,n)=>{n.d(r,{E:()=>_,ce:()=>m,cv:()=>g,hZ:()=>f,rg:()=>h});var i=n(611504),a=n(6819),o=n(757033),s=n(280198),l=n(8374),c=n(219425),d=n(481540),u=n(293072);let p=e=>{let r=a.D.getState();if(!r.openFile)return;let n=r.openFile;n&&n.parentOrgId&&o.Ay.post(`/api/activity_logs/${n.key}`,{event_name:e})};function m(){p("fig_file_save_as")}let h=(0,l.nF)((e,r)=>{p("fig_file_export")}),_=(0,i.NC)("GET_ACTIVITY_LOGS");(0,l.nF)((e,r)=>{let{newQuery:n,teamId:i,emails:a,eventName:o,date:l}=r,p=e.getState();u.J.getActivityLogs({pageSize:"30",orgId:p.currentUserOrgId,startTime:l.start,endTime:(0,c.H3)(l.end),...i?{teamId:i}:null,...o?{eventName:JSON.stringify(o)}:null,...a?{emails:a.join()}:null,...n?null:{after:p.activityLogs.cursor.after}}).then(({data:r})=>{let s=r.meta,u=s[0],m=s[1],h=n?u:e.getState().activityLogs.logs.concat(u);e.dispatch(f({logs:h,cursor:m})),(0,d.Fr)("Activity Logs Fetched",p.currentUserOrgId,p,{teamIdFilter:i,eventNamesFilter:o,startDateFilter:l.start,endDateFilter:(0,c.H3)(l.end),filtersOnActorEmail:!!a&&a.length>0,filtersOnActedOnEmail:!!a&&a.length>0,isNewQuery:n,numberOfResults:u.length})}).catch(r=>{let n=r.data?.message||"An error occurred while fetching activity logs.";e.dispatch(s.s.flash(n))}),e.dispatch(_(r))});let g=(0,i.NC)("CLEAR_CURSOR_ACTIVITY_LOGS"),f=(0,i.NC)("SET_ACTIVITY_LOGS")},972574:(e,r,n)=>{n.d(r,{ZH:()=>c,_M:()=>s,r$:()=>l,r5:()=>d});var i=n(611504),a=n(322035),o=n(141039);let s=(0,n(8374).nF)(e=>{a.R7.fullscreen&&(e.getState().appWindow.inFullScreenMode?(o.eD?.setFullScreen(!1),a.R7.getFullscreenElement()?a.R7.exitFullscreenFunc():e.dispatch(c())):(o.eD?.setFullScreen(!0),a.R7.requestFullscreenFunc.call(document.documentElement)))}),l=(0,i.NC)("WINDOW_DID_ENTER_FULL_SCREEN"),c=(0,i.NC)("WINDOW_DID_EXIT_FULL_SCREEN");function d(e){a.R7.fullscreen&&(document.addEventListener(a.R7.fullscreenChangeEventName,function(r){let n=e.getState();a.R7.getFullscreenElement()&&!n.appWindow.inFullScreenMode?e.dispatch(l()):n.appWindow.inFullScreenMode&&e.dispatch(c())}),document.addEventListener(a.R7.fullscreenErrorEventName,function(r){console.warn("failed to enter fullscreen:",r),e.getState().appWindow.inFullScreenMode&&e.dispatch(c())}))}},124948:(e,r,n)=>{n.d(r,{DF:()=>g,TP:()=>f,Y3:()=>y,h0:()=>b,vv:()=>h,zE:()=>E});var i=n(39773),a=n(611504),o=n(579020),s=n(141039),l=n(8374),c=n(790355),d=n(592981),u=n(96321),p=n(868417),m=n(997894);let h=(0,l.nF)(async(e,r)=>{let n=e.getState()?.user?.id;if(!n)return;let i=Object.keys(r);await (0,u.wI)(n,i),p.hp.sendToAllTabs(p.c6,i),(0,o.sx)("Delete New Autosave Files",{deletedCount:i.length})}),_=(0,l.nF)(async e=>{let r=e.getState(),n=r.user?.id;if(!n)return;await (0,u.JI)(n);let i=await (0,u.kl)(n);e.dispatch(y({filesWithChangesInIDB:i.unsyncedFiles,filesCreatedOffline:i.newFiles})),e.dispatch(f(i.nextGarbageCollectionTimestamp))}),g=(0,a.NC)("SET_AUTOSAVE_ONBOARDING_TOOLTIP_VISIBLE"),f=(0,a.NC)("SET_AUTOSAVE_NEXT_GARBAGE_COLLECTION_TIMESTAMP"),E=(0,a.NC)("SET_AUTOSAVE_SNOOZE"),y=(0,a.NC)("SET_UNCLAIMED_FILES");function b(e){p.hp.register(p.ec,()=>(function(e){let r=e.getState().user?.id??null;m.M4.fetch((0,u.OL)({userId:r}),{policy:"networkOnly"})})(e)),p.hp.register(p.c6,r=>(function(e,r){let n=i.zl.get(d.h);n&&r.includes(n)&&(s.eD?s.eD.close({suppressReopening:!0,shouldForceClose:!0}):e.dispatch(c.$T({view:"recentsAndSharing"}))),e.dispatch(_())})(e,r)),p.hp.register(p.m6,({localFileKey:e,realFileKey:r})=>(0,u.Gc)(e,r))}},365379:(e,r,n)=>{n.d(r,{AY:()=>v,PI:()=>y,_E:()=>f,nx:()=>E,pI:()=>T,s6:()=>I});var i=n(741419),a=n(611504),o=n(669602),s=n(757033),l=n(280198),c=n(442313),d=n(697714),u=n(8374),p=n(4313),m=n(106067),h=n(957925);n(104720);var _=n(454916),g=n(465584);function f(e,r,n,i){let a=document.createElement("canvas"),o=a.getContext("2d");return a.width=a.height=r,o.fillStyle="image/png"===i?"transparent":"#FFF",o.fillRect(0,0,r,r),o.drawImage(a,0,0),o.drawImage(e,n.x,n.y,n.width,n.height),"image/png"===i?a.toDataURL():a.toDataURL("image/jpeg",.92)}function E(e){let r=atob(e.slice(e.indexOf(",")+1)),n=[];for(let e=0;e<r.length;e++)n.push(r[e].charCodeAt(0));return new Uint8Array(n)}let y=(0,a.NC)("AVATAR_EDITOR_RESET"),b=(0,u.nF)((e,r)=>{if(r.entityType===_.ck.CURRENT_USER)s.Ay.put("/api/user",{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;n?.img_url&&i.h3O?.setImgUrl(n.img_url),e.dispatch(h.yJ({user:n,userInitiated:!1})),e.dispatch(y())},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"))),console.error((0,c.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"),r),e.dispatch(y())});else if(r.entityType===_.ck.TEAM){let n=r.entity.id;s.Ay.put(`/api/teams/${n}`,{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;e.dispatch(m.yJ({team:n,userInitiated:!1})),e.dispatch(y()),e.dispatch(d.F.enqueue({message:(0,c.t)("avatar_actions.team_icon_updated")}))},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon"))),console.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon")),e.dispatch(y())})}else if(r.entityType===_.ck.ORG){let n=r.entity.id;s.Ay.put(`/api/orgs/${n}`,{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;e.dispatch(p.yJ({org:n})),e.dispatch(y())},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred")+r.data?.message)),console.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_organization_icon"),r),e.dispatch(y())})}else if(r.entityType===_.ck.WORKSPACE){let n=r.entity.id;g.u.updateImage({workspaceId:n,img_url:r.smallUrl,img_url_500_500:r.largeUrl,onfulfilled:()=>{e.dispatch(d.F.enqueue({message:(0,c.t)("avatar_actions.workspace_icon_updated")}))},onrejected:r=>{let n=(0,c.t)("avatar_actions.an_error_occurred_while_setting_the_workspace_icon");e.dispatch(l.s.error(n)),console.error(n),e.dispatch(y())}})}}),v=(0,a.NC)("AVATAR_EDITOR_UPLOAD"),T=(0,u.nF)((e,r)=>{Promise.all([(0,o.Q)("profile",r.small,r.contentType),(0,o.Q)("profile",r.large,r.contentType)]).then(function(n){let i=n[0].data.meta.url,a=n[1].data.meta.url;e.dispatch(b({entity:r.entity,entityType:r.entityType,smallUrl:i,largeUrl:a}))},()=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred_while_uploading_the_image"))),e.dispatch(y())}),e.dispatch(v(r))}),I=(0,a.NC)("AVATAR_EDITOR_INIT")},176065:(e,r,n)=>{n.d(r,{DI:()=>c,NY:()=>d,V2:()=>o,cL:()=>u,dY:()=>s,sV:()=>a,zx:()=>l});var i=n(611504);let a=(0,i.NC)("CANVAS_SEARCH_SET_MODE"),o=(0,i.NC)("CANVAS_SEARCH_SET_SCOPE"),s=(0,i.NC)("CANVAS_SEARCH_CLEAR_CATEGORY_FILTERS"),l=(0,i.NC)("CANVAS_SEARCH_SWITCH_CATEGORY_FILTER_EXCLUSIVE"),c=(0,i.NC)("CANVAS_SEARCH_TOGGLE_CATEGORY_FILTER"),d=(0,i.NC)("CANVAS_SEARCH_SET_QUERY"),u=(0,i.NC)("CANVAS_SEARCH_RESET")},196484:(e,r,n)=>{n.d(r,{$0:()=>ea,$M:()=>eN,AY:()=>H,At:()=>X,C:()=>U,CX:()=>eo,Df:()=>ex,F8:()=>es,Fm:()=>e_,Jc:()=>ek,Mv:()=>z,NJ:()=>eh,Oo:()=>em,PB:()=>eC,Q8:()=>ec,QD:()=>eD,QY:()=>G,Qe:()=>eg,RI:()=>ey,RO:()=>ew,RP:()=>eu,Tb:()=>K,U3:()=>eA,UU:()=>ei,We:()=>eE,Z5:()=>eR,_B:()=>en,_v:()=>q,a$:()=>el,bB:()=>J,cL:()=>ez,dB:()=>B,gi:()=>ee,hY:()=>Y,hx:()=>$,i4:()=>ef,js:()=>e$,k7:()=>eM,l5:()=>Z,lI:()=>er,lV:()=>et,li:()=>eB,nL:()=>eb,nb:()=>eO,on:()=>eP,pD:()=>Q,pI:()=>eH,q4:()=>eL,rW:()=>j,sQ:()=>ev,uy:()=>eF,uz:()=>eU,vV:()=>ed,wJ:()=>eV,wg:()=>ep,xH:()=>eI,y3:()=>eG,yH:()=>eK,z$:()=>W});var i=n(741419),a=n(897392),o=n(157907),s=n(39773),l=n(115321),c=n(611504),d=n(579020),u=n(193324),p=n(586994),m=n(858423),h=n(112920),_=n(502255),g=n(896966),f=n(757033),E=n(280198),y=n(442313),b=n(719398),v=n(697714),T=n(8374),I=n(790355),S=n(467298),w=n(481540),A=n(417944),C=n(147217),N=n(992444),L=n(834111),O=n(830789),R=n(336800),P=n(555547),D=n(694807),M=n(449737),k=n(423253),F=n(557675),x=n(405866);async function U(e,r,n,i,a){await V(a.messageMeta,e,r,n,i).then(r=>{e(q({comment:a.comment,messageMeta:a.messageMeta,attachmentUpdates:a.attachmentUpdates,forceWithInvite:r,forceMention:r,onCommentValidationFailure:void 0}))}).catch(()=>{})}async function B(e,r,n,i,a,o,s,l){return await V(o.messageMeta,r,n,i,a).then(n=>{r(ek({threadId:o.threadId,reply:{messageMeta:o.messageMeta,attachments:o.attachments}})),r(et({commentsWriteApi:e,threadId:o.threadId,threadUuid:o.threadUuid,uuid:s,forceWithInvite:n,forceMention:n,onCommentValidationFailure:void 0,commentsConfiguration:l}))}).catch(()=>{r(eL({threadId:o.threadId,resetStatusOnly:!0})),r(ek({threadId:o.threadId,reply:{messageMeta:o.messageMeta,attachments:o.attachments}}))})}function V(e,r,n,i,a){return new Promise(o=>{r((0,M.to)({type:D.VB,data:{messageMeta:e,dispatch:r,usersWithoutAccess:n,externalUsersWithoutAccess:i,uninvitableUsers:a,onConfirm:()=>o(!0),onCancel:()=>o(!1)}}))})}let G=(0,T.nF)((e,r)=>{let{receiptsAPI:n,comment:i}=r;n.markAsUnread(i.id).catch(r=>{let n=(0,y.t)("comments.an_error_occurred_while_marking_a_comment_as_unread");try{r=JSON.parse(r),e.dispatch(E.s.error((0,b.J)(r,n)))}catch(r){e.dispatch(E.s.error(n))}})}),H=(0,T.nF)((e,r)=>{let{receiptsAPI:n,thread:i}=r;n.markAsRead(i.comments.map(e=>e.id)).catch(r=>{let n=(0,y.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{r=JSON.parse(r),e.dispatch(E.s.error((0,b.J)(r,n)))}catch(r){e.dispatch(E.s.error(n))}})}),K=(0,T.nF)((e,r)=>{let{commentReceiptsAPI:n,canvasMentionReceiptsAPI:i}=r;n.markAllAsRead().catch(r=>{let n=(0,y.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{r=JSON.parse(r),e.dispatch(E.s.error((0,b.J)(r,n)))}catch(r){e.dispatch(E.s.error(n))}}),i.markAllAsRead().catch(r=>{let n=(0,y.t)("whiteboard.an_error_occurred_while_marking_a_canvas_mention_as_read");try{r=JSON.parse(r),e.dispatch(E.s.error((0,b.J)(r,n)))}catch(r){e.dispatch(E.s.error(n))}})});(0,T.nF)((e,r)=>{let{reactionsApi:n,id:i,emoji:a}=r,o=n.removeReaction(i,a),s=(0,y.t)("comments.an_error_occurred_while_removing_a_comment_reaction");e.dispatch((0,E.Q)({promise:o,fallbackError:s}))}),(0,T.nF)((e,r)=>{let n=e.getState(),{reactionsApi:i,id:a,emoji:o}=r,s=i.addReaction(a,o,{prototype_mode:"prototype"===n.selectedView.view,selectedView:n.selectedView.view,quickReply:!1}),l=(0,y.t)("comments.an_error_occurred_while_adding_a_comment_reaction");e.dispatch((0,E.Q)({promise:s,fallbackError:l}))});let W=(0,T.nF)((e,r)=>{let{reactionsApi:n,id:i}=r,{emoji:a}=r,o=e.getState();(0,p.uD)(a)&&null!==(0,p.$f)()&&(a=(0,p.Kh)(a)[0]+(0,p.$f)());let s=n.toggleReaction(i,a,{prototype_mode:"prototype"===o.selectedView.view,selectedView:o.selectedView.view,quickReply:r.quickReply}),l=(0,y.t)("comments.an_error_occurred_while_toggling_a_comment_reaction");e.dispatch((0,E.Q)({promise:s,fallbackError:l}))}),z=(0,T.nF)((e,r)=>{let n;let{comment:i}=r,{key:a,id:o,uuid:s,parent_id:l}=i,c=f.Ay.del(`/api/file/${a}/comments/${o}`),u=(0,y.t)("comments.an_error_occurred_while_deleting_this_comment");e.dispatch((0,E.Q)({promise:c,fallbackError:u})),S.O.remove(o),n=s?(0,m.WB)().optimisticallyDeleteWithUUID({Comment:{[s]:null}},c):(0,m.WB)().optimisticallyDelete({Comment:{[o]:null}},c),(0,d.sx)("Livegraph Optimistic Comment Update",{flow:"setDeleted",isOptimistic:!!s}),(0,h.f)(n,e.dispatch,eK({comment:{id:o,parent_id:l}}))}),$=(0,T.nF)((e,{thread:{key:r,id:n,uuid:i},resolved:a})=>{let s=e.getState();if(a&&s.comments.activeThread?.id===n&&!s.comments.showResolved&&e.dispatch(ei()),(0,o.k)().comments_undo_resolve&&a){let a={text:(0,y.t)("comments.undo"),action:()=>{e.dispatch($({thread:{key:r,id:n,uuid:i},resolved:!1}))}};e.dispatch(v.F.enqueue({message:(0,y.t)("comments.comment_resolved"),type:"comment-resolved",button:a,onDismiss:()=>{}}))}S.O.remove(n);let l=a?"true":"false",c=a?(0,y.t)("comments.an_error_occurred_while_resolving_this_comment"):(0,y.t)("comments.an_error_occurred_while_unresolving_this_comment");if(i&&(0,u.L4)(n)){let n=(0,m.WB)().getIdFromUuid("Comment",i).then(n=>{let i=f.Ay.put(`/api/file/${r}/comments/${n}`,{resolved_at:l});return e.dispatch((0,E.Q)({promise:i,fallbackError:c})),i});(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[i]:{uuid:i,resolvedAt:a?new Date:null}}},n),(0,d.sx)("Livegraph Optimistic Comment Update",{flow:"setResolvedUsingGetIdFromUUID",isOptimistic:!0})}else{let o=f.Ay.put(`/api/file/${r}/comments/${n}`,{resolved_at:l});e.dispatch((0,E.Q)({promise:o,fallbackError:c})),i?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[i]:{uuid:i,resolvedAt:a?new Date:null}}},o):(0,m.WB)().optimisticallyUpdate({Comment:{[n]:{resolvedAt:a?new Date:null}}},o),(0,d.sx)("Livegraph Optimistic Comment Update",{flow:"setResolved",isOptimistic:!!i})}}),Y=(0,T.nF)((e,{thread:{key:r,id:n,uuid:i},clientMeta:a})=>{let o;i&&(0,u.L4)(n)?(o=(0,m.WB)().getIdFromUuid("Comment",i).then(e=>f.Ay.put(`/api/file/${r}/comments/${e}`,{client_meta:a})),(0,d.sx)("Livegraph Optimistic Comment Update",{flow:"setClientMetaWithGetIdFromUUID",isOptimistic:!0})):(o=f.Ay.put(`/api/file/${r}/comments/${n}`,{client_meta:a}),(0,d.sx)("Livegraph Optimistic Comment Update",{flow:"setClientMeta",isOptimistic:!!i}));let s=(0,y.t)("comments.an_error_occurred_while_moving_this_comment");e.dispatch((0,E.Q)({promise:o,fallbackError:s})),i?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[i]:{uuid:i,clientMeta:{x:a.x,y:a.y,pageId:void 0===a.page_id?null:a.page_id,nodeId:void 0===a.node_id?null:a.node_id,nodeOffset:void 0===a.node_offset?null:a.node_offset,inFrame:void 0===a.in_frame?null:a.in_frame,selectionBoxAnchor:a.selection_box_anchor?a.selection_box_anchor:null,stablePath:a.stable_path?a.stable_path:null}}}},o):(0,m.WB)().optimisticallyUpdate({Comment:{[n]:{clientMeta:{x:a.x,y:a.y,pageId:void 0===a.page_id?null:a.page_id,nodeId:void 0===a.node_id?null:a.node_id,nodeOffset:void 0===a.node_offset?null:a.node_offset,inFrame:void 0===a.in_frame?null:a.in_frame,selectionBoxAnchor:a.selection_box_anchor?a.selection_box_anchor:null,stablePath:a.stable_path?a.stable_path:null}}}},o)}),j=(0,c.NC)("COMMENTS_SET_COMMENT_CONTENT"),q=(0,T.nF)((e,r)=>{let n=r.comment.key;if(!n||(0,u.I)(r.messageMeta)){e.dispatch(j());return}let i=(0,u.cs)(r.messageMeta),a=f.Ay.put(`/api/file/${n}/comments/${r.comment.id}`,{message_meta:r.messageMeta,attachment_updates:(0,O.Gq)(r.attachmentUpdates),share_to_mentions:r.forceWithInvite||!1,force:r.forceMention||!1,pending_mentions:i}).then(({data:r})=>{r.message?.warning_message&&0!==r.message.warning_message.length&&e.dispatch(v.F.enqueue({type:"at-mention-error",message:r.message.warning_message}))}).catch(e=>{let n=e.data?.reason?.failure_info;e.data?.reason?.reason!=="comment_validation_failure"||void 0===n||!r.onCommentValidationFailure||r.forceMention||r.forceWithInvite||r.onCommentValidationFailure(n.users_without_view,n.ext_users_without_view,n.uninvitable_users,{comment:r.comment,messageMeta:r.messageMeta})}),o=(0,y.t)("comments.an_error_occurred_while_editing_this_comment");e.dispatch((0,E.Q)({promise:a,fallbackError:o}));let s=r.comment.uuid,l=(0,u.Rc)(r.messageMeta);if(s?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[s]:{uuid:s,messageMeta:l,messageMetaStylized:l}}},a):(0,m.WB)().optimisticallyUpdate({Comment:{[r.comment.id]:{messageMeta:l,messageMetaStylized:l}}},a),(0,d.sx)("Livegraph Optimistic Comment Update",{flow:"updateCommentContent",isOptimistic:!!s}),r.attachmentUpdates){let e=(0,A.LO)(r.attachmentUpdates.deleted);e?(0,m.WB)().optimisticallyDelete({CommentAttachment:e},a):(0,m.WB)().emitEvent({type:"EMPTY_SYNC",source:"comment_delete"});let n=(0,A.Mu)(Object.values(r.attachmentUpdates.attachments),r.comment.key,r.comment.id);n?(0,m.WB)().optimisticallyCreate({CommentAttachment:n},a):(0,m.WB)().emitEvent({type:"EMPTY_SYNC",source:"comment_create"})}e.dispatch(j())}),X=(0,T.nF)(async(e,r)=>{let n=e.dispatch(Z(r));if(!n||r.thread.isPendingFromSinatra)return;let o=r.thread.comments[0];if(!o)return;let s=e.getState(),l=o.client_meta?.node_id,c=o.client_meta?.stable_path?o.client_meta.stable_path:a.EP;!c&&l&&(c=[l]);let u=r.thread.id,p=r.source;o.client_meta?.page_id&&"communityHub"===s.selectedView.view&&(u!==s.selectedView.commentThreadId&&e.dispatch(I.$T({...s.selectedView,commentThreadId:u})),s.selectedView.commentThreadId&&(0,d.sx)("Comment Thread Read",{commentThreadId:u,threadType:"community_preview"})),await n,e.dispatch(e_({threadId:u,source:p})),r.thread.comments.some(e=>e.isUnread)&&r.receiptsAPI&&!r.thread.isPendingFromSinatra&&!r.thread.isCanvasMention&&(e.dispatch(H({receiptsAPI:r.receiptsAPI,thread:r.thread})),(0,d.sx)("Comment Thread Read",{commentThreadId:u})),"fullscreen"===s.selectedView.view&&i.glU.setActiveCommentAnchorData({stablePath:`[${c.join(",")}]`})}),Z=(0,T.nF)((e,r)=>{let n=e.getState();if(n.comments.activeThread&&n.comments.activeThread.id!==r.thread.id&&!r.skipDeactivatingExistingActiveComment&&!e.dispatch(ei()))return null;n=e.getState();let{thread:a,viewport:o,config:s,navigate:c,isOrphanedComment:d}=r,{setCurrentPageIdAsync:u,pageIdForNodeId:p}=o;if(!o.getViewportInfo())return null;let m=a.comments[0];if(!m)return null;let h=m.client_meta?.node_id,_=a.page||h&&p(h)||m.client_meta?.page_id,g=[],f=n.mirror?.appModel?.currentPage,E=!1;_&&(E=f!==_,g.push(u(_).then(async()=>{E&&await (0,l.yQ)()})));let y=n.mirror.appModel.currentTool===i.NLJ.COMMENTS;if(!d&&s.repositionViewportOnCommentSelection){let e=c((0,C.E)(a,o,n.selectedView,E,y),{jump:E,jumpOnAbort:!0});e&&g.push(e)}return Promise.all(g).then()}),J=(0,T.nF)((e,r)=>{let n=e.getState();n.comments.activeThread?.id===r.thread.id?e.dispatch(ei()):(r.skipDeactivatingExistingActiveComment||e.dispatch(ei()),(0,u.H3)(n.comments)&&(e.dispatch(X(r)),s.zl.set(R.m,null)))}),Q=(0,c.NC)("COMMENTS_STOP_EDITING"),ee=(0,c.NC)("COMMENTS_SUBMIT_REPLY"),et=(0,T.nF)((e,r)=>{let n=e.getState(),{commentsWriteApi:a,commentsConfiguration:s}=r,l=n.comments.threads[r.threadId],[c,d]=a.reply({threadId:r.threadId,threadUuid:r.threadUuid,uuid:r.uuid,messageMeta:l.reply.messageMeta,attachments:Object.values(l.reply.attachments||{})},{forceMention:r.forceMention||!1,forceWithInvite:r.forceWithInvite||!1,prototypeMode:"prototype"===n.selectedView.view,trackingContext:r.trackingContext});(0,o.k)().comments_faster_saving_ux&&!(0,o.k)().comments_faster_saving_ux_v2&&e.dispatch(eB({commentUuid:r.uuid})),e.dispatch(ek({threadId:r.threadId,reply:{messageMeta:[],attachments:{}}})),c.then(r=>{if(!r)return;let{data:a}=r;if(a.message?.warning_message&&0!==a.message.warning_message.length&&e.dispatch(v.F.enqueue({type:"at-mention-error",message:a.message.warning_message})),a.message&&a.message.is_new_file_follower){let r=s.showNotificationSettings?{text:(0,y.t)("comments.manage"),action:()=>{let r=e.getState();e.dispatch(ei()),r.mirror.appModel.showUi||N.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==i.NLJ.COMMENTS&&N.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(I.j7({type:P.a}))})}}:void 0;e.dispatch(v.F.enqueue({message:(0,y.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:r,onDismiss:()=>{}}))}let l=a.meta;e.dispatch(eW({comment:l,userInitiated:!1})),w.ds("Comment Submitted",l.key,n,{commentId:l.id,parentCommentId:l.id,selectedView:n.selectedView.view,isDevModeFocusView:!!e.getState().selectedView?.devModeFocusId}),(0,o.k)().comments_faster_saving_ux_v2&&l.id&&l.uuid&&e.dispatch(eG({commentId:l.id,commentUuid:l.uuid})),e.getState().userFlags.has_created_comment||e.dispatch(x.b({has_created_comment:!0}))}).catch(n=>{let i=n.data?.reason?.failure_info;if(n.data?.reason?.reason!=="comment_validation_failure"||void 0===i||!r.onCommentValidationFailure||r.forceMention||r.forceWithInvite){let i=(0,b.J)(n,(0,y.t)("comments.an_error_occurred"));e.dispatch(E.s.error(i)),e.dispatch(eL({threadId:r.threadId,resetStatusOnly:!0})),e.dispatch(ek({threadId:r.threadId,reply:l.reply}));return}r.onCommentValidationFailure(i.users_without_view,i.ext_users_without_view,i.uninvitable_users,{threadId:r.threadId,messageMeta:l.reply.messageMeta,attachments:l.reply.attachments})}).finally(()=>{(0,o.k)().comments_faster_saving_ux&&!(0,o.k)().comments_faster_saving_ux_v2&&e.dispatch(eV({commentUuid:r.uuid}))}),e.dispatch(ee(r))}),er=(0,c.NC)("COMMENTS_SUBMIT_NEW_COMMENT"),en=(0,T.nF)((e,r)=>{(0,d.sx)("New comment starting dispatched action",{uuid:r.uuid});let n=e.getState(),a=(0,L.U2)(n.selectedView);if(!a)return Promise.resolve();let s=r.newCommentState||n.comments.newComment,{canvasPosition:l,nodeId:c,nodeOffset:u,inFrame:p,pageId:m,viewport:h,stablePath:_}=r.destination,g=s.selectionBoxAnchor?s.selectionBoxAnchor:void 0;e.dispatch(ei({force:!0})),e.dispatch(eN({resetStatusOnly:!1}));let{messageMeta:f,attachments:E}=s;(0,d.sx)("New comment creating promise",{uuid:r.uuid});let[T,S]=r.commentsWriteApi.create({fileKey:a,messageMeta:f,attachments:Object.values(E),pageId:m,uuid:r.uuid,clientMeta:{x:l.x,y:l.y,node_id:c,node_offset:u,page_id:m,viewport:h,in_frame:p,selection_box_anchor:g,stable_path:_}},{prototypeMode:"prototype"===n.selectedView.view,onValidationError:async(r,n,i)=>{if(await V(s.messageMeta,e.dispatch,r,n,i))return{forceMentions:!0,forceWithInvite:!0};if(0!==e.getState().comments.newComment.messageMeta.length){e.dispatch(eN({resetStatusOnly:!0}));let r={text:(0,y.t)("comments.view"),action(r,n){if(e.getState().comments.activeThread?.id===O.hm&&e.getState().comments.newComment.messageMeta.length>0)return e.dispatch(eS()),e.dispatch(v.F.update({id:n,message:(0,y.t)("comments.finish_or_clear_your_active_comment_then_hit_view")})),!1;e.dispatch(eC(s)),e.dispatch(eo())}};e.dispatch(v.F.enqueue({type:`comment-creation-failure: ${S}`,error:!1,message:(0,y.t)("comments.oops_one_of_your_comments_never_posted"),onDismiss:()=>{},button:r,timeoutOverride:1/0}));return}e.dispatch(eC(s)),e.dispatch(eo()),e.dispatch(eS())}});return(0,o.k)().comments_faster_saving_ux&&!(0,o.k)().comments_faster_saving_ux_v2&&e.dispatch(eB({commentUuid:r.uuid})),e.dispatch(er(r)),T.then(p=>{if((0,d.sx)("New comment promise resolved",{uuid:r.uuid}),!p)return;let{data:h}=p;if((0,L.U2)(e.getState().selectedView)!==a)return;if(h.message?.warning_message&&0!==h.message.warning_message.length&&e.dispatch(v.F.enqueue({type:"at-mention-error",message:h.message.warning_message})),h.message&&h.message.is_new_file_follower){let n=r.commentsConfiguration.showNotificationSettings?{text:(0,y.t)("comments.manage"),action:()=>{let r=e.getState();e.dispatch(ei({force:!0})),r.mirror.appModel.showUi||N.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==i.NLJ.COMMENTS&&N.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(I.j7({type:P.a}))})}}:void 0;e.dispatch(v.F.enqueue({message:(0,y.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:n,onDismiss:()=>{}}))}let g=h.meta,f=e.getState().comments.newComment!==s;e.dispatch(eN({resetStatusOnly:f})),(0,o.k)().comments_faster_saving_ux_v2&&g.id&&g.uuid&&e.dispatch(eG({commentId:g.id,commentUuid:g.uuid})),w.ds("Comment Submitted",a,n,{commentId:g.id,locationX:l&&l.x,locationY:l&&l.y,nodeId:c,pageId:m,nodeOffsetX:u&&u.x,nodeOffsetY:u&&u.y,selectedView:n.selectedView.view,stablePath:_,isDevModeFocusView:!!e.getState().selectedView?.devModeFocusId}),e.getState().userFlags.has_created_comment||e.dispatch(x.b({has_created_comment:!0})),e.dispatch((0,k.zq)({lastCreatedCommentId:g.id}))}).catch(n=>{if(e.dispatch(eN({resetStatusOnly:!0})),!(n?.data?.status>=400&&n?.data?.status<500&&n?.data?.message))return e.dispatch(v.F.enqueue({type:`comment-creation-failure: ${S}`,message:(0,y.t)("comments.couldn_t_post_your_comment"),error:!0,button:{text:(0,y.t)("comments.retry"),action(){(0,d.sx)("New comment dispatching retry submission",{uuid:r.uuid}),e.dispatch(en({...r,newCommentState:s}))}}}));{let r=(0,b.J)(n);if(r)return e.dispatch(v.F.enqueue({type:`comment-creation-failure: ${S}`,message:r,error:!0}))}}).finally(()=>{(0,o.k)().comments_faster_saving_ux&&!(0,o.k)().comments_faster_saving_ux_v2&&e.dispatch(eV({commentUuid:r.uuid}))})}),ei=(0,T.nF)((e,r)=>{let n=e.getState(),o=r instanceof Object&&r.force,{newComment:s}=n.comments,l=n.comments.activeThread?.id,c=(0,u.Kx)(s.messageMeta)&&0===Object.keys(s.attachments).length;if(!o&&!c&&!(0,u.H3)(n.comments))return e.dispatch(eS()),!1;let d=l&&n.comments.threads[l],p=d&&(0,u.Kx)(d.reply.messageMeta)&&0===Object.keys(d.reply.attachments||{}).length;if(!o&&l&&d&&!p&&(!d.discardAttempts||d.discardAttempts<1))return e.dispatch(eT(l)),!1;let m=n.comments.editingComment;return!o&&m?(e.dispatch(eT(m.id)),!1):("fullscreen"===n.selectedView.view&&i.glU.setActiveCommentAnchorData({stablePath:a.x7}),"communityHub"===n.selectedView.view&&e.dispatch(I.$T({...n.selectedView,commentThreadId:void 0})),e.dispatch(ez()),e.dispatch(e$()),e.dispatch(eN({resetStatusOnly:!1})),n.tooltip&&e.dispatch(F.jD()),!0)}),ea=(0,c.NC)("COMMENTS_SET_NEW_COMMENT_ACTIVE"),eo=(0,T.nF)((e,r)=>{let n=e.getState();if("fullscreen"===n.selectedView.view){if(n.comments.newComment.anchorPosition){let{x:e,y:a}=n.comments.newComment.anchorPosition,o=r?.stablePath;o?i.glU.setActiveCommentAnchorData({stablePath:`[${o.join(",")}]`}):i.glU.setActiveCommentAnchorData(i.glU.getCommentAnchorDataAtPosition(e,a))}else i.glU.setActiveCommentAnchorData({stablePath:a.x7})}e.dispatch(ea(r))}),es=(0,c.NC)("COMMENTS_SET_NEW_SELECTION_BOX_ANCHOR_POSITION"),el=(0,T.nF)((e,r)=>{e.getState().userFlags.has_created_selection_comment||e.dispatch(x.b({has_created_selection_comment:!0})),e.dispatch(es(r))}),ec=(0,c.NC)("COMMENTS_SET_NEW_ANCHOR_POSITION"),ed=(0,T.nF)((e,r)=>{if("fullscreen"===e.getState().selectedView.view){let{x:e,y:n}=r.anchorPosition;i.glU.setActiveCommentAnchorData(i.glU.getCommentAnchorDataAtPosition(e,n))}e.dispatch(ec(r))}),eu=(0,c.NC)("COMMENTS_REMOVE_HOVERED_PIN"),ep=(0,c.NC)("COMMENTS_ADD_HOVERED_PIN"),em=(0,c.NC)("COMMENTS_REMOVE_EMPHASIZED_PIN"),eh=(0,c.NC)("COMMENTS_ADD_EMPHASIZED_PIN"),e_=(0,c.NC)("COMMENTS_SET_ACTIVE"),eg=(0,T.nF)(e=>{let r=e.getState(),n=r.selectedView;"subView"in n&&("hubFile"===n.subView||"plugin"===n.subView)&&(0,d.sx)("at_mention_search_started",{comment_type:r.comments.activeThread?.id?"community_pinned":"community_general",profile_id:r.user?.community_profile_id,resource_id:"hubFile"===n.subView?n.hubFileId:n.publishedPluginId,resource_type:"hubFile"===n.subView?"hub_file":"plugin"})}),ef=(0,c.NC)("COMMENTS_SET_TYPEAHEAD_POSITION_OFFSET"),eE=(0,c.NC)("COMMENTS_SET_TYPEAHEAD"),ey=(0,c.NC)("COMMENTS_SHOW_EMOJI_PICKER"),eb=(0,c.NC)("COMMENTS_SET_ACTIVE_SORT"),ev=(0,c.NC)("COMMENTS_DISCARD_COMMENT_REPLY_ATTEMPT"),eT=(0,T.nF)((e,r)=>{let n=e.getState().comments,i=n.activeThread?.id,a=i&&n.threads[i];if(a&&a.discardAttempts===u.B2){let e=(0,u._Z)(a.reply.messageMeta),r=(0,u.Kx)(a.reply.messageMeta);(0,g.Lo)("Comment discard active thread attempt","comment info",{threadId:i,messageLength:e.length,isMessageDiscardable:r}),(0,_.kF)("isMessageDiscardable",String(r)),(0,_.kF)("messageType","reply"),(0,_.us)("User attempted to close comments more than max attempt times")}e.dispatch(ev(r))}),eI=(0,c.NC)("COMMENTS_DISCARD_NEW_COMMENT_ATTEMPT"),eS=(0,T.nF)(e=>{let r=e.getState().comments.newComment;if(r.discardAttempt===u.B2){let e=(0,u._Z)(r.messageMeta),n=(0,u.Kx)(r.messageMeta);(0,g.Lo)("Comment discard new comment attempt","comment info",{messageLength:e.length,isMessageDiscardable:n}),(0,_.kF)("isMessageDiscardable",String(n)),(0,_.kF)("messageType","new"),(0,_.us)("User attempted to close comments more than max attempt times")}e.dispatch(eI())}),ew=(0,c.NC)("COMMENTS_SET_SHOW_ONLY_MY_COMMENTS"),eA=(0,c.NC)("COMMENTS_SET_SHOW_RESOLVED_COMMENTS"),eC=(0,c.NC)("COMMENTS_REVERT_NEW_COMMENT"),eN=(0,c.NC)("COMMENTS_RESET_NEW_COMMENT"),eL=(0,c.NC)("COMMENTS_RESET_THREAD"),eO=(0,c.NC)("COMMENTS_SET_NEW_COMMENT_ATTACHMENT"),eR=(0,c.NC)("COMMENTS_SET_NEW_COMMENT_MESSAGE"),eP=(0,c.NC)("COMMENTS_SET_NEW_COMMENT"),eD=(0,c.NC)("COMMENTS_SET_REPLY_ATTACHMENT"),eM=(0,c.NC)("COMMENTS_SET_REPLY_MESSAGE"),ek=(0,c.NC)("COMMENTS_SET_REPLY"),eF=(0,c.NC)("COMMENTS_SET_EDITING_ATTACHMENT"),ex=(0,c.NC)("COMMENTS_SET_EDITING"),eU=(0,c.NC)("COMMENTS_SET_ACTIVE_DRAG_TARGET"),eB=(0,c.NC)("COMMENTS_SET_SAVING"),eV=(0,c.NC)("COMMENTS_CLEAR_SAVING"),eG=(0,c.NC)("COMMENTS_STORE_SERVER_ID_FOR_LG_PENDING_UUID"),eH=(0,c.NC)("COMMENTS_CLEAR_LG_PENDING_UUID"),eK=(0,c.NC)("COMMENTS_DEL"),eW=(0,T.nF)((e,r)=>{let n=e.dispatch,i=e.getState(),{comment:a}=r;if(i.user&&i.user.id===a.user_id&&!r.userInitiated){if(a.parent_id){let e=i.comments.threads[a.parent_id];if(e&&e.state===O.EB.BUSY){let i=!function(e,r){if(!e)return!r;if(!r)return!e;if(e.length!==r.length)return!1;for(var n=0;n<e.length;n++){let i=e[n],a=r[n],o=new Set(Object.keys(i)),s=Object.keys(a);if(o.size!==s.length||!s.every(e=>!!o.has(e)&&i[e]===a[e]))return!1}return!0}(r.comment.message_meta,e.reply.messageMeta);n(eL({threadId:a.parent_id,resetStatusOnly:i}))}}else{let e=i.comments.newComment;e&&e.state===O.EB.BUSY&&n(ei({force:!0})),n(eN({resetStatusOnly:!1}))}}}),ez=(0,c.NC)("COMMENTS_RESET"),e$=(0,c.NC)("COMMENTS_RESET_ACTIVE_ID")},125395:(e,r,n)=>{n.d(r,{Ad:()=>x,Ch:()=>R,Dg:()=>M,Hx:()=>K,LO:()=>z,RS:()=>k,Rx:()=>F,X2:()=>en,Zj:()=>V,_8:()=>$,_F:()=>H,aP:()=>J,cO:()=>U,cR:()=>D,d6:()=>ei,dL:()=>j,dv:()=>ee,e6:()=>et,eg:()=>er,gT:()=>q,h1:()=>Z,ig:()=>G,oB:()=>Q,qo:()=>Y,r1:()=>B,rO:()=>P,vQ:()=>X});var i=n(611504),a=n(579020),o=n(628055),s=n(757033),l=n(280198),c=n(442313),d=n(719398),u=n(166500),p=n(697714),m=n(23354),h=n(355232),_=n(8374),g=n(196484),f=n(790355),E=n(110979),y=n(391718),b=n(4313),v=n(5291),T=n(625069),I=n(24096),S=n(349507),w=n(97859),A=n(830789),C=n(526830),N=n(494955),L=n(731040),O=n(561959);let R=(0,i.NC)("COMMUNITY_HUB_SHOW_ADMIN_PROFILE_BANNER"),P=(0,i.NC)("COMMUNITY_HUB_HIDE_ADMIN_PROFILE_BANNER"),D=u.cR,M=(0,_.nF)((e,r)=>{let n;let{user:i,authedUsers:o,orgUsersByOrgId:s,authedTeamsById:l,teamAdminRolesForAuthedUsers:d,authedProfilesById:u,selectedView:m,currentUserOrgId:_}=e.getState(),g=r.profileId?u[r.profileId]:null,y=r.view?r.view:{view:"communityHub",subView:"searchAndBrowse",data:(0,h.Gu)()};if(!g){e.dispatch(p.F.enqueue({message:(0,c.t)("community.actions.profile_not_found"),type:"COMMUNITY_PROFILE_ERROR"})),e.dispatch(f.$T(y));return}let b=_;if(g.org_id){b=g.org_id;let e=s[g.org_id];n=Object.keys(o.byId).find(r=>{let n=e[r];if(n&&(0,I.Ay)(n.permission)>=N.jh.ADMIN)return n.user_id})}else g.team_id?(b=l[g.team_id]?.org_id||null,n=Object.keys(o.byId).find(e=>{let r=d[e];return r?.find(e=>e.team_id===g.team_id)?.user_id})):n=g.primary_user_id===i?.id?i?.id:o.orderedIds.find(e=>g.associated_users?.find(r=>r.user_id===e)?.user_id);if((0,w.Il)(g.id),(0,a.sx)("Community profile IA switched",{profileId:g.id,view:m.view}),e.dispatch(D(g)),e.dispatch(R()),n&&(n!==i?.id||_!==b)){let r={userId:n,orgId:b};e.dispatch(E._l({workspace:r,view:y}))}else e.dispatch(f.$T(y))}),k=(0,i.NC)("COMMUNITY_HUB_ADD_FOLLOW"),F=(0,i.NC)("COMMUNITY_HUB_DELETE_FOLLOW"),x=(0,i.NC)("COMMUNITY_HUB_SAVE_PAGE_STATE"),U=(0,i.NC)("COMMUNITY_HUB_RESET_COMMENT_STATE"),B=(0,i.NC)("COMMUNITY_HUB_SET_COMMENTS"),V=(0,i.NC)("COMMUNITY_HUB_SET_COMMENTS_ACTIVE_FEED_TYPE"),G=(0,i.NC)("COMMUNITY_HUB_SET_COMMENT_REPLIES"),H=(0,i.NC)("COMMUNITY_HUB_FLUSH_NEW_COMMENTS_QUEUE"),K=(0,i.NC)("COMMENTS_INSERT_COMMUNITY_MENTION"),W=(e,r)=>{let n=/\?/.test(e)?"&":"?";return e+`${n}${r}`};(0,_.nF)((e,r)=>{if(!(0,o.u9)(r))return;let n=`/api/${(0,T.n)(r.resourceType)}/${r.resourceId}/comments`;r.selectedCommentId&&r.selectedCommentId!==A.hm&&!r.pagination?.selected_comment&&(n=W(n,`selected_comment_id=${r.selectedCommentId}`)),r.activeFeedType===C.Qv.ME&&(n=W(n,`feed_type=${r.activeFeedType}`),void 0===r.numCommentsForResource&&(n=W(n,"include_total_count=true"))),(0,o.En)(n,r.pageSizeOverride??o.vs,r,o.AS).then(e=>{let n=!e.selected_comment||e.comments.find(r=>r.id===e.selected_comment?.id),{commentsById:i,authorsById:a,feed:o}=(0,T.HR)(n?e.comments:[...e.comments,e.selected_comment]),s=e.pagination;e.selected_comment&&(s.selected_comment=e.selected_comment);let l={...e,pagination:e.pagination,totalNumberOfComments:e.total_count,commentsById:i,authorsById:a,feed:o,activeFeedType:r.activeFeedType,type:r.resourceType,id:r.resourceId,mentionedProfiles:e.mentioned_profiles};e.selected_comment&&(l.selectedCommentId=e.selected_comment.id),r.onSuccess&&r.onSuccess(l)}).catch(n=>{e.dispatch(l.s.error((0,c.t)("community.actions.unable_to_fetch_comments"))),r.onError&&r.onError()})});let z=(0,i.NC)("COMMUNITY_HUB_RESTRICT_PROFILE"),$=(0,_.nF)((e,{profileId:r,blockedProfileId:n,onSuccess:i})=>{s.Ay.post(`/api/profile/${n}/block`,{block_type:"restrict",profile_id:r}).then(()=>{i&&i()}).catch(r=>{let n=(0,d.J)(r);n&&e.dispatch(p.F.enqueue({message:(0,c.t)("community.actions.couldnt_restrict_profile_error",{error:n}),type:"RESTRICT_PROFILE_ERROR"}))}),e.dispatch(z({profileId:r,blockedProfileId:n,onSuccess:i}))}),Y=(0,i.NC)("COMMUNITY_HUB_UNRESTRICT_PROFILE"),j=(0,_.nF)((e,{profileId:r,blockedProfileId:n,onSuccess:i})=>{s.Ay.del(`/api/profile/${n}/block`,{block_type:"restrict",profile_id:r}).then(()=>{i&&i()}).catch(r=>{let n=(0,d.J)(r);n&&e.dispatch(p.F.enqueue({message:(0,c.t)("community.actions.couldnt_unrestrict_profile_error",{error:n}),type:"UNRESTRICT_PROFILE_ERROR"}))}),e.dispatch(Y({profileId:r,blockedProfileId:n,onSuccess:i}))}),q=(0,i.NC)("COMMUNITY_HUB_SET_COMMENT_STATE");(0,_.nF)((e,r)=>{let{id:n,type:i}=r;(n!==e.getState().communityHub.comments.id||i!==e.getState().communityHub.comments.type)&&e.dispatch(U()),e.dispatch(B(r)),e.dispatch(q(r))}),(0,_.nF)((e,{profileId:r,on404Redirect:n},{loadingKey:i})=>{let a=L.s.getProfile({profileId:r});(0,S.N)(a,e,i),a.then(({data:r})=>{e.dispatch(O.Oo(r.meta.profile)),e.dispatch(f.$T(e.getState().selectedView))}).catch(r=>(404===r.status&&n?n():e.dispatch(l.s.error((0,c.t)("community.actions.error_fetching_profile_information"))),null))}),(0,_.nF)((e,{handle:r,on404Redirect:n},{loadingKey:i})=>{let a=e.getState().currentUserOrgId,o=L.s.getHandle({currentOrgId:a||void 0,handle:r});(0,S.N)(o,e,i),o.then(({data:r})=>{e.dispatch(O.Oo(r.meta.profile))}).catch(({data:r})=>{r?.status===404&&n&&n(),e.dispatch(l.s.error((0,c.t)("community.actions.error_fetching_profile_information")))})},({handle:e})=>`COMMUNITY_HUB_GET_PROFILE_BY_HANDLE_${e}`);let X=(0,_.nF)((e,r,{loadingKey:n})=>{let{website:i,description:a,location:o,profileHandle:c,onSuccess:u,userId:p,teamId:m,orgId:h}=r,_=s.Ay.post("/api/profile",{website:i,description:a,location:o,profile_handle:c,primary_user_id:p,team_id:m,org_id:h});(0,S.N)(_,e,n),_.then(({data:r})=>{e.dispatch(O.HZ(r.meta)),e.dispatch(O.Oo(r.meta));let{currentUserOrgId:n,orgById:i}=e.getState(),a=n&&i[n];n&&a&&n===h&&e.dispatch(b.F6({id:n,community_profile_handle:r.meta.profile_handle,community_profile_id:r.meta.id})),u&&u(e)}).catch(r=>{let n=(0,d.J)(r);n&&e.dispatch(l.s.error(n))})},({userId:e})=>`COMMUNITY_HUB_CREATE_PROFILE_${e}`),Z=(0,_.nF)((e,r)=>{s.Ay.post("/api/profile/generate_handle").then(({data:n})=>{e.dispatch(O.HZ(n.meta)),e.dispatch(O.Oo(n.meta)),r.onSuccess&&r.onSuccess(e)}).catch(({data:r})=>{e.dispatch(l.s.error(r.message))})}),J=(0,_.nF)((e,r,{loadingKey:n})=>{let{website:i,twitter:a,instagram:o,pronouns:u,description:h,location:_,profileId:g,profileHandle:E,onSuccess:y}=r,v=e.getState().communityHub.currentProfile;if(g===v?.id&&Object.entries(r).every(([e,r])=>void 0===r||e in v&&v[e]===r))return;let I=a?.trim(),w=o?.trim();if(I&&v?.twitter!==I&&!m.HD.test(I)){e.dispatch(p.F.enqueue({message:(0,c.t)("community.actions.your_twitter_handle_is_not_valid",{handle:I}),error:!0}));return}if(w&&v?.instagram!==w&&!m.Co.test(w)){e.dispatch(p.F.enqueue({message:(0,c.t)("community.actions.your_instagram_handle_is_not_valid",{handle:w}),error:!0}));return}let A=s.Ay.put(`/api/profile/${g}`,{website:i,twitter:I,instagram:w,pronouns:u,description:h,location:_,profile_handle:E});(0,S.N)(A,e,n);let C=e.getState().user?.community_profile_handle;A.then(({data:n})=>{let{communityHub:i,currentUserOrgId:a,orgById:o}=e.getState();i.currentProfile?.id===n.meta.id&&e.dispatch(O.Oo(n.meta));let s=o[a];if(s&&"string"==typeof s.id&&s.id===n.meta.org_id&&e.dispatch(b.F6({id:n.meta.org_id,community_profile_handle:n.meta.profile_handle})),E){let r=e.getState().selectedView;(0,T.Cj)(r)&&r?.handle===C&&e.dispatch(f.$T({view:"communityHub",subView:"handle",handle:E})),n.meta.primary_user_id?e.dispatch(p.F.enqueue({message:(0,c.t)("community.actions.your_profile_handle_was_set_to_profile_handle",{profileHandle:E}),type:"profile-handle"})):n.meta.team_id?e.dispatch(p.F.enqueue({message:(0,c.t)("community.actions.your_team_s_handle_was_set_to_profile_handle",{profileHandle:E}),type:"team-handle"})):n.meta.org_id&&e.dispatch(p.F.enqueue({message:(0,c.t)("community.actions.your_organization_s_handle_was_set_to_profile_handle",{profileHandle:E}),type:"org-handle"}))}["twitter","location","instagram","website","description"].forEach(i=>{if(i in n.meta&&i in r){let r={twitter:(0,c.t)("community.actions.your_twitter_handle_was_updated"),location:(0,c.t)("community.actions.your_location_was_updated"),instagram:(0,c.t)("community.actions.your_instagram_handle_was_updated"),website:(0,c.t)("community.actions.your_website_url_was_updated"),description:(0,c.t)("community.actions.your_description_was_updated")};e.dispatch(p.F.enqueue({message:r[i],type:"profile-updated"}))}}),y&&y(e)}).catch(r=>{let n=(0,d.J)(r);n&&e.dispatch(l.s.error(n))})},({profileId:e})=>`COMMUNITY_HUB_UPDATE_PROFILE_${e}`),Q=(0,_.nF)((e,r,{loadingKey:n})=>{let{profileId:i,handle:a}=r;s.Ay.del(`/api/profile/${i}`).then(()=>{e.dispatch(O.cr(a));let{currentUserOrgId:r,orgById:n}=e.getState(),o=r&&n[r];r&&o&&o.community_profile_id===i&&e.dispatch(b.F6({id:r,community_profile_handle:void 0,community_profile_id:void 0})),e.dispatch(p.F.enqueue({message:(0,c.t)("community.actions.profile_deleted")}))}).catch(()=>{e.dispatch(l.s.error((0,c.t)("community.actions.unable_to_delete_profile_please_try_again_later")))})});(0,_.nF)(async(e,{file:r,profileId:n,onSuccessCallback:i},{loadingKey:a})=>{let o=(0,v.c)(r).then(e=>(function(e,r,n,i){return r?s.Ay.post(e).then(({data:e})=>e.meta).then(async({cover_image_path:e,signature:r,fields:n})=>{let a=new FormData;return n&&Object.entries(n).forEach(([e,r])=>a.append(e,r)),a.set("content-type",i.type),a.append("file",i),await fetch(e,{method:"POST",body:a}),{cover_image_path:e,signature:r}}):Promise.resolve({cover_image_path:"",signature:""})})(`/api/profile/${n}/upload`,e,r.type,r));(0,S.N)(o,e,a),await o.then(({signature:e})=>s.Ay.put(`/api/profile/${n}`,{signature:e})).then(({data:r})=>{e.dispatch(O.Oo(r.meta)),i()}).catch(r=>{e.dispatch(l.s.error(r?(0,c.t)("community.actions.an_error_occurred_with_error",{error:r}):(0,c.t)("community.actions.an_error_occurred")))})},({profileId:e})=>`COMMUNITY_HUB_UPLOAD_PROFILE_COVER_IMAGE_${e}`);let ee=(0,i.NC)("COMMUNTY_HUB_FOLLOW_ENTITY"),et=(0,_.nF)(async(e,r,{loadingKey:n})=>{let i=s.Ay.put("/api/follows",{followed_profile_id:r});(0,S.N)(i,e,n),await i.then(({data:n})=>{e.getState().user?.community_profile_id&&(e.dispatch(k({followedProfileId:r,currentUserProfileId:e.getState().user?.community_profile_id})),e.dispatch(p.F.enqueue({message:(0,c.t)("community.actions.followed_profile_name",{profileName:n.meta.followed_profile.name}),type:"COMMUNITY_HUB_FOLLOW"})))}).catch(r=>{let n=(0,d.J)(r);n&&e.dispatch(p.F.enqueue({message:(0,c.t)("community.actions.unable_to_follow_this_profile_profile_name",{profileName:n}),type:"COMMUNITY_HUB_FOLLOW_FAILED",error:!0}))}),e.dispatch(ee(r))},e=>`COMMUNTY_HUB_FOLLOW_ENTITY_${e}`),er=(0,i.NC)("COMMUNTY_HUB_UNFOLLOW_ENTITY"),en=(0,_.nF)((e,r,{loadingKey:n})=>{let i=s.Ay.del("/api/follows",{followed_profile_id:r});(0,S.N)(i,e,n),i.then(()=>{e.getState().user?.community_profile_id&&(e.dispatch(F({followedProfileId:r,currentUserProfileId:e.getState().user?.community_profile_id})),e.dispatch(p.F.enqueue({message:(0,c.t)("community.actions.unfollowed_profile"),type:"COMMUNITY_HUB_UNFOLLOW"})))}).catch(r=>{let n=(0,d.J)(r);n&&e.dispatch(p.F.enqueue({message:`Unable to unfollow this profile: ${n}`,type:"COMMUNITY_HUB_UNFOLLOW_FAILED",error:!0}))}),e.dispatch(er(r))},e=>`COMMUNTY_HUB_UNFOLLOW_ENTITY_${e}`);function ei(e){return{updateStatus:(0,i.NC)(`${e}_UPDATE_PUBLISH_STATUS`),updateMetadata:(0,i.NC)(`${e}_UPDATE_PUBLISH_METADATA`),clearMetadata:(0,i.NC)(`${e}_CLEAR_PUBLISH_METADATA`),clearMetadataAndStatus:(0,i.NC)(`${e}_CLEAR_PUBLISHING`)}}(0,_.nF)(async(e,r)=>{let n;let{thread:i,resolved:a}=r,o=e.getState();a&&o.comments.activeThread?.id===i.id&&!o.comments.showResolved&&e.dispatch(g.UU()),n=a?s.Ay.put(`/api/community_comments/${i.id}/resolve`):s.Ay.put(`/api/community_comments/${i.id}/unresolve`),await n.then(({data:r})=>{e.dispatch(y.kE({comment:{id:i.id,resolved_at:r.meta.resolved_at}}))}).catch(r=>{e.dispatch(p.F.enqueue({error:!0,message:a?(0,c.t)("community.actions.failed_to_resolve_comment"):(0,c.t)("community.actions.failed_to_unresolve_comment")}))})})},261183:(e,r,n)=>{n.d(r,{In:()=>d,fI:()=>c});var i=n(561162),a=n(997894),o=n(931516),s=n(140384),l=n(367458);a.M4.Query({fetch:async e=>{try{let{components:r,state_groups:n}=(await s.f.getPublishedComponents({hubFileId:e})).data.meta;return{components:r,state_groups:n}}catch{return{components:[],state_groups:[]}}},output:({data:e})=>(0,l.Tf)(e.components,e.state_groups)}),a.M4.Query({fetch:async({hubFileId:e})=>(await s.f.getLibraryStyles({hubFileId:e})).data.meta.styles??[],output:({data:e})=>e.map(i.aV)});let c=a.M4.Query({fetch:async()=>(await s.f.getCommunityLibraries()).data.meta,output:({data:e})=>e.map(u)}),d=a.M4.Query({fetch:async()=>(await s.f.getCommunityLibrariesVisualAssets()).data.meta,output:({data:e})=>e.map(u)});function u(e){return{...e,type:o.PP,num_state_groups:0}}},920705:(e,r,n)=>{n.d(r,{M2:()=>h,Sp:()=>p,k3:()=>m});var i=n(171659),a=n(611504),o=n(896966),s=n(364370),l=n(8374),c=n(349507),d=n(824880);(0,l.nF)((e,r)=>{let{payments:n,source:a}=r,l=e.getState().user?.id;if(!l||!n)return;let c=n.filter(s.QQ),d=`${u}_${l}`,p=i.TQ()?.getItem(d);if(p){let e=JSON.parse(p);if(Array.isArray(e)){let r=new Set(c.map(e=>e.monetized_resource_metadata_id)),i=e.map(e=>e.monetized_resource_metadata_id).filter(e=>!r.has(e));i.length&&(0,o.x1)("community","[ActivePayments] mismatch detected",{source:a,userId:l,revoked:i,previousPayments:e,currentPayments:n},{reportAsSentryError:!0})}}let m=JSON.stringify(c);i.TQ()?.setItem(d,m)});let u="debug_succeeded_payments";(0,l.nF)((e,r,{loadingKey:n})=>{let i=d.C.getBuyerActivePayments();(0,c.N)(i,e,n),i.then(({data:r})=>{e.dispatch(h(r.meta))}).catch(()=>{})});let p=(0,a.NC)("M10N_DEL_ACTIVE_USER_PAYMENT"),m=(0,a.NC)("M10N_REALTIME_ACTIVE_USER_PAYMENT"),h=(0,a.NC)("M10N_SET_ACTIVE_USER_PAYMENTS")},292180:(e,r,n)=>{n.d(r,{wJ:()=>m});var i=n(611504),a=n(896966),o=n(479771),s=n(547730),l=n(8374),c=n(625069),d=n(349507),u=n(526830),p=n(341355);let m=(0,i.NC)("COMMUNITY_SET_SHELVES_FOR_SHELF_TYPE");function h(e,r){let n=[],i=[],a=[];r.forEach(e=>{let r=(0,c.x1)(e);r===u.Ug.HUB_FILE?n.push(e):r===u.Ug.PLUGIN?i.push(e):r===u.Ug.WIDGET&&a.push(e)}),e((0,o.Sb)({hubFiles:n,src:"fetchShelvesForShelfType"})),e((0,s.Qi)({publishedPlugins:[...i,...a],src:"fetchShelvesForShelfType"}))}(0,l.nF)((e,{shelfType:r,limit:n},{loadingKey:i})=>{let o={shelfType:r,limitShelfContent:n},s=p.A.getCommunityShelves(o);(0,d.N)(s,e,i),s.then(({data:n})=>{let i=n.meta;i.forEach(r=>h(e.dispatch,r.shelf_content)),e.dispatch(m({shelfType:r,shelves:i}))}).catch(e=>{(0,a.x1)("collections","error fetching collections",{...o,error:e.toString()})})},({shelfType:e,limit:r})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_${e}_${r}`),(0,l.nF)((e,{shelfType:r,filterLabel:n,limit:i},{loadingKey:a})=>{let o=p.A.getCommunityShelves({shelfType:r,filterLabel:n,limitShelfContent:i});(0,d.N)(o,e,a),o.then(({data:n})=>{let i=n.meta;i.forEach(r=>h(e.dispatch,r.shelf_content)),e.dispatch(m({shelfType:r,shelves:i}))})},({shelfType:e,filterLabel:r,limit:n})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_AND_FILTER_LABEL_${e}_${r}_${n}`)},948442:(e,r,n)=>{n.d(r,{Af:()=>eh,D3:()=>C.D3,FO:()=>e_,L1:()=>C.L1,N4:()=>eR,QA:()=>eg,Ri:()=>em,Sb:()=>C.Sb,VS:()=>ew,ax:()=>eP,bk:()=>eN,eq:()=>eE,i9:()=>eL,oO:()=>eC,p7:()=>eb,rH:()=>eI,ts:()=>eT,wO:()=>eS,yh:()=>eD});var i=n(992277),a=n(741419),o=n(573446),s=n(157907),l=n(39773),c=n(611504),d=n(579020),u=n(322035),p=n(44509),m=n(296425),h=n(379338),_=n(858423),g=n(653959),f=n(831932),E=n(502255),y=n(896966),b=n(757033),v=n(736248),T=n(280198),I=n(442313),S=n(719398),w=n(697714),A=n(176283),C=n(479771),N=n(761967),L=n(8374),O=n(125395),R=n(884060),P=n(790355),D=n(527050),M=n(449737),k=n(114735),F=n(93724),x=n(452546),U=n(901647),B=n(46667),V=n(481540),G=n(625069),H=n(285647),K=n(391850),W=n(391788),z=n(273121),$=n(376780),Y=n(997894),j=n(954633),q=n(349507),X=n(158349),Z=n(778727),J=n(922030),Q=n(302302),ee=n(931516),et=n(492119),er=n(217084),en=n(183905),ei=n(824880),ea=n(360603),eo=n(215858),es=n(808765),el=n(18913),ec=n(443899),ed=n(980190),eu=n(561959);let ep=n(825619).ZS,em=(0,c.NC)("PUT_FIG_FILE_PUBLISHED_AS_HUB_FILE"),eh=(0,c.NC)("UPDATE_HUB_FILE_PAGE_TITILE"),e_=(0,c.NC)("DEL_FIG_FILE_PUBLISHED_AS_HUB_FILE"),eg=(0,c.NC)("PUT_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),ef=(0,c.NC)("DEL_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),eE=(0,c.NC)("HUB_FILE_PUT_HUB_FILE_REMIX"),ey=e=>{let r=(0,I.t)("community.actions.log_in_or_create_an_account_to_duplicate_this_file");if(f.rr){window.location.href="/login";return}e.dispatch(v.Ts({origin})),e.dispatch(M.to({type:es.x,data:{headerText:r}}))},eb=(0,L.nF)((e,r,{loadingKey:n})=>{let i=e.getState();if(!i.user){ey(e);return}let a={headers:{...b.Ay.defaults.headers,"X-Figma-User-ID":r.workspace.userId}},o=b.Ay.post(`/api/hub_files/v2/${r.hubFileId}/copy`,{org_id:r.workspace.orgId},a);(0,q.N)(o,e,n),o.then(({data:n})=>{let a=n.meta;(0,d.sx)(U.M5.HUB_FILE_DUPLICATED,{hubFileId:r.hubFileId,figFileKey:a.key,searchSessionId:(0,A.w)(i)}),"whiteboard"===a.editor_type&&e.dispatch(F.Hx({storeInRecentsKey:et.$A.FigJam,id:r.hubFileId,type:et.vt.CommunityResource}));let o=(0,z.to)(a);o=(0,u.dR)(o,{[W.pt.KEY]:W.pt.VALUE,fuid:r.workspace.userId}),p.Ay.redirect(o,f.rr?void 0:"_blank"),e.dispatch(P.oB())}).catch(r=>{e.dispatch(w.F.enqueue({error:!0,message:(0,I.t)("community.actions.failed_to_duplicate_file_error",{error:(0,S.J)(r,(0,I.t)("community.actions.try_again_or_contact_support_figma_com"))})}))})},({hubFileId:e})=>`DUPLICATE_HUB_FILE_${e}`),ev=(0,L.nF)((e,r)=>{let{canRetry:n=!0}=r,i=e.getState(),a=i.currentUserOrgId,o=i.currentTeamId;if(r.folderId){let n=i.folders[r.folderId]?.team_id,a=n?i.teams[n]:null,o=(0,B.N)(i.hubFiles[r.hubFileId].viewer_mode);if(a&&!(0,J.rR)(a,{type:J.sK.ADD_FILE,editorType:o})){e.dispatch(M.to({type:el.Y,data:{teamId:a.id,createInDrafts:()=>{e.dispatch(ev({...r,folderId:void 0}))},teamName:a.name,editorType:o,dispatch:e.dispatch,action:en.ZN.CREATE_FILE_FROM_TEMPLATE}}));return}}return b.Ay.post(`/api/hub_files/template/${r.hubFileId}/copy`,{folder_id:r.folderId,org_id:a,team_id:o||void 0}).then(({data:n})=>{let a=n.meta;(0,V.f5)("File Created",a,{selectedView:i.selectedView},{source:r.source}),r.callback&&r.callback(a?.key),"whiteboard"===a.editor_type&&e.dispatch(F.Hx({storeInRecentsKey:et.$A.FigJam,id:r.hubFileId,type:et.vt.CommunityResource}));let o=(0,z.to)(a);p.Ay.redirect(o,r.openInNewTab&&!f.rr?"_blank":void 0)}).catch(i=>{let a={error:!0,message:(0,I.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:r.hubFileName})};n&&(a.button={text:(0,I.t)("community.actions.retry"),action:()=>e.dispatch(ev({...r,canRetry:!1}))}),e.dispatch(w.F.enqueue(a))})}),eT=(0,L.nF)(async(e,{hubFileId:r,callback:n},{loadingKey:i})=>{let a=null,o=Promise.resolve(null),s=eo.H.getVersions({id:r});o=s;try{a=(await s).data.meta}catch(e){return}(0,q.N)(o,e,i);let{fig_file_metadata:l,remixed_from_metadata:c,...d}=a,u=d.related_content,p=d.remixed_to_metadata,m=[...u?u.content:p||[],d];c&&m.push(c),e.dispatch((0,C.Sb)({hubFiles:m,src:"getHubFileVersions"})),l&&(e.dispatch(em({hubFileId:d.id,fileKey:l.key})),l.file&&e.dispatch(R.yJ({file:l.file})),l.roles&&e.dispatch(x.uo({roles:l.roles}))),e.dispatch(eh({hubFileId:d.id}));let h=new Set(p?.map(e=>e.id));e.dispatch(eE({hubFileId:d.id,from:c?c.id:null,to:h})),n?.(d)},({hubFileId:e})=>`HUB_FILE_GET_VERSIONS_${e}`),eI=(0,L.nF)(async(e,{fileKey:r})=>{(0,h.Ay)().user_data&&await ea.D.getHubFileMetadata({fileKey:r}).then(({data:n})=>{let i=n.meta.published_as;i?.id?e.dispatch(em({hubFileId:i.id,fileKey:r})):e.dispatch(e_({fileKey:r}));let a=n.meta.remixed_from_metadata,o=n.meta.is_preview;a?.id?e.dispatch(eg({hubFileId:a.id,fileKey:r,isPreview:!!o})):e.dispatch(ef({fileKey:r}));let s=[i,a].filter(e=>!!e);s.length>0&&e.dispatch((0,C.Sb)({hubFiles:s,src:"getHubFileMetadata"}))}).then(()=>{(0,s.k)().ce_new_missing_fonts_logging&&(0,K.DI)()}).catch(e=>{console.error(e)}).finally(()=>{l.zl.set(m.x,!0)})}),eS=(0,O.d6)("HUB_FILE"),{updateMetadata:ew,updateStatus:eA,clearMetadataAndStatus:eC,clearMetadata:eN}=eS,eL=(0,L.nF)((e,r)=>{let n=[],i=r.viewerMode===$.y4.SLIDE_TEMPLATE;if(i){n=(0,Z.AC)(e.getState());let i=(0,Z.x6)(e.getState()),a=!!r.hubFileId&&n.length>0&&(0,j.aB)(Object.values(i),new Set(n));if(!r.hubFileId&&0===n.length||a){(0,ed.Dl)(e.dispatch);return}l.zl.set(ec.UM,{state:ec.F4.PUBLISH_HUB_FILE_INITIATED})}e.dispatch(eA({id:r.fileKey,status:{code:Q.aP.UPLOADING}})),eO(e,r).then(({hubFile:n,actingProfile:i,profileCreated:a})=>(e.dispatch((0,C.Sb)({hubFiles:[n],src:"createHubFile"})),e.dispatch(em({hubFileId:n.id,fileKey:r.fileKey})),a&&(i.profile_created=a,e.dispatch(eu.HZ(i))),e.dispatch(eu.Oo(i)),e.dispatch(eA({id:r.fileKey,status:{code:Q.aP.SUCCESS}})),r.suggestedCategory&&(0,d.sx)("community_category_suggestion",{resourceType:"hub_file",resourceId:n.id,categoryId:n.category_id,suggestedCategory:r.suggestedCategory},{forwardToDatadog:!0}),{hubFile:n})).then(({hubFile:n})=>{if(!i||null===ep)return;let s=(0,Z.AC)(e.getState()),c=Object.values((0,Z.jO)(e.getState(),ee.o.HUBFILE)).map(e=>e.node_id),d=a.Ez5.slideThemeLibBindings().renameThemeForTemplatePublish(r.name)?c:s;if(d.length>0){n.library_key&&a.Ez5?.canvasGrid().updateSourceLibraryKey(o.l(n.library_key));let{onPublishSuccess:r,onPublishProgress:i,onPublishError:s}=(0,D.u)($._Y.SLIDES);requestAnimationFrame(()=>{e.dispatch(ep({savepointDescription:"Community slide template publish",publishingMode:ee.o.HUBFILE,itemsToPublish:new Set(d),hubFileId:n.id,onPublishSuccess:r,onPublishProgress:i,onPublishError:s}))})}else l.zl.set(ec.UM,{state:ec.F4.PUBLISH_HUB_FILE_COMPLETED})}).catch(n=>{i&&l.zl.set(ec.UM,{state:ec.F4.PUBLISH_HUB_FILE_ERRORED}),e.dispatch(w.F.enqueue({message:n.message,type:"hub-file-created-error",error:!0})),e.dispatch(eA({id:r.fileKey,status:{code:Q.aP.FAILURE,error:n.message}}))})});async function eO(e,r){let n;let{fileKey:o,name:s,description:l,categoryId:c,publisherIds:d,tags:u,tagsV2:p,creatorPolicy:m,thumbnailBuffer:h,viewerMode:_,scalingMode:g,authorOrgId:f,authorTeamId:y,hasCustomUploadedThumbnail:b,validPrototype:v,commentsSetting:T,agreedToTos:w,isPaid:A,price:C,supportContact:N,carouselMedia:L,customCarouselThumbnail:O}=r;if(f&&y)throw Error((0,I.t)("community.actions.attempting_to_set_both_author_org_id_and_author_team_id_while_publishing"));if(_===$.y4.PROTOTYPE&&a.X3B.firstPagePrototypeStatus()!==a.bOM.VALID)throw Error((0,I.t)("community.actions.attempting_to_publish_an_invalid_prototype_as_a_prototype"));let R=await (0,X.m)(o,"Published to Community hub",l,e.dispatch).then(e=>e.id).catch(e=>{throw(0,E.$D)(i.e.COMMUNITY,e),Error(e.data?.message||(0,I.t)("community.actions.could_not_connect_to_the_server"))});try{n=await (0,H.R1)(h,L||[],R)}catch(e){throw(0,E.$D)(i.e.COMMUNITY,e),Error((0,I.t)("community.actions.error_uploading_images_e"))}let P=(0,H.Z2)(n?.carousel_images||[],O),D={file_version_id:R,name:s,description:l,tags:u,tags_v2:p,category_id:c,creator_policy:m,signature:n?.cover_image.signature,cover_image_uploaded:n?.cover_image.cover_image_uploaded,publisher_ids:d,viewer_mode:_,scaling_mode:g,author_org_id:f,author_team_id:y,has_custom_uploaded_thumbnail:b,valid_prototype:v,comments_setting:T,agreed_to_tos:w,is_paid:A,price:C,support_contact:N,carousel_images:n?.carousel_images,cover_image_carousel_image:n?.carousel_images[P]};try{let e=await eo.H.publishHubFile(D);return{hubFile:e.data.meta.hub_file,actingProfile:e.data.meta.acting_profile,profileCreated:e.data.meta.profile_created}}catch(e){throw(0,E.$D)(i.e.COMMUNITY,e),Error((0,S.J)(e,(0,I.t)("community.actions.could_not_publish_hub_file",{error:e.message})))}}let eR=(0,L.nF)(async(e,{payload:r,onSuccess:n})=>{let a;let{hubFileId:o,name:s,description:l,categoryId:c,suggestedCategory:u,creatorPolicy:p,publisherIds:m,tags:h,tagsV2:_,viewerMode:g,scalingMode:f,commentsSetting:y,price:b,supportContact:v,carouselMedia:A,customCarouselThumbnail:N,hasCustomUploadedThumbnail:L,thumbnailBuffer:O}=r;try{a=await (0,H.R1)(O,A||[],void 0,o)}catch(r){throw(0,E.$D)(i.e.COMMUNITY,r),e.dispatch(w.F.enqueue({message:(0,I.t)("community.actions.error_uploading_images_publish_update_from_editor"),type:"hub-file-updated-error",error:!0})),Error(r)}let R=(0,H.Z2)(a?.carousel_images||[],N),P={name:s,description:l,category_id:c,creator_policy:p,publisher_ids:m,tags:h,tags_v2:_,viewer_mode:g,scaling_mode:f,comments_setting:y,price:b,support_contact:v,carousel_images:a?.carousel_images,cover_image_carousel_image:a?.carousel_images[R],has_custom_uploaded_thumbnail:L,cover_image_uploaded:a?.cover_image.cover_image_uploaded,signature:a?.cover_image.signature};try{let r=(await eo.H.updateHubFile(o,P)).data.meta;e.dispatch((0,C.Sb)({hubFiles:[r],src:"updateHubFile"})),u&&(0,d.sx)("community_category_suggestion",{resourceType:"hub_file",resourceId:r.id,categoryId:r.category_id,suggestedCategory:u},{forwardToDatadog:!0}),n?.(r)}catch(n){let r=(0,S.J)(n,(0,I.t)("community.actions.an_error_occurred_while_updating_please_refresh_and_try_again"));throw e.dispatch(T.s.error(r)),(0,E.$D)(i.e.COMMUNITY,n),Error(`Error updating file ${n}`)}}),eP=(0,L.nF)((e,{hubFileId:r,redirectLink:n,onSuccess:a,onError:o})=>{b.Ay.del(`/api/hub_files/${r}`).then(({data:r})=>{let n=r.meta;e.dispatch((0,C.Sb)({hubFiles:[n],src:"unpublishHubFile"}))}).then(()=>{n&&p.Ay.redirect(n),a?.()}).catch(e=>{(0,E.$D)(i.e.COMMUNITY,e),console.error(Error(`Error unpublishing file ${e}`)),o?.()})}),eD=(0,L.MM)("OPTIMISTIC_DUPLICATE_HUB_FILE",(e,{hubFileId:r,viewContext:n},{optimistId:i})=>{b.Ay.post(`/api/hub_files/v2/${r}/copy`).then(({data:a})=>{e.dispatch(k.c(i));let o=a.meta,s=(0,z.to)(o);s=(0,u.dR)(s,{[W.pt.KEY]:W.pt.VALUE}),p.Ay.redirect(s,f.rr?void 0:"_blank"),(0,d.sx)(U.M5.HUB_FILE_DUPLICATED,{hubFileId:r,figFileKey:o.key,viewContext:n,searchSessionId:(0,A.w)(e.getState())})}).catch(r=>{e.dispatch(k.r(i)),e.dispatch(w.F.enqueue({message:(0,I.t)("community.actions.unable_to_duplicate",{error:(0,S.J)(r,r.data.message)}),type:"HUB_FILE_DUPLICATE_FAILED",error:!0}))})}),eM=Y.M4.Mutation(({id:e},{query:r})=>(r.mutate((0,N.m)({apiResourceType:"file",id:e}),e=>{e.like_count+=1}),eo.H.likeHubFile({id:e})));(0,L.nF)((e,{hubFileId:r},{loadingKey:n})=>{let i=(0,g.Jl)(eM)({id:r});(0,q.N)(i,e,n),i.catch(r=>{e.dispatch(w.F.enqueue({message:(0,I.t)("community.actions.unable_to_like_this_file_error",{error:(0,S.J)(r,r.data?.message)}),type:"HUB_FILE_LIKE_FAILED",error:!0}))});let a=e.getState().user,o=a&&(0,G.sD)(a,e.getState().authedProfilesById);a?.id&&o&&(0,_.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${r}-${o.id}`]:{pluginId:null,hubFileId:r,profileId:o.id,resourceId:null,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},i)},e=>`LIKE_HUB_FILE_${e}`);let ek=Y.M4.Mutation(({id:e},{query:r})=>(r.mutate((0,N.m)({apiResourceType:"file",id:e}),e=>{e.like_count-=1}),eo.H.unlikeHubFile({id:e})));(0,L.nF)((e,{hubFileId:r,likeId:n},{loadingKey:i})=>{let a=(0,g.Jl)(ek)({id:r});(0,q.N)(a,e,i),a.catch(r=>{e.dispatch(w.F.enqueue({message:(0,I.t)("community.actions.unable_to_unlike_this_file_error",{error:(0,S.J)(r,r.data.message)}),type:"HUB_FILE_UNLIKE_FAILED",error:!0}))}),e.getState().user?.id&&n&&(0,_.WB)().optimisticallyDelete({CommunityHubLike:{[n]:null}},a)},e=>`UNLIKE_HUB_FILE_${e}`),(0,L.nF)((e,{hubFileId:r})=>b.Ay.post(`/api/hub_files/${r}/view`,{hubFileId:r}));let eF={};(0,L.nF)(async(e,{hubFileId:r})=>{let n=e.getState(),i=n.user?.id;i&&((0,d.sx)(U.M5.SLIDE_TEMPLATE_USED,{hubFileId:r}),eF[i]?.includes(r)||await ei.C.updateSlideTemplateCommunityUsageCount({hubFileId:r}).then(()=>{eF[i]||(eF[i]=[]),eF[i].includes(r)||eF[i].push(r)}).catch(e=>{(0,y.x1)("Error updating Community Slide Template usage count",e,{hubFileId:r},{reportAsSentryError:!0})}))}),(0,L.nF)((e,r)=>{(r===er.G4.FULLSCREEN||r===er.G4.FULLSCREEN_WITH_COMMENTS)&&((0,d.sx)("Context Viewed",{name:"hub-file-canvas-enter-fullscreen"}),r===er.G4.FULLSCREEN_WITH_COMMENTS&&(0,d.sx)("CTA Clicked",{name:"community_hub_preview_comments_viewed"}));let n={...e.getState().selectedView,fullscreenState:r};r===er.G4.FULLSCREEN&&n.commentThreadId&&delete n.commentThreadId,e.dispatch(P.$T(n))})},211591:(e,r,n)=>{n.d(r,{JZ:()=>b,QF:()=>v,qR:()=>T});var i=n(579020),a=n(442313),o=n(697714),s=n(8374),l=n(421563),c=n(93724),d=n(974326),u=n(698522),p=n(402840),m=n(526830),h=n(677251),_=n(74083),g=n(180633),f=n(972844),E=n(25959);let y=(0,u.M)(),b=(0,s.nF)(async(e,{resourceType:r,localFileIdToRemove:n})=>{if(!y)return;let{added:s,existed:u}=await y.createMultipleNewLocalFileExtensions({title:(0,a.t)("community.actions.pick_extension_manifest_file"),filters:[{name:"Manifests",extensions:["json"]}],properties:["openFile"]},0),E=s[0]??u[0];if(null!=E)try{let s=await (0,p.c2)(E,{resourceType:r,isPublishing:!1});"unknown"===r&&(r=s.containsWidget?"widget":"plugin");let u=(0,p.T)();if(u&&!s.editorType?.includes(u))throw Error((0,h.am)({type:h.ho.VALIDATE,text:`The manifest editorType does not include "${u}".`}));if((0,i.sx)("Added new plugin",{how:"loaded",pluginId:s.id,version:s.api,isWidget:"widget"===r,productType:u?(0,p.Pz)(u):null,isVsCode:(0,d.T)()}),e.dispatch(v({localFileId:E,resourceType:r})),(0,l.s)({initialX:0,initialY:0,initialTab:"figjam"===u?"widget"===r?g.p.WIDGETS:g.p.PLUGINS:void 0,initialFdResourceTab:"figjam"!==u?"widget"===r?f.s.WIDGET:f.s.PLUGIN:void 0,initialFdView:"figjam"!==u?"development":void 0,scrollDevelopmentSectionIntoView:"figjam"===u,source:"extension-import"}),e.dispatch(o.F.enqueue({message:s.name?(0,a.t)("community.actions.manifest_name_has_been_imported",{manifestName:s.name}):"widget"===r?(0,a.t)("community.actions.widget_has_been_imported"):(0,a.t)("community.actions.plugin_has_been_imported")})),n){let r=e.getState().localPlugins[n],i=r?.lastKnownPluginId??r?.plugin_id??r?.manifest.id;(i===s.id||null==i)&&e.dispatch(T(n))}let y=s.editorType;y?.forEach(n=>{let i=p.Sb(n);r===m.bD.PLUGIN?e.dispatch(c.gU({storeInRecentsKey:i,id:s.id||"",version:"",isDevelopment:!0,currentUserId:_.o8()})):r===m.bD.WIDGET&&e.dispatch(c.RH({storeInRecentsKey:i,id:s.id||"",version:"",isDevelopment:!0,currentUserId:_.o8()}))})}catch(r){e.dispatch(o.F.enqueue({message:r.message,error:!0}))}}),v=(0,s.nF)(async(e,{localFileId:r,resourceType:n})=>{let i=await (0,p.t3)(r,{resourceType:n});e.dispatch((0,E.Po)(i))}),T=(0,s.nF)((e,r)=>{void 0!=r&&(y&&y.removeLocalFileExtension(r),e.dispatch((0,E.Zy)(r)))})},207537:(e,r,n)=>{n.d(r,{C:()=>m});var i=n(858423),a=n(757033),o=n(442313),s=n(719398),l=n(697714),c=n(8374),d=n(625069),u=n(349507),p=n(526830);let m=(0,c.nF)((e,{id:r,resourceType:n},{loadingKey:c})=>{let m=a.Ay.post(`/api/${(0,d.n)(n)}/${r}/like`,{orgId:e.getState().currentUserOrgId});(0,u.N)(m,e,c),m.catch(r=>{e.dispatch(l.F.enqueue({message:n===p.vt.PLUGIN?(0,o.t)("community.actions.unable_to_like_this_plugin_error",{error:(0,s.J)(r,r.data.message)}):(0,o.t)("community.actions.unable_to_like_this_widget_error",{error:(0,s.J)(r,r.data.message)}),type:`${n.toUpperCase()}_LIKE_FAILED`,error:!0}))});let h=e.getState().user,_=h&&(0,d.sD)(h,e.getState().authedProfilesById);h?.id&&_&&(0,i.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${r}-${_.id}`]:{pluginId:r,hubFileId:null,resourceId:null,profileId:_.id,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},m)},({id:e})=>`LIKE_RESOURCE_${e}`);(0,c.nF)((e,{id:r,resourceType:n,likeId:s},{loadingKey:c})=>{let m=a.Ay.del(`/api/${(0,d.n)(n)}/${r}/like`,{orgId:e.getState().currentUserOrgId});(0,u.N)(m,e,c),m.catch(r=>{e.dispatch(l.F.enqueue({message:n===p.vt.PLUGIN?(0,o.t)("community.actions.unable_to_unlike_this_plugin_error",{error:r.data.message}):(0,o.t)("community.actions.unable_to_unlike_this_widget_error",{error:r.data.message}),type:`${n.toUpperCase()}_UNLIKE_FAILED`,error:!0}))}),e.getState().user?.id&&s&&(0,i.WB)().optimisticallyDelete({CommunityHubLike:{[s]:null}},m)})},25959:(e,r,n)=>{n.d(r,{Ob:()=>y,Po:()=>b,Zy:()=>v});var i=n(551316),a=n(611504),o=n(280198),s=n(8374),l=n(225115),c=n(698522),d=n(694253),u=n(402840),p=n(678670),m=n(94822),h=n(406834),_=n(677251),g=n(28666),f=n(993797),E=n(142751);let y=(0,a.NC)("PLUGIN_INITIALIZE_LOCAL"),b=(0,a.NC)("PLUGIN_UPDATE_LOCAL"),v=(0,a.NC)("PLUGIN_DELETE_LOCAL"),T=!1,I=(0,c.M)();(0,s.nF)(async e=>{if(I){if(I.isCompatibleWith({desktopVersion:59})){let r=await I.getLocalManifestFileExtensionIdsToCachedMetadataMap()??{},n=Object.keys(r).map(e=>parseInt(e)),i=await Promise.all(n.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),a={};i.forEach(e=>{e.cachedContainsWidget=!!r[e.localFileId].cachedContainsWidget,e.lastKnownPluginId=r[e.localFileId].lastKnownPluginId||"",a[e.localFileId]=e}),e.dispatch(y(a))}else if(I.isCompatibleWith({desktopVersion:58})){let r=await I.getLocalManifestFileExtensionIdsToCachedContainsWidgetMap(),n=Object.keys(r).map(e=>parseInt(e)),i=await Promise.all(n.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),a={};i.forEach(e=>{e.cachedContainsWidget=!!r[e.localFileId],a[e.localFileId]=e}),e.dispatch(y(a))}else{let r=await I.getAllLocalFileExtensionIds(),n=await Promise.all(r.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),i={};n.forEach(e=>{i[e.localFileId]=e}),e.dispatch(y(i))}if(!T){T=!0,I.registerManifestChangeObserver(r=>{if("added"===r.type||"changed"===r.type){let n;let i=r.id,a=(0,u.mm)(i,r.localLoadResult,{resourceType:"unknown"}),s=e.getState().localPlugins[i]?.plugin_id;e.dispatch(b(a));let l=e.getState(),{publishingPlugins:c,localPlugins:p,publishedPlugins:m,publishedWidgets:h,currentUserOrgId:_,authedProfilesById:g,modalShown:y}=l,v=c[i];a.plugin_id!==s&&y?.type!==f.o.type&&e.dispatch((0,E.Ij)({id:i}));try{n=(0,u.mI)({...(0,d.getPermissionsState)(l),currentUserOrgId:_,localPlugins:p,publishedPlugins:m,publishedWidgets:h,authedProfilesById:g},i)}catch(r){e.dispatch(o.s.error(r.message));return}v&&v.metadata&&(0,u.L1)(v.metadata)&&!a.error&&e.dispatch((0,E.fy)({id:i,metadata:n}))}else"removed"===r.type&&e.dispatch(v(r.id))});let r=(0,i.s)(r=>{if("added"===r.type||"changed"===r.type){let n=e.getState().mirror?.selectionProperties?.selectedWidgetInfo;n&&n.pluginID&&l.x.mountWidget(n.pluginID,n.widgetID,"hot-reloading re-render");let i=p.SH()?.plugin,a=p.SH()?.triggeredFrom,o=e.getState();"manifestFileId"in r&&i&&(0,_.ZQ)(i)&&o.mirror.appModel.hotReloadPluginDev&&r.manifestFileId===i.localFileId&&(0,m.hM)()&&(async()=>{await (0,h.wY)(),"codegen"!==a&&(0,m.A9)({newTriggeredFrom:null}),(0,g.c)()})()}});I.registerCodeChangeObserver(r),I.registerManifestChangeObserver(r),I.registerUiChangeObserver(r)}}})},142751:(e,r,n)=>{n.d(r,{$Z:()=>z,Cf:()=>q,Dl:()=>ea,GV:()=>f.GV,Ij:()=>en,KJ:()=>ee,L4:()=>x,LP:()=>X,O8:()=>j,Qi:()=>f.Qi,R8:()=>el,Vp:()=>eo,Vx:()=>f.Vx,W9:()=>$,a8:()=>Z,b6:()=>G,et:()=>ec,f1:()=>Y,fd:()=>V,fs:()=>K,fy:()=>et,gD:()=>er,l5:()=>f.l5,l7:()=>f.l7,pm:()=>ei,se:()=>B,uF:()=>U,uV:()=>f.uV,uX:()=>H,uw:()=>W,wx:()=>ed,zn:()=>es});var i=n(992277),a=n(157907),o=n(611504),s=n(579020),l=n(6819),c=n(408095),d=n(502255),u=n(757033),p=n(280198),m=n(442313),h=n(719398),_=n(697714),g=n(23354),f=n(547730),E=n(544795),y=n(8374),b=n(125395),v=n(561959),T=n(341550),I=n(5291),S=n(285647),w=n(997894),A=n(694253),C=n(208364),N=n(402840),L=n(349507),O=n(526830),R=n(302302),P=n(940718),D=n(821013),M=n(728352),k=n(652984),F=n(851968);let x=(0,o.NC)("PLUGIN_REPLACE_FEATURED"),U=(0,y.nF)((e,r,{loadingKey:n})=>{if(!e.getState().user)return;let i=D.V.getPlugins(),a=M.U.getWidgets();i.then(({data:r})=>{let n=r.meta;e.dispatch((0,f.Qi)({publishedPlugins:n,src:"initializeUserPublishedPlugins"}))}),a.then(({data:r})=>{let n=r.meta;e.dispatch((0,f.Qi)({publishedPlugins:n,src:"initializeUserPublishedWidgets"}))}),(0,L.N)(a,e,n)}),B=w.M4.Query({fetch:async e=>(await D.V.getUnpublishedPlugins()).data.meta,output:({data:e})=>{let r={};if(e)for(let n of e)r[n.id]=n;return r}}),V=w.M4.Query({fetch:async e=>(await M.U.getUnpublishedWidgets()).data.meta,output:({data:e})=>{let r={};if(e)for(let n of e)r[n.id]=n;return r}}),G=(0,y.nF)((e,{widgetIDToVersions:r})=>{let{publishedCanvasWidgetVersions:n,currentUserOrgId:i}=e.getState();for(let[e,a]of Object.entries(r))a.forEach(a=>{let o=n[e]?.[a];o&&new Set(r[e]).forEach(e=>{C.F.getAndCache({...o,id:e},i??void 0)})})}),H=(0,y.nF)(async(e,{resourceId:r,resourceType:n})=>{let i=n===O.bD.WIDGET?M.U.getWidgets({id:r}):D.V.getPlugins({id:r}),{data:a}=await i,o=a.meta.find(e=>e.id===r);o&&e.dispatch((0,f.Qi)({publishedPlugins:[o],src:"getPublishedResource"}))}),K=(0,o.NC)("UPDATE_PUBLISHED_CANVAS_WIDGET_VERSIONS"),W=(0,o.NC)("UPDATE_FETCHED_CANVAS_WIDGET_VERSIONS");async function z(e,r,n){let i=await $({[e]:[r]},n);return i[e]?.[r]}async function $(e,r){let n=l.D.getState(),i=n.openFile?.key,a=await u.Ay.post("/api/widgets/v2/versions",{ids_to_versions:e,org_id:r,file_key:i}),o=a?.data?.meta||{};return l.D.dispatch(K(o)),l.D.dispatch(W(Object.fromEntries(Object.entries(e).map(([e,r])=>[e,Object.fromEntries(r.map(e=>[e,!0]))])))),o}let Y=(0,y.nF)(async(e,{pluginIds:r})=>{let{currentUserOrgId:n,publishedPlugins:i}=e.getState(),a=r.filter(e=>!i[e]);if(a.length)try{let e=await D.V.postPluginsBatch(a,n),r=e.data?.meta??[];l.D.dispatch((0,f.Qi)({publishedPlugins:r,src:"fetchPublishedPlugins",overrideInstallStatus:!0}))}catch{return}}),j=(0,y.nF)(async(e,{widgetIds:r})=>{let{currentUserOrgId:n,publishedWidgets:i}=e.getState(),a=r.filter(e=>!i[e]);if(a.length)try{let e=await u.Ay.post("/api/widgets/batch",{ids:a,org_id:n}),r=e.data?.meta??[];l.D.dispatch((0,f.Qi)({publishedPlugins:r,src:"fetchPublishedWidgets",overrideInstallStatus:!0}))}catch{return}}),q=(0,y.nF)(async(e,{widgetIDAndVersions:r})=>{let{currentUserOrgId:n}=e.getState(),i=[],a={};r.forEach(({widgetID:e,widgetVersionID:r})=>{a[e]?a[e].includes(r)||a[e].push(r):(i.push(e),a[e]=[r])}),0!==i.length&&(await $(a,n),e.dispatch(G({widgetIDToVersions:a})),e.dispatch(j({widgetIds:Object.keys(a)})))});(0,y.nF)((e,r,{loadingKey:n})=>{let i=D.V.getProfile({profileId:r.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),a=(0,F.UM)(r.profileId);return(0,L.N)(i,e,n),i.then(async({data:r})=>{let n=[...await a,...r.meta];return e.dispatch((0,f.Qi)({publishedPlugins:n,src:"getCommunityProfilePlugins"})),n})},({profileId:e})=>`GET_COMMUNITY_PROFILE_PLUGINS_${e}`),(0,y.nF)((e,r,{loadingKey:n})=>{let i=M.U.getProfile({profileId:r.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),a=(0,F.Jr)(r.profileId);return(0,L.N)(i,e,n),i.then(async({data:r})=>{let n=[...await a,...r.meta];return e.dispatch((0,f.Qi)({publishedPlugins:n,src:"getCommunityProfileWidgets"})),n})},({profileId:e})=>`GET_COMMUNITY_PROFILE_WIDGETS_${e}`);let X=(0,y.nF)((e,r,{loadingKey:n})=>{let i=D.V.getOrg({orgId:r});return(0,L.N)(i,e,n),i.then(({data:r})=>{let n=r.meta;return e.dispatch((0,f.Qi)({publishedPlugins:n,src:"getOrgPublishedPlugins"})),n})},e=>`GET_ORG_PUBLISHED_PLUGINS_${e}`),Z=(0,y.nF)(async(e,r,{loadingKey:n})=>{try{e.dispatch(T.Cx({key:n}));let i=await M.U.getOrg({orgId:r}),a=i?.data?.meta||[];return e.dispatch((0,f.Qi)({publishedPlugins:a,src:"getOrgPublishedWidgets"})),e.dispatch(T.x2({key:n})),a}catch(r){return p.s.flash(r.message||(0,m.t)("community.actions.an_error_occurred_while_trying_to_fetch_the_org_widgets_list")),e.dispatch(T.of({key:n})),[]}},e=>`GET_ORG_PUBLISHED_WIDGETS_${e}`);async function J(e,r,n){if(null===e.current_plugin_version_id||!e.id)throw Error((0,m.t)("community.actions.resource_is_invalid"));let a=0;r.iconBlob&&(a=(0,N.wf)(r.iconBlob));let o=0;r.coverBlob&&(o=(0,N.oD)(r.coverBlob));let l=r.carouselMedia,{uploadImages:c,uploadVideos:p,allMedia:_}=(0,S.Kg)(l),f=await P.w.postPluginImagesUpload(e.id,e.is_widget,c),E=Promise.resolve(!1),y=r.iconBlob;void 0!==y&&(E=(0,I.c)(y).then(e=>(0,S.Ac)(f.iconUploadUrl,y,e)).then(()=>!0).catch(r=>{(0,d.$D)(i.e.COMMUNITY,r);let n=(0,h.J)(r,(0,m.t)("community.actions.could_not_connect_to_the_server"));throw Error((0,O.xQ)(e)?(0,m.t)("community.actions.error_uploading_widget_icon_error",{error:n}):(0,m.t)("community.actions.error_uploading_plugin_icon_error",{error:n}))}));let b=Promise.resolve(!1),v=r.coverBlob;void 0!==v&&(b=(0,I.c)(v).then(e=>(0,S.Ac)(f.coverImageUploadUrl,v,e)).then(()=>!0).catch(r=>{throw(0,d.$D)(i.e.COMMUNITY,r),Error((0,O.xQ)(e)?(0,m.t)("community.actions.error_uploading_widget_artwork_image_error",{error:(0,h.J)(r,r.data?.message||"unknown error")}):(0,m.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:(0,h.J)(r,r.data?.message||"unknown error")}))}));let{snapshotBlob:T}=r,w=Promise.resolve(!1);void 0!==T&&(w=(0,I.c)(T).then(e=>{if(!f.snapshotUploadUrl)throw Error("Snapshot upload url is missing");return(0,S.Ac)(f.snapshotUploadUrl,T,e)}).then(()=>!0).catch(e=>{throw(0,d.$D)(i.e.COMMUNITY,e),Error((0,m.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:(0,h.J)(e,e.data?.message||"unknown error")}))}));let A=(0,S.Rd)(f.carouselImages,l),[C,L,R]=await Promise.all([E,b,w,...A]),D=p.map(r=>(0,S.Gf)((0,g.KH)(e,{pluralized:!0}),e.id,{sha1:r.sha1,bytes:r.bytes},r.video_thumbnail_buffer,r.video_thumbnail_sha1).then(e=>{_.push({carousel_position:r.carousel_position,sha1:e.sha1,video_file_uuid:e.videoFileUuid,video_thumbnail_sha1:e.videoThumbnailSha1})}).then(()=>!0).catch(e=>{throw(0,d.$D)(i.e.COMMUNITY,e),Error((0,m.t)("community.actions.error_uploading_plugin_video_error",{error:(0,h.J)(e,e.data?.message||"unknown error")}))}));await Promise.all(D);let{data:M}=await u.Ay.put(`/api/${(0,g.KH)(e,{pluralized:!0})}/${e.id}/versions/${r.id}`,{icon_uploaded:C,cover_image_uploaded:L,snapshot_uploaded:R,carousel_media:_,name:r.name,description:r.description,tagline:r.tagline,creator_policy:r.creatorPolicy,release_notes:r.releaseNotes,comments_setting:e.comments_setting,category_id:e.category_id,image_upload_nonce:f.imageUploadNonce,playground_fig_file_key:r.playground_fig_file_key,playground_file_publish_type:n}).catch(e=>{throw(0,d.$D)(i.e.COMMUNITY,e),Error((0,m.t)("community.actions.error_finalizing_plugin_error",{error:(0,h.J)(e,e.data?.message||"unknown error")}))}),k=M.meta,F=k.plugin;if(F.id!==e.id)throw Error((0,m.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,s.sx)("Hub Plugin Update Version",{pluginId:e.id,isWidget:e.is_widget,iconFileSize:a,coverFileSize:o}),{publishedPlugin:F,profile:k.profile}}async function Q(e,r,n,o,l,c,p,_,f,E,y){let b;if(!e)throw Error((0,m.t)("community.actions.plugin_id_is_invalid"));let[v,T]=await Promise.all([(0,N.c2)(r,{resourceType:(0,g.nF)(E),isPublishing:!0}),(0,N.MB)(r)]),w=(0,N.ZT)(T),A=0;n.iconBlob&&(A=(0,N.wf)(n.iconBlob));let C=0;n.coverBlob&&(C=(0,N.oD)(n.coverBlob));let L=n.carouselMedia,{uploadImages:O,uploadVideos:R,allMedia:D}=(0,S.Kg)(L),M={manifest:v,release_notes:n.releaseNotes,name:n.name,description:n.description,tagline:n.tagline,creator_policy:n.creatorPolicy,tags:c,tags_v2:p,category_id:l,images_sha1:O};try{b=await P.w.postPluginUpload(M,e,E)}catch(e){throw(0,d.$D)(i.e.COMMUNITY,e),Error((0,h.J)(e,(0,m.t)("community.actions.could_not_connect_to_the_server")))}let{codeUploadUrl:k,iconUploadUrl:F,coverImageUploadUrl:x,snapshotUploadUrl:U,signature:B,versionId:V,imageUploadNonce:G,carouselImages:H}=b,K=e=>{let r=e.data;if(!r||"string"!=typeof r)return;let n=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("Code");if(n&&n[0]&&"EntityTooLarge"===n[0].textContent)return(0,m.t)("community.actions.file_too_large")},W=Promise.resolve(!1);T&&(W=(e=>{let{fields:r,codePath:n,signedCloudfrontUrl:i}=e,o=new FormData;return(Object.entries(r).forEach(([e,r])=>o.append(e,r)),o.set("Content-Type","text/javascript"),o.append("file",T),i&&(0,a.k)().ext_s3_url_use_figma_domains)?u.Ay.crossOriginPut(i,T,{raw:!0,headers:{"Content-Type":"text/javascript","Cache-Control":"private, max-age=86400","x-amz-acl":"bucket-owner-full-control"}}):u.Ay.crossOriginPost(n,o,{raw:!0,headers:{"Content-Type":"multipart/form-data","Cache-Control":"private, max-age=86400"}})})(k).then(()=>!0).catch(e=>{(0,d.$D)(i.e.COMMUNITY,e);let r=K(e)??(0,h.J)(e,(0,m.t)("community.actions.could_not_connect_to_the_server"));throw Error(E?(0,m.t)("community.actions.error_uploading_widget_code_error",{error:r}):(0,m.t)("community.actions.error_uploading_plugin_code_error",{error:r}))}));let z=Promise.resolve(!1),$=n.iconBlob;null!=$&&(z=(0,I.c)($).then(e=>(0,S.Ac)(F,$,e)).then(()=>!0).catch(e=>{(0,d.$D)(i.e.COMMUNITY,e);let r=K(e)??(0,h.J)(e,e.data?.message||"unknown error");throw Error(E?(0,m.t)("community.actions.error_uploading_widget_icon_error",{error:r}):(0,m.t)("community.actions.error_uploading_plugin_icon_error",{error:r}))}));let Y=Promise.resolve(!1),j=n.coverBlob;null!=j&&(Y=(0,I.c)(j).then(e=>(0,S.Ac)(x,j,e)).then(()=>!0).catch(e=>{(0,d.$D)(i.e.COMMUNITY,e);let r=K(e)??(0,h.J)(e,(0,m.t)("community.actions.could_not_connect_to_the_server"));throw Error(E?(0,m.t)("community.actions.error_uploading_widget_artwork_image_error",{error:r}):(0,m.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:r}))}));let{snapshotBlob:q}=n,X=Promise.resolve(!1);null!=q&&U&&(X=(0,I.c)(q).then(e=>(0,S.Ac)(U,q,e)).then(()=>!0).catch(e=>{throw(0,d.$D)(i.e.COMMUNITY,e),Error((0,m.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:K(e)??(0,h.J)(e,e.data?.message||"unknown error")}))}));let Z=(0,S.Rd)(H,L),[J,Q,ee,et]=await Promise.all([W,z,Y,X,...Z]),er=R.map(async r=>{try{let n=await (0,S.Gf)(E?"widgets":"plugins",e,{sha1:r.sha1,bytes:r.bytes},r.video_thumbnail_buffer,r.video_thumbnail_sha1);return D.push({carousel_position:r.carousel_position,sha1:n.sha1,video_file_uuid:n.videoFileUuid,video_thumbnail_sha1:n.videoThumbnailSha1}),!0}catch(e){throw(0,d.$D)(i.e.COMMUNITY,e),Error((0,m.t)("community.actions.error_uploading_plugin_video_error",{error:(0,h.J)(e,e.data?.message||"unknown error")}))}});await Promise.all(er);let{data:en}=await u.Ay.put(`/api/${(0,g.nF)(!!E,{pluralized:!0})}/${e}/versions/${V}`,{icon_uploaded:Q,cover_image_uploaded:ee,snapshot_uploaded:et,carousel_media:D,code_uploaded:J,comments_setting:o,category_id:l,signature:B,image_upload_nonce:G,agreed_to_tos:_,org_id:f,playground_fig_file_key:n.playground_fig_file_key,playground_file_publish_type:y}).catch(e=>{throw(0,d.$D)(i.e.COMMUNITY,e),Error(E?(0,m.t)("community.actions.error_finalizing_widget_error",{error:(0,h.J)(e,e.data?.message||"")}):(0,m.t)("community.actions.error_finalizing_plugin_error",{error:(0,h.J)(e,e.data?.message||"")}))}),ei=en.meta,ea=ei.plugin;if(ea.id!==e)throw Error((0,m.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,s.sx)("Hub Plugin Publish Version",{pluginId:e,hasUI:!!v.ui,apiVersion:v.api,codeLength:w,iconFileSize:A,coverFileSize:C,isWidget:E,editorType:v.editorType?.sort().join(", ")}),{publishedPlugin:ea,profile:ei.profile}}let ee=(0,b.d6)("PLUGIN"),{updateMetadata:et,updateStatus:er,clearMetadataAndStatus:en,clearMetadata:ei}=ee,ea=(0,y.nF)(async(e,r)=>{let{pluginVersion:n,localFileId:a,pluginId:o,commentsSetting:s,categoryId:l,callback:u,agreedToTos:p,orgId:g,isWidget:E,playgroundFilePublishType:y,tags:b,tagsV2:T}=r;e.dispatch(er({id:a,status:{code:R.aP.UPLOADING}}));try{let{publishedPlugin:r,profile:i}=await Q(o,a,n,s,l,b,T,p,g,E,y);e.dispatch((0,f.Qi)({publishedPlugins:[r],src:"publishPluginVersion"})),i&&(e.dispatch(v.HZ(i)),e.dispatch(v.Oo(i))),e.dispatch(er({id:a,status:{code:R.aP.SUCCESS}})),e.dispatch(ei({id:a})),u()}catch(n){e.dispatch(er({id:a,status:{code:R.aP.FAILURE,error:n.message}}));let r=(0,m.t)("community.actions.could_not_publish_plugin_error",{error:(0,h.J)(n,n.message)});throw n instanceof c.qW?(0,k.MZ)(e.dispatch,(0,m.t)("check_network_compatibility.error_bell.video_upload.message")):n.message.includes("invalid word")||e.dispatch(_.F.enqueue({message:r,error:!0})),(0,d.$D)(i.e.COMMUNITY,n),Error(r)}}),eo=(0,y.nF)(async(e,r)=>{let{resource:n,pluginVersion:a,callback:o,playgroundFilePublishType:s,localFileIdOrPluginId:l}=r;try{e.dispatch(er({id:l,status:{code:R.aP.UPLOADING}}));let{profile:r,publishedPlugin:i}=await J(n,a,s);e.dispatch((0,f.Qi)({publishedPlugins:[i],src:"updatePublishedPluginRole"})),r&&e.dispatch(v.Oo(r)),e.dispatch(er({id:l,status:{code:R.aP.SUCCESS}})),o()}catch(n){let r=(0,h.J)(n,n.message);throw n instanceof c.qW?(0,k.MZ)(e.dispatch,(0,m.t)("check_network_compatibility.error_bell.video_upload.message")):e.dispatch(_.F.enqueue({message:r,error:!0})),e.dispatch(er({id:l,status:{code:R.aP.FAILURE,error:r}})),(0,d.$D)(i.e.COMMUNITY,n),Error(`Failed plugin patchVersion: ${n.message}`)}}),es=(0,y.nF)(async(e,{pluginId:r,role:n,agreedToTos:a,isWidget:o})=>{let l;let c={org_id:n.org?n.org.id:void 0,is_public:n.is_public,agreed_to_tos:a};l=o?u.Ay.put(`/api/widgets/${r}/roles`,c):u.Ay.put(`/api/plugins/${r}/roles`,c),await l.then(({data:n})=>{let i=n.meta;(0,s.sx)("Hub Plugin Publish Role",{pluginId:r,toPublic:i.roles.is_public,toOrg:!!i.roles.org,needApproval:(0,E.AC)(i),isWidget:o}),e.dispatch((0,f.Qi)({publishedPlugins:[i],src:"updatePublishedPluginRole"}))}).catch(r=>{e.dispatch(_.F.enqueue({message:(0,m.t)("community.publishing.could_not_publish_plugin_error",{error:(0,h.J)(r,r.data?.message)}),error:!0})),(0,d.$D)(i.e.COMMUNITY,r)})}),el=(0,y.nF)(async(e,r)=>{let n;if(r.authorOrgId&&r.authorTeamId){console.error("Attempting to set both authorOrgId and authorTeamId while publishing");return}let{isWidget:a,pluginId:o}=r,s={tags:r.tags,tags_v2:r.tagsV2,support_contact:r.supportContact,author_org_id:r.authorOrgId,author_team_id:r.authorTeamId,publisher_ids:r.publisherIds,hide_related_content_by_others:r.hideRelatedContentByOthers,agreed_to_tos:r.agreedToTos,is_paid:r.isPaid,is_subscription:r.isSubscription,price:r.price,has_freemium_code:r.hasFreemiumCode,category_id:r.categoryId,is_public:r.isPublic,annual_discount_percentage:r.annualDiscount,is_annual_discount_active:r.isAnnualDiscountActive};n=a?u.Ay.put(`/api/widgets/${o}`,s):u.Ay.put(`/api/plugins/${o}`,s),await n.then(({data:n})=>{let i=n.meta;e.dispatch((0,f.Qi)({publishedPlugins:[i],src:"updatePublishedPlugin"})),r.onSuccess?.()}).catch(r=>{e.dispatch(_.F.enqueue({message:(0,m.t)("community.publishing.could_not_publish_plugin_error",{error:(0,h.J)(r,r.data?.message)}),error:!0})),(0,d.$D)(i.e.COMMUNITY,r)})}),ec=(0,y.nF)((e,{resource:r})=>{u.Ay.del(`/api/${(0,g.KH)(r,{pluralized:!0})}/${r.id}`).then(({data:n})=>{let i=n.meta;e.dispatch((0,f.Qi)({publishedPlugins:[i],src:"unpublishPublishedPlugin"})),(0,s.sx)("Hub Unpublish Plugin",{pluginId:r.id,...(0,N.L8)(r)})}).catch(n=>{e.dispatch(_.F.enqueue({message:(0,O.xQ)(r)?(0,m.t)("community.actions.could_not_publish_widget_error",{error:(0,h.J)(n,n.data?.message)}):(0,m.t)("community.actions.could_not_publish_plugin_error",{error:(0,h.J)(n,n.data?.message)}),error:!0})),(0,d.$D)(i.e.COMMUNITY,n)})});(0,y.nF)((e,{id:r,resourceType:n},{loadingKey:i})=>{let a=r=>e.dispatch((0,f.Qi)({publishedPlugins:[r],src:"getResourceVersions",overrideInstallStatus:!0})),o=n===O.bD.WIDGET?M.U.getVersions({widgetId:r}):D.V.getVersions({pluginId:r});(0,L.N)(o,e,i),o.then(({data:e})=>{a(e.meta.plugin)}).catch(e=>{console.log(`Versions of ${n} with id ${r} cannot be fetched at this time:`,e.data?.message)})},({id:e})=>`GET_PLUGIN_VERSIONS_${e}`);let ed=(0,y.nF)(async(e,r)=>{let{role:n,userId:a,resource:o}=r;try{let r=(o.is_widget?await u.Ay.put(`/api/widgets/${o.id}/publishers/${a}`,{role:n}):await u.Ay.put(`/api/plugins/${o.id}/publishers/${a}`,{role:n})).data.meta.plugin,i=e.getState().user;n===R.kM.NONE&&a===i?.id&&(r.plugin_publishers={accepted:[],pending:[]}),e.dispatch((0,f.Qi)({publishedPlugins:[r],src:"setPluginPublisherRole"}));let s=e.getState(),{publishingPlugins:l,localPlugins:c,publishedPlugins:d,publishedWidgets:p,currentUserOrgId:m,authedProfilesById:h}=s,_=Object.values(c).find(e=>e.plugin_id===o.id),g=_?.localFileId??o.id,E=(0,N.mI)({...(0,A.getPermissionsState)(s),currentUserOrgId:m,localPlugins:c,publishedPlugins:d,publishedWidgets:p,authedProfilesById:h},_?.localFileId),y={...l[g].metadata,author:E.author,publishers:E.publishers,creators:E.creators,blockPublishingOnToS:E.blockPublishingOnToS};e.dispatch(et({id:g,metadata:y}))}catch(r){throw e.dispatch(_.F.enqueue({message:(0,h.J)(r,r.message),error:!0})),(0,d.$D)(i.e.COMMUNITY,r),Error(r.message)}})},15027:(e,r,n)=>{n.d(r,{d6:()=>S,g3:()=>T,oj:()=>N,s1:()=>w,uR:()=>I});var i=n(611504),a=n(579020),o=n(858423),s=n(507152),l=n(757033),c=n(442313),d=n(719398),u=n(697714),p=n(8374),m=n(142751),h=n(114735),_=n(901647),g=n(96447),f=n(625069),E=n(526830),y=n(821013),b=n(728352),v=n(53818);let T=(0,i.NC)("SET_SAVED_PLUGIN_VERSIONS");(0,p.nF)((e,r)=>{let n={};Object.keys(r).forEach(e=>{n[e]=[r[e].id]}),e.dispatch(m.b6({widgetIDToVersions:n}))});var I=(e=>(e.COMMUNITY_HUB="community_hub",e.INSERTS_MODAL="inserts_modal",e))(I||{});let S=(0,v.n)((0,p.MM)("SAVE_EXTENSION",(e,{id:r,resourceType:n,versionId:i,orgId:p,onSuccess:y,hideSuccessVisualBell:b,onFail:v,source:T,optimisticData:I},{optimistId:S})=>{let w=e.getState(),A={plugin_version_id:i,org_id:p,current_org_id:w.currentUserOrgId};A.can_handle_first_time_install=!0,A.use_upgraded_version=!0,A.profile_id=e.getState().authedActiveCommunityProfile?.id,n===E.vt.WIDGET&&(A.current_org_id=void 0);let C=`/api/${(0,f.n)(n)}/${r}/install`,N=l.Ay.post(C,A);if(w.user&&I?.resource){let e=`optimistic-plugin-install-${(0,s.g)()}`,r=(0,g.N3)(I.resource,{userId:p?null:w.user.id,orgId:p??null});r&&(0,o.WB)().optimisticallyCreate({PluginInstall:{[e]:r}},N)}N.then(({data:r})=>{e.dispatch(h.c(S));let i=r.meta,o=n===E.vt.WIDGET?{publishedPlugins:[i],src:"installResource",isWidget:!0}:{publishedPlugins:[i],src:"installResource"};if(e.dispatch(m.Qi({...o,overrideInstallStatus:!0})),y?.(),!b){let r=(()=>{if("inserts_modal"===T)return n===E.vt.PLUGIN?(0,c.t)("community.saves.plugin_saved"):(0,c.t)("community.saves.widget_saved");if(p){let r=Object.values(e.getState().authedProfilesById).find(e=>e.org_id===p);return(0,c.t)(n===E.vt.PLUGIN?"community.saves.plugin_saved_for_everyone_at":"community.saves.widget_saved_for_everyone_at",{orgName:r?.name||"your org"})}return e.getState().user?.community_profile_id?(0,c.t)(n===E.vt.PLUGIN?"community.saves.plugin_saved_for_your_account_and_profile":"community.saves.widget_saved_for_your_account_and_profile"):n===E.vt.PLUGIN?(0,c.t)("community.saves.plugin_saved_for_your_account"):(0,c.t)("community.saves.widget_saved_for_your_account")})();e.dispatch(u.F.enqueue({message:r,type:"plugin-installed"}))}(0,a.sx)((0,E.xQ)(i)?_.M5.WIDGET_INSTALLED:_.M5.PLUGIN_INSTALLED,{communityHubEntity:(0,E.xQ)(i)?_.ZO.WIDGETS:_.ZO.PLUGINS,communityHubEntityId:i.id,source:T})}).catch(r=>{v?.(),e.dispatch(h.r(S)),403===r.data.status?e.dispatch(u.F.enqueue({message:n===E.vt.PLUGIN?(0,c.t)("community.actions.unable_to_save_plugin_error",{error:(0,d.J)(r,r.data?.message)}):(0,c.t)("community.actions.unable_to_save_widget_error",{error:(0,d.J)(r,r.data?.message)}),type:"PLUGIN_INSTALL_FAILED",error:!0})):e.dispatch(u.F.enqueue({message:n===E.vt.PLUGIN?(0,c.t)("community.actions.unable_to_save_plugin_please_try_again"):(0,c.t)("community.actions.unable_to_save_widget_please_try_again"),type:"PLUGIN_INSTALL_FAILED",error:!0}))})})),w=(0,p.MM)("UNSAVE_EXTENSION",(e,{id:r,resourceType:n,orgId:i,hideSuccessVisualBell:s,source:d,optimisticData:p},{optimistId:g})=>{let y={org_id:i,current_org_id:e.getState().currentUserOrgId};y.use_upgraded_version=!0,y.profile_id=e.getState().authedActiveCommunityProfile?.id,n===E.vt.WIDGET&&(y.current_org_id=void 0);let b=`/api/${(0,f.n)(n)}/${r}/install`,v=l.Ay.del(b,y);p?.pluginInstallId&&(0,o.WB)().optimisticallyDelete({PluginInstall:{[p.pluginInstallId]:null}},v),v.then(({data:o})=>{let l=o.meta,p=n===E.vt.WIDGET?{publishedPlugins:[l],src:"uninstallResource",isWidget:!0}:{publishedPlugins:[l],src:"uninstallResource"};if(e.dispatch(m.Qi({...p,overrideInstallStatus:!0})),e.dispatch(h.c(g)),!s){let a={message:(()=>{if("inserts_modal"===d)return n===E.vt.PLUGIN?(0,c.t)("community.saves.plugin_removed_from_your_account"):(0,c.t)("community.saves.widget_removed_from_your_account");if(i){let r=Object.values(e.getState().authedProfilesById).find(e=>e.org_id===i);return(0,c.t)(n===E.vt.PLUGIN?"community.saves.plugin_removed_for_everyone_at":"community.saves.widget_removed_for_everyone_at",{orgName:r?.name||"your org"})}return e.getState().user?.community_profile_id?(0,c.t)(n===E.vt.PLUGIN?"community.saves.plugin_removed_from_your_account_and_profile":"community.saves.widget_removed_from_your_account_and_profile"):n===E.vt.PLUGIN?(0,c.t)("community.saves.plugin_removed_from_your_account"):(0,c.t)("community.saves.widget_removed_from_your_account")})(),type:"PLUGIN_UNINSTALL_SUCCESS",button:{text:(0,c.t)("community.undo"),action:()=>{e.dispatch(u.F.dequeue({matchType:"PLUGIN_UNINSTALL_SUCCESS"})),e.dispatch(S({id:r,resourceType:n,orgId:i,hideSuccessVisualBell:!0,source:d}))}}};e.dispatch(u.F.enqueue(a))}(0,a.sx)((0,E.xQ)(l)?_.M5.WIDGET_UNINSTALLED:_.M5.PLUGIN_UNINSTALLED,{communityHubEntity:(0,E.xQ)(l)?_.ZO.WIDGETS:_.ZO.PLUGINS,communityHubEntityId:l.id,source:d})}).catch(r=>{e.dispatch(h.r(g)),console.error(r)})}),A={[E.bD.PLUGIN]:function(e){return y.V.getInstallStatus({orgId:e})},[E.bD.WIDGET]:function(e){return b.U.getInstallStatus({orgId:e})}},C=(0,p.nF)((e,r)=>{let n={plugin_id:r.id};r.orgId&&(n.org_id=r.orgId);let i=A[r.resourceType];i&&i(r.orgId).then(({data:e})=>{r.callback(!e.meta.previously_installed_plugin)}).catch(n=>{e.dispatch(u.F.enqueue({type:"plugin-save-error",message:r.resourceType===E.vt.PLUGIN?(0,c.t)("community.actions.unable_to_save_plugin_error",{error:(0,d.J)(n,n.data.message||"unknown error")}):(0,c.t)("community.actions.unable_to_save_widget_error",{error:(0,d.J)(n,n.data.message||"unknown error")}),error:!0}))})}),N=(0,p.nF)((e,r)=>{let{orgId:n,id:i,resourceType:a,communityProfile:o}=r;e.dispatch(C({orgId:n,id:i,resourceType:a,callback:()=>{e.dispatch(S({id:i,resourceType:a,orgId:n,communityProfile:o,source:"community_hub"}))}}))})},108597:(e,r,n)=>{n.d(r,{aI:()=>W,cx:()=>K,s0:()=>z});var i=n(992277),a=n(579020),o=n(381862),s=n(831932),l=n(502255),c=n(736248),d=n(442313),u=n(697714),p=n(164963),m=n(781014),h=n(519791),_=n(176283),g=n(34631),f=n(8374),E=n(449737),y=n(93724),b=n(277019),v=n(601269),T=n(366082),I=n(776130),S=n(217242),w=n(694253),A=n(402840),C=n(97859),N=n(526830),L=n(241917),O=n(430330),R=n(677251),P=n(314693),D=n(464012),M=n(447012),k=n(117592),F=n(688827),x=n(903761),U=n(529628);let B=()=>async e=>{let r="org-admin-team-creation";e(u.F.enqueue({message:(0,d.t)("resources_tab.create_team_modal.team_creation_loading"),type:r,icon:p.zX.SPINNER}));try{let n=(await P.G.createStarterTeam()).data.meta;return e(u.F.dequeue({matchType:r})),e(E.Lo()),n}catch(n){return e(u.F.dequeue({matchType:r})),e(E.Lo()),e(u.F.enqueue({message:(0,d.t)("general.an_error_occurred"),error:!0})),Promise.reject()}},V=(0,D.Ju)(k.Rw),G=(e,r,n)=>i=>{i(E.to({type:V,data:{confirmationTitle:(0,d.t)("resources_tab.create_team_modal.modal_title",{extensionName:e}),content:(0,d.t)("resources_tab.create_team_modal.content",{orgName:r}),confirmText:(0,d.t)("general.continue"),onConfirm:()=>{i(B()).then(n)},hideCancel:!0}}))},H=(0,f.nF)(async(e,r)=>{let{workspaces:n,plans:i}=r,a=e.getState(),{authedUsers:o,orgById:s}=a,l=n.map(e=>({...e,workspaceName:(0,I.HE)(a,e),user:o.byId[e.userId]})),c=await Promise.all(l.map(async e=>{let n=e.orgId&&s[e.orgId],o=!0,l=!0;if(n&&(o=await (0,v.hb)(r.resource,n),l=(0,v.VT)(r.resource,n)),(0,A.Rt)(r.resource)&&!(0,w.canMemberOrg)(e.orgId,a,e.userId))return;let c=(0,g.y)(e,(0,L.wN)(r.editorType),a,i);return c.publicPluginsOrWidgetDisabled=!o,c.extensionRequestsAllowed=l,c})),d=[];if(c.forEach(e=>{void 0!==e&&d.push(e)}),d.length<=1){let e=d.length?d[0]:void 0;r.onSelectWorkspace(e);return}e.dispatch(E.to({type:h._,data:{payload:{extension:r.resource,workspaces:d,onSelectWorkspace:r.onSelectWorkspace,mode:"new_file"}}}))}),K=(0,f.nF)((e,r)=>{if(s.rr){window.location.href="/login";return}let n=r.isWidget?(0,d.t)("community.logged_out.sign_up_modal_widget_header"):(0,d.t)("community.logged_out.sign_up_modal_plugin_header");e.dispatch(c.Ts({origin:"plugin_try_signed_out"})),e.dispatch(E.to({type:M.l,data:{headerText:n,icon:r.isWidget?U.A:x.A,dispatch:e.dispatch,redirectPath:r.redirectPath}}))});(0,f.nF)((e,r)=>{let n=e.getState().user,i=!!r.extension.isWidget,a=r.extension.currentPluginVersion;if(!a||!n)return;let o=a.hasPlaygroundFile,s=r.fullscreenEditorType===L.nT.DevHandoff,l={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:a.id,tryPluginName:a.name??"",isWidget:i,isPlaygroundFile:!!(o||s),fuid:n.id,tryPluginParams:void 0};(0,C.Y9)(n.id,!1,null),(0,F.j)(l,null,null,n.id),(()=>{let o={storeInRecentsKey:(0,b.B)(r.fullscreenEditorType),id:r.extension.id,version:a.id,currentUserId:n.id};i?e.dispatch(y.RH(o)):e.dispatch(y.gU(o))})()}),(0,f.nF)((e,r)=>{let n=e.getState(),i=n.user,a=!!r.extension.isWidget,s=r.extension.currentPluginVersion;if(!s||!i)return;let l=()=>{let n={storeInRecentsKey:(0,b.B)(r.fullscreenEditorType),id:r.extension.id,version:s.id,currentUserId:i.id};a?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))},c=s.hasPlaygroundFile,d=r.fullscreenEditorType===L.nT.DevHandoff,u={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:s.id,tryPluginName:s.name??"",isWidget:a,isPlaygroundFile:!!(c||d),fuid:i.id,tryPluginParams:void 0},p=n.plans.filter(e=>e.plan_type===O.O.TEAM).map(e=>{let r=(0,o.O)(e,i.id);return{...r,workspaceName:(0,I.HE)(n,r),user:i}});if(0===p.length){e.dispatch(G(s.name,n.orgById[n.currentUserOrgId].name,e=>{(0,C.Y9)(i.id,!1,null,void 0,e.id),(0,F.j)(u,null,e.id,i.id),l()}));return}1===p.length?((0,C.Y9)(i.id,!1,null,void 0,p[0].teamId??null),(0,F.j)(u,null,p[0].teamId??null,i.id),l()):e.dispatch(E.to({type:h._,data:{payload:{workspaces:p,onSelectWorkspace:e=>{(0,C.Y9)(i.id,!1,null,void 0,e?.teamId??null),(0,F.j)(u,null,e?.teamId??null,i.id),l()},mode:"new_file"}}}))}),(0,f.nF)((e,r)=>{let n=e.getState(),i=n.user,a=!!r.extension.isWidget,o=r.extension.currentPluginVersion;if(!o||!i)return;let s=o.hasPlaygroundFile,l=r.fullscreenEditorType===L.nT.DevHandoff,c={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:o.id,tryPluginName:o.name??"",isWidget:a,isPlaygroundFile:!!(s||l),fuid:i.id,tryPluginParams:void 0},d=n.plans.find(e=>e.plan_type===O.O.ORG&&e.plan_id===n.currentUserOrgId);(0,C.Y9)(i.id,!1,d.plan_id,void 0,null),(0,F.j)(c,d.plan_id,null,i.id),(()=>{let n={storeInRecentsKey:(0,b.B)(r.fullscreenEditorType),id:r.extension.id,version:o.id,currentUserId:i.id};a?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))})()});let W=(0,f.nF)(async(e,r)=>{let n=e.getState(),{user:o}=n,s=(0,_.w)(n),c=(0,N.xQ)(r.resource),p=(0,A.uF)(r.resource);if(!o){e.dispatch(K({isWidget:c}));return}let m=()=>{let n={storeInRecentsKey:(0,b.B)(r.fullscreenEditorType),id:r.resource.id,version:p.id,currentUserId:o.id};c?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))},h=[],g=null;try{g=await e.dispatch((0,T.nm)(!0)),h=(0,S.F)(n,r.resource,g)}catch(n){let r=n?.data?.message||(0,d.t)("file_browser.error_try_again");e.dispatch(u.F.enqueue({message:r,type:"error"}))}let f=h.length>1&&!r.fileKey,E={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.resource.id,tryPluginVersionId:p.id,tryPluginName:p.name,tryPluginEditorType:p.manifest.editorType?.[0]??R.FW.FIGMA,isWidget:c,isPlaygroundFile:!!r.isPlaygroundFile,tryPluginParams:void 0,fileKey:r.fileKey};if((0,a.sx)("CTA Clicked",{name:"Try it out",pluginId:r.resource.id,isWidget:c,editorType:r.fullscreenEditorType,isMonetized:(0,N.m3)(r.resource),fileKey:r.fileKey,searchSessionId:s}),f)(0,a.sx)("try_it_out_drafts_picker_menu_opened",{pluginId:r.resource.id,isWidget:c,searchSessionId:s}),e.dispatch(H({plans:g,workspaces:h,resource:r.resource,editorType:(0,L.oD)(r.fullscreenEditorType),onSelectWorkspace:e=>{e?(E.fuid=e.userId,(0,C.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),(0,F.j)(E,e.orgId,e.teamId??null,e.userId)):(0,F.j)(E,null,null,o.id),m()}}));else if(r.fileKey)E.fuid=r.userId??o.id,(0,F.j)(E,null,null,E.fuid);else if(1===h.length){let i=h[0];if(i.orgId&&!(0,v.VT)(r.resource,n.orgById[i.orgId])&&!await (0,v.hb)(r.resource,n.orgById[i.orgId])){e.dispatch(G(p.name,(0,I.HE)(n,i),e=>{(0,C.Y9)(o.id,!1,null,void 0,e.id),(0,F.j)(E,null,e.id,o.id),m()}));return}(0,C.Y9)(i.userId,!1,i.orgId,void 0,i.teamId??null),(0,F.j)(E,i.orgId,i.teamId??null,i.userId)}else(0,l.$D)(i.e.COMMUNITY,Error("No workspaces found")),e.dispatch(u.F.enqueue({message:(0,d.t)("file_browser.error_try_again"),error:!0}))});function z(e,r){e(E.to({type:m.t,data:{onContinue:r}}))}},670804:(e,r,n)=>{n.d(r,{MZ:()=>y,Nn:()=>f,Xt:()=>T,aq:()=>v,dx:()=>E,gI:()=>I});var i=n(757033),a=n(280198),o=n(442313),s=n(719398),l=n(479771),c=n(8374),d=n(142751),u=n(421563),p=n(481540),m=n(402840),h=n(837638),_=n(180633),g=n(972844),f=(e=>(e.INVITE_TILE="invite_tile",e.COMMUNITY_PAGE="community_page",e))(f||{});(0,c.nF)((e,r)=>{i.Ay.put("/api/community_publishers/accept",r).then(({data:r})=>{let n=b(r.meta);n&&e.dispatch(n)}).catch(r=>{let n=(0,s.J)(r);throw e.dispatch(a.s.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});let E=(0,c.nF)((e,r)=>{let{src:n,plugin_id:l,widget_id:c}=r;i.Ay.put("/api/plugin_publishers/accept",{plugin_id:l,widget_id:c}).then(({data:r})=>{let i=b(r.meta);i&&e.dispatch(i),(0,p.ye)("plugin_publisher_invite_accepted",{src:n,userId:e.getState().user?.id,pluginId:l??c,isWidget:!!c});let a=(0,m.T)();l?(0,u.s)({initialX:0,initialY:0,initialTab:"figjam"===a?_.p.PLUGINS:void 0,initialFdResourceTab:"figma"===a?g.s.PLUGIN:void 0,scrollDevelopmentSectionIntoView:"figjam"===a,initialFdView:"figma"===a?"development":void 0,source:`extension-publisher-invite-${n}`}):c&&(0,u.s)({initialX:0,initialY:0,initialTab:"figjam"===a?_.p.WIDGETS:void 0,initialFdResourceTab:"figma"===a?g.s.WIDGET:void 0,scrollDevelopmentSectionIntoView:"figjam"===a,initialFdView:"figma"===a?"development":void 0,source:`extension-publisher-invite-${n}`})}).catch(r=>{let n=(0,s.J)(r);throw e.dispatch(a.s.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});(0,c.nF)((e,r)=>{i.Ay.del("/api/community_publishers/remove",r).then(({data:r})=>{let n=b(r.meta);n&&e.dispatch(n)}).catch(r=>{let n=(0,s.J)(r);throw e.dispatch(a.s.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});let y=(0,c.nF)((e,r)=>{i.Ay.del("/api/plugin_publishers/remove",r).then(({data:n})=>{let i=n.meta;if(n.meta.plugin){let{plugin_publishers:e}=n.meta.plugin;n.meta.plugin.plugin_publishers=e??{accepted:[],pending:[]}}else if(n.meta.widget){let{plugin_publishers:e}=n.meta.widget;n.meta.widget.plugin_publishers=e??{accepted:[],pending:[]}}let a=b(i);a&&e.dispatch(a),(0,p.ye)("plugin_publisher_invite_removed",{src:r.src,userId:e.getState().user?.id,pluginId:r.plugin_id||r.widget_id,isWidget:!!r.widget_id})}).catch(r=>{let n=(0,s.J)(r);throw e.dispatch(a.s.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});function b(e){return e.hub_file?(0,l.Sb)({hubFiles:[e.hub_file],src:"removeCommunityPublisher"}):e.plugin?d.Qi({publishedPlugins:[e.plugin],src:"removeCommunityPublisher"}):e.widget?d.Qi({publishedPlugins:[e.widget],src:"removeCommunityPublisher"}):void 0}let v=(0,c.nF)(e=>{h.R.loadPluginsPublishedByUser(e),h.R.loadPluginsAuthoredByCurrentOrg(e)}),T=(0,c.nF)(e=>{h.R.loadPluginsAuthoredByCurrentOrg(e)}),I=(0,c.nF)(async e=>{await h.R.loadWidgetsAuthoredByCurrentOrg(e)})},954677:(e,r,n)=>{n.d(r,{r:()=>b});var i=n(741419),a=n(719398),o=n(697714),s=n(544795),l=n(8374),c=n(142751),d=n(449737),u=n(481540),p=n(694253),m=n(402840),h=n(526830),_=n(821013),g=n(728352),f=n(993797),E=n(800407),y=n(472564);let b=(0,l.nF)(async(e,{localFileId:r,publishedPluginId:n,entryPoint:l,initialTab:b,initialAllowedTabs:v,localSnapshotUrl:T,localSnapshotBlob:I})=>{if(null!=n){let[r,i]=await Promise.all([_.V.getPlugins({id:n}),g.U.getWidgets({id:n})]),a=r.data.meta,o=i.data.meta,s=a.concat(o).find(e=>e.id===n);s&&e.dispatch(c.Qi({publishedPlugins:[s],src:"showPublishPluginModal"}))}let S=e.getState(),{localPlugins:w,publishedPlugins:A,publishedWidgets:C,publishingPlugins:N,currentUserOrgId:L,authedProfilesById:O,user:R}=S,P=n&&A[n]||n&&C[n],D=null!=r&&w[r];if(P&&!(0,h.m3)(P)&&(0,s.Ul)(P)&&D&&D.manifest.permissions?.includes("payments")&&R&&!R.has_passed_visual_compliance){e.dispatch(d.$O({type:y.O.type}));return}if(null==r||N[r]){if(null!=r&&N[r])try{if(T&&N[r].metadata.widgetSnapshotImageSrc!==T){let{metadata:n}=N[r];n.widgetSnapshotImageSrc=T,n.widgetSnapshotImageBlob=I,e.dispatch((0,c.fy)({id:r,metadata:n}))}}catch(r){e.dispatch(o.F.enqueue({message:(0,a.J)(r)||r.message,error:!0}));return}else if(void 0===r&&n&&P)try{let r=(0,m.mI)({...(0,p.getPermissionsState)(S),currentUserOrgId:L,localPlugins:w,publishedPlugins:A,publishedWidgets:C,authedProfilesById:O},void 0,n,T);e.dispatch((0,c.fy)({id:P.id,metadata:r}))}catch(r){e.dispatch(o.F.enqueue({message:(0,a.J)(r)||r.message,error:!0}));return}}else try{let i=(0,m.mI)({...(0,p.getPermissionsState)(S),currentUserOrgId:L,localPlugins:w,publishedPlugins:A,publishedWidgets:C,authedProfilesById:O},r,n,T,I);e.dispatch((0,c.fy)({id:r,metadata:i}))}catch(r){e.dispatch(o.F.enqueue({message:(0,a.J)(r)||r.message,error:!0}));return}i.glU&&i.glU.triggerAction("set-tool-default",null),(0,u.uE)("show_publish_plugin_modal",S,{entryPoint:l,userId:S.user?.id,orgId:S.currentUserOrgId,resourceType:P?P.is_widget?"widget":"plugin":void 0,publishedResourceId:P?P.id:void 0,initialTab:b??E.KM.PUBLISH}),e.dispatch(d.to({type:f.o,data:{localFileId:r,entryPoint:l,initialTab:b,initialAllowedTabs:v??E.x5,publishedPluginId:P?P.id:void 0,existingSecurityFormResponse:null}}))})},85442:(e,r,n)=>{n.d(r,{Pv:()=>_,S:()=>h,TH:()=>p,lW:()=>u,le:()=>m});var i=n(731889),a=n(442313),o=n(697714),s=n(449737),l=n(834111),c=n(268174),d=n(8374);let u=(0,d.nF)((e,r)=>{let n=r.stringToCopy,s={withLineBreaks:!(r.ignoreLineBreaks??!0),successText:r.successText};(0,i.Dk)(n,s).then(()=>{e.dispatch(o.F.enqueue({type:"copied_to_clipboard",message:s.successText??(0,a.t)("fullscreen_actions.copied_to_clipboard")}))})});function p(e){return(0,d.nF)((e,r)=>{let n=r.selector.selectedViewToPath(r.selectedView,r.data);if(!n)return;let i=new URL(n,document.baseURI).href;e.dispatch(h({url:i}))})(e)}(0,d.nF)((e,r)=>{let n=r.emailList,s=n.length,l=n.join("; ");(0,i.Dk)(l).then(()=>{e.dispatch(o.F.enqueue({message:(0,a.t)("copy_to_clipboard.emails_copied_to_clipboard",{numEmails:s,emailText:l}),type:"emails-copied"}))})});let m=(0,d.nF)((e,r)=>{let n=new URL((0,l.Np)(e.getState(),r),document.baseURI).href;e.dispatch(h({url:n}))}),h=(0,d.nF)(async(e,r)=>{let n=r.url;try{await (0,i.Dk)(n),e.dispatch(o.F.enqueue({type:"link_copied_to_clipboard",message:(0,a.t)("copy_to_clipboard.link_to_selection_copied_to_clipboard")}))}catch{e.dispatch(s.to({type:c.o,data:{link:n}}))}}),_=(0,d.nF)((e,r)=>{let n=r.url,l="plugin"===r.extensionType?(0,a.t)("copy_to_clipboard.link_to_plugin_copied_to_clipboard"):(0,a.t)("copy_to_clipboard.link_to_widget_copied_to_clipboard");(0,i.Dk)(n).then(()=>{e.dispatch(o.F.enqueue({type:"link_copied_to_clipboard",message:l}))}).catch(()=>{e.dispatch(s.to({type:c.o,data:{link:n}}))})})},698973:(e,r,n)=>{n.d(r,{Ri:()=>O,c3:()=>P,j3:()=>L,mg:()=>N,on:()=>R});var i=n(551316),a=n(611504),o=n(579020),s=n(35030),l=n(141039),c=n(44509),d=n(381862),u=n(790355),p=n(173970),m=n(323075),h=n(96321),_=n(376780),g=n(746948),f=n(694253),E=n(834111),y=n(887057),b=n(241917),v=n(766878),T=n(783235),I=n(630479),S=n(217084),w=n(8374),A=n(354054);let C=(0,w.nF)((e,{viewport:r})=>{let{selectedView:n}=e.getState();if("fullscreen"===n.view){e.dispatch(u.$T({...n,viewport:r}));let i=h.ZG()?.fileKey||n.fileKey;i&&l.eD?.updateViewport(i,r)}});(0,w.nF)(e=>{let r=e.getState(),n=function(e){let r=(0,f.getPermissionsStateMemoized)(e);return r.currentUserOrgId?(0,f.canMemberOrg)(r.currentUserOrgId,r)?T.Rx.ORG:T.Rx.ORG_GUEST:T.Rx.PERSONAL}(r);e.dispatch(A.Rz({query:r.desktopNewTab.searchQuery,searchScope:n,searchModelType:T.uH.FILES})),e.dispatch(A.r0({entryPoint:"desktop_new_tab"})),r=e.getState();let i=(0,E.xS)(r,{view:"search",entryPoint:"desktop_new_tab",previousView:r.selectedView&&((0,S.QB)(r.selectedView)||(0,S.bN)(r.selectedView))?r.selectedView:void 0});c.Ay.redirect(i)});let N=(0,a.NC)("DESKTOP_NEW_TAB_SET_LOADING_BACKGROUND_COLOR"),L=(0,a.NC)("DESKTOP_NEW_TAB_SET_IS_SEARCH_BAR_FOCUSED"),O=(0,a.NC)("DESKTOP_NEW_TAB_SET_SEARCH_QUERY");function R(e,r){return null==r?"#00000000":"whiteboard"===r?"#ffffff":`#${(0,y.w2)(e)}`}(0,w.nF)((e,r)=>{let n=e.getState(),i=r.result,a=i.model,o={position:r.index,resource_id:a.key,resource_type:i.search_model_type.toString(),matched_queries:i.matched_queries,result:i},s={plan:(0,d.S)(n)};new I.vj.Analytics(n.search,o,s).click(i.search_model_type,n.selectedView,{action:r.clickAction}),e.dispatch(A.ky()),e.dispatch(u.$T({view:"fullscreen",fileKey:a.key,editorType:(0,b.wN)(a.editor_type??_._Y.DESIGN)}))}),(0,w.nF)(async(e,r,{liveStore:n})=>{let i=await n.fetchFile(r.fileKey);(0,o.sx)("Desktop New Tab Open Recent",{itemType:"prototype",fileKey:i.key}),e.dispatch(u.$T({view:"prototype",file:(0,g.ge)(i),nodeId:r.pageId,pageId:r.pageId}))}),(0,w.nF)(async(e,r,{liveStore:n})=>{let i=await n.fetchFile(r.fileKey);(0,o.sx)("Desktop New Tab Open Recent",{itemType:"file",fileKey:i.key}),e.dispatch(u.$T({view:"fullscreen",fileKey:i.key,editorType:(0,b.wN)(i.editor_type??_._Y.DESIGN)}))}),(0,w.nF)((e,r)=>{let n=e.getState();if(!n.desktopNewTab.isCreatingFile){let i=(0,s.ce)()?v.ai.SAME_TAB:v.ai.NEW_TAB,a=(0,m.xA)({state:e.getState(),openNewFileIn:i,folderOverride:r.projectId?{folderId:r.projectId}:"drafts",trackingInfo:{from:v.f6.DESKTOP_NEW_TAB_BUTTON,selectedView:n.selectedView},editorType:r.editorType});e.dispatch(p.uM(a))}});let P=(0,i.s)((e,r)=>{e.dispatch(C({viewport:r}))},1e3)},195567:(e,r,n)=>{n.d(r,{A3:()=>W,CE:()=>V,Cs:()=>Y,HS:()=>R,I4:()=>em,Ir:()=>P,N9:()=>Z,NL:()=>z,OC:()=>er,OJ:()=>O,Ox:()=>U,Pg:()=>et,Qv:()=>ec,UX:()=>q,V9:()=>F,VV:()=>ed,Vk:()=>ep,WA:()=>L,_1:()=>eu,bA:()=>el,e9:()=>eo,g6:()=>N,h8:()=>ei,he:()=>M,iy:()=>G,k1:()=>Q,ks:()=>H,lV:()=>ee,lu:()=>en,mI:()=>es,n0:()=>J,ne:()=>eh,oI:()=>C,ot:()=>B,wk:()=>K});var i=n(551316),a=n(741419),o=n(611504),s=n(210709),l=n(379338),c=n(442313),d=n(697714),u=n(481540),p=n(323075),m=n(486934),h=n(526999),_=n(950774),g=n(241917),f=n(368611),E=n(495574),y=n(917109),b=n(783575),v=n(893028),T=n(805708),I=n(8374);function S(e){return e.multiplayer.allUsers.length}function w(e){return e?e.isPaused?e.lastReceivedSongTimestampMs:e.lastReceivedSongTimestampMs+(performance.now()-e.timeOrigin):0}async function A(e,r){let n=e;return await (0,b._s)({songID:e,onSuccess:()=>{},onNotFound:()=>{r.dispatch(j({selectedSongID:"",musicStartTimeMs:0})),n="",r.dispatch(X()),r.dispatch(d.F.enqueue({message:(0,c.t)("whiteboard.timer.song_not_available_error"),error:!0,type:"active-song-not-found"}))}}),n}let C=(0,o.NC)("SET_SELECTED_SONG_ID_MUSIC");(0,I.nF)((e,r)=>{let{music:n}=e.getState().music,i=!r.dontTransmitWhenPaused;if(n&&!n.isStopped&&(!n.isPaused||i)){let i=e.getState().music.activeSongs.find(e=>e.song_id===r.selectedSongID);e.dispatch(x({eventName:"update-music-song-id",isPaused:!n||n.isPaused,selectedSongID:r.selectedSongID,lastReceivedSongTimestampMs:i?.start_at_ms||0,isStopped:!n||n.isStopped}))}e.dispatch(C(r))});let N=(0,I.nF)(e=>{e.dispatch(L()),(0,b.I8)(),(0,b.om)()}),L=(0,o.NC)("RESET_LOCAL_MUSIC"),O=(0,I.nF)((e,r)=>{if(e.dispatch(R(r)),r.isPaused||r.isStopped||!r.selectedSongID)(r.isPaused||r.isStopped)&&(0,b.c4)()&&(0,b.I8)();else{let n=k(r.selectedSongID,e.getState().music.activeSongs);(0,b.$_)(n,()=>{e.dispatch(D())})}}),R=(0,o.NC)("SET_MUSIC_STATE"),P=(0,o.NC)("RESUME_MUSIC");(0,I.nF)(async(e,r)=>{let n=w(r),i=e.getState(),a=i.music.music?.selectedSongID;a&&(a=await A(a,e)),e.dispatch(x({eventName:"resume-music",isPaused:!1,selectedSongID:a||"",lastReceivedSongTimestampMs:n,isStopped:!1})),e.dispatch(P(r))}),(0,I.nF)((e,r)=>{let n=w(r),i=e.getState(),a=i.music.music?.selectedSongID;e.dispatch(x({eventName:"pause-music",isPaused:!0,selectedSongID:a||"",lastReceivedSongTimestampMs:n,isStopped:!1}))});let D=(0,I.nF)(e=>{let r=e.getState(),n=r.music.music?.selectedSongID;e.dispatch(x({eventName:"stop-music",isPaused:!0,selectedSongID:n||"",lastReceivedSongTimestampMs:0,isStopped:!0}))}),M=(0,o.NC)("START_MUSIC");(0,I.nF)(async(e,{musicStartTimeMs:r=0})=>{let{music:n}=e.getState().music,i="";n&&(i=n.selectedSongID),i&&(i=await A(i,e)),e.dispatch(x({eventName:"start-music",isPaused:!1,selectedSongID:i,lastReceivedSongTimestampMs:r,isStopped:!1})),e.dispatch(M({musicStartTimeMs:r}))});let k=(e,r)=>r.find(r=>r.song_id===e),F=(0,o.NC)("SEND_MUSIC_MESSAGE"),x=(0,I.nF)((e,r)=>{let n=e.getState().music;a.h3O.sendMusic(r.isPaused,(n?.music?.musicMessageID||0)+1,r.selectedSongID||"",r.lastReceivedSongTimestampMs||0,r.isStopped),e.dispatch(F(r))});(0,I.nF)((e,r)=>{"open"===r.state&&(0,T.D)(()=>{e.getState().music?.modalState==="open"&&e.dispatch(U({state:"closed",userInitiated:!1}))}),e.dispatch(U(r))});let U=(0,o.NC)("SET_MUSIC_MODAL"),B=(0,o.NC)("RESET_LOCAL_TIMER"),V=(0,o.NC)("SET_MUSIC_STANDALONE_VOLUME");(0,I.nF)((e,r)=>{$(e.getState(),r),e.dispatch(V(r))});let G=(0,o.NC)("SET_MUSIC_IS_MUTED");(0,I.nF)((e,{isMuted:r,userInitiated:n})=>{n&&(0,y.ym)(e.getState(),r),e.dispatch(G({isMuted:r,userInitiated:n}))});let H=(0,o.NC)("SET_TIMER_AND_MUSIC_ARE_MUTED");(0,I.nF)((e,{isMuted:r,userInitiated:n})=>{n&&(0,y.ym)(e.getState(),r),e.dispatch(H({isMuted:r,userInitiated:n}))});let K=(0,o.NC)("SET_STANDALONE_MUSIC_PLAYER"),W=(0,o.NC)("SET_MAIN_MUSIC_PLAYER"),z=(0,o.NC)("SET_MUSIC_VOLUME");(0,I.nF)((e,r)=>{$(e.getState(),r),e.dispatch(z(r))});let $=(0,i.s)((e,r)=>(0,y.qV)(e,r),1e3,!1),Y=(0,o.NC)("SET_SELECTED_SONG_ID"),j=(0,I.nF)((e,r)=>{let{time:n}=e.getState().timer;if(n&&n.totalTimeMs>0){let i=(0,v.P$)(n);e.dispatch(ea({eventName:"update-timer-song-id",totalTimeMs:n.totalTimeMs,timeRemainingMs:i,isPaused:n.isPaused,songID:r.selectedSongID,lastReceivedSongTimestampMs:r.musicStartTimeMs})),_.d1.timerChange("timerupdatesongid")}e.dispatch(Y(r))}),q=(0,o.NC)("GET_ACTIVE_SONGS_SUCCESS"),X=(0,I.nF)(async e=>{try{let r=await f.N.getSongs();if(!r||200!==r.status||!r.data||!r.data.meta)throw s.k.warn("Failed to fetch active songs"),Error("Api error while fetching active songs");e.dispatch(q(r.data.meta))}catch(e){throw s.k.warn("Failed to fetch active songs"),e}}),Z=(0,o.NC)("SET_SHOWING_FILE_FOOTER"),J=(0,o.NC)("SET_SELECTED_TYPED_PROP_DEF_ID"),Q=(0,o.NC)("SET_START_CHIME_PLAYED"),ee=(0,o.NC)("SET_TIMER_NOTIFICATION"),et=(0,o.NC)("SET_TIMER_AUDIO_ENABLED"),er=(0,o.NC)("SET_TIMER_MODAL"),en=(0,I.nF)((e,r)=>{if("open"===r.state&&(0,v.FR)()&&(0,T.D)(()=>{let r=(0,v.FR)();e.getState().timer?.modalState==="open"&&r&&e.dispatch(en({state:"closed",userInitiated:!1}))}),r.userInitiated){let n=e.getState(),i=n.timer.time?.timeRemainingMs>0;(0,u.ds)(`timer-modal-${r.state}`,n.openFile?.key,n,{"multiplayer-users":S(n),"timer-active":i,source:r.source})}e.dispatch(er(r))}),ei=(0,o.NC)("SEND_TIMER"),ea=(0,I.nF)((e,r)=>{let n=e.getState(),i=n.timer,o=i.setBy;if("start-timer"===r.eventName){let e=n.multiplayer.allUsers.find(e=>e.sessionID===n.multiplayer.sessionID);o=e?e.name:l.Ay().user_data?.handle||"anonymous user"}if(a.h3O.sendTimer(r.totalTimeMs||0,r.timeRemainingMs||0,!!r.isPaused,(i?.time?.timerID||0)+1,o,r.songID||"",r.lastReceivedSongTimestampMs||0),r.eventName){let e={"multiplayer-users":S(n)};if("adjust-timer"===r.eventName){let i=Math.round((r.totalTimeMs-n.timer.time.totalTimeMs)/1e3);e["time-added-s"]=i}else"start-timer"===r.eventName&&(e["duration-s"]=Math.round(r.totalTimeMs/1e3));(0,u.ds)(r.eventName,n.openFile?.key,n,e,{forwardToDatadog:!0})}e.dispatch(ei(r))}),eo=(0,o.NC)("SET_TIMER"),es=(0,I.nF)((e,r)=>{if(0===r.totalTimeMs){let r=e.getState(),n=(0,p.d1)(r);if(n){let e=(0,m.L8)(n,r.repos);!function(e,r,n){if(!e)return;let i=new E.a().selectedViewNameHelper(e,r);(0,h.hL)(i,(0,g.wN)(e.editor_type),"")}(n,e)}}e.dispatch(eo(r))}),el=(0,o.NC)("START_TIMER"),ec=(0,I.nF)(async(e,{totalTimeMs:r,musicStartTimeMs:n=0})=>{let i=e.getState().timer.selectedSongID;i&&(i=await A(i,e)),e.dispatch(ea({eventName:"start-timer",totalTimeMs:r,timeRemainingMs:r,isPaused:!1,songID:i,lastReceivedSongTimestampMs:n})),_.d1.timerChange("timerstart"),e.dispatch(el({totalTimeMs:r,musicStartTimeMs:n}))}),ed=(0,I.nF)((e,r)=>{let n=e.getState().timer.selectedSongID;e.dispatch(ea({eventName:"adjust-timer",totalTimeMs:r.timer.totalTimeMs+r.deltaMs,timeRemainingMs:(0,v.P$)(r.timer)+r.deltaMs,isPaused:r.timer.isPaused,songID:n,lastReceivedSongTimestampMs:r.timer.lastReceivedSongTimestampMs})),_.d1.timerChange("timeradjust")}),eu=(0,I.nF)((e,r)=>{let n=(0,v.P$)(r),i=w(r),a=e.getState().timer.selectedSongID;e.dispatch(ea({eventName:"pause-timer",totalTimeMs:r.totalTimeMs,timeRemainingMs:n,isPaused:!0,songID:a,lastReceivedSongTimestampMs:i})),_.d1.timerChange("timerpause")}),ep=(0,I.nF)(e=>{let r=e.getState().timer.selectedSongID;e.dispatch(ea({eventName:"stop-timer",totalTimeMs:0,timeRemainingMs:0,isPaused:!0,songID:r,lastReceivedSongTimestampMs:0})),_.d1.timerChange("timerstop")}),em=(0,o.NC)("RESUME_TIMER"),eh=(0,I.nF)(async(e,r)=>{let n=e.getState().timer.selectedSongID;n&&(n=await A(n,e)),e.dispatch(ea({eventName:"resume-timer",totalTimeMs:r.totalTimeMs,timeRemainingMs:r.timeRemainingMs,isPaused:!1,songID:n,lastReceivedSongTimestampMs:r.lastReceivedSongTimestampMs})),_.d1.timerChange("timerresume"),e.dispatch(em(r))})},687174:(e,r,n)=>{n.d(r,{DN:()=>D,EX:()=>O,Fb:()=>U,Mv:()=>R,N9:()=>C,U6:()=>S,X7:()=>M,dy:()=>N,gG:()=>x,iN:()=>k,jv:()=>L,lF:()=>I,ox:()=>P,pS:()=>A,qP:()=>F,to:()=>w});var i=n(445777),a=n(611504),o=n(293964),s=n(858423),l=n(163620),c=n(972813),d=n(757033),u=n(280198),p=n(442313),m=n(719398),h=n(697714),_=n(8374),g=n(486934),f=n(409851),E=n(717752),y=n(918105),b=n(376780),v=n(935454),T=n(114735);let I=(0,a.NC)("SET_FAVORITES_COUNT"),S=(0,a.NC)("UPDATE_EXPANDED_CUSTOM_SECTIONS"),w=(0,a.NC)("SET_MOVING_RESOURCE"),A=(0,a.NC)("SET_NEW_SECTION_INDEX");(0,_.nF)((e,r)=>{let{name:n,orderedFavoriteIds:i}=r,a=d.Ay.put(`/api/user_sidebar_sections/${r.sectionId}`,{ordered_favorited_resource_ids:i,name:n}).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.data.message}`}))});(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{...n?{name:n}:{},...i?{orderedFavoritedResourceIds:i}:{}}}},a),r.name&&(0,o.K2)(r.sectionId,r.name)}),(0,_.nF)((e,r)=>{let n=d.Ay.del(`/api/user_sidebar_sections/${r.sidebarSectionId}`).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.msg}`}))});(0,o.Pe)(r.sidebarSectionId),(0,s.WB)().optimisticallyDelete({UserSidebarSection:{[r.sidebarSectionId]:null}},n)}),(0,_.nF)((e,r)=>{let n={favorited_resource_ids:r.favoriteIds,team_id:r.teamId};(0,o.Dr)(r.favoriteIds,r.teamId),d.Ay.put("/api/planless_favorited_resource_plan_id",n).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.data.message}`}))})}),(0,_.nF)((e,r)=>{let n={section_id:r.sectionId,ordered_favorite_ids:r.orderedFavoriteIds},i=d.Ay.put(`/api/favorited_resources/${r.favoriteId}`,n).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.data.message}`}))});r.sectionId&&(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{orderedFavoritedResourceIds:r.orderedFavoriteIds}}},i);let a={[r.favoriteId]:{sidebarSectionId:r.sectionId}};switch(r.resourceType){case b.bk.TEAM:(0,s.WB)().optimisticallyUpdate({FavoritedTeam:a},i);break;case b.bk.FOLDER:(0,s.WB)().optimisticallyUpdate({FavoritedProject:a},i);break;case b.bk.FILE:(0,s.WB)().optimisticallyUpdate({FavoritedFile:a},i);break;case b.bk.PROTOTYPE:(0,s.WB)().optimisticallyUpdate({FavoritedPrototype:a},i);break;case b.bk.WORKSPACE:(0,s.WB)().optimisticallyUpdate({FavoritedWorkspace:a},i)}}),(0,_.nF)((e,r)=>{let n=e.getState().currentUserOrgId??null,i={name:r.name,org_id:n,insert_at_index:r.insertAtIndex,ordered_sections:r.currentOrderedSections},a=d.Ay.post("/api/user_sidebar_sections",i).then(n=>{if(!n?.data.meta){e.dispatch(w({movingResource:void 0}));return}V(e.dispatch,r.newResourceForSection.resourceType,r.newResourceForSection.isFavorited,r.newResourceForSection.resourceId,void 0,n.data.meta),e.dispatch(w({movingResource:void 0}))}).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.msg}`}))});if((0,s.WB)().optimisticallyCreate({UserSidebarSection:{[H]:{userId:e.getState().user?.id??"",orgId:n,teamId:null,name:r.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},a),r.prefs&&r.currentOrderedSections){let i=r.currentOrderedSections.length,o=[...r.currentOrderedSections?.slice(0,r.insertAtIndex),H,...r.currentOrderedSections.slice(r.insertAtIndex,i)],s={id:r.prefs?.id,orderedFavoritedResourceIds:r.prefs?.orderedFavoritedResourceIds,orderedTeamIds:r.prefs?.orderedTeamIds,orderedLicenseGroupIds:r.prefs?.orderedLicenseGroupIds,orderedSidebarSections:o};(0,v.ah)(s,e.getState().user?.id,n,null,a)}}),(0,_.nF)((e,r)=>{let n=e.getState().currentUserOrgId??null,i={name:r.name,org_id:n,insert_at_index:r.insertAtIndex,ordered_sections:r.currentOrderedSections},a=d.Ay.post("/api/user_sidebar_sections",i).then(e=>{(0,o.SX)(e?.data.meta,r.name)}).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.msg}`}))}),l="optimistic-id-custom-section-id";if((0,s.WB)().optimisticallyCreate({UserSidebarSection:{[l]:{userId:e.getState().user?.id??"",orgId:n,teamId:null,name:r.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},a),r.prefs&&r.currentOrderedSections){let i=r.currentOrderedSections.length,o=[...r.currentOrderedSections?.slice(0,r.insertAtIndex),l,...r.currentOrderedSections.slice(r.insertAtIndex,i)],s={id:r.prefs?.id,orderedFavoritedResourceIds:r.prefs?.orderedFavoritedResourceIds,orderedTeamIds:r.prefs?.orderedTeamIds,orderedLicenseGroupIds:r.prefs?.orderedLicenseGroupIds,orderedSidebarSections:o};(0,v.ah)(s,e.getState().user?.id,n,null,a)}});let C=(0,_.MM)("BULK_RESOURCE_SET_FAVORITE",(e,r,{optimistId:n,liveStore:i})=>{let{files:a,repos:c,prototypes:p,orgId:m,teamId:_,selectedView:g,entrypoint:f}=r,E=e.getState().currentTeamId,y=e.getState().currentUserOrgId,I=E??y,S=a.filter(e=>!e.is_favorited&&(e.team_id===I||e.parent_org_id===I)),w=S.map(e=>e.key),A=c.filter(e=>!e.is_favorited&&(e.team_id===I||e.parent_org_id===I)).filter(Boolean),C=A.map(e=>e.default_file_key),N=p.filter(e=>!e.is_favorited&&(e.parent_team?.id===I||e.parent_org?.id===I)),L=N.map(e=>e.file_key+","+e.page_id),O={files:C.concat(w),org_id:m,team_id:_,prototypes:L,insert_at_index:r.insertAtIndex,ordered_favorites:r.orderedFavorites,section_id:r.sectionId};a.forEach(e=>{(0,o.gB)(e.key,g,f,b.bk.FILE,e.editor_type,!0)}),c.forEach(e=>{(0,o.gB)(e.default_file_key??void 0,g,f,b.bk.FILE,"design",!0)}),p.forEach(e=>{(0,o.gB)(e.file_key,g,f,b.bk.PROTOTYPE,"design",!0)});let R=d.Ay.put("/api/bulk_favorite_resources",O).then(()=>{e.dispatch(T.c(n))}).catch(r=>{e.dispatch(T.r(n));try{e.dispatch(h.F.enqueue({message:r.message}))}catch(r){e.dispatch(u.s.error("An error occurred while favoriting these items"))}}),P=e.getState().user?.id;if(!P)return;let D={},M={},k=[];if(N.forEach(e=>{k.push(`optimistic-id-${e.fig_file.key}`),M[`optimistic-id-${e.fig_file.key}`]=(0,l.XJ)(e,P,m,r.sectionId)}),A.forEach(e=>{let n=e.default_file_key;if(n){let e=i.readCachedFile(n);e&&(k.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,l.f2)(e,P,m,r.sectionId))}}),S.forEach(e=>{k.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,l.f2)(e,P,m,r.sectionId)}),(0,s.WB)().optimisticallyCreate({FavoritedFile:D,FavoritedPrototype:M},R),null===r.insertAtIndex)return;let F=[...r.orderedFavorites.slice(0,r.insertAtIndex),...k,...r.orderedFavorites.slice(r.insertAtIndex)];if(r.sectionId)(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{orderedFavoritedResourceIds:F}}},R);else{let e={id:r.fileBrowserPrefs?.id||"optimistic-id",orderedFavoritedResourceIds:F,orderedTeamIds:r.fileBrowserPrefs?.orderedTeamIds,orderedLicenseGroupIds:r.fileBrowserPrefs?.orderedLicenseGroupIds};(0,v.ah)(e,P,m,null,R)}}),N=(0,_.nF)((e,r)=>{let{tile:n,entrypoint:a,favoriteId:o,fileBrowserEntryPoint:s}=r;switch(n.type){case E.nb.FILE:case E.nb.PINNED_FILE:e.dispatch(F({entrypoint:a,favoriteId:o,file:n.file,fileBrowserEntryPoint:s}));return;case E.nb.PROTOTYPE:e.dispatch(M({entrypoint:a,favoriteId:o,prototype:n.prototype,fileBrowserEntryPoint:s}));return;case E.nb.REPO:e.dispatch(F({entrypoint:a,favoriteId:o,file:y.F.toLiveGraph((0,g.mr)(n.repo,n.branches,{})),repoId:n.repo.id,fileBrowserEntryPoint:s}));return;case E.nb.OFFLINE_FILE:return;default:(0,i.xb)(n)}}),L=(0,_.MM)("REMOVE_FOLDER_FAVORITE",(e,r,{optimistId:n})=>{let{folder:i,sectionId:a}=r;(0,o.to)(i.id,e.getState().selectedView.view,r.entrypoint,b.bk.FOLDER);let l=V(e.dispatch,b.bk.FOLDER,!1,i.id,n,a);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedProject:{[r.favoriteId]:null}},l)}),O=(0,_.nF)(async(e,r,{liveStore:n})=>{let{tile:a,entrypoint:o,favoriteId:s,sectionId:l,fileBrowserEntryPoint:c}=r;switch(a.type){case E.nb.FILE:e.dispatch(U({entrypoint:o,favoriteId:s,sectionId:l,file:a.file,fileBrowserEntryPoint:c}));return;case E.nb.PINNED_FILE:let d=await n.fetchFile(a.file.key);e.dispatch(U({entrypoint:o,favoriteId:s,sectionId:l,file:y.F.toLiveGraph(d),fileBrowserEntryPoint:c}));return;case E.nb.PROTOTYPE:e.dispatch(k({entrypoint:o,favoriteId:s,sectionId:l,prototype:a.prototype,fileBrowserEntryPoint:c}));return;case E.nb.REPO:e.dispatch(U({entrypoint:o,favoriteId:s,sectionId:l,file:y.F.toLiveGraph((0,g.mr)(a.repo,a.branches,e.getState().selectedBranchKeyByRepoId)),repoId:a.repo.id,fileBrowserEntryPoint:c}));return;case E.nb.OFFLINE_FILE:return;default:(0,i.xb)(a)}}),R=(0,_.MM)("ADD_FOLDER_FAVORITE",(e,r,{optimistId:n})=>{let{folder:i,sectionId:a}=r;(0,o.gB)(i.id,e.getState().selectedView.view,r.entrypoint,b.bk.FOLDER);let c=V(e.dispatch,b.bk.FOLDER,!0,i.id,n,a),d=e.getState().user?.id,u=e.getState().currentUserOrgId;d&&(r.favoriteId&&r.sectionId&&(0,s.WB)().optimisticallyUpdate({FavoritedProject:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c),"is_favorited"in i&&(r.favoriteId||(0,s.WB)().optimisticallyCreate({FavoritedProject:{[`optimistic-id-${i.id}`]:(0,l.ad)(i,d,u,a)}},c)))});(0,_.nF)((e,r)=>{let{workspace:n}=r;(0,o.to)(n.id,e.getState().selectedView.view,r.entrypoint,b.bk.WORKSPACE);let i=V(e.dispatch,b.bk.WORKSPACE,!1,n.id,void 0);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedWorkspace:{[r.favoriteId]:null}},i)}),(0,_.nF)((e,r)=>{let{workspace:n,sectionId:i}=r,a=e.getState().currentUserOrgId;(0,o.gB)(n.id,e.getState().selectedView.view,r.entrypoint,b.bk.WORKSPACE);let c=V(e.dispatch,b.bk.WORKSPACE,!0,n.id,void 0,i),d=e.getState().user?.id;d&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedWorkspace:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c):(0,s.WB)().optimisticallyCreate({FavoritedWorkspace:{[`optimistic-id-${n.id}`]:(0,l.Nc)(n,d,a,i)}},c))});let P=(0,_.nF)((e,r)=>{let{team:n}=r;(0,o.to)(n.id,e.getState().selectedView.view,r.entrypoint,b.bk.TEAM);let i=V(e.dispatch,b.bk.TEAM,!1,n.id,void 0);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedTeam:{[r.favoriteId]:null}},i)}),D=(0,_.nF)((e,r)=>{let{team:n,sectionId:i}=r,a=e.getState().currentUserOrgId;(0,o.gB)(n.id,e.getState().selectedView.view,r.entrypoint,b.bk.TEAM);let c=V(e.dispatch,b.bk.TEAM,!0,n.id,void 0,i),d=e.getState().user?.id;d&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedTeam:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c):(0,s.WB)().optimisticallyCreate({FavoritedTeam:{[`optimistic-id-${n.id}`]:(0,l.zb)(n,d,a,i)}},c))}),M=(0,_.MM)("REMOVE_PROTOTYPE_FAVORITE",(e,r,{optimistId:n})=>{let{prototype:i,entrypoint:a,fileBrowserEntryPoint:l}=r;(0,o.to)(i.file_key,e.getState().selectedView.view,a,b.bk.PROTOTYPE,void 0,l);let c=V(e.dispatch,b.bk.PROTOTYPE,!1,i.file_key,n,void 0,i.page_id);e.getState().user?.id&&r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedPrototype:{[r.favoriteId]:null}},c)}),k=(0,_.MM)("ADD_PROTOTYPE_FAVORITE",(e,r,{optimistId:n})=>{let{prototype:i,entrypoint:a,sectionId:c,fileBrowserEntryPoint:d}=r,u=e.getState().currentUserOrgId;(0,o.gB)(i.file_key,e.getState().selectedView.view,a,b.bk.PROTOTYPE,"prototype",d);let p=V(e.dispatch,b.bk.PROTOTYPE,!0,i.fig_file.key,n,c,i.page_id),m=e.getState().user?.id;m&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedPrototype:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},p):(0,s.WB)().optimisticallyCreate({FavoritedPrototype:{[`optimistic-id-${i.fig_file.key}`]:(0,l.XJ)(i,m,u,c)}},p))}),F=(0,_.MM)("REMOVE_FILE_FAVORITE",(e,r,{optimistId:n})=>{let i=e.getState().selectedView.view,{file:a,entrypoint:l,fileBrowserEntryPoint:c}=r;(0,o.to)(a.key,i,l,b.bk.FILE,a.editorType??"design",c);let d="fullscreen"===i?B(e.dispatch,b.bk.FILE,!1,a.key,(0,f.D6)(e.getState().currentUserOrgId)):V(e.dispatch,b.bk.FILE,!1,a.key,n);e.getState().user?.id&&r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedFile:{[r.favoriteId]:null}},d)}),x=(0,a.NC)("ADD_FILE_FAVORITE"),U=(0,_.nF)((e,r)=>{let{optimistId:n}=e.optimisticDispatch(x(r)),{file:i,entrypoint:a,sectionId:c,fileBrowserEntryPoint:d}=r;(0,o.gB)(i.key,e.getState().selectedView.view,a,b.bk.FILE,i.editorType??"design",d);let u=V(e.dispatch,b.bk.FILE,!0,i.key,n,c,void 0,(0,f.D6)(e.getState().currentUserOrgId)),p=e.getState().user?.id;if(p){if(r.favoriteId&&r.sectionId)(0,s.WB)().optimisticallyUpdate({FavoritedFile:{[r.favoriteId]:{sidebarSectionId:r.sectionId,orgId:e.getState().currentUserOrgId??null,resourceType:b.bk.FILE,userId:p}}},u);else if(e.getState().currentTeamId&&e.getState().currentTeamId===r.file.teamId||e.getState().currentUserOrgId&&r.file.parentOrgId){let n=(0,l.h7)(y.F.toSinatra(i));(0,s.WB)().optimisticallyCreate({FavoritedFile:{[`optimistic-id-${i.key}`]:{userId:p,orgId:e.getState().currentUserOrgId??null,teamId:e.getState().currentTeamId??null,sidebarSectionId:r.sectionId??null,createdAt:new Date,updatedAt:new Date,resourceId:i.key,resourceType:b.bk.FILE,readableFile:n}}},u)}}}),B=(e,r,n,i,a)=>d.Ay.put("/api/favorited_resources",{resource_type:r,is_favorited:n,file_key:i}).then(()=>{let r=a?(0,p.t)("tile.favoriting.file_removed_from_sidebar"):(0,p.t)("tile.favoriting.file_removed_from_favorites"),i=a?(0,p.t)("tile.favoriting.file_added_to_sidebar"):(0,p.t)("tile.favoriting.file_added_to_favorites");e(h.F.enqueue({message:n?i:r}))}).catch(r=>{let n=(0,m.J)(r);if(n)try{e(h.F.enqueue({message:n}))}catch(r){e(u.s.error("An error occurred while favoriting this item"))}}),V=(e,r,n,i,a,o,s,l)=>d.Ay.put("/api/favorited_resources",{resource_type:r,is_favorited:n,resource_id_or_key:i,page_id:s,section_id:o}).then(()=>{if(a&&e(T.c(a)),l||r!==b.bk.FILE){let r=n?(0,p.t)("sidebar.item_added_bell_message"):(0,p.t)("sidebar.item_removed_bell_message");e(h.F.enqueue({message:r}))}}).catch(r=>{let i=(0,m.J)(r);if(i){a&&e(T.r(a));try{e(h.F.enqueue({message:i}))}catch(i){let r=n?"favoriting this item":"removing this favorite";e(u.s.error(`An error occurred while ${r}`))}}}),G=e=>((0,o.j4)(e.favorited_resource_ids),d.Ay.del("/api/favorited_resources",c.td.toAPIParameters(e)));(0,_.nF)((e,r)=>{G({favorited_resource_ids:r.favoriteIds}).catch(r=>{e.dispatch(h.F.enqueue({message:`${r.data.message}`}))})});let H="optimistic-id-custom-section-id"},32772:(e,r,n)=>{n.d(r,{EG:()=>l,Ji:()=>a,lr:()=>o,qC:()=>s});var i=n(611504);let a=(0,i.NC)("FIGJAM_SET_IS_MAKE_SOMETHING_V2_ACTIVE"),o=(0,i.NC)("FIGJAM_SET_DELIGHTFUL_TOOLBAR_OVERFLOW_MENU"),s=(0,i.NC)("FIGJAM_SET_IMAGE_DIALOG"),l=(0,i.NC)("FIGJAM_SET_QUICK_ACCESS_TOOL")},700777:(e,r,n)=>{n.d(r,{fC:()=>m,o2:()=>u,s7:()=>p});var i=n(611504),a=n(8374),o=n(948442),s=n(142751),l=n(341550),c=n(928001),d=n(226543);let u=(0,i.NC)("UPDATE_FACE_STAMPS"),p=(0,i.NC)("PUT_DEFAULT_FIGJAM_INSERT_ITEMS");(0,a.nF)(e=>{let r=e.getState().selectedView;r&&"fullscreen"===r.view&&h(e)});let m="FETCH_FIGJAM_DEFAULT_INSERTS";async function h(e){let r=e.getState();if((0,c.Sc)(r.loadingState,m)){e.dispatch(l.Cx({key:m}));try{let n=await d.d.getDefaultInserts({orgId:r.currentUserOrgId||void 0}),i=[...n.data.meta.plugins,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"is_widget"in e&&!e.is_widget&&r.push(e);return r}(n.data.meta.use_cases)],a=[...n.data.meta.widgets,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"is_widget"in e&&e.is_widget&&r.push(e);return r}(n.data.meta.use_cases)],c=[...n.data.meta.templates,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"viewer_mode"in e&&e.viewer_mode&&r.push(e);return r}(n.data.meta.use_cases)];e.dispatch((0,o.Sb)({hubFiles:c,src:"figjam-inserts"})),e.dispatch(p(n.data.meta)),e.dispatch(s.Vx(i)),e.dispatch(s.uV(a));let u={},h={};a.forEach(e=>{let n=e.current_plugin_version_id;!(n&&r.publishedCanvasWidgetVersions[e.id]?.[n])&&(u[e.id]=Object.keys(e.versions),e.current_plugin_version_id&&(h[e.id]={[e.current_plugin_version_id]:e.versions[e.current_plugin_version_id]}))}),e.dispatch((0,s.fs)(h)),e.dispatch((0,s.b6)({widgetIDToVersions:u})),e.dispatch(l.x2({key:m}))}catch(r){e.dispatch(l.of({key:m}))}}}},884060:(e,r,n)=>{n.d(r,{$m:()=>q,FE:()=>G,GZ:()=>j,Ip:()=>X,Lk:()=>eh,Nw:()=>ea,P6:()=>Q,PB:()=>ec,PF:()=>et,Rh:()=>Y,S:()=>ei,SQ:()=>er,U2:()=>es,VK:()=>ee,YF:()=>Z,YK:()=>J,YW:()=>W,Yn:()=>en,Yp:()=>eo,ZN:()=>z,bE:()=>el,c3:()=>em,jO:()=>V,og:()=>H,rA:()=>$,sF:()=>K,uo:()=>ed,yJ:()=>eu});var i=n(960805),a=n(551316),o=n(741419),s=n(157907),l=n(611504),c=n(141039),d=n(731889),u=n(44509),p=n(379338),m=n(858423),h=n(695635),_=n(195507),g=n(308746),f=n(896966),E=n(757033),y=n(280198),b=n(442313),v=n(697714),T=n(8374),I=n(449737),S=n(481540),w=n(486934),A=n(273121),C=n(562688),N=n(635547),L=n(746948),O=n(997894),R=n(163042),P=n(618593),D=n(162371),M=n(710393),k=n(50258),F=n(268174),x=n(53818),U=n(652402),B=n(874391);function V(e){return void 0!==e.file_repo}function G(e,r){return E.Ay.put(`/api/files/${e}/thumbnail_guid`,{thumbnail_guid:r}).then(()=>{o.Ez5.canvasViewState().thumbnailNodeId.set(r)})}let H=(0,T.nF)((e,r)=>{r.file.created_at&&console.error("It looks like you are PUT-ting to the API with the entire file object; please only pass the key and file permission attributes");let n=k.S.putFile(r).then(()=>{r.onSuccess?.()}).catch(n=>{if(r.onError?.(),e.dispatch(v.F.enqueue({message:(0,b.t)("file_permissions.generic_error"),error:!0})),(0,p.b5)())throw n}),i=r.file,a={...(0,L.Ns)(i,i.key),...(0,L.yT)(i,r.linkExpirationConfigId,r.currentUser)},o=(0,L.TP)(i,r.linkExpirationConfigId,r.currentUser);Object.keys(a).length>0&&(0,m.WB)().optimisticallyUpdate(a,n),o&&(0,m.WB)().optimisticallyCreate(o,n)}),K=(0,l.NC)("FILE_PERMISSIONS_PUT"),W=(0,T.nF)(async(e,r)=>{let n=e.getState(),a={},o=r.file,l=o.folderId,d=!1;if(l){let e=(0,_.oA)((await (0,h.Ek)(N.zCd,{projectId:l})).project);d=!!e&&!!o.editorType&&(0,P.d6)(e,o.editorType)}d&&(a.folder_id=l),r.versionId&&(a.version_id=r.versionId),e.dispatch(v.F.enqueue({type:"file_duplicating",message:(0,b.t)("visual_bell.duplicating")})),E.Ay.post(`/api/multiplayer/${o.key}/copy?${(0,g.lF)(a)}`).then(a=>{e.dispatch(v.F.dequeue({}));let l=!!n.openFile;if(!a.data.error&&a.data.meta&&l){let l=a.data.meta;if((0,S.ds)("File Duplicated",o.key,e.getState(),{duplicatedFileKey:l.key,duplicatedContainingFolderId:l.folder_id,duplicatedFileTeamId:l.team_id}),(0,s.k)().dakota_collection_share_on_file_duplicate_internal)for(let e of r.cmsCollectionIds??[])M.A2.connectCollectionToFile({fileKey:l.key,collectionId:e});if(r.checkOssSalesExperiment&&(0,R.Lb)(l.key),c.eD){c.eD.openFile({fileKey:l.key,title:l.name,fileEditorType:l.editor_type,target:i.OpenTarget.FOCAL_TAB,isBranch:(0,w.Xm)(l),isLibrary:!!l.last_published_at,isTeamTemplate:!1,userId:n.user?.id});return}u.Ay.redirect((0,A.to)(l),"_blank")}}).catch(()=>{e.dispatch(v.F.dequeue({})),e.dispatch(y.s.error((0,b.t)("file_browser.file_browser_actions.file_copy_error")))})}),z=(0,T.nF)((e,r)=>{let n=r.file_key;n&&(e.getState().fileByKey[n]||k.S.getFiles({fileKey:n}).then(r=>e.dispatch(eu({file:r.data.meta}))))}),$=(0,T.nF)(async(e,r)=>{try{await E.Ay.del(`/api/files/${r.file_key}/workshop`)}catch(e){}}),Y=(0,T.nF)(async(e,r,{liveStore:n})=>{let i=await n.fetchFile(r.fileKey),a=E.Ay.post(`/api/files/${r.fileKey}/workshop`).then(()=>{e.dispatch(v.F.enqueue({message:(0,b.t)("whiteboard.open_sessions.open_session_started_notification"),button:{text:(0,b.t)("whiteboard.open_sessions.open_session_started_notification_copy_link"),action:()=>{e.dispatch(ei({fileKey:r.fileKey,url:(0,A.to)(i),source:C.d.WORKSHOP_VISUAL_BELL}))}}}))}).catch(()=>{e.dispatch(v.F.enqueue({message:(0,b.t)("whiteboard.open_sessions.open_session_start_failed_notification"),error:!0}))}),o=e.getState().user?.id;if(o){let e=new Date;e.setDate(e.getDate()+1),(0,m.WB)().optimisticallyCreate({FigFileWorkshopMode:{[`optimistic-${r.fileKey}`]:{fileKey:r.fileKey,expiresAt:e,userId:o}}},a)}}),j=(0,T.nF)(async(e,r)=>{await E.Ay.post(`/api/files/${r.fileKey}/view`).then(({data:n})=>{let{last_view_at:i,last_edit_at:a}=n.meta;e.dispatch(B.FB({lastViewed:i,lastEdited:a})),e.dispatch((0,D.Ul)({openFileKey:r.fileKey,versionHistory:e.getState().versionHistory}))}).catch(e=>{(0,f.x1)("recent files","Error marking file view / retrieving last seen times",{error:e})})}),q=(0,T.nF)((e,r)=>{G(r.file_key,r.thumbnail_guid).then(()=>{let n=(0,s.k)().dse_library_pg_thumbnails?r.thumbnail_guid?(0,b.t)("file_browser.file_browser_actions.file_thumbnail_set"):(0,b.t)("file_browser.file_browser_actions.default_file_thumbnail_restored"):r.thumbnail_guid?(0,b.t)("file_browser.file_browser_actions.thumbnail_set"):(0,b.t)("file_browser.file_browser_actions.default_thumbnail_restored");e.dispatch(v.F.enqueue({message:n}))}).catch(()=>{e.dispatch(v.F.enqueue({message:(0,b.t)("file_browser.error_try_again"),error:!0}))})}),X=O.M4.Mutation((e,{objects:r})=>{e.forEach(e=>{r.File.update(e,e=>{e.trashed_at=null})})}),Z=(0,l.NC)("RESTORE_TRASHED_FILES"),J=(0,l.NC)("DELETE_FILES_PERMANENTLY"),Q=(0,l.NC)("DELETE_FILES"),ee=(0,T.nF)((e,r)=>{e.dispatch(Q(r)),e.dispatch((0,U.sM)({fileKeys:Object.keys(r.fileKeys)}))}),et=(0,l.NC)("FILE_RESTORE"),er=(0,T.nF)((e,r)=>{let{fileKey:n,version:i}=r,a=e.getState().versionHistory.versions.filter(e=>e.created_at).sort((e,r)=>e.created_at<r.created_at?-1:1),o=a.findIndex(e=>e.id===i.id);if(-1===o||0===o){e.dispatch(y.s.error("Unable to find version to restore"));return}let s=a[o-1];s?e.dispatch(et({fileKey:n,versionId:s.id})):e.dispatch(y.s.error("Unable to find version to restore"))}),en=(0,T.nF)((e,r)=>{(0,d.Dk)(r.embedCode).then(()=>{(0,S.ds)("Embed Code Copied",r.fileKey,e.getState()),e.dispatch(v.F.enqueue({type:"embeded_code_copied_to_clipboard",message:(0,b.t)("file_browser.file_browser_actions.embed_code_copied")}))}).catch(()=>{e.dispatch(y.s.error((0,b.t)("file_browser.file_browser_actions.embed_code_copy_error")))})}),ei=(0,x.n)((0,T.nF)((e,r)=>{let n;let i=r.url,a=r.label;if(a){let e=document.createElement("a");e.href=i,e.innerText=a;let r=e.outerHTML;n=(0,d.wY)(r,i)}else n=(0,d.Dk)(i);n.then(()=>{(0,S.ds)("File Share Link Copied",r.fileKey,e.getState(),{copyLinkSource:C.d[r.source],...r.trackingProperties}),r.skipVisualBell||e.dispatch(v.F.enqueue({type:"link_copied_to_clipboard",message:r.visualBellMessageOverride??(0,b.t)("copy_to_clipboard.link_copied_to_clipboard"),button:r.visualBellButton}))}).catch(()=>{e.dispatch(I.to({type:F.o,data:{link:i}}))})})),ea=(0,T.nF)((e,r)=>{if(r.name.length<=100){let n={key:r.file.key,name:r.name,updated_at:new Date().toISOString()};e.dispatch(eu({file:n,userInitiated:!0})),(0,S.ds)("File Renamed",n.key,e.getState(),{fileName:n.name})}}),eo=(0,l.NC)("FILE_REMOVE_FROM_PROJECT"),es=(0,l.NC)("FILE_MOVE"),el=(0,l.NC)("FILE_POST"),ec=(0,l.NC)("FILE_BATCH_SUBSCRIBE_TO_REALTIME"),ed=(0,l.NC)("FILE_BATCH_PUT"),eu=(0,l.NC)("FILE_PUT"),ep=(0,a.s)((e,r)=>{let n=r.getState();n.activeFileUsers&&(e=e.filter(e=>!(e in n.activeFileUsers))),e.length&&E.Ay.post("/api/active_file_users",{keys:e}).then(({data:e})=>{!function(e,r,n=!1){let i=r.getState();for(let a in e){if(n&&i.activeFileUsers&&a in i.activeFileUsers)continue;let o=e[a],s=[];if(o)for(let e in o){let r=JSON.parse(o[e]);s.push(r)}r.dispatch(eh({fileKey:a,users:s}))}}(e.meta.active_file_users,r,!0)}).catch(e=>{})},1e3);(0,T.nF)((e,r)=>{ep(r.fileKeys,e)});let em=(0,l.NC)("FILE_CLEAR_ACTIVE_USERS"),eh=(0,l.NC)("FILE_SET_ACTIVE_USERS")},935454:(e,r,n)=>{n.d(r,{ah:()=>s});var i=n(858423),a=n(757033),o=n(8374);function s(e,r,n,a,o){e.id&&"optimistic-id"!==e.id?i.WB()?.optimisticallyUpdate({FileBrowserPreferences:{[e.id]:{orderedTeamIds:e.orderedTeamIds,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds,orderedSidebarSections:e.orderedSidebarSections,orgId:n,teamId:a,orderedLicenseGroupIds:e.orderedLicenseGroupIds}}},o):null!=r&&i.WB()?.optimisticallyCreate({FileBrowserPreferences:{"optimistic-id":{userId:r,migratedToSections:!0,sidebarMigrationStatus:null,orderedTeamIds:e.orderedTeamIds||null,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds||null,orderedSidebarSections:e.orderedSidebarSections||null,updatedAt:new Date,createdAt:new Date,orgId:n,teamId:a,orderedLicenseGroupIds:e.orderedLicenseGroupIds||null}}},o)}(0,o.nF)((e,r)=>{let n=e.getState().user?.id,i=e.getState().currentUserOrgId,o=e.getState().currentTeamId,l=a.Ay.put("/api/file_browser_preferences",{ordered_team_ids:r.prefs.orderedTeamIds,ordered_favorites:r.prefs.orderedFavoritedResourceIds,org_id:i,team_id:o,ordered_license_group_ids:r.prefs.orderedLicenseGroupIds,ordered_sidebar_sections:r.prefs.orderedSidebarSections});s(r.prefs,n,i,o,l)}),(0,o.nF)((e,r)=>{let n=e.getState().user?.id,i=e.getState().currentTeamId,o=r.teamUser,l=r.prefs.orderedFavoritedResourceIds,c=[];if(l)for(var d of l)(o.favoritedFiles?.some(e=>e.id===d)||o.favoritedPrototypes?.some(e=>e.id===d))&&c.push(d);let u=o.favoritedProjects?.filter(e=>r.orderedFolderSubscriptions.includes(e.resourceId)).map(e=>e.id)??[];c.push(...u);let p=a.Ay.put("/api/file_browser_preferences",{ordered_favorites:c,team_id:i});s({id:"optimistic-id",orderedFavoritedResourceIds:c},n,null,i,p)})},110979:(e,r,n)=>{n.d(r,{Dl:()=>ea,Dw:()=>X,Ef:()=>Y,Fs:()=>j,RH:()=>ei,UN:()=>$,V3:()=>K,Z8:()=>et,_l:()=>G,cz:()=>Q,dm:()=>z,gN:()=>W,gR:()=>H,hm:()=>B,kg:()=>q,l7:()=>en,q0:()=>V,qj:()=>U,rg:()=>er});var i=n(157907),a=n(115321),o=n(579020),s=n(322035),l=n(141039),c=n(44509),d=n(691885),u=n(579463),p=n(757033),m=n(280198),h=n(442313),_=n(697714),g=n(615399),f=n(802780),E=n(481540),y=n(625069),b=n(474880),v=n(974326),T=n(997894),I=n(349507),S=n(834111),w=n(97859),A=n(385469),C=n(404658),N=n(515673),L=n(217084),O=n(213613),R=n(708137),P=n(367534),D=n(558500),M=n(127548),k=n(8374),F=n(790355),x=n(449737);let U=(0,k.nF)((e,r)=>{e.getState().modalShown?.type!=null&&e.dispatch((0,x.Ce)()),e.getState().dropdownShown?.type!=null&&e.dispatch((0,F.oB)()),e.dispatch((0,F.DE)({show:!0})),r?.until.then(()=>{e.dispatch(F.DE({show:!1}))}),g.q.addDependency("FILE_BROWSER_SET_LOADING",r?.until||"pending")}),B=(0,k.nF)(e=>{R.H.getState().then(r=>{e.dispatch((0,F.os)(r.data.meta)),e.dispatch(V(r.data.meta))}).catch(r=>{let n=r.data?.message||(0,h.t)("file_browser.file_browser_actions.error_on_data_update");e.dispatch(_.F.enqueue({error:!0,message:n}))})}),V=(0,k.nF)((e,r)=>{new d.P().sendToOtherTabs(O.y,r)}),G=(0,k.nF)((e,r)=>{let n=e.getState(),i=r.view||{view:"recentsAndSharing"},a=(0,S.Np)({...n,currentUserOrgId:r.workspace.orgId,currentTeamId:r.workspace.teamId||null},i),o=!(0,y.d9)(n.selectedView)&&(0,y.d9)(i);if(l.eD&&o){l.eD.openCommunity(a,r.workspace.userId);return}function d(){let e=(0,y.d9)(n.selectedView)&&!(0,y.d9)(i);l.eD&&e&&c.Ay.redirect((0,s.dR)((0,S.Np)({...n,currentUserOrgId:r.workspace.orgId,currentTeamId:r.workspace.teamId||null},n.selectedView),{fuid:r.workspace.userId}))}if(e.dispatch(U()),r.path){(0,E.uE)("account_switched",n,{newUserId:r.workspace.userId,orgId:n.currentUserOrgId,newOrgId:r.workspace.orgId,teamId:n.currentTeamId,newTeamId:r.workspace.teamId,view:n.selectedView.view,newPath:r.path}),c.Ay.redirect((0,s.dR)(r.path,{fuid:r.workspace.userId})),d();return}(0,E.uE)("account_switched",n,{newUserId:r.workspace.userId,orgId:n.currentUserOrgId,newOrgId:r.workspace.orgId,view:n.selectedView.view,newView:i.view,newTeamId:r.workspace.teamId,teamId:n.currentTeamId}),(r.workspace.orgId&&!a.includes(r.workspace.orgId)||r.workspace.teamId&&!a.includes(r.workspace.teamId)||(0,y.d9)(i)&&!r.workspace.orgId&&n.currentUserOrgId)&&(0,w.Y9)(r.workspace.userId,(0,y.d9)(i),r.workspace.orgId,void 0,r.workspace.teamId),(0,b.ck)()?M.m({action:"reloadPage",payload:{fuid:r.workspace.userId}}):(c.Ay.redirect((0,s.dR)(a,{fuid:r.workspace.userId})),d())});(0,k.nF)(e=>{p.Ay.post("/api/session/app_auth",{app_type:"desktop"}).then(({data:r})=>{let n=r.meta.id,i=`/app_auth/${n}/grant`,a=e.getState().authedUsers.orderedIds;a.length>0&&(i+=`?authed_ids=${a.join(",")}`),l.eD?.startAppAuth(i),e.dispatch(_.F.enqueue({message:(0,h.t)("file_browser.file_browser_actions.desktop_go_to_your_browser")}))}).catch(r=>{console.error(r),e.dispatch(_.F.enqueue({message:(0,h.t)("file_browser.error_try_again"),error:!0}))})}),(0,k.nF)((e,r)=>{e.getState().dropdownShown||e.dispatch((0,F.j7)(r))});let H=(0,k.nF)((e,r)=>{let n=e.getState().dropdownShown;n?.type===r.type?e.dispatch((0,F.oB)()):e.dispatch((0,F.j7)(r))}),K=(0,k.nF)((e,r)=>{(0,v.T)()?(0,A.Qn)(r.url):c.Ay.redirect(r.url,"_blank")});function W(e,r={}){return(0,F.$T)({view:"folder",folderId:e,...r})}function z(e,r={},n){return(0,F.$T)({view:"team",teamId:e,...r,teamViewTab:n})}(0,k.nF)((e,{index:r})=>{(0,o.sx)("Recent File Clicked",{index:r},{forwardToDatadog:!0})});let $=(0,k.nF)((e,{fileKey:r,entrypoint:n,currentPlanFilter:i,currentSharedByFilter:a,viewMode:o})=>{(0,E.k1)(r,{state:e.getState(),entrypoint:n,planFilterId:i?.planId,planFilterType:i?.planType,sharedByFilter:a,viewMode:o})}),Y=(0,k.nF)(e=>{(0,E.uE)("Font Installer Downloaded",e.getState())}),j=(0,k.nF)(e=>{(0,E.uE)("Font Uninstaller Downloaded",e.getState())}),q=(0,k.nF)((e,{clickedResourceType:r,resourceIdOrKey:n})=>{(0,E.uE)("File Browser Nav Tree Clicked",e.getState(),{clickedResourceType:r,resourceIdOrKey:n})});T.M4.Query({fetch:async e=>(await D.V.getTrashedFolders(e)).data.meta,schema:e=>e.object({folders:e.array(C.lH.extend({touched_at:e.string()}))}),output:({data:e})=>({folders:e.folders.map(e=>({...e,touched_at:""})).filter(e=>!!e&&!!e.trashed_at&&!e.deleted_at).sort((e,r)=>new Date(e.trashed_at)<new Date(r.trashed_at)?1:-1)})}),(0,k.nF)((e,{orgId:r,teamId:n},{loadingKey:i})=>{let a=P.p.getTrashedFilesV2({orgId:r||"",teamId:n||""});(0,I.N)(a,e,i),a.then(r=>{let n=JSON.parse(r.response);e.dispatch((0,F.pB)({deletedFiles:n.meta.files})),e.dispatch((0,F.pg)({deletedRepos:n.meta.repos}))})});let X=(0,k.nF)(async(e,{previousView:r,openInNewTab:n,onSubmitReturnToPrevView:a,isEduTeam:o,ignoreCurrentPlan:s})=>{let l=e.getState();if(n){let r=(0,S.xS)(l,{view:"teamCreation",ignoreCurrentPlan:s});e.dispatch(K({url:r}));return}if(l.user&&(0,i.k)().close_starter_team_loophole){let n=(0,u.hW)("starter_team_loophole_experiment_m0"),i=(0,u.hW)("starter_team_loophole_experiment_m1"),[a,c]=await Promise.all([n,i]);if((0,f.e5)({userId:l.user.id,teams:Object.values(l.teams),rolesByTeamId:l.roles.byTeamId,getM0Config:()=>a,getM1Config:()=>c})){e.dispatch((0,F.$T)({view:"teamUpgrade",teamFlowType:L.SC.CREATE_AND_UPGRADE,teamId:null,paymentStep:N.tn.PLAN_COMPARISON,previousView:r,isEduTeam:o,ignoreCurrentPlan:s}));return}}l.user&&(0,f.Mk)(l.user.id,Object.values(l.teams),l.roles.byTeamId)?e.dispatch((0,F.$T)({view:"teamUpgrade",teamFlowType:L.SC.CREATE,teamId:null,paymentStep:N.tn.CREATE_TEAM,previousView:r,isEduTeam:o,ignoreCurrentPlan:s})):e.dispatch((0,F.$T)({view:"teamCreation",previousView:r,onSubmitReturnToPrevView:a,isEduTeam:o,ignoreCurrentPlan:s}))}),Z=["fullscreen","prototype"],J=[...L.gu,"desktopNewTab"];function Q(e,r){if(Z.includes(e.view));else if(J.includes(e.view))return!0;else if(r&&r.includes(e.view))return!0;return!1}let ee=null,et=(0,k.nF)((e,r)=>{ee&&Q(r.selectedView,ee.additionalViewsToReload)&&c.Ay.reload(ee.reason,ee.metadata)});function er(){return null!=ee}function en(){ee=null}var ei=(e=>(e[e.DEFAULT=2e3]="DEFAULT",e[e.NONE=0]="NONE",e))(ei||{});let ea=(0,k.nF)(async(e,r)=>{await (0,a.fm)(r.delay),Q(e.getState().selectedView,r.additionalViewsToReload)?c.Ay.reload(r.reason,r.metadata):ee={reason:r.reason,metadata:r.metadata,additionalViewsToReload:r.additionalViewsToReload}});(0,k.nF)((e,r)=>{let n=e.getState().selectedView;"orgSelfServe"===n.view?e.dispatch((0,F.$T)({view:n.view,step:n.step,orgMigrated:!0,upsellSource:n.upsellSource})):e.dispatch(ea(r))});let eo=(0,k.nF)(async(e,r)=>{await (0,a.fm)(r.delay),c.Ay.redirect("/")});(0,k.nF)((e,r)=>{e.dispatch(m.s.flash((0,h.t)("org_settings.mfa_for_members.member_flash"))),e.dispatch(eo(r))})},54018:(e,r,n)=>{n.d(r,{$l:()=>M,$o:()=>I,HA:()=>A,IU:()=>N,Kc:()=>P,MR:()=>w,Q2:()=>v,TI:()=>F,WC:()=>x,ZJ:()=>O,bE:()=>k,gO:()=>S,ub:()=>b,vt:()=>L,y2:()=>R,yH:()=>C,yJ:()=>D,z6:()=>T});var i=n(611504),a=n(463802),o=n(757033),s=n(280198),l=n(442313),c=n(697714),d=n(790355),u=n(449737),p=n(481540),m=n(92537),h=n(376780),_=n(578427),g=n(995946),f=n(962700),E=n(8374),y=n(452546);let b=(0,E.nF)((e,r)=>o.Ay.put(`/api/folders/${r.folderId}/description`,{description:r.description}).then(({data:r})=>{e.dispatch(D({folder:r.meta}))}).catch(r=>{console.error(r),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.update_subscription_error")))})),v=(0,i.NC)("FOLDER_UNPIN_FILE"),T=(0,E.nF)((e,r)=>{let n=e.optimisticDispatch(v(r));return o.Ay.del(`/api/folders/${r.fileKey}/pin`).then(()=>{n.commit()}).catch(()=>{n.revert(),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.file_unpin_error")))})}),I=(0,i.NC)("FOLDER_PIN_FILE"),S=(0,E.nF)(async(e,r)=>{let n=e.optimisticDispatch(I(r));(0,p.xr)("file_browser_folder_pin_file",r.folderId,null,e.getState(),{fileKey:r.fileKey}),await o.Ay.post(`/api/folders/${r.fileKey}/pin`).then(()=>{n.commit(),e.dispatch(c.F.enqueue({error:!1,message:(0,l.t)("file_browser.file_browser_actions.file_pinned_to_project")}))}).catch(()=>{n.revert(),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.file_pin_error")))})}),w=(0,i.NC)("FOLDER_SET_PINNED_FILE"),A=(0,i.NC)("FOLDER_DELETE_LG_SHIM"),C=(0,i.NC)("FOLDER_DELETE"),N=(0,i.NC)("FOLDER_CLEAR"),L=(0,E.nF)((e,r)=>{let n=(0,m.SS)(r.name);if(n)return e.dispatch(s.s.error(n)),null;if(e.dispatch(u.Lo()),e.dispatch(d.bx()),void 0===r.isInviteOnly&&void 0===r.isViewOnly&&void 0===r.teamAccess)return e.dispatch(s.s.error("inviteOnly and viewOnly fields or teamAccess field must be defined")),null;let i={id:(0,m.d)(),name:r.name,description:null,path:r.name,team_id:r.teamId,is_subscribed:!1,is_favorited:!1,created_at:`${new Date}`,updated_at:`${new Date}`,is_invite_only:!1,is_view_only:!1,settings:{webhooks:{}},deleted_at:null,sharing_audience_control:null,team_access:null,trashed_at:null,trashed_user_id:null,is_abandoned_drafts:!1},c=o.Ay.post("/api/folders",{team_id:r.teamId,path:r.name,is_invite_only:r.isInviteOnly,is_view_only:r.isViewOnly,sharing_audience_control:r.sharingAudienceControl,team_access:r.teamAccess}).then(({data:n})=>{e.dispatch(C({folderIds:[i.id]}));let a=n.meta;for(let n of a)if(n.name===r.name){e.dispatch(k(n)),r.onFolderCreated&&r.onFolderCreated(n.id,n.name),(0,p.xr)("Folder Created",n.id,n.team_id,e.getState(),{sharingAudienceControl:r.sharingAudienceControl,teamAccess:r.teamAccess});let i=e.getState().user;r.inviteEmails?.length&&r.teamAccess&&e.dispatch((0,_.rq)({emails:r.inviteEmails,emailsToExclude:i?new Set([i.email]):void 0,resourceType:h.vt.FOLDER,resourceIdOrKey:n.id,level:r.inviteLevel||g.e6.VIEWER,source:"new_project_creation_modal"})),f.G.getRoles({resourceId:n.id,resourceType:h.vt.FOLDER}).then(({data:r})=>{for(let n of r.meta)e.dispatch(y.bE({role:n}))}),r.shouldRedirect&&e.dispatch(d.$T({view:"folder",folderId:n.id}));break}return a});return(0,a.Q)({store:e,requestPromise:c,fallbackError:(0,l.t)("file_browser.file_browser_actions.create_project_error"),next:e.dispatch,action:k(i)})}),O=(0,E.nF)((e,{folderId:r,teamId:n,isSubscribed:i})=>{let s=i?"Folder Subscriber Added":"Folder Subscriber Deleted";(0,p.xr)(s,r,n,e.getState());let c=o.Ay.put(`/api/folders/${r}`,{is_subscribed:i});(0,a.Q)({store:e,requestPromise:c,fallbackError:(0,l.t)("file_browser.file_browser_actions.update_project_error"),next:e.dispatch,action:D({folder:{id:r,is_subscribed:i}})})});(0,i.NC)("FOLDER_LOAD");let R=(0,i.NC)("FOLDER_PUT_UPDATED_AT"),P=(0,i.NC)("FOLDER_LOADED"),D=(0,i.NC)("FOLDER_PUT"),M=(0,i.NC)("FOLDER_BATCH_POST"),k=(0,i.NC)("FOLDER_POST"),F=(0,i.NC)("FOLDER_STOP_RENAME"),x=(0,i.NC)("FOLDER_BEGIN_RENAME")},667323:(e,r,n)=>{n.d(r,{Bs:()=>ei,CN:()=>ey,D9:()=>H,Dr:()=>J,FP:()=>V,Gm:()=>U,J4:()=>ef,JM:()=>G,Jt:()=>k,Kx:()=>$,M3:()=>eN,Mt:()=>j,OB:()=>eO,PQ:()=>D,QA:()=>O,Ql:()=>Z,Qm:()=>eT,R5:()=>x,Rw:()=>P,ST:()=>R,U8:()=>W,UC:()=>eL,UM:()=>eg,Uv:()=>q,VB:()=>el,Wk:()=>eo,XE:()=>er,XQ:()=>em,Y:()=>Y,Y6:()=>eh,Z1:()=>eb,Z_:()=>e_,aK:()=>ev,bO:()=>eA,bS:()=>X,eH:()=>eC,fG:()=>z,fk:()=>ed,fy:()=>ec,ho:()=>eR,il:()=>K,kP:()=>ep,lp:()=>eI,lz:()=>F,nA:()=>ew,nN:()=>ea,p5:()=>eu,pj:()=>M,re:()=>eE,sx:()=>B,u1:()=>en,vg:()=>es,yv:()=>eS});var i=n(741419),a=n(157907),o=n(611504),s=n(579020),l=n(322035),c=n(141039),d=n(44509),u=n(379338),p=n(599375),m=n(963376),h=n(442313),_=n(790355),g=n(449737),f=n(545801),E=n(604613),y=n(481540),b=n(992444),v=n(716181),T=n(566213),I=n(154209),S=n(834111),w=n(922030),A=n(766878),C=n(430330),N=n(384815),L=n(8374);let O=(0,o.NC)("SET_SHOW_EDIT_BUTTON"),R=(0,o.NC)("CLEAR_SELECTED_VIEW_COMMENT_ID"),P=(0,o.NC)("UPDATE_RECENTLY_USED_QUICK_COMMAND"),D=(0,o.NC)("RECENTLY_USED_QUICK_COMMANDS"),M=(0,o.NC)("FULLSCREEN_UPDATE_CANVAS_MENTION_POPUP_POSITION"),k=(0,o.NC)("FULLSCREEN_SET_CANVAS_MENTION_POPUP"),F=(0,o.NC)("FULLSCREEN_UPDATE_HYPERLINK_POPUP_POSITION"),x=(0,o.NC)("FULLSCREEN_SET_HYPERLINK_POPUP"),U=(0,o.NC)("FULLSCREEN_SET_EYEDROPPER"),B=(0,L.nF)((e,r)=>{let n=e.getState(),i=r.params||{},{fileKey:a}=n.selectedView;(0,y.ds)(r.name,a??null,n,i)}),V=(0,o.NC)("FULLSCREEN_SET_LEFT_PANEL_TAB"),G=(0,o.NC)("FULLSCREEN_SHOW_FILE_CREATION_FAILURE_BANNER"),H=(0,o.NC)("FULLSCREEN_HIDE_UPGRADE_BANNER"),K=(0,o.NC)("FULLSCREEN_SHOW_UPGRADE_BANNER"),W=(0,o.NC)("FULLSCREEN_SET_PREFERRED_VALUES_PICKER_LIST_LAYOUT"),z=(0,o.NC)("FULLSCREEN_SET_INSTANCE_SWAP_PICKER_LIST_LAYOUT"),$=(0,o.NC)("FULLSCREEN_SET_PICKER_LIST_LAYOUT"),Y=(0,L.nF)((e,r)=>{(0,s.sx)("Style Picker View Changed",{styleType:"FILL",oldViewMode:r.isListLayout?"GRID":"LIST",newViewMode:r.isListLayout?"LIST":"GRID"}),e.dispatch($(r))}),j=(0,o.NC)("FULLSCREEN_SHOULD_SHOW_STACK_ALIGNMENT_PICKER"),q=(0,o.NC)("FULLSCREEN_HIDE_STYLE_PICKER"),X=(0,o.NC)("FULLSCREEN_SHOW_STYLE_PICKER"),Z=(0,o.NC)("FULLSCREEN_HIDE_PICKER"),J=(0,o.NC)("FULLSCREEN_SHOW_PICKER");function Q(e){return e&&e.startsWith(E.F7)}function ee(e){return e&&e.startsWith(E.yJ)}function et(e,r,n){let a=e&&e.id,o=r&&r.id,l=a!==E.k8&&o===E.k8,c=a===E.k8&&o!==E.k8,d=a!==E.$T&&o===E.$T,u=a===E.$T&&o!==E.$T,p=a!==E.AB&&a!==E.h2&&(o===E.AB||o===E.h2),m=(a===E.AB||a===E.h2)&&o!==E.AB&&o!==E.h2,h=a!==E._V&&o===E._V,_=a===E._V&&o!==E._V,g=!Q(a)&&Q(o),y=Q(a)&&!Q(o),v=!ee(a)&&ee(o),T=ee(a)&&!ee(o);l?i.Ez5.uiState().backgroundPickerOpen.set(!0):c?i.Ez5.uiState().backgroundPickerOpen.set(!1):d?b.Y5.updateAppModel({prototypeBackgroundPickerOpen:!0}):u?b.Y5.updateAppModel({prototypeBackgroundPickerOpen:!1}):p?(i.Ez5.propertiesPanelState().typeDetailsPanelOpen.set(!0),(0,s.sx)("Type Details Panel Opened")):m&&i.Ez5.propertiesPanelState().typeDetailsPanelOpen.set(!1),g?i.Osy.setIsPaintPickerOpen(!0):y&&i.Osy.setIsPaintPickerOpen(!1),v?i.Osy.setIsStylePickerOpen(!0):T&&i.Osy.setIsStylePickerOpen(!1),h?i.Ez5.uiState().minMaxModalShown.set(!0):_&&i.Ez5.uiState().minMaxModalShown.set(!1),y&&n(f.oI({paintId:void 0,originalPaint:void 0,updatedPaintFromDropper:void 0}))}let er=(0,L.nF)(e=>{let r=e.getState().pickerShown;e.dispatch(Z()),et(r,e.getState().pickerShown,e.dispatch)}),en=(0,L.nF)((e,r)=>{let n=e.getState().pickerShown;e.dispatch(J(r)),et(n,e.getState().pickerShown,e.dispatch)}),ei=(0,o.NC)("FULLSCREEN_UPDATE_LOCAL_FONT_AGENT_VERSION"),ea=(0,o.NC)("FULLSCREEN_UPDATE_FONT_LIST"),eo=(0,o.NC)("FULLSCREEN_STOP_RENAMING"),es=(0,o.NC)("FULLSCREEN_BEGIN_RENAMING"),el=(0,L.nF)((e,r)=>{let n=e.getState(),a=r.newSelectedView;if(n.saveStatus&&n.saveStatus.hasUnsavedChanges&&n.saveStatus.tabCloseText!==i.E63.SUPPRESS_UNSAVED_CHANGES_UI){if(!(0,T.Ed)(()=>e.dispatch(eC()))){let r=(0,h.t)("autosave.unable_to_leave_document.unsaved_changes_save_in_background");e.dispatch(g.to({type:N.v,data:{message:r}}))}d.Ay.push((0,S.Np)(n,a),{...e.getState().selectedView,previousSelectedView:r.oldSelectedView,jsCommitHash:(0,u.tl)().release_manifest_git_commit}),e.dispatch(_.$T(r.oldSelectedView))}else n.saveStatus&&n.saveStatus.tabCloseText===i.E63.SUPPRESS_UNSAVED_CHANGES_UI&&(0,s.sx)("suppress_unsaved_changes_ui",{},{forwardToDatadog:!0}),e.dispatch(_.$T({...a,fromPopstate:!0}))}),ec=(0,o.NC)("FULLSCREEN_UPDATE_SELECTED_STYLE_THUMBNAIL_URL"),ed=(0,o.NC)("FULLSCREEN_UPDATE_SELECTED_STYLE_PROPERTIES"),eu=(0,o.NC)("FULLSCREEN_UPDATE_MIRROR"),ep=(0,o.NC)("FULLSCREEN_SET_NEEDS_UPGRADE"),em=(0,o.NC)("FULLSCREEN_SET_FILE_VERSION"),eh=(0,o.NC)("FULLSCREEN_SET_PROGRESS_BAR_STATE"),e_=(0,o.NC)("FULLSCREEN_STOP_OBSERVING_OTHER_USER"),eg=(0,o.NC)("FULLSCREEN_UPDATE_MULTIPLAYER_STATE"),ef=(0,L.nF)((e,r)=>{void 0!==r.allUsers&&(v.k6(r.allUsers.length,r.presenterSessionID),(0,m.YQ)({id:A.M8})),e.dispatch(eg(r))}),eE=(0,o.NC)("FULLSCREEN_SHOW_DOWNTIME_BANNER"),ey=(0,o.NC)("FULLSCREEN_HIDE_DOWNTIME_BANNER"),eb=(0,o.NC)("FULLSCREEN_HIDE_OPEN_DESKTOP_APP_MODAL"),ev=(0,o.NC)("FULLSCREEN_SHOW_OPEN_DESKTOP_APP_MODAL"),eT=(0,o.NC)("FULLSCREEN_RECONNECTING_SUCCEEDED"),eI=(0,L.nF)(e=>{v.Dg(),e.dispatch(eT())}),eS=(0,o.NC)("FULLSCREEN_RECONNECTING_STARTED"),ew=(0,L.nF)(e=>{v.Ug(),e.dispatch(eS())}),eA=(0,o.NC)("FULLSCREEN_ATTEMPT_CLOSE"),eC=(0,L.nF)((e,r)=>{if(c.eD){c.eD.showFileBrowser(),r?.closeCurrentDesktopTab&&c.eD.close({suppressReopening:!0,shouldForceClose:!0});return}if(l.GZ()){if((0,a.k)().integ_zoom_allow_file_switching&&(0,p.LR)())return;d.Ay.redirect("/","_blank");return}let n=e.getState(),{openFile:o,selectedView:s}=n,u=o?.project?.id,m={view:"recentsAndSharing"};if(o&&s){if("fullscreen"===s.view&&n.lastVisitedPlan&&n.lastVisitedPlan.planId!==(n.lastVisitedPlan.planType===C.O.ORG?o?.parentOrgId:o?.teamId)){let e=(0,S.xS)(n,m);s.prevSelectedView&&(e=(0,S.xS)(n,s.prevSelectedView));let r=(0,I.nX)(e),i=(0,w.Eq)(e);(r||i)&&(e=(0,S.Tk)(e,r?C.O.ORG:C.O.TEAM,r||i,n.lastVisitedPlan.planType,n.lastVisitedPlan.planId)),d.Ay.redirect(e);return}"fullscreen"===s.view&&s.prevSelectedView?m=s.prevSelectedView:o&&u&&(m={view:"folder",folderId:u})}if(i.Ez5?.uiState().isRecovery.getCopy()){let e=(0,S.xS)(n,m);d.Ay.redirect(e)}b.Y5.dispatchIfSaved(_.$T(m)),v.V(),e.dispatch(eA(r))}),eN=(0,o.NC)("FILE_SELECTED_SHARE_MODAL_TAB"),eL=(0,o.NC)("UPDATE_OPEN_FILE"),eO=(0,o.NC)("NEW_FILE_LOADED"),eR=(0,o.NC)("FULLSCREEN_OPEN")},391718:(e,r,n)=>{n.d(r,{HF:()=>_,QA:()=>y,TW:()=>f,Zv:()=>h,kE:()=>m,mH:()=>g,tG:()=>p,zs:()=>E});var i=n(611504),a=n(757033),o=n(442313),s=n(719398),l=n(697714),c=n(8374),d=n(114735),u=n(830789);let p=(0,i.NC)("GENERIC_COMMENT_COMMIT_CREATED_COMMENT"),m=(0,i.NC)("GENERIC_COMMENT_COMMIT_EDITED_COMMENT"),h=(0,i.NC)("GENERIC_COMMENT_COMMIT_DELETED_COMMENT"),_=(0,i.NC)("GENERIC_COMMENT_COMMIT_HIDE_COMMENT");(0,c.nF)(async(e,r)=>{let{authorId:n,removeCommentsCallback:i}=r,a=e.getState().communityHub.comments,{activeFeedType:o,commentsById:s,id:l,type:c}=a;if(!l||!c||!a.feeds[o]?.feed)return;let d=[];for(let e in s)s[e]?.author.id===n&&d.push(s[e]);await i(d),e.dispatch(h({resourceType:c,resourceId:l,comments:d}))});let g=(0,i.NC)("GENERIC_COMMENT_SET_SHOW_RESOLVED");(0,i.NC)("GENERIC_COMMENT_SAVE_PAGE_SCROLL_POSITION");let f=(0,i.NC)("GENERIC_COMMENT_RESET_COMMENT_STATUS"),E=(0,i.NC)("GENERIC_COMMENT_SUBMIT");(0,c.nF)(async(e,r)=>{let{messageMeta:n,resourceId:i,resourceType:c,onSuccess:d,onError:m,clientMeta:h,pageId:_,parentId:g,isReply:y}=r;await a.Ay.post("/api/community_comments",{message_meta:n,resource_id:i,resource_type:c,client_meta:h,page_id:_,parent_id:g}).then(({data:r})=>{e.dispatch(p({comment:r.meta,resourceId:i,resourceType:c,isReply:y})),d&&d(r.meta)}).catch(r=>{let n=(0,s.J)(r);n&&(e.dispatch(l.F.enqueue({error:!0,message:(0,o.t)("community.comments.failed_to_create_comment",{errorMessage:n})})),g?e.dispatch(f({commentId:g})):e.dispatch(f({commentId:u.hm})),m&&m())}),e.dispatch(E(r))},({resourceId:e})=>`GENERIC_COMMENT_SUBMIT_${e}`);let y=(0,c.MM)("GENERIC_COMMENT_EDIT",async(e,r,{optimistId:n})=>{let{commentId:i,messageMeta:s,callback:c,clientMeta:u}=r;await a.Ay.put(`/api/community_comments/${i}`,{message_meta:s,client_meta:u}).then(({data:r})=>{e.dispatch(d.c(n)),c(r.meta),e.dispatch(m({comment:r.meta}))}).catch(r=>{e.dispatch(d.r(n)),e.dispatch(l.F.enqueue({message:(0,o.t)("community.comments.failed_to_edit_comment"),error:!0}))})});(0,c.nF)((e,r,{loadingKey:n})=>{let{commentId:i,onFinish:c}=r,{type:d,id:u}=e.getState().communityHub.comments;if(null===d||null===u)return;let p=e.getState().communityHub.comments.commentsById[i];a.Ay.del(`/api/community_comments/${i}`).then(()=>{e.dispatch(h({resourceType:d,resourceId:u,comments:[p]})),e.dispatch(l.F.enqueue({message:(0,o.t)("community.comments.comment_deleted")})),c?.(!1)}).catch(r=>{let n=(0,s.J)(r);n&&(e.dispatch(l.F.enqueue({error:!0,message:(0,o.t)("community.comments.failed_to_delete_comment",{errorMessage:n})})),c?.(!0))})},({commentId:e})=>`GENERIC_COMMENT_DELETE_${e}`),(0,c.nF)((e,r)=>{let n;let{commentId:i,userIsAdmin:c,onFinish:d}=r,{type:u,id:p}=e.getState().communityHub.comments;null!==u&&null!==p&&(c&&(n={hide:!0}),a.Ay.post(`/api/community_comments/${i}/report`,n).then(()=>{e.dispatch(_({commentId:i,resourceId:p,resourceType:u})),e.dispatch(l.F.enqueue({message:(0,o.t)("community.comments.comment_reported_and_hidden"),type:"COMMENT_REPORTED"})),d?.(!1)}).catch(r=>{let n=(0,s.J)(r);n&&(e.dispatch(l.F.enqueue({message:(0,o.t)("community.comments.failed_to_report_comment",{errorMessage:n}),type:"COMMENT_REPORT_ERROR"})),d?.(!0))}))})},273835:(e,r,n)=>{n.d(r,{f:()=>p});var i=n(280198),a=n(442313),o=n(697714),s=n(449737),l=n(349507),c=n(73495),d=n(655465),u=n(8374);let p=(0,u.nF)((e,{fileKey:r,emailAddress:n,isResentEmail:s,onSuccess:d},{loadingKey:u})=>{let p=c.L.setClaimEmail({fileKey:r,emailAddress:n});(0,l.N)(p,e,u),p.then(()=>{if(s){e.dispatch(o.F.enqueue({message:(0,a.t)("google_device_try_file_modal.resent_email.visual_bell")}));return}d?.(n)}).catch(r=>{if(r.data?.message==="Hit Claim Email Job timeout lock"){e.dispatch(o.F.enqueue({message:(0,a.t)("google_device_try_file_modal.resent_email.email_resent")}));return}e.dispatch(i.s.error((0,a.t)("google_device_try_file_modal.enter_email.failed_to_send")))})});(0,u.nF)((e,{fileKey:r},{loadingKey:n})=>{let o=c.L.claimDeviceFile({fileKey:r});(0,l.N)(o,e,n),o.then(()=>{e.dispatch(s.to({type:d.$,data:{}}))}).catch(r=>{e.dispatch(i.s.error((0,a.t)("google_device_try_file.save_board.generic_error")))})})},959100:(e,r,n)=>{n.d(r,{FU:()=>s,v6:()=>c,yu:()=>l});var i=n(611504),a=n(963376),o=n(8374);let s=(0,i.NC)("SET_KEYBOARD_SHORTCUT_PANEL_TAB"),l=(0,i.NC)("USED_KEYBOARD_SHORTCUT"),c=(0,o.nF)((e,r)=>{"paste"===r.key&&(0,a.YQ)({id:"Used Keyboard Shortcut Paste"}),e.dispatch(l(r))})},111947:(e,r,n)=>{n.d(r,{QC:()=>B,fi:()=>F,zK:()=>U});var i=n(988520),a=n(992277),o=n(157907),s=n(39773),l=n(379338),c=n(502255),d=n(757033),u=n(503813),p=n(479771),m=n(8374),h=n(884060),_=n(193607),g=n(926252),f=n(341550),E=n(342431),y=n(870769),b=n(881473),v=n(405888),T=n(561162),I=n(928001),S=n(834111),w=n(97859),A=n(241917),C=n(931516),N=n(492119),L=n(175334),O=n(919699);let R=new Map;async function P(e,r){let n=(0,S.zg)(e.getState().selectedView),i=!(0,l.Ay)().user_data;if(i&&!n)return;if((R.get(r)||0)>20){(0,y.LC)();return}let d=(0,O.yD)(r);if(!(0,I.Sc)(e.getState().loadingState,d)){(0,y.LC)();return}e.dispatch(f.Cx({key:d}));let u=e.getState();try{let n=u.selectedView.editorType,l=function(e){switch(e){case A.nT.Whiteboard:return"figjam";case A.nT.Slides:return"slides";default:return"design"}}(n),m=L.Z.getLibrarySubscribedComponentsEditorType({key:r,editorType:l}),[g]=await Promise.all([m]);i||await w.kb.promise,e.dispatch(h.uo({files:g.data.meta.files,subscribeToRealtime:!0})),g.data.meta.files.forEach(e=>{(0,y.Ve)(e.key)});let b=s.zl.get(E.qp),T=g.data.meta.hub_files;T&&(T.forEach(e=>{(0,y.Ve)(e.id)}),e.dispatch((0,p.D3)(T)));let I=g.data.meta.state_groups.map(e=>({...e,team_id:b[e.library_key]?.team_id})),S=g.data.meta.components.map(e=>({...e,team_id:b[e.library_key]?.team_id}));if(e.dispatch(_.uo({items:I,type:C.PW.STATE_GROUP})),e.dispatch(_.uo({items:S,type:C.PW.COMPONENT})),(0,o.k)().dse_lk_realtime_audit){let e=S.filter(e=>!e.library_key),r=I.filter(e=>!e.library_key);(e.length>0||r.length>0)&&(0,c.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,Error("Missing library keys for components or state groups"),{tags:{numComponentsWithMissingLibraryKeys:e.length,numStateGroupsWithMissingLibraryKeys:r.length}})}(0,y.LC)(),e.dispatch(f.x2({key:d})),v.YG.queryDidChange(e)}catch(n){(0,y.LC)(),R.set(r,(R.get(r)||0)+1),e.dispatch(f.of({key:d}))}}async function D(e){let r=e.getState().openFile;if(!r)return;let n=(0,y.iw)(r.key),a=e.getState().loadingState;if(!((0,I.D2)(a,n)||(0,I.VP)(a,n))){e.dispatch(f.Cx({key:n}));try{let r=e.getState().selectedView;if("fullscreen"!==r.view)return;let a=await L.Z.getDefaultLibraries({editorType:(0,A.Bu)(r.editorType)});k(e,a.data.meta.components,C.PW.COMPONENT),k(e,a.data.meta.state_groups,C.PW.STATE_GROUP),a.data.meta.files.forEach(r=>{r.team_id=C.Yu,e.dispatch(h.yJ({file:r}))});let o=a.data.meta.files.map(b.l).filter(i.Vq);e.dispatch(_.lx({libraryKeys:o})),(0,y.kG)(),e.dispatch(f.x2({key:n}))}catch(r){(0,y.kG)(),e.dispatch(f.of({key:n})),v.YG.queryDidChange(e)}}}let M=(0,u.fv)(),k=(e,r,n)=>{let i={[C.Yu]:{}},a={};r.forEach(e=>{let r=M(e=(0,T.aV)(e));i[C.Yu][r]=i[C.Yu][r]||{},i[C.Yu][r][e.node_id]=e,(a[e.library_key]??={})[e.node_id]=e}),e.dispatch(_.Ho({publishedItemsByTeamId:i,publishedItemsByLibraryKey:a,type:n}))};(0,m.nF)(e=>{let r=e.getState(),n=!!r.user;if(!r.openFile?.key)return;let i=e.getState().selectedView;i&&"fullscreen"===i.view&&(i.editorType===A.nT.Whiteboard||i.editorType===A.nT.Slides||i.editorType===A.nT.Cooper?D(e):(0,y.kG)(),n&&x(e,i.editorType===A.nT.Whiteboard?N.$A.FigJam:N.$A.Design)),n&&(e.dispatch(g.tg()),g.xZ(e))});let F="FETCH_RECENTLY_USED_LIBRARY_ITEMS";async function x(e,r){let n;if((0,I.VP)(e.getState().loadingState,F))return;e.dispatch(f.Cx({key:F})),(0,o.k)().dse_instance_swap_perf||await y.NW;let i=e.getState();if("fullscreen"!==i.selectedView.view){e.dispatch(f.x2({key:F}));return}let a=new Set,l=new Set;for(let e of i.recentlyUsed.libraryItems[r]){let r=e.library_key;e.type===C.PW.COMPONENT&&e.key&&!i.library.publishedByLibraryKey.components[e.team_id]?.[r]?.[e.node_id]?a.add(e.key):e.type===C.PW.STATE_GROUP&&e.key&&!i.library.publishedByLibraryKey.stateGroups[e.team_id]?.[r]?.[e.node_id]&&l.add(e.key)}if(0===a.size&&0===l.size){e.dispatch(f.x2({key:F}));return}try{n=await d.Ay.post("/api/design_systems/components_state_groups",{component_keys:Array.from(a),state_group_keys:Array.from(l),org_id:i.openFile?.parentOrgId})}catch(r){e.dispatch(f.of({key:F}));return}e.dispatch(f.x2({key:F})),e.dispatch(h.uo({files:n.data.meta.files,subscribeToRealtime:!1})),e.dispatch(_.dC({subscribedOldKeyToNewKey:n.data.meta.move_remappings,localOldGuidToNewKey:{}}));let c=s.zl.get(E.qp);g.VF(n.data.meta.components,C.PW.COMPONENT,c,e.dispatch),g.VF(n.data.meta.state_groups,C.PW.STATE_GROUP,c,e.dispatch)}let U=(0,m.nF)(e=>{let r=e.getState().openFile;r&&P(e,r.key)});function B(e){e.dispatch(U())}},926252:(e,r,n)=>{n.d(r,{$h:()=>e$,AV:()=>e2,As:()=>e0,BK:()=>eK,Bs:()=>eX,D6:()=>tg,EY:()=>tB,Ee:()=>ej,Kd:()=>tr,Kk:()=>tU,Ky:()=>t_,NW:()=>tR,Oe:()=>te,PI:()=>tP,Qn:()=>e7,Tn:()=>tI,VF:()=>tW,Yb:()=>tv,Yf:()=>eY,Yi:()=>e6,Yx:()=>tO,Z:()=>ty,Zn:()=>tH,_K:()=>e5,a9:()=>tu,b$:()=>eq,e$:()=>ta,f$:()=>e8,ff:()=>e9,fv:()=>tE,jD:()=>eG,jR:()=>eZ,n8:()=>tF,nh:()=>e4,nz:()=>tL,rX:()=>e1,t5:()=>e3,tL:()=>ts,tg:()=>to,u7:()=>td,uO:()=>eW,uP:()=>eH,wV:()=>tT,x:()=>tV,xZ:()=>tf,zn:()=>th});var i=n(848318),a=n(716544),o=n(133696),s=n(992277),l=n(781131),c=n(741419),d=n(720701),u=n(673906),p=n(758159),m=n(897392),h=n(573446),_=n(179703),g=n(157907),f=n(39773),E=n(223926),y=n.n(E),b=n(239910),v=n.n(b),T=n(611504),I=n(579020),S=n(966491),w=n(6819),A=n(44509),C=n(397579),N=n(493554),L=n(653959),O=n(736206),R=n(502255),P=n(896966),D=n(757033),M=n(963376),k=n(280198),F=n(442313),x=n(503813),U=n(697714),B=n(164963),V=n(8374),G=n(884060),H=n(193607),K=n(341550),W=n(449737),z=n(301864),$=n(405866),Y=n(665549),j=n(481540),q=n(323075),X=n(627855),Z=n(574146),J=n(342431),Q=n(842915),ee=n(212965),et=n(772123),er=n(673481),en=n(992444),ei=n(243595),ea=n(472060),eo=n(748523),es=n(617767),el=n(870769),ec=n(228716),ed=n(635547),eu=n(997894),ep=n(928001),em=n(816662),eh=n(458668),e_=n(349507),eg=n(196584),ef=n(922030),eE=n(97859),ey=n(500076),eb=n(937237),ev=n(931516),eT=n(939214),eI=n(175334),eS=n(833953),ew=n(99042),eA=n(370652),eC=n(574541),eN=n(555841),eL=n(38348),eO=n(207356),eR=n(853833),eP=n(314506),eD=n(919699),eM=n(53818),ek=n(593709),eF=n(653813),ex=n(721271),eU=n(255234),eB=n(131862),eV=n(656610);async function eG(e,r=c.ZiZ.ACTIVE_SCENE){let n;if(!e.canvas_url&&r===c.ZiZ.PLAYGROUND_SCENE)return{newSymbolOrStateGroupGuid:c.BXd.upsertLocalProductComponentToPlaygroundScene(e.node_id)};let i=await Z.Eo.getCanvas(e);if(e.type===ev.PW.COMPONENT){let a=u.l7.system("upsert-shared-symbol",()=>c.BXd.upsertSharedSymbol(e.component_key??l.ii.INVALID,e.content_hash??l.F7.INVALID,e.library_key,c.zol.NO,i,r));if(!a||(0,o.Im)(a)||a.fileUpdateRequired)return;a.localGUID||(0,P.x1)(s.e.DESIGN_SYSTEMS_EDITOR,"no local GUID in response",{response:JSON.stringify(a)},{reportAsSentryError:!0}),n=a.localGUID}else if(e.type===ev.PW.STATE_GROUP){let a=u.l7.system("upsert-shared-state-group",()=>c.BXd.upsertSharedStateGroup(e.key,e.version,e.library_key,c.zol.NO,i,r));if(!a||(0,o.Im)(a)||a.fileUpdateRequired)return;if(!a.localGUID)throw Error("Swap to Shared Component Error, no local GUID");if(a.C2)throw Error(a.C2);n=a.localGUID}else throw Error(`Unexpected type for dragging library item: ${e.type}`);return{newSymbolOrStateGroupGuid:n,buffer:i}}let eH=(0,V.nF)((e,r)=>{let{item:n,callback:i,bufferCallback:a,errorCallback:o,alwaysFetch:l,targetUpsertScene:d=c.ZiZ.ACTIVE_SCENE}=r,u=(0,q.d1)(e.getState());if(u){if(!(0,X.N2)(n,u)||l){let r=async()=>{try{let e=await eG(n,d);e&&(i?.(e.newSymbolOrStateGroupGuid),e.buffer&&a?.(e.buffer))}catch(r){e.dispatch(k.s.error("An error occurred while retrieving the component or state group.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),o?.()}};e.dispatch((0,eF.vQ)({assetLibraryKey:n.library_key,onInsertAsset:r,source:eF.jE.LOAD_COMPONENT}))}else i?.(n.node_id)}}),eK=(0,T.NC)("SWAP_TO_SHARED_COMPONENT_OR_STATE_GROUP"),eW=(0,V.nF)((e,r)=>{let{item:n,instanceGUIDs:i,usedSwapInstanceKeyboardShortcut:a,storeInRecentsKey:o,queryId:l}=r,d=(0,eD.Ml)(n,i);e.dispatch(K.Cx({key:d}));let p=e.getState(),m=(0,ea.s)(p);e.dispatch(tP({storeInRecentsKey:o,item:n,userId:m}));let h=(0,q.d1)(p);if(!h){e.dispatch(K.of({key:d}));return}let _=async()=>{try{let r=await eG(n);if(r){let o=n.type===ev.PW.STATE_GROUP?c.glU.getSimilarStates(i,r.newSymbolOrStateGroupGuid,n.default_state_key):{[r.newSymbolOrStateGroupGuid]:i};u.l7.user("replace-symbol-backing-instances",()=>{c.glU.replaceSymbolBackingInstances(o,a)}),e.dispatch(K.x2({key:d})),(0,ek.V)(h.key,n,!0,!!e.getState().userFlags.apple_eula_accepted)}}catch(r){e.dispatch(K.of({key:d})),e.dispatch(k.s.error("An error occurred while adding an instance of this component.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),(0,ek.V)(h.key,n,!1,!!e.getState().userFlags.apple_eula_accepted)}(0,j.ds)("Instance Swapped To Shared Component",h.key,e.getState(),{componentLibraryKey:n.library_key,componentId:n.id,source:r.sourceForTracking,queryId:l})};e.dispatch((0,eF.vQ)({assetLibraryKey:n.library_key,onInsertAsset:_,source:eF.jE.SWAP_TO_COMPONENT})),e.dispatch(eK(r))});function ez(e){return e(U.F.enqueue({type:"insert_instance",message:(0,F.t)("design_systems.subscriptions.inserting_instance"),icon:B.zX.SPINNER,delay:1e3})),function(){e(U.F.dequeue({matchType:"insert_instance"}))}}let e$=(0,T.NC)("INSERT_SHARED_COMPONENT"),eY=(0,V.nF)((e,r)=>{e.dispatch(e$(r));let{item:n}=r,{canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:o,isFromDoubleClick:d,useSmartPositioning:p,insertionCallback:h,storeInRecentsKey:g,fromPlayground:E,insertLogArgsOverride:y,isClick:b,selectAfterInsert:v,sourceForTracking:T}=r,I=e.getState(),S=f.zl.get(eR.TG).has(n.library_key),w=async()=>{let r=(0,ea.s)(I);e.dispatch(tP({storeInRecentsKey:g,item:n,userId:r}));let f=(0,q.d1)(I);if(!f)return;let w=(r,n)=>{let s=(0,eA.Dl)(),l=u.l7.user("insert-component",()=>E?c.glU.insertPlaygroundInstance({x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},S):c.glU.insertInstance(r,{x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},n,o,p??!1,S,v??!0));try{(0,eC.L)(i,l),(0,eA.cI)(s,i,l,T)}catch(e){(0,P.x1)("auto_suggest","Error logging shadow reads on component insertion",{error:e})}if(h?.([l],i,b),e.dispatch(W.ES({type:eL.V})),l!==m.AD){let n=(0,em.C$)((0,_.UN)().get(r)),i=I.mirror.sceneGraph.get(l),a=Object.keys(i&&"INSTANCE"===i.type&&i.componentProperties()||{}).length>0;n&&a?(e.dispatch(z.E({nodeId:l})),(0,M.YQ)({id:eT.sh})):n?(e.dispatch(z.E({nodeId:l})),(0,M.YQ)({id:eT.Sp})):a?(0,M.YQ)({id:eT.An}):(0,M.YQ)({id:eT.fe})}en.Y5.triggerAction("commit"),en.Y5.triggerAction("set-tool-default")};if((0,X.N2)(n,f)){let r=I.library.local.components[n.node_id];if(!r||!I.mirror.sceneGraph.get(r.node_id)){e.dispatch(W.to({type:eO.Q}));return}try{w(r.node_id,y),(0,j.ds)("Component Local Symbol Inserted",f.key,e.getState(),{componentLibraryKey:n.library_key,componentId:n.id,ComponentCanvasPositionX:i.x,ComponentCanvasPositionY:i.y}),(0,ek.V)(f.key,r,!0,!!e.getState().userFlags.apple_eula_accepted),e.dispatch(tG())}catch(n){e.dispatch(k.s.error("An error occurred while adding an instance of this component.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,n),(0,ek.V)(f.key,r,!1,!!e.getState().userFlags.apple_eula_accepted)}}else{let r=performance.now();if(tl&&tl===n.component_key&&tc){let e=(await tc).component;e&&e.updated_at>n.updated_at&&(n=e)}let a=ez(e.dispatch);Z.Eo.getCanvas(n).then(e=>{let r=u.l7.system("upsert-shared-symbol",()=>c.BXd.upsertSharedSymbol(n.component_key??l.ii.INVALID,n.content_hash??l.F7.INVALID,n.library_key,c.zol.NO,e,c.ZiZ.ACTIVE_SCENE));if(!r)throw(0,P.x1)("design-systems","response from upsertSharedSymbol was nullish",{componentKey:n.component_key??l.ii.INVALID,contentHash:n.content_hash??l.F7.INVALID},{reportAsSentryError:!0}),Error("An error occurred while adding an instance of this component.");if(r.fileUpdateRequired||!r.localGUID)throw Error("An error occurred while adding an instance of this component.");w(r.localGUID,y)},e=>{let r=c.glU.getSymbolNodeId(n.component_key,n.content_hash);if(!r){if(e?.status===403)throw Error("A 403 error occurred while adding an instance of this component.");throw Error("An error occurred while adding an instance of this component.")}w(r,y)}).then(()=>{let a=performance.now()-r;(0,j.ds)("Component Shared Symbol Inserted",f.key,e.getState(),{elapsedMs:a,componentLibraryKey:n.library_key,componentId:n.id,componentName:n.name,ComponentCanvasPositionX:i.x,ComponentCanvasPositionY:i.y,isFromDefaultLibrary:(0,el.td)(I.library.defaultPublished,n.library_key),isFromDoubleClick:!!d,useSmartPositioning:!!p}),(0,ek.V)(f.key,n,!0,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_component.insert_time",duration:a}),e.dispatch(tG())}).catch(i=>{e.dispatch(k.s.error(i.message)),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,i),(0,ek.V)(f.key,n,!1,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_component.insert_time",duration:performance.now()-r})}).finally(()=>{a()})}};e.dispatch((0,eF.vQ)({assetLibraryKey:n.library_key,onInsertAsset:w,source:eF.jE.INSERT_SHARED_COMPONENT}))}),ej=(0,T.NC)("INSERT_SHARED_STATE_GROUP"),eq=(0,V.nF)(async(e,r)=>{let{item:n}=r,{canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:o,isFromDoubleClick:d,useSmartPositioning:p,insertionCallback:h,storeInRecentsKey:_,fromPlayground:E,insertLogArgsOverride:y,isClick:b,sourceForTracking:v}=r,T=e.getState(),I=f.zl.get(eR.TG).has(n.library_key),S=async()=>{let r=(0,ea.s)(T);e.dispatch(tP({storeInRecentsKey:_,item:n,userId:r}));let S=(0,q.d1)(T);if(!S)return;let w=(r,s,l)=>{let d=(0,eA.Dl)(),m=u.l7.user("insert-state-group",()=>E?c.glU.insertPlaygroundInstance({x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},I):c.glU.insertStateGroup(r,{x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},l,o,p??!1,s,I));try{(0,eC.L)(i,m),(0,eA.cI)(d,i,m,v)}catch(e){(0,P.x1)("auto_suggest","Error logging shadow reads on state group insertion",{error:e})}return(0,g.k)().anticipation_props_shadow_reads&&(f.zl.set(ew.xB,m),f.zl.set(ew.fu,n.key)),h?.([m],i,b),e.dispatch(W.ES({type:eL.V})),en.Y5.triggerAction("commit"),en.Y5.triggerAction("set-tool-default"),m};if((0,X.N2)(n,S)){let r=T.library.local.stateGroups[n.node_id];if(!r||!T.mirror.sceneGraph.get(r.node_id)){e.dispatch(W.to({type:eO.Q}));return}w(r.node_id,"",y),(0,j.ds)("State Group Local Symbol Inserted",S.key,e.getState(),{stateGroupLibraryKey:n.library_key,stateGroupId:n.id,StateGroupCanvasPositionX:i.x,StateGroupCanvasPositionY:i.y}),e.dispatch(tG())}else{let r=performance.now();if(tp&&tp===n.key&&tm){let e=await tm;e&&e.updated_at>n.updated_at&&(n=e)}let a=ez(e.dispatch);Z.Eo.getCanvas(n).then(r=>{let i=u.l7.system("upsert-shared-state-group",()=>c.BXd.upsertSharedStateGroup(n.key??l.q.INVALID,n.version,n.library_key,c.zol.NO,r,c.ZiZ.ACTIVE_SCENE));if(!i||i.fileUpdateRequired||!i.localGUID)throw Error("An error occurred while adding an instance of this component.");let a=w(i.localGUID,n.default_state_key,y),o=T.mirror.sceneGraph.get(i.localGUID)?.childrenNodes[0];o&&((0,em.C$)(o)&&a!==m.AD?(e.dispatch(z.E({nodeId:a})),(0,M.YQ)({id:eT.sh})):(0,M.YQ)({id:eT.An}))},e=>{let r=c.glU.getStateGroupNodeId(n.key,n.version);if(!r)throw Error("An error occurred while adding an instance of this component.");w(r,"",y)}).then(()=>{(0,j.ds)("State Group Shared Symbol Inserted",S.key,e.getState(),{stateGroupLibraryKey:n.library_key,stateGroupId:n.id,stateGroupName:n.name,StateGroupCanvasPositionX:i.x,StateGroupCanvasPositionY:i.y,isFromDefaultLibrary:(0,el.td)(T.library.defaultPublished,n.library_key),isFromDoubleClick:!!d}),(0,ek.V)(S.key,n,!0,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-r}),e.dispatch(tG())}).catch(i=>{e.dispatch(k.s.error(i.message)),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,i),(0,ek.V)(S.key,n,!1,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-r})}).finally(()=>{a()})}};await e.dispatch((0,eF.vQ)({assetLibraryKey:n.library_key,onInsertAsset:S,source:eF.jE.INSERT_SHARED_STATE_GROUP})),e.dispatch(ej(r))}),eX=(0,V.nF)(async(e,r)=>{let{item:n}=r;if(!(0,eP.RX)(n))return;let{canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:o,useSmartPositioning:l,insertLogArgsOverride:d,insertionCallback:p,storeInRecentsKey:m,fromPlayground:h,selectAfterInsert:_,isClick:g,shouldShowVisualBell:f=!0,errorCallback:E}=r,y=e.getState(),b=(0,ea.s)(y);e.dispatch(tP({storeInRecentsKey:m,item:n,userId:b}));let v=(r,n)=>{let s=u.l7.user("insert-module",()=>h?c.glU.insertPlaygroundModuleUsage({x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y}):c.glU.insertModule(r,{x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},n,o,l??!1,_??!0));return p?.(s,i,g),e.dispatch(W.ES({type:eL.V})),en.Y5.triggerAction("set-tool-default"),s},T=(0,q.d1)(y);if((0,X.N2)(n,T))v(n.node_id,d),e.dispatch(tG());else{let r=()=>{};f&&(r=function(e){return e(U.F.enqueue({type:"insert_template",message:(0,F.t)("design_systems.subscriptions.inserting_template"),icon:B.zX.SPINNER,delay:1e3})),function(){e(U.F.dequeue({matchType:"insert_template"}))}}(e.dispatch));try{let e=await eJ(n);v(e.localGUID,d)}catch(r){e.dispatch(k.s.error(r.message)),E?E(r):(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}finally{f&&r()}}});(0,V.nF)(async(e,r)=>{let{modules:n,canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:o,afterSlideModulesInsertion:l,useSmartPositioning:d,insertLogArgsOverride:p,storeInRecentsKey:m,selectAfterInsert:h,errorCallback:_}=r;if(n.some(e=>e.moduleSource!==c.QjO.SLIDES_TEMPLATE||!(0,eP.RX)(e)))return;let g=e.getState(),f=(0,ea.s)(g),E=(e,r)=>u.l7.user("insert-module",()=>c.glU.insertModule(e,{x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},r,o,d??!1,h??!0));try{let r=(await Promise.all(n.map(eJ))).map(e=>E(e.localGUID,p));n.forEach(r=>{e.dispatch(tP({storeInRecentsKey:m,item:r,userId:f}))}),l(n,r),en.Y5.triggerAction("set-tool-default")}catch(e){_?_(e):(0,R.$D)(s.e.SLIDES,e)}});let eZ=(0,V.nF)(async(e,r)=>{let{item:n}=r,{canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:o,useSmartPositioning:l,insertLogArgsOverride:d,selectAfterInsert:p,errorCallback:m}=r,h=i?{x:i.x,y:i.y,percentOffsetX:a?.x||.5,percentOffsetY:a?.y||.5}:null;(0,Q.e)(n);let _=(r,n)=>{let i=u.l7.user("insert-responsive-set",()=>c.glU.insertResponsiveSet(r,h,n,o,l??!1,p??!0));return e.dispatch(W.ES({type:eL.V})),en.Y5.triggerAction("commit"),en.Y5.triggerAction("set-tool-default"),i};if("LIBRARY"!==n.subscriptionStatus)_(n.assetId,d);else try{let e=await (0,eV.e)(n);_(e,d)}catch(r){e.dispatch(k.s.error(r.message)),m?m(r):(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}});async function eJ(e){let r=await Z.Eo.getCanvas(e),n=u.l7.system("upsert-shared-module",()=>c.BXd.upsertSharedModule(e.key??l.mW.INVALID,e.version??l.Pg.INVALID,e.library_key,c.zol.NO,r,c.ZiZ.ACTIVE_SCENE));if(!n||n.fileUpdateRequired||!n.localGUID)throw Error("An error occurred while inserting this template.");return n}function eQ(e,r,n){return(0,S.a)(r,n,{batchSize:5,onBatchFinish(r,n){e(eU.qB({delta:n}))}})}let e0=(0,V.nF)(async(e,r)=>{let{stateGroups:n,usedItemsByKey:i,instanceIdsToUpdate:a,updateStartTime:o,subscribedLibraryKeys:l,fileSubscribedLibraryKeys:p}=r,m=e.getState(),h=m.openFile;if(h)try{let r=await Promise.all(n.map(e=>Z.Eo.getCanvas(e))),s=new Set;await eQ(e.dispatch,n,(e,n)=>{let p=r[n];if(u.l7.user("update-shared-state-group",()=>{c.BXd.updateSharedStateGroup(e.key,e.library_key,e.newStateKeyToOutdatedItems,a.map(d.v.toString),p,o)}),Object.keys(e.newStateKeyToOutdatedItems).length)for(let r of Object.values(e.newStateKeyToOutdatedItems)){let{localIdsToUpdate:n,oldSubscribedKeysToUpdate:a}=r;if((0,el.GA)(m.library,h,n,a,i,l)){s.has(e.library_key)||s.add(e.library_key);break}}}),en.Y5.triggerAction("commit");let _=n.map(e=>e.id);(0,j.ds)("Components Updated",h.key,e.getState(),{stateGroups:_,isSgShimFFEnabled:!0}),s.size>0&&tD(e,Array.from(s),p)}catch(r){e.dispatch(k.s.error("An error occurred while updating the instances of this component.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}}),e1=(0,V.nF)(async(e,r)=>{let{components:n,usedItemsByKey:i,instanceIdsToUpdate:a,updateStartTime:o,subscribedLibraryKeys:p,fileSubscribedLibraryKeys:m}=r,h=e.getState(),_=h.openFile;if(_)try{let r=await Promise.all(n.map(e=>Z.Eo.getCanvas(e))),s=new Set;await eQ(e.dispatch,n,(e,n)=>{let m=r[n];u.l7.user("update-shared-symbol",()=>{c.BXd.updateSharedSymbol(e.component_key??l.ii.INVALID,e.library_key,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,a.map(d.v.toString),m,o)}),(e.localIdsToUpdate.length||e.oldSubscribedKeysToUpdate.length)&&(0,el.GA)(h.library,_,e.localIdsToUpdate,e.oldSubscribedKeysToUpdate,i,p)&&!s.has(e.library_key)&&s.add(e.library_key)}),en.Y5.triggerAction("commit");let g=n.map(e=>e.id);(0,j.ds)("Components Updated",_.key,e.getState(),{components:g,isShimFFEnabled:!0}),s.size>0&&tD(e,Array.from(s),m)}catch(r){e.dispatch(k.s.error("An error occurred while updating the instances of this component.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}}),e2=(0,V.nF)((e,r)=>{let{style:n,inheritStyleKeyField:i,fromSearch:a,targetGuids:o}=r,s=e.getState(),l=(0,q.d1)(s),d=l&&!(0,X.N2)(n,l),p=s.openFile,m=(0,et.ZR)((0,et.cO)(n,d??!1),p),h=(0,er.X)(m);e.dispatch(e4({style:n,callback:(r,s)=>{if(s){(0,e.dispatch)(U.F.enqueue({type:"missing-font",message:(0,F.t)("design_systems.missing_font_cant_make_changes"),button:{text:(0,F.t)("design_systems.missing_font_learn_more"),action:()=>{A.Ay.unsafeRedirect("https://help.figma.com/hc/articles/360039956894-Add-a-font-to-Figma-design","_blank")}}}));return}o?u.l7.user("apply-style-to-nodes",()=>c.glU.applyStyleToNodes(i,r,!0,o)):u.l7.user("apply-style-to-selection",()=>{(0,eN.f)(c.VD3.STYLE_ATTACH,c.e0R.DIRECT,()=>{c.glU.applyStyleToSelection(i,r,!0)})}),(0,I.sx)("Style Applied",{styleType:n.style_type,isShared:!!d,viewMode:e.getState().stylePickerListLayout?"LIST":"GRID",fromSearch:!!a,nonInteraction:0,styleKey:n.key,consumedVariableIds:c.CWU.getConsumedVariableIDs(n.node_id),styleLibraryKey:m,consumingFileKey:p?.key,fileTeamId:p?.teamId,fileParentOrgId:p?.parentOrgId,partnerType:h,success:!0,appleEulaAccepted:!!e.getState().userFlags.apple_eula_accepted},{forwardToDatadog:!0})},errorCallback:()=>{(0,I.sx)("Style Applied Error",{partnerType:h},{forwardToDatadog:!0})}}))}),e4=(0,V.nF)((e,r)=>{let n=e.getState(),{style:i}=r,a=(0,q.d1)(n);if(!a)return;let o=!(0,X.N2)(i,a),d="GRID"===i.style_type&&!c.Ez5.editorPreferences().showFrameGrids.getCopy();if(o){let n=async()=>{try{let n=await Z.Eo.getCanvas(i);r.bufferCallback?.(n);let a=u.l7.system("ensure-style-is-loaded",()=>c.BXd.getOrCreateSubscribedStyleNodeId(i.key,i.content_hash??l.IA.INVALID,i.library_key,n));if(a?.fileUpdateRequired)return;r.omitFullscreenCommit||en.Y5.triggerAction("commit"),d&&((0,ei.c6)(),c.Ez5.editorPreferences().showFrameGrids.set(!0));let o=!1;if("TEXT"===i.style_type&&a&&a.localGUID){let r=e.getState().mirror.sceneGraph.get(a.localGUID),n=r&&r.fontName;n&&await (0,p.VC)(n.family,n.style).catch(()=>{console.error(`Text style font did not load: ${n.family} ${n.style}`),o=!0})}r.callback?.(a.localGUID,o)}catch(n){e.dispatch(k.s.error("An error occurred while applying the style to the selection.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,n),r.errorCallback?.()}};e.dispatch((0,eF.vQ)({assetLibraryKey:i.library_key,onInsertAsset:n,source:eF.jE.LOAD_STYLE}))}else d&&((0,ei.c6)(),c.Ez5.editorPreferences().showFrameGrids.set(!0)),r.callback?.(i.node_id,!1),r.bufferCallback?.(void 0)}),e3=(0,V.nF)(async(e,r)=>{let{styles:n,updateStartTime:i,subscribedLibraryKeys:a,fileSubscribedLibraryKeys:o}=r,d=e.getState().openFile;if(d)try{let r=await Promise.all(n.map(e=>Z.Eo.getCanvas(e))),s=new Set,p=e.getState();await eQ(e.dispatch,n,(e,n)=>{let o=r[n];u.l7.user("update-shared-style",()=>{c.BXd.updateSharedStyle(e.key,e.library_key,e.content_hash??l.IA.INVALID,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,o,i)}),(0,el.GA)(p.library,d,e.localIdsToUpdate,e.oldSubscribedKeysToUpdate,p.library.used__LIVEGRAPH.styles,a)&&!s.has(e.library_key)&&s.add(e.library_key)}),en.Y5.triggerAction("commit");let m=n.map(e=>e.id);(0,j.ds)("Styles Updated",p.openFile?.key,e.getState(),{styles:m}),s.size>0&&tD(e,Array.from(s),o)}catch(r){e.dispatch(k.s.error("An error occurred while updating this style.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}}),e7=(0,V.nF)((e,r)=>{let n=c.BXd.getTimestampForLibraryUpdateStart(),{styleUpdateInfo:i,oldStyleGUID:a,consumerGUIDsToUpdate:o}=r,{updateAsset:l}=i;Z.Eo.getCanvas(l).then(r=>{let i=e.getState(),{content_hash:s}=l;if(!a)throw Error("guid to update can not be empty");if(!s)throw Error("content_hash not specified on style");let d=u.l7.user("update-selected-shared-style-consumers",()=>c.BXd.updateSelectedSharedStyleConsumers(l.key,l.library_key,s,l.oldSubscribedKeysToUpdate,l.localIdsToUpdate,o,a,r,n));if(en.Y5.triggerAction("commit"),!d)throw Error("unable to update");(0,j.ds)("Styles Updated",i.openFile?.key,e.getState(),{styles:[l.id]})}).catch(r=>{e.dispatch(k.s.error("An error occurred while updating this style.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)})}),e5=(0,V.nF)((e,r)=>{let{variableSets:n,updateStartTime:i}=r;if(e.getState().openFile)return Promise.all(n.map(e=>Z.Eo.getCanvas(e))).then(r=>eQ(e.dispatch,n,(e,n)=>{let a=r[n];u.l7.user("update-shared-variable-set",()=>{c.BXd.updateSharedVariableSet(e.node_id,(0,ev.GI)(e)?[]:e.libraryVariableIdsForUpdate,a,i)})})).then(()=>{en.Y5.triggerAction("commit")}).catch(r=>{e.dispatch(k.s.error("An error occurred while updating this variable collection")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)})}),e8=(0,V.nF)((e,r)=>{let{assets:n,updateStartTime:i}=r;return Promise.all(n.map(e=>Z.Eo.getCanvas({canvas_url:e.canvasUrl}))).then(r=>eQ(e.dispatch,n,(e,n)=>{let a=r[n];if(a)u.l7.user("update-shared-library-asset",()=>{c.BXd.updateSharedLibraryAsset((0,ey.Hk)(e.type),e.assetId,e.sourceLibraryKey,a,i)});else throw Error("Missing buffer in updateSharedLibraryAssets")})).then(()=>{en.Y5.triggerAction("commit")}).catch(r=>{e.dispatch(k.s.error("An error occurred while updating this asset")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)})});async function e9(e){let r=await Z.Eo.getCanvas(e);if(!u.l7.system("upsert-shared-variable",()=>c.BXd.upsertSharedVariable(e.node_id,c.zol.NO,r)).fileUpdateRequired)return{buffer:r}}let e6=(0,V.nF)((e,r)=>{let{item:n,callback:i,bufferCallback:a,errorCallback:o}=r;if(!(0,q.d1)(e.getState())){o?.(Error("editing file not found"));return}if("LIBRARY"===n.subscriptionStatus){let r=async()=>{try{let e=await e9(n);e&&(i?.(n.node_id),a?.(e.buffer))}catch(r){e.dispatch(k.s.error("An error occurred while retrieving the variable.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),I.az.trackDefinedEvent("variables.variable_load.error",{partnerType:(0,er.X)(n.library_key)}),o?.(r)}};e.dispatch((0,eF.vQ)({assetLibraryKey:n.library_key,onInsertAsset:r,source:eF.jE.LOAD_VARIABLE}))}else i?.(n.node_id)}),te=(0,V.nF)((e,r)=>new Promise((n,i)=>{e.dispatch(e6({item:r,callback:n,errorCallback:i}))}));async function tt(e){let r=await Z.Eo.getCanvas(e);if(!u.l7.system("upsert-shared-variable-set",()=>c.BXd.upsertSharedVariableSet(e.node_id,c.zol.NO,r)).fileUpdateRequired)return{buffer:r}}(0,V.nF)((e,r)=>{let{item:n,callback:i,bufferCallback:a,errorCallback:o}=r;if((0,q.d1)(e.getState())){if("LIBRARY"===n.subscriptionStatus){let r=async()=>{try{let e=await tt(n);e&&(i?.(n.node_id),a?.(e.buffer))}catch(r){e.dispatch(k.s.error("An error occurred while retrieving the variable collection.")),(0,R.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),o?.()}};e.dispatch((0,eF.vQ)({assetLibraryKey:n.library_key,onInsertAsset:r,source:eF.jE.LOAD_VARIABLE_SET}))}else i?.(n.node_id)}});let tr=(0,V.nF)((e,r)=>{e.dispatch(K.yH({key:(0,eD.yD)(r.openFileKey)})),e.dispatch(K.yH({key:(0,el.iw)(r.openFileKey)}))}),tn=new Set,ti=new Set;function ta(){tn=new Set,ti=new Set}let to=(0,V.nF)(async e=>{let r=e.getState();r.user&&(await eh.gi,ts((0,eg.OQ)(r),(0,eg.LL)(r),e))}),ts=async(e,r,n,i)=>{if(0===e.length&&0===r.length)return;let a=n.getState().openFile;if(!a)return;let o=(i=i??(0,el.lG)(n)).loadingKey;(0,ep.VP)(n.getState().loadingState,o)&&await i.promise,n.dispatch(K.Cx({key:o})),"whiteboard"===a.editorType&&await el.kw;let s=n.getState(),l=[];if(e.length>0){let r=new Set([...(0,el.vu)(s.library.publishedByLibraryKey.components).map(e=>e.component_key),...(0,el.$j)(s.library.defaultPublished.componentsByLibraryKey).map(e=>e.component_key)]);l=e.filter(e=>!r.has(e)&&!tn.has(e))}let c=[];if(r.length>0){let e=new Set([...(0,el.vu)(s.library.publishedByLibraryKey.stateGroups).map(e=>e.key),...(0,el.$j)(s.library.defaultPublished.stateGroupsByLibraryKey).map(e=>e.key)]);c=r.filter(r=>!e.has(r)&&!ti.has(r))}try{if(l.length>0||c.length>0){let e=await D.Ay.post("/api/design_systems/components_state_groups",{component_keys:l,state_group_keys:c,org_id:a.parentOrgId});l.forEach(e=>{tn.add(e)}),c.forEach(e=>{ti.add(e)});let r=e.data.meta.components,i=e.data.meta.state_groups,o=e.data.meta.files;n.dispatch(G.uo({files:o,subscribeToRealtime:!0})),n.dispatch(H.dC({subscribedOldKeyToNewKey:e.data.meta.move_remappings,localOldGuidToNewKey:{}}));let s=f.zl.get(J.qp);tW(r,ev.PW.COMPONENT,s,n.dispatch),tW(i,ev.PW.STATE_GROUP,s,n.dispatch)}i.callbackForComponent?.(!0)}catch(e){i.callbackForComponent?.(!1)}i.resetPromise(),n.dispatch(K.yH({key:o})),i.callback()},tl=null,tc=null;async function td(e,r,n){try{let i=await eI.Z.getLibraryComponentV2({componentKey:r,source:n}),a=i.data.meta.file;a&&e.dispatch(G.yJ({file:a}));let o=i.data.meta.component||null,s=i.data.meta.component_set||null,l=f.zl.get(J.qp);if(o&&(o.team_id=l[o.library_key]?.team_id),s&&(s.team_id=l[s.library_key]?.team_id),a){let r={};r[o.node_id]=o,i.data.meta.state_components.forEach(e=>{r[e.node_id]=e}),e.dispatch((0,eB.vP)({itemsById:r,fileKey:a.key,libraryKey:(0,h.l)(a.library_key),teamId:a.team_id,type:ev.PW.COMPONENT})),i.data.meta.component_set&&e.dispatch((0,eB.vP)({itemsById:{[i.data.meta.component_set.key]:i.data.meta.component_set},fileKey:a.key,libraryKey:(0,h.l)(a.library_key),teamId:a.team_id,type:ev.PW.STATE_GROUP})),o&&Z.Eo.getCanvas(o)}return{component:o,parentStateGroup:i.data.meta.component_set||null}}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/component_v2/key");(0,O.t)("component"),console.error(e)}return{component:null,parentStateGroup:null}}}let tu=(0,V.nF)((e,r)=>{tl=r.componentKey,tc=td(e,r.componentKey,r.callsite)}),tp=null,tm=null;async function th(e,r){try{let n=(await eI.Z.getLibraryStateGroup({stateGroupKey:r})).data.meta,i={[n.node_id]:n},a=f.zl.get(J.qp)[n.library_key];if(!a)return n;return n.team_id=a.team_id,e.dispatch((0,eB.vP)({itemsById:i,fileKey:a.key,libraryKey:(0,h.l)(a.library_key),teamId:a.team_id,type:ev.PW.STATE_GROUP})),Z.Eo.getCanvas(n),n}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/state_group/key");(0,O.t)("state"),console.error(e)}return null}}async function t_(e,r){try{let{style:n,file:i}=(await eI.Z.getLibraryStyleByKey({styleKey:r})).data.meta;return i&&e.dispatch(G.yJ({file:i})),Z.Eo.getCanvas(n),n}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/styles/key");(0,O.t)("style"),console.error(e)}return null}}let tg=(0,V.nF)((e,r)=>{tp=r.stateGroupKey,tm=th(e,r.stateGroupKey)});async function tf(e){let{loadingState:r}=e.getState(),n=e.getState().openFile;if(null==n)return;let i=(0,el.Mb)((0,h.l)(n.libraryKey));if(!(0,ep.Sc)(r,i))return;let a=eI.Z.getLibraryPublishedAndMovedComponents({openFileKey:n.key});(0,e_.N)(a,{dispatch:e.dispatch},i),el.Ys.add(i);try{let r=await a;e.dispatch(G.uo({files:r.data.meta.files,subscribeToRealtime:!0})),(0,el.Ve)(n.key),(0,el.Ve)(n.libraryKey);let i=f.zl.get(J.qp);tW(r.data.meta.state_groups,ev.PW.STATE_GROUP,i,e.dispatch),tW(r.data.meta.components,ev.PW.COMPONENT,i,e.dispatch),e.dispatch(H.dC({subscribedOldKeyToNewKey:{},localOldGuidToNewKey:r.data.meta.move_remappings}))}catch(e){console.warn("Failed to get published and moved components for editing file")}(0,el._B)()}let tE=eu.M4.Query({fetch:async e=>(await eS.PT.getOrgMigrationStatus({orgId:e})).data.meta,enabled:e=>!!e}),ty=eu.M4.Query({fetch:async e=>await tb(w.D.dispatch,e),key:"libraryStats"}),tb=async(e,r)=>{let n=eS.PT.getLibraries({orgId:r,fv:eb.O}),i=function(e){return`LIBRARY${e?"_"+e:""}'_STATS'`}(r);(0,e_.N)(n,{dispatch:e},i);try{let r=await n,i=r&&r.data&&r.data.meta||[],a=0,o=0,s=0,l=0,c=0,d=0,u=0,p=0,m=[],h=[],_=new Set,g={};for(let e of i)(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(e.team_id&&!_.has(e.team_id)&&(_.add(e.team_id),u++),m.push(e),h.push(e.file),e.thumbnail_url&&(g[e.library_key]=e.thumbnail_url),a+=e.num_components,s+=e.num_styles,l+=e.num_variable_collections,c+=e.num_variables,e.num_state_groups=0,o+=e.num_state_groups,d+=e.num_module_assets,p++);return h.length>0&&e(G.uo({files:h,subscribeToRealtime:!1})),{totalComponents:a,totalStateGroups:o,totalStyles:s,totalVariableCollections:l,totalVariables:c,totalModuleAssets:d,teamsWithLibraries:u,totalLibraries:p,files:m,libraryThumbnailByLibraryKey:g}}catch(e){return ev.wg}},tv=eu.M4.Query({fetch:e=>tS(e),key:"libraryInfo"}),tT=eu.M4.Query({fetch:async e=>(await eI.Z.getLibrariesV2(e)).data.meta??[],key:"libraryInfoV2"});function tI(e,r={}){let n=(0,eu.IT)(tv(e),r),i=(0,a.wA)(),[o]=n,s=(0,f.Xr)(es.qU);return(0,L.DC)(o,e=>{let r=e.files.map(e=>e.file);r.length>0&&i(G.uo({files:r,subscribeToRealtime:!1})),s(e.files.map(e=>(0,eo.E)(e)))}),n}let tS=(0,eM.D)(async({currentOrgId:e,excludeDrafts:r,subscriptionFileKey:n,includeThumbnails:i,includeSharingGroupInfo:a})=>{let o=eI.Z.getLibraries({orgId:e,subscriptionFileKey:n||void 0,includeThumbnails:i,includeSharingGroupInfo:a});try{let e=await o,n=e&&e.data&&e.data.meta||[],a=0,s=0,l=0,c=0,d=0,u=0,p=0,m=0,h=[],_=[],g=new Set,f={};for(let e of n)e.num_state_groups=0,(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(!r||e.team_id)&&(e.team_id&&!g.has(e.team_id)&&(g.add(e.team_id),p++),h.push(i?{...e,thumbnail_url:e.file.thumbnail_url}:e),_.push(e.file),e.thumbnail_url&&(f[e.library_key]=e.thumbnail_url),a+=e.num_components,l+=e.num_styles,c+=e.num_variable_collections,d+=e.num_variables,s+=e.num_state_groups,u+=e.num_module_assets,m++);return{totalComponents:a,totalStateGroups:s,totalStyles:l,totalVariableCollections:c,totalVariables:d,totalModuleAssets:u,teamsWithLibraries:p,totalLibraries:m,files:h,libraryThumbnailByLibraryKey:f}}catch(e){return{...ev.wg}}});function tw(e){return(0,h.l)(e.libraryKey||"")}function tA(e,r,n){if(!r||!n)return;r=r.filter(e=>e.library||e.communityLibrary),n=n.filter(e=>e.library||e.communityLibrary);let i=v()(r,tw);for(let r of n){let n=tw(r),a=i[n];a&&a.isSubscribed===r.isSubscribed&&a.figJamSubscribed===r.figJamSubscribed&&a.slidesSubscribed===r.slidesSubscribed||e.dispatch((0,ex.F$)({libraryKey:n,subscriptions:{design:!!r.isSubscribed,figjam:!!r.figJamSubscribed,slides:!!r.slidesSubscribed}}))}}function tC(e,r,n){tA(e,r?.map(tN),n?.map(tN))}let tN=e=>({...e}),tL=function(){let e=(0,a.Pj)(),r=(0,Y.n1)(),n=(0,ec.LH)(),{data:o}=(0,N.Rs)(ed.Lew,{}),s=(0,C.ZC)(o);(0,i.useEffect)(()=>{if(!s||!o)return;let r=o?.currentUser?.libraryUserSubscriptions;tC(e,s?.currentUser?.libraryUserSubscriptions,r)},[e,o,s]);let l=(0,ee.Nn)(),c=(0,C.ZC)(l);(0,i.useEffect)(()=>{if(!l||!c)return;let r=(0,ee.sj)(l);tA(e,(0,ee.sj)(c),r)},[e,l,c]);let{data:d}=(0,N.Rs)(ed.AXx,{orgId:n},{enabled:!!n}),u=(0,C.ZC)(d);(0,i.useEffect)(()=>{if(!u||!d)return;let r=d?.orgLibrarySubscriptions;tC(e,u?.orgLibrarySubscriptions,r)},[e,d,u]);let p=(0,ef.cD)(),m=(0,N.Rs)(ed.f19,{}),{data:h}=(0,i.useMemo)(()=>m.transform(e=>{let i=(e.allTeamRoles||[]).filter(e=>e.team&&!e.team.deletedAt&&(e.team.orgId===n||e.team.id===p)).map(e=>e.team),a={};for(let e of i){let n=e.libraryTeamSubscriptionOverrides.map(tN).filter(e=>r||!e.communityLibrary);a[e.id]=n}return a}),[r,n,p,m]),_=(0,C.ZC)(h);(0,i.useEffect)(()=>{_&&h&&tA(e,Object.values(_).flat(),Object.values(h).flat())},[e,h,_])},tO=(0,V.nF)(async e=>{if(await eE.kb.promise,!e.getState().user)return;let r=Promise.resolve(null),n=Promise.resolve(null),i=Promise.resolve(null);try{await Promise.all([r,i,n])}catch(e){}});async function tR(e){if(!e)return 0;try{return(await eS.PT.getNumTeams({orgId:e})).data.meta.num_teams}catch(e){}return 0}let tP=(0,T.NC)("ADD_ASSET_TO_RECENTS"),tD=(e,r,n)=>{let i=e.getState(),a=i.openFile?.key||null,o=i.openFile?.libraryKey||null;a&&r.forEach(r=>{r!==o&&e.dispatch((0,ex.am)({libraryFileSubscription:{file_key:a,library_key:r,is_subscribed:!0},userInitiated:!0,fileSubscribedLibraryKeys:n}))})},tM="LIBRARY_REMAPPING_PROGRESS_VISUAL_BELL",tk=null,tF=(0,V.nF)((e,r)=>{tk={done:0,total:r.total},e.dispatch(U.F.enqueue({message:(0,F.t)("design_systems.subscriptions.remap_connecting_fraction",{current:0,total:r.total}),type:tM,icon:B.zX.SPINNER,timeoutOverride:1/0}))}),tU=(0,V.nF)((e,r)=>{tk&&(tk.done+=r.done,e.dispatch(U.F.enqueue({message:(0,F.t)("design_systems.subscriptions.remap_connecting_fraction",{current:tk.done,total:tk.total}),type:tM,icon:B.zX.SPINNER,timeoutOverride:1/0})))}),tB=(0,V.nF)(e=>{tk=null,e.dispatch(U.F.dequeue({matchType:tM})),e.dispatch(U.F.enqueue({message:(0,F.t)("design_systems.subscriptions.remap_connected"),type:tM,icon:B.zX.CHECK}))}),tV=(0,V.nF)(e=>{tk=null,e.dispatch(U.F.enqueue({message:(0,F.t)("design_systems.subscriptions.remap_connection_failed"),type:tM,error:!0}))}),tG=(0,V.nF)(e=>{e.getState().userFlags.has_inserted_component||e.dispatch($.b({has_inserted_component:!0}))}),tH=(0,V.nF)(e=>{e.getState().userFlags.has_opened_libraries_modal||e.dispatch($.b({has_opened_libraries_modal:!0}))}),tK=(0,x.fv)();function tW(e,r,n,i){for(let[a,o]of(e=e.map(e=>({...e,team_id:n[e.library_key]?.team_id})),Object.entries(y()(e,e=>e.library_key)))){let e=(0,h.l)(a);i((0,eB.vP)({itemsById:v()(o,e=>e.node_id),fileKey:tK(o[0]),libraryKey:e,teamId:n[e]?.team_id??null,type:r}))}}},32371:(e,r,n)=>{n.d(r,{c:()=>f});var i=n(701780),a=n(442313),o=n(983504),s=n(697714),l=n(8374),c=n(926252),d=n(323075),u=n(992444),p=n(45584),m=n(870769),h=n(881473),_=n(413495);let g="\x3c!--(figcomponent)";(0,l.nF)((e,r)=>{let n=r.dataTransfer?.getData("text/html");if(n){let a=n.indexOf(g)+g.length,o=n.indexOf("(/figcomponent)--\x3e");if(a>=0&&o>=0&&a<o){let s=n.substring(a,o).trim();try{let n=JSON.parse(s);if("object"==typeof n){let a=n.fileKey,o=n.nodeId;if(a&&o){let n=u.Y5.getViewportInfo(),s=new i.Mi(n.x,n.y),l=new i.Mi(r.clientX,r.clientY).subtract(s),c=(0,p.$$)(n,l);e.dispatch(f({fileKey:a,nodeId:o,canvasX:c.x,canvasY:c.y}))}}}catch(e){}}}});let f=(0,l.nF)(async(e,r)=>{let{fileKey:n,nodeId:l,canvasX:u,canvasY:p}=r,g=e.getState(),f=(0,d.d1)(g),E=null;if(f&&f.key===n)E=g.library.local.components[l]??null;else{g.fileByKey[n]||(await e.dispatch((0,_.n)({libraryKey:(0,o.$)(n)})),g=e.getState());let r=g.fileByKey[n],i=r?(0,h.l)(r):void 0;!i||(E=(0,m.HK)(g.library.publishedByLibraryKey.components,i)[l]??null)||(await e.dispatch((0,_.n)({libraryKey:(0,o.$)(n)})),g=e.getState(),E=(0,m.HK)(g.library.publishedByLibraryKey.components,i)[l]??null)}E?e.dispatch(c.Yf({item:E,canvasPosition:new i.Mi(u,p),percentageOffset:new i.Mi(.5,.5),insertAsChildOfCanvas:!1})):e.dispatch(s.F.enqueue({type:"insert_component_error",message:(0,a.t)("design_systems.subscriptions.this_component_is_not_available"),error:!0}))})},721271:(e,r,n)=>{n.d(r,{F$:()=>I,am:()=>S,fR:()=>w,nE:()=>A});var i=n(992277),a=n(741419),o=n(579020),s=n(858423),l=n(502255),c=n(442313),d=n(697714),u=n(8374),p=n(341550),m=n(323075),h=n(870769),_=n(112814),g=n(264917),f=n(931516),E=n(962559),y=n(919699),b=n(413495);let v="file_key_optimistic_update",T="hub_file_id_optimistic_update",I=(0,u.nF)((e,{libraryKey:r,subscriptions:n})=>{if(!n||(0,h.td)(e.getState().library.defaultPublished,r))return;let i=(0,m.d1)(e.getState());if(i){let o=i.editor_type??"design";(!0===n||"design"===o&&n.design||"whiteboard"===o&&n.figjam)&&(e.getState().leftPanel.activeTab===a.xae.ASSETS||e.getState().universalInsertModal.showing?e.dispatch((0,b.n)({libraryKey:r})):e.dispatch(p.yH({key:(0,y.yD)(i.key)})))}}),S=(0,u.nF)(async(e,r)=>{let{libraryFileSubscription:n,userInitiated:a,publishedLibrary:o,fileSubscribedLibraryKeys:u}=r,{file_key:p,is_subscribed:m,id:h,library_key:_}=n,g=e.getState().openFile?.key||null;if(g===p&&e.dispatch(I({libraryKey:_,subscriptions:m})),u.has(_)&&m||!a)return;let y=E.A.postFileSubscriptionByLibraryKey({libraryKey:_,fileKey:p,isSubscribed:m});h?s.WB()?.optimisticallyUpdate({LibraryFileSubscription:{[h]:{isSubscribed:m}}},y):m&&o&&s.WB()?.optimisticallyCreate({LibraryFileSubscription:{[`optimistic-id-${_}`]:{isSubscribed:m,fileKey:p,hubFileId:T,libraryKey:_??null,libraryFileKey:v,canRead:!0,library:{updatedAt:new Date,createdAt:new Date,numComponents:o.num_components,numStateGroups:o.num_state_groups??0,numStyles:o.num_styles,numStylesFill:0,numStylesText:0,numStylesEffect:0,numStylesGrid:0,numVariables:o.num_variables,numVariablesBoolean:0,numVariablesColor:0,numVariablesFloat:0,numVariablesString:0,numLibraryAssets:0,numVariableSets:o.num_variable_collections,numModuleAssets:o.num_module_assets,hasAssets:!1,fileKey:v,file:{_id:`optimistic-id-${v}`,_name:null,key:v,name:o.library_name,libraryKey:o.library_key,signedThumbnailUrl:o.thumbnail_url,signedThumbnailUrlOverride:null,thumbnailUrl:o.thumbnail_url,thumbnailUrlOverride:null,parentOrgId:null,thumbnailGuid:f.Nf(o)?o.thumbnail_guid:null},hubFileId:T,canRead:!0},communityLibrary:null}}},y);try{await y}catch(r){e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),(0,l.$D)(i.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{openFileKey:g,fileKey:p,libraryKey:_,isSubscribed:m}})}}),w=(0,u.nF)(async(e,r)=>{let{libraryUserSubscription:n,userInitiated:a,existingSubscription:s}=r,{library_key:u,subscriptions:p}=n;if(e.dispatch(I({libraryKey:u,subscriptions:p})),!a)return;let m={libraryKey:u,userId:e.getState().user?.id,library:{libraryKey:u,fileKey:v}},h=E.A.postUserSubscriptionByLibraryKey({libraryKey:u,subscriptions:p});(0,_.J)(s,g.Qh.USER,p.design,p.figjam,p.slides,m,h);try{if(!u)throw Error("Library key is required for user subscription");await h,o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,subscriptionType:"user",outcome:"success"})}catch(r){e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,subscriptionType:"user",outcome:"error"}),(0,l.$D)(i.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{libraryKey:u,designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides}})}}),A=(0,u.nF)(async(e,r)=>{let{libraryTeamSubscription:n,userInitiated:a,existingSubscription:s}=r,{library_key:u,subscriptions:p,team_id:m}=n;if(e.dispatch(I({libraryKey:u,subscriptions:p})),!a)return;let h=E.A.postTeamSubscriptionByLibraryKey({libraryKey:u,subscriptions:p,teamId:m});(0,_.J)(s,g.Qh.TEAM,p.design,p.figjam,p.slides,{libraryKey:u,teamId:m,library:{libraryKey:u,fileKey:v,hubFileId:T}},h);try{if(!u)throw Error("Team subscription requires a library key");await h,o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,subscriptionType:"team",outcome:"success"})}catch(r){e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,subscriptionType:"team",outcome:"error"}),(0,l.$D)(i.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{libraryKey:u,designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides}})}});(0,u.nF)(async(e,r)=>{let{libraryWorkspaceSubscription:n,libraryName:i,workspaceName:a}=r,{libraryKey:o,subscriptions:l,workspaceId:u}=n,p=E.A.postWorkspaceSubscriptionByLibraryKey({libraryKey:o,subscriptions:l,workspaceId:u});n.id?(0,s.WB)().optimisticallyUpdate({LibraryWorkspaceSubscription:{[n.id]:{isSubscribed:l.design,figJamSubscribed:l.figjam,slidesSubscribed:l.slides}}},p):(0,s.WB)().optimisticallyCreate({LibraryWorkspaceSubscription:{[`library-workspace-sub-${performance.now()}`]:{fileKey:v,workspaceId:u,libraryKey:o,isSubscribed:l.design,figJamSubscribed:l.figjam,slidesSubscribed:l.slides,canRead:!0,hubFileId:T}}},p);try{await p,e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.settings_updated_for",{libraryName:i,orgOrWorkspaceName:a})}))}catch(r){e.dispatch(d.F.enqueue({message:r?.message??(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),(0,u.nF)(async(e,r)=>{let{libraryWorkspaceSubscription:n,libraryName:i,workspaceName:a}=r,{libraryKey:o,workspaceId:l}=n,u=E.A.deleteWorkspaceSubscriptionByLibraryKey({libraryKey:o,workspaceId:l});n.id&&(0,s.WB)().optimisticallyDelete({LibraryWorkspaceSubscription:{[n.id]:null}},u);try{await u,e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.settings_updated_for",{libraryName:i,orgOrWorkspaceName:a})}))}catch(r){e.dispatch(d.F.enqueue({message:r?.message??(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),(0,u.nF)(async(e,r)=>{let{libraryOrgSubscription:n,libraryTeamId:a,userInitiated:s}=r,{orgId:u,subscriptions:p,libraryKey:m}=n;if(e.dispatch(I({libraryKey:m,subscriptions:p})),s){if(r.currentSubscription){let e=n.subscriptions.design;!(r.currentSubscription?.design||r.currentSubscription?.figjam)&&e?(0,o.sx)("Org Library File Enabled",{orgId:u,libraryKey:m,fileTeamId:a}):(0,o.sx)("Org Library File Disabled",{orgId:u,libraryKey:m,fileTeamId:a}),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle",{designSubscribed:n.subscriptions.design,figjamSubscribed:n.subscriptions.figjam,slidesSubscribed:n.subscriptions.slides,subscriptionType:"org"})}try{await E.A.postOrgSubscriptionByLibraryKey({libraryKey:n.libraryKey,subscriptions:p,orgId:u}),e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.settings_updated_for",{libraryName:r.libraryName,orgOrWorkspaceName:r.orgName})})),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:n.subscriptions.design,figjamSubscribed:n.subscriptions.figjam,slidesSubscribed:n.subscriptions.slides,subscriptionType:"org",outcome:"success"})}catch(r){e.dispatch(d.F.enqueue({message:(0,c.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:n.subscriptions.design,figjamSubscribed:n.subscriptions.figjam,slidesSubscribed:n.subscriptions.slides,subscriptionType:"org",outcome:"error"}),(0,l.$D)(i.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{libraryKey:n.libraryKey,designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides}})}}})},131862:(e,r,n)=>{n.d(r,{Nf:()=>u,aW:()=>m,vP:()=>p});var i=n(992277),a=n(157907),o=n(502255),s=n(8374),l=n(193607),c=n(870769),d=n(931516);let u=(0,s.nF)(e=>{(0,c.KQ)(e)}),p=(0,s.nF)((e,r)=>{e.dispatch(l.$I(r)),e.getState().openFile&&e.dispatch(u()),!r.libraryKey&&(0,a.k)().dse_lk_realtime_audit&&(0,o.$D)(i.e.DESIGN_SYSTEMS_ECOSYSTEM,Error("putProductComponents called without a libraryKey"),{tags:{libraryFileKey:r.fileKey,openFileKey:e.getState().openFile?.key,teamId:r.teamId,type:r.type}})}),m=(0,s.nF)((e,r)=>{let{stateGroups:n,components:i,fileKeyOrHubFileId:a,libraryKey:o,teamId:s}=r;if(0!==n.length){let r=n.reduce((e,r)=>(e[r.node_id]=r,e),{});e.dispatch(p({itemsById:r,fileKey:a,libraryKey:o,teamId:s??null,type:d.PW.STATE_GROUP}))}if(0!==i.length){let r=i.reduce((e,r)=>(e[r.node_id]=r,e),{});e.dispatch(p({itemsById:r,fileKey:a,libraryKey:o,teamId:s??null,type:d.PW.COMPONENT}))}})},825619:(e,r,n)=>{n.d(r,{De:()=>X,Sb:()=>Y,TS:()=>Z,WM:()=>q,ZS:()=>eo,df:()=>j,iA:()=>ea,sb:()=>ee});var i=n(445777),a=n(988520),o=n(992277),s=n(741419),l=n(206651),c=n(157907),d=n(115321),u=n(223926),p=n.n(u),m=n(611504),h=n(579020),_=n(389191),g=n(427193),f=n(408095),E=n(502255),y=n(896966),b=n(963376),v=n(442313),T=n(833480),I=n(959334),S=n(697714),w=n(164963),A=n(8374),C=n(193607),N=n(449737),L=n(405866),O=n(323075),R=n(673481),P=n(561298),D=n(895927),M=n(870769),k=n(954633),F=n(158349),x=n(778727),U=n(922030),B=n(395614),V=n(931516),G=n(175334),H=n(223291),K=n(253305),W=n(307),z=n(205917),$=n(131862);let Y=(0,m.NC)("START_PUBLISH"),j=(0,m.NC)("PUBLISH_PROGRESS"),q=(0,m.NC)("PUBLISH_REQUEST_FINISHED"),X=(0,m.NC)("SAVE_PUBLISH_DESCRIPTION"),Z=(0,A.nF)(e=>{e.dispatch(I.Q.dequeue({type:T._.MOVE_COMPONENTS_PROMPT})),(0,b.YQ)({id:"Finished publishing components"}),e.dispatch(q())}),J="library publish SSP";var Q=(e=>(e.PublishStart="publish_start",e.CreateSavepoint="create_savepoint",e.GetPresignedPost="get_presigned_post",e.UploadThumbnails="upload_thumbnails",e.UploadParams="upload_params",e.AssetValidation="asset_validation",e.NonS3Error="non_s3_error",e.GenericError="generic_error",e))(Q||{});let ee=(0,A.nF)((e,{hubFileId:r,localAssetsWithDenormalizedPublishInfo:n})=>{let i=e.getState(),a=(0,c.k)().ds_remove_redux_library_status;if(!a){let r=e=>{for(let r in e={...e})(0,M.HF)(e[r].status)?e[r].status=V.E8.DELETED:e[r].status===V.E8.NEW&&(e[r].status=V.E8.NOT_STAGED);return e},n=r(i.library.local.components),a=r(i.library.local.stateGroups),o=r(i.library.local.styles);e.dispatch(C.I0({local:n,type:V.PW.COMPONENT})),e.dispatch(C.I0({local:a,type:V.PW.STATE_GROUP})),e.dispatch(C.I0({local:o,type:V.PW.STYLE}))}e.dispatch(j({state:V.Qx.NONE})),e.dispatch(eo({unpublishAll:a,hubFileId:r,localAssetsWithDenormalizedPublishInfo:n}))});async function et(e,r,n,i){let a=new g.jk("publish.client.generate_and_upload_thumbnails",{});if(a.start(),!e.length)return{s3Paths:[],failedThumbnailNodeIds:[],styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let s=e.length,l=0,d=()=>{!function(e,r,n){e.dispatch(j({state:V.Qx.ASSEMBLING_COMPONENTS,progress:r,publishType:n,publishStartMs:er(e.getState().library.publishProgress)}))}(i,(l+=1)/s,r?V.M$.UNPUBLISH:V.M$.PUBLISH)},u=Object.create(null),p=[],m=[];if(await Promise.all(e.map(async e=>{try{let r=await scheduler.postTask(()=>(0,W.I6)(e,n),{priority:"user-blocking"});if(!r||0===r.length)throw Error("Unable to generate thumbnail");let[i,a]=e.node_id.split(":").map(e=>Number(e));if(isNaN(i))throw Error("Unable to parse sessionId");if(isNaN(a))throw Error("Unable to parse localId");m.push({sessionId:i,localId:a,thumbnail:r}),e.type===V.PW.STYLE&&(u[e.node_id]=JSON.stringify((0,W.fn)(e,n)))}catch(r){(0,y.x1)("publish","Failed to upload thumbnail for asset",{guid:e.node_id},{reportAsSentryError:!0}),p.push(e.type===V.PW.COMPONENT&&e.containing_frame?.containingStateGroup?.nodeId||e.node_id)}finally{d()}})),0===m.length||(0,c.k)().ssp_stop_client_gen_thumb_generation)return{s3Paths:[],failedThumbnailNodeIds:p,styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let b=[];for(;m.length;)b.push(m.splice(0,V.v$));let v=K.b.getThumbnailsBufferPresignedPostUrl(b.length),T=b.map(e=>e.reduce(({buffer:e,offset:r,guids:n},{sessionId:i,localId:a,thumbnail:o})=>(e.set([(0xff000000&i)>>24,(0xff0000&i)>>16,(65280&i)>>8,255&i,(0xff000000&a)>>24,(0xff0000&a)>>16,(65280&a)>>8,255&a,(0xff000000&o.byteLength)>>24,(0xff0000&o.byteLength)>>16,(65280&o.byteLength)>>8,255&o.byteLength],r),r+=12,e.set(o,r),r+=o.byteLength,n.push(`${i}:${a}`),{buffer:e,offset:r,guids:n}),{buffer:new Uint8Array(e.reduce((e,{thumbnail:r})=>e+r.byteLength+12,0)),offset:0,guids:[]})),I=[],S=(await v).data.meta.presigned_posts,w=!1;await Promise.allSettled(S.map(async({url:e,fields:r})=>{let n=T.shift();if(!n){(0,E.$D)(o.e.DESIGN_SYSTEMS_EDITOR,Error("Popped a concatenated buffer that does not exist"));return}try{I.push(await (0,f.ET)(o.e.DESIGN_SYSTEMS_EDITOR,"uploadThumbnails",e,r,n.buffer,"application/octet-stream")),(0,_.S3)("publish.thumbnails_buffer.bytes",n.buffer.byteLength)}catch(e){e instanceof f.qW&&(w=!0),p.push(...n.guids)}})),w&&(0,E.$D)(o.e.DESIGN_SYSTEMS_EDITOR,Error("uploadThumbnails: encountered non-S3 presigned POST error"));let A=a.stop();return A&&(0,h.sx)("Library generate and upload thumbnails",{elapsedMs:A,duration:A},{forwardToDatadog:!0}),{s3Paths:I,styleMetaByNodeId:u,failedThumbnailNodeIds:p,uploadDurationMs:A,encounteredNonS3PresignedPostError:w}}function er(e){return e.state===V.Qx.NONE?((0,y.x1)(J,"Attempted to update progress while not assembling components",e),null):e.publishStartMs}function en(e,r,n,i){let a=er(e);if(a){let e=performance.now()-a;(0,h.sx)(r,{duration:e}),(0,_.S3)(n,e,{error:i})}else(0,y.x1)(J,"Publish start time was null")}let ei=async e=>{let r;if((0,c.k)().first_draft_publish_ux&&(e.publishAsFirstDraftKit||e.unpublishAll)){let n=s.XJn.getLocalDesignSystemKits();if(n.length>1)(0,y.xi)("first_draft","Attempting to publish a file with multiple kits",{kitNames:n.map(e=>e.name)});else if(1===n.length){let i=n[0];if(!i){(0,y.xi)("first_draft","No kit found for publishing",{kits:n});return}r=await (0,P.Hj)(i.pageId,i.name,{publishType:D.tf.LIBRARY_TYPE_INFO_UPDATE},e.firstDraftVariablesForTheme,e.unpublishAll)}}return r},ea=(0,A.nF)(async(e,r={})=>{let n=e.getState(),i=(0,O.d1)(n),a=i?.key;if(!a){(0,y.xi)("first_draft","No file key found for publishing");return}let o=S.F.enqueue({type:"first-draft-publish",message:"Publishing changes...",icon:w.zX.SPINNER}),s=S.F.enqueue({type:"first-draft-publish",message:"Changes published",icon:w.zX.CHECK}),l=S.F.enqueue({type:"first-draft-publish",message:"Failed to publish changes",icon:w.zX.EXCLAMATION,error:!0});e.dispatch(N.Ce()),e.dispatch(o);let c=await ei(r);if(!c){(0,y.xi)("first_draft","No kit metadata found for publishing"),e.dispatch(l);return}try{await H.Gh.postFirstDraftUpdateMetadata({fileKey:a,publishMetadata:c}),e.dispatch(s)}catch(r){(0,y.xi)("first_draft","Failed to publish changes",{error:r}),e.dispatch(l)}}),eo=(0,A.nF)(async(e,r={})=>{let n,u,m,b,T,I,S;let A=e.getState(),C=r.onPublishSuccess??z.cc,H=r.onPublishProgress??z.UN,K=r.onPublishError??z.tZ;r.publishingMode&&r.publishingMode!==A.library.libraryPublishingMode&&(0,y.x1)(J,"Publishing Mode does not match Redux state, and this will cause downstream errors.",{desiredPublishingMode:r.publishingMode,reduxLibraryPublishingMode:A.library.libraryPublishingMode});let q=r.localAssetsWithDenormalizedPublishInfo??{};if(A.library.publishProgress.state!==V.Qx.NONE){e.dispatch(Z());return}let Q=(0,O.d1)(A);if(!Q){console.error("library publishChanges: file is null"),K({error:z.jO.NoFile,dispatch:e.dispatch}),e.dispatch(Z());return}let ee=r.itemsToPublish;if(void 0!==ee&&0===ee.size){console.error("No items selected to publish"),K({error:z.jO.NoItemsToPublish,dispatch:e.dispatch}),e.dispatch(Z());return}let ei=[V.PW.CODE_COMPONENT,V.PW.RESPONSIVE_SET].every(e=>!(0,B.O)(e)||(0,k.aB)(Object.values(q).filter(r=>r.type===e),ee)),ea=r.unpublishAll||(0,k.aB)(Object.values((0,x.MH)(A)),ee)&&(0,k.aB)(Object.values((0,x.dM)(A)),ee)&&(0,k.aB)(Object.values((0,x.cM)(A)),ee)&&(0,k.aB)(Object.values((0,x.bh)(A)),ee)&&(!(0,B.O)(V.PW.MODULE)||(0,k.aB)(Object.values((0,x.x6)(A)),ee))&&ei;(0,_.Rh)(`${ea?V.M$.UNPUBLISH:V.M$.PUBLISH}.start`),e.dispatch(Y({unpublishAll:!!ea})),e.dispatch(L.b({has_published_library_items:!0}));let eo=(n,i,a,o)=>{e.dispatch((0,$.Nf)());let l=o?.encounteredNonS3PresignedPostError?"non_s3_error":i;en(e.getState().library.publishProgress,n,`${ea?V.M$.UNPUBLISH:V.M$.PUBLISH}.error.duration`,l);let c=o?.error;(0,y.x1)(J,n,{...r,name:c?.name,message:c?.message,stack:c?.stack},{logToConsole:s.NUh.ALWAYS,reportAsSentryError:!0,forwardToDatadog:!0}),null!==a&&(0,h.sx)("Publish ended",{savepointId:a,hadException:!0}),function(e,r,n,i,a,o,s,l){0===r?function(e,r,n,i){if(r.state===V.Qx.UPLOADING){let e=er(r);if(e){let i=performance.now(),a=i-e,o=n?{totalDurationMs:a}:{totalDurationMs:a,uploadBuffersDurationMs:i-r.commitUpdatesDurationMs,clientPreWorkDurationMs:r.clientPreWorkDurationMs,createSavePointDurationMs:r.createSavePointDurationMs};for(let[e,n]of((0,h.sx)(`Client perceived ${r.publishType} duration`,o),Object.entries(o))){let i=`${r.publishType}.success.${e}`;(0,_.S3)(i,n)}}else(0,y.x1)(J,"Publish start time was null")}i({publishProgress:r,publishType:n?V.M$.UNPUBLISH:V.M$.PUBLISH,dispatch:e}),e(X(""))}(i,e,n,a):function(e,r,n,i,a,o,s){let l=i?V.M$.UNPUBLISH:V.M$.PUBLISH;if(o&&e(X(o)),s){a({error:z.jO.NonS3PresignedPost,publishType:l,dispatch:e});return}"number"!=typeof n?a({error:z.jO.GenericError,publishType:l,dispatch:e}):(en(r,"Partial publish failure",`${l}.partial_error.duration`,"asset_validation"),a({error:z.jO.PartialPublish,publishType:l,dispatch:e,numPublishSkippedDueToError:n}))}(i,e,r,n,o,s,l)}(e.getState().library.publishProgress,o?.numSkippedDueToError??{__tag:"UNKNOWN"},ea,e.dispatch,C,K,r.savepointDescription,o?.encounteredNonS3PresignedPostError),e.dispatch(Z());let{hideModalOnPublishRequestFinish:d=!0}=r;d&&e.dispatch(N.Ce())},es=(0,k.jx)((0,x.dM)(A),(0,x.MH)(A),(0,x.cM)(A),(0,x.tK)(A),(0,x.bh)(A),(0,x.x6)(A),q,Q,A.teams,{overridePublishPermissions:!!r.hubFileId,moveRemappings:r.moveInformation?.moveRemappings??{},itemsToPublish:ee,forcePublish:r.forcePublish,unpublishAll:r.unpublishAll});if((0,c.k)().ds_ssp_thumbnailing_for_text_styles_client_prep){!function(e){let r=new g.jk("publish.client.prep_nodes_for_thumbnailing",{});r.start();let n=e[V.PW.STYLE][V.M$.PUBLISH].filter(e=>e.style_type===l.s4.TEXT);n.forEach(e=>{s.glU.prepNodeForAssetThumbnailRendering(e.node_id)});let i=r.stop();i&&(0,h.sx)("Prepared node fields used for thumbnail rendering",{elapsedMs:i,textStylesCount:n.length},{forwardToDatadog:!0})}(es);let e=(0,c.k)().ds_ssp_thumbnailing_client_prep_wait_extra_frames?10:2;for(let r=0;r<e;r++)await (0,d.yQ)()}let el=performance.now(),ec="slides"===Q.editor_type,ed=ec?(0,v.t)("design_systems.publish_actions.savepoint_for_unpublish_slides"):(0,v.t)("design_systems.publish_actions.savepoint_for_unpublish"),eu=ec?(0,v.t)("design_systems.publish_actions.savepoint_for_publish_slides"):(0,v.t)("design_systems.publish_actions.savepoint_for_publish");try{n=await (0,F.m)(Q.key,ea?ed:eu,r.savepointDescription,e.dispatch,!0)}catch(r){navigator.onLine?eo("Unable to create savepoint during library publish","create_savepoint",null,{error:r}):(K({error:z.jO.Offline,publishType:ea?V.M$.UNPUBLISH:V.M$.PUBLISH,dispatch:e.dispatch}),e.dispatch(Z()));return}if(!n){eo("Created savepoint is null","create_savepoint",null);return}let ep=performance.now()-el;(0,h.sx)("Publish start: savepoint successfully created",{savepointId:n.id});let em=p()(Object.values(A.library.local.components).filter(e=>e.isLocal),e=>(0,M.E2)(e)||V.Nv),eh=(0,U.H7)(A),{orderedUpdates:e_}=function(e){let r=[],n=e=>{e.assets.length&&r.push(e)},i=e[V.PW.VARIABLE_SET][V.M$.PUBLISH];n({publishType:V.M$.PUBLISH,assetType:V.PW.VARIABLE_SET,assets:i}),n({publishType:V.M$.UNPUBLISH,assetType:V.PW.VARIABLE_SET,assets:e[V.PW.VARIABLE_SET][V.M$.UNPUBLISH]}),n({publishType:V.M$.UNPUBLISH,assetType:V.PW.VARIABLE,assets:e[V.PW.VARIABLE][V.M$.UNPUBLISH]});let a=e[V.PW.STATE_GROUP][V.M$.PUBLISH],o=e[V.PW.COMPONENT][V.M$.UNPUBLISH].filter(e=>null===(0,M.E2)(e));return n({publishType:V.M$.PUBLISH,assetType:V.PW.STATE_GROUP,assets:a}),n({publishType:V.M$.UNPUBLISH,assetType:V.PW.STATE_GROUP,assets:e[V.PW.STATE_GROUP][V.M$.UNPUBLISH]}),n({publishType:V.M$.PUBLISH,assetType:V.PW.COMPONENT,assets:e[V.PW.COMPONENT][V.M$.PUBLISH].filter(e=>!(0,M.E2)(e))}),n({publishType:V.M$.UNPUBLISH,assetType:V.PW.COMPONENT,assets:o}),n({publishType:V.M$.PUBLISH,assetType:V.PW.STYLE,assets:e[V.PW.STYLE][V.M$.PUBLISH]}),n({publishType:V.M$.UNPUBLISH,assetType:V.PW.STYLE,assets:e[V.PW.STYLE][V.M$.UNPUBLISH]}),(0,B.O)(V.PW.MODULE)&&(n({publishType:V.M$.PUBLISH,assetType:V.PW.MODULE,assets:e[V.PW.MODULE][V.M$.PUBLISH]}),n({publishType:V.M$.UNPUBLISH,assetType:V.PW.MODULE,assets:e[V.PW.MODULE][V.M$.UNPUBLISH]})),(0,B.O)(V.PW.RESPONSIVE_SET)&&(n({publishType:V.M$.PUBLISH,assetType:V.PW.RESPONSIVE_SET,assets:e[V.PW.RESPONSIVE_SET][V.M$.PUBLISH]}),n({publishType:V.M$.UNPUBLISH,assetType:V.PW.RESPONSIVE_SET,assets:e[V.PW.RESPONSIVE_SET][V.M$.UNPUBLISH]})),(0,B.O)(V.PW.CODE_COMPONENT)&&(n({publishType:V.M$.PUBLISH,assetType:V.PW.CODE_COMPONENT,assets:e[V.PW.CODE_COMPONENT][V.M$.PUBLISH]}),n({publishType:V.M$.UNPUBLISH,assetType:V.PW.CODE_COMPONENT,assets:e[V.PW.CODE_COMPONENT][V.M$.UNPUBLISH]})),{orderedUpdates:r}}(es),eg=e_.reduce((e,{publishType:r,assetType:n,assets:a})=>{let o="";switch(n){case V.PW.COMPONENT:o="numComponentBuffers";break;case V.PW.STATE_GROUP:o="numStateGroupBuffers";break;case V.PW.STYLE:o="numStyleBuffers";break;case V.PW.VARIABLE_SET:o="numVariableSetBuffers";break;case V.PW.MODULE:o="numTemplateBuffers";break;case V.PW.VARIABLE:case V.PW.VARIABLE_OVERRIDE:break;case V.PW.RESPONSIVE_SET:o="numResponsiveSetBuffers";break;case V.PW.CODE_LIBRARY:case V.PW.CODE_FILE:case V.PW.CODE_COMPONENT:case V.PW.CONSTRAINED_TEMPLATE:case V.PW.MANAGED_STRING:break;default:(0,i.xb)(n)}r===V.M$.UNPUBLISH&&(o=`${o}Unpublished`);let s=o;return s in e&&(e[s]=a.length),e},{numComponentBuffers:0,numStateGroupBuffers:0,numStyleBuffers:0,numVariableSetBuffers:0,numTemplateBuffers:0,numResponsiveSetBuffers:0,numComponentBuffersUnpublished:0,numStateGroupBuffersUnpublished:0,numStyleBuffersUnpublished:0,numVariableSetBuffersUnpublished:0,numTemplateBuffersUnpublished:0,numResponsiveSetBuffersUnpublished:0});(0,h.sx)("Library publish upload",{fileKey:Q.key,publishMode:(0,R.z)((0,x.Io)(A)),publishScope:r.publishScope,libraryModalSessionId:r.libraryModalSessionId,orgId:eh?.org_id,workspaceId:eh?.workspace_id,teamId:eh?.id,...eg});let ef=e_.flatMap(e=>e.publishType===V.M$.PUBLISH?e.assets:[]).reduce((e,r)=>r.type!==V.PW.VARIABLE&&r.type!==V.PW.VARIABLE_SET&&(0,B.O)(r.type)?r.type===V.PW.MODULE?e.concat(r):e.concat(r).concat(em[r.node_id]||[]):e,[]);try{u=await et(ef,ea,A.library.local.thumbnails,e)}catch(e){eo("Unable to upload thumbnails during library publish","upload_thumbnails",n.id,{error:e});return}let{failedThumbnailNodeIds:eE,s3Paths:ey,styleMetaByNodeId:eb,uploadDurationMs:ev,encounteredNonS3PresignedPostError:eT}=u,eI=e_.flatMap(e=>e.assets).length;if(eE.length===eI){eo("All thumbnails failed to upload"+(eT?" (non-s3 error)":""),"upload_thumbnails",n.id,{numSkippedDueToError:eI,encounteredNonS3PresignedPostError:eT});return}let eS=e_.map(({publishType:e,assetType:r,assets:n})=>{let i=n.filter(e=>!eE.includes(e.node_id));return i.length>0?{publishType:e,assetType:r,assets:i}:null}).filter(a.Vq);if((0,c.k)().first_draft_publish_ux&&(r.publishAsFirstDraftKit||r.unpublishAll)){let e=s.XJn.getLocalDesignSystemKits();if(e.length>1)(0,y.xi)("first_draft","Attempting to publish a file with multiple kits",{kitNames:e.map(e=>e.name)});else if(1===e.length){let n=e[0];if(!n){(0,y.xi)("first_draft","No kit found for publishing",{kits:e});return}S=await (0,P.Hj)(n.pageId,n.name,{publishType:D.tf.LIBRARY_PUBLISH,localComponents:(0,x.MH)(A),localStateGroups:(0,x.dM)(A),localVariableSets:(0,x.bh)(A),isDirectGenCompatible:r.isDirectGenCompatible??!1},r.firstDraftVariablesForTheme,r.unpublishAll)}}let ew={updates:eS.map(e=>({publishType:e.publishType,assetType:e.assetType,guids:e.assets.map(e=>{let r=(0,W.p$)(e);return r||(console.warn("Asset with null nodeId:",e),(0,E.$D)(o.e.DESIGN_SYSTEMS_EDITOR,Error("Asset with null node ID found during publish"))),r}).filter(a.Vq)})),moveRemappings:r.moveInformation?.moveRemappings??{},s3ThumbnailBufferPaths:ey,styleMetaByNodeId:eb,clientProtocolVersion:window.mpGlobal.version,themeMetaData:r.themePublishData??{},...S?{kitMetaData:S}:{}};try{let e=(await G.Z.postUploadPublishParams()).data.meta;m=e.url,b=e.fields}catch(e){eo("Unable to get presigned post url for params","get_presigned_post",n.id,{error:e});return}try{let e=new TextEncoder;T=await (0,f.ET)(o.e.DESIGN_SYSTEMS_EDITOR,"publishChanges.params",m,b,e.encode(JSON.stringify(ew)),"application/json")}catch(r){let e=r instanceof f.qW;eo("Unable to upload publishing params"+(e?" (non-s3 error)":""),"upload_params",n.id,{error:r,encounteredNonS3PresignedPostError:e});return}try{I=(await G.Z.postLibraryPublish({fileKey:Q.key,checkpointKey:n.checkpoint_key,paramsPath:T,publishToCommunity:!!r.hubFileId,publishScope:r.publishScope})).data.meta.library_publish_id}catch(e){eo("Unable to publish","generic_error",n.id,{error:e});return}try{!function(e,r,n,i,a,o,s,l){let c=performance.now(),d=r?V.M$.UNPUBLISH:V.M$.PUBLISH;e.dispatch(j({state:V.Qx.UPLOADING,publishType:d,progress:0,libraryPublishId:n,savepoint:i,numSkippedPriorToPublish:a,publishStartMs:er(e.getState().library.publishProgress),commitUpdatesDurationMs:c,clientPreWorkDurationMs:o,createSavePointDurationMs:s})),l({publishType:d,dispatch:e.dispatch,icon:w.zX.SPINNER})}(e,ea,I,n,eE.length,ev,ep,H)}catch(e){eo("Unable to notify publish start","generic_error",n.id,{error:e});return}})},333633:(e,r,n)=>{n.d(r,{F6:()=>h,Ho:()=>p,K6:()=>u,PU:()=>g,V9:()=>f,mu:()=>_,sm:()=>d,sp:()=>E,yc:()=>m});var i=n(741419),a=n(611504),o=n(481540),s=n(480236),l=n(10492),c=n(8374);let d=(0,a.NC)("MULTIPLAYER_EMOJI_UPDATE_EMOJI_WHEEL_POSITION"),u=(0,a.NC)("MULTIPLAYER_EMOJI_CLEAR_STATE"),p=(0,c.nF)(e=>{i.glU.setIsInCursorChat(!1),e.dispatch(u())}),m=(0,a.NC)("MULTIPLAYER_EMOJI_START_CHATTING"),h=(0,c.nF)((e,r)=>{let n=e.getState();0>[i.NLJ.HAND,i.NLJ.SELECT,i.NLJ.HAND_SELECT].indexOf(n.mirror.appModel.currentTool)&&i.glU.triggerAction("set-tool-default",null),(0,l.q)().then(e=>{e||(i.glU.setIsInCursorChat(!0),(0,o.ds)("Started chatting",n.openFile?.key,n,{source:r.source}))}),e.dispatch(m(r))}),_=(0,a.NC)("MULTIPLAYER_EMOJI_STOP_REACTING"),g=(0,a.NC)("MULTIPLAYER_EMOJI_START_REACTING");(0,c.nF)((e,r)=>{s.R9.resetReactions(),e.dispatch(g(r))});let f=(0,a.NC)("MULTIPLAYER_EMOJI_TOGGLE_EMOJI_WHEEL"),E=(0,c.nF)((e,r)=>{let n=e.getState();(0,o.ds)("Toggled emoji wheel",n.openFile?.key,n,{wheelType:r.wheelType,...r.source&&{source:r.source}}),e.dispatch(f(r))})},292217:(e,r,n)=>{n.d(r,{Jd:()=>A,QC:()=>S,UF:()=>C,aJ:()=>T,kN:()=>I,lT:()=>w});var i=n(579020),a=n(858423),o=n(757033),s=n(280198),l=n(442313),c=n(719398),d=n(697714),u=n(8374);n(449737);var p=n(4313),m=n(10935),h=n(296580),_=n(97859),g=n(796503),f=n(995946),E=n(667998),y=n(43482),b=n(790355),v=n(452546);let T="team_join_request_submitted",I="permission_request_submitted",S=(0,u.nF)(async(e,r)=>{let n={team_id:r.teamId,level:r.level,message:r.message},a=e.getState().user?.id,d=e.getState().roles.byTeamId,u=a&&d&&d[r.teamId]?d[r.teamId][a]?.level:null,p={level:r.level,team_id:r.teamId,team_type:r.teamOrgAccess,source:r.source,folder_id:r.folderId};r.actionType===I?(0,i.sx)(I,p):(0,i.sx)(T,p),await o.Ay.post("/api/team_role_requests",n).then(({data:n})=>{let i=n.meta;i.status===E.c.APPROVED?e.dispatch((0,h.vr)({teamId:i.team_id})):r.level===f.e6.EDITOR&&u===f.e6.VIEWER?e.dispatch(s.s.flash((0,l.t)("org_actions.you_ve_requested_to_edit_files_in_this_team"))):e.dispatch(s.s.flash((0,l.t)("org_actions.you_ve_requested_to_join_this_team")))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})}),w=(0,u.nF)((e,r)=>{o.Ay.del(`/api/team_role_requests/${r.requestId}`).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_withdrawn")))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})}),A=(0,u.nF)((e,r)=>{o.Ay.post(`/api/team_role_requests/${r.requestId}/approve`,{level:`${r.level}`}).then(({data:r})=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_approved"))),e.dispatch(v.bE({role:r.meta}))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred")))})}),C=(0,u.nF)((e,r)=>{o.Ay.post(`/team_role_requests/${r.requestId}/deny`).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_denied")))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})});(0,u.nF)((e,{orgId:r})=>{o.Ay.put(`/api/orgs/${r}`,{public_plugins_allowed:!0}).then(({data:r})=>{e.dispatch(p.yJ({org:r.meta}))})}),(0,u.nF)((e,{payload:r,successMessage:n})=>{let i=e.getState().currentUserOrgId;o.Ay.put(`/api/orgs/${i}`,r).then(r=>{e.dispatch(p.yJ({org:r.data.meta})),n&&e.dispatch(d.F.enqueue({message:n,type:"orgs.update",error:!1}))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,u.nF)((e,{orgId:r,googleSsoOnly:n,mfaRequired:i})=>{o.Ay.put(`/api/orgs/${r}`,{google_sso_only:n,mfa_required:i}).then(({data:r})=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_authentication_settings"))),e.dispatch(p.yJ({org:r.meta}))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,u.nF)((e,{orgId:r,samlSsoOnly:n,mfaRequired:i})=>{o.Ay.put(`/api/orgs/${r}`,{saml_sso_only:n,mfa_required:i}).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_authentication_settings"))),e.dispatch(p.yJ({org:r.data.meta}))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,u.nF)((e,{orgId:r,attribute:n})=>{o.Ay.put(`/api/orgs/${r}`,{featured_scim_metadata:n}).then(r=>{e.dispatch(p.yJ({org:r.data.meta}))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,u.nF)((e,{onFailure:r,onSuccess:n,orgId:i,timeoutDurationInSecs:a})=>{o.Ay.put(`/api/orgs/${i}`,{idle_timeout_duration_in_secs:a}).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_idle_session_timeout"))),e.dispatch(p.yJ({org:r.data.meta})),n()}).catch(n=>{r(),e.dispatch(s.s.error((0,c.J)(n)||(0,l.t)("org_actions.an_error_occurred")))})}),(0,u.nF)((e,{orgId:r,ipAllowlistEnabled:n,ipAllowlistRanges:i,onSuccess:a})=>o.Ay.put(`/api/orgs/${r}/ip_allowlist_ranges`,{ip_ranges:n?i:void 0,ip_allowlist_enabled:n}).then(i=>{let o={...e.getState().orgById[r].shared_org_license_group_settings,ip_allowlist:n};e.dispatch(p.F6({id:r,shared_org_license_group_settings:o})),e.dispatch(s.s.flash("Updated IP allowlist settings")),a()}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred")))})),(0,u.nF)((e,{orgId:r})=>{o.Ay.post(`/api/org/${r}/deletion_request`).then(r=>{e.dispatch(s.s.flash((0,l.t)("orgs_middleware.deletion_request_submitted")))}).catch(r=>{e.dispatch(s.s.error(r.data?.message||(0,l.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(r)})}),(0,u.nF)((e,r)=>{let n=r.successMessage,i=r.autogenPasswordControl,o=r.settingsId,u=y.Eh.apiAutogenControls({orgId:r.orgId,autogen_password_controls:i});u.then(()=>{n&&e.dispatch(d.F.enqueue({message:n,type:"orgs.update",error:!1}))}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}),o?(0,a.WB)().optimisticallyUpdate({SharedOrgLicenseGroupSetting:{[o]:{autogenPasswordControls:i}}},u):(0,a.WB)().optimisticallyCreate({SharedOrgLicenseGroupSetting:{[`optimistic-id-${r.orgId}`]:{autogenPasswordControls:i,externalCollaborationControls:!1,publicLinkControlsSetting:null,teamCreationControls:null,publicLinkControlsMaxExpiration:null,resourceType:"Org",resourceId:r.orgId}}},u)}),(0,u.nF)((e,r)=>{o.Ay.post(`/api/org/${r.orgId}/delete_org_users`,{org_user_ids:r.orgUserIds}).then(r=>{e.dispatch(s.s.flash((0,l.t)("orgs_middleware.user_data_deleted")))}).catch(r=>{e.dispatch(s.s.error(r.data?.message||(0,l.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(r)})}),(0,u.nF)((e,r)=>{(0,g.yP)(e.getState(),r.selectedView)?((0,_.nt)(r.orgId),(0,i.sx)("file-browser-hydrate",{location:"selectViewAndLoadItsResources"}),(0,_._X)("orgSelectViewAndLoadItsResources").then(n=>{e.dispatch(m.cL()),e.dispatch(b.Qv(n.data.meta)),e.dispatch(b.$T(r.selectedView))})):(r.actionsIfNotHydrating&&r.actionsIfNotHydrating.forEach(e.dispatch),e.dispatch(b.$T(r.selectedView)))}),(0,u.nF)((e,{orgId:r,slidesDisabled:n,successMessage:i})=>{y.Eh.putToggleSlidesDisabled({orgId:r,slidesDisabled:n}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}).then(()=>{e.dispatch(p.F6({id:r,is_slides_disabled:n})),i&&e.dispatch(s.s.flash(i))})}),(0,u.nF)((e,{orgId:r,sitesPublishingDisabled:n,successMessage:i})=>{y.Eh.putToggleSitesPublishingDisabled({orgId:r,sitesPublishingDisabled:n}).catch(r=>{e.dispatch(s.s.error((0,c.J)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}).then(()=>{i&&e.dispatch(s.s.flash(i))})})},630248:(e,r,n)=>{n.d(r,{hZ:()=>m,wc:()=>u,yH:()=>p});var i=n(611504),a=n(757033),o=n(280198),s=n(442313),l=n(697714),c=n(8374),d=n(449737);(0,c.nF)((e,r)=>{let n=e.getState(),{emails:i,isResentInvite:o,licenseGroupId:c,workspaceId:p,billableProductKey:h}=r;e.dispatch(u({creating:!0})),a.Ay.post("/api/org_invites",{org_id:n.currentUserOrgId,emails:i,billable_product_key:h,license_group_id:c,workspace_id:p}).then(({data:r})=>{let n=r.meta;e.dispatch(m(n)),e.dispatch(u({creating:!1})),e.dispatch(d.Lo());let a=(0,s.t)("org_invite.invite_resent");if(!o){let e=(0,s.t)("org_invite.new_members_message",{numInvites:n.length}),r=i.length-n.length,o=(0,s.t)("org_invite.existing_members_message",{numExisting:r});n.length>0?(a=e,r>0&&(a=[a,o].join(" "))):a=o}e.dispatch(l.F.enqueue({message:a}))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_creation_error");e.dispatch(u({creating:!1})),e.dispatch(l.F.enqueue({message:n,error:!0}))})}),(0,c.nF)((e,r)=>{let{idpUser:n}=r,i=e.getState();a.Ay.del(`/api/org_invites/${n.id}`,{org_id:i.currentUserOrgId}).then(r=>{e.dispatch(p({org_invite_id:n.id})),e.dispatch(o.s.flash((0,s.t)("org_invite.org_invite_deletion_success",{email:n.email})))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_deletion_error");e.dispatch(o.s.flash(n))})});let u=(0,i.NC)("IS_CREATING_ORG_INVITES"),p=(0,i.NC)("DELETE_ORG_INVITE"),m=(0,i.NC)("SET_ORG_INVITES")},957985:(e,r,n)=>{n.d(r,{E:()=>l,hZ:()=>c});var i=n(611504),a=n(280198),o=n(8374),s=n(143003);let l=(0,i.NC)("ORG_SAML_CONFIG_GET");(0,o.nF)(e=>{let r=e.getState().currentUserOrgId;s.P.getOrgSamlConfig({orgId:r}).then(r=>{e.dispatch(c({orgSamlConfig:r.data.meta}))}).catch(r=>{e.dispatch(a.s.flash(r.data?.message||"An error occurred while fetching org saml config.",5e3)),console.error(r)}),e.dispatch(l())});let c=(0,i.NC)("ORG_SAML_CONFIG_SET")},162072:(e,r,n)=>{n.d(r,{E:()=>b,GR:()=>S,Lx:()=>v,MT:()=>T,hZ:()=>I}),n(848318),n(716544);var i=n(879378),a=n.n(i),o=n(611504),s=n(757033),l=n(280198),c=n(442313),d=n(719398),u=n(8374),p=n(106067),m=n(296580),h=n(622812),_=n(349507),g=n(43482),f=n(465584),E=n(341550);(0,u.nF)(async(e,r)=>{let n=r.team.id;try{let i=(await s.Ay.put(`/api/teams/${n}`,{org_access:r.orgAccess})).data.meta;e.dispatch(I({teams:[i]}))}catch(r){e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_changing_team_s_org_access"))))}}),(0,u.nF)(async(e,r)=>{let n={};if(r.teams.forEach(e=>{let r=e.workspace_id;r&&(r in n||(n[r]=[]),n[r].push(e.id))}),Object.keys(n).length)try{let r=Object.keys(n).map(e=>{let r=n[e];return s.Ay.del(`/api/workspace/${e}/teams`,{team_ids:r})}),i=await Promise.all(r),a=[].concat(...i.map(e=>e.data.meta));e.dispatch(I({teams:a})),e.dispatch(l.s.flash((0,c.t)("org_team_actions.teams_were_unassigned",{numTeams:a.length})))}catch(r){e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_unassigning_team_s_from_a_workspace"))))}}),(0,u.nF)(async(e,r)=>{let n=r.teams.map(e=>e.id),i=r.workspaceId;try{let a=(await s.Ay.post(`/api/workspace/${i}/teams`,{team_ids:n})).data.meta;e.dispatch(I({teams:a})),e.dispatch(l.s.flash((0,c.t)("org_team_actions.teams_were_assigned_to_workspace",{numTeams:a.length,workspaceName:r.workspaceName})))}catch(r){e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_assigning_team_s_to_a_workspace"))))}}),(0,u.nF)(async(e,r)=>{let n=r.workspaceId;e.dispatch(v("loading"));try{let r=(await f.u.getTeams({includeSecretTeams:!0,workspaceId:n})).data.meta;e.dispatch(I({teams:r})),e.dispatch(v("loaded"))}catch(r){e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_fetching_teams")))),e.dispatch(v("errors"))}}),(0,u.nF)((e,r)=>{let n=e.getState().currentUserOrgId,i=r.teamIds,a={team_ids:i};r.level&&(a.level=r.level);let o=(0,h.n1)(i);e.dispatch(E.Cx({key:o})),s.Ay.post(`/api/orgs/${n}/teams/join`,a).then(()=>{e.dispatch((0,m.UM)({teamIds:i,level:r.level}))}).catch(r=>{e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_joining_teams")))),e.dispatch(E.of({key:o}))})});let y=(0,u.nF)((e,r)=>{let n=e.getState().currentUserOrgId,i=r.teamId,a={team_ids:[i]};r.level&&(a.level=r.level);let o=(0,h.p9)(i);e.dispatch(E.Cx({key:o})),s.Ay.post(`/api/orgs/${n}/teams/join`,a).then(()=>{e.dispatch((0,m.vr)({teamId:i,level:r.level}))}).catch(r=>{e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_joining")))),e.dispatch(E.of({key:o}))})});(0,u.nF)((e,r,{loadingKey:n})=>{let i=e.getState().currentUserOrgId,{teamId:a,disableFlashError:o}=r,s=g.Eh.getTeam({orgId:i,teamId:a});(0,_.N)(s,e,n),s.then(r=>{let n=r.data.meta;e.dispatch(p.yJ({team:n,userInitiated:!1}))}).catch(r=>{o||e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_this_team"))))})},({teamId:e})=>`ORG_FETCH_TEAM_${e}`);let b=(0,o.NC)("ORG_FETCH_DISCOVERABLE_TEAMS");(0,u.nF)((e,r)=>{let n=e.getState().currentUserOrgId,{includeProjectCount:i,includeMemberCount:a,includeTopMembers:o,includeSecretTeams:s}=r||{};g.Eh.getTeams({orgId:n,includeMemberCount:a,includeProjectCount:i,includeTopMembers:o,includeSecretTeams:s}).then(r=>{let n=r.data.meta;e.dispatch(I({teams:n}))}).catch(r=>{e.dispatch(l.s.error((0,d.J)(r,(0,c.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_teams_within_the_organization"))))}),e.dispatch(b(r))});let v=(0,o.NC)("SET_ORG_TEAMS_STATUS"),T=(0,o.NC)("RESET_ORG_TEAMS"),I=(0,o.NC)("ORGS_SET_DISCOVERABLE_TEAMS");function S(e,r,n){return a()(()=>e(y({teamId:r,level:n})),500,{leading:!0,trailing:!1})}},650894:(e,r,n)=>{n.d(r,{$V:()=>S,AW:()=>w,IJ:()=>N,Pg:()=>L,bu:()=>C,hZ:()=>T,uo:()=>A,yJ:()=>I});var i=n(611504),a=n(44509),o=n(757033),s=n(736248),l=n(722941),c=n(280198),d=n(442313),u=n(166500),p=n(697714),m=n(8374),h=n(449737),_=n(936231),g=n(928001),f=n(349507),E=n(314693),y=n(43482),b=n(808765),v=n(114735);let T=u.hG,I=(0,m.MM)("ORG_USER_PUT",async(e,r,{optimistId:n})=>{if(r.userInitiated)try{let i=await E.G.updateOrgUser({id:r.orgUser.id,changes:{description:r.orgUser.description}});e.dispatch(v.c(n)),e.dispatch(I({orgUser:i.data.meta,userInitiated:!1}))}catch(r){e.dispatch(v.r(n)),e.dispatch(c.s.error(r.data?.message||(0,d.t)("org_user_actions.an_error_occurred")))}});(0,m.nF)(async(e,r)=>{try{let n={...!1===r.showUserOnboarding&&{show_figjam_user_onboarding:!1},...r.shownPreLaunchAdminOnboarding&&{has_shown_figjam_admin_onboarding:!0},...r.shownPostLaunchAdminOnboarding&&{has_shown_figjam_admin_launch_onboarding:!0}},i=await E.G.updateOrgUser({id:r.orgUserId,changes:n});e.dispatch(I({orgUser:i.data.meta,userInitiated:!1}))}catch(r){e.dispatch(c.s.error(r.data?.message||(0,d.t)("org_user_actions.an_error_occurred_closing_onboarding")))}});let S=(0,m.nF)(async(e,r)=>{try{await E.G.requestOrgAccountTypeRequest({org_id:r.orgId,entry_point:r.entryPoint,message:r.message,admin_ids:r.adminIds,editor_type:r.licenseType,billable_product_key:r.seatTypeKey,file_key:r.fileKey,folder_id:r.folderId}).then(e=>{200===e.status&&r.handleRequestId?.(e.data.meta?.id)});let n=r.entryPoint===_.PE.CreateFileProjectView?(0,d.t)("org_user_actions.user_upgrade_request_submitted"):(0,d.t)("org_user_actions.upgrade_request_sent");r.suppressVisualBell||e.dispatch(p.F.enqueue({message:n,type:"upgrade-request-sent"}))}catch(n){console.error(n),n.message.includes("Org access needed")?(e.dispatch(s.Ts({origin:"edit_button_click",formState:l.qB.JOIN_ORG,redirectUrl:a.Ay.location.pathname})),e.dispatch(h.to({type:b.x,data:{}}))):e.dispatch(c.s.error(n.data?.message||(0,d.t)("org_user_actions.an_error_occurred_requesting_account_type"))),r.onError?.()}}),w=(0,m.nF)(async(e,r)=>{try{await o.Ay.del(`/api/org_user/${r.orgId}`),e.dispatch(p.F.enqueue({type:"org_guest_leave",message:(0,d.t)("org_user_actions.you_successfully_left_organization",{orgName:r.orgName})}))}catch(n){console.error(n),e.dispatch(c.s.error(n.data?.message||(0,d.t)("org_user_actions.an_error_occurred_leaving_organization",{orgName:r.orgName})))}}),A=(0,m.MM)("ORG_USER_BATCH_UPDATE_ORG_USERS",async(e,r,{optimistId:n})=>{let i,a;let o=e.getState();if(r.lastUpdateTimestampOverride)i=r.lastUpdateTimestampOverride,a=r.lastUpdateTimestampOverride;else{let e=Object.values(o.orgUsersByOrgId[r.orgId]).filter(e=>r.params.org_user_ids.includes(e.id));if(0===e.length)return;if(a=new Date(Math.max(...e.map(e=>+new Date(e.updated_at)))).toISOString(),void 0!==r.params.license_group_id){let r=e.map(e=>e.license_group_member?.updated_at).filter(Boolean);i=r.length>0?new Date(Math.max(...r.map(e=>+new Date(e)))).toISOString():null}}try{let o=(await E.G.updateOrgUsers({orgId:r.orgId,...r.params,latest_ou_update:a,latest_lg_member_update:i,showing_billing_groups:!0})).data.meta;e.dispatch(v.c(n)),e.dispatch(T({orgUsers:o,orgId:r.orgId})),r.successCallback&&r.successCallback()}catch(a){console.error("Batch Update Failed",a),r.errorCallback?.(),e.dispatch(v.r(n));let i=function(e){let{reason:r,message:n}=e;return"seat_increase_unauthorized"===r?(0,d.t)("modify_plan_user_seat_modal.error.seat_increase_unauthorized"):n??(0,d.t)("org_user_actions.an_error_occurred_updating_org_users")}(a.data);e.dispatch(c.s.error(i))}}),C=(0,i.NC)("ORG_USER_BATCH_DELETE_ORG_USERS"),N=(0,m.nF)(async(e,r)=>{if(e.dispatch(C(r)),r.userInitiated)try{await o.Ay.del(`/api/orgs/${r.orgId}/org_users`,r.params);let n=r.params.org_user_ids.length,i=(0,d.t)("org_user_actions.user_has_been_removed_from_organization",{deletedOrgUserCount:n});e.dispatch(c.s.flash(i))}catch(r){e.dispatch(c.s.error(r.data?.message||(0,d.t)("org_user_actions.an_error_occurred")));return}}),L=(0,m.nF)(async(e,{orgId:r},{loadingKey:n})=>{let i=e.getState();if(!g.Sc(i.loadingState,n))return;let a=y.Eh.getAdmins({includeLicenseAdmins:!0,orgId:r});(0,f.N)(a,e,n);try{let n=await a;e.dispatch(T({orgUsers:n.data.meta,orgId:r}))}catch(r){e.dispatch(c.s.error(r.message||(0,d.t)("org_user_actions.an_error_occurred_fetching_org_admins")))}},({orgId:e})=>`ORG_USER_GET_ADMINS_${e}`);(0,m.nF)(async(e,r,{loadingKey:n})=>{let i=y.Eh.getUser({orgId:r.orgId,userId:r.userId});(0,f.N)(i,e,n);try{let n=[(await i).data.meta];return e.dispatch(T({orgUsers:n,orgId:r.orgId})),n.find(e=>e.user_id===r.userId)||null}catch(n){if(404===n.status&&r.allowNoOrgUser)return null;return e.dispatch(c.s.error(n.message||(0,d.t)("org_user_actions.an_error_occurred_fetching_org_users"))),null}},e=>`ORG_USER_GET_BY_USER_ID_${e.orgId}_${e.userId}`)},194546:(e,r,n)=>{n.d(r,{$h:()=>R,Ay:()=>N,Az:()=>V,Bq:()=>$,Ef:()=>P,I2:()=>x,Je:()=>U,Lj:()=>L,Lo:()=>H,M2:()=>B,MN:()=>S,Mv:()=>z,Qe:()=>D,Qg:()=>k,Ts:()=>W,Vm:()=>T,WG:()=>w,WX:()=>j,Wc:()=>M,XS:()=>C,bJ:()=>O,eK:()=>I,i:()=>A,js:()=>G,pv:()=>Y,qU:()=>K,yy:()=>F});var i=n(611504),a=n(95650),o=n(141039),s=n(66387),l=n(757033),c=n(280198),d=n(442313),u=n(790355),p=n(710665),m=n(834111),h=n(515673),_=n(217084),g=n(977508),f=n(8374),E=n(110979),y=n(449737),b=n(106067),v=n(71631);let T=(0,f.nF)((e,{teamId:r,showBreadcrumbs:n,onCloseOrComplete:i})=>{e.dispatch(u.$T({view:"eduReview",teamId:r,showBreadcrumbs:n,onCloseOrComplete:i})),e.dispatch(H({billingPeriod:h.tY.STUDENT}))}),I=(0,i.NC)("PAYMENT_RESTORE_SAVED_CART"),S=(0,i.NC)("PAYMENT_SET_CURRENCY"),w=(0,i.NC)("PAYMENT_SET_TOKEN"),A=(0,i.NC)("PAYMENT_SET_TAXES"),C=(0,i.NC)("PAYMENT_SET_PROMO"),N=(0,f.nF)((e,r)=>{r.promo||(0,s._H)(),e.dispatch(C(r))}),L=(0,i.NC)("PAYMENT_SET_SUBMIT_PUT_ANNUAL_QUANTITY_PENDING"),O=(0,i.NC)("PAYMENT_PUT_ANNUAL_QUANTITY");(0,f.nF)((e,r)=>{let{teamId:n,annualQuantity:i,annualWhiteboardQuantity:a}=r;l.Ay.put(`/api/subscriptions-2018-11-08/team/${n}`,{annual_quantity:i,annual_whiteboard_quantity:a||0}).then(()=>{e.dispatch(v.Be({teamId:n})),e.dispatch(y.Ce()),e.dispatch(L({submitPending:!1})),e.dispatch(c.s.flash((0,d.t)("flash.updated_annual_seats")))}).catch(r=>{(0,p.UE)(r,e.dispatch),e.dispatch(L({submitPending:!1}))}),e.dispatch(O())});let R=(0,i.NC)("PAYMENT_SET_VAT_GST_ID"),P=(0,i.NC)("PAYMENT_SET_REGIONAL_VAT_GST_ID"),D=(0,i.NC)("PAYMENT_MAKE_STUDENT_TEAM");(0,f.nF)((e,r)=>{let n=e.getState(),i=n.user?.id;l.Ay.put(`/api/teams/${r.teamId}/student_team`,{student_team:!0}).then(()=>{i?e.dispatch(E._l({workspace:{userId:i,teamId:r.teamId,orgId:null},view:{view:"allProjects"}})):e.dispatch(u.$T({view:"team",teamId:r.teamId})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_upgraded_to_an_education_team"))),e.dispatch(x({submitPending:!1})),r.onCloseOrComplete?.()}).catch(r=>{(0,p.UE)(r,e.dispatch),e.dispatch(x({submitPending:!1}))}),e.dispatch(D())});let M=(0,f.nF)((e,{teamId:r})=>{let n=e.getState().teams[r];n.student_team?l.Ay.put(`/api/teams/${r}/student_team`,{student_team:!1}).then(()=>{e.dispatch(v.Be({teamId:r})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_downgraded_to_a_starter_team")))}).catch(r=>(0,p.UE)(r,e.dispatch)):l.Ay.del(`/api/subscriptions-2018-11-08/team/${r}`).then(({data:i})=>{let o=i.meta&&i.meta.team;o&&e.dispatch(b.yJ({team:o,userInitiated:!1})),e.dispatch(v.Be({teamId:r}));let{annual_subscription:s,monthly_subscription:l}=e.getState().teamBilling.summary,u=s?.quantity?s.current_period_end:null,p=l?.quantity?l.current_period_end:null,m=u&&p?(0,a.A)(u).isAfter((0,a.A)(p))?u:p:u||p;e.dispatch(c.s.flash(m?(0,d.t)("flash.team_will_become_free_starter_team_on_date",{teamName:n.name,cancelDate:(0,a.A)(m).toDate()}):(0,d.t)("flash.team_will_be_downgraded_at_the_end_of_the_current_subscription_period",{teamName:n.name}),8e3))}).catch(r=>(0,p.UE)(r,e.dispatch))}),k=(0,i.NC)("PAYMENT_SHOW_ERROR");(0,f.nF)((e,{teamId:r})=>{let n=e.getState(),i=n.user?.id,a={annual_quantity:n.payment.numDesignEditors||0,annual_whiteboard_quantity:n.payment.numWhiteboardEditors||0};l.Ay.put(`/api/subscriptions-2018-11-08/team/${r}`,a).then(({data:n})=>{let a=n.meta&&n.meta.team;a&&e.dispatch(b.yJ({team:a,userInitiated:!1})),e.dispatch(v.Be({teamId:r})),i?e.dispatch(E._l({workspace:{userId:i,teamId:r,orgId:null},view:{view:"teamAdminConsole",teamId:r,teamAdminConsoleViewTab:g.Iv.BILLING}})):e.dispatch(u.$T({view:"team",teamId:r,teamViewTab:g.A$.BILLING})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_added_an_annual_plan"))),e.dispatch(x({submitPending:!1}))}).catch(r=>{e.dispatch(x({submitPending:!1})),(0,p.UE)(r,e.dispatch)})});let F=(0,i.NC)("PAYMENT_SET_COMPANY_DETAILS"),x=(0,i.NC)("PAYMENT_SET_SUBMIT_PENDING"),U=(0,i.NC)("PAYMENT_SET_EDITOR_STATUS_CHANGES"),B=(0,i.NC)("PAYMENT_SET_NUM_FIGMA_EMAIL_TEAM_USERS"),V=(0,i.NC)("PAYMENT_SET_NUM_WHITEBOARD_EDITORS"),G=(0,i.NC)("PAYMENT_SET_NUM_EDITORS"),H=(0,i.NC)("PAYMENT_SET_BILLING_PERIOD"),K=(0,i.NC)("PAYMENT_SET_CAMPFIRE_SEATS"),W=(0,i.NC)("PAYMENT_INIT"),z=(0,i.NC)("PAYMENT_START_ORG_UPGRADE_FLOW"),$=(0,f.nF)((e,r)=>{let{openInNewTab:n,newTeamProps:i,entryPoint:a,upsellSource:s}=r;if(n&&!(0,o.y3)()){let r=e.getState(),n=new URL((0,m.Np)(r,{view:"orgSelfServe",upsellSource:s,entryPoint:a}),document.baseURI).href;e.dispatch(E.V3({url:n}))}else e.dispatch(y.Ce()),e.dispatch(u.$T({view:"orgSelfServe",newTeamProps:i,upsellSource:s,entryPoint:a}));e.dispatch(z({currency:r.currency}))}),Y=(0,i.NC)("PAYMENT_START_PRO_UPGRADE_FLOW"),j=(0,f.nF)((e,r)=>{let{teamId:n,billingPeriod:i,entryPoint:a,onBillingCompleteRedirectInfo:s}=r,l={view:"teamUpgrade",teamFlowType:_.SC.UPGRADE_EXISTING_TEAM,teamId:n,paymentStep:h.tn.CHOOSE_PLAN,billingPeriod:i,planType:_.Sc.TEAM,entryPoint:a,...s?{searchParams:{onCompleteRedirectFileKey:s.fileKey,onCompleteRedirectNodeId:s.nodeId}}:{}};if(r.openInNewTab&&!(0,o.y3)()){let r=e.getState(),n=new URL((0,m.Np)(r,l),document.baseURI).href;e.dispatch(E.V3({url:n}))}else{let n=r.openInNewTab?void 0:r.selectedView;e.dispatch(y.Ce()),l.previousView=n,e.dispatch(u.$T(l))}e.dispatch(Y({newTeam:r.newTeam,currency:r.currency}))})},93724:(e,r,n)=>{n.d(r,{F9:()=>v,Hx:()=>N,KA:()=>E,Kq:()=>x,Ks:()=>S,QN:()=>M,RH:()=>k,TN:()=>V,Vg:()=>R,Vu:()=>w,WR:()=>T,ay:()=>y,cu:()=>L,f0:()=>O,fR:()=>B,gU:()=>D,jS:()=>I,jX:()=>P,lD:()=>F,nM:()=>A,pj:()=>C,v8:()=>b});var i=n(611504),a=n(210709),o=n(757033),s=n(719398),l=n(151265),c=n(8374),d=n(142751),u=n(333053),p=n(625069),m=n(127752),h=n(402840),_=n(994768),g=n(526830),f=n(492119);let E=(0,i.NC)("SET_RECENT_WHITEBOARD_TOOLS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,f.dB.WHITEBOARD_TOOL);e.dispatch(E({storeInRecentsKey:r.storeInRecentsKey,recentWhiteboardTools:n}))});let y=(0,i.NC)("ADD_WHITEBOARD_TOOL_TO_RECENTS"),b=(0,i.NC)("SET_RECENT_FACE_STAMPS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,f.dB.FACE_STAMP);e.dispatch(b({storeInRecentsKey:r.storeInRecentsKey,recentFaceStamps:n}))});let v=(0,i.NC)("ADD_FACE_STAMP_TO_RECENTS"),T=(0,i.NC)("SYNC_RECENT_PLUGINS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,g.bD.PLUGIN);e.dispatch(S({storeInRecentsKey:r.storeInRecentsKey,recentResources:n}));let i=n.map(e=>e.id);e.dispatch(R({resourceType:g.bD.PLUGIN,resourceIds:i})),e.dispatch(T(r))});let I=(0,i.NC)("SYNC_RECENT_WIDGETS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,g.bD.WIDGET);e.dispatch(w({storeInRecentsKey:r.storeInRecentsKey,recentResources:n}));let i=n.map(e=>e.id);e.dispatch(R({resourceType:g.bD.WIDGET,resourceIds:i})),e.dispatch(I(r))});let S=(0,i.NC)("SET_RECENT_PLUGINS"),w=(0,i.NC)("SET_RECENT_WIDGETS"),A=l.nM,C=l.pj,N=l.Hx,L=(0,i.NC)("ADD_FETCHED_PLUGIN_VERSION"),O=(0,i.NC)("ADD_FETCHED_WIDGET_VERSION"),R=(0,c.nF)((e,r)=>{V(e,r)}),P=(0,i.NC)("ADD_PLUGIN_TO_RECENTS"),D=(0,c.nF)((e,r)=>{e.dispatch(R({resourceType:g.bD.PLUGIN,resourceIds:[r.id]})),r.skipPluginRun||U(r.id,r.currentUserId,e.getState().currentUserOrgId,e.getState().publishedPlugins[r.id],e.getState().recentlyUsed.plugins[r.storeInRecentsKey],!!r.isDevelopment,e.dispatch),e.dispatch(P(r))}),M=(0,i.NC)("ADD_WIDGETS_TO_RECENTS"),k=(0,c.nF)((e,r)=>{e.dispatch(R({resourceType:g.bD.WIDGET,resourceIds:[r.id]})),r.skipPluginRun||U(r.id,r.currentUserId,e.getState().currentUserOrgId,e.getState().publishedWidgets[r.id],e.getState().recentlyUsed.widgets[r.storeInRecentsKey],!!r.isDevelopment,e.dispatch),e.dispatch(M(r))}),F=(0,i.NC)("REMOVE_RECENTLY_USED_PLUGIN"),x=(0,i.NC)("REMOVE_RECENTLY_USED_WIDGET"),U=(e,r,n,i,l,c,d)=>{if(i&&i.current_user_has_run||!r||(0,m.Vi)(e)||c)return;let p=l.find(r=>r.id===e);p?.run_by_user_ids?.includes(r)||o.Ay.post(`/api/plugin_runs/${e}`,{org_id:n}).then(({data:r})=>{d(u.R({resourceId:e,userFirstRanAt:r.meta.created_at}))}).catch(e=>{a.k.error((0,s.J)(e))})},B=(e,r)=>n=>{let i=(0,h.uF)(e),a=(i.manifest?.editorType??[]).map(h.Sb),o=(0,g.xQ)(e)?k:D;a.forEach(a=>n(o({storeInRecentsKey:a,id:e.id,version:i.id,currentUserId:r})))};function V(e,r){let n={},i=({id:i,version:a,status:o})=>{let s=r.resourceType===g.bD.PLUGIN?L:O;return a&&(n[i]=a),e.dispatch(s({id:i,version:a,status:o}))},a=[];if(r.resourceIds.forEach(o=>{let s=r.resourceType===g.bD.PLUGIN?e.getState().installedPluginVersions.plugins[o]:void 0;if(s){i({id:o,version:s,status:f.Lx.FETCHED});return}let l=r.resourceType===g.bD.PLUGIN?e.getState().recentlyUsed.plugins.fetchedResources[o]:e.getState().recentlyUsed.widgets.fetchedResources[o];l&&l.status!==f.Lx.NOT_FETCHED&&l.status!==f.Lx.FETCHING&&(l.status!==f.Lx.FETCHED||l.version)?l.version&&(n[o]=l.version):a.push(o)}),!a.length)return Promise.resolve(n);a.forEach(e=>{i({id:e,status:f.Lx.FETCHING})});let s={ids:a,org_id:e.getState().currentUserOrgId,include_pending:!0};return o.Ay.post(`/api/${(0,p.n)(r.resourceType)}/batch`,s).then(({data:r})=>(e.dispatch(d.Qi({publishedPlugins:r.meta,src:"fetchExtensionVersions",overrideInstallStatus:!0})),a.forEach(e=>{let n;let a=r.meta.find(r=>r.id===e);a&&(n=(0,_.ul)(a)),i({id:e,version:n,status:f.Lx.FETCHED})}),n)).catch(()=>(a.forEach(e=>{i({id:e,status:f.Lx.NOT_FETCHED})}),{}))}},508195:(e,r,n)=>{n.d(r,{MV:()=>E,N:()=>g,Xk:()=>u,cq:()=>m,hh:()=>_,lX:()=>f,q0:()=>h,zT:()=>y,zU:()=>p});var i=n(741419),a=n(171659),o=n(611504),s=n(731889),l=n(8374),c=n(834111),d=n(497407);let u="seen_try_onboarding",p=(0,o.NC)("SET_WORKSHOP_USER_NAME"),m=(0,l.nF)((e,r)=>{let n=r.name.trim().substring(0,170),a=e.getState(),o="fullscreen"===a.selectedView.view&&a.selectedView.workshopModeInfo;if(o)i.h3O.setName(n),(0,d.Vv)(o.id,n),e.dispatch(p(r))}),h=(0,o.NC)("SET_STARTER_KIT_HAS_BEEN_HIDDEN"),_=(0,o.NC)("SET_FIGJAM_EDITOR_ONBOARDING_FINISHED_OR_DISMISSED"),g=(0,o.NC)("SET_FIGJAM_EDITOR_ONBOARDING_STARTED");(0,l.nF)(e=>{(0,a.DN)().set(u,!0),e.dispatch(g())});let f=(0,o.NC)("SET_WORKSHOP_MODE_UNTIL"),E=(0,o.NC)("CLEAR_TRY_PLUGIN"),y=(0,l.nF)((e,r)=>{let n=e.getState();return(0,s.Dk)((0,c.xS)(n,r))})},947625:(e,r,n)=>{n.d(r,{Ev:()=>l,FL:()=>s,nH:()=>d,rk:()=>c,sw:()=>o});var i=n(611504),a=n(8374);let o=(0,i.NC)("FULLSCREEN_HIDE_STYLE_PREVIEW");(0,a.nF)(e=>{let r=e.getState().stylePreviewShown;r.isShown&&!r.isCreating&&e.dispatch(o())}),(0,a.nF)((e,r)=>{let{rowTop:n,rowLeft:i,styleType:a,inheritStyleKeyField:o,styleNameInputPrefix:l,nodeId:c}=r;e.dispatch(s({rowTop:n,rowLeft:i,styleType:a,inheritStyleKeyField:o,styleNameInputPrefix:l,nodeId:c}))});let s=(0,i.NC)("SHOW_CREATE_STYLE_PREVIEW"),l=(0,i.NC)("FULLSCREEN_SHOW_STYLE_PREVIEW"),c=(0,a.nF)((e,r)=>{e.dispatch(l(r))}),d=(0,i.NC)("STYLE_FILE_PUT_STYLE_SET");(0,i.NC)("STYLE_FILE_GET_STYLE_SET")},106067:(e,r,n)=>{n.d(r,{$I:()=>L,$V:()=>E,$w:()=>C,Jt:()=>D,TI:()=>v,WC:()=>T,_E:()=>f,aB:()=>w,bE:()=>P,bQ:()=>A,ii:()=>y,mw:()=>b,n9:()=>S,r1:()=>I,uo:()=>N,yH:()=>R,yJ:()=>O});var i=n(611504),a=n(44509),o=n(757033),s=n(280198),l=n(442313),c=n(166500),d=n(697714),u=n(8374),p=n(277063),m=n(376780),h=n(349507),_=n(142899),g=n(114735);let f=(0,u.MM)("BATCH_DEL_TEAM_MEMBERS",(e,{teamId:r,userIds:n},{optimistId:i})=>{o.Ay.del(`/api/teams/${r}/users`,{user_ids:n}).then(()=>{e.dispatch(g.c(i))}).catch(r=>{e.dispatch(g.r(i))})});(0,u.nF)(async(e,r)=>{let{teamId:n}=r;await o.Ay.put(`/api/teams/${n}/restore`).then(()=>{let r=`/files/team/${n}`;a.Ay.redirect(r),e.dispatch(s.s.flash((0,l.t)("file_browser.file_browser_actions.restore_team_success")))}).catch(r=>{e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.restore_team_error",{errorMsg:r.data.message||(0,l.t)("file_browser.file_browser_actions.unknown_error")})))})}),(0,u.nF)(async(e,r)=>{await o.Ay.put(`/api/teams/${r.teamId}`,{description:r.description}).then(()=>{e.dispatch(O({team:{id:r.teamId,description:r.description},userInitiated:!0}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.update_description_error")))})}),(0,u.nF)(async(e,r)=>{let n=r.figma_provided_libraries_disabled;await _.$.updatePresetsDisabled({teamId:r.teamId,presetsDisabled:n}).then(()=>{e.dispatch(d.F.enqueue({message:n?(0,l.t)("settings_tab.ui_kits_disabled"):(0,l.t)("settings_tab.ui_kits_enabled"),type:"team.ui_kit_toggle",error:!1})),e.dispatch(O({team:{id:r.teamId,figma_provided_libraries_disabled:n},userInitiated:!0}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.error_try_again")))})}),(0,u.nF)((e,{teamId:r},{loadingKey:n})=>{let i=_.$.getTeam({teamId:r});(0,h.N)(i,e,n),i.then(({data:r})=>{e.dispatch(O({team:r.meta,userInitiated:!1}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.error_try_again")))})}),(0,u.nF)((e,{teamId:r,userInitiated:n=!0},{loadingKey:i})=>{let a=_.$.getMembers({teamId:r});n&&(0,h.N)(a,e,i),a.then(({data:n})=>{let i={};n.meta.forEach(e=>{i[e.email]=e}),e.dispatch(E({members:i,teamId:r}))},r=>{console.error(r),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.team_member_fetch_error")))})},e=>`TEAM_FETCH_MEMBERS_LIST::teamId::${e.teamId}`);let E=(0,i.NC)("TEAM_SET_MEMBERS"),y=(0,i.NC)("TEAM_BATCH_JOIN"),b=(0,i.NC)("TEAM_JOIN"),v=(0,i.NC)("TEAM_STOP_RENAME"),T=(0,i.NC)("TEAM_BEGIN_RENAME"),I=(0,i.NC)("TEAM_CREATION_SET_LOADING"),S=(0,i.NC)("TEAM_CHANGE_DEFAULT_PERMISSION"),w=(0,i.NC)("TEAM_CHANGE_SHARING_SETTINGS"),A=(0,i.NC)("TEAM_CHANGE_ORG_ACCESS");(0,i.NC)("TEAM_LOADED");let C=(0,i.NC)("TEAM_RENAME"),N=(0,i.NC)("TEAM_BATCH_PUT"),L=c.RF,O=(0,u.nF)((e,r)=>{let n=r.team.id,i=e.getState().teams[n];e.dispatch(L(r));let a=e.getState(),o=e.getState().teams[n];!r.userInitiated&&o.subscription&&o.subscription!==m.Qh.INCOMPLETE&&i&&(null==i.subscription||i.subscription===m.Qh.INCOMPLETE)&&"teamUpgrade"===a.selectedView.view&&a.selectedView.teamId===o.id&&e.dispatch(p.zn({teamId:o.id}))}),R=c.Nh,P=(0,i.NC)("TEAM_POST"),D=(0,i.NC)("TEAM_GET")},71631:(e,r,n)=>{n.d(r,{Be:()=>f,H3:()=>v,OP:()=>b,l0:()=>y,tp:()=>E,wn:()=>T});var i=n(611504),a=n(757033),o=n(280198),s=n(442313),l=n(697714),c=n(8374);n(449737);var d=n(71631),u=n(570784),p=n(376780),m=n(928001);n(511231);var h=n(349507),_=n(67275);let g=(0,c.nF)((e,{teamId:r},{loadingKey:n})=>{let i=_.T.getTeamInvoices({teamId:r});(0,h.N)(i,e,n),i.then(({data:r})=>{r.meta.forEach(e=>{e.design_quantity||(e.design_quantity=e.quantity)}),e.dispatch(E({invoices:r.meta}))}).catch(r=>{400!==r.status&&e.dispatch(o.s.error((0,s.t)("flash.team_invoices_fetching_error")))})},e=>`TEAM_ADMIN_FETCH_INVOICES::teamId::${e.teamId}`),f=(0,c.nF)((e,{teamId:r},{loadingKey:n})=>{let i=_.T.getTeamSummary({teamId:r});(0,h.N)(i,e,n),i.then(({data:r})=>{e.dispatch(y({summary:r.meta}))}).catch(()=>{e.dispatch(o.s.error((0,s.t)("flash.team_billing_summary_fetching_error")))})},e=>`TEAM_ADMIN_FETCH_BILLING_SUMMARY::teamId::${e.teamId}`);(0,c.nF)((e,{teamId:r,shouldForceFetch:n})=>{let i=f.loadingKeyForPayload({teamId:r}),a=e.getState();(0,m.VP)(a.loadingState,i)||!n&&(0,m.D2)(a.loadingState,i)||e.dispatch(f({teamId:r}));let o=g.loadingKeyForPayload({teamId:r});(0,m.VP)(a.loadingState,o)||!n&&(0,m.D2)(a.loadingState,o)||e.dispatch(g({teamId:r}))});let E=(0,i.NC)("TEAM_ADMIN_POST_INVOICE"),y=(0,i.NC)("TEAM_ADMIN_SET_SUMMARY"),b=(0,i.NC)("TEAM_ADMIN_UPDATE_INVOICE_RECEIVER");function v(e){let{teamId:r,dispatch:n,annualSeatCounts:i,onSuccess:c,onFailure:m}=e;return a.Ay.post(`/api/subscriptions/team/${r}/annual_subscription`,{count_by_billable_product:i}).then(async()=>{c(),n(d.Be({teamId:r})),n(l.F.enqueue({message:(0,s.t)("billing_modals.renewal.toast.success"),type:"team-billing-renewal"})),await (0,u.jL)({planType:p.OL.TEAM,planId:r})}).catch(e=>{throw n(o.s.error(e.data?.message||(0,s.t)("billing_modals.renewal.toast.failure"),5e3)),m(),e})}function T(e){let{teamId:r,dispatch:n,annualSeatCounts:i,onSuccess:c,onFailure:u}=e;return a.Ay.put(`/api/subscriptions/team/${r}/coterm_annual_seats`,{count_by_billable_product:i}).then(()=>{c(),n(d.Be({teamId:r})),n(l.F.enqueue({message:(0,s.t)("billing_modals.renewal.toast.success"),type:"team-billing-renewal"}))}).catch(e=>{throw n(o.s.error(e.data?.message||(0,s.t)("billing_modals.renewal.toast.failure"),5e3)),u(),e})}},793478:(e,r,n)=>{n.d(r,{BC:()=>y,EF:()=>N,FJ:()=>S,Oy:()=>A,Y9:()=>_,au:()=>g,cx:()=>b,gX:()=>v,hK:()=>E,t9:()=>T,v6:()=>O,yu:()=>f});var i=n(157907),a=n(611504),o=n(579020),s=n(193324),l=n(858423),c=n(507152),d=n(757033),u=n(8374),p=n(349507),m=n(830789),h=n(55318);let _=(0,a.NC)("REFRESH_FEED"),g=(0,u.nF)((e,r,{loadingKey:n})=>{if(!(0,i.k)().xr_debounce_threshold)return;let a=h.K.getFeedBellStates();(0,p.N)(a,e,n),a.then(r=>{e.dispatch(E({bellStates:r.data.meta}))})}),f=(0,a.NC)("TEAM_FEED_SET_BELL_STATE"),E=(0,a.NC)("TEAM_FEED_SET_INITIAL_BELL_STATES"),y=(0,u.nF)((e,r)=>{let n=e.getState().user,i=(0,l.WB)(),a=r.uuid;if(!n||!i||!a||r.commentId.startsWith(O))return;let o=i.getIdFromUuid("FeedComment",a).then(e=>d.Ay.del(`/api/feed_posts/comments/${e}`));i.optimisticallyDeleteWithUUID({FeedComment:{[a]:null}},o)}),b=(0,u.nF)((e,r)=>{r.messageMeta=(0,s.Pq)(r.messageMeta);let n=e.getState().user,i=(0,l.WB)(),a=r.uuid;if(!n||!i||!a)return;let c=i.getIdFromUuid("FeedComment",a).then(e=>d.Ay.put(`/api/feed_posts/comments/${e}`,{message_meta:r.messageMeta,attachment_updates:(0,m.Gq)(r.attachmentUpdates)}));(0,o.sx)("Team Feed Comment Edited",{text:(0,s._Z)(r.messageMeta)});let u=(0,s.Rc)(r.messageMeta);i.optimisticallyUpdateWithUUID({FeedComment:{[a]:{messageMeta:u}}},c)}),v=(0,u.nF)((e,r)=>{r.messageMeta=(0,s.Pq)(r.messageMeta);let n=e.getState().user,i=(0,l.WB)();if(!n||!i)return;let a=(0,c.g)(),u=d.Ay.post(`/api/feed_posts/${r.postUuid}/comments`,{message_meta:r.messageMeta,uuid:a,attachment_ids:r.attachmentIds}),p=!!r.messageMeta.find(e=>(0,s.l5)(e)===s.vj.EMOJI),m=!!r.messageMeta.find(e=>(0,s.l5)(e)===s.vj.EDITOR_MENTION);(0,o.sx)("Team Feed Comment Added",{emojiUsed:p,mentionUsed:m,text:(0,s._Z)(r.messageMeta),postUuid:r.postUuid});let h=(0,s.Rc)(r.messageMeta);i.optimisticallyCreateWithUUID({FeedComment:{[a]:{feedPostPublicUuid:r.postUuid,uuid:a,userId:n.id,user:{id:n.id,handle:n.handle,imgUrl:n.img_url},messageMeta:h,createdAt:new Date,reactions:[]}}},u)}),T=(0,u.nF)((e,r)=>{let{commentUuid:n,emoji:i,reactionId:a}=r,o=I(n,i);e.getState().user&&(0,l.WB)().optimisticallyDelete({FeedReaction:{[a]:null}},o)}),I=(e,r)=>(0,l.WB)().getIdFromUuid("FeedComment",e).then(e=>d.Ay.del(`/api/feed_posts/comments/${e}/reactions`,{emoji:r})),S=(0,u.nF)((e,r)=>{let{commentUuid:n,commentId:i,emoji:a}=r,s=e.getState().user;if(!s||i.startsWith(O))return;let c=w(n,a);(0,o.sx)("Team Feed Reaction Added",{commentId:i,type:a});let d=`optimistic-id-comment-${i}-${a}-${s.id}`;(0,l.WB)().optimisticallyCreate({FeedReaction:{[d]:{createdAt:new Date,emoji:a,feedResourceId:i,feedResourceType:"FeedComment",userId:s.id}}},c)}),w=(e,r)=>(0,l.WB)().getIdFromUuid("FeedComment",e).then(e=>d.Ay.post(`/api/feed_posts/comments/${e}/reactions`,{emoji:r})),A=(0,u.nF)((e,r)=>{let{feedPostUuid:n,emoji:i,reactionId:a}=r,o=C(n,i);e.getState().user&&(0,l.WB)().optimisticallyDelete({FeedReaction:{[a]:null}},o)}),C=(e,r)=>d.Ay.del(`/api/feed_posts/${e}/reactions`,{emoji:r}),N=(0,u.nF)((e,r)=>{let{feedPostUuid:n,feedPostId:i,emoji:a}=r,s=e.getState().user;if(!s)return;let c=L(n,a);(0,o.sx)("Team Feed Reaction Added",{postUuid:n,type:a});let d=`optimistic-id-${n}-${a}-${s.id}`;(0,l.WB)().optimisticallyCreate({FeedReaction:{[d]:{createdAt:new Date,emoji:a,feedResourceId:i,feedResourceType:"FeedPost",userId:s.id,user:{id:s.id,handle:s.handle,imgUrl:s.img_url}}}},c)}),L=(e,r)=>d.Ay.post(`/api/feed_posts/${e}/reactions`,{emoji:r}),O="pending-feed-comment"},695363:(e,r,n)=>{n.d(r,{m:()=>h});var i=n(757033),a=n(280198),o=n(442313),s=n(697714),l=n(300257),c=n(449737),d=n(765982),u=n(8374),p=n(114735),m=n(614337);(0,u.nF)((e,{members:r,team:n,teamUsers:i,usersWithNoTeamUserIds:a=[],paidStatusType:u,paidStatus:p,entryPoint:m,showModalsBeneath:_=!1})=>{e.dispatch((0,c.to)({type:(0,l.j)(),data:{onConfirm:()=>{let l;e.dispatch(h({teamId:n.id,teamUsers:i,usersWithNoTeamUserIds:a,paidStatus:p,paidStatusType:u,userInitiated:!0,entryPoint:m}));let c=r.length,_={productName:u===d.j4.WHITEBOARD?(0,o.t)("general.figjam"):(0,o.t)("general.figma_design"),nameOrEmail:r[0].name||r[0].email,numTeamMembers:c};switch(p){case d.Zf.FULL:l=(0,o.t)("team_user.actions.team_members_upgraded.seat_rename",_);break;case d.Zf.STARTER:l=(0,o.t)("team_user.actions.team_members_downgraded_to_viewer.seat_rename",_);break;case d.Zf.RESTRICTED:l=(0,o.t)("team_user.actions.team_members_downgraded_to_viewer_restricted.seat_rename",_)}e.dispatch(s.F.enqueue({type:"team-paid-status-updated",message:l}))},members:r,team:n,paidStatusType:u,paidStatus:p},showModalsBeneath:_}))});let h=(0,u.MM)("TEAM_USER_UPDATE_DESIGN_PAID_STATUS",async(e,{teamId:r,teamUsers:n,usersWithNoTeamUserIds:s,paidStatus:l,paidStatusType:c,userInitiated:u,entryPoint:h},{optimistId:_})=>{if(u){let u=n.map(e=>e.user_id).concat(s||[]);await i.Ay.put(`/api/teams/${r}/team_user_batch`,{team_user_deltas:u.map(e=>{let r={user_id:e};return c===d.j4.WHITEBOARD?r.whiteboard_paid_status=l:r.design_paid_status=l,r}),entry_point:h}).then(function({data:n}){e.dispatch(p.c(_)),e.dispatch((0,m.yJ)({teamUsers:n.meta,teamId:r}))}).catch(function(r){e.dispatch(p.r(_));let n=(0,o.t)("team_user.actions.an_error_occurred_while_changing_a_team_member_s_billing_status");e.dispatch(a.s.error(n)),console.error(r)})}},e=>`$TEAM_USER_UPDATE_DESIGN_PAID_STATUS::teamId::${e.teamId}`)},419745:(e,r,n)=>{n.d(r,{c0:()=>m});var i=n(878028),a=n(611504),o=n(757033),s=n(479771),l=n(8374),c=n(997894),d=n(336901),u=n(50258),p=n(215858);let m=(0,a.NC)("ONBOARDING_TEMPLATES_PUT_ALL");(0,l.nF)(e=>{p.H.getTemplates({type:"onboarding"}).then(({data:r})=>{let n=r.meta;Object.keys(n).forEach(r=>{e.dispatch((0,s.Sb)({hubFiles:n[r],src:"getOnboardingTemplates"}))}),e.dispatch(m(n))})}),(0,l.nF)((e,r)=>o.Ay.post("/api/files/first_template_type",{template_type:r.type})),c.M4.Query({fetch:async e=>{let r=await u.S.getTaggedUserFiles({...e});return 200!==r.status||r.data.meta.files.length<1?[]:r.data.meta.files},key:"starter_files",schema:i.z.array(d.L)}),c.M4.Query({fetch:async()=>{let e=await p.H.getStartingPointsTemplates();if(200!==e.status)throw Error("Failed to fetch starting points templates");return e.data.meta},key:"starting_points_templates"})},957925:(e,r,n)=>{n.d(r,{C$:()=>P,S5:()=>A,WJ:()=>R,hz:()=>O,yJ:()=>D});var i=n(992277),a=n(611504),o=n(579020),s=n(141039),l=n(44509),c=n(691885),d=n(502255),u=n(896966),p=n(757033),m=n(442313),h=n(166500),_=n(697714),g=n(948895),f=n(790355),E=n(449737),y=n(481540),b=n(96321),v=n(625069),T=n(213613),I=n(708137),S=n(8374),w=n(110979);(0,S.nF)(async()=>{try{await p.Ay.post("/api/user/migrate_personal_drafts")}catch(e){(0,u.Lo)("planSpaces","Personal drafts not auto-migrated for user",e)}});let A=(0,S.nF)(async e=>{try{let r=e.getState();for(let i of r.authedUsers.orderedIds)if(await (0,b.z$)(i)){N();let i=n(136426).xv;e.dispatch(E.to({type:i,data:{users:Object.values(r.authedUsers.byId),onLogOut:()=>{e.dispatch(C())}}}));return}}catch(e){(0,d.$D)(i.e.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user"))}e.dispatch(C())}),C=(0,S.nF)(e=>{if(s.eD){l.Ay.redirect("/logout");return}let r=(0,v.d9)(e.getState().selectedView);I.H.logoutAllUsers().then(()=>{(0,y.Pg)(),g.U2.clear(),new c.P().sendToAllTabs(T.y,T.J),l.Ay.redirect(`${r?"/community":""}/?fuid=`)}).catch(r=>{let n=r.data?.message||(0,m.t)("file_browser.file_browser_actions.logout_error_without_email");e.dispatch(_.F.enqueue({error:!0,message:n}))})});(0,S.nF)(async(e,r)=>{try{if(await (0,b.z$)(r.user.id)){N();let i=n(136426).xv;e.dispatch(E.to({type:i,data:{users:[r.user],onLogOut:()=>{e.dispatch(L(r))}}}))}else e.dispatch(L(r))}catch(n){(0,d.$D)(i.e.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user")),e.dispatch(L(r))}});let N=()=>{try{(0,o.sx)("autosave_modal_shown",{},{forwardToDatadog:!0,batchRequest:!0})}catch(e){}},L=(0,S.nF)((e,r)=>{I.H.logoutOneUser(r.user.id).then(n=>{e.dispatch(f.os(n.data.meta)),e.dispatch(w.q0(n.data.meta)),n.data?.meta?.users?.length===0&&((0,y.Pg)(),g.U2.clear());let i=n.data?.meta?.redirect_url;i?l.Ay.redirect(i):e.dispatch(_.F.enqueue({message:(0,m.t)("file_browser.file_browser_actions.successfully_logged_out",{emailAddress:r.user.email})}))}).catch(n=>{let i=n.data?.message||(0,m.t)("file_browser.file_browser_actions.logout_error_with_email",{emailAddress:r.user.email});e.dispatch(_.F.enqueue({error:!0,message:i}))})}),O=(0,a.NC)("DELETE_USER_LOADING"),R=(0,a.NC)("USER_ERASE_SECRETS"),P=(0,a.NC)("USER_TOGGLE_TWO_FACTOR"),D=h.vv},404615:(e,r,n)=>{n.d(r,{Q$:()=>y});var i=n(741419),a=n(611504),o=n(757033),s=n(442313),l=n(833480),c=n(959334),d=n(697714),u=n(8374),p=n(323075),m=n(992444),h=n(555547),_=n(196484),g=n(790355);let f=e=>{let r=e.getState();e.dispatch(_.UU({force:!0})),r.mirror.appModel.showUi||m.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==i.NLJ.COMMENTS&&m.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(g.j7({type:h.a}))})};(0,u.nF)((e,r)=>{let n=e.getState(),i=(0,p.d1)(n);if(i&&r.fileKey===i.key&&n?.user?.id===r.userId){let n={text:(0,s.t)("comments.manage"),action:()=>f(e)},i="all"===r.preference?(0,s.t)("comments.you_will_be_notified_about_file_comments"):(0,s.t)("comments.you_will_be_notified_about_replies_and_at_mentions");e.dispatch(d.F.enqueue({message:i,type:"comments-opted-in",button:n,onDismiss:()=>{},timeoutOverride:15e3}))}});let E=(e,r)=>{let n;return"exp_notification_catfile"===r?n=`/api/user_notifications/catfile_optin/${e}`:"exp_notification_catfic"===r&&(n=`/api/user_notifications/catfic_optin/${e}`),e=>{o.Ay.post(n,{opted_in:e})}};(0,u.nF)((e,r)=>{let n=e.getState(),i=(0,p.d1)(n);if(i&&r.fileKey===i.key&&n?.user?.id===r.userId){let n=E(r.fileKey,r.experimentName),i={text:(0,s.t)("comments.turn_on"),action:()=>{n(!0)}};setTimeout(()=>{e.dispatch(d.F.enqueue({message:(0,s.t)("comments.get_notified_about_all_comments_prompt"),type:"get_notified_about_all_comments_prompt",button:i,onDismiss:()=>n(!1),timeoutOverride:15e3}))},5e3)}}),(0,u.nF)((e,r)=>{let n=e.getState(),i=(0,p.d1)(n);if(i&&r.fileKey===i.key&&n?.user?.id===r.userId){let n=E(r.fileKey,r.experimentName);setTimeout(()=>{e.dispatch(c.Q.enqueue({notification:{type:l._.SUBSCRIBED_TO_COMMENT_NOTIFICATIONS,message:(0,s.t)("comments.get_notified_about_all_comments_prompt"),acceptCallback:()=>n(!0),dismissCallback:()=>n(!1)}}))},5e3)}}),(0,u.nF)((e,r)=>{let n=e.getState(),i=(0,p.d1)(n);if(i&&r.fileKey===i.key&&n?.user?.id===r.userId){let r={text:(0,s.t)("comments.manage"),action:()=>f(e)},n=(0,s.t)("dev_mode.you_will_be_notified_about_status_changes");e.dispatch(d.F.enqueue({message:n,type:"dev-mode-opted-in",button:r,onDismiss:()=>{},timeoutOverride:15e3}))}});let y=(0,a.NC)("USER_NOTIFICATIONS_SET_COMMUNITY_PROFILE_BELL")},779073:(e,r,n)=>{n.d(r,{D6:()=>R,H1:()=>A,Ho:()=>P,U6:()=>C,Vw:()=>b,au:()=>N,cx:()=>I,gA:()=>y,hL:()=>O,rT:()=>v,w9:()=>T});var i=n(741419),a=n(39773),o=n(351766),s=n(611504),l=n(579020),c=n(858423),d=n(112920),u=n(757033),p=n(280198),m=n(442313),h=n(697714),_=n(8374),g=n(449977),f=n(301279),E=n(341550);let y=(0,s.NC)("UNSET_HOVERED_IN_MODAL_VOTE_PIN"),b=(0,s.NC)("SET_HOVERED_IN_MODAL_VOTE_PIN"),v=(0,s.NC)("DESELECT_VOTE_PIN"),T=(0,s.NC)("SELECT_VOTE_PIN"),I=(0,s.NC)("INITIATED_VOTING_SESSION");(0,_.nF)(async(e,{uiSurface:r})=>{let n=e.getState(),{fileKey:i}=n.selectedView,o=n.mirror.appModel.votingSessionInfo.sessionId;if(!i||!o)return;let s=S(i),l="end-voting-session-failed",c=()=>{e.dispatch(E.of({key:s})),e.dispatch(h.F.enqueue({type:l,message:(0,m.t)("voting.visual_bell.end_voting_session_failed")}))};e.dispatch(E.Cx({key:s})),e.dispatch(h.F.dequeue({matchType:l})),await u.Ay.put(`/api/file/${i}/voting_sessions/${o}`,{in_progress:!1}).then(({status:n})=>{200===n?(e.dispatch(E.x2({key:s})),"MeetingsPanel"===r&&a.zl.set(f.Qs,{type:"SET_VIEW",payload:f.iN.PAST_VOTES})):c()}).catch(e=>{throw c(),e})});let S=e=>`end_voting_session_${e}`;(0,_.nF)((e,{source:r,usedCustomTitle:n,requestBody:i,uiSurface:o})=>{let{fileKey:s}=e.getState().selectedView;if(!s)return;let c=w(s),d=()=>{e.dispatch(E.of({key:c})),e.dispatch(h.F.enqueue({type:"start-voting-session-failed",message:(0,m.t)("voting.visual_bell.start_voting_session_failed")}))};e.dispatch(E.Cx({key:c})),e.dispatch(h.F.dequeue({matchType:"start-voting-session-failed"})),u.Ay.post(`/api/file/${s}/voting_sessions`,i).then(i=>{200===i.status?(e.dispatch(I({votingSessionId:i.data.meta.id})),"MeetingsPanel"===o&&a.zl.get(f.Qs).activeToolModal===f.sx.VOTING&&a.zl.set(f.Qs,{type:"SET_TOOL",payload:null}),e.dispatch(E.x2({key:c})),(0,l.sx)("start_voting_session",{source:r,usedCustomTitle:n,votingSessionId:i.data.meta.id,fileKey:s})):d()}).catch(e=>{throw d(),e})});let w=e=>`create_voting_session_${e}`;(0,_.nF)((e,{votingSessionId:r})=>{let n=e.getState().selectedView;if(!n.fileKey)return null;let i=u.Ay.del(`/api/file/${n.fileKey}/voting_sessions/${r}`);e.dispatch((0,p.Q)({promise:i,fallbackError:(0,m.t)("voting.modal.delete_voting_session_error")})),e.dispatch(h.F.enqueue({message:(0,m.t)("voting.modal.delete_voting_session_visual_bell")})),(0,d.f)(i,e.dispatch,L({votingSessionId:r})),(0,c.WB)().optimisticallyDelete({VotingSession:{[r]:null}},i)});let A=(0,_.nF)((e,r)=>{let n;let a=r.votingStage,s=e.getState(),l=s?.mirror?.appModel?.currentPage;if(a===i.W8Y.NO_SESSION){i.ofk.setVotingSessionInfo("",i.W8Y.NO_SESSION,0,l);return}let c=s?.openFile?.votingSessions;if(a===i.W8Y.ENDED){let e=r.sessionId;n=c?.find(r=>r.id===e&&!r.inProgress)}else n=c?.find(e=>e.inProgress);if(!n)return;let d=(0,o.oA)(n.pageNodeId);d&&(i.ofk.setVotingSessionInfo(n.id,a,n.userVoteLimit,d),a===i.W8Y.JOINED&&(e.dispatch(C()),s.mirror.selectionProperties.whiteboardNumSelectedByType?.STAMP&&(0,g.wr)()))}),C=(0,s.NC)("DISMISS_JOIN_CONFIRMATION"),N=(0,s.NC)("HIDE_JOIN_VOTING_SESSION_MODAL"),L=(0,s.NC)("DELETE_VOTING_SESSION"),O=(0,s.NC)("SET_VOTES_PER_USER_LIMIT"),R=(0,s.NC)("SET_TITLE"),P=(0,s.NC)("CLEAR_STATE")},91635:(e,r,n)=>{n.d(r,{NX:()=>H});var i=n(848318),a=n(716544),o=n(719670),s=n(157907),l=n(508242),c=n(579020),d=n(193324),u=n(397579),p=n(858423),m=n(493554),h=n(195507),_=n(502255),g=n(940398),f=n(896966),E=n(507152),y=n(757033),b=n(196484),v=n(711203),T=n(235441),I=n(417944),S=n(507720),w=n(454249),A=n(990022),C=n(661780),N=n(635547),L=n(241917),O=n(985065),R=n(170513),P=n(280137),D=n(571218),M=n(500341),k=n(467298);class F{constructor(e){this.client=e}toggleReaction(e,r,n){if("loaded"!==this.client.subscription.status)throw Error("Unable to toggle reactions for unloaded subscription");return this.getReactions(e).find(n=>n.emoji===r&&n.fileCommentId===e&&n.userId===this.client.user.id)?this.removeReaction(e,r):this.addReaction(e,r,n)}async addReaction(e,r,n){let i=y.Ay.post(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:r,prototype_mode:n?.prototype_mode||!1,selected_view:n?.selectedView||"",quick_reply:n?.quickReply||!1});return this.client.optimistically(async(n,a,o)=>{let s=new Date,l=`${e}_${r}_${o.id}`;await a.optimisticallyCreate({CommentReaction:{[l]:{fileCommentId:e,emoji:r,fileKey:n.file.id,userId:o.id,user:{id:o.id,handle:o.handle,imgUrl:o.img_url},createdAt:s,sortTimestamp:s}}},i)}),await i}async removeReaction(e,r){let n=y.Ay.del(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:r});return this.client.optimistically(async(i,a,o)=>{let s=o.id,l=this.getReactions(e).filter(e=>e.emoji===r&&e.userId===s).map(e=>e.id),c=l?.reduce((e,r)=>({...e,[r]:null}),Object.create(null));await a.optimisticallyDelete({CommentReaction:c},n)}),await n}getReactions(e){if("loaded"!==this.client.subscription.status)throw Error("Unable to get reaction for unloaded subscription");let r=this.client.subscription.data.file;if(!r)throw Error("Unable to get reaction for unloaded subscription");if("reactions"in r)return r.reactions.filter(r=>r.fileCommentId===e);{let n=r.mobileCommentThread.find(r=>r.id===e);return n?n.reactions:[]}}}function x(e){return e.map(e=>({...e,id:e.id.toString()}))}class U{constructor(e){this.client=e}trackMissingCommentData(e,r,n,i,a,o){let s=!1;k.O.records[n.id]={parentId:n.parent_id,report:(r,l)=>{if(!s&&(s=!0,(0,_.kF)("comments_optimistic_updates","true"),(0,_.kF)("isLoadedComments",a.isLoadedComments?"true":"false"),(0,_.kF)("commentType",e),(0,f.x1)(r,l,{id:n.id,fileKey:this.client.fileKey,parentId:n.parent_id,pageId:n.client_meta?.page_id,userId:this.client.user.id,clientMeta:n.client_meta,...o}),this.client.livegraphClient)){let e=i(),n=null,a=null,o=null;for(let i of e)if("VIEW_QUERY_NODE.REMOVE_RESULT"===i.type||"STORE.ADD_INSTANCE"===i.type||"STORE.REMOVE_INSTANCE"===i.type||"SESSION.APPLY_MUTATIONS"===i.type||"SESSION.APPLY_SHADOW_MUTATIONS"===i.type||"SESSION.REMOVE_SHADOW_MUTATIONS"===i.type||"REQUEST_MESSAGE"===i.type&&"sync"===i.message.messageType||"RESPONSE_MESSAGE"===i.type&&"synced"===i.message.messageType||"RESPONSE_MESSAGE"===i.type&&"pendingMutations"===i.message.messageType)(0,f.Lo)(r,JSON.stringify(i));else if("VIEW_QUERY_NODE.ADD_RESULT"===i.type||"VIEW_QUERY_NODE.UPDATE_RESULT"===i.type){if(i.type===n&&i.queryId===a&&i.instance===o)continue;(0,f.Lo)(r,JSON.stringify(i)),n=i.type,a=i.queryId,o=i.instance}else"SESSION.NOTIFY_OBSERVERS"===i.type&&i.view._name.includes("Comments")&&(0,f.Lo)(r,JSON.stringify({type:"SESSION.NOTIFY_OBSERVERS",viewName:i.view._name}));(0,f.x1)(r,l)}}},setTimeout(()=>{let a=k.O.records[n.id];if(a||i(),delete k.O.records[n.id],"loaded"!==this.client.subscription.status)return;let o=this.client.loadedComments.some(e=>e.id===n.id||e.id===r);a&&!o?a.report(`${e} Never Appeared`,"Comment failed to appear within ten seconds of creation"):i()},1e4)}create(e,r){let n=(0,p.S6)(),{fileKey:i,messageMeta:a,attachments:o,clientMeta:l,pageId:u,uuid:m}=e;(0,c.sx)("New comment API create",{uuid:m});let h=(0,s.k)().show_at_mention_invited_users?[...new Set((0,d.cs)(a))]:[],_=async e=>{let n=e.data?.reason;if(!n||"comment_validation_failure"!==n.reason||!r?.onValidationError)throw e;let s=n.failure_info,d=await r.onValidationError(x(s.users_without_view),x(s.ext_users_without_view),x(s.uninvitable_users));return d?((0,c.sx)("New comment API handling validation",{uuid:m}),y.Ay.post(`/api/file/${i}/comments`,{file_key:i,message_meta:a,attachments:o.map(e=>e.id),client_meta:l,page_id:u,prototype_mode:r?.prototypeMode,share_to_mentions:d.forceWithInvite,force:d.forceMentions,uuid:m,pending_mentions:h}).catch(_)):null},g=(0,D.e)(this.client.subscription),f=this.client.subscription.data?.file?.currentUserCommentReadStatus,E=y.Ay.post(`/api/file/${i}/comments`,{file_key:i,message_meta:a,attachments:o.map(e=>e.id),client_meta:l,page_id:u,prototype_mode:r?.prototypeMode,share_to_mentions:null===r.onValidationError,force:null===r.onValidationError,pending_mentions:h,uuid:m,...!f&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically((e,r)=>{let n=this.client.loadedComments.map(e=>e.orderId||0),s=n.length>0?Math.max(...n):0,c=(0,d.Rc)(a);r.optimisticallyCreateWithUUID({Comment:{[m]:{uuid:m,key:i,userId:this.client.user.id,parentId:null,orderId:s+1,createdAt:new Date,resolvedAt:null,deletedAt:null,clientMeta:{x:l.x,y:l.y,nodeId:l.node_id||null,pageId:l.page_id||null,nodeOffset:l.node_offset||null,inFrame:l.in_frame||null,selectionBoxAnchor:l.selection_box_anchor||null,stablePath:l.stable_path||null},messageMeta:c,messageMetaStylized:c,user:{id:this.client.user.id,handle:this.client.user.handle,imgUrl:this.client.user.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null}}},E);let u=(0,I.Mu)(o,i,m);if(u&&r.optimisticallyCreate({CommentAttachment:u},E),!e.file.currentUserCommentReadStatus){let e=new Date;r.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${e.getTime()}`]:{userId:this.client.user.id,fileKey:this.client.fileKey,createdAt:e,allReadAt:S.gj.allReadAt,readComments:{},unreadComments:{}}}},E)}}),[E.catch(_).then(e=>{if(!e)return null;try{let i=e.data.meta;this.trackMissingCommentData("New Comment",m,i,n,{isLoadedComments:g},r)}catch{}return e}),m]}reply(e,r){let n=(0,p.S6)(),{threadId:i,threadUuid:a,messageMeta:o,attachments:s,uuid:l}=e,{fileKey:u}=this.client,m=(0,d.cs)(o),h=y.Ay.post(`/api/file/${u}/comments/${e.threadId}`,{file_key:u,uuid:l,message_meta:o,attachments:s.map(e=>e.id),prototype_mode:r?.prototypeMode,share_to_mentions:r.forceWithInvite||!1,force:r.forceMention||!1,tracking_context:r.trackingContext,pending_mentions:m}),_=(0,d.Rc)(o),g=(0,D.e)(this.client.subscription),{user:f}=this.client;return this.client.optimistically((e,r)=>{a?r.optimisticallyUpdateWithUUID({Comment:{[a]:{uuid:a,resolvedAt:null}}},h):r.optimisticallyUpdate({Comment:{[i]:{resolvedAt:null}}},h),(0,c.sx)("Livegraph Optimistic Comment Update",{flow:"reply",isOptimistic:!!a}),r.optimisticallyCreateWithUUID({Comment:{[l]:{uuid:l,key:u,userId:f.id,parentId:i,orderId:null,createdAt:new Date,resolvedAt:null,deletedAt:null,clientMeta:null,messageMeta:_,messageMetaStylized:_,user:{id:f.id,handle:f.handle,imgUrl:f.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null,attachments:s.map(e=>(0,I.QG)(e,u,l))}}},h);let n=(0,I.Mu)(s,u,l);n&&r.optimisticallyCreate({CommentAttachment:n},h)}),[h.then(e=>{if(!e)return null;let i=e.data.meta;return this.trackMissingCommentData("Reply Comment",l,i,n,{isLoadedComments:g},r),e}),l]}}class B{constructor(e){this.client=e}get commentReceipts(){return this}async markAsUnread(e){let r=this.client.subscription.data?.file?.currentUserCommentReadStatus,n=y.Ay.post(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:[e],...!r&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically(async(r,i,a)=>{let o=r.file.currentUserCommentReadStatus,s=new Date;if(o){let{[e]:r,...a}=o.readComments;await i.optimisticallyUpdate({CommentReadStatus:{[o.id]:{...o,allReadAt:S.gj.allReadAt,readComments:a,unreadComments:{...o.unreadComments,[e]:"true"}}}},n)}else await i.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${s.getTime()}`]:{userId:a.id,fileKey:this.client.fileKey,createdAt:s,allReadAt:S.gj.allReadAt,readComments:{},unreadComments:{[e]:"true"}}}},n)}),await n}async markAllAsRead(){let e=this.client.subscription.data?.file?.currentUserCommentReadStatus,r=y.Ay.del(`/api/file/${this.client.fileKey}/unread_comments`,{...!e&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically(async(e,n,i)=>{let a=e.file.currentUserCommentReadStatus,o=new Date;a?await n.optimisticallyUpdate({CommentReadStatus:{[a.id]:{...a,allReadAt:o,readComments:{},unreadComments:{}}}},r):await n.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${o.getTime()}`]:{userId:i.id,fileKey:this.client.fileKey,createdAt:o,allReadAt:o,readComments:{},unreadComments:{}}}},r)}),await r}async markAsRead(e){let r=this.client.subscription.data?.file?.currentUserCommentReadStatus,n=y.Ay.del(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:e,...!r&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically(async(r,i,a)=>{let o=r.file.currentUserCommentReadStatus,s=new Date,l=e.reduce((e,r)=>({...e,[r]:s.toUTCString()}),{});o?await i.optimisticallyUpdate({CommentReadStatus:{[o.id]:{...o,readComments:{...o.readComments,...l},unreadComments:Object.keys(o.unreadComments).filter(r=>!e.includes(r)).reduce((e,r)=>(e[r]="true",e),{})}}},n):await i.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${s.getTime()}`]:{userId:a.id,fileKey:this.client.fileKey,createdAt:s,allReadAt:S.gj.allReadAt,readComments:l,unreadComments:{}}}},n)}),await n}}let V=(0,l.xx)(e=>{let r=e=>(e.hasOwnProperty("transform")||Object.defineProperty(e,"transform",{get:function(){return{filter:n=>r(e.filter(n)),map:n=>r(e.map(n)),join:n=>r([...e,...n||[]])}}}),e);return r(e)});function G(e,r,n){let a=i.useMemo(()=>{if("loaded"!==n.status)return new Set([]);let e=n.data.file;return new Set(e?"comments"in e?e.comments.map(e=>e.id):e.resolvedComments.map(e=>e.id):[])},[n]),o=(0,u.ZC)(a),{removed:s}=i.useMemo(()=>(0,g.Zv)(a,o),[a,o]),l=i.useCallback(e,r);i.useEffect(()=>{s.forEach(e=>{l(e)})},[l,s])}function H(e){let{userId:r,file:n,activeId:l,anchorPositions:c,boundingBoxPositions:d,DEPRECATED_updateWatchedNodeIds:u,updateWatchedStablePaths:p,getPageIdsForNodes:_,children:g}=e,f=i.useRef({}),y=(0,T.E3)()===L.nT.Whiteboard,I=!!(0,s.k)().xr_debounce_threshold,S=n?.key,x=!!S,H=i.useMemo(()=>({fileKey:S??""}),[S]),K=i.useMemo(()=>(0,E.g)(),[H]),W=(0,m.Rs)(R.$J,H,{enabled:x,traceId:K}),z=(0,m.Rs)(N.ZBn,H,{enabled:x}),$=(0,m.Rs)(N.qRE,H,{enabled:I&&x}),Y=(0,m.Rs)(N.gkf,H,{enabled:y&&x}),j=(0,a.d4)(e=>e.comments.lgPendingUuidToServerIdMap),q=(0,a.wA)(),X=i.useMemo(()=>{if("loaded"!==W.status||!W.data.file)return W;let e=V(W.data.file.comments).transform.filter(e=>null===e.resolvedAt);if("loaded"===z.status){let r=z.data.file?.resolvedComments;e=e.transform.join(r)}let r={...W.data.file,comments:e};return{...W,data:{...W.data,file:r}}},[W,z]);i.useMemo(()=>{"loaded"===X.status&&X.data?.file?.comments?.forEach(e=>{e.id in j?(f.current[e.id]=e,e.id=j[e.id]):e.uuid&&e.uuid in j&&f.current[e.uuid]&&f.current[e.uuid]!==e&&(q(b.pI({commentUuid:e.uuid})),delete f.current[e.uuid])})},[q,X,j]);let Z=(0,a.d4)(e=>e.mirror.appModel.pagesList),{commentsAttachedToNodes:J,commentThreadNodeIds:Q,commentThreadStablePaths:ee}=i.useMemo(()=>{if("loaded"!==X.status||!X.data.file)return{commentThreadsNodeIds:[],commentsAttachedToNodes:[]};let e=[],r=new Set,n=new Set;return X.data.file.comments.forEach(i=>{if(null===i.parentId){let a=i.clientMeta?.nodeId,o=i.clientMeta?.stablePath;o&&p?(e.push(i),n.add(`[${o.join(",")}]`)):a&&u&&(e.push(i),r.add(a))}}),{commentsAttachedToNodes:e,commentThreadNodeIds:r,commentThreadStablePaths:n}},[X,u,p]),et=i.useMemo(()=>{if("loaded"!==X.status||!X.data.file||I&&!$.data?.file)return[];let e=new Set(Q);return I&&(0,A.N)($.data.file.feedPosts).forEach(r=>{e.add(r)}),Array.from(e)},[X,$,I,Q]),er=i.useMemo(()=>"loaded"===X.status&&X.data.file?Array.from(new Set(ee)):[],[X,ee]);i.useEffect(()=>{u&&u(et),p&&p(er)},[u,et,p,er]);let en=(0,w.W9)(r,X,l,c,_,Z),ei=(0,w.gu)(r,Y,e.activeId),ea=(0,O.i)($,e.activeId,_,d),eo=i.useMemo(()=>{if("loaded"!==X.status||I&&"loaded"!==$.status||y&&"loaded"!==Y.status)return(0,h.gB)([]);let e=[];return en.data&&(e=e.concat(en.data)),ei.data&&(e=e.concat(ei.data)),ea.data&&(e=e.concat(ea.data)),(0,h.gB)(e)},[X.status,I,$.status,y,Y.status,en.data,ei.data,ea.data]),es=function(e){let r=(0,m.ZA)(),n=(0,C.iZ)(),{args:a,subscription:s}=e,[l,c]=i.useState(()=>{if(n)return new D.I(a,s,n)});return i.useEffect(()=>{if(!n){c(void 0);return}if(!l||!(0,o.c2)(l.args,a)){c(new D.I(a,s,n));return}},[l,a,s,n,r]),l&&(n&&(l.user=n),l.subscription=s,l.livegraphClient=r),i.useMemo(()=>l?{commentReceipts:new B(l),reactionsApi:new F(l),writeAPI:new U(l),pinApi:new M.xI(l)}:{},[l])}({args:H,subscription:X}),el=(0,P.r)({args:H,subscription:$});es.canvasMentionReceipts=(0,v.pf)({canvasMentionArgs:H,canvasMentionSubscription:Y}),(0,w.Hu)(J,{enabled:!!(0,s.k)().comments_absolute_positioning}),G(e=>{k.O.records[e]?.report?.("New Comment Missing","Comment disappeared within ten seconds of creation")},[],W),G(e=>{k.O.records[e]?.report?.("New Resolved Comment Missing","Resolved comment disappeared within ten seconds of creation")},[],z);let ec=i.useMemo(()=>x?{...X,api:es,feedApi:el,threads:eo,isUnresolvedLoaded:"loaded"===W.status,isResolvedLoaded:"loaded"===z.status}:{status:"loading",data:null,errors:null,threads:(0,h.Xm)(),api:{},isUnresolvedLoaded:!1,isResolvedLoaded:!1},[x,X,es,el,eo,W.status,z.status]);return i.createElement(R.kR,{value:ec},g)}},759431:(e,r,n)=>{n.d(r,{t:()=>o});var i=n(157907),a=n(442313);function o(){let e=(0,i.k)().ce_tv_fill_hug_suggest?[{separator:!0},{action:"set-selection-hug-horizontal",displayText:(0,a.t)("fullscreen_actions.set-hug-width")},{action:"set-selection-hug-vertical",displayText:(0,a.t)("fullscreen_actions.set-hug-height")},{action:"set-selection-fill-horizontal",displayText:(0,a.t)("fullscreen_actions.set-fill-width")},{action:"set-selection-fill-vertical",displayText:(0,a.t)("fullscreen_actions.set-fill-height")}]:[];return{name:"multi-stack-selection-submenu",featureFlags:["auto_auto_layout"],flags:["design","edit","slides"],children:[{action:"run-multi-stack-auto-layout",displayText:(0,a.t)("fullscreen_actions.run-multi-stack-auto-layout")},{action:"destroy-all-auto-layout",displayText:(0,a.t)("fullscreen_actions.destroy-all-auto-layout")},{separator:!0},{action:"resize-to-fit",displayText:(0,a.t)("fullscreen_actions.resize-to-fit")},...e]}}},901647:(e,r,n)=>{n.d(r,{E2:()=>m,M5:()=>a,N$:()=>f,Tb:()=>u,WX:()=>_,W_:()=>s,XG:()=>l,YN:()=>h,ZO:()=>i,_O:()=>p,aY:()=>d,s0:()=>o,xP:()=>g});var i=(e=>(e.USERS="users",e.TEAMS="teams",e.ORGS="orgs",e.PLUGINS="plugins",e.WIDGETS="widgets",e.HUB_FILES="hub_files",e.PROFILES="profiles",e.CATEGORIES="community_categories",e))(i||{}),a=(e=>(e.HUB_FILE_DUPLICATED="Hub File Duplicated",e.PLUGIN_INSTALLED="Hub Plugin Installed",e.PLUGIN_UNINSTALLED="Hub Plugin Uninstalled",e.WIDGET_INSTALLED="Hub Widget Installed",e.WIDGET_UNINSTALLED="Hub Widget Uninstalled",e.SLIDE_TEMPLATE_USED="slide_template_used",e.RESOURCE_LIKE="resource_like",e.RESOURCE_UNLIKE="resource_unlike",e.SEARCH_QUERY_RESULT="search_query_result",e))(a||{}),o=(e=>(e.PLUGIN_INSTALL="community_hub_plugin_install",e.PLUGIN_UNINSTALL="community_hub_plugin_uninstall",e.PROFILE_FOLLOW="community_hub_follow",e.PROFILE_UNFOLLOW="community_hub_unfollow",e.HUB_FILE_LIKE="community_hub_file_like",e.HUB_FILE_UNLIKE="community_hub_file_unlike",e.PLUGIN_LIKE="community_plugin_like",e.PLUGIN_UNLIKE="community_plugin_unlike",e.WIDGET_LIKE="community_widget_like",e.WIDGET_UNLIKE="community_widget_unlike",e.SHARE_TWITTER="community_hub_share_twitter",e.LANDING_PAGE_TO_CURATED_PAGE_BUTTON="landing_page_to_curated_page_button",e.SHARE_FACEBOOK="community_hub_share_facebook",e.SHARE_LINK="community_hub_share_link",e.CREATE_PROFILE="community_hub_create_profile",e.COMMUNITY_OPT_IN="community_hub_opt_in",e.UPDATE_PROFILE_HANDLE="community_hub_update_handle",e.PLUGIN_INSTALL_CONFIRMATION_MODAL_SHOWN="community_hub_plugin_install_warning_shown",e.PLUGIN_INSTALL_CONFIRMATION_MODAL_CANCEL="community_hub_plugin_install_warning_cancel",e.SEE_MORE_IN_COMMUNITY="see_more_in_community",e.FIND_MORE_PLUGINS="find_more_plugins",e))(o||{}),s=(e=>(e.PROFILE_ADMIN_MENU_OPEN="Community browse menu opened",e))(s||{}),l=(e=>(e.PLUGINS="plugins",e.FILES="files",e.CREATORS="creators",e.FIGJAM_PLUGINS="figjam_plugins",e.FIGMA_DESIGN_PLUGINS="figma_design_plugins",e.WIDGETS="widgets",e.FIGJAM_WIDGETS="figjam_widgets",e.FIGMA_DESIGN_WIDGETS="figma_design_widgets",e))(l||{}),c=(e=>(e.POPULAR="popular",e.CREATED_AT="created_at",e.FOLLOWING_FEED="feed",e.INSTALLS_DESC="installs",e.RUNS_DESC="runs",e.LAST_UPDATED_DESC="updated_at",e.INSTALLS_ASC="installs_asc",e.RUNS_ASC="runs_asc",e.LAST_UPDATED_ASC="updated_at_asc",e))(c||{}),d=(e=>(e.FREE_HUB_FILE_LICENSE="https://creativecommons.org/licenses/by/4.0/",e.FREE_PLUGIN_LICENSE="https://www.figma.com/community-resource-license/",e.FREE_RESOURCE_LICENSE="https://www.figma.com/community-free-resource-license/",e.PAID_RESOURCE_LICENSE="https://www.figma.com/community-paid-resource-license/",e))(d||{});let u="checkout",p="freemium_preview",m="1",h="community_publish_modal";var _=(e=>(e.OPENED="opened",e.EDIT_NAME="edit_name",e.EDIT_DESCRIPTION="edit_description",e.DETAILS="details",e.ERROR="error",e.PUBLISH="publish",e.CLOSED="closed",e.ADD_CAROUSEL_MEDIA="add_carousel_media",e.DELETE_CAROUSEL_MEDIA="delete_carousel_media",e.ADD_CUSTOM_THUMBNAIL="add_custom_thumbnail",e))(_||{}),g=(e=>(e.FILE_INPUT="file_input",e.DROP="drop",e))(g||{}),f=(e=>(e.INTERNAL="internal",e.COMMUNITY="community",e))(f||{})},927589:(e,r,n)=>{n.d(r,{BG:()=>S,Fh:()=>C,LM:()=>v,L_:()=>A,UV:()=>b,WT:()=>T,hY:()=>d,ln:()=>w,qt:()=>I});var i=n(988520),a=n(684130),o=n(636974),s=n(130612),l=n(452557);let c=[{deviceName:"Slide 16:9",framePresetSize:{x:1920,y:1080}},{deviceName:"Slide 4:3",framePresetSize:{x:1024,y:768}}],d=Object.create(null);for(let e of[o.eo,s.o,l.t,a.E])for(let r of e)d[r.presetIdentifier]=r;function u(e,r){let n=new Set,i=[];for(let a of e)n.has(a.deviceName)||(n.add(a.deviceName),a.archived?r?.push(a.deviceName):i.push(a.deviceName));return i}let p=[],m=u(o.eo,p),h=u(s.o,p),_=u(l.t,p),g=u(a.E,p),f=Object.create(null);for(let e in d){let r=d[e],n=r.deviceName;n in f||(f[n]=[]),f[n].push(r)}let E=(e,r)=>{for(let n of[o.eo,s.o,l.t,a.E])for(let i of n)if(i.framePresetSize.x===e&&i.framePresetSize.y===r)return i;return null};var y=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.PHONE=1]="PHONE",e[e.TABLET=2]="TABLET",e[e.WATCH=3]="WATCH",e[e.DESKTOP=4]="DESKTOP",e))(y||{});let b={1:m,2:h,3:_,4:g,0:[]},v={1:u(o.eo.filter(function(e){return!0===e.isSuggested})).slice(0,5),2:u(s.o).slice(0,5),3:u(l.t).slice(0,5),4:u(a.E).slice(0,5),0:[]};function T(e,r){let n=d[r.presetIdentifier];return e.map(e=>e===n.deviceName?null:C(e,r)).filter(i.Vq)}function I(e){let r=d[e];if(null==r)return 0;let n=r.deviceName;return -1!==m.indexOf(n)?1:-1!==h.indexOf(n)?2:-1!==_.indexOf(n)?3:-1!==g.indexOf(n)?4:0}function S(e,r){for(let n of c)if(n.framePresetSize.x===e&&n.framePresetSize.y===r)return{type:"PRESENTATION",presetIdentifier:"",portraitDeviceSize:{x:0,y:0},rotation:"NONE"};let n=E(e,r);return null!=n?{type:"PRESET",presetIdentifier:n.presetIdentifier,portraitDeviceSize:n.framePresetSize,rotation:"NONE"}:null!=(n=E(r,e))&&function(e,r){if("NONE"===e||"PRESENTATION"===e)return!1;if("CUSTOM"===e)return!0;if("PRESET"===e&&null!=r){let e=d[r];if(null!=e){let r=-1!==_.indexOf(e.deviceName),n=-1!==g.indexOf(e.deviceName);return!r&&!n}}return!1}("PRESET",n.presetIdentifier)?{type:"PRESET",presetIdentifier:n.presetIdentifier,portraitDeviceSize:n.framePresetSize,rotation:"CCW_90"}:null}function w(e){let r=I(e||"");return 4!==r&&0!==r}let A=e=>!!function(e){let r=d[e];return r?.inlinePreviewInfo||null}(e);function C(e,r){let n=d[e]||f[e][0];if(r&&"PRESET"===r.type){let i=d[r.presetIdentifier],a=i.hideUnlessActive&&!i.archived&&n.framePresetSize.x===i.framePresetSize.x&&n.framePresetSize.y===i.framePresetSize.y;if(i&&i.deviceName===e)n=i;else if(!a&&n.hideUnlessActive&&!n.archived)return null}else if(n.hideUnlessActive&&!n.archived)return null;return n}},140536:(e,r,n)=>{n.d(r,{$W:()=>u,fS:()=>p});var i=n(442313);let a=[{name:"Android Compact",width:412,height:917,i18nName:()=>(0,i.t)("presets.android_compact")},{name:"Android Medium",width:700,height:840,i18nName:()=>(0,i.t)("presets.android_medium")},{name:"iPhone 16",width:393,height:852,i18nName:()=>(0,i.t)("presets.i_phone_16")},{name:"iPhone 16 Pro",width:402,height:874,i18nName:()=>(0,i.t)("presets.i_phone_16_pro")},{name:"iPhone 16 Pro Max",width:440,height:956,i18nName:()=>(0,i.t)("presets.i_phone_16_pro_max")},{name:"iPhone 16 Plus",width:430,height:932,i18nName:()=>(0,i.t)("presets.i_phone_16_plus")},{name:"iPhone 14 & 15 Pro Max",width:430,height:932,i18nName:()=>(0,i.t)("presets.i_phone_14_and_15_pro_max")},{name:"iPhone 14 & 15 Pro",width:393,height:852,i18nName:()=>(0,i.t)("presets.i_phone_14_and_15_pro")},{name:"iPhone 13 & 14",width:390,height:844,i18nName:()=>(0,i.t)("presets.i_phone_13_and_14")},{name:"iPhone 14 Plus",width:428,height:926,i18nName:()=>(0,i.t)("presets.i_phone_14_plus")},{name:"iPhone 13 mini",width:375,height:812,i18nName:()=>(0,i.t)("presets.i_phone_13_mini")},{name:"iPhone SE",width:320,height:568,i18nName:()=>(0,i.t)("presets.i_phone_se")}],o=[{name:"Android Expanded",width:1280,height:800,i18nName:()=>(0,i.t)("presets.android_expanded")},{name:"Surface Pro 8",width:1440,height:960,i18nName:()=>(0,i.t)("presets.surface_pro_8")},{name:"iPad mini 8.3",width:744,height:1133,i18nName:()=>(0,i.t)("presets.i_pad_mini_8_3")},{name:'iPad Pro 11"',width:834,height:1194,i18nName:()=>(0,i.t)("presets.i_pad_pro_11")},{name:'iPad Pro 12.9"',width:1024,height:1366,i18nName:()=>(0,i.t)("presets.i_pad_pro_12_9")}],s=[{name:"MacBook Air",width:1280,height:832,i18nName:()=>(0,i.t)("presets.mac_book_air_m2")},{name:'MacBook Pro 14"',width:1512,height:982,i18nName:()=>(0,i.t)("presets.mac_book_pro_14")},{name:'MacBook Pro 16"',width:1728,height:1117,i18nName:()=>(0,i.t)("presets.mac_book_pro_16")},{name:"Desktop",width:1440,height:1024,i18nName:()=>(0,i.t)("presets.desktop")},{name:"Wireframe",width:1440,height:1024,i18nName:()=>(0,i.t)("community.categories.wireframe")},{name:"TV",width:1280,height:720,i18nName:()=>(0,i.t)("presets.tv")}],l=[{name:"Slide 16:9",width:1920,height:1080,i18nName:()=>(0,i.t)("presets.slide_16_9")},{name:"Slide 4:3",width:1024,height:768,i18nName:()=>(0,i.t)("presets.slide_4_3")}],c=[{name:"A4",width:595,height:842,i18nName:()=>(0,i.t)("presets.a_4")},{name:"A5",width:420,height:595,i18nName:()=>(0,i.t)("presets.a_5")},{name:"A6",width:297,height:420,i18nName:()=>(0,i.t)("presets.a_6")},{name:"Letter",width:612,height:792,i18nName:()=>(0,i.t)("presets.letter")},{name:"Tabloid",width:792,height:1224,i18nName:()=>(0,i.t)("presets.tabloid")}],d=m(Object.values({phonePresets:a,tabletPresets:o,desktopPresets:s,presentationPresets:l,watchPresets:[{name:"Apple Watch Series 10 42mm",width:187,height:223,i18nName:()=>(0,i.t)("presets.apple_watch_series_10_42_mm")},{name:"Apple Watch Series 10 46mm",width:208,height:248,i18nName:()=>(0,i.t)("presets.apple_watch_series_10_46_mm")},{name:"Apple Watch 41mm",width:176,height:215,i18nName:()=>(0,i.t)("presets.apple_watch_41_mm")},{name:"Apple Watch 45mm",width:198,height:242,i18nName:()=>(0,i.t)("presets.apple_watch_45_mm")},{name:"Apple Watch 44mm",width:184,height:224,i18nName:()=>(0,i.t)("presets.apple_watch_44_mm")},{name:"Apple Watch 40mm",width:162,height:197,i18nName:()=>(0,i.t)("presets.apple_watch_40_mm")}],paperPresets:c,socialMediaPresets:[{name:"Twitter post",width:1200,height:675,i18nName:()=>(0,i.t)("presets.twitter_post")},{name:"Twitter header",width:1500,height:500,i18nName:()=>(0,i.t)("presets.twitter_header")},{name:"Facebook post",width:1200,height:630,i18nName:()=>(0,i.t)("presets.facebook_post")},{name:"Facebook cover",width:820,height:312,i18nName:()=>(0,i.t)("presets.facebook_cover")},{name:"Instagram post",width:1080,height:1080,i18nName:()=>(0,i.t)("presets.instagram_post")},{name:"Instagram story",width:1080,height:1920,i18nName:()=>(0,i.t)("presets.instagram_story")},{name:"Dribbble shot",width:400,height:300,i18nName:()=>(0,i.t)("presets.dribbble_shot")},{name:"Dribbble shot HD",width:800,height:600,i18nName:()=>(0,i.t)("presets.dribbble_shot_hd")},{name:"LinkedIn cover",width:1584,height:396,i18nName:()=>(0,i.t)("presets.linked_in_cover")}],figmaPresets:[{name:"Plugin icon",width:128,height:128,i18nName:()=>(0,i.t)("presets.plugin_icon")},{name:"Profile banner",width:1680,height:240,i18nName:()=>(0,i.t)("presets.profile_banner")},{name:"Plugin / file cover",width:1920,height:1080,i18nName:()=>(0,i.t)("presets.plugin_file_cover")}],archivedPresets:[{name:"iPhone 13 Pro Max",width:428,height:926,i18nName:()=>(0,i.t)("presets.i_phone_13_pro_max")},{name:"iPhone 13 / 13 Pro",width:390,height:844,i18nName:()=>(0,i.t)("presets.i_phone_13_13_pro")},{name:"iPhone 11 Pro Max",width:414,height:896,i18nName:()=>(0,i.t)("presets.i_phone_11_pro_max")},{name:"iPhone 11 Pro / X",width:375,height:812,i18nName:()=>(0,i.t)("presets.i_phone_11_pro_x")},{name:"iPhone 8 Plus",width:414,height:736,i18nName:()=>(0,i.t)("presets.i_phone_8_plus")},{name:"iPhone 8",width:375,height:667,i18nName:()=>(0,i.t)("presets.i_phone_8")},{name:"Android Small",width:360,height:640,i18nName:()=>(0,i.t)("presets.android_small")},{name:"Android Large",width:360,height:800,i18nName:()=>(0,i.t)("presets.android_large")},{name:"Google Pixel 2",width:411,height:731,i18nName:()=>(0,i.t)("presets.google_pixel_2")},{name:"Google Pixel 2 XL",width:411,height:823,i18nName:()=>(0,i.t)("presets.google_pixel_2_xl")},{name:"iPad mini 5",width:768,height:1024,i18nName:()=>(0,i.t)("presets.i_pad_mini_5")},{name:"Surface Pro 4",width:1368,height:912,i18nName:()=>(0,i.t)("presets.surface_pro_4")},{name:"MacBook",width:1152,height:700,i18nName:()=>(0,i.t)("presets.mac_book")},{name:"MacBook Pro",width:1440,height:900,i18nName:()=>(0,i.t)("presets.mac_book_pro")},{name:"Surface Book",width:1500,height:1e3,i18nName:()=>(0,i.t)("presets.surface_book")},{name:"Apple Watch 42mm",width:156,height:195,i18nName:()=>(0,i.t)("presets.apple_watch_42_mm")},{name:"Apple Watch 38mm",width:136,height:170,i18nName:()=>(0,i.t)("presets.apple_watch_38_mm")},{name:"iMac",width:1280,height:720,i18nName:()=>(0,i.t)("presets.i_mac")},{name:"Macintosh 128k",width:512,height:342,i18nName:()=>(0,i.t)("presets.mac_128k")}]})),u=m([a,s,l]);function p(e,r=d){let n=null;for(let i of Object.values(r)){if(e.width===i.width&&e.height===i.height)return i;e.width!==i.height||e.height!==i.width||n||(n=i)}return n}function m(e){return e.reduce((e,r)=>{for(let n of r)e[n.name]=n;return e},{})}m([a,o,c])},604613:(e,r,n)=>{n.d(r,{$O:()=>C,$T:()=>u,AB:()=>p,C9:()=>g,DT:()=>x,Dm:()=>i,F:()=>c,F7:()=>f,J6:()=>_,K9:()=>w,LO:()=>L,Pr:()=>m,Qx:()=>a,Sl:()=>N,Uu:()=>o,VJ:()=>k,Vl:()=>U,WJ:()=>D,W_:()=>A,XX:()=>M,Yr:()=>y,Z7:()=>P,ZR:()=>l,_V:()=>v,aN:()=>I,h2:()=>h,k8:()=>d,ku:()=>O,o$:()=>T,s4:()=>s,si:()=>F,t4:()=>R,vu:()=>b,wi:()=>S,yJ:()=>E});let i="js-fullscreen-prevent-event-capture",a="js-fullscreen-prevent-event-capture-keys",o="js-fullscreen-wheel-event-passthrough",s="js-fullscreen-wheel-event-capture",l="js-fullscreen-no-mod-wheel-event-capture",c=0x7fffffff,d="background-panel-color-picker",u="prototype-background-panel-color-picker",p="type-settings",m="text-decoration-paint-picker",h="style-preview-type-settings",_="font-picker",g="export-picker",f="selection-paint-item",E="selection-style-item",y=`${f}-slides`,b="slides-rewrite-text-picker",v="stacking-advanced-sizing",T="prototype-interaction-settings",I="accessible-reading-order",S="DROPDOWN_TYPE_SELECT_LAYER_CONTEXT_MENU",w="DROPDOWN_TYPE_SELECTION_CONTEXT_MENU",A="DROPDOWN_TYPE_CANVAS_CONTEXT_MENU",C="DROPDOWN_TYPE_SAVEPOINT_CONTEXT_MENU",N="DROPDOWN_TYPE_DEV_HANDOFF_CODE_CONTEXT_MENU",L="DROPDOWN_TYPE_PLUGIN_RUN_CONTEXT_MENU",O="DROPDOWN_TYPE_TEXT_EDIT_MODE_CONTEXT_MENU",R="DROPDOWN_TYPE_RULER_GUIDE_CONTEXT_MENU",P="DROPDOWN_TYPE_COMMENT_CONTEXT_MENU",D="DROPDOWN_TYPE_READY_STATUS_CONTEXT_MENU",M="DROPDOWN_TYPE_ANNOTATIONS_BUTTON_CONTEXT_MENU",k="DROPDOWN_TYPE_THREAD_COMMENT_OVERFLOW_MENU",F="DROPDOWN_TYPE_SECTION_PRESET_PICKER_CONTEXT_MENU",x="DROPDOWN_TYPE_COMMENT_ATTACHMENT_CONTEXT_MENU",U="DROPDOWN_TYPE_GRADIENT_STOP_CONTEXT_MENU"},817519:(e,r,n)=>{function i(e){return"children"in e||"childDropdown"in e}function a(e){return"action"in e||"callback"in e}function o(e){return"separator"in e}function s(e){return"header"in e}function l(e){return"render"in e}function c(e,r){var n;return!!r.checked||null!=r.property&&("string"==typeof(n=r.property)?e[n]:n.getCopy())===r.propertyValue}function d(e,r){return"string"==typeof r?e[r]:r.getCopy()}function u(e){return e.action||e.name}n.d(r,{Dz:()=>u,M3:()=>h,MH:()=>g,TV:()=>i,WJ:()=>c,_o:()=>a,_p:()=>m,f4:()=>d,gN:()=>s,hV:()=>y,id:()=>l,k$:()=>o,lW:()=>E,pn:()=>f,rH:()=>p,u2:()=>_});let p="edit-menu",m="view-menu",h="object-menu",_="vector-menu",g="text-menu",f="arrange-menu",E="preferences-menu",y="figma-account-menu"},802780:(e,r,n)=>{n.d(r,{CT:()=>x,Gm:()=>B,Mk:()=>N,Mx:()=>R,Ns:()=>G,Of:()=>z,Qk:()=>K,Xs:()=>H,Xt:()=>V,Yz:()=>U,e5:()=>A,fn:()=>F,ih:()=>k,jb:()=>O,ji:()=>M,kO:()=>L,lb:()=>W,uL:()=>P,vm:()=>D,y:()=>w});var i=n(848318);n(716544);var a=n(886593),o=n(157907),s=n(39773),l=n(351766),c=n(379338);n(855340),n(493554);var d=n(831932),u=n(579463),p=n(856480),m=n(186323),h=n(814714),_=n(936231);n(92537);var g=n(305719),f=n(369600),E=n(87089);n(849752);var y=n(376780);n(635547),n(710665);var b=n(572699),v=n(922030),T=n(995946),I=n(226325);let S=()=>!!(0,E.dq)();function w(){let{getConfig:e}=(0,u.I7)("exp_at_mention_invited_users");return(0,i.useCallback)(r=>!!function({showExpAtMentionInvite:e,isDraftFile:r,isFigmaDesign:n,inOrg:i,isMobile:a}){return!(r||a||!e||!n||i)}(r)&&"variant"===e().get("treatment",""),[e])}function A({userId:e,teams:r,rolesByTeamId:n,getM0Config:i,getM1Config:a}){if(!(0,o.k)().close_starter_team_loophole)return!1;let s=C(e,r,n);return 0!==s&&(1===s?i().get("should_block_second_starter_team",!1):a().get("should_block_more_than_one_starter_team",!1))}function C(e,r,n){let i=0,a={};for(let o of(r.forEach(e=>a[e.id]=e),Object.keys(n))){let r=a[o],s=n[o][e];r&&s&&s.level===T.e6.OWNER&&r.starter_team&&!r.org_team&&!r.student_team&&null===r.subscription&&null===r.deleted_at&&i++}return i}function N(e,r,n){return!!(0,o.k)().close_starter_team_loophole&&0===C(e,r,n)&&(0,o.k)().close_starter_loophole_team_one}function L(){let{getConfig:e}=(0,u.I7)("exp_pro_tier_onboarding");return(0,i.useCallback)(()=>e().get("show_pro_onboarding",!1),[e])}function O(){let{getConfig:e}=(0,u.I7)("exp_pro_viewer_to_editor_v1");return(0,i.useCallback)(()=>e().get("show_viewer_editor_nudge",!1),[e])}function R(){let{getConfig:e}=(0,u.I7)("exp_in_product_sales_contact_form");return!!e().getValue("has_updated_sales_contact_form",!1)}function P(){let{getConfig:e}=(0,u.I7)("exp_org_viewer_to_editor_v1");return(0,i.useCallback)(()=>e().get("show_viewer_editor_nudge",!1),[e])}function D(e){return e().get("hide_toolbar_request_cta",!1)}function M(e){return!!(0,c.tl)().org_id&&e().get("hide_toolbar_request_cta",!1)}var k=(e=>(e.CONTROL="control",e.VARIANT_A="variantA",e.VARIANT_B="variantB",e))(k||{});function F(){let{getConfig:e}=(0,u.I7)("exp_fbg_navigation_updates"),r=(0,b.tJ)().unwrapOr(null),n=r?.key.type===y.OL.TEAM,i=r?.tier===y.Ag.STARTER;return n&&i?e().getValue("treatment","control"):"control"}function x(){let{getConfig:e}=(0,u.I7)("seat_billing_terms");return!!e().getValue("enabled",!1)}function U(){let{getConfig:e}=(0,u.I7)("exp_resurrect_locked_teams"),r=(0,v.cD)();return(0,i.useCallback)(n=>!!r&&!!n&&!!e().getValue("show_locked_state_redesign",!1),[e,r])}function B(){let e=(0,u.I7)("slides_starter_team_limits_exp");return!!e?.getConfig().getValue("is_frontend_on",!1)}function V(e){let{getConfig:r}=(0,u.I7)(e?"exp_drafts_copy_link_org":"exp_drafts_copy_link_team");return(0,o.k)().statsig_aa_flag_plan_key_web,!!r().getValue("has_drafts_copy_link_experience",!1)}function G(e){let{getConfig:r}=(0,u.I7)("exp_slides_audience_google_sso");return(0,i.useCallback)(()=>!(0,d.C8)()&&!d.rr&&null==e&&r().get("should_see_google_sso",!1),[r,e])}function H(){let e=(0,v.cD)();return(0,i.useCallback)(r=>!!e&&!!r&&!!(0,o.k)().locked_pro_team_revamp_ui_enabled,[e])}function K(e){let r=(0,s.md)(g.UQ),n=(0,s.md)(h.C),a=S(),c=(0,m.R)(),d=(0,f.q5)(),{getConfig:p}=(0,u.I7)("exp_dev_mode_one_click_team_id"),{getConfig:E}=(0,u.I7)("exp_dev_mode_one_click_org_id"),b=a?E:p;return(0,i.useCallback)(()=>!r&&!!c&&!!d&&d.editorType===y._Y.DESIGN&&(e===_.i$.BlockingModal||e===_.i$.Upsell)&&(!!(n||(0,l.oA)(d.trackTags?.isDuplicatedFromDevModeDemoFile)&&(0,o.k)().one_click_in_demo_file_bypass)||"variant"===b().getValue("treatment","control")),[r,c,d,e,b,n])}function W(){let e=(0,I.w)({teamXP:"exp_dev_mode_demo_file_team_id",orgXP:"exp_dev_mode_demo_file_org_id"},{allowStarterPlans:!1});return(0,i.useCallback)(()=>!!(0,o.k)().dev_mode_demo_file&&!!e&&e().get("enabled",!1),[e])}function z(){let{getConfig:e}=(0,u.I7)("exp_improve_devmode_request_context_for_admins"),r=p.Gq()?.getPrimaryLocale(!1)??a.hT.EN;return(0,i.useCallback)(n=>n&&r===a.hT.EN?e().get("treatment",null):null,[e,r])}},732502:(e,r,n)=>{n.d(r,{I1:()=>_,S$:()=>g,U6:()=>p,k3:()=>h,pL:()=>f,wN:()=>u,yo:()=>m});var i=n(848318),a=n(157907),o=n(39773);n(141039);var s=n(994811),l=n(379338);n(831932);var c=n(579463);n(87089);var d=n(376780);function u(e){return!1}function p(){return!!(0,a.k)().rollout_pinned_comments_ff}function m({user:e,file:r,numPinnedCommentThreads:n}={}){return!!p()&&!!e&&!!r&&r.editorType===d._Y.DESIGN&&(!!n&&n>0||!!((0,l.b5)()&&(0,s.jm)(e.email))||!!r.team&&!r.parentOrgId)}function h(){let{getConfig:e}=(0,c.I7)("rollout_pinned_comments_ff");return e().getValue("can_pin_comments",!1)}function _(){let{getConfig:e}=(0,c.I7)("exp_browser_notifications");return{browserNotificationConfig:()=>e().get("has_browser_notifications",!1)}}function g(){return(0,a.k)().google_federated_cm??!1}function f(){let{getConfig:e}=(0,c.I7)("file_browser_ia_overhaul_m1_cards");return(0,i.useCallback)(()=>e().get("use_redesigned_cards",!1),[e])}var E=(e=>(e.DEFAULT="default",e.PZ_THEN_PRODUCT="pz_then_product",e.PRODUCT_THEN_PZ="product_then_pz",e))(E||{});(0,o.eU)(null)},472203:(e,r,n)=>{n.d(r,{d:()=>l});var i=n(848318),a=n(716544);n(579463);var o=n(369600),s=n(154209);function l({file:e}){let{currentOrg:r,currentTeam:n}=function(){let e=(0,a.d4)(e=>(0,s.wA)(e)),r=(0,o.q5)();return{currentOrg:e,currentTeam:r?.team??null,currentFile:r}}();(0,i.useEffect)(()=>{if(r||!n||e?.editorType!=="design")return},[r,n,e])}},155651:(e,r,n)=>{n.d(r,{$z:()=>v,L0:()=>I,QE:()=>_,T8:()=>E,fu:()=>g,h3:()=>b,j6:()=>S,jm:()=>T,kp:()=>f,tf:()=>y});var i=n(848318),a=n(716544),o=n(911734),s=n(579020),l=n(896966),c=n(963376),d=n(442313),u=n(401890),p=n(481540);let m=null;function h(){m=null}let _=i.createContext({properties:{},trackEvent:()=>null});function g({name:e,properties:r={},trackingTargets:n=u.K.ALL,enabled:o=!0,ignoreParent:d=!1,children:h}){let{name:g,properties:f}=(0,i.useContext)(_),E=(0,i.useRef)({}),y=(0,i.useRef)(null);E.current&&(0,a.bN)(E.current,r)||(E.current=r),r=E.current;let b=(0,i.useMemo)(()=>{let n=g&&!d?`${g} > ${e}`:e,i={...f,...r};return{name:n,properties:i,trackEvent:(e,r)=>(0,s.sx)(e,{trackingContext:n,...i,...r})}},[e,r,g,f,d]);return(0,i.useEffect)(()=>{if(!o||n===u.K.NONE)return;let e=b.name,r=b.properties;if(y.current&&y.current.name===e&&(0,a.bN)(y.current.properties,r))return;if(n===u.K.RCS){let n={};for(let e of Object.keys(r))null!==r[e]&&void 0!==r[e]&&(n[e]=r[e]);(0,c.YQ)({id:e,properties:n});return}let i={name:e,...null!=m&&{ctaClickedReferrer:m},...r};(0,l.ED)("Context Viewed",e,i),(0,p.qD)(i),y.current=b},[n,b,o]),i.createElement(_.Provider,{value:b},h)}function f(e,r){var n;return(n=class extends i.PureComponent{render(){return i.createElement(g,{name:r||e.displayName},i.createElement(e,{...this.props}))}}).displayName=e.displayName,n}function E(e,r,n={},a=!0){return i.createElement(g,{name:r,properties:n,enabled:a},e)}function y(e,r){let n=i.forwardRef((n,a)=>i.createElement(_.Consumer,null,o=>{let s=e=>{if(n.disabled)return;let a={...o.properties,...n.trackingProperties};o.name&&(a.trackingContext=o.name);let s=function(e,r){if(r)return r;if(e&&"string"==typeof e)return e;{let r=i.Children.map(e,e=>{if(e?.type!==d.qD)return e;{let{id:r,options:n}=e.props;return(0,d.t)(r,n)}});if(r?.every(e=>"string"==typeof e))return r.join("")}}(n.children,n.innerText);s&&(a.text=s),(0,p.Cu)(a,n.trackingEventName,r),m=`${a.trackingContext} : ${a.text}`,n.onClick?.(e),setTimeout(h,150)},{trackingProperties:l,innerText:c,useMouseDown:u,trackingEventName:_,...g}=n;return i.createElement(e,{ref:a,...g,...n.useMouseDown?{onMouseDown:s}:{onClick:s}})}));return n.displayName=`Tracked(${e.displayName||e.name})`,n}function b(e){return class extends i.Component{render(){return i.createElement(_.Consumer,null,r=>{let{trackingProperties:n,trackingPopulationLevel:a,trackingFieldName:o,...s}=this.props;return i.createElement(e,{...s,onBlur:e=>{let n={...r.properties,...this.props.trackingProperties,fieldName:this.props.trackingFieldName,populationLevel:this.props.trackingPopulationLevel};r.name&&(n.trackingContext=r.name),(0,p.fy)(n),this.props.onBlur&&this.props.onBlur(e)}})})}}}let v=y(({dataTestId:e,...r})=>i.createElement("button",{...r,"data-testid":e})),T=y(e=>i.createElement("div",{...e})),I=y(e=>i.createElement("a",{...e},e.children),!0);function S(){return(0,i.useContext)(_)}y(e=>i.createElement(o.N_,{...e})),y(e=>i.createElement("input",{...e}))},244767:(e,r,n)=>{n.d(r,{FN:()=>l,Fy:()=>s,iR:()=>o});var i=n(848318),a=n(579463);function o(){let{getConfig:e}=(0,a.I7)("exp_signup_optimization_deferred_password");return(0,i.useCallback)(()=>!!e().getValue("enabled",!1),[e])}function s(){let{getConfig:e}=(0,a.I7)("exp_one_tap_prototype_desktop");return(0,i.useCallback)(()=>!!e().getValue("show_one_tap",!1),[e])}function l(){let{getConfig:e}=(0,a.I7)("exp_login_deferred_password");return(0,i.useCallback)(()=>!!e().getValue("enabled",!1),[e])}},184642:(e,r,n)=>{n.d(r,{Nh:()=>l,S3:()=>c,bf:()=>d,pI:()=>s});var i=n(449345),a=n(521325);function o(e){let r="insert-local-widget"===e.menuAction.type,n="run-local-plugin"===e.menuAction.type;return(0,a.qs)(e)?r?"Widgets Development":"Widgets":n?"Plugins Development":"Plugins"}function s(){return(0,i.gn)()}function l(e,r){let n=e.path;if("plugin-name"!==e.name.type)return"";let i=o(e);return s()&&r?[...n.slice(1),e.name.plugin].join(" "):[i,...n,e.name.plugin].join(" ")}function c(e){return e.submenu.find(e=>"run-menu-action"===e.type)}function d(e){let r=c(e);return r?[o(r),e.name].join(" "):e.name}},763905:(e,r,n)=>{n.d(r,{NG:()=>p,UK:()=>function e(r){let{item:n,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isSubmenuChild:p,isItemSubmenu:m}=r,h=[];if("run-menu-action"===n.type){if(n.disabled&&!l)return h;if("plugin-name"===n.name.type){if(!s.userCanRunPlugins)return h;let e=(0,d.qs)(n)?(0,a.t)("widgets.insert_widget",{widgetName:n.name.plugin}):n.name.plugin,r=[...n.path,e],i=("run-installed-plugin"===n.menuAction.type||"run-local-plugin"===n.menuAction.type)&&n.menuAction.parameterOnly,o={name:"plugins-menu-item",extensionSearchString:(0,u.Nh)(n,p),itemPath:r,itemParameterArgs:(0,c.o0)(n.menuAction),callback:()=>(0,d.Im)(s,"quick-actions",n.menuAction),menuActionType:n.menuAction.type,pluginId:"run-installed-plugin"===n.menuAction.type||"insert-installed-widget"===n.menuAction.type?n.menuAction.pluginId:void 0,pluginLocalFileId:"run-local-plugin"===n.menuAction.type||"insert-local-widget"===n.menuAction.type?n.menuAction.localFileId:void 0,disabled:n.disabled,flags:["edit"],parametersRequired:i};h.push(o)}else{if(o&&n.disabled)return h;let e={name:n.name.key,callback:()=>(0,d.Im)(s,"filemenu",n.menuAction),disabled:n.disabled,iconType:n.iconType,property:n.property,propertyValue:n.propertyValue};h.push(e)}}else if("submenu"===n.type){if((0,u.pI)()&&!p&&"manifest"===n.subtype){let r={name:"plugins-menu-item",extensionSearchString:(0,u.bf)(n),itemPath:[n.name],callback:i.lQ,submenu:n.submenu.map(r=>e({item:r,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isItemSubmenu:!0})).flat()},a=(0,u.S3)(n);a&&(r.menuActionType=a.menuAction.type,"pluginId"in a.menuAction&&(r.pluginId=a.menuAction.pluginId),"localFileId"in a.menuAction&&(r.pluginLocalFileId=a.menuAction.localFileId)),h.push(r)}if(m)return h;for(let r of n.submenu){let n=e({item:r,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isSubmenuChild:!0});h.push(...n)}}return h}});var i=n(303035),a=n(442313),o=n(608282),s=n(2626),l=n(677251),c=n(860649),d=n(521325),u=n(184642);function p(e){let{extension:r,canRun:n}=e;return r.manifest.menu&&r.manifest.menu.length>0?{type:"submenu",subtype:"manifest",name:r.name,submenu:(0,o.z)(r.manifest.menu,r)}:{type:"run-menu-action",name:{type:"plugin-name",plugin:r.name},menuAction:(0,s.IK)(r),disabled:!n,isWidget:(0,l.k0)(r),path:[]}}},129102:(e,r,n)=>{n.d(r,{C1:()=>d,TI:()=>p,rC:()=>c,z5:()=>u});var i=n(543072),a=n(442313),o=n(718451),s=n(552e3);class l extends s.A{constructor(e={}){super(),this.options=e}parse(e,r){let n=r?.a??1,a=(0,i.H0)(e,this.options.parseAlpha?n:void 0);if(!a)throw Error("Could not parse hex");return this.options.parseAlpha?a:(0,i.X9)(a,n)}format(e){if(!e)return"";let r=this.floatToHex(e.r),n=this.floatToHex(e.g),i=this.floatToHex(e.b);if(this.options.formatAlpha&&1!==e.a){let a=this.floatToHex(e.a);return`#${r}${n}${i}${a}`.toUpperCase()}return`#${r}${n}${i}`.toUpperCase()}formatForAndroid(e){if(1===e.a)return this.format(e);let r=this.floatToHex(e.a),n=this.floatToHex(e.r),i=this.floatToHex(e.g),a=this.floatToHex(e.b);return`#${r}${n}${i}${a}`.toUpperCase()}getIncrementTargets(e,r){let{start:n,end:i}=r,a=n===i,o={};return(n<=2||a&&3===n)&&(o.r=!0),(n<=4&&i>3||a&&5===n)&&(o.g=!0),(n<=6&&i>5||a&&7===n)&&(o.b=!0),o}getSelection(e,r){let n={start:1,end:1};return r.r?n.start=1:r.g?n.start=3:n.start=5,r.b?n.end=7:r.g?n.end=5:n.end=3,n}floatToHex(e){let r=this.normalize255(e).toString(16);return 1===r.length&&(r="0"+r),r}}class c extends l{constructor(e={}){super(e)}format(e,{withAlpha:r=!1,showDot:n=!1}={}){let i=this.floatToHex(e.r),a=this.floatToHex(e.g),o=this.floatToHex(e.b),s=this.floatToHex(e.a),l=(100*e.a).toLocaleString("en",{maximumFractionDigits:2})+"%";return r?n?`${i}${a}${o} \xb7 ${l}`.toUpperCase():`${i}${a}${o}${s}`.toUpperCase():`${i}${a}${o}`.toUpperCase()}getIncrementTargets(e,r){let{start:n,end:i}=r,a=n===i,o={};return(n<=1||a&&2===n)&&(o.r=!0),(n<=3&&i>2||a&&4===n)&&(o.g=!0),(n<=5&&i>4||a&&6===n)&&(o.b=!0),o}getSelection(e,r){let n={start:1,end:1};return r.r?n.start=1:r.g?n.start=3:n.start=5,r.b?n.end=7:r.g?n.end=5:n.end=3,n.start-=1,n.end-=1,n}}class d extends c{constructor(e={}){super(e)}parse(e,r){return"auto".startsWith(e.toLowerCase())?o.Q8:super.parse(e,r)}format(e){return e?(0,o.gl)(e)?(0,a.t)("fullscreen.mixed"):(0,o.SX)(e)?(0,a.t)("fullscreen.properties_panel.stack_panel.auto"):super.format(e):""}clamp(e){return(0,o.SX)(e)?e:super.clamp(e)}}let u=new l;new l({parseAlpha:!0,formatAlpha:!0});let p=new c;new d},360399:(e,r,n)=>{n.d(r,{GW:()=>I,KD:()=>h,LN:()=>v,LS:()=>m,Lk:()=>_,NB:()=>E,PZ:()=>f,X9:()=>w,cu:()=>S,f0:()=>b,h7:()=>C,k$:()=>g,mz:()=>L,o1:()=>A,t6:()=>T,wf:()=>N});var i=n(425642),a=n(464437),o=n(133696),s=n(579020),l=n(705231),c=n(896966),d=n(442313),u=n(718451),p=n(552032);class m extends Error{constructor(e,r){super(`${e}: ${JSON.stringify(r)}`),this.errorInfo=r}}class h{constructor(e={}){this.options=e,this.allowedUnits=""}format(e){return`${e}`}parse(e,r){e=this.preProcessForExpressionEvaluation(e);let n=(0,l.O4)(e,r);if(null!==n.value&&isFinite(n.value))return n.value;throw(0,c.Lo)("NumberFormatter::parse","Could not parse input",{str:e,currentValue:r}),new m("Could not parse input",n.error)}onParseThrow(e,r){if(e instanceof m&&e.errorInfo)return this.options.onEvaluateExpressionError?.(e.errorInfo,r)}getNudgeAmount(e){return e?this.bigNudgeAmount():this.smallNudgeAmount()}incrementBy(e,r){return e+r}clamp(e){return(0,a.KY)(e,this.min(),this.max())}min(){return this.options.min??this.defaultMin}max(){return this.options.max??this.defaultMax}smallNudgeAmount(){return this.options.smallNudgeAmount??p.bA}bigNudgeAmount(){return this.options.bigNudgeAmount??p._q}preProcessForExpressionEvaluation(e){return e.replace(RegExp(this.allowedUnits,"g"),"").replace(/[\u0660-\u0669]/g,e=>"\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669".indexOf(e).toString()).replace(/[\u06F0-\u06F9]/g,e=>"\u06F0\u06F1\u06F2\u06F3\u06F4\u06F5\u06F6\u06F7\u06F8\u06F9".indexOf(e).toString()).replace(/\u066B/g,",").replace(/\u066C/g,",").replace(/\u060C/g,",")}}class _ extends h{constructor(e){super(e),this.floatingPointFormat=e.floatingPointFormat}format(e){if(null==e)return"";let r=String(parseFloat(e.toFixed(2))),n=r.includes(".");return this.floatingPointFormat&&n&&r.length-1>this.floatingPointFormat.maxNumDigits?String(parseFloat(e.toFixed(1))):r}parse(e,r){return/[0-9]+\,[0-9]+/g.test(e)&&(0,s.sx)("editor-parsing-float-input-with-comma",{input:e}),super.parse(e,r)}}class g extends h{format(e){return null==e?"":String(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,currencyDisplay:"code"}).format(e).replace("USD","").trim())}parse(e,r){return parseFloat(super.parse(e,r).toFixed(0))}}class f{constructor(e){this.pixelFormatter=new _(e),this.allowEmpty=!!e.allowEmpty,this.allowUnformatted=!!e.allowUnformatted}parse(e,r){e=e.trim().toLocaleLowerCase();let n=(0,d.t)("fullscreen.auto").toLocaleLowerCase();return(!this.allowEmpty||e.length)&&n.startsWith(e)?u.Q8:this.pixelFormatter.parse(e,r)}format(e){if((0,u.SX)(e))return(0,d.t)("fullscreen.properties_panel.stack_panel.auto");if(this.allowUnformatted)try{return this.pixelFormatter.format(e)}catch{return e}return this.pixelFormatter.format(e)}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,r){return(0,u.SX)(e)?u.Q8:this.pixelFormatter.incrementBy(e,r)}clamp(e){return(0,u.SX)(e)?u.Q8:this.pixelFormatter.clamp(e)}}class E{constructor(e){this.pixelFormatter=new _(e)}parse(e,r){let n=new RegExp(/[^\,\s]*(\s*[+\-*\/\^]\s*[^\,\s]*)*/g),i=e.match(n);return i?i.filter(e=>e.length).map((e,n)=>{let i=this.pixelFormatter.parse(e,r&&r[n]);if(!isFinite(i))throw Error("could not parse array input");return i}):[]}format(e){return null==e?"":(0,i.Ef)(e)?this.pixelFormatter.format(e[0]):e.map(e=>this.pixelFormatter.format(e)).join(", ")}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,r,n){return e.map((e,i)=>!n||n[i]?this.pixelFormatter.incrementBy(e,r):e)}clamp(e){return e.map(e=>this.pixelFormatter.clamp(e))}snap(e,r){return e.map(e=>(0,a.YE)(e,r))}isEqual(e,r){return(0,i.lu)(e,r)}getIncrementTargets(e,{start:r,end:n}){let i={};if(0===r&&n>=e.length)return null;let a=r===n;if(a&&r>=e.length)return{[e.split(",").length-1]:!0};let o=0;for(let s=0,l=e.length;s<l;++s){let l=","===e[s];if(a){if(s===r)return{[o]:!0};l&&++o}else if(l&&++o,r<=s&&s<n&&(i[o]=!0),s>=n)break}return i}getSelection(e,r){let n;let i=Object.keys(r).map(Number),a=e.length,o=0;for(let r=0,s=e.length;r<s;++r){if(","===e[r]){++o;continue}if(i.includes(o)){if(null==n){if(/[\s,]/.test(e[r]))continue;n=r}for(;r<s&&/[^,]/.test(e[r]);)++r;a=r,--r}}return{start:n??0,end:a}}}var y=(e=>(e[e.SECONDS=0]="SECONDS",e[e.MILLISECONDS=1]="MILLISECONDS",e))(y||{});class b extends h{constructor(e,r=!1,n=!0){super({min:0,max:e,smallNudgeAmount:1,bigNudgeAmount:10}),this.allowedUnits="s",this.displayFractions=!1,this.padMinutes=!0,this.displayFractions=r,this.padMinutes=n}parse(e,r){if(e.includes(":")){let n=e.split(":");if(n.length>3)throw Error("Format must match HH:MM:SS");let[i,a,o]=n.reverse().map(e=>e.trim()),s=i?super.parse(i,r):0,l=a?super.parse(a,r):0,c=o?super.parse(o,r):0,d=![l,c].every(Number.isInteger),u=!this.displayFractions&&!Number.isInteger(s);if(d||u)throw Error("Cannot have fractional parts in timestamp");return 3600*c+60*l+s}let[n,i]=e.split(".",2),a=`${n.slice(-6,-4)}:${n.slice(-4,-2)}:${n.slice(-2)}`,o=i?`${a}.${i}`:a;return this.parse(o)}format(e){if(null==e)return"";let r=Math.floor(e/3600);e%=3600;let n=`${Math.floor(e/60)}`;this.padMinutes&&(n=n.padStart(2,"0")),e%=60;let i=this.displayFractions?e:Math.floor(e),a=Number.isInteger(i)?i:i.toFixed(2),o=Number.isInteger(i)?`${i}`.padStart(2,"0"):`${a}`.padStart(5,"0");return r?`${r}:${n}:${o}`:`${n}:${o}`}}class v extends h{constructor({decimals:e,hidePercentSign:r,...n}={}){super(n),this.allowedUnits="%|px",this.defaultMin=0,this.defaultMax=1,this.decimals=2,this.hidePercentSign=!1,null!=e&&(this.decimals=e),null!=r&&(this.hidePercentSign=r)}format(e){if(null==e)return"";let r=`${parseFloat((100*e).toFixed(this.decimals))}`;return this.hidePercentSign||(r+="%"),r}parse(e,r){return super.parse(e,null!=r?100*r:void 0)/100}getNudgeAmount(e){return e?.1:.01}}class T extends h{constructor(){super(...arguments),this.defaultMin=0,this.defaultMax=1}format(e){return null==e?"":`${parseFloat(e.toFixed(2))}`}}class I extends h{constructor(){super(...arguments),this.allowedUnits="%",this.defaultMin=1,this.defaultMax=95}format(e){return null==e?"":`${e}%`}}class S extends h{constructor(e={}){super((0,o.b$)({smallNudgeAmount:-1,bigNudgeAmount:-15},e)),this.allowedUnits="\xb0|px"}format(e){return null==e?"":(-180==(e=(e+180+360)%360-180)&&(e=180),`${parseFloat(e.toFixed(2))}\xb0`)}}class w extends h{constructor(){super(...arguments),this.allowedUnits="px"}parse(e,r){return Math.round(super.parse(e,r))}}class A extends h{constructor(e={}){super(e),this.normalizeFactor=e.normalizeFactor||1}parse(e,r){return super.parse(e,r)/this.normalizeFactor}format(e){let r=e*this.normalizeFactor;return`${Math.round(r)}`}getNudgeAmount(e){return e?10/this.normalizeFactor:1/this.normalizeFactor}}class C{constructor(e){this.min=e.min,this.max=e.max,this.bigPixelNudgeAmount=e.bigPixelNudgeAmount||p._q,this.smallPixelNudgeAmount=e.smallPixelNudgeAmount||p.bA,this.bigPercentageNudgeAmount=e.bigPercentageNudgeAmount||10,this.smallPercentageNudgeAmount=e.smallPercentageNudgeAmount||1}static parse(e){let r=-1!==e.indexOf("%")?"PERCENT":-1!==e.indexOf("px")?"PIXELS":void 0;e=(e=e.toLowerCase()).replace(RegExp("%|px","g"),"");let n=(0,l.O4)(e,NaN);if(null!==n.value&&isFinite(n.value))return[n.value,r]}parse(e,r){let n=C.parse(e);if(void 0===n)throw Error("Could not parse input");let[i,a]=n;return void 0===a&&(a=null==r?"PERCENT":r.units),{value:i,units:a}}format(e){if(!e)return"";let r=parseFloat((e.value??0).toFixed(2));return"PERCENT"===e.units?`${r}%`:"RAW"===e.units?`${100*r}%`:`${r}px`}getNudgeAmount(e,r){return e?"PIXELS"===r.units?this.bigPixelNudgeAmount:this.bigPercentageNudgeAmount:"PIXELS"===r.units?this.smallPixelNudgeAmount:this.smallPercentageNudgeAmount}incrementBy(e,r){return{value:e.value+r,units:e.units}}clamp(e){return{value:(0,a.KY)(e.value,this.min,this.max),units:e.units}}snap(e,r){return{value:(0,a.YE)(e.value,r),units:e.units}}isEqual(e,r){return e.units===r.units&&e.value===r.value}}let N=new C({bigPixelNudgeAmount:p._q,smallPixelNudgeAmount:p.bA});class L{constructor(){this.MAX_SCALE=1024,this.MAX_SIZE=32768}parse(e){let r=(e=e.toLowerCase()).includes("w")?"CONTENT_WIDTH":e.includes("h")?"CONTENT_HEIGHT":"CONTENT_SCALE";e=e.replace(/x|w|h/g,"");let n=(0,l.O4)(e);if(null!==n.value&&isFinite(n.value))return{value:n.value,type:r};throw new m("Could not parse input",n.error)}format(e){if(null==e)return"";let r=parseFloat(e.value.toFixed(2));switch(e.type){case"CONTENT_SCALE":return`${r}x`;case"CONTENT_WIDTH":return`${r}w`;case"CONTENT_HEIGHT":return`${r}h`}}getNudgeAmount(e){return e?1:.5}incrementBy(e,r){return{value:(0,a.YE)(e.value+r,r),type:e.type}}clamp(e){let r=e.value;return(r=Math.min(r,"CONTENT_SCALE"===e.type?this.MAX_SCALE:this.MAX_SIZE))<=0&&(r=1),{value:r,type:e.type}}snap(e,r){return{value:(0,a.YE)(e.value,r),type:e.type}}isEqual(e,r){return e.type===r.type&&e.value===r.value}}},136031:(e,r,n)=>{n.d(r,{D:()=>m,VG:()=>I,Xi:()=>b,ZB:()=>p,_r:()=>d,cP:()=>g,el:()=>f,ey:()=>_,js:()=>y,mj:()=>E,qj:()=>h,ro:()=>u,yt:()=>c});var i=n(445777),a=n(897392),o=n(157907);n(210709);var s=n(442313),l=n(718451);n(360399);class c{constructor(){this.parse=e=>e,this.format=e=>e||""}}class d{constructor(){this.format=e=>e?e.replace(/_/g," ").toLowerCase().replace(/^./g,e=>e.toUpperCase()):""}}class u{constructor(){this.format=e=>{switch(e){case"PASS_THROUGH":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.pass_through");case"NORMAL":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.normal");case"DARKEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.darken");case"MULTIPLY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.multiply");case"LINEAR_BURN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_burn");case"COLOR_BURN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_burn");case"LIGHTEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.lighten");case"SCREEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.screen");case"LINEAR_DODGE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_dodge");case"COLOR_DODGE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_dodge");case"OVERLAY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.overlay");case"SOFT_LIGHT":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.soft_light");case"HARD_LIGHT":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hard_light");case"DIFFERENCE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.difference");case"EXCLUSION":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.exclusion");case"HUE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hue");case"SATURATION":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.saturation");case"COLOR":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color");case"LUMINOSITY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.luminosity");default:return""}}}}class p{constructor(e){this.getPaint=e,this.format=e=>{switch(e){case"SOLID":return(0,s.t)("fullscreen.properties_panel.solid");case"VIDEO":return(0,s.t)("fullscreen.properties_panel.video");case"IMAGE":return null!=this.getPaint().animatedImage?(0,s.t)("fullscreen.properties_panel.gif"):(0,s.t)("fullscreen.properties_panel.image");case"GRADIENT_LINEAR":return(0,s.t)("fullscreen.properties_panel.linear");case"GRADIENT_RADIAL":return(0,s.t)("fullscreen.properties_panel.radial");case"GRADIENT_ANGULAR":return(0,s.t)("fullscreen.properties_panel.angular");case"GRADIENT_DIAMOND":return(0,s.t)("fullscreen.properties_panel.diamond");case"PATTERN":return(0,s.t)("fullscreen.properties_panel.pattern");case"NOISE":return(0,s.t)("fullscreen.properties_panel.noise");default:return""}}}}class m{constructor(){this.format=e=>{switch(e){case"FILL":return(0,s.t)("fullscreen.properties_panel.image_scale.fill");case"FIT":return(0,s.t)("fullscreen.properties_panel.image_scale.fit");case"STRETCH":return(0,s.t)("fullscreen.properties_panel.image_scale.crop");case"TILE":return(0,s.t)("fullscreen.properties_panel.image_scale.tile");default:return""}}}}class h{constructor(){this.format=e=>{switch(e){case"INNER_SHADOW":return(0,s.t)("fullscreen.properties_panel.effects.inner_shadow");case"DROP_SHADOW":return(0,s.t)("fullscreen.properties_panel.effects.drop_shadow");case"FOREGROUND_BLUR":return(0,s.t)("fullscreen.properties_panel.effects.layer_blur");case"BACKGROUND_BLUR":return(0,s.t)("fullscreen.properties_panel.effects.background_blur");case"REPEAT":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.repeat");case"SYMMETRY":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.symmetry");case"GRAIN":return(0,s.t)("fullscreen.properties_panel.effects.texture");case"NOISE":return(0,s.t)("fullscreen.properties_panel.effects.noise");default:return""}}}}class _{constructor(){this.format=e=>{switch(e){case"REPEAT":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.repeat");case"SYMMETRY":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.symmetry");case"SKEW":return(0,s.t)("fullscreen.properties_panel.transform_modifiers.skew");default:return""}}}}class g{constructor(e){this.scene=e}hasNameForNode(e){return e===a.AD||null==e||!!this.scene.get(e)}format(e){if((0,l.gl)(e))return(0,s.t)("fullscreen.mixed");if(e===a.AD||null==e)return(0,s.t)("proto.node_name_formatter.none");let r=this.scene.get(e);return r?r.stateAbbreviatedName||r.name:(0,s.t)("proto.node_name_formatter.missing")}}class f{constructor(e){this.useNoneInsteadOfInstant=!1,this.format=e=>{if(null==e)return"";switch(e){case"INSTANT":return this.useNoneInsteadOfInstant?(0,s.t)("slides.properties_panel.slide_transition.option.none"):(0,s.t)("proto.transition_behavior.instant");case"DISSOLVE":return(0,s.t)("proto.transition_behavior.dissolve");case"PUSH":return(0,s.t)("proto.transition_behavior.push");case"MOVE":return(0,s.t)("proto.transition_behavior.move_in");case"MOVE_OUT":return(0,s.t)("proto.transition_behavior.move_out");case"SLIDE":return(0,s.t)("proto.transition_behavior.slide_in");case"SLIDE_OUT":return(0,s.t)("proto.transition_behavior.slide_out");case"SMART_ANIMATE":return(0,s.t)("proto.transition_behavior.smart_animate");case"SCROLL_ANIMATE":return(0,s.t)("proto.transition_behavior.animate")}return""},e&&(this.useNoneInsteadOfInstant=e)}}function E(e){if(!e)return"NONE";if("URL"===e.connectionType)return"OPEN_URL";if("BACK"===e.connectionType)return"GO_BACK";if("CLOSE"===e.connectionType)return"CLOSE_OVERLAY";if("INTERNAL_NODE"===e.connectionType)switch(e.navigationType){case void 0:case null:case"NAVIGATE":return"NAVIGATE_TO";case"SCROLL_TO":return"SCROLL_TO";case"OVERLAY":return"OPEN_OVERLAY";case"SWAP":return"SWAP_WITH";case"SWAP_STATE":return"SWAP_STATE_TO"}if("SET_VARIABLE"===e.connectionType)return"SET_VARIABLE";if("SET_VARIABLE_MODE"===e.connectionType)return"SET_VARIABLE_MODE";if("UPDATE_MEDIA_RUNTIME"===e.connectionType)switch(e.mediaAction){case void 0:case"PLAY":return"UPDATE_MEDIA_PLAY";case"PAUSE":return"UPDATE_MEDIA_PAUSE";case"TOGGLE_PLAY_PAUSE":return"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE";case"MUTE":return"UPDATE_MEDIA_MUTE";case"UNMUTE":return"UPDATE_MEDIA_UNMUTE";case"TOGGLE_MUTE_UNMUTE":return"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE";case"SKIP_FORWARD":return"UPDATE_MEDIA_SKIP_FORWARD";case"SKIP_BACKWARD":return"UPDATE_MEDIA_SKIP_BACKWARD";case"SKIP_TO":return"UPDATE_MEDIA_SKIP_TO"}return"CONDITIONAL"===e.connectionType?"CONDITIONAL":("NONE"===e.connectionType||console.warn("Unknown connection type",e.connectionType),"NONE")}class y{constructor(e,r){this.isUI3=!1,this.selectionIsComponentOrInstance=!1,this.isUI3=!!e,this.selectionIsComponentOrInstance=!!r}format(e){switch(e){case"NONE":return(0,s.t)("proto.action_none");case"NAVIGATE_TO":return(0,s.t)("proto.action_navigate_to");case"OPEN_OVERLAY":return(0,s.t)("proto.action_open_overlay");case"SCROLL_TO":return(0,s.t)("proto.action_scroll_to");case"SWAP_WITH":return(0,s.t)("proto.action_swap_overlay");case"SWAP_STATE_TO":return(0,s.t)("proto.action_change_to");case"GO_BACK":return(0,s.t)("proto.action_back");case"CLOSE_OVERLAY":return(0,s.t)("proto.action_close_overlay");case"OPEN_URL":return(0,s.t)("proto.action_open_link");case"SET_VARIABLE":if((0,o.k)().ds_variable_props_proto&&this.selectionIsComponentOrInstance)return(0,s.t)("proto.action_set_variable_or_component_property");return(0,s.t)("proto.action_set_variable");case"SET_VARIABLE_MODE":return(0,s.t)("proto.action_set_variable_mode");case"UPDATE_MEDIA_PLAY":return(0,s.t)("proto.action_update_media_play_only");case"UPDATE_MEDIA_PAUSE":return(0,s.t)("proto.action_update_media_pause_only");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,s.t)("proto.action_update_media_toggle");case"UPDATE_MEDIA_MUTE":return(0,s.t)("proto.action_update_media_mute_only");case"UPDATE_MEDIA_UNMUTE":return(0,s.t)("proto.action_update_media_unmute_only");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,s.t)("proto.action_update_media_jump_forward");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,s.t)("proto.action_update_media_jump_backward");case"UPDATE_MEDIA_SKIP_TO":return(0,s.t)("proto.action_update_media_set_to_specific_time");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,s.t)("proto.action_update_media_play_pause_video");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,s.t)("proto.action_update_media_mute_unmute_video");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,s.t)("proto.action_update_media_jump_forward_backward");case"CONDITIONAL":return this.isUI3&&!(0,o.k)().exp_proto_rename_conditional?(0,s.t)("proto.action_check_if_else"):(0,s.t)("proto.action_conditional");default:return""}}}class b{constructor(e,r){this.isUI3=!1,this.selectionIsComponentOrInstance=!1,this.isUI3=!!e,this.selectionIsComponentOrInstance=!!r}format(e){switch(e){case"NONE":return(0,s.t)("proto.action_none_interaction");case"NAVIGATE_TO":return(0,s.t)("proto.action_navigate_to_interaction");case"OPEN_OVERLAY":return(0,s.t)("proto.action_open_overlay_interaction");case"SCROLL_TO":return(0,s.t)("proto.action_scroll_to_interaction");case"SWAP_WITH":return(0,s.t)("proto.action_swap_overlay_interaction");case"SWAP_STATE_TO":return(0,s.t)("proto.action_change_to_interaction");case"GO_BACK":return(0,s.t)("proto.action_back_interaction");case"CLOSE_OVERLAY":return(0,s.t)("proto.action_close_overlay_interaction");case"OPEN_URL":return(0,s.t)("proto.action_open_link_interaction");case"SET_VARIABLE":if((0,o.k)().ds_variable_props_proto&&this.selectionIsComponentOrInstance)return(0,s.t)("proto.action_set_variable_or_property_interaction");return(0,s.t)("proto.action_set_variable_interaction");case"SET_VARIABLE_MODE":return(0,s.t)("proto.action_set_variable_mode_interaction");case"UPDATE_MEDIA_PLAY":return(0,s.t)("proto.action_update_media_play_interaction");case"UPDATE_MEDIA_PAUSE":return(0,s.t)("proto.action_update_media_pause_interaction");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,s.t)("proto.action_update_media_toggle_interaction");case"UPDATE_MEDIA_MUTE":return(0,s.t)("proto.action_update_media_mute_interaction");case"UPDATE_MEDIA_UNMUTE":return(0,s.t)("proto.action_update_media_unmute_interaction");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,s.t)("proto.action_update_media_forward_interaction");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,s.t)("proto.action_update_media_backward_interaction");case"UPDATE_MEDIA_SKIP_TO":return(0,s.t)("proto.action_update_media_set_time_interaction");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,s.t)("proto.action_update_media_play_pause_interaction");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,s.t)("proto.action_update_media_mute_unmute_interaction");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,s.t)("proto.action_update_media_jump_time_interaction");case"CONDITIONAL":return this.isUI3&&!(0,o.k)().exp_proto_rename_conditional?(0,s.t)("proto.action_check_if_else_interaction"):(0,s.t)("proto.action_conditional_interaction");default:return""}}}let v=()=>(0,s.t)("proto.interaction.type.mouse_enter_deprecated"),T=()=>(0,s.t)("proto.interaction.type.mouse_leave_deprecated");class I{constructor(){this.format=e=>{if(null==e)return(0,s.t)("proto.interaction.type.none");switch(e){case"NONE":return(0,s.t)("proto.interaction.type.none");case"ON_CLICK":return(0,s.t)("proto.interaction.type.on_click");case"ON_HOVER":return(0,s.t)("proto.interaction.type.while_hovering");case"ON_PRESS":return(0,s.t)("proto.interaction.type.while_pressing");case"DRAG":return(0,s.t)("proto.interaction.type.on_drag");case"MOUSE_IN":return v();case"MOUSE_OUT":return T();case"MOUSE_ENTER":return(0,s.t)("proto.interaction.type.mouse_enter");case"MOUSE_LEAVE":return(0,s.t)("proto.interaction.type.mouse_leave");case"MOUSE_DOWN":return(0,s.t)("proto.interaction.type.mouse_down");case"MOUSE_UP":return(0,s.t)("proto.interaction.type.mouse_up");case"AFTER_TIMEOUT":return(0,s.t)("proto.interaction.type.after_delay");case"ON_KEY_DOWN":return(0,s.t)("proto.interaction.type.key_gamepad");case"ON_VOICE":return(0,s.t)("proto.interaction.type.on_voice");case"ON_MEDIA_HIT":return(0,s.t)("proto.interaction.type.when_video_hits");case"ON_MEDIA_END":return(0,s.t)("proto.interaction.type.when_video_ends");default:(0,i.xb)(e)}}}}},584305:(e,r,n)=>{n.d(r,{UE:()=>a,dG:()=>s,ft:()=>o,wo:()=>l});var i=n(831932);function a(e){return e?.nodeType===1&&function(e){for(;e;){if(e.classList&&(e.classList.contains("js-fullscreen-prevent-event-capture")||e.dataset?.fullscreenPreventEventCapture))return!0;e=e.parentElement}return!1}(e)}function o(){return(!!i.Ay.isIpadNative||!!i.Ay.ios&&!!i.Ay.isInNativeApp)&&!!window.FigmaMobile.shouldHandleMultiTouchInFullscreen||!!i.Ay.isMeetDevice||!!i.Ay.isIpad}function s(e){e.stopPropagation()}function l(e){e.preventDefault()}},46667:(e,r,n)=>{n.d(r,{N:()=>a});var i=n(376780);function a(e){switch(e){case i.y4.WHITEBOARD:return i._Y.WHITEBOARD;case i.y4.SLIDE_TEMPLATE:return i._Y.SLIDES;default:return i._Y.DESIGN}}},881393:(e,r,n)=>{n.d(r,{i:()=>o});var i=n(831932),a=(e=>(e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT",e[e.BACK=3]="BACK",e[e.FORWARD=4]="FORWARD",e))(a||{});function o(e){return"which"in e?3===e.which||i.Ay.mac&&1===e.which&&e.ctrlKey:"button"in e&&(2===e.button||i.Ay.mac&&0===e.button&&e.ctrlKey)}},894574:(e,r,n)=>{n.d(r,{mc:()=>o,vx:()=>a});var i=n(719670);function a(e,r){return null!==e[r]&&!!e[r]}function o(e,r){return Object.keys(e).some(n=>n in e&&!(0,i.c2)(r[n],e[n],!1))}n(718451)},850184:(e,r,n)=>{n.d(r,{B:()=>c}),n(848318);var i=n(952423),a=n(179703),o=n(896853);class s{constructor(){this.allTemplateInfo=new Set,this.nodeGUIDsToTemplate=new Map,s.instance=this}static removeInstance(){s.instance=void 0}trackNodesAsTemplate(e,r,n,i){let o=(0,a.UN)();if(Array.from(r).forEach(e=>{l(o.get(e))||r.delete(e)}),0===r.size)return;let s=Math.floor(.1*r.size),c={templateId:e,fileKey:n,nodeGUIDs:r,trackedNodeCount:r.size,deletionThreshold:s,creationMethod:i};this.allTemplateInfo.add(c),r.forEach(e=>this.nodeGUIDsToTemplate.set(e,c))}checkForTemplateNodesDeletion(e){0!==this.allTemplateInfo.size&&e.forEach(e=>this.checkForTemplateNodeDeletion(e))}checkForTemplateNodeDeletion(e){let r=this.nodeGUIDsToTemplate.get(e);if(!r)return;this.nodeGUIDsToTemplate.delete(e);let n=r.nodeGUIDs;n.delete(e),n.size<=r.deletionThreshold&&(this.stopTrackingTemplate(r),(0,o._)("template_deleted",{templateId:r.templateId,fileKey:r.fileKey,productType:"figjam",trackedNodeCount:r.trackedNodeCount,creationMethod:r.creationMethod}))}stopTrackingTemplate(e){this.allTemplateInfo.delete(e),e.nodeGUIDs.forEach(e=>this.nodeGUIDsToTemplate.delete(e))}}let l=e=>!!e&&("CANVAS"===e.type?e.visible:l(e.parentNode));async function c(e,r,n,a,{enableTracking:o=!0}={}){let l=s.instance;if(!o||!l)return await a();let d=(0,i.UP)(),u=await a(),p=new Set((0,i.UP)());return d.forEach(e=>p.delete(e)),r||="null",l.trackNodesAsTemplate(e(),p,r,n),u}},232843:(e,r,n)=>{n(897392),n(179703),n(39773),n(49392)},905085:(e,r,n)=>{n.d(r,{ky:()=>s}),n(848318);var i=n(992277);n(741419),n(157907);var a=n(502255),o=n(431118);n(235441),n(992444),n(103446),n(241917);let s={getTokenValue:l,updateColorsInFullscreen:function(e){let r={},n=getComputedStyle(document.body),o=e.currentTokens.getCopy();for(let e in o){let o=l(n,e),s=function(e){if(!e||!e.startsWith("#"))return;let r=e.slice(1);switch(r.length){case 3:case 4:{let e=parseInt(r.split("").reduce((e,r)=>e+=r+r,""),16);return 3===r.length?c(e):d(e)}case 6:return c(parseInt(r,16));case 8:return d(parseInt(r,16));default:return}}(o);void 0!==s?r[e]=s:(0,a.$D)(i.e.FPL,Error(`Failed to find valid value for color token ${e}, found ${o}`))}e.currentTokens.set(r)}};function l(e,r){let n;if(r.startsWith("fs"))n="color-"+r;else{let e="color"+r.charAt(0).toUpperCase()+r.slice(1);n=(0,o.VZ)(e).replace("desktop-backgrounded","desktopBackgrounded").replace("desktop-foreground","desktopForeground").replace("desktop-fullscreen","desktopFullscreen")}return e.getPropertyValue(`--${n}`)||void 0}function c(e){return u(0xff000000|e)}function d(e){return u((0xffffff00&e)>>>8|(255&e)<<24)}function u(e){return(0xff00ff00&e|(255&e)<<16|(0xff0000&e)>>>16)>>>0}},927719:(e,r,n)=>{n.d(r,{J:()=>h});var i=n(848318),a=n(716544),o=n(208720),s=n(741419),l=n(543072),c=n(921494),d=n(318672),u=n(235441),p=n(468425),m=n(744149);function h(){let e=(0,u.ow)(),r=(0,p.sO)(),n=(0,a.d4)(e=>e.mirror.appModel.currentPage),h=(0,c.R)(e=>e.mirror.sceneGraph?.get(n)?.backgroundColor),_=(0,m.DP)(),g=(0,i.useMemo)(()=>d.F.format(h),[h]);if(e){let e=s.DV9?.getWhiteboardCanvasColor();return e?d.F.format((0,o.aH)(e)):"#ffffff"}return r&&s.Ez5?d.F.format((0,o.aH)((0,o.R0)(s.Ez5.getFSCanvasDefaultFill()))):h?g:(0,l.Bx)(_)}},39386:(e,r,n)=>{n.d(r,{JT:()=>d});var i=n(716544),a=n(493554),o=n(808471),s=n(376780),l=n(635547),c=n(478789);function d(){let e=(0,i.d4)(e=>e.openFile?.key);if((0,o.lZ)())return(0,i.d4)(r=>{let{hubFiles:n,figFilePublishedAsHubFile:i}=r,a=e&&i[e];return a?(0,c.B4)(n[a]):null});let r=(0,a.Rs)(l.ehp,{fileKey:e||""},{enabled:!!e});if("loaded"!==r.status)return null;let n=r.data.file?.publishedHubFile;return n?.publishingStatus!==s.KB.APPROVED_PUBLIC?null:n}},235441:(e,r,n)=>{n.d(r,{E3:()=>_,Em:()=>m,HW:()=>d,JV:()=>E,XE:()=>c,cJ:()=>h,iq:()=>u,lg:()=>l,my:()=>f,ow:()=>p,pQ:()=>g,u8:()=>y});var i=n(716544),a=n(119310),o=n(376780),s=n(241917);function l(){return(0,i.d4)(e=>{var r;return(r=e.selectedView)&&"fullscreen"===r.view?(0,s.oD)(r.editorType):o._Y.DESIGN})}function c(e){return e&&"fullscreen"===e.view?e.editorType:s.nT.Design}function d(){return(0,i.d4)(e=>"prototype"===e.selectedView.view)}function u(){return(0,i.d4)(e=>"fullscreen"===e.selectedView.view)}function p(){return l()===o._Y.WHITEBOARD}function m(){return l()===o._Y.DESIGN}function h(){return l()===o._Y.SITES}function _(){return(0,i.d4)(g)}function g(e){let r=e.selectedView;return"fullscreen"!==r.view?s.nT.Design:r.editorType}function f(){return(0,i.d4)(e=>E(e.selectedView))}function E(e){return"fullscreen"!==e.view?null:e.editorType}let y=(0,a.bt)(e=>E(e.selectedView))},327658:(e,r,n)=>{n.d(r,{Ol:()=>l,xy:()=>s});var i=n(848318);n(39773),n(918444);var a=n(235441),o=n(402840);function s(e,r){let n=(0,a.my)();return(0,i.useMemo)(()=>(0,o.NW)(n,e,r),[n,r,e])}function l(e){let r=(0,a.my)();return(0,i.useMemo)(()=>(0,o.AG)(r,e),[r,e])}n(60546)},600392:(e,r,n)=>{n(716544),n(322035),n(44509),n(736248),n(442313),n(449737),n(808765),n(345908)},257489:(e,r,n)=>{n.d(r,{$D:()=>p,DG:()=>u,dk:()=>m});var i=n(848318),a=n(716544),o=n(39773),s=n(493554),l=n(635547),c=n(53818);let d=(0,o.eU)(null),u=(0,c.D)((e,r=!1)=>{let n=(0,s.Rs)(l.a8q,{fileKey:e},{enabled:!!e});return(0,i.useMemo)(()=>"loaded"!==n.status?r?{enabled:!0,until:new Date,id:"fallback"}:{enabled:!1}:n.data.figFileWorkshopMode&&new Date<n.data.figFileWorkshopMode.expiresAt?{enabled:!0,until:n.data.figFileWorkshopMode.expiresAt,id:n.data.figFileWorkshopMode.id}:{enabled:!1},[n,r])});function p(e=!1){return function(e=!1){let r=(0,a.d4)(e=>e.openFile);return u(r?.key||"",e)}(e).enabled}function m(e){let r=o.zl.get(d);return!!e&&!!r&&new Date<r&&!e.isTryFile}},280338:(e,r,n)=>{n.d(r,{of:()=>u}),n(848318),n(716544);var i=n(157907);n(39773),n(35030),n(141039),n(61485),n(170513);var a=n(306414),o=n(796251);n(834697),n(474880),n(822610),n(776618);var s=n(369600);n(841747),n(129990);var l=n(694253);n(778727);var c=n(922030),d=n(355323);function u(e,{fullscreenMemoryWarningLevel:r,unreadCommentCount:n,pluginAndWidgetMenuArgs:u,isRecovery:p,isUserInLimitedSpace:m,isPublishingModalDisabled:h,isBillingRemodelEnabled:_}){let g=(0,c.ZT)(e)||null,f=(0,i.k)().branching_update_status_lg?{createBranch:{status:"hidden"},openBranchSource:{status:"hidden"},viewBranches:{status:"hidden"},viewBranchDiff:{status:"hidden"},mergeBranch:{status:"hidden"},viewSourceDiff:{status:"hidden"},updateBranch:{status:"hidden"}}:(0,o.gW)((0,s.tB)(e),(0,l.getPermissionsState)(e),e.selectedView.editorType,r,e.mirror.appModel.topLevelMode,e.mirror.appModel.multiplayerSessionState,p,g,m,_,null);return(0,a.p)({fileMenuArgs:{branchingActionsStatus:f,saveAsState:e.saveAsState,topLevelMode:e.mirror.appModel.topLevelMode,unreadCommentCount:n,isOrgMember:(0,l.canMemberOrg)(e.currentUserOrgId,e),shouldShowSlideConversionEntrypoint:!1},pluginAndWidgetMenuArgs:u,theme:e.theme.themePreference,backToFileArgs:{shouldShowBackToFiles:!1},zoomArgs:{canZoomIn:(0,d.Yh)(e.mirror.appModel,"zoom-in"),canZoomOut:(0,d.Yh)(e.mirror.appModel,"zoom-out")},publishingModalArgs:{isPublishingModalDisabled:h}})}n(132229),n(235441),n(740121)},279731:(e,r,n)=>{n.d(r,{v:()=>c});var i=n(848318);n(128080);var a=n(493554),o=n(486934),s=n(635547),l=n(326872);function c(e){let r=(0,a.Rs)(s.ZzU,{figFileKey:null!=e?(0,o.Kz)(e)?e.sourceFileKey:e.key:""},{enabled:null!=e});return i.useMemo(()=>{if("loaded"!==r.status)return;let e=r.data?.figFileLinkExpirationConfig,n=r.data?.file;if(!e)return;let i=(0,l.d4)(e);return{file:n,accessReverted:!!e.accessReverted,expiresAt:e.expiresAt?.toISOString(),activeExpiration:i?.toISOString()}},[r])}},333282:(e,r,n)=>{n.d(r,{cQ:()=>a}),n(992277),n(379338),n(195507),n(502255),n(171063),n(890477),n(376780),n(759960),n(43482);let i=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{1,9})?Z?$/;function a(e,r,n=()=>!1,i){let o=[],l=[],c={},d=r.reduce((e,r)=>(e.set(r[i],r),e),new Map),u=e.reduce((e,r)=>(e.set(r[i],r),e),new Map);for(let r of e){let e=r[i],a=d.get(e);if(a){let o=s(r,a,n,[],"",e);o.length&&(c[r[i]]=o)}else o.push(e);d.delete(r[i])}for(let e of d.values()){let r=e[i],a=u.get(r);if(a){let i=s(a,e,n,[],"",r);i.length&&(c[r]=i)}else l.push(r)}return{lgMissingIds:o,lgExtraIds:l,differences:c}}function o(e){return"object"==typeof e&&null!==e}function s(e,r,n,a,l,c){if(Array.isArray(e)||Array.isArray(r)){if(!Array.isArray(e)||!Array.isArray(r))return a.push({id:c,key:l,sinatraValue:e,lgValue:r}),a;let i=Math.max(e.length,r.length);for(let d=0;d<i;d++){let i=e[d],u=r[d];if(o(i)&&o(u)){s(i,u,n,a,`${l}[${d}]`,c);continue}i!==u&&a.push({id:c,key:`${l}[${d}]`,sinatraValue:i,lgValue:u})}return a}for(let d of new Set([...Object.keys(e),...Object.keys(r)])){if(n(d))continue;let u=e[d],p=r[d],m=l?`${l}.${d}`:d;if(o(u)&&o(p)){s(u,p,n,a,m,c);continue}d.endsWith("_at")&&"string"==typeof u&&"string"==typeof p&&i.test(u)&&i.test(p)&&u?.substring(0,17)===p?.substring(0,17)||u===p||a.push({id:c,key:m,sinatraValue:u,lgValue:p})}return a}},255499:(e,r,n)=>{var i=n(39773);n(6819);var a=n(493554);n(195507),n(722941);var o=n(369600);n(661780);var s=n(635547),l=n(53818);n(600392),(0,l.D)(()=>{let e=(0,i.md)(o.ze);return(0,a.Rs)(s.jmg,{fileKey:e||""},{enabled:!!e})}),(0,i.eU)(!1)},185336:(e,r,n)=>{n.d(r,{z:()=>o});var i=n(848318),a=n(425642);function o(e,r,n){let[o,s]=i.useState(e),l=i.useCallback(e=>{s({columnName:e,isReversed:o.columnName===e&&!o.isReversed})},[o.columnName,o.isReversed]),c=i.useMemo(()=>{let e=[...r],i=n.find(e=>e.name===o.columnName);return i&&i.getSortValue&&function(e,r,n){if(!r.getSortValue)return;let i=n.isReversed,o=i;r.sortReversed&&(i=!i),r.sortSecondaryReversed&&(o=!o),r.sortNumerically?(0,a.hR)(e,r.getSortValue,i,r.getSecondarySortValue,o):(0,a.v7)(e,r.getSortValue,{isDescending:i,isSecondaryDescending:o},r.getSecondarySortValue)}(e,i,o),e},[n,r,o]);return[o,l,c]}},386117:(e,r,n)=>{n.d(r,{Cb:()=>l,U5:()=>c,Yo:()=>s.zp,yy:()=>d});var i=n(716544);n(430285),n(427008),n(653959);var a=n(87089),o=n(376780);n(635547),n(572699);var s=n(625069);function l(){let e=(0,a.sZ)();return(0,i.d4)(r=>{let n=e&&r.orgUsersByOrgId[e.id];return n&&n[r.user.id]?.permission===o._D.GUEST})}function c(){let e=(0,a.sZ)(),r=(0,i.d4)(r=>e&&r.orgUsersByOrgId[e.id][r.user.id]?.permission);return r&&r!==o._D.GUEST}function d(){return(0,i.d4)(e=>e.openFile?.parentOrgId&&e.orgById[e.openFile.parentOrgId]||void 0)}},280503:(e,r,n)=>{n.d(r,{LQ:()=>l,a9:()=>o,ar:()=>s}),n(848318);var i=n(716544);n(128080),n(579020),n(716245),n(210709),n(397579),n(989446),n(858423),n(695635),n(493554),n(195507),n(925025),n(507152),n(280198),n(442313),n(186323),n(330817),n(630248),n(650894),n(407880),n(871117),n(376780),n(635547),n(168482),n(542700),n(546246);var a=n(412429);n(572699),n(380859),n(494955),n(43482),n(333282);function o(){return(0,i.d4)(e=>(0,a.xw)(e))}function s(e,r){return!!(e&&r)}function l(e){var r;let n=(0,a.xw)(e);return!!((r=e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null)&&r.are_custom_templates_allowed&&n)}},339270:(e,r,n)=>{n.d(r,{NV:()=>S,OX:()=>I,Pt:()=>w,qi:()=>N,qu:()=>C,x2:()=>A});var i=n(716544),a=n(445777),o=n(442313),s=n(544795),l=n(211591),c=n(954677),d=n(449737),u=n(686500),p=n(973182),m=n(661780),h=n(698522),_=n(402840),g=n(526830),f=n(302302),E=n(677251),y=n(800407),b=n(732939),v=n(386502),T=n(598326);function I(e){let r;let n=(0,i.wA)(),a=(0,m.TA)();if(!e||a!==e.creator.id)return null;if((0,s.AC)(e))r=(0,o.t)("community.plugins.cancel_review");else if((0,g.m3)(e)){if((0,s.Pg)(e))return null;r=(0,o.t)("community.resource.delist")}else r=(0,o.t)("community.resource.unpublish");return{displayText:r,callback:()=>{n((0,d.to)({type:b.H,data:{plugin:e},showModalsBeneath:!0}))}}}function S(e,r){let n=(0,i.wA)(),a=(0,p.LR)(),{close:s}=(0,v.cq)(),l=e&&!e.error?r?(0,o.t)("community.plugins.publish_new_version"):(0,o.t)("community.resource.publish"):r?r.is_widget?(0,o.t)("community.plugins.edit_resource_details.widget"):(0,o.t)("community.plugins.edit_resource_details.plugin"):void 0;return l?{displayText:l,callback:()=>{a(),s(),n((0,c.r)({localFileId:e?.localFileId,publishedPluginId:r?.id,entryPoint:f.k2.EDITOR}))}}:null}function w(e,r){let n=(0,i.wA)();if(!e||!r)return null;switch(e){case E.ho.LOAD:return{action:()=>{let e=r.localFileId;n((0,l.JZ)({resourceType:(0,E.k0)(r)?"widget":"plugin",localFileIdToRemove:e}))},msg:(0,o.t)("universal_insert.missing_manifest"),buttonText:(0,o.t)("universal_insert.locate"),displayText:(0,o.t)("universal_insert.locate_missing_manifest")};case E.ho.VALIDATE:case E.ho.PARSE:return{action:()=>{n((0,d.to)({type:T.K,data:{localPlugin:r}}))},msg:(0,o.t)("universal_insert.manifest_error"),buttonText:(0,o.t)("universal_insert.see_details"),displayText:(0,o.t)("universal_insert.manifest_error_view")};default:(0,a.xb)(e)}}function A(e,r,n){let a=(0,i.wA)(),{close:s}=(0,v.cq)();return{displayText:(0,o.t)("universal_insert.manage_permissions"),callback:()=>{n&&n(),s();let i=e&&(0,E.ZQ)(e)?e.localFileId:void 0;a((0,c.r)({localFileId:i,publishedPluginId:r?.id,initialTab:y.KM.PERMISSIONS,entryPoint:f.k2.EDITOR}))}}}function C(e){let r=(0,h.M)();return e?{displayText:(0,u.A)((0,_.YQ)()),callback:()=>{r&&r.openExtensionDirectory(e.localFileId)}}:null}function N(e,r){return{displayText:e?(0,o.t)("universal_insert.remove_local_version"):(0,o.t)("universal_insert.remove"),callback:r}}},793727:(e,r,n)=>{n.d(r,{a:()=>l});var i=n(848318),a=n(493554),o=n(635547);let s=(e,r,n)=>{let s=(0,a.Rs)(o.i1D,{orgId:e},{enabled:!!e});return i.useMemo(()=>{if("loaded"===s.status){let e=s.data?.currentUser?.baseOrgUser?.pluginRequests;if(e)return e.filter(e=>{let i=n?e.workspaceId===n:!!e.workspaceId==!!n;return e.pluginId===r&&i})}return[]},[s,n,r])};function l(e,r,n){return s(e,r,n).filter(e=>"pending"===e.status).length>0}},2626:(e,r,n)=>{n.d(r,{Bi:()=>O,Gt:()=>N,IK:()=>R,RK:()=>A,dR:()=>D,ee:()=>L,hN:()=>P});var i=n(848318),a=n(716544),o=n(992277),s=n(39773),l=n(921494),c=n(502255),d=n(587),u=n(176477),p=n(650080),m=n(34055),h=n(790355),_=n(423095),g=n(521325),f=n(235441),E=n(625069),y=n(24096),b=n(402840),v=n(241917),T=n(677251),I=n(831060),S=n(96447);function w(){let e=(0,f.E3)(),{orgEntity:r,org:n,openFile:a,isReadOnly:o,userCanRunPlugins:s,userCanRunPluginsInDrafts:c,activeTextReviewPlugin:d,publishedPlugins:u,publishedWidgets:p}=(0,l.R)(e=>({orgEntity:(0,E.EL)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,openFile:e.openFile,isReadOnly:e.mirror.appModel.isReadOnly,userCanRunPlugins:(0,y.GP)(e),userCanRunPluginsInDrafts:(0,y.Xn)(e),activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets})),m=(0,S.$1)();return i.useMemo(()=>({openFile:a,localExtensions:m,orgEntity:r,org:n,isReadOnly:o,userCanRunPlugins:s,userCanRunPluginsInDrafts:c,editorType:e,allSavedPlugins:{},activeTextReviewPlugin:d,publishedPlugins:u,publishedWidgets:p}),[a,m,r,n,o,s,c,e,d,u,p])}function A(e){let r=(0,S.Be)(),n=r.plugins[e]||r.orgPlugins[e],i=(0,S.cW)()[e];return n||(i?(0,b.Ar)(i):null)}function C(e){return{type:"run-installed-plugin",pluginId:e.plugin_id,command:void 0,parameterOnly:e.manifest.parameters&&!1!==e.manifest.parameterOnly,parameterEntry:(0,_.c)(e.manifest.parameters,e.name)}}function N(e,r){let n=A(e),l=w(),m=(0,I.b)(),h=(0,d.gB)(),_=(0,a.Pj)(),[f,E]=(0,s.fp)(u.H);return i.useCallback(e=>{if(!n){console.error("Plugin version not found"),(0,c.$D)(o.e.EXTENSIBILITY,Error("Plugin version not found"));return}let i=C(n);if((0,b.YG)(n)&&M(_),(0,b.mx)(n)){h((0,p.$n)(n)),M(_),E(u._.PRIMARY);return}(0,g.Im)({...l,allSavedPlugins:{[n.plugin_id]:n}},r,e||i),m()},[n,l,r,m,_,h,E])}function L(e){return{type:"insert-local-widget",localFileId:e.localFileId,command:void 0}}function O(e){return{type:"insert-installed-widget",pluginId:e.plugin_id,command:void 0}}function R(e){return(0,T.ZQ)(e)?(0,T.k0)(e)?L(e):P(e):(0,T.k0)(e)?O(e):C(e)}function P(e){return{type:"run-local-plugin",localFileId:e.localFileId,command:void 0,parameterOnly:e.manifest.parameters&&!1!==e.manifest.parameterOnly,parameterEntry:(0,_.c)(e.manifest.parameters,e.name)}}function D(e,r){let n=w(),o=Object.values((0,S.$1)()).find(r=>r.plugin_id===e),l=(0,I.b)(),c=(0,d.gB)(),m=(0,a.Pj)(),[h,_]=(0,s.fp)(u.H);return i.useCallback(e=>{if(!o){console.error("Plugin not found");return}let i=P(o);if((0,b.YG)(o)&&M(m),(0,b.mx)(o)){c((0,p.$n)(o)),M(m),_(u._.PRIMARY);return}(0,g.Im)(n,r,e||i),l()},[o,n,r,l,m,c,_])}function M(e){let{selectedView:r}=e.getState();"fullscreen"===r.view&&r.editorType===v.nT.Design&&(e.dispatch(h.$T({...r,view:"fullscreen",editorType:v.nT.DevHandoff})),(0,m.Ym)(e.getState(),v.nT.DevHandoff,"plugin_run"))}},96447:(e,r,n)=>{n.d(r,{$1:()=>k,B7:()=>V,Be:()=>j,F1:()=>em,JI:()=>eu,N3:()=>H,S0:()=>es,U6:()=>eo,Ud:()=>G,WK:()=>F,YN:()=>ed,YW:()=>X,ZT:()=>U,_P:()=>q,b4:()=>et,cW:()=>x,j1:()=>eh,j8:()=>el,ll:()=>ea,mf:()=>K,op:()=>e_,qr:()=>J,sR:()=>ep,tB:()=>er});var i=n(848318),a=n(716544),o=n(719670),s=n(992277),l=n(157907),c=n(805353),d=n.n(c);n(579020);var u=n(921494),p=n(493554);n(427193);var m=n(502255);n(896966);var h=n(442313),_=n(112742),g=n(697714);n(544795),n(327206);var f=n(721045),E=n(142751),y=n(235441);n(914443);var b=n(705724),v=n(51910);n(710905);var T=n(369600),I=n(87089),S=n(661780),w=n(376780),A=n(635547),C=n(928001),N=n(24096),L=n(402840),O=n(241917),R=n(677251);n(101217);var P=n(60546),D=n(327658),M=n(277019);function k(e){let r=(0,a.d4)(e=>e.localPlugins);return(0,D.xy)(r,e)}function F(e){return Object.values(k()).find(r=>r.plugin_id===e)}function x(){let e=(0,a.d4)(e=>e.publishedPlugins),r=(0,y.my)();return(0,i.useMemo)(()=>(0,L.xC)(r,e),[e,r])}function U(){let e=(0,a.d4)(e=>e.publishedWidgets),r=ep(),n=(0,i.useMemo)(()=>({}),[]);return r?e:n}function B({includePendingPublishers:e=!0}={}){let r=(0,S.TA)(),n=x();return(0,i.useMemo)(()=>{if(!r)return[];let i=(0,L.i8)(Object.values(n));return(0,L.Q4)((0,L.ky)(i,r,e))},[n,r,e])}function V(e){return Object.values(B({includePendingPublishers:!1})).find(r=>r.id===e)}function G(e){return Object.values(function({includePendingPublishers:e=!0}={}){let r=(0,S.TA)(),n=U();if(!r)return[];let i=(0,L.i8)(Object.values(n));return(0,L.Q4)((0,L.ky)(i,r,e))}({includePendingPublishers:!1})).find(r=>r.id===e)}function H(e,r){if(null===e.current_plugin_version_id)return null;let n=e.versions[e.current_plugin_version_id],i={id:e.current_plugin_version_id,pluginId:e.id,resourceStagingSignature:null,updatedAt:new Date(Date.now()),iconUrl:n.redirect_icon_url,coverImageUrl:n.redirect_cover_image_url,name:n.name,version:n.version,releaseNotes:n.release_notes,description:n.description,tagline:n.tagline,creatorPolicy:n.creator_policy,manifest:JSON.stringify(n.manifest),createdAt:new Date(n.created_at),iconPath:n.redirect_icon_url,coverImagePath:n.redirect_cover_image_url,codePath:n.redirect_code_url,plugin:{currentPluginVersionId:n.id},playgroundFigFileKey:n.playground_fig_file_key??null,hasPlaygroundFile:!!n.playground_fig_file_key,playgroundFileVersionId:n.playground_file_version_id??null,userId:"",snapshotPath:""},a={id:e.id,currentPluginVersionId:e.current_plugin_version_id,publishingStatus:e.publishing_status,isWidget:e.is_widget,orgId:e.org_id,thumbnailUrl:"",userId:"",updatedAt:new Date(Date.now()),createdAt:new Date(e.created_at),unpublishedAt:null,supportContact:e.support_contact,approvedAt:new Date(Date.now()),installCount:e.install_count,likeCount:0,viewCount:e.view_count,blockedAt:null,profileId:"",commentCount:e.comment_count,hideRelatedContentByOthers:e.hide_related_content_by_others??null,isPublic:e.publishing_status===w.KB.APPROVED_PUBLIC,isInspect:"inspect"===e.editor_type,isSlides:n?.manifest.editorType?.includes(R.FW.SLIDES)||!1,widgetsWhitelistEnforced:null,pluginsWhitelistEnforced:null,monetizedResourceMetadataId:e.monetized_resource_metadata?.id??null,thirdPartyM10nStatus:e.third_party_m10n_status??null,monetizationStatus:e.monetization_status??null,canRead:!0,categoryId:"",uniqueRunCount:0,pluginEditorType:0,commentsSetting:"",currentUserFirstRanAt:"",profileInstallStatus:2,redirectThumbnailUrl:"",communityPublishers:e.community_publishers?.accepted.map(r=>({id:r.id,isPending:!1,role:w.un.CREATOR,userId:r.primary_user_id,profileId:r.id,pluginId:e.id,hubFileId:null,profile:{id:r.id,profileHandle:r.profile_handle,team:"team"===r.entity_type?{id:r.id,name:r.name}:null,org:"org"===r.entity_type?{id:r.id,name:r.name}:null,user:"user"===r.entity_type?{id:r.primary_user_id,name:r.name}:null,teamId:"team"===r.entity_type?r.id:null,orgId:"org"===r.entity_type?r.id:null,primaryUserId:"user"===r.entity_type?r.primary_user_id:null,publicAt:new Date(Date.now()),website:null,description:null,location:null,twitter:null,instagram:null,createdAt:new Date(Date.now()),updatedAt:new Date(Date.now()),followerCount:0,followingCount:0,coverImagePath:null,pronouns:null,badges:[],communityUserIsFollowing:r.current_user_is_following,communityUserIsFollowed:r.current_user_is_followed,entityType:r.entity_type,currentUserIsFollowing:!1,currentUserIsFollowed:!1,name:r.name,imgUrl:null,imgUrls:{}}}))||[],currentPluginVersion:i,viewableInEditor:!0,publishingStatusUpdatedAt:null,isSeoIndexingAllowed:null,currentPlanUser:null};return{pluginId:e.id,createdAt:new Date(Date.now()),userId:r.userId,orgId:r.orgId,pluginVersionId:e.current_plugin_version_id,plugin:a,pinnedStatus:w.hM.UNPINNED}}function K(e,r,n,i){if(!e||e.publishingStatus&&[w.KB.ORG_PRIVATE,w.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishingStatus)&&(!e.orgId||e.orgId!==r)&&!(0,l.k)().community_hub_admin)return;let a=e.currentPluginVersion;if(!a)return;if(!a.manifest){(0,m.$D)(s.e.EXTENSIBILITY,Error("manifest missing"),{extra:{plugin:e}});return}let o=e.isWidget?"widget":"plugin",c=function(e){try{let r="string"==typeof e?JSON.parse(e):e;"dynamic-page"!==r.documentAccess&&delete r.documentAccess;let n=R.pL.safeParse(r);if(!n.success)return(0,m.$D)(s.e.EXTENSIBILITY,Error("manifest schema parse error"),{extra:{jsonParsedResult:JSON.stringify(r,null,2),rawManifest:JSON.stringify(e,null,2),errors:n.error.format()}}),r;return n.data}catch(r){(0,m.$D)(s.e.EXTENSIBILITY,Error("manifest JSON parse error"),{extra:{rawManifest:e}});return}}(a.manifest);if(!c)return;let d=`?resource_type=${o}&resource_id=${e.id}`;n&&(d+=`&fuid=${n}`);let u={id:a.id,plugin_id:e.id,name:a.name||"",current_plugin_version_id:a.plugin?.currentPluginVersionId||void 0,version:a.version||"",release_notes:a.releaseNotes||"",is_private:!!e.orgId,description:a.description||"",creator_policy:a.creatorPolicy??"",manifest:c,installed_by:i,tagline:a.tagline||"",created_at:a.createdAt.toString(),redirect_icon_url:`/community/icon${d}`,redirect_cover_image_url:`/community/thumbnail${d}`,redirect_code_url:`/community/${o}/${e.id}/code`};return e.communityPublishers&&(u.community_publishers=e.communityPublishers),e.isWidget&&(u.redirect_snapshot_url=`/community/snapshot${d}`),e.orgId&&(u.org_id=e.orgId),u}let W=(e,r,n)=>{let i={},a={},o={},s={},l={},c={};if("loaded"!==e.status)return{plugins:{},widgets:{},orgPlugins:{},orgWidgets:{},userPlugins:{},userWidgets:{}};let d=e.data;for(let e of[{source:"org",savedExtensions:d.org?.installedPlugins},{source:"user",savedExtensions:d.currentUser?.installedPlugins}]){let{source:d,savedExtensions:u}=e;if(u)for(let e of u){let{plugin:u}=e;if(!u||!u.viewableInEditor)continue;let p=K(u,r,n,d);p&&(u.isWidget?(a[e.pluginId]=p,"org"===d?s[e.pluginId]=p:"user"===d&&(c[e.pluginId]=p)):(i[e.pluginId]=p,"org"===d?o[e.pluginId]=p:"user"===d&&(l[e.pluginId]=p)))}}return{plugins:i,widgets:a,orgPlugins:o,orgWidgets:s,userPlugins:l,userWidgets:c}},z=new Set,$=new Set,Y=d()(e=>{z.size>0&&(e(E.f1({pluginIds:Array.from(z)})),z.clear()),$.size>0&&(e(E.O8({widgetIds:Array.from($)})),$.clear())},300);function j(){let e=(0,a.wA)(),r=(0,a.d4)(e=>e.currentUserOrgId),n=(0,p.Rs)(A.BB3,{orgId:r}),o=(0,S.TA)(),s=ep();return i.useMemo(()=>{if("loaded"!==n.status)return{loaded:!1,plugins:{},widgets:{},orgWidgets:{},orgPlugins:{},userWidgets:{},userPlugins:{}};let{plugins:i,widgets:a,orgPlugins:l,orgWidgets:c,userPlugins:d,userWidgets:u}=W(n,r,o);return!function(e,r,n){let i=Object.keys(r),a=Object.keys(n);i.forEach(e=>z.add(e)),a.forEach(e=>$.add(e)),Y(e)}(e,i,s?a:{}),{loaded:!0,plugins:i,widgets:s?a:{},orgPlugins:l,orgWidgets:s?c:{},userPlugins:d,userWidgets:s?u:{}}},[e,n,r,o,s])}function q(e,r){let n=I.sZ()?.id??null,a=(0,S.TA)(),o=(0,p.Rs)(A.k_1,{orgId:n,pluginId:e},{enabled:r}),s=o.data?.plugin,l=o.status;return i.useMemo(()=>"loaded"!==l?{loaded:!1,plugin:null}:{loaded:!0,plugin:s?K(s,n,a,null)??null:null},[l,s,n,a])}function X(e,r){return e.name.localeCompare(r.name)}let Z={loaded:!0,plugins:{}};function J(){return ee(function(){let e=(0,a.d4)(e=>e.recentlyUsed.widgets),r=function(){let e=k();return(0,i.useMemo)(()=>{let r={};for(let n in e){let i=e[n];(0,R.k0)(i)&&(r[n]=i)}return r},[e])}(),n=(0,M.o)(),o=(0,S.TA)(),s=ep();return(0,i.useMemo)(()=>{let i=[];return s&&n&&o&&e[n].forEach(n=>{if(o&&!n.run_by_user_ids?.includes(o))return;let a=e.fetchedResources[n.id];if(a&&a.version){i.push(a.version);return}if(r[n.id]){i.push(r[n.id]);return}}),i},[n,r,e,o,s])}())}function Q(){let e=(0,a.d4)(e=>e.recentlyUsed.plugins),r=function(e){let r=k(void 0);return(0,i.useMemo)(()=>{let e={};for(let n in r){let i=r[n];(0,R.k0)(i)||(e[n]=i)}return e},[r])}(),n=(0,M.o)(),o=(0,S.TA)(),s=(0,i.useMemo)(()=>{let i=[];return n&&o&&e[n].forEach(n=>{if(o&&!n.run_by_user_ids?.includes(o))return;let a=e.fetchedResources[n.id];if(a&&a.version){i.push(a.version);return}if(r[n.id]){i.push(r[n.id]);return}}),i},[n,e,r,o]);return(0,D.Ol)(s)}function ee(e){let r={};return e.filter(e=>!r[e.plugin_id]&&(r[e.plugin_id]=!0,!0))}function et(){let e=ee(Q());return i.useMemo(()=>{let r={};return e.forEach(e=>r[e.plugin_id]=e),r},[e])}function er(){let e=(0,a.d4)(e=>e.recentlyUsed.plugins),r=(0,a.d4)(e=>e.recentlyUsed.widgets),n=(0,S.TA)(),o=(0,M.o)();return(0,i.useMemo)(()=>{let i={};return o&&n&&(e[o].forEach(e=>{let r=e.last_added_at_by_user_id?.[n];r&&(i[e.id]=r)}),r[o].forEach(e=>{let r=e.last_added_at_by_user_id?.[n];r&&(i[e.id]=r)})),i},[o,n,e,r])}function en(e,r,n){let i=Object.keys(e).reduce((e,n)=>{if(r[n]){let i=r[n],a=(0,L.Ar)(i);if(!a)return e;e[n]=a}return e},{});return(0,L.NW)(n,i)}function ei(e){let r=I.sZ()?.id??"",n=(0,a.wA)(),i=(0,a.d4)(r=>"plugin"===e?r.whitelistedPlugins:r.whitelistedWidgets),s=!!r,l=function(e,r=!0){let n=I.sZ()?.id??"",i=(0,T.tS)(),a=(0,b.CR)(e,r&&!!i),o=(0,b.kA)(n??"",e,r&&!!n&&!i);return i?a:o}(e,s),c=l.loaded?l.data:[];if(!s)return i;if(!l.loaded)return{};let d={};return c.forEach(e=>{e&&(d[e]=!0)}),(0,o.c2)(d,i)||n(("plugin"===e?_.P:_.o)(d)),d}function ea(){let e=(0,y.my)(),r=(0,I.sZ)(),n=x(),o=!!(r&&r.plugins_whitelist_enforced),s=ei("plugin"),l=(0,a.wA)(),c=(0,T.tS)(),d=(0,R.Gb)(r?.id??"",c),u=(0,a.d4)(e=>!!r&&(0,C.mn)(e.loadingState,d));return i.useEffect(()=>{o&&!u&&l(f.Vl({}))},[o,l,u]),i.useMemo(()=>en(s,n,e),[e,s,n])}function eo(){let e=(0,y.my)(),r=(0,I.sZ)(),n=U(),o=!!(r&&r.widgets_whitelist_enforced),s=ei("widget"),l=(0,a.wA)(),c=(0,T.tS)(),d=(0,R.n_)(r?.id??"",c),u=(0,a.d4)(e=>!!r&&(0,C.mn)(e.loadingState,d));i.useEffect(()=>{o&&!u&&l(f.mV({}))},[o,l,u]);let p=i.useMemo(()=>en(s,n,e),[s,n,e]),m=ep(),h=(0,i.useMemo)(()=>({}),[]);return m?p:h}function es(e,{searchLocalPlugins:r,searchPublishedPlugins:n}){let a=k(),o=x();return i.useMemo(()=>(0,L.DM)({idToSearch:e,localExtensionsByFileId:r?a:void 0,publishedExtensions:n?o:void 0}),[e,r,n,a,o])}function el(){let e=function(){let e=(0,a.d4)(e=>e.selectedView),r=(0,a.d4)(e=>e.installedPluginVersions);if("fullscreen"!==e.view)return Z;let n=(0,L.GX)(e.editorType);if(!r.loaded)return r;let i={};for(let a of Object.values(r.plugins))(0,L.EK)(n,a.manifest.editorType)?i[a.plugin_id]=a:((0,P.$A)(e)&&(0,L.M5)(a)||"figma"===n&&(0,L.M5)(a))&&(i[a.plugin_id]=a);let o="fullscreen"===e.view?e.editorType:null;return{loaded:!0,plugins:(0,L.NW)(o,i)}}(),r=B(),n=Q(),i={};return Object.values(e.plugins).forEach(e=>{i[e.plugin_id]||(i[e.plugin_id]=e)}),Object.values(r).map(L.uF).forEach(e=>{i[e.plugin_id]||(0,R.ZQ)(e)||(i[e.plugin_id]=e)}),n.forEach(e=>{i[e.plugin_id]||(0,R.ZQ)(e)||(i[e.plugin_id]=e)}),i}function ec(e){let r={};return Object.keys(e).forEach(e=>{r[e]=!0}),r}function ed(){let e=(0,y.E3)(),r=ec(ea()),n=ec(eo()),a=(0,u.R)(e=>({currentUserOrgId:e.currentUserOrgId,orgById:e.orgById,selectedView:e.selectedView,openFile:e.openFile})),o=(0,v.p8)("isReadOnly");return i.useCallback(i=>{let{canRun:s}=(0,L.JT)({plugin:i,editorType:e,canRunPluginState:{...a,mirror:{appModel:{isReadOnly:o}},whitelistedPlugins:r,whitelistedWidgets:n}});return s},[e,a,r,n,o])}function eu(){return(0,a.d4)(N.GP)}function ep(){let e=(0,y.E3)();return e!==O.nT.Slides&&e!==O.nT.Sites&&e!==O.nT.Figmake}function em(e){let r=(0,y.pQ)(e);return r!==O.nT.Slides&&r!==O.nT.Sites&&r!==O.nT.Figmake}function eh(e){let r=(0,a.wA)(),n=(0,I.sZ)(),o=!!(n&&n.plugins_whitelist_enforced),s=(0,a.d4)(e=>e.whitelistedPlugins)[e],l=k(),c=i.useMemo(()=>Object.values(l).find(r=>r.plugin_id===e),[l,e]),d=(0,a.d4)(r=>r.publishedPlugins[e]),u=!o||c||d?.org_id,p=!s&&!u;return{validatePublishedPluginInOrgAllowlist:i.useCallback(()=>!p||(r(g.F.enqueue({message:(0,h.t)("universal_insert.plugin_not_in_allowlist"),error:!0})),!1),[p,r]),isPluginBlockedByAllowlist:p}}function e_(){let{filterByAllowlist:e,filterByPublicResourcesAllowed:r}=function(e){let r=(0,I.sZ)(),n=!!(r&&r.plugins_whitelist_enforced),a=!!(r&&r.widgets_whitelist_enforced),o=!!r&&!r.public_plugins_allowed,s=ea(),l=eo(),c=e?l:s,d=e?a:n,u=r?.id??"",p=(0,T.tS)(),m=(0,C.oh)(e?(0,R.n_)(u,p):(0,R.Gb)(u,p)),h=i.useCallback(e=>d?e.filter(e=>!(0,R.LR)(e)||!!c[e.plugin_id]):e,[c,d]),_=i.useCallback(e=>o?e.filter(e=>!(0,R.LR)(e)):e,[o]);return{publicExtensionsDisallowed:o,allowList:c,hasAllowList:d,allowListIsLoading:m,hasPluginAllowList:n,hasWidgetAllowList:a,filterByPublicResourcesAllowed:_,filterByAllowlist:h}}(!1);return e(r(ee(Q())))}},22647:(e,r,n)=>{n.d(r,{Yk:()=>E}),n(848318);var i=n(716544),a=n(622876);n(741419),n(157907);var o=n(39773),s=n(818754),l=n(56077);n(738460);var c=n(657218);n(119699);var d=n(235441);n(577023),n(45584),n(974326),n(710905),n(207715);var u=n(60546);n(928453);var p=n(392878),m=n(239313);n(552382);var h=n(406204),_=n(92240),g=n(96813);n(58767);var f=n(27776);function E(){let e=(0,g._P)(),r=(0,p.N)(),n=(0,o.md)(m.gT),E=function(){let e=(0,o.md)(m.gT),r=(0,h.bz)(),n=(0,g.K4)(),i=(0,g.w5)();return!e&&(r||n||i)}(),y=(0,c.e)(),b=(0,u.ks)(),v=(0,i.d4)(e=>!!e.prototype?.isFooterVisible),T=(0,l.z)()&&!b?(0,s.jz)(f.F6W):0,I="ui3"===(0,a.DP)().version,S=(0,d.ow)(),w=(0,_.L)(),A=(0,i.d4)(e=>e.mirror?.appModel.showUi),C=64+r+T;if(S&&!w){let r=I?f.LQy:f.IuL;return e&&E?(0,s.jz)(r)+(0,s.jz)(f.jl4):e&&n?C:e?(0,s.jz)(r):0}return S&&w&&e&&E?C+(0,s.jz)(f.PYy):y?I?C+40:(0,s.jz)(f.ZB$):v?(0,s.jz)(f.P4e):I&&A?C:0}(0,s.hG)(f.xEX),(0,o.eU)(0)},199689:(e,r,n)=>{n.d(r,{iT:()=>p});var i=n(848318),a=n(716544),o=n(741419);n(397579),n(209075),n(449977);var s=n(51910),l=n(207715),c=n(252244);n(468425);var d=n(235441),u=n(727341);function p(){let e=(0,u.GS)(),r=!(0,l.ut)(o.Ez5?.uiState()?.showPropertiesPanel,!0),n=function(){let e=(0,u.GS)(),r=(0,d.ow)(),n=(0,c.Ye)(),i=(0,s.aV)(),l=(0,s.ax)(),p=(0,s.dH)(),m=p===o.NLJ.FRAME||p===o.NLJ.COMMENTS||p===o.NLJ.VECTOR_PENCIL,h=(0,a.d4)(e=>e.mirror.appModel.activeUserAction===o.QOV.DEFAULT);return!!e&&!!h&&!!n&&!i&&!r&&!l&&!m}(),p=e&&(r||n),m=(0,i.useCallback)(e=>{r!==e&&o.Ez5?.uiState().showPropertiesPanel.set(!e)},[r]),h=(0,i.useCallback)(()=>{m(!p)},[p,m]);return{isPropertiesPanelCollapsed:p,setPropertiesPanelCollapsed:m,togglePropertiesPanelCollapsed:h}}},593005:(e,r,n)=>{n.d(r,{w:()=>o,y:()=>s});var i=n(157907),a=n(386117);function o(){let e=(0,a.U5)();return(0,i.k)().xr_debounce_threshold&&e}function s(){return(0,i.k)().xr_debounce_threshold}},384274:(e,r,n)=>{n.d(r,{Et:()=>L,J3:()=>w,JU:()=>A,UF:()=>C,b2:()=>O,kD:()=>N,kN:()=>b,mZ:()=>S,tS:()=>I}),n(848318);var i=n(716544),a=n(445777),o=n(157907),s=n(39773);n(921494),n(493554),n(653959);var l=n(92537),c=n(369600),d=n(87089),u=n(376780);n(635547);var p=n(997894);n(154209);var m=n(710665),h=n(572699),_=n(668249);n(778727);var g=n(922030);n(162371),n(713534),n(469024);var f=n(312278),E=n(235441),y=n(280503),b=(e=>(e.NOT_ENABLED="NOT_ENABLED",e.CAN_PUBLISH="CAN_PUBLISH",e.FILE_IN_DRAFTS="FILE_IN_DRAFTS",e.FILE_IN_DRAFTS_CANNOT_MOVE="FILE_IN_DRAFTS_CANNOT_MOVE",e.DISABLED_IN_SETTINGS="DISABLED_IN_SETTINGS",e.CANNOT_PUBLISH="CANNOT_PUBLISH",e))(b||{});function v(e){let r=(0,E.lg)(),n=(0,h.bv)(e);return(0,h.yN)({...e,attribute:"canBrowseOrgTemplates",legacy:(e,i)=>i?(0,y.ar)(i?.are_custom_templates_allowed,n):!!(e&&r&&("student_team"in e?(0,m.w5)(e):(0,m.XX)(e)))&&(r===u._Y.SLIDES||(r===u._Y.WHITEBOARD?!!(0,o.k)().pro_templates_figjam:r===u._Y.COOPER)),migrated:(e,i)=>i?.key.type===u.OL.ORG?(0,y.ar)(!!i?.customTemplatesAllowed,n):i?.key.type===u.OL.TEAM&&!!i&&!!r&&i.tier!==u.Ag.STARTER&&(r===u._Y.SLIDES||(r===u._Y.WHITEBOARD?!!(0,o.k)().pro_templates_figjam:r===u._Y.COOPER))})}function T(){let e=(0,d.sZ)(),r=(0,g.ol)();if(v({component:"useCurrentEntityForTemplates",migrationGroup:_.L.GROUP_5})){if(e)return{type:"org",entity:e,name:e.name};if(r)return{type:"team",entity:r,name:r.name}}return null}function I(){return!!T()}function S(e){let r=v({component:"useFileEntityCanAccessTemplates",migrationGroup:_.L.GROUP_5});return!!e&&r}function w(){let e=(0,c.q5)(),r=function(){let e=T(),r=(0,c.q5)();return(0,i.d4)(n=>!!r&&!!r.folderId&&(e?.type==="team"?(0,l.ye)(n.folders[r.folderId]):e?.type==="org"&&(0,l.Gi)(n.folders[r.folderId])))}(),n={component:"usePublishTemplateStatus",migrationGroup:_.L.GROUP_5},a=(0,h.UP)(n),o=v(n),s=!!e?.canPublishTemplate,d=!!e?.canEdit;return(a===u.OL.ORG||o)&&e?.editorType!==u._Y.DESIGN?s?"CAN_PUBLISH":d?a!==u.OL.ORG||o?r?e?.canDelete?"FILE_IN_DRAFTS":"FILE_IN_DRAFTS_CANNOT_MOVE":"CANNOT_PUBLISH":"DISABLED_IN_SETTINGS":"CANNOT_PUBLISH":"NOT_ENABLED"}function A(e){switch(e){case"CAN_PUBLISH":case"FILE_IN_DRAFTS":return!0;case"DISABLED_IN_SETTINGS":case"NOT_ENABLED":case"CANNOT_PUBLISH":case"FILE_IN_DRAFTS_CANNOT_MOVE":return!1;default:(0,a.xb)(e)}}function C({fileCanEdit:e,editor_type:r,team_id:n,state:i}){let a=i.currentUserOrgId&&i.orgById[i.currentUserOrgId];return!!(a&&e&&r===u._Y.WHITEBOARD&&a.are_custom_templates_allowed&&n)}function N(){let e=(0,c.q5)(),r=L(e);return e?.template&&r?e?.template:null}function L(e){let r=S(e);return!!e&&!!e.template&&!e.template.unpublishedAt&&r}p.M4.Query({fetch:async({orgId:e,count:r,editorType:n,enabled:i=!0})=>e&&i?await f.q.getSearchPaginated({orgId:e,size:r,from:0,templateType:n}).then(e=>e.data.meta.templates):[]}),(0,s.eU)(null);let O=(0,s.eU)(null)},17629:(e,r,n)=>{n.d(r,{jd:()=>W,dT:()=>U,Fz:()=>G,eE:()=>H,_R:()=>$});var i=n(848318),a=n(716544),o=n(445777),s=n(741419),l=n(673906),c=n(579020),d=n(44509),u=n(989446),p=n(925025),m=n(427193),h=n(757033),_=n(442313),g=n(697714),f=n(8374),E=n(341550),y=n(935160),b=n(93724),v=n(405866),T=n(850184),I=n(896853),S=n(711107),w=n(985951),A=n(19323),C=n(369600),N=n(661780),L=n(273121),O=n(928001);n(572699),n(668249);var R=n(713534),P=n(492119);n(312278);let D=(e,r)=>{switch(e.type){case R.n.HubFile:return`/api/hub_files/${k(e)}/${r}/prepare_insert`;case R.n.TeamTemplate:case R.n.TeamTemplateLg:return`/api/templates/${k(e)}/${r}/prepare_insert`}},M=e=>{switch(e.type){case R.n.HubFile:return`/api/hub_files/${k(e)}/template_canvas`;case R.n.TeamTemplate:case R.n.TeamTemplateLg:return`/api/templates/${k(e)}/template_canvas`}},k=({type:e,template:r})=>{switch(e){case R.n.HubFile:return r.id;case R.n.TeamTemplate:return r.file_key;case R.n.TeamTemplateLg:return r.fileKey;default:(0,o.xb)(e)}},F=({template:e,type:r})=>{switch(r){case R.n.HubFile:return{type:P.vt.CommunityResource,id:e.id};case R.n.TeamTemplate:return{type:P.vt.TeamTemplate,file_key:e.file_key};case R.n.TeamTemplateLg:return{type:P.vt.TeamTemplate,file_key:e.fileKey};default:(0,o.xb)(r)}};async function x({insert:e,dispatch:r,fileKey:n,template:i,onSuccess:a,onFailure:o,userTriggered:s=!0,isPreview:l=!1,triggeredFrom:d}){let u=new m.jk(`template_insert.${d}`,{key:n??""});u.start();let p=e=>{let r=u.stop();(0,c.sx)(e,{elapsedMs:r,triggeredFrom:d,isPreview:l},{forwardToDatadog:!0,batchRequest:!0})},h=k(i);try{await (0,T.B)(()=>h,n,I.T.STANDARD,async()=>{await e()&&(a&&a(),p("template_insert_success"),(0,I._)(l?"resource_previewed":"resource_inserted",{fileKey:n,resourceType:"template",resourceName:(0,S.gY)(i),resourceId:h,triggeredFrom:d,templateType:i.type,templateCategory:i.type===R.n.HubFile?i.category:void 0}),s)&&(r(v.b({inserted_figjam_template:!0})),i.type===R.n.TeamTemplate&&r(y.D([i.template])),"section-preset"!==d&&"sites-templates-modal"!==d&&r(b.Hx({storeInRecentsKey:P.$A.FigJam,...F(i)})))},{enableTracking:!l})}catch(e){r(g.F.enqueue({message:(0,_.t)("whiteboard.inserts.insert_template_failed_v2"),error:!0})),o&&o(),p("template_insert_failure")}}async function U({template:e,fileKey:r,fileVersion:n}){if(!r)throw Error("Missing file key");if(!n)throw Error("Missing file version");let i=D(e,r),a=M(e),o=e.type===R.n.HubFile?{fv:`${n}`}:void 0,s=(0,w.n)(a,(e,r)=>h.Ay.post(e,{fv:`${r}`},{responseType:"arraybuffer"}).then(({data:e})=>e)),[[l]]=await Promise.all([s,h.Ay.post(i,o)]);return l}async function B(e){let{userTriggered:r=!0,cloneLocalStylesForTemplate:n,templateInsertionDirection:i=s.hKj.RIGHT,templateCustomPosition:a,selectTemplateAfterInsertion:o}=e,c=e.editScopeType;c||(c=r?s.zkO.USER:s.zkO.SYSTEM),await x({insert:async()=>await U(e).then(e=>((0,l.l7)(c,"insert-figjam-template",()=>s.glU.insertTemplateInCanvas(e,!!n,i,o??r,!a,a?a.x:null,a?a.y:null)),!0)),...e})}function V(e,r){return`INSERT_FIGJAM_TEMPLATE_${e}_${r}`}function G(){let e=(0,a.wA)(),r=(0,C.tS)(),n=(0,a.d4)(e=>e.fileVersion),i=(0,a.d4)(e=>e.loadingState);return{insertTemplate:async({onSuccess:a,onFailure:o,...s})=>{let l=V(r,k(s.template));(0,O.VP)(i,l)||(e(E.Cx({key:l})),await B({dispatch:e,fileKey:r,fileVersion:n,...s,onSuccess:()=>{e(E.yH({key:l})),a&&a()},onFailure:()=>{e(E.yH({key:l})),o&&o()}}))},isInsertingTemplate:e=>{let n=V(r,e);return(0,O.VP)(i,n)}}}function H(e){let r=(0,a.d4)(e=>e.recentlyUsed.templates),n=(0,a.d4)(e=>e.hubFiles),s=(0,a.d4)(e=>e.recentCustomTemplates);return(0,i.useMemo)(()=>r[e].map(e=>{let{type:r}=e;switch(r){case P.vt.CommunityResource:return{type:R.n.HubFile,template:n[e.id]};case P.vt.TeamTemplate:return{type:R.n.TeamTemplate,template:s[e.key]};default:(0,o.xb)(r)}}).filter(({template:e})=>!!e),[r,n,s,e])}async function K({dispatch:e,templateIdentifier:r,onSuccess:n,onFailure:i,templateName:a,openInNewTab:o,folderId:s}){await h.Ay.post(`/api/templates/${r.file_key}/duplicate`,{folder_id:s}).then(({data:i})=>{let{fig_file:a,template:s}=i.meta;n(),e(y.D([s])),e(b.Hx({storeInRecentsKey:P.$A.FigJam,...r})),d.Ay.redirect((0,L.to)(a),o?"_blank":void 0)}).catch(()=>{let r={error:!0,message:(0,_.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:a})};e(g.F.enqueue(r)),i()})}let W=(0,f.nF)((e,r)=>{var n;let i=(n=r.templateIdentifier.file_key,`DUPLICATE_FIGJAM_TEMPLATE_${n}`),{dispatch:a}=e,{loadingState:o}=e.getState();(0,O.VP)(o,i)||(a(E.Cx({key:i})),K({...r,dispatch:a,onSuccess:()=>{a(E.yH({key:i})),r.onSuccess&&r.onSuccess()},onFailure:()=>{a(E.yH({key:i})),r.onFailure&&r.onFailure()}}))}),z={url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdj+P///38ACfsD/QVDRcoAAAAASUVORK5CYII="};function $(e){let r=(0,N.iZ)(),n=(0,u.J)(()=>r?(0,A.$)(e,r):Promise.reject(Error("User not logged in")),[e,r]),[a,o]=(0,i.useState)(z);return(0,i.useEffect)(()=>{n.status===p.r.SUCCESS&&o(n.value),n.status===p.r.FAILURE&&o(z)},[n]),a}},727341:(e,r,n)=>{n.d(r,{GS:()=>a}),n(848318);var i=n(622876);function a(){return"ui3"===(0,i.DP)().version}n(741419),n(157907),n(911449),n(44509),n(322627),n(831932),n(502255),n(235441),n(366651),n(103446),n(974326),n(747863),n(241917),n(468425)},564531:(e,r,n)=>{n(848318);var i=n(39773);n(584305),(0,i.eU)(null),(0,i.eU)(null)},665549:(e,r,n)=>{n.d(r,{MJ:()=>h,Pp:()=>_,n1:()=>E,rM:()=>f}),n(848318);var i=n(716544),a=n(39773),o=n(351766),s=n(379338),l=n(635547),c=n(572699),d=n(668249),u=n(922030),p=n(700392),m=n(53818);let h=(0,m.n)((e,r,n)=>{let i=e?.figma_provided_libraries_disabled||r?.figma_provided_libraries_disabled;return!!(!(0,s.sL)()&&!n&&!i)}),_=(0,m.n)((e,r,n)=>!((0,s.sL)()||n||e?.figmaProvidedLibrariesDisabledAt&&(0,o.oA)(e.figmaProvidedLibrariesDisabledAt)||r?.canAccessProFeature&&r.figmaProvidedLibrariesDisabledAt&&(0,o.oA)(r.figmaProvidedLibrariesDisabledAt))),g=(0,m.n)((e,r)=>!!(!(0,s.sL)()&&!r&&e?.figmaProvidedLibrariesEnabled));function f(e){if("loaded"!==e.status)return!1;let r=e.data.team,n=e.data.org;return(!r||"loaded"===r.figmaProvidedLibrariesDisabledAt.status)&&(!n||"loaded"===n.figmaProvidedLibrariesDisabledAt.status)}function E(){let e=(0,u.cD)(),r=(0,u.jv)(e)?e:null,n=(0,i.d4)(({openFile:e,currentUserOrgId:r})=>e?e.parentOrgId:r),o=(0,a.md)(l.U8U.Query(r||n?{teamId:r||"-1",orgId:n}:null)),s=(0,a.md)(p.AS).enabled,m=(0,c.yN)({component:"useDsePresetsEnabled",migrationGroup:d.L.GROUP_4,attribute:"isDsePresetsEnabled",legacy:(e,r)=>h(r,e,s),migrated:(e,r)=>g(r,s)});return"loaded"===o.status&&f(o)?_(o.data.org,o.data.team,s):m}},599341:(e,r,n)=>{n(848318),n(45584),n(564531)},366651:(e,r,n)=>{n.d(r,{k5:()=>s});var i=n(661780),a=n(241917),o=n(235441);function s(){let e=!(0,i.iZ)(),r=(0,o.my)(),n=r===a.nT.Design,s=r===a.nT.Slides,l=r===a.nT.Sites,c=r===a.nT.Cooper,d=r===a.nT.Figmake;return e&&(n||s||l||c||d)}},837764:(e,r,n)=>{n.d(r,{K:()=>o});var i=n(848318);function a(e,r){if(!r)return e;let n=new Set(r.map(e=>e.id)),i=e.filter(e=>!n.has(e));return i.length===e.length?e:i}function o(e,r=50){let[n,s]=i.useState([]),l=i.useMemo(()=>a(n,e),[e,n]);return i.useEffect(()=>{s(l)},[l]),{optimisticIds:l,addOptimisticIds:i.useCallback(e=>s(n=>{let i=[...n,...e];return i.length>r?i.slice(i.length-r):i}),[r]),setServerData:i.useCallback(e=>{s(r=>a(r,e))},[])}}},275738:(e,r,n)=>{n.d(r,{FC:()=>_});var i=n(992277),a=n(39773),o=n(379338),s=n(858423),l=n(695635);n(493554);var c=n(502255),d=n(635547),u=n(583962);class p{constructor(e){this.pendingIncrementCount=0,this.makeDebouncedUpsertRequest=m(e=>u.H.upsertUserFlagWithCount(this.userFlagName,e),1e3),this.makeDebouncedResetRequest=m(()=>u.H.resetUserFlag(this.userFlagName),1e3),this.increment=async()=>{let e;let r=o.Ay().user_data?.id;if(!r){(0,c.$D)(i.e.GROWTH_PLATFORM,Error(`Attempted to increment user flag counter ${this.userFlagName} for anonymous user; this is a no-op.`));return}this.pendingIncrementCount+=1;try{e=await (0,l.Ek)(d.sMZ,{name:this.userFlagName})}catch(e){throw this.pendingIncrementCount-=1,e}let n=e.currentUser.userFlagByName;if(0===this.pendingIncrementCount)return;let a=(n?n.count??1:0)+this.pendingIncrementCount;this.pendingIncrementCount=0;let u=this.makeDebouncedUpsertRequest(a),p=new Date;return n?(0,s.WB)().optimisticallyUpdate({UserFlag:{[n.id]:{count:a,updatedAt:p}}},u):(0,s.WB)().optimisticallyCreate({UserFlag:{[`optimistic-id-${this.userFlagName}`]:{userId:r,name:this.userFlagName,count:a,createdAt:p,updatedAt:p}}},u)},this.reset=async()=>{if(!o.Ay().user_data?.id){(0,c.$D)(i.e.GROWTH_PLATFORM,Error(`Attempted to reset user flag counter ${this.userFlagName} for anonymous user; this is a no-op.`));return}let e=await (0,l.Ek)(d.sMZ,{name:this.userFlagName}),r=e.currentUser?.userFlagByName;if(!r)return;let n=this.makeDebouncedResetRequest();return(0,s.WB)().optimisticallyDelete({UserFlag:{[r.id]:null}},n)},this.userFlagName=e}}function m(e,r=200){let n;let i=[];return function(...a){return clearTimeout(n),n=setTimeout(()=>{let r=e(...a);i.forEach(e=>e(r)),i=[]},r),new Promise(e=>i.push(e))}}let h=(0,a.Iz)(e=>(0,a.eU)(()=>new p(e)));function _(e){return a.zl.get(h(e)).increment()}},260114:(e,r,n)=>{var i=n(44509);n(379338);var a=n(308746);n(835440);let o=new URL(window.location.href),s=(o.searchParams.get("mode")||"interaction").toLowerCase().split(","),l=(s.find(e=>e.includes("interaction")),!!s.find(e=>e.includes("perf-bench")||"perf"===e)),c=!!s.find(e=>e.includes("perf-regression")||"perf"===e);o.hostname,function(){let e=o.searchParams.get("playback");switch(e){case null:return;case"sync":case"async":case"realtime":return;default:throw Error(`Unknown playback mode ${e}. Options are "sync", "async", and "realtime".`)}}();let d=a.qg(window.location.search);d["additional-ffs"],d.playwright,d.only,d.skip,d.testGroupFilter,d.onlyPrintSpecs,d.onlyPrintGroups,d.secondary,d.popout,parseInt(d.repeat??"1"),d.logFigmentRequests,d.rolloutFlags,d.stopOnSpecFailure,d.reportV2,d.updateScreenshots,d.bisectDecisions,d.asan;let u=a.qg(i.Ay.location.hash),p=d.initialOptions||u.initialOptions;p&&JSON.parse(decodeURIComponent(p)),(()=>{let e=d["additional-ffs"];if(!e)return;let r={};e.split(",").forEach(e=>{if(!e)return;let[n,i]=e.split("=");r[n]=!i||i.startsWith("t")})})(),(l||c)&&d.noShowPerfReport,(d.test_categories||"").split(",").filter(e=>e.length>0)},815830:(e,r,n)=>{function i(e){return e?.file?.activeFileUsers?.map(e=>e)??[]}function a(e){return!!e.imageUrl&&!!e.id&&!!e.handle}function o(e){return{id:e.id,handle:e.handle,img_url:e.imageUrl}}n.d(r,{ZF:()=>i,q3:()=>a,rR:()=>o})},219425:(e,r,n)=>{n.d(r,{H3:()=>a});var i=n(95650);function a(e){return e?(0,i.A)(e).add(1,"day").subtract(1,"second").format():null}n(994811)},481540:(e,r,n)=>{n.d(r,{Cu:()=>K,Dc:()=>m,E9:()=>w,FE:()=>N,Fr:()=>k,GS:()=>S,Nb:()=>b,OH:()=>L,PB:()=>O,Pg:()=>v,WL:()=>j,Ws:()=>H,Yg:()=>Y,_J:()=>M,_R:()=>W,ak:()=>P,ds:()=>T,f5:()=>I,fy:()=>z,k1:()=>C,oP:()=>V,pf:()=>R,pi:()=>h,qD:()=>$,uE:()=>F,v5:()=>_,xr:()=>D,ye:()=>B,ys:()=>E,z_:()=>U});var i=n(741419),a=n(579020),o=n(502255),s=n(896966),l=n(376780),c=n(241917),d=n(748288),u=n(53818),p=n(337569);function m(e){switch(e){case c.nT.Design:return"design";case c.nT.Whiteboard:return"figjam";case c.nT.DevHandoff:return"dev_handoff";case c.nT.Slides:return"slides";case c.nT.Sites:return"sites";case c.nT.Figmake:return"rev";case c.nT.Cooper:return"buzz";case c.nT.Illustration:return"draw";default:return"unknown"}}function h(e){switch(e&&e.editorType){case l._Y.DESIGN:return"design";case l._Y.WHITEBOARD:return"figjam";case l._Y.SLIDES:return"slides";case l._Y.SITES:return"sites";case l._Y.FIGMAKE:return"rev";case l._Y.COOPER:return"buzz";default:return"unknown"}}function _(e,r){return e?.view==="fullscreen"?m(e.editorType):r?h({editorType:r}):"unknown"}let g=(e,r)=>{switch(r?.selectedView?.view){case"prototype":case"mobileViewer":if(r.selectedView.file?.key===e)return r.selectedView.file||null;return null;default:return e&&r.fileByKey[e]||null}},f=null;function E(e){f=e}let y=(e,r,n,a={})=>{let o=_(n?.selectedView,r&&r.editor_type),s={...a,...b(o,n?.selectedView?.view)};return s.productType=o,s.fileKey=e||"new",s.fileParentOrgId=r&&r.parent_org_id,s.fileTeamId=r&&r.team_id,r&&r.file_repo_id&&(s.fileRepoId=r.file_repo_id),s.fileTeamId=r&&r.team_id,s.containingFolderId=r&&r.folder_id,s.entrypoint=a.entrypoint,s.figmaBasicsExperiment=r?.track_tags?.figma_basics_experiment,f&&(s.loadID=f),s.fileIsIncremental=!!i.h3O?.isIncrementalSession(),s.fileIsValidatingIncremental=!!i.h3O?.isValidatingIncremental(),s};function b(e,r){return e===l._Y.SLIDES&&"fullscreen"===r?{slide_view:i.Ez5?.singleSlideView()?.isSingleSlideViewEnabled()?"ssv":"grid"}:{}}function v(){(0,a.Pg)()}let T=(0,u.n)((e,r,n,i={},o)=>{let s=g(r,n),l=y(r,s,n,i);(0,a.sx)(e,l,o)}),I=(0,u.n)((e,r,n,i={},o)=>{let s=y(r.key,r,n,i);(0,a.sx)(e,s,o)}),S=(0,u.n)((e,r,n,i)=>{let o=g(r,n),s=y(r,o,n,i);a.az.trackDefinedEvent(e,s)});function w(e,r,n={},i){n.productType=r&&h(r),n.fileKey=r?.key||"new",n.fileParentOrgId=r?.parentOrgId,n.fileTeamId=r?.teamId,n.containingFolderId=r?.folderId,r&&r.fileRepoId&&(n.fileRepoId=r.fileRepoId),(0,a.sx)(e,n,i)}let A="File Browser File Clicked";function C(e,r,n){if(r.state){var i;T(A,e,r.state,{selectedView:"recentsAndSharing"===(i=r.state).selectedView.view?i.selectedView.tab||d.G.RECENTLY_VIEWED:"folder"===i.selectedView.view&&i.selectedView.folderId===i.user?.drafts_folder_id?"drafts":i.selectedView.view,entrypoint:r.entrypoint,planFilterId:r.planFilterId,planFilterType:r.planFilterType,sharedByFilter:r.sharedByFilter,viewMode:r.viewMode},n)}else r.selectedViewName?(0,a.sx)(A,{fileKey:e,selectedView:r.selectedViewName,entrypoint:r.entrypoint},n):(0,a.sx)(A,{fileKey:e,entrypoint:r.entrypoint},n)}function N(e,r,n){(0,a.sx)("file_browser_plan_filter_selected",{planId:e,entryPoint:r,planType:n})}function L(e,r,n={},i){n.fileKeys=r.map(e=>e.key),n.fileParentOrgIds=[],n.fileTeamIds=[],n.containingFolderIds=[],r.forEach(e=>{n.fileParentOrgIds.push(e.parent_org_id),n.fileTeamIds.push(e.team_id),n.containingFolderIds.push(e.folder_id)}),(0,a.sx)(e,n,i)}function O(e,r,n,i={},o){let s=r.map(e=>n.fileByKey[e]);i.fileKeys=r,i.fileParentOrgIds=[],i.fileTeamIds=[],i.containingFolderIds=[],s.forEach(e=>{i.fileParentOrgIds.push(e.parent_org_id),i.fileTeamIds.push(e.team_id),i.containingFolderIds.push(e.folder_id)}),(0,a.sx)(e,i,o)}function R(e,r,n={},i){n.fileKeys=[],n.fileParentOrgIds=[],n.fileTeamIds=[],n.containingFolderIds=[],r.forEach(e=>{n.fileKeys.push(e.key),n.fileParentOrgIds.push(e.parentOrgId),n.fileTeamIds.push(e.teamId),n.containingFolderIds.push(e.folderId)}),(0,a.sx)(e,n,i)}function P(e,r,n,i){let a=e.map(e=>e.key),o=[],s=[],l=[];a.forEach((e,n)=>{let i=r[n];o.push(i.key),s.push(i.folder_id),l.push(i.team_id)}),O("File Copied",a,n,{copiedFileKeys:o,copiedContainingFolderIds:s,copiedFileTeamIds:l},i)}function D(e,r,n,i,o={},s){let l=i.folders[r];o.folderId=l?.id||r,o.folderTeamId=l?.team_id||n,(0,a.sx)(e,o,s)}function M(e,r,n,i={},o){let s=(0,p._)(r,n);i.teamId=s?.id,i.teamName=s?.name,(0,a.sx)(e,i,o)}function k(e,r,n,i={},o){let s=n.orgById[r];i.orgId=s.id,i.orgName=s.name,(0,a.sx)(e,i,o)}function F(e,r,n={},i){n.userId=r.user&&r.user.id,(0,a.sx)(e,n,i)}let x={[l.vt.FILE]:"fileKey",[l.vt.FILE_REPO]:"fileRepoId",[l.vt.FOLDER]:"folderId",[l.vt.TEAM]:"teamId"};function U(e,r,n={},i){let o=x[r.resource_type];n.roleId=r.id,n[o]=r.resource_id_or_key,r.user_id&&(n.roleUserId=r.user_id),(0,a.sx)(e,n,i)}function B(e,r){(0,a.sx)(e,r)}function V(e){return{canEdit:e.canEdit,fileKey:e.key,productType:h(e)}}var G=(e=>(e.DESIGN="DESIGN",e.WHITEBOARD="WHITEBOARD",e))(G||{});let H="CTA Clicked";function K(e,r,n){let i=r||H;(0,s.Lo)(i,e.text||"",e,{logToConsole:o.NU.NEVER});let l={...e,nonInteraction:0};(0,a.sx)(i,l,{forwardToDatadog:!0,sendAsBeacon:n})}var W=(e=>(e.NOT_POPULATED="not_populated",e.POPULATED_INCOMPLETE="populated_incomplete",e.POPULATED_COMPLETE="populated_complete",e))(W||{});function z(e,r){let n={...e,nonInteraction:0};(0,a.sx)("Input Blurred",n,r)}function $(e,r={}){(0,a.sx)("Context Viewed",e,{forwardToDatadog:!0,...r})}let Y="User Submits Reupgrade Request",j=5e3},711107:(e,r,n)=>{n.d(r,{fG:()=>h,gY:()=>m,gp:()=>p});var i=n(848318),a=n(445777),o=n(573446),s=n(376780),l=n(572699),c=n(668249),d=n(713534),u=n(391788);function p(e){switch(e.type){case d.n.HubFile:return e.template.id;case d.n.TeamTemplate:return e.template.file_key;case d.n.TeamTemplateLg:return e.template.fileKey;default:return(0,a.xb)(e)}}function m(e){switch(e.type){case d.n.HubFile:return(0,u.a6)(e.template).name;case d.n.TeamTemplate:case d.n.TeamTemplateLg:return e.template.name;default:return(0,a.xb)(e)}}function h(){let e=(0,l.yN)({migrationGroup:c.L.GROUP_3,component:"useGetGenericTemplateDisplayProps",attribute:"imgUrl",legacy:(e,r)=>r?.img_url,migrated:(e,r)=>r?.imgUrl||void 0}),r=(0,l.dh)({migrationGroup:c.L.GROUP_3,component:"useGetGenericTemplateDisplayProps"});return(0,i.useCallback)(n=>{let i=p(n),l=m(n),c=function(e){switch(e.type){case d.n.HubFile:return(0,u.a6)(e.template).description;case d.n.TeamTemplate:case d.n.TeamTemplateLg:return e.template.description;default:return(0,a.xb)(e)}}(n),{type:h,template:_}=n;switch(h){case d.n.HubFile:return{imageUrl:_.thumbnail_url||void 0,clientMeta:_.client_meta,thumbnailIsSet:!!_.thumbnail_is_set,isWhiteboard:_.viewer_mode===s.y4.WHITEBOARD,name:l,description:c,hubFileId:_.id,publishers:_.community_publishers?.accepted||[],primaryKey:i,duplicateLink:`${window.location.origin}/community/file/${_.id}/duplicate`,viewSourceFileUrl:null,resizedThumbnailUrls:_.resized_thumbnail_urls,libraryKey:_.library_key};case d.n.TeamTemplate:{let n=_.published_by_user?[{name:_.published_by_user.handle,img_url:_.published_by_user.img_url}]:r?[{name:r,img_url:e}]:[];return{imageUrl:_.signed_thumbnail_url,clientMeta:_.client_meta,thumbnailIsSet:!!_.has_custom_thumbnail,isWhiteboard:!0,name:l,description:c,publishers:n,primaryKey:i,duplicateLink:`${window.location.origin}/new/template/${_.file_key}`,viewSourceFileUrl:`/file/${_.file_key}`,libraryKey:_.library_key}}case d.n.TeamTemplateLg:{let n=_.publishedByUserNullable?[{name:_.publishedByUserNullable.handle,img_url:_.publishedByUserNullable.imgUrl}]:r?[{name:r,img_url:e}]:[];return{imageUrl:_.signedThumbnailUrl,clientMeta:_.checkpointClientMeta,thumbnailIsSet:_.hasCustomThumbnail,isWhiteboard:_.editorType===s._Y.WHITEBOARD,name:l,description:c,publishers:n,primaryKey:i,duplicateLink:`${window.location.origin}/new/template/${_.fileKey}`,viewSourceFileUrl:`/file/${_.fileKey}`,libraryKey:(0,o.l)(_.libraryKey)}}default:(0,a.xb)(h)}},[e,r])}},96321:(e,r,n)=>{n.d(r,{$3:()=>el,GT:()=>eP,Gc:()=>eF,Gg:()=>eU,I4:()=>ex,JI:()=>et,OL:()=>eC,Ww:()=>ep,ZG:()=>eT,ZW:()=>er,bD:()=>j,b_:()=>eL,dm:()=>eM,go:()=>ed,gp:()=>eA,kl:()=>en,lu:()=>eR,mu:()=>eI,oE:()=>eN,t:()=>eS,wI:()=>ec,yn:()=>ew,z$:()=>ea});var i=n(848318),a=n(716544),o=n(584347),s=n(425642),l=n(988520),c=n(992277),d=n(741419),u=n(673906),p=n(157907),m=n(39773),h=n(430285),_=n(390973),g=n(579020),f=n(629311),E=n(6819),y=n(379338),b=n(493554),v=n(427193),T=n(831932),I=n(502255),S=n(896966),w=n(663689),A=n(963376),C=n(442313),N=n(833480),L=n(959334),O=n(884060),R=n(481540),P=n(305719),D=n(912712),M=n(389763),k=n(32790),F=n(635547),x=n(997894),U=n(158349),B=n(94929),V=n(961934),G=n(881539),H=n(592981),K=n(857537),W=n(143702),z=n(868417),$=n(359390);function Y(e,r){let n="unknown";e?"string"==typeof e?n=e:"message"in e&&(n=e.message):n="no error message",(0,S.x1)("Autosave",n,{message:r})}function j(){return 7776e6}async function q(e,r,n,i){let a=i.objectStore(K.Sp),o=await a.index(K.SW).get([e,r,n]);return o&&o.id?{id:o.id,...o}:void 0}async function X(e,r,n,i){let a=await q(e,r,n,i);return a?.id}async function Z(e,r,n){let i=e.objectStore(K.Sp),a=e.objectStore(K.jP),o=e.objectStore(K.DV),s=e.objectStore(K.w8),l=[];for(let e of n){let r=await i.index(K.SW).get([e.userID,e.fileKey,e.sessionID]);r&&r.id&&l.push(r)}if(0===l.length)return await e.done,{changesByNode:new Map,referencedNodeMap:new Map,fileVersion:-1};l.sort((e,r)=>r.fileVersion-e.fileVersion);let c=l[0],u=new Map,p=new Map;for(let e of(await a.getAll((0,K.iM)(c.id))))u.set(e.nodeID,[e.changes,e.snapshots,c.id]);for(let e of(await s.getAll((0,K.iM)(c.id))))p.set(e.nodeID,e.buffer);let m=c.lastUpdatedAt;for(let e of l.slice(1)){let r=e.fileVersion===c.fileVersion;if(r){for(let r of(await a.getAll((0,K.iM)(e.id)))){let e=u.get(r.nodeID),n=r.changes,i=r.snapshots;if(e){let[a,o]=e;n=d.i6g.mergeMultiplayerMessages(a,r.changes,c.fileVersion),i={...o,...r.snapshots}}u.set(r.nodeID,[n,i,c.id]),a.put({editorSessionID:c.id,nodeID:r.nodeID,changes:n,snapshots:i}).catch(e=>Y(e,"mergeAndClaimChanges: updating session IDs"))}for(let r of(await s.getAll((0,K.iM)(e.id))))p.set(r.nodeID,r.buffer),s.put({editorSessionID:c.id,nodeID:r.nodeID,buffer:r.buffer}).catch(e=>Y(e,"mergeAndClaimChanges: merge referenced nodes"));m=Math.max(m,e.lastUpdatedAt)}a.delete((0,K.iM)(e.id)).catch(e=>Y(e,"mergeAndClaimChanges: node changes for session")),s.delete((0,K.iM)(e.id)).catch(e=>Y(e,"mergeAndClaimChanges: referenced nodes for session"));let n=await o.openCursor((0,K.iM)(e.id));for(;n;)r&&o.put({...n.value,editorSessionID:c.id}).catch(e=>Y(e,"mergeAndClaimChanges: merge images")),n.delete().catch(e=>Y(e,"mergeAndClaimChanges: remove old image")),n=await n.continue();i.delete(e.id).catch(e=>Y(e,"mergeAndClaimChanges: delete old session id"))}return await i.put({...c,sessionID:r,lastUpdatedAt:m}),(0,K.dU)(e),await e.done,(0,S.Lo)("Autosave",`Found claimed autosave changes from ${l.length} sessions`,void 0,{logToConsole:d.NUh.ALWAYS}),{changesByNode:u,referencedNodeMap:p,fileVersion:c.fileVersion}}async function J(e,r){let n=(0,K.Zt)(e,r),i=[];return await k.xK.timeAsync("checkForAutosave",async()=>{let e=await (0,K.Z4)();if(!e)return;let r=e.transaction(K.Sp),a=r.objectStore(K.Sp),o=await a.index(K.SW).openCursor(n);for(;o;)i.push(o.value),o=await o.continue();await r.done}),i.length>0&&(0,S.ED)("Autosave","Found auto-saved data for this file",void 0,{logToConsole:d.NUh.ALWAYS}),i}async function Q(e){return await k.xK.timeAsync("filterAutosaveSessions",async()=>{let r=await Promise.all(e.map(e=>(0,$.mc)(e))),n=Date.now()-j(),i=e.filter((e,i)=>!r[i]&&e.lastUpdatedAt>n);return 0===i.length&&(0,S.Lo)("Autosave","Changes not available or already claimed by another tab",void 0,{logToConsole:d.NUh.ALWAYS}),i})}let ee=null;async function et(e){async function r(){for(let e of["figma-autosave-v2","figma-autosave-darklaunch-v2"])(0,_.MR)(e).catch(()=>{});try{let r=await ed((0,K.cu)(e),e=>Date.now()-e.lastUpdatedAt<j());if(r.length>0){let e=r.map(e=>e.lastUpdatedAt);(0,g.sx)("autosave garbage collect",{numSessions:r.length,localSessionCount:r.reduce((e,r)=>e+(r.isLocalFile?1:0),0),nodeCount:r.reduce((e,r)=>e+r.nodeCount,0),imageCount:r.reduce((e,r)=>e+r.imageCount,0),referencedNodeCount:r.reduce((e,r)=>e+r.referencedNodeCount,0),oldestSession:Math.min(...e),newestSession:Math.max(...e)})}}catch(e){(0,W.Lf)("Failed to garbage collect autosave changes",e)}(0,V.L_)()}ee||(ee=r()),await ee}async function er(e){let r={};for(let n of e){let e=await en(n);(e.unsyncedFiles.length>0||e.newFiles.length>0)&&(r[n]=e)}return r}async function en(e){let r=await (0,K.Z4)();if(!r)return{unsyncedFiles:[],newFiles:[],nextGarbageCollectionTimestamp:-1};let{editorSessionRowsWithChanges:n,newFilesByKey:i,newFilesWithChanges:a}=await ei(r,e),s=new Set,l=new Map,c=-1,d=[];for(let r of n)s.has(r.fileKey)||d.push((0,$.mc)({userID:e,fileKey:r.fileKey,sessionID:r.sessionID}).then(e=>{if(!e){s.add(r.fileKey);let e=Math.max(l.get(r.fileKey)||0,r.lastUpdatedAt);l.set(r.fileKey,e),c=-1===c?r.lastUpdatedAt:Math.min(c,r.lastUpdatedAt)}}));return await Promise.all(d),{unsyncedFiles:Array.from(s).filter(e=>!(0,o.isLocalFileKey)(e)).map(e=>({type:"autosave-file",fileKey:e,lastUpdatedAt:l.get(e)})),newFiles:Array.from(s).filter(e=>(0,o.isLocalFileKey)(e)&&i.has(e)).map(e=>{let r=i.get(e);return es(r,l,a.has(r.fileKey))}).filter(({hasChanges:e})=>e),nextGarbageCollectionTimestamp:c}}async function ei(e,r){let n=e.transaction([K.Sp,K.jP,K.JR]),i=Error("original async stack");n.done.catch(e=>{e.cause=i,(0,I.$D)(c.e.UNOWNED,e)});let a=n.objectStore(K.Sp),o=await a.index(K.SW).getAll((0,K.cu)(r)),s=[],l=n.objectStore(K.jP);for(let e of o)if(await l.count((0,K.iM)(e.id))>0){for(let r of(await l.getAll((0,K.iM)(e.id))))if(!((0,p.k)().suppress_unsaved_changes_ui&&(0,p.k)().incremental_loading_validation)||d.i6g&&!d.i6g.changesAreOnlyNewFileSystemChanges(r.changes,e.fileVersion)){s.push(e);break}}let u=new Map,m=n.objectStore(K.JR),h=new Set;for(let e of(await m.getAll((0,K.cu)(r)))){u.set(e.fileKey,e);let r=o.find(r=>r.fileKey===e.fileKey);if(r){let n=await l.getAll((0,K.iM)(r.id));(e_(e.fileKey,n)||e.hasChangedMetadata)&&h.add(e.fileKey)}}return{editorSessionRowsWithChanges:s,newFilesByKey:u,newFilesWithChanges:h}}async function ea(e){let r=await en(e);return r.unsyncedFiles.length>0||r.newFiles.length>0}async function eo(e){if((0,W.rQ)())return[];let r=await (0,K.Z4)();if(!r)return[];let{editorSessionRowsWithChanges:n,newFilesByKey:i,newFilesWithChanges:a}=await ei(r,e),o=new Set,s=new Map;for(let e of n)o.add(e.fileKey),s.set(e.fileKey,Math.max(s.get(e.fileKey)||0,e.lastUpdatedAt));let c=Array.from(o).map(e=>{let r=i.get(e);return r?es(r,s,a.has(r.fileKey)):null}).filter(l.Vq);return ev?.fileCreationManager?.updateNewFileInfoFromFiles(c),c}function es(e,r,n){return{type:"new-autosave-file",fileKey:e.fileKey,editorType:e.editorType,name:e.name,creatorId:e.userID,createdAt:e.createdAt,lastUpdatedAt:r.get(e.fileKey),orgId:e.orgID??null,hasChanges:n,hasChangedMetadata:e.hasChangedMetadata??!1}}async function el(e,r){if((0,W.rQ)())return;let n=async(e,n)=>{let i=n.objectStore(K.jP);return e_(r,await i.getAll((0,K.iM)(e.id)))};await ed((0,K.Zt)(e,r),n)}async function ec(e,r){await ed((0,K.cu)(e),e=>!r.includes(e.fileKey))}async function ed(e,r){let n=await (0,K.Z4)();if(!n)return[];let i=n.transaction([K.Sp,K.jP,K.DV,K.w8,K.JR],"readwrite"),a=Error("original async stack");i.done.catch(e=>{e.cause=a,(0,I.$D)(c.e.UNOWNED,e)});let s=i.objectStore(K.Sp),l=i.objectStore(K.jP),d=i.objectStore(K.DV),u=i.objectStore(K.w8),p=i.objectStore(K.JR),m=!1,h=await s.index(K.SW).getAll(e),_=[],g=[];for(let e of h)if(!(r&&await r(e,i))){let[r,n,i]=await Promise.all([l.count((0,K.iM)(e.id)),d.count((0,K.iM)(e.id)),u.count((0,K.iM)(e.id))]);g.push({userID:e.userID,fileKey:e.fileKey,sessionID:e.sessionID,isLocalFile:(0,o.isLocalFileKey)(e.fileKey),nodeCount:r,imageCount:n,referencedNodeCount:i,lastUpdatedAt:e.lastUpdatedAt}),s.delete(e.id).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete editor session")),l.delete((0,K.iM)(e.id)).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete node changes")),d.delete((0,K.iM)(e.id)).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete images")),u.delete((0,K.iM)(e.id)).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete referenced nodes")),m=!0,(0,o.isLocalFileKey)(e.fileKey)&&_.push({localFileKey:e.fileKey,userID:e.userID})}for(let{localFileKey:e,userID:r}of _)0===await s.index(K.SW).count((0,K.Zt)(r,e))?await p.delete((0,K.Zt)(r,e)):(0,W.W6)("Local file has remaining sessions");return await s.count()===0&&(await l.count()>0&&((0,W.W6)("Found leftover node changes in IDB"),l.delete((0,K.BE)()).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete leftover node changes"))),await d.count()>0&&((0,W.W6)("Found leftover images in IDB"),d.delete((0,K.IE)()).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete leftover images"))),await u.count()>0&&((0,W.W6)("Found leftover referenced node buffers in IDB"),u.delete((0,K.Ab)()).catch(e=>Y(e,"deleteAutosaveDataForSessions: delete leftover referenced nodes")))),(0,K.dU)(i),await i.done,m&&(0,z.HZ)(),g}async function eu(e,r){await r.objectStore(K.jP).count((0,K.iM)(e))===0&&await r.objectStore(K.DV).count((0,K.iM)(e))===0&&await r.objectStore(K.w8).count((0,K.iM)(e))===0&&r.objectStore(K.Sp).delete(e).catch(e=>Y(e,"deleteEditorSessionRowIfUnused: delete editor session"))}async function ep(e,r){let n=await (0,K.Z4)();if(!n)throw Error("Could not open autosave data");let i=n.transaction([K.Sp,K.jP,K.DV,K.w8]),a=i.objectStore(K.Sp),o=i.objectStore(K.jP),s={};for(let e of(await a.getAll()))s[e.id]=e,s[e.id].changes={},s[e.id].snapshotsByNodeField__DEPRECATED={};for(let n of(s.unknown={changes:{},snapshotsByNodeField__DEPRECATED:{}},(await o.getAll()).slice(0,e)))n.editorSessionID in s?(s[n.editorSessionID].changes[n.nodeID]=JSON.parse(d.i6g.encodeChangesAsJson(n.changes,s[n.editorSessionID].fileVersion,!!r)),s[n.editorSessionID].snapshotsByNodeField__DEPRECATED[n.nodeID]=n.snapshots):(s.unknown.changes[n.nodeID]=JSON.parse(d.i6g.encodeChangesAsJson(n.changes,1,!!r)),s.unknown.snapshotsByNodeField__DEPRECATED[n.nodeID]=n.snapshots);return await i.done,s}async function em(e){let{transaction:r,commitPolicy:n,userID:i,fileKey:a,fileVersion:s,sessionID:l,oldSessionID:c,pendingChanges:u,pendingImages:p,pendingReferencedNodes:m,reason:h,isFirstCommitOfAutosaveSession:_}=e,g=r.objectStore(K.Sp),f=r.objectStore(K.jP),E=r.objectStore(K.DV),b=r.objectStore(K.w8),v=await q(i,a,c,r),T=0;v&&(T=(v.offlineEditingTime||0)+(_?0:Date.now()-v.lastUpdatedAt));let I=v?.id,S={userID:i,fileKey:a,sessionID:l,lastUpdatedAt:Date.now(),releaseTag:(0,y.Ay)().release_git_tag||"",fileVersion:s,lastCommitReason:h,offlineEditingTime:T,originalTrackingSessionId:(0,w.f)()};for(let e of(null==I?I=await g.add(S):(n===d.W2B.REPLACE_CHANGES&&(f.delete((0,K.iM)(I)).catch(e=>Y(e,"commitChanges: replace node changes")),b.delete((0,K.iM)(I)).catch(e=>Y(e,"commitChanges: replace referenced nodes"))),g.put({id:I,...S}).catch(e=>Y(e,"commitChanges: update session"))),u))e.changes?f.put({editorSessionID:I,nodeID:e.nodeID,changes:e.changes}).catch(e=>Y(e,"commitChanges: put node changes")):f.delete([I,e.nodeID]).catch(e=>Y(e,"commitChanges: clear node changes"));for(let e of p)if(await E.count([I,e])===0){let r=d.Bko.getCompressedImage(e);r&&E.add({editorSessionID:I,hash:e,blob:r}).catch(e=>Y(e,"commitChanges: add images"))}for(let e of m)b.add({editorSessionID:I,nodeID:e.nodeID,buffer:e.buffer}).catch(e=>Y(e,"commitChanges: add referenced nodes"));let A=await f.count((0,K.iM)(I));return 0===A&&(await E.delete((0,K.iM)(I)),await b.delete((0,K.iM)(I))),await eu(I,r),(0,K.dU)(r),await r.done,(0,o.isLocalFileKey)(a)&&(0,z.HZ)(),A}async function eh(e,r,n){(0,S.Lo)("Autosave","assigning file key for new file",{localFileKey:r,newFileKey:n}),await (0,K.DB)([K.Sp,K.JR],async i=>{let a=i.objectStore(K.Sp);(await a.index(K.SW).getAll((0,K.Zt)(e,r))).map(e=>{e.fileKey=n,a.put(e)}),i.objectStore(K.JR).delete((0,K.Zt)(e,r))},"readwrite"),(0,z.HZ)()}function e_(e,r){if(!(0,o.isLocalFileKey)(e))return r.length>0;if(r.length>2)return!0;for(let{nodeID:e}of r)if(!["0:0","0:1"].includes(e))return!0;return!1}class eg{constructor(){this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}onCommitEvent(){this.nextEventPromiseResolve(),this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}waitForNextCommit(){return this.nextEventPromise}}class ef{constructor(e,r){this.userID=e,this._state={type:"connecting"},this._fileKey="",this._hasReportedError=!1,this.fileCreationManager=null,this.fileKey=r,(0,W.rQ)()?(this._sessionsToRestore=Promise.resolve([]),this._state={type:"terminated"}):(0,o.isLocalFileKey)(r)?this._sessionsToRestore=J(e,r):this._sessionsToRestore=J(e,r).then(e=>Q(e))}get fileKey(){return this._fileKey}get managerState(){return this._state.type}session(){return"connected"===this._state.type?this._state.session:null}set fileKey(e){this._fileKey=e;let r=(0,o.isLocalFileKey)(e)?e:null;m.zl.set(H.h,r)}async assignFileKeyForLocalFile(e){if("connected"!==this._state.type){"connecting"===this._state.type&&(0,W.W6)("Still connecting");return}try{await this._state.session.enqueueAssignFileKeyForLocalFile(e,()=>{this.fileKey=e,this.fileCreationManager=null})}catch(e){this.terminateDueToError("unable to update file key",!0)}}async terminateAndWaitForCleanup(){let e="connected"===this._state.type?this._state.session:null;this._state={type:"terminated"},m.zl.set(H.h,null),await e?.destroy().catch(()=>W.W6("Failed to destroy autosave session"))}terminateDueToError(e,r){(0,S.xi)("Autosave","autosave disabled",{message:e}),r&&(0,W.W6)(e);let n="connected"===this._state.type;this._hasReportedError||((0,g.sx)("autosave_disabled",{message:e,hasSessionInProgress:n},{forwardToDatadog:!0}),this._hasReportedError=!0),this.terminateAndWaitForCleanup().catch(r=>(0,W.W6)("Failed to terminate autosave",{message:e,error:r.message}))}async onConnect(e){if("connecting"!==this._state.type)return;try{await (0,K.Fy)()}catch(e){(0,S.Lo)("Autosave","IDB is not available in the current browser session.",void 0,{logToConsole:d.NUh.ALWAYS}),(0,g.sx)("autosave_db_failure",{message:e.message}),this.terminateDueToError("unable to open DB",!1);return}let r=new v.M4;r.start();let n=await this._sessionsToRestore;(0,o.isLocalFileKey)(this.fileKey)&&(n.length>1?((0,W.W6)("Local file has multiple sessions",{sessionCount:n.length,sessionIds:n.map(e=>e.sessionID).slice(0,5).join(", ")}),this.terminateDueToError("Local file has multiple sessions",!1)):1===n.length&&0!==n[0].sessionID&&((0,W.W6)("Local file with changes from non-zero session",{existingSessionId:n[0].sessionID}),this.terminateDueToError("Local file with changes from non-zero session",!1)));let i=await (0,$.A2)({userID:this.userID,fileKey:this.fileKey,sessionID:e});if(!i){this.terminateDueToError("unable to acquire lock",!0);return}this._state={type:"connected",session:new eb(e,this,r,n,i)}}async onConnectNewFile(e){let r=this.fileKey;if((0,o.isLocalFileKey)(r))try{await (0,K.DB)([K.JR],async n=>{let i=n.objectStore(K.JR);if(await i.get((0,K.Zt)(this.userID,r)))return;let a={fileKey:r,userID:this.userID,editorType:e.editorType,name:e.fileName??(0,C.t)("fullscreen.fullscreen_view_selector.untitled"),createdAt:Date.now(),orgID:e.org_id};await i.put(a)},"readwrite"),this.fileCreationManager&&(0,W.W6)("File creation manager already exists",{fileKey:r}),this.fileCreationManager=new ey(r,e)}catch(e){this.terminateDueToError("unable to set new file info",!0);return}await this.onConnect(0)}}async function eE(e,r,n){if((0,o.isLocalFileKey)(r)&&e)try{await (0,K.DB)([K.JR],async i=>{let a=i.objectStore(K.JR),o=await a.get((0,K.Zt)(e,r));o&&await a.put({...o,name:n,hasChangedMetadata:!0})},"readwrite"),(0,z.HZ)()}catch(e){(0,I.$D)(c.e.SCENEGRAPH_AND_SYNC,Error("unable to update new file info"))}}class ey{constructor(e,r){this._pendingRealFileKey=null,this.fileKey=e,this._newFileInfo=r}get newFileInfo(){return this._newFileInfo}updateNewFileInfo(e){this._newFileInfo={...this._newFileInfo,...e}}updateNewFileInfoFromFiles(e){let r=e.find(e=>e.fileKey===this.fileKey);if(r){let e=(0,B.B)(r,this.newFileInfo.openNewFileIn);this.updateNewFileInfo(e)}}get pendingRealFileKey(){return this._pendingRealFileKey}assignPendingRealFileKey(e){this._pendingRealFileKey=e,z.hp.sendToAllTabs(z.m6,{localFileKey:this.fileKey,realFileKey:e})}}class eb{constructor(e,r,n,i,a){this.sessionID=e,this.manager=r,this.restoreTimer=n,this.changesToRestore=i,this.webLock=a,this.transactionQueue=new G.O,this.commitEventListener=new eg,this.restoring=!1,this.consecutiveCommitsAddingChanges=0,this.activityLogger=navigator.storage?.estimate?new V.hS:null,this.restoreAnalytics={hadChangesToRestore:!1,fileKey:"",time:0,timeToStartSession:0,timeToApply:0,timeToSync:0,sessionsCheckTime:0,numberOfBytes:0,numberOfNodes:0,numberOfReferencedNodes:0,numberOfRestoredReferencedNodes:0,numberOfSessions:0,numberOfImages:0,neededToMigrate:!1,persistentStorage:!1,changesAreAllDerivedData:!1,nodeFields:[],stagingDump:void 0,lastUpdatedAt:void 0,releaseTag:void 0,isLocalFile:!1,offlineEditingTime:void 0,lastCommitReason:void 0,originalTrackingSessionId:void 0,storageUsageBytes:void 0,storageQuotaBytes:void 0,isIncremental:!1},this.reportedFullQueue=!1,this.reportedStorageError=!1,this.hasCommitted=!1,this.restoreAnalytics.timeToStartSession=this.restoreTimer.getElapsedTime()}getActivityLogger(){return this.activityLogger}async destroy(){await this.webLock.release().catch(e=>Y(e,"AutosaveSession.destroy: releasing session lock"))}sessionTransaction(e,r,n,i){let a=(0,K.DB)(r,n,i);return a.catch(r=>{(0,g.sx)("autosave_transaction_failure",{transactionName:e,message:r.message}),this.manager.terminateDueToError(`${e} transaction failed`,!1)}),a}readyToAcceptChanges(){let e=this.transactionQueue.length>=10;return e&&!this.reportedFullQueue&&(this.reportedFullQueue=!0,(0,W.W6)("Autosave transaction queue is backed up.")),!this.restoring&&!e}hasOngoingCommitTask(){return!this.transactionQueue.isComplete()}async tryToFlushAutosave(){this.readyToAcceptChanges()&&(d.i6g.flushAutosave(),await this.transactionQueue.waitForCompletion())}async enqueueAutosaveCommit(e){await this.transactionQueue.enqueue(()=>this.commitAutosave(e))}async commitAutosave(e){let{changes:r,commitPolicy:n,fileVersion:i,fileKey:a,newSessionID:o,numberOfUncleanRegisters:s,reason:l}=e;if(!this.readyToAcceptChanges()){this.manager.terminateDueToError("Committing, but not ready to accept changes",!0);return}if(o<0){this.manager.terminateDueToError("Unexpected sessionID < 0",!0);return}if(a&&a!==this.manager.fileKey){(0,W.W6)("Web file key out of sync with fullscreen file key",{"web file key":this.manager.fileKey,"fullscreen file key":a}),this.manager.terminateDueToError("Web file key out of sync with fullscreen file key",!1);return}this.activityLogger?.recordAutosaveCommit(this.manager.fileKey,this.manager.userID,this.sessionID,e);let c=this.sessionID,u=null;if(o!==this.sessionID){u=this.webLock,this.sessionID=o;let e=await (0,$.A2)({userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID});if(!e){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=e}if(!(0,$.LX)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let p=r.changedNodes.length,m=r.changedNodes.map(e=>({nodeID:e.nodeID,changes:e.changes})).concat(r.clearedNodes.map(e=>({nodeID:e,changes:null,snapshots:null}))),h=[];for(let e of r.referencedNodes)h.push({nodeID:e.nodeID,buffer:e.changes});let _=new Set;for(let e of r.imageHashes)_.add(e);let g=await this.sessionTransaction("commit",[K.Sp,K.jP,K.DV,K.w8],async e=>await em({transaction:e,commitPolicy:n,userID:this.manager.userID,fileKey:this.manager.fileKey,fileVersion:i,oldSessionID:c,sessionID:this.sessionID,pendingChanges:m,pendingImages:_,pendingReferencedNodes:h,reason:l,isFirstCommitOfAutosaveSession:!this.hasCommitted}),"readwrite");this.hasCommitted=!0;let f={stored_node_changes:g,unclean_registers:s,changed_nodes:p,cleared_nodes:r.clearedNodes.length,referenced_nodes:h.length,pending_images:_.size,commit_policy:d.W2B[n],session_id:this.sessionID,new_session_id:o,commit_reason:void 0!==l?d.uXP[l]:void 0,file_key:a,manager_file_key:this.manager.fileKey};if((0,S.Lo)("Autosave","commit completed",f),(0,R.ds)("autosave_commit_completed",a,E.D.getState(),f),!this.reportedStorageError&&void 0!==s&&s!==g){if(g>0&&0===s){let e=e=>{if(!(e.length>5))return e;{let r=e.slice(0,5);return r.push("..."),r}},n=await ep(5,!0);(0,S.x1)("Autosave","Dumping autosave since we expect IDB to be empty",{debug:n,changedNodes:e(r.changedNodes.map(e=>e.nodeID)),clearedNodes:e(r.clearedNodes),referencedNodes:e(r.referencedNodes.map(e=>e.nodeID)),imageHashes:e(r.imageHashes),currentSessionID:d.h3O.currentSessionID(),commitQueueLength:this.transactionQueue.length}),this.manager.terminateDueToError("Expected IDB to be empty after synchronizing with multiplayer",!0)}else g>s?this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has more)",!0):g<s&&this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has less)",!0);this.reportedStorageError=!0}null!=u&&u.release().catch(e=>Y(e,"commitAutosave: release lock")),this.commitEventListener.onCommitEvent(),n===d.W2B.ADD_CHANGES?(this.consecutiveCommitsAddingChanges++,this.consecutiveCommitsAddingChanges>=4&&(0,A.YQ)({id:z.Cr})):this.consecutiveCommitsAddingChanges=0}async restoreAutosaveIfNeeded(){if(d.i6g.fileIsReadOnly())return;this.restoreAnalytics.fileKey=this.manager.fileKey,this.restoreAnalytics.isLocalFile=(0,o.isLocalFileKey)(this.manager.fileKey),this.restoring=!0;let e=function(){if(!T.Ay.chrome||!navigator.storage?.persist)return Promise.resolve(!1);let e=new Promise(e=>setTimeout(()=>e(!1),200));return Promise.race([navigator.storage.persist(),e])}(),r=(0,W.U4)(),n=this.changesToRestore;if(this.changesToRestore=[],this.restoreAnalytics.sessionsCheckTime=this.restoreTimer.getElapsedTime(),this.restoreAnalytics.numberOfSessions=n.length,n.length>0){let e=n[0];this.restoreAnalytics.lastUpdatedAt=e.lastUpdatedAt,this.restoreAnalytics.offlineEditingTime=e.offlineEditingTime,this.restoreAnalytics.originalTrackingSessionId=e.originalTrackingSessionId,this.restoreAnalytics.lastCommitReason=e.lastCommitReason?d.uXP[e.lastCommitReason]:void 0,this.restoreAnalytics.releaseTag=e.releaseTag,await this.restoreChangesForSessionRows(n)}this.restoreAnalytics.persistentStorage=await e;let{usageBytes:i,quotaBytes:a}=await r;this.restoreAnalytics.storageUsageBytes=i,this.restoreAnalytics.storageQuotaBytes=a,this.restoreAnalytics.isIncremental=d.h3O.isIncrementalSession(),this.restoreTimer.stop(),this.restoreAnalytics.time=this.restoreTimer.getElapsedTime(),(0,R.ds)("autosave_restore_on_load",this.restoreAnalytics.fileKey,E.D.getState(),this.restoreAnalytics,{forwardToDatadog:!0}),this.restoring=!1}async restoreChangesForSessionRows(e){if(!(0,$.LX)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let{changesByNode:r,referencedNodeMap:n,fileVersion:i}=await this.sessionTransaction("restore",[K.Sp,K.jP,K.DV,K.w8],async r=>await Z(r,this.sessionID,e),"readwrite"),a=r.size>0;for(let e of(a?((0,o.isLocalFileKey)(this.manager.fileKey)||await (0,U.m)(this.manager.fileKey,"Offline sync","Before syncing changes",E.D.dispatch).catch(e=>(0,W.W6)("Failed to create before savepoint",{status:e.status,message:e.data?.message})),(0,S.Lo)("Autosave","Restoring auto-saved data",void 0,{logToConsole:d.NUh.ALWAYS}),await this.restoreChanges(r,n,i)):(0,S.Lo)("Autosave","Changes are empty!",void 0,{logToConsole:d.NUh.ALWAYS}),this.commitEventListener.waitForNextCommit().then(()=>{z.hp.sendToOtherTabs(z.a)}).catch(e=>Y(e,"restoreChangesForSessionRows: waitForNextCommit")),this.restoreAnalytics.hadChangesToRestore=a,this.restoreAnalytics.numberOfBytes=0,this.restoreAnalytics.numberOfNodes=r.size,this.restoreAnalytics.numberOfReferencedNodes=n.size,r.values()))this.restoreAnalytics.numberOfBytes+=e.length}async restoreChanges(e,r,n){let i=Array.from(e.entries()).sort(([e,r],[n,i])=>e<n?-1:1),a=(0,p.k)().suppress_unsaved_changes_ui&&(0,p.k)().incremental_loading_validation&&i.every(([e,[r]])=>d.i6g.changesAreOnlyNewFileSystemChanges(r,n)),s=[];for(let[e,[r,a,o]]of i){let{decodedAsEmptyMultiplayerMessage:i}=d.i6g.loadAutosavedNodeChanges(e,r,a,n);i&&s.push([e,o])}let l=Promise.resolve();if(s.length>0&&((0,g.sx)("autosave delete empty changes",{numNodes:s.length,willDelete:(0,p.k)().ss_autosave_delete_empty_changes}),(0,p.k)().ss_autosave_delete_empty_changes&&(l=this.sessionTransaction("delete_empty_changes",[K.jP],async e=>{let r=e.objectStore(K.jP),n=new Set(s.map(([e,r])=>r));await Promise.all(s.map(([e,n])=>r.delete([n,e]).catch(e=>Y(e,"restoreChanges: delete empty node changes")))),await Promise.all(Array.from(n.values()).map(r=>eu(r,e)))},"readwrite"))),this.restoreAnalytics.changesAreAllDerivedData=d.i6g.changesAreAllDerivedData(),this.restoreAnalytics.nodeFields=d.i6g.restoredNodeFieldNames(),this.restoreAnalytics.neededToMigrate=d.i6g.currentFileVersion()>n,(0,D.Ff)()){(0,R.ds)("autosave_load_containing_pages_start",this.manager.fileKey,E.D.getState(),{node_count:e.size,fileKey:this.manager.fileKey});let r=performance.now(),n=new Set(e.keys());for(let e of d.i6g.getParentIndexChanges())n.add(e);await (0,D.Xl)(n),(0,R.ds)("autosave_load_containing_pages_end",this.manager.fileKey,E.D.getState(),{node_count:e.size,timeElapsed:performance.now()-r,fileKey:this.manager.fileKey})}let c=d.i6g.getImagesUsedInAutosavedChanges().split(" ");this.restoreAnalytics.numberOfImages=await this.restoreImagesIfAvailable(c);let m=this.restoreAvailableReferencedNodes(r);d.i6g.migrateAndSetAutosaveChanges(m,n),u.l7.autosave("autosave",()=>d.i6g.applyAutosavedChanges()),this.restoreAnalytics.timeToApply=this.restoreTimer.getElapsedTime(),(0,S.Lo)("Autosave","Successfully applied auto-saved changes",void 0,{logToConsole:d.NUh.ALWAYS});let h=()=>{E.D.dispatch(L.Q.enqueueFront({notification:{type:N._.AUTOSAVE_CHANGES_RESTORED,message:(0,C.t)("autosave.changes_synced")}})),(0,S.Lo)("Autosave","Successfully synced auto-saved changes",void 0,{logToConsole:d.NUh.ALWAYS})};if(await l,(0,o.isLocalFileKey)(this.manager.fileKey))(0,M.l)().then(()=>{this.manager.fileKey!==E.D.getState().openFile?.key||a||h()});else{let e=async()=>{await (0,M.l)(),this.restoreAnalytics.timeToSync=this.restoreTimer.getElapsedTime(),await (0,U.m)(this.manager.fileKey,"Offline sync","After syncing changes",E.D.dispatch).catch(e=>{(0,R.ds)("autosave_skip_after_checkpoint",this.manager.fileKey,E.D.getState(),{error:e.data?.message}),(0,W.W6)("Failed to create after savepoint",{status:e.status,message:e.data?.message})}),a||h()};(0,p.k)().autosave_dont_wait_for_sync?e():await e()}}async restoreImagesIfAvailable(e){let r=0;return await this.sessionTransaction("restore images",[K.Sp,K.DV],async n=>{let i=await this.currentEditorSessionID(n);if(!i)return;let a=n.objectStore(K.DV);for(let n of e){let e=await a.get([i,n]);e&&(d.i6g.restoreImageBytes(n,e.blob),r++)}await n.done}),r}restoreAvailableReferencedNodes(e){let r=[];for(let[n,i]of e)d.i6g.restoreReferencedNodeFile(n,i),r.push(n);return r}currentEditorSessionID(e){return X(this.manager.userID,this.manager.fileKey,this.sessionID,e)}async getNodeChangesForSession(){let e=await (0,K.Z4)();if(!e)throw Error("Unable to get DB");let r=e.transaction([K.Sp,K.jP],"readonly"),n=r.objectStore(K.jP),i=await this.currentEditorSessionID(r);return i?await n.getAll((0,K.iM)(i)):[]}async getNodeChangeCount(){return(await this.getNodeChangesForSession()).length}async hasPersistedUserChanges(){let e=await this.getNodeChangesForSession();return e_(this.manager.fileKey,e)}async enqueueAssignFileKeyForLocalFile(e,r){let n=this.manager.fileKey;if(!(0,o.isLocalFileKey)(n)){(0,W.W6)("Only local file keys can be reassigned");return}if((0,o.isLocalFileKey)(e)){(0,W.W6)("Cannot reassign file key to a local file key");return}await this.transactionQueue.enqueue(async()=>{let i=this.webLock,a=await (0,$.A2)({userID:this.manager.userID,fileKey:e,sessionID:this.sessionID});if(!a){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=a,await eh(this.manager.userID,n,e),r(),await i?.release()})}}let ev=null;function eT(){return ev}function eI(e,r){if(ev){if(ev.fileKey===e)return(0,S.Lo)("Autosave","Autosave manager already exists"),ev;(0,W.W6)("Manager already exists. Updating file key",{"current fileKey":ev.fileKey,"new fileKey":e}),ev.terminateAndWaitForCleanup(),ev=null}return(0,S.ED)("Autosave","Create autosave manager",{fileKey:e}),ev=new ef(r,e)}function eS(){ew().catch(e=>Y(e,"failed to destroy autosave manager"))}async function ew(){if((0,S.ED)("Autosave","Destroy autosave manager"),!ev){(0,S.Lo)("Autosave","No manager to destroy");return}let e=ev;ev=null,await e.terminateAndWaitForCleanup()}function eA(e,{offlineFiles:r}){let n={};for(let i in e){let e=r[i];e&&(n[i]=e)}return n}let eC=x.M4.Query({async fetch({userId:e}){if(!e)return{};let r=await eo(e),n={};for(let e of r)n[e.fileKey]=e;return n}});var eN=(e=>(e.OFFLINE_FILE_TILE="OFFLINE_FILE_TILE",e.EDITOR="EDITOR",e))(eN||{});let eL=x.M4.Mutation(({fileKey:e,name:r,source:n},{atomStore:i,query:a,reduxStore:o})=>{if(i.set(eD,null),!r)return;let s=o.getState().user?.id??null;a.mutate(eC({userId:s}),n=>{let i=n[e];i&&(i.name=r)});let l=ev?.fileCreationManager;return l&&(l.fileKey===e?(l.updateNewFileInfo({fileName:r}),l.pendingRealFileKey&&E.D.dispatch(O.yJ({file:{key:l.pendingRealFileKey,name:r},userInitiated:!0}))):(0,W.W6)("File key in rename mutation does not match current FileCreationManager file key",{mutationFileKey:e,fileCreationManagerFileKey:l.fileKey})),(0,g.sx)("Rename New Autosave File",{source:n,isOffline:!navigator.onLine}),eE(s,e,r)}),eO=(0,m.eU)(e=>{let r=e(P.kS),n={};if(r){let i=e(eC({userId:r}));for(let[e,r]of Object.entries(i?.data??{}))r.hasChanges&&(n[e]=r)}return n}),eR=(0,m.eU)(e=>{let r=e(H.h),n=e(P.kS);if(r&&n){let i=e(eC({userId:n})),a=i?.data??{};if(r in a)return a[r]}return null});function eP(){return m.zl.get(eR)}let eD=(0,m.eU)(null);function eM(e){m.zl.set(eD,e.fileKey)}let ek=(0,m.eU)({});function eF(e,r){let n=m.zl.get(ek);m.zl.set(ek,{...n,[e]:r})}function ex(e){let r=(0,a.d4)(r=>!!r.autosave.unclaimedFilesWithChangesInIDB.find(r=>r.fileKey===e)),n=(0,f.l)(F.dDF,r?e:"");return r?n:h.Qw.loaded(!1)}function eU(){let e=(0,a.d4)(e=>e.autosave.unclaimedFilesWithChangesInIDB),r=(0,a.d4)(e=>e.autosave.unclaimedFilesCreatedOffline),n=(0,b.p)(F.dDF,i.useMemo(()=>e.map(({fileKey:e})=>({key:e})),[e])),o=i.useMemo(()=>n.map(({result:e})=>e.transform(e=>!!e.file?.hasPermission)),[n]),l=(0,a.d4)(e=>e.fileByKey);return i.useMemo(()=>({unsyncedFiles:(0,s.WI)(e.map(({fileKey:e,lastUpdatedAt:r},n)=>{let i=l[e];return i&&!i.trashed_at&&o[n].unwrapOr(!1)?{type:"autosave-file",fileKey:e,lastUpdatedAt:r,file:i}:null})),localUnsyncedFiles:r}),[e,r,l,o])}(0,m.eU)(e=>{let r={...e(eO)},n=e(eD),i=e(ek),a={};for(let e in r)e in i||(a[e]=r[e]);if(n&&n in a){let e=a[n];a[n]={...e,isRenaming:!0}}return a})},511039:(e,r,n)=>{n.d(r,{X:()=>d});var i=n(17755),a=n(8374),o=n(365379),s=n(449737),l=n(454916),c=n(13172);let d=(0,a.nF)((e,{entity:r,entityType:n,shape:a})=>{let l=document.createElement("input");l.type="file",l.accept="image/*",l.className=i.s.hidden.$,l.style.display="none",l.onchange=()=>{let i=l.files;null!==i&&i.length>0&&(e.dispatch(o.s6({entity:r,entityType:n,file:i[0],shape:a||"CIRCLE"})),e.dispatch(s.to({type:c._,showModalsBeneath:!0})))},document.body.appendChild(l),l.click()});(0,a.nF)((e,{team:r})=>{e.dispatch(d({entity:r,entityType:l.ck.TEAM,shape:"SQUARE"}))})},966769:(e,r,n)=>{n.d(r,{in:()=>y,iJ:()=>v,JJ:()=>b,mW:()=>T,xQ:()=>I,YL:()=>S});var i=n(848318),a=n(716544),o=n(992277);n(430285),n(923386),n(427008);var s=n(95650);n(379338),n(493554);var l=n(653959),c=n(502255);n(134027),n(186323),n(673136).T;var d=n(95646),u=n(376780),p=n(635547),m=n(511231);n(710665);var h=n(993421),_=n(515673),g=n(171063),f=n(595919);function E(e,r,n,i){let a=(e===d.Y$.CURRENT?d.Ln:d.SG)(r,f.N_,{renewalTerm:n,unit:i}),[s]=(0,l.mI)(a),u=s.data;if(!u)return(0,c.$D)(o.e.SCALE,Error("Plan renewal modal could not load price information"),{extra:{planKey:r,prices:u}}),{prices:null,localizeCurrency:null};let p=(0,d.Tc)(u);return{prices:u,localizeCurrency:new m.vr(p)}}let y=500;function b(e){return E(d.Y$.AT_NEXT_RENEWAL,e,h.IX.YEAR,h.IX.YEAR)}function v(e,r){return E(e,r,h.IX.YEAR,h.IX.MONTH)}function T(e,r){return E(e,r,h.IX.MONTH,h.IX.MONTH)}function I(){let e=(0,a.d4)(e=>e.teamBilling),r=e.summary.monthly_subscription?.current_period_end;return(0,i.useMemo)(()=>r?(0,s.A)(r).toDate():null,[r])}function S(e,r){let n=function(e,r,n={enabled:!0}){let[a]=(0,l.IT)((0,p.JRW)({planParentId:e.parentId,planParentType:e.type===u.OL.ORG?u.iX.ORG:u.iX.TEAM,billingInterval:_.NW.YEAR}),{enabled:!!e.parentId&&n.enabled});return(0,i.useMemo)(()=>a.transform(e=>(function(e,r){if(!r)return null;let n=e.pendingConfirmedRenewalSeatCounts?.filter(e=>s.A(e.billingPeriodStart).add(1,"day").toDate()>r&&s.A(e.billingPeriodStart).subtract(1,"day").toDate()<r);if(!n||!n.length)return null;let i=f.N_.dict(e=>0),a=f.N_.dict(e=>0);return n.forEach(e=>{if(!e.billableProductKey||!(0,g.dA)(e.billableProductKey)){(0,c.$D)(o.e.BILLING,Error(`Confirmed seat count with unexpected billable product key: ${e.billableProductKey}`));return}let r=e.billableProductKey;i[r]=parseInt(e.surplusSeatCount??"0"),a[r]=parseInt(e.totalSeatCount??"0")}),{surplus:i,total:a}})(e,r)),[r,a])}(e,r),[a]=(0,l.mI)(n);if("loaded"!==a.status){let e=Error("Error fetching next annual renewal confirmed seat counts");throw(0,c.$D)(o.e.SCALE,e),e}return a.data}},171063:(e,r,n)=>{n.d(r,{DM:()=>h,Gu:()=>m,TI:()=>u,bO:()=>_,cD:()=>b,dA:()=>f,dw:()=>p,g7:()=>v,qD:()=>E,s1:()=>y,ud:()=>d});var i=n(878028),a=n(239910),o=n.n(a),s=n(146833),l=n(376780),c=n(871117),d=(e=>(e.DESIGN="design",e.FIGJAM="figjam",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.COLLABORATOR="collaborator",e.DEVELOPER="developer",e.EXPERT="expert",e))(d||{});let u={collaborator:l.G_.WHITEBOARD,developer:l.G_.DEV_MODE,expert:l.G_.DESIGN},p=i.z.nativeEnum(d);var m=(e=>(e.VIEW="view",e))(m||{});let h=["collaborator","developer","expert"],_=i.z.nativeEnum(o()(h)),g=[...h,"view"];function f(e){return g.includes(e)}let E=["design","figjam","dev_mode"],y={[l.G_.DESIGN]:"expert",[l.G_.WHITEBOARD]:"collaborator",[l.G_.DEV_MODE]:"developer",[l.G_.SLIDES]:"collaborator",[l.G_.SITES]:"expert"};(0,s.x)()(y);let b=i.z.object({key:_,license_types:c.wk.array()});function v(e){return i.z.object({design:e.optional(),figjam:e.optional(),dev_mode:e.optional(),collaborator:e.optional(),developer:e.optional(),expert:e.optional()})}},890477:(e,r,n)=>{n.d(r,{AG:()=>S,Aj:()=>v,HD:()=>C,Hl:()=>N,NT:()=>y,TA:()=>O,Zx:()=>g});var i=n(848318),a=n(425642),o=n(992277);n(878028);var s=n(502255),l=n(146833),c=n(376780),d=n(765982),u=n(330328),p=n(171063),m=n(595919),h=n(871117);let _={design:p.ud.DESIGN,whiteboard:p.ud.FIGJAM,figjam:p.ud.FIGJAM,dev_mode:p.ud.DEV_MODE,slides:p.ud.SLIDES,collaborator:p.ud.COLLABORATOR,developer:p.ud.DEVELOPER,expert:p.ud.EXPERT,view:p.Gu.VIEW};function g(e){return _[e]??e}(0,l.x)()(_);let f={design:c.ud.DESIGN,whiteboard:c.ud.WHITEBOARD,figjam:c.ud.WHITEBOARD,dev_mode:c.ud.DEV_MODE,slides:c.ud.SLIDES,collaborator:c.ud.COLLABORATOR,developer:c.ud.DEVELOPER,expert:c.ud.EXPERT};(0,l.x)()(f);let E={design:h.lM.DESIGN,whiteboard:h.lM.FIGJAM,figjam:h.lM.FIGJAM,dev_mode:h.lM.DEV_MODE,slides:h.lM.SLIDES,sites:h.lM.SITES};function y(e){return E[e]??e}(0,l.x)()(E);let b={design:h.oM.DESIGN,whiteboard:h.oM.WHITEBOARD,figjam:h.oM.WHITEBOARD,dev_mode:h.oM.DEV_MODE,slides:h.oM.SLIDES,sites:h.oM.SITES};function v(e){return b[e]??e}(0,l.x)()(b);let T={design:d.j4.DESIGN,whiteboard:d.j4.WHITEBOARD,figjam:d.j4.WHITEBOARD};(0,l.x)()(T);let I={[p.ud.DESIGN]:10,[p.ud.DEV_MODE]:20,[p.ud.FIGJAM]:30,[p.ud.SLIDES]:40,[p.ud.EXPERT]:50,[p.ud.DEVELOPER]:60,[p.ud.COLLABORATOR]:70,[p.Gu.VIEW]:80};function S(e,r){return I[e]-I[r]}let w={[h.lM.DESIGN]:10,[h.lM.SITES]:20,[h.lM.DEV_MODE]:30,[h.lM.FIGJAM]:40,[h.lM.SLIDES]:50};function A(e,r){return w[e]-w[r]}function C(e){let r=N();return(0,i.useMemo)(()=>r(e),[r,e])}function N(){let e=function(){let e=(0,u.sy)();return(0,i.useMemo)(()=>({[p.ud.EXPERT]:(0,a.WI)([h.lM.DESIGN,h.lM.DEV_MODE,h.lM.FIGJAM,h.lM.SLIDES,e?h.lM.SITES:void 0]),[p.ud.DEVELOPER]:[h.lM.DEV_MODE,h.lM.FIGJAM,h.lM.SLIDES],[p.ud.COLLABORATOR]:[h.lM.FIGJAM,h.lM.SLIDES]}),[e])}();return(0,i.useCallback)(r=>e[r].sort(A),[e])}let L=m.N_.dict();function O(e){if(!e)return null;let r=L[g(e.key)];return r?{key:r,license_types:e.licenseTypes.map(e=>y(e))}:((0,s.$D)(o.e.BILLING,Error(`convertLgSeatTypeProduct encountered unexpected seat type key: ${e.key}`)),null)}},407880:(e,r,n)=>{n.d(r,{H5:()=>o});var i=n(72319),a=n(871117);let o=new i.X([a.G_.DESIGN,a.G_.FIGJAM,a.G_.DEV_MODE]);new i.X([a.G_.DESIGN,a.Mg,a.G_.DEV_MODE])},871117:(e,r,n)=>{n.d(r,{G_:()=>d,Mg:()=>c,Te:()=>u,_R:()=>b,if:()=>g,iy:()=>E,lM:()=>p,oM:()=>h,qA:()=>f,vc:()=>_,vu:()=>l,wR:()=>y,wk:()=>m});var i=n(445777),a=n(878028),o=n(376780),s=(e=>(e.DESIGN="design",e.FIGJAM="figjam",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.SITES="sites",e.FIGMAKE="figmake",e))(s||{});let l="design",c="whiteboard",d={DESIGN:"design",FIGJAM:"figjam",DEV_MODE:"dev_mode"};a.z.nativeEnum(d);let u={DESIGN:"design",WHITEBOARD:"whiteboard",DEV_MODE:"dev_mode"};a.z.nativeEnum(u);let p={DESIGN:"design",FIGJAM:"figjam",DEV_MODE:"dev_mode",SLIDES:"slides",SITES:"sites"},m=a.z.nativeEnum(p),h={DESIGN:"design",WHITEBOARD:"whiteboard",DEV_MODE:"dev_mode",SLIDES:"slides",SITES:"sites"};function _(e){switch(e){case o._Y.DESIGN:case o._Y.SLIDES:case o._Y.SITES:case o._Y.COOPER:case o._Y.FIGMAKE:case null:return u.DESIGN;case o._Y.WHITEBOARD:return u.WHITEBOARD;default:(0,i.xb)(e)}}function g(e){switch(e){case o._Y.DESIGN:case o._Y.COOPER:case o._Y.FIGMAKE:case null:return h.DESIGN;case o._Y.WHITEBOARD:return h.WHITEBOARD;case o._Y.SLIDES:return h.SLIDES;case o._Y.SITES:return h.SITES;default:(0,i.xb)(e)}}function f(e){switch(e){case h.DESIGN:return o.G_.DESIGN;case h.DEV_MODE:return o.G_.DEV_MODE;case h.WHITEBOARD:return o.G_.WHITEBOARD;case h.SLIDES:return o.G_.SLIDES;case h.SITES:return o.G_.SITES;default:(0,i.xb)(e)}}function E(e){return function(e){switch(e){case"design":case"dev_mode":return o._Y.DESIGN;case"whiteboard":case"figjam":return o._Y.WHITEBOARD;case"slides":return o._Y.SLIDES;case"sites":return o._Y.SITES;case"figmake":return o._Y.FIGMAKE;default:(0,i.xb)(e)}}(function(e){switch(e){case o.G_.DESIGN:return p.DESIGN;case o.G_.DEV_MODE:return p.DEV_MODE;case o.G_.WHITEBOARD:return p.FIGJAM;case o.G_.SLIDES:return p.SLIDES;case o.G_.SITES:return p.SITES;default:(0,i.xb)(e)}}(e))}function y(e){switch(e){case o._Y.DESIGN:case o._Y.COOPER:case o._Y.FIGMAKE:case null:return o.G_.DESIGN;case o._Y.WHITEBOARD:return o.G_.WHITEBOARD;case o._Y.SLIDES:return o.G_.SLIDES;case o._Y.SITES:return o.G_.SITES;default:(0,i.xb)(e)}}function b(e,r){return e===o._Y.WHITEBOARD?r?.whiteboardPaidStatus===o.dQ.RESTRICTED:e===o._Y.DESIGN&&r?.designPaidStatus===o.dQ.RESTRICTED}a.z.nativeEnum(h)},535560:(e,r,n)=>{n.d(r,{vK:()=>u}),n(992277);var i=n(878028);n(502255),n(431118),n(442313);var a=(e=>(e.ACH_DEBIT="ach_debit",e.CARD="card",e.SEPA_DEBIT="sepa_debit",e.UNKNOWN="unknown",e))(a||{}),o=(e=>(e.AMEX="amex",e.DINERS="diners",e.DISCOVER="discover",e.EFTPOS_AU="eftpos_au",e.JCB="jcb",e.MASTERCARD="mastercard",e.UNIONPAY="unionpay",e.VISA="visa",e.UNKNOWN="unknown",e))(o||{});let s=i.z.object({type:i.z.literal("ach_debit"),last4:i.z.string().nullable()}),l=i.z.object({type:i.z.literal("card"),brand:i.z.nativeEnum(o).nullable(),last4:i.z.string().nullable()}),c=i.z.object({type:i.z.literal("sepa_debit"),last4:i.z.string().nullable()}),d=i.z.object({type:i.z.literal("unknown"),stripe_type:i.z.string()}),u=i.z.union([s,l,c,d])},211061:(e,r,n)=>{n.d(r,{ar:()=>g,qH:()=>d}),n(992277);var i=n(878028);n(241899),n(95650),n(502255),n(431118),n(442313);var a=n(376780),o=n(502424),s=n(515673),l=n(171063),c=n(535560),d=(e=>(e.PENDING="pending",e.OPEN="open",e.PAID="paid",e.UNCOLLECTIBLE="uncollectible",e.VOID="void",e))(d||{}),u=(e=>(e.MANUAL="manual",e.SUBSCRIPTION_CREATED="subscription_created",e.SUBSCRIPTION_RENEWED="subscription_renewed",e.CATCH_UP="catch_up",e.TRUE_UP="true_up",e))(u||{}),p=(e=>(e.OPEN="open",e.PAID="paid",e.CANCELED="canceled",e))(p||{});let m=i.z.object({status:i.z.nativeEnum(p),payment_method:c.vK.nullable()});var h=(e=>(e.LEGACY="legacy",e.PRORATED="prorated",e))(h||{});let _=(0,l.g7)(i.z.object({net_quantity:i.z.number(),amount:i.z.number(),seats_quantity:i.z.number(),seats_amount:i.z.number(),adjustments_quantity:i.z.number(),adjustments_amount:i.z.number(),charges_quantity:i.z.number(),charges_amount:i.z.number(),credits_quantity:i.z.number(),credits_amount:i.z.number()})),g=i.z.object({id:i.z.string(),issued_at:i.z.string(),paid_at:i.z.string().nullable(),period_starts_at:i.z.string(),period_ends_at:i.z.string(),past_due_at:i.z.string(),plan_parent_type:i.z.nativeEnum(a.OL),billing_interval:i.z.nativeEnum(s.NW),total:i.z.number(),state:i.z.nativeEnum(d),subtype:i.z.nativeEnum(u),currency:o.D,hosted_invoice_url:i.z.string().nullable(),invoice_pdf_url:i.z.string().nullable(),number:i.z.string().nullable(),total_tax_amount:i.z.number(),subtotal:i.z.number(),payments:m.array(),billing_mechanics:i.z.nativeEnum(h),billable_products_kind:i.z.nativeEnum(a.FE),org_invoice_details:i.z.object({is_locked:i.z.boolean().nullable(),is_skipped_trueup:i.z.boolean().nullable(),seat_floors:(0,l.g7)(i.z.number().nullable()).nullable(),billable_seats_now:(0,l.g7)(i.z.number().nullable()).nullable()}).nullish(),is_empty:i.z.boolean(),invalid_amounts_or_quantities:i.z.boolean().optional(),seats_breakdown:_});var f=(e=>(e.PENDING="pending",e.OPEN="open",e.PAID="paid",e.UNCOLLECTIBLE="uncollectible",e.VOID="void",e.OVERDUE="overdue",e))(f||{}),E=(e=>(e.REVIEW="review",e.LOCKED="locked",e))(E||{})},943202:(e,r,n)=>{n.d(r,{p:()=>a}),n(653959),n(95646),n(993421);var i=n(515673);function a(e,r){return"promoReview"===e.view||"teamUpgrade"===e.view&&e.paymentStep===i.tn.CONFIRM_PAY&&r.promo}n(171063),n(595919)},570784:(e,r,n)=>{n.d(r,{jL:()=>h}),n(848318);var i=n(39773),a=n(239910),o=n.n(a),s=n(210709);n(442313);var l=n(211061),c=n(997894);n(803437);var d=n(295957);let u=(0,i.eU)({});function p(e){let r=e.filter(e=>e.state===l.qH.PENDING),n=o()(r,e=>e.id);i.zl.set(u,e=>({...e,...n}))}c.M4.Query({fetch:async e=>{let r=(await d.V.getPlanInvoices(e)).data.meta.invoices;return p(r),r}});let m=c.M4.Query({fetch:async({planType:e,planId:r})=>{let n=(await d.V.getUpcomingPlanInvoices({planType:e,planId:r})).data.meta.invoices;return p(n),n}});async function h(e){await c.M4.fetch(m(e),{policy:"networkOnly"}).catch(e=>{s.k.error(e)})}},796251:(e,r,n)=>{n.d(r,{$n:()=>R,ac:()=>M,gW:()=>L});var i=n(848318),a=n(716544),o=n(320583),s=n(992277),l=n(741419),c=n(157907),d=n(39773),u=n(430285),p=n(493554),m=n(502255),h=n(896966),_=n(186323),g=n(486934),f=n(776618),E=n(369600),y=n(376780),b=n(635547),v=n(694253),T=n(241917),I=n(871117),S=n(841747),w=n(129990),A=n(668029),C=n(207715),N=n(24096);function L(e,r,n,i,a,o,d,u,p,_,E){var b;return{createBranch:function(e,r,n,i,a,o,s,l){if(!e)return{status:"hidden",reason:"No file"};if(n)return{status:"hidden",reason:"Recovery"};if(a)return{status:"hidden",reason:"User is in limited space"};if(s!==T.nT.Design)return{status:"hidden",reason:"Invalid editor type"};if(void 0!==l&&l!==f.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if((0,N.Pe)(e))return{status:"disabled",reason:"File is copy/export restricted"};if((0,v.isOrgUserExternallyRestrictedFromState)(r))return{status:"hidden",reason:"Your organization doesn't allow you to create branches in external spaces."};if((0,A.XD)({currentTeamId:i,hasCurrentOrg:!!r.currentUserOrgId}))return{status:"upsell-org",reason:"Not in org but can upsell into it"};if(!e.parentOrgId)return{status:"hidden",reason:"File is not in org"};if(!r.currentUserOrgId)return{status:"hidden",reason:"Not in org"};let c=(0,g.up)(e,r.repos);if(c&&!(0,g.SA)(e,c))return{status:"hidden",reason:"Not the main file"};let d=r.user&&r.orgUsersByOrgId[e.parentOrgId]&&r.orgUsersByOrgId[e.parentOrgId][r.user.id]?r.orgUsersByOrgId[e.parentOrgId][r.user.id]:null,u=d&&d.design_paid_status,p=o?d?.active_seat_type?.license_types?.includes(I.vu):u===y.El.FULL;return null===u?{status:"hidden",reason:"Unknown account type"}:p?{status:"enabled"}:o||u===y.El.STARTER?{status:"hidden"}:{status:"upsell-org-seat"}}(e,r,d,u,p,_,n,i),openBranchSource:e&&(0,g.Kz)(e)?{status:"enabled"}:{status:"hidden"},viewBranches:e&&e.fileRepoId?d?{status:"hidden",reason:"Recovery mode"}:{status:"enabled"}:{status:"hidden"},viewBranchDiff:(b=e?.sourceFile||null,e?(0,g.Kz)(e)?e.canView?b?.canView?d?{status:"hidden",reason:"Recovery mode"}:a!==l.lyf.BRANCHING&&i!==f.Wy.SAFE?{status:"disabled",reason:"Low memory"}:{status:"enabled"}:{status:"hidden",reason:"Can't view source"}:{status:"hidden",reason:"Can't view branch"}:{status:"hidden",reason:"Not a branch"}:{status:"hidden"}),mergeBranch:function(e,r,n,i,a,o){if(!e)return{status:"hidden"};if(!(0,g.Kz)(e))return{status:"hidden",reason:"Not a branch"};if(!e.canManage)return{status:"hidden",reason:"Can't edit branch"};if(!r?.canManage)return{status:"hidden",reason:"Can't edit source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(o)return{status:"hidden",reason:"Recovery mode"};if(i!==l.lyf.BRANCHING){if(n!==f.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(a!==l.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,i,a,o,d),viewSourceDiff:function(e,r,n,i,a,o,s){if(!e)return{status:"hidden"};if(!(0,g.Kz)(e))return{status:"hidden",reason:"Not a branch"};if(!e.canView)return{status:"disabled",reason:"Can't view branch"};if(!r?.canView)return{status:"disabled",reason:"Can't view source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(s)return{status:"hidden",reason:"Recovery mode"};let c=e.sourceFileKey&&n.fileByKey[e.sourceFileKey],d=n.fileByKey[e.key];if(!c)return{status:"disabled",reason:"No source file in redux"};if(!d)return{status:"disabled",reason:"No branch file in redux"};if(!D(d,c))return(0,h.Lo)("branching","No changes",{sourceCheckpointId:c.checkpoint_id,branchCheckpointId:d.source_checkpoint_id}),{status:"disabled",reason:"No changes"};if(a!==l.lyf.BRANCHING){if(i!==f.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(o!==l.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,r,i,a,o,d),updateBranch:function(e,r,n,i,a,o,d,u){if(!e||!(0,g.Kz)(e))return{status:"hidden"};if(!e.canManage)return{status:"hidden",reason:"Can't edit branch"};if(!r?.canView)return{status:"hidden",reason:"Can't view source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(d)return{status:"hidden",reason:"Recovery mode"};if((0,c.k)().branching_update_status_lg){if(!u)return{status:"disabled",reason:"Repo not found"};let r=u.files;if(!r)return(0,m.$D)(s.e.SCENEGRAPH_AND_SYNC,Error("Repo has no files")),{status:"disabled",reason:"No files in repo"};let n=r.find(r=>r.key===e.key),i=r.find(e=>(0,g.Ns)(e,u));if(!n)return{status:"disabled",reason:"No branch file in livegraph"};if(!i)return{status:"disabled",reason:"No source file in livegraph"};if(!i.checkpointId||!n.sourceCheckpointId||n.sourceCheckpointId===i.checkpointId)return(0,h.Lo)("branching","No changes",{sourceCheckpointId:i.checkpointId,branchPointCheckpointId:n.sourceCheckpointId}),{status:"disabled",reason:"No changes"}}else{let r=e.sourceFileKey&&n.fileByKey[e.sourceFileKey],i=n.fileByKey[e.key];if(!i)return{status:"disabled",reason:"No branch file in redux"};if(!r)return{status:"disabled",reason:"No source file in redux"};if(!D(i,r))return(0,h.Lo)("branching","No changes",{sourceCheckpointId:r.checkpoint_id,branchCheckpointId:i.source_checkpoint_id}),{status:"disabled",reason:"No changes"}}if(a!==l.lyf.BRANCHING){if(i!==f.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(o!==l.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,r,i,a,o,d,E)}}function O(){return(0,C.ut)(l.Ez5?.uiState().isRecovery,!1)}function R(){let e=(0,S.FC)(),r=(0,E.q5)(),n=(0,w.d)(),o=(0,a.d4)(e=>e.selectedView.editorType),s=O(),l=(0,d.md)(f.eE),c=(0,a.d4)(e=>e.mirror.appModel.topLevelMode),m=(0,a.d4)(e=>e.mirror.appModel.multiplayerSessionState),h=r?.teamId??null,g=(0,_.R)(),y=r?.sourceFile??r,v=!!(y&&y.key),T=(0,p.Rs)(b.QrR,{fileKey:y?.key},{enabled:v}),I=(0,i.useMemo)(()=>v?u.Qw.from(T).transform(e=>P({file:e.file,isRecovery:s,isUserInLimitedSpace:n,isBillingRemodelEnabled:g,plan:e.file?.plan,planUser:e.file?.currentPlanUser})):u.Qw.loaded({status:"hidden",reason:"Not enabled"}),[s,n,g,T,v]),A=r?.sourceFile?.fileRepoId??"",C=(0,p.Rs)(b.op7,{repoId:A},{enabled:!!A}),N=(0,i.useMemo)(()=>L(r,e,o,l,c,m,s,h,n,g,C.data?.repo??null),[r,e,o,l,c,m,s,h,n,g,C]),R=I.transform(e=>e.status);return"loaded"===R.status?{...N,createBranch:{status:R.data}}:{...N,createBranch:{status:"hidden"}}}function P({file:e,isRecovery:r,isUserInLimitedSpace:n,isBillingRemodelEnabled:i,plan:a,planUser:s}){return e?r?{status:"hidden",reason:"Recovery"}:n?{status:"hidden",reason:"User is in limited space"}:e.editorType!==y._Y.DESIGN?{status:"hidden",reason:"Invalid editor type"}:e.canCreateBranch?{status:"enabled"}:(0,N.Pe)(e)?{status:"disabled",reason:"File is copy/export restricted"}:a&&![o.Agb.ENTERPRISE,o.Agb.ORG].includes(a.tier)?{status:"upsell-org",reason:"Not in org but can upsell into it"}:s?(i?s?.seatTypeLicenseTypes?.includes(y.G_.DESIGN):s?.designPaidStatus===y.dQ.FULL)||i||s?.designPaidStatus===y.dQ.STARTER?{status:"hidden"}:{status:"upsell-org-seat"}:{status:"hidden",reason:"Unknown account type"}:{status:"hidden",reason:"No file"}}function D(e,r){return r.checkpoint_id&&e.source_checkpoint_id&&e.source_checkpoint_id!==r.checkpoint_id}function M(e){let r=(0,w.d)(),n=e?.key,a=(0,p.Rs)(b.QrR,{fileKey:n},{enabled:!!n}),o=O(),s=(0,_.R)();return(0,i.useMemo)(()=>e?u.Qw.from(a).transform(e=>P({file:e.file,isRecovery:o,isUserInLimitedSpace:r,isBillingRemodelEnabled:s,plan:e.file?.plan,planUser:e.file?.currentPlanUser})):u.Qw.loaded({status:"hidden",reason:"No file"}),[e,o,r,s,a])}},507720:(e,r,n)=>{n.d(r,{CR:()=>L,F$:()=>U,GV:()=>b,JG:()=>w,PK:()=>y,Zz:()=>B,eR:()=>A,gj:()=>P,hx:()=>E,k0:()=>F,mz:()=>S,o8:()=>C,rN:()=>v,ro:()=>D,t$:()=>I,us:()=>x,vl:()=>M,wB:()=>f});var i=n(445777),a=n(157907),o=n(508242),s=n(193324),l=n(818754),c=n(195507),d=n(701780),u=n(711203),p=n(727341),m=n(45584),h=n(830789),_=n(960849),g=n(27776);let f=1,E={x:16,y:-4},y={top:0,right:0,bottom:0,left:0,width:0,height:0},b={messageMeta:[],attachments:{},state:h.EB.READY,anchorPosition:null,selectionBoxAnchor:null,discardAttempt:0};function v(e,r){return!r||(0,d.gR)(r,e)}function T(e){return(0,l.jz)(e?g.NJv:g.QP5)}function I(){return T((0,p.GS)())}function S(){var e;return e=(0,p.GS)(),(0,l.jz)(e?g.oGx:g.RdL)}function w(e,r,n){let{messageMeta:i,attachments:a,anchorPosition:o,selectionBoxAnchor:s}=r;return{id:h.hm,key:h.hm,uuid:h.hm,anchored:!0,canvasPosition:o,selectionAnchorCanvasPosition:s,page:n,isActive:e===h.hm,comments:[],messageMeta:i,attachments:Object.values(a),pageName:null,isCanvasMention:!1,sidebarItemType:h.kT.COMMENT_THREAD}}function A(e){return e===h.hm}let C=(0,o.cm)(e=>e.map(e=>e.user?{user_id:e.user.id,user_annotated:{id:e.user.id,handle:e.user.handle,img_url:e.user.imgUrl}}:{t:null!==e.t?e.t:void 0,link:e.link?e.link:void 0,styles:e.styles?e.styles:void 0,children:e.children?.length?C(e.children):void 0})),N=(0,o.cm)(e=>({x:e.x,y:e.y,...e.nodeId?{node_id:e.nodeId}:{},...e.inFrame?{in_frame:e.inFrame}:{},...e.nodeOffset?{node_offset:e.nodeOffset}:{},...e.selectionBoxAnchor?{selection_box_anchor:e.selectionBoxAnchor}:{},...e.stablePath?{stable_path:e.stablePath}:{}})),L=(0,o.cm)(e=>({id:e.id,handle:e.handle,img_url:e.imgUrl})),O=(e,r,n)=>{if("publicUuid"in e&&e.publicUuid)return!1;if(r.unreadComments[e.id])return!0;if(r.readComments[e.id])return!1;let i=r.allReadAt||r.createdAt;return!(e.createdAt.getTime()<=i.getTime())&&e.user.id!==n},R=new Date,P={id:"",userId:"",fileKey:"",createdAt:R,allReadAt:R,readComments:{},unreadComments:{}};function D(e,r,n,i,o,l,d,u){if("loaded"!==r.status)return r;let p=r.data.file;if(!p)return(0,c.gB)([]);let m=p?.comments.filter(e=>!e.parentId),_=p.comments.filter(e=>e.parentId).reduce((e,r)=>{let n=e[r.parentId]||[];return n.push(r),e[r.parentId]=n,e},{}),g=p.commentAttachments.reduce((e,r)=>{if(!r.fileCommentId)return e;let n=e[r.fileCommentId]||[];return n.push(r),e[r.fileCommentId]=n,e},{}),f=o(m.filter(e=>e.clientMeta?.nodeId).map(e=>e.clientMeta.nodeId)),E=m.map(r=>{let o=r.clientMeta&&r.clientMeta.nodeId,c=i[r.id]||r.uuid&&i[r.uuid],m=null;if(c&&r.clientMeta?.selectionBoxAnchor){let e=r.clientMeta.x-r.clientMeta.selectionBoxAnchor.x,n=r.clientMeta.y-r.clientMeta.selectionBoxAnchor.y;m={x:c.x-e,y:c.y-n}}let E=o?f[o]||r.clientMeta?.pageId||null:r.clientMeta?.pageId||"0:1",y=_[r.id]||[],b=[r,...y.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime())],v=p.currentUserCommentReadStatus||P,T=b.map(n=>{let i=g[n.id]??(n.uuid&&g[n.uuid]);return function(e,r,n,i,o,l,c){let d=O(n,i,e),u=(0,s.L4)(n.id),p=n.messageMeta;n.messageMetaStylized?.length&&(p=n.messageMetaStylized);let m=(0,a.k)().comments_faster_saving_ux?!!n.uuid&&o.has(n.uuid):void 0,h=(0,a.k)().comments_faster_saving_ux_v2?u||!!r.uuid&&r.uuid in l:void 0;return{id:n.id,uuid:n.uuid,key:r.key,parent_id:n.parentId,user_id:n.user.id,created_at:n.createdAt.toISOString(),resolved_at:r.resolvedAt?r.resolvedAt.toISOString():null,deleted_at:null,message_meta:C(p),attachments:c,client_meta:n.clientMeta?N(n.clientMeta):null,order_id:null!==n.orderId?n.orderId.toString():null,isUnread:d,isPendingFromSinatra:u,isSaving:m,isPendingFromLg:h,user:L(n.user)}}(e,r,n,v,d,u,i)}),I=(0,s.L4)(r.id),S=(0,a.k)().comments_faster_saving_ux?!!r.uuid&&d.has(r.uuid):void 0,w=(0,a.k)().comments_faster_saving_ux_v2?I||!!r.uuid&&r.uuid in u:void 0;return{id:r.id,uuid:r.uuid||void 0,key:r.key,anchored:!!c,canvasPosition:c,selectionAnchorCanvasPosition:m,page:E,pageName:E&&l[E]||null,isActive:n===r.id,isPendingFromSinatra:I,isSaving:S,isPendingFromLg:w,comments:T,messageMeta:[],attachments:[],isCanvasMention:!1,sidebarItemType:h.kT.COMMENT_THREAD,commentPin:r.commentPin}});return(0,c.gB)(E)}function M(e,r,n,a){let{canvasPosition:o}=r,s=o&&e?(0,m.Z0)(e,o):null,l=function(e,r,n,a,o,s){if(!e||!r)return null;let l=(function(e){switch(e){case h.kT.COMMENT_THREAD:return _.XC;case h.kT.FEED_POST:return _.b1;default:(0,i.xb)(e)}})(a).getPinSize(n).width,c=l+E.x+T(o)+25;return e.width-r.x-(s??0)<c?{x:-1*T(o)-E.x,y:-55}:{x:l+E.x,y:-55}}(e,s,new Set(r.comments.map(e=>e.user_id)).size,r.sidebarItemType,n,a),c=s&&l?d.Mi.add(s,l):null;return{...r,anchorPosition:s,threadPosition:c,threadOffset:l}}let k=(e,r,n)=>{let i=e.id;if(r.unreadCanvasMentions[i])return!0;if(r.readCanvasMentions[i])return!1;let a=r.allReadAt||r.createdAt;return!(e.createdAt.getTime()<=a.getTime())&&n!==e.id};function F(e,r,n){if("loaded"!==r.status)return r;let i=r.data.file;if(!i)return(0,c.gB)([]);let a=i.fileCanvasMentions,o=i.currentUserFileCanvasMentionReadStatus||u.ih,s=a.map(r=>(function(e,r,n,i){let a=`canvas_mention_${r.id.replace(/-/g,"_")}`,o=r.id,s=k(r,n,e);return{id:a,uuid:o,key:r.fileKey,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,page:(0,c.oA)(r.pageId,null),pageName:null,isActive:i===a,isPendingFromSinatra:void 0,comments:[{id:a,uuid:o,key:o,parent_id:null,user_id:r.fileKey,created_at:r.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:C(r.messageMeta),client_meta:null,order_id:null,isUnread:s,isPendingFromSinatra:!1,user:L(r.mentionedByUser)}],messageMeta:C(r.messageMeta),attachments:[],isCanvasMention:!0,replyCount:void 0,sidebarItemType:h.kT.COMMENT_THREAD,nodeId:r.nodeIdPath[0]}})(e,r,o,n));return(0,c.gB)(s)}function x(){return{reply:{messageMeta:[],attachments:{}},state:h.EB.READY}}function U(e){let r=[];for(let n=0;n<e.message_meta.length;n++){let i=e.message_meta[n];i.hasOwnProperty("user_id")&&r.push(i.user_id)}return r}function B(e){return e.some(e=>null!=e.commentPin&&e.comments.some(e=>e.isUnread))}},454249:(e,r,n)=>{n.d(r,{Hu:()=>w,Kq:()=>L,W9:()=>C,gu:()=>N,kx:()=>A});var i=n(848318),a=n(716544),o=n(741419),s=n(897392);n(952423);var l=n(179703),c=n(157907),d=n(223926),u=n.n(d),p=n(579020),m=n(701780),h=n(196484);n(593005),n(990022),n(992444),n(473332);var _=n(51910),g=n(199062),f=n(401822),E=n(507720),y=n(378254),b=n(103446),v=n(662275),T=n(876411);(0,c.k)().comments_new_observer;let I=(e,r)=>({anchorPositionById:r(i.useMemo(()=>{if("loaded"!==e.status||!e.data.file)return{commentNodeInfoById:{},commentNodeIds:new Set,commentThreads:[]};let r=e.data.file,n=Object.create(null),i=new Set,a=r.comments.filter(e=>null===e.parentId);for(let e of a)if(e.clientMeta){let{x:r,y:a,nodeId:o,nodeOffset:s,stablePath:l}=e.clientMeta;n[e.id]={canvasPosition:{x:r,y:a},nodeId:o,nodeOffset:s,stablePath:l?`[${l.join(",")}]`:void 0},null!=o&&i.add(o)}return{commentNodeInfoById:n,commentNodeIds:i,commentThreads:a}},[e]).commentNodeInfoById)}),S="COMMENTS_ABSOLUTE_POSITIONING_UPDATER";function w(e,r){let n=i.useMemo(()=>u()(e,e=>e.clientMeta?.nodeId),[e]),s=i.useMemo(()=>Object.keys(n),[n]),l=i.useRef({}),c=(0,a.wA)(),d=(0,b.g)(),p=i.useCallback(e=>{let{nodeId:r,position:i,eventOrigins:a}=e,o=l.current[r],s=a.includes("LOCAL"),d=navigator.onLine;if(s&&d){if(null===i){let e=n[r]||[];o&&e.forEach(e=>{let r=e.clientMeta;if(r){let n=e.clientMeta?.nodeOffset||{x:0,y:0},i=m.Mi.add(o.position,n);(r.x!==i.x||r.y!==i.y)&&c(h.hY({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:i.x,y:i.y,page_id:r.pageId||void 0,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}else i&&i.page!==o?.position?.page&&(n[r]||[]).forEach(e=>{let r=e.clientMeta;if(r){let n=e.clientMeta?.nodeOffset||{x:0,y:0},a=m.Mi.add(i,n);c(h.hY({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:a.x,y:a.y,page_id:i.page,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}l.current[r]=e},[n,l,c]);i.useEffect(()=>{if(r.enabled&&o.glU&&d){let{currentNodePosition:e}=(0,v.EE)(S,s,p);l.current=e}return()=>{o.glU&&d&&(0,v.lB)(S)}},[s,p,r.enabled,d])}function A(e){return i.useCallback(r=>r.reduce((r,n)=>{let i=e?.pageIdForNodeId(n)||null;return i&&l.UN().get(i)?.isInternalOnlyNode&&(i=null),r[n]=i,r},{}),[e])}function C(e,r,n,o,s,l){let c=I(r,o),d=(0,a.d4)(e=>e.comments.savingCommentUuids),u=(0,a.d4)(e=>e.comments.lgPendingUuidToServerIdMap);i.useEffect(()=>{if("errors"===r.status){let e=JSON.stringify(r.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load comments: ${e}`),(0,p.sx)("Livegraph Comments Errors",{errors:e})}},[r]),(0,T.t)(e=>{if("loading"!==r.status){if("errors"===r.status){e("comments_fetched",{status:r.status});return}e("comments_fetched",{count:r.data?.file?.comments?.length,status:r.status})}},[r]);let m=i.useMemo(()=>l.filter(e=>!!("nodeId"in e?e.nodeId:e.id)).reduce((e,r)=>(e["nodeId"in r?r.nodeId:r.id]=r.name,e),{}),[l]),h=i.useMemo(()=>(0,E.ro)(e,r,n,c.anchorPositionById,s,m,d,u),[e,r,n,c.anchorPositionById,s,m,d,u]);return(0,y.E)("loaded"===h.status&&h.data||[]),h}function N(e,r,n){return i.useEffect(()=>{if(r.errors&&r.errors.length){let e=JSON.stringify(r.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load canvas mentions: ${e}`),(0,p.sx)("Livegraph Canvas Mention Comments Errors",{errors:e})}},[r.errors]),i.useMemo(()=>(0,E.k0)(e,r,n),[n,r,e])}function L(e){let r;let n=(0,g.s)(),i=(0,_.eY)();if(!(0,f.Qf)(i))return!1;switch(n.orphanedBy){case"deleted_pages":return!e.pageName;case"deleted_anchors":if(0===e.comments.length||!(r=e.comments[0].client_meta?.node_id))return!1;return!i.get(r);case"non_slide_anchors":if(0===e.comments.length||!(r=e.comments[0].client_meta?.node_id))return!0;let a=(0,l.UN)().get(r);if(!a)return!0;return a.containingSlideId===s.AD;default:return!1}}},625069:(e,r,n)=>{n.d(r,{CR:()=>C,CW:()=>R,Cj:()=>en,D:()=>W,EL:()=>S,Gq:()=>U,HE:()=>k,HN:()=>z,HR:()=>q,Hc:()=>E,IZ:()=>j,Lg:()=>D,MZ:()=>V,T9:()=>J,UP:()=>ee,Uc:()=>F,V4:()=>L,Wi:()=>K,Yp:()=>y,ax:()=>f,b:()=>M,cV:()=>ei,cs:()=>X,d9:()=>et,eL:()=>H,gS:()=>A,jI:()=>G,kc:()=>Z,n:()=>eo,nR:()=>es,oH:()=>b,ou:()=>T,pH:()=>B,qA:()=>ea,sD:()=>Q,uS:()=>O,vr:()=>v,x1:()=>Y,xp:()=>N,yO:()=>x,z7:()=>P,zU:()=>er,zp:()=>w});var i=n(716544);n(719670);var a=n(508242),o=n(579020),s=n(442313),l=n(110221),c=n(901647),d=n(263148);n(661780);var u=n(376780),p=n(694253);n(75603);var m=n(526830),h=n(241917),_=n(302302);n(494955);var g=n(492119);function f(e,r){return{...e&&e.versions||{},...r&&r.versions||{}}}function E(e,r,n){return e&&r&&r[e]||n}function y(e){return e&&e.trim()||""}function b(e){return e&&e.status||{code:_.aP.EDIT}}function v(e,r){let n=(0,s.t)("community.profiles.your_handle_text");return e&&0!==e.length?e.length>15?(0,s.t)("community.profiles.profile_max_15_characters_in_length",{errorStringPrefix:n}):/^[a-zA-Z0-9_]{1,15}$/.test(e)?null:(0,s.t)("community.profiles.profile_cannot_contain_special_characters",{errorStringPrefix:n}):(0,s.t)("community.publishing.profile_handle_cannot_be_empty",{errorStringPrefix:n})}function T(e,r){if(!("user"in r))return!1;let n=r.authedProfilesById[e];return n?.primary_user_id?!!r.user&&!!n.associated_users?.find(e=>e.user_id===r.user.id):n?.team_id?!!(r.user&&r.teamAdminRolesForAuthedUsers[r.user.id].some(e=>e.team_id===n.team_id))||(0,p.hasAdminRoleAccessOnTeam)(n.team_id,r):!!n?.org_id&&(0,p.canAdminOrg)(n.org_id,r)}let I=(0,a.xx)((e,r,n,i)=>{let a=null;if(e&&r[e]){let o=r[e];a={isAdmin:(0,p.canAdminOrg)(e,{currentUserOrgId:e,user:n,orgById:r,orgUsersByOrgId:i,fileByKey:{}}),id:o.id,name:o.name}}return a});function S(e){return I(e.currentUserOrgId,e.orgById,e.user,e.orgUsersByOrgId)}function w(){let e=(0,i.d4)(e=>e.currentUserOrgId);return I(e,(0,i.d4)(e=>"orgById"in e?e.orgById:{}),(0,i.d4)(e=>e.user),(0,i.d4)(e=>"orgUsersByOrgId"in e?e.orgUsersByOrgId:{}))}let A=(0,a.xx)((e,r,n)=>{let i;let a=r.plugins.fetchedResources;switch(e){case h.nT.Design:i=g.$A.Design;break;case h.nT.DevHandoff:i=g.$A.Handoff;break;case h.nT.Slides:i=g.$A.Slides;break;case h.nT.Cooper:i=g.$A.Cooper;break;default:i=g.$A.FigJam}let o=[];for(let e of r.plugins[i]){let r=a[e.id];if(r&&r.version){o.push(r.version);continue}let i=n[e.id];i&&o.push(i)}return o});function C(e){return A(e.selectedView.editorType,e.recentlyUsed,e.localPlugins)}function N(e){return!!(e.plugin_install||e.plugin||e.widget||e.whitelisted_plugin||e.hub_file||e.community_comment||e.community_resource_payment)}function L(e,r){let n=e.find(e=>e.id===r);return n?.tags||[]}function O(e){return(0,s.Yd)(e.i18n_meta?.text,e.text)}function R(e){return e.replace(/[\s_-]+/g," ").trim().toLocaleLowerCase()}function P(e){return e.match(/^[\P{Script_Extensions=Common} _\-0-9]*$/gu)?e.match(/^[\P{Script_Extensions=Common}0-9](.*[\P{Script_Extensions=Common}0-9])?$/gu)?e.toLocaleLowerCase()!==e?(0,s.t)("community.publishing.tags_can_only_contain_lowercase_characters"):e.length>25?(0,s.t)("community.publishing.tags_can_only_have_up_to_25_characters"):e.match(/[ _-]{2,}/)?(0,s.t)("community.publishing.tags_cannot_have_consecutive_dashes_underscores_or_spaces"):(e.match(/[ _-]/g)||[]).length>2?(0,s.t)("community.publishing.tags_cannot_be_longer_than_3_words"):null:(0,s.t)("community.publishing.tags_must_begin_and_end_with_a_letter_or_number"):(0,s.t)("community.publishing.tags_can_only_contain_certain_characters")}function D(e){return e.length>z?(0,s.t)("community.publishing.tagline_must_be_at_most_100_characters_long"):null}let M={name:"",description:"",tags:[],categoryId:null,creatorPolicy:"",viewerMode:u.y4.CANVAS,scalingMode:null,author:{user_id:""},commentsSetting:d.Ni.ENABLED,publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1},k=["Tab","Enter",","],F=5242880,x=0xf00000,U=0x6400000,B=100,V=12,G=5,H=5,K=10,W=60,z=100;function $(e){return"is_widget"in e&&e.is_widget?m.vt.WIDGET:"current_plugin_version_id"in e?m.vt.PLUGIN:m.vt.HUB_FILE}function Y(e){return"profile_handle"in e?m.Ug.PROFILE:$(e)===m.vt.HUB_FILE?m.Ug.HUB_FILE:$(e)===m.vt.WIDGET?m.Ug.WIDGET:m.Ug.PLUGIN}function j(e){return e>=K-1?(0,s.t)("community.publishing.cannot_have_more_than_max_publishers",{MAX_PUBLISHERS_PER_RESOURCE:K}):null}function q(e){let r={},n={},i=e.map(e=>(r[e.id]=e,n[e.author.id]=e.author,e.id));return{commentsById:r,authorsById:n,feed:i}}let X=l.c;function Z(){return(0,i.d4)(e=>e.authedActiveCommunityProfile)}function J({authedProfilesById:e,profileId:r,userId:n,orgId:i,teamId:a}){return r?e[r]:i?Object.values(e).find(e=>e.org_id===i)||null:a?Object.values(e).find(e=>e.team_id===a)||null:n&&Object.values(e).find(e=>e.associated_users?.find(e=>e.user_id===n))||null}function Q(e,r){return e&&Object.values(r).find(r=>r.associated_users?.find(n=>n.user_id===e.id&&r.public_at))||null}function ee(){return(0,i.d4)(e=>et(e.selectedView))}function et(e){return"communityHub"===e.view||er(e)||!1}function er(e){return"search"===e.view&&("url:community"===e.entryPoint||"community"===e.entryPoint||"community:header"===e.entryPoint)}function en(e){return"communityHub"===e.view&&"handle"===e.subView}function ei(e){return e.community_publishers?.accepted.find(e=>X(e))||null}function ea(e,r){let n=ei(r);if(n)return e.authedProfilesById[n.id]||null;let i=e.user&&Q(e.user,e.authedProfilesById);return i&&r.community_publishers?.accepted.find(e=>e.id===i.id)?i:null}function eo(e){switch(e){case m.bD.PLUGIN:return"plugins";case m.bD.WIDGET:return"widgets";case m.bD.COMMENT:return"comments";case m.bD.HUB_FILE:return"hub_files";default:throw Error("Unsupported Type")}}function es(e,r){(0,o.sx)(c.W_.PROFILE_ADMIN_MENU_OPEN,{source:e,view:r})}},816159:(e,r,n)=>{n.d(r,{D:()=>l,VH:()=>s});var i=n(431118),a=n(442313),o=n(625069);function s(e){let r=(0,o.cV)(e);if(r)return r.name;let n=e.community_publishers.accepted;return function(e,r,n){if(0===e.length)return"";if(1===e.length)return n(e[0]);let o=e.slice(0,r-1),s=e.slice(r-1);0===s.length&&(s=[o[o.length-1]],o=o.slice(0,o.length-1));let l=1===s.length?n(s[0]):(0,a.t)("community.resource.by_x_others",{numPublishers:s.length}),c=o.map(n);return l&&c.push(l),(0,i.Yx)(c)}(n,n.length,e=>e.name)}function l(e){let r=e.community_publishers.accepted;return e.community_publishers.pending&&(r=r.concat(e.community_publishers.pending)),r.reduce((e,r)=>{let n=r.associated_users?.map(e=>e.user_id)||[];return r.primary_user_id&&e.push(r.primary_user_id),e.concat(n)},[])}},914443:(e,r,n)=>{n.d(r,{Ro:()=>o,jY:()=>s,o0:()=>l});var i=n(757033),a=n(23354);function o(e,r){return!!e&&!!e.plugin_publishers?.accepted?.some(e=>e.id===r)}function s(e,r){return!!e&&!!e.plugin_publishers?.pending?.some(e=>e.id===r)||o(e,r)}async function l(e,r){let{data:n}=await i.Ay.post(`/api/${(0,a.KH)(e,{pluralized:!0})}/${e.id}/publisher_invites`,{emails:r});return{resource:n.meta.plugin,errors:n.meta.errors}}},568973:(e,r,n)=>{n(376780),n(412429);var i=(e=>(e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.ACCEPTED=2]="ACCEPTED",e[e.ADMIN=3]="ADMIN",e))(i||{})},285647:(e,r,n)=>{n.d(r,{$W:()=>eE,$x:()=>ea,Ac:()=>ey,CW:()=>et,Dd:()=>F,En:()=>x,Gf:()=>eb,Gp:()=>eo,Ii:()=>X,JJ:()=>Y,Kg:()=>ed,MO:()=>H,N8:()=>es,R1:()=>ep,Rd:()=>eu,Rv:()=>z,T$:()=>U,Tn:()=>B,UU:()=>q,Wl:()=>er,Z2:()=>em,Z7:()=>K,f7:()=>G,gO:()=>k,j4:()=>Z,jr:()=>W,kN:()=>J,l8:()=>en,mH:()=>ee,mN:()=>$,nK:()=>e_,o1:()=>Q,oB:()=>M,of:()=>j,vC:()=>el,xw:()=>ef});var i=n(716544),a=n(821360),o=n(886450),s=n(992277),l=n(157907),c=n(557601),d=n(6819),u=n(408095),p=n(502255),m=n(757033),h=n(442313),_=n(719398),g=n(695621),f=n(544795);n(991026);var E=n(967882),y=n(625069);n(776130);var b=n(694253),v=n(526830),T=n(302302),I=n(850898),S=n(677251),w=n(717326),A=n(215858),C=n(731040),N=n(5291);n(568973),n(997894);var L=n(825749),O=n(412429),R=n(584164),P=(e=>(e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.DISPLAY_ONLY=2]="DISPLAY_ONLY",e[e.ADMIN_IN_DIFFERENT_WORKSPACE=3]="ADMIN_IN_DIFFERENT_WORKSPACE",e[e.ADMIN=4]="ADMIN",e[e.NONE_WITH_INHERITED_ADMIN=5]="NONE_WITH_INHERITED_ADMIN",e[e.PENDING_WITH_INHERITED_ADMIN=6]="PENDING_WITH_INHERITED_ADMIN",e[e.DISPLAY_ONLY_WITH_INHERITED_ADMIN=7]="DISPLAY_ONLY_WITH_INHERITED_ADMIN",e[e.EXPLICIT_ADMIN=8]="EXPLICIT_ADMIN",e))(P||{});let D=e=>!0===e.is_public||null!=e.org;function M(e,r,n,i){return(0,v.m3)(e)||i?S.Lu.PUBLIC:D(e.roles)?e.roles.is_public||(0,f.AC)(e)?S.Lu.PUBLIC:S.Lu.ORG:null!=r&&n?S.Lu.ORG:S.Lu.PUBLIC}function k(e,r,n,i){let a=z(r.team_id,n,e,r.parent_org_id||null);if(0===a.length)throw Error("Called getDefaultHubFilePublishingMetadataAuthor when no valid author exists");return V(e,a,n.authedProfilesById,n.user?.id,i)}function F(e,r){return e.creator.id===r}function x(e,r){if(e){let n=j(r,e);if(n)return n}let n=q(r,e);if(0===n.length)throw Error("Called getDefaultPluginPublishingMetadataAuthor when no valid author exists");return V(e,n,r.authedProfilesById,r.user?.id)}function U(e,r,n){return e?.id&&Object.keys(e.versions).length>0?function(e,r,n){if((e.community_publishers?.accepted||[]).length>0){let i=(0,y.cV)(e),a=i&&r[i.id];return a?.team_id?{team_id:a.team_id}:a?.org_id?{org_id:a.org_id}:{user_id:n||e.creator.id}}let i=r[e.publisher.id];return i?.org_id?{org_id:i.org_id}:i?.team_id?{team_id:i.team_id}:{user_id:i?.primary_user_id||e.creator.id}}(e,r,n):null}function B(e){let r;return e?.team_id?r={team_id:e.team_id}:e?.org_id&&(r={org_id:e.org_id}),r}function V(e,r,n,a,o){if(0===r.length)throw Error("Called getDefaultPublishingMetadataAuthor when no valid author exists");let s=U(e,n,a);if(s&&r.some(e=>G(e,s)))return s;if(o&&r.find(e=>(0,i.bN)(e,o)))return o;let l=r.find(W);if(l)return l;let c=r.find(H);return c?c:r.find(K)||r[0]}function G(e,r){return"team_id"in e?"team_id"in r&&e.team_id===r.team_id:"org_id"in e?"org_id"in r&&e.org_id===r.org_id:"user_id"in e&&"user_id"in r&&e.user_id===r.user_id}let H=e=>"org_id"in e,K=e=>"team_id"in e,W=e=>"user_id"in e;function z(e,r,n,i){let a=[];if((n?.community_publishers?.accepted||[]).length>0){if(!e&&!i)return[{user_id:r.user.id}];let a=n&&(0,y.cV)(n),o=a?r.authedProfilesById[a.id]:null;if(o?.team_id)return(0,b.hasAdminRoleAccessOnTeam)(o?.team_id,r)?[{team_id:o.team_id}]:[];if(o?.org_id)return(0,b.canAdminOrg)(o?.org_id,r)?[{org_id:o.org_id}]:[]}if(r.currentUserOrgId){let n=r.orgById[r.currentUserOrgId];if(!n)return[];if((0,b.canAdminOrg)(r.currentUserOrgId,r)&&(a.push({org_id:r.currentUserOrgId}),n.cmty_publish_as_user_enabled&&a.push({user_id:r.user.id})),e&&r.teams[e]){if(r.teams[e]?.org_access==="secret")return[];((0,R.Bg)(n.shared_org_license_group_settings)?(0,b.canAdminOrg)(r.currentUserOrgId,r):(0,b.hasAdminRoleAccessOnTeam)(e,r))&&a.push({team_id:e})}return a}return e?((0,b.hasAdminRoleAccessOnTeam)(e,r)&&a.push({team_id:e}),a.push({user_id:r.user.id}),a):[{user_id:r.user.id}]}async function $(e){let{data:r,status:n}=await C.s.getEditors({fileKey:e.key});if(200===n)return r.meta}function Y(e,r,n,i){let a;if(!r)return(0,l.k)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.you_do_not_have_edit_permissions"):(0,h.t)("general.error");if("is_template"in e&&e.is_template||e.trackTags?.isTemplate||"is_new_user_playground_library"in e&&e.is_new_user_playground_library||e.track_tags?.source==="default")return(0,l.k)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.cannot_publish_default_files"):(0,h.t)("general.error");if(e.has_file_link_password||e.hasFileLinkPassword)return(0,l.k)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.cannot_publish_password_protected_files"):(0,h.t)("general.error");if(a="parent_org_id"in e?e.parent_org_id:"parentOrgId"in e?e.parentOrgId:null,0===z("team_id"in e?e.team_id:e.teamId,n,i,a||null).length)return(0,h.t)("community.permissions_modal_publish_tab.footer.publish_admins_only");let o=!!n.figFileDuplicatedFromHubFile[e.key],s=!i;return o&&s?(0,l.k)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.remixes_unavailable_until_first_publish"):(0,h.t)("general.error"):null}function j(e,r){if(r.publisher.id&&e.user)switch(r.publisher.entity_type){case T.o1.ORG:{let n=Object.values(e.orgById).find(e=>e.community_profile_id===r.publisher.id);return{org_id:n?.id??e.currentUserOrgId??""}}case T.o1.TEAM:{let n=Object.values(e.teams).find(e=>e.community_profile_id===r.publisher.id);return{team_id:n?.id||""}}default:return{user_id:r.creator.id}}return null}function q(e,r,n=!0){let i=[],a=n&&r?j(e,r):null;return e.currentUserOrgId&&(0,b.canAdminOrg)(e.currentUserOrgId,e)&&i.push({org_id:e.currentUserOrgId}),Object.keys(e.teams).forEach(r=>{let n=e.teams[r];n&&"secret"!==n.org_access&&(0,b.hasAdminRoleAccessOnTeam)(r,e)&&i.push({team_id:r})}),i.push({user_id:e.user.id}),a&&!i.some(e=>G(e,a))&&i.unshift(a),i}function X(e,r){if(!e)return!1;let{team_id:n,org_id:i}=e;if("user_id"in r){let n=e.associated_users;return!!r.user_id&&r.user_id===e.primary_user_id||n?.some(e=>e.user_id===r.user_id)}return"team_id"in r&&n===r.team_id||"org_id"in r&&i===r.org_id}function Z(e){let r=d.D.getState();return"user_id"in e?r.authedUsers.byId[e.user_id]:"org_id"in e?r.orgById[e.org_id]:"team_id"in e?r.teams[e.team_id]:void 0}function J(e,r){if("org_id"in e)return r.orgById[e.org_id]?.name??null;if("team_id"in e)return r.teams[e.team_id]?.name??null;{let e=r.user&&(0,y.sD)(r.user,r.authedProfilesById);return e?.public_at&&e?.name?e.name:e?.public_at&&e?.profile_handle?`@${e.profile_handle}`:r.user?.handle||null}}function Q(e,r){if("org_id"in e){let n=r.orgById[e.org_id];return n?(0,h.t)("community.publishing.org_name",{org:n.name}):(0,h.t)("general.fallback_org_name")}if("team_id"in e){let n=r.teams[e.team_id];return n?(0,h.t)("community.publishing.team_name",{team:n.name}):(0,h.t)("general.fallback_team_name")}{let n=r.authedUsers.byId[e.user_id]??r.user,i=(0,y.sD)(n,r.authedProfilesById);return i?i.name:n?.name||(0,h.t)("general.fallback_user_name")}}function ee(e,r){if("org_id"in e){let n=r.orgById[e.org_id];return n?.community_profile_handle||null}if("team_id"in e){let n=r.teams[e.team_id];return n?.community_profile_handle||null}{let n=r.authedUsers.byId[e.user_id]??r.user,i=(0,y.sD)(n,r.authedProfilesById);return i?i.profile_handle:n?.handle||null}}let et=[I.yj.PNG,I.yj.JPEG];function er(e,r="Image"){if(!e)throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found",{filename:r}));let n=(0,g.S)(e.type,I.yj);if(!n||!et.includes(n))throw Error((0,h.t)("community.publishing.error_thumbnail_image_wrong_format",{filename:r}));if(e.size>y.Uc)throw Error((0,h.t)("community.publishing.error_thumbnail_image_too_large",{filename:r,max_size:Math.floor(y.Uc/1e6)}));return e.size}function en(e){return new Promise((r,n)=>{let i=new Image;i.onload=()=>r(i),i.onerror=n,i.src=e})}let ei=new Set;async function ea(e,r){if(null===e.files||!e.files[0])throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found_no_filename"));r&&e_(r);let n=e.files[0];er(n,(0,h.t)("community.publishing.thumbnail_image"));let[i,a]=await Promise.all([en(URL.createObjectURL(n)),(0,N.c)(n)]);return ei.add(i.src),{url:i.src,buffer:new Uint8Array(a)}}async function eo(e,r,n=E.en){let i=[];for(let a of Array.from(e).slice(0,n))if(r&&a.type.startsWith("video/")){!function(e){let r=e.name;if(!e)throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found",{filename:r}));if(!I.VY.includes(e.type))throw Error((0,h.t)("community.publishing.error_video_wrong_format",{filename:r}));if(e.size>y.Gq)throw Error((0,h.t)("community.publishing.error_thumbnail_image_too_large",{filename:r,max_size:Math.floor(y.Gq/1e6)}))}(a);let e=URL.createObjectURL(a),[r,n]=await Promise.all([eg(a),(0,L.jm)(e),ec(e,a.name)]),s=URL.createObjectURL(new Blob([n]));ei.add(e),ei.add(s),i.push({url:e,buffer:r.bytes,sha1:r.sha1,type:"video",thumbnail_url:s,thumbnail_buffer:n,thumbnail_sha1:(0,o.Et)(n)})}else{er(a,(0,h.t)("community.publishing.carousel_media_image"));let[e,r]=await Promise.all([en(URL.createObjectURL(a)),(0,N.c)(a)]);ei.add(e.src);let n=new Uint8Array(r);i.push({url:e.src,buffer:n,sha1:(0,o.Et)(n),type:"image"})}return i}async function es(e,r){return null===e.files||0===e.files.length?Promise.resolve([]):await eo(e.files,r)}function el(e){if(!e||!e.length)return(0,h.t)("community.publishing.upload_at_least_one_image")}async function ec(e,r){if(await new Promise((r,n)=>{let i=document.createElement("video");i.preload="metadata",i.addEventListener("error",e=>{n(e.message)}),i.addEventListener("loadedmetadata",()=>{r(i.duration)}),i.src=e,i.currentTime=0,i.load(),setTimeout(()=>{n("Video load timeout during video length validation")},1e4)})>E.GT)throw Error((0,h.t)("community.publishing.error_video_too_long",{filename:r,max_length:E.GT}))}function ed(e){let r=[],n=[],i=[];return e&&e.forEach((e,a)=>{if("buffer"in e){if("video"===e.type){if(!e.thumbnail_buffer)throw Error((0,h.t)("community.publishing.error_video_thumbnail_not_found"));let r={carousel_position:a,sha1:(0,o.Et)(e.buffer),bytes:e.buffer,video_thumbnail_buffer:e.thumbnail_buffer,video_thumbnail_sha1:(0,o.Et)(e.thumbnail_buffer)};n.push(r)}else{let n={carousel_position:a,sha1:(0,o.Et)(e.buffer)};r.push(n),i.push(n)}}else if("id"in e){let r="video"===e.type?{carousel_position:a,sha1:e.sha1,video_file_uuid:e.video_file_uuid,video_thumbnail_sha1:e.thumbnail_sha1}:{carousel_position:a,sha1:e.sha1};i.push(r)}}),{uploadImages:r,uploadVideos:n,allMedia:i}}function eu(e,r){return r&&r?.length&&e?.length?e.map(async({url:e,fields:n,carouselPosition:i,signedCloudfrontUrl:a})=>{let o=r[i];if(!o||!("buffer"in o)||!o.buffer)return!1;let d=new FormData;Object.entries(n).forEach(([e,r])=>d.append(e,r)),d.set("content-type",(0,c.i)(o.buffer)??"image/png");let u=new Blob([o.buffer]);try{if(a&&(0,l.k)().ext_s3_url_use_figma_domains){let e=await (0,N.c)(u);await m.Ay.crossOriginPut(a,e,{raw:!0,headers:{"Content-Type":u.type,"x-amz-acl":"bucket-owner-full-control"}})}else{let r=new FormData;Object.entries(n).forEach(([e,n])=>r.append(e,n)),r.set("content-type",(0,c.i)(o.buffer)??"image/png"),r.append("file",u),await fetch(e,{method:"POST",body:r})}}catch(e){throw(0,p.$D)(s.e.COMMUNITY,e),Error((0,h.t)("community.actions.error_uploading_carousel_image_error",{error:(0,_.J)(e,e.data?.message||"unknown error")}))}return!0}):[]}async function ep(e,r,n,i){let a,o,l,d;let{uploadImages:u,allMedia:m}=ed(r);if(!e?.length&&!u?.length)return{cover_image:{cover_image_uploaded:!1,signature:null},carousel_images:m};try{let e=await A.H.setupMultiImageUploadForHubFile({file_version_id:n,hub_file_id:i,images_sha1:u});({cover_image:{cover_image_upload_url:a,signature:o,fields:l},carousel_images:d}=e.data.meta)}catch(e){throw(0,p.$D)(s.e.COMMUNITY,e),Error((0,_.J)(e,(0,h.t)("community.actions.could_not_connect_to_the_server")))}let g=d.map(({url:e,fields:n,carousel_position:i})=>{let a=r[i];if(!a||!("buffer"in a)||!a.buffer)return;let o=new FormData;return Object.entries(n).forEach(([e,r])=>o.append(e,r)),o.set("content-type",(0,c.i)(a.buffer)??"image/png"),o.append("file",new Blob([a.buffer])),fetch(e,{method:"POST",body:o})});if(e?.length){let r=new FormData;Object.entries(l).forEach(([e,n])=>r.append(e,n)),r.set("content-type",(0,c.i)(e)??"image/png"),r.append("file",new Blob([e])),g.push(fetch(a,{method:"POST",body:r}))}try{return await Promise.all(g),{cover_image:{cover_image_uploaded:!!e?.length,signature:o},carousel_images:m}}catch(e){throw(0,p.$D)(s.e.COMMUNITY,e),Error((0,_.J)(e,(0,h.t)("community.actions.error_connecting_to_server_to_upload_file_images")))}}function em(e,r){return r?e.findIndex(e=>e.sha1===r.sha1):-1}function eh(e){ei.has(e)&&(URL.revokeObjectURL(e),ei.delete(e))}function e_(e){e&&(e.url&&eh(e.url),"type"in e&&"video"===e.type&&eh(e.thumbnail_url))}async function eg(e){let r=new Uint8Array(await (0,N.c)(e));return{sha1:(0,o.Et)(r),bytes:r}}function ef(e){if(!e.currentUserOrgId)return!1;let r=(0,O.xw)(e);return!(r&&r.agreed_to_community_tos_at)}function eE(e,r){return Object.entries(r).reduce((r,[n,i])=>r+Number(e.includes(n)&&!!i),0)}function ey(e,r,n){if("object"==typeof e&&"fields"in e&&"imagePath"in e){let{fields:i,imagePath:a,signedCloudfrontUrl:o}=e;if(o&&(0,l.k)().ext_s3_url_use_figma_domains)return m.Ay.crossOriginPut(o,n,{raw:!0,headers:{"Content-Type":r.type,"x-amz-acl":"bucket-owner-full-control"}});let s=new FormData;return Object.entries(i).forEach(([e,r])=>s.append(e,r)),s.set("Content-Type",r.type),s.append("file",r),m.Ay.crossOriginPost(a,s,{raw:!0,headers:{"Content-Type":r.type}})}return"string"==typeof e?m.Ay.crossOriginPut(e,n,{raw:!0,headers:{...m.Ay.defaults.headers,"Content-Type":r.type}}):Promise.reject(Error("Invalid presigned_url"))}async function eb(e,r,n,i,s){let{video:c,videoThumbnail:d}=await w.v.getVideoUploadUrl({resourceType:e,id:r,sha1:n.sha1,thumbnail_sha1:s}),p=null;if(c){let{url:e,fields:r,signedCloudfrontUrl:i}=c;if(i&&(0,l.k)().ext_s3_url_use_figma_domains&&(0,l.k)().ext_s3_url_videos_use_figma_domains){let e=(0,a.lF)((0,o.aD)(n.sha1));p=m.Ay.crossOriginPut(i,n.bytes,{raw:!0,headers:{"Content-Type":"video/mp4","x-amz-acl":"bucket-owner-full-control","x-amz-checksum-sha1":e}}).then(()=>r.key||"")}else p=(0,u.VV)(e,r,n,"video/mp4")}let g=new Blob([i],{type:"image/png"}),f=ey({imagePath:d.url,fields:d.fields,signedCloudfrontUrl:d.signedCloudfrontUrl},g,i).catch(e=>{throw Error((0,h.t)("community.actions.error_uploading_plugin_video_thumbnail_error",{error:(0,_.J)(e,e.data?.message||"unknown error")}))}),[E]=await Promise.all([p,f]);return await ev(n.sha1,r,e,E??"",s,c?.blobUploadCommitKey||"")}async function ev(e,r,n,i,a,o){let s=new URLSearchParams;return s.append("sha1",e),s.append("uploadPath",i),s.append("resourceId",r),s.append("resourceType",n),s.append("blobUploadCommitKey",o),{videoFileUuid:(await m.Ay.post(`/api/upnode/video?${s.toString()}`)).data.meta.video_file_uuid,sha1:e,videoThumbnailSha1:a}}},967867:(e,r,n)=>{n.d(r,{$Q:()=>E,GS:()=>b,JB:()=>T,N4:()=>y,hT:()=>v,wJ:()=>f});var i=n(848318);n(716544);var a=n(573446),o=n(39773),s=n(665549),l=n(478789),c=n(931516),d=n(700392);n(853833),n(730505);var u=n(53818),p=n(441802),m=n(369600),h=n(87089),_=n(635547);n(264917);var g=n(922030);let f=(0,u.D)(e=>22!==e.length&&!e.match(/\D/));function E(e){return(0,i.useMemo)(()=>e&&f(e)?e:null,[e])}function y(e){let r=(0,l.oA)(e),{id:n,thumbnail_url:i,library_key:o,publisher:s}=e;return{name:r,key:n,type:c.PP,thumbnail_url:i,library_key:o??(0,a.l)(""),author_name:s.name,author_handle:s.profile_handle}}function b(e){let{library_file_name:r,library_file_key:n,thumbnail_url:i,library_key:a,author_name:o,author_handle:s}=e;return{name:r,key:n,type:c.PP,thumbnail_url:i,library_key:a,author_name:o,author_handle:s}}function v(e){let{file:r,components:n,stateGroups:i,styles:a,variables:o,variableSets:s}=e,{name:l,key:c,type:d,thumbnail_url:u,library_key:p,author_name:m,author_handle:h}=r;return{library_file_key:c,library_file_name:l,thumbnail_url:u,num_components:n.length,num_state_groups:i.length,num_styles:a.length,num_variable_collections:s.length,num_variables:o.length,num_module_assets:0,num_library_assets:0,type:d,library_key:p,author_name:m,author_handle:h}}let T=(0,o.eU)(e=>{let r=e(g.Me),n=(0,g.jv)(r?.id)?r?.id:null,i=e(h.h0),a=e(m.yV),o=a?a.parentOrgId:i,l=e(p.mQ),c=o?l[o]:null,u=e(_.U8U.Query(n||o?{teamId:n||"-1",orgId:o}:null)),f=e(d.AS).enabled;return"loaded"===u.status&&(0,s.rM)(u)?(0,s.Pp)(u.data.org,u.data.team,f):(0,s.MJ)(c,r,f)})},105073:(e,r,n)=>{n.d(r,{EO:()=>U,FP:()=>x,OY:()=>B,Qj:()=>W,Rm:()=>V,Y8:()=>j,aQ:()=>X,ej:()=>D,gn:()=>Z,kA:()=>P,lt:()=>$,ul:()=>q,vT:()=>M,vl:()=>k,xp:()=>Y,y1:()=>K,zH:()=>H});var i=n(848318),a=n(716544),o=n(157907),s=n(171659),l=n(579020),c=n(210709),d=n(6819),u=n(44509),p=n(736248);n(280198);var m=n(442313),h=n(706721),_=n(23354),g=n(364370),f=n(544795);n(566259);var E=n(449737),y=n(93724),b=n(96447),v=n(444380),T=n(526830);n(324964);var I=n(677251),S=n(808765),w=n(558246),A=n(564609),C=n(382403),N=n(53818),L=n(661780),O=n(402840);function R(e,r,n,i){return a=>{a(E.$O({type:w.h.type,data:{userId:e.id,resource:r,onSuccess:()=>{a(n=>{((0,T.I0)(r)||(0,T.xQ)(r))&&n(y.fR(r,e.id))}),n&&n()},onCancel:i}}))}}let P=(0,N.n)((e,r,n,i,a,s)=>{let l=(0,o.k)().community_hub_admin&&n&&(0,f.AC)(n);return new Promise(o=>{let d=()=>{if(r){if(i||l){var a;e((a=()=>{W({type:"PAID"}),o()},e=>{e(E.$O({type:w.h.type,data:{userId:r.id,resource:n,localResource:i,onSuccess:a,onCancel:o,noInteractionMode:!0}}))}));return}(0,T.m3)(n)?e(R(r,n,()=>o(),()=>o())):c.k.error("Can only initiate checkout for a monetized or local resource.")}else{e(e=>{e(p.Ts({origin:"freemium_checkout_modal_in_open_session",redirectUrl:u.Ay.location.pathname,signedUpFromOpenSession:!0})),e((0,E.to)({type:S.x,data:{headerText:(0,m.t)("fullscreen.toolbar.log_in_to_do_more_with_figjam")}}))});return}};s===A.P.SKIP?d():e(E.$O({type:A.V.type,data:{type:r?s||A.P.PAID_FEATURE:A.P.LOGGED_OUT,onContinue:d,onClose:o,plugin:n&&(0,O.uF)(n)||i||a,monetizedResourceMetadata:n?.monetized_resource_metadata}}))})});function D(e){let r=(0,a.wA)(),n=(0,a.d4)(e=>e.authedActiveCommunityProfile),o=(0,a.d4)(e=>e.authedUsers),s=(0,h.I)(e);return i.useCallback(()=>{if(!e)return;let i=(0,g.QQ)(s),a=(0,T.m3)(e);if((0,l.sx)("cmty_resource_usage_action",{resourceType:(0,_.Dl)(e),resourceId:e.id,profileId:n?.id,hasActiveCommunityResourcePayment:i,isMonetizedResource:a}),!a||i||!1===function(e,r,n){if(!(0,T.m3)(n))return!1;let i=(0,v.G)({authedActiveCommunityProfile:e,authedUsers:r}),{usersCanPurchase:a,publishers:o}=(0,g.V4)(i,n);return(0!==a.length||0!==o.length)&&(0!==a.length||0===o.length)}(n,o,e))return;let c=(0,v.G)({authedActiveCommunityProfile:n,authedUsers:o}),{usersCanPurchase:d,publishers:u}=(0,g.V4)(c,e);if((0,l.sx)("Checkout Flow Entered",{resourceType:(0,_.Dl)(e),resourceId:e.id,numLoggedInAssociatedUsersThatCanPurchase:d.length,numLoggedInAssociatedPublishers:u.length}),1===d.length&&0===u.length){r(R(d[0],e));return}r((0,E.to)({type:C.I,data:{onUserSelect:n=>{(0,l.sx)("Pre Purchase User Selector Modal - User Selected",{resourceType:(0,_.Dl)(e),resourceId:e.id,userIdForPurchase:n.id}),r(R(n,e))},resource:e}}))},[e,s,n,o,r])}function M(e,r){let n=r?.[e.monetized_resource_metadata.id]||e.community_resource_payment;return(0,g.QQ)(n)}function k(e,r){let{publishers:n}=(0,g.V4)([r],e);return n.length>0}function F(e,r,n){return!(!e||!(0,T.m3)(e)||(0,T.PM)(e)||!(0,T.U)(e)&&((0,I.f5)(e)||(0,T.zF)(e))||n&&k(e,n))&&!(M(e,r)&&!function(e,r){let n=r?.[e.monetized_resource_metadata.id]||e.community_resource_payment;return n&&(0,g.UO)(n)}(e,r))}function x(){return(0,a.d4)(e=>e.communityPayments)}function U(e){return F(e,x(),(0,L.iZ)()||void 0)}function B(e){let r=x();return(0,T.m3)(e)&&M(e,r)}function V(e){return F(e,d.D&&d.D.getState().communityPayments,d.D&&d.D.getState().user||void 0)}let G="local-resource-payment";var H=(e=>(e.PAID="PAID",e.UNPAID="UNPAID",e.NOT_SUPPORTED="NOT_SUPPORTED",e))(H||{});function K(){return(0,s.DN)().get(G)}function W(e){(0,s.DN)().set(G,e)}function z(e,r){if(r&&(0,T.m3)(r))return e?.[r.monetized_resource_metadata.id]||r.community_resource_payment}function $(e){return z(x(),e)}function Y(e){let r=(0,a.d4)(r=>(0,O.my)(e,r.publishedPlugins)),n=$(r);return i.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function j({extension:e,publishedPlugins:r,publishedWidgets:n,communityPaymentsState:i}){let a=((0,I.k0)(e)?n:r)[e.plugin_id];if(!a)return;let o=z(i,a);return{...a,community_resource_payment:o}}function q(e){let r=(0,b.cW)()[e],n=$(r);return i.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function X(e){let r=(0,a.d4)(r=>r.publishedWidgets[e]),n=$(r);return i.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function Z(e){let r=$(e);return!!r&&(0,g.UO)(r)}},665471:(e,r,n)=>{n.d(r,{c6:()=>d,hI:()=>u,Ay:()=>c});var i,a=n(796822);!function(e){e[e.STARTING=0]="STARTING",e[e.FRONTMATTER=1]="FRONTMATTER",e[e.BODY=2]="BODY",e[e.FOOTER=3]="FOOTER"}(i||(i={}));var o=n(320454),s=n(389191),l=n(747863);let c=(0,a.yu)({onError:e=>{(0,s.Rh)("web.cortex.error",{route:e})},buildExtraHeaders:()=>{let e={};return l.nt.aiFeaturesUseBedrockLlama.getValue()&&(e[o.H.INTERNAL_USE_LLM_PROVIDER]="amazon-bedrock"),e}});class d{constructor(e){this.stream=e}async *[Symbol.asyncIterator](){let e=this.stream.getReader();try{for(;;){let r=e.read(),{done:n,value:i}=await r;if(n)break;yield i}}finally{e.releaseLock()}}}class u{constructor(e,r){this.stream=e,this.timeoutMs=r}async *[Symbol.asyncIterator](){let e=this.stream.getReader();try{for(;;){let r=e.read();try{let e=new Promise((e,r)=>{setTimeout(()=>{r(Error("Timeout"))},this.timeoutMs)}),{done:n,value:i}=await Promise.race([r,e]);if(n)break;yield i}catch(e){if(e instanceof Error&&"Timeout"===e.message)break;throw e}}}finally{e.releaseLock()}}}},947934:(e,r,n)=>{n.d(r,{Ay:()=>p,sZ:()=>m,_0:()=>h});var i=n(741789),a=n(766139),o=n(39773),s=n(663689),l=n(969405),c=n(441802),d=n(305719),u=n(369600);function p(){return{orgId:o.zl.get(c._s)||null,teamId:o.zl.get(u.As)||null,fileKey:o.zl.get(u.ze)||null,userId:o.zl.get(d.kS)||null,trackingSessionId:(0,s.f)()}}function m(e){if(e instanceof TypeError&&!navigator.onLine)return l.B.OFFLINE;if(e instanceof a.CortexErrorV2){if(a.ProviderRateLimitExceededError.isInstance(e)||a.CortexRateLimitExceededError.isInstance(e))return l.B.RATE_LIMIT_EXCEEDED;if(a.ClientContentLengthLimitExceededError.isInstance(e)||a.ProviderContentLengthLimitExceededError.isInstance(e))return l.B.CONTENT_LENGTH_LIMIT;if(a.UnsafeOrHarmfulPromptError.isInstance(e)||a.ProviderUnsafeOrHarmfulContentError.isInstance(e))return l.B.UNSAFE_OR_HARMFUL_CONTENT;if(a.NotImplementedError.isInstance(e))return l.B.NOT_IMPLEMENTED;else if(a.OfflineError.isInstance(e))return l.B.OFFLINE;else if(a.MeterExceededError.isInstance(e))return l.B.METER_EXCEEDED;else if(a.PayloadTooLargeError.isInstance(e)||e?.statusCode===413)return l.B.CONTENT_LENGTH_LIMIT}if(e instanceof i.G1)switch(e.type){case"rate_limit_exceeded":return l.B.RATE_LIMIT_EXCEEDED;case"content_length_limit_exceeded":case"payload_too_large":return l.B.CONTENT_LENGTH_LIMIT;case"unsafe_or_harmful_content":return l.B.UNSAFE_OR_HARMFUL_CONTENT;case"offline":return l.B.OFFLINE;case"meter_exceeded":return l.B.METER_EXCEEDED;case"generic":if(e.data&&"status"in e.data&&413===e.data.status)return l.B.CONTENT_LENGTH_LIMIT}return l.B.GENERIC}function h(e){return e instanceof i.G1&&"meter_exceeded"===e.type&&!!e.data.resetsAt}},164936:(e,r,n)=>{n.d(r,{PD:()=>g,wg:()=>y});var i=n(39773),a=n(690391),o=n(369600),s=n(119310),l=n(710665),c=n(944527),d=n(497407),u=n(259974),p=n(842553),m=n(441802),h=n(684525),_=n(670673);let g=(0,p.Z1)(h.Z_,(e,r)=>{let n=r(o.yV);if(null==n||null==e)return!1;let i=e.map(e=>e.team).find(e=>null!=e&&e.id===n.teamId);return null!=i&&c.ng.getProTrialStatus({grace_period_end:i.gracePeriodEnd?i.gracePeriodEnd.toISOString():null,grace_period_type:i.gracePeriodType})===u.a.IN_TRIAL});(0,p.J9)([h.Hh],([e],r)=>{let n=r(o.yV),i=r(m._s)?null:e;return!!n&&!!i&&!n.teamId&&!n.parentOrgId&&n.folderId===i}),(0,s.bt)(({openFile:e})=>{let r=e?.parentOrgId!=null,n=e?.team==null;return r&&n});let f=(0,s.bt)(({progressBarState:e})=>(0,a.T)(e?.mode));(0,i.eU)(e=>new Promise(r=>{e(f)||r(!1)})),(0,_.r1)("figjam_editor_onboarded");let E=(0,p.Z1)(h.Vm,(e,r)=>{let n=r(o.yV);return n?.teamId?e?.find(e=>e.id===n?.teamId):null});(0,p.J9)([m.KI,E],([e,r],n)=>{let i=n(o.yV),a=i?.parentOrgId?e[i.parentOrgId]:null,s=r?{id:r.id,subscription:r.subscription,student_team:!!r.studentTeamAt,grace_period_end:r.gracePeriodEnd?.toDateString()||null}:null;return(0,d.M_)({editorType:i?.editorType??null,org:a,team:s})}),(0,s.bt)(({showEditButton:e})=>e??!1),(0,i.eU)(e=>{let r=e(o.yV);if(!r)return!1;let{team:n}=r;return null!=n&&null==n.orgId&&!(0,l.w5)({subscription:n.subscription,student_team:null!=n.studentTeamAt,grace_period_end:n.gracePeriodEnd?.toISOString()??null})});let y=(0,i.eU)(e=>{let r=e(o.yV);return r?.canEdit??!1});(0,i.eU)(e=>{let r=e(o.yV);return!!r&&r.canView&&!r.canEdit})},441802:(e,r,n)=>{n.d(r,{KI:()=>u,UC:()=>_,ZS:()=>m,_s:()=>p,eS:()=>g,mQ:()=>h,rg:()=>d});var i=n(39773),a=n(119310),o=n(376780),s=n(635547),l=n(496059),c=n(842553);let d=(0,c.Z1)(s.Tej.Query({}),e=>e.currentUser.orgUsers),u=(0,c.Z1)(d,e=>{let r=e?.map(e=>e.org);if(void 0===r)return{};let n={};for(let e of r)null!=e&&(n[e.id]={...e,bigmaEnabled:!!e.bigmaEnabledAt,voiceEnabled:!e.voiceDisabledAt,widgetsWhitelistEnforced:!!e.widgetsWhitelistEnforced});return n}),p=(0,a.bt)(e=>e.currentUserOrgId),m=(0,c.J9)([u],([e],r)=>{let n=r(p);return null!=n?e[n]:null}),h=(0,a.bt)(e=>e.orgById),_=(0,i.Iz)(e=>(0,c.Z1)(s.s5h.Query({orgId:e}),e=>!!e.org?.workspaces?.length&&!!e.org?.bigmaEnabledAt));(0,c.J9)([m,d,l.N],([e,r,n],i)=>{if(!e)return!1;let a=i(h)[e.id];if(!a.bigma_enabled||!a.workspaces_nux_active_at)return!1;let s=r?.find(r=>r.orgId===e.id&&r.userId===n);return!!s&&s.permission!==o._D.GUEST}),(0,c.J9)([s.Tej.Query({}),m],([e,r])=>{let{orgUsers:n}=e.currentUser;if(null!=r){let e=n?.find(e=>e.orgId===r.id);if(e)return"full"===e.designPaidStatus?"design":"full"===e.devModePaidStatus?"dev mode":"none"}return null});let g=(0,c.Z1)(u,e=>!!Object.values(e).find(e=>e.k12GoogleOrg))},897406:(e,r,n)=>{n.d(r,{e:()=>l});var i=n(376780),a=n(710665),o=n(842553),s=n(684525);(0,o.Z1)(s.Vm,e=>(e??[]).some(e=>null!=e&&!(0,a.w5)({subscription:e.subscription,student_team:!!e.studentTeamAt,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toISOString():null})&&!e.orgId&&e.canEdit));let l=(0,o.Z1)(s.Vm,e=>(e??[]).filter(e=>null!=e&&e.subscription===i.Qh.OK&&null==e.gracePeriodEnd&&!e.orgId&&e.canEdit))},684525:(e,r,n)=>{n.d(r,{Fy:()=>_,Hh:()=>g,NT:()=>I,Vm:()=>y,Z_:()=>E,mp:()=>h,t:()=>T,zN:()=>f});var i=n(39773),a=n(994811),o=n(855340),s=n(119310),l=n(635547),c=n(710665),d=n(524106),u=n(229424),p=n(842553),m=n(441802);(0,p.J9)([l.Tej.Query({}),m.ZS],([e,r])=>null!=e.currentUser.id&&r?.canRead?u.qo.ORG:u.qo.PERSONAL);let h=(0,p.Z1)(l.Tej.Query({}),e=>e.currentUser.createdAt),_=(0,p.Z1)(h,e=>e.getTime()<=Date.now()-12096e5),g=(0,p.J9)([m.rg,l.Tej.Query({})],([e,r],n)=>{let i=n(m._s);if(!i)return r.currentUser.draftsFolderId;{let r=e?.find(e=>e.orgId===i);return r?.draftsFolderId||null}});(0,p.Z1)(l.Tej.Query({}),e=>{let r=e.currentUser.email;return(0,a.jm)(r)||!!r?.endsWith("@dev.figma.com")});let f=(0,p.Z1)(l.Tej.Query({}),e=>null!=e.currentUser.studentValidatedAt);(0,p.Z1)(l.UpR.Query({}),e=>e.currentUser.eduPeriodEnd);let E=(0,p.Z1)(l.Tej.Query({}),e=>e.currentUser.teamRoles),y=(0,p.Z1)(E,e=>e?.map(e=>e.team).filter(e=>null!=e)),b=(0,s.bt)(e=>e.isFreeUser),v=(0,p.J9)([m.rg,y],([e,r])=>(!e?.length||!(e.length>0))&&(null==r||!r.some(e=>e.canEdit&&(0,c.w5)({subscription:e.subscription,student_team:!!e.studentTeamAt,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toISOString():null})))),T=(0,p.Z1)(v,(e,r)=>r(b));(0,p.Z1)(m.rg,e=>!!e?.length&&e.length>0),(0,p.Z1)(l.Tej.Query({}),e=>{let r=e.currentUser.email;return null!=r?(0,a.qe)(r):void 0});let I=(0,p.Z1)(l.Tej.Query({}),e=>e.currentUser.profile?.jobTitle);(0,p.Z1)(I,e=>{let r=(0,o.HB)(e);return"designer"!==r&&"other"!==r&&"unknown"!==r}),(0,p.Z1)(l.Tej.Query({}),e=>e.currentUser.profile?.usagePurpose);let S=(0,s.bt)(e=>e.authedProfilesById);(0,i.eU)(e=>Object.values(e(S)).some(e=>!!e.org_id||!!e.team_id)),(0,p.Z1)(l.Tej.Query({}),e=>e.currentUser.email),(0,p.Z1)(l.Tej.Query({}),e=>e.currentUser.emailValidatedAt);let w=(0,s.bt)(e=>e.userAnalyticsData);(0,i.Iz)(e=>(0,i.mg)(w,r=>{if(null==r)return;let n=r[e];return d.bW.includes(e)&&n?new Date(n):n})),(0,p.J9)([l.Tej.Query({}),m.ZS],([e,r])=>{let n="loaded"===e.currentUser.externalRestrictedOrgId.status?e.currentUser.externalRestrictedOrgId.data:null;return!!(e.currentUser&&n&&r?.id!==n)})},670673:(e,r,n)=>{n.d(r,{Fu:()=>c,qG:()=>l,r1:()=>u});var i=n(39773),a=n(635547),o=n(236864),s=n(842553);let l=(0,s.Z1)(a.Tej.Query({}),e=>e.currentUser.userFlags.reduce((e,r)=>({...e,[r.name]:r}),{})),c=(0,i.Iz)(e=>(0,s.Z1)(l,r=>r[e])),d=e=>e.length>0?new Date(Math.max(...e.map(Number))):void 0;(0,s.Z1)(l,e=>d(Array.from(o.V5).map(r=>e[r]?.updatedAt).filter(e=>null!=e)));let u=(0,i.Iz)(e=>(0,s.Z1)(l,r=>null!=r[e]));u("file_browser_onboarded"),c("not_gen_0")},270070:(e,r,n)=>{function i(e,r){return!!e[r]}function a(e){return document.querySelectorAll(`[data-onboarding-key=${JSON.stringify(e)}]`).length>0}n.d(r,{KI:()=>a,mW:()=>i}),n(376780),n(710665),n(944527),n(497407),n(259974),n(236864),n(229424)},382393:(e,r,n)=>{n.d(r,{X:()=>i});let i="curator_global_request_close";var a=(e=>(e.FigjamUniversalInsertsMenuOpen="figjam_universal_inserts_menu_open",e.FigjamDLTSubmenuOpen="figjam_DLT_submenu_open",e))(a||{})},335085:(e,r,n)=>{n.d(r,{RI:()=>p});var i=n(157907),a=n(39773),o=n(95650),s=n(924320);n(275738);var l=n(231687),c=n(151144),d=n(569570);let u=new Set([c.koo.id,c.dvJ.id,c.L6E.id,c.Nh9.id]),p=new d.m("LimitDevModeUpsellFrequency","Prevent showing more than on dev mode upsell in a 24 hour period",(e,r)=>{if(a.zl.get(l.FP))return!1;if(!(0,i.k)().limit_dev_mode_upsell_frequency)return!0;let n=(0,s.y)(r.id);return!u.has(n)||!e.lastSeenDevModeUpsell||!(e.lastSeenDevModeUpsell>(0,o.A)().subtract(1,"day").toDate())})},548703:(e,r,n)=>{n.d(r,{Op:()=>a,gV:()=>o,nr:()=>s});var i=n(848924);function a(e){let r=new Map,n=new Map;for(let{id:i,...a}of e.states){if(r.has(i))throw Error(`Duplicate state ID ${i.toString()} found when building state machine`);if(r.set(i,a),null==a.transitions)continue;let e=new Map;for(let{event:r,...o}of(n.set(i,e),a.transitions)){let n=e.get(r);null==n&&(n=[],e.set(r,n)),n?.push(o)}}return{config:e,isComplete(e){let n=r.get(e);return n?.terminal??!1},isInitial:r=>r===e.initial,start:()=>e.initial,transition(e,r){let i=n.get(e)?.get(r.id);if(null==i)return null;for(let n of i)if(null==n.condition||n.condition({from:e,to:n.target,event:r}))return n.target;return null}}}function o(e){let r=new Set;for(let n of e.config.states)if(null!=n.transitions)for(let e of n.transitions)e.event===i.b&&e.meta?.userEvents!=null&&e.meta.userEvents.forEach(e=>r.add(e));return r}function s(e,r,n){var a,o;let s=new Set("string"==typeof e?[e]:e),l={userEvents:[...s]};return a=i.b,o={condition:e=>s.has(e.event.type)&&(n?.condition?.(e)??!0),meta:l},{event:a,target:r,condition:o?.condition,meta:o?.meta}}},210089:(e,r,n)=>{n.d(r,{zl:()=>o});var i=n(848318),a=n(39773);function o({_atom:e,machine:r}){let[{currentState:n,lastEvent:o,previousState:s},l]=(0,a.fp)(e),c=r.isComplete(n);return(0,i.useMemo)(()=>({completed:c,currentState:n,lastEvent:o,previousState:s,reset:l}),[c,n,o,s,l])}n(963376)},457209:(e,r,n)=>{n.d(r,{Op:()=>i.Op,nr:()=>i.nr,rn:()=>a.rn});var i=n(548703),a=n(2438);n(210089)},254310:(e,r,n)=>{n.d(r,{A5:()=>_.A,HZ:()=>g,MF:()=>S,X7:()=>f,jV:()=>k,u8:()=>T});var i=n(848318),a=n(716544),o=n(445777),s=n(741419),l=n(157907),c=n(529640),d=n.n(c),u=n(579020),p=n(575058),m=n(921494),h=n(389191),_=n(896753);function g({oldValue:e,oldLatencyMs:r,newValue:n,newLatencyMs:i,contextArgs:a,label:o,debug:s=!1,enableFullRead:l=!1,comparator:c=L(),maxReports:d}){return D()&&!b(o,d)&&v({label:o,discrepancies:c(e,n),oldLatencyMs:r,newLatencyMs:i,contextArgs:a,debug:s}),l?n:e}function f({comparisonConfig:e,...r}){let n=O({...N,...e});return g({...r,comparator:n})}function E(e){return JSON.stringify(e,(e,r)=>void 0===r?"undefined":r)}let y=new Map;function b(e,r){if(void 0===r)return!1;let n=y.get(e)??0;return n>=r||(y.set(e,n+1),!1)}function v({label:e,discrepancies:r,oldLatencyMs:n,newLatencyMs:i,contextArgs:a,debug:o}){o&&(r.length>0?console.log(`[Shadow read] '${e}' has discrepancies \u26A0\uFE0F`,r):console.log(`[Shadow read] '${e}' has no discrepancies \u2705`));let s={label:e,contextArgs:E(a??{})};if(r.length>0){let e=r.reduce((e,r)=>"high"===r.severity?"high":e,"low");u.az.trackDefinedEvent("data_migrations.shadow_read_discrepancy",{...s,discrepancy_maxSeverity:e})}else u.az.trackDefinedEvent("data_migrations.shadow_read_match",s);r.length>0&&(r.sort((e,r)=>e.severity===r.severity?0:"high"===e.severity?-1:1),r.slice(0,10).forEach(e=>{u.az.trackDefinedEvent("data_migrations.shadow_read_discrepancy_details",{...s,discrepancy_path:e.path.join("."),discrepancy_oldValue:E(e.oldValue),discrepancy_newValue:E(e.newValue),discrepancy_severity:e.severity})})),void 0!==n&&u.az.trackDefinedEvent("data_migrations.shadow_read_latency_old_value",{label:e,latency_ms:n,contextArgs:E(a??{})}),void 0!==i&&u.az.trackDefinedEvent("data_migrations.shadow_read_latency_new_value",{label:e,latency_ms:i,contextArgs:E(a??{})})}function T({oldValue:e,oldValueReady:r=!0,newValue:n,newValueReady:a=!0,label:o,contextArgs:s,withDefaultContextArgs:l=!0,enableFullRead:c=!1,debug:d=!1,trackLatency:u=!0,timeoutMs:p,comparator:m=L(),maxReports:h}){let _=A(l,s),[f]=(0,i.useState)(()=>m),E=(0,i.useRef)(!1);if((0,i.useRef)(u).current!==u)throw Error("useShadowRead: trackLatency cannot change during the lifetime of the hook!");return u&&(w({isReady:r,label:o,variant:"old",contextArgs:s,withDefaultContextArgs:l,timeoutMs:p,debug:d}),w({isReady:a,label:o,variant:"new",contextArgs:s,withDefaultContextArgs:l,timeoutMs:p,debug:d})),(0,i.useEffect)(()=>{!E.current&&a&&r&&(g({oldValue:e,newValue:n,label:o,contextArgs:_,comparator:f,debug:d,maxReports:h}),E.current=!0)},[e,n,o,_,f,d,h,a,r]),c?n:e}function I(e,r){let{errors:n,...i}=e,{errors:o,...s}=r;return(0,a.bN)(n,o)&&(0,a.bN)(i,s)}function S({oldValue:e,newValue:r,comparisonConfig:n,...i}){let a=(0,p.DD)(()=>e,[e],I),o=(0,p.DD)(()=>r,[r],I),s="loaded"===a.status,l="loaded"===o.status,c=O(n);return T({oldValue:a.data,oldValueReady:s,newValue:o.data,newValueReady:l,comparator:c,...i}),i.enableFullRead?o:a}function w({isReady:e,label:r,variant:n,contextArgs:i,withDefaultContextArgs:a=!0,timeoutMs:o=1e4,debug:s=!1}){let l=A(a,i),c="old"===n?"data_migrations.shadow_read_latency_old_value":"data_migrations.shadow_read_latency_new_value",d="old"===n?"data_migrations.shadow_read_latency_old_value_timeout":"data_migrations.shadow_read_latency_new_value_timeout";(0,h.I)(e,(e,i,a)=>{if(!D())return;let o=i||a;s&&console.log(`[Shadow read] [variant: ${n.toUpperCase()}] '${r}' took ${e}ms to be ready \u23F1 (was idle? ${o})`),u.az.trackDefinedEvent(c,{label:r,latency_ms:e,idled:o,contextArgs:E(l)})},{onTimeout:(e,n)=>{if(!D())return;let i=e||n;s&&console.log(`[Shadow read] '${r}' has timed out after ${o}ms \u23F1 (was idle? ${i})`),u.az.trackDefinedEvent(d,{label:r,idled:i,contextArgs:E(l)})},timeoutMs:o})}function A(e,r){if((0,i.useRef)(e).current!==e)throw Error("useMemoizedContextArgs: withDefaultContextArgs cannot change during the lifetime of the hook!");let n=e?(0,m.R)(e=>({currentTeamId:e.currentTeamId,currentOrgId:e.currentUserOrgId,currentUserId:e.user?.id??null,openFileKey:e.openFile?.key??null})):null;return(0,p.k9)(()=>({...n,...r}),[n,r])}function C(e,r){return"function"==typeof e?e(r):e}let N={ignore:!1,strictRecords:!0,strictLists:!0};function L(e){let r={ignore:!1};return(n,i)=>(function e(r,n,i,a){if(C(a.ignore,i))return[];if(Array.isArray(r)!==Array.isArray(n)||P(r)!==P(n))return[{path:i,oldValue:r,newValue:n,severity:"high"}];let o=[];if(Array.isArray(r)&&Array.isArray(n)){let s=!1;if(r.length!==n.length&&(s=!0),s)return o.push({path:i,severity:"high",oldValue:r,newValue:n}),o;for(let s=0;s<r.length;s++)o.push(...e(r[s],n[s],[...i,String(s)],a))}else if(P(r)&&P(n))for(let s of function(e,r){let n={};for(let r in e)n[r]=!0;for(let e in r)n[e]=!0;return Object.keys(n)}(r,n)){let l=i.concat(s);o.push(...e(r[s],n[s],l,a))}else o.push(...R(r,n,i));return o})(n,i,[],{...r,...e})}function O(e){return(r,n)=>(function e(r,n,i,a){if(C(a.ignore,i))return[];let o=C(a.strictLists,i);if(Array.isArray(r)!==Array.isArray(n)||P(r)!==P(n))return[{path:i,oldValue:r,newValue:n,severity:"high"}];let s=[];if(Array.isArray(r)&&Array.isArray(n)){let l=(e,r=0)=>{if(!P(e))return null;if("id"in e)return["id"];if("key"in e)return["key"];if(0===r)for(let n in e){let i=l(e[n],r+1);if(i)return[n,...i]}return null},c=e=>{let r=new Map;for(let n of e){let e=l(n);e&&r.set(d()(n,e),n)}return r},u=c(r),p=c(n),m=!1;for(let[l,c]of(o&&u.size!==p.size&&(m=!0),0!==u.size||0!==p.size||0===r.length&&0===n.length||s.push({path:i,oldValue:r,newValue:n,severity:"high"}),u)){if(!p.has(l)){o&&(m=!0);continue}s.push(...e(c,p.get(l),[...i,l],a))}m&&s.push({path:i,severity:"high",oldValue:Array.from(u.keys()),newValue:Array.from(p.keys())})}else if(P(r)&&P(n))for(let o in r){let l=[...i,o],c=C(a.strictRecords,l);(o in n||c)&&s.push(...e(r[o],n[o],l,a))}else s.push(...R(r,n,i));return s})(r,n,[],{...N,...e})}function R(e,r,n){if(e===r||"function"==typeof e||"function"==typeof r)return[];let i=[null,void 0,!1];return i.includes(e)&&i.includes(r)&&e!==r?[{path:n,oldValue:e,newValue:r,severity:"low"}]:typeof e!=typeof r?[{path:n,oldValue:e,newValue:r,severity:"high"}]:e instanceof Date&&r instanceof Date?Math.abs(e.getTime()-r.getTime())>=1e3?[{path:n,oldValue:e.toISOString(),newValue:r.toISOString(),severity:"high"}]:[]:e!==r?[{path:n,oldValue:e,newValue:r,severity:"high"}]:[]}function P(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e&&!(e instanceof Date)}function D(){return(0,l.k)().use_shadow_read_reporting}class M{reportDiscrepancies(e,r,n){D()&&(b(e,n.maxReports??void 0)||v({label:(0,_.R)(e),discrepancies:r.map(({severity:e,...r})=>({...r,severity:function(e){switch(e){case s.D2E.HIGH:return"high";case s.D2E.LOW:return"low";default:return(0,o.j)(e),"low"}}(e)})),oldLatencyMs:n.oldLatencyMs??void 0,newLatencyMs:n.newLatencyMs??void 0,contextArgs:n.contextArgs??void 0,debug:n.debug}))}compareAndReportDiscrepancies(e,r,n,i){if(!D()||b(e,i.maxReports??void 0))return;let a=L()(r,n);v({label:(0,_.R)(e),discrepancies:a,oldLatencyMs:i.oldLatencyMs??void 0,newLatencyMs:i.newLatencyMs??void 0,contextArgs:i.contextArgs??void 0,debug:i.debug})}}function k(){new M}},320161:(e,r,n)=>{n.d(r,{A3:()=>b,IK:()=>y});var i=n(992277),a=n(39773),o=n(141039),s=n(44509),l=n(858423);n(831932);var c=n(502255),d=n(790355),u=n(38049),p=n(761669),m=n(10347),h=n(687234);let _=new Map,g=new h.vY;o.S8?.setListener({name:"notificationClicked",listener(e){_.get(e)?.(),_.delete(e)}});let f=null;function E(e,r){if(e)f?.(),f=null;else if(r)f=(0,h.cz)(r);else throw Error("Could not subscribe to PersistentUserNotificationBellData as BellFeed LiveGraphClient was null.")}function y(e){let r=(0,l.WB)();o.S8?.setListener({name:"updateRealtimeTokens",listener(n){g.updateSubscriptions(e,n,r)}}),o.S8?.setListener({name:"updateIsLivegraphClientEnabled",listener(e){e!==a.zl.get(u.d)&&(E(e,r),a.zl.set(u.d,e))}});let n=(0,o.O_)(9);if(n){let e=n.getIsLivegraphClientEnabled();a.zl.set(u.d,e),E(e,r)}if(o.S8?.setListener({name:"pushNotificationReceived",listener(r,n,i){!function(e,r,n,i){var a;a=()=>{p.sr.recordNotificationClicked({id:r,currentView:i,medium:"desktoppush"}).then(r=>{if(o.S8){let r=(0,m.sL)(n||"")||void 0;e(d.$T({view:"feed",quickReplyInfo:r})),o.S8.toggleTrayWindow(!0)}else n&&s.Ay.redirect(n)})},_.set(r,a),setTimeout(()=>_.delete(r),6048e5)}(e.dispatch,r.id,i,n)}}),o.S8){let n=o.S8.getRealtimeTokens();if(null==n&&((0,c.$D)(i.e.DESKTOP,Error(`initDesktopBellFeedBindings: got ${n} from getRealtimeTokens() on first try`),{level:"warning"}),n=o.S8.getRealtimeTokens()),null==n){(0,c.$D)(i.e.DESKTOP,Error(`initDesktopBellFeedBindings: got ${n} from getRealtimeTokens() on second try`));return}g.updateSubscriptions(e,n,r)}}function b(e){g.handleFileMessage(e)}},559334:(e,r,n)=>{n.d(r,{Ck:()=>s,Fl:()=>u,Ho:()=>l,fV:()=>c});var i=n(848318),a=n(39773),o=n(247391);function s(e,r){let n=d(r);return!!e&&n.has(e)}function l(e){let r=(0,a.md)(o.S0);return!!e&&r.has(e)}function c(e,r){let n=s(e,r),i=l(e);return n||i}function d(e){return(0,a.md)(e?o.Gg:o.bJ)}function u(e){let r=d(e),n=(0,a.md)(o.S0);return i.useMemo(()=>({workspaceApprovedLibraryKeys:r,orgApprovedLibraryKeys:n}),[r,n])}},10415:(e,r,n)=>{n.d(r,{FX:()=>T,KP:()=>b,L1:()=>v});var i=n(848318),a=n(329994),o=n(417193),s=n(39773),l=n(536384),c=n.n(l),d=n(566699),u=n(17755),p=n(572699),m=n(668249),h=n(559334),_=n(668515),g=n(247391),f=n(260649),E=n(74416);function y({isForSelect:e,orgNameForTooltip:r,workspaceNameForTooltip:n,tooltipDelay:s=250,tooltipLocation:l="above",size:u="small",variant:p}){let m=r||n?(0,_.wZ)({orgName:r,workspaceName:n,tooltipLocation:l,tooltipDelay:s}):{};return i.createElement(d.U,{className:c()("secondary"===p?f.Wo:f.Kk,e?f.cH:void 0),svg:E.A,...m},i.createElement("div",{className:c()("secondary"===p?f.Wo:f.Kk,e?f.cH:void 0),...m},"large"===u?i.createElement(a.U,null):i.createElement(o.x,null)))}function b({libraryKey:e,...r}){let n=(0,s.md)(g.d$),a=(0,p.dh)({migrationGroup:m.L.GROUP_8,component:"ApprovedLibraryIconForFullScreen"}),o=(0,h.Ho)(e);return i.createElement(y,{...r,orgNameForTooltip:o?a:void 0,workspaceNameForTooltip:n?.name})}function v(e){let r=(0,s.md)(g.G7),n=(0,p.dh)({migrationGroup:m.L.GROUP_8,component:"ApprovedLibraryIconForUserDefaultSubscriptions"}),a=(0,h.Ho)(e.libraryKey);return i.createElement(y,{...e,orgNameForTooltip:a?n:void 0,workspaceNameForTooltip:r?.name})}function T(){return i.createElement("div",{className:u.s.flex.alignCenter.justifyCenter.flexShrink0.ml4.mr4.$},i.createElement(y,{isForSelect:!0}))}},668515:(e,r,n)=>{n.d(r,{NX:()=>y,Qy:()=>_,k9:()=>h,sF:()=>E,wZ:()=>f}),n(758260);var i=n(573446),a=n(39773),o=n(818754),s=n(20191),l=n(870769),c=n(503024),d=n(86965),u=n(247391),p=n(27776);let m=(0,o.jz)(p.UEm);function h({libraries:e,approvedLibraryKeysByResourceType:r,currentTeamId:n=null,shouldSortByTeam:i=!1}){e.sort((e,a)=>_({libraryA:e,libraryB:a,approvedLibraryKeysByResourceType:r,currentTeamId:n,shouldSortByTeam:i}))}function _({libraryA:e,libraryB:r,approvedLibraryKeysByResourceType:n,currentTeamId:a=null,shouldSortByTeam:o=!1}){let{workspaceApprovedLibraryKeys:c,orgApprovedLibraryKeys:d}=n;if(o&&"file"in e&&"file"in r&&e.team_id!==r.team_id)return(0,l.r9)(e,r,a);let u=(0,i.l)(e.library_key??""),p=(0,i.l)(r.library_key??""),m=d.has(u)?1:0,h=d.has(p)?1:0;if(m!==h)return h-m;let _=c.has(u)?1:0,f=c.has(p)?1:0;return _!==f?f-_:s.f.LEXICOGRAPHICALLY(g(e),g(r))}function g(e){return"name"in e?e.name:e.library_file_name}function f({orgName:e,workspaceName:r,tooltipLocation:n,tooltipDelay:i}){let a=e??r;if(!a)return{};let o=function(e){try{if(e){let r=function(e){let r=document.createElement("span");r.textContent=e,r.style.visibility="hidden",r.style.fontWeight="bold",r.style.display="inline-block",document.body.appendChild(r);let n=r.offsetWidth;return document.body.removeChild(r),n}(e);if(r){if(r>m)return m;if(r>m/2)return Math.max(116,r);return 116}}}catch(e){console.error(e)}return m}(a);return{"data-tooltip-type":c.Ib.SPECIAL,"data-tooltip":d.A,..."below"===n?{"data-tooltip-show-below":!0}:{"data-tooltip-show-above":!0},...i?{"data-tooltip-timeout-delay":i}:{"data-tooltip-show-immediately":!0},"data-tooltip-max-width":o,"data-tooltip-workspace-name":r,"data-tooltip-org-name":e}}function E(e){if(!e)return!1;let r=a.zl.get(u.bJ).has(e),n=a.zl.get(u.S0).has(e);return r||n}function y({workspaceApprovedLibraryKeys:e,orgApprovedLibraryKeys:r}){return e.size>0||r.size>0}},906531:(e,r,n)=>{n.d(r,{V:()=>o});var i=n(870769),a=n(931516);function o(e){return(0,a.Do)(e)?"LOCAL"===e.subscriptionStatus?e.keyForPublish:e.key:e.isLocal?(0,i.Gj)(e):(0,i.Av)(e)??(0,i.Gj)(e)}},842915:(e,r,n)=>{n.d(r,{e:()=>d});var i=n(573446),a=n(39773),o=n(878028),s=n(369600),l=n(205462);let c=(0,a.Iz)(e=>(0,l.P)(`recently-used-${e}s`,"key",o.z.object({type:o.z.literal(e),key:o.z.string(),libraryKey:o.z.string()}),{transform:(e,r)=>{let n=r(s.yV);return{type:e.type,key:"LOCAL"===e.subscriptionStatus?e.keyForPublish:e.key,libraryKey:"LOCAL"===e.subscriptionStatus?(0,i.l)(n?.libraryKey??""):e.sourceLibraryKey}}}));function d(e){a.zl.set(c(e.type),e)}},769615:(e,r,n)=>{n.d(r,{b:()=>l,c:()=>c});var i=n(430285),a=n(493554),o=n(273121),s=n(635547);function l({libraryKey:e,disabled:r,nodeId:n,mainComponent:o,stateGroupId:l,isDevHandoff:d,isDevModeVarsTable:u,devModeVarsTableSelection:p,isDevModeOverview:m,devModeFocusId:h}){let _=(0,a.Rs)((0,s.iAs)({libraryKey:e??""}),{enabled:!r&&!!e});return i.Qw.useTransform(_,e=>c({data:e,nodeId:n,stateGroupId:l,isDevHandoff:d,isDevModeOverview:m,isDevModeVarsTable:u,devModeVarsTableSelection:p,devModeFocusId:h,mainComponent:o}))}function c({data:e,nodeId:r,stateGroupId:n,isDevHandoff:i,isDevModeVarsTable:a,devModeVarsTableSelection:s,isDevModeOverview:l,devModeFocusId:c,mainComponent:d}){let u=e.libraryKeyToFile;return u?u.fileCanAccess?{type:"team",link:(0,o.jN)({file:{key:u.fileCanAccess.key},nodeId:r,mainComponent:d,stateGroupId:n,isDevHandoff:i,isDevModeOverview:l,isDevModeVarsTable:a,devModeVarsTableSelection:s,devModeFocusId:c})}:u.hubFile?{type:"community",link:(0,o.X$)(u.hubFile.id)}:void 0:void 0}},208401:(e,r,n)=>{n.d(r,{R8:()=>l});var i=n(848318),a=n(493554),o=n(635547),s=n(931516);function l({assetKey:e,type:r}){let n=function({assetKey:e,type:r}){let n=(0,a.Rs)(o.ftA,{key:e??""},{enabled:r===s.PW.COMPONENT&&!!e}),l=(0,a.Rs)(o.iL6,{key:e??""},{enabled:r===s.PW.STATE_GROUP&&!!e}),c=(0,a.Rs)(o.bUF,{key:e??""},{enabled:r===s.PW.STYLE&&!!e}),d=(0,a.Rs)(o.EW,{key:e??""},{enabled:r===s.PW.VARIABLE_SET&&!!e}),u=i.useMemo(()=>r!==s.PW.COMPONENT?null:n,[n,r]),p=i.useMemo(()=>r!==s.PW.STATE_GROUP?null:l,[l,r]),m=i.useMemo(()=>r!==s.PW.STYLE?null:c,[c,r]),h=i.useMemo(()=>r!==s.PW.VARIABLE_SET?null:d,[d,r]);return i.useMemo(()=>null!=u?"loaded"!==u.status?u:{status:u.status,data:{user:u.data?.component?.user,communityProfile:u.data?.component?.hubFile?.profile},errors:u.errors}:null!=p?"loaded"!==p.status?p:{status:p.status,data:{user:p.data?.stateGroup?.user,communityProfile:p.data?.stateGroup?.hubFile?.profile},errors:p.errors}:null!=m?"loaded"!==m.status?m:{status:m.status,data:{user:m.data?.style?.user,communityProfile:m.data?.style?.hubFile?.profile},errors:m.errors}:null!=h?"loaded"!==h.status?h:{status:h.status,data:{user:h.data?.variableCollection?.user,communityProfile:h.data?.variableCollection?.hubFile?.profile},errors:h.errors}:{status:"disabled",data:null,errors:null},[u,p,m,h])}({assetKey:e,type:r});return i.useMemo(()=>{if("loaded"!==n.status)return n;let e=n.data.communityProfile;return null!=e?{status:"loaded",data:{type:"community",communityProfile:e},errors:n.errors}:null!=n.data.user?{status:"loaded",data:{type:"team",user:n.data.user},errors:n.errors}:{status:"loaded",data:null,errors:n.errors}},[n])}},45465:(e,r,n)=>{n.d(r,{P:()=>g});var i=n(848318),a=n(536384),o=n.n(a),s=n(161452),l=n(369600),c=n(572699),d=n(668249),u=n(730505),p=n(559334),m=n(10415),h=n(544339),_=n(678287);function g({libraryKey:e,showPresetTooltip:r,tooltipDelay:n,tooltipLocation:a,compact:g,colorPrimaryOnHover:f}){let E=(0,c.wb)({migrationGroup:d.L.GROUP_5,component:"LibraryBadge"}),y=(0,l._G)(),b=(0,p.fV)(e),v=(0,h.fd)(e),T=(0,u.H)(e),I=o()(_.iE,{[_.oE]:g,[_.FT]:f});return E&&e!==y&&b?i.createElement("div",{className:I},i.createElement(m.KP,{libraryKey:e,tooltipDelay:n,tooltipLocation:a})):e!==y&&(v||T)?i.createElement("div",{className:I},i.createElement(s.E,{showTooltip:r,libraryKey:e,tooltipDelay:n,tooltipLocation:a})):null}},345146:(e,r,n)=>{n.d(r,{Nz:()=>s,o:()=>l}),n(425642);var i=n(931516),a=n(544339);let o=/^Examples *\//;function s(e,{isPreset:r}){return!!r&&o.test(e.name)}function l(e,r){if((0,i.Do)(e)||!(e.type===i.PW.COMPONENT||e.type===i.PW.STATE_GROUP))return!1;let n=(0,a.lR)(e,r);return s(e,{isPreset:n})}},458151:(e,r,n)=>{n.d(r,{M:()=>o});var i=n(157907),a=n(376780);function o(){return(0,i.k)().dse_preset_group_internal?a.wl.INTERNAL:a.wl.DEFAULT}},544339:(e,r,n)=>{n.d(r,{Ag:()=>I,B8:()=>f,HA:()=>_,Os:()=>R,fd:()=>g,fn:()=>b,ku:()=>P,lR:()=>E,nT:()=>O,o3:()=>T,p9:()=>L,qA:()=>v,xm:()=>y});var i=n(848318),a=n(39773),o=n(351766),s=n(579020),l=n(695635),c=n(579463),d=n(449470),u=n(635547),p=n(997894),m=n(853833),h=n(730505);function _(e,r){if("loaded"===e.status){let n=e.data.libraryPresetSubscriptionsV2?.find(e=>o.oA(e.libraryKey)===r);if(n)return n.partner_type??void 0}}function g(e){let r=(0,a.md)(m.TG);return!!e&&r.has(e)}function f(){return(0,i.useCallback)(e=>{let r=a.zl.get(m.TG);return!!e&&r.has(e)},[])}function E(e,r){return r.has(e.library_key)}function y(){let e=(0,a.md)(m.TG);return(0,i.useCallback)(r=>E(r,e),[e])}p.M4.Query({fetch:async e=>e?(await (0,c.w0)("ui_kits_feedback_urls")).get(e,""):""});let b=(0,a.eU)(null),v=(0,a.eU)({value:(0,d.N)(),updateSource:"page_load"});function T(e){let r=a.zl.get(m.TG);return!!e&&r.has(e)}function I(e){if(!e)return!1;let r=a.zl.get(h.QN),n=a.zl.get(h.r9);return r.includes(e)||n.includes(e)}let S={VariableByKey:null,VariableCollectionByKey:null,StyleByKey:null,CommunityLibraryComponentsAndStateGroups:null},w=[u.Lom,u.bsh,u.yFE,u.vsj],A=e=>w.some(r=>r._name===e),C=e=>A(e)?e:void 0,N=e=>p.M4.Query({fetch:async r=>{let n=(0,l.S8)(e,r.arguments),i=C(e._name);if(i){let n=S[i];(null===n||r.nonce.value>n)&&(s.az.trackDefinedEvent("preset_libraries.static_update_fetch",{viewName:C(e._name),batchSize:r.arguments.length,updateSource:r.nonce.updateSource}),S[i]=r.nonce.value)}return await n}}),L=N(u.Lom),O=N(u.bsh);N(u.yFE);let R=N(u.vsj);function P(e,r,n){let i=n(b),a=n(v),o=n(e({arguments:r,nonce:a}));return"loading"===o.status&&null!==i&&(o=n(e({arguments:r,nonce:i}))),o}},530906:(e,r,n)=>{n.d(r,{Ew:()=>g,GZ:()=>f,Gq:()=>y,Hu:()=>E});var i=n(848318),a=n(716544),o=n(445777),s=n(481540),l=n(369600),c=n(114912),d=n(482821),u=n(264917),p=n(931516),m=n(517162),h=n(56325),_=n(906784);function g({assetKey:e,assetLibraryKey:r,assetType:n,isList:u,sectionNameforTracking:g,sectionPosition:b,sourceForTracking:v,sectionDepth:T,aiScore:I,lexicalScore:S,isExample:w,partnerType:A}){let C=(0,l.q5)(),{searchSessionId:N}=y(),L=(0,a.d4)(e=>e.search.queryId),O=i.useContext(m.U),R=O?.assetTypeDropdownSelection,{query:P}=(0,c.I)(d.Cn.AssetsPanel),D=E(r),M=f(r,D),k=(0,h.M)(),F=function(){let[e]=(0,_.MA)();return e}(),x=k?F:u?"LIST":"GRID",U=(0,h.k)();return i.useMemo(()=>({assetKey:e,assetLibraryKey:r,assetTypeDropdownSelection:R,libraryType:D,viewMode:x,searchQuery:P,searchSessionId:N??void 0,source:v,sourceSection:g,type:function(e){if("embed"===e)return"embed";switch(e){case p.PW.COMPONENT:return"component";case p.PW.STATE_GROUP:return"state_group";case p.PW.MODULE:return"module";case p.PW.RESPONSIVE_SET:return"responsive_set";case p.PW.CODE_COMPONENT:return"code_component";case p.PW.CODE_LIBRARY:case p.PW.CODE_FILE:case p.PW.STYLE:case p.PW.VARIABLE:case p.PW.VARIABLE_OVERRIDE:case p.PW.VARIABLE_SET:case p.PW.CONSTRAINED_TEMPLATE:case p.PW.MANAGED_STRING:return;default:(0,o.xb)(e,"Can't get asset type for logging")}}(n),sectionPosition:b,subscriptionLevel:M,sectionDepth:T,assetsPanelVersion:U,fileKey:C?.key,fileTeamId:C?.teamId??void 0,fileOrgId:C?.parentOrgId??void 0,scoreAi:I,scoreLexical:S,isExample:w,partnerType:A,productType:(0,s.pi)({editorType:C?.editorType}),queryId:L??void 0}),[e,r,R,D,x,P,N,v,g,n,b,M,T,U,C?.key,C?.teamId,C?.parentOrgId,C?.editorType,I,S,w,A,L])}function f(e,r){let n=(0,u.Ly)();return i.useMemo(()=>n.file?.has(e)?"file":n.user?.has(e)?"user":n.team?.has(e)?"team":n.org?.has(e)?"org":"SUBSCRIBED"===r?"other":"",[e,n,r])}function E(e){let r=(0,l._G)(),n=(0,u.He)();return r===e?"LOCAL":n.has(e)?"SUBSCRIBED":"UNSUBSCRIBED"}function y(){let e=(0,a.d4)(e=>e.library.assetsPanelSearch.query),r=(0,a.d4)(r=>e?r.search.lastLoadedQuery?.sessionId??r.search.sessionId:null);return{query:e,searchSessionId:r}}},754823:(e,r,n)=>{n.d(r,{Ci:()=>o,WJ:()=>i,vO:()=>s,yc:()=>a}),n(541525);var i=(e=>(e.PASTE="PASTE",e.MODAL="MODAL",e.PLUGIN="PLUGIN",e))(i||{}),a=(e=>(e.ATTEMPT="figjam_link_metadata_attempt",e.ERROR="figjam_link_metadata_error",e.SUCCESS="figjam_link_metadata_success",e.EMBED_CLICK="figjam_link_embed_click",e.CONVERT_TO_TEXT="figjam_link_metadata_convert_to_text",e.OPEN_PREVIEW="figjam_link_preview_open",e.EMBED_EXPAND="figjam_link_embed_expand",e.COPY_LINK="figjam_link_metadata_copy_url",e.SWITCH_ORIENTATION_VERTICAL="figjam_link_preview_orientation_vertical",e.SWITCH_ORIENTATION_HORIZONTAL="figjam_link_preview_orientation_horizontal",e.EMBED_DEACTIVATE="figjam_embed_deactivate",e))(a||{}),o=(e=>(e.EMBED="embed",e.LINK_PREVIEW="preview",e))(o||{});function s(e){try{return new URL(e).hostname}catch(e){return"Could not parse"}}},705724:(e,r,n)=>{n.d(r,{BF:()=>h,CR:()=>p,RW:()=>_,XL:()=>m,kA:()=>u});var i=n(351766),a=n(493554),o=n(195507),s=n(886423),l=n(635547),c=n(369600);function d(e,r,n){let a=[],o=[];for(let r of e){var s;if(!r.plugin)continue;if("status"in r.plugin){if(r.plugin.status!==i.tT.Loaded)continue;s=r.plugin.data}else s=r.plugin;if(!s)continue;let e="Workspace"===r.allowlistGroupType,l=r.allowlistedWorkspace;if(e&&!l||e&&!n)continue;let c=l?.id;n&&c&&c!==n||(s.isWidget?o.push(s.id):a.push(s.id))}return"plugin"===r?a:o}function u(e,r,n=!0){let i=_(),o=(0,a.Rs)(l.M9I,{orgId:e},{enabled:n}),s=o.data?.org;return"loading"!==o.status&&i.loaded?"errors"!==o.status&&s?{loaded:!0,data:d(s.allowlistedPlugins,r,i.data?.workspaceId)}:{loaded:!0,data:[]}:{loaded:!1}}function p(e,r=!0){let n=(0,s.c)(r);if(!n.loaded)return{loaded:!1};let i=n.data;return{loaded:!0,data:d(i?.allowlistedExtensions??[],e,i?.workspaceId??void 0)}}function m({workspace:e,hasPendingRequest:r,extension:n}){return!!(e.publicPluginsOrWidgetDisabled&&!r&&e.extensionRequestsAllowed&&!n?.roles.org)}function h({org:e,extensionVersion:r,isWidget:n,allowlistedExtensions:i}){return!!e&&!!r&&!!(function({org:e,isWidget:r}){if(!e)return!1;let n=r?e.widgets_whitelist_enforced:e.plugins_whitelist_enforced,i=r?e.widget_requests_allowed:e.plugin_requests_allowed;return n&&i}({org:e,isWidget:n})&&!r.is_private&&!i[r.plugin_id])}function _(){let e=(0,c.q5)(),r=!!e,n=(0,a.Rs)(l.iJD,{fileKey:e?.key??""},{enabled:r});return r?"loaded"!==n.status?{loaded:!1}:{loaded:!0,data:{workspaceId:n.data?.file?.workspaceId||void 0,workspaceName:o.oA(n.data?.file?.computedWorkspace)?.workspace?.name,fileKey:e.key,fileName:e.name}}:{loaded:!0,data:void 0}}},409851:(e,r,n)=>{n.d(r,{D6:()=>l,T0:()=>d,TF:()=>h,UL:()=>v,ds:()=>_,eU:()=>u,gV:()=>f,kK:()=>c,sb:()=>b,t$:()=>y,tW:()=>E});var i=n(445777),a=n(579020);n(163620),n(790355);var o=n(717752),s=n(376780);function l(e){return!0}function c(e){return e?1e3:50}function d(e,r){return _(e.currentUser.favoritedFiles,e.currentUser.favoritedPrototypes,e.currentUser.favoritedProjects,e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces).find(e=>e.resource.resourceId===r)}function u(e,r){switch(r){case s.bk.FILE:return e.favoritedResource?.favoritedFile!=null?{id:e.favoritedResource?.id,resourceType:s.bk.FILE,resource:e.favoritedResource?.favoritedFile}:void 0;case s.bk.PROTOTYPE:return e.favoritedResource?.favoritedPrototype!=null?{id:e.favoritedResource?.id,resourceType:s.bk.PROTOTYPE,resource:e.favoritedResource?.favoritedPrototype}:void 0;case s.bk.FOLDER:return e.favoritedResource?.favoritedProject?{id:e.favoritedResource?.id,resourceType:s.bk.FOLDER,resource:e.favoritedResource?.favoritedProject}:void 0;case s.bk.TEAM:return e.favoritedResource?.favoritedTeam?{id:e.favoritedResource?.id,resourceType:s.bk.TEAM,resource:e.favoritedResource?.favoritedTeam}:void 0;case s.bk.WORKSPACE:return e.favoritedResource?.favoritedWorkspace?{id:e.favoritedResource?.id,resourceType:s.bk.WORKSPACE,resource:e.favoritedResource?.favoritedWorkspace}:void 0;default:return}}function p(e,r,n,i,o,s){(0,a.sx)("data_drift_favorited_resource_corrected",{favoritedResourceId:e,resourceType:r,resourceTeamId:n,underlyingResourceTeamId:i,resourceOrgId:o,underlyingResourceOrgId:s},{forwardToDatadog:!0})}function m(e,r){return e.has(r.resourceId)?null:(e.add(r.resourceId),r)}function h(e,r,n){let i=new Set((n??[]).map(e=>e.plan_id)),a=new Set,o=new Set,s=new Set;return{favoritedFiles:(e?.favoritedFiles??[]).map(e=>{if(null!=r){if(r===e.file?.teamId)return e.teamId!==e.file?.teamId&&(p(e.resourceId,"file",e.teamId,e.file.teamId,null,null),e.teamId=e.file?.teamId),m(a,e);if(e.teamId===r&&!i.has(e.file?.teamId??""))return m(a,e)}}).filter(e=>null!=e),favoritedProjects:(e?.favoritedProjects??[]).map(e=>{if(null!=r){if(r===e.project?.teamId)return e.teamId!==e.project?.teamId&&(p(e.resourceId,"folder",e.teamId,e.project?.teamId,null,null),e.teamId=e.project?.teamId),m(s,e);if(e.project?.orgId===null&&e.teamId===r&&!i.has(e.project?.teamId??""))return m(s,e)}}).filter(e=>null!=e),favoritedPrototypes:(e?.favoritedPrototypes??[]).map(e=>{if(null!=r){if(r===e.prototype?.file?.teamId)return e.teamId!==e.prototype?.file?.teamId&&(p(e.resourceId,"prototype",e.teamId,e.prototype?.file?.teamId,null,null),e.teamId=e.prototype?.file?.teamId),m(o,e);if(e.prototype?.file?.parentOrgId===null&&e.teamId===r&&!i.has(e.prototype?.file?.teamId??""))return m(o,e)}}).filter(e=>null!=e),favoritedFilesKeySet:a,favoritedPrototypesIdSet:o,favoritedFoldersIdSet:s}}function _(e,r,n,i,a){return g(e?.filter(e=>e.file?.canView)??[],r??[],n?.filter(e=>e.project&&!e.project.deletedAt)??[],i?.filter(e=>e.team&&!e.team.deletedAt)??[],a??[])}let g=(e,r,n,i,a)=>{let o=e.map(e=>({id:e.id,resourceType:s.bk.FILE,resource:e})),l=r.map(e=>({id:e.id,resourceType:s.bk.PROTOTYPE,resource:e}));return[...o,...l,...n.map(e=>({id:e.id,resourceType:s.bk.FOLDER,resource:e})),...i.map(e=>({id:e.id,resourceType:s.bk.TEAM,resource:e})),...a.map(e=>({id:e.id,resourceType:s.bk.WORKSPACE,resource:e}))]};function f(e,r){let n=c(r);return _(e.currentUser.favoritedFiles,e.currentUser.favoritedPrototypes,e.currentUser.favoritedProjects,e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces).length>=n}function E(e){return!!e&&e>=1e3}function y(e,r){let n={};e.forEach(e=>{n[e.id]=e});let i=e.find(e=>""===e.name)?.id,a=r?.map(e=>n[e]).filter(e=>e)??[],o=e.filter(e=>!(r&&r.includes(e.id))),s=o.findIndex(e=>""===e.name);return -1!==s&&o.splice(s,1),o.sort((e,r)=>new Date(e.createdAt).getTime()-new Date(r.createdAt).getTime()),-1!==s&&i?[n[i],...a,...o]:[...a,...o]}function b(e,r){let n={};e.forEach(e=>{n[e.resource.id]=e});let i=r?.map(e=>n[e]).filter(e=>e)??[],a=e.filter(e=>!(r&&r.includes(e.resource.id)));return a.sort((e,r)=>new Date(e.resource.createdAt).getTime()-new Date(r.resource.createdAt).getTime()),[...i,...a]}function v(e){switch(e){case o.nb.FILE:case o.nb.PINNED_FILE:case o.nb.REPO:return s.bk.FILE;case o.nb.PROTOTYPE:return s.bk.PROTOTYPE;case o.nb.OFFLINE_FILE:return s.bk.FILE;default:(0,i.xb)(e)}}},990022:(e,r,n)=>{function i(e){let r=[];return e.forEach(e=>{e.content.forEach(e=>{let n=JSON.parse(e);n.nodeId&&r.push(n.nodeId)})}),r}n.d(r,{N:()=>i}),n(741419)},526999:(e,r,n)=>{let i;n.d(r,{D4:()=>H,De:()=>B,OR:()=>U,Qr:()=>k,Tq:()=>V,Wq:()=>K,hL:()=>x,jm:()=>W,nz:()=>G});var a=n(716544),o=n(157907),s=n(579020),l=n(35030),c=n(141039),d=n(44509),u=n(379338),p=n(831932),m=n(442313),h=n(176283),_=n(181670),g=n(8374),f=n(790355),E=n(110979),y=n(667323),b=n(449737),v=n(317713),T=n(354054),I=n(235441),S=n(486934),w=n(992444),A=n(241917),C=n(430330),N=n(804361),L=n(304713),O=n(323075),R=n(96321),P=n(425076),D=n(661780),M=n(834111);function k(){return(0,u.Ay)().release_manifest_git_commit}function F(e,r,n=""){if((0,l.ce)()){document.title=r?`${n}${r}`:e;return}if(e!==(i?i+document.title:document.title)){if("safari"!==p.Ay.browserType){let r;let n=(0,P.AE)(e);r=document.getElementById("custom-emoji-favicon"),n?(i=n,r||((r=document.createElement("link")).id="custom-emoji-favicon",r.rel="icon",document.head.appendChild(r)),r.href="data:image/svg+xml,"+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">{text}</text></svg>'.replace("{text}",n)):(r&&r.remove(),i=void 0),n&&(e=(0,P.Nn)(e,n))}document.title=e,c.eD&&r&&c.eD.setTitle(r,n)}}function x(e,r=null,n=""){let i=function(e){switch(e){case A.nT.Whiteboard:return" \u2013 FigJam";case A.nT.Slides:return" \u2013 Figma Slides";case A.nT.Sites:return" \u2013 Figma Sites";case A.nT.Cooper:return" \u2013 Figma Buzz";default:return" \u2013 Figma"}}(r);F(`${n}${e}${i}`,e,n)}function U(e,r){let n=(0,M.Iu)(e,r);if(!n){F("Figma",null);return}if("fullscreen"===r.view&&r.tryPluginName){e.openFile?F(e.openFile.name,n):F((0,m.t)("community.try.plugin_name_with_community",{pluginName:r.tryPluginName}),n);return}if("prototype"===r.view){let i,a="";if((0,L.f)(r.file.editor_type))i=a=`${r.isPresenterView?(0,m.t)("slides.general.presenter"):(0,m.t)("slides.general.slide_deck")} \xb7 ${n} - ${(0,m.t)("slides.general.slides")}`;else{let r=function(e){let r=e.prototype;for(let e of r.pages)if(e.nodeId===r.currentPageId)return e.name;return""}(e);r&&e.prototype.pages.length>1?(a=`\u25B6 ${n} - ${r}`,i=`${n} - ${r}`):(a=`\u25B6 ${n}`,i=n)}F(a,i);return}if("fullscreen"===r.view&&!e.openFile){let e=(0,R.GT)();e?.name?n=e.name:r?.localFileName&&(n=r.localFileName)}let i=(0,O.yt)(e);if(i&&(0,S.Xm)(i)){F(`\u2325 ${n}`,`${n}`);return}x(n,(0,I.XE)(r))}let B=(0,g.nF)(e=>d.Ay.listen(r=>{"POP"===r&&function(r){if(r){let n=e.getState(),i=n.selectedView;if(!(0,d.s0)(r))return;let{jsCommitHash:a,searchSessionId:o,...s}=r;if(void 0!==a&&a!==k()){d.Ay.reload("Navigating to a state that was pushed by an older version of this application");return}if("fullscreen"===i.view&&!w.Y5.isReady()){d.Ay.reload("User navigated before fullscreen fully initialized");return}if("fullscreen"===s.view&&!s.fileKey){window.history.back();return}if("fullscreen"===i.view&&("fullscreen"!==s.view||i.fileKey!==s.fileKey))e.dispatch(y.VB({oldSelectedView:i,newSelectedView:s}));else{if(e.dispatch(b.Ce()),"communityHub"===s.view&&"searchAndBrowse"===s.subView&&(0,_.OE)(s.data)){let r=(0,h.w)(n);r&&e.dispatch(T.NR({sessionId:r}))}e.dispatch(f.$T({...s,fromPopstate:!0})),U(n,s)}}}(d.Ay.location.state),(0,d.s0)(d.Ay.location.state)||function(){let r=e.getState(),n=(0,M.vU)(r,d.Ay.location.pathname,d.Ay.location.search,d.Ay.location.hash,null);null!==n&&e.dispatch(f.$T({...n,fromPopstate:!0}))}()}));function V(e,r,n,i){e(E.UN({fileKey:r.key}));let a=n||i,o=n?C.O.ORG:C.O.TEAM;e(a?v.c5({planId:a,planType:o}):v.p4({planId:n||N.P})),e(f.$T({view:"fullscreen",fileKey:r.key,editorType:r.editorType?(0,A.wN)(r.editorType):A.nT.Design}))}function G(e,r,n,i){(0,s.sx)("Open File in New Tab Click",{fileKey:r,uiSelectedView:JSON.stringify(n)}),i(E.UN({fileKey:r})),d.Ay.redirect(e,"_blank")}function H(e,r,n,i){(0,s.sx)("Open Prototype in New Tab Click",{fileKey:r,pageId:n,uiSelectedView:JSON.stringify(i)}),d.Ay.redirect(e,"_blank")}function K(e,r){r(E.V3({url:e}))}function W(e,r){let n=(0,D.TA)(),i=e||r,s=(0,a.d4)(e=>(0,o.k)().limited_plan_spaces?e.plans:n?e.authedUsers.byId[n]?.plans:null);return!!s?.find(e=>e.plan_id===i)}},637417:(e,r,n)=>{n.d(r,{b4:()=>D,g4:()=>F,n_:()=>k});var i=n(210301),a=n(239910),o=n.n(a),s=n(695635),l=n(308746),c=n(757033),d=n(280198),u=n(442313),p=n(697714),m=n(8374),h=n(719006),_=n(790355),g=n(449737),f=n(869279),E=n(291333),y=n(481540),b=n(976308),v=n(922486),T=n(296623),I=n(376780),S=n(635547),w=n(997894),A=n(618593),C=n(922030),N=n(988540),L=n(241917),O=n(183905),R=n(821618),P=n(515071);let D=(0,m.nF)(async(e,r)=>{let{fileKeys:n,repoIds:i}=r;if(n.length>0){let r=e.getState(),[i,...a]=await Promise.all([(0,C.R5)(n),...n.map(e=>w.M4.fetchFile(e))]);if(i){let o=r.teams[i],s=new Set(a.map(e=>e.editor_type)),l=s.size>1?null:s.has(I._Y.WHITEBOARD)?I._Y.WHITEBOARD:I._Y.DESIGN;e.dispatch(g.to({type:P.DV,data:{team:o,action:O.ZN.RESTORE_FILES,editorType:l,resource:N.vL.FILE,multipleResources:n.length>1,currentPlan:b.F.Plan.STARTER,upsellPlan:b.F.Plan.PRO}}))}else e.dispatch(h.R({fileKeys:o()(a,"key"),userInitiated:!0}))}if(i&&i.length>0){let r=await Promise.all(i.map(e=>w.M4.fetchRepo(e)));e.dispatch((0,f.i)({reposById:o()(r,"id"),userInitiated:!0}))}e.dispatch(E.an())});async function M({selectedFileKeys:e,currentSpaceDraftsFolderId:r,currentUserId:n,state:i,toDraft:a}){let o=await (0,s.S8)(S.M5e,e.map(e=>({fileKey:e}))),l=[],c=new Set;return o.forEach(({result:{data:e}})=>{let o;let{file:s}=e??{};if(!s)return;let{project:d,editorType:u,key:p}=s;if(null!=u&&c.add(u),s.parentOrgId){let e=n&&i.orgUsersByOrgId[s.parentOrgId]?.[n];o=e?e.drafts_folder_id:r}else if(s.teamId){let e=i.roles.byTeamId[s.teamId],a=n&&e&&i.teamUserByTeamId[s.teamId]?.[n];o=a?a.drafts_folder_id:r}else o=r;let m=(o||d?.id)??"",h=!a&&d&&(0,A.d6)(d,u??I._Y.DESIGN)?d.id:m;l.push({key:p,folderId:h})}),{copyFiles:l,editorTypes:c}}let k=(0,m.nF)(async(e,r)=>{let n=e.getState(),a=n.user?.id,o=n.user?.personal_drafts_folder_id,s=n.user?.drafts_folder_id,m=[o];a&&(m.push(...(0,v.x)(n.orgUsersByOrgId,a).map(e=>e.drafts_folder_id)),m.push(...(0,T._)(n.teamUserByTeamId,a).map(e=>e.drafts_folder_id||void 0)));let h=Object.keys(n.tileSelect&&n.tileSelect[R.F.FILES]||{}).concat(Object.keys(n.tileSelect&&n.tileSelect[R.F.PINNED_FILES]||{})),f=Object.keys(n.tileSelect&&n.tileSelect[R.F.REPOS]||{});(await Promise.all(f.map(e=>w.M4.fetchRepo(e)))).forEach(e=>{let r=e.default_file_key;r&&h.push(r)});let{copyFiles:E,editorTypes:S}=await M({selectedFileKeys:h,currentSpaceDraftsFolderId:s,currentUserId:a,state:n,toDraft:r.toDraft}),A=await (0,C.mx)(E);if(A){let r=n.teams[A],i=S.size>1?null:S.has(I._Y.WHITEBOARD)?I._Y.WHITEBOARD:I._Y.DESIGN;e.dispatch(g.to({type:P.DV,data:{team:r,action:O.ZN.DUPLICATE_FILES,editorType:i,resource:N.vL.FILE,multipleResources:E.length>1,currentPlan:b.F.Plan.STARTER,upsellPlan:b.F.Plan.PRO}}));return}let D=E.map(({key:r,folderId:n})=>()=>{let i=c.Ay.post(`/api/multiplayer/${r}/copy?${(0,l.lF)({folder_id:n})}`);return i.catch(({data:r})=>{r&&r.message?e.dispatch(d.s.error(r.message)):e.dispatch(d.s.error((0,u.t)("file_browser.file_browser_actions.duplicate_file_error")))}),i});(0,i.Ed)(D,8).then(r=>{if(!r.some(e=>"reject"===e.type)){let i=E.filter(e=>!!e.folderId&&m.includes(e.folderId)).length,a=r=>r&&r.editor_type?{text:(0,u.t)("general.open"),action:()=>{e.dispatch(_.$T({view:"fullscreen",fileKey:r.key,editorType:(0,L.wN)(r.editor_type)})),e.dispatch(p.F.dequeue({}))}}:void 0;if(i>0&&("folder"!==n.selectedView.view||n.selectedView.folderId!==s)){let n,o="",l=1===E.length;o=l?(0,u.t)("user_view.file_duplicated_to_your_drafts"):i===E.length?(0,u.t)("user_view.files_duplicated_to_your_drafts",{intArg:i}):(0,u.t)("user_view.some_files_duplicated_to_your_drafts"),n=l?a(r[0].resolve?.data?.meta):{text:(0,u.t)("general.show"),action:()=>{s&&e.dispatch(_.$T({view:"folder",folderId:s})),e.dispatch(p.F.dequeue({}))}},e.dispatch(p.F.enqueue({type:"file_duplicated",message:o,button:n}))}else if("folder"===n.selectedView.view){let n=a(1===E.length?r[0].resolve?.data?.meta:void 0);e.dispatch(p.F.enqueue({type:"file_duplicated",message:1===E.length?(0,u.t)("user_view.file_duplicated"):(0,u.t)("user_view.files_duplicated",{intArg:E.length}),button:n}))}let o=r.map(e=>null!=e.resolve?e.resolve.data.meta:null).filter(e=>null!=e).map(e=>e);(0,y.ak)(E,o,e.getState())}})}),F=(0,m.nF)(e=>{e.dispatch(k({toDraft:!0}))});(0,m.nF)((e,r)=>{let n=e.getState(),i=n.user?.drafts_folder_id;return c.Ay.post(`/api/multiplayer/${r.file.key}/copy?${(0,l.lF)({folder_id:i})}`).then(()=>{e.dispatch(d.s.flash((0,u.t)("user_view.file_duplicated_to_your_drafts")))}).catch(({data:r})=>{r&&r.message?e.dispatch(d.s.error(r.message)):e.dispatch(d.s.error((0,u.t)("file_browser.file_browser_actions.duplicate_file_error")))})})},57589:(e,r,n)=>{n.d(r,{Ct:()=>Z,LK:()=>$,Nr:()=>en,Q3:()=>et,Q4:()=>X,SX:()=>ea,Xg:()=>q,iT:()=>ee,jl:()=>j,k4:()=>J,mq:()=>Q,xT:()=>er});var i=n(716544),a=n(988520),o=n(878028),s=n(858423),l=n(653959),c=n(757033),d=n(280198),u=n(442313),p=n(697714),m=n(807955),h=n(8374),_=n(884060),g=n(790355),f=n(54018),E=n(449737),y=n(114735),b=n(298934),v=n(452546),T=n(481540),I=n(976308),S=n(92537),w=n(465766),A=n(376780),C=n(635547),N=n(997894),L=n(922030),O=n(920963),R=n(904278),P=n(988540),D=n(336901),M=n(404658),k=n(927926),F=n(995946),x=n(217084),U=n(183905),B=n(252680),V=n(142899),G=n(138501),H=n(515071),K=n(552222);let W=(0,h.nF)((e,{folderId:r,folderData:n})=>{(0,i.vA)(()=>{e.getState().folders[r]?e.dispatch(f.yJ({folder:n.folder})):e.dispatch(f.bE(n.folder)),e.dispatch(_.uo({files:n.files,subscribeToRealtime:!1})),e.dispatch(b.nX({repos:n.repos})),e.dispatch(v.uo({roles:n.roles})),e.dispatch(f.Kc({folderId:r,state:"loaded"}))})}),z=N.M4.Query({fetch:async(e,{reduxStore:r})=>{let n=await B.W.getFiles({folderId:e.folderId,shouldShowOnlyTrashedFiles:!!e.shouldShowOnlyTrashedFiles});return r.dispatch(_.uo({files:n.data.meta.files})),r.dispatch(b.nX({repos:n.data.meta.repos})),r.dispatch(v.uo({roles:n.data.meta.roles})),r.dispatch(f.Kc({folderId:e.folderId,state:"loaded"})),n.data.meta},schema:e=>e.object({folder:M.lH.nullable(),files:e.array(D.L),repos:e.array(k.z)}),sync:({folderId:e},{mutate:r,livegraphClient:n})=>{let i=new Date(new Date().setHours(0,0,0,0));return n.subscribe(C.m0h,{projectId:e,updatedAtTimestamp:i},n=>{r(r=>{let i=r.files;(n.data?.project?.fileUpdates||[]).filter(r=>r.folderId===e).forEach(e=>{i.find(r=>r.key===e.key)||r.files.unshift((0,R.W$)(e))})})})},syncObjects:!0,output:({data:e,args:r})=>{let n=e.files.filter(e=>e.folder_id===r.folderId&&(r.shouldShowOnlyTrashedFiles&&e.trashed_at&&e.trashed_with_parent===A.Go.FOLDER||!r.shouldShowOnlyTrashedFiles&&!e.trashed_at)&&!e.file_repo_id),i=e.repos.filter(e=>e.folder_id===r.folderId&&(r.shouldShowOnlyTrashedFiles&&e.trashed_at&&e.trashed_with_parent===A.Go.FOLDER||!r.shouldShowOnlyTrashedFiles&&!e.trashed_at)),o=e.repos.filter(e=>!e.trashed_at&&!e.deleted_at).map(r=>e.files.find(e=>e.key===r.default_file_key)).filter(a.Vq),s={};return e.repos.forEach(r=>{let n=e.files.filter(e=>e.file_repo_id===r.id).sort((e,r)=>new Date(r.touched_at).getTime()-new Date(e.touched_at).getTime());s[r.id]=n}),{folder:e.folder,files:n,repos:i,previewFiles:[...n,...o],filesByRepoId:s}}});function $(e,r=!0,n=!1){let[i]=(0,N.IT)(z({folderId:e,shouldShowOnlyTrashedFiles:n}),{enabled:r});return i}let Y=o.z.object({folder:M.lH.nullable(),files:o.z.array(D.L),repos:o.z.array(k.z),roles:o.z.array(F.an)});N.M4.PaginatedQuery({fetch:async(e,{pageParam:r,reduxStore:n})=>{let i;if(r)i=r;else{let{folderId:r,...n}=e,a=new URLSearchParams({...n,page_size:"50"}).toString();i=`/api/folders/${r}/paginated_files?${a}`}let a=await (0,c.GD)(i),o=a.data.meta;return n.dispatch(_.uo({files:o.files})),n.dispatch(b.nX({repos:o.repos})),n.dispatch(v.uo({roles:o.roles})),n.dispatch(f.Kc({folderId:e.folderId,state:"loaded"})),{data:a.data.meta,nextPage:a.data.pagination?.next_page,prevPage:a.data.pagination?.prev_page}},joinPages:e=>({files:e.flatMap(e=>e.data.files),repos:e.flatMap(e=>e.data.repos),roles:e.flatMap(e=>e.data.roles),folder:e.length>0?e[e.length-1].data.folder:null}),sync:({folderId:e},{mutate:r,livegraphClient:n})=>{let i=new Date(new Date().setHours(0,0,0,0));return n.subscribe(C.m0h,{projectId:e,updatedAtTimestamp:i},n=>{r(r=>{let i=r[0];i&&(n.data?.project?.fileUpdates||[]).filter(r=>r.folderId===e).forEach(e=>{r.find(r=>!!r.files.find(r=>r.key===e.key))||i.files.unshift((0,R.W$)(e))})})})},output:({data:e,args:r})=>{let n=e.files.filter(e=>e.folder_id===r.folderId&&!e.trashed_at&&!e.file_repo_id),i=e.repos.filter(e=>e.folder_id===r.folderId&&!e.trashed_at),a={};return e.repos.forEach(r=>{let n=e.files.filter(e=>e.file_repo_id===r.id).sort((e,r)=>new Date(r.touched_at).getTime()-new Date(e.touched_at).getTime());a[r.id]=n}),{folder:e.folder,files:n,repos:i,filesByRepoId:a}},schema:Y,syncObjects:!0});let j=(0,h.nF)(async(e,{folderId:r,loadedFolders:n})=>{if(!n[r]){e.dispatch(f.Kc({folderId:r,state:"loading"}));try{let n=(await B.W.getFiles({folderId:r})).data.meta;e.dispatch(W({folderId:r,folderData:n}))}catch(n){404===n.status||403===n.status?e.dispatch(g.$T({view:"resourceUnavailable",resourceType:x.Ft.PROJECT})):n.status>=400&&n.status<500?e.dispatch(f.Kc({folderId:r,state:"loaded"})):e.dispatch(f.Kc({folderId:r,state:null}))}}}),q=N.M4.Query({fetch:async e=>(await V.$.getFolders({teamId:e.teamId})).data.meta.folder_rows,schema:e=>e.array(M.lH.extend({touched_at:e.string()})),syncObjects:!0,enabled:e=>!!e.teamId,output:({data:e})=>e.filter(e=>!(e.trashed_at||e.deleted_at))}),X=N.M4.Mutation((e,{reduxStore:r})=>B.W.permanentlyDelete({folderId:e.folderId}).then(()=>{r.dispatch(p.F.enqueue({message:(0,u.t)("file_browser.file_browser_actions.folder_deleted_forever")}))})),Z=N.M4.Mutation(({folderId:e},{objects:r,reduxStore:n})=>{let i=B.W.trash({folderId:e}).then(()=>{r.Folder.update(e,e=>{e.trashed_at=Date.now().toString()}),n.dispatch(p.F.enqueue({message:(0,u.t)("file_browser.file_browser_actions.folder_trashed")}))});n.dispatch((0,d.Q)({promise:i,fallbackError:(0,u.t)("file_browser.api_folder.error_when_moving_to_trash")})),(0,s.WB)().optimisticallyUpdate({Project:{[e]:{trashedAt:new Date}}},i)}),J=N.M4.Mutation(({folderId:e,team:r},{objects:n,reduxStore:i})=>{let a=B.W.restore({folderId:e}).then(()=>{n.Folder.update(e,e=>{e.trashed_at=null}),i.dispatch(p.F.enqueue({message:(0,u.t)("file_browser.file_browser_actions.folder_restored"),button:{text:(0,u.t)("visual_bell.show_in_toast",{destination:r?.name??"Recents"}),action:()=>{r?i.dispatch(g.$T({view:"team",teamId:r.id})):i.dispatch(g.$T({view:"recentsAndSharing"}))}}}))});i.dispatch((0,d.Q)({promise:a,fallbackError:(0,u.t)("file_browser.api_folder.error_when_restoring")})),(0,s.WB)().optimisticallyUpdate({Project:{[e]:{trashedAt:null}}},a)});N.M4.Mutation(e=>B.W.batchDelete({folderIds:e.folderIds}));let Q=N.M4.Mutation(({folderId:e,folderName:r},{objects:n,reduxStore:i})=>{let a=(0,S.SS)(r);if(a){i.dispatch(d.s.error(a));return}n.Folder.update(e,e=>{e.name=r,e.path=r}),(0,T.xr)("Folder Renamed",e,null,i.getState(),{folderName:r});let o=c.Ay.put("/api/folders/rename",{folder_id:e,name:r});return i.dispatch((0,d.Q)({promise:o,fallbackError:(0,u.t)("file_browser.api_folder.an_error_occurred_while_renaming_this_project")})),(0,s.WB)().optimisticallyUpdate({Project:{[e]:{name:r,path:r}}},o),o}),ee=(0,h.MM)("FOLDER_UPDATE_FOLDER_ACCESS",(e,r,{optimistId:n})=>{let i=c.Ay.put(`/api/folders/${r.folderId}`,{is_invite_only:r.isInviteOnly,is_view_only:r.isViewOnly}).then(()=>{e.dispatch(y.c(n))}).catch(()=>{e.dispatch(y.r(n))});(0,d.Q)({promise:i,fallbackError:(0,u.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_access")})}),et=(0,h.MM)("FOLDER_UPDATE_SHARING_AUDIENCE_CONTROLS",(e,r,{optimistId:n})=>{let i=B.W.updateFolderSharingAudienceControls({folderId:r.folder.id,sharingAudienceControl:r.sharingAudienceControl}).then(()=>{e.dispatch(y.c(n)),(0,T.xr)("Folder Share Settings Updated",r.folder.id,r.folder.team_id,e.getState(),{share_settings_type:"sharing_audience",oldSharingAudienceControl:r.folder.sharing_audience_control,newSharingAudienceControl:r.sharingAudienceControl})}).catch(()=>{e.dispatch(y.r(n))});(0,d.Q)({promise:i,fallbackError:(0,u.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_sharing_audience_control")})}),er=(0,h.MM)("FOLDER_UPDATE_TEAM_ACCESS",(e,r,{optimistId:n})=>{let i=B.W.updatedFolderTeamAccess({folderId:r.folder.id,teamAccess:r.teamAccess}).then(()=>{e.dispatch(y.c(n)),(0,T.xr)("Folder Share Settings Updated",r.folder.id,r.folder.team_id,e.getState(),{share_settings_type:"team_access",oldTeamAccess:r.folder.team_access,newTeamAccess:r.teamAccess})}).catch(()=>{e.dispatch(y.r(n))});(0,d.Q)({promise:i,fallbackError:(0,u.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_team_access")})}),en=(0,h.nF)(async(e,r)=>{let n=r.folder,i=r.team,a=(0,w.Ws)(i);if(n.inviteOnlyAt||n.viewOnlyAt){e.dispatch(E.to({type:G.z,data:{folder:n}}));return}try{await B.W.getCanMove({teamId:i.id,folderId:n.id})}catch(r){r.data?.failure_info?.code==="ERR_FILE_LIMIT"||r.data?.failure_info?.code==="ERR_PROJECT_LIMIT"?e.dispatch(E.to({type:H.DV,data:{team:a,resource:P.vL.FOLDER,action:U.ZN.MOVE_FOLDER,currentPlan:I.F.Plan.STARTER,upsellPlan:I.F.Plan.PRO,editorType:null,upsellSource:O.b.FOLDER_MOVE_MODAL}})):e.dispatch(d.s.error(r.data?.message));return}if(n.teamId&&a){e.dispatch(E.to({type:K.o,data:{folder:n,destinationTeam:a,onConfirm:()=>{(0,l.Jl)(ei)({folder:n,team:a})}}}));return}(0,l.Jl)(ei)({folder:n,team:a}),r.onSuccess&&r.onSuccess()}),ei=N.M4.Mutation((e,{query:r,objects:n,reduxStore:i})=>{let{folder:a,team:o}=e;(0,T.xr)("Folder Moved",a.id,null,i.getState(),{destTeamId:o.id});let l=c.Ay.put("/api/folders/move",{folder_id:a.id,team_id:o.id}).then(()=>{i.dispatch(p.F.enqueue({message:(0,u.t)("file_browser.folder_move.project_moved_toast",{folderName:a.path,teamName:o.name})}))});return i.dispatch((0,d.Q)({promise:l,fallbackError:(0,u.t)("file_browser.api_folder.an_error_occurred_while_moving_this_project")})),s.WB()?.optimisticallyUpdate({Project:{[a.id]:{teamId:o.id}}},l),a.teamId&&(r.mutate(q({teamId:a.teamId}),e=>{let r=e.findIndex(e=>e.id===a.id);-1!==r&&e.splice(r,1)}),n.Folder.update(a.id,e=>{e.team_id=o.id})),l}),ea=(0,h.nF)((e,r)=>{let n=e.getState(),i=r.where,a=r.team.id,o=n.creatingNewFolder&&n.creatingNewFolder.where===i&&n.creatingNewFolder.teamId===a,s=r.team;if(!o){if(s.canEdit)(0,L.rR)(s,{type:L.sK.ADD_PROJECT})?(e.dispatch(g.sf({where:i,teamId:a})),e.dispatch(E.to({type:(0,m.p)(),data:{teamId:s.id,modalShown:n.modalShown,onFolderCreated:r.onFolderCreated}}))):e.dispatch(E.to({type:H.DV,data:{team:s,resource:P.vL.FOLDER,action:U.ZN.CREATE_FOLDER,currentPlan:I.F.Plan.STARTER,upsellPlan:I.F.Plan.PRO,editorType:null}}));else{let r=s?(0,u.t)("file_browser.api_folder.no_create_permissions_team_name",{teamName:s.name}):(0,u.t)("file_browser.api_folder.no_create_permissions_this_team");e.dispatch(d.s.flash(r))}}})},366082:(e,r,n)=>{n.d(r,{nm:()=>h});var i=n(157907),a=n(39773),o=n(925025),s=n(8374),l=n(4313),c=n(317713),d=n(106067),u=n(354041),p=n(426662),m=n(389948);(0,s.nF)(async(e,{loadedPlans:r})=>{if(!r||!(r.length>0))try{let r=await p.k.getPlans();e.dispatch(c.uo({plans:r.data.meta.plans})),e.dispatch(d.uo({teams:r.data.meta.teams})),e.dispatch(l.uo({orgs:r.data.meta.orgs}));let n=r.data.meta.teams;(0,i.k)().close_starter_team_loophole&&await Promise.all(n.map(r=>(0,u.xN)(r.id,e)))}catch(e){}});let h=(e=!1)=>async r=>{try{return await _(r,e)}catch(e){return Promise.reject(e)}};async function _(e,r=!1){let n=a.zl.get(m.g);if(!r&&n!==o.r.INIT&&n!==o.r.LOADING)return n;try{n===o.r.INIT&&a.zl.set(m.g,o.r.LOADING);let r=await p.k.getPlansForAuthedUsers();return a.zl.set(m.g,r),e(d.uo({teams:r.teams})),e(l.uo({orgs:r.orgs})),r}catch(e){return n===o.r.LOADING&&a.zl.set(m.g,o.r.INIT),Promise.reject(e)}}},296580:(e,r,n)=>{n.d(r,{IA:()=>L,KQ:()=>N,UM:()=>P,vr:()=>R,zK:()=>O});var i=n(579020),a=n(858423),o=n(463802),s=n(757033),l=n(280198),c=n(442313),d=n(719398),u=n(697714),p=n(8374),m=n(790355),h=n(110979),_=n(341550),g=n(452546),f=n(106067),E=n(415652),y=n(481540),b=n(376780),v=n(622812),T=n(578427),I=n(97859),S=n(995946),w=n(217084),A=n(962700),C=n(351604);let N=(0,p.nF)((e,r)=>{let{teamName:n,orgAccess:i,workspaceId:a,description:o,defaultPermission:p,sharingAudienceControl:_,orgBrowsable:E,hidden:v,ignoreCurrentPlan:I}=r,C=e.getState().currentUserOrgId,N={team_name:n};!C||I||(N.org_id=C,_||(N.org_access=i)),a&&(N.workspace_id=a),o&&(N.description=o),p&&!_&&(N.default_permission=p),_&&(N.sharing_audience_control=_),E&&(N.org_browsable=E),v&&(N.hidden=v),e.dispatch(f.r1({loading:!0})),s.Ay.post("/api/teams/create",N).then(({data:n})=>{let i="team"in n.meta?n.meta.team:n.meta;(0,y._J)("Team Created",i.id,e.getState(),{sharing_audience_control:_,org_browsable:E,hidden:v}),r.onSuccessNoRedirect&&r.onSuccessNoRedirect(i),function(e,r,n){let i=r.getState().user,a=r.getState().currentUserOrgId;r.dispatch(f.bE({team:e}));let{ignoreCurrentPlan:o}=n;a&&!o&&n.inviteEmails?.length&&n.inviteLevel?r.dispatch((0,T.rq)({emails:n.inviteEmails,emailsToExclude:i?new Set([i.email]):void 0,resourceType:b.vt.TEAM,resourceIdOrKey:e.id,level:n.inviteLevel,source:"new_team_creation_modal"})):n.teamFlowType===w.SC.CREATE&&n.inviteEmails?.length&&r.dispatch((0,T.rq)({emails:n.inviteEmails,emailsToExclude:i?new Set([i.email]):void 0,resourceType:b.vt.TEAM,resourceIdOrKey:e.id,level:S.e6.EDITOR,source:"team_creation_flow"})),A.G.getTeam({teamId:e.id}).then(({data:a})=>{for(let e of a.meta)r.dispatch(g.bE({role:e}));let s=r.getState().currentUserOrgId&&!o;if(n.dontRedirect)r.dispatch(f.r1({loading:!1}));else if(n.onSuccess&&(r.dispatch(f.r1({loading:!1})),n.onSuccess()),s||n.teamFlowType===w.SC.CREATE)r.dispatch(f.r1({loading:!1})),r.dispatch(m.$T({view:"team",teamId:e.id})),r.dispatch(u.F.enqueue({type:"new_team_created",message:(0,c.t)("team_creation.you_have_created_a_new_team")}));else if(i?.id){let n={view:"addCollaborators",teamId:e.id},a={userId:i.id,teamId:e.id,orgId:null};r.dispatch(h._l({workspace:a,view:n}))}else r.dispatch(f.r1({loading:!1})),r.dispatch(m.$T({view:"addCollaborators",teamId:e.id}))})}(i,e,r)}).catch(r=>{let n=(0,d.J)(r,r?.response?.message||(0,c.t)("team_creation.an_error_occurred_while_creating_this_team"));e.dispatch(l.s.error(n)),e.dispatch(f.r1({loading:!1}))})}),L=(0,p.nF)((e,r)=>{let n=r.team,i=n.id,l=n.name,d=r.name;(0,y._J)("Team Renamed",i,e.getState());let p=s.Ay.put(`/api/teams/${i}`,{name:r.name}).then(({data:n})=>{r.skipVisualBell||e.dispatch(u.F.enqueue({message:(0,c.t)("change_team_name_visual_bell.text",{oldTeamName:l,newTeamName:d}),button:{text:(0,c.t)("change_team_name_visual_bell.undo"),action:()=>{e.dispatch(L({team:n.meta,name:l,skipVisualBell:!0}))}}}))});return a.WB()?.optimisticallyUpdate({Team:{[i]:{name:d}}},p),(0,o.Q)({requestPromise:p,fallbackError:"An error occurred while renaming this team.",store:e,next:e.dispatch,action:f.$w(r)})}),O=(0,p.nF)((e,r)=>{let n=r.team.id;return(0,y._J)("Team Share Settings Updated",n,e.getState(),{share_settings_type:"share_audience",oldSharingAudienceControl:r.team.sharing_audience_control,newSharingAudienceControl:r.sharingAudienceControl,oldOrgBrowsable:r.team.org_browsable,newOrgBrowsable:r.orgBrowsable,oldHidden:r.team.hidden,newHidden:r.hidden}),(0,o.Q)({requestPromise:s.Ay.put(`/api/teams/${n}`,{sharing_audience_control:r.sharingAudienceControl,org_browsable:r.orgBrowsable,hidden:r.hidden}),fallbackError:"An error occurred while changing the sharing settings of this team.",store:e,next:e.dispatch,action:f.aB(r)})});(0,p.nF)((e,r)=>{let n=r.team.id;return(0,y._J)("Team Org Access Changed",n,e.getState(),{oldOrgAccess:r.team.org_access,newOrgAcccess:r.orgAccess}),(0,o.Q)({requestPromise:s.Ay.put(`/api/teams/${n}`,{org_access:r.orgAccess}),fallbackError:"An error occurred while changing the org access of this team.",store:e,next:e.dispatch,action:f.bQ(r)})});let R=(0,p.nF)((e,r)=>{(0,i.sx)("file-browser-hydrate",{location:"team.onJoin"});let n=(0,v.p9)(r.teamId);(0,I._X)("onJoinTeam").then(i=>{let a=r.teamId;e.dispatch(m.Qv(i.data.meta));let o=e.getState().teams[a].name;switch(r.level){case S.e6.OWNER:e.dispatch(l.s.flash((0,c.t)("join_team_flash.as_owner.text",{teamName:o})));break;case S.e6.ADMIN:e.dispatch(l.s.flash((0,c.t)("join_team_flash.as_admin.text",{teamName:o})));break;default:e.dispatch(l.s.flash((0,c.t)("join_team_flash.text",{teamName:o})))}e.dispatch(_.x2({key:n}))}).catch(()=>{e.dispatch(_.of({key:n}))}),e.dispatch(f.mw(r))}),P=(0,p.nF)((e,r)=>{(0,i.sx)("file-browser-hydrate",{location:"team.onBatchJoin"});let n=(0,v.n1)(r.teamIds);(0,I._X)("onBatchJoinTeams").then(i=>{e.dispatch(m.Qv(i.data.meta));let a=r.teamIds.length;switch(r.level){case S.e6.OWNER:e.dispatch(l.s.flash((0,c.t)("join_team_batch_flash.as_owner.text",{teamCount:a})));break;case S.e6.ADMIN:e.dispatch(l.s.flash((0,c.t)("join_team_batch_flash.as_admin.text",{teamCount:a})));break;default:e.dispatch(l.s.flash((0,c.t)("join_team_batch_flash.text",{teamCount:a})))}e.dispatch(_.x2({key:n}))}).catch(()=>{e.dispatch(_.of({key:n}))}),e.dispatch(f.ii(r))});(0,p.nF)(e=>{let r=e.getState().currentUserOrgId;C.c.getTeamRoleRequestsOrgId({orgId:r}).then(r=>{e.dispatch(E.b({teamRoleRequests:r.data.meta}))})})},776130:(e,r,n)=>{n.d(r,{vp:()=>s,Pn:()=>l,HE:()=>d,O_:()=>c});var i=n(508242),a=n(896966),o=n(442313);function s(e,r,n){return e?{userId:e.id,orgId:r,teamId:n}:null}n(425642),n(376780),n(256432),n(494955);let l=(0,i.xx)(s);function c(e,r){let n=s(e.user,e.currentUserOrgId,e.currentTeamId);return!!n&&n.userId===r.userId&&(!!n.orgId&&n.orgId===r.orgId||!!n.teamId&&n.teamId===r.teamId)}function d(e,r,n,i){let s=(0,o.t)("navbar.workspaces.default_workspace_name");if(!r)return s;if(r.orgId){let i=n?.[r.orgId]||e.orgById[r.orgId];return i?.name||(0,o.t)("navbar.workspaces.default_org_workspace_name")}if(r.teamId){let n=i?.[r.teamId]||e.teams[r.teamId];return n?.name||(0,o.t)("navbar.workspaces.default_team_workspace_name")}return e.user?.id!=="-1"&&(0,a.Lo)("planSpaces","User with Plan Spaces enabled saw External Teams."),(0,o.t)("navbar.profile_switcher.your_teams")}},181427:(e,r,n)=>{n.d(r,{Ad:()=>w,Ir:()=>N,Jj:()=>I,bY:()=>y,dE:()=>C,m1:()=>S,nk:()=>E});var i=n(157907),a=n(351766),o=n(961736),s=n.n(o),l=n(95650),c=n(431118),d=n(442313),u=n(254310),p=n(918105),m=n(376780),h=n(746948),_=n(241917);n(447118);var g=n(867397),f=n(92537),E=(e=>(e.fileBrowserContextMenu="file_browser_context_menu",e.fileBrowserFavoritedContextMenu="file_browser_favorited_context_menu",e.fileBrowserTileActionMenu="file_browser_tile_action_menu",e.prototypeHeader="prototype_header",e.fullscreenToolbar="fullscreen_toolbar",e.expFigJamOnboardingShareVariant="exp_figjam_onboarding_share_variant",e.fullscreenCopyLinkButtonVisualBell="fullscreen_copy_link_button_visual_bell",e.prototypeCopyLinkButtonVisualBell="prototype_copy_link_button_visual_bell",e.customTemplatePublishNudge="custom_template_publish_nudge",e.expProTrialsV3CardStackWidget="exp_pro_trials_v3_card_stack_widget",e.editRequestTooltip="edit_request_tooltip",e.editRequestExternal="edit_request_external",e.shareToGoogleClassroomOnboarding="share_to_google_classroom_onboarding",e.googleClassroomIntegration="google_classroom_integration",e))(E||{});function y(e){return{...e,canEdit:!1,canEditCanvas:!1,hasEditRole:!1,hasViewRole:!1,canView:!1,canViewPrototype:!1,canViewPrototypeLinks:!1,canMove:!1,isOwner:!1,mainFileLinkExpirationConfig:null,passwordSetAt:null,passwordSetByUser:null,isPublishedHubFile:!1,folderAccessEnabled:!0,isDraftFileLG:!1,isAbandonedDraftFile:!1,mustUpgradeToShareDraft:!1}}function b(e){return{file:y(e),repo:null,rolesByUserId:{},fileRoleRequests:[],folder:null,folderRoles:[],isInDraftsFolder:!1,orgDraftsOwner:null,org:null,orgUser:null,currentOrg:null,team:null,workspace:null,orgs:{},dataLoaded:!1,fileSeenStatesByUserId:{},currentUser:null,sharedOrgLicenseGroupSetting:null,editorType:(0,_.wN)(e.editor_type),numProjectTeamMembersWithAccess:0}}function v(e){return e.fileLinkExpirationConfig||e.sourceFileLinkExpirationConfig}function T(e){return e.repo?.defaultFileKey===e.key}function I(e){let r=v(e),n=T(e),o=e.pwdConfig?.updatedAt||null,s=e.pwdConfig?.setByUser?(0,h.Um)(e.pwdConfig.setByUser):null,l=(0,u.X7)({oldValue:(0,h.tJ)(e),newValue:{...p.F.toSinatra(e),client_meta:e.clientMeta||"",created_at:e.createdAt?.toString()||"",creator_id:e.creator.id,description:e.description||"",is_template:!!e.trackTags?.isTemplate,last_published_at:e.lastPublishedAt,library_publish_scope_type:e.libraryKeyToFile?.libraryPublishScope?.publishScopeType,org_audience:!!e.orgAudience,starter_library_src_file_key:e.trackTags?.starterLibrarySrcFileKey,touched_at:"",trashed_at:e.trashedAt?e.trashedAt.toString():null,trashed_user_id:e.trashedUser?e.trashedUser.id:null,updated_at:e.updatedAt.toString(),checkpoint_token:"",edit_url:"",prototype_url:`${window.location.origin}/proto/${e.key}/${(0,c.sy)(e.name||"")}`,track_tags:"",url:`${window.location.origin}/file/${e.key}/${(0,c.sy)(e.name||"")}`},label:u.A5.figFileWithFilePermissionsExtraFromLivegraph.figFile,contextArgs:{fileKey:e.key},enableFullRead:(0,i.k)().types_convergence_to_figfile,maxReports:4});return{canEdit:e.canEdit,canEditCanvas:e.canEditCanvas,hasEditRole:e.hasEditRole,hasViewRole:e.hasViewRole,canView:e.canView,canViewPrototype:e.canViewPrototype,canViewPrototypeLinks:e.hasViewPrototypeRole,canMove:e.canMove,passwordSetAt:o,passwordSetByUser:s,isOwner:n?!!e.repo?.roleOnObjectForUser?.isOwnerOfResource:!!e.roleOnObjectForUser?.isOwnerOfResource,isPublishedHubFile:!!e.publishedHubFile&&!e.publishedHubFile.unpublishedAt,mainFileLinkExpirationConfig:(0,h.Nl)(r),folderAccessEnabled:e.folderAccessEnabled&&(0,a.oA)(e.folderAccessEnabled)||!1,isDraftFileLG:e.isDraftFile&&(0,a.oA)(e.isDraftFile)||!1,isAbandonedDraftFile:e.isAbandonedDraftFile||!1,mustUpgradeToShareDraft:(0,a.oA)(e.mustUpgradeToShareDraft)||!1,...l}}function S(e,r){if("loaded"!==e.status)return b(r);let n=e.data.file;if(!n)return b(r);let i=v(n),o=T(n),s="loaded"===e.status&&e.data.file?I(e.data.file):y(r),l={};n.repo&&n.repo.roles.forEach(e=>{e.userId&&(l[e.userId]=e)});let c=n.project,d=null;c&&(d=c.teamAccess);let u=new Set,p={};n.project&&n.project.roles.forEach(e=>{e.userId&&(p[e.userId]=e,u.add(e.userId))});let E={};n.team&&n.team.roles.forEach(e=>{e.userId&&(E[e.userId]=e,d&&d!==m.eD.TEAM_ACCESS_DISABLED&&u.add(e.userId))});let S={};(o?n.repo.roles:n.roles).forEach(e=>{let r=e.user?(0,h.Um)(e.user):null;if(r){let n=e.user?.orgUser||e.user?.guestOrgUser,i=l[r.id],a=E[r.id],o=p[r.id],s=e.user?.teamUser?{...e.user.teamUser,designPaidStatus:e.user.teamUser.designPaidStatus,whiteboardPaidStatus:e.user.teamUser.whiteboardPaidStatus}:null,c=(0,h.aU)(e,r,n||null,s||null);S[r.id]=c.pending?c:{...c,folderLevel:o?.level||null,teamLevel:a?.level||null,repoLevel:i?.level||null}}else e.pending&&(S[`pending-${e.id}`]=(0,h.aU)(e,null,null,null))});let w={};(0,g.zb)(r)&&n.fileSeenStates.forEach(e=>{let r=e.user?(0,h.Um)(e.user):null;if(r){let n=l[r.id],i=E[r.id],a=p[r.id],o=(0,h.WP)(e,r);w[o.user_id]={...o,folderLevel:a?.level||null,teamLevel:i?.level||null,repoLevel:n?.level||null}}});let C={};e.data.currentUser?.allBaseOrgUsers&&e.data.currentUser.allBaseOrgUsers.forEach(e=>{e.org&&(C[e.org.id]={})});let N=n.repo?{...(0,h.Xs)(n.repo),canEdit:n.repo.canEdit,mainFileLinkExpirationConfig:(0,h.Nl)(i)}:null;if(A(i)){let e={link_access:i.prevPrivateLinkAccess,proto_link_access:i.prevPrivateProtoLinkAccess,org_browsable:i.prevOrgBrowsable};s={...s,...e},N&&(N={...N,...e})}let L=n.project?.orgDraftsFolderOwnerBaseOrgUser?{id:n.project.orgDraftsFolderOwnerBaseOrgUser.id,design_paid_status:n.project.orgDraftsFolderOwnerBaseOrgUser.accountType,whiteboard_paid_status:n.project.orgDraftsFolderOwnerBaseOrgUser.whiteboardPaidStatus||m.El.STARTER,user_id:n.project.orgDraftsFolderOwnerBaseOrgUser.userId,user:(0,h.Um)(n.project.orgDraftsFolderOwnerBaseOrgUser.user)}:null;var O=void 0;n.org&&null!==n.org.imgUrl&&(O=n.org.imgUrl);let R=n.org&&n.org.k12GoogleOrg&&(0,a.oA)(n.org.k12GoogleOrg);return{file:s,repo:N,rolesByUserId:S,fileSeenStatesByUserId:w,fileRoleRequests:n.fileRoleRequests,folder:c&&{name:c.path,is_view_only:!!c.viewOnlyAt,is_invite_only:!!c.inviteOnlyAt,team_id:c.teamId,team_access:d,canRead:c.canRead&&(0,a.oA)(c.canRead)||!1},folderRoles:c&&c.roles||[],isInDraftsFolder:(0,f.VA)(c),orgDraftsOwner:L,org:n.org?{id:n.org.id,name:n.org.name,img_url:O,domain_capture:!!n.org.domainCapture,workshop_enabled:!n.org.workshopDisabledAt,invite_whitelist_guest_invite_setting:n.org.inviteWhitelist?.guestInviteSetting,figjam_disabled_at:n.org.figjamDisabledAt,org_domains:(0,h.vy)(n.org.orgDomains),bigma_enabled:!!n.org.bigmaEnabledAt,k12_google_org:!!R}:null,orgUser:n.org?.currentBaseOrgUser?{id:n.org.currentBaseOrgUser.id,org_id:n.org.id,user_id:e.data.currentUser?.id,permission:n.org.currentBaseOrgUser.permission,license_group_member:n.org.currentBaseOrgUser.licenseGroupMember?{license_group_id:n.org.currentBaseOrgUser.licenseGroupMember.licenseGroupId}:void 0,design_paid_status:n.org.currentBaseOrgUser.designPaidStatus,whiteboard_paid_status:n.org.currentBaseOrgUser.whiteboardPaidStatus}:null,currentOrg:e.data.org?{domain_capture:!!e.data.org.domainCapture,id:e.data.org.id,invite_whitelist_guest_invite_setting:e.data.org.inviteWhitelist?.guestInviteSetting||null,figjam_disabled_at:e.data.org.figjamDisabledAt}:null,team:n.team?{id:n.team.id,name:n.team.name,img_url:n.team.imgUrl??void 0,subscription:n.team.subscription,student_team:!!n.team.studentTeamAt,grace_period_end:n.team.gracePeriodEnd?n.team.gracePeriodEnd.toISOString():null,canRead:n.team.canRead,org_access:n.team.orgAccess}:null,workspace:n.team?.workspace??null,orgs:C,dataLoaded:!0,currentUser:e.data.currentUser,sharedOrgLicenseGroupSetting:(0,h.Td)(n.org?{id:n.org.id,bigma_enabled:!!n.org?.bigmaEnabledAt}:null,n.org?.sharedOrgLicenseGroupSetting??e.data.org?.sharedOrgLicenseGroupSetting,n.team?.workspaceSharedSetting),editorType:(0,_.wN)(s.editor_type),numProjectTeamMembersWithAccess:u.size,activeProjectConnection:n.activeProjectResourceConnections?.[0]}}function w(e,r){let n;let i=null,a=null;return"loaded"===e.status&&"loaded"===r.status?(n="loaded",i=s()(e.data,r.data)):"errors"===e.status||"errors"===r.status?(n="errors",a=s()(e.errors||[],r.errors||[])):n="loading",{status:n,data:i,errors:a}}let A=e=>{if(!e)return!1;let{accessReverted:r,expiresAt:n}=e;return!r&&!!n&&(0,l.A)().isAfter(n)};function C({startingPointNodeId:e,startingPointsData:r}){if(r&&r.length>1&&e){let n=r.find(r=>r.id===e);if(n)return(0,d.t)("permissions.copy_link_button.visual_bell.copy_prototype_link_name",{name:n.name})}return(0,d.t)("permissions.copy_link_button.visual_bell.copy_prototype_link")}function N(e){return!!(!e.canEdit&&e.viewer_export_restricted&&e.link_access===m.PQ.INHERIT)}},21891:(e,r,n)=>{var i=n(751672);i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR},435378:(e,r,n)=>{n.d(r,{hP:()=>h,zD:()=>g}),n(848318),n(741789);var i=n(886450),a=n(673906);n(157907);var o=n(442313),s=n(665471),l=n(789269),c=n(16034);n(267670);var d=n(928100);n(387738),n(946795);var u=n(53818),p=n(974132);let m=e=>({prompt:e.description,negativePrompt:"blurry, bad",cfgScale:8,seed:Math.floor(1e4*Math.random()),height:e.size.height,width:e.size.width,numImages:1}),h=(0,u.n)(async(e,r,n=!1)=>{let i=(0,p.Lp)({clientLifecycleId:r}),a=(await s.Ay.design.generateImages({...m(e),markUserAction:n},i)).images[0];return`data:image/png;base64,${a}`});async function _({node:e,base64:r,name:n,scaleMode:o,backgroundFill:s,shouldContinueStream:c}){if(!e.isAlive)return;let u=await (0,d.xF)(r,["*"]),p=await (0,l.UD)(u,"image/png",n);if(!e.isAlive||!c())return;let m=[...e.fills];a.l7.ai("first-draft-set-image-fill",()=>{e.insertImageInFillPaint(p)});let h=e.fills[m.length],_=(0,i.B9)(h.image?.hash||[]);return a.l7.ai("first-draft-set-image-fill",()=>{h.imageScaleMode=o,e.fills=function(e,r){let n=e.findIndex(e=>"IMAGE"===e.type);return n>=0?e.map((e,i)=>i===n?r:e).flat():r}(m,s?[s,h]:[h]),e.name=n}),_}async function g({node:e,shouldContinueStream:r=()=>!0}){await _({node:e,base64:c.$,shouldContinueStream:r,name:(0,o.t)("ai_image_tools.blocked"),scaleMode:"FIT",backgroundFill:{type:"SOLID",color:{r:1,g:1,b:1,a:1},visible:!0,opacity:1,blendMode:"NORMAL"}})}async function f(e){let r=document.createElement("canvas"),n=r.getContext("2d");await new Promise((i,a)=>{let o=new Image;o.onload=function(){r.width=o.naturalWidth,r.height=o.naturalHeight,n.drawImage(o,0,0),i()},o.onerror=a,o.src=e});let i=r.width,a=r.height,o=n.getImageData(0,0,i,a),s=0,l=a,c=0,d=i,u=(e,r)=>0===o.data[r*i*4+4*e+3],p=e=>{for(let r=c;r<d;r++)if(!u(r,e))return!1;return!0},m=e=>{for(let r=s;r<l;r++)if(!u(e,r))return!1;return!0};for(;s<l&&p(s);)s++;for(;l-1>s&&p(l-1);)l--;for(;c<d&&m(c);)c++;for(;d-1>c&&m(d-1);)d--;let h=n.getImageData(c,s,d-c,l-s),_=r.ownerDocument.createElement("canvas");return _.width=h.width,_.height=h.height,_.getContext("2d").putImageData(h,0,0),_.toDataURL()}},49895:(e,r,n)=>{n(53620),n(741789);var i=n(992277),a=n(741419),o=n(673906),s=n(179703);n(157907),n(39773);var l=n(6819),c=n(502255);n(896966);var d=n(757033),u=n(574146);n(45584),n(369600);var p=n(834111),m=n(223291),h=n(53818);n(281542),n(902931),n(177017);var _=n(974132);function g(e,r,n){let i;let s=(0,_._F)(e,["FRAME","INSTANCE"]);i="LOCAL"===r.type?{type:a.AZ4.LOCAL,key:a.XJn.getKitKey(r.pageId)||""}:{type:a.AZ4.LIBRARY,key:r.key},o.l7.ai("first-draft-set-native-field",()=>{for(let e of s)e.firstDraftData={generationId:n??"",kit:i}})}n(435378);(0,h.n)(async function({dsKit:e,instanceNode:r,iconDescription:n,clientLifecycleId:l}){let d;if(!r.symbolId)return;let p=(0,s.UN)(),h=p.get(r.symbolId);if(!h)return;let{key:f,version:E}=(await m.Gh.getFirstDraftMatchGroup({kit_key:e.key,is_local:!1,group_name:_.C,description:n})).data.meta;if(!f){(0,c.$D)(i.e.AI_GENERATION,Error("first-draft: Grouped components: Could not find component for grouped component"),{extra:{dsKit:e,iconDescription:n,mainComponentId:h.guid}});return}let y=E?`/component/${f}/canvas?ver=${E}`:`/component/${f}/canvas`;if(!(d=await u.Eo.getCanvas({canvas_url:y})))return;let b=a.NfO.deserializeProductComponentFromBuffer(f,d),v=p.get(b);v&&"SYMBOL"===v.type&&o.l7.ai("first-draft-swap-grouped-component",()=>{r.swapComponent(v),g(r,e,l)})});(0,h.n)(async function(e,r){let n=(0,p.U2)(l.D?.getState().selectedView),i=await d.Ay.post(`/api/first_draft/kit_contents/${e.key}/detach_info`,{keys:r,file_key:n});return i.data?.meta?.should_detach??[]})},233516:(e,r,n)=>{n.d(r,{Py:()=>S,RI:()=>v,gZ:()=>T});var i=n(53620),a=n(171638),o=n(445777),s=n(902931),l=n(179703),c=n(157907),d=n(751672),u=n(974132),p=n(409229),m=n(760013),h=n(261453);function _(e){return e.classPropName??"className"}function g(e){if("INSTANCE"===e.type&&e.symbolId){let r=(0,i.getComponentInfoById)(e.symbolId,{enableTsArrays:!!(0,c.k)().first_draft_ts_arrays});if(r?.jsxName)return r.jsxName}let r=e.getSharedPluginData("jsx","type");return r&&"HStack"!==r&&"VStack"!==r?r:null}function f(e,r){let n={};if(!r.skipNodeIds&&(!r.skipNodeIdsWithoutType||g(e))&&(n.id=(0,l.UN)().developerFriendlyIdFromGuid(e.guid)),r.includeName&&(n.name=e.name),r.includeType&&!("INSTANCE"===e.type&&!r.detachInstances)){let r=g(e);r&&(n.type=r)}if("DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo){let i=e.componentPropertyReferences();if(i&&"visible"in i){let e=i.visible,a=r.componentDefinitionTypeInfo.parsedDefs.find(r=>r.rawProp===e);a&&(n.visible=`{${b(a.devFriendlyProp)}}`)}}return n}let E=["SYMBOL","INSTANCE","FRAME","GROUP","SECTION","RECTANGLE","ELLIPSE","LINE"];function y(e,r){let n=f(e,r);n.type=e.type;let i=(0,a.Ed)(e,{...d.LW,position:!0,size:!0});return i.length&&(n[_(r)]=i.join(" ")),`<Unhandled ${(0,m.d)(n)} />`}function b(e){let r="DERIVED_BOOLEAN"===e.type?e.devFriendlyProp:e,n=r.key;if("index"in r){if(!(0,c.k)().first_draft_ts_arrays)return r.nonArrayKey;n+=`[${r.index}]`}return"DERIVED_BOOLEAN"===e.type?`!!${n}`:n}function v(e,r){if("INSTANCE"!==e.type)throw Error(`Expected INSTANCE, got ${e.type} for node ${e.guid}`);if(!e.symbolId)throw Error(`INSTANCE has no symbolId ${e.guid}`);let n=(0,i.getComponentInfoById)(e.symbolId,{enableTsArrays:!!(0,c.k)().first_draft_ts_arrays});if(!n)throw Error(`Could not get typeInfo for component ${e.symbolId}`);let o=f(e,r);if(!r.skipClassNames){let n=(0,a.Ed)(e,{...d.LW,position:!0});n.length&&(o[_(r)]=n.join(" "))}let p=(0,u.vR)(n);if(p&&e.symbolId){let r=(0,u.So)(e.symbolId,"SYMBOL");return Object.assign(o,(0,u.Kp)(p,r)),`<${(0,u.PJ)(p)} ${(0,m.d)(o)}/>`}Object.assign(o,function e(r,n,a){if(!r.symbolId)return{};let o=!!(0,c.k)().first_draft_ts_arrays,d=(0,i.getComponentInfoById)(r.symbolId,{enableTsArrays:o});if(!d)throw Error(`Could not find mainComponent for node ${r.guid}`);if(!(0,l.UN)().get(r.symbolId))throw Error(`Could not find symbol ${r.symbolId} for node ${r.guid}`);let p=(0,u.Au)(r.guid,["INSTANCE"]),m={};p.forEach(e=>{let r=e.componentPropertyReferences();"mainComponent"in r&&(m[r.mainComponent]=e.visible)});let h={};for(let[e,n]of Object.entries(r.componentProperties()))h[(0,i.cleanComponentPropNameForUsage)(e)]=n;let _={},g={};for(let e of d.parsedDefs){if("DERIVED_BOOLEAN"===e.devFriendlyProp.type)continue;let i="ARRAY"===e.devFriendlyProp.type?e.devFriendlyProp.nonArrayKey:e.devFriendlyProp.key;if(i in h){if("SIMPLE"===e.devFriendlyProp.type){let r=h[i].value;(n||e.def.defaultValue!==r)&&(g[i]=r);continue}if("SIMPLE_CHOICE"===e.devFriendlyProp.type){let r=e.devFriendlyProp.validOptions;if("INSTANCE_SWAP"===e.def.type){let e=(0,s.c)(h[i].value);if(!e)throw Error("Could not find component for componentProp");if("SYMBOL"===e.type){let n=Object.values(e.variantProperties??{})[0];-1!==r.indexOf(n)?g[i]=n:console.error(`Could not find ${n} in ${JSON.stringify(r)}`)}continue}if("VARIANT"===e.def.type){let e=h[i].value;-1!==r.indexOf(e)?g[i]=e:console.error(`Could not find ${e} in ${JSON.stringify(r)}`)}}if("GROUPED_INSTANCE_SWAP"===e.def.type&&a){let r=h[i].value;if(n||e.def.defaultValue!==r){let n=(0,l.UN)().get(r);if(!n)throw Error(`Could not find icon symbol ${r}`);if(!m[e.rawProp])continue;let a={description:n.name};o&&"ARRAY"===e.devFriendlyProp.type?g[e.devFriendlyProp.key]=[...g[e.devFriendlyProp.key]??[],a]:g[i]=a}}}if("IMAGE"===e.def.type){if(a){g[i]={id:"0"};continue}let n=e.def.guidByParentComponentId[r.symbolId];if(n){let e=(0,u.uN)(r.guid,n);if(e){let r=(0,l.UN)().get(e),n=r?w(r):null;n&&(g[i]={description:n})}}}else if("NESTED_INSTANCE"===e.def.type)for(let r of Object.values(e.def.guidByParentComponentId))_[r]=e}let f=(0,l.UN)().developerFriendlyIdFromGuid(r.guid),E=f.startsWith("I")?`${f};`:`I${f};`;for(let s of(0,u.g5)(r.guid)){let r=(0,l.UN)().developerFriendlyIdFromGuid(s.guid).replace(E,"").split(";"),c=r[0];if(c&&1===r.length&&s.isBubbled&&s.symbolId){let r=e(s,n,a);if(Object.keys(r).length){let e=_[c];e&&"key"in e.devFriendlyProp?"ARRAY"===e.devFriendlyProp.type?o?g[e.devFriendlyProp.key]=[...g[e.devFriendlyProp.key]??[],r]:g[e.devFriendlyProp.nonArrayKey]=r:g[e.devFriendlyProp.key]=r:g[(0,i.cleanComponentPropNameForUsage)(s.name)]=r}}}if(o)for(let[e,r]of Object.entries((0,i.groupByCommonPrefixSorted)(Object.keys(g))))for(let n of(g[e]=r.map(e=>g[e]),r))delete g[n];return g}(e,r.includeDefaultValues??!1,r.includeCustomImageAndIconProps??!1));let h="";if("DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo){let a=e.componentPropertyReferences().mainComponent,s=r.componentDefinitionTypeInfo.parsedDefs.find(n=>{if(e.isBubbled&&"NESTED_INSTANCE"===n.def.type){for(let a of(0,i.getInstanceIdsForDef)(r.componentDefinitionTypeInfo?.componentId??"",n))if(a===e.guid)return!0}return!!a&&n.rawProp===a});if(s){if("SLOT"===s.def.type)return`{${b(s.devFriendlyProp)}}`;if(1===n.parsedDefs.length){let e=n.parsedDefs[0].devFriendlyProp.key;e in o?o[e]=`{${b(s.devFriendlyProp)} ?? ${JSON.stringify(o[e])}}`:o[e]=`{${b(s.devFriendlyProp)}}`}else h=`{...${b(s.devFriendlyProp)}}`}}return`<${[n.jsxName,(0,m.d)(o),h].filter(Boolean).join(" ")} />`}function T(e,r){return function(e,r={},n={includePropsType:!1},a){if(!("SYMBOL"===e.type||e.isStateGroup))throw Error(`Expected SYMBOL or isStateGroup, got: ${e.type}`);let s=a??(0,i.getComponentInfoById)(e.guid,{enableTsArrays:!!(0,c.k)().first_draft_ts_arrays});if(!s)throw Error(`Could not find typeInfo for node: ${e.guid}`);let l=Object.values(s.prefixTypes),d={...r,componentUsageOrDefinition:"DEFINITION",componentDefinitionTypeInfo:s},m=new h.f,_=s.parsedDefs.map(e=>"DERIVED_BOOLEAN"===e.devFriendlyProp.type?"":"SIMPLE_CHOICE"===e.devFriendlyProp.type?"VARIANT"===e.def.type&&"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"GROUPED_INSTANCE_SWAP"===e.devFriendlyProp.type||"IMAGE"===e.devFriendlyProp.type?e.devFriendlyProp.key:"SIMPLE"===e.devFriendlyProp.type?"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"ARRAY"===e.devFriendlyProp.type?(0,c.k)().first_draft_ts_arrays?0!==e.devFriendlyProp.index?"":e.devFriendlyProp.key:e.devFriendlyProp.nonArrayKey:void(0,o.xb)(e.devFriendlyProp)).filter(Boolean);if(n.includePropsType?(_.length>0&&s.propsTypeRepr.typeDefBody&&(m.append(`type ${s.jsxName}Props = `),m.append((0,p.CT)(s.propsTypeRepr.typeDefBody)),m.newline()),m.append(`function ${s.jsxName}(`),_.length>0&&(m.append(`{ ${_.join(", ")} }`),m.append(`: ${s.jsxName}Props`)),m.append(") {")):(m.append(`const ${s.jsxName}: React.FC<${s.propsTypeRepr.typeDefBody??"{}"}> = (`),_.length>0&&m.append(`{${_.join(", ")}}`),m.append(") => {")),m.newline(),"SYMBOL"===e.type)m.append(d.formatJSX?(0,p.uG)(I(e,d)):`  return ${I(e,d)}`),m.newline(),m.append("}");else if(e.isStateGroup){let r=!0;if((0,c.k)().first_draft_serialize_all_variants){for(let n of(0,u.Au)(e.guid,["COMPONENT"])){if("SYMBOL"!==n.type)continue;let e=n.variantProperties();e&&(r&&d.formatJSX&&m.append(p.BH),r||m.append(" else "),m.append("if ("),m.append(Object.entries(e).map(([e,r])=>`${(0,i.toCamelCase)(e)} === ${JSON.stringify(r)}`).join(" && ")),m.append(") {"),d.formatJSX?(m.newline(),m.append((0,p.C5)((0,p.uG)(I(n,d)),p.BH)),m.newline(),m.append(`${p.BH}}`)):(m.append(`    return ${I(n,d)}`),m.newline(),m.append("}")),r=!1)}d.formatJSX?(m.newline(),m.append(`${p.BH}return null`)):m.append("  return null;")}else{let r=e.defaultVariant;r?m.append(d.formatJSX?(0,p.uG)(I(r,d)):`  return ${I(r,d)}`):m.append("return null")}m.newline(),m.append("}")}return{nodeId:e.guid,prefixTypes:d.formatJSX?l.map(e=>(0,p.S3)(e)):l,jsxStr:m.toString()}}(e,{skipNodeIds:!0,autoLayoutTagName:"div",frameTagName:"div",tailwindOptions:{size:!0,position:!0,flex:!0,radius:!1,color:!1,typography:!1},formatJSX:!0},{includePropsType:!0},r)}function I(e,r){if("SYMBOL"!==e.type)throw Error(`Unexpected node type: ${e.type}`);return S(e,{...r,parentComponentId:e.guid,tailwindOptions:r.tailwindOptions?{...r.tailwindOptions,position:!1}:{position:!1}})||"null"}function S(e,r){if(!1===e.visible)return null;let n={indent:"",...r},o=[];switch(e.type){case"INSTANCE":case"SYMBOL":case"SECTION":case"GROUP":case"FRAME":{if("INSTANCE"===e.type&&!n.detachInstances){o.push(`${n.indent}${v(e,n)}`);break}if("SYMBOL"===e.type&&"DEFINITION"!==n.componentUsageOrDefinition){o.push(`${n.indent}${function(e,r){if("SYMBOL"!==e.type)throw Error(`Expected SYMBOL, got ${e.type} for node ${e.guid}`);let n=f(e,r),a=(0,i.getComponentInfoById)(e.guid,{enableTsArrays:!!(0,c.k)().first_draft_ts_arrays});if(!a)throw Error(`Could not find typeInfo for component: ${e.guid}`);return n.name=a.jsxName,"variantProperties"in e&&Object.assign(n,e.variantProperties),`<ComponentType ${(0,m.d)(n)} />`}(e,n)}`);break}let[r,s,l]=function(e,r){if(-1===E.indexOf(e.type))throw Error(`Unexpected parent node type ${e.type} for node ${e.guid}`);let n=f(e,r),o=w(e);o&&(n.description=o);let s=i.IMAGE_NAME_FORMAT.test(e.name),l=e.fills.some(e=>"IMAGE"===e.type),c=!!o||s||l,d=(0,a.Ed)(e,r.tailwindOptions);d.length&&(n[_(r)]=d.join(" "));let u=function(e,r,n,i){if(-1===E.indexOf(e.type))throw Error(`Unexpected parent node type ${e.type} for node ${e.guid}`);switch(e.type){case"SYMBOL":case"INSTANCE":case"FRAME":case"GROUP":if(n)return"Image";return r?i.autoLayoutTagName??"AutoLayout":i.frameTagName??"Frame";case"SECTION":return"Section";default:return"UNKNOWN"}}(e,-1!==d.indexOf("flex"),c,r);if(c&&"DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo&&r.parentComponentId){let i=r.componentDefinitionTypeInfo,a=r.parentComponentId,o=i.parsedDefs.find(r=>"IMAGE"===r.def.type&&r.def.guidByParentComponentId[a]===e.guid);if(o){let e=`{...${b(o.devFriendlyProp)}}`;return[`<${u} ${(0,m.d)(n)} ${e}>`,`<${u} ${(0,m.d)(n)} ${e} />`,`</${u}>`]}}return[`<${u} ${(0,m.d)(n)}>`,`<${u} ${(0,m.d)(n)} />`,`</${u}>`]}(e,n),d=e.childrenNodes.map(e=>S(e,{...n,tailwindOptions:{...n.tailwindOptions,position:!0},indent:n.formatJSX?n.indent+p.BH:n.indent}));if(d.length&&d.some(e=>e)){for(let e of(o.push(`${n.indent}${r}`),d))e&&o.push(e);o.push(`${n.indent}${l}`)}else o.push(`${n.indent}${s}`);break}case"TEXT":o.push(`${n.indent}${function(e,r){if("TEXT"!==e.type)throw Error(`Expected TEXT, got ${e.type} for node ${e.guid}`);let n=f(e,r),o=(0,a.Ed)(e,r.tailwindOptions);if(o.length&&(n[_(r)]=o.join(" ")),"DEFINITION"===r.componentUsageOrDefinition){let a=e.componentPropertyReferences();if(a&&"characters"in a){let e=a.characters,o=r.componentDefinitionTypeInfo&&r.componentDefinitionTypeInfo.parsedDefs.find(r=>r.rawProp===e),s=o?b(o.devFriendlyProp):(0,i.cleanComponentPropNameForUsage)(e);return`<Text ${(0,m.d)(n)}>{${s}}</Text>`}}let s=e.characters&&e.characters.includes('"')?`{${JSON.stringify(e.characters)}}`:e.characters??"";return`<Text ${(0,m.d)(n)}>${s}</Text>`}(e,n)}`);break;case"RECTANGLE":case"ROUNDED_RECTANGLE":case"LINE":case"ELLIPSE":o.push(`${n.indent}${function(e,r){if(!("ELLIPSE"===e.type||"RECTANGLE"===e.type||"ROUNDED_RECTANGLE"===e.type||"LINE"===e.type))throw Error(`Unexpected standalone node type ${e.type} for node ${e.guid}. Expected ELLIPSE, RECTANGLE, or LINE`);let n=f(e,r),i=(0,a.Ed)(e,r.tailwindOptions);switch(i.length&&(n[_(r)]=i.join(" ")),e.type){case"ELLIPSE":return`<Ellipse ${(0,m.d)(n)}/>`;case"ROUNDED_RECTANGLE":case"RECTANGLE":return`<Rectangle ${(0,m.d)(n)}/>`;case"LINE":return`<Line ${(0,m.d)(n)}/>`;default:return y(e,r)}}(e,n)}`);break;default:o.push(`${n.indent}${y(e,n)}`)}return o.length>0?n.formatJSX?o.join("\n"):o.join(""):null}function w(e){return"fills"in e&&e.fills.some(e=>"IMAGE"===e.type)&&"true"===e.getSharedPluginData("jsx","isImage")&&e.fills.find(e=>"IMAGE"===e.type)&&(e.getSharedPluginData("jsx","description")||e.getSharedPluginData("jsx","altText"))||null}},447172:(e,r,n)=>{n.d(r,{Qy:()=>m,v$:()=>h});var i=n(445777),a=n(741419),o=n(673906),s=n(751630),l=n(420647),c=n(179703),d=n(974132),u=n(992444),p=n(177017);function m(e,r=!1){let n=e[0];if(!n||"FRAME"!==n.type||n.isInstanceSublayer)return;let s=(0,c.UN)();if(r){let r=function(e){let r=function(e){switch(e){case"buildingBlocks":return p.vh;case"icons":return d.C;case"atoms":return"Atoms";case"copiedDesigns":return"Copied Designs";default:(0,i.xb)(e)}}(e),n=c.UN().getCurrentPage()?.childrenNodes.find(e=>"SECTION"===e.type&&e.name===r);if(n)return n;{let e=g((0,c.UN)().getCurrentPage());return o.l7.user("create-section",()=>{let n=(0,c.UN)().createNode("SECTION");return n.name=r,n.relativeTransform={...n.relativeTransform,m02:e.right()+100,m12:e.top()},n})}}("icons");for(let n of e)!function(e,r){let n=a.XJn.findIcons(e.guid),i=(0,c.UN)(),o=n.map(e=>i.get(e)),s={x:g(r).right()+50,y:50},l={};for(let e of o){if(!e)continue;let n=a.XJn.findSimilarNodes(e.guid,r.guid,!1,!0,!1),o=n[0]?i.get(n[0]):null;o||((o=i.createComponentFromNode(e.clone())).visible=!0,r.appendChild(o),o.relativeTransform={...o.relativeTransform,m02:s.x,m12:s.y},s.y+=o.size.y+20),l[e.guid]=o.guid,_(e,o)}}(n,r)}let l=n.absoluteBoundingBox,u=s.createComponentFromNode(n.clone());u.visible=!0,s.getCurrentPage()?.appendChild(u),u.x=l.x+l.w+200,u.y=l.y;let f=h(e,u);return{component:u,nodeMapping:f}}function h(e,r){let n=new Map;for(let i of e){let e=_(i,r);e&&(n=new Map([...n,...e]))}return u.Y5.commit(),n}function _(e,r){let n=e.parentNode;if(!n||n.isPrimaryInstance||n.isInstanceSublayer||"SYMBOL"!==r.type)return;let i=n.childrenGuids.findIndex(r=>r===e.guid),o=r.createInstance();if(!o)return;let s=a.XJn.applyOverridesToInstanceToMatchNode(o.guid,e.guid);return n.insertChild(o,i+1),"NONE"===n.stackMode&&(o.x=e.x,o.y=e.y),o.visible=e.visible,e.removeSelfAndChildren(),s}function g(e){let r=null;for(let n of e.childrenNodes){let e=new s.r(new l.M(n.x,n.y),new l.M(n.size.x,n.size.y));r=r?r.unionWith(e):e}return r??new s.r}},561298:(e,r,n)=>{n.d(r,{Hj:()=>f});var i=n(992277),a=n(741419),o=n(157907),s=n(408095),l=n(502255),c=n(896966),d=n(241636),u=n(931516),p=n(223291),m=n(253305),h=n(895927);function _(e,r){if(!r)return{publishAssets:[],unpublishAssets:[]};let n=new Set(r.added.concat(r.modified)),i=[],a=r.removed;return e.forEach(e=>{n.has(e.key)&&i.push(e)}),{publishAssets:i,unpublishAssets:a}}function g(e){return e&&e!==u.E8.DELETED&&e!==u.E8.NOT_STAGED}async function f(e,r,n,i,s){let l=a.XJn.getKitKey(e);if(!l)return;let u=n.publishType,m=u===h.tf.LOCAL_GENERATION,f=await (0,d.LQ)(e);if(0===f.length)return;let y={},b=await (0,d.vg)(e),v={},T=a.XJn.getLocalExamples(e,f),I={},S=(0,d.pX)(),w={};!s&&(f.forEach(e=>{(u!==h.tf.LIBRARY_PUBLISH||g((n.localComponents[e.componentId]||n.localStateGroups[e.componentId])?.status))&&e.version&&(y[e.key]=e.version)}),b.forEach(e=>{(u!==h.tf.LIBRARY_PUBLISH||g(n.localComponents[e.defaultNodeId]?.status))&&e.version&&(v[e.key]=e.version)}),T.forEach(e=>{I[e.key]=e.version}),S&&(u===h.tf.LIBRARY_PUBLISH&&g(n.localVariableSets[S.nodeId]?.status),w[S.key]=S.version));let A=await p.Gh.postFirstDraftPublishStatus({productComponentKeyToVersion:y,groupedComponentKeyToVersion:v,exampleKeyToVersion:I,variableSetKeyToVersion:w,publishType:u,kitKey:l}),{publishAssets:C,unpublishAssets:N}=_(f,A.data.meta.product_component_status),{publishAssets:L,unpublishAssets:O}=_(b,A.data.meta.grouped_component_status),{publishAssets:R,unpublishAssets:P}=_(T,A.data.meta.example_status),D=await E(R),M={};for(let e of R){let n=(0,o.k)().first_draft_direct_gen?await (0,d.tV)(e.nodeId):await (0,d.au)(r,e.nodeId);n&&(M[e.key]=n)}let{publishSets:k,unpublishSets:F}=function(e,r){if(!r)return{publishSets:[],unpublishSets:[]};let n=r.removed;return{publishSets:e.filter(e=>!n.includes(e.key)),unpublishSets:n}}(S?[S]:[],A.data.meta.variable_set_status);if(k.length>0&&!i&&!s){(0,c.x1)("First draft publish","Skipping kit publish because no theme variables were supplied");return}let x=!0===(0,o.k)().first_draft_direct_gen&&n.publishType===h.tf.LIBRARY_PUBLISH&&!1===m&&n.isDirectGenCompatible;return{kit:{name:r,key:l,is_local:m,use_direct_generation:x},publish_product_components:C.map(e=>({name:e.name,jsx_name:e.jsxName,key:e.key,version:e.version,description:e.description,type_info:{jsx_name:e.jsxName,type_str:e.typeStr,jsx_component_def:e.jsxComponentDef?.jsxStr,prefix_types:e.prefixTypes,prefix_comments:e.prefixComments,description:e.description,type_info_version:(0,o.k)().first_draft_direct_gen?h.Rd:h.Q6}})),unpublish_product_components:N,publish_grouped_components:L.map(e=>({name:e.name,key:e.key,version:e.version,description:e.description,group_name:e.groupName})),unpublish_grouped_components:O,publish_examples:R.map(e=>({key:e.key,version:e.version,example_info:{componentKeys:e.componentKeys,componentJsxNames:e.componentJsxNames,nodeId:e.nodeId,name:e.name,jsxInfo:M[e.key]??null},thumbnail_url:D[e.key]})),unpublish_examples:P,publish_variable_sets:i?k.map(e=>({key:e.key,name:e.name,version:e.version,theme_info:{theme_info_version:h.$5,customizable_variables:i,modes:e.modes}})):[],unpublish_variable_sets:F}}async function E(e){let r={};if(0===e.length)return r;let n={};for(let r of e){let[e,i]=a.Vzr.generateThumbnailForNode(r.nodeId,768,768,1,{});n[r.key]=i}let o=(await m.b.getUploadThumbnailsPresignedPostUrls(Object.keys(n).length)).data.meta.presigned_posts;return o.length<Object.keys(n).length?(0,l.$D)(i.e.AI_GENERATION,Error("Mismatch between number of thumbnails and presigned URLs")):await Promise.allSettled(Object.entries(n).map(async([e,n],a)=>{let{url:c,fields:d}=o[a];try{let a=await (0,s.ET)(i.e.AI_GENERATION,"uploadThumbnails",c,d,n,"application/octet-stream");r[e]=a}catch(e){(0,l.$D)(i.e.AI_GENERATION,Error("Unable to upload example thumbnail to S3"))}})),r}},193590:(e,r,n)=>{n(673906),n(179703),n(543072),n(139208);var i=(e=>(e[e.XXXS=4]="XXXS",e[e.XXS=8]="XXS",e[e.XS=12]="XS",e[e.S=16]="S",e[e.M=24]="M",e[e.L=32]="L",e[e.XL=48]="XL",e[e.XXL=64]="XXL",e[e.XXXL=96]="XXXL",e))(i||{})},34823:(e,r,n)=>{n.d(r,{Cr:()=>o,ZO:()=>a,k_:()=>i}),n(992277),n(308769),n(741419),n(673906),n(758159),n(179703),n(579020),n(502255),n(177017),n(49895),n(974132),n(992444),n(104720),n(678342),n(276482);let i=6,a={fontFamilyTitle:"\u2726/font/title/bold/family",fontFamilyBody:"\u2726/font/body/regular/family",fontFamilyLabel:"\u2726/font/label/medium/family",textColor:"\u2726/color/1/content-primary",cornerRadius:"\u2726/cornerRadius/small",cornerRadiusFallback:"\u2726/cornerRadius/large",bgBrandColor:"\u2726/color/1/bg-brand",bgColor:"\u2726/color/2/bg-primary"},o={fontFamilyTitle:"\u2726/font/title/bold/family",fontFamilyBody:"\u2726/font/body/regular/family",fontFamilyLabel:"\u2726/font/label/medium/family",textColor:"\u2726/color/1/text-default",cornerRadius:"\u2726/cornerRadius/medium",cornerRadiusFallback:"\u2726/cornerRadius/large",bgBrandColor:"\u2726/color/1/bg-brand",bgColor:"\u2726/color/2/bg-primary"}},291314:(e,r,n)=>{var i=(e=>(e.LIGHT="light",e.DARK="dark",e))(i||{}),a=(e=>(e.DEFAULT="default",e.BRAND="brand",e))(a||{}),o=(e=>(e.BG="bg",e.CONTENT="content",e.BORDER="border",e))(o||{}),s=(e=>(e.PRIMARY="primary",e.SECONDARY="secondary",e.TERTIARY="tertiary",e))(s||{})},678342:(e,r,n)=>{n(1329),n(543072),n(314078),n(896966),n(291314)},276482:(e,r,n)=>{n(673906),n(758159),n(579020),n(543072),n(20191),n(21891),n(751672),n(193590),n(291314),n(678342);var i=(e=>(e.Mobile="mobile",e.Website="website",e))(i||{})},751672:(e,r,n)=>{n.d(r,{GS:()=>s,LW:()=>h,lu:()=>l,u7:()=>o,vj:()=>c});var i=n(878028);let a=i.z.object({type:i.z.string(),props:i.z.record(i.z.any())}).extend({children:i.z.lazy(()=>i.z.union([i.z.string().array(),a.array()]))});var o=(e=>(e.SPACING="spacing",e.CORNER_RADIUS="cornerRadius",e.FONT="font",e.COLOR="color",e.DARK_MODE="dark",e))(o||{}),s=(e=>(e.DEFAULT="default",e.SERIF="serif",e))(s||{}),l=(e=>(e.TITLE="title",e.BODY="body",e.LABEL="label",e))(l||{}),c=(e=>(e.BOLD="bold",e.MEDIUM="medium",e.REGULAR="regular",e))(c||{});let d=i.z.object({value:i.z.number(),units:i.z.enum(["RAW","PIXELS","PERCENT"])}),u=i.z.object({fontName:i.z.object({family:i.z.string(),style:i.z.string()}),letterSpacing:d.optional()}),p=i.z.object({r:i.z.number(),g:i.z.number(),b:i.z.number(),a:i.z.number()}),m=i.z.object({colorVariableMap:i.z.record(i.z.string(),p),numberVariableMap:i.z.record(i.z.string(),i.z.number()),fontVariableMap:i.z.record(i.z.string(),u).optional()});i.z.object({accentColor:p.optional(),darkMode:i.z.boolean(),variableMaps:m.optional()}),i.z.object({position:i.z.boolean(),size:i.z.boolean(),flex:i.z.boolean(),color:i.z.boolean(),radius:i.z.boolean(),typography:i.z.boolean()});let h={position:!1,size:!1,flex:!1,color:!1,radius:!1,typography:!1};i.z.object({nodeId:i.z.string().nullable(),jsxStr:i.z.string(),prefixTypes:i.z.array(i.z.string())});let _=i.z.object({children:i.z.string().optional(),className:i.z.string().optional()});i.z.object({componentName:i.z.string().optional(),overrides:i.z.record(_)}),i.z.object({key:i.z.string(),nodeId:i.z.string(),version:i.z.string(),descriptionLegacy:i.z.string(),componentKeys:i.z.array(i.z.string()),componentJSXNames:i.z.array(i.z.string())})},241636:(e,r,n)=>{n.d(r,{LQ:()=>b,_:()=>I,au:()=>L,pX:()=>S,tV:()=>C,vg:()=>y});var i=n(53620),a=n(975441),o=n(281542),s=n(992277),l=n(902931),c=n(741419),d=n(179703),u=n(157907),p=n(431035),m=n(502255),h=n(896966),_=n(177017),g=n(233516),f=n(974132);let E=e=>{let r=(0,d.UN)().get(e);return!!r&&(r.isStateGroup?r.childrenNodes.every(e=>e.isIconLikeContainer):r.isIconLikeContainer)};async function y(e){let{info:r}=await v({rootNodes:{dsKitKey:{type:"LOCAL",pageId:e},useAllPages:(0,u.k)().first_draft_publish_all_components,pageChildrenName:(0,u.k)().first_draft_publish_all_components?void 0:f.C},includeJSX:!1});return r.filter(e=>(0,u.k)().first_draft_publish_all_components?E(e.componentId):(0,i.isPartOfGroup)(e.componentGroupPath,f.C))}async function b(e){let r=(0,u.k)().first_draft_publish_all_components&&!e,{info:n}=await v({rootNodes:{dsKitKey:{type:"LOCAL",pageId:e},useAllPages:r},includeJSX:!!(0,u.k)().first_draft_direct_gen&&!!(0,u.k)().first_draft_full_component_def}),a=(0,_.VN)(e),o=await T(a,!0);return n.filter(e=>(0,u.k)().first_draft_publish_all_components?!E(e.componentId):(0,i.isPartOfGroup)(e.componentGroupPath,_.vh)).concat(o)}async function v(e){let r=(0,o.__)(e),n=(0,l.B)([...r],{followInstances:!1}).filter(e=>"SYMBOL"===e.type?e.isSymbolPublishable:!!e.isStateGroup&&!e.hiddenFromPublishing);return{info:await T(n,e.includeJSX)}}async function T(e,r){return(0,i.resetTypeInfoCache)(),(await Promise.all(e.map(async e=>{try{let n=(0,i.getTypeInfoCached)(e,{enableTsArrays:!!(0,u.k)().first_draft_ts_arrays});if(!r)return n;let a=(0,u.k)().first_draft_share_jsx?await (0,p.gZ)(e,{topLevelComponentProps:!0},{useDivTagsForFrames:!0,inlineVectorData:!1,useCustomGroupAndImageFormatForFirstDraft:!0}):(0,g.gZ)(e,n);return{...n,jsxComponentDef:a}}catch(r){(0,m.$D)(s.e.AI_GENERATION,r,{extra:{nodeId:e.guid}})}}))).filter(Boolean)}function I(){return c.CWU.getLocalVariableSetsInfo().filter(e=>!e.isSoftDeleted&&(0,f.n6)(e.name,_.i2)).map(e=>({key:e.keyForPublish,name:e.name,version:e.userFacingVersion,nodeId:e.id,defaultModeId:e.defaultModeID,modes:e.modes}))}function S(){let e=I().sort((e,r)=>e.nodeId.localeCompare(r.nodeId));if(0!==e.length&&!(e.length>1))return e[0]}async function w(e){return(await (0,p.oy)(e,{tailwind:!0,includeIDs:!1,topLevelComponentProps:!0,strict:!1,transformUnhandledNodes:!!(0,u.k)().first_draft_debug,useCustomGroupAndImageFormatForFirstDraft:!0,useDivTagsForFrames:!0})).jsxStr}async function A(e){return(0,u.k)().first_draft_share_jsx?await w(e):(0,g.Py)(e,{skipNodeIds:!0,autoLayoutTagName:"Frame",frameTagName:"Frame",formatJSX:!0,includeDefaultValues:!0,includeCustomImageAndIconProps:!0})}async function C(e){let r=(0,d.UN)().get(e);if(!r||"FRAME"!==r.type)return null;let n=await A(r);return n?{jsx:n,buildingBlockToRegion:{}}:null}function N(e){let{layoutName:r,header:n,mainContent:i,footer:a,sidebar:o}=e,s={};for(let e of(s[n.name]="header",i))s[e.name]="mainContent";if(o)for(let e of o.blocks)s[e.name]="sidebarContent";return s[a.name]="footer",{jsx:`<${r} header={${n.tag}} mainContent={[${i.map(e=>e.tag).join(", ")}]}${o?` sidebarContent={[${o.blocks.map(e=>e.tag).join(", ")}]} sidebarWidth={${o.width}}`:""} footer={${a.tag}} />`,jsxWithProps:`<${r} header={${n.tagWithProps}} mainContent={[${i.map(e=>e.tagWithProps).join(", ")}]}${o?` sidebarContent={[${o.blocks.map(e=>e.tagWithProps).join(", ")}]} sidebarWidth={${o.width}}`:""} footer={${a.tagWithProps}} />`,buildingBlockToRegion:s}}async function L(e,r){let n=async e=>{let r=(0,i.getComponentInfoById)(e.symbolId??"",{enableTsArrays:!!(0,u.k)().first_draft_ts_arrays});if(!r||r.componentType!==a.J.BUILDING_BLOCK)throw Error("Expected building block");return{name:r.jsxName,tag:`<${r.jsxName} />`,tagWithProps:(0,u.k)().first_draft_share_jsx?await w(e):(0,g.RI)(e,{skipNodeIds:!0,includeDefaultValues:!0,includeCustomImageAndIconProps:!0})}},o=e=>"FRAME"===e.type&&((0,f.n6)(e.name,"spacer")||(0,f.n6)(e.name,"filler"));try{let s=function(e){let r=e.toLowerCase();return r.includes("mobile")||r.includes("app")?"mobile":r.includes("site")?"website":"vstack-only"}(e);if("vstack-only"===s)return null;let l=(0,d.UN)().get(r);if(!l||"FRAME"!==l.type)return null;for(let e of function e(r){if(r.isPrimaryInstance)return[r];if(r.isInstanceSublayer)return[];let n=[];for(let i of r.childrenNodes)n.push(...e(i));return n}(l)){let r=(0,i.getComponentInfoById)(e.symbolId??"",{enableTsArrays:!!(0,u.k)().first_draft_ts_arrays});if(!r||r.componentType!==a.J.BUILDING_BLOCK)return null}if("VERTICAL"===l.stackMode&&l.childrenNodes.filter(e=>"INSTANCE"===e.type).length>=3&&l.childrenNodes.every(e=>"INSTANCE"===e.type||o(e))){let e=l.childrenNodes.filter(e=>"INSTANCE"===e.type),r=await Promise.all(e.map(n));return N({layoutName:"website"===s?"DesktopSingleCol":"MobileSingleCol",header:r[0],mainContent:r.slice(1,r.length-1),footer:r[r.length-1]})}if("VERTICAL"===l.stackMode&&3===l.childCount&&"INSTANCE"===l.childrenNodes[0].type&&"FRAME"===l.childrenNodes[1].type&&"VERTICAL"===l.childrenNodes[1].stackMode&&l.childrenNodes[1].childrenNodes.every(e=>"INSTANCE"===e.type||o(e))&&"INSTANCE"===l.childrenNodes[2].type){let e=await n(l.childrenNodes[0]),r=await n(l.childrenNodes[2]),i=l.childrenNodes[1].childrenNodes.filter(e=>"INSTANCE"===e.type),a=await Promise.all(i.map(n));return N({layoutName:"website"===s?"DesktopSingleCol":"MobileSingleCol",header:e,mainContent:a,footer:r})}if("website"===s&&"VERTICAL"===l.stackMode&&3===l.childCount&&"INSTANCE"===l.childrenNodes[0].type&&"FRAME"===l.childrenNodes[1].type&&"HORIZONTAL"===l.childrenNodes[1].stackMode&&2===l.childrenNodes[1].childCount&&l.childrenNodes[1].childrenNodes.every(e=>"FRAME"===e.type&&"VERTICAL"===e.stackMode&&e.childrenNodes.every(e=>"INSTANCE"===e.type))&&"INSTANCE"===l.childrenNodes[2].type){let e=await n(l.childrenNodes[0]),r=await n(l.childrenNodes[2]),i=l.childrenNodes[1].childrenNodes[0],a=l.childrenNodes[1].childrenNodes[1];if(!i||!a)return null;let o=i.absoluteRenderBounds.w<a.absoluteRenderBounds.w,s=o?a:i,c=o?i:a,d=c.absoluteRenderBounds.w,u=await Promise.all(s.childrenNodes.map(n)),p=await Promise.all(c.childrenNodes.map(n));return N({layoutName:o?"DesktopTwoColWithLeftSidebar":"DesktopTwoColWithRightSidebar",header:e,mainContent:u,footer:r,sidebar:{width:d,blocks:p}})}}catch(n){(0,h.xi)("getNodeJSXFromExample","unhandled error",{error:n,kitName:e,exampleNodeId:r})}return null}},287581:(e,r,n)=>{n.d(r,{Gs:()=>a});var i=n(878028);function a(e){return"INSTANCE"===e.type&&"true"===e.getSharedPluginData("first_draft_make_kit","is_kit_instance")}i.z.object({componentPropertyDefinitions:i.z.array(i.z.object({name:i.z.string(),type:i.z.string()})),componentPropertyReferences:i.z.record(i.z.string(),i.z.record(i.z.string(),i.z.string()))})},974132:(e,r,n)=>{n.d(r,{Au:()=>p,C:()=>_,Kp:()=>g,Lp:()=>v,PJ:()=>f,So:()=>T,_F:()=>I,g5:()=>m,iR:()=>y,n6:()=>h,uN:()=>S,vR:()=>b});var i=n(53620);n(741419);var a=n(179703),o=n(39773),s=n(896966),l=n(663689),c=n(441802),d=n(305719),u=n(369600);function p(e,r,n,i){if(!e)return[];let o=i??(0,a.UN)(),s=o.get(e);if(!s)return[];let l=s.findAllWithCriteriaGUIDs({types:r,...n}),c=[];for(let e of l){let r=o.get(e);r&&c.push(r)}return c}function m(e){let r=(0,a.UN)().get(e);return r?(r.update(),p(r.guid,["INSTANCE"])):[]}function h(e,r){return(e=e.replace(/[^0-9a-z]/gi,"").toLowerCase())===(r=r.replace(/[^0-9a-z]/gi,"").toLowerCase())}let _="Icons";function g(e,r){return{description:r.name||""}}function f(e){var r;return e=e.endsWith("s")?e.slice(0,e.length-1):e,`Custom${r=(r=(r=e).replace(/[^0-9a-z]/gi,"")).charAt(0).toUpperCase()+r.substr(1)}`}let E=[_];function y(e){for(let r of E)if((0,i.isPartOfGroup)(e,r))return r;return null}function b(e){return y(e.componentGroupPath)}function v({clientLifecycleId:e}){return{orgId:o.zl.get(c._s)||null,teamId:o.zl.get(u.As)||null,fileKey:o.zl.get(u.ze)||null,userId:o.zl.get(d.kS)||null,clientLifecycleId:e,trackingSessionId:(0,l.f)()}}function T(e,r){let n=(0,a.UN)().get(e);if(!n||n.type!==r)throw Error(`Unexpected node type for id=${e}. Expected ${r} got: ${n?.type}`);return n}function I(e,r,n,i){let a=[];if(r.includes(e.type)){if(n){if(n.sharedPluginData){let r=e.getSharedPluginDataKeys(n.sharedPluginData.namespace),i=n.sharedPluginData.keys||[];(0===i.length&&r.length>0||r.some(e=>i.includes(e)))&&a.push(e)}}else a.push(e)}return a.push(...p(e.guid,r,n,i)),a}function S(e,r){let n=(0,a.UN)().get(r);return n?n.getSublayerIdForInstanceOfSymbol(e):((0,s.xi)("first-draft","No component sublayer found for",{symbolSublayer:n}),null)}},777288:(e,r,n)=>{n.d(r,{C_:()=>c,WU:()=>m,cw:()=>p,hx:()=>h});var i=n(848318),a=n(111975),o=n(514375),s=n(857188);n(831932),n(719244),n(781806),n(461665);let l=[];function c(e,r){i.useEffect(()=>{if(r)return;let n=e.current;if(n)return function(e,r){let n={element:e};if(!l.length){l.push(n);return}for(let[r,{element:i}]of l.entries()){let a=i.compareDocumentPosition(e);if(a===Node.DOCUMENT_POSITION_PRECEDING||a===Node.DOCUMENT_POSITION_CONTAINS){if(l[r-1]?.element===e)return;l.splice(r,0,n);return}}l.push(n)}(n),()=>{(function(e){let r=l.findIndex(r=>r.element===e);l.splice(r,1)})(n)}},[e,r])}function d(e){var r;if(e.focus)return e.focus();let n=((r=e.element)?(0,a.Kr)(r,{getShadowRoot:!0})[0]:null)||e.element;return n?.focus(),n}function u(e){for(let[r,{element:n}]of l.entries())if(n.contains(document.activeElement)){let n=l.length,i=l[(n+r+("forward"===e?1:-1))%n],a=i&&d(i);if(a)return a}let r="forward"===e?l[0]:l[l.length-1];return r?d(r):null}function p(e){u("backward"),(0,o.f)(o.h.FOCUS_CYCLE_PREVIOUS_AREA,{key:e})}function m(e){u("forward"),(0,o.f)(o.h.FOCUS_CYCLE_NEXT_AREA,{key:e})}function h(e){let{e:r,onClickHandler:n,onEscapeHandler:i}=e;n&&r.keyCode===s.Uz.ENTER&&n(r),i&&r.keyCode===s.Uz.ESCAPE&&i(r)}},92537:(e,r,n)=>{n.d(r,{B_:()=>p,CI:()=>_,D:()=>s,Gi:()=>c,N5:()=>g,SS:()=>E,T9:()=>l,VA:()=>u,cU:()=>y,d:()=>d,gj:()=>m,jd:()=>v,oq:()=>f,sp:()=>h,ye:()=>b}),n(430285),n(493554),n(635547);var i=n(694253),a=n(931516),o=n(995946);function s(e,r){return c(e[r])}function l(e){return!!e&&""===e.path}function c(e){return!!e&&""===e.path}function d(){return`temp-${+new Date}`}function u(e){return e?.path===""}function p(e){return e?.path===""&&!!e?.teamId}function m(e,r,n,i){if(!e)return null;if(i)return r[i.drafts_folder_id]||null;for(let i in r){let a=r[i],s=n[i]?n[i][e]:null;if(!a.teamId&&""===a.path&&null==a.orgId&&s&&s.level===o.e6.OWNER)return a}return null}function h(e){return e&&!e.team_id&&""!==e.path&&!!e.org_id}function _(e){return e?.path===""?(0,a.Tb)():e?.path}function g(e,r){return null!=r&&r in e}function f(e,r){let n=r.folders[e];if(n&&n.org_id)return n.org_id;if(n&&n.team_id){let e=r.teams[n.team_id];if(e&&e.org_id)return e.org_id}}function E(e){return e.length<=0?"Please provide a name":e.length>255?"Sorry, name must be at max 255 characters.":e.match(/[\/\\:?*"|]/)?'The following characters are not allowed:  / : ? * " |':void 0}function y(e,r,n,a){let o=n&&(0,i.canViewTeam)(n,a);return r?`${location.origin}/files/${r}/project/${e}`:o?`${location.origin}/files/team/${n}/project/${e}`:a.user?.personal_drafts_folder_id===e?`${location.origin}/files/drafts-to-move`:`${location.origin}/files/project/${e}`}function b(e){return!!e&&!!e.team_id&&!e.path}function v(e){return!!e&&!!e.teamId&&!e.path}n(188591)},132073:(e,r,n)=>{n.d(r,{Zb:()=>f});var i=n(551316),a=n(208720),o=n(741419),s=n(615893),l=n(442313),c=n(697714),d=n(235441),u=n(355323),p=n(558870),m=(e=>(e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e[e.RIGHT=4]="RIGHT",e[e.LEFT=8]="LEFT",e[e.UP_RIGHT=5]="UP_RIGHT",e[e.UP_LEFT=9]="UP_LEFT",e[e.DOWN_RIGHT=6]="DOWN_RIGHT",e[e.DOWN_LEFT=10]="DOWN_LEFT",e))(m||{}),h=(e=>(e[e.NONE=0]="NONE",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e[e.BOTH=3]="BOTH",e))(h||{}),_=(e=>(e[e.NONE=0]="NONE",e[e.DECREASED=1]="DECREASED",e[e.INCREASED=2]="INCREASED",e))(_||{});class g{constructor(e){this.store=e,this.store=e,this.debounceNodeResizeUpdate=(0,i.s)(e=>{this.announceDomChange(o.x8F.NODE_RESIZED,e);let r=o.AlE.getActiveDocument();o.yGz.resetStoredSelectedNodeBounds(r)},200),this.debounceNodeMovementUpdate=(0,i.s)(e=>{this.announceDomChange(o.x8F.NODE_MOVED,e);let r=o.AlE.getActiveDocument();o.yGz.resetStoredSelectedNodeBounds(r)},200)}announceDomChange(e,r){let n=(0,d.XE)(this.store.getState().selectedView),i=this.store.getState();if(!i.screenreader.enabled)return;let a=function(e,r,n,i){let a=r.targetNodeType?E(r.targetNodeType,i):"";switch(e){case o.x8F.NODE_CREATED:if(r.targetNodeType===o.Z6A.STAMP&&r.stickableHostType)return(0,l.t)("fullscreen.accessibility.stamp_attached_announcement",{hostType:E(r.stickableHostType,i)});return(0,l.t)("fullscreen.accessibility.node_created_announcement",{node_type:a});case o.x8F.NODE_DELETED:return r.multiSelection?(0,l.t)("fullscreen.accessibility.multiple_node_deleted_announcement"):(0,l.t)("fullscreen.accessibility.node_deleted_announcement",{node_type:a});case o.x8F.TEXT_SELECTION:return(0,l.t)("fullscreen.accessibility.next_text_node_announcement",{nodeType:a});case o.x8F.TOOL:if(r.targetNodeType===o.Z6A.STAMP)return;return r.targetNodeType!==o.Z6A.NONE?(0,l.t)("fullscreen.accessibility.tool_selected",{nodeType:a,shortcut:(0,u.c1)(n,"toggle-menu")}):(0,l.t)("fullscreen.accessibility.tool_unselected");case o.x8F.TABLE_CELL_TEXT_SELECTION:if(null!=r.tableCellCol&&null!=r.tableCellRow)return(0,l.t)("fullscreen.accessibility.next_table_cell_announcement",{r:r.tableCellRow,c:r.tableCellCol});return(0,l.t)("fullscreen.accessibility.next_text_node_announcement",{nodeType:a});case o.x8F.NODE_RESIZED:let s,c,d;let p=r.nodeSizeDelta;if(!p)return;let m=0,h=0,_=0;switch(0!==p.x&&(m|=1,h=p.x>0?2:1),0!==p.y&&(m|=2,_=p.y>0?2:1),m){case 0:return;case 1:s=(0,l.t)("fullscreen.accessibility.node_resize_horizontal"),c=y(h),d=Math.abs(p.x);break;case 2:s=(0,l.t)("fullscreen.accessibility.node_resize_vertical"),c=y(_),d=Math.abs(p.y);break;default:let g=Math.abs(p.x),f=y(h),b=Math.abs(p.y),v=y(_);return(0,l.t)("fullscreen.accessibility.node_resize_bidirectional",{nodeType:a,resizedComparisonX:f,nodeResizeXDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:g}),resizedComparisonY:v,nodeResizeYDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:b})})}return(0,l.t)("fullscreen.accessibility.node_resize_unidirectional",{nodeType:a,nodeSizeDelta:d,resizeComparison:c,nodeDirection:s});case o.x8F.NODE_MOVED:let T,I,S=0,w=r.nodeMovementDelta;if(!w)return;switch(w.x>0?S|=4:w.x<0&&(S|=8),w.y<0?S|=1:w.y>0&&(S|=2),S){case 0:return;case 1:T=(0,l.t)("fullscreen.accessibility.node_movement_up"),I=Math.abs(w.y);break;case 2:T=(0,l.t)("fullscreen.accessibility.node_movement_down"),I=Math.abs(w.y);break;case 4:T=(0,l.t)("fullscreen.accessibility.node_movement_right"),I=Math.abs(w.x);break;case 8:T=(0,l.t)("fullscreen.accessibility.node_movement_left"),I=Math.abs(w.x);break;default:let A=(4&S)==4?(0,l.t)("fullscreen.accessibility.node_movement_right"):(0,l.t)("fullscreen.accessibility.node_movement_left"),C=Math.abs(w.x),N=(1&S)==1?(0,l.t)("fullscreen.accessibility.node_movement_up"):(0,l.t)("fullscreen.accessibility.node_movement_down"),L=Math.abs(w.y);return(0,l.t)("fullscreen.accessibility.node_movement_bidirectional",{nodeType:a,nodePositionXDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:C}),nodeDirectionX:A,nodePositionYDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:L}),nodeDirectionY:N})}return(0,l.t)("fullscreen.accessibility.node_movement_unidirectional",{nodeType:a,nodePositionDelta:I,nodeDirection:T});default:return}}(e,r,i.mirror.appModel.keyboardShortcuts,n),s=function(e){switch(e){case o.x8F.NODE_CREATED:case o.x8F.NODE_DELETED:return"creation-deletion";case o.x8F.NODE_RESIZED:return"resize";case o.x8F.NODE_MOVED:return"movement";case o.x8F.TEXT_SELECTION:case o.x8F.TABLE_CELL_TEXT_SELECTION:return"selection";case o.x8F.TOOL:return"tool";default:return}}(e);a&&s&&this.store.dispatch(c.F.enqueue({type:`accessibility-screen-reader-announcement-${s}`,message:a,role:"status",timeoutOverride:500}))}debounceNodeResizeUpdate(e){this.store.getState().screenreader.enabled&&this.debouncedResizeUpdate(e)}debounceNodeMovementUpdate(e){this.store.getState().screenreader.enabled&&this.debouncedMovementUpdate(e)}prefersReducedMotion(){return matchMedia("(prefers-reduced-motion: reduce)").matches}getWCAG2Contrast(e,r){return(0,s.f)((0,a.aH)(e),(0,a.aH)(r))}}function f(e){new g(e)}function E(e,r){let n=o.Z6A[e];return(0,p.r)(n,r)}function y(e){switch(e){case 1:return(0,l.t)("fullscreen.accessibility.node_resize_decrease");case 2:return(0,l.t)("fullscreen.accessibility.node_resize_increase");default:return(0,l.t)("fullscreen.accessibility.node_resize_none")}}},234916:(e,r,n)=>{n.d(r,{fh:()=>u,tO:()=>h});var i=n(781131),a=n(741419),o=n(39773),s=n(992444),l=n(395614),c=n(931516);let d={[c.PW.CODE_COMPONENT]:{idl:a.PWo.CODE_COMPONENT,key:(0,i.Sm)(""),version:(0,i.j6)("")}},u={[c.PW.CODE_COMPONENT]:{subscribed:function(e){let r=d[e].idl,n=(0,o.eU)({}),i=(0,o.FZ)(n,(r,n)=>{if("changed"in n){if(!(0,l.e)(e))return r;let i=n.changed;return{...r,...i.reduce((e,r)=>(e[r.key]={sourceLibraryKey:r.sourceLibraryKey,pagesByVersion:{...e[r.key]?.pagesByVersion,...function(e){let r={};for(let{version:n,consumingPages:i}of e)r[n]=i;return r}(r.pagesByVersion)}},e),{})}}return"reset"in n?{}:r}),c=`consumedAssetVersionsByKey(${a.PWo[r]})`;return i.debugLabel=c,i.onMount=n=>{var i;let o=()=>{(0,l.e)(e)&&n({changed:a.IXA?.getAllSubscribedAssetConsumptions(r)??[]})};s.Y5.isReady()?o():s.Y5.onReady().then(o);let c=(i=e=>{n(e)},p[r]=i,()=>{p[r]=null});return()=>{c(),n({reset:!0})}},i}(c.PW.CODE_COMPONENT)}},p={[a.PWo.CODE_COMPONENT]:null};class m{syncChangedSubscribedConsumptions(e,r){p[e]?.({changed:r})}resetMirrorCache(){for(let e of Object.values(p))e?.({reset:!0})}}function h(){new m}},375536:(e,r,n)=>{n.d(r,{Mk:()=>f,WY:()=>v});var i=n(741419),a=n(39773),o=n(149674),s=n.n(o),l=n(896966),c=n(992444),d=n(766251),u=n(618962),p=n(796199),m=n(612184),h=n(843200),_=n(931516);_.PW.RESPONSIVE_SET,i.PWo.RESPONSIVE_SET,_.PW.CODE_LIBRARY,i.PWo.CODE_LIBRARY,_.PW.CODE_FILE,i.PWo.CODE_FILE,_.PW.CODE_COMPONENT,i.PWo.CODE_COMPONENT,_.PW.MANAGED_STRING,i.PWo.MANAGED_STRING;let g={[i.PWo.RESPONSIVE_SET]:{[i.Ocq.LOCAL]:h.X1,[i.Ocq.SUBSCRIBED]:h._t},[i.PWo.CODE_LIBRARY]:{[i.Ocq.LOCAL]:p.V,[i.Ocq.SUBSCRIBED]:p.Q},[i.PWo.CODE_FILE]:{[i.Ocq.LOCAL]:u.y,[i.Ocq.SUBSCRIBED]:u.d},[i.PWo.CODE_COMPONENT]:{[i.Ocq.LOCAL]:d.r,[i.Ocq.SUBSCRIBED]:d.I},[i.PWo.MANAGED_STRING]:{[i.Ocq.LOCAL]:m.fA,[i.Ocq.SUBSCRIBED]:m.cx}},f={[_.PW.RESPONSIVE_SET]:{local:E(i.PWo.RESPONSIVE_SET,i.Ocq.LOCAL),subscribed:E(i.PWo.RESPONSIVE_SET,i.Ocq.SUBSCRIBED)},[_.PW.CODE_LIBRARY]:{local:E(i.PWo.CODE_LIBRARY,i.Ocq.LOCAL),subscribed:E(i.PWo.CODE_LIBRARY,i.Ocq.SUBSCRIBED)},[_.PW.CODE_FILE]:{local:E(i.PWo.CODE_FILE,i.Ocq.LOCAL),subscribed:E(i.PWo.CODE_FILE,i.Ocq.SUBSCRIBED)},[_.PW.CODE_COMPONENT]:{local:E(i.PWo.CODE_COMPONENT,i.Ocq.LOCAL),subscribed:E(i.PWo.CODE_COMPONENT,i.Ocq.SUBSCRIBED)},[_.PW.MANAGED_STRING]:{local:E(i.PWo.MANAGED_STRING,i.Ocq.LOCAL),subscribed:E(i.PWo.MANAGED_STRING,i.Ocq.SUBSCRIBED)}};function E(e,r){let n=g[e][r],o=(0,a.eU)({}),l=(0,a.FZ)(o,(e,r)=>{if("changed"in r){let n=r.changed;return{...e,...n.reduce((e,r)=>(e[r.assetId]=r,e),{})}}if("removed"in r){let n=new Set(r.removed);return s()(e,e=>e&&!n.has(e.assetId))}return"reset"in r?{}:e}),d=`assetByKeyAtom(${i.PWo[e]}, ${i.Ocq[r]})`;return l.debugLabel=d,l.onMount=a=>{var o;let s=()=>{a({changed:i.P5M.getAllAssets(e,r).map(n).filter(e=>null!==e)})};c.Y5.isReady()?s():c.Y5.onReady().then(s);let l=(o=e=>{a(e)},y[e][r]=o,()=>{y[e][r]=null});return()=>{l(),a({reset:!0})}},l}let y={[i.PWo.RESPONSIVE_SET]:{[i.Ocq.LOCAL]:null,[i.Ocq.SUBSCRIBED]:null},[i.PWo.CODE_LIBRARY]:{[i.Ocq.LOCAL]:null,[i.Ocq.SUBSCRIBED]:null},[i.PWo.CODE_FILE]:{[i.Ocq.LOCAL]:null,[i.Ocq.SUBSCRIBED]:null},[i.PWo.CODE_COMPONENT]:{[i.Ocq.LOCAL]:null,[i.Ocq.SUBSCRIBED]:null},[i.PWo.MANAGED_STRING]:{[i.Ocq.LOCAL]:null,[i.Ocq.SUBSCRIBED]:null}};class b{syncAddedOrChangedAssets(e,r,n){if(r===i.Ocq.SUBSCRIBED){let a=g[e]?.[i.Ocq.SUBSCRIBED];if(!a){(0,l.x1)("design-systems",`No parser found for ${e} and ${r}`);return}y[e]?.[i.Ocq.SUBSCRIBED]?.({changed:n.map(a).filter(e=>null!==e)})}else if(r===i.Ocq.LOCAL){let a=g[e]?.[i.Ocq.LOCAL];if(!a){(0,l.x1)("design-systems",`No parser found for ${e} and ${r}`);return}y[e]?.[i.Ocq.LOCAL]?.({changed:n.map(a).filter(e=>null!==e)})}else(0,l.x1)("design-systems",`Invalid subscription status for AssetMirror: ${r}`)}syncRemovedAssets(e,r,n){y[e]?.[r]?.({removed:n})}resetMirrorCache(){for(let e of Object.values(y))for(let r of Object.values(e))r?.({reset:!0})}}function v(){new b}},822985:(e,r,n)=>{n.d(r,{h:()=>i});let i=(0,n(39773).eU)("ok")},393246:(e,r,n)=>{n.d(r,{Z:()=>o});var i=n(87089),a=n(119310);let o=(0,a.bt)(({currentUserOrgId:e,orgById:r})=>(0,i.td)(e,r));(0,a.bt)(({orgUsersByOrgId:e})=>e)},998636:(e,r,n)=>{var i=n(39773);(0,i.eU)(null),(0,i.eU)(!0),(0,i.eU)(!1)},305719:(e,r,n)=>{n.d(r,{UQ:()=>l,kS:()=>s,p9:()=>o});var i=n(39773),a=n(119310);let o=(0,a.bt)(e=>e.user),s=(0,i.eU)(e=>e(o)?.id);(0,i.eU)(e=>e(o)?.created_at),(0,a.bt)(e=>e.userStateLoaded);let l=(0,a.bt)(e=>e.isStarterUser)},162951:(e,r,n)=>{n.d(r,{gh:()=>C});var i=n(741419),a=n(179703),o=n(157907),s=n(39773),l=n(579020),c=n(6819),d=n(896966),u=n(963376),p=n(442313),m=n(697714),h=n(481540),_=n(724936),g=n(73781),f=n(784421),E=n(840797),y=n(267670);let b=(0,s.eU)(new Set),v=(0,s.eU)(new Set),T=(0,s.eU)("");function I(e){let r=e=>{let n=0;for(let i of e)"FRAME"===i.type&&(n+=1),"children"in i&&(n+=r(i.children));return n};return r(e)}function S(e,r=1){let n=JSON.parse(JSON.stringify(e));return n.length<1?n:r<1&&"opacity"in n[0]?n.map(e=>({...e,opacity:e.opacity*r})):n}function w(e,r,n,i=!0,a=1){if(Array.isArray(e[n])&&Array.isArray(r[n])){let o=i?[...S(r[n]),...S(e[n],a)]:[...S(e[n],a),...S(r[n])];r[n]=o}}class A{async autoSegmentNodesByRegion(e,r){let n=(0,y.D)(),i=[],a=[];for(let n of e){let{rootNode:e,newNodes:o}=await this.autoSegmentNodes(n,r);e&&a.push(e),o.forEach(e=>i.push(e))}s.zl.set(b,new Set(i.map(({id:e})=>e))),s.zl.set(v,new Set(a.map(({id:e})=>e))),(0,_.z)(a,i);let o=n.currentPage;return o.selection=o.selection.concat(a),!0}async autoSegmentNodes(e,r){let n;let s=(0,y.D)();try{var u;let d=performance.now(),h=(await Promise.all(e.map(e=>s.getNodeByIdAsync(e)))).filter(e=>e),_=I(h),y=function(e){let r=[...e],n=[];for(;r.length;){let e=r.pop();if(!e)break;n.push(e.id),"children"in e&&e.children.forEach(e=>{r.push(e)})}return n}(h),b=(n=await (0,g.N7)(h,s,r))?I([n]):0;if(u=b-_,(0,c.D.dispatch)(m.F.enqueue({type:"msal-frames-created",message:(0,p.t)("fullscreen.properties_panel.stack_panel.msal_crated_frames_count",{count:u})})),(0,o.k)().ce_al_track_msal_duration&&(0,l.sx)("autolayout_auto_segment_selection",{duration_ms:performance.now()-d,selectionSizeBeforeMSAL:_,selectionSizeAfterMSAL:b},{forwardToDatadog:!0}),n){!function e(r,n){if(!r||"FRAME"!==r.type)return;for(let i of r.children)e(i,n);let a=i.Qa7.getBackgroundNodeCandidatesByGUID(r.id);if(0===a.backgroundNodes.length)return;let o=n.getNodeById(a.backgroundNodes[0]);if(r.resize(o.width,o.height),o.absoluteBoundingBox&&r.absoluteBoundingBox){let e=o.absoluteBoundingBox.x-r.absoluteBoundingBox.x,n=o.absoluteBoundingBox.y-r.absoluteBoundingBox.y;r.x+=e,r.y+=n}for(let e of a.backgroundNodes){let i=n.getNodeById(e);i&&function(e,r,n=!0,i="transferAndMaybeRemoveBackgroundNode",a=!0){if((0,f.Rm)(`${i}`,`Merging background node (${e.id}) into: ${r}`,3),e.removed)return;let o=1;a&&"opacity"in e&&(o=e.opacity),w(e,r,"fills",n,o),w(e,r,"effects",n,o),w(e,r,"strokes",n,o),"strokes"in e&&e.strokes.length>0&&(r.strokeWeight=e.strokeWeight,r.strokeJoin=e.strokeJoin,r.dashPattern=e.dashPattern,r.strokeAlign=e.strokeAlign,"strokeCap"in e&&!r.strokeCap&&(r.strokeCap=e.strokeCap),"strokeMiterLimit"in e&&(r.strokeMiterLimit=e.strokeMiterLimit),"strokeLeftWeight"in e&&"number"==typeof e.strokeLeftWeight&&0===r.strokeLeftWeight&&(r.strokeLeftWeight=e.strokeLeftWeight),"strokeRightWeight"in e&&"number"==typeof e.strokeRightWeight&&0===r.strokeRightWeight&&(r.strokeRightWeight=e.strokeRightWeight),"strokeTopWeight"in e&&"number"==typeof e.strokeTopWeight&&0===r.strokeTopWeight&&(r.strokeTopWeight=e.strokeTopWeight),"strokeBottomWeight"in e&&"number"==typeof e.strokeBottomWeight&&0===r.strokeBottomWeight&&(r.strokeBottomWeight=e.strokeBottomWeight)),"cornerRadius"in e&&"number"==typeof e.cornerRadius&&0===r.cornerRadius&&(r.cornerRadius=e.cornerRadius),"topLeftRadius"in e&&"number"==typeof e.topLeftRadius&&0===r.topLeftRadius&&(r.topLeftRadius=e.topLeftRadius),"bottomLeftRadius"in e&&"number"==typeof e.bottomLeftRadius&&0===r.bottomLeftRadius&&(r.bottomLeftRadius=e.bottomLeftRadius),"topRightRadius"in e&&"number"==typeof e.topRightRadius&&0===r.topRightRadius&&(r.topRightRadius=e.topRightRadius),"bottomRightRadius"in e&&"number"==typeof e.bottomRightRadius&&0===r.bottomRightRadius&&(r.bottomRightRadius=e.bottomRightRadius),"ELLIPSE"===e.type&&(0,E.n4)(e.width,e.height)&&(r.cornerRadius=r.width),function(e,r){if(!e||!e.boundVariables)return;let n=e.boundVariables;for(let e of["width","height","paddingLeft","paddingRight","paddingTop","paddingBottom","topLeftRadius","topRightRadius","bottomLeftRadius","bottomRightRadius","minWidth","maxWidth","minHeight","maxHeight","counterAxisSpacing","strokeWeight","strokeTopWeight","strokeRightWeight","strokeBottomWeight","strokeLeftWeight"]){let i=n[e];i&&r.setBoundVariable(e,i.id)}}(e,r),a&&e.remove()}(i,r,!0,"recursivelyMergeBackgroundFillToTLF")}}(n,s);let e=(0,a.UN)().get(n.id);return!e||e.isTopLevelFrame()||e.isState||(n.name="Frame"),{rootNode:n,newNodes:function e(r,n){let i=[];return n.has(r.id)||i.push(r),"children"in r&&r.children.forEach(r=>{let a=e(r,n);i=i.concat(a)}),i}(n,new Set(y))}}}catch(n){(0,d.x1)("auto-layout","Error running AAL segmentation",{e:n});let r=c.D.dispatch;"GraphResolutionError"===n.name?((0,h.ds)("msal_error_try_again",c.D.getState().openFile?.key,c.D.getState(),{error:n,nodeIds:e}),r(m.F.enqueue({type:"msal-failure-graph-resolution",message:(0,p.t)("fullscreen.visual_bell.try_again_msal")}))):(s.commitUndo(),s.triggerUndo(),(0,h.ds)("msal_error_couldnt_suggest_auto_layout",c.D.getState().openFile?.key,c.D.getState(),{error:n,nodeIds:e}),r(m.F.enqueue({type:"msal-failure-other",message:(0,p.t)("fullscreen.visual_bell.could_not_suggest_auto_layout")})))}return{rootNode:null,newNodes:[]}}async makeResponsive2(e){let r=(0,y.D)();for(let n of e)for(let e of n)await (0,g.cx)(e,r);return r.commitUndo(),!0}shouldRunSimpleStackDetection(e){let r=(0,y.D)();return(0,g.sg)(e,r)}runMakeResponsiveHeuristics(e){let r=(0,y.D)();(0,g.cx)(e,r)}trackShouldShowMSALOnboarding(e){s.zl.set(T,e),(0,u.YQ)({id:"would-have-used-msal-onboarding-event"})}async destroyAllAutoLayout(e){let r=(0,y.D)(),n=await (0,g.vk)(e,r),i=c.D.dispatch,a=n>0?(0,p.t)("fullscreen_actions.destroy-all-auto-layout-result-visual-bell-toast",{numAutoLayoutsRemoved:n}):(0,p.t)("fullscreen_actions.destroy-all-auto-layout-result-visual-bell-toast-zero");return i(m.F.enqueue({message:a})),(0,l.sx)("action_destroy_all_auto_layout",{numAutoLayoutsRemoved:n}),r.commitUndo(),!0}}function C(){new A}},286792:(e,r,n)=>{n.d(r,{mQ:()=>o});var i=n(370652);class a{logShadowReadSuggestionsOnPaste(e,r){(0,i.QO)(e,r)}}function o(){new a}},190016:(e,r,n)=>{n.d(r,{z4:()=>d});var i=n(741419),a=n(6819),o=n(896966),s=n(96321),l=n(143702);class c{readyToAcceptAutosaveChanges(){return!!s.ZG()?.session()?.readyToAcceptChanges()}hasOngoingCommitTask(){return!!s.ZG()?.session()?.hasOngoingCommitTask()}async enqueueAutosaveCommit(e,r,n,a,o,c){let d=(0,s.ZG)();if(!d)return(0,l.W6)("AutosaveManager should not be null when committing"),!0;let u=d.session();return!u||(await u.enqueueAutosaveCommit({changes:e,commitPolicy:r,fileVersion:n,fileKey:a,newSessionID:i.h3O.currentSessionID(),numberOfUncleanRegisters:o,reason:c}),!0)}createAutosaveManager(e){let r=a.D.getState().user;if(!r){(0,o.Lo)("Autosave","Not creating manager for logged out user");return}(0,s.mu)(e,r.id)}destroyAutosaveManager(){(0,s.t)()}isConnected(){return s.ZG()?.managerState==="connected"}}function d(){new c}},101520:(e,r,n)=>{n.d(r,{$W:()=>l});var i=n(507152),a=n(542143),o=n(280159);class s{hasAiPermission(){return(0,a.W7)()}generateRequestId(){return(0,i.g)()}generateSessionId(){return(0,i.g)()}async getSuggestion(e,r,n,i){let a=await (0,o.O)(e,r,n,i);return{text:a?.text,inputTokens:a?.inputTokens,serializationLatencyMs:a?.serializationLatencyMs,requestLatencyMs:a?.requestLatencyMs,logprob:a?.logprob,shouldBlock:a?.shouldBlock}}}function l(){new s}},992444:(e,r,n)=>{let i,a;n.d(r,{$q:()=>m,QT:()=>h,XT:()=>l,Y5:()=>i,Zi:()=>p,_W:()=>d,fT:()=>u,lQ:()=>o,s$:()=>s,uF:()=>c});let o=new Promise(e=>{a=e});function s(e){i=e,window._fullscreen_=i,a()}function l(e){}function c(e){d=e}let d=null;function u(e){}function p(e){}function m(e){}function h(e){}},473332:(e,r,n)=>{n.d(r,{Iu:()=>s}),n(741419);let i=new Set;class a{nodeBoundsChanged(){for(let e of i)e()}}let o=null;function s(){return o||(o=new a),o}},308198:(e,r,n)=>{n.d(r,{n:()=>a}),n(772138),n(741419),n(319454),n(6819);var i=n(905654);function a(e){(0,i.o)()}n(35474),n(400471),n(77441),n(442313),n(697714),n(176065),n(696528),n(634938),n(113100)},361786:(e,r,n)=>{n.d(r,{C4:()=>b,D2:()=>h,Er:()=>u,FJ:()=>l,FM:()=>E,H3:()=>d,cB:()=>f,cu:()=>_,eY:()=>m,fG:()=>T,fb:()=>g,gU:()=>c,l7:()=>I,wh:()=>y,xY:()=>p,yH:()=>v});var i=n(108487),a=n(821360),o=n(741419),s=n(431118);let l="\x3c!--(figma)",c="(/figma)--\x3e",d='<span data-buffer="'+l,u=c+'"></span>',p="&lt;!--(figma)",m="(/figma)--&gt;",h="\x3c!--(figmeta)",_="(/figmeta)--\x3e",g='<span data-metadata="'+h,f=_+'"></span>',E="&lt;!--(figmeta)",y="(/figmeta)--&gt;";function b(e,r,n){let i='<meta charset="utf-8">'+d+(0,a.lF)(r)+u+(0,s.hX)(n);try{e.setData("text/html",i)}catch(e){console.warn("DataTransfer failed in clipboard event")}}function v(e){let r;try{r=e.getData("text/html")}catch(e){return console.warn("DataTransfer failed in clipboard event"),null}return function(e){let r=e.indexOf(l),n=e.indexOf(c);return r>=0&&n>=0&&r<n?(0,a.D4)(e.slice(r+l.length,n)):null}(r)}function T(e,r){let n=i.w.encodeMessage({type:"STYLE",pasteFileKey:null!=e?e:void 0,sessionID:0,ackID:0,nodeChanges:[{guid:{sessionID:0,localID:0},phase:"CREATED",...r}]});return o.glU.encodeClipboardData(n)}function I(e){return i.w.decodeMessage(o.glU.decodeClipboardData(e))}},209544:(e,r,n)=>{n.d(r,{A$:()=>l,X0:()=>s});var i=n(445777),a=n(741419);n(543072);var o=n(442313);function s(e){switch(e){case a.daH.CODE_BLOCK_DRACULA:return"DRACULA";case a.daH.CODE_BLOCK_DUOTONE_LIGHT:return"DUOTONE_LIGHT";case a.daH.CODE_BLOCK_DUOTONE_SEA:return"DUOTONE_SEA";case a.daH.CODE_BLOCK_DUOTONE_SPACE:return"DUOTONE_SPACE";case a.daH.CODE_BLOCK_DUOTONE_EARTH:return"DUOTONE_EARTH";case a.daH.CODE_BLOCK_DUOTONE_FOREST:return"DUOTONE_FOREST";default:return"DRACULA"}}n(728075);let l={format:e=>{switch(e){case"FIGJAM_DARK":return(0,o.t)("whiteboard.code_blocks.theme.figjam_dark");case"DRACULA":return(0,o.t)("whiteboard.code_blocks.theme.dracula");case"DUOTONE_SEA":return(0,o.t)("whiteboard.code_blocks.theme.duotone_sea");case"DUOTONE_SPACE":return(0,o.t)("whiteboard.code_blocks.theme.duotone_space");case"DUOTONE_EARTH":return(0,o.t)("whiteboard.code_blocks.theme.duotone_earth");case"DUOTONE_FOREST":return(0,o.t)("whiteboard.code_blocks.theme.duotone_forest");case"DUOTONE_LIGHT":return(0,o.t)("whiteboard.code_blocks.theme.duotone_light");default:return(0,i.xb)(e)}}}},110054:(e,r,n)=>{n.d(r,{l:()=>d});var i=n(741419),a=n(6819),o=n(992444),s=n(241917),l=n(924569),c=n(458641);let d=new class{constructor(){this.canvasColorProfile=i.RYP.SRGB}getDefaultDocumentColorProfile(){if((a.D?.getState()?.selectedView).editorType===s.nT.Whiteboard)return i.ywP.SRGB;switch((0,l.YN)().colorProfilePreference){case c.M.DEFAULT:case c.M.SRGB:return i.ywP.SRGB;case c.M.DISPLAY_P3:return i.ywP.DISPLAY_P3}}getCanvasColorProfile(){return this.canvasColorProfile}setCanvasColorProfile(e){this.canvasColorProfile=e,i.glU?.updateImageColorspaceConversions(),o.Y5?.triggerAction("redraw-canvas",{})}getUserColorProfile(){switch((0,l.YN)().colorProfilePreference){case c.M.DEFAULT:case c.M.SRGB:return i.RYP.SRGB;case c.M.DISPLAY_P3:return i.RYP.DISPLAY_P3}}}},455748:(e,r,n)=>{n.d(r,{Eh:()=>c,dM:()=>u,dX:()=>p});var i=n(157907),a=n(896966),o=n(611237),s=(e=>(e[e.Unknown=0]="Unknown",e[e.No=1]="No",e[e.Yes=2]="Yes",e))(s||{});let l=0;function c(e,r){if("srgb"===r)return e.getContext("2d");{let n=(0,o.p3)();return e.getContext("2d",{colorSpace:n?"srgb":r})}}let d=document.createElement("canvas").getContext("2d",{colorSpace:"srgb",willReadFrequently:!0})?.canvas;function u({canvas:e,canvasWidth:r,canvasHeight:n,renderCanvas:c,value:u,colorSpace:p,initializeCanvasColorSpace:m=!1}){if(m&&e.getContext("2d",{colorSpace:p}),((0,i.k)().ee_color_management_force_canvas||(0,o.p3)())&&1!==l){if(d){d.width=r,d.height=n,c(d,u);let p=d.getContext("2d"),m=e.getContext("2d");if(p&&m)try{!function(e,r){if(e.canvas.width!==r.canvas.width||e.canvas.height!==r.canvas.height)throw Error("source ctx and target ctx dimensions don't match");if("getContextAttributes"in e&&"srgb"!==e.getContextAttributes().colorSpace)throw Error("source ctx is not srgb");if("getContextAttributes"in r&&"display-p3"!==r.getContextAttributes().colorSpace&&!((0,i.k)().ee_color_management_force_canvas&&"srgb"===r.getContextAttributes().colorSpace))throw Error("target ctx is not display-p3");let[n,a]=[r.canvas.width,r.canvas.height],o=e.getImageData(0,0,n,a),s=new ImageData(o.data,o.width,o.height,{colorSpace:"getContextAttributes"in e?r.getContextAttributes().colorSpace:"srgb"});r.clearRect(0,0,n,a),r.putImageData(s,0,0)}(p,m),0===l&&(l=2)}catch{(0,a.Lo)("color management","polyfill failed",{ee_color_management_force_canvas:(0,i.k)().ee_color_management_force_canvas,shouldUseCssColorLevel4Polyfill:(0,o.p3)(),is2dCanvasPolyfillSupportedByBrowser:s[l]}),c(e,u),l=1}}}else c(e,u)}function p(e){switch(e){case"fullscreen":case"mobile-viewer":return document.querySelector("#fullscreen-root canvas");case"prototype":return document.querySelector("#viewerContainer canvas");case"mirror":return document.querySelector("#mobileAppView canvas")}}},628936:(e,r,n)=>{n.d(r,{q:()=>d});var i=n(741419),a=n(157907),o=n(143243),s=n(896966),l=n(965329),c=n(110054);let d=new class{constructor(){this.onFrameCb=null,this.switchWebglColorSpace=(e,r)=>{let n=e.drawingBufferColorSpace;switch(r){case i.RYP.SRGB:if("srgb"===n)return;e.drawingBufferColorSpace="srgb",c.l.setCanvasColorProfile(i.RYP.SRGB);break;case i.RYP.DISPLAY_P3:if("display-p3"===n)return;e.drawingBufferColorSpace="display-p3",c.l.setCanvasColorProfile(i.RYP.DISPLAY_P3);break;default:(0,s.x1)("color management","unsupported color space",{targetColorSpace:r})}}}onFrame(){(0,l.L)(o.B3,l.K.DEFAULT,()=>{this.onFrameCb&&this.onFrameCb()})}queueSwitchWebglColorSpace(e,r,n,i){let o=()=>{this.switchWebglColorSpace(e,r),(0,a.k)().viewer_p3_fix&&i&&i.invalidateCanvas()};"mirror"===n?o():this.onFrameCb=o}}},933270:(e,r,n)=>{n.d(r,{ZH:()=>S,il:()=>L,Ep:()=>T,R6:()=>I});var i=n(848318),a=n(741419),o=n(157907),s=n(39773),l=n(16826),c=n(470403),d=n(992444),u=n(110054),p=n(208649),m=n(207715),h=n(455748),_=n(731654),g=n(972350),f=n(628936);let E=(0,s.eU)(!1);function y(e){let[r,n]=(0,s.fp)(E);return i.useEffect(()=>{r&&n(!1)},[r,n]),r?null:i.createElement(i.Fragment,null,e.children)}var b=n(924569);let v=i.createContext({canvasColorProfile:a.RYP.SRGB,documentColorProfile:a.ywP.LEGACY,documentExportColorProfile:a.RYP.SRGB});function T(){return i.useContext(v).canvasColorProfile}function I(){return i.useContext(v).documentColorProfile}let S=v.Consumer;function w(e){let{children:r,colorManagementStateJs:n}=e,o=(0,m.ut)(n?.documentColorProfile(),a.ywP.LEGACY),s=(0,_.H)(o),{colorProfilePreference:l}=(0,b.jK)(),c=i.useMemo(()=>({documentColorProfile:o,documentExportColorProfile:(0,g.j)(o,l),canvasColorProfile:s}),[l,o,s]);return i.createElement(v.Provider,{value:c},r)}function A(e){return(0,b.jK)(),i.createElement(w,{colorManagementStateJs:a.H4l},e.children)}function C({target:e,viewer:r}){let[n,s]=i.useState(null),c=i.useCallback(()=>{if(o.k()?.fullscreen_use_threaded_rendering)return!1;if(n)return!0;if(a.PcT?.usingWebGPU())return!1;let r=(0,h.dX)(e);if(r){let n=null;switch(e){case"fullscreen":case"mobile-viewer":n=(0,l.ap)()?r.getContext("webgl2"):r.getContext("webgl");break;case"prototype":case"mirror":n=(0,l.WQ)()?r.getContext("webgl2"):r.getContext("webgl")}return s(n),!0}return!1},[e,n]);i.useEffect(()=>{if(!c())switch(e){case"fullscreen":case"mobile-viewer":d.Y5.onReady().then(()=>{c()});break;case"prototype":case"mirror":r&&r.on("documentIsLoaded",()=>{c()})}},[c,e,r]);let p=T();return i.useEffect(()=>{if(a.PcT?.usingWebGPU()){u.l.setCanvasColorProfile(p);return}n&&f.q.queueSwitchWebglColorSpace(n,p,e,r)},[p,e,n,r]),null}function N({viewer:e,target:r}){return i.createElement(c.tH,{boundaryKey:"color-management",fallback:c.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:p.y4},i.createElement(s.An,null,i.createElement(y,null,i.createElement(A,null,i.createElement(C,{target:r,viewer:e})))))}function L({viewer:e}){return i.createElement(N,{target:"prototype",viewer:e})}},924569:(e,r,n)=>{n.d(r,{YN:()=>E,eu:()=>_,hP:()=>f,it:()=>b,jK:()=>y}),n(848318);var i=n(741419),a=n(39773),o=n(611504),s=n(6819),l=n(934589),c=n(858423),d=n(757033),u=n(481540),p=n(376780),m=n(458641);let h={colorProfilePreference:p.E9.DEFAULT,id:""},_=(0,o.NC)("USER_UPDATE_COLOR_PROFILE"),g=(0,a.eU)(e=>{let r=e((0,l.Zx)({})),n=h.colorProfilePreference;"loading"===r.status&&void 0!==s.D&&s.D?.getState()?.user?.color_profile?n=s.D.getState().user?.color_profile:r.data?.userColorProfilePreference?.colorProfilePreference&&(n=r.data?.userColorProfilePreference?.colorProfilePreference);let i={colorProfilePreference:function(e){switch(e){case p.E9.DEFAULT:return m.M.DEFAULT;case p.E9.SRGB:return m.M.SRGB;case"display-p3":case p.E9.DISPLAY_P3:return m.M.DISPLAY_P3}}(n),id:r.data?.userColorProfilePreference?.id??h.id};return void 0!==s.D&&s.D?.getState()?.user?.color_profile!==i.colorProfilePreference&&s.D.dispatch(_({color_profile:i.colorProfilePreference})),i});function f(e){switch(e){case m.M.DEFAULT:case m.M.SRGB:return i.RYP.SRGB;case m.M.DISPLAY_P3:return i.RYP.DISPLAY_P3}}function E(){return a.zl.get(g)}function y(){return(0,a.md)(g)}function b({colorProfilePreference:e,id:r,eventName:n="user_manual_change",additionalDataToLog:i}){if(e===h.colorProfilePreference)return;!function(e){let r=s.D.getState();(0,u.uE)("color_profile_preference",r,{userColorProfile:e.userColorProfilePreference.colorProfilePreference,userColorProfileId:e.userColorProfilePreference.id,eventName:e.eventName,...e.additionalDataToLog??{}})}({userColorProfilePreference:{colorProfilePreference:e,id:r},eventName:n,additionalDataToLog:i});let a=d.Ay.put("/api/user",{color_profile:e});if(r)c.WB()?.optimisticallyUpdate({UserColorProfilePreference:{[r]:{colorProfilePreference:e}}},a);else{let r=s.D.getState().user?.id;if(!r)return;c.WB()?.optimisticallyCreate({UserColorProfilePreference:{"optimistic-id":{colorProfilePreference:e,userId:r,createdAt:new Date,updatedAt:new Date}}},a)}}},323655:(e,r,n)=>{n.d(r,{YL:()=>s});var i=n(208720),a=n(314078);class o{calculateColorWithRampValue(e,r){let n=(0,a.jA)((0,i.aH)(e),r);return n?(0,i.oU)(n):null}calculateColorWithRelativeAdjustment(e,r){let n=(0,a.Hd)((0,i.aH)(e),r);return n?(0,i.oU)(n):null}getRampValueForColor(e){return(0,a.Wn)((0,i.aH)(e))}}function s(){new o}},693097:(e,r,n)=>{let i;n.d(r,{AU:()=>c,T6:()=>p,lS:()=>i,on:()=>l});var a=n(6819),o=n(196484);let s={mousedown:new Set,mousemove:new Set,mouseup:new Set};function l(e,r){s[e].add(r)}function c(e,r){s[e].delete(r)}function d(e){return(r,n)=>{for(let i of s[e])i({x:r,y:n})}}function u(e,r,n){a.D.dispatch(o.vV({anchorPosition:{x:r,y:n}})),a.D.dispatch(o.CX({stablePath:e}))}function p(){i={handleMouseDown:d("mousedown"),handleMouseMove:d("mousemove"),handleMouseUp:d("mouseup"),createNewCommentAtPosition:u}}},655293:(e,r,n)=>{n.d(r,{vk:()=>p});var i=n(133696),a=n(952423),o=n(8374),s=n(219237),l=n(355323),c=n(262032);class d{constructor(){this.indexer={}}next(e){return null==this.indexer[e]?this.indexer[e]=0:this.indexer[e]++,this.indexer[e]}}let u={PNG:".png",JPEG:".jpg",SVG:".svg",PDF:".pdf"};function p(e,r,n,i){let a,o;if("CANVAS"===e)""===(a=n).trim()&&(a="Untitled"),o=a=a.replace(/\//g,"_");else{(a=r).endsWith("/")&&(a=a.substr(0,a.length-1));let e=a.lastIndexOf("/");for(let r of(o=-1!==e?a.substr(e+1,a.length):a,i)){let e=r.substr(0,r.lastIndexOf("/"));e.length>0&&(a=e+"/"+a)}}return{name:a,title:o}}function m(e){return("FRAME"===e.type||"SYMBOL"===e.type)&&!e.resizeToFit}(0,o.nF)(e=>{let r=e.getState(),n=[],o=[],h=r.mirror,_=h.sceneGraph,g=e=>{(null!=e.exportSettings&&e.exportSettings.length>0||m(e))&&n.push(e)};if((0,i.Im)(h.sceneGraphSelection)){let e=_.get((0,l.Nf)(h.appModel));e&&((0,a.hV)(e,g),(0,a.hV)(e,e=>{let r=e.parentNode;m(e)&&null!=r&&"CANVAS"===r.type&&o.push({nodeID:e.guid,name:e.name})}))}else(0,c.y2)(_,h.sceneGraphSelection,g),(0,c.YI)(_,h.sceneGraphSelection,e=>{m(e)&&o.push({nodeID:e.guid,name:e.name})});let f="Untitled";r.openFile&&(f=r.openFile.name);let E=[],y=new d,b=new d;for(let e of n){let r=(0,a.DS)(h.sceneGraph,e.guid).filter(e=>!e.visible);if(!e.visible||r.length>0)continue;let n=e.exportSettings;if(null!=n)for(let r of n){if(null==r.imageType)continue;let n=(0,a.DS)(h.sceneGraph,e.guid).map(e=>e.name),{name:i,title:o}=p(e.type,e.name,f,n),s=function(e,r,n,i){let a=`${e}-${r}-${n.imageType}-${n.suffix}`;return`${a}-${i.next(a)}`}(e.guid,i,r,b),{filename:l,isDuplicate:c}=function(e,r,n,i){let a;let o=!1;""===e.trim()&&(e="Untitled"),a=`${e}${r}${n}`;let s=i.next(`${a}`);return s>0&&(a=`${e}${r}-${s}${n}`,o=!0),{filename:a,isDuplicate:o}}(i,r.suffix||"",u[r.imageType],y);E.push({itemID:s,nodeID:e.guid,title:o,filename:l,exportSetting:r,warning:c?"Name duplicated":void 0,warningTooltip:c?`Renamed to ${l}`:void 0})}}e.dispatch(s.j({items:E,frames:o}))})},924541:(e,r,n)=>{n.d(r,{pH:()=>c});var i=n(157907),a=n(579020),o=n(376780),s=n(833953);class l{constructor(e){this.store=e}trackComponentAction(e,r,n){let l=this.state.openFile,c=l?.key,d=!!this.state.user;if(null==l||null==c||!d)return;let u=l.editorType;if(u===o._Y.SLIDES||(0,i.k)().dsa_restrict_actions_to_design&&!this.isInDesignFile()){e===s.Wc.DETACHMENT&&a.az.trackDefinedEvent("design_systems_analytics.non_design_component_detached",{fileKey:c,componentKey:Object.keys(r??{})[0],editorType:u||void 0});return}let p=Object.entries(r).map(([e,r])=>({key:e,count:r}));try{s.PT.recordComponentAction({action:e,action_source:n,fileKey:c,components:p})}catch(e){}}trackStyleAction(e,r,n){let i=!!this.state.user;if(!this.isInDesignFile()||!i)return;let a=[];for(let[e,n]of Object.entries(r))a.push({key:e,count:n});if(0!==a.length)try{s.PT.recordStylesAction({action:e,action_source:n,fileKey:this.state.openFile?.key,styles:a})}catch(e){}}trackVariableAction(e,r,n){let i=!!this.state.user;if(!this.isInDesignFile()||!i)return;let a=[];for(let[e,n]of Object.entries(r))a.push({key:e,count:n});if(0!==a.length)try{s.PT.recordVariablesAction({action:e,action_source:n,fileKey:this.state.openFile?.key,variables:a})}catch(e){}}isInDesignFile(){let e=this.state.openFile,r=e?.key;return null!=e&&null!=r&&e.editorType===o._Y.DESIGN}get state(){if(!this.store)throw Error("Calling _state without a valid store");return this.store.getState()}}function c(e){new l(e)}},19358:(e,r,n)=>{n.d(r,{zs:()=>a}),n(808471),n(697714);class i{constructor(e){this.store=e}showErrorBellInLocalDev(e){}onMissingEditScope(){this.showErrorBellInLocalDev("No edit scope is active")}onGuardrailViolation(){this.showErrorBellInLocalDev("Edit scope guardrail violated")}}function a(e){new i(e)}},576602:(e,r,n)=>{n.d(r,{A0:()=>b,Mc:()=>E,R4:()=>y});var i=n(848318),a=n(320583),o=n(741419),s=n(179703),l=n(157907),c=n(39773),d=n(369600),u=n(542143),p=n(257628),m=n(199445),h=n(677657),_=n(449345),g=n(987709),f=n(517546);function E(e,r=!1){let n=[];r?e.map(e=>{let r=(0,s.UN)().get(e);r&&r.visible&&0!==r.opacity&&n.push(r)}):e.forEach(e=>{let r=(0,s.UN)().get(e);r&&r.visible&&0!==r.opacity&&function e(r,n){if(r.visible&&0!==r.opacity)for(let i of(n.push(r),r.childrenNodes??[]))e(i,n)}(r,n)});let i=n.length>f.NB,a=[];return n.map(e=>{if((0,f.jX)(e,!1))return a.push(e.guid)}),{detectedUnnamedLayers:a.length>0,exceedingLayerLimit:i,renamableNodeGuids:a}}function y(e){let{detectedUnnamedLayers:r,exceedingLayerLimit:n,renamableNodeGuids:a}=E(e);r&&!n&&(0,_.$I)({moduleToOpen:{type:"custom",module:i.createElement(g.A,{source:o.uQ6.READY_FOR_DEV,numRenamableNodesForHandoff:a.length}),beforeModuleOpen:()=>{(0,m.B3)(p.JT.AUTO_RENAME_LAYERS)},name:h.Sn.RENAME_LAYERS_TOAST},trackingData:{source:"ready_for_dev_auto_rename_layers"}})}function b(e){if(!(0,u.W7)())return!1;let r=c.zl.get(d.yV);if(!r?.canEdit||r.editorType!==a._YF.DESIGN)return!1;switch(e){case o.uQ6.READY_FOR_DEV:return!!(0,l.k)().aip_rename_layers_ready_for_dev;case o.uQ6.EXPORT_FRAME:case o.uQ6.EXPORT_PICKER:return!!(0,l.k)().ai_prod_rename_layers_dev_export;case o.uQ6.CREATE_COMPONENT:case o.uQ6.CREATE_FRAME:case o.uQ6.DRAW_FRAME_AROUND_NODES:case o.uQ6.STACK_SELECTION:return!!(0,l.k)().ai_prod_rename_layers_moments;case o.uQ6.LAYERS_PANEL_ACTION_ROW:return!!(0,l.k)().aip_lpe;case o.uQ6.LAYERS_PANEL_OVERFLOW_MENU:return!!(0,l.k)().aip_lpe_overflow;default:return!1}}},577023:(e,r,n)=>{n.d(r,{EU:()=>b,Ku:()=>_,RU:()=>y,UK:()=>h,UX:()=>f,W_:()=>S,dP:()=>g,lK:()=>T,qw:()=>E,sT:()=>v});var i=n(741419),a=n(157907),o=n(442313),s=n(552032),l=n(387819),c=n(207715),d=n(60546),u=n(766535),p=n(243595),m=n(663033);function h(){return i.Ez5.editorPreferences()}function _(){let e=(0,d.ks)(),r=(0,c.J2)(h().colorFormat);return r===i.NVY.CSS&&e||r===i.NVY.UIColor&&!e?i.NVY.RGB:r}function g(){return(0,c.ut)(i.Ez5?.editorPreferences()?.sidebarSplitPosition,l.R.sidebarSplitPosition)}function f(){return(0,c.ut)(i.Ez5?.editorPreferences()?.devHandoffInspectSplitPosition,320)}function E(){return(0,c.ut)(i.Ez5?.editorPreferences()?.propertiesPanelSplitPosition,l.R.propertiesPanelSplitPosition)}function y(){return(0,c.ut)(i.Ez5?.editorPreferences().bigNudgeAmount,s._q)}function b(){return(0,c.ut)(i.Ez5?.editorPreferences().smallNudgeAmount,s.bA)}function v(){return{smallNudgeAmount:b(),bigNudgeAmount:y()}}function T(){return(0,c.ut)(i.Ez5?.editorPreferences().renderRulers,!1)}let I=[{getObservable:()=>h().activeCanvasPixelPreview,getMessage:e=>({message:e?(0,o.t)("visual_bell.pixel_preview_enabled",{scaling:(0,u.d)().activeCanvasRetinaMode.getCopy()?"2x":"1x"}):(0,o.t)("visual_bell.pixel_preview_disabled")})},{getObservable:()=>h().renderGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.render_grid_visible"):(0,o.t)("visual_bell.render_grid_hidden")})},{getObservable:()=>h().snapToPixelGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_pixel_grid_enabled"):(0,o.t)("visual_bell.snap_to_pixel_grid_disabled")})},{getObservable:()=>h().showMasks,getMessage:e=>({message:e?(0,o.t)("visual_bell.show_masks_visible"):(0,o.t)("visual_bell.show_masks_hidden")})},{getObservable:()=>(0,a.k)().figjam_snap_to_dot_grid_reset?h().snapToDotGridStagingReset:h().snapToDotGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_dot_grid_enabled"):(0,o.t)("visual_bell.snap_to_dot_grid_disabled")})},{getObservable:()=>h().snapToGeometry,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_geometry_enabled"):(0,o.t)("visual_bell.snap_to_geometry_disabled")})},{getObservable:()=>h().snapToObjects,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_objects_enabled"):(0,o.t)("visual_bell.snap_to_objects_disabled")})},{getObservable:()=>h().showFrameGrids,getMessage:e=>(0,p.jH)()?((0,p.Gk)(),(0,a.k)().ce_tv_grid)?{message:(0,o.t)("visual_bell.show_frame_guides_visible"),button:{text:(0,o.t)("visual_bell.show_frame_grids_hide_button"),action:e=>{e.stopPropagation(),i.Ez5.editorPreferences().showFrameGrids.set(!1)}}}:{message:(0,o.t)("visual_bell.show_frame_grids_visible"),button:{text:(0,o.t)("visual_bell.show_frame_grids_hide_button"),action:e=>{e.stopPropagation(),i.Ez5.editorPreferences().showFrameGrids.set(!1)}}}:(0,a.k)().ce_tv_grid?{message:e?(0,o.t)("visual_bell.show_frame_guides_visible"):(0,o.t)("visual_bell.show_frame_guides_hidden")}:{message:e?(0,o.t)("visual_bell.show_frame_grids_visible"):(0,o.t)("visual_bell.show_frame_grids_hidden")}}];function S(){(0,m.Mo)(I)}},787775:(e,r,n)=>{n.d(r,{XR:()=>c});var i=n(39773),a=n(898939),o=n(707717),s=n(501805);class l{convertEmojiNameToString(e){let r=e.toLocaleLowerCase(),n=a.dN.searchSynchronized(r).filter(e=>e.id===r);return 0===n.length?"":function(e){let r=a.il.getDefaultSkin()||1;return String.fromCodePoint(...(e.skins[r-1]?e.skins[r-1].unified:e.skins[0].unified).split("-").map(e=>parseInt(e,16)))}(n[0])}setEmojiTypeaheadQuery(e){let r=e&&e.length>1?(0,o.oQ)(e):null;i.zl.set(s.ph,r)}clearEmojiTypeaheadQuery(){i.zl.set(s.ph,null)}isShowingEmojiTypeaheadResults(){let e=i.zl.get(s.ph);return!!e?.emojis?.length}setEmojiTypeaheadImageSet(e){i.zl.set(s.KG,e)}setEmojiTypeaheadTargetRect(e,r,n){i.zl.set(s.kh,{x:e,y:r,height:n,width:0})}}function c(){new l}},87631:(e,r,n)=>{let i;n.d(r,{CB:()=>i,eY:()=>E});var a=n(741419),o=n(157907),s=n(39773),l=n(579020),c=n(6819),d=n(333633),u=n(481540),p=n(493871),m=n(241917),h=n(8719),_=n(185371),g=n(10492);class f{constructor(){this._wheelActivatedAtMs=-1,this._triggerActiveWheelButtonListeners=[]}startChat(e,r,n){(0,g.q)().then(i=>{i||c.D.dispatch(d.F6({position:{x:e,y:r},source:n}))})}figPalReact(e){let r=c.D.getState();if(!(0,o.k)().april_fun_2025_figpals)return;let n=(0,h.bq)(),i=Date.now();if(!n.includes(e))return;s.zl.set(_.O9,r=>({...r,[i]:e})),clearTimeout(s.zl.get(_.Dj));let a=setTimeout(()=>{s.zl.set(_.O9,e=>{let{[i]:r,...n}=e;return n})},3e3);s.zl.set(_.Dj,a),(0,l.sx)("figpal_easter_egg",{type:e,userId:r.user?.id,teamId:r.currentTeamId,orgId:r.currentUserOrgId,fileKey:r.openFile?.key,fileTeamId:r.openFile?.teamId,productType:(0,u.pi)(r.openFile),editorType:r.openFile?.editorType})}closeWheel(){c.D.dispatch(d.Ho())}handleShortcutPressWithType({viewportX:e,viewportY:r,source:n,openedViaHover:i,wheelType:o}){let s=c.D.getState();if("fullscreen"!==s.selectedView.view||s.selectedView.editorType!==m.nT.Whiteboard||this._wheelActivatedAtMs>0)return;this._wheelActivatedAtMs=window.performance.now();let l=s.multiplayerEmoji;"WHEEL"===l.type?(e=l.viewportX,r=l.viewportY,i=i??l.openedViaHover):i||a.glU.triggerAction("set-tool-default",null),c.D.dispatch(d.sp({wheelType:o&&("STAMP"===o?"STAMP2":"REACTION1"),isReadonly:s.mirror.appModel.isReadOnly,isJoinedToActiveVotingSession:(0,p.gR)(s),viewportX:e,viewportY:r,source:n,openedViaHover:i}))}handleShortcutPress(e,r,n){this.handleShortcutPressWithType({viewportX:e,viewportY:r,source:n})}addTriggerActiveWheelButtonListener(e){this._triggerActiveWheelButtonListeners.push(e)}removeTriggerActiveWheelButtonListener(e){let r=this._triggerActiveWheelButtonListeners.indexOf(e);r>=0&&this._triggerActiveWheelButtonListeners.splice(r,1)}handleShortcutRelease(e,r){if(this._wheelActivatedAtMs<0)return;let n=window.performance.now()-this._wheelActivatedAtMs;if(this._wheelActivatedAtMs=-1,n>300)for(let n of this._triggerActiveWheelButtonListeners)n({x:e,y:r})}updateEmojiWheelPosition(e,r){let n=c.D.getState();"fullscreen"===n.selectedView.view&&n.selectedView.editorType===m.nT.Whiteboard&&c.D.dispatch(d.sm({viewportX:e,viewportY:r}))}}function E(){i=new f}},964e3:(e,r,n)=>{n.d(r,{BI:()=>f,W0:()=>p,f7:()=>E,jr:()=>g,nB:()=>_});var i=n(741419),a=n(857188),o=n(846451),s=n(303035),l=n(831932),c=n(145015),d=n(617914);n(557675);var u=n(992444),p=(e=>(e[e.YES=0]="YES",e[e.NO=1]="NO",e))(p||{}),m=(e=>(e[e.YES=0]="YES",e[e.NO=1]="NO",e))(m||{});let h=s.lQ;function _(e){h=e}function g(e,r=0,n=1){return!!function(e,r=0,n=1){return!!(u.Y5&&u.Y5.isRootElementVisible())&&!f(e,r,n)}(e,r,n)&&E(e,!0)}function f(e,r=1,n=1){let i=e.keyCode,o=(0,a.Fo)(e);if(i===a.Uz.TAB&&(0,a.sC)(e,a.xH.SHIFT));else if((0,a.wQ)(e.keyCode));else if(l.Ay.mac&&e.ctrlKey&&(i===a.Uz.A||i===a.Uz.B||i===a.Uz.D||i===a.Uz.E||i===a.Uz.F||i===a.Uz.H||i===a.Uz.K||i===a.Uz.L||i===a.Uz.N||i===a.Uz.O||i===a.Uz.P||i===a.Uz.T||i===a.Uz.V));else if(i===a.Uz.DELETE||i===a.Uz.BACKSPACE||i===a.Uz.NUMPAD_DELETE||i===a.Uz.SPACE||i===a.Uz.ENTER||i===a.Uz.HOME||i===a.Uz.END||i===a.Uz.PAGE_UP||i===a.Uz.PAGE_DOWN||i===a.Uz.A&&1===n);else if(o&&i===a.Uz.Z&&1===r);else if(o||e.ctrlKey)return!1;return!0}function E(e,r=!1){let n;if("keydown"===e.type)n=i.Bx4.KEY_PRESS,h();else{if("keyup"!==e.type)return console.error("Invalid event passed to forwardKeyboardEvent"),!1;n=i.Bx4.KEY_RELEASE}let s=(0,o.v7)(),l={type:n,which:e.which,modifierKeys:(0,a.sN)(e),isRepeat:e.repeat,code:e.code??e.nativeEvent?.code,shouldUseLayoutAndCode:s!==i.aTn.UNKNOWN,layout:s},c=i.glU.handleKeyboardShortcut(l);return c&&e.preventDefault(),c}(0,c.ny)(g),(0,d.n)(g)},463157:(e,r,n)=>{n.d(r,{jx:()=>a});class i{constructor(e){this._store=e}get _state(){if(!this._store)throw Error("Calling _state without a valid store");return this._store.getState()}isInOrg(){return!!this._state.currentUserOrgId}}function a(e){new i(e)}},111383:(e,r,n)=>{n.d(r,{U2:()=>l,mr:()=>o});var i=n(615530);let a=new i.b("action");function o(e){a.trigger("action",e)}let s=new i.b("action");function l(e,r){s.trigger("action",[e,r])}},330063:(e,r,n)=>{n.d(r,{f:()=>g});var i=n(8374),a=n(449737),o=n(323075),s=n(976308),l=n(725469),c=n(922030),d=n(988540),u=n(900169),p=n(183905),m=n(361215),h=n(515071),_=n(842105);(0,i.nF)(e=>{if(!l.F)return;let r=e.getState(),n=(0,o.e9)(r),i=n&&n.team_id&&r.teams[n.team_id];i&&u.Mk.every(e=>!(0,c.rR)(i,{type:c.sK.ADD_FILE,editorType:e}))?e.dispatch(a.to({type:h.DV,data:{team:i,resource:d.vL.FILE,action:p.ZN.CREATE_FILE,currentPlan:s.F.Plan.STARTER,upsellPlan:s.F.Plan.PRO,editorType:null}})):e.dispatch(a.to({type:m.O,data:{projectId:n?.id??""}}))});let g=(0,i.nF)(e=>{l.F&&e.dispatch((0,_.u)({multiple:!1,accept:".sketch"}))})},852357:(e,r,n)=>{n.d(r,{B2:()=>v,al:()=>b,b6:()=>y,mK:()=>T});var i=n(848318),a=n(716544),o=n(157907),s=n(430285),l=n(8374),c=n(159186),d=n(725469),u=n(668599),p=n(841747),m=n(710665),h=n(618593),_=n(900169),g=n(739349),f=n(251325),E=n(712477);let y=(0,l.nF)((e,r)=>{d.F&&((0,f.MS)(),d.F.extractFilesFromDropEvent(r,(r,n)=>{(0,o.k)().internal_only_debug_tools&&r.endsWith(".repo")?T(e,r,n):e.dispatch((0,g.z)({name:r,blob:n}))}))});function b(e){return new c.le(e).isFile()}function v(){let e=(0,a.d4)(e=>"folder"!==e.selectedView.view?null:e.folders[e.selectedView.folderId]??null),r=e?.id,n=(0,h.nt)(r),o=(0,a.d4)(e=>e.selectedView.view),l=(0,p.FC)();return(0,i.useMemo)(()=>"recentsAndSharing"===o?s.Qw.loaded(!0):"folder"===o?!e||(0,m.ZZ)(e,l)?s.Qw.loaded(!1):n.transform(e=>!!e&&_.Mk.some(r=>(0,h.d6)(e,r))):s.Qw.loaded(!1),[n,l,e,o])}function T(e,r,n){e.dispatch(u.GR()),(0,E.Gc)(n).then(i=>{i?(0,E.TA)(e,i):r=e.dispatch((0,g.z)({name:r,blob:n}))})}},163383:(e,r,n)=>{n.d(r,{Aq:()=>w,Ax:()=>l,Ay:()=>L,Bb:()=>v,E_:()=>h,Fx:()=>E,H0:()=>m,IM:()=>C,JT:()=>s,NY:()=>S,QU:()=>I,Re:()=>_,Ub:()=>d,Yc:()=>A,ZG:()=>N,_t:()=>u,bH:()=>y,co:()=>b,iL:()=>T,ju:()=>c,kO:()=>g,pA:()=>p,xe:()=>f});var i=n(179703),a=n(442313),o=n(225115);let s=[],l=8,c=436,d=36,u=524,p=4,m=24,h=24,_=6,g=18,f=12,E="#C4C4C4",y=4,b=[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:1},blur:3},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:3},blur:8},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.18},offset:{x:0,y:0},blur:.5}],v={fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:24,letterSpacing:-.084,width:436},T=8*v.fontSize/14,I={fontFamily:"Roboto Mono",fontSize:11,fontWeight:400,lineHeight:24,width:c};class S{static copySummaryDataToClipboard(e,r){let n=w(e,r);navigator.clipboard.writeText(n)}}function w(e,r){let n="";return n+=`${C(r)}

`,e.forEach(e=>{switch("h2"===e.type&&(n+="\n"),e.type){case"p":case"h1":case"h2":default:n+=e.content+"\n";break;case"li":n+=`\u2022 ${e.content}
`}}),n+=`
${(0,a.t)("whiteboard.ai.summary.summary_footer_disclaimer")}`}function A(e){return e.endsWith("...")?N():e+"."}function C(e){let r=new Date,n=parseInt(e,10);return n?(r.setTime(n),(0,a.t)("whiteboard.ai.summary.summary_header_disclaimer",{summaryGenerationDate:r})):(0,a.t)("whiteboard.ai.summary.summary_header_disclaimer_no_date")}function N(){return(0,a.t)("whiteboard.ai_summary.loading_text")}function L(e,r,n){let a=r.length>0,s=n&&n.length>0;if(!a||s)return!1;let l=(0,i.UN)().get(e);return!!l&&(!function(e,r,n=!0){e.isAlive&&(e.setWidgetSyncedState("syncedState:ai-summary-items",JSON.stringify(r)),n&&o.x.renderFirstPartyWidget(e.widgetId,e.guid))}(l,function(e){let r=JSON.parse(e),n=[{type:"p",context:"tldr",content:r.summary}];return r.supporting_points.forEach(({header:e,two_to_five_supporting_points:r})=>{n.push({type:"h2",content:e,context:"main_theme"}),r.forEach(e=>{n.push({type:"li",content:e,context:"supporting_point"})})}),n}(r)),!0)}},290701:(e,r,n)=>{n.d(r,{HP:()=>g,Nd:()=>A});var i=n(741419),a=n(103676),o=n(6819),s=n(442313),l=n(449502),c=n(481540),d=n(323075),u=n(754823),p=n(501686),m=n(291611),h=n(728075);function _(e,r){let n=d.d1(o.D.getState())?.key??"";(0,c.ds)(e,n,o.D.getState(),{domain:null!=r?(0,u.vO)(r):"",linkRenderType:u.Ci.LINK_PREVIEW,userId:o.D.getState().user?.id})}var g=(e=>(e.OPEN="open",e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e.CONVERT_TO_TEXT="convert_to_text",e))(g||{});let f=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 12H16V13H13V27H27V24H28V27V28H13H12V27V13V12ZM27.0001 13H26.9913L27.0001 13.0088V13ZM20.0001 13H26.2999L17.0251 22.2747L17.7323 22.9818L27.0001 13.714V20H28.0001V12.5V12H27.5001H20.0001V13Z" fill="white" fill-opacity="0.8"/>
</svg>
`,E=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17.7072 14L20.3536 16.6465L19.6465 17.3536L16.1465 13.8536L15.793 13.5L16.1465 13.1465L19.6465 9.64648L20.3536 10.3536L17.7072 13H21.5001C25.0762 13 28.0001 15.9239 28.0001 19.5C28.0001 21.3202 27.167 22.5686 26.3445 23.35C25.9353 23.7387 25.5272 24.0141 25.2208 24.1929C25.0671 24.2825 24.9377 24.3486 24.8448 24.393C24.7983 24.4153 24.7608 24.4322 24.7339 24.444C24.7204 24.4499 24.7095 24.4545 24.7014 24.4579L24.6914 24.462L24.688 24.4634L24.6868 24.4639L24.6862 24.4641C24.686 24.4642 24.6858 24.4643 24.5001 24C24.3144 23.5358 24.3142 23.5359 24.314 23.536L24.316 23.5351L24.3337 23.5275C24.3506 23.5201 24.3776 23.508 24.4131 23.491C24.4843 23.457 24.5893 23.4035 24.7169 23.3291C24.9729 23.1797 25.3148 22.9489 25.6557 22.625C26.3332 21.9814 27.0001 20.9799 27.0001 19.5C27.0001 16.4762 24.5239 14 21.5001 14H17.7072Z" fill="white" fill-opacity="0.8"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 20H12V21H16.5V29H17.5V21H22V20H17.5H16.5Z" fill="white" fill-opacity="0.8"/>
</svg>
`,y=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white"/>
</svg>
`,b=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white" fill-opacity="0.8"/>
</svg>
`,v=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white"/>
</svg>
`,T=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white" fill-opacity="0.8"/>
</svg>
`,I=`
<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.52518 13.6568L8.17683 11.0052L8.88394 11.7123L6.23229 14.3639C4.96308 15.6331 2.9053 15.6331 1.63609 14.3639C0.366889 13.0947 0.366889 11.0369 1.63609 9.76772L4.28774 7.11607L4.99485 7.82317L2.3432 10.4748C1.46452 11.3535 1.46452 12.7781 2.3432 13.6568C3.22188 14.5355 4.6465 14.5355 5.52518 13.6568ZM11.7124 8.88383L11.0053 8.17673L13.6569 5.52508C14.5356 4.6464 14.5356 3.22177 13.6569 2.34309C12.7782 1.46441 11.3536 1.46442 10.4749 2.34309L7.82328 4.99475L7.11617 4.28764L9.76782 1.63599C11.037 0.366784 13.0948 0.366784 14.364 1.63599C15.6332 2.90519 15.6332 4.96298 14.364 6.23218L11.7124 8.88383ZM6.26175 10.5043L10.5044 6.26164L9.73836 5.49561L5.49572 9.73825L6.26175 10.5043Z" fill="black" fill-opacity="0.5"/>
</svg>
`;function S(e,r){let n=(0,p.l)(r,e,"thumbnailImageHash"),[i]=e.useSyncedState("thumbnailImageWidth",null),[a]=e.useSyncedState("thumbnailImageHeight",null);return{thumbnailImageHash:n,thumbnailAspectRatio:i&&a?i/a:void 0}}function w(e,r){let{thumbnailImageHash:n}=S(e,r),[i]=e.useSyncedState("url",null),a=i?decodeURIComponent(i):"null",[o]=e.useSyncedState("title",null),[s]=e.useSyncedState("description",null),[l]=e.useSyncedState("provider",""),c=!!o,d=!!n,u=!!s;return{url:a,rawTitle:o,rawDescription:s,rawProvider:l,hasTitle:c,hasThumbnail:d,hasTitleOrDescription:c||u,hasUrlOnly:!(c||u||d),hasTitleXorDescription:c!==u,isTwitterLinkPreview:"Twitter"===l||"X (formerly Twitter)"===l}}function A({figma:e}){let{widget:r}=e,{Frame:n,AutoLayout:c,Text:d,SVG:g}=r;r.register(function(){let A=r.useWidgetId(),{url:C,hasTitle:N,hasThumbnail:L,hasTitleXorDescription:O,hasUrlOnly:R,hasTitleOrDescription:P}=w(r,e),{thumbnailImageHash:D,thumbnailAspectRatio:M}=S(r,e),k=(0,p.l)(e,r,"faviconImageHash"),F=480-(L?112:8)-32-16,[x,U]=r.useSyncedState("orientation",R?"horizontal":"vertical"),{title:B,description:V,fullUrlProvider:G}=function({figma:e,widget:r,titleFontSize:n,titleLineHeight:i,descriptionFontSizeWithTitle:a,descriptionFontSizeWithoutTitle:o,descriptionLineHeight:s,verticalTextWidth:l,horizontalTextWidth:c,faviconDimension:d,hasTitleXorDescription:u,orientation:p}){let{hasTitleOrDescription:h,isTwitterLinkPreview:_}=w(r,e),g=(0,m.H)(r,"title",{name:"Inter Medium",size:n,lineHeight:i},"vertical"===p?l:c,("vertical"===p?2:1)+(u?1:0)+(_?4:0),!1),f=(0,m.H)(r,"description",{name:"Inter",size:g?a:o,lineHeight:s},"vertical"===p?l:c,("vertical"===p?2:1)+(u?1:0),!1);return{title:g,description:f,fullUrlProvider:(0,m.H)(r,"url",{name:"Inter",size:n,lineHeight:i},("vertical"===p?l:c)-(d+8),1+(h?0:1),!0)}}({figma:e,widget:r,titleFontSize:16,titleLineHeight:22,descriptionFontSizeWithTitle:13,descriptionFontSizeWithoutTitle:14,descriptionLineHeight:20,verticalTextWidth:240,horizontalTextWidth:F,hasTitleXorDescription:O,faviconDimension:16,orientation:x}),H=P?(0,a.Js)(C):G,K=()=>{_(u.yc.OPEN_PREVIEW,C),o.D.dispatch((0,l.RK)({rawInput:C}))};r.usePropertyMenu([{itemType:"action",propertyName:"open",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.open_link"),icon:f},{itemType:"separator"},{itemType:"action",propertyName:"vertical",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.display_vertical"),icon:"vertical"===x?y:b},{itemType:"action",propertyName:"horizontal",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.display_horizontal"),icon:"horizontal"===x?v:T},{itemType:"separator"},{itemType:"action",propertyName:"convert_to_text",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.change_back_to_text"),icon:E}],({propertyName:e})=>{switch(e){case"open":K();break;case"convert_to_text":_(u.yc.CONVERT_TO_TEXT,C),i.glU.replaceNodeWithText(A,C);break;case"vertical":_(u.yc.SWITCH_ORIENTATION_VERTICAL,C),U("vertical");break;case"horizontal":_(u.yc.SWITCH_ORIENTATION_HORIZONTAL,C),U("horizontal");break;default:console.error("Unhandled property name for LinkPreview widget: %s",e)}});let W={fontFamily:"Inter",horizontalAlignText:"left",verticalAlignText:"bottom",width:"fill-parent",fill:{type:"solid",color:{r:0,g:0,b:0,a:.8},blendMode:"normal"}},z=r=>{let i=r?e.widget.h(n,{name:"container-frame",width:16,height:16,fill:{type:"image",imageHash:r,scaleMode:"fill"},cornerRadius:3}):e.widget.h(g,{src:I});return e.widget.h(c,{direction:"horizontal",horizontalAlignItems:"start",verticalAlignItems:"start",padding:{left:0,right:0,top:P?0:3,bottom:0}},i)},$=(r,i,a)=>e.widget.h(n,{name:"container-frame",width:r,height:i,fill:a?{type:"image",imageHash:a,scaleMode:"fill"}:h.De,effect:[{type:"inner-shadow",color:{r:0,g:0,b:0,a:.1},offset:"vertical"===x?{x:0,y:-1}:{x:-1,y:0},blur:0}],onClick:K}),Y=r=>{if(r)return e.widget.h(d,{fontSize:16,fontWeight:500,lineHeight:22,...W},r)},j=(r,n)=>{if(n)return e.widget.h(d,{fontSize:r?13:14,lineHeight:20,fontWeight:400,...W,fill:{...W.fill,color:{r:0,g:0,b:0,a:r?.5:.8}}},n)},q=(r,n)=>e.widget.h(d,{fontSize:r?13:16,lineHeight:r?20:22,fontWeight:400,textDecoration:"underline",...W,fill:{...W.fill,color:{r:0,g:0,b:0,a:.5}},onClick:K},n);return"vertical"===x?function(...r){return e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",width:"hug-contents",height:"hug-contents",fill:h.Vm,cornerRadius:12,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6}]},...r)}(!L&&e.widget.h(n,{width:304,height:.01}),L&&$(304,M?Math.max(Math.min(304/M,608),160):160,D),P&&((r,...n)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:h.Vm,spacing:4,padding:{left:24,right:24,bottom:0,top:r?16:24}},...n))(L,Y(B),j(N,V)),((r,...n)=>e.widget.h(c,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:r?"center":"start",horizontalAlignItems:"start",width:"fill-parent",spacing:8,padding:r?{left:24,right:24,top:8,bottom:24}:20},...n))(P,z(k),q(P,H))):"horizontal"===x?function(r,...n){return e.widget.h(c,{direction:"horizontal",horizontalAlignItems:"center",verticalAlignItems:"start",width:480,height:"hug-contents",fill:h.Vm,cornerRadius:12,spacing:r?16:0,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.08},offset:{x:0,y:0},blur:2}]},...n)}(L,!L&&e.widget.h(n,{width:.01,height:.01}),L&&$(112,112,D),((r,...n)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"center",verticalAlignItems:"start",width:"fill-parent",height:"fill-parent",fill:h.Vm,spacing:r?4:8,padding:r?{left:0,right:0,bottom:16,top:16}:20},...n))(L,P&&((...r)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:h.Vm,spacing:4,padding:0},...r))(Y(B),j(N,V)),((...r)=>e.widget.h(c,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:P?"center":"start",horizontalAlignItems:"center",width:"fill-parent",spacing:8},...r))(z(k),q(P,H)))):void 0})}},722601:(e,r,n)=>{n.d(r,{Z:()=>s}),n(741419),n(157907),n(579020);var i=n(6819),a=n(705694),o=n(929993);let s={fetchFontFile:(e,r,n)=>(0,o.M1)({source:e,id:r,postscriptName:n,fileKey:a.hk()?.openFileKey()||null,teamId:null,orgId:null}),fetchFontFileWithoutPickerInfo(e,r,n){var s;let l=a.hk()?.openFileKey();return l?(0,o.co)(e,r,n,l,!(s=i.D.getState())||!s.openFile||!!s.openFile.parentOrgId):Promise.reject()}}},548074:(e,r,n)=>{n.d(r,{qb:()=>o});var i=n(716181);class a{onFrameDistributionTrackedEvent(e){i.jp(e)}}function o(){new a}},685933:(e,r,n)=>{n.d(r,{_v:()=>o,kJ:()=>s});var i=n(579463);let a=class e{logFeatureGateExposure(e,r){i.w$.logExposureForFeatureGate(e,r)}getDynamicConfigNumberAsRoundedInt(r,n,a){return Math.round(i.w$.getDynamicConfigNumber(r,n,a,e.SourceLoggingString))}getExperimentNumberAsRoundedInt(r,n,a){return Math.round(i.w$.getExperimentNumber(r,n,a,e.SourceLoggingString))}getDynamicConfigNumberAsFloat(r,n,a){return i.w$.getDynamicConfigNumber(r,n,a,e.SourceLoggingString)}getExperimentNumberAsFloat(r,n,a){return i.w$.getExperimentNumber(r,n,a,e.SourceLoggingString)}getDynamicConfigString(r,n,a){return i.w$.getDynamicConfigString(r,n,a,e.SourceLoggingString)}getExperimentString(r,n,a){return i.w$.getExperimentString(r,n,a,e.SourceLoggingString)}getDynamicConfigBoolean(r,n,a){return i.w$.getDynamicConfigBoolean(r,n,a,e.SourceLoggingString)}getExperimentBoolean(r,n,a){return i.w$.getExperimentBoolean(r,n,a,e.SourceLoggingString)}};a.SourceLoggingString="fullscreen";let o=a;function s(){new o}},474880:(e,r,n)=>{n.d(r,{MP:()=>s,U1:()=>o,ck:()=>a,pb:()=>l});var i=n(379338);function a(){return i.Ay().frame_context?.type==="integration"}function o(){return a()&&"google-meet"===(0,i.Ay)().integration_host&&!!(0,i.Ay)().is_meet_hardware}function s(){return a()&&"zoom"===(0,i.Ay)().integration_host}class l{static isGoogleClassroomIntegration(){return a()&&"google-classroom"===(0,i.Ay)().integration_host}}},903952:(e,r,n)=>{n.d(r,{Yq:()=>s,u1:()=>l,zi:()=>c}),n(992277);var i=n(741419),a=(n(179703),n(157907),n(579020),n(6819),n(502255),n(896966),n(481540),n(590036));n(32790);let o=null;function s(){return o?.bufferedAmount||0}function l(){if(o){let e=o.url;(function(e){if(null!==o){o.onopen=null,o.onmessage=null,o.onclose=null,o.onerror=null;try{o.close()}catch(e){}o=null,(0,a.II)(),i.cgc.disconnect(e)}})("breakMultiplayerWebsocketForTesting"),console.log(`breakMultiplayerWebsocketForTesting: disconnected from ${e}`)}}function c(e=!1){o||(i.h3O.reconnect(e),console.log(`unbreakMultiplayerWebsocketForTesting: reconnected to ${o?o.url:null}`))}},37981:(e,r,n)=>{n.d(r,{F:()=>s});var i=n(457040),a=n(963376);let o=new Set;function s(e,r,n){let s=function(e){let r=Object.keys(e);return 0===r.length?new Set:new Set(r)}(r),l=!(0,i.yZ)(s,o);(0,a.YQ)({id:"Selection Changed",properties:{...n,numSelectedTextNodes:n.numSelectedByType&&n.numSelectedByType.TEXT||0,didSelectedNodeIdsChange:l}}),o=s}},545646:(e,r,n)=>{n.d(r,{bJ:()=>l});var i=n(39773),a=n(339599),o=n(913380),s=n(773422);function l(){new c}class c{constructor(){this.developerRelatedLinksManager=new a.GK}submitDeveloperRelatedLinks(e){this.developerRelatedLinksManager.addLinks(e)}didGetNodeStatusChange(){(0,o.Q)()}isVariableAvailableInLibraryAsset(e){let r=i.zl.get(s.e3);return r?.status==="loaded"&&r.data.some(r=>r.node_id===e)}}},745526:(e,r,n)=>{n.d(r,{_I:()=>m,eE:()=>p});var i=n(741419),a=n(171659),o=n(579020),s=n(141039),l=n(44509),c=n(442313),d=n(697714);let u="hardware_acceleration_disabled_warning_shown";function p(){if(s.eD)return null;let e=i.CeL.getGpuDeviceInfo();return e?e.vendor.includes("Google Inc.")&&e.graphicsCardName.includes("SwiftShader"):null}function m(e,r){if(null!==e){if(!e){a.x4&&a.x4.getItem(u)&&((0,o.sx)("Hardware Acceleration Turned On"),delete a.x4[u]);return}if(!a.x4||!a.x4.getItem(u)){let e=()=>{a.x4.setItem(u,"1")};(0,o.sx)("Hardware Acceleration Warning Bell"),r(d.F.enqueue({type:"hardware_acceleration_disabled_warning",message:(0,c.t)("hardware_acceleration_detector.message"),button:{text:(0,c.t)("hardware_acceleration_detector.learn_more"),action:()=>{l.Ay.unsafeRedirect("https://help.figma.com/hc/articles/360039828614-Configure-your-browser-for-Figma#Advanced","_blank"),r(d.F.dequeue({})),e(),(0,o.sx)("Hardware Acceleration Warning Clicked",{dismissed:!1})}},timeoutOverride:1/0,onDismiss:()=>{(0,o.sx)("Hardware Acceleration Warning Clicked",{dismissed:!0}),e()}}))}}}},103446:(e,r,n)=>{n.d(r,{g:()=>s});var i=n(848318),a=n(39773),o=n(992444);function s(){let[e,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(o.Y5.isReady()){r(!0);return}let e=!1;return o.Y5.onReady().then(()=>{e||r(!0)}),()=>{e=!0}},[r]),e}(0,a.t_)(()=>o.Y5.isReady()||o.Y5.onReady())},11012:(e,r,n)=>{n.d(r,{T:()=>a});var i=n(273216);async function a(e,r){if(e in r){let n=r[e];switch(n.type){case"bytes":return Promise.resolve(n.bytes);case"promise":return n.promise}}let n=(0,i.Nd)(e);r[e]={type:"promise",promise:n};let a=await n;return r[e]={type:"bytes",bytes:a},a}},273216:(e,r,n)=>{let i;n.d(r,{B0:()=>H,DK:()=>x,Dl:()=>G,EC:()=>F,Nd:()=>B,d$:()=>y,w6:()=>V});var a=n(821360),o=n(741419),s=n(101595),l=n(157907),c=n(80585),d=n(831932),u=n(896966),p=n(757033),m=n(5950),h=n(390887),_=n(321722),g=n(168845),f=n(827031);let E=document.createElement("canvas"),y=4096,b=E.getContext("2d"),v=document.createElement("canvas"),T=function(){try{return v.getContext("2d",{colorSpace:"display-p3"})}catch{return null}}();function I(){return(0,l.k)().image_encode_reduced_copying}async function S(e,r,n,i){let a=o.RYP.SRGB;if("image/png"===r){let r=(0,h.Ll)(e);if(e=r.withoutColorSpace,r.iccProfileRawData)try{a=(0,m.Y)(r.iccProfileRawData)}catch(e){}}let s=null;if("image/jpeg"===r){try{let r=(0,h.yy)(e);r&&(a=(0,m.Y)(r)??o.RYP.SRGB)}catch(e){}s=c.f.getOrientation(e),D&&(s=null)}let l=!1;"image/gif"===r&&(l=(0,h.fB)(e));let d=URL.createObjectURL(new Blob([e],{type:r}));try{let e=await V({url:d,height:null,width:null});return{...w(e,n,i,s,l),colorProfile:a}}finally{URL.revokeObjectURL(d)}}function w(e,r,n,i,a){let{width:o,height:s,originalWidth:l,originalHeight:d,isRotated:u}=function(e,r,n,i,a){let o=c.f.angleFromOrientation(a),s=c.f.orientationIsFlipped(a),l=e,d=r,u=e,p=r;if(90===o||270===o){let n=r;r=e,e=n,n=p,p=u,u=n}return n>0&&i>0&&(e>n&&(r=Math.round(r*n/e),e=n),r>i&&(e=Math.round(e*i/r),r=i),e=Math.max(1,e),r=Math.max(1,r)),E.width=e,E.height=r,b.translate(e/2,r/2),b.scale(e/u,r/p),s&&b.scale(-1,1),b.rotate(Math.PI/180*o),b.translate(-l/2,-d/2),{originalHeight:p,originalWidth:u,width:e,height:r,isRotated:0!==o}}(e.width,e.height,r,n,i);return b.drawImage(e,0,0),{width:o,height:s,originalWidth:l,originalHeight:d,isMultiFrameGIF:a,isRotated:u,bitmap:null,rgba:new Uint8Array(b.getImageData(0,0,o,s).data.buffer)}}function A(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}async function C(){let e="/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z";if(!P.works)return 16==(await V({url:`data:image/jpeg;base64,${e}`,height:null,width:null})).width;{let r=new Blob([A(e)],{type:"image/jpeg"});return 16==(await createImageBitmap(r)).width}}async function N(){if(!P.works)return!1;let e=document.createElement("canvas");e.width=16,e.height=8;let r=e.getContext("2d"),n=new Blob([Uint8Array.from(atob("/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z"),e=>e.charCodeAt(0))],{type:"image/jpeg"});r.drawImage(await createImageBitmap(n),0,0);let i=r.getImageData(0,0,16,8);r.clearRect(0,0,e.width,e.height);let a=URL.createObjectURL(n),o=new Image;await new Promise(e=>{o.onload=e,o.src=a}),r.drawImage(await createImageBitmap(o),0,0);let s=r.getImageData(0,0,16,8);if(i.data.length!==s.data.length)return!1;for(var l=0;l<i.data.length;++l)if(i.data[l]!==s.data[l])return!1;return!0}async function L(e,r){if(!e)return!1;try{let i=await createImageBitmap(r),a=i.width,o=i.height,s=!1,l=e.getParameter(e.ACTIVE_TEXTURE);e.activeTexture(e.TEXTURE0);let c=e.getParameter(e.FRAMEBUFFER_BINDING),d=e.getParameter(e.TEXTURE_BINDING_2D),u=null,p=null;try{if(p=e.createTexture(),e.bindTexture(e.TEXTURE_2D,p),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.bindTexture(e.TEXTURE_2D,null),u=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,p,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,null),e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE){var n=new Uint8Array(4*a*o);e.readPixels(0,0,a,o,e.RGBA,e.UNSIGNED_BYTE,n),255===n[0]&&(s=!0)}}catch{}return e.bindFramebuffer(e.FRAMEBUFFER,c),e.bindTexture(e.TEXTURE_2D,d),e.deleteTexture(p),e.deleteFramebuffer(u),e.activeTexture(l),s}catch{return!1}}async function O(){D=await C(),d.Ay.webkit&&await N()}async function R(e){let r=new Blob([(0,a.D4)("iVBORw0KGgoAAAANSUhEUgAAAAEAAAAQBAMAAAAlsQiEAAAALVBMVEX///////////////////////////////////////////////////////8AAACgbBYXAAAAD3RSTlPx5NXDsJ2Ic19LOCgYDQAksqQSAAAAJklEQVQI12MAAQEGBQYDBgeGAIYEhgKGBoYJDAsYNjAcYHjAcAEAP7AGkQT7krEAAAAASUVORK5CYII=")],{type:"image/png"});try{try{return await createImageBitmap(r,{premultiplyAlpha:"none"}),{works:!0,allowsOptions:!0}}catch(n){return{works:await L(e,r),allowsOptions:!1}}}catch{return{works:!1,allowsOptions:!1}}}let P={works:!1,allowsOptions:!1},D=!1,M=null,k=null,F={init(e){k=(async()=>{if(e===o.UF0.YES)P={works:!0,allowsOptions:!0};else{let e=(i||(i=(0,s.iL)()),i).ctx;if(!e)throw Error("Cannot find GL context");P=await R(e)}await O()})()},reset(){null!==M&&M.forgetCallbacks()},prepareDataForEncode(e,r,n,i,a=!1){let o=e*r*4;return i&&(n=(0,f.ZD)(n,o)),a&&(n=(0,f.uC)(n,o)),n},prepareDataForEncodeInPlace(e,r,n,i,a=!1){let o=e*r*4;i&&(0,f.X)(n,o),a&&(0,f.eZ)(n,o)},encodeInPlace(e,r,n,i,s,l,c=o.RYP.SRGB,d=!1){let u,p,m=E,h=b;c===o.RYP.DISPLAY_P3&&v&&T&&(m=v,h=T),I()?(F.prepareDataForEncodeInPlace(e,r,n,l,d),u=new ImageData(new Uint8ClampedArray(n.buffer),e,r)):(n=F.prepareDataForEncode(e,r,n,l,d),new Uint8Array((u=h.createImageData(e,r)).data.buffer).set(n)),m.width=e,m.height=r,h.putImageData(u,0,0),p=i?m.toDataURL("image/jpeg",s):m.toDataURL();let _=";base64,";return(0,a.D4)(p.slice(p.indexOf(_)+_.length))},encode:(e,r,n,i,a,s,l=o.RYP.SRGB,c=!1)=>(I()&&(n=new Uint8Array(n)),F.encodeInPlace(e,r,n,i,a,s,l,c)),async decodeAsync(e,r,n,i,a){if(await k,!P.works)return await S(e,r,n,i);M??=new g.o;let o=null,{bitmap:s,isMultiFrameGIF:l,colorProfile:u}=await U(r,e);if(!s)return console.warn("Something wrong in createImageBitmap thread.  Bitmap is null ... falling back to decode using image"),await S(e,r,n,i);let p=!1;"image/jpeg"===r&&(p=o!==c.a.ROTATE_0,null!==o&&o!==c.a.ROTATE_0&&D&&d.Ay.chrome&&0>d.Ay.compareVersions([d.Ay.version.toString(),"86"])&&(a=!1),D&&(o=null));let m=s.width,h=s.height;return a&&(null===o||o===c.a.ROTATE_0)&&(0===n||m<=n)&&(0===i||h<=i)?{width:m,height:h,originalWidth:m,originalHeight:h,isMultiFrameGIF:l,isRotated:p,bitmap:s,colorProfile:u}:{...w(s,n,i,o,l),colorProfile:u}},thumbnailSize(e,r){let n=Math.max(e,r),i=0;for(;n>512;)i++,n=Math.floor((n+1)/2);let a=F.dropMips(e,r,i);return{w:a[0],h:a[1],mipsToDrop:i}},dropMips(e,r,n){if(0===e||0===r)return(0,u.x1)("images","Width and height should not be zero"),[e,r];for(let i=0;i<n;++i)e=Math.floor((e+1)/2),r=Math.floor((r+1)/2);return[e,r]},scaleImageBitmap(e,r,n,i){E.width=r,E.height=n,b.translate(0,0),b.scale(1,1),b.rotate(0),b.drawImage(e,0,0,r,n);let a=E.toDataURL(i),o=a.indexOf(",");return A(a.slice(o+1))},async createCanvasAndDrawImage(e,r,n,i){let a,o;"undefined"!=typeof OffscreenCanvas?a=new OffscreenCanvas(e,r):a=G(e,r);let s=a.getContext("2d");if(!s)throw Error("Failed to get 2D context");return n(s),a instanceof OffscreenCanvas?o=await a.convertToBlob({type:i}):o=await new Promise((e,r)=>a.toBlob(n=>{n?e(n):r(Error("Failed to create blob from canvas"))},i)),{canvas:a,blob:o}},async generateThumbnail(e,r,n){if(e.bitmap){let{canvas:i,blob:a}=await this.createCanvasAndDrawImage(r,n,i=>{i.drawImage(e.bitmap,0,0,r,n)},e.mimeType),o=await a.arrayBuffer(),s=await createImageBitmap(i);return{compressedData:new Uint8Array(o),bitmap:s}}{let i=e.rgba;if(!i)throw Error("Failed to decode image");let a=new ImageData(new Uint8ClampedArray(i),e.width,e.height),{canvas:o}=await this.createCanvasAndDrawImage(e.width,e.height,i=>{i.putImageData(a,0,0),i.drawImage(i.canvas,0,0,e.width,e.height,0,0,r,n)},e.mimeType),s=o.getContext("2d");if(!s)throw Error("Failed to get context");let l=new Uint8Array(s.getImageData(0,0,r,n).data);return{compressedData:this.encodeInPlace(r,n,l,"image/jpeg"===e.mimeType,60,!1),decompressedData:l}}}},x=128;async function U(e,r){if(!M)throw Error("Worker not initialized");return"image/heic"===e&&(0,_._)()?{bitmap:await (0,_.g)(r),isMultiFrameGIF:!1,colorProfile:o.RYP.SRGB}:await M.sendMessage({type:e,array:r,supportsCreateBitmapOptions:P.allowsOptions})}async function B(e){return new Uint8Array((await p.Ay.crossOriginGet(e,void 0,{responseType:"arraybuffer",retryCount:3})).data)}function V(e){return new Promise((r,n)=>{let i=new Image;e.height&&(i.height=e.height),e.width&&(i.width=e.width),i.crossOrigin="";let a=Error();i.onerror=e=>{e.cause=a,n(e)},i.onload=()=>r(i),i.src=e.url})}function G(e,r){let n=document.createElement("canvas");return n.width=e,n.height=r,n}function H(e){return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}},789269:(e,r,n)=>{n.d(r,{Jr:()=>D,Mj:()=>v,UD:()=>M,xY:()=>R});var i=n(551316),a=n(992277),o=n(138798),s=n(741419),l=n(965650),c=n(157907),d=n(678915),u=n(579020),p=n(379338),m=n(474020),h=n(502255),_=n(896966),g=n(757033),f=n(273216),E=n(992444);let y=new Uint8Array([171,75,84,88,32,50,48,187,13,10,26,10]).toString();var b=(e=>(e.FILE_KEY="fileKey",e.LIBRARY_KEY="libraryKey",e))(b||{});async function v(e,r,n,i){let a="figFile"===r.type?`/file/${r.fileKey}/image/batch`:`/community/file/${r.hubFileId}/image/batch`;try{let r=await g.Ay.post(a,{sha1s:e,max_size:n,needs_compressed_textures:i},{retryCount:1/0});if(200!==r.status||r.data.error)throw Error("api error while resolving images");return{s3_urls:r.data.meta.s3_urls,compressed_texture_s3_urls:r.data.meta.compressed_texture_s3_urls}}catch(r){throw console.warn(`Couldn't download image(s) with hashes ${e}`),r}}class T extends Error{constructor(e="IMAGE_MISSING"){super(e),Object.setPrototypeOf(this,T.prototype)}}class I extends Error{constructor(e="FILE_KEY_MISSING"){super(e),Object.setPrototypeOf(this,I.prototype)}}class S extends Error{constructor(e="IMAGE_EXPIRED"){super(e),Object.setPrototypeOf(this,S.prototype)}}var w=(e=>(e[e.AWAITING_SINATRA_LOOKUP=0]="AWAITING_SINATRA_LOOKUP",e[e.LOOKUP=1]="LOOKUP",e[e.AWAITING_COMPRESSED_TEXTURE_AVAILABILITY_LOOKUP=2]="AWAITING_COMPRESSED_TEXTURE_AVAILABILITY_LOOKUP",e[e.LOOKING_UPCOMPRESSED_TEXTURE_AVAILABILITY=3]="LOOKING_UPCOMPRESSED_TEXTURE_AVAILABILITY",e[e.UPLOADING=4]="UPLOADING",e[e.READY=5]="READY",e[e.MISSING=6]="MISSING",e[e.FAILED=7]="FAILED",e[e.PRESENT=8]="PRESENT",e))(w||{});let A=class e{constructor(e,r){this.hash=e,this._priority=r,this.compressedTextureS3Path=null,this.shouldDownloadCompressedTexture=null,this.retries=0,this.state=0,this._downloadPromise=null,this._imageIsReady=()=>{},this._readyPromise=new Promise(e=>{this._imageIsReady=e})}set priority(r){this._priority!==e.MAX_PRIORITY&&(this._priority=r)}get priority(){return this._priority}imageIsReady(){this._imageIsReady()}readyPromise(){return this._readyPromise}isExpired(){let e=null;try{if(!(e=new URL(this.s3Path).searchParams.get("Expires")))return!1;e=parseInt(e,10)}catch{return!1}return e<Date.now()/1e3}downloadFromS3(){if(!this.shouldDownloadCompressedTexture&&null==this.s3Path)throw Error("Called downloadFromS3 without s3Path");if(this.shouldDownloadCompressedTexture&&null==this.compressedTextureS3Path)throw Error("Called downloadFromS3 without compressedTextureS3Path when downloading compressed texture");return g.Ay.crossOriginGetAny(this.shouldDownloadCompressedTexture?this.compressedTextureS3Path:this.s3Path,null,{responseType:"arraybuffer"}).then(e=>e.data).catch(e=>{if(this.isExpired())throw new S;if(0!==e.status&&e.status<500){let r=this.s3Path?.includes("resize")?"Can't load image! Make sure Pixie service is running locally":"Image is missing from S3!";(0,_.x1)("image",r,{hash:this.hash,status:e.status}),(0,h.$D)(a.e.SCENEGRAPH_AND_SYNC,Error("Image missing from S3"))}throw e})}download(e){if(!this._downloadPromise){let e=this.downloadFromS3();e.finally(()=>{this._downloadPromise=null}).catch(e=>{}),this._downloadPromise=e}return this._downloadPromise}};A.MAX_PRIORITY=Number.MAX_SAFE_INTEGER;class C{constructor(){this.queue=[],this.byHash=new Map,this.needsSort=!1}get length(){return this.queue.length}ensureSorted(){this.needsSort&&(this.queue.sort((e,r)=>r.priority-e.priority),this.needsSort=!1)}numEligible(e){this.ensureSorted();let r=this.queue.findIndex(r=>r.priority<e);return r<0?this.queue.length:r}push(...e){for(let r of(this.queue.push(...e),e))this.byHash.set(r.hash,r);this.needsSort=!0}updatePriority(e,r){let n=this.byHash.get(e);return null!=n&&(n.priority=r,this.needsSort=!0,!0)}pop(e){if(this.ensureSorted(),0===this.queue.length||this.queue[0].priority<e)return null;let r=Date.now(),n=1/0;for(let e=0;e<this.queue.length;e++){let i=this.queue[e].retryTime;if(null==i||r>=i){let[r]=this.queue.splice(e,1);return this.byHash.delete(r.hash),{found:!0,image:r}}n=i<n?i:n}return{found:!1,retryDelay:n-r}}find(e){return this.byHash.get(e)??null}erase(e){let r=this.byHash.get(e);if(r){this.byHash.delete(e);let n=this.queue.findIndex(e=>e===r);n>=0&&this.queue.splice(n,1)}}debugString(){return this.queue.map(e=>`${e.hash}(${e.priority})`).join(",")}}function N(){return E.Y5.openFilePromise()}class L extends Error{constructor(e,r){super(e),this.lookupImages=r}}let O=class e{constructor(){this.pendingPasteRequests={},this.pendingImagesToRecord={},this.pendingRecordImagesTasks={},this.pendingImagesToRecordByLibraryKey={},this.pendingRecordImagesTasksByLibraryKey={},this.imagesNeedingDirectUpload=new Set,this.imageTimingLog=new Map,this.MAX_REQUESTS=3,this.SINATRA_BATCH_SIZE=100,this.verbose=(0,c.k)().image_verbose,this.incomingImages=new Map,this.pendingLookupCallback=null,this.downloadQueue=new C,this.minPriority=0,this.downloadsPaused=!1,this.allImages=new Map,this.pendingDecodes=new Set,this.pendingDownloads=new Set,this.cancelDownloads=new Set,this.alreadyDownloaded=new Set,this.pendingUploads=new Set,this.uploadedImagesNeedingUrl=new Set,this.pendingImagesCallback=null,this.imageQueueEmpty=null,this.incomingImagesLookedUp=null,this.allImagesUploaded=null,this.progressCallbacks=[],this.imageMaxSize=void 0,this.compressedTextureLookupQueue=[],this.compressedTextureRetryCount=new Map,this.LOGGING_RATE=.1,this.flushPendingRecordImages=(0,i.s)(async(r=!1)=>{let n=this.pendingImagesToRecord,i=this.pendingRecordImagesTasks,a=this.pendingImagesToRecordByLibraryKey,o=this.pendingRecordImagesTasksByLibraryKey,l=Object.keys(n),c=Object.keys(a),d=l.map(e=>({fileKey:e,type:"fileKey"})).concat(c.map(e=>({libraryKey:e,type:"libraryKey"})));this.pendingImagesToRecord={},this.pendingRecordImagesTasks={},this.pendingImagesToRecordByLibraryKey={},this.pendingRecordImagesTasksByLibraryKey={};let p=await this.getEditingFileKey();d.forEach(async l=>{if("fileKey"===l.type&&p===l.fileKey){i[l.fileKey].resolve();return}if("fileKey"===l.type&&!l.fileKey){i[l.fileKey].reject("Invalid originFileKey");return}let c=1,d="fileKey"===l.type?n[l.fileKey]:a[l.libraryKey];for(;;){try{let n=await g.Ay.put(`/api/files/${p}`,{image_sha1s:d,image_origin_file_key:"fileKey"===l.type?l.fileKey:void 0,image_origin_library_key:"libraryKey"===l.type?l.libraryKey:void 0,is_playground:r}),{success:a,failed:c}=e.parseFileUpdateResponseForImages(d,n);for(let e of(s.Bko.imagePermissionsCopied(a),c))this.markImageMissing(e);for(let e of(c.length>0&&(0,u.sx)("image_permission_copy_failed",{shas:c.join(",")}),d))delete this.pendingPasteRequests[e];"fileKey"===l.type?i[l.fileKey].resolve():o[l.libraryKey].resolve();return}catch(e){if(e.status>=400&&e.status<500){for(let e of((0,m.Jj)(),(0,u.sx)("image_permission_copy_failed",{shas:d.join(",")}),d))this.markImageMissing(e),delete this.pendingPasteRequests[e];("fileKey"===l.type?i[l.fileKey]:o[l.libraryKey]).reject(`4xx error when pasting images ${e}`);return}}let n=1e3*c*Math.random();await new Promise(e=>setTimeout(e,n)),c=Math.min(2*c,64)}})},100)}static shouldUseCompressedTextures(){return e._shouldUseCompressedTextures}getEditingFileKey(){return E.Y5.openFileKeyPromise()}getOrCreateImageLogData(e){let r=this.imageTimingLog.get(e);return r||(r={},this.imageTimingLog.set(e,r)),r}recordImagesFromLibraryKey(e,r,n=!1){if(0===r.length)return Promise.resolve();if(!e)return Promise.reject(Error("No originLibraryKey specified"));if(this.pendingImagesToRecordByLibraryKey[e]??=[],this.pendingImagesToRecordByLibraryKey[e].push(...r),!this.pendingRecordImagesTasksByLibraryKey[e]){let r,n;let i=new Promise((e,i)=>{r=e,n=i});this.pendingRecordImagesTasksByLibraryKey[e]={promise:i,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordImagesTasksByLibraryKey[e].promise;let i=this.pendingRecordImagesTasksByLibraryKey[e].promise;return this.flushPendingRecordImages(n),i}recordImages(e,r){if(0===r.length)return Promise.resolve();if(!e)return Promise.reject(Error("No originFileKey specified"));if(this.pendingImagesToRecord[e]=this.pendingImagesToRecord[e]||[],this.pendingImagesToRecord[e].push(...r),!this.pendingRecordImagesTasks[e]){let r,n;let i=new Promise((e,i)=>{r=e,n=i});this.pendingRecordImagesTasks[e]={promise:i,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordImagesTasks[e].promise;let n=this.pendingRecordImagesTasks[e].promise;return this.flushPendingRecordImages(),n}static parseFileUpdateResponseForImages(e,r){try{if(r?.data?.meta?.missing_shas){let n=new Set(r.data.meta.missing_shas);return{success:e.filter(e=>!n.has(e)),failed:Array.from(n)}}}catch{}return{success:e,failed:[]}}async resolveImageUrls(r){let n=await N(),i=await v(r,n,this.imageMaxSize,e.shouldUseCompressedTextures()),a=r.filter(e=>!(e in i.s3_urls));if(a.length>0){let r=await E.Y5.sourceFileKeyPromise();if(r){let n=await v(a,{type:"figFile",fileKey:r},void 0,e.shouldUseCompressedTextures());return{s3_urls:{...i.s3_urls,...n.s3_urls},compressed_texture_s3_urls:{...i.compressed_texture_s3_urls,...n.compressed_texture_s3_urls}}}}return{s3_urls:i.s3_urls,compressed_texture_s3_urls:i.compressed_texture_s3_urls}}queueImageForLookup(e){let r=e.hash;this.verbose&&(0,_.Lo)("image","incoming",{hash:r}),e.state=0,this.incomingImages.set(r,e),null==this.pendingLookupCallback&&(this.pendingLookupCallback=setTimeout(()=>{this.pendingLookupCallback=null,this.lookupImages().catch(e=>(0,h.$D)(a.e.SCENEGRAPH_AND_SYNC,e))},0))}setExternalSource(e,r){let n=new A(e,A.MAX_PRIORITY);n.s3Path=r,this.allImages.set(e,n),this.downloadQueue.push(n),this.imagesNeedingDirectUpload.add(e),this.maybeDownloadMoreImages()}triggerCompressedTextureAvailabilityLookup(e,r){let n=this.allImages.get(e);n&&2===n.state&&new Promise((e,n)=>{let i=this.compressedTextureLookupQueue.splice(0,this.SINATRA_BATCH_SIZE);if(0===i.length)return null;for(let e of i)this.markImageLookingUpCompressedTextureAvailability(e);try{g.Ay.post(`/file/${r}/compressed_texture_available/batch`,{sha1s:i}).then(r=>{e(r)}).catch(e=>{n(new L(e.message,i))})}catch(e){n(new L(e.message,i))}}).then(e=>{if(!e)return;let n=e.data.meta.results;for(let e of Object.keys(n))this.resolveCompressedTextureAvailabilityLookup(e,r,n[e])}).catch(e=>{for(let n of e.lookupImages)this.resolveCompressedTextureAvailabilityLookup(n,r,null)})}resolveCompressedTextureAvailabilityLookup(e,r,n){let i=this.allImages.get(e),a=this.compressedTextureRetryCount.get(e)||0;if("generating"===n&&a<20){let n=500*(1<<Math.min(a,4));this.compressedTextureLookupQueue.push(e),this.markImageNeedsCompressedTextureAvailabilityLookup(e),this.compressedTextureRetryCount.set(e,a+1),setTimeout(()=>this.enqueueImageToCheckCompressedTextureAvailability(e,r),n)}else{this.markImagePresent(e),this.downloadQueue.push(i);let r=this.getOrCreateImageLogData(e);switch(r.compressedTextureRetryCount=a,r.compressedTextureResult=n,n){case"generated":i.shouldDownloadCompressedTexture=!0;break;case"failed":case null:case"generating":this.compressedTextureRetryCount.delete(e),i.shouldDownloadCompressedTexture=!1}this.maybeDownloadMoreImages()}}enqueueImageToCheckCompressedTextureAvailability(e,r){setTimeout(()=>{this.triggerCompressedTextureAvailabilityLookup(e,r)},0)}setImageDownloadPriority(e,r){let n=this.getOrCreateImageLogData(e);if(n.downloadPriority=r,n.downloadPriorityTimestamp=performance.now(),!e){(0,_.xi)("setImageDownloadPriority","invalid hash");return}let i=this.allImages.get(e);if(null==i){i=new A(e,r),this.allImages.set(e,i),this.queueImageForLookup(i);return}4===i.state&&(0,_.x1)("image","Got download request for currently uploading image",{hash:e},{reportAsSentryError:!0}),i.priority=r,this.downloadQueue.updatePriority(e,r)&&this.maybeDownloadMoreImages()}setMinimumImagePriority(e){this.minPriority=e,this.maybeDownloadMoreImages()}pauseImageDownloads(){this.downloadsPaused=!0}resumeImageDownloads(){this.downloadsPaused=!1,this.maybeDownloadMoreImages()}maybeDownloadMoreImages(){for(;this.pendingDownloads.size<this.MAX_REQUESTS&&this.downloadQueue.length>0&&!this.downloadsPaused;){let r=this.downloadQueue.pop(this.minPriority);if(null==r)break;if(!r.found){let e=r.retryDelay;!Number.isFinite(e)||e<=0?(0,h.$D)(a.e.SCENEGRAPH_AND_SYNC,Error("Logic error in download queue, cannot compute next retry")):setTimeout(()=>this.maybeDownloadMoreImages(),e);break}let n=r.image,i=this.getOrCreateImageLogData(n.hash);if(n.hash){this.verbose&&(0,_.Lo)("image","download start",{hash:n.hash,ok:!this.pendingDownloads.has(n.hash)});let e=performance.now();i.downloadStartedTimestamp=e,this.pendingDownloads.add(n.hash)}n.download(this.imageMaxSize).then(r=>{if(this.cancelDownloads.delete(n.hash))return;this.verbose&&((0,_.Lo)("image","download done",{hash:n.hash,ok:!this.alreadyDownloaded.has(n.hash)}),this.getOrCreateImageLogData(n.hash).downloadFinishedTimestamp=performance.now()),this.alreadyDownloaded.add(n.hash);let i=null;if(this.imagesNeedingDirectUpload.has(n.hash))s.Bko.imageDownloadedForPaste(n.hash,r),this.imagesNeedingDirectUpload.delete(n.hash);else{let a=r;if(e.shouldUseCompressedTextures()&&r.slice(0,12).toString()===y){let e=(0,d.LF4)(r);i={width:e.pixelWidth,height:e.pixelHeight},s.Bko.setCompressedTextureMetadata(n.hash,i),a=e.levels[0].levelData,this.clearImageDecodePending(n.hash,!0)}s.Bko.imageDownloaded(n.hash,a)}i||this.pendingDecodes.has(n.hash)||((0,_.xi)("ImageManager","missing pending decode after download",{hash:n.hash}),(0,h.$D)(a.e.SCENEGRAPH_AND_SYNC,Error("missing pending decode after image marked as downloaded")),n.imageIsReady())},e=>{if(this.pendingDecodes.delete(n.hash)&&this.maybeResolveImageQueueEmptyAndPendingImages(),this.cancelDownloads.delete(n.hash))return;if(e instanceof T)this.markImageMissing(n.hash);else if(e instanceof I)(0,h.$D)(a.e.SCENEGRAPH_AND_SYNC,e),this.markImageFailed(n.hash);else if(e instanceof S)this.queueImageForLookup(n);else{if(e instanceof g.Dr&&403===e.status){this.markImageFailed(n.hash);return}let r=5e3*(1<<Math.min(n.retries,4));r+=r*Math.random(),n.retries+=1,(429===e.status||503===e.status)&&(r*=4),n.retryTime=Date.now()+r,this.downloadQueue.push(n)}let r=this.getOrCreateImageLogData(n.hash),i=this.allImages.get(n.hash);i&&(r.decodedImageState=i.state),r.errorOccurredTimestamp=performance.now()}).finally(()=>{this.pendingDownloads.delete(n.hash),this.maybeDownloadMoreImages()})}this.pendingImagesCallback?.(this.pendingImages),this.maybeResolveImageQueueEmptyAndPendingImages()}forceDownloadImage(e){this.setImageDownloadPriority(e,A.MAX_PRIORITY)}setImageDecodePending(e){this.verbose&&(0,_.Lo)("image","decode start",{hash:e,ok:!this.pendingDecodes.has(e)}),this.getOrCreateImageLogData(e).downloadFinishedTimestamp=performance.now(),this.pendingDecodes.add(e)}getSignedUrls(e){let r=new Map;for(let n of e){let e=this.allImages.get(n);e&&e.s3Path&&r.set(n,e.s3Path)}return r}clearImageDecodePending(e,r){this.verbose&&(0,_.Lo)("image","decode done",{hash:e,ok:this.pendingDecodes.has(e)});let n=this.getOrCreateImageLogData(e);n.decodeFinishedTimestamp=performance.now(),this.pendingDecodes.delete(e)&&this.maybeResolveImageQueueEmptyAndPendingImages(),r?(this.markImageReady(e),n.decodedImageState=5):(this.markImageFailed(e),n.decodedImageState=7),(0,c.k)().image_log_timing&&Math.random()<this.LOGGING_RATE&&(0,u.sx)("image_log_timing",{hash:e,...n})}markImagePresent(e){let r=this.allImages.get(e);r&&(r.state=8,s.Bko.imageIsPresent(e))}markImageMissing(e){let r=this.allImages.get(e);r&&(r.state=6,s.Bko.imageIsMissing(e),r.imageIsReady())}markImageFailed(e){let r=this.allImages.get(e);r&&(r.state=7,r.imageIsReady())}markImageReady(e){let r=this.allImages.get(e);r&&(r.state=5,r.imageIsReady())}markImageNeedsCompressedTextureAvailabilityLookup(e){let r=this.allImages.get(e);r&&(r.state=2,this.lookupCompressedTextureAvailabilities(e))}markImageLookingUpCompressedTextureAvailability(e){let r=this.allImages.get(e);r&&(r.state=3)}async lookupImages(){let r=[];for(let e of this.incomingImages.values())0===e.state&&(r.push(e),e.state=1,this.verbose&&(0,_.Lo)("image","lookup",{hash:e.hash}));try{for(;r.length>0;){let n=r.splice(0,this.SINATRA_BATCH_SIZE);for(let e of n){let r=this.pendingPasteRequests[e.hash];if(r)try{await r}catch(r){(0,_.x1)("lookupImages","pastePromise failed",{hash:e.hash})}}let i=await this.resolveImageUrls(n.map(e=>e.hash));for(let r of n){let n=i.s3_urls[r.hash],a=null;e.shouldUseCompressedTextures()&&(a=i.compressed_texture_s3_urls[r.hash]),n?(r.s3Path=n,a?(r.compressedTextureS3Path=a,this.compressedTextureLookupQueue.push(r.hash),this.markImageNeedsCompressedTextureAvailabilityLookup(r.hash),this.lookupCompressedTextureAvailabilities(r.hash)):(this.markImagePresent(r.hash),this.downloadQueue.push(r)),this.verbose&&(0,_.Lo)("image","enqueued-batch",{hash:r.hash})):(this.markImageMissing(r.hash),this.verbose&&(0,_.Lo)("image","missing",{hash:r.hash})),this.incomingImages.delete(r.hash)}}}finally{for(let e of r)this.incomingImages.delete(e.hash)&&(0,_.xi)("image","incoming fallback delete",{hash:e.hash});null!=this.incomingImagesLookedUp&&this.incomingImagesLookedUp.resolve()}e.shouldUseCompressedTextures()||this.maybeDownloadMoreImages()}lookupCompressedTextureAvailabilities(e){N().then(r=>{"figFile"===r.type&&this.enqueueImageToCheckCompressedTextureAvailability(e,r.fileKey)})}forgetImage(e){if(this.imagesNeedingDirectUpload.has(e))return;this.verbose&&(0,_.Lo)("image","forget",{hash:e}),this.incomingImages.delete(e),this.downloadQueue.erase(e),this.pendingDownloads.has(e)&&this.cancelDownloads.add(e),this.alreadyDownloaded.delete(e),this.pendingDecodes.delete(e),this.imageTimingLog.delete(e),this.maybeResolveImageQueueEmptyAndPendingImages(),this.maybeResolveImagesLookedUp();let r=this.allImages.get(e);r&&(this.allImages.delete(e),5!==r.state&&r.imageIsReady())}getNumEligibleForDownload(){return this.downloadQueue.numEligible(this.minPriority)}get pendingImages(){let e=this.getNumEligibleForDownload();return this.verbose&&(0,_.Lo)("image","pendingImages",{incoming:this.incomingImages.size,eligible:e,downloads:this.pendingDownloads.size,decode:this.pendingDecodes.size}),this.incomingImages.size+e+this.pendingDownloads.size+this.pendingDecodes.size}setPendingImagesCallback(e){this.pendingImagesCallback=e}imageQueueEmptyPromise(){if(!this.imageQueueEmpty){let e=performance.now();this.imageQueueEmpty=(0,l.v)(),this.verbose&&(0,_.Lo)("image","queue empty defer installed",{start:e}),this.imageQueueEmpty.promise.finally(()=>{this.imageQueueEmpty=null;let r=performance.now()-e;this.verbose?(0,_.Lo)("image","queue empty defer cleared",{start:e,elapsed:r}):r>1e4&&(0,_.xi)("image","queue empty finished after a long time",{start:e,elapsed:r})}),this.emptyQueueCheck(this.imageQueueEmpty,e,3e4)}let e=this.imageQueueEmpty.promise;return this.maybeResolveImageQueueEmptyAndPendingImages(),e}imageLookupPromise(){this.incomingImagesLookedUp||(this.incomingImagesLookedUp=(0,l.v)(),this.incomingImagesLookedUp.promise.finally(()=>{this.incomingImagesLookedUp=null}));let e=this.incomingImagesLookedUp.promise;return this.maybeResolveImagesLookedUp(),e}emptyQueueCheck(e,r,n){setTimeout(()=>{if(e===this.imageQueueEmpty){let i=Math.round(.001*(performance.now()-r));(0,_.xi)("image","queue empty is taking a long time",{elapsedSec:i,pending:this.pendingImages,downloads:this.pendingDownloads.size,decodes:this.pendingDecodes.size}),this.verbose&&(0,_.Lo)("image","slow",{downloads:this.pendingDownloads,decodes:this.pendingDecodes});let a=Math.min(2*n,9e5);this.emptyQueueCheck(e,r,a)}},n)}maybeResolveImageQueueEmptyAndPendingImages(){let e=this.pendingImages;for(let r of this.progressCallbacks)r(e);this.imageQueueEmpty&&0===e&&(this.verbose&&(0,_.Lo)("image","resolve queue empty!"),this.imageQueueEmpty.resolve(),this.progressCallbacks=[]),this.maybeResolveImagesLookedUp()}maybeResolveImagesLookedUp(){0===this.incomingImages.size&&this.incomingImagesLookedUp?.resolve()}unresolvedImagesUnder(e,r,n){let i=n??s.AlE.getMutableActiveDocument();return s.Bko.findImagesUnder(i,e,r).map(e=>this.allImages.get(e)).filter(e=>void 0!==e&&5!==e.state&&4!==e.state)}loadAllImagesUnder(e,r,n,i=null,a){return this.loadAllImages(e,r,n,i,!0,a)}waitForImagesUnder(e,r,n,i=null,a){return this.loadAllImages(e,r,n,i,!1,a)}imageIsPendingDecode(e){return this.pendingDecodes.has(e)}async loadAllImages(e,r,n,i=null,a,o){let s=performance.now();this.verbose&&(0,_.Lo)("image","loadAllImagesUnder",{reason:n,guids:e,start:s}),e.includes("0:0")&&"playground.initialLoad"!==n&&(0,_.x1)("image","loadAllImagesUnder called with full document",{reason:n});let l=0,c=new Promise(n=>{let s=this.unresolvedImagesUnder(e,r,o);if(0===(l=s.length))n({totalImages:l});else{var c;let e=l;for(let r of(c=e,i&&i(c,l),s))a&&this.setImageDownloadPriority(r.hash,A.MAX_PRIORITY),r.readyPromise().finally(()=>{var r;r=--e,i&&i(r,l),0===e&&n({totalImages:l})})}});return await c}async loadImageByHash(e){this.verbose&&(0,_.Lo)("image","loadImageByHash",{hash:e});let r=this.allImages.get(e);if(r)switch(r.state){case 4:case 5:case 6:case 7:return}this.setImageDownloadPriority(e,A.MAX_PRIORITY),await this.imageQueueEmptyPromise()}setImageMaxSize(e){this.imageMaxSize=e}setShouldUseCompressedTextures(r){e._shouldUseCompressedTextures=r}markImageUploading(e){this.pendingUploads.add(e)}markImageUploaded(e){this.pendingUploads.has(e)||(0,_.xi)("image","markImageUploaded called for unknown image",{imageHash:e}),this.pendingUploads.delete(e),this.uploadedImagesNeedingUrl.add(e),this.maybeResolveImagesUploaded()}startUploadingImage(e,r,n,i){if(this.pendingUploads.has(i))return;this.pendingUploads.add(i);let a=new A(i,0);a.state=4,this.allImages.set(i,a);let o=`/api/upnode/image?purpose=canvas&sha1=${i}&fileKey=${e}`,l=0;g.Ay.post(o,r,{retryCount:1/0,headers:{...g.Ay.defaults.headers,"Content-Type":n},rawBody:!0,uploadEvents:{loadstart:()=>{a.retries=l,l+=1}}}).then(e=>{if(200!==e.status){(0,_.x1)("image","unexpected status code from image upload",{hash:i,status:e.status},{reportAsSentryError:!0});return}(0,_.Lo)("image","uploaded new image",{hash:i}),this.pendingUploads.delete(i),s.Bko.imageUploadFinished(i,s.d8m.SUCCESS),a.state=5,this.uploadedImagesNeedingUrl.add(i),this.maybeResolveImagesUploaded()},e=>{let r;415===e.status?((0,_.x1)("image","image upload failed, removing invalid image",{hash:i}),r=s.d8m.UNSUPPORTED_MEDIA):r=s.d8m.OTHER_FAILURE,this.pendingUploads.delete(i),s.Bko.imageUploadFinished(i,r),this.maybeResolveImagesUploaded()})}pendingUploadStats(){let e=new Set;for(let r of this.pendingUploads){let n=this.allImages.get(r);n&&n.retries>0&&e.add(r)}return[this.pendingUploads,e]}async maybeResolveImagesUploaded(){if(0===this.pendingUploads.size){let e=Array.from(this.uploadedImagesNeedingUrl);this.uploadedImagesNeedingUrl.clear();for(let r=0;r<e.length;r+=this.SINATRA_BATCH_SIZE){let n=e.slice(r,r+this.SINATRA_BATCH_SIZE),i=await this.resolveImageUrls(n);for(let e of n){let r=i.s3_urls[e];if(r){let n=this.allImages.get(e);if(n)n.s3Path=r;else{let n=new A(e,0);n.s3Path=r,n.state=5,this.allImages.set(e,n)}}}}this.allImagesUploaded?.resolve()}}imageUploadPromise(){this.allImagesUploaded||(this.allImagesUploaded=(0,l.v)(),this.allImagesUploaded.promise.finally(()=>{this.allImagesUploaded=null}));let e=this.allImagesUploaded.promise;return this.maybeResolveImagesUploaded(),e}logDebugInfo(e){for(let r of e){let e=this.allImages.get(r),n=new Set;for(let e of Object.values(this.pendingImagesToRecord))for(let r of e)n.add(r);(0,_.Lo)("ImageManager","Blocking image info",{hash:r,state:e?e.state:"NO IMAGE",inIncoming:r in this.incomingImages,inQueue:null!=this.downloadQueue.find(r),inPending:r in this.pendingDownloads,inFinished:r in this.alreadyDownloaded,inPendingRecord:r in n})}let[r,n]=this.pendingUploadStats(),i=Array.from(this.incomingImages.values()).map(e=>e.hash).join(","),a=Array.from(this.pendingDownloads).join(","),o=Array.from(this.alreadyDownloaded).join(","),s=this.downloadQueue.debugString(),l=Array.from(r).join(","),c=Array.from(n).join(",");(0,_.Lo)("ImageManager","ImageManager debug info",{incomingImages:i,downloadQueue:s,pendingDownloads:a,alreadyDownloaded:o,pendingUploads:l,uploadBackoffs:c,pendingImagesToRecord:this.pendingImagesToRecord})}getDebugState(){let e=s.Bko.getImageResourceDebugInfo(),r=new Map;return e.forEach(e=>{r.set(e.hash,{...e,tsState:this.allImages.get(e.hash)?.state})}),this.allImages.forEach((e,n)=>{r.has(n)||r.set(n,{hash:n,tsState:e.state})}),r}static includeOutsideContents(e){return e.some(e=>!1===e.contentsOnly)}};O._shouldUseCompressedTextures=!1;let R=O,P=new class{constructor(){this.imageManager=new R}copyImagePermissions(e,r){return this.imageManager.recordImages(e,r)}copyImagePermissionsFromLibraryKey(e,r,n){return this.imageManager.recordImagesFromLibraryKey(e,r,n)}setImageDownloadPriority(e,r){this.imageManager.setImageDownloadPriority(e,r)}forceDownloadImage(e){this.imageManager.forceDownloadImage(e)}setMinimumImagePriority(e){this.imageManager.setMinimumImagePriority(e)}forgetImage(e){this.imageManager.forgetImage(e)}setImageDecodePending(e){this.imageManager.setImageDecodePending(e)}clearImageDecodePending(e,r){this.imageManager.clearImageDecodePending(e,r)}async downloadEmoji(e){return(await g.Ay.crossOriginGetAny(e,null,{responseType:"arraybuffer"})).data}markImageUploading(e){this.imageManager.markImageUploading(e)}markImageUploaded(e){this.imageManager.markImageUploaded(e)}startUploadingImage(e,r,n,i){this.imageManager.startUploadingImage(e,r,n,i)}pendingUploadStats(){return this.imageManager.pendingUploadStats()}logDebugInfo(e){this.imageManager.logDebugInfo(e)}pauseImageDownloads(){this.imageManager.pauseImageDownloads()}resumeImageDownloads(){this.imageManager.resumeImageDownloads()}getSignedUrls(e){return this.imageManager.getSignedUrls(e)}getImageHostDomain(){return window.location.hostname}setExternalSource(e,r){this.imageManager.setExternalSource(e,r)}staticAssetWithPath(e){return(0,p.CZ)(e)}};function D(){return P.imageManager}async function M(e,r,n){if(!s.Bko.imageTypeDecodeSupported(r))throw Error(`Image type ${r} is not supported and cannot be decoded`);let i=await f.EC.decodeAsync(e,r,f.d$,f.d$,!0),a=await crypto.subtle.digest("SHA-1",e),o={width:i.width,height:i.height,compressedData:e,hash:new Uint8Array(a),bitmap:i.bitmap?i.bitmap:void 0,mimeType:r,rgba:i.rgba?i.rgba:new Uint8Array,name:n},l=f.EC.thumbnailSize(i.width,i.height),c=await f.EC.generateThumbnail(o,l.w,l.h),d=await crypto.subtle.digest("SHA-1",c.compressedData);return{fullResolution:o,thumbnail:{width:l.w,height:l.h,compressedData:c.compressedData,hash:new Uint8Array(d),bitmap:c.bitmap,mimeType:r,rgba:c.decompressedData,name:n}}}async function k(e,r){let n=!!R.includeOutsideContents(r);await D().loadAllImagesUnder([n?e.containingCanvas||"-1:-1":e.guid],s.MoD.NON_ANIMATED_ONLY,"plugins.loadImagesAndExport")}(0,o.c)(k)},638523:(e,r,n)=>{n.d(r,{ZI:()=>eF,c3:()=>ek}),n(848318);var i=n(38188),a=n(580029),o=n(984220),s=n(3184),l=n(389479),c=n(308088),d=n(301509),u=n(762952),p=n(958811),m=n(155023),h=n(726708),_=n(506461),g=n(349109),f=n(191504),E=n(463618),y=n(599203),b=n(320723),v=n(75111),T=n(91805),I=n(768963),S=n(754861),w=n(159491),A=n(550109),C=n(244315),N=n(127414),L=n(344071),O=n(605988),R=n(607745),P=n(245586),D=n(397257),M=n(365709),k=n(293514),F=n(739699),x=n(330782),U=n(890582),B=n(185728),V=n(30500),G=n(254086),H=n(444673),K=n(415354),W=n(104216),z=n(63546),$=n(411809);n(741419);var Y=n(388965),j=n(244951),q=n(863187),X=n(490416),Z=n(689253),J=n(769448),Q=n(55671),ee=n(395190),et=n(766668),er=n(563869),en=n(574976),ei=n(136271),ea=n(325352),eo=n(518576),es=n(36030),el=n(214528),ec=n(228413),ed=n(148249),eu=n(702196),ep=n(931028),em=n(955404),eh=n(297285),e_=n(342527),eg=n(463087),ef=n(459134),eE=n(276578),ey=n(712615),eb=n(635918),ev=n(58142),eT=n(47356),eI=n(641864),eS=n(730899),ew=n(884102),eA=n(285682),eC=n(133672),eN=n(803876),eL=n(823558),eO=n(887342),eR=n(136964),eP=n(586049),eD=n(335152),eM=n(283664);er.A,i.V,ea.A,a.V,en.A,o.c,eN.A,s.i,eN.A,s.i,el.A,i.V,ep.A,l.U,em.A,c.R,eh.A,d.A,e_.A,u.N,eg.A,p.n,ev.A,m.y,eL.A,i.V,h.p,_.E,eO.A,i.V,eR.A,i.V,eP.A,i.V,eD.A,i.V,q.A,i.V,X.A,i.V,Z.A,i.V,J.A,i.V,Q.A,i.V,ee.A,i.V,eo.A,i.V,es.A,i.V,ec.A,g.p,ei.A,f.K,eT.A,E.N,j.A,y.m,ef.A,b.P,ed.A,v.a,et.A,T.O,ed.A,v.a,ew.A,I.i,ew.A,S.A,eu.A,w.r,eI.A,i.V,eE.A,A.H,C.K,eb.A,A.H,C.K,eA.A,Y.V,C.K,eC.A,Y.y,C.K,ey.A,N.O,eb.A,N.O,N.O,eM.A,L.F,O.U,R.m,P.m,D.b,M.n,E.N,k._,F.U,x.a,U.E,B.e,V.U,G.V,H.x,K.t,g.p,W.F,z.L,$.H,eS.A;let ek=new Path2D("M5 0C2.23857 0 0 2.23857 0 5V35C0 37.7614 2.23857 40 5 40H35C37.7614 40 40 37.7614 40 35V5C40 2.23857 37.7614 0 35 0H5ZM16.2875 29.6971L21.2875 9.69726L23.7127 10.3035L18.7127 30.3034L16.2875 29.6971ZM11.6163 14.1165L6.61626 19.1165L5.73251 20.0005L6.61626 20.8843L11.6163 25.8843L13.384 24.1165L9.268 20.0005L13.384 15.8843L11.6163 14.1165ZM28.384 14.1165L33.384 19.1165L34.268 20.0005L33.384 20.8843L28.384 25.8843L26.6163 24.1165L30.7326 20.0005L26.6163 15.8843L28.384 14.1165Z"),eF=40},706783:(e,r,n)=>{n.d(r,{fG:()=>v});var i=n(103830),a=n(168550),o=n(70716),s=n(599993),l=n(466052),c=n(780174),d=n(56900),u=n(285806),p=n(938169),m=n(392492),h=n(151875),_=n(252637),g=n(535005),f=n(868876),E=n(678836);let y={ArrangeAsListBehavior:c.b,ConnectorToolBehavior:d.a,TableBehavior:_.H,TemplatePreviewBehavior:f.Z,VideoBehavior:E.s,SectionPresetBehavior:h.V,DevHandoffAnnotationsMouseBehavior:a.l,ResponsiveSetBehavior:p.j,SitesBlockBehavior:m.Y,SlideDeckAddBehavior:s.w,SlideDeckReorderRowBehavior:l.M,MoveEmbeddedPrototypeBehavior:o.W,CooperGridAddBehavior:i.u,CooperGridReorderRowBehavior:i.G,FrameQuickAddBehavior:u._};class b{createMouseBehavior(e){if(e in y)return new y[e](e);throw Error("unexpected mouse behavior name: "+e)}tableUiReorderHandleHoveredLength(){return g.Ro.reorderHandleHoveredLength}tableUiAddButtonHoveredRadius(){return g.Ro.addButtonHoveredRadius}}function v(){new b}},793313:(e,r,n)=>{n.d(r,{_p:()=>_});var i=n(592232),a=n(379338),o=n(422265),s=n(817519),l=n(280338),c=n(740121),d=n(776618),u=n(747863),p=n(790940),m=n(243973);class h{constructor(e){this.getFullscreenMenuItem=e=>{let r=this.store?.getState();if(!r){console.warn("[CustomKeyboardShortcuts] no state found");return}if("fullscreen"!==r.selectedView.view){console.warn("[CustomKeyboardShortcuts] attempted to dispatch an action outside of fullscreen");return}let i=(0,c.b)(r),o=!!(0,a.Ay)().campfire_model_enabled,s=(0,l.of)(r,{isRecovery:!1,isUserInLimitedSpace:!1,fullscreenMemoryWarningLevel:d.Wy.SAFE,unreadCommentCount:void 0,pluginAndWidgetMenuArgs:i,isPublishingModalDisabled:!1,isBillingRemodelEnabled:o}),u=n(319367).M({isReadOnly:r.mirror.appModel.isReadOnly,extensionMenuProps:i,includeDisabled:!1});return new p.xm(r.mirror.appModel,r.selectedView,[...s,...u]).getItem(r.mirror.appModel,e)},this.getCallback=e=>{let r=this.getFullscreenMenuItem(e);return r&&r.callback&&this.store?.dispatch?(console.log("[CustomKeyboardShortcut] found action and running callback",{menuItem:r,itemDisplayText:e}),()=>r.callback((0,s.Dz)(r),r.args,this.store.dispatch)):(console.warn("[CustomKeyboardShortcut] could not find item for given action",{menuItem:r,itemDisplayText:e}),null)},this.store=e.store}getCustomKeyboardShortcuts(){if(!this.store||!u.nt.customKeyboardShortcuts.getValue())return[];let e=(0,i.Uc)(),r=[];return Object.entries(e).forEach(([e,{type:n,action:a}])=>{let o;try{o=this.getKeyboardShortcutFromText(e,null)}catch(e){o=null}let s=i.iZ.get(n);if(null===o||void 0===s){console.warn("[CustomKeyboardShortcuts] unable to parse shortcut or shortcutActionType",{actionType:s,text:e});return}r.push({keyboardShortcut:o,type:s,action:a})}),console.log("[CustomKeyboardShortcuts] received request to fetch custom keyboard shortcuts",{shortcutsStorage:e,shortcuts:r}),r}dispatchAction(e){console.log("[CustomKeyboardShortcuts] received request to dispatch",{action:e});let r=this.getCallback(e);return!!r&&(r(),!0)}getDisplayStringFromKey(e){let r=m.y.isApple();switch(e.toUpperCase()){case"'":return"\u2032";case"-":return"\u2013";case"ESCAPE":return"\u238B";case"ENTER":return"\u21A9";case"RETURN":return"\u23CE";case"TAB":return"\u21E5";case"LEFT":return"\u2190";case"RIGHT":return"\u2192";case"UP":return"\u2191";case"DOWN":return"\u2193";case"DELETE":return"\u2326";case"BACKSPACE":return"\u232B";case"CAPS LOCK":return"\u21EA";case"CONTROL":return r?"\u2303":"Ctrl";case"ALT":case"RIGHTALT":return r?"\u2325":"Alt";case"SHIFT":return r?"\u21E7":"Shift";case"META":return r?"\u2318":m.y.isWindows()?"Win":"Meta";default:return e}}getKeyboardShortcutFromText(e,r){let n=o.NF,i=0,a=e.split("+");for(let e of(a.length>0&&""===a[a.length-1]&&(a.pop(),a.length>0&&(a[a.length-1]=a[a.length-1]+"+")),a)){if(""===e)continue;let r=o.cy[e.toUpperCase()];if(e===o.NF||r&&(i&r)>0)return null;if(r&&(r&o.QI)!=0)i|=r;else{if(n!==o.NF)return null;n=e}}return n===o.NF&&0===i?null:{key:n,modifierMask:i,originalText:e,displayName:r}}getTextFromKeyboardShortcut(e){let r=m.y.isApple(),n=(e.displayName?this.getKeyboardShortcutFromText(e.displayName,null):null)??e,i=[];return n.modifierMask&o.pP&&i.push(this.getDisplayStringFromKey("Control")),n.modifierMask&o.xC&&i.push(this.getDisplayStringFromKey("Alt")),n.modifierMask&o.IL&&i.push(this.getDisplayStringFromKey("Shift")),n.modifierMask&o.No&&i.push(this.getDisplayStringFromKey("Meta")),n.modifierMask&o.eb&&i.push(this.getDisplayStringFromKey("RightAlt")),n.key!==o.NF&&i.push(this.getDisplayStringFromKey(n.key)),r?i.join(""):i.join("+")}}function _(e){new h({store:e})}},230867:(e,r,n)=>{n.d(r,{$K:()=>o,F0:()=>g,Fx:()=>p,GN:()=>N,QI:()=>E,Qu:()=>M,RG:()=>O,Te:()=>l,ax:()=>d,cQ:()=>S,ck:()=>A,db:()=>P,hu:()=>b,lR:()=>T,uN:()=>h}),n(848318),n(716544),n(741419),n(157907),n(926252);var i=n(119310);n(870769),n(207715);let{action:a,reducer:o}=(0,i.B5)("SYNC_PUBLISHABLE_SYMBOLS",[]),{action:s,reducer:l}=(0,i.B5)("SYNC_PUBLISHABLE_STATE_GROUPS",[]),{action:c,reducer:d}=(0,i.B5)("SYNC_PUBLISHABLE_STYLES",[]),{action:u,reducer:p}=(0,i.B5)("SYNC_PUBLISHABLE_MODULES",[]),{action:m,reducer:h}=(0,i.B5)("SYNC_SUBSCRIBED_SYMBOLS",[]),{action:_,reducer:g}=(0,i.B5)("SYNC_SUBSCRIBED_SYMBOLS_ON_CURRENT_PAGE",[]),{action:f,reducer:E}=(0,i.B5)("SYNC_SUBSCRIBED_STATE_GROUPS",[]),{action:y,reducer:b}=(0,i.B5)("SYNC_SUBSCRIBED_STATE_GROUPS_ON_CURRENT_PAGE",[]),{action:v,reducer:T}=(0,i.B5)("SYNC_DIRECTLY_SUBSCRIBED_STYLES",[]),{action:I,reducer:S}=(0,i.B5)("SYNC_DIRECTLY_SUBSCRIBED_STYLES_ON_CURRENT_PAGE",[]),{action:w,reducer:A}=(0,i.B5)("SYNC_INDIRECTLY_SUBSCRIBED_STYLES",[]),{action:C,reducer:N}=(0,i.B5)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES",[]),{action:L,reducer:O}=(0,i.B5)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[]),{action:R,reducer:P}=(0,i.B5)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES",[]),{action:D,reducer:M}=(0,i.B5)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[])},489186:(e,r,n)=>{n.d(r,{LC:()=>o});var i=n(642476);class a{updateViolationsForNodes(e,r){let n=(0,i.r)();return n?n.updateViolationsForNodes(e,r):Promise.reject()}}function o(){new a}},392997:(e,r,n)=>{n.d(r,{F4:()=>_,Yc:()=>v,aW:()=>b,bM:()=>E,cF:()=>u,dn:()=>h,le:()=>y,o_:()=>d});var i=n(741419),a=n(157907),o=n(44509),s=n(379338),l=n(896966),c=n(992444);let d=1048576,u=0x40000000,p=(0,a.k)().wasm_4gb&&o.Ay.location&&"1"===new URLSearchParams(o.Ay.location.search).get("wasm-4gb"),m=o.Ay.location&&"true"===new URLSearchParams(o.Ay.location.search).get("recovery"),h=p?i.rCR.MAXIMUM:m?i.rCR.RECOVERY:i.rCR.DEFAULT;function _(e){let r=i.hMR.setHeapMemoryMode(e);return(0,l.Lo)("memory",`setHeapMemoryMode(${e}) ${r?"success":"failed"}`),r}let g=null,f=null;function E(e,r){"fullscreen-app"===e?g=r:f=r}function y(e){return"fullscreen-app"===e?g?.()??0:"prototype-lib"===e?f?.()??0:g?.()||f?.()||0}function b(){if(window.performance){let e=window.performance.memory;if(e)return e.usedJSHeapSize}return 0}function v(){return(i.hMR?.getTotalUsedHeapMemory()||0)+c.Y5.memorySpikeOnFileLoadBytes()}(0,a.k)().memory_profiling_local&&(0,s.b5)()&&(window.startMemoryProfile=async()=>{let e=await window.showSaveFilePicker(),r=await e.createWritable({keepExistingData:!0});window.memoryProfileOperationsWritable=r}),(0,s.b5)()&&(window.getTopMemoryFunctions=()=>{let e=i.YyC.getAll(),r=new Map,n=new Map,a=new Map;for(let o of e)o.includes("allocCallCount")?r.set(o,i.YyC.getCount(o)):o.includes("allocMaxDelta")?n.set(o,i.YyC.getCount(o)):o.includes("allocTotalDelta")&&a.set(o,i.YyC.getCount(o));console.log("call count events",Array.from(r).sort((e,r)=>r[1]-e[1]).slice(0,10)),console.log("max delta events",Array.from(n).sort((e,r)=>r[1]-e[1]).slice(0,10)),console.log("total delta events",Array.from(a).sort((e,r)=>r[1]-e[1]).slice(0,10))},window.resetPerformanceEventCounters=()=>{i.YyC.resetAll()})},716730:(e,r,n)=>{n.d(r,{qZ:()=>m});var i=n(741419),a=n(39773),o=n(442313),s=n(71358),l=n(697714),c=n(659402),d=n(808160),u=n(992444);class p{setMentionsTypeaheadQuery(e){a.zl.set(d.h1,e)}clearMentionsTypeaheadQuery(e,r){if(e){let e=a.zl.get(d.h1),n=a.zl.get(d.LQ)?.index||null,i=a.zl.get(d.wm);(0,c.W)(e,r,n,i)}a.zl.set(d.h1,null),this.endSearchSession()}isShowingMentionsTypeaheadResults(){let e=a.zl.get(d.LQ);return!!e?.mentions?.length}setMentionsTypeaheadTargetRect(e,r,n){a.zl.set(d.MX,{x:e,y:r,height:n,width:0})}startSearchSession(){let e=(0,s.MZ)();return a.zl.set(d.wm,e),e}endSearchSession(){let e=a.zl.get(d.wm);return a.zl.set(d.wm,""),e}showVisualBellForPastedMentions(e,r){u.Y5.dispatch(l.F.enqueue({message:(0,o.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions",{numUsers:r}),button:{text:(0,o.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions_action"),action:()=>{i.fp8.allowSendNotificationsForPastedMentions(e)}}}))}}function m(){new p}},337724:(e,r,n)=>{n.d(r,{LZ:()=>a}),n(848318);var i=n(741419);n(397579),n(105594);let a=new class{isMinimizedInUI3(){return!!i.Ez5&&i.Ez5.uiState().leftPanelCollapsedUI3.getCopy()}}},449977:(e,r,n)=>{n.d(r,{Br:()=>k,D$:()=>v,Dh:()=>b,G9:()=>A,GL:()=>S,Hr:()=>y,NT:()=>M,T8:()=>x,Uc:()=>O,XP:()=>K,aB:()=>P,aY:()=>D,bw:()=>R,gX:()=>L,hq:()=>N,i:()=>w,iT:()=>C,n_:()=>H,tJ:()=>T,wr:()=>I});var i=n(108487),a=n(445777),o=n(551316),s=n(741419),l=n(897392),c=n(157907),d=n(579020),u=n(702),p=n(141039),m=n(602784),h=n(946133),_=n(6819);n(697751);var g=n(992444),f=n(718451),E=n(483372);let y=l.dI(l.Hr);function b(e){s.Egt.addToSelection(e)}function v(e){s.Egt.removeFromSelection(e)}function T(e,r=!0){s.Egt.replaceSelection(e,r)}function I(){s.Egt.clearSelection()}function S(e,r){s.Egt.selectNodesInRange(e,r)}function w(e,r){let n=_.D?.getState().mirror.sceneGraph.get(e);n&&(n.name=r,(0,c.k)().sts_code&&(n.isCodeFile||n.isCodeInstance)&&n.setHasBeenManuallyRenamed(!0))}function A(e,r){let n=_.D?.getState().mirror.sceneGraph.get(e);n&&(n.isSymbolPublishable=r)}function C(e,r){let n=_.D?.getState().mirror.sceneGraph.get(e);n&&(n.isPublishable=r)}function N(e){s.Egt.expandUpToRoot(e)}function L(e){s.glU?.updateAppModel(e)}function O(e){L({hoveredNode:e})}function R(e){L({devHandoffCodeLanguage:e})}function P(e){L({devHandoffPreferences:e})}function D(){return s.Ez5?.propertiesPanelState()?.propertiesPanelTab}function M(e){return D()?.set(e)}function k(e){L({activeTextReviewPlugin:e})}let F=["x","y","width","height","minWidth","minHeight","maxWidth","maxHeight","angle","canBecomeFrame","canBecomeGroup","canBecomeSection","aspectRatioLockToggled","miterLimitAngle","terminalCap","dashCap","availableOTFeaturesForSelection","availableOTFeaturesForFonts","toggledOnOTFeaturesForSelection","toggledOffOTFeaturesForSelection","mixedStateOTFeaturesForSelection","detectedList","destinationOverlayPositionType","destinationOverlayBackgroundInteraction","destinationOverlayBackgroundType","destinationOverlayBackgroundColor","name","numSelected","numSelectedByType","arcStart","arcSweep","arcRadius","fontFamily","previewFontFamily","fontStyle","fontVariations","intrinsicLineHeight","textContent","textPathStartForward","prototypeInteractions","prototypeInheritedInternalInteractions","isValidPrototypingSourceSelected","selectionIsHyperlink","whiteboardControls","whiteboardColor","whiteboardDividedSwatchColors","whiteboardStrokeColor","whiteboardFontFamilies","whiteboardFontSizes","whiteboardTextAlignHorizontal","whiteboardTextAlignVertical","whiteboardStrokeStyle","whiteboardNumSelected","whiteboardNumSelectedByType","whiteboardSelectionCanSummarize","whiteboardSelectionCanCluster","whiteboardSelectionCanShowAiOnboardingBadge","whiteboardStickyAIControlsShown","whiteboardMindmapAIControlsShown","nodeSelectedValidForQuickAdd","whiteboardStrokeWeight","washiTapePaint","washiTapePaintIsMixed","connectorLineStyleForSelection","connectorStartCapForSelection","connectorEndCapForSelection","connectorTextBackgroundTransparent","codeBlockLanguage","codeBlockTheme","leftEndCap","rightEndCap","maxStrokeWeight","shapeWithTextTypeForSelection","shapeWithTextFillType","shapeWithTextOpacityOverride","platformShapeFillType","platformShapeOpacityOverride","authorVisibility","imageAspectRatio","imageHasNoStroke","imageOverlayPaint","sectionContentsHidden","isSection","variableConsumptionInfo","borderTopVisible","borderRightVisible","borderBottomVisible","borderLeftVisible","borderSharedWeight","stackCounterSpacing","gridRowCount","gridColumnCount","gridTrackSize","gridTrackSizingType","directlySubscribedAssetKeys","numVideosSelected","videoAutoplay","videoMediaLoop","videoMuted","videoShowControls","themeId","objectAnimationType","objectAnimationDuration","objectAnimationPhase","shadow","blur","htmlWidgetYouTubeVideoURL","htmlWidgetGoogleMapLocation","htmlWidgetGoogleMapZoom","htmlWidgetMailchimpFormURL","htmlWidgetMailchimpInputPlaceholder","htmlWidgetMailchimpSubmitButtonLabel","htmlWidgetMailchimpLayoutIsVertical","htmlWidgetGenericEmbedUrl","htmlWidgetGenericEmbedCodeType","htmlWidgetGenericEmbedIframeHtml","htmlWidgetGenericEmbedAllowFullscreen","link","appear","hover","press","focus","scrollParallax","scrollTransform","cursor","marquee","code"];function x(e,r,n,o,l){u.rH.start("update-selection-properties");try{!function(e,r,n,o,l){let c={...e},d=function(e){let r=Object.create(null);for(let n of F)if(n in e){let i=e[n];i!==f.oV&&(r[n]=i),delete e[n]}return r}(c),u=function(e){let r={guid:{sessionID:0,localID:0}};for(let n in e){let i=e[n];i!==f.oV&&(r[n]=i)}return r}(c);if(o=function(e){switch(e){case E.zk.YES:case E.zk.YES_FORCE_TRACKING_AS_EDIT:case E.zk.YES_WITHOUT_TRACKING_AS_EDIT:return E.zk.YES;default:return E.zk.NO}}(o),r?.guid){if(d){let e=d.fontFamily&&d.fontStyle;if((0,a.KF)(!e,"UI should never simultaneously update font family and style"),d.fontFamily&&r.fontStyle&&(u.fontName={family:d.fontFamily,style:r.fontStyle,postscript:""}),r.fontFamily&&d.fontStyle&&(u.fontName={family:r.fontFamily,style:d.fontStyle,postscript:""}),d.fontVariations&&(u.fontVariations=d.fontVariations),d.variableConsumptionInfo?.variableConsumptionMap){let e=d.variableConsumptionInfo.variableConsumptionMap;u.variableConsumptionMap=(0,E.w3)(e)}}let e=i.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[u]});s.glU?.updateSelectedStyleProperties(e,n,o===E.zk.YES),(0,a.KF)(null!=r.styleType,"unknown style type"),U(r.styleType)}else{let e=i.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[u]});s.Egt.updateSelectionProperties(d,n,l,o===E.zk.YES,e)}}(e,r,n,o,l)}catch(e){throw e}finally{u.rH.stop("update-selection-properties")}}let U=(0,o.s)(e=>{(0,d.sx)("Style Edited",{styleType:e})},500),B=Object.create(null);var V=(e=>(e[e.SceneGraph=0]="SceneGraph",e[e.AppModel=1]="AppModel",e[e.Selection=2]="Selection",e[e.SelectionProperties=3]="SelectionProperties",e))(V||{});let G=new Set([0,1,2,3]);function H(e=G){e.has(0)&&g.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",W),e.has(2)&&(g.Y5.fromFullscreen.on("selection:addSelectors",$),g.Y5.fromFullscreen.on("selection:removeSelectors",Y),g.Y5.fromFullscreen.on("selection:replaceSelectors",j)),e.has(1)&&g.Y5.fromFullscreen.on("updateAppModel",q),e.has(3)&&g.Y5.fromFullscreen.on("selectionPropertiesUpdate",X)}function K(){let e=B;return B=Object.create(null),e}function W(e){(0,a.KF)(!B.invalidateSceneGraph,"We should get at most one sceneGraphMirrorUpdate per frame. We got two."),B.invalidateSceneGraph={rebuildRows:!e||e.rebuildRows}}function z(e,r){return e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24}function $(e){(0,a.KF)(!B.selection?.replace,"addSelectors and replaceSelectors called on the same frame"),B.selection||=Object.create(null),B.selection.add||=Object.create(null),B.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=z(r,e),i=z(r,e+4),a=l.dI({sessionID:n,localID:i});B.selection.add[a]=!0}}function Y(e){(0,a.KF)(!B.selection?.replace,"removeSelectors and replaceSelectors called on the same frame"),B.selection||=Object.create(null),B.selection.remove||=Object.create(null),B.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=z(r,e),i=z(r,e+4),a=l.dI({sessionID:n,localID:i});B.selection.remove[a]=!0}}function j(e){(0,a.KF)(!B.selection?.add,"addSelectors and replaceSelectors called on the same frame"),(0,a.KF)(!B.selection?.remove,"removeSelectors and replaceSelectors called on the same frame"),B.selection||=Object.create(null),B.selection.replace||=Object.create(null),B.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=z(r,e),i=z(r,e+4),a=l.dI({sessionID:n,localID:i});B.selection.replace[a]=!0}}function q({changes:e,shouldIgnoreUserPrefs:r}){if(p.eD){let r;let n={},i={},a="actionEnabled__";for(let r of Object.keys(e))if(r.startsWith(a))n[r.substr(a.length)]=e[r].value;else{let n=(0,m.m)(r);if(void 0!==n){let a=e[r].value;for(let{name:e,propertyValue:r}of n.actions)i[e]=a===r}}e.keyboardShortcuts&&(r=(0,h.K)(e.keyboardShortcuts.value));let o=Object.keys(n).length>0,s=Object.keys(i).length>0,l=void 0!==r;(o||s||l)&&p.eD.updateFullscreenMenuState({actionEnabledState:o?n:void 0,actionCheckedState:s?i:void 0,actionShortcuts:r})}let n=Object.create(null),i=Object.create(null);for(let a in e)n[a]=e[a].value,i[a]=r?.[a];B.appModelChanges={...B.appModelChanges,...n},B.appModelChangesShouldIgnoreUserPrefs={...B.appModelChangesShouldIgnoreUserPrefs,...i}}function X(e){let r=e.buffer&&e.buffer.length>0?i.w.decodeMessage(e.buffer):null;delete e.buffer,(0,a.KF)(!B.selectionProperties,"Updating selectionProperties multiple times on a frame"),B.selectionProperties={message:r,derivedProperties:e}}},391850:(e,r,n)=>{n.d(r,{DI:()=>u,Ds:()=>g,e8:()=>p,vS:()=>m});var i=n(741419),a=n(6819),o=n(481540);let s=!1,l=!1,c=!1,d=!1;function u(){l=!0,h()}function p(){s=!1,l=!1,c=!1,d=!1}function m(e,r){let n=a.D.getState(),i=n.openFile?.key;i&&!d&&((0,o.ds)("Show Missing Fonts Popover",i,n,{fontListLoaded:e,counts:r,timeNow:performance.now()}),d=!0)}function h(){if(s&&l&&!c){let e=a.D.getState(),r=new Set(Object.values(e.fonts).map(e=>Object.values(e)).flat().map(e=>e.source)),n=e.openFile?.key,s=e.figFileDuplicatedFromHubFile,l=!1;void 0!==n&&void 0!==s&&(l=null!=s[n]),(0,o.ds)("has_missing_font",n,e,{has_google_fonts:r.has(i.jXp.GOOGLE),has_local_fonts:r.has(i.jXp.LOCAL),has_shared_fonts:r.has(i.jXp.SHARED),is_community_duplicated_file:l}),c=!0}}class _{markMissingFontScannerAsComplete(){s=!0,h()}}function g(){new _}},912712:(e,r,n)=>{n.d(r,{AW:()=>f,Ak:()=>I,Cd:()=>E,Ff:()=>b,IL:()=>C,Ki:()=>S,LD:()=>g,PV:()=>w,W5:()=>y,WA:()=>N,Xk:()=>A,Xl:()=>L});var i=n(741419);n(179703),n(157907);var a=n(39773),o=n(896966),s=n(808471),l=n(992444),c=n(99624),d=n(53818),u=n(338166);let p=null,m=0,h=!1,_=!1;function g(e){switch(e){case i.kul.UNJOINED:return"unjoined";case i.kul.UNJOINED_FROM_ERROR:return"unjoined_from_error";case i.kul.UNJOINED_FROM_VALIDATION_FAILURE:return"unjoined_from_validation_failure";case i.kul.GOT_SCHEMA:return"got_schema";case i.kul.JOINING_INITIAL_LOAD:return"joining_initial_load";case i.kul.JOINING_RECONNECT:return"joining_reconnect";case i.kul.JOINING_RECONNECT_AWAITING_QUERY_REPLY:return"joining_reconnect_awaiting_query_reply";case i.kul.JOINED:return"joined";case i.kul.SHOULD_UPGRADE:return"should_upgrade";case i.kul.UPGRADING:return"upgrading";case i.kul.WAITING_FOR_RELOAD:return"waiting_for_reload";case i.kul.DETACHED:return"detached";default:return"unknown"}}function f(){_||(_=!0,setInterval(()=>l.Y5.isReady()&&i.h3O.updateConnectionStateIfNeeded(!1),250),window.addEventListener("online",()=>{navigator.onLine&&l.Y5.isReady()&&i.h3O.updateConnectionStateIfNeeded(!0)}),window.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&l.Y5.isReady()&&i.h3O.updateConnectionStateIfNeeded(!0)}))}function E(e){p||(p=function(){try{let e=new Blob(["("+function(){onmessage=e=>setTimeout(()=>self.postMessage(""),e.data)}+")()"],{type:"text/javascript"}),r=new Worker(URL.createObjectURL(e));return(e,n)=>{r.onmessage||(r.onmessage=()=>{r.onmessage=null,e()},r.postMessage(n))}}catch(e){return console.error(e),(e,r)=>{setTimeout(e,r)}}}()),m=e,h||function e(){m&&(h=!0,p(function(){h=!1,m&&i.h3O.flush(),e()},m))}()}function y(e){let r=I(),n=S(r);return i.h3O.startLoadingAllPages(r,e),n.then(()=>{a.zl.set(c.nc,!1)}),n}let b=(0,d.n)(()=>i.h3O.isIncrementalSession()||i.h3O.isValidatingIncremental()),v=1,T=new Map,I=()=>v++;function S(e){return new Promise((r,n)=>{T.set(e,[r,n])})}function w(e){let r=T.get(e);if(r){let[n,i]=r;n(),T.delete(e)}}function A(){T.forEach((e,r)=>{let[n,i]=e;i()}),T.clear()}function C(e,r,n=i.DPQ.CONTAINING_PAGE){(0,s.nl)();let a=I(),o=S(a),l=n===i.DPQ.PLUGIN;return i.h3O.subscribeToContainingPage__DO_NOT_USE_DIRECTLY(e,a,r,l),o}function N(e,r,n=i.DPQ.CONTAINING_PAGE){if(0===e.length)return Promise.resolve();(0,s.nl)();let a=I(),o=S(a),l=n===i.DPQ.PLUGIN;return i.h3O.subscribeToContainingPages__DO_NOT_USE_DIRECTLY(e,a,r,l),o}function L(e){let r=()=>{let n=I();return new Promise(async(r,a)=>{e.delete("0:0"),(0,o.Lo)("Autosave",`Requesting dependencies for ${e.size} nodes while loading incrementally`,void 0,{logToConsole:i.NUh.ALWAYS}),await (0,u.oJ)(i.kul.JOINED),T.set(n,[r,a]),i.h3O.autosaveSubscribeToContainingPages(e,n)}).catch(()=>r())};return r()}},662275:(e,r,n)=>{n.d(r,{EE:()=>o,Om:()=>l,lB:()=>s}),n(848318),n(891627);var i=n(741419);n(179703);let a={};function o(e,r,n){return a[e]=n,i.glU.addNodePositionSubscription(e,r)}function s(e){delete a[e],i.glU.removeNodePositionSubscription(e)}function l(e,r){let n=a[e];n&&n(r)}},299339:(e,r,n)=>{n.d(r,{BL:()=>o,zM:()=>l});var i=n(741419),a=n(179703);function o(e){if(0===e.length){let e=(0,a.UN)().getCurrentPage();return e?.directlySelectedNodes??[]}return s(e)}function s(e){return e.map(e=>(0,a.UN)().get(e)).filter(e=>!!e)}function l(e){return s(i.A2d?.getMatchingNodesToUpdateForQuery(e.guid,"text-data")??[])}},326971:(e,r,n)=>{n.d(r,{$P:()=>S,Bc:()=>b,dh:()=>w,i:()=>v,nn:()=>A,uS:()=>T}),n(848318),n(716544);var i=n(741419);n(673906);var a=n(897392),o=n(179703),s=n(157907),l=n(379338),c=n(697714),d=n(200502);n(449737);var u=n(874391);n(802780),n(697751);var p=n(416105);n(976308),n(992444),n(449977),n(912712);var m=n(45584);n(51910);var h=n(776618);n(369600),n(376780);var _=n(710665),g=n(501736),f=n(166917),E=n(162371);n(988540),n(183905);var y=n(505785);function b(e){return e.match(/^\s+$/)?null:e.match(/^[-\u2013\u2014\*\s]+([^-\u2013\u2014\*]+?)[-\u2013\u2014\*\s]*$/)}function v(e,r){if(!e)return!1;let n=!!b(r),i=e.parentNode?.childrenNodes.find(r=>r?.guid!==e.guid&&r?.isPageDivider&&!!b(r?.name))!==void 0;return!!r.match(/^(-+|\u2013+|\u2014+|\*+|\s+)$/)||((0,s.k)().ce_page_separators_titles||i)&&!(0,l.O_)()&&n}function T({openFile:e,loadedPageNode:r,pageName:n}){return!!(!(!(0,s.k)().ce_page_separators||!r||!e||(0,_.KI)(e))&&v(r,n))&&r?.childCount===0}n(515071);let I=0;async function S(e,r,n,s,l,_,f,b,v,T){let S;if(T&&(0,d._$)(s,T,"overview_set_current_page"),e===r)return;let w=performance.now(),A=I+=1;_("action_page_switch_initiated",{pageSwitchId:I,oldPageNodeId:r,newPageNodeId:e,isIncremental:i.h3O.isIncrementalSession(),isAlreadyLoaded:l,currentNodeCount:i.CeL?.getFileNodeCount()},{forwardToDatadog:!0});let C=new Promise(e=>{S=e});i.Ez5.currentPageState().requestedPageChange.set(e),requestAnimationFrame(()=>{(0,p.J)(async()=>{if(await (0,o.UN)().setCurrentPageFromNodeAsync(e),r!==e){let o=(0,E.vw)(n),l=(0,h.P3)()>=75,d=l?new Set:n.fetchedPageIds||new Set;if(o&&(l&&s((0,u.EB)({fetchedPageIds:d})),s((0,u.SR)({isLoadingPage:!0})),s((0,E.yH)({version:o,currentPageNodeId:e,fetchedPageIds:d,eventType:"INCREMENTALLY_LOAD_NEW_PAGE"}))),v&&f&&b){let r=i.glU.navigateToFirstVisibleOrClosestChangeForPage(e);r===a.AD?s(c.F.dequeue({matchType:"view_changes"})):(i.Egt.setSelectedNodeAndCanvas(r,!0),f((0,m.QZ)({nodeId:r,...y.ob}),y.kh),b(r))}g.F.trackFromFullscreen("action_page_switch",{oldPageNodeId:r,newPageNodeId:e,pageSwitchIdForTracking:A,duration:performance.now()-w,currentNodeCount:i.CeL?.getFileNodeCount()},!0)}i.Ez5.currentPageState().requestedPageChange.set(""),S()})}),await C}function w(e=!0){return(0,f.Fk)(r=>{if(!e)return"0:1";let n=r.getCurrentPage();return n?n.guid:"0:1"})}function A(){return(0,f.Fk)(e=>e.getCurrentPage()?.name||null)}},207694:(e,r,n)=>{n.d(r,{E3:()=>C,JX:()=>M,Lt:()=>B,N9:()=>O,OO:()=>k,Ou:()=>w,Tm:()=>F,XE:()=>P,Z3:()=>D,bn:()=>A,c4:()=>G,iC:()=>V,n_:()=>U,qg:()=>R,rC:()=>E,sb:()=>N,x$:()=>S,y7:()=>L});var i=n(108487),a=n(445777),o=n(988520),s=n(208720),l=n(741419),c=n(352712),d=n(415955),u=n.n(d),p=n(543072),m=n(6819),h=n(481540),_=n(992444),g=n(784762),f=n(718451);let E={r:196/255,g:196/255,b:196/255,a:1},y=[{position:0,color:{r:1,g:1,b:1,a:1}},{position:1,color:{r:1,g:1,b:1,a:0}}],b=y.map(g.Ug),v=e=>{let r=c.s.identity();return r.translate(.5,.5),e&&(T(e.leftEndCap)||T(e.rightEndCap))&&(e.angle>=90||e.angle<-90)?r.rotate(Math.PI):!e||e.height>0&&e.width/e.height<=3?(r.rotate(-Math.PI/2),e&&(e.angle<-45&&e.angle>=-135?r.rotate(Math.PI/2):e.angle<-135||e.angle>135?r.rotate(Math.PI):e.angle>45&&e.angle<=135&&r.rotate(-Math.PI/2))):(e.angle>45||e.angle<-135)&&r.rotate(Math.PI),e&&e.hasReflection&&r.rotate(Math.PI),r.translate(-.5,-.5),r.toFigMatrix()};function T(e){if(!e)return!1;switch(e){case"ARROW_LINES":case"ARROW_EQUILATERAL":case"TRIANGLE_FILLED":case"CIRCLE_FILLED":case"DIAMOND_FILLED":return!0;case"ROUND":case"SQUARE":case"NONE":case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return!1}}let I=null;function S(e){if(!A(e.type))return null;if(0===e.stops.length){let r=m.D.getState();(0,h.ds)("zero_stop_gradient_detected",r.openFile?.key,r),e.stops.push({color:p.FN,position:0})}return e}function w(e){return N(e.type)?e:null}function A(e){return null!=e&&-1!==["GRADIENT_LINEAR","GRADIENT_RADIAL","GRADIENT_ANGULAR","GRADIENT_DIAMOND"].indexOf(e)}function C(e){return null!=e&&-1!==["IMAGE","VIDEO"].indexOf(e)}function N(e){return null!=e&&"SOLID"===e}function L(e){return"IMAGE"!==e.type&&"VIDEO"!==e.type?null:e}function O(e){return!e||(0,f.gl)(e)?null:e.map(L).filter(o.Vq)}function R(e){return Array.from(e.hash).map(e=>(e<16?"0":"")+e.toString(16)).join("")}function P(e){return"PATTERN"!==e.type?null:e}function D(e){return"NOISE"!==e.type?null:e}function M(e){return"CENTER"===e.horizontalAlignment&&"CENTER"===e.verticalAlignment?l.eVK.MIDDLE_CENTER:"START"===e.horizontalAlignment&&"CENTER"===e.verticalAlignment?l.eVK.MIDDLE_LEFT:"END"===e.horizontalAlignment&&"CENTER"===e.verticalAlignment?l.eVK.MIDDLE_RIGHT:"CENTER"===e.horizontalAlignment&&"START"===e.verticalAlignment?l.eVK.TOP_CENTER:"START"===e.horizontalAlignment&&"START"===e.verticalAlignment?l.eVK.TOP_LEFT:"END"===e.horizontalAlignment&&"START"===e.verticalAlignment?l.eVK.TOP_RIGHT:"CENTER"===e.horizontalAlignment&&"END"===e.verticalAlignment?l.eVK.BOTTOM_CENTER:"START"===e.horizontalAlignment&&"END"===e.verticalAlignment?l.eVK.BOTTOM_LEFT:"END"===e.horizontalAlignment&&"END"===e.verticalAlignment?l.eVK.BOTTOM_RIGHT:l.eVK.TOP_LEFT}function k(e){switch(e){case l.eVK.TOP_LEFT:return{horizontalAlignment:"START",verticalAlignment:"START"};case l.eVK.TOP_CENTER:return{horizontalAlignment:"CENTER",verticalAlignment:"START"};case l.eVK.TOP_RIGHT:return{horizontalAlignment:"END",verticalAlignment:"START"};case l.eVK.MIDDLE_LEFT:return{horizontalAlignment:"START",verticalAlignment:"CENTER"};case l.eVK.MIDDLE_CENTER:return{horizontalAlignment:"CENTER",verticalAlignment:"CENTER"};case l.eVK.MIDDLE_RIGHT:return{horizontalAlignment:"END",verticalAlignment:"CENTER"};case l.eVK.BOTTOM_LEFT:return{horizontalAlignment:"START",verticalAlignment:"END"};case l.eVK.BOTTOM_CENTER:return{horizontalAlignment:"CENTER",verticalAlignment:"END"};case l.eVK.BOTTOM_RIGHT:return{horizontalAlignment:"END",verticalAlignment:"END"}}}let F=new class{constructor(){this.clearCache=e=>{null!=e?delete this.cache[e]:this.cache={}},this.getId=(e,r,n)=>`${n}-${r}-${e}`,this.initPaint=(e,r,n,i,a,o)=>this.initPaintWithDefaultImagePaint(e,r,n,i,I,o??!1,a),this.getPaintStopsAndStopsVar=(e,r,n,i)=>{let a=i?[{position:0,color:n},{position:1,color:e}]:[{position:0,color:e},{position:1,color:n}],o=a.map(g.Ug);return r&&(o[i?1:0].colorVar=r),{stops:a,stopsVar:o}},this.initPaintWithDefaultImagePaint=(e,r,n,i,a,o,s)=>{let l={type:e,opacity:1,visible:!0,blendMode:"NORMAL"};if("SOLID"===e?l.color=r:A(e)?(l.stops=y,l.stopsVar=b,l.transform=v(s)):C(e)&&a&&("VIDEO"===e?this.transferVideoAttributes(a,l):this.transferImageAttributes(a,l)),!n)return l;let c=this.cachePaint(n,i);if(this.transferGeneralAttributes(c,l),"SOLID"===e)c.color?this.transferColorAttributes(c,l):c.stops&&c.stops.length&&this.transferColorAttributes(c.stops[0],l);else if(A(e)){if(c.stops)this.transferGradientAttributes(c,l);else if(c.color){let e=G(c.color,o),r=(s&&T(s.rightEndCap))??!1,{stops:n,stopsVar:i}=this.getPaintStopsAndStopsVar({...c.color,a:1},c.colorVar,e,o?!r:r);l.stops=n,l.stopsVar=i}}else"IMAGE"===e?c.image&&c.imageThumbnail&&(this.transferImageAttributes(c,l),l.transform=c.imageTransform):"VIDEO"===e&&c.video&&this.transferVideoAttributes(c,l);return l},this.cachePaint=(e,r)=>(this.cache[r]=this.cache[r]||u()(e),A(e.type)?this.transferGradientAttributes(e,this.cache[r]):"SOLID"===e.type?this.transferColorAttributes(e,this.cache[r]):"IMAGE"===e.type?(this.transferImageAttributes(e,this.cache[r]),this.cache[r].imageTransform=e.transform):"VIDEO"===e.type&&this.transferVideoAttributes(e,this.cache[r]),this.cache[r]),this.transferGeneralAttributes=(e,r)=>{r.opacity=e.opacity,r.blendMode=e.blendMode,r.visible=e.visible},this.transferColorAttributes=(e,r)=>{r.color=e.color},this.transferGradientAttributes=(e,r)=>{r.stops=e.stops,r.stopsVar=e.stopsVar,r.transform=e.transform},this.transferImageAttributes=(e,r)=>{r.image=e.image,r.imageThumbnail=e.imageThumbnail,r.animatedImage=e.animatedImage,r.animationFrame=e.animationFrame,r.imageScaleMode=e.imageScaleMode,r.rotation=e.rotation,r.scale=e.scale,r.paintFilter=e.paintFilter,r.imageShouldColorManage=e.imageShouldColorManage,r.video=void 0},this.transferVideoAttributes=(e,r)=>{r.imageThumbnail=e.imageThumbnail,r.animationFrame=e.animationFrame,r.imageScaleMode=e.imageScaleMode,r.rotation=e.rotation,r.scale=e.scale,r.paintFilter=e.paintFilter,r.video=e.video,r.image=void 0},this.clearCache()}},x=!1;function U(){x||(x=!0,_.Y5.onReady().then(()=>{let e=l.glU.requestDefaultImageStyle(),r=i.w.decodeMessage(e);r.nodeChanges&&r.nodeChanges.length>0&&r.nodeChanges[0].fillPaints&&(I=r.nodeChanges[0].fillPaints[0])}))}function B(e,r){let n=L(e);if(!n)return e;if("STRETCH"===n.imageScaleMode){let e=c.s.identity();return e.translate(.5,.5),e.rotate(-(Math.PI/180*r)),e.translate(-.5,-.5),e.multiply(c.s.fromFigMatrix(n.transform)),{...n,transform:e.toFigMatrix()}}return{...n,rotation:n.rotation+r}}function V(e,r){let n=S(e);if(n){let e=n.stops;return r.index<e.length?e[r.index].color:n.stops[0].color}{let r=w(e);return(0,a.KF)(!!r,"paint is neither a gradient nor a solid"),{...r.color,a:r.opacity??1}}}function G(e,r=!1){var n={...e,a:0};if(!r){let r=(0,s.qN)(e),i=r.v>=.5?r.v-.4:r.v+.4;n=(0,s.kE)({...r,v:i})}return n}},224996:(e,r,n)=>{n.d(r,{Q:()=>a,r:()=>i});var i,a,o=n(551316),s=n(741419),l=n(157907),c=n(579020),d=n(831932),u=n(705694),p=n(392997);class m{constructor(e){for(let r of(this.reported=!1,this.initializationStart=null,this.events={},["applyNodeChanges","multiplayerMessageSize","initializePrototypeLib","viewerSceneDidCompleteInitialLoad","transferSentToWorker","transferMemory","transferMemorySize"]))e[r]=e[r]||[],e[r].push(this)}reset(){this.events={}}start(e){this.logTime(e+"Start"),"initializePrototypeLib"===e&&(this.initializationStart=performance.now())}end(e){this.logTime(e+"End")}logValue(e,r){this.events[e]=r}logTime(e){this.events[e]=Math.round(performance.now())}report(){this.logTime("reportedAt");let e={version:2,firstReport:!this.reported,totalUsedHeapMemory:s.hMR?.getTotalUsedHeapMemory(),maxUsedHeapMemory:s.hMR?.getMaxUsedHeapMemory(),fileKey:u.hk()?.openFileKey(),...this.events};setTimeout(()=>{(0,c.sx)("Prototype Lib Loaded",e),this.reported=!0})}}class h{constructor(e){for(let r of(this.startTimes={},this.meta={},this.track=(0,o.s)(e=>{(0,l.k)().prototype_lib_perf_report&&(0,c.sx)("Prototype Lib Function",e)},200),["applyNodeChanges","getNodeChangesForSwap","multiplayerMessageSize"]))e[r]=e[r]||[],e[r].push(this)}reset(){this.startTimes={},this.meta={}}logValue(e,r){this.meta[e]=r}start(e){this.startTimes[e]=performance.now()}end(e){if(void 0!==this.startTimes[e]){let r=s.hMR.getTotalUsedHeapMemory(),n=s.hMR.getMaxUsedHeapMemory(),i={name:e,start:this.startTimes[e],end:performance.now(),totalUsedHeapMemory:r,maxUsedHeapMemory:n,...this.meta};this.track(i),this.reset()}}}(e=>{let r={},n=new h(r);e.loadTimer=new m(r);let i=[n,e.loadTimer];e.reset=function(){for(let e of i)e.reset()},e.start=function(e){r[e]?.forEach(r=>r.start(e))},e.end=function(e){r[e]?.forEach(r=>r.end(e))},e.logValue=function(e,n){r[e]?.forEach(r=>r.logValue(e,n))};let a=!0;e.reportOOM=function(r){if(!a)return;a=!1;let n=e.loadTimer.initializationStart?Math.round(performance.now()-e.loadTimer.initializationStart):0,i={totalMemoryInBytes:(0,p.le)(),failedSize:r,currentAllocatedBytes:s.hMR.getTotalUsedHeapMemory(),maxAllocatedBytes:s.hMR.getMaxUsedHeapMemory(),timeSinceInitialization:n,is64BitBrowser:d.Ay.is64BitBrowser};(0,c.sx)("Prototype Lib Out Of Memory",i)}})(i||(i={})),(e=>{let r=null;e.setLoadTimeTracker=function(e){r=e},e.getLoadTimeTracker=function(){return r}})(a||(a={}))},716181:(e,r,n)=>{n.d(r,{Ad:()=>X,B8:()=>Y,Cd:()=>ea,Cr:()=>ep,Dd:()=>$,Dg:()=>q,E7:()=>el,H0:()=>ee,HF:()=>Q,JA:()=>ei,LH:()=>en,P2:()=>eo,PY:()=>eh,Ts:()=>eI,Ug:()=>j,V:()=>z,Zp:()=>ed,fl:()=>ev,iW:()=>Z,jp:()=>eg,k6:()=>W,kq:()=>eu,o3:()=>e_,p7:()=>er,se:()=>et,sl:()=>ec,vK:()=>J,w4:()=>es,wl:()=>em,ye:()=>P,zw:()=>D});var i=n(988520),a=n(133696),o=n(741419),s=n(157907),l=n(39773),c=n(579020),d=n(702),u=n(845984),p=n(782810),m=n(379338),h=n(905419),_=n(963359),g=n(570958),f=n(481540),E=n(992444),y=n(834697),b=n(336800),v=n(789269);let T={"frame.react-render":.1,"frame.scene-render":.2,"frame.scene-render.render-tree-generation":.2},I=["react","frame","frame.react-render","frame.scene-render","frame.scene-render.render-tree-generation","frame.style-updater","frame.symbol-updater","frame.trigger-action","fullscreen-handle-event","fullscreen-handle-event.trigger-action","frame.comments-render"],S=1,w=!1,A=null,C=0,N=null,L=0,O=-1/0,R=0,P=null,D=null,M=null,k=null,F=new p.zF,x=new p.zF,U=new p.zF,B=new p.zF,V=new p.zF,G=new p.xV,H={},K=!1;function W(e,r){S=e,w=(0,i.Vq)(r),P&&P.setMultiplayerPerfInfo({multiplayerUserCount:S,ongoingSpotlight:w})}function z(){A=null,N=null,P?.stopRecordingAndLog("closing-file"),P?.setFileInfo(null,"unknown")}function $(e,r){P&&(P.setFileInfo(e,(0,f.Dc)(r)),P.startRecording(!0),(0,v.Jr)().setPendingImagesCallback(P.pendingImagesChanged)),A=e,N=performance.now(),C++;let n=(0,m.tl)().editing_file;1===C&&n&&(0,c.sx)("Cold Boot Document Load",{fileKey:A,fileVersion:o.i6g.currentFileVersion(),loadedTime:N,fileNodeCount:o.CeL.getFileNodeCount(),fileTeamId:n.team_id,fileParentOrgId:(0,m.tl)().org_id})}function Y(e){P?.setFileInfo(A,f.Dc(e))}function j(){P?.stopRecordingAndLog("about-to-rebuild-scene")}function q(){P?.startRecording(!1)}function X(){P?.recordSingleFrameNamedEvent("tileRenderingActive")}function Z(){P?.recordSingleFrameNamedEvent("createTableActive")}function J(){P?.recordSingleFrameNamedEvent("editTableTextActive")}function Q(){P?.recordSingleFrameNamedEvent("reorderTableSpanActive")}function ee(){P?.recordSingleFrameNamedEvent("connectDiagramShapeWithConnectorActive")}function et(){P?.onNodeDragStart()}function er(){P?.onNodeDragEnd()}function en(e){P?.onTileRendererChanged(e)}function ei(){P?.onContextRestored()}function ea(e){P?.updateMaxRenderLayerCount(e)}function eo(e){P?.updateMaxRenderedTileBytesUsed(e)}function es(){P?.incrementNumAnimationsFromCpp()}function el(){P?.incrementNumAnimationsFromTs()}function ec(){F.setIsActive()}function ed(){x.setIsActive()}function eu(){U.setIsActive()}function ep(){B.setIsActive()}function em(){V.setIsActive()}function eh(){P?.recordSingleFrameNamedEvent("createStickyActive")}function e_(){P?.recordSingleFrameNamedEvent("differentSectionClicked")}function eg(e){P?.recordSingleFrameNamedEvent(u.jY(e))}let ef=["ALT","META","SHIFT","CONTROL","RIGHT_ALT"];function eE(e){let{fileKey:r,fileNodeCount:n,multiplayerUserCount:i,ongoingSpotlight:o,recentInteractions:s,secondsSinceLoaded:l,version:c,randomID:d}=e,u={fileKey:r,fileNodeCount:n,multiplayerUserCount:i,ongoingSpotlight:o,secondsSinceLoaded:l,version:c,randomID:d,reportCount:L};for(let e=0;e<s.length;e++)u[`recentInteractions.${e}`]=JSON.stringify(s[e]);return(0,h.q)(e.gpuDeviceInfo,u),(0,a.Dy)(e.nodeTypeHistogram,u,"nodeTypeHistogram"),u}function ey(e){(0,c.sx)("Slow Editor Interaction",e),O=performance.now(),R=e.duration}function eb(...e){}function ev(){if(!E.Y5?.isReady())return;let e={},r=d.rH.report(),n=0;for(let i of r)!function r(n,i=""){let a=i.length>0?`${i}.${n.name}`:n.name,o=H[a]||n.hitCount,s=n.hitCount-o;s>n.elapsedTimes.length&&(K||(console.warn(`Too many elapsed hits of ${a} since last report`),K=!0),s=n.elapsedTimes.length);let l=0,c=n.elapsedTimes.length;for(let e=c-s;e<c;e++)l+=n.elapsedTimes[e];for(let i of(e[a]=l,H[a]=n.hitCount,n.children))r(i,a)}(i),n+=e[i.name];!function(){if(n/1e3<.2)return;let[r,i]=null===A||null===N?[null,[]]:[{gpuDeviceInfo:(0,h.l)(),fileKey:A,fileNodeCount:o.CeL.getFileNodeCount(),multiplayerUserCount:S,ongoingSpotlight:w,nodeTypeHistogram:o.CeL.getNodeTypeHistogram(),recentInteractions:o.CeL.getRecentInteractions(),secondsSinceLoaded:(performance.now()-N)/1e3,version:1,randomID:(0,y.ds)(),reportCount:L},o.CeL.getSlowInteractions()];if(null==r)return;let s={};for(let r in e)-1!==I.indexOf(r)&&(s[r]=e[r]/1e3);let l=i.map(e=>{let n=e.interaction,i={kind:"interaction",type:n.type,subtype:n.subtype,frame:e.frame,collapsed:!1,duration:e.duration,...eE(r)};if(ef.forEach(e=>i["modifier."+e]=null),"MOUSE"===n.type)for(let e of(i.collapsed=n.collapsed,ef))i["modifier."+e]=-1!==n.modifiers.indexOf(e);return(0,a.Dy)(s,i,"timer"),i});for(let n in e){let i=e[n]/1e3,o=T[n];if("number"==typeof o&&i>=o){let e={kind:"timer",type:n,subtype:null,frame:null,collapsed:!1,duration:i,...eE(r)};(0,a.Dy)(s,e,"timer"),ef.forEach(r=>e["modifier."+r]=null),l.push(e)}}if(0===l.length)return;let c=[],d=l,u=60-(performance.now()-O)/1e3;if(0===(d=d.filter(e=>u<=0||e.duration>=2*R)).length&&c.push(`we're in the report cooldown period (${u}s to go) and no reports were long enough to override it (the last report duration was ${R}s)`),u>0&&d.length,null===N)return;let p=60-(performance.now()-N)/1e3;p>0&&c.push(`we're in the document loading cooldown period (${p}s to go)`),c.length>0?function(e){if(1===e.length)return e[0];if(2===e.length)return e[0]+" and "+e[1];let r=e.slice(0,e.length-1).join(", ");return r+=", and ",r+=e[2]}(c):((d=d.sort((e,r)=>e.duration-r.duration)).forEach(ey),L++)}(),o.CeL.clearNodeTypeHistogram(),o.CeL.clearSlowInteractions()}function eT(e){let r=0,n=0,i=[];for(let a of e)1===a.path.length&&"frame"===a.path[0]?(n=a.elapsedTime,i.push(a)):a.path.length>1&&"frame"===a.path[0]?(r+=a.elapsedTime,i.push(a)):1===a.path.length&&i.push(a);if(r>0){let e=n-r;i.push({path:["frame","unaccounted-time"],elapsedTime:e})}return i}function eI(){if(!P&&(0,s.k)().frame_distribution_tracker_edit){let e=e=>{let r=o.AiE.getAndClearHistogramBatchFields(),n=new Map;r.forEach((e,r)=>{n.set(r,e>0)}),e.optimizationExposures=JSON.stringify(Object.fromEntries(n))};(P=new u.AH("editor_frame_distributions",eT,2,!0,new g.s,r=>{e(r)},!1,(e,r=!1)=>{let n=o.AiE.getAndClearSlowFrameTrackerFields(),i=new Map;n.forEach((e,r)=>{i.set(r,e>0)}),e[_.N.optimizationExposuresKey]=JSON.stringify(Object.fromEntries(i));let a=o.yuz.getFullscreenCurrentFrameGpuMetricsJSON();e[_.N.gpuMetricsCurrentFrameKey]=a.toString();let s=o.fZb.getCurrentFrameCpuTimerTreeJSON();if(e[_.N.cpuTimerTreeCurrentFrameKey]=s.toString(),r){let r=o.yuz.getFullscreenPreviousFrameGpuMetricsJSON();e[_.N.gpuMetricsPreviousFrameKey]=r.toString();let n=o.fZb.getPreviousFrameCpuTimerTreeJSON();e[_.N.cpuTimerTreePreviousFrameKey]=n.toString()}let c=o.Ez5.activeRunningAnimations();e[_.N.activeAnimationsKey]=c;let d=l.zl.get(b.f);d>0&&(e[_.N.numberOfDevAnnotationsVisibleKey]=d)},e=>{o.AiE.clearSlowFrameTrackerFields(),o.yuz.nextFrame(e),o.fZb?.nextFrame(e)})).addEventTracker("zoomActive",new p.vu),P.addEventTracker("panActive",new p.H0),P.addEventTracker("viewportHasGaps",new p.as(o.pWM.DEFINITELY_COVERED_ONLY)),P.addEventTracker("viewportIncludingOutdatedHasGaps",new p.as(o.pWM.DEFINITELY_COVERED_AND_OUTDATED)),P.addEventTracker("multipleMultiplayerUsersInFile",new p.nc(2,()=>S)),P.addEventTracker("multipleMultiplayerUsersInFileAndPanningOrZooming",new p.Pn(2,()=>S)),P.addEventTracker("viewportHasBlurryRegions",new p.eO(1)),P.addEventTracker("viewportHasVeryBlurryRegions",new p.eO(.5)),P.addEventTracker("viewportIsBlurry",new p.I7(1)),P.addEventTracker("viewportIsVeryBlurry",new p.I7(.5)),P.addEventTracker("timeSlicedEditRenderingActive",new p.t8),P.addEventTracker("stalenessIsHigh",new p.bF(1e3)),P.addEventTracker("stalenessIsVeryHigh",new p.bF(2e3)),P.addEventTracker("moveCursorActive",new p.vw),D=new p.Ti,P.addEventTracker("cursorChatActive",D),M=new p.W,P.addEventTracker("cursorReactionActive",M),P.trackOtherUserCursorMoved(),k=new p.Fy,P.addEventTracker("devModeAnnotationsVisible",k),P.addEventTracker("independentLayerAnimationActive",F),P.addEventTracker("nonIndependentLayerAnimationActive",x),P.addEventTracker("independentLayerActive",U),P.addEventTracker("independentLayerAdded",B),P.addEventTracker("independentLayerRemoved",V),P.addEventTracker("isTypingTextActive",G)}}},291661:(e,r,n)=>{n.d(r,{Ts:()=>w,Z_:()=>b,rE:()=>v,yQ:()=>y});var i=n(741419),a=n(157907),o=n(39773),s=n(579020),l=n(141039),c=n(6819),d=n(831932),u=n(808471),p=n(481540),m=n(392997),h=n(912712),_=n(822985),g=n(981455);let f={periodMs:36e5,frequentPeriodMs:6e4},E={periodMs:3e5,frequentPeriodMs:6e4};function y(e,r){return Object.keys(e).reduce((n,i)=>{let a=r[i],o=e[i];return null!=a&&null!=o&&(n[i]=a-o),n},{})}function b(){let e=i.P2e.getHeapMemoryBreakdown(),r={};for(let n of Object.keys(e))r[`heap_breakdown_${n}`]=e[n];let n=v(),a=i.P2e.getRendererMemoryBreakdown()||{};function o(e){return"number"==typeof e?e:parseInt(e)}return{...n,renderer_gpu_memory:o(i.P2e.getRendererGpuMemory()),renderer_textures_memory:o(a.textures),renderer_vertex_buffers_memory:o(a.vertexBuffers),renderer_render_buffers_memory:o(a.renderBuffers),renderer_uniform_buffers_memory:o(a.uniformBuffers),image_memory:o(i.P2e.getTotalImageMemory()),...r}}function v(){let e=(0,m.aW)()??0,r=i.hMR,n=r.getTotalUsedHeapMemory();return{process_memory:e,cpp_memory:n,js_memory:e>n?e-n:void 0,cpp_max_memory:r.getMaxUsedHeapMemory(),alloc_total:r.getAllocTotal(),alloc_call_count:r.getAllocCallCount(),emscripten_reserved_memory:(0,m.le)(),indirect_buffer_memory:r.getJsBufferMemory(),texture_image_memory:r.getTextureMemStatsTotal(i.aDE.IMAGE),texture_tile_atlas_memory:r.getTextureMemStatsTotal(i.aDE.TILE_ATLAS),texture_tile_stack_memory:r.getTextureMemStatsTotal(i.aDE.TILE_STACK),texture_glyph_data_memory:r.getTextureMemStatsTotal(i.aDE.GLYPH_DATA),compressed_images:r.getImageMemStatsTotal(i.fLc.BITMAP),uncompressed_images_arraybuffer:r.getImageMemStatsTotal(i.fLc.COMPRESSED),uncompressed_images_imagebitmap:r.getImageMemStatsTotal(i.fLc.BUFFER)}}async function T(){if(l.eD){let e=await l.eD.getCPUUsage();if(e)return e.percent}return null}async function I(e,r,n,a,l){let m="Fullscreen Periodic Metrics"===e;if(!(!i.hMR||"ok"!==o.zl.get(_.h)||(0,u.PN)())){if(m){let o=b();n&&(o.cpu_usage=await T());let s=(0,g.dd)(),u=(0,g.PH)();(0,p.ds)(e,a,c.D.getState(),{reporting_interval:r,file_key:a,is_hidden:document.hidden,product_type:l,is64BitBrowser:d.Ay.is64BitBrowser,multiplayer_state:(0,h.LD)(i.h3O.getSessionState()),...o,...s,...u},{forwardToDatadog:!0})}else{let i=v();n&&(i.cpu_usage=await T());let o=(0,g.dd)(),l=(0,g.PH)();(0,s.sx)(e,{reporting_interval:r,file_key:a,is_hidden:document.hidden,is64BitBrowser:d.Ay.is64BitBrowser,...i,...o,...l},{forwardToDatadog:!0})}}}let S=!1;function w(e,r,n){if(S)return;S=!0;let i=(0,a.k)().cpu_monitoring_enabled||!1,o="Fullscreen Periodic Metrics"===e?f:E,s=o.periodMs;(0,a.k)().frequent_periodic_metrics&&(s=o.frequentPeriodMs),setTimeout(()=>{I(e,0,i,r(),n())},3e5),setInterval(()=>{I(e,s,i,r(),n())},s)}},127643:(e,r,n)=>{n.d(r,{U:()=>o});var i=n(741419);let a=[];function o(e){for(let r of a)r(e===i.dYj.YES)}},95432:(e,r,n)=>{n.d(r,{av:()=>v});var i=n(848318),a=n(71309),o=n(745017),s=n(553372),l=n(444673),c=n(159491),d=n(351143),u=n(486810),p=n(519282),m=n(550109),h=n(500277),_=n(407480),g=n(397958),f=n(185920),E=n(221435),y=n(277084),b=n(751303);function v(e){switch(e){case"CLOSE_OVERLAY":return i.createElement(a.r,null);case"GO_BACK":return i.createElement(o.E,null);case"NAVIGATE_TO":default:return i.createElement(s.N,null);case"OPEN_OVERLAY":return i.createElement(l.x,null);case"OPEN_URL":return i.createElement(c.r,null);case"SCROLL_TO":return i.createElement(d.M,null);case"SWAP_WITH":return i.createElement(u.M,null);case"SWAP_STATE_TO":return i.createElement(p.x,null);case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":return i.createElement(m.H,null);case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return i.createElement(h.D,null);case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":return i.createElement(_.s,null);case"UPDATE_MEDIA_SKIP_TO":return i.createElement(g.C,null);case"SET_VARIABLE":return i.createElement(f.u,null);case"SET_VARIABLE_MODE":return i.createElement(E.x,null);case"CONDITIONAL":return i.createElement(y.$,null);case"NONE":return i.createElement(b.i,null)}}},626740:(e,r,n)=>{n.d(r,{h:()=>a});let i=[];function a(e){for(let r of i)r(e)}},491486:(e,r,n)=>{n.d(r,{g:()=>i});function i(e){}},274800:(e,r,n)=>{n.d(r,{$4:()=>b,jI:()=>E,up:()=>y});var i=n(611506),a=n(579020),o=n(141039),s=n(6819),l=n(481540),c=n(992444),d=n(940210),u=n(943587),p=n(560340),m=n(179882),h=n(77025),_=n(595003),g=n(751560);let f=new class{constructor(){this._suggestionsCache=new i.q(100),this._textReviewPluginRunner=new _.X,this._currentPromise=null}async setCurrentImplementation(e,r){let n=await (0,p.LJ)(),i=await (0,p.N_)(),o=(0,p.oz)();await e.initialize(r,[...n,...i,...o]),this._current=e;let c=await (0,p.LE)();console.log(`[spell-check] using implementation: ${this._current?.name}. Current language: ${r}. Supported languages: ${c}`);let d=s.D.getState().selectedView,u=(0,l.Dc)(d.editorType);(0,a.sx)("Spell Check Ready",{productType:u,language:r,implementationName:this._current?.name,userIgnoreWordsCount:(n||[]).length})}get current(){return this._currentPromise||(this._currentPromise=(async()=>(await this.ensureImplementationLoaded(),this._current))()),this._currentPromise}async ensureImplementationLoaded(){if(this._current)return;let e=await (0,p.x5)(),r=(0,h.up)(e),n=(0,p.Ev)(r);switch(e){case g.QC.DESKTOP:await this.setCurrentImplementation(new u.f,n);break;case g.QC.AGENT:await this.setCurrentImplementation(new d.UV,n);break;case g.QC.HUNSPELL:await this.setCurrentImplementation(new m.mz,n)}}async getSuggestionsForWord(e){return this._suggestionsCache.has(e)?Promise.resolve(this._suggestionsCache.get(e)||[]):(await this.current).getSuggestionsForWord(e).then(r=>(this._suggestionsCache.set(e,r),r))}async spellCheckText(e){return(await this.current).spellCheckText(e)}async runTextReviewPlugin(e){return _.X.shouldUsePluginForSpellChecking()?await this._textReviewPluginRunner.reviewText(e):[]}getAPIName(){return this._current?.name||"N/A"}shouldEnableWhenFirstActivated(){let e=navigator.languages||[navigator.language];return function(e,r){if(e)return!0;try{let e=r.map(e=>(e||"").toLowerCase()).map(e=>e.split("-")[0]);if(!(e.includes("en")||e.includes("ru")))return!1}catch(e){}return!0}(!!o.eD,e)}reset(){this._current=void 0,this._currentPromise=null,this._suggestionsCache.reset()}};async function E(e){return await f.ensureImplementationLoaded(),f._suggestionsCache.reset(),f._current.setLanguage(e)}async function y(e){await E((0,p.Ev)(e)),c.Y5&&c.Y5.isReady()&&c.Y5.triggerAction("redo-spell-checking")}let b=f},740961:(e,r,n)=>{n.d(r,{no:()=>c});var i=n(992277),a=n(179703),o=n(502255),s=n(163383);class l{getSummaryAsClipboardText(e){let r;let n=(0,a.UN)().get(e),l=n?.getWidgetSyncedState()["syncedState:ai-summary-items"],c=n?.getWidgetSyncedState()["syncedState:summarized-at"];try{r=JSON.parse(l)}catch(e){(0,o.$D)(i.e.AI_PRODUCTIVITY,Error(`Could not parse summary data, error: ${e}`))}return(0,s.Aq)(r,c)}}function c(){new l}},105513:(e,r,n)=>{n.d(r,{hR:()=>o});var i=n(344390);class a{rgbaToThumbhash(e,r,n){if(e>100||r>100){let i=e,a=r,o=e/r;e<r?e=Math.round((r=100)*o):r=Math.round((e=100)/o);let s=new OffscreenCanvas(i,a),l=s.getContext("2d"),c=new ImageData(new Uint8ClampedArray(n),i,a);l.putImageData(c,0,0);let d=new OffscreenCanvas(e,r).getContext("2d");d.drawImage(s,0,0,i,a,0,0,e,r),n=new Uint8Array(d.getImageData(0,0,e,r).data)}return(0,i.WB)(e,r,n)}thumbhashToRgba(e){let{w:r,h:n,rgba:a}=(0,i.Oe)(e);return{width:r,height:n,rgba:a}}}function o(){new a}},164666:(e,r,n)=>{n.d(r,{i:()=>s}),n(741419);var i=n(39773);n(579020),n(431118),n(992444),n(789269),n(710905);let a=(0,i.eU)({}),o=(0,i.Iz)(e=>(0,i.eU)(r=>r(a)[e]??"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAABmCAYAAACN+dAoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABeSURBVHgB7cAxAQAAAMKg9U9tDQ8oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4NyDtAAG2m4HvAAAAAElFTkSuQmCC",(r,n,i)=>{let o=r(a);n(a,{...o,[e]:i})}));function s(e){let r=o(e);return(0,i.md)(r)}},517027:(e,r,n)=>{n.d(r,{fT:()=>c});var i=n(741419),a=n(157907),o=n(322627),s=n(243973);class l{isUI3(){return i.Ez5?.uiState().isUI3.getCopy()??!1}showUI3Colors(){return i.Ez5?.uiState().showUI3Colors.getCopy()??!1}showUI3ColorsInitialValue(){return s.y.isIpad()?(0,o.Dz)()&&!!(0,a.k)().figjam_ui3_color_palette:!!(0,a.k)().figjam_ui3_color_palette}}function c(){new l}},406469:(e,r,n)=>{n.d(r,{nd:()=>s});var i=n(741419),a=n(963376);let o=null;function s(e,r){o&&o.pasteID===e&&o.fileKey===r?o.offset=o.offset+1:o={pasteID:e,fileKey:r,offset:1},2===o.offset&&i.glU.shouldNudgeComponentCreationForSelection()&&(0,a.YQ)({id:"Upsell Libraries Valid Paste For Nudge"})}},822610:(e,r,n)=>{n.d(r,{Zr:()=>o});var i=n(716544);n(921494);var a=n(355323);function o(e){return(0,i.d4)(r=>(0,a.Yh)(r.mirror.appModel,e))}},820430:(e,r,n)=>{n.d(r,{_:()=>h});var i=n(741419),a=n(157907),o=n(579020),s=n(6819),l=n(44509),c=n(757033),d=n(442313),u=n(697714),p=n(992444);class m{async pasteVariablesWithLocalizationPopup(e,r,n){let m=[];for(let r=0;r<e.size;r+=25){let n=Array.from(e.entries()).slice(r,r+25).map(([e,r])=>`${e}|${r}`).join(","),i=`/api/variables/publish_state?keysAndLibrary=${n}`;m.push(c.Ay.post(i))}let h={};(await Promise.all(m)).forEach(e=>{Object.assign(h,e.data.meta)});let _=new Set;return Object.keys(h).forEach(e=>!1===h[e]?_.add(e):null),_.size>0&&((0,o.sx)("prototype.variables_pasted",{numPublished:e.size-_.size,numUnpublished:_.size}),(0,a.k)().variables_paste_remap_popup?(s.D.dispatch(u.F.dequeue({matchType:"localize_unpublished_variables"})),s.D.dispatch(u.F.dequeue({matchType:"unpublished_variables_localized"})),s.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable_localize"),type:"localize_unpublished_variables",button:{text:(0,d.t)("proto.paste_unpublished_variable_localize_cta"),action:()=>{let e=i.CWU.performVariableLocalizationFromPopup(_,r,n);if(p.Y5.commit(),Object.keys(e).includes("numberOfNewVariables")){let r=e.numberOfNewVariables;r>0&&s.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.unpublished_variables_localized",{numberOfVariables:r}),type:"unpublished_variables_localized"}))}}}}))):s.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable"),button:{text:(0,d.t)("proto.paste_unpublished_variable_cta"),action:()=>{l.Ay.unsafeRedirect("https://help.figma.com/hc/articles/14506821864087#copy_paste","_blank")}}}))),{}}}function h(){new m}},773422:(e,r,n)=>{n.d(r,{AZ:()=>S,BQ:()=>V,EP:()=>ea,G6:()=>P,JG:()=>Z,K6:()=>D,Kd:()=>K,L5:()=>eo,M6:()=>es,Pt:()=>L,Rb:()=>N,SG:()=>ei,SR:()=>A,Xv:()=>H,bL:()=>M,e3:()=>X,hg:()=>U,iC:()=>et,jI:()=>Y,kf:()=>z,lC:()=>R,nN:()=>w,nR:()=>O,pN:()=>J,qd:()=>B,rW:()=>I,t8:()=>G,tZ:()=>F,u:()=>x,u5:()=>$,wM:()=>W,wX:()=>k,yp:()=>C});var i=n(848318),a=n(988520),o=n(781131),s=n(741419),l=n(157907),c=n(39773),d=n(430285),u=n(656470),p=n.n(u),m=n(575058),h=n(967867),_=n(169794);n(369600);var g=n(691232),f=n(264917),E=n(931516),y=n(949651),b=n(243315),v=n(365581),T=n(53818);function I(e){let r=(0,c.md)(v.Gc);return er(e?r[e]??[]:[])}function S(e){return(0,c.md)((0,v.A6)(e))}function w(){return(0,c.md)(v.qy)}function A(){N(),C(),(0,c.md)(v.xA),L(),O(),(0,c.md)(v.jt)}function C(){let e=er((0,c.md)(v.TD));return(0,_.iw)(e)}function N(){return er((0,c.md)(v.uk))}function L(){return(0,c.md)(v.bO)}function O(){return(0,c.md)(v.LC)}function R(e){return(0,c.md)((0,v.ZG)(e))}function P(e){let r=(0,i.useMemo)(()=>e?(0,v.Eo)(e):(0,c.eU)(null),[e]),n=(0,c.md)(r);if(n)return n;if(!e)return;let a=s.CWU.getSubscribedVariableSetInfo(e);if(a)return(0,E.Rn)(a)}function D(e,r){let n=function(e){let r=e?(0,v.hy)(e):(0,c.eU)(null);return(0,c.md)(r)}(e);return n?.modeValues?.[r]??void 0}function M(e,r){return x(e)?.modeValues?.[r]??void 0}function k(e){let r=(0,m.wm)(()=>e,[e]),n=(0,i.useMemo)(()=>(0,c.eU)(e=>r.map(r=>(0,a.Vq)(r)?e(v.Cg)[r]??null:null)),[r]);return(0,c.md)(n)}function F(e){return x(e)?.name||(e?s.CWU.getVariableNameInStyleSelection(e)??void 0:void 0)}function x(e){let r=(0,i.useMemo)(()=>e?(0,v.Ev)(e):(0,c.eU)(null),[e]),n=(0,c.md)(r);if(n)return n;if(!e)return null;let a=s.CWU.getSubscribedVariableInfo(e);return a?(0,E.ZI)(a):null}function U(e,r){let n=(0,m.wm)(()=>e,[e]),a=(0,i.useMemo)(()=>(0,c.eU)(e=>n.map(n=>{if(!n)return null;let i=e((0,v.Ev)(n));if(i)return i;if(r){let e=s.CWU.getSubscribedVariableInfo(n);if(e)return(0,E.ZI)(e)}return null})),[r,n]);return(0,c.md)(a)}function B(e,r){let n=(0,m.wm)(()=>e,[e]),a=(0,i.useMemo)(()=>(0,c.eU)(e=>{let i={};return n.forEach(n=>{if(!n)return;let a=(0,v.BJ)(n,r??{});if(a){i[n]=e(a);return}i[n]=null}),i}),[n,r]);return(0,c.md)(a)}function V(e,r){let n=(0,i.useMemo)(()=>e?(0,v.BJ)(e,r??{}):(0,c.eU)(null),[e,r]);return(0,c.md)(n)}function G(e,r){let n=V(e,r);return(0,a.Vq)(n)&&"MIXED"!==n?n:void 0}function H(e,r){return(0,i.useMemo)(()=>{if(!e||!r)return null;let n=new Map(Object.entries(r));return s.CWU.getVariableChainForModes(e,n)},[e,r])}function K(e){let r=x(e),n=P(r?.variableSetId);return n?"LOCAL"===n.subscriptionStatus?n.keyForPublish:n.key:null}function W(e){let r=(0,i.useMemo)(()=>(0,v.Oj)(e),[e]),n=(0,c.md)(r);return(0,m.k9)(()=>{let e={};for(let r of Object.values(n))if("loaded"===r.status)for(let n of r.data.variableCollection?.variables??[])e[(0,o.ey)(n.key)]=n;return e},[n])}function z(e){let r=(0,i.useMemo)(()=>!e||(0,h.wJ)(e)?(0,c.eU)(null):(0,v.cp)(e),[e]),n=(0,h.$Q)(e),a=(0,v.Ri)(n),o=(0,c.md)(r),s=(0,c.md)(a),l=(0,f.je)(),u=!!l.data?.find(r=>r.fileKey===e);return(0,m.wm)(()=>{if(!u||!o&&!s)return d.Qw.loaded([]);if(o?.status==="loading"||o?.status==="disabled"||s?.status==="loading")return d.Qw.loading();let e=o&&d.Qw.from(o),r=e?{type:"team",value:e}:{type:"community",value:s};return d.Qw.loaded((0,_.cM)(r,!1))},[u,o,s])}function $(e){let r=(0,i.useMemo)(()=>!e||(0,h.wJ)(e)?(0,c.eU)(null):(0,v.cp)(e),[e]),n=(0,h.$Q)(e),a=(0,v.Ri)(n),o=(0,c.md)(r),s=(0,c.md)(a),l=(0,f.je)(),u=l.data?.find(r=>r.fileKey===e);return(0,m.wm)(()=>{if(!u||!o&&!s)return d.Qw.loaded([]);if(o?.status==="loading"||s?.status==="loading")return d.Qw.loading();let e=o&&d.Qw.from(o),r=e?{type:"team",value:e}:{type:"community",value:s};return d.Qw.loaded((0,_.kX)(r,!1))},[u,o,s])}function Y(e={}){let r=e?.enabled??!0,n=!!(0,l.k)().dse_lk_asset_updates_vars,i=j({enabled:r&&!n}),a=q({enabled:r&&n});return n?a:i}let j=(0,T.n)((e={})=>{let r=!1===e.enabled,n=(0,f.je)(),a=(0,m.wm)(()=>n.data?.map(e=>e.fileKey)??[],[n.data]),o=(0,i.useMemo)(()=>r?(0,v.Jo)(a):(0,v.H2)(a),[r,a]),s=(0,c.md)(o);return(0,m.wm)(()=>{let e=d.Qw.all(Object.values(s));return"loaded"!==e.status?e:d.Qw.loaded({items:p()(Object.values(s).map(e=>(0,_.kX)({type:"team",value:e},!1)))})},[s])}),q=(0,T.n)((e={})=>{let r=!1===e.enabled,n=(0,f.je)(),a=(0,m.wm)(()=>n.data?.map(e=>e.libraryKey)??[],[n.data]),o=(0,i.useMemo)(()=>r?(0,v.Jo)(a):(0,v.wh)(a),[r,a]),s=(0,c.md)(o);return(0,m.wm)(()=>{let e=d.Qw.all(Object.values(s));return"loaded"!==e.status?e:d.Qw.loaded({items:Object.values(s).flatMap(e=>(0,_.C$)(e,!1))})},[s])}),X=(0,c.eU)(null);function Z({enabled:e=!0}){let r=en({enabled:e}),[n,a]=(0,c.fp)(X);return(0,i.useEffect)(()=>{(null===n||n.status!==r.status)&&a(r)},[r,a,n]),"loaded"===r.status}function J(e){let r=e?.enabled??!0,n=!!(0,l.k)().dse_lk_asset_updates_vars,i=Q({enabled:r&&!n}),a=ee({enabled:r&&n});return n?a:i}let Q=(0,T.n)(e=>{let r=(0,f.je)(),n=(0,m.wm)(()=>r.data?.filter(e=>!h.wJ(e.fileKey)).map(e=>e.fileKey)??[],[r.data]),a=(0,m.wm)(()=>r.data?.filter(e=>h.wJ(e.fileKey)).map(e=>e.fileKey)??[],[r.data]),o=e?.enabled===!1,s=(0,i.useMemo)(()=>{if(o){let e={};return n.forEach(r=>{e[r]=d.Qw.disabled()}),(0,c.eU)(e)}return(0,v.Yt)(n)},[o,n]),l=(0,c.md)(s),u=(0,i.useMemo)(()=>{if(o){let e={};return a.forEach(r=>{e[r]=d.Qw.disabled()}),(0,c.eU)(e)}return(0,v.hz)(a)},[o,a]),g=(0,c.md)(u);return(0,m.wm)(()=>{let e=d.Qw.all(Object.values({...l,...g}));return"loaded"!==e.status?e.transform(()=>({libraryVariableSets:[],libraryVariables:[]})):d.Qw.loaded({libraryVariableSets:[...p()(Object.values(l).map(e=>(0,_.kX)({type:"team",value:e},!1))),...p()(Object.values(g).map(e=>(0,_.kX)({type:"community",value:e},!1)))],libraryVariables:[...p()(Object.values(l).map(e=>(0,_.cM)({type:"team",value:e},!1))),...p()(Object.values(g).map(e=>(0,_.cM)({type:"community",value:e},!1)))]})},[l,g])}),ee=(0,T.n)(e=>{let r=e?.enabled===!1,n=(0,f.je)(),a=(0,m.wm)(()=>n.data?.map(e=>e.libraryKey)??[],[n.data]),o=(0,i.useMemo)(()=>r?(0,v.Jo)(a):(0,v.Ho)(a),[r,a]),s=(0,c.md)(o);return(0,m.wm)(()=>{let e=d.Qw.all(Object.values(s));return"loaded"!==e.status?e.transform(()=>({libraryVariableSets:[],libraryVariables:[]})):d.Qw.loaded({libraryVariableSets:Object.values(s).flatMap(e=>(0,_.C$)(e,!1)),libraryVariables:Object.values(s).flatMap(e=>(0,_.q0)(e,!1))})},[s])});function et(e,r,n){if(e)return s.w3z.getIdsOfVariablesWithValue(e,r,{type:n.type,value:n.value})}function er(e){return i.useMemo(()=>e.filter(e=>!(0,y.eF)(e)),[e])}function en(e){let r=N(),n=J(e);return(0,i.useMemo)(()=>n?.status!=="loaded"?n.transform(()=>[]):d.Qw.loaded([...n.data?.libraryVariables??[],...r??[]]),[r,n])}function ei(e,r){let n=(0,b.iG)(e),a=en(r);return(0,i.useMemo)(()=>{if("loaded"!==a.status)return a.transform(()=>[]);let r=a.data?.filter(e=>b.AQ(e,n))??[],i=[];for(let n of e){let e=y.Io[n];e&&a&&(i=i.concat(r.filter(r=>e.includes(r.resolvedType))))}return d.Qw.loaded([...i])},[e,a,n])}function ea(e){let r=e?.subscriptionStatus==="SUBSCRIBED"?e.library_key:void 0,n=(0,g.U)(r?[r]:[],{enabled:!0}).data;return r?n?.[r]:void 0}function eo(e){let r=e&&(0,E.GI)(e),n=P(r?e.rootVariableSetId:void 0);return(r?n:e)??null}function es(){return(ei(["FONT_STYLE"]).data??[]).length>0}},586719:(e,r,n)=>{n.d(r,{RW:()=>y,Vr:()=>c,_n:()=>u,j2:()=>m,uE:()=>f,xQ:()=>T,xb:()=>_});var i=n(891627),a=n(615530),o=n(741419),s=n(897392);let l=null;function c(e){return l=e,()=>{l=null}}let d=null;function u(e){return d=e,()=>{d=null}}let p=null;function m(e){return p=e,()=>{p=null}}let h=null;function _(e){return h=e,()=>{h=null}}let g=null;function f(e){return g=e,()=>{g=null}}let E=new a.b("VariableMirrorVariableResolvedValueEmitter");function y(e,r){return o.u4j.subscribeToLocalVariableResolvedValue(e,s.AD),E.on(e,r),()=>{o.u4j.unsubscribeFromLocalVariableResolvedValue(e,s.AD),E.removeListener(e,r)}}let b=new a.b("VariableMirrorExplicitModeEmitter");class v{localVariableSetUpdated(e){(0,i.unstable_batchedUpdates)(()=>{l?.({added:[e]})})}localVariableSetDeleted(e){(0,i.unstable_batchedUpdates)(()=>{l?.({deleted:e}),p?.({setDeleted:e})})}subscribedVariableSetUpdated(e,r){(0,i.unstable_batchedUpdates)(()=>{d?.({added:[e]}),g?.({setDeleted:e.id}),g?.({added:r})})}subscribedVariableSetDeleted(e){(0,i.unstable_batchedUpdates)(()=>{d?.({deleted:e}),g?.({setDeleted:e})})}localVariablesUpdated(e){p?.({added:e})}localVariableOverridesUpdated(e){h?.({added:e})}localVariableOverridesDeleted(e){h?.({deleted:e})}localVariablesDeleted(e){p?.({deleted:e}),e.forEach(e=>{E.trigger(e,{})})}variableResolvedValueUpdated(e,r){E.trigger(e,r)}explicitModeUpdated(e,r){b.trigger(e,r)}resetMirrorCache(){(0,i.unstable_batchedUpdates)(()=>{l?.(null),p?.(null),h?.(null),d?.(null),g?.(null)}),E.removeAllListeners()}}function T(){new v}},990627:(e,r,n)=>{n.d(r,{tG:()=>g});var i=n(551316),a=n(741419),o=n(157907),s=n(757033),l=n(670906),c=n(50258),d=n(992444),u=n(789269),p=n(409630),m=(e=>(e.FILE_KEY="fileKey",e.LIBRARY_KEY="libraryKey",e))(m||{});class h{constructor(){this.pendingPasteRequests={},this.pendingVideosToRecordByFileKey={},this.pendingVideosToRecordByLibraryKey={},this.pendingRecordVideosTasksByFileKey={},this.pendingRecordVideosTasksByLibraryKey={},this.allVideos={},this.flushPendingRecordVideos=(0,i.s)(async()=>{let e=this.pendingVideosToRecordByFileKey,r=this.pendingVideosToRecordByLibraryKey,n=this.pendingRecordVideosTasksByFileKey,i=this.pendingRecordVideosTasksByLibraryKey,o=Object.keys(e).map(e=>({fileKey:e,type:"fileKey"})).concat(Object.keys(r).map(e=>({libraryKey:e,type:"libraryKey"})));this.pendingVideosToRecordByFileKey={},this.pendingRecordVideosTasksByFileKey={},this.pendingVideosToRecordByLibraryKey={},this.pendingRecordVideosTasksByLibraryKey={};let l=await this.getEditingFileKey();o.forEach(async o=>{if("fileKey"===o.type&&o.fileKey===l){n[o.fileKey].resolve();return}if("fileKey"===o.type&&!o.fileKey){n[o.fileKey].reject("Invalid originFileKey");return}let c=1,d="fileKey"===o.type?e[o.fileKey]:r[o.libraryKey];for(;;){try{let e=await s.Ay.put(`/api/files/${l}`,{video_sha1s:d,image_origin_file_key:"fileKey"===o.type?o.fileKey:void 0,image_origin_library_key:"libraryKey"===o.type?o.libraryKey:void 0}),{success:r,failed:c}=u.xY.parseFileUpdateResponseForImages(d,e);for(let e of(a.tHB.markVideoPermissionsCopied(r),c))a.tHB.videoIsMissing(e);for(let e of d)delete this.pendingPasteRequests[e];"fileKey"===o.type?n[o.fileKey].resolve():i[o.libraryKey].resolve(),this.getAllVideoUrls();return}catch(e){if(e.status>=400&&e.status<500){for(let e of d)a.tHB.videoIsMissing(e),delete this.pendingPasteRequests[e];"fileKey"===o.type?n[o.fileKey].resolve():i[o.libraryKey].resolve();return}}let e=1e3*c*Math.random();await new Promise(r=>setTimeout(r,e)),c=Math.min(2*c,64)}})},100),this.contextLostCallbacks=new Map,this.nextContextLostCallbackId=0}async getAllVideoUrls(){if(!(0,o.k)().cross_env_paste)return;let e=await c.S.getVideos({fileKey:await this.getEditingFileKey()});this.allVideos=e.data.meta.videos}getSignedUrls(e){let r=new Map;for(let n of e)r.set(n,this.allVideos[n]);return r}recordVideos(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No originFileKey specified");if(this.pendingVideosToRecordByFileKey[e]=this.pendingVideosToRecordByFileKey[e]||[],this.pendingVideosToRecordByFileKey[e].push(...r),!this.pendingRecordVideosTasksByFileKey[e]){let r,n;let i=new Promise((e,i)=>{r=e,n=i});this.pendingRecordVideosTasksByFileKey[e]={promise:i,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordVideosTasksByFileKey[e].promise;let n=this.pendingRecordVideosTasksByFileKey[e].promise;return this.flushPendingRecordVideos(),n}recordVideosFromLibraryKey(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No sourceLibraryKey specified");if(this.pendingVideosToRecordByLibraryKey[e]??=[],this.pendingVideosToRecordByLibraryKey[e].push(...r),!this.pendingRecordVideosTasksByLibraryKey[e]){let r,n;let i=new Promise((e,i)=>{r=e,n=i});this.pendingRecordVideosTasksByLibraryKey[e]={promise:i,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordVideosTasksByLibraryKey[e].promise;let n=this.pendingRecordVideosTasksByLibraryKey[e].promise;return this.flushPendingRecordVideos(),n}getEditingFileKey(){return d.Y5.openFileKeyPromise()}contextLost(){for(let e of this.contextLostCallbacks.values())e()}subscribeToContextLost(e){let r=this.nextContextLostCallbackId++;return this.contextLostCallbacks.set(r,e),()=>{this.contextLostCallbacks.delete(r)}}}let _=new class{constructor(){this.videoManager=new h,this.thumbnailGenerator=p.t}copyVideoPermissions(e,r){return this.videoManager.recordVideos(e,r)}copyVideoPermissionsFromLibraryKey(e,r){return this.videoManager.recordVideosFromLibraryKey(e,r)}createVideo(){return this.thumbnailGenerator.createVideo()}deleteVideo(e){this.thumbnailGenerator.deleteVideo(e)}getWidth(e){return this.thumbnailGenerator.getWidth(e)}getHeight(e){return this.thumbnailGenerator.getHeight(e)}getCoverImage(e){return this.thumbnailGenerator.getCoverImage(e)}loadVideo(e,r,n){return this.thumbnailGenerator.loadVideo(e,r,n)}getSignedUrls(e){return this.videoManager.getSignedUrls(e)}async setExternalSource(e,r){let n=await fetch(r),i=new Uint8Array(await n.arrayBuffer()),a=await d.Y5.openFileKeyPromise();(0,l.Cb)([{sha1:e,bytes:i}],a)}loadAllVideos(){return this.videoManager.getAllVideoUrls()}contextLost(){this.videoManager.contextLost()}};function g(){return _.videoManager}},993411:(e,r,n)=>{n.d(r,{i:()=>a});let i=[];function a(e,r){for(let n of i)n(e,r)}},45584:(e,r,n)=>{let i;n.d(r,{$$:()=>b,Cj:()=>U,D6:()=>A,HD:()=>I,PD:()=>w,Pl:()=>P,QZ:()=>F,Qt:()=>y,Yb:()=>v,Z0:()=>f,_X:()=>D,gc:()=>i,kE:()=>E,lc:()=>k,ni:()=>M,qc:()=>T,th:()=>S});var a=n(848318),o=n(891627),s=n(741419),l=n(508242),c=n(818754),d=n(896966),u=n(701780),p=n(103589),m=n(276731),h=n(992444),_=n(577023),g=n(786175);function f(e,r,n=!0){let i={x:e.width/2+(r.x-e.offsetX)*e.zoomScale,y:e.height/2+(r.y-e.offsetY)*e.zoomScale};return n?u.Mi.rounded(i):i}function E(e,r){return Math.round(e/r-.5)}function y(e,r,n,i){return Math.round(i/2+(e-r)*n)}function b(e,r){return u.Mi.rounded({x:(r.x-e.width/2)/e.zoomScale+e.offsetX,y:(r.y-e.height/2)/e.zoomScale+e.offsetY})}function v(e,r,n){let i=f(e,{x:r.x,y:r.y},n);return{x:i.x,y:i.y,width:r.width*e.zoomScale,height:r.height*e.zoomScale}}function T(e){if(e.height<0||e.width<0||e.zoomScale<=0)throw(0,d.x1)("Viewport","invalid values",{info:e}),Error("Invalid Viewport");return{x:e.offsetX-e.width/e.zoomScale/2,y:e.offsetY-e.height/e.zoomScale/2,width:e.width/e.zoomScale,height:e.height/e.zoomScale}}function I(e,r){return{x:e.x+r.x,y:e.y+r.y,width:e.width,height:e.height}}function S(e){return(0,l.xx)((e,r,n,i)=>({x:e,y:r,height:n,width:i}))(e.x,e.y,e.height,e.width)}function w({subscribeToUpdates_expensive:e}){let r=D({subscribeToUpdates_expensive:e}),n=a.useContext(m.QZ).current||r,i=r.offsetX-n.offsetX,o=r.offsetY-n.offsetY,s=r.zoomScale-n.zoomScale;return{...r,deltaOffsetX:i,deltaOffsetY:o,deltaZoomScale:s}}function A(e,r){a.useEffect(()=>{h.Y5?.isReady()&&e.subscribeToUpdates_expensive&&(r(h.Y5.getViewportInfo()),(0,p.H)())},[r,e.subscribeToUpdates_expensive]),a.useEffect(()=>{if(h.Y5&&e.subscribeToUpdates_expensive){let e=e=>{(0,o.flushSync)(()=>{r(e)})};return h.Y5.viewport.on("onSetViewport",e),()=>{h.Y5.viewport.removeListener("onSetViewport",e)}}},[r,e.subscribeToUpdates_expensive])}function C(e){return a.useContext(e),a.useContext(m.HA).current||m.t4}function N(e){return C(e.subscribeToUpdates_expensive?m.k9:m.cY).x}function L(e){return C(e.subscribeToUpdates_expensive?m.lG:m.cY).y}function O(e){return C(e.subscribeToUpdates_expensive?m.Os:m.cY).width}function R(e){return C(e.subscribeToUpdates_expensive?m.zE:m.cY).height}function P(e){return C(e.subscribeToUpdates_expensive?m.zx:m.cY).zoomScale}function D(e){let r=N(e),n=L(e),i=O(e),o=R(e),s=C(e.subscribeToUpdates_expensive?m.j0:m.cY).offsetX,l=C(e.subscribeToUpdates_expensive?m.u7:m.cY).offsetY,c=P(e),d=C(e.subscribeToUpdates_expensive?m.l9:m.Vl).isPanning,u=C(e.subscribeToUpdates_expensive?m.b8:m.Vl).isZooming;return a.useMemo(()=>({x:r,y:n,width:i,height:o,offsetX:s,offsetY:l,zoomScale:c,isPanning:d,isZooming:u}),[r,n,i,o,s,l,c,d,u])}function M(){let e={subscribeToUpdates_expensive:!0},r=N(e),n=L(e),i=O(e),o=R(e);return a.useMemo(()=>({x:r,y:n,width:i,height:o}),[r,n,i,o])}function k(){i=void 0}function F(e){let r=new Promise(e=>{i=e});return s.glU.computeViewportSettingsForNode__DO_NOT_USE_DIRECTLY(e),r}let x=(0,c.jz)(g.rulerThickness);function U(){let e={subscribeToUpdates_expensive:!0},r=(0,_.lK)()?x:0,n=N(e)+r,i=L(e)+r,o=O(e)-r,s=R(e)-r;return a.useMemo(()=>({x:n,y:i,width:o,height:s}),[n,i,o,s])}},566213:(e,r,n)=>{n.d(r,{Ed:()=>u,Js:()=>d,QY:()=>l,Yu:()=>m,pi:()=>p});var i=n(992277),a=n(741419),o=n(39773),s=n(502255),l=(e=>(e[e.NEW_FILE=0]="NEW_FILE",e[e.EXISTING_FILE=1]="EXISTING_FILE",e[e.WAITING=2]="WAITING",e[e.FINISHED_WAITING=3]="FINISHED_WAITING",e))(l||{});let c=(0,o.eU)({status:1,timeoutHandle:null});function d(){return o.zl.get(c)}function u(e){return!!(0===d().status&&a.i6g&&a.i6g.hasOnlyNewFileSystemChanges())&&!!navigator.onLine&&(function(e){let r=o.zl.get(c);r.status=2,r.timeoutHandle=e,o.zl.set(c,r)}(setTimeout(()=>{p(!0),e()},1e4)),!0)}function p(e){let r=o.zl.get(c);r.status=3,e||(r.timeoutHandle?clearTimeout(r.timeoutHandle):(0,s.$D)(i.e.SCENEGRAPH_AND_SYNC,Error("Finished waiting but no timeout handle"))),r.timeoutHandle=null,o.zl.set(c,r)}function m(e){let r=o.zl.get(c);r.status=e?0:1,r.timeoutHandle&&clearTimeout(r.timeoutHandle),r.timeoutHandle=null,o.zl.set(c,r)}},549487:(e,r,n)=>{n.d(r,{bJ:()=>c});var i=n(208720),a=n(39773),o=n(543072),s=n(410693);class l{isCustomPaletteColor(e,r){let n=a.zl.get(s.$R);if(n){let a=(0,i.aH)(e);for(let e of(0,s.Uh)(r))if(n[e].some(e=>(0,o.DA)(a,e)))return!0}return!1}}function c(){new l}},601742:(e,r,n)=>{n.d(r,{pP:()=>d});var i=n(208720),a=n(39773),o=n(410693),s=n(614214),l=n(786975);class c{getEyedropperContext(){return a.zl.get(s.B)}updateEditPaletteModalColor(e){let r=a.zl.get(o.Jq),n=a.zl.get(o.rN),s=[...n.slice(0,r),(0,i.aH)(e),...n.slice(r+1)];a.zl.set(o.rN,s)}isCustomPaletteApplied(){return!!a.zl.get(o.$R)}showSectionPresets(){return a.zl.get(l.w)}}function d(){new c}},883446:(e,r,n)=>{n.d(r,{A9:()=>o});var i=n(683347);class a{constructor(){this.getDefaultPencilStrokeWeight=()=>i.wv,this.getDefaultHighlighterStrokeWeight=()=>i.g5}}function o(){new a}},127752:(e,r,n)=>{n.d(r,{Vi:()=>u,uE:()=>d});var i=n(442313),a=n(347558),o=n(505295),s=n(382267),l=n(290701),c=n(265177);let d={[c.k.EMBED_WIDGET]:s.g,[c.k.LINK_PREVIEW_WIDGET]:l.Nd,[c.k.AI_SUMMARY_WIDGET]:o.V,[c.k.HTML_WIDGET]:a.u};function u(e){return!!c.k[e]}c.k.EMBED_WIDGET,s.w.OPEN,s.w.CONVERT_TO_TEXT,c.k.LINK_PREVIEW_WIDGET,l.HP.OPEN,l.HP.VERTICAL,l.HP.HORIZONTAL,l.HP.CONVERT_TO_TEXT,c.k.AI_SUMMARY_WIDGET,c.k.HTML_WIDGET},208649:(e,r,n)=>{n.d(r,{Bz:()=>F,F$:()=>x,bY:()=>M,e3:()=>K,g4:()=>V,wl:()=>k,y4:()=>W});var i=n(210301),a=n(992277),o=n(741419),s=n(101595),l=n(157907),c=n(579020),d=n(141039),u=n(731889),p=n(44509),m=n(831932),h=n(502255),_=n(896966),g=n(808471),f=n(809434),E=n(27964),y=n(32790),b=n(392997),v=n(443227);function T(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.wasm"]:Fig.fullscreenURLs["compiled_wasm.wasm"]}function I(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.js"]:Fig.fullscreenURLs["compiled_wasm.js"]}async function S(e,r){await (0,u.k0)(I(r));let n={wasmBinaryFile:T(r),preRun(){(n.emscripten_realloc_buffer??n.growMemory)(0x60000000)}};window.Module=n,(0,s.jS)({callMain:(0,s.eS)(),tsApisForCpp:e,registerRefreshCallback:e=>{(0,v.vw)(r,e)},leakBindings:!0})}async function w(e){try{await y.xK.timeAsync("loadingCode",()=>window.FULLSCREEN_PRELOADS?.js||(0,u.k0)(I(e)))}catch(e){throw Error("Failed to load fullscreen JS code")}return(0,s.N4)({isProduction:!0,executeEmscriptenJS:(0,s.eS)()})}async function A(e,r){let n=y.xK.time("instantiateStreaming",async()=>{try{return await WebAssembly.instantiateStreaming(e,r)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await y.xK.timeAsync("awaitInstantiateStreaming",()=>n)}async function C(e,r){if(!e.ok)throw Error(`Downloading wasm failed with ${e.status}`);let n=await e.arrayBuffer(),i=y.xK.time("instantiate",async()=>{try{return await WebAssembly.instantiate(n,r)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await y.xK.timeAsync("awaitInstantiate",()=>i)}let N=!1,L=null;async function O(e){!L||L===e||(0,g.nl)()||k()||("fullscreen-app"===L?(0,h.$D)(a.e.CLIENT_PLATFORM,Error("Previously downloaded fullscreen wasm, but is now downloading prototype-lib")):"prototype-lib"===L&&(0,h.$D)(a.e.CLIENT_PLATFORM,Error("Previously downloaded prototype-lib wasm, but is now downloading fullscreen")));let r=T(e);y.xK.start("loadingBinaryStart");let[n,i]=await Promise.all([window.FULLSCREEN_PRELOADS?.wasm||fetch(r),w(e)]);delete window.FULLSCREEN_PRELOADS;let{imports:o,receiveInstance:s,getReservedHeapSize:l}=i;if((0,b.bM)(e,l),"true"===n.headers.get("x-figma-local-build")&&(N=!0),WebAssembly.instantiateStreaming)try{let r=await A(n,o);return L=e,{receiveInstance:s,wasmResult:r}}catch(e){if(e&&(!e.message||e.message.includes("Incorrect response MIME type")||e.message.includes("Unexpected response MIME type")))console.warn('Detected a proxy interfering with the "application/wasm" MIME type. Falling back to a slower WebAssembly instantiation method instead.'),(0,h.$D)(a.e.UNOWNED,Error(`Working around error instantiating streaming fullscreen WASM: ${e}`)),n=await fetch(r);else throw(0,_.xi)("loader","Error loading wasm",{url:r,message:e?.message}),e}let c=await C(n,o);return L=e,{receiveInstance:s,wasmResult:c}}let R=(0,i.Kt)(async()=>await O("fullscreen-app")),P=(0,i.Kt)(async()=>await O("prototype-lib")),D=async e=>{switch(e){case"fullscreen-app":return await R();case"prototype-lib":return await P()}};function M(e){let r=e||H||L;if(r){let e=T(r).split("/");if(e.length<2)return;let n=e[e.length-2];if("fullscreen-wasm"===n)return{fullscreen_variant:"wasm"};if("prototype-lib"===n)return{prototype_variant:"lib"};if(n.startsWith("fullscreen-wasm-"))return{fullscreen_variant:n.replace("fullscreen-wasm-","")};if(n.startsWith("prototype-lib-"))return{prototype_variant:n.replace("prototype-lib-","")}}return{}}function k(){let e=p.Ay.location.pathname;for(let r of["/c","/community","/@","/user","/org","/team"])if(e.startsWith(r))return!0;return!1}let F=!/Mobi/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent);function x(e="fullscreen-app"){return D(e).then(()=>{})}let U=document.location.pathname;function B(e){return"/preload-editor"===e||"/preload-android-proto"===e}function V(){return B(U)&&(0,m.KR)()&&m.m0||(0,f.Sh)(U)||d.eD&&d.eD.isFileBrowserTab()||d.S8||k()||B(p.Ay.location.pathname)&&!d.eD?"never":!(0,l.k)().preload_fullscreen_on_load||"complete"===document.readyState||(0,p.Cs)()?"immediately":"eventually"}let G=null,H=null;async function K(e,r="fullscreen-app"){if(H&&H!==r&&!(0,g.nl)()&&("fullscreen-app"===H?(0,h.$D)(a.e.UNOWNED,Error("Previously initialized fullscreen wasm, but is now initializing prototype-lib")):"prototype-lib"===H&&(0,h.$D)(a.e.UNOWNED,Error("Previously initialized prototype-lib wasm, but is now initializing fullscreen"))),!T(r)||!window.WebAssembly)return location.href="/unsupported_browser",new Promise(()=>null);if((0,E.QL)("asan"))return H=r,S(e,r);try{G&&G!==e&&await p.Ay.reloadAndWaitForever("tsApisForCpp changed",{from:o.uCV[G.CommonApp().appType()],to:o.uCV[e.CommonApp().appType()]}),G=e;let{receiveInstance:n,wasmResult:i}=await D(r);(0,s.jS)({callMain:()=>{y.xK.time("callMain",()=>n(i.instance,i.module))},tsApisForCpp:G,registerRefreshCallback:e=>{(0,v.vw)(r,e)}}),H=r,(0,g.nl)()&&o.msz.setIsRunningInteractionTests();let a=M(r);(0,c.sx)("Fullscreen Loaded",{...a})}catch(e){throw(0,c.sx)("Fullscreen Load Failure",{error:e+""}),!e||"Failed to fetch"===e.message||"Could not download wasm module"===e.message||e.message.includes("NetworkError")||e.message.toLowerCase().includes("network error")||(e instanceof Error||(e=Error(`Fullscreen load failure: ${e}`)),(0,h.$D)(a.e.UNOWNED,e)),e.reportedToSentry=!0,e}}function W(){if(N)return!0;let e=Fig.fullscreenURLs["compiled_wasm.js"];return!!(e&&e.startsWith("/"))}},263148:(e,r,n)=>{n.d(r,{Ni:()=>a});var i=(e=>(e.COMMUNITY="community",e))(i||{}),a=(e=>(e.ALL_DISABLED="all_disabled",e.PINNED_DISABLED="pinned_disabled",e.ENABLED="enabled",e))(a||{}),o=(e=>(e.REPORT="report",e.REPORT_AND_HIDE="report_and_hide",e))(o||{})},717752:(e,r,n)=>{n.d(r,{Tf:()=>v,Y6:()=>b,YC:()=>S,c_:()=>T,fA:()=>E,hi:()=>I,nb:()=>f,yF:()=>y}),n(848318),n(716544);var i=n(445777),a=n(39773),o=n(430285),s=n(195507),l=n(486934),c=n(918105),d=n(657972),u=n(376780),p=n(635547),m=n(821618),h=n(96321),_=n(867397),g=n(273121),f=(e=>(e.FILE="FILE",e.PROTOTYPE="PROTOTYPE",e.REPO="REPO",e.PINNED_FILE="PINNED_FILE",e.OFFLINE_FILE="OFFLINE_FILE",e))(f||{});function E(e,r){return{type:"FILE",file:{...c.F.toLiveGraph(e),owner:e.owner,trackTags:e.track_tags?d.Z.toLiveGraph(e.track_tags):null,UserFileRecentAny:e.accessed_at?{actionAt:new Date(e.accessed_at)}:void 0},sharedWithYouFields:r??null}}function y(e){let r=(0,l.LH)(e.repo,e.branches,e.selectedBranchKey);return r?r:(e.repo.default_file_key?(0,l.LH)(e.repo,e.branches,e.repo.default_file_key):null)||e.branches[0]}let b=(0,a.eU)(null);class v{static getId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key+","+e.prototype.page_id+","+e.prototype.id;case"REPO":return e.repo.id;case"OFFLINE_FILE":return e.file.fileKey;default:(0,i.xb)(e)}}static sameObject(e,r){if(e.type!==r.type)return!1;switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key===r.file.key;case"PROTOTYPE":return e.prototype.id===r.prototype.id;case"REPO":return e.repo.id===r.repo.id;case"OFFLINE_FILE":return e.file.fileKey===r.file.fileKey;default:(0,i.xb)(e)}}static getName(e){switch(e.type){case"FILE":case"PINNED_FILE":case"OFFLINE_FILE":return e.file.name;case"PROTOTYPE":return e.prototype.fig_file.name+" - "+e.prototype.name;case"REPO":return(0,l.oj)(e.repo);default:(0,i.xb)(e)}}static getAccessedAt(e){switch(e.type){case"FILE":return e.file.UserFileRecentAny?.actionAt.toISOString();case"PROTOTYPE":return e.prototype.accessed_at;case"REPO":return e.accessed_at;case"PINNED_FILE":return null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,i.xb)(e)}}static getSharedAt(e){switch(e.type){case"FILE":return e.sharedWithYouFields?.sharedAt?.toISOString()??null;case"PROTOTYPE":return e.prototype.shared_at;case"REPO":return e.repo.shared_at;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getCreatedAt(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.createdAt.toISOString();case"PROTOTYPE":return e.prototype.fig_file.created_at;case"REPO":return e.branches.reduce((e,r)=>e<r.created_at?e:r.created_at,e.repo.created_at);case"OFFLINE_FILE":return new Date(e.file.createdAt).toISOString();default:(0,i.xb)(e)}}static getTouchedAt(e){switch(e.type){case"FILE":return e.file.touchedAt??e.file.updatedAt;case"REPO":return e.branches.reduce((e,r)=>null!==e&&e>r.touched_at?e:r.touched_at,null);case"PROTOTYPE":return e.prototype.accessed_at;case"PINNED_FILE":return null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,i.xb)(e)}}static getTrashedAt(e){switch(e.type){case"FILE":return e.file.trashedAt?e.file.trashedAt.toISOString():null;case"PROTOTYPE":return e.prototype.fig_file.trashed_at;case"REPO":return e.repo.trashed_at;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getTrashedUserId(e){switch(e.type){case"FILE":return e.file.trashedUserId;case"PROTOTYPE":case"REPO":case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getIsFavorited(e){switch(e.type){case"FILE":return!!e.file.isFavorited;case"PROTOTYPE":return!!e.prototype.is_favorited;case"REPO":return!!e.repo.is_favorited;case"PINNED_FILE":case"OFFLINE_FILE":return!1;default:(0,i.xb)(e)}}static getFavoritedResourceType(e){switch(e.type){case"FILE":case"PINNED_FILE":case"REPO":case"OFFLINE_FILE":return u.bk.FILE;case"PROTOTYPE":return u.bk.PROTOTYPE;default:(0,i.xb)(e)}}static getFileKey(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return e.repo.default_file_key??void 0;case"OFFLINE_FILE":return;default:(0,i.xb)(e)}}static getUrl(e,r){switch(e.type){case"FILE":return(0,g.to)(e.file);case"PINNED_FILE":return(0,g.jN)(e);case"PROTOTYPE":return e.prototype.url;case"REPO":let n=(0,l.mr)(e.repo,e.branches,r);return n?(0,l.CE)(n,e.repo,"file"):"";case"OFFLINE_FILE":return"";default:(0,i.xb)(e)}}static getEditUrl(e,r){switch(e.type){case"FILE":return(0,g.rl)(e.file);case"PINNED_FILE":return(0,g.jN)({...e,allowDefaulting:!0});case"PROTOTYPE":return e.prototype.url;case"REPO":let n=(0,l.mr)(e.repo,e.branches,r);return n?(0,g.rl)(n):"";case"OFFLINE_FILE":return"";default:(0,i.xb)(e)}}static getFavoriteResourceId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.id;case"REPO":return e.repo.default_file_key;case"OFFLINE_FILE":return e.file.fileKey;default:(0,i.xb)(e)}}static getIsTeamTemplate(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.isTeamTemplate;case"PROTOTYPE":case"REPO":case"OFFLINE_FILE":return!1;default:(0,i.xb)(e)}}static getOrgId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.parentOrgId;case"PROTOTYPE":return e.prototype.fig_file.parent_org_id??e.prototype.fig_file.parent_org_id;case"REPO":return e.repo.parent_org?.id??e.repo.parent_org_id;case"OFFLINE_FILE":return e.file.orgId;default:(0,i.xb)(e)}}static getFavoriteResourceTeamId(e){switch(e.type){case"FILE":return e.file.teamId;case"PINNED_FILE":default:return null;case"PROTOTYPE":return e.prototype.parent_team?.id??e.prototype.fig_file?.team_id;case"REPO":return e.repo.parent_team?.id??e.repo.team_id}}static getSharedBy(e){switch(e.type){case"FILE":return e.sharedWithYouFields?.sharedByUser?.id;case"PROTOTYPE":return e.prototype.shared_by_user?.id??e.prototype.shared_by;case"REPO":return e.repo.shared_by_user?.id??e.repo.shared_by;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getSharedByName(e){switch(e.type){case"FILE":return e.sharedWithYouFields?.sharedByUser?.name;case"PROTOTYPE":return e.prototype.shared_by_user?.name;case"REPO":return e.repo.shared_by_user?.name;case"PINNED_FILE":return(0,i.KF)(!0,"Cannot get shared by name from a pinned file"),null;case"OFFLINE_FILE":return(0,i.KF)(!0,"Cannot get shared by name from an offline file"),null;default:(0,i.xb)(e)}}static getOwner(e){switch(e.type){case"FILE":return e.file.owner;case"PINNED_FILE":case"PROTOTYPE":case"REPO":case"OFFLINE_FILE":(0,i.KF)(!0,"Did not expect to render owner for non-file tiles");return;default:(0,i.xb)(e)}}static useIsRenaming(e){let r=(0,a.md)(b);return v.isRenaming(e,r)}static isRenaming(e,r){if(!r)return!1;switch(e.type){case"FILE":return"FILE"===r.type&&r.id===e.file.key;case"OFFLINE_FILE":return"FILE"===r.type&&r.id===e.file.fileKey;case"REPO":return"REPO"===r.type&&r.id===e.repo.id;case"PINNED_FILE":case"PROTOTYPE":return!1;default:(0,i.xb)(e)}}static getIsPasswordProtected(e){switch(e.type){case"FILE":return(0,_.Ph)(e.file);case"REPO":return(0,l.yR)(e.repo);case"PROTOTYPE":return(0,_.Uj)(e.prototype.fig_file)||(0,_.i4)(e.prototype.fig_file);case"PINNED_FILE":return(0,_.i4)({has_file_link_password:e.file.hasFileLinkPassword,link_access:e.file.linkAccess});case"OFFLINE_FILE":return!1;default:(0,i.xb)(e)}}static getFolderId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.folderId;case"REPO":return e.repo.folder_id;case"PROTOTYPE":return e.prototype.fig_file.folder_id;case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getTeamId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.teamId;case"PROTOTYPE":return e.prototype.parent_team?.id??null;case"REPO":return e.repo.team_id;case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getThumbnailUrl(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.thumbnailUrlOverride??e.file.thumbnailUrl;case"REPO":let r=y(e);return r?r.thumbnail_url_override??r.thumbnail_url:null;case"PROTOTYPE":return e.prototype.thumbnail_url;case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getIsThumbnailFullWidth(e){switch(e.type){case"FILE":case"PINNED_FILE":return!!e.file.thumbnailGuid;case"REPO":let r=y(e);return r?r.thumbnail_guid:null;case"PROTOTYPE":return!0;case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getEditorType(e){switch(e.type){case"FILE":case"PINNED_FILE":case"OFFLINE_FILE":return e.file.editorType;case"REPO":return u._Y.DESIGN;case"PROTOTYPE":return null;default:(0,i.xb)(e)}}static getClientMeta(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.clientMeta;case"REPO":let r=y(e);return r?r.client_meta:null;case"PROTOTYPE":case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getPreviewThumbnailUrls(e){return"FILE"===e.type?e.file.signedPreviewThumbnailUrls:"REPO"===e.type?y(e)?.preview_thumbnail_urls:void 0}static getFileKeyForAutosaveChanges(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return y(e)?.key;case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}}function T(e){let r=v.getFileKeyForAutosaveChanges(e);return(0,h.I4)(r||"")}let I=(0,a.Iz)(e=>(0,a.eU)(r=>"FILE"===e.type||"PINNED_FILE"===e.type?r(p.sMs.Query({key:e.file.key})).transform(e=>!!e.file?.hasPermission):"REPO"===e.type?r(p.cfd.Query({repoId:e.repo.id})).transform(e=>!!s.oA(e.repo)?.canView):"PROTOTYPE"===e.type?r(p.eSI.Query({prototypeId:e.prototype.id})).transform(e=>!!s.oA(e.prototype)?.canRead):"OFFLINE_FILE"===e.type?o.Qw.loaded(!0):void(0,i.xb)(e)),v.sameObject),S={FILE:m.F.FILES,PROTOTYPE:m.F.PROTOTYPES,REPO:m.F.REPOS,PINNED_FILE:m.F.PINNED_FILES,OFFLINE_FILE:m.F.OFFLINE_FILES}},674324:(e,r,n)=>{n.d(r,{H:()=>g});var i=n(848318),a=n(376025),o=n(536384),s=n.n(o),l=n(166365),c=n(17755),d=n(442313),u=n(81229),p=n(834996),m=n(887057),h=n(410210),_=n(721563);function g({children:e,large:r,brandTextColor:n,...o}){let g=(0,p._6)(),f=i.useRef(null);(0,u.Z)("light",f);let E=(0,m.ju)(g);return i.createElement("div",{ref:f,"data-editor-theme":E},i.createElement(a.E,{htmlAttributes:{"data-test-id":"google-btn"},className:s()(h.x6,h.zB,r?h.as:h.Hg,n&&c.s.colorTextBrand.$),"aria-label":(0,d.t)("footer_banner.continue_with_google"),...o},i.createElement("span",{className:h._d},i.createElement(l.B,{className:h.Kk,svg:_.A,useOriginalSrcFills_DEPRECATED:!0}),i.createElement("span",{className:h.IO},e))))}},973182:(e,r,n)=>{n.d(r,{LR:()=>b,_i:()=>T,kg:()=>v,ts:()=>y});var i=n(848318),a=n(716544),o=n(551316),s=n(741419),l=n(818754),c=n(701780),d=n(15027),u=n(352809),p=n(235441),m=n(727341),h=n(625069),_=n(832802),g=n(986910),f=n(315002),E=n(27776);function y(e,r=552,n=320){let[a,s]=i.useState(),[d,u]=i.useState(),[h,g]=i.useState(!1),b=(0,m.GS)(),v=(0,p.ow)();return i.useLayoutEffect(()=>{let i=()=>{let i,a;switch(e.kind){case"mountCenter":i=window.innerWidth/2,a=window.innerHeight/2;break;case"buttonTarget":let o=(0,_.Tc)(e.buttonTarget);if(!o)return;let d=o.getBoundingClientRect();i=d.x+d.width/2,a=d.y;break;case"sourceRect":i=e.sourceRect.x+e.sourceRect.width/2,a=e.sourceRect.y}let u=i-n/2,p=a-r-12;window.innerWidth-u<n?(h||g(!0),u=window.innerWidth-n-f.wR):h&&g(!1);let m=b?(0,l.hG)(E.kLt)+(0,l.hG)(E.M$q):(0,l.hG)(E.tui);p=Math.max((v?m:0)+f.wR,p),s(new c.Mi(u,p))};setTimeout(i,0);let a=(0,o.s)(i,100);return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[e,r,n,h,b,v]),{initialModalPosition:a,modalPosition:d,setModalPosition:u,modalWasClippedByRightSide:h}}function b(){let e=(0,a.wA)();return i.useCallback((r=!0)=>{s.glU&&r&&s.glU.triggerAction("set-tool-default",null),e(u.KE())},[e])}function v(e){return e.mirror.appModel.currentTool===s.NLJ.NONE&&e.universalInsertModal.showing&&e.universalInsertModal.pinned===g.t.NOT_PINNED}function T(e,r,n,o){let s=(0,a.wA)(),l=(0,a.d4)(e=>(0,h.T9)({authedProfilesById:e.authedProfilesById,userId:e.user?.id}));return{unsave:i.useCallback(n=>{e&&s((0,d.s1)({id:e,resourceType:r,communityProfile:l||void 0,hideSuccessVisualBell:n,source:d.uR.INSERTS_MODAL,optimisticData:{pluginInstallId:o}}))},[e,s,r,l,o]),save:i.useCallback((i,a)=>{e&&s((0,d.d6)({id:e,resourceType:r,communityProfile:l||void 0,onSuccess:i,hideSuccessVisualBell:a,source:d.uR.INSERTS_MODAL,optimisticData:{resource:n}}))},[e,s,r,l,n])}}},398599:(e,r,n)=>{n.d(r,{N:()=>_});var i=n(848318),a=n(716544),o=n(579020),s=n(493554),l=n(303035),c=n(761181),d=n(194836),u=n(449737);n(976308);var p=n(376780),m=n(635547);n(572699),n(920963),n(988540),n(515071);var h=n(517989);function _(e,r,n){let _=(0,a.wA)(),g=(0,h.H)({useCurrentPlan:!0}),f=(0,s.Rs)(m.VTr,{planParentId:e?.parentId||"",planType:e?.type||p.OL.TEAM},{enabled:g&&!!e?.parentId}),E="loaded"===f.status?f.data.plan:null;return(0,i.useCallback)(()=>{if(!E)return l.lQ;E&&E.connectionCount>=d.b[E.tier]&&!E.unlimitedConnectionsEnabled&&!E.testingOnlyUnlimitedConnectionsEnabled?(o.az.trackDefinedEvent("workflow.connected_projects_maximum_connections_paywall_hit",{planId:E.key.parentId||void 0,planType:E.key.type,planTier:E.tier,numConnections:E.connectionCount,resourceConnectionInviteId:n}),_(u.to({type:c.u,data:{plan:E}}))):r()},[E,r,_,n])}},51910:(e,r,n)=>{n.d(r,{B9:()=>E,KH:()=>u,aV:()=>_,ax:()=>p,dH:()=>h,eY:()=>d,f4:()=>m,p8:()=>g});var i=n(848318),a=n(716544);n(719670);var o=n(133696);n(741419),n(179703),n(921494);var s=n(690391);let l=e=>e?.mirror?.sceneGraph,c=()=>(0,a.Pj)();function d(){return(0,a.d4)(l)}let u=()=>(0,a.d4)(e=>e.mirror.sceneGraphSelection);function p(){return!(0,a.d4)(e=>(0,o.Im)(e.mirror.sceneGraphSelection))}function m(e){let r=c(),n=u(),a=(0,i.useRef)();a.current=()=>{e(r.getState())},(0,i.useEffect)(()=>{a.current()},[n])}function h(){return(0,a.d4)(e=>e?.mirror?.appModel?.currentTool)}function _(){return(0,a.d4)(e=>(0,s.T)(e?.progressBarState?.mode))}function g(e){return(0,a.d4)(r=>r.mirror.appModel[e])}let f=(0,i.createContext)(null);function E(){let e=(0,a.d4)(e=>e.mirror.sceneGraph);return(0,i.useContext)(f)||e}},776618:(e,r,n)=>{n.d(r,{KV:()=>y,P3:()=>_,Tm:()=>h,Wy:()=>d,Zz:()=>b,eE:()=>E,rq:()=>p,xk:()=>c});var i=n(741419),a=n(39773),o=n(392997),s=n(119310),l=n(113176);let c=60;var d=(e=>(e[e.SAFE=0]="SAFE",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR",e[e.OOM=3]="OOM",e))(d||{});let u=(0,a.eU)(null);function p(e){}(0,a.eU)(e=>!!e(u));let m=(0,a.yu)((0,a.um)({mallocLevelBytes:0,heapMemoryLimit:1/0},()=>({mallocLevelBytes:(0,o.Yc)(),heapMemoryLimit:i.hMR.getHeapMemoryLimit()})),({setSelf:e})=>{e();let r=setInterval(e,5e3);return()=>clearInterval(r)}),h=(0,a.eU)(e=>{let{mallocLevelBytes:r,heapMemoryLimit:n}=e(m),i=e(u),a=r/n*100;return i&&(a=i),a=Math.round(100*(a=Math.max(0,a=Math.min(100,a)))+Number.EPSILON)/100},(e,r)=>{r(m)});function _(){return a.zl.set(h),a.zl.get(h)}let g=(0,s.bt)(e=>e.modalShown?.type===l.Lu),f=(0,a.eU)(e=>{let r=e(h);return e(g)?3:r>=75?2:r>=c?1:0},(e,r)=>{r(h)}),E=(0,a.Hj)(f,e=>i.glU.setMemoryWarningLevel(e));function y(e,r){return(0,o.Yc)()/r*e/i.hMR.getHeapMemoryLimit()}function b(){let e=i.Hcu.getSubtreeMemoryUsage(["0:2"]);return(0,o.Yc)()/i.Hcu.getSubtreeMemoryUsage(["0:0"])*e*100/i.hMR.getHeapMemoryLimit()}},439984:(e,r,n)=>{n.d(r,{Fy:()=>y,QR:()=>g,VI:()=>E,_Z:()=>_,lH:()=>f});var i=n(848318),a=n(716544),o=n(741419),s=n(179703),l=n(39773),c=n(318672),d=n(744149),u=n(718451),p=n(207715),m=n(887057),h=n(99624);function _(){return function({selectedView:e,isLoadingVersionHistory:r,theme:n}){let a=e?.view==="prototype",d=a?null:(0,s.UN)().getCurrentPage(),_=i.useMemo(()=>d?.backgroundColor,[d]),f=!!(0,p.ut)(o.Ez5?.currentPageState().requestedPageChange,""),E=(0,l.md)(h.s6),y=(0,l.md)(h.rp),b=(0,l.md)(g),v=(0,l.md)(h.nc);return i.useMemo(()=>{let e;if(a)return{isLoading:!1};let i=(0,u.E7)(_);return(e=null!==i?c.F.format(i):n&&"dark"===(0,m.i_)(n)?"rgba(30, 30, 30, 1)":"rgba(229, 229, 229, 1)",null!=i?(i.a=.7,e=c.F.format(i)):e="rgba(229, 229, 229, 0.1)",E)?{background:e,isLoading:!1}:{background:e,isLoading:!!r||f||v||y||b,isLoadingMissingFonts:b}},[a,_,n,E,r,f,v,y,b])}({selectedView:(0,a.d4)(e=>e.selectedView),isLoadingVersionHistory:a.d4(e=>e.versionHistory)?.isLoadingPage,theme:(0,d.DP)()})}let g=(0,l.eU)(!1);function f(e){return e.some(e=>e.status!==o.xal.LOADED)}function E(e){return e.every(e=>e.status===o.xal.LOADED)}function y(e,r){for(let n of e)if(n.nodeId===r)return n.status;return null}},843156:(e,r,n)=>{n.d(r,{g5:()=>l});var i=n(848318),a=n(716544);n(397579),n(493554),n(926252),n(228716),n(635547);var o=n(931516);n(369600);var s=n(661780);function l(e){let r=(0,a.d4)(e=>e.library),n=(0,s.TA)(),l=(0,a.d4)(e=>e.recentlyUsed.libraryItems);return(0,i.useMemo)(()=>{let i=[];for(let a of l[e])if((null!==n?a.last_added_at_by_user_id?.[n]:void 0)&&(a.type===o.PW.COMPONENT||a.type===o.PW.STATE_GROUP)){let e=function(e,r){let n=e.library_key,i=e.team_id,a=e.node_id;return e.type===o.PW.COMPONENT?r.publishedByLibraryKey.components[i]?.[n]?.[a]||r.defaultPublished.componentsByLibraryKey[n]?.[a]:e.type===o.PW.STATE_GROUP?r.publishedByLibraryKey.stateGroups[i]?.[n]?.[a]||r.defaultPublished.stateGroupsByLibraryKey[n]?.[a]:void 0}(a,r);e&&i.push(e)}return{productComponents:i,templates:[]}},[l,e,r,n])}},197925:(e,r,n)=>{n.d(r,{p:()=>a});var i=n(716544);function a(){return(0,i.d4)(e=>e.sharingAttributionContextKey||null)}},710905:(e,r,n)=>{n.d(r,{BI:()=>c,F4:()=>d,Jj:()=>o,Jp:()=>l,Kx:()=>u,Rf:()=>a,Yi:()=>_,e8:()=>m,h4:()=>p,m0:()=>h,sc:()=>s});var i=n(831932);function a(){return window.FigmaMobile}function o(){return window.FigmaMobile}function s(){return o()}function l(){return window.FigmaMobile}function c(){return window.FigmaMobile}function d(){return window.FigmaMobile}function u(){return d()}function p(){return window.FigmaMobile}function m(){return window.FigmaMobile}function h(){return window.FigmaMobile}function _(e){let r=window.FigmaMobile;return"prototype"===e.view?i.Ay.isMobileBrowser&&!e.commentsEnabled:"fullscreen"===e.view&&!!r?.shouldOptimizeForIpadApp&&!e.commentsEnabled}},880318:(e,r,n)=>{n.d(r,{$P:()=>v,d0:()=>b,kn:()=>T});var i=n(848318),a=n(716544),o=n(719670),s=n(397579),l=n(303035),c=n(880336),d=n(196484),u=n(170513),p=n(992444),m=n(139736),h=n(45584),_=n(830789),g=n(960849),f=n(534833),E=n(199062),y=n(710905);function b(e,r,n,o,s){let c=(0,y.h4)(),g=(0,a.wA)(),f=(0,u.I_)(),b=(0,E.s)(),v=(0,m.Z)();i.useEffect(()=>{c&&(c._select_comment=e=>{let i=r.find(r=>r.id===e);i&&g(d.At({receiptsAPI:f.commentReceipts,thread:i,viewport:n,skipDeactivatingExistingActiveComment:!0,config:b,navigate:v}))})},[c,g,r,f,n,b,v]),i.useEffect(()=>{c&&(c._add_draft_comment=e=>{let r=(0,h.$$)(n.getViewportInfo(),e);g(d.vV({anchorPosition:r})),g(d.CX())})},[c,g,n]),i.useEffect(()=>{c&&(c._deselect_comment=e=>{g(d.UU())},c._remove_draft_comment=()=>{e===_.hm&&g(d.UU())})},[c,e,g]),i.useEffect(()=>{c&&(c._submit_comment_draft=e=>{g(d.Z5({messageMeta:e})),s()})},[c,e,g,s]),i.useEffect(()=>{c&&o&&(c._set_comments_visibility=e=>{p.Y5.triggerAction("toggle-show-comments",{source:"mobile_app"})})},[c,o]),i.useEffect(()=>{c&&(c._pan_canvas=e=>{let r=n.getViewportInfo();n.navigateTo({x:r.offsetX+e.x/r.zoomScale,y:r.offsetY+e.y/r.zoomScale},r.zoomScale)})},[c,n]),i.useEffect(()=>{c&&!c._recenter_comment&&(c._recenter_comment=l.lQ),c&&!c._recenter_draft_comment&&(c._recenter_draft_comment=l.lQ)},[c])}function v(e,r,n,l,c){let d=(0,y.sc)();i.useEffect(()=>{d?.updateCommentVisibility&&!l&&d.updateCommentVisibility(null!==c)},[d,l,c]);let u=(0,a.d4)(e=>e.comments.newComment),p=i.useMemo(()=>{if(e===_.hm){if(!u.anchorPosition)return null;{let e=(0,h.Z0)(n.getViewportInfo(),u.anchorPosition);return{x:e.x,y:e.y,width:36.8,height:36.8}}}let i=r.find(r=>r.id===e);if(!i||!i.canvasPosition)return null;let a=(0,h.Z0)(n.getViewportInfo(),i.canvasPosition),o=(0,f.c4)(i.comments).length,s=g.XC.getPinSize(o);return{x:a.x,y:a.y,width:1.15*s.width,height:1.15*s.height}},[e,u,r,n]),m=(0,s.ZC)(e),E=(0,s.ZC)(p);i.useEffect(()=>{e&&p&&e===m&&E&&!(0,o.c2)(p,E)&&(e===_.hm?d?.updateDraftCommentPinPosition?.(p):d?.updateCommentPinPosition?.(e,p))},[d,e,p,E,m])}function T(e,r){let n=(0,y.sc)(),a=i.useContext(c.W);i.useEffect(()=>{n?.updateCommentVisibility&&n.updateCommentVisibility(e)},[n,e]),i.useEffect(()=>{!e&&a&&r?.current&&(a.uninstallTapGestureRecognizer(r.current),a.uninstallMultiTouchLongPressGestureRecognizer(r.current,1))},[e,a,r])}},872340:(e,r,n)=>{n.d(r,{A8:()=>g,AD:()=>b,D4:()=>y,Py:()=>w,Q2:()=>_,Wq:()=>E,_i:()=>T,pl:()=>f,uC:()=>I,wF:()=>S});var i=n(848318),a=n(716544),o=n(988520),s=n(157907),l=n(397579),c=n(493554),d=n(195507),u=n(199689),p=n(727341),m=n(635547),h=n(369600);let _=4,g=8,f=22;function E(e,r){let n=(0,p.GS)(),i=y(),a=function(e,r){let{isPropertiesPanelCollapsed:n}=(0,u.iT)();return(0,s.k)().avatar_threshold_calculation?e&&!n&&r?Math.min(Math.floor(e/f)+1,g):3:!e||n?3:Math.max(3,Math.min(Math.floor(e/f),g))}(e,r);return n?a:i}function y(){let[e,r]=i.useState(_);return i.useEffect(()=>{let e=()=>{window.innerWidth<786?r(2):r(_)};return window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}},[]),e}function b(e){return"sessionID"in e}let v=e=>{let{user:r,sessionID:n,presenterSessionID:i,lastObservedSessionID:a,fileCreatorID:o,mostActiveSpeakerID:l,observingSessionID:c}=e;return b(r)&&r.sessionID===n?0:b(r)&&i&&r.sessionID===i?1:b(r)&&c&&r.sessionID===c?2:(0,s.k)().live_feedback_large_meetings&&b(r)&&a&&r.sessionID===a?3:b(r)&&r.userID===o?4:r.userID===l?5:r.name.toLocaleLowerCase().startsWith("anonymous")?Number.MAX_SAFE_INTEGER:6};function T(e,r){let n=e;return r&&(n=n.filter(e=>b(e)&&e.deviceName===r)),n=n.filter(e=>!b(e)||"editor"!==e.deviceName||void 0===e.sawMouse||!0===e.sawMouse)}function I(e,r,n,s,c){let d=(0,a.d4)(e=>e.multiplayer.sessionID),u=(0,a.d4)(e=>e.multiplayer.observingSessionID),p=(0,a.d4)(e=>e.multiplayer.presenterSessionID),m=(0,a.d4)(e=>e.multiplayer.deviceNameFilter),_=(0,h.q5)(),[g,f]=i.useState(null),E=(0,l.ZC)(u);E!==u&&(0,o.Vq)(E)&&-1!==E&&E!==g&&f(E);let y=i.useMemo(()=>({sessionID:d,observingSessionID:u,presenterSessionID:p,lastObservedSessionID:g,mostActiveSpeakerID:c,fileCreatorID:_?.creatorId,deviceNameFilter:m}),[d,u,p,g,c,_?.creatorId,m]),{users:I,overflowUsers:S}=i.useMemo(()=>(function(e,r,n,i,a){let{deviceNameFilter:o}=a,s=[],l=[...e];return l&&0!==l.length?(l.sort((e,r)=>{let n=v({...a,user:e})-v({...a,user:r});if(0!==n)return n;let i=e.name.toLocaleLowerCase(),o=r.name.toLocaleLowerCase();return b(e)&&b(r)&&i===o?e.sessionID-r.sessionID:i>o?1:-1}),(l=T(l,o)).length>=i&&(s=l.slice(i-1),l=l.slice(0,i-1)),{users:l,overflowUsers:s}):r&&!n?{users:[r],overflowUsers:[]}:{users:[],overflowUsers:[]}})(e,r,n,s,y),[e,r,n,s,y]);return{users:I,overflowUsers:S}}function S(){let e=(0,h.q5)(),r=e?.key,n=(0,c.Rs)(m.JvY,{fileKey:r??""},{enabled:!!r});return i.useMemo(()=>{if("loaded"!==n.status)return;let e=(0,d.oA)(n.data?.file?.fileViewHistory);return(e?.map(e=>({userID:e.user.id,name:e.user.name,imageUrl:e.user.imgUrl,viewedAt:e.viewedAt}))||[]).sort((e,r)=>r.viewedAt.getTime()-e.viewedAt.getTime())},[n])}function w(e){return"viewedAt"in e}},369600:(e,r,n)=>{n.d(r,{As:()=>w,Cq:()=>x,Dz:()=>b,Hu:()=>S,K5:()=>R,Kf:()=>F,MY:()=>v,XJ:()=>N,_G:()=>O,_S:()=>L,bv:()=>U,q5:()=>M,sS:()=>A,tB:()=>T,tS:()=>k,vu:()=>P,yV:()=>I,ze:()=>C});var i=n(716544),a=n(573446),o=(n(39153),n(157907)),s=n(39773),l=n(430285),c=(n(579020),n(397579),n(921494)),d=n(695635),u=n(493554),p=(n(653959),n(303035)),m=n(520313),h=n(465766),_=n(119310);n(376780);var g=n(635547),f=n(111693),E=n(53818),y=n(661780);async function b(e){let r=e.getState().selectedView,n="fullscreen"===r.view&&r.fileKey;return n&&(await (0,d.Ek)(g.ehp,{fileKey:n})).file||null}function v(){let e=(0,i.d4)(e=>e.selectedView),r=e?.view==="fullscreen"?e.fileKey:void 0,n=(0,u.Rs)(g.ehp,{fileKey:r||""},{enabled:!!r});return l.Qw.useTransform(n,({file:e})=>e)}function T(e){return e.openFile}let I=(0,_.bt)(T),S=(0,s.eU)(e=>{let r=e(I),n=e(f.m);return r?.teamId?n[r.teamId]??null:null}),w=(0,s.mg)(I,e=>e?.teamId??void 0);function A(e){return e.openFile?.key||null}let C=(0,_.bt)(A);function N(e){let r=T(e);return r?(0,a.l)(r.libraryKey):null}let L=(0,_.bt)(N),O=(0,E.D)(()=>(0,s.md)(L));function R(){let e=k(),r=O();return(0,m.i)(e,r)}function P(e){return e.openFile?.key&&e.fileByKey[e.openFile.key]||null}function D(){return(0,i.d4)(T)}let M=(0,o.k)().preload_open_editor_file_data?function(){let e=(0,i.d4)(e=>e.selectedView),r=function(){let e=(0,i.d4)(e=>e.selectedView?.view==="fullscreen"?e.selectedView.fileKey:null),r=(0,u.rp)((0,g.ehp)(e?{fileKey:e}:null));return l.Qw.useTransform(r,({file:e})=>e)}(),n=D();return e?.view==="prototype"?n:r.data??null}:D,k=(0,E.D)(()=>M()?.key||null);function F(){let e=M(),r=(0,y.iZ)();return e?.creatorId===r?.id}function x(e){return U((0,c.R)(e=>({openFile:e.openFile,fileByKey:e.fileByKey})),e)}function U(e,r){let n=P(e);return r?.useSinatraType?n:n?(0,h.UE)(n):null}(0,o.k)().preload_open_editor_file_data||p.lQ},67919:(e,r,n)=>{n.d(r,{$0:()=>M,By:()=>B,D_:()=>C,HG:()=>U,Lt:()=>L,Pi:()=>x,S$:()=>A,VA:()=>F,Ww:()=>D,c3:()=>N,dR:()=>k,oW:()=>P,y:()=>V});var i=n(848318),a=n(716544),o=n(445777),s=n(988520),l=n(741419),c=n(39773),d=n(397579),u=n(831932),p=n(981798),m=n(808471),h=n(705694),_=n(442313),g=n(697714),f=n(117652),E=n(119699),y=n(8374),b=n(667323),v=n(339599),T=n(449977),I=n(493871),S=n(834996),w=n(169320);let A=(0,m.nl)()?0:4e3;var C=(e=>(e.INITIAL="initial",e.NEXT="next",e))(C||{});let N=(0,y.nF)((e,r)=>{let n=e.getState().multiplayer.allUsers.find(e=>e.sessionID===r.presenterSessionID),i=n?.name??"",a=n?(0,_.t)("collaboration.spotlight.visual_bell.user_left_the_spotlight",{userName:i}):(0,_.t)("collaboration.spotlight.visual_bell.the_presenter_left_the_spotlight");e.dispatch(g.F.enqueue({message:a,type:"presentation_stopped_alert"}))}),L=(0,y.nF)((e,r)=>{e.dispatch(g.F.dequeue({matchType:"presentation_stopped_alert"}))}),O=(e,r,n,i)=>{let a=(0,s.Vq)(r)&&e!==r,o=n===r,l=i===r;return a&&!o&&!l};function R(){let e=(0,S.z3)(),r=(0,a.wA)(),n=(0,a.d4)(e=>e.multiplayer),o=i.useCallback(e=>{r(b.J4({...n,observingSessionID:e}))},[n,r]),s=i.useCallback(e=>{l.h3O.observeUser(e)},[]);return"prototype"===e?o:s}function P(e){let{multiplayer:{observingSessionID:r,presenterSessionID:n,sessionID:l}}=e,u=(0,a.wA)(),m=(0,S.z3)(),h=(0,c.md)(p.Dv),[_,g]=i.useState("initial"),f=(0,d.ZC)(n),E=r===n,y=l===n||h,b=O(f,n,r,l),[v,I]=i.useState(null);i.useEffect(()=>{let e=null;return null!=v&&(e=setTimeout(()=>I(null),1e3)),()=>{e&&clearTimeout(e)}},[v]);let C=R(),P=i.useCallback(()=>{(0,s.Vq)(n)&&("prototype"!==m&&(0,T.wr)(),C(n))},[n,C,m]),D=i.useCallback(()=>{P(),n&&I(n)},[n,P]);v===r&&I(null);let{isActive:M,start:k,cancel:F,complete:x}=(0,w.Z)(D),U=i.useCallback(()=>{F(),I(null)},[F]),B=b&&r===f,V=b&&!B,G=(0,s.uy)(n)&&(0,s.Vq)(f)&&r===f;M&&y&&U(),i.useEffect(()=>{B&&(u(L()),k(2e3),g("next"))},[u,B,k]),i.useEffect(()=>{V&&(u(L()),k(A),g("initial"))},[u,V,k]),i.useEffect(()=>{G&&(C(-1),U(),u(N({presenterSessionID:f})))},[U,u,f,G,e.multiplayer,C]),i.useEffect(()=>{M&&E&&U()},[E,U,M]);let H=(()=>{switch(_){case"next":return 2e3;case"initial":return A;default:(0,o.xb)(_)}})();return{isAutoFollowPending:!y&&(V||B||M||null!=v),cancelAutoFollowCallback:U,completeAutoFollowCallback:x,observeCurrentPresenter:P,autoFollowType:_,autoFollowDelayMs:H}}function D(){let e=(0,a.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.sessionID)??null}function M(){let e=(0,a.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.observingSessionID)??null}function k(){let e=(0,a.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.presenterSessionID)??null}function F({multiplayer:e}){let r=function(){let e=U(),r=(0,I.XM)(),n=(0,E.hA)(),i=(0,E.l7)(),a=(0,f.e)();return!!e&&!r&&!n&&!i&&!a}(),n=e.presenterSessionID===e.sessionID,a=(0,S.z3)(),o=i.useCallback(()=>{"prototype"===a?h.hk()?.stopPresenting():l.h3O.stopPresenting()},[a]);i.useEffect(()=>{!r&&n&&o()},[r,n,o])}function x({multiplayer:e}){let r=R(),n=!B(),a=-1!==e.observingSessionID;i.useEffect(()=>{!n&&a&&r(-1)},[n,a,r])}function U(){return!((0,u.o4)()&&(0,u.Q1)()&&!(0,u.wg)()||v.z4?.getIsExtension())}function B(){let e=(0,I.XM)(),r=(0,I.e2)(),n=(0,E.hA)(),i=(0,E.l7)();return!!e||!!r||!!n||!!i}function V(){let e=(0,a.d4)(e=>e.multiplayer),r=e.sessionsNominatingCurrentUser[0];return r?e.allUsers.find(e=>e.sessionID===r)??null:null}},320830:(e,r,n)=>{n.d(r,{TN:()=>l});var i=n(716544),a=n(694253),o=n(944527),s=n(974490);function l(e){let r=!!(0,s.q)({teamId:e,flag:o.uU}),n=(0,i.d4)(r=>r.teams[e]),l=(0,i.d4)(e=>(0,a.getPermissionsStateMemoized)(e));return o.ng.getProTrial(n,r,l)}},574667:(e,r,n)=>{n.d(r,{Fl:()=>b,ug:()=>T,wW:()=>E});var i=n(848318),a=n(716544),o=n(921494);n(640823);var s=n(808471),l=n(341550),c=n(316645),d=n(661780),u=n(928001),p=n(426662),m=n(972813);new class{constructor(){this.BatchedSchemaValidator=(0,m.vh)()}getBatched(e){return this.BatchedSchemaValidator.validate(async({xr:r})=>await r.get("/api/users/batched",m.td.toAPIParameters({userIds:e.userIds.join(",")})))}};let h=e=>r=>e&&r.publicUsers.byId[e]||null,_=e=>r=>{let n=r.multiplayer.allUsers.find(r=>r.userID===e);return n?v(n):null},g=e=>r=>{let n=r.user,i=_(e)(r);return n&&n.id===e?n:i||null},f=e=>r=>{let n=g(e)(r),i=h(e)(r);return n||i||null};function E(e){let r=(0,o.R)(g(e)),n=function(e){let r=(0,a.wA)(),n=`PUBLIC_USER_FETCH_${e}`,o=(0,a.d4)(e=>e.loadingState),s=(0,a.d4)(h(e)),p=function(e){let r=!!(0,d.iZ)();return!!e&&!b(e)&&r}(e),m=!!s,_=!m&&(0,u.VP)(o,n),g=!m&&(0,u.aF)(o,n),f=!m&&p&&!_&&!g;return(0,i.useEffect)(()=>{f&&(r(l.Cx({key:n})),y(e).then(e=>{r(c.yJ({user:e})),r(l.yH({key:n}))}).catch(()=>{r(l.of({key:n}))}))},[r,e,f,n]),{user:s,loading:_,hasError:g}}(r?null:e);return r?{user:r,loading:!1,hasError:!1}:n}let y=e=>p.k.getUser({userId:e}).then(e=>e.data.meta).catch(e=>{throw(0,s.Lg)()||console.warn("Failed to get public user"),e}),b=e=>e.startsWith("VISITOR-"),v=e=>({id:e.userID,name:e.name,handle:e.name,img_url:e.imageURL});async function T({state:e,dispatch:r,userId:n}){let i=f(n)(e);if(i)return i;if(b(n))return null;let a=e.user,o=b(n);if(!(!i&&!o&&a))return null;let s=await y(n);return r(c.yJ({user:s})),s}},834996:(e,r,n)=>{n.d(r,{AN:()=>h,OC:()=>u,Uc:()=>p,_6:()=>c,mr:()=>d,yF:()=>m,z3:()=>_});var i=n(716544),a=n(39773);n(128080);var o=n(119310);n(834111);let s=e=>e.selectedView,l=e=>e.selectedView.view;function c(){return(0,i.d4)(s)}function d(){let e=c();if("prototype"!==e.view)throw Error(`Unexpected non-prototype view: ${e.view}`);return e}let u=(0,o.bt)(s),p=(0,o.bt)(e=>e.modalShown),m=(0,a.eU)(e=>e(p)?.type||null),h=(0,o.bt)(e=>e.notifications?.[0]?.type??null);function _(){return(0,i.d4)(l)}},66347:(e,r,n)=>{n.d(r,{N:()=>a});var i=n(848318);function a(e,r=!0){(0,i.useEffect)(()=>{if(!r)return;let n=!0,i=performance.now(),a=r=>{if(!n)return;let o=r-i;i=r,e(o),requestAnimationFrame(a)};return requestAnimationFrame(a),()=>{n=!1}},[r,e])}},409026:(e,r,n)=>{n.d(r,{t:()=>T});var i=n(848318),a=n(716544),o=n(730169),s=n(831932),l=n(654104),c=n(701780),d=n(557675),u=n(992444),p=n(449977),m=n(45584),h=n(710905);let _=e=>{let r=e.target;for(;r&&"body"!==r.tagName.toLowerCase();){let e=getComputedStyle(r).overflowY;if("scroll"===e||"auto"===e)return!0;r=r.parentElement}return!1};var g=n(139444);function f(){return Array.from(document.querySelectorAll('[data-cancel-insertable-resource-drag-and-drop="true"]')).map(e=>e.getBoundingClientRect())}function E(e,r){return(0,c.gR)(u.Y5.getViewportInfo(),e)&&!r.some(r=>(0,c.gR)(r,e))}var y=n(151489),b=n(62822),v=n(199875);function T(e,r){let n=(0,a.Pj)(),T=(0,a.wA)(),I=new Image,S=i.useRef(!1),w=i.useRef(void 0),A=i.useRef([]),[C,N,L]=(0,b.J)(null),{state:O,dispatch:R}=i.useContext(v.nS);(0,o.h)(()=>{r.preloadThumbnail&&(I.src=r.getDragPreviewSrc())});let P=function(e){let{onDelayedDragSuccess:r,onDelayedDragCancelled:n}=e,a=(0,h.BI)(),o=i.useRef(void 0),l=i.useRef(-1),d=i.useCallback(e=>{e.preventDefault()},[]),u=()=>{clearTimeout(l.current),l.current=-1},p=i.useCallback(e=>{-1!==l.current&&e.pointerId===o.current?.pointerId&&c.Mi.distance(new c.Mi(o.current.clientX,o.current.clientY),new c.Mi(e.clientX,e.clientY))>10&&(n(),u(),document.removeEventListener("touchmove",d),document.removeEventListener("pointermove",p),o.current=void 0)},[n,d]),m=i.useCallback(e=>{document.removeEventListener("touchmove",d),document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",m),o.current=void 0,u()},[d,p]);return e=>{"mouse"!==e.pointerType&&(a?.shouldOptimizeForIpadApp||s.Ay.isMeetDevice)&&_(e)?(document.addEventListener("pointermove",p),document.addEventListener("pointerup",m),o.current=e,l.current=setTimeout(()=>{document.addEventListener("touchmove",d,{passive:!1}),r(e)},250)):r(e)}}({onDelayedDragSuccess:n=>{document.addEventListener("pointermove",M,{passive:!1}),w.current=new c.Mi(n.clientX,n.clientY),I.src=r.getDragPreviewSrc(),r.onPointerDownCallback?.();let i=n.currentTarget;i||console.error("Expected dragTarget to be non-null, but it's null. If this is an interaction test, you may need to add a currentTarget argument to the args in t.do()");let a=i.getBoundingClientRect(),o=new c.Mi(n.clientX,n.clientY);L(r=>({...r,draggingResource:e.resource,isDraggingOverCanvas:!1})),I.onload=()=>{let n=I.naturalWidth/2,i=I.naturalHeight/2,{dragOffset:s,pointerPercentageOffset:l,draggingThumbSize:d}=(0,g.T)(r.dragPreviewPointerPosition,new c.Mi(n,i),o,a);L(r=>r?{...r,dragOffset:s,grabbedPointerPercentageOffset:l,draggingThumbSize:d,draggingThumbMaxDimensions:e.draggingThumbMaxDimensions}:r)}},onDelayedDragCancelled:()=>{S.current=!1}}),D=l.BV(l.Pt("insertableResource",r.recordingKey||""),"pointerdown",e=>{2===e.button||e.ctrlKey||(e.stopPropagation(),s.Ay.isMeetDevice&&R({type:"start click"}),A.current=f(),document.addEventListener("pointerup",k),s.Ay.isMeetDevice&&document.addEventListener("touchend",k),S.current=!0,P(e))}),M=i.useCallback(l.BV(l.Pt("insertableResource",r.recordingKey||""),"pointermove",r=>{let i=n.getState().mirror.sceneGraphSelection,a=C.current;if(!a)return;r.preventDefault();let o=new c.Mi(r.clientX,r.clientY),s=E(o,A.current),l=a.draggingResource,m={dragPosition:o,isDraggingOverCanvas:s};S.current&&a.dragPosition&&w.current&&w.current.distanceTo(o)>y.Nq&&(i&&l&&(p.wr(),u.Y5.commit(),T(d.jD())),e.onDragStart?.(),S.current=!1),L(e=>({...e,...m}))},{recordMetadata:e=>{let r=u.Y5.getViewportInfo(),n=new c.Mi(r.x,r.y),i=new c.Mi(e.clientX,e.clientY).subtract(n),a=(0,m.$$)(r,i);return{shiftKey:e.shiftKey,metaKey:e.metaKey,canvasPosition:a}},playbackMetadata:e=>{let r=u.Y5.getViewportInfo(),n=new c.Mi(r.x,r.y),i=(0,m.Z0)(r,e.canvasPosition),a=c.Mi.add(i,n);return{shiftKey:e.shiftKey,metaKey:e.metaKey,clientX:a.x,clientY:a.y}}}),[n,C,L,e.onDragStart]),k=i.useCallback(l.BV(l.Pt("insertableResource",r.recordingKey||""),"pointerup",n=>{let i=C.current;if((e.recomputeCancelRectsOnPointerUp&&i?.dragPosition?E(i?.dragPosition,f()):i?.isDraggingOverCanvas)&&i?.dragPosition||S.current&&e.clickToInsert_DEPRECATED){s.Ay.isMeetDevice&&R({type:"end insert"});let a=(0,y.zR)(S.current?void 0:i?.dragPosition);r.insertAction({e:n,dropPosition:a,pointerPercentageOffset:i?.grabbedPointerPercentageOffset,isClick:S.current}).then(()=>e.afterSuccessfulInsert?.(n))}else r.onPointerUpWithoutInsert?.();r.onPointerUpCallback?.(),L(null),s.Ay.isMeetDevice&&document.removeEventListener("touchend",k),document.removeEventListener("pointerup",k),document.removeEventListener("pointermove",M)},{recordMetadata:e=>{let r=u.Y5.getViewportInfo(),n=new c.Mi(r.x,r.y),i=new c.Mi(e.clientX,e.clientY).subtract(n),a=(0,m.$$)(r,i);return{shiftKey:e.shiftKey,metaKey:e.metaKey,canvasPosition:a}},playbackMetadata:e=>{let r=u.Y5.getViewportInfo(),n=new c.Mi(r.x,r.y),i=(0,m.Z0)(r,e.canvasPosition),a=c.Mi.add(i,n);return{shiftKey:e.shiftKey,metaKey:e.metaKey,clientX:a.x,clientY:a.y}}}),[C,e,r,L,M]);return{onInsertableResourcePointerDown:D,dragState:S.current?null:N}}},57630:(e,r,n)=>{n.d(r,{M:()=>u});var i=n(848318),a=n(891627),o=n(536384),s=n.n(o),l=n(782623),c=n(445770),d=n(357202);function u(e){if(!e.dragState?.dragPosition||!e.dragState?.dragOffset)return null;let r=e.dragState.dragPosition.subtract(e.dragState.dragOffset),n=(0,c.AE)(e.dragState.draggingResource);return(0,a.createPortal)(void 0!==e.icon?i.createElement("div",{className:s()(d.Az,{[d.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:r.x,top:r.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y}},e.icon):i.createElement(l.oW,{src:n,alt:"",className:s()(d._D,{[d.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:r.x,top:r.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y},draggable:!1}),document.getElementById("fullscreen-root"))}},139444:(e,r,n)=>{n.d(r,{N:()=>a,T:()=>o});var i=n(701780),a=(e=>(e[e.RELATIVE=0]="RELATIVE",e[e.CENTERED=1]="CENTERED",e))(a||{});function o(e,r,n,a){switch(e){case 0:return function(e,r,n){let a,o;let s=e.x,l=e.y;s>l?(a=Math.min(s,n.width),o=l/s*a):(o=Math.min(l,n.height),a=s/l*o);let c=new i.Mi(n.width/2-a/2,n.height/2-o/2),d=r.subtract(n).subtract(c),u=new i.Mi(d.x/a,d.y/o);return{dragOffset:d,pointerPercentageOffset:u,draggingThumbSize:new i.Mi(a,o)}}(r,n,a);case 1:return{dragOffset:r.scale(.5),pointerPercentageOffset:new i.Mi(.5,.5),draggingThumbSize:r}}}},151489:(e,r,n)=>{n.d(r,{M5:()=>p,Nq:()=>u,zR:()=>d});var i=n(848318),a=n(397579),o=n(701780),s=n(992444),l=n(139736),c=n(45584);function d(e){let r=s.Y5.getViewportInfo(),n=e?e.subtract(r):new o.Mi(r.width/2,r.height/2),i=(0,c.$$)(r,n);return new o.Mi(i.x,i.y)}let u=5;function p(e,r,n){let c=(0,a.ZC)(e?.isDraggingOverCanvas),d=(0,l.Z)(),[u,p]=i.useState(null);return i.useEffect(()=>{if(!c&&e?.isDraggingOverCanvas&&r&&n){let r=function(e,r){if(void 0===e||void 0===r)return null;let{width:n,height:i}=s.Y5.getViewportInfo();return Math.min(n/e*.5,i/r*.5)}(...n);if(null!==r){let{zoomScale:i,offsetX:a,offsetY:l}=s.Y5.getViewportInfo();r<i&&(p(new o.Mi(...n).scale(r)),setTimeout(()=>{d({centerX:a,centerY:l,scale:r})?.then(()=>{p(null)}),e.grabbedPointerPercentageOffset=new o.Mi(.5,.5)},0))}}},[e,d,n,r,c]),u}},968032:(e,r,n)=>{n.d(r,{V7:()=>s});var i=n(445777);let a=["Table","CodeBlock","MindMap","Text","Section"],o=["Timer","Image","Link"];function s(e){return"string"==typeof e&&a.includes(e)||"string"==typeof e&&o.includes(e)?e:"object"==typeof e&&e.id&&e.name&&e.img?"FaceStamp":void(0,i.xb)(e)}},445770:(e,r,n)=>{n.d(r,{AE:()=>_,E:()=>g,Ik:()=>f});var i=n(445777),a=n(379338),o=n(397175),s=n(654104),l=n(442313),c=n(235441),d=n(180633),u=n(178419),p=n(409026),m=n(139444),h=n(968032);function _(e){switch(e){case"Table":return(0,a.ck)("ac41ded88c50f0359c02ec3927394b7b33e210b6");case"CodeBlock":return(0,a.ck)("8a035152916712353b045f442c2c6c5879ef3e17");case"MindMap":return(0,a.ck)("1dd4c6f9e1fbf269895ee58e7be79d9f9ee79b9e");default:return""}}function g(e){switch(e){case"Table":return(0,l.t)("whiteboard.inserts.table_title");case"CodeBlock":return(0,l.t)("whiteboard.inserts.code_block_title");case"MindMap":return(0,l.t)("whiteboard.inserts.mind_map_title");case"Text":return(0,l.t)("whiteboard.inserts.text_title");case"Section":return(0,l.t)("whiteboard.inserts.section_title");default:(0,i.xb)(e)}}function f(e){let r="whiteboard"===(0,c.lg)(),n=(0,u.F5)(),i=(0,h.V7)(e.resource),a=async a=>(e.insertAction(a),r&&(0,u.oM)({type:d.p.MORE,id:i,source:e.triggeredFrom,options:{...n,query:e.searchQuery}}),await Promise.resolve());return(0,p.t)(e,{insertAction:a,dragPreviewPointerPosition:m.N.CENTERED,getDragPreviewSrc:e.icon?()=>"data:image/svg+xml;utf8,"+(0,o.F)(e.icon):()=>_(e.resource),recordingKey:s.Pt(e.triggeredFrom,"whiteboardResource",i)})}},328759:(e,r,n)=>{n.d(r,{S:()=>i}),n(848318),n(716544),n(741419),n(952423),n(921494),n(935529),n(119699),n(481540),n(60546),n(369600);function i(e){}},705363:(e,r,n)=>{n.d(r,{Xo:()=>s}),n(848318);var i=n(716544),a=n(39773);n(667323);let o=(0,n(119310).bt)(e=>e.pickerShown);function s(){return(0,i.d4)(e=>e.pickerShown)}(0,a.Iz)(e=>(0,a.eU)(r=>{let n=r(o);return n?.id===e}))},62822:(e,r,n)=>{n.d(r,{J:()=>a});var i=n(848318);function a(e){let[r,n]=i.useState(e),a=i.useRef(e);return i.useEffect(()=>{a.current=r},[r]),[a,r,n]}},599422:(e,r,n)=>{n.d(r,{U3:()=>s,aq:()=>o});var i=n(848318),a=n(719670);function o(){let e=i.useRef(!1);return i.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),i.useCallback(()=>e.current,[])}function s(e,r,n){let o=function(e,r){let n=i.useRef(null),a=r(e,n.current);return i.useEffect(()=>{a||(n.current=e)}),a?n.current:e}(n,a.c2);i.useEffect(()=>(window.addEventListener(e,r,o),()=>{window.removeEventListener(e,r,o)}),[e,r,o])}},541641:(e,r,n)=>{n.d(r,{Au:()=>d,P:()=>u,eO:()=>c}),n(848318),n(425642);var i=n(430285),a=n(493554),o=n(195507);n(376780);var s=n(635547);n(122367);var l=n(980753);function c(e){let r=e?.baseOrgUser?.workspaceUsers,n=r?.find(e=>e.isMainWorkspace);return n?.workspaceId??null}function d(e){let r=(0,a.Rs)(s.TKM,{orgId:e});return i.Qw.useTransform(r,e=>c(e.currentUser))}function u(e,r){let n=(0,a.Rs)(s.aON,{orgId:e??"",workspaceId:r??""},{enabled:!!e&&!!r});return null===r?(0,o.gB)(l.O):n.transform(e=>e.workspace)}var p=(e=>(e[e.IS_GUEST=1]="IS_GUEST",e[e.WRONG_WORKSPACE=2]="WRONG_WORKSPACE",e[e.TEAM_CREATION_CONTROL=3]="TEAM_CREATION_CONTROL",e[e.LG_LOADING=4]="LG_LOADING",e))(p||{})},391788:(e,r,n)=>{n.d(r,{HF:()=>x,M3:()=>w,Rj:()=>P,Vz:()=>B,a6:()=>A,al:()=>D,bH:()=>k,cU:()=>M,cp:()=>L,ow:()=>N,pt:()=>I,re:()=>T,t0:()=>F,vK:()=>R,x0:()=>C,yS:()=>O,zv:()=>U});var i=n(445777),a=n(741419),o=n(994811),s=n(44509),l=n(857188),c=n(431118),d=n(442313),u=n(23354),p=n(364370),m=n(285647),h=n(376780),_=n(75603),g=n(302302),f=n(217084),E=n(710994),y=n(625069),b=n(273121);let v={id:"",hub_file_id:"",fig_file_version_id:"",name:"",version:"",release_notes:"",description:"",creator_policy:"",created_at:"",valid_prototype:!0,thumbnail_guid:null},T={id:"",category_id:null,creator:{id:"",handle:"",img_url:""},publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:g.o1.USER,badges:[],description:""},community_publishers:{accepted:[],pending:[]},versions:{},current_hub_file_version_id:"",redirect_canvas_url:"",thumbnail_url:"",created_at:"",unpublished_at:null,duplicate_count:0,like_count:0,view_count:0,comment_count:0,viewer_mode:h.y4.CANVAS,scaling_mode:null,realtime_token:"",client_meta:"",thumbnail_is_set:!1,comments_setting:null,publishing_status:h.KB.APPROVED_PUBLIC,badges:[]};var I=(e=>(e.KEY="is-community-duplicate",e.VALUE="1",e))(I||{}),S=(e=>(e.CURRENT_FILE="currentFile",e.NEW_FILE="newFile",e))(S||{});function w(e,r){return(0,y.Hc)(e,r,T)}function A(e,r){let n=r||e.current_hub_file_version_id;return(0,y.Hc)(n,e.versions,v)}function C(e){if(!e)return h.y4.CANVAS;switch(e){case h._Y.DESIGN:return h.y4.CANVAS;case h._Y.WHITEBOARD:return h.y4.WHITEBOARD;case h._Y.SLIDES:return h.y4.SLIDE_TEMPLATE;case h._Y.SITES:case h._Y.FIGMAKE:return h.y4.SITE_TEMPLATE;case h._Y.COOPER:return h.y4.COOPER_TEMPLATE_FILE;default:(0,i.xb)(e)}}function N(e,r,n,i){let o;let s=e.figFilePublishedAsHubFile[r],l=w(s,e.hubFiles),c=A(l),g=y.b,f=e.fileByKey[r];!i&&!n&&(e.authedActiveCommunityProfile?.team_id||e.authedActiveCommunityProfile?.org_id)&&(o=(0,m.Tn)(e.authedActiveCommunityProfile));let b=(0,m.gO)(l,f,e,o),v=n?l.viewer_mode:C(f.editor_type);!n&&l.viewer_mode===h.y4.PROTOTYPE&&i&&a.X3B?.firstPagePrototypeStatus()===a.bOM.VALID&&(v=h.y4.PROTOTYPE);let T={...(0,E.Rs)(),tokens:(l.community_publishers?[...l.community_publishers.accepted,...l.community_publishers.pending||[]]:[]).reduce((r,n)=>{let i=e.authedProfilesById[n.id];return(0,m.Ii)(i,b)?r:r.concat([{state:_.d.OK,content:n}])},[])};return{name:c.name||(f.name===(0,d.t)("fullscreen.fullscreen_view_selector.untitled")?"":f.name),description:c.description||g.description,categoryId:l.category_id,creatorPolicy:c.creator_policy||g.creatorPolicy,tags:s&&l?.tags?l.tags:f?.editor_type==="whiteboard"?["figjam"]:void 0,tagsV2:l.tags_v2&&Object.keys(l.tags_v2),viewerMode:v,scalingMode:l.scaling_mode,author:b,publishers:T,commentsSetting:l.comments_setting||g.commentsSetting,blockPublishingOnToS:(0,m.xw)(e),price:(0,p.vf)(l.monetized_resource_metadata),isPaid:!!l.monetized_resource_metadata,supportContact:l.support_contact||e.user?.email,carouselMedia:(0,u.N6)(l),coverImageCarouselMediaId:l.cover_image_carousel_media_id}}function L(e,r){return e?r?(0,p.Yp)(r)?r<p.mZ?(0,d.t)("community.seller.paid_resource_minimum_err"):(0,d.t)("community.seller.paid_resource_maximum_err"):(0,p.F8)(r)?(0,d.t)("community.seller.prices_must_follow_format"):void 0:(0,d.t)("community.publishing.price_is_required_for_paid_resources"):void 0}function O(e){let r=(0,y.Yp)(e||null).length;return 0===r?(0,d.t)("community.publishing.name_must_not_be_empty"):r<4?(0,d.t)("community.publishing.name_must_be_4_characters_long"):r>100?(0,d.t)("community.publishing.name_must_be_at_most_100_characters_long"):void 0}function R(e){if((0,y.Yp)(e||null).length>1e4)return(0,d.t)("community.publishing.description_must_be_at_most_10000_characters_long")}function P(e){if((0,y.Yp)(e||null).length>1e4)return(0,d.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long")}function D(e,r){return e&&!r?(0,d.t)("community.publishing.support_contact_must_not_be_empty"):!r||(0,o.xf)(r)||(0,c.gU)(r)?void 0:(0,d.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")}function M(e){if(!e)return(0,d.t)("community.publishing.category_cant_be_empty")}function k(e){let r={name:O(e.name),description:R(e.description),creatorPolicy:P(e.creatorPolicy)};e.publisherIds&&(r.publisherIds=(0,y.IZ)(e.publisherIds.length)||void 0),r.carouselMedia=(0,m.vC)(e.carouselMedia),r.categoryId=M(e.categoryId);let n="isPaid"in e&&!!e.isPaid;return r.price=L(n,e.price),r.supportContact=D(n,e.supportContact),Object.keys(r).forEach(e=>!r[e]&&delete r[e]),r}function F(e){return e===f.G4.FULLSCREEN||e===f.G4.FULLSCREEN_WITH_COMMENTS}function x(e){return!!e&&!e.unpublished_at}function U(e){return!!e&&e.publishing_status===h.KB.APPROVED_PUBLIC}function B(e){let r=(0,b.X$)(e);return(0,l.Gc)(e=>{e?.preventDefault(),s.Ay.redirect(r,"_blank")})}},398595:(e,r,n)=>{n.d(r,{Z:()=>a});var i=n(243973);function a(e,r=!1){let n=e.deltaY,o=e.ctrlKey&&!r&&(i.y.isChrome()||i.y.isFirefox());return o?n/=-100:0!==n&&(n=n/Math.abs(n)*Math.min(Math.abs(n),10*Math.cbrt(Math.abs(n)))),o?Math.pow(4,n):Math.pow(.995,n)}},790437:(e,r,n)=>{n.d(r,{FB:()=>l,UA:()=>i,W4:()=>o,Wg:()=>s,s3:()=>c,sf:()=>a});let i=[["Afghanistan","AF"],["\xc5land Islands","AX"],["Albania","AL"],["Algeria","DZ"],["American Samoa","AS"],["Andorra","AD"],["Angola","AO"],["Anguilla","AI"],["Antarctica","AQ"],["Antigua and Barbuda","AG"],["Argentina","AR"],["Armenia","AM"],["Aruba","AW"],["Australia","AU"],["Austria","AT"],["Azerbaijan","AZ"],["Bahamas","BS"],["Bahrain","BH"],["Bangladesh","BD"],["Barbados","BB"],["Belarus","BY"],["Belgium","BE"],["Belize","BZ"],["Benin","BJ"],["Bermuda","BM"],["Bhutan","BT"],["Bolivia (Plurinational State of)","BO"],["Bonaire, Sint Eustatius and Saba","BQ"],["Bosnia and Herzegovina","BA"],["Botswana","BW"],["Bouvet Island","BV"],["Brazil","BR"],["British Indian Ocean Territory","IO"],["Brunei Darussalam","BN"],["Bulgaria","BG"],["Burkina Faso","BF"],["Burundi","BI"],["Cabo Verde","CV"],["Cambodia","KH"],["Cameroon","CM"],["Canada","CA"],["Cayman Islands","KY"],["Central African Republic","CF"],["Chad","TD"],["Chile","CL"],["China","CN"],["Christmas Island","CX"],["Cocos (Keeling) Islands","CC"],["Colombia","CO"],["Comoros","KM"],["Congo","CG"],["Congo (Democratic Republic of the)","CD"],["Cook Islands","CK"],["Costa Rica","CR"],["C\xf4te d'Ivoire","CI"],["Croatia","HR"],["Cuba","CU"],["Cura\xe7ao","CW"],["Cyprus","CY"],["Czechia","CZ"],["Denmark","DK"],["Djibouti","DJ"],["Dominica","DM"],["Dominican Republic","DO"],["Ecuador","EC"],["Egypt","EG"],["El Salvador","SV"],["Equatorial Guinea","GQ"],["Eritrea","ER"],["Estonia","EE"],["Eswatini","SZ"],["Ethiopia","ET"],["Falkland Islands (Malvinas)","FK"],["Faroe Islands","FO"],["Fiji","FJ"],["Finland","FI"],["France","FR"],["French Guiana","GF"],["French Polynesia","PF"],["French Southern Territories","TF"],["Gabon","GA"],["Gambia","GM"],["Georgia","GE"],["Germany","DE"],["Ghana","GH"],["Gibraltar","GI"],["Greece","GR"],["Greenland","GL"],["Grenada","GD"],["Guadeloupe","GP"],["Guam","GU"],["Guatemala","GT"],["Guernsey","GG"],["Guinea","GN"],["Guinea-Bissau","GW"],["Guyana","GY"],["Haiti","HT"],["Heard Island and McDonald Islands","HM"],["Holy See","VA"],["Honduras","HN"],["Hong Kong","HK"],["Hungary","HU"],["Iceland","IS"],["India","IN"],["Indonesia","ID"],["Iran (Islamic Republic of)","IR"],["Iraq","IQ"],["Ireland","IE"],["Isle of Man","IM"],["Israel","IL"],["Italy","IT"],["Jamaica","JM"],["Japan","JP"],["Jersey","JE"],["Jordan","JO"],["Kazakhstan","KZ"],["Kenya","KE"],["Kiribati","KI"],["Korea (Democratic People's Republic of)","KP"],["Korea (Republic of)","KR"],["Kuwait","KW"],["Kosovo","XK"],["Kyrgyzstan","KG"],["Lao People's Democratic Republic","LA"],["Latvia","LV"],["Lebanon","LB"],["Lesotho","LS"],["Liberia","LR"],["Libya","LY"],["Liechtenstein","LI"],["Lithuania","LT"],["Luxembourg","LU"],["Macao","MO"],["Macedonia (the former Yugoslav Republic of)","MK"],["Madagascar","MG"],["Malawi","MW"],["Malaysia","MY"],["Maldives","MV"],["Mali","ML"],["Malta","MT"],["Marshall Islands","MH"],["Martinique","MQ"],["Mauritania","MR"],["Mauritius","MU"],["Mayotte","YT"],["Mexico","MX"],["Micronesia (Federated States of)","FM"],["Moldova (Republic of)","MD"],["Monaco","MC"],["Mongolia","MN"],["Montenegro","ME"],["Montserrat","MS"],["Morocco","MA"],["Mozambique","MZ"],["Myanmar","MM"],["Namibia","NA"],["Nauru","NR"],["Nepal","NP"],["Netherlands","NL"],["New Caledonia","NC"],["New Zealand","NZ"],["Nicaragua","NI"],["Niger","NE"],["Nigeria","NG"],["Niue","NU"],["Norfolk Island","NF"],["Northern Mariana Islands","MP"],["Norway","NO"],["Oman","OM"],["Pakistan","PK"],["Palau","PW"],["Palestine, State of","PS"],["Panama","PA"],["Papua New Guinea","PG"],["Paraguay","PY"],["Peru","PE"],["Philippines","PH"],["Pitcairn","PN"],["Poland","PL"],["Portugal","PT"],["Puerto Rico","PR"],["Qatar","QA"],["R\xe9union","RE"],["Romania","RO"],["Russian Federation","RU"],["Rwanda","RW"],["Saint Barth\xe9lemy","BL"],["Saint Helena, Ascension and Tristan da Cunha","SH"],["Saint Kitts and Nevis","KN"],["Saint Lucia","LC"],["Saint Martin (French part)","MF"],["Saint Pierre and Miquelon","PM"],["Saint Vincent and the Grenadines","VC"],["Samoa","WS"],["San Marino","SM"],["Sao Tome and Principe","ST"],["Saudi Arabia","SA"],["Senegal","SN"],["Serbia","RS"],["Seychelles","SC"],["Sierra Leone","SL"],["Singapore","SG"],["Sint Maarten (Dutch part)","SX"],["Slovakia","SK"],["Slovenia","SI"],["Solomon Islands","SB"],["Somalia","SO"],["South Africa","ZA"],["South Georgia and the South Sandwich Islands","GS"],["South Sudan","SS"],["Spain","ES"],["Sri Lanka","LK"],["Sudan","SD"],["Suriname","SR"],["Svalbard and Jan Mayen","SJ"],["Sweden","SE"],["Switzerland","CH"],["Syrian Arab Republic","SY"],["Taiwan","TW"],["Tajikistan","TJ"],["Tanzania, United Republic of","TZ"],["Thailand","TH"],["Timor-Leste","TL"],["Togo","TG"],["Tokelau","TK"],["Tonga","TO"],["Trinidad and Tobago","TT"],["Tunisia","TN"],["Turkey","TR"],["Turkmenistan","TM"],["Turks and Caicos Islands","TC"],["Tuvalu","TV"],["Uganda","UG"],["Ukraine","UA"],["United Arab Emirates","AE"],["United Kingdom of Great Britain and Northern Ireland","GB"],["United States of America","US"],["United States Minor Outlying Islands","UM"],["Uruguay","UY"],["Uzbekistan","UZ"],["Vanuatu","VU"],["Venezuela (Bolivarian Republic of)","VE"],["Viet Nam","VN"],["Virgin Islands (British)","VG"],["Virgin Islands (U.S.)","VI"],["Wallis and Futuna","WF"],["Western Sahara","EH"],["Yemen","YE"],["Zambia","ZM"],["Zimbabwe","ZW"]],a=["CU","IR","KP","SY"],o=[["Alabama","AL"],["Alaska","AK"],["Arizona","AZ"],["Arkansas","AR"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["Florida","FL"],["Georgia","GA"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"],["District of Columbia","DC"],["American Samoa","AS"],["Guam","GU"],["Northern Mariana Islands","MP"],["Puerto Rico","PR"],["United States Minor Outlying Islands","UM"],["Virgin Islands, U.S.","VI"],["Armed Forces (AA)","AA"],["Armed Forces (AE)","AE"],["Armed Forces (AP)","AP"]].sort((e,r)=>e[1].localeCompare(r[1])),s=[["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland and Labrador","NL"],["Nova Scotia","NS"],["Nunavut","NU"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Northwest Territories","NT"],["Yukon","YT"]].sort((e,r)=>e[1].localeCompare(r[1])),l=[["Andhra Pradesh","AP"],["Arunachal Pradesh","AR"],["Assam","AS"],["Bihar","BR"],["Chhattisgarh","CT"],["Goa","GA"],["Gujarat","GJ"],["Haryana","HR"],["Himachal Pradesh","HP"],["Jharkhand","JH"],["Karnataka","KA"],["Kerala","KL"],["Madhya Pradesh","MP"],["Maharashtra","MH"],["Manipur","MN"],["Meghalaya","ML"],["Mizoram","MZ"],["Nagaland","NL"],["Odisha","OR"],["Punjab","PB"],["Rajasthan","RJ"],["Sikkim","SK"],["Tamil Nadu","TN"],["Telangana","TG"],["Tripura","TR"],["Uttar Pradesh","UP"],["Uttarakhand","UT"],["West Bengal","WB"],["Andaman and Nicobar Islands","AN"],["Chandigarh","CH"],["Dadra and Nagar Haveli and Daman and Diu","DH"],["Delhi","DL"],["Jammu and Kashmir","JK"],["Ladakh","LA"],["Lakshadweep","LD"],["Puducherry","PY"]].sort((e,r)=>e[1].localeCompare(r[1])),c=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"].concat(["GF","GP","MQ","ME","YT","RE","MF","GI","AX","IS","NO","AD","LI","MC","SM","VA","GB","GG","JE","PM","GL","BL","SX","AW","CW","WF","PF","NC","TF","AI","BM","IO","VG","KY","FK","MS","PN","SH","GS","TC"])},792478:(e,r,n)=>{n.d(r,{Wh:()=>l,rt:()=>d});var i=n(39773),a=n(6819),o=n(369600);let s={preserveValue:!1};function l(e,r=s){let n=(0,i.Iz)(e);return(0,i.eU)(e=>{let i=a.D?e(o.ze):"FILE_KEY";return r.preserveValue||n.setShouldRemove((e,r)=>r!==i),e(n(i))},(e,r,...i)=>r(n(e(o.ze)),...i))}let c=[];function d(e){let r=(0,i.eU)(e);return c.push({atomRef:new WeakRef(r),initialValue:e}),r}},426640:(e,r,n)=>{n.d(r,{ZN:()=>s,dO:()=>o});var i=n(141039),a=n(949147);async function o(e){try{let e=null;if(i.eD&&(e=await i.eD.getKeyboardLayout()),!window.isSecureContext)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in secure context, no navigator.keyboard object"};if(window.top!==window.self)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in top-level browser context, navigator.keyboard not available"};let r=navigator.keyboard;if(!r||!r.getLayoutMap)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"No keyboard in navigator object"};let n=await r.getLayoutMap(),{detectedLayoutsWeb:o,layoutJSON:s}=function(e){let r={};return e.forEach((e,n)=>{r[n]=e}),{layoutJSON:r,detectedLayoutsWeb:a.WH.map(r=>{let n=Object.entries(r.list).map(([r,n])=>null==n?!(r in e):e.get(r)===n).filter(e=>!e).length;return{name:r.name,isValid:0===n}}).filter(e=>e.isValid).map(e=>e.name)}}(n);return{desktopLayout:e,detectedLayouts:o,layoutJSON:s}}catch(e){return console.error("Keyboard layout detection logging failed:",e),{detectedLayouts:[],layoutJSON:{},desktopLayout:null,errorMessage:"Unknown failure"}}}function s(e){return(e.desktopLayout?(0,a.pB)(e.desktopLayout):null)||(1===e.detectedLayouts.length&&a.g7[e.detectedLayouts[0]]?a.g7[e.detectedLayouts[0]]:null)}},730887:(e,r,n)=>{n.d(r,{n:()=>a}),n(848318),n(716544);var i=n(994811);function a(e,r){return!!(e?.is_ipad_user||(0,i.jm)(r))}n(6819),n(493554),n(831932),n(507152),n(442313),n(204810),n(833480),n(235441),n(376780),n(635547),n(481540),n(599422)},926010:(e,r,n)=>{n.d(r,{Bh:()=>f,SS:()=>y,bO:()=>E,oz:()=>b,z5:()=>v});var i=n(848318);n(716544);var a=n(988520),o=n(573446);n(157907),n(39773);var s=n(508242);n(983401),n(239910),n(626715);var l=n(493554),c=n(195507);n(193607),n(131862);var d=n(665549),u=n(369600);n(870769);var p=n(635547),m=n(746948);n(606261),n(314506);var h=n(967867),_=n(520313);n(773422);let g=i.createContext(null);function f(e){let{subscriptions:r,requestLibraryItems:n,releaseLibraryItems:o}=(0,a.sR)(i.useContext(g),"Must call `useLibraryData` from within <LibraryDataProvider>"),s=e?.fileKey;return i.useEffect(()=>{if(s)return n(s),()=>o(s)},[n,o,s]),s&&r[s]||(0,c.Xm)()}function E(){let{subscriptions:e}=(0,a.sR)(i.useContext(g),"Must call `useLibraryDataSubscriptions` from within <LibraryDataProvider>");return e}function y({fileKey:e,libraryKey:r}){return f((0,_.i)(e,r)),null}function b(e,r){let n=[];for(let i of e.libraryHierarchyPaths)for(let e of i.styles)r?e.style_type===r&&n.push(e):n.push(e);return n}function v(e,r){return b(e.data,r)}i.memo(function({fileKey:e,onChange:r}){let n=e!==(0,u.tS)(),a=(0,h.wJ)(e),o=(0,d.n1)(),{view:s,args:c,options:m}=a?{view:p.Acj,args:{hubFileId:e},options:{enabled:o}}:{view:n?p.tIY:p.s5n,args:{fileKey:e},options:void 0},_=(0,l.Rs)(s,c,m);return i.useEffect(()=>{r(e,_)},[r,e,_]),null}),(0,s.cm)(function(e){if("loaded"!==e.status)return e;let r=e.data;if("communityLibraryByHubFileId"in r){let e=r.communityLibraryByHubFileId;if(!e)return(0,c.e1)([]);let n=e.libraryHierarchyPaths.map(r=>{let n=r.styles.map(r=>(0,m.KC)(r,{type:"hubFile",file:{id:e.hubFileId,libraryKey:e.libraryKey}}));return{pageName:r.pageName??void 0,containingFrameName:r.containingFrameName??void 0,nameHierarchyPath:r.nameHierarchyPath??void 0,components:[],stateGroups:[],styles:n}});return(0,c.gB)({fileKey:e.hubFileId,libraryKey:(0,o.l)(e.libraryKey),name:e.name,numComponents:0,numStateGroups:0,numStyles:e.numStyles??0,libraryHierarchyPaths:n})}let n="libraryKeyToFile"in r?r.libraryKeyToFile?.file:r.file;if(!n)return(0,c.e1)([]);let i=n.libraryHierarchyPaths.map(e=>({components:"components"in e?e.components.map(e=>(0,m.Qp)(e,{type:"team",file:n})):[],stateGroups:"stateGroups"in e?e.stateGroups.map(e=>(0,m.SS)(e,{type:"team",file:n})):[],styles:e.styles.map(e=>(0,m.KC)(e,{type:"team",file:n}))}));return(0,c.gB)({fileKey:n.key,libraryKey:(0,o.l)(n.libraryKey),name:n.name,numComponents:n.library&&"numComponents"in n.library&&n.library.numComponents||0,numStateGroups:n.library&&"numStateGroups"in n.library&&n.library.numStateGroups||0,numStyles:n.library?.numStyles??0,libraryHierarchyPaths:i})})},870769:(e,r,n)=>{n.d(r,{$N:()=>e_,$j:()=>eE,A0:()=>eT,Av:()=>es,Bt:()=>eD,CG:()=>tG,Cj:()=>tU,Dg:()=>ed,E2:()=>tH,ET:()=>ts,El:()=>e7,FS:()=>tj,Fl:()=>tY,G$:()=>tM,GA:()=>ex,Gg:()=>e6,Gj:()=>t1,Gp:()=>tp,HF:()=>ei,HK:()=>eh,Hb:()=>tk,IW:()=>eu,J1:()=>e4,Jc:()=>en,KQ:()=>eY,LB:()=>eZ,LC:()=>tE,LI:()=>tB,LT:()=>t$,LX:()=>eG,Lk:()=>eV,MA:()=>tz,MF:()=>eo,Mb:()=>e1,Mj:()=>eO,Mw:()=>t3,NW:()=>ty,NY:()=>tW,QO:()=>tv,QT:()=>eC,Q_:()=>t8,Qb:()=>ey,RQ:()=>tf,T4:()=>tq,UB:()=>e8,VJ:()=>el,VO:()=>tF,Ve:()=>e5,WV:()=>th,X0:()=>eb,X7:()=>ec,Ys:()=>e2,_B:()=>tb,_Q:()=>tD,aD:()=>er,ad:()=>tK,ah:()=>tQ,bd:()=>tN,bp:()=>t_,cU:()=>tr,dx:()=>tV,eD:()=>t2,eS:()=>tc,f0:()=>tZ,f2:()=>ti,fc:()=>ek,gA:()=>eH,gi:()=>tR,gy:()=>tP,iP:()=>em,i_:()=>eX,iw:()=>e9,kG:()=>tw,kw:()=>tA,lG:()=>tS,lg:()=>ea,nJ:()=>t9,nn:()=>t7,oH:()=>tC,og:()=>ew,ov:()=>to,pD:()=>t5,pq:()=>ta,r9:()=>tO,rC:()=>e$,rt:()=>eS,sv:()=>t4,td:()=>td,th:()=>eg,ti:()=>ev,uH:()=>tm,uJ:()=>eK,uN:()=>tX,v2:()=>tJ,vu:()=>ef,w$:()=>t0,w3:()=>eR,w8:()=>eJ,wn:()=>eP,yh:()=>ep,zE:()=>tg});var i=n(848318),a=n(716544),o=n(425642),s=n(445777),l=n(551316),c=n(992277),d=n(781131),u=n(741419),p=n(573446);n(206651);var m=n(157907),h=n(39773),_=n(508242),g=n(260986),f=n.n(g),E=n(579020),y=n(6819),b=n(921494),v=n(195507),T=n(373112),I=n(502255),S=n(940398),w=n(896966),A=n(431118),C=n(757033),N=n(963376),L=n(442313),O=n(983504),R=n(503813),P=n(204810),D=n(833480),M=n(884060),k=n(193607),F=n(144072),x=n(341550),U=n(323075),B=n(574146),V=n(79563),G=n(561162),H=n(931516),K=n(807024),W=n(983230),z=n(212965),$=n(985951),Y=n(369600),j=n(87089),q=n(228716),X=n(376780),Z=n(997894),J=n(478182),Q=n(196584),ee=n(264917),et=n(162371),er=(e=>(e.CURRENT="current",e.ALL="all",e))(er||{});let en=i.createContext(null);function ei(e){return e===H.E8.CURRENT||e===H.E8.CHANGED||e===H.E8.DELETED}function ea(e){return e===H.E8.NEW||e===H.E8.CHANGED||e===H.E8.DELETED}function eo(e){switch(e.type){case H.PW.COMPONENT:return{type:e.type,key:e.component_key,version:e.content_hash};case H.PW.STATE_GROUP:return{type:e.type,key:e.key,version:e.version};case H.PW.STYLE:return{type:e.type,key:e.key,version:e.content_hash};case H.PW.VARIABLE_SET:case H.PW.VARIABLE:case H.PW.MODULE:return{type:e.type,key:e.key,version:e.version};case H.PW.RESPONSIVE_SET:case H.PW.CODE_COMPONENT:if("LOCAL"===e.subscriptionStatus)return{type:e.type,key:e.keyForPublish,version:e.version};return{type:e.type,key:e.key,version:e.version};case H.PW.MANAGED_STRING:return{type:e.type,key:e.keyForPublish,version:e.version};default:(0,s.xb)(e,`Unknown type ${e?.type}`)}}function es(e){let{key:r}=eo(e);return(0,s.KF)(void 0!==r,"Asset had no key",{asset:e}),r}function el(e){switch(e.type){case H.PW.CODE_COMPONENT:case H.PW.RESPONSIVE_SET:return"LIBRARY"===e.subscriptionStatus?e.sourceLibraryKey:null;case H.PW.COMPONENT:case H.PW.STATE_GROUP:case H.PW.STYLE:case H.PW.VARIABLE:case H.PW.VARIABLE_SET:case H.PW.MODULE:case H.PW.MANAGED_STRING:return e.library_key}}function ec(e){return e.map(es)}function ed(e){return eo(e).version}function eu(e){return!e.isShown||e.isCreating?null:e.style.isLocal?null:e.style}function ep(e,r,n){for(let n of Object.values(r))if("loaded"===n.status&&n.data.key===e)return n.data;for(let r of Object.values(n))if(r.key===e)return r;return null}function em(e,r){let n=Object.create(null);if(!r||!r.library_key)return n;let i=(0,p.l)(r.library_key),a=r.team_id||H.Yu,o=e[a]?.[i]??Object.create(null);for(let e in o)null==o[e].unpublished_at&&(n[e]=o[e]);return n}function eh(e,r){return r?eg(e)[r]??{}:{}}function e_(e,r){return Object.values(eh(e,r))}function eg(e){let r={};for(let n of Object.values(e))for(let[e,i]of Object.entries(n))r[(0,p.l)(e)]=i;return r}function ef(e){let r=[];return ey(e,(e,n,i,a)=>{r.push(a)}),r}function eE(e){let r=[];for(let n of Object.keys(e))for(let i of Object.values(e[(0,p.l)(n)]??{}))r.push(i);return r}function ey(e,r){for(let[n,i]of Object.entries(e))for(let[e,a]of Object.entries(i)){let i=(0,p.l)(e);for(let[e,o]of Object.entries(a))r(n,i,e,o)}}function eb(e){return Object.keys(e).map(r=>e[r]).filter(e=>!e.deletedFromSceneGraph)}function ev(e,r){let n=[];for(let i in e){let a=e[i];a.style_type!==r||a.deletedFromSceneGraph||n.push(a)}return n}function eT(e,r,n,i){let a=[];for(let o of Object.keys(r)){let s=(0,p.l)(o);if(eF(e.defaultPublished,n,s,i)){let e=r[s]??{};a.push(...Object.values(e))}}return a}let eI=new Set;async function eS(e){let r=new Map((e=e.filter(e=>e.canvas_url&&!B.Eo.hasKeyInCache((0,$.P)(e.canvas_url).url)&&!eI.has(e.key))).map(e=>[e.key,e.canvas_url])),n=e.map(e=>e.key);if(n.forEach(e=>eI.add(e)),(0,m.k)().ds_file_proxy_for_style_assets)await Promise.all(n.map(e=>B.Eo.getCanvas({canvas_url:r.get(e)})));else{if(0===n.length)return;try{let e=await C.Ay.post("/style/canvases",{style_keys:n});for(let[n,i]of Object.entries(e.data.meta.urls))C.Ay.crossOriginGetAny(i,null,{responseType:"arraybuffer"}).then(({data:e})=>{let i=r.get((0,d.n3)(n));if(i){let r=(0,$.P)(i).url;B.Eo.putCanvas(r,e)}eI.delete((0,d.n3)(n))}).catch(()=>{eI.delete((0,d.n3)(n))})}catch(e){n.forEach(e=>eI.delete(e))}}}let ew=["TEXT","FILL","EFFECT","GRID"],eA=(e,r)=>{let n=r?1:2;switch(e){case"TEXT":return(0,L.t)("design_systems.styles.text_style",{numStyles:n});case"FILL":return(0,L.t)("design_systems.styles.color_style",{numStyles:n});case"EFFECT":return(0,L.t)("design_systems.styles.effect_style",{numStyles:n});case"GRID":return(0,L.t)("design_systems.styles.grid_style",{numStyles:n});case"EXPORT":return(0,L.t)("design_systems.styles.export_style");case"STROKE":return(0,L.t)("design_systems.styles.stroke_style");default:return(0,E.sx)("Unknown style type",{styleType:e}),(0,L.t)("design_systems.styles.styles",{numStyles:n})}};function eC(e){return eA(e,!1)}function eN(e,r,n){return r in e?{design:!!e[r]?.design,figjam:!!e[r]?.figjam,slides:!!e[r]?.slides,subscriptionType:n,subscriptionId:e[r]?.subscriptionId}:{design:null,figjam:null,slides:null,subscriptionType:null}}let eL=e=>null!==e.design&&null!==e.figjam&&null!==e.slides;function eO(e){let r=(0,h.md)(z.GO),n=function(e){let r=(0,z.Nn)();return i.useMemo(()=>e?r?(0,v.gB)(eN(r,e,ee.Qh.COMMUNITY)):(0,v.Xm)():(0,v.gB)({design:!1,figjam:!1,slides:!1,subscriptionType:null}),[e,r])}(e);return i.useMemo(()=>{if(!e)return(0,v.gB)({design:!1,figjam:!1,slides:!1,subscriptionType:null});if("loaded"!==r.status)return r;if("loaded"!==n.status)return n;let i=eN(r.data,e,ee.Qh.ORGANIZATION);return eL(i)?(0,v.gB)(i):n},[e,r,n])}function eR(e,r){let n=(0,h.md)((0,z.pD)(r)),a=eO(e);return i.useMemo(()=>{if(!e)return(0,v.gB)({design:!1,figjam:!1,slides:!1,subscriptionType:null});if("loaded"!==n.status)return n;if("loaded"!==a.status)return a;let r=eN(n.data,e,ee.Qh.WORKSPACE);return eL(r)?(0,v.gB)(r):a},[e,n,a])}function eP(e,r){let n=(0,h.md)((0,z.Lr)(r)),a=eR(e,r);return i.useMemo(()=>{if(!e||!r)return(0,v.gB)({design:!1,figjam:!1,slides:!1,subscriptionType:null});if("loaded"!==n.status)return n;if("loaded"!==a.status)return a;let i=eN(n.data,e,ee.Qh.TEAM);return eL(i)?(0,v.gB)(i):a},[e,n,a,r])}function eD(e){let r=(0,h.md)(z.zK),n=eO(e);return i.useMemo(()=>{if(!e)return(0,v.gB)({design:!1,figjam:!1,slides:!1,subscriptionType:null});if("loaded"!==r.status)return r;if("loaded"!==n.status)return n;let i=eN(r.data,e,ee.Qh.USER);return eL(i)?(0,v.gB)(i):n},[e,r,n])}let eM=(e,r)=>(0,O.$)(e.key)===r||!!e.source_file_key&&(0,O.$)(e.source_file_key)===r;function ek(){let e=(0,Y.q5)(),r=(0,a.d4)(e=>e.library),n=(0,ee.He)();return i.useCallback(i=>!!e&&eF(r.defaultPublished,{key:e.key,team_id:e.teamId,editor_type:e.editorType,source_file_key:e.sourceFileKey},i,n),[e,r.defaultPublished,n])}function eF(e,r,n,i){return!(!r||!n||eM(r,n))&&(!!td(e,n)||i.has(n))}function ex(e,r,n,i,a,o){if(n.length)return!0;for(let n of i){let i;let s=a[n];if(s&&(i="library_key"in s?s.library_key:"loaded"===s.status&&s.data.library_key)&&eF(e.defaultPublished,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},i,o))return!0}return!1}let eU=(e,r)=>e.style_type===r.style_type?0:ew.indexOf(e.style_type)<ew.indexOf(r.style_type)?-1:1,eB=(e,r)=>-(0,T.Ez)(e.sort_position||"",r.sort_position||"");function eV(e,r){let n=eU(e,r);return 0===n?eB(e,r):n}function eG(e){e.sort(eB)}function eH(e,r){let n=e=>e&&e.toLowerCase?e.toLowerCase():"",i=e.containing_frame||{},a=r.containing_frame||{};return i.pageId!==a.pageId?n(i.pageName)<n(a.pageName)?-1:1:i.nodeId!==a.nodeId?n(i.name)<n(a.name)?-1:1:n(e.name)<n(r.name)?-1:1}function eK(e){let r=[...e];return eG(r),{stylesByPrefix:r.reduce((e,r)=>{let n=(0,V.In)(r.name);return e[n]=e[n]||[],e[n].push(r),e},Object.create(null)),sortedPrefixes:(0,K.wM)(r)}}let eW=!0;function ez(e,r){if(!e||!r)return!0;for(let n in e){if(!(n in r))return!0;let i=e[n],a=r[n];for(let e in i)if(i[e]!==a[e])return!0;for(let e in a)if(!(e in i))return!0}for(let n in r)if(!(n in e))return!0;return!1}function e$(e,r,n,i,a,o,s,l,c,d){let u=Object.create(null),p=0;for(let m in r.forEach(r=>{let c=r.nodeId,m=i[c];o[c]=e0(a[c]),u[c]=e(m,n[c],r,s,l,d);let h=u[c];h.status===H.E8.NEW&&h.type===H.PW.COMPONENT&&(p+=1)}),i)if(!(m in u)){let e=a[m];e&&e.url&&(0,B.qv)(e.url);let r=i[m];if(r.type===H.PW.COMPONENT||r.type===H.PW.STATE_GROUP){let e=(r.type,H.PW.COMPONENT,r);e.old_key&&c.add(e.node_id)}}for(let r in n)r in u||(o[r]=e0(a[r]),u[r]=e(i[r],n[r],null,s,l,d));return{newLocal:u,numNewComponents:p}}function eY(e){let r=e.getState();if(r.versionHistory.activeId&&r.versionHistory.activeId!==et.V_||!r.mirror?.sceneGraph)return;let n=(0,U.d1)(r),i=n?n.key:"",a=n?.library_key?(0,p.l)(n.library_key):(0,p.l)(""),o=new Set,s={},{newLocal:l,numNewComponents:c}=e$(eX,r.library.publishableSymbols,r.library.openFilePublished__LIVEGRAPH.components,r.library.local.components,r.library.local.thumbnails,s,i,a,o,H.PW.COMPONENT),{newLocal:d}=e$(eZ,r.library.publishableStateGroups,r.library.openFilePublished__LIVEGRAPH.stateGroups,r.library.local.stateGroups,r.library.local.thumbnails,s,i,a,o,H.PW.STATE_GROUP),{newLocal:u}=e$(eJ,r.library.publishableStyles,r.library.openFilePublished__LIVEGRAPH.styles,r.library.local.styles,r.library.local.thumbnails,s,i,a,o,H.PW.STYLE),{newLocal:h}=e$(eQ,r.library.publishableModules,r.library.openFilePublished__LIVEGRAPH.modules,r.library.local.modules,r.library.local.thumbnails,s,i,a,o,H.PW.MODULE);if(ez(r.library.local.components,l)&&e.dispatch(k.I0({local:l,type:H.PW.COMPONENT})),ez(r.library.local.stateGroups,d)&&e.dispatch(k.I0({local:d,type:H.PW.STATE_GROUP})),ez(r.library.local.styles,u)&&e.dispatch(k.I0({local:u,type:H.PW.STYLE})),ez(r.library.local.modules,h)&&(0,m.k)().dse_module_publish&&e.dispatch(k.I0({local:h,type:H.PW.MODULE})),function(e,r){if(!e&&!r)return!1;if(!e||!r||Object.keys(e).length!==Object.keys(r).length)return!0;for(let n in e)if(!r[n]||e[n].url!==r[n].url||e[n].content_hash!==r[n].content_hash)return!0;return!1}(r.library.local.thumbnails,s)&&e.dispatch(F.xp({thumbnails:s})),c>0&&eW&&((0,N.YQ)({id:"Parsed first components"}),eW=!1),o.size>0){let n=r.notifications.filter(e=>e.type===D._.MOVE_COMPONENTS_PROMPT);if(n.length>0){let r=n[0].type===D._.MOVE_COMPONENTS_PROMPT&&n[0].movableItemIds;r&&(0,S.Bq)(r,o)&&e.dispatch(P.$.dequeue({type:D._.MOVE_COMPONENTS_PROMPT}))}}}let ej="Generating a local library item that is neither in the library nor in the scene graph. Why.",eq=(e,r,n,i,a,o)=>{var s;if(!n){if(r)return{...r,status:H.E8.DELETED,deletedFromSceneGraph:!0};throw Error(ej)}let l=r&&null==r.unpublished_at,c=!!n.isPublishable,d=H.E8.NOT_STAGED;l&&!c?d=H.E8.DELETED:!l&&c?d=H.E8.NEW:l||c||(d=H.E8.NOT_STAGED);let{description:u,description_rt:p}=(s=n.description,{description:n.descriptionPlain??"",description_rt:s??""});return{node_id:n.nodeId,name:n.name,description:u,description_rt:p,file_key:i,file_key_source:R.Ps.LOCAL_FILE,library_key:a,isPublishable:c,deletedFromSceneGraph:!1,meta:e?e.meta:void 0,isLocal:!0,status:d,type:o,thumbnail_url:r&&r.thumbnail_url||void 0}};function eX(e,r,n,i,a){let o={...eq(e,r,n,i,a,H.PW.COMPONENT),type:H.PW.COMPONENT,height:n?.height,width:n?.width,x:n?.x,y:n?.y,componentPropDefError:n?.componentPropDefError,containing_frame:n?.containingFrame||r?.containing_frame||void 0,component_key:r?.component_key||void 0,content_hash:n?.versionHash||r?.content_hash||void 0,userFacingVersion:n?.userFacingVersion??d.F7.INVALID,old_key:n?.oldKey||void 0};if(!r)return o;let s=null==r.unpublished_at,l=!!n?.isPublishable;return s&&l&&(r&&r.content_hash===o.content_hash&&!t8(r.containing_frame,n?.containingFrame)&&t5(r.name,n?.name)&&t5(r.description,o.description)?o.status=H.E8.CURRENT:o.status=H.E8.CHANGED),o}function eZ(e,r,n,i,a){let o=eq(e,r,n,i,a,H.PW.STATE_GROUP);if(!r){if(!n)throw Error(ej);return{...o,type:H.PW.STATE_GROUP,version:n.versionHash,userFacingVersion:n.userFacingVersion,containing_frame:n.containingFrame,width:n.width,height:n.height,stateGroupError:n.stateGroupError,componentPropDefError:n.componentPropDefError,fill_color:n.fill_color,default_state_key:n.default_state_key,old_key:n.oldKey||void 0}}let s={...o,type:H.PW.STATE_GROUP,version:n?.versionHash||r.version,userFacingVersion:n?.userFacingVersion||d.Rf.INVALID,containing_frame:n?.containingFrame||r.containing_frame,width:n?.width||r.min_node_width,height:n?.height||r.min_node_height,key:r.key||void 0,stateGroupError:n?.stateGroupError||u.bwI.NONE,componentPropDefError:n?.componentPropDefError||u.uXg.NONE,fill_color:n?.fill_color||r?.fill_color,default_state_key:n?.default_state_key||r?.default_state_key,old_key:n?.oldKey||void 0},l=null==r.unpublished_at,c=!!n?.isPublishable;return l&&c&&(r.version===s.version&&!t8(r.containing_frame,n?.containingFrame)&&t5(r.name,n?.name)&&t5(r.description,s.description)?s.status=H.E8.CURRENT:s.status=H.E8.CHANGED),s}function eJ(e,r,n,i,a){let o=eq(e,r,n,i,a,H.PW.STYLE),s=r&&null==r.unpublished_at,l=!!n?.isPublishable,c=!1;if(s&&l&&(r&&r.content_hash===n?.versionHash&&t5(r.name,n?.name)&&t5(r.description,o.description)?t5(r.sort_position,n?.sortPosition)?o.status=H.E8.CURRENT:(o.status=H.E8.CHANGED,c=!0):o.status=H.E8.CHANGED),n)return{...o,type:H.PW.STYLE,key:n.styleKey,style_type:n.styleType,is_soft_deleted:n.isSoftDeleted,sort_position:n.sortPosition,content_hash:n.versionHash,userFacingVersion:n.userFacingVersion,hasOnlyBeenReordered:c,old_key:n.oldKey||void 0};if(r)return{...o,type:H.PW.STYLE,key:r.key,style_type:r.style_type,is_soft_deleted:!0,sort_position:r.sort_position,content_hash:r.content_hash,userFacingVersion:r.userFacingVersion,hasOnlyBeenReordered:c};throw Error(ej)}function eQ(e,r,n,i,a){let o=eq(e,r,n,i,a,H.PW.MODULE);if(!r){if(!n)throw Error(ej);return{...o,type:H.PW.MODULE,moduleSource:n.moduleSource,height:n.height,width:n.width,x:n.x,y:n.y,containing_frame:n.containingFrame,version:n.versionHash,userFacingVersion:n.userFacingVersion,old_key:n.oldKey||void 0}}let s={...o,type:H.PW.MODULE,moduleSource:n?.moduleSource||r.moduleSource,height:n?.height||r.height,width:n?.width||r.width,x:n?.x,y:n?.y,containing_frame:n?.containingFrame||r.containing_frame||void 0,version:n?.versionHash||r.version,userFacingVersion:n?.userFacingVersion||d.Pg.INVALID,old_key:n?.oldKey||void 0,key:r.key},l=r&&null==r.unpublished_at,c=!!n?.isPublishable;return l&&c&&(r.version===s.version&&!t8(r.containing_frame,n?.containingFrame)&&t5(r.name,n?.name)&&t5(r.description,s.description)?s.status=H.E8.CURRENT:s.status=H.E8.CHANGED),s}function e0(e){return{kind:e&&e.kind||void 0,url:e&&e.url||void 0,content_hash:e&&e.content_hash||void 0}}function e1(e){return`GET_PUBLISHED_COMPONENTS_FOR_${e}`}let e2=new Set;function e4(e){for(let r of e2)e(x.yH({key:r}))}let e3=new Set;function e7(e,r){return e3.has(e)||e3.has(r)}function e5(e){e3.add(e)}function e8(){e3.clear()}let e9=e=>`GET_DEFAULT_LIBRARIES_FOR_${e}`;function e6(e,r){let n={};return r.forEach(e=>{if(e.containing_frame?.containingStateGroup?.nodeId){let r=e.containing_frame?.containingStateGroup?.nodeId;n[r]||(n[r]=[]),n[r].push(e.name)}}),e.map(e=>({...e,stateNames:n[e.node_id]}))}let te=new Set,tt=(0,R.fv)();async function tr(e,r=[],n,i,a,o,s){if(!r.length)return{usedStylesByFileKey:{},usedStylesByLibraryKey:{}};let l={};for(let n of r){let r=e.get(n);r&&r.styleKeyForPublish&&0!==u.glU.getNumUsagesOfStyle(r.styleKeyForPublish,!0)&&(l[r.styleKeyForPublish]=n)}let c=Object.keys(l).map(d.n3),m=await Z.M4.fetch(J._x.UnpublishedStylesQuery({styleKeys:c,orgId:a})),h=f()([...m,...Object.values(n).filter(e=>e.key in l)],e=>e.key),_=new Set(h.map(e=>e.key)),g=c.filter(e=>e&&!_.has((0,d.n3)(e))),[E,y]=await Promise.all([Z.M4.fetch(J.qE.MissingStyleKeysQuery({styleKeys:g})),Z.M4.fetch(J.qE.MissingStyleKeyToLibraryKeyQuery({styleKeys:g}))]);o&&(delete E[o.fileKey],delete y[o.libraryKey]);let b=[],v={},T={};for(let e of h){let r=tt(e),n=e.library_key,a=v[r]??=[],o=T[n]??=[];a.push(e),o.push(e),i[n]||te.has(n)||(te.add(n),b.push(n))}for(let[r,n]of Object.entries(E)){let i=v[r]??=[];for(let r of n){let n=l[r],a=n?e.get(n):null;a&&i.push({type:H.PW.STYLE,name:a.name,key:r,thumbnail_url:tn(r,a.styleVersionHash),canvas_url:tn(r,a.styleVersionHash),content_hash:a.styleVersionHash||void 0,userFacingVersion:(0,d.IA)(a.userFacingVersion),node_id:a.guid,isLocal:!1,style_type:a.styleType,library_key:a.sourceLibraryKey})}}for(let[r,n]of Object.entries(y)){let i=(0,p.l)(r),a=T[i]??=[];for(let r of n){let n=l[r]&&e.get(l[r]);n&&a.push({type:H.PW.STYLE,name:n.name,key:r,thumbnail_url:tn(r,n.styleVersionHash),canvas_url:tn(r,n.styleVersionHash),content_hash:n.styleVersionHash||void 0,userFacingVersion:(0,d.IA)(n.userFacingVersion),node_id:n.guid,isLocal:!1,style_type:n.styleType,library_key:n.sourceLibraryKey})}}return await ti(b,s),{usedStylesByFileKey:v,usedStylesByLibraryKey:T}}function tn(e,r){return`/style/${e}/thumbnail?ver=${r}`}async function ti(e,r){if(e.length>0){let i=[];async function n(e){try{let n=await C.Ay.post("/api/files/batch",{library_keys:e});n.data.meta||(0,w.x1)("designSystems","Unexpected empty API response",{data:JSON.stringify(n.data??null),numFiles:e.length,status:n.status}),r(M.uo({files:n.data.meta.files,subscribeToRealtime:!0}))}catch(e){(0,I.$D)(c.e.DESIGN_SYSTEMS_EDITOR,e)}}for(let r=0;r<e.length;r+=200){let a=e.slice(r,r+200);i.push(n(a))}await Promise.all(i)}}async function ta(e,r,n){if(0===r.length)return[];let{styles:i,files:a}=(await C.Ay.post("/api/styles",{style_keys:r,org_id:n})).data.meta;return e(M.uo({files:a,subscribeToRealtime:!0})),i}function to(e,r=[],n=[],i,a,o,s=!1){let l={},c=r.concat(n),p=eg(i.components),m=eg(i.stateGroups),h=[];for(let r of c){let n=e.get(r);if(!n)continue;let i=n.sourceLibraryKey,o=n.publishID;if(!o||!i)continue;m[i]||p[i]||te.has(i)||(te.add(i),h.push(i));let c=n.isStateGroup,_=c?n.sharedStateGroupVersion:n.sharedSymbolVersion,g=c?n.stateGroupKey:n.componentKey,f=(c?m[i]??{}:p[i]??{})[o];if(f?.type===H.PW.COMPONENT){let e=f.containing_frame?.containingStateGroup?.nodeId;if(e){let r=m[i];f=r?.[e],c=!0}}if(f)l[es(f)]=f;else if(c){if(!g||l[g]||!n.reversedChildrenGuids.some(r=>{let n=e.get(r)?.componentKey;return n&&!l[n]}))continue;let i=u.glU.getDefaultStateForLocalStateGroup(r),s=e.get(i),[c,p]=s?[s.size.x,s.size.y]:[0,0];l[g]={type:H.PW.STATE_GROUP,name:n.name,library_key:n.sourceLibraryKey,key:g,thumbnail_url:`/state_group/${g}/thumbnail?ver=${_}&fv=${a}`,canvas_url:`/state_group/${g}/canvas?ver=${_}&fv=${a}`,node_id:o||"",isLocal:!1,version:_||d.Rf.INVALID,userFacingVersion:(0,d.Rf)(n.userFacingVersion),containing_frame:{},min_node_width:p,min_node_height:c,default_state_key:""}}else{if(!g||l[g]||n.isState&&!s||null===a)continue;l[g]={type:H.PW.COMPONENT,name:n.name,library_key:n.sourceLibraryKey,component_key:g,thumbnail_url:`/component/${g}/thumbnail?ver=${_}&fv=${a}`,canvas_url:`/component/${g}/canvas?ver=${_}&fv=${a}`,node_id:o||"",content_hash:n.sharedSymbolVersion||void 0,userFacingVersion:(0,d.F7)(n.userFacingVersion),isLocal:!1,min_node_height:n.size.x,min_node_width:n.size.y}}}return ti(h,o),Object.values(l)}function ts(e,r){return new Set(to(e.mirror.sceneGraph,(0,Q.C9)(e),(0,Q.jf)(e),e.library.publishedByLibraryKey,e.fileVersion,r).map(e=>es(e)))}let tl=(e,r,n,i,a,o)=>to(e,r,n,i,a,o,!0).reduce((e,r)=>(r.type===H.PW.COMPONENT?r.component_key&&(e[r.component_key]=r):e[r.key]=r,e),Object.create(null));function tc(e){let r=(0,a.wA)(),{library:n,sceneGraph:o,fileVersion:s,subscribedComponents:l,subscribedStateGroups:c,subscribedComponentsOnCurrentPage:d,subscribedStateGroupsOnCurrentPage:u}=(0,b.R)(e=>({library:e.library,sceneGraph:e.mirror.sceneGraph,fileVersion:e.fileVersion,subscribedComponents:(0,Q.C9)(e),subscribedStateGroups:(0,Q.jf)(e),subscribedComponentsOnCurrentPage:(0,Q.J5)(e),subscribedStateGroupsOnCurrentPage:(0,Q.EY)(e)})),[p,m]="current"===e?[d,u]:[l,c];return i.useMemo(()=>tl(o,p,m,n.publishedByLibraryKey,s,r),[o,p,m,n.publishedByLibraryKey,s,r])}function td(e,r){let n=e.libraryKeys.includes(r),i=h.zl.get(W.e3).has(r);return!!n||!!i}let tu=(0,_.xx)(e=>{let r={},n=e.local.styles;for(let e in n){let i=n[e];r[i.key]=i}return r});function tp(e,r,n){let i=tu(n)[e];if(i)return{kind:H.AT.LOCAL,value:i};let a=n.used__LIVEGRAPH.styles[e];return a?.status==="loaded"?{kind:H.AT.LIBRARY,value:a.data}:r&&r.length?{kind:H.AT.DANGLING,value:{key:e,node_id:r[0]}}:void 0}function tm(e,r){if(!e)return"";if(e.kind!==H.AT.DANGLING)return e.value.name;{let n=r.get(e.value.node_id);return n?n.name:""}}function th(e){let r={};for(let n in e){let i=e[n];i.containing_frame?.containingStateGroup&&(r[n]={...i})}return r}function t_(e,r,n,i){let a=r?i[r]:null;if(!a||!e)return null;let o=a[e];return o?o[n]:null}function tg(e){let r=e.type===H.PW.STATE_GROUP&&!!(e.stateGroupError&&e.stateGroupError!==u.bwI.TOO_MANY_STATES_ERROR);return!!(e.componentPropDefError&&(e.componentPropDefError===u.uXg.CONFLICTING_NAMES_ERROR||e.componentPropDefError===u.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR||e.componentPropDefError===u.uXg.UNUSED_DEF_ERROR)||r)}function tf(e){return e.variableSetError!==u.HG$.NONE}let tE=()=>{},ty=new Promise(e=>{tE=e}),tb=()=>{},tv=new Promise(e=>{tb=e}),tT=()=>{},tI=new Promise(e=>{tT=e}),tS=e=>({callback:tT,promise:tI,resetPromise:tL,loadingKey:`GET_USED_COMPONENTS_STATE_GROUPS_FOR_${e.getState().openFile?.key}`}),tw=()=>{},tA=new Promise(e=>{tw=e}),tC=new Promise(e=>{});function tN(){tE(),tb(),tw(),ty=new Promise(e=>{tE=e}),tv=new Promise(e=>{tb=e}),tA=new Promise(e=>{tw=e}),tL()}function tL(){tT(),tI=new Promise(e=>{tT=e})}function tO(e,r,n){return e.team_id===n?-1:r.team_id===n?1:(e.team_name||"").localeCompare(r.team_name||"")}function tR(e,r,n){return e.sort((e,i)=>{var a;let o=(a=n?.groupByFolders,e.team_id!==i.team_id?tO(e,i,r):a&&e.file.folder_id!==i.file.folder_id?e.folder_name<i.folder_name?-1:1:(e.library_file_name||"").localeCompare(i.library_file_name||""));return n?.isDescending?o:-o})}function tP(e,r,n,i){return e.sort((e,a)=>{var o,s,l,c,d;let u=(o=e,s=a,l=r,c=n,d=i?.groupByFolders,o.team_id!==s.team_id?o.team_id===l?-1:s.team_id===l?1:(o.team_name||"").localeCompare(s.team_name||""):d&&o.folder_id!==s.folder_id?(c[o.folder_id]?.path??"")<(c[s.folder_id]?.path??"")?-1:1:(o.library_name||"").localeCompare(s.library_name||""));return i?.isDescending?u:-u})}function tD(e,r,n){let i;let a=e.node_id,o=r[a]||{},l=o.url||null;switch(e.type){case H.PW.COMPONENT:case H.PW.STYLE:i=e.content_hash;break;case H.PW.VARIABLE:case H.PW.VARIABLE_SET:case H.PW.STATE_GROUP:case H.PW.MODULE:case H.PW.RESPONSIVE_SET:case H.PW.CODE_COMPONENT:case H.PW.MANAGED_STRING:i=e.version;break;default:(0,s.xb)(e)}return(n||o.content_hash!==i||!(0,B.OM)(l))&&(e.type===H.PW.COMPONENT||e.type===H.PW.STATE_GROUP||e.type===H.PW.MODULE||e.type===H.PW.RESPONSIVE_SET||e.type===H.PW.CODE_COMPONENT?l=(0,B.r2)(a):e.type===H.PW.STYLE?l=(0,G.fP)(e)?(0,B.jh)():(0,B.aV)(a,e.style_type):e.type===H.PW.VARIABLE||e.type===H.PW.VARIABLE_SET||e.type===H.PW.MANAGED_STRING?l=(0,B.jh)():(0,s.xb)(e)),l}function tM({numProductComponents:e,numStyles:r,numVariables:n,numVariableCollections:i}){let a=r>0?(0,L.t)("design_systems.libraries_modal.plural.num_style",{numStyles:r}):null,s=e>0?(0,L.t)("design_systems.libraries_modal.plural.num_component",{numComponents:e}):null,l=n>0?(0,L.t)("design_systems.libraries_modal.plural.num_variables",{numVariables:n}):null,c=0===n&&i>0?(0,L.t)("design_systems.libraries_modal.plural.variable_collections",{numVariableCollections:i}):null,d=(0,o.WI)([s,a,l,c]);return 0===d.length?(0,L.t)("design_systems.libraries_modal.no_components_styles_variables"):(0,A.Yx)(d,"unit")}let tk=e=>e!==H.E8.DELETED&&e!==H.E8.NOT_STAGED;function tF(e,r,n,i){let a=r[e];if(!a)return null;let o=ef(n).find(e=>e.type===H.PW.COMPONENT?e.component_key===a:e.key===a),s="another file";if(!o)return s;let l=i[o.library_key];return l?l.name:s}function tU(e,r,n){let i=e.reduce((n,i)=>(r[i]?n[i]=r[i]:(0,s.KF)(!1,"Expected nodeIdsToMove to be a subset of movableNodeIdToOldKey",{nodeIdsToMove:e,movableNodeIdToOldKey:r}),n),Object.create(null));for(let e of n){let n=e.containing_frame?.containingStateGroup?.nodeId,a=r[e.node_id];if(!n||!a)continue;let o=!!r[n];i[n]||!o?i[e.node_id]=a:i[e.node_id]&&delete i[e.node_id]}return{moveRemappings:i,movableItemsToPublishAsNew:new Set(Object.keys(r).filter(e=>!i[e]))}}function tB(e){return e.isStateGroup||"SYMBOL"===e.type&&!e.isState||e.isCodeComponent}function tV(e){return H.YJ.includes(e.type)}function tG(e){return e.isLocal?u.Egt.getAssetKeyForPublish(e.node_id):es(e)}function tH(e){return e.containing_frame?.containingStateGroup?.nodeId??null}function tK(e){return!!tH(e)}function tW(e,r,n,i){let a;if(!e)return;let o=r.get(e);if(o&&o.containingStateGroupId&&(o=r.get(o.containingStateGroupId)),o){if(o.isSubscribedAsset){let e=o.componentKey??o.stateGroupKey;e&&(a=i?.[e])}else a=n?.[o.guid];return a}}function tz(e,r){function n(e){return e.toLowerCase()}let i=n(e.name),a=n(r.name);return i<a?-1:i>a?1:0}function t$(e){switch(e){case H.jg.THIRTY_DAYS:return(0,L.t)("design_systems.libraries_modal.30_days");case H.jg.SIXTY_DAYS:return(0,L.t)("design_systems.libraries_modal.60_days");case H.jg.NINETY_DAYS:return(0,L.t)("design_systems.libraries_modal.90_days");case H.jg.YEAR:return(0,L.t)("design_systems.libraries_modal.year");default:(0,s.xb)(e)}}function tY(e){return!!((0,m.k)().dse_templates_proto&&e.description?.startsWith("Figma.TemporaryIsTemplate"))}function tj(e){return!!((0,m.k)().dse_module_publish&&"MODULE"===e.type)}function tq(e,r){return(null!==e.design||null!==e.figjam||null!==e.slides)&&(!!e.design||!!e.figjam||!!e.slides)&&(!!e.design&&!r.designSubscribed||!!e.figjam&&!r.figjamSubscribed||!!e.slides&&!r.slidesSubscribed)}function tX(e,r){return e?(r||(r=tQ(y.D.getState().library.publishedByLibraryKey.components)),r[e]?.library_key??null):null}function tZ(e,r){return e?(r||(r=tQ(y.D.getState().library.publishedByLibraryKey.stateGroups)),r[e]?.library_key??null):null}function tJ(e){let r={};return Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(i=>{Object.keys(e[n][i]).forEach(a=>{r[i]=r[i]||{},r[i][a]=e[n][i][a]})})}),r}function tQ(e){let r={};return ey(e,(e,n,i,a)=>{r[es(a)]=a}),r}function t0(e){let r=(0,a.wA)(),n=i.useMemo(()=>(0,l.s)(()=>{e&&e.value.node_id&&r(F.rb({styleNodeId:e.value.node_id,styleKind:e.kind}))}),[r,e]);i.useEffect(n)}function t1(e){switch(e.type){case H.PW.CODE_COMPONENT:case H.PW.RESPONSIVE_SET:return"LIBRARY"===e.subscriptionStatus?`${e.sourceLibraryKey}:${e.assetId}`:`${e.library_key}:${e.node_id}`;default:return`${e.library_key}:${e.node_id}`}}function t2(e){return(0,q.ag)(e.openFile,e.currentUserOrgId)}function t4(){let e=(0,q.LH)(),r=(0,a.d4)(e=>e.orgById);return(0,j.td)(e,r)}function t3(e){let r=(0,ee.je)();return i.useMemo(()=>{if(e&&"loaded"===r.status)return r.data?.find(r=>r.libraryKey===e)?.id},[e,r.data,r.status])}function t7(e){return e===X.pk.ORG||e===X.pk.WORKSPACE}function t5(e,r){return!e&&!r||e===r}function t8(e,r){let n=e?e.nodeId:void 0,i=e?e.name:void 0,a=e?e.backgroundColor:void 0,o=e?e.pageId:void 0,s=r?r.nodeId:void 0,l=r?r.name:void 0,c=r?r.backgroundColor:void 0,d=r?r.pageId:void 0;return(n!==s||i!==l||a!==c||!!o||!d)&&!(null==e&&null==r||null!=e&&null!=r&&t5(e.nodeId,r.nodeId)&&t5(e.name,r.name)&&t5(e.backgroundColor,r.backgroundColor)&&t5(e.pageName,r.pageName)&&t5(e.pageId,r.pageId)&&function(e,r){if(null==e&&null==r)return!0;if(null==e||null==r)return!1;for(let n of["nodeId","name"])if(!t5(e[n],r[n]))return!1;return!0}(e.containingStateGroup,r.containingStateGroup))}function t9(e,r){return!e&&!r||!!e&&!!r&&e.nodeId==r.nodeId}},621816:(e,r,n)=>{n.d(r,{V:()=>_,e:()=>h});var i=n(848318),a=n(988520),o=n(573446),s=n(157907),l=n(430285),c=n(239910),d=n.n(c),u=n(493554),p=n(896966),m=n(635547);function h(e,{enabled:r=!0}={}){let n=(0,u.Rs)(m.o27,{libraryKey:e},{enabled:r});return i.useMemo(()=>n.transform(g),[n])}function _(e,{enabled:r=!0}={}){let n=i.useMemo(()=>e.map(e=>({libraryKey:e})),[e]),o=(0,u.p)(m.o27,n,{enabled:r}),s=i.useRef(new Set([]));return i.useMemo(()=>l.Qw.all(o.map(e=>e.result)).transform(e=>{let r=e.map(e=>g(e,s.current)).filter(a.Vq);return d()(r,e=>e.libraryKey)}),[o])}function g(e,r){if(!e.libraryKeyToFile)return null;let{file:n,hubFile:i,libraryKey:a}=e.libraryKeyToFile,l=(0,o.l)(a);return i?.currentHubFileVersion?{libraryKey:l,isHubFile:!0,name:i.currentHubFileVersion.name,thumbnailUrl:i.thumbnailUrl}:n?{libraryKey:l,isHubFile:!1,name:n.name,thumbnailUrl:n.thumbnailUrl,thumbnailUrlOverride:n.thumbnailUrlOverride,thumbnailGuid:n.thumbnailGuid}:(r?.has(a)||(e.libraryKeyToFile&&(0,s.k)().dse_lk_library_metadata_sentry&&(0,p.x1)("designSystems","Unexpectedly failed to access library by key",{libraryKey:a},{reportAsSentryError:!0}),r?.add(a)),null)}},405888:(e,r,n)=>{n.d(r,{Ow:()=>j,QB:()=>W,Wg:()=>z,YG:()=>K,dO:()=>V,u2:()=>q,vz:()=>B});var i=n(445777),a=n(573446),o=n(39773),s=n(946678),l=n.n(s),c=n(579020),d=n(6819),u=n(579463),p=n(808471),m=n(71358),h=n(8374),_=n(193607),g=n(354054),f=n(235441),E=n(481540),y=n(323075),b=n(627855),v=n(574146),T=n(906531),I=n(342431),S=n(870769),w=n(928001),A=n(793954),C=n(241917),N=n(931516),L=n(630479),O=n(240207),R=n(277253),P=n(730505),D=n(919699),M=n(473450),k=n(53818),F=n(790790),x=n(550697),U=n(881491);let B=[{name:"name",weight:.6},{name:"stateNames",weight:.4},{name:"containing_frame.name",weight:.1},{name:"containing_frame.pageName",weight:.1},{name:"description",weight:.05}],V={threshold:.3,tokenize:!0,shouldSort:!0},G=new A.KH({keys:B,...V});class H extends x.a{constructor(){super(...arguments),this.lastUpdatedQuery=(0,p.PN)()?0:Date.now(),this.expSearchUnpublishedAssetsEnabled=void 0,this.initSources=e=>{let r=e.getState(),n=(0,y.d1)(r);n&&((e,i)=>{let a=[],o=new Set,s=e=>{for(let r of e){let e=(0,T.V)(r);e&&o.has(e)||(e&&o.add(e),a.push({...r}))}};s((0,S.X0)(i)),r.library.assetsPanelSearch.shouldSearchDefaultLibraries&&(s((0,S.A0)(r.library,(0,v.cO)(r.library.defaultPublished.componentsByLibraryKey),n,this.subscribedLibraryKeys)),s((0,S.A0)(r.library,r.library.defaultPublished.stateGroupsByLibraryKey,n,this.subscribedLibraryKeys)));let l=Object.values((0,S.WV)(r.library.local.components)),c=Object.values(r.library.local.stateGroups);s((0,S.Gg)(c,l)),e.set(a)})(G,(0,v.Jl)(r.library.local.components))},this.computeLocalResultsPromise=async(e,r,n)=>{let i=(0,F.B0)(),a=(0,U.dm)(G,e),o=(await a).filter(e=>(0,b.Oo)(e,r)),{elapsedTime:s,backgrounded:l}=i();return c.az.trackDefinedEvent("asset_search.compute_local_results_time",{elapsedTime:s,searchSessionId:n??"",backgrounded:l}),{normalizedSearchResults:o,unsubscribedSearchResults:[]}},this.computeFileResultsPromise=async(e,r,n,i,a,o,s,l,c,d)=>await (0,F.Og)(e,r,n,i,a,o,s,l,c,d),this.computeAllResultsPromise=async(e,r,n,i,a,o,s,l,c,d,u,p,m,h,_,g=!1,f,E)=>await (0,F.BG)(e,r,n,i,a,o,s,l,c,d,u,G,this.subscribedLibraryKeys,p,m,h,_,g,f,E),this.computeResultsReduxSearchTypeHelper=async(e,r,n,s,l,p,m,h,_,g,f)=>{let y;let b=(0,F.B0)(),v=d.D.getState(),T=(0,S.ET)(v,d.D.dispatch),{elapsedTime:I,backgrounded:w}=b();c.az.trackDefinedEvent("asset_search.compute_results_redux.get_used_product_component_keys_time",{elapsedTime:I,backgrounded:w,searchSessionId:l??""});let A=o.zl.get(P.lj).length>0,C=await (0,u.hW)("exp_search_asset_server_reranking_v4"),N=C.get("is_sinatra",!1),L=C.get("ml_rerank",!1);switch(r?.type){case R.I.LOCAL:return this.computeLocalResultsPromise(e,v.openFile?.key,l);case R.I.FILE:y=this.computeFileResultsPromise(e,r.libraryKey,v.selectedView?.view==="fullscreen"&&v.selectedView?.fileKey||v.openFile?.key,l,N,L,v.openFile?.editorType?.toString(),m,p,f);break;case R.I.RECENT:case void 0:case R.I.ALL:y=this.computeAllResultsPromise(e,n,v.fileVersion,v.openFile?.parentOrgId??null,v.openFile,v.selectedView,s,l,T,N,L,m,p,_,g,A,f,!1);break;case R.I.SITE_KIT:return Promise.resolve({normalizedSearchResults:[],unsubscribedSearchResults:[]});default:return(0,i.xb)(r,"unknown search type")}let O=await (0,M.Ci)(!0),D=await y,k=(0,F.B0)();await K.trackTopKResults({results:D.normalizedSearchResults,sessionId:l??"",queryId:m??"",entryPoint:p??"",queryType:"text",aiResultsEnabled:O,productType:(0,E.pi)({editorType:v.openFile?.editorType}),libraryKey:(0,a.l)(v.openFile?.libraryKey??""),fileKey:v.openFile?.key,query:e,searchType:r?.type??R.I.ALL});let{elapsedTime:x,backgrounded:U}=k();return c.az.trackDefinedEvent("asset_search.compute_results_redux.track_top_k_results_time",{elapsedTime:x,backgrounded:U,searchSessionId:l??""}),y},this.trackTopKResults=async e=>{let{results:r,sessionId:n,queryId:i,entryPoint:a,queryType:o,aiResultsEnabled:s,productType:l,libraryKey:d,fileKey:p,query:m,searchType:h}=e,_=(await (0,u.w0)("max_asset_search_results_to_log")).get("count",20);r.slice(0,_).forEach((e,r)=>{let u=e.library_key,_=(0,F.ko)(u,d,this.subscribedLibraryKeys),g=e.server_score||e.ai_score||e.lexical_score?"server":"fuse";c.az.trackDefinedEvent("asset_search.top_k_results",{sessionId:n,queryId:i,entryPoint:a,fileKey:p,position:r,aiResultsEnabled:s,assetKey:q(e),assetLibraryKey:u,libraryType:_,assetType:e.type,queryType:o,isInSubscribedLibrary:!!u&&this.subscribedLibraryKeys.has(u),productType:l,query:m,source:g,score:"score"in e?e.score:void 0,scoreFuse:e.fuse_score??void 0,scoreServer:e.server_score??void 0,searchType:h})})},this.computeResultsRedux=async e=>{let r=(0,F.B0)(),n=e.getState(),i=(0,L.Ei)(),a=o.zl.get(I.qp),s=n.library.assetsPanelSearch.query,d=n.openFile?.key,u=n.openFile?.teamId,p=n.openFile?.parentOrgId;if(!s||!d){e.dispatch(_.xI()),e.dispatch((0,g.eK)({queryId:null}));return}e.dispatch((0,g.eK)({queryId:i}));let h=n.library.assetsPanelSearch.searchOptions;if(h&&!(0,F.eu)(h)){e.dispatch(_.xI()),e.dispatch((0,g.eK)({queryId:null}));return}let E=await (0,M.Ci)(!0),y=(0,f.XE)(n.selectedView)===C.nT.Design;c.az.trackDefinedEvent("assets_panel.component_search",{query:s,inDesignEditor:y,searchSessionId:n.search.sessionId??"",assetsPanelVersion:n.library.assetsPanelSearch.versionForTracking,fileKey:d,fileTeamId:u??void 0,fileOrgId:p??void 0,queryId:i}),n.search.sessionId&&e.dispatch(m.pY());let v=Date.now();if(v<=this.lastUpdatedQuery)return;let T=await this.computeResultsReduxSearchTypeHelper(s,h,y,a,n.search.sessionId,n.library.assetsPanelSearch.entryPoint,i),S={aiResultsEnabled:E,query:s,queryId:i,assetsPanelVersion:n.library.assetsPanelSearch.versionForTracking,entryPoint:n.library.assetsPanelSearch.entryPoint,fileKey:d,fileOrgId:p??void 0,fileTeamId:u??void 0,selectedViewFileKey:"fullscreen"===n.selectedView.view&&n.selectedView.fileKey?n.selectedView.fileKey:void 0,totalShownResults:T.normalizedSearchResults.length,tier:(0,U.Al)()};if(h?.type===R.I.LOCAL){e.dispatch(_.Y1(T)),e.dispatch((0,g.w2)({sessionId:n.search.sessionId,query:s,queryId:i})),null===n.search.sessionId&&(0,c.sx)("asset_search.missing_session_id",{previousSessionId:n.search.lastLoadedQuery.sessionId,entryPoint:n.library.assetsPanelSearch.entryPoint},{forwardToDatadog:!0});let{elapsedTime:a,backgrounded:o}=r(),l={elapsedTime:a,backgrounded:o,localSearchResultCount:T.normalizedSearchResults.length,searchType:h?.type};c.az.trackDefinedEvent("assets_panel.search_time",{...S,...l,searchSessionId:n.search.sessionId??""}),c.az.trackDefinedEvent("asset_search.query_result",{...S,...l,sessionId:n.search.sessionId??"",componentSuggestionSessionId:(0,O.r6)()}),this.lastUpdatedQuery=v;return}if(s!==e.getState().library.assetsPanelSearch.query)return;e.dispatch(_.Y1(T)),e.dispatch((0,g.w2)({sessionId:n.search.sessionId,query:s,queryId:n.search.queryId}));let[w,A]=l()(T.normalizedSearchResults,e=>(0,b.Oo)(e,d));null===n.search.sessionId&&(0,c.sx)("asset_search.missing_session_id",{previousSessionId:n.search.lastLoadedQuery.sessionId,entryPoint:n.library.assetsPanelSearch.entryPoint},{forwardToDatadog:!0});let{elapsedTime:N,backgrounded:P}=r(),D={elapsedTime:N,backgrounded:P,localSearchResultCount:w.length,subscribedSearchResultCount:A.length,unsubscribedSearchResultsCount:T.unsubscribedSearchResults.length,searchType:h?.type??R.I.ALL},k={},x=n.selectedView;if("fullscreen"===x.view&&(x.editorType===C.nT.Sites||x.editorType===C.nT.Figmake)&&h?.type&&[R.I.ALL,R.I.SITE_KIT].includes(h?.type)){let e=o.zl.get(X);k={siteKitSearchResultsCount:e,totalShownResults:S.totalShownResults+e}}c.az.trackDefinedEvent("assets_panel.search_time",{...S,...D,...k,searchSessionId:n.search.sessionId??""}),c.az.trackDefinedEvent("asset_search.query_result",{...S,...D,...k,sessionId:n.search.sessionId??"",componentSuggestionSessionId:(0,O.r6)()}),this.lastUpdatedQuery=v}}}let K=new H,W=(0,h.nF)((e,{ignoreLoadingState:r=!1}={})=>{e.getState().search.sessionId||e.dispatch(m.Dy({entryPoint:"editor:assets_panel"})),z(e.getState(),{ignoreLoadingState:r})&&K.runComputeResultWithSourceChange(e)}),z=(0,k.n)((e,{ignoreLoadingState:r=!1}={})=>r?!!(e.openFile&&e.fileVersion):!!(e.openFile&&e.fileVersion&&(0,w.D2)(e.loadingState,(0,D.yD)(e.openFile.key)))),$=e=>e.type===N.PW.COMPONENT,Y=e=>e.type===N.PW.STATE_GROUP;function j(e){return e.filter(e=>$(e)||Y(e))}function q(e){if((0,N.Do)(e))return"LOCAL"===e.subscriptionStatus?e.keyForPublish:e.key;switch(e.type){case N.PW.COMPONENT:return e.component_key;case N.PW.STATE_GROUP:case N.PW.MODULE:return e.key}}let X=(0,o.eU)(0)},790790:(e,r,n)=>{n.d(r,{B0:()=>_,BG:()=>p,Og:()=>u,PS:()=>m,UQ:()=>c,eu:()=>d,ko:()=>h}),n(946678);var i=n(579020),a=n(389191);n(931516);var o=n(277253),s=n(473450),l=n(881491);let c=e=>e.library.assetsPanelSearch;function d(e){return e.type===o.I.ALL||e.type===o.I.LOCAL||e.type===o.I.FILE||e.type===o.I.SITE_KIT}async function u(e,r,n,a,c,d,u,p,m,h){let g=_(),f=await (0,l.KK)(e,r,n??"",a??"",c,d,u,p,m,h),E=await (0,s.Ci)(!0),y=(0,l.AG)([],f,e,o.I.FILE,E,c),{elapsedTime:b,backgrounded:v}=g();return i.az.trackDefinedEvent("asset_search.get_search_results_for_file_time",{elapsedTime:b,searchSessionId:a??"",backgrounded:v}),{normalizedSearchResults:y,unsubscribedSearchResults:[]}}async function p(e,r,n,a,o,c,d,u,h,g,f,E,y,b,v,T,I,S=!1,w,A){let C=_(),N=(0,l.dm)(E,e),L=new Set(y);void 0!==I&&L.add(I);let O=(0,l.ik)(e,n,a,o,c,d,L,u??"",h,g,f,b,v,w,A),R=(0,l.hH)(e,L,r,h,S,u??""),P=(0,s.Ci)(!0),[D,{subscribedSearchResults:M,unsubscribedSearchResults:k},{communitySearchResults:F,unsubscribedCommunitySearchResults:x},U]=await Promise.all([N,O,R,P]),{elapsedTime:B,backgrounded:V}=C();i.az.trackDefinedEvent("asset_search.get_search_results_for_all_promise_time",{elapsedTime:B,searchSessionId:u??"",backgrounded:V});let G=_(),H=m(D,M,k,F,x,e,g,T??!1,U),{elapsedTime:K,backgrounded:W}=G();return i.az.trackDefinedEvent("asset_search.combine_fuse_and_server_results_time",{elapsedTime:K,searchSessionId:u??"",backgrounded:W}),H}function m(e,r,n,i,a,s,c,d,u){let p=e,m=r;d?(m=(0,l.Yl)(r,e,i||[]),p=e.filter(e=>!e.server_score&&!e.ai_score&&!e.lexical_score||(e.score=e.lexical_score||e.ai_score||e.server_score||e.score,m.push(e),!1))):p=(0,l.Yl)(e,r,i||[]);let h=(0,l.AG)(p,m,s,o.I.ALL,u,c),_=(0,l.Yl)(i||[],h),g=(0,l.Yl)(n,p),f=(0,l.Yl)(a||[],g);return{normalizedSearchResults:[...h,..._],unsubscribedSearchResults:[...g,...f]}}function h(e,r,n){return r===e?"LOCAL":n.has(e)?"SUBSCRIBED":"UNSUBSCRIBED"}function _(){let e=new a.rw;return()=>{let r;return e.stop(e=>{r=e},{skipIfIdle:!1}),{elapsedTime:r,backgrounded:e.backgrounded||e.offlined}}}},881491:(e,r,n)=>{n.d(r,{AG:()=>V,Al:()=>H,Cc:()=>N,K4:()=>L,KK:()=>G,UR:()=>A,Yl:()=>B,cu:()=>D,d5:()=>k,dm:()=>x,f$:()=>W,hH:()=>M,ik:()=>C,lR:()=>F});var i=n(573446),a=n(39773),o=n(946678),s=n.n(o),l=n(241899),c=n.n(l),d=n(579020),u=n(6819),p=n(389191),m=n(579463),h=n(627855),_=n(486934),g=n(967867),f=n(747863),E=n(870769),y=n(561162),b=n(376780),v=n(997894),T=n(492317),I=n(931516),S=n(101217),w=n(277253);let A=40;async function C(e,r,n,i,a,o,s,l,c,u,m,h,_,g,f=!1){let E=new p.rw,y=L(await N(e,r,n,i,a,s,l,u,m,h,_,g,f),i,o,s,c);return E.stop(e=>{d.az.trackDefinedEvent("asset_search.fetch_all_server_side_search_results_time",{elapsedTime:e,searchSessionId:l,backgrounded:E.backgrounded||E.offlined})}),y}async function N(e,r,n,a,o,s,l,c,p,m,h,_,g=!1){try{let d=a?.editorType===b._Y.WHITEBOARD,E=s.size<A,y=o?.view==="fullscreen"&&o?.fileKey||a?.key||"",v=a?.libraryKey?(0,i.l)(a?.libraryKey):null,T=new Set(s);g&&v&&T.add((0,i.l)(v));let{usedProductComponentsOnPage:I,usedProductComponentsFromUnsubscribedLibrary:w}=await D(u.D.getState(),s,v),C={query:e,openFileKey:y,fv:r||0,orgId:n||void 0,excludeAIResults:d,subscribedLibraryKeys:E?Array.from(T):void 0,searchSessionId:l,isUi3:f.nt.ui3.getValue(),productType:a?.editorType?.toString(),queryId:m,selectedItems:_,usedProductComponents:I,usedProductComponentsFromUnsubscribedLibrary:w,serverRerank:c,mlRerank:p,entryPoint:h,includeOnlySubscribed:g&&E,tier:H()};return(await S.$W.postComponents(C)).data.meta}catch(r){return d.az.trackDefinedEvent("assets_panel.server_search_for_all_components_failure",{query:e}),[]}}function L(e,r,n,i,a){let o=r&&((0,_.Kz)(r)?r.sourceFileKey:""),l=e.filter(e=>!(0,h.Oo)(e,o)&&e.library_key in n).map(e=>({...e,server_score:e.score})),[c,d]=s()(l,e=>i.has(e.library_key)||r?.libraryKey===e.library_key||a.has((0,E.Av)(e)));return{subscribedSearchResults:c,unsubscribedSearchResults:d}}function O(e,r,n){let i=e/2,a=Math.min(r.length,i),o=Math.min(n.length,i);return[...r.slice(0,a),...n.slice(0,o),...r.slice(a),...n.slice(o)].slice(0,e)}function R(e){let r=e.mirror.sceneGraph;return{components:e.library.subscribedSymbolsOnCurrentPage.filter(e=>{let n=r.get(e.nodeId);return!n?.containingStateGroupId}).map(e=>({key:e.key,type:I.PW.COMPONENT})),stateGroups:e.library.subscribedStateGroupsOnCurrentPage.map(e=>({key:e.key,type:I.PW.STATE_GROUP}))}}function P(e,r){let n=e=>new Set(e.map(e=>e.key)),i=(e,r)=>e.filter(e=>!r.has(e.key)),a=n(e),o=r.filter(e=>a.has(e.key)),s=n(o);return{itemsOverlapping:o,itemsOnPageFromSubscribedLib:i(e,s),itemsNotOnPageFromUnsubscribedLib:i(r,s)}}async function D(e,r,n){let{components:i,stateGroups:a}=R(e),{components:o,stateGroups:s}=function(e,r,n){let i=(0,E.ah)(n.library.publishedByLibraryKey.components),a=(0,E.ah)(n.library.publishedByLibraryKey.stateGroups),o=n.mirror.sceneGraph;return{components:n.library.subscribedSymbolsFromLoadedPages.filter(n=>{let a=o.get(n.nodeId),s=(0,E.uN)(n.key,i);return!a?.containingStateGroupId&&s&&!e.has(s)&&s!==r}).map(e=>({key:e.key,type:I.PW.COMPONENT})),stateGroups:n.library.subscribedStateGroupsFromLoadedPages.map(e=>({key:e.key,type:I.PW.STATE_GROUP})).filter(n=>{let i=(0,E.f0)(n.key,a);return i&&!e.has(i)&&i!==r})}}(r,n,e),{itemsOverlapping:l,itemsOnPageFromSubscribedLib:c,itemsNotOnPageFromUnsubscribedLib:d}=P(i,o),{itemsOverlapping:u,itemsOnPageFromSubscribedLib:p,itemsNotOnPageFromUnsubscribedLib:h}=P(a,s),_=(await (0,m.w0)("max_product_components_to_log")).get("count",1e3),g=(await (0,m.w0)("percent_used_product_components_on_page")).get("percent",.5),f=O(_,l,u),y=_-f.length,b=O(Math.max(Math.floor(g*y),y-d.length-h.length),c,p),v=O(_-(f=f.concat(b)).length,d,h);return{usedProductComponentsOnPage:f,usedProductComponentsFromUnsubscribedLibrary:v}}async function M(e,r,n,i,a=!1,o){let s=new p.rw,l=F(await k(e,n,a),r,i);return s.stop(e=>{d.az.trackDefinedEvent("asset_search.fetch_community_component_search_results_time",{elapsedTime:e,backgrounded:s.backgrounded||s.offlined,searchSessionId:o})}),l}async function k(e,r,n=!1){if(!r)return[];try{if(!a.zl.get(g.JB))return[];let{results:r}=(await S.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,S.in)([I.PW.COMPONENT,I.PW.STATE_GROUP]).join(","),includeVisualAssets:!!n||void 0})).data.meta;return r}catch(r){return d.az.trackDefinedEvent("assets_panel.search_for_components_from_community_libraries_error",{query:e}),[]}}function F(e,r,n){let[i,a]=s()(e,function(e){return!!n.has((0,E.Av)(e))||r.has(e.library_key)});return{communitySearchResults:i,unsubscribedCommunitySearchResults:a}}function x(e,r){let n=new p.rw,i=e.search(r).then(e=>e.map(e=>({...e.item,score:e.score,fuse_score:e.score})));return n.stop(e=>{d.az.trackDefinedEvent("asset_search.fuse_search_results_time",{elapsedTime:e,backgrounded:n.backgrounded||n.offlined})}),i}function U(e,r){let n=r.split(" ").filter(e=>e.length>2),i=e.name.toLowerCase().substring(e.name.lastIndexOf("/")+1);return n.length>0&&n.every(e=>i.includes(e.toLowerCase()))}function B(e,...r){let n={};r.forEach(e=>{e.forEach(e=>{n[(0,E.Av)(e)]=e})});let i=[];return e.forEach(e=>{let r=(0,E.Av)(e);r in n?(e.ai_score&&(n[r].ai_score=e.ai_score),e.lexical_score&&(n[r].lexical_score=e.lexical_score),e.server_score&&(n[r].server_score=e.server_score),e.fuse_score&&(n[r].fuse_score=e.fuse_score)):i.push(e)}),i}function V(e,r,n,i,a,o){if(0===r.length)return e;if(i===w.I.FILE&&!a)return r;let l=r;a&&!o&&(l=function(e,r){let n=e.filter(e=>e.lexical_score),[i,a]=s()(n,e=>U(e,r)),o=e.filter(e=>e.ai_score),l=Math.max(...i.map(e=>e.lexical_score)),c=Math.min(...i.map(e=>e.lexical_score)),d=Math.max(...a.map(e=>e.lexical_score)),u=Math.min(...a.map(e=>e.lexical_score)),p=Math.max(...o.map(e=>e.ai_score)),m=Math.min(...o.map(e=>e.ai_score));return e=(e=e.map(e=>{if(e.lexical_score){let n;return n=U(e,r)?l===c?1:.9+.09999999999999998*((e.lexical_score-c)/(l-c)):d===u?.89:.89*(e.lexical_score-u)/(d-u),{...e,score:n}}return e})).map(e=>{if(e.ai_score){let r=p===m?.89:(e.ai_score-m)/(p-m)*.89;return e.lexical_score&&(r=Math.max(r,e.score)),{...e,score:r}}return e})}(l,n));let c=Math.max(...l.map(e=>e.score));return[...e.map(e=>{let r=e.server_score||1-e.fuse_score,n=(1-e.score)*.95*c;return{...e,score:o?r:n}}),...l].sort((e,r)=>r.score-e.score)}async function G(e,r,n,i,a,o,s,l,c,p){try{let{components:d,stateGroups:h}=R(u.D.getState()),_=(await (0,m.w0)("max_product_components_to_log")).get("count",1e3),g={query:e,libraryKey:r,openFileKey:n,searchSessionId:i,isUi3:f.nt.ui3.getValue(),productType:s,queryId:l,selectedItems:p,usedProductComponents:O(_,d,h),serverRerank:a,mlRerank:o,entryPoint:c,tier:H()};return(await S.$W.postComponentsFromFile(g)).data.meta}catch(n){return d.az.trackDefinedEvent("assets_panel.server_search_for_file_failure",{query:e,libraryKey:r}),[]}}function H(){let e=a.zl.get((0,T.rQ)(!0));return e.data?.tier}v.M4.Query({fetch:async({query:e,libraryId:r,assetTypes:n})=>{let{results:i}=(await S.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,S.in)(n).join(","),hubFileIds:[r]}).catch(()=>({data:{meta:{results:[]}}}))).data.meta;return i},output:({data:e})=>e.map(y.aV),enabled:({query:e})=>null!=e&&e.trim().length>0});var K=(e=>(e.OPEN_FILE="OPEN_FILE",e.FILE_VERSION="FILE_VERSION",e.LOADING_STATE="LOADING_STATE",e))(K||{});function W(e){return e?c()(e,["key","libraryKey","fileRepoId","sourceFileKey","editorType","name","_name","parentOrgId"]):null}},126751:(e,r,n)=>{n.d(r,{u5:()=>o,vQ:()=>l});var i=n(772138);n(442313),n(701058);var a=n(965845);let o="originTab",s=[a.J7.BILLING];function l(e){let r=(0,i.K)(a.J7,e);if(r)return s.includes(r)?r:void 0}},32922:(e,r,n)=>{n.d(r,{EO:()=>a,XY:()=>o}),n(848318);var i=n(716544);n(425642),n(95650),n(280198),n(442313),n(494955),n(43482),n(87089),n(546246);let a=e=>`LICENSE_GROUP_GET_${e}`;function o(e){return(0,i.d4)(r=>{var n,i;return!!e&&(n=r.orgById[e],i=r.licenseGroups,!!n?.bigma_enabled&&(!!n?.license_groups_count||!!Object.keys(i).length))})}},376780:(e,r,n)=>{n.d(r,{Ag:()=>et,E9:()=>g,El:()=>W,FE:()=>l,GP:()=>O,G_:()=>D,Go:()=>eA,Il:()=>u,K:()=>q,KB:()=>ed,Lb:()=>eS,Lc:()=>d,Mr:()=>i,NW:()=>c,OL:()=>er,P4:()=>eT,P5:()=>eg,PQ:()=>M,PW:()=>a,Pn:()=>eo,Pu:()=>es,QK:()=>ec,Qh:()=>eE,Rc:()=>_,U0:()=>C,UX:()=>ee,Uu:()=>Y,XI:()=>eC,Xn:()=>Q,Zf:()=>eI,_5:()=>j,_D:()=>$,_Y:()=>w,bQ:()=>ei,bU:()=>K,bk:()=>A,bp:()=>eO,dQ:()=>Z,eD:()=>eb,h4:()=>en,h9:()=>h,hM:()=>X,hh:()=>eR,iS:()=>eN,iX:()=>J,kI:()=>ey,kU:()=>ef,o6:()=>I,pk:()=>R,sC:()=>ev,sm:()=>eu,tK:()=>S,ud:()=>s,un:()=>f,vt:()=>ep,wl:()=>ea,xw:()=>o,y4:()=>eL,zI:()=>H});var i=(e=>(e.FILE_SEEN="file_seen",e.DESIGN_FILE_SEEN="design_file_seen",e.WHITEBOARD_FILE_SEEN="whiteboard_file_seen",e.FILE_EDIT="file_edit",e.DESIGN_FILE_EDIT="design_file_edit",e.WHITEBOARD_FILE_EDIT="whiteboard_file_edit",e.DEV_MODE_FILE_SEEN="dev_mode_file_seen",e))(i||{}),a=(e=>(e.RESPONSIVE_SET="responsive_set",e.CONSTRAINED_TEMPLATE="constrained_template",e.CODE_COMPONENT="code_component",e))(a||{}),o=(e=>(e.INHERIT="INHERIT",e.NONE="NONE",e.OVERRIDE="OVERRIDE",e))(o||{}),s=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.COLLABORATOR="collaborator",e.DEVELOPER="developer",e.EXPERT="expert",e))(s||{}),l=(e=>(e.STANDALONE="standalone",e.BUNDLE="bundle",e.ADD_ON="add_on",e))(l||{}),c=(e=>(e.MONTH="month",e.YEAR="year",e))(c||{}),d=(e=>(e.ORGANIZATION="Organization",e.ENTERPRISE="Enterprise",e))(d||{}),u=(e=>(e.ORG="Org",e))(u||{}),p=(e=>(e.PENDING="Pending",e.ACTIVE="Active",e.EXPIRED="Expired",e.DEACTIVATED="Deactivated",e))(p||{}),m=(e=>(e.PLAN="plan",e.PRODUCT="product",e))(m||{}),h=(e=>(e.PUBLISHED_PLUGIN="published-plugin",e.FIRST_PARTY="first-party",e))(h||{}),_=(e=>(e.INHERIT="INHERIT",e.OVERRIDE="OVERRIDE",e))(_||{}),g=(e=>(e.DEFAULT="default",e.SRGB="srgb",e.DISPLAY_P3="display_p3",e))(g||{}),f=(e=>(e.CREATOR="creator",e.PUBLISHER="publisher",e))(f||{}),E=(e=>(e.PENDING="pending",e.SUCCEEDED="succeeded",e.CANCELED="canceled",e.REFUNDED="refunded",e.TRIALING="trialing",e.SUBSCRIPTION_PAYMENT_FAILED="subscription_payment_failed",e.INVOICE_FINALIZATION_FAILED="invoice_finalization_failed",e.DISPUTED="disputed",e))(E||{}),y=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.PROFILE="profile",e.WIDGET="widget",e))(y||{}),b=(e=>(e.MEMBERS="members",e.ALL_USERS="all_users",e))(b||{}),v=(e=>(e.ALLOW="ALLOW",e.DISABLE="DISABLE",e))(v||{}),T=(e=>(e.DESKTOP="desktop",e.IPAD="ipad",e))(T||{}),I=(e=>(e.STATUS_CHANGE="status_change",e))(I||{}),S=(e=>(e.PIXEL="PIXEL",e.SCALED="SCALED",e))(S||{}),w=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.SLIDES="slides",e.SITES="sites",e.COOPER="cooper",e.FIGMAKE="figmake",e))(w||{}),A=(e=>(e.FILE="file",e.PROTOTYPE="prototype",e.FOLDER="folder",e.TEAM="team",e.WORKSPACE="workspace",e))(A||{}),C=(e=>(e.COST_CENTER="costCenter",e.ORGANIZATION="organization",e.DIVISION="division",e.DEPARTMENT="department",e))(C||{}),N=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.EXTERNAL="external",e))(N||{}),L=(e=>(e.ALLOWED="allowed",e.MEMBERS_ONLY="members_only",e.BANNED="banned",e))(L||{}),O=(e=>(e.PRO_TRIAL="pro_trial",e.DOWNGRADED_ORG_TEAM="downgraded_org_team",e.PROMO_CODE="promo_code",e.ADMIN_OVERRIDE="admin_override",e))(O||{}),R=(e=>(e.ORG="Org",e.WORKSPACE="Workspace",e.TEAM="Team",e))(R||{}),P=(e=>(e.SELF_SELECTED="self",e.SELF_SELECTED_NOT_LISTED="not listed",e.SELF_SELECTED_DONT_KNOW="don't know",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e))(P||{}),D=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.SITES="sites",e))(D||{}),M=(e=>(e.ORG_VIEW="org_view",e.ORG_EDIT="org_edit",e.WORKSPACE_EDIT="workspace_edit",e.WORKSPACE_VIEW="workspace_view",e.VIEW="view",e.EDIT="edit",e.INHERIT="inherit",e.INVITE_ONLY="invite_only",e))(M||{}),k=(e=>(e.INCOMPLETE="incomplete",e.COMPLETE="complete",e))(k||{}),F=(e=>(e.INCOMPLETE="incomplete",e.COMPLETE="complete",e))(F||{}),x=(e=>(e.PENDING="pending",e.NEEDS_REVIEW="needs_review",e.REVIEW_REJECTED="review_rejected",e.REVIEW_ACCEPTED="review_accepted",e.AUTO_ACCEPTED="auto_accepted",e))(x||{}),U=(e=>(e.NOT_STARTED="not_started",e.MATCH="match",e.MISMATCH="mismatch",e))(U||{}),B=(e=>(e.APPROVED="approved",e.REJECTED="rejected",e.UNREVIEWED="unreviewed",e))(B||{}),V=(e=>(e.NOT_STARTED="not_started",e.AWAITING_BUILDS="awaiting_builds",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.FAILED="failed",e.CLOSED="closed",e))(V||{}),G=(e=>(e.FIGMA_FIRST_PARTY="figma_first_party",e.FIGMA_PARTNER="figma_partner",e.OFF_PLATFORM="off_platform",e.HAS_FREEMIUM_CODE="has_freemium_code",e))(G||{}),H=(e=>(e.BUILD="build",e.COMPLETED="completed",e.NONE="none",e))(H||{}),K=(e=>(e.PUBLIC="public",e.PRIVATE="private",e.SECRET="secret",e))(K||{}),W=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(W||{}),z=(e=>(e.IP_ALLOWLIST="ip_allowlist",e.NETWORK_ACCESS_RESTRICTION="network_access_restriction",e))(z||{}),$=(e=>(e.ADMIN="admin",e.MEMBER="member",e.GUEST="guest",e))($||{}),Y=(e=>(e.ROLE_UPGRADE="role_upgrade",e.INVITE_REDEEM="invite_redeem",e.ORG_INVITE_REDEEM="org_invite_redeem",e.INVITE_AUTOUPGRADE="invite_autoupgrade",e.RESOURCE_MOVED_TO_ORG="resource_moved_to_org",e.DRAFTS_SHARE="drafts_share",e.ACCESS_EDIT_LINK="access_edit_link",e.CREATE_TEAM="create_team",e.JOIN_TEAM="join_team",e.JOIN_TEAM_REQUEST="join_team_request",e.ADMIN_UPGRADE="admin_upgrade",e.SCIM="scim",e.FIGMA_ADMIN="figma_admin",e.DEPART_TEAM="depart_team",e.CREATE_FILE="create_file",e.EDIT_REQUEST_APPROVAL="edit_request_approval",e.EDIT_REQUEST_AUTO_APPROVAL="edit_request_auto_approval",e.RUN_PLUGIN="run_plugin",e.RESOURCE_MOVED_FROM_ORG_DRAFTS="resource_moved_from_org_drafts",e.DEFAULT_PAID_STATUS="default_paid_status",e.FJ_GA_REUPGRADE="fj_ga_reupgrade",e.EDIT_BUTTON="edit_button",e.EDIT_ACTION="edit_action",e.ACTIVE_EDIT_ACTION="active_edit_action",e.ORG_MERGE="org_merge",e.DEV_MODE_PRE_COMMIT_BETA_USE="dev_mode_pre_commit_beta_use",e.UNKNOWN="unknown",e.UNKNOWN_POPULATED_THROUGH_BACKFILL="unknown_populated_through_backfill",e.SCIM_RECOVERY="scim_recovery",e.ROLE_FALLBACK="role_fallback",e.PAID_STATUS_ON_ORG_CREATION="paid_status_on_org_creation",e.TEAM_ADDED_TO_ORG_THROUGH_FIGMA_ADMIN="team_added_to_org_through_figma_admin",e.SEAT_MANAGEMENT_AT_SELF_SERVE_CHECKOUT="seat_management_at_self_serve_checkout",e.DEV_MODE="dev_mode",e.SUPPORT_DRIVEN_ORG_MIGRATION="support_driven_org_migration",e.SUPPORT_DRIVEN_ORG_MERGE="support_driven_org_merge",e.SUPPORT_DRIVEN_TEAM_ADDITION="support_driven_team_addition",e))(Y||{}),j=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e.ORG="org",e))(j||{}),q=(e=>(e.FOLDER="Folder",e.WORKSPACE="Workspace",e))(q||{}),X=(e=>(e.UNPINNED="unpinned",e.PINNED="pinned",e))(X||{}),Z=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(Z||{}),J=(e=>(e.ORG="Org",e.TEAM="Team",e))(J||{}),Q=(e=>(e.ADMIN="admin",e.MEMBER="member",e.GUEST="guest",e))(Q||{}),ee=(e=>(e.INCOMPLETE="incomplete",e.ACTIVE="active",e.UNPAID="unpaid",e.SUSPENDED="suspended",e.SUSPENDED_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED="suspended_monthly_sub_editor_count_exceeded",e.DEACTIVATED="deactivated",e))(ee||{}),et=(e=>(e.STARTER="starter",e.STUDENT="student",e.PRO="pro",e.ORG="org",e.ENTERPRISE="enterprise",e))(et||{}),er=(e=>(e.ORG="organization",e.TEAM="team",e))(er||{}),en=(e=>(e.ORG_USER="org_user",e.TEAM_USER="team_user",e))(en||{}),ei=(e=>(e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e))(ei||{}),ea=(e=>(e.DEFAULT="default",e.INTERNAL="internal",e.CONFIG24="config24",e.APPLE_ALPHA="apple_alpha",e.GOOGLE_ALPHA="google_alpha",e))(ea||{}),eo=(e=>(e.FIGMA="figma",e.APPLE="apple",e.GOOGLE="google",e))(eo||{}),es=(e=>(e.ORG_VIEW="org_view",e.VIEW="view",e.INHERIT="inherit",e))(es||{}),el=(e=>(e.ACTIVE="active",e.DEACTIVATED="deactivated",e.EXPIRED="expired",e))(el||{}),ec=(e=>(e.TEST="test",e.FILE_DENY_CONNECTED_GUEST_CAN_MOVE="file_deny_connected_guest_can_move",e.FILE_REPO_DENY_CONNECTED_GUEST_CAN_MOVE="file_repo_deny_connected_guest_can_move",e.CONNECTED_FOLDER_DENY_CAN_TRASH_DESPITE_CAN_MANAGE_LIFECYCLE="connected_folder_deny_can_trash_despite_can_manage_lifecycle",e.PLAN_DENY_CAN_CONNECT_IF_AT_CONNECTION_LIMIT="plan_deny_can_connect_if_at_connection_limit",e.FOLDER_CREATE_SITE_FILE_DENY_K12_ORG="folder_create_site_file_deny_k12_org",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_K12_ORG="folder_create_figmake_file_deny_k12_org",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_STARTER_TEAM="folder_create_figmake_file_deny_starter_team",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_STUDENT_TEAM="folder_create_figmake_file_deny_student_team",e.FOLDER_CREATE_FIGMAKE_FILE_DENY_AI_DISABLED="folder_create_figmake_file_deny_ai_disabled",e.FILE_DENY_EDIT_SITE_FILE_K12_ORG="file_deny_edit_site_file_k12_org",e.FILE_DENY_EDIT_FIGMAKE_FILE_K12_ORG="file_deny_edit_figmake_file_k12_org",e.FILE_CREATE_SITE_FILE_DENY_SITES_DISABLED="file_create_site_file_deny_sites_disabled",e.FILE_DENY_EDIT_SITE_FILE_SITES_DISABLED="file_deny_edit_site_file_sites_disabled",e.FOLDER_CREATE_COOPER_FILE_DENY_COOPER_DISABLED="folder_create_cooper_file_deny_cooper_disabled",e.FILE_DENY_EDIT_COOPER_FILE_COOPER_DISABLED="file_deny_edit_cooper_file_cooper_disabled",e.FILE_CREATE_SITE_FILE_DENY_RESTRICTED_SITES_PLAN_USER="file_create_site_file_deny_restricted_sites_plan_user",e.FILE_DENY_EDIT_FIGMAKE_FILE_STARTER="file_deny_edit_figmake_file_starter",e.FILE_DENY_EDIT_FIGMAKE_FILE_STUDENT="file_deny_edit_figmake_file_student",e.FILE_DENY_EDIT_SITE_FILE_STARTER="file_deny_edit_site_file_starter",e))(ec||{}),ed=(e=>(e.BLOCKED="blocked",e.ORG_PRIVATE="org_private",e.PENDING_USER_VISUAL_COMPLIANCE="pending_user_visual_compliance",e.PENDING_3P_M10N_CHECK="pending_3p_m10n_check",e.PENDING_PUBLIC="pending_public",e.ORG_PRIVATE_PENDING_PUBLIC="org_private_pending_public",e.DELISTED="delisted",e.DELISTED_CREATOR_STRIPE_DISABLED="delisted_creator_stripe_disabled",e.APPROVED_PUBLIC="approved_public",e))(ed||{}),eu=(e=>(e.PENDING="pending",e.APPROVED="approved",e.DENIED="denied",e.REVOKED="revoked",e))(eu||{}),ep=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e))(ep||{}),em=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.COLLABORATOR="collaborator",e.DEVELOPER="developer",e.EXPERT="expert",e.VIEW="view",e))(em||{}),eh=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e.PROTOTYPE="prototype",e))(eh||{}),e_=(e=>(e.MIGRATION_NOT_NEEDED="migration_not_needed",e.MIGRATION_NEEDED="migration_needed",e.MIGRATED="migrated",e))(e_||{}),eg=(e=>(e.NONE="NONE",e.ACCEPTED="ACCEPTED",e.STARTED_ONBOARDING="STARTED_ONBOARDING",e.ENABLED="ENABLED",e.DISABLED="DISABLED",e))(eg||{}),ef=(e=>(e.STUDENT_TEAM_NULL="not_student_team",e.STUDENT_TEAM_CURRENT="current_student_team",e.STUDENT_TEAM_EXPIRED="expired_student_team",e))(ef||{}),eE=(e=>(e.OK="ok",e.GRACE_PERIOD="grace_period",e.PAST_DUE="past_due",e.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED="no_monthly_sub_editor_count_exceeded",e.INCOMPLETE="incomplete",e))(eE||{}),ey=(e=>(e.UNVERIFIED="unverified",e.VERIFIED="verified",e.PENDING="pending",e.UNAVAILABLE="unavailable",e))(ey||{}),eb=(e=>(e.TEAM_ACCESS_VIEW="team_view",e.TEAM_ACCESS_EDIT="team_edit",e.TEAM_ACCESS_DISABLED="team_access_disabled",e))(eb||{}),ev=(e=>(e.VIEW="view",e.EDIT="edit",e))(ev||{}),eT=(e=>(e.LOCKED="locked",e.EDITORS_LIMITED="editors_limited",e.PROJECTS_LIMITED="projects_limited",e.FILES_LIMITED="files_limited",e.PROJECTS_LIMITED_LEGACY="projects_limited_legacy",e.FILES_LIMITED_LEGACY="files_limited_legacy",e.WHITEBOARD_FILES_LIMITED="whiteboard_files_limited",e.WHITEBOARD_FILES_LIMITED_BETA="whiteboard_files_limited_beta",e.SLIDE_FILES_LIMITED="slide_files_limited",e.SLIDE_FILES_LIMITED_BETA="slide_files_limited_beta",e))(eT||{}),eI=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(eI||{}),eS=(e=>(e.SEATS_MODEL_BILLING_2025="seats_model_billing_2025",e))(eS||{}),ew=(e=>(e.FLAGGED="flagged",e.MIGRATING="migrating",e.PENDING_AUTO_VALIDATION="pending_auto_validation",e))(ew||{}),eA=(e=>(e.FOLDER="folder",e))(eA||{}),eC=(e=>(e.AUTO_APPROVED="auto_approved",e.AUTO_APPROVED_AVAILABLE_SEAT="auto_approved_available_seat",e.AUTO_APPROVED_EDU="auto_approved_edu",e.ADMIN_INITIATED="admin_initiated",e.FIGMA_ADMIN="figma_admin",e.MANUAL_APPROVED="manual_approved",e.MANUAL_APPROVED_NO_AVAILABLE_SEAT="manual_approved_no_available_seat",e.SCIM="scim",e))(eC||{}),eN=(e=>(e.VERIFIED="verified",e.UNVERIFIED="unverified",e.BLOCKED="blocked",e))(eN||{}),eL=(e=>(e.CANVAS="canvas",e.PROTOTYPE="prototype",e.WHITEBOARD="whiteboard",e.LIBRARY="library",e.SLIDE_TEMPLATE="slide_template",e.SITE_TEMPLATE="site_template",e.COOPER_TEMPLATE_FILE="cooper_template_file",e))(eL||{}),eO=(e=>(e.ADMIN="admin",e.MEMBER="member",e))(eO||{}),eR=(e=>(e.SELF_SELECTED="self",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e.SCIM_GROUP="scim_group",e))(eR||{})},635547:(e,r,n)=>{n.d(r,{$cq:()=>ti,$kt:()=>ea,AXx:()=>tl,AbW:()=>eY,Acj:()=>R,Aqu:()=>rU,BB3:()=>e4,BVX:()=>N,BXv:()=>f,B_E:()=>rS,BbB:()=>th,Bu2:()=>e8,CfA:()=>O,CrP:()=>x,Csd:()=>e5,D2i:()=>ef,DSh:()=>rL,DtB:()=>rN,DuV:()=>ry,EW:()=>r1,EZU:()=>tw,Ej3:()=>I,EmG:()=>ro,F$0:()=>ep,FBc:()=>t5,FHz:()=>ee,FWW:()=>t8,FqP:()=>tW,Fr3:()=>eQ,G0Y:()=>c,G9Z:()=>r7,GgD:()=>eC,GyZ:()=>rH,H1b:()=>rK,H2R:()=>Z,H5I:()=>rG,H6B:()=>e6,HSg:()=>tz,HdA:()=>eT,Hhe:()=>rd,I2e:()=>eX,ISl:()=>r5,IiJ:()=>tS,Ipg:()=>t_,J2w:()=>eb,JJY:()=>tJ,JM$:()=>r_,JRW:()=>tk,JS_:()=>rQ,J_J:()=>el,JgS:()=>tU,JuA:()=>tH,JvY:()=>eP,Jwp:()=>tj,KLE:()=>C,KiY:()=>tK,L1I:()=>eO,Lbw:()=>ta,Lew:()=>tp,Lom:()=>r0,Lqr:()=>rF,M5e:()=>eN,M7X:()=>M,M9I:()=>p,M9q:()=>tP,N63:()=>rm,N8H:()=>rP,NI1:()=>tQ,NSA:()=>eo,NqM:()=>rV,OCJ:()=>eE,OiG:()=>q,P0r:()=>F,P4:()=>H,P8Q:()=>ej,PG0:()=>eH,QD8:()=>ed,QEv:()=>r$,QrR:()=>T,Ra2:()=>rq,SMQ:()=>es,SWF:()=>tX,Sc8:()=>g,Sq1:()=>e3,Std:()=>tC,Stx:()=>eU,T0:()=>rp,TJi:()=>tV,TKM:()=>G,TNJ:()=>rM,Tej:()=>rj,Thl:()=>eJ,U8U:()=>t$,UAQ:()=>rg,UpR:()=>J,V15:()=>ra,VTr:()=>tB,Vny:()=>rb,WF4:()=>tN,WIM:()=>e7,WKb:()=>rs,WND:()=>Y,X$D:()=>rI,X9s:()=>ne,XGw:()=>er,XKS:()=>rD,XRH:()=>s,XRI:()=>ex,Xw7:()=>rn,Y9I:()=>ty,YOu:()=>eS,Yfd:()=>rc,Yh6:()=>K,Yrz:()=>eL,ZBn:()=>rl,ZzU:()=>ey,_iU:()=>v,a8q:()=>eG,aNI:()=>ek,aON:()=>r9,aRw:()=>e2,abL:()=>b,apG:()=>e0,bEy:()=>h,bUF:()=>rA,bUn:()=>nt,bel:()=>rx,bsh:()=>r2,c2_:()=>rT,cBJ:()=>eF,cQi:()=>ev,cfd:()=>rt,cmY:()=>r4,d0w:()=>eM,dA6:()=>eR,dDF:()=>ec,dTR:()=>ew,dq_:()=>tZ,dxg:()=>rX,eHy:()=>P,eSI:()=>t4,ehp:()=>tv,f19:()=>tu,ftA:()=>k,fy7:()=>tc,g0U:()=>rE,gDr:()=>_,gk5:()=>tb,gkf:()=>eh,grH:()=>tf,h3E:()=>tq,hCR:()=>rz,hbX:()=>rw,hj8:()=>S,hqi:()=>d,i1D:()=>r8,iAs:()=>tr,iJD:()=>W,iL6:()=>rv,iY3:()=>eA,ib2:()=>ei,imP:()=>rZ,jXq:()=>tg,jl4:()=>tL,jmg:()=>j,k$m:()=>eZ,kJx:()=>y,kQI:()=>rk,k_1:()=>tG,kdQ:()=>B,lrh:()=>r3,ly7:()=>e1,m0h:()=>eK,mCn:()=>e$,n8_:()=>eu,n8j:()=>eW,nD6:()=>m,nJE:()=>tO,nXJ:()=>tI,nn0:()=>eV,o27:()=>tn,o6H:()=>t0,o8f:()=>tD,o9k:()=>tm,oBY:()=>eI,oGE:()=>t1,oPM:()=>eg,oe:()=>tE,ohc:()=>tt,op7:()=>rr,oro:()=>D,pFu:()=>t2,qBf:()=>z,qNg:()=>ez,qRE:()=>et,qYc:()=>t9,qZS:()=>eB,qjT:()=>Q,qn8:()=>rR,rRb:()=>rh,rwE:()=>ri,s0Z:()=>E,s5h:()=>tA,s5n:()=>e9,sBg:()=>tY,sMZ:()=>rY,sMs:()=>em,saW:()=>r6,sdp:()=>t6,sn$:()=>eq,tIY:()=>td,tWm:()=>$,u3q:()=>tF,u6n:()=>to,uXs:()=>te,vE:()=>t3,vgO:()=>X,vhY:()=>tM,vnC:()=>re,vsj:()=>L,vtM:()=>tR,vvS:()=>rJ,w2r:()=>tT,wVD:()=>rf,wZi:()=>en,wj_:()=>U,wtK:()=>u,x8f:()=>t7,xSN:()=>A,yFE:()=>rC,yQw:()=>rO,yU5:()=>rB,yUR:()=>w,y_L:()=>rW,yf7:()=>eD,zCd:()=>e_,zkh:()=>ts,zqW:()=>V,zz3:()=>ru});var i=n(721571),a=n(429136);let o=new Set;function s(){return[...o]}function l(e,r,n){let s={_name:e,_argKeys:r,_hash:n,_data:null,_args:null};o.add(s);let l=null;return Object.assign(r=>({view:s,args:r,name:e,[i.rP]:void 0}),{...s,Query:(...e)=>(l||(l=(0,a.gc)(s)),l(...e)),_name:e})}let c=l("AccessibleFoldersV2",["orgId"],"59f640bd9eb74be946c5946cb9c7af6c558d2553b5a58b7f59e431bee4ee39b7"),d=l("ActiveFileUsersForFileView",["fileKey"],"768cab43ea3477df4fa1db3a25b51b7f6aa8b8f91205e41e2ffb4880c16e4376"),u=l("AddWorkspacePinnedFileView",["fileKey"],"1762fd923eb39c179eded848fd1f92cab34f32e56521f6cc4234f622095feab7"),p=l("AllowlistPluginsSectionView",["orgId"],"0937e424588471b45470cea9535a4ead965252a7ca29ee66e6fee246fc3cd6bf"),m=l("AppliedColorPaletteForFile",["fileKey"],"aaa92b09ffebd39a703272c21740dd39c2746197f5096a2bf3f34a7cac2248b8"),h=l("ApprovedLibrariesForOrgViewV2",["orgId"],"b99af2707ec541171a162036f37dcb936f78e1728a831387199ad95b318791bf"),_=l("ApprovedLibrariesForWorkspaceView",["workspaceId"],"6552920e298f34a3b7322962990db225ff8394d53dccd8869dc669db60e61a4f"),g=l("AutoRunPluginsView",["targetOrgId","targetUserId"],"89bba8315c16d184e051918223d8f5fbdfe9ba5d95fbad6fa24208827b9770f4"),f=l("BillingTrialForResource",["resourceId","resourceType"],"c1b16e47b9f97b468aea7d2d9e08f2d7bf3eb2c96fc07ad23eeff4edd863bf9b"),E=l("BlockConnectedFileMove",["fileKey"],"63021786780bc12af34c3630a99283e4379b7edcc3934a0c47235243718a7077"),y=l("BlockingPrototypeData",["fileKey"],"fedae2cad9ffe55336c1e09eb72284ab3c85678cc2ab99de6da9586ce7dc4082"),b=l("BlockingUserState",[],"42211fd2ccab68fbcff704930440f548b7ee07e8bace9d4c5cf8bb8296569fa0"),v=l("BranchOpenMergeRequest",["branchFileKey"],"2e391b1f947e9b20072e4a05a93622a653326397930ad3b9007013bdf6b64a2d"),T=l("BranchingPermissionsView",["fileKey"],"de926329a886b5ddfdfd67c4c328f3b83c3beb66b5ad52d6cac0aefcf4aa7b86"),I=l("BranchingSourceViewSidebarView",["branchKey"],"3e30a33946802d60062bc23736b8b7767192bcfb05549f5bae677ecb980dbbde"),S=l("ChurnFrictionPersonalizedModalView",["teamId"],"077420f20a35c52035097aa51b9573e9f58738d8a6433618d93775c0990aec6d"),w=l("CodeConnectForNodeLk",["instances","isCommunityLibrary","libraryKey","nodeId","openFileKey"],"feef091cc7682b3dc30fb5c442352bba00ea09ba1786f99383134dd3559ed04e"),A=l("CollectionFieldSchemaView",["id"],"cdb95e8e6419879277256af99cf990a59ceffe6cad545a525a41c9f1d499f162"),C=l("CommunityHubLikeForProfile",["hubFileId","pluginId","profileId"],"e7b1cd676e4b60ddadf01ff132eebb269291a7b440e3ac7858121a1b3aba1da3"),N=l("CommunityHubLikeForProfileFromResourceId",["profileId","resourceId"],"84e136e8449de50a856db49dcfcba37629e123d58526c18ad9278dbc7ceb80bf"),L=l("CommunityLibraryComponentsAndStateGroups",["hubFileId"],"f365ff60d2fdbe1bb2905abe89103f31011eda33e2af71403de38882c9e7bb36"),O=l("CommunityLibraryModules",["hubFileId"],"d0486bd3c9f3851a82bd67efa798ed909527a4e644ffbbb364dab357036562dd"),R=l("CommunityLibraryStyleData",["hubFileId"],"9126099cf5d26969a32cfef82df8fcab973b8a9844d3d44fe99a737dbaa7c2f7"),P=l("CommunityLibraryVariableCollectionDataWithVariables",["hubFileId"],"d8c697ab94689c9669dedd99655c1f4625840ce90de4adad0a65d3802ba74ccf"),D=l("CommunityPayment",["monetizedResourceMetadataId"],"d4ed25df6ed5142cc9479c6680b70af08788b6d4255d6a811de68be0679faddc"),M=l("CommunityPaymentsForRealtimeShim",[],"1366f230cc0e4dc015521524b4e198a4e90067b7df851b64f55f08f95d626bea"),k=l("ComponentAttribution",["key"],"a5e691a909658049a3b1bf65453e03fdf21bc5d99dfcf0081c6a31690810766d"),F=l("ComponentUpdatesForFile",["fileKey"],"a85c038b34923a0e1f050e7e7bd6fdd2b85fa7181cd4f407f34fd677a011ee50"),x=l("ComponentUpdatesForProject",["projectId"],"24eef379838bd05e43a2d53b617d423f4c211472810e8bf9f9ae9e3ad3716b74"),U=l("ComponentUpdatesForTeam",["teamId"],"2b85571652eb0a38d1ccbea3899dcadb576d0d296c3c9a63c9cc70021f8432a1"),B=l("ConfiguredUpgradeRequestModalView",["orgId","permission"],"b512c23324f0e30f360588f5d9d9e574725652e889c997a1879a3579c0582efd"),V=l("CurrentOrgBillingPeriodView",["orgId","userId"],"d243061354756b25f54772f2f3c05c6c08c4df724e801c401b887aad344b5005"),G=l("CurrentUserAssignedWorkspaceView",["orgId"],"b71bef59abd6e5ce766b977623eae73de44191f62f2e22773ea36ac7595b98b0"),H=l("CurrentUserInStudentPlusPlanView",[],"d67f174300205a6ac054ba3515219b3234f15aab289dbdb8a420772a783d5f5a"),K=l("CurrentUserIsMfaRequiredByMembershipOrgView",[],"fa4f6b62631cdd8a2ebc1a5f7a8b0753f1a26bcd3275072f499da4a66088619c"),W=l("CurrentWorkspaceView",["fileKey"],"71a3db6bb64d2e94bb914475a2e1d9ba4ed58b4ef9614578ceced5cb56a7c984"),z=l("DeleteWorkspacePinnedFileView",["pinnedFileId"],"f3ad94fa48f21d527e1582d2ecaa8fdcb16218d5470a3a879f1537bb503be24a"),$=l("DestinationProjectsForTeam",["teamId"],"040e0cec5137b357b00d4ced6e0f0c37b8d07ef67b71074ad0a456b2813f5e31"),Y=l("DevModeActivity",["fileKey","nodeId"],"b797b0d6f9e85042f0e50ac0d474970199bf82f95027c605ca98fa947ca88b6e"),j=l("DeviceTryFileView",["fileKey"],"57262db6a4c99d03c727ef6e8a734ac28b5bc6fb68fcf7f7134381d122629cdc"),q=l("EditButtonView",["fileKey","orgId"],"67b27fb9d7291c724ff001847f36f02d129ce9d6ac213fd24b459e02994b8d92"),X=l("EditWorkspacePinnedFileView",["pinnedFileId"],"ff61ac9ebd18f6fa8080ff43b1e0f232bad4eda2a4340d7b31bab25465134a7d"),Z=l("EduGracePeriodsForUser",["updatedAtTimestamp"],"41e2b08f041b6550406b58126ff133269214f733a89ee88949b271d2263b272c"),J=l("EduOffboardingData",[],"142e22b55e058172ed60177c7ba0d8053b7efa4a50d5eaf11ee7645b90a95707"),Q=l("FavoritesByResourceId",["orgId","resourceId","resourceType","teamId"],"f3e424689f1e12f5ce0b0a40942c230ec04f05977c960454b0ad161b119c7994"),ee=l("FeedPostWithDetails",["publicUuid"],"f4013e80d2857291d46921e8c88932f0d4f27a1e6389f2e8083c1c34795a6181"),et=l("FeedPostsByFileKey",["fileKey"],"1124bcf780616ccc8bbbb3b7a7abedaaf6c7f7a44da587a0383c0352a2497cce"),er=l("FileAccountTypeRequest",["key"],"f54c3466db6b89f475bf23112f0c06489aa65b494c529c0f49a2f11d1a472796"),en=l("FileBrowserRecentFilesView",[],"85cd0b387a5e79defaa4c1e0af8b84352b28269a2bb25f83f30e5ebab03d3c27"),ei=l("FileBrowserSearchBarData",["currentOrgId"],"386767aad56b079fccc0c7edb22ffc192d73383bd92f429f783bb0ae5e2b96e5"),ea=l("FileBrowserSidebarData",["currentOrgId","currentTeamId"],"9c412af5846469665b5ce5cff656fe76aa3d573b1cdcc95eb5431c6c735ca74f"),eo=l("FileByKey",["fileKey"],"d16b839eba0f66cebf73d78af169b40272b02632ae9cc7815bc0eccfcb9f6d65"),es=l("FileByKeyForRealtimeShim",["fileKey"],"47fcd48d769a4eb4d43f269035e05d816eb47cc47c8044728dcd087029dcdd92"),el=l("FileCanAccessFullCodeConnect",["key"],"41c5bc7b8be10035dd94f8cd4924eee89bd051d28d7976f5a701a884fe62fdf8"),ec=l("FileCanEdit",["key"],"b04d2d758c0466ba911bd854f2a3cf2cba96e5ecd63b21b49abcba7e332ec7cf"),ed=l("FileCanManage",["key"],"ddac42bcf2b619019a1b2ede42683431f14c2e8e547e0345f17836f23d9476d4"),eu=l("FileCanMoveWithReasons",["key"],"1c136da38f2f3fe275ee561bf876d49ffeec3b5d821592a267260383acecccb1"),ep=l("FileCanUseDevModeDemoFile",["key"],"417320997fd8c2fee10e5d9c1bca216318d005f7ba9bd1306b93d64ee9e356e4"),em=l("FileCanView",["key"],"eb764fff478028cae97ce090c2f2a043a11faf790a8f3b7beed459d64fc5c46d"),eh=l("FileCanvasMentionsByFileKey",["fileKey"],"79c810ce05ba276dd1aeb6d61c99447aea1b20026a97c8b8c5772db7f8c833bc"),e_=l("FileCreationPermissionsView",["projectId"],"2cedae279b47a1e0d447e42122a004612653b046468acf3b261296cae22d66f4"),eg=l("FileCreationTeamActionView",["projectId"],"b42e8ae75e2d328ab2702fe5752f2a206fcfa12c70ac126372520790dd483f27"),ef=l("FileDevModeTrialRequestPending",["key"],"253682e8e527279d8a611850cefed9ee1b22b265ab414b124fdf071a2fec5125"),eE=l("FileEditRequestExistence",["fileKey"],"a2552309577a6eec06c892686a7114d6f89a5fa6536d34acf8d34cf7b974e98a"),ey=l("FileExpirationView",["figFileKey"],"16656fca5adcba0390c0807246f043832d76095caa298c06491d04d04370aa5e"),eb=l("FileFeaturesEnabled",["fileKey"],"9ffa0a19a48b9fe5b57a98b99e9dee2763d7cc2851bf904e5ad8a4c176f027e8"),ev=l("FileImport",["projectId"],"536c1067c0e9aee3a3a0ab08dc33837e62bd5242380c527dc2f806b4e1bc9ef2"),eT=l("FileIsEligibleForDevModeTrial",["key"],"eb035a0ea4135def4bb735be5b7ff9fee6ae3d78562fb2586e4dc92e19c3295b"),eI=l("FileIsInDevModeTrial",["key"],"4f6655e5c1514db26777c6cb8101492e683cc2b1c4fc111be2c6fab8dfc62deb"),eS=l("FileLastPublishedAt",["fileKey"],"fd7d6bd5f797df0744e0822085cd7af883cdac00ee32e220d06d095cfb71aaea"),ew=l("FileManagePermission",["fileKey"],"bbab13dd40bc19e13743a41ef4df7cdd2d47607306c3b264af2fddcc0e11896a"),eA=l("FileNameViewDropdown",["branchFileKey"],"5e545b1358915e32d53d077b864692ab25502fbef1a238af1a55bd5ad7fb58aa"),eC=l("FileNameViewRepoFiles",["repoId"],"dc4a198b26c874f8130eb7bb6b60b2259acfb9f641889c35f3f454999b52f024"),eN=l("FileOperationsView",["fileKey"],"5e25c70750ee0fad127870d3bd545dc5c68036a12e3474886e04afe396c9f6fd"),eL=l("FileOrgExtensionSettingsView",["fileKey"],"b2b065dda6329862cd6533bc8e04a9acd6e06f6a4dfa71a1c0acaa960b524a02"),eO=l("FilePermissionsV2",["currentOrgId","fileKey","projectId","repoId","teamId"],"d2d097c6edae1587d0434f25bfd8703251a0365299d5babcaa90e10866399092"),eR=l("FilePresenterData",["fileKey"],"a8ede6dc855a0a46700381b448baa3c9a6a752ba87843ad27d2aa01006c44168"),eP=l("FileRecentViewers",["fileKey"],"aeeba8763efdd5378bcf96ffbfe87ab899b1dfcf090a44a1e22b4b19ff3c854d"),eD=l("FileSearchResult",["projectId"],"5772523f6ac484d88b7d02f902bf5fe4419b87a01cec0dfe14d0b25a8718341a"),eM=l("FileShareModalCurrentUserPermissions",["fileKey"],"a8335fc0d31a88931e2868441ba725495cbd4acf45d5b6a341ffe759f3f47a0d"),ek=l("FileShareModalPermissionsV3",["currentOrgId","fileKey","projectId","repoId","teamId"],"8de6b67206e3d8b869534347821c4f3942e64873f6abfc09a116b97a4b6e6179"),eF=l("FileTemplateView",["fileKey"],"9851612863a6952e349e2d69656736e57767049403e4c1c3af1a22b2280e2a35"),ex=l("FileTilePermissions",["fileKey"],"b1a8a6413af6c5955966414fd19e5bad31676a0306ceb7c4cb0a091e7a7bcfa9"),eU=l("FileVersions",["fileKey"],"716dfdc92d32ddf9d0df28e4c96449f7ca1b9c14831345813d9760fde92cacd3"),eB=l("FileWithCommentsAndReactions",["fileKey"],"723125296d8b810a06f16abf65b7191fa812ad4a7ba8a128e115fbee130f7272"),eV=l("FileWithRoleRequests",["fileKey"],"26d73587af3510bb8ed470c144f7779a9a5db1adccba7557081b2194a5fb98b1"),eG=l("FileWorkshopMode",["fileKey"],"03c41ae834e3e855f331489a3c84dbd9044466e7b6cfc8b6788aa392d071c138"),eH=l("FileWorkspacePinActionsView",["fileKey","orgId"],"9188a5ea64a9fddeffe6285eaf56f69e83fb7eaeaf11aaa1f7723c8b168c3c6e"),eK=l("FilesForProject",["projectId","updatedAtTimestamp"],"dffd4115fda72ca5e1cc0beba664efaa11eda0b5c7b32e5abfeffcba8cc6dacc"),eW=l("FilesForRepo",["repoId"],"00c44d35b79556ae2be66a9790d3a69a755cfb3346258b8b9a3e062bea306d2a"),ez=l("FilesForTeam",["teamId","updatedAtTimestamp"],"162bead274cf6150d8c32546361992e5bd7ce818c5030e34379e40354bb4904d"),e$=l("FolderCreation",["teamId"],"f09835a34dbf2aef2b3f6c0a9132a9557672b0ce9da0e95651d04c7137010d99"),eY=l("FolderMoveModalView",["currentOrgId","currentTeamId","folderId"],"200c62f39f7583bedd1838a62c7d3d1a5d9232fc160b2e9ad21a99d1fb361416"),ej=l("FolderPermissions",["currentOrgId","projectId"],"435013f9030b084ae6d21b7525d59b5b399315e5ffd0101ef7ffdc5cbbaaa70e"),eq=l("FolderSearchResult",["teamId"],"2ebd0a8b8ccbbda8101245583d2c6808ed415073ff2f2efd4cc588eaa5d1e661"),eX=l("FolderUntrashedFilesAndSitesView",["projectId"],"a3b131edc3ed41460d8cc439d41f2accfd14bef7ea4d69933308fd19f1c3891d"),eZ=l("FontFileForOrgView",["orgId","updatedAtTimestamp"],"324ae763a501526c1700b40ccdac7431ac0a3a728e795442be4bfe44c30714ef"),eJ=l("FontFileForTeamView",["teamId","updatedAtTimestamp"],"19811dd196b88bcb9b6594f86574daec62978a0818202c4952fc16e43c04a57c"),eQ=l("FrecencyHistoryView",[],"2961d39c324c66b95366f3004eeee4c65b4a7481ba2d71b18f15bab0f92babf5"),e0=l("GraftingUpdateSloData",["id"],"7a8d81b59a88816b12349b489d3be848ed5086caff723551cd96df9cacb94f25"),e1=l("HasConnectedPlanUserInOrg",["license_type","org_id"],"809d53701a4ae0afd100fb21083239f1d7cc8a66eb233c4ae9d1d0dd025c2e99"),e2=l("IdpUserView",["orgId"],"7d558ee5071f305ac1aeace49be936f851b664f139ed89c20b31a7b4fd35b119"),e4=l("InstalledPlugins",["orgId"],"639696c89429757237b28755bd60331e157a7a3d2887c1c5cc9835b9b02a3552"),e3=l("LibrariesViewFilterStatesView",["orgId"],"93cdae6354ee31395f409657e97c5db5c5e941d67b493834271fe6726204a71e"),e7=l("LibraryAssetByKey",["key","libraryKey"],"ad87c8fe3bf9af78d2c188a3a680b2c4e724292233402ea0e6fb3c5dccd27ca6"),e5=l("LibraryAssetData",["libraryKey"],"4471d1274f5097dfe1600331671814eb1e83e089fd88867c58a678f291e29d02"),e8=l("LibraryAssetDataOfType",["assetType","libraryKey"],"ba8ad004968b8055886342b8d57ef008ea137ca58c14009dc4007cf2ff6504f6"),e9=l("LibraryData",["fileKey"],"1ffee7f163dc6c2c47d5b7dd08039d561ea8f35359ca949ccf65b52a6643ca15"),e6=l("LibraryDataByLibraryKey",["libraryKey"],"d2bc2c18bdb8d68f15f0ef0df8564c0c40e648fbaec8933265cf7776b0ce9768"),te=l("LibraryFileSelect",["projectId"],"ce06f52487dabce0499dc85b49d35bbaeefb680ec4a2c3ea2fd9db24b944d238"),tt=l("LibraryIsBranch",["libraryKey"],"49202d792e43e53e3d3be4834398ac95b02d0d1a13f346c57eacedbca3c0d795"),tr=l("LibraryKeyToFileLink",["libraryKey"],"95b3597d27c5a6b3ab57244de132a746e408077e5d6d6e1a9b3c971d9cfb8263"),tn=l("LibraryMetadataByLibraryKey",["libraryKey"],"8ada83185ffdf305fd1f22bdf0b70e424f55a055cf190c529813872ac3730c81"),ti=l("LibraryModalAssetsDataByLibraryKey",["libraryKey"],"dd01c688e74471e35a5478d583a6fe2eef846b8a8a141d0891e265e1a51eed60"),ta=l("LibraryModalVariablesDataByLibraryKey",["libraryKey"],"1664d52a5b1ec82c7e1517d8024ddab15a95bbdd646d24671f70248251e6568f"),to=l("LibraryModuleData",["fileKey"],"9357298c3b040127de1f3067c1c42422cc20932051171c9bd8ab14a1393cb749"),ts=l("LibraryModuleDataByLibraryKey",["libraryKey"],"87bccf3ce1998fe7f72e16f9bb9793b4d1fa8c798abcbdeacda5d28a59b68a2f"),tl=l("LibraryOrgSubscriptions",["orgId"],"0740caf02b4ba0c4f78909484842113ca42b160bf375e8d5ae1bf8e79ee95b2e"),tc=l("LibraryPresetSubscriptionsV2",["group"],"af14c174276af4821193e594cf09b1bbf3180b7dc973882894dbae9e26b715c9"),td=l("LibraryStyleData",["fileKey"],"afa9c4c78d44b4d3f101e42db2f82c68a7963eef2517a83041cc3999fe44ff29"),tu=l("LibraryTeamSubscriptions",[],"92cff1e165153307b913467bfd788f4dc90650527d77b8041ece8bcc0f1aaf31"),tp=l("LibraryUserSubscriptions",[],"25f679cf10d92e5959a827ab87f77023907fb7b024efa92378dcfedc21dd7391"),tm=l("LibraryVariableCollectionData",["fileKey"],"5e3159354e4850728c81e054a72c4e584531de8527fd67e41ae3d6816f40c202"),th=l("LibraryVariableCollectionDataByLibraryKey",["libraryKey"],"7af1404cc98c431975714d6266721baaa6694d2c772779528577fb13bdeb80d4"),t_=l("LibraryVariableCollectionDataByLibraryKeyWithVariables",["libraryKey"],"e2b1fc10aee68ddaff225b61db8ed93fb904dce3d05bca3a532b80baadb07318"),tg=l("LibraryVariableCollectionDataWithVariables",["fileKey"],"1b2279160f1abe76e901005d3eed3dd900c7f7141ade841b3c13e7864e5d24d2"),tf=l("MergeStatusRepoFiles",["repoId"],"92697a2007529c1a87aedf80c2d8ced0366b6e9be6e2230dd681cd5a218bbcb5"),tE=l("ModifyPlanUserSeatModalView",["planType","targetPlanUserId","targetUserId"],"21a5360d59505318f6def7442ddf8998b09c92bcfb20d6b1b6a9dc437e019dd4"),ty=l("MoveFileCurrentProject",["projectId"],"8773b26302f8b5766b44bd53f86967419af79ba28c374291c35932c86e34228f"),tb=l("MoveFileDestination",["projectId"],"0bdaf003e512baa4f1179a14ae8cc129b87274b7e42e69ba23b92c2dc5174126"),tv=l("OpenEditorFileData",["fileKey"],"82af6e36b187b2169c8b2e39a7b5ebdbf0d6b4e222e342fbd9f78a1330d916e7"),tT=l("OrgAdminUserView",["firstPageSize","orgId","queryParams","refetchToken"],"a761ad2f970edc01b61bbe55f4811b7bbfffe6ae253f0531310aa5e55b6e387c"),tI=l("OrgByIdForPlanUserView",["orgId"],"4630249a0f26a58baee385969284d74a7dcb24d7c3b5baeff2f3d41dd627c79b"),tS=l("OrgByIdForPlanView",["orgId"],"792b8d4c355ecb24bf160fcd173c9c1df87cd794a8b02b70689d32a0b2ac9c4c"),tw=l("OrgByIdForRealtimeShim",["orgId"],"0d6dcc336201134307c58470666d00ac8e5421bb99779dfb6d4925e3418ebbeb"),tA=l("OrgHasWorkspacesView",["orgId"],"43335cefae937cdc351a1915ae3445b9d664f4c053e3d51b5405cc16f5002398"),tC=l("OrgJoinRequestExistence",["orgId"],"fa785d914fb48bfdb4817e34b521c9ae08652b74e05d0338cc3247ebc5a0f15d"),tN=l("OrgProductTermsEligibleInfo",["orgId"],"766512edfd21a3ddc48ff4790858b2d79d24da2ed94eddcef95cb0c3877eea43"),tL=l("OrgTeamView",["extraTeamIds","firstPageSize","orgId","queryParams"],"e0c3f6ffcc8d9d2b6e0c6ad0fac1d05a6b6cf28b84a66eba66ac1f3ad3c495d3"),tO=l("OrgUpgradeRequestView",["orgId"],"1bd88c2c581fbdd8d8ab9924813198fa48b315bf4dcd48a735a6475434e52baa"),tR=l("OrgUserDraftFolder",["orgId"],"656b5eee5c96afd84ef4d8f0c7d45ed32056453f6893edfe661c7c7bf5f9e828"),tP=l("OrgUserIsMfaRestrictedView",["orgId"],"5464d61e3db24d16e6104b9dc85732fa9bbe7742bd0bbfa8866c6ab396eadb35"),tD=l("OrgUsersForRealtimeShim",[],"2d72c3a6c32f02eb171be4dffae693253d98c53d4d1e642929ddb0918fa4bc9d"),tM=l("PendingAssetTransferRequestByResource",["folderId"],"629604aa4cf3a4080ff6e2c7355d339b6afbf2199a674418087f4c174464b778"),tk=l("PendingConfirmedRenewalSeatCountsView",["billingInterval","planParentId","planParentType"],"ab531cfe4acce15986329d6a320d0e0c5bc6d5daaeccfb75e62558d070c81e4c"),tF=l("PendingUserMentionByCommentView",["fileCommentId"],"efecd35aa66317aca80ed84db84e594d6e77a552179e842a856411863d592852"),tU=l("PersistentUserNotificationBellData",[],"88a32875f096628dca6878388b8b210fbb36c1664f60444a71b468f536dea7f2"),tB=l("PlanCanConnectView",["planParentId","planType"],"12011d3ffdd3c984a3c00bdd951d06cccc8ed1e583db96b9e91774aae2891685"),tV=l("PlanIsConnectEnabled",["planParentId","planType"],"a86e1542c6a723b2f0b4c7d5e6ea145eee11c958efe044bcde0f8670787018c5"),tG=l("Plugin",["orgId","pluginId"],"73119d76931a7b88b2a223f38e4f3a206d845bf98908ad282e3f3ca3731f0750"),tH=l("PluginPreferencesView",["targetOrgId","targetUserId"],"046a257f73aa854a4878ea1e0f21b7f35e00853c75d0d850d0607f37a55e8027"),tK=l("PluginRequests",["orgId"],"f51331df46a2598769b1334a7bb1b20bb7141ec6ef6907ea282052898764fc45"),tW=l("PluginSecurityFormResponse",["pluginId"],"37483618df3083a7448e1d3a000e4bf0a58736833bd5e277b74bf5206298a404"),tz=l("PluginUpdatesForOrg",["orgId","updatedAtTimestamp"],"1f108b4f6d91abc335a2c3fef816441d1e1683977ba256b5ac38120121ba0cbd"),t$=l("PresetsDisabledView",["orgId","teamId"],"151c8f4bd21169576f77e1603e503619222d9175d36948824ce1e05421ccee79"),tY=l("ProRequestUpgradeModalData",["teamId"],"48e461aaa5580f6b60d0dbd6b169b946ec5ed7db57b8acd737fa0daf0eee713a"),tj=l("ProjectActiveResourceConnections",["projectId"],"66d9d712debb175260223a3244ed2d8123f736e87c0f059dc1e6626c678c35b7"),tq=l("ProjectByIdForConnectedProjectStatus",["projectId"],"19f51400e04ff54ed53c321b725bd1aca0070c5698c570ba7622445c9683815b"),tX=l("ProjectByIdForFolderSettings",["projectId"],"7da48b88b1b38f10c15b3d22dbcdef33b92fca0b3d1be6e95e003aeac6197b86"),tZ=l("ProjectByIdForRealtimeShim",["projectId"],"dc32e25283d2d1dffab0e3de9ab839f9e992b7c787e50945d5c95ce7cbd3f271"),tJ=l("ProjectFileCount",["projectId"],"fb7602771925aba9daee0c54da0ae5b19e112f419af3561b23186b9ab8edae75"),tQ=l("ProjectNameById",["projectId"],"3424a13606e93d2f552e7240b55752325d244f0acd70d53c09706db931441cec"),t0=l("ProjectNameForFile",["fileKey"],"b699205ee33e2c12c100086c7f25be9108c4394ffaa125b6c9b76274ee0b1004"),t1=l("ProjectTilePermissions",["projectId"],"45e37a2a01921f43a73da2121536c81f6dfbf3a5fc3c4cf0d9a06bc85c7d05db"),t2=l("ProjectsForTeam",["teamId"],"a1e18b94f5df242987585953049dae9cfb8f16891534b04ee2274b487c207900"),t4=l("PrototypeCanView",["prototypeId"],"39b6cb87330b27137dfe9ed80a64b3b264e26f8429d5144fb040372acf31b437"),t3=l("PrototypeTilePermissions",["prototypeId"],"686bb44822bd234fb3b8e7407935f4f3a8c4cc479f7826e075744c8dcfc39b8b"),t7=l("PublishUpsellTeamRoles",[],"e5f4e71dea66d8b75e5ada7d8a7a0bbefb0c042a933d1d03efb6fd7b20e15623"),t5=l("PublishedHubFileForFile",["fileKey"],"ec2a1599754bb7e25c18d80d228b02090e6602b4047532b49cec92deeab5f5db"),t8=l("PublishingModalView",["fileKey"],"74f30a17ba3ae062e39b542a68e751284ac518804e2fdabf76c90d1bd87be8ba"),t9=l("RepoByIdForRealtimeShim",["repoId"],"e47c13772b98f3d704233af4abe7f0f9cfa4e8fbda3ac9096a424b5991d54709"),t6=l("RepoCanMove",["id"],"a87a1cec41725cb8d5f717cb42aba3efa5f10174b94a55ac83368065e993bac0"),re=l("RepoCanMoveWithReasons",["id"],"58d3ed324b0fb335270b9a4017a497c72a61b987f24221181cc4172a1e42149e"),rt=l("RepoCanView",["repoId"],"f25a56bf74b724efc41118fabbbd8029682f5ce97a97db3ac5cf7c8117b07d82"),rr=l("RepoFiles",["repoId"],"8dcca6615517ac59b23419a460c584bd57c3ed65b216910884d93aba7ad82aeb"),rn=l("RepoReviewerSuggestions",["repoId"],"00a150b6b24d02a9be19f0f7d564147419eb690e585d07493f4f93d1c497c547"),ri=l("RepoTilePermissions",["repoId"],"385a261e59de4c6b65010d6110aa286a2b2bac94a0825db23d4b577557afe540"),ra=l("ReposForFile",["fileKey"],"cdffd0fec08be265d27e7c23312a45d59fb5c512fd4dc18999b36530f3d99105"),ro=l("ReposForProject",["folderId","updatedAtTimestamp"],"2c0d9b289096f0d9de911e0830601fa513514ce91dfe484a5186838df2ffae5d"),rs=l("ReposForTeam",["teamId","updatedAtTimestamp"],"e9f4229805e5712b14b53f5f36376f04ef52c4cf05da0b5c9cf9c3538b1f1e4d"),rl=l("ResolvedComments",["fileKey"],"06e6244ece9b634678a5cde5f459d166abfa3956ca9016084bf1f2b32876964c"),rc=l("ResourceConnectedUsers",["id","isHostPlanAdmin"],"427bbc965bc44755c41970e6d78add04774f3b986034157b5fa06c12c763d121"),rd=l("ResourceConnectionSharingGroupUsersByFile",["fileKey"],"ecbb6d74d2aa036f933d0d65ae365b6ce590e73a88302c2ca4961af9ed7a0063"),ru=l("RoleUpdatesForTeam",["teamId","updatedAtTimestamp"],"95b4a2e83cdc0dd596dd52efd06b7ebf4ed36d97033c6c4c0f2f432d1377f47d"),rp=l("RoleUpdatesForUser",["updatedAtTimestamp"],"25b2ce5388b31a7fe1d722b7d80d54614aba382b86ba45568d113078b22c5e38"),rm=l("SearchFilterWorkspaceView",["orgId"],"e1690e5b59052f65ab1e98fbd14356b263f7eeec40a4f03ba33cc3130f282cf4"),rh=l("SeatCountDataForPlan",["planParentId","planType"],"50f61b4a5233d89f5aa9d08095c65972a96ad2c4369f1d4b54a14e1e93fd3678"),r_=l("SharedFontsModalOrgPermissions",["orgId"],"a46eb218576f562a97506d614998ce064bbb504276b0fc3b65525b4617948ffb"),rg=l("SharedFontsModalTeamPermissions",["teamId"],"5602f0653629aed8d112f6493fbca9e1ced7f0d814c30c46865d2294ff424ec2"),rf=l("SharingGroupsByLibraryKey",["libraryKey"],"0198fea9ec5e08bf09ef5295059d5faaf675a5db31fbcece8eebe2317600246a"),rE=l("SharingGroupsByResourceConnection",["resourceConnectionId"],"dfdc571688410c92d09f600d8606856f04aa52835058d2ad6287f846c69fad80"),ry=l("SiteBundles",["fileKey"],"c866419a2a2771830db6feeda57f2334c13ba73d61988ac82119daac07b71894"),rb=l("SiteMount",["fileKey"],"80d6ae672bee05e4a828c8b0c63c64ff07d69207f7af7ac04cf22ce7a1c84dbd"),rv=l("StateGroupAttribution",["key"],"bba7f6b914518829da80ef81f87ccdc0b3a40779b6718f6f297511bfdc44ebac"),rT=l("StateGroupUpdatesForFile",["fileKey"],"e688271b31686c8452263b267b47671f451131fe0cd5ccbbac5fd5faceee53f7"),rI=l("StateGroupUpdatesForProject",["projectId"],"7775ed5408bd32fc69176a39ef04ee4c18932bc81e88eeb6d32a277d901ba938"),rS=l("StateGroupUpdatesForTeam",["teamId"],"39809fdb849dffea08b8fbe0f6289c9d4996a4cc5933b7a6bf7b2bb9cfd07a40"),rw=l("StatsigTeamsOrderView",["currentOrgId"],"025bdb490f60869d799a95df72a6a6f771442389c6002df8e61ea5a71194901e"),rA=l("StyleAttribution",["key"],"8f49a968942f65daa47f5bc8ce67d87f8888b00a1d3fdcbecc484aa8cafaa17d"),rC=l("StyleByKey",["key","openFileKey"],"08e2b6479829f04586bf91bf87628cb8291b1b25364b6259657f551745118831"),rN=l("SubscribedLibrariesForFile",["fileKey","group","orgId","teamId","workspaceId"],"539cbd7a30044e70c902dd438c1e052ed2f0a032ec87ded7b068461c947bff0f"),rL=l("SubscriptionUpdateSloData",["id"],"85603882b711eeacdbd2c903c6491bb3779a3781cd443cc532c9f6929bf388df"),rO=l("TeamById",["teamId"],"96233d1efe0f7f38bbbeda705436ff00c5165935cb7ac3b3826a2923c0d94347"),rR=l("TeamByIdForPlanUserView",["teamId"],"f1e9733d7b4000bfa9ef990814e5af6ef2efee374356755782dc2135b688b00d"),rP=l("TeamByIdForPlanView",["teamId"],"bdff25c675c28aa7427d17b08eb1f6e8bfbd22ce062971549f08b92684cccbd6"),rD=l("TeamByIdForRealtimeShim",["teamId"],"876740dbc49f6317f9fea69f05ccea7ae399f65dd4024d0d77ce35cc6e7e9656"),rM=l("TeamCanAdmin",["id"],"a15d8b8af116e99e982bde58a443fa38d3f51756c266019952f16d6de898286d"),rk=l("TeamCanEdit",["id"],"bda96537d0ca79878c42caa722d235331db0954d2df1a32cbe0681af9bca3881"),rF=l("TeamCreationWorkspaceView",["orgId"],"d13686ce2c80731820b24473472ede39e6dc131201e0c789743d0f565e1d0c3a"),rx=l("TeamFileCountsByTeamId",["teamId"],"1a53e47b53b59ef7610c9131ef835e3a918c3e76c44e2e53af87505d85e84031"),rU=l("TeamFileLimitsInfo",["teamId"],"e812016eda36f55a432c024680774cfb2dc5d25c9d971296242c12cc247dd5da"),rB=l("TeamFileLimitsInfoByProject",["projectId"],"785d9b9641d8e92c11bef892f55ce3ce0aa0853f6ae44f17a97099cdff26bc90"),rV=l("TeamHasPublishedSite",["teamId"],"0cf97a87ee12f99ef626ed7066b3ac09b83b9686fe520451a3a6499d15e8dec5"),rG=l("TeamOrphanedStatus",["teamId"],"2805618ee305853637591f1e5f287aed2d89f4e4a3c2caf44ac7cc9c62c607d2"),rH=l("TeamPermissions",["teamId"],"1a220f479d5884093bdd8949915a3cf5a6283d6dc3dc662bca1b2ff1ce4bdfd1"),rK=l("TeamRoles",["teamId"],"2d56ddd05d0a89b5aba0ff285dd042ebd1c973dfbee1d9c22fbe1b5f672f3726"),rW=l("TeamTilePermissions",["teamId"],"e22151f739c2cee15b5cf1061f87be3d235080bad58f2d4e1e01e70828b59328"),rz=l("UpgradeEligibilityView",["fileKey","projectId"],"68dcd99f150e304cca742288451b2198de22d8f3b380ebce03f9e1babb3f71b3"),r$=l("UserColorProfilePreferenceView",[],"d63161ffc7150ae6d1010ec70ba9a4d2082ddb1426e097a472eb98eae521eb5c"),rY=l("UserFlagByName",["name"],"ab2c3ed110dea4ce838ba35403bb3a9aae32cfba320a45c2d19b02362be53c56"),rj=l("UserForRcs",[],"9fac12bafa906637bcd0f846ee79e6ba14d01da0df3b78ca4705fdf335161e40"),rq=l("UserForRealtimeShim",[],"6eb6767b765d789f69e66b0b9e0da0b30bfb46833df78253392df819165eaff7"),rX=l("UserLicensesForFile",["fileKey","userId"],"02bd9d410066063f343ced7d6e24b728740444522db94b79cd339d0007f31325"),rZ=l("UserPreferences",[],"d413c96cd93779816ef501e3520d665c7f6e4ad2e7aeb4999edd60f287bd2ef3"),rJ=l("UserTeamFlagsForRealtimeShim",[],"f4f8d69cc98235fb3bd112bccc02681338e66e7337fe16f88d44ddb92c091566"),rQ=l("UserTeamRoleRequestView",["updatedAtTimestamp"],"4d4825452cf41818cc4118acf4867f7161dcaa2f68b63b13bb47ef0e962b7c98"),r0=l("VariableByKey",["key"],"2c1793874674367f87ca3581282b62eac3a4943ea6856c462003e165b03954e6"),r1=l("VariableCollectionAttribution",["key"],"5bbc5e2c766fc8d58ca816d423af1a9c5efcd32d652c57a1797eaf45ca297ada"),r2=l("VariableCollectionByKey",["key"],"f567e20afeb068cc34ad5217f47c08587e92be73e28f18dc95409e04488cb28d"),r4=l("VariablesByVariableCollectionKey",["variableCollectionKey"],"e0ded5156916deaad524d3278e8ee2d4dda1174cdc0de6ef27c56c30bdfbdc55"),r3=l("ViewerRestrictedDraftAccessLog",["fileKey","orgId","teamId"],"9d8bb151165df2965f8ae04bb79bb169342879fc53b76bd4ce54e59ae7426051"),r7=l("WhitelistedPluginsForOrg",["orgId"],"8d225a26fcb53ff99c368f566f42529602c163fa00f1e23182b9dacff718aab8"),r5=l("WidgetUpdatesForOrg",["orgId","updatedAtTimestamp"],"5f662446c86f544fa3bfa1dc9c293cdc1c221c335a12971a0109749a96f3bd30"),r8=l("WorkspaceModalPluginRequests",["orgId"],"09e49c1d071cb7a048dfbd41ff480667be899b03aff71db49ab9344a49cea0d5"),r9=l("WorkspacePageView",["orgId","workspaceId"],"13c8966d3c5393234d790cb28e3818b4c1afd6c1a221bf799287805c1bea1019"),r6=l("WorkspaceSelectorView",["orgId"],"3e57d9a0edc4f7b82d83093187902ade15f296f06ff742484915bc6537e807ab"),ne=l("WorkspaceSubscribedLibrariesForTeam",["teamId"],"45b1e49428694572be0348ab1e03a248cbbcba61d5751cc88ca1f1b98568013a"),nt=l("WorkspacesDirectoryView",["orgId"],"5700171c687701dec5abc103a8768b23bb4d4d691f24e09778110fbb609da929")},746948:(e,r,n)=>{n.d(r,{Bp:()=>z,GA:()=>G,KC:()=>U,Nl:()=>Y,Ns:()=>v,Qp:()=>F,SS:()=>x,TP:()=>S,Td:()=>$,U5:()=>P,U7:()=>M,Um:()=>N,V1:()=>b,WP:()=>R,WW:()=>I,Xs:()=>O,YN:()=>Z,ZW:()=>D,Zt:()=>q,aU:()=>L,aX:()=>B,cE:()=>H,ge:()=>A,iP:()=>X,tJ:()=>C,uW:()=>K,vy:()=>j,yT:()=>w});var i=n(445777),a=n(781131),o=n(741419),s=n(897392),l=n(573446),c=n(1329),d=n(992132),u=n(157907),p=n(267760),m=n(431118),h=n(503813),_=n(376780),g=n(931516),f=n(483372),E=n(657972),y=n(561162);function b(e,r){if(null===e)return null;let n={};for(let r in e)n[(0,m._5)(r)]=e[r];return Object.assign(n,r||{})}function v(e,r){let n={};return(e.link_access&&(n.linkAccess=e.link_access),"proto_link_access"in e&&(n.protoLinkAccess=e.proto_link_access),"has_file_link_password"in e&&(n.hasFileLinkPassword=e.has_file_link_password),"has_proto_link_password"in e&&(n.hasProtoLinkPassword=e.has_proto_link_password),"org_audience"in e&&(n.orgAudience=e.org_audience),"org_browsable"in e&&(n.orgBrowsable=e.org_browsable),"viewer_export_restricted"in e&&(n.viewerExportRestrictedAt=e.viewer_export_restricted?new Date:null),e.name&&(n._name=e.name,n.name=e.name),n&&r)?{File:{[r]:n}}:null}let T=e=>{let r={};return(e.link_access&&(r.linkAccess=e.link_access),"proto_link_access"in e&&(r.protoLinkAccess=e.proto_link_access),"org_audience"in e&&(r.orgAudience=e.org_audience),"org_browsable"in e&&(r.orgBrowsable=e.org_browsable),e.name&&(r.name=e.name),r&&e.id)?{Repo:{[e.id]:r}}:null};function I(e){if(!e.id)return null;let r=T(e);return r?(e.default_file_key&&Object.assign(r,v(e,e.default_file_key)),r):null}function S(e,r,n){let i=void 0!==e.default_file_key?e.default_file_key:e.key;return i&&"optimistic"===r&&e.expires_at?{FigFileLinkExpirationConfig:{[`optimistic-id-${i}`]:{figFileKey:i,expiresAt:new Date(e.expires_at),accessReverted:!1,updatedAt:new Date,prevPrivateLinkAccess:_.PQ.ORG_VIEW,prevPrivateProtoLinkAccess:null,prevOrgBrowsable:null,setByUserId:n?.id||null,setByUser:n}}}:null}function w(e,r,n){let i=e.link_access===_.PQ.VIEW||e.link_access===_.PQ.EDIT||e.proto_link_access===_.Pu.VIEW;return r&&"optimistic"!==r&&(!i||"expires_at"in e)?{FigFileLinkExpirationConfig:{[r]:{expiresAt:e.expires_at?new Date(e.expires_at):null,accessReverted:!e.expires_at,setByUserId:n?.id||null,setByUser:n}}}:null}function A(e){return{key:e.key,name:e.name,file_repo_id:e.file_repo_id,source_file_key:e.source_file_key,editor_type:e.editor_type,folder_id:e.folder_id,team_id:e.team_id,parent_org_id:e.parent_org_id,has_proto_link_password:e.has_proto_link_password,proto_link_access:e.proto_link_access,created_at:e.created_at,trashed_at:e.trashed_at,prototype_url:e.prototype_url}}function C(e){return{checkpoint_token:"",edit_url:"",prototype_url:`${window.location.origin}/proto/${e.key}/${(0,m.sy)(e.name||"")}`,track_tags:"",url:`${window.location.origin}/file/${e.key}/${(0,m.sy)(e.name||"")}`,touched_at:"",client_meta:e.clientMeta||"",created_at:e.createdAt?.toString()||"",creator_id:e.creator.id,deleted_at:e.deletedAt?e.deletedAt.toString():null,description:e.description||"",editor_type:e.editorType,file_repo_id:e.fileRepoId,folder_id:e.folderId,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,is_template:!!e.trackTags?.isTemplate,key:e.key,license:e.license,link_access:e.linkAccess,name:e.name||"",org_audience:!!e.orgAudience,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,proto_link_access:e.protoLinkAccess,source_file_key:e.sourceFileKey,starter_library_src_file_key:e.trackTags?.starterLibrarySrcFileKey,team_id:e.teamId,thumbnail_guid:e.thumbnailGuid,thumbnail_url:e.thumbnailUrl,thumbnail_url_override:e.thumbnailUrlOverride,trashed_at:e.trashedAt?e.trashedAt.toString():null,trashed_user_id:e.trashedUser?e.trashedUser.id:null,updated_at:e.updatedAt.toString(),viewer_export_restricted:e.viewerExportRestricted,is_try_file:e.isTryFile,library_key:e.libraryKey,last_published_at:e.lastPublishedAt,library_publish_scope_type:e.libraryKeyToFile?.libraryPublishScope?.publishScopeType}}function N(e){return{id:e.id,handle:e.handle,img_url:e.imgUrl,email:e.email||void 0,name:e.name||void 0}}function L(e,r,n,i){let a={id:e.id,resource_type:e.resourceType,resource_id_or_key:e.resourceId,level:e.level,created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),pending:e.pending,org_user:n?{design_paid_status:n.accountType,whiteboard_paid_status:n.whiteboardPaidStatus||_.El.STARTER,user_id:n.userId,permission:n.permission}:void 0,team_user:i?{design_paid_status:i.designPaidStatus,whiteboard_paid_status:i.whiteboardPaidStatus,user_id:i.userId,team_id:i.teamId}:void 0};return e.pending?{...a,pending:!0,user_id:null,user:{email:e.pendingEmail||""}}:{...a,pending:!1,user_id:r.id,user:r}}function O(e){return{id:e.id,name:e.name,folder_id:e.folderId,default_file_key:e.defaultFileKey,deleted_at:e.deletedAt&&e.deletedAt.toString(),trashed_at:e.trashedAt&&e.trashedAt.toString(),created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),team_id:e.teamId,link_access:e.linkAccess,proto_link_access:e.protoLinkAccess,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,org_audience:e.orgAudience,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,has_active_branches:e.hasActiveBranches}}function R(e,r){return{id:e.id,viewed_on:e.viewedOn.toString(),user_id:e.user.id,file_key:e.fileKey,user:r}}function P(e){let r={};return e.forEach(e=>r[e.id]=e),r}function D(e){switch(e){case _.vt.FILE:return"FileRole";case _.vt.FILE_REPO:return"RepoRole";case _.vt.FOLDER:return"ProjectRole";case _.vt.TEAM:return"TeamRole"}}function M(e){if(null!=e)return{backgroundColor:e.backgroundColor??void 0,containingStateGroup:"containingStateGroup"in e?function(e){if(null!=e)return{name:e.name??void 0,nodeId:e.nodeId??void 0}}(e.containingStateGroup):void 0,name:e.name??void 0,nodeId:e.nodeId??void 0,pageId:e.pageId??void 0,pageName:e.pageName??void 0}}function k(e,r){return{description:e.description??void 0,description_rt:e.description_rt??void 0,library_key:(0,l.l)(r.file.libraryKey),id:e.id,name:e.name,unpublished_at:e.unpublishedAt?.toISOString()??null,updated_at:e.updatedAt?.toISOString()??null,..."hubFile"===r.type?{file_key:r.file.id,file_key_source:h.Ps.LIVEGRAPH_DATA_HUB_FILE,team_id:null}:{file_key:r.file.key,file_key_source:h.Ps.LIVEGRAPH_DATA,team_id:r.file.teamId}}}function F(e,r){return{...k(e,r),type:g.PW.COMPONENT,node_id:e.nodeId,canvas_url:`/component/${e.componentKey}/canvas?ver=${e.contentHash}`,component_key:(0,a.ii)(e.componentKey),containing_frame:M(e.containingFrame),content_hash:(0,a.F7)(e.contentHash),userFacingVersion:a.F7.INVALID,min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,thumbnail_url:`/component/${e.componentKey}/thumbnail?ver=${e.contentHash}`}}function x(e,r){return{...k(e,r),type:g.PW.STATE_GROUP,node_id:e.nodeId,canvas_url:`/state_group/${e.key}/canvas?ver=${e.version}`,containing_frame:M(e.containingFrame),default_state_key:e.defaultStateKey,key:(0,a.q)(e.key),min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,version:(0,a.Rf)(e.version),userFacingVersion:a.Rf.INVALID,thumbnail_url:`/state_group/${e.key}/thumbnail?ver=${e.version}`,fill_color:e.fillColor??void 0}}function U(e,r){return{...k(e,r),type:g.PW.STYLE,node_id:e.nodeId,canvas_url:`/style/${e.key}/canvas?ver=${e.checkpoint.key}`,checkpoint_id:e.checkpoint?.key,content_hash:(0,a.IA)(e.contentHash),userFacingVersion:a.IA.INVALID,key:(0,a.n3)(e.key),meta:e.meta?(0,y.iX)(e.meta):void 0,sort_position:e.sortPosition??"",style_type:e.styleType,thumbnail_url:`/style/${e.key}/thumbnail?ver=${e.checkpoint.key}`}}function B(e){switch(e){case"BOOLEAN":return o.rXF.BOOLEAN;case"COLOR":return o.rXF.COLOR;case"FLOAT":return o.rXF.FLOAT;case"MAP":return o.rXF.MAP;case"STRING":return o.rXF.STRING;case"SYMBOL_ID":return o.rXF.SYMBOL_ID;case"TEXT_DATA":return o.rXF.TEXT_DATA;default:(0,i.wc)(`Unhandled livegraph type: ${e}`)}}function V(e,r){return`/variable_set/${e}/canvas?ver=${r}`}function G(e,r,n){let i="",o="";return n?(i=c.wL(s.sH(e.nodeId)??s.Hr),o=d.wL(s.sH(e.variableCollection.nodeId)??s.Hr)):(i=c.Hc((0,a.ey)(e.key),(0,a.nK)(e.version)),o=d.Hc((0,a.yG)(e.variableCollection.key),(0,a.Vt)(e.variableCollection.version))),{...k({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:g.PW.VARIABLE,node_id:i,variableSetId:o,variableCollectionKey:(0,a.yG)(e.variableCollection.key),resolvedType:B(e.variableType),version:(0,a.nK)(e.version),userFacingVersion:a.nK.INVALID,sortPosition:e.sortPosition,key:(0,a.ey)(e.key),scopes:(0,f.gK)(e.scopes),canvas_url:V(e.variableCollection.key,e.variableCollection.checkpoint.key)}}function H(e,r,n){let i="";return i=n?d.wL(s.sH(e.nodeId)??s.Hr):d.Hc((0,a.yG)(e.key),(0,a.Vt)(e.version)),{...k({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:g.PW.VARIABLE_SET,node_id:i,version:(0,a.Vt)(e.version),userFacingVersion:a.Vt.INVALID,canvas_url:V(e.key,e.checkpoint.key),key:(0,a.yG)(e.key),checkpoint_id:e.checkpoint?.key,variableThumbnailsUrl:e.variableThumbnailsUrl??void 0,modes:function(e){if(null==e)return;let r=[];for(let n of e)r.push({id:n.id,name:n.name,sortPosition:n.sortPosition});return r}(e.modes),isExtendable:e.isExtendable??!1,sortPosition:(0,p.oA)(e.sortPosition,null)}}function K(e,r){return{...k({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:g.PW.MODULE,node_id:e.nodeId,key:(0,a.mW)(e.key),version:(0,a.Pg)(e.version),userFacingVersion:a.Pg.INVALID,canvas_url:`/api/file_proxy/module_asset/${e.key}/canvas?ver=${e.checkpoint.key}`,containing_frame:M(e.containingFrame),thumbnail_url:`/module_asset/${e.key}/thumbnail?ver=${e.checkpoint.key}`,moduleSource:W(e.moduleSource),width:parseInt(e.width),height:parseInt(e.height)}}let W=e=>{switch(e){case"EDITOR_TEMPLATE":return o.QjO.EDITOR_TEMPLATE;case"SLIDES_TEMPLATE":return o.QjO.SLIDES_TEMPLATE;case"SITES_TEMPLATE":return o.QjO.SITES_TEMPLATE;case"LITE_TEMPLATE":return o.QjO.LITE_TEMPLATE;default:(0,i.wc)(`Unhandled livegraph module source: ${e}`)}};function z(e){return{id:e.id,path:e.path,orgId:e.org_id??null,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:e.deleted_at?new Date(e.deleted_at):null,trashedAt:e.trashed_at?new Date(e.trashed_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,description:e.description}}function $(e,r,n){return(r||n)&&e?{autogen_password_controls:r?.autogenPasswordControls||!1,external_collaboration_controls:r?.externalCollaborationControls||!1,public_link_controls_setting:n?.publicLinkControlsSetting??r?.publicLinkControlsSetting,public_link_controls_max_expiration:n?.publicLinkControlsMaxExpiration??r?.publicLinkControlsMaxExpiration}:null}function Y(e){return e?{...e,prevPrivateLinkAccess:e.prevPrivateLinkAccess,prevPrivateProtoLinkAccess:e.prevPrivateProtoLinkAccess,prevOrgBrowsable:!!e.prevOrgBrowsable,setByUser:e.setByUser?N(e.setByUser):null}:null}function j(e){let r={domains:[],isFetching:!1,fetchedAt:null};return e&&e.forEach(e=>{r.domains.push({id:e.id,created_at:e.createdAt?e.createdAt.toString():"",org_id:e.orgId,domain:e.domain,google_sso_only_at:e.googleSsoOnlyAt?e.googleSsoOnlyAt.toString():null,saml_sso_only_at:e.samlSsoOnlyAt?e.samlSsoOnlyAt.toString():null,verification_method:null,verified_at:null})}),r}function q(e,r){return r?{type:"hubFile",file:r}:e?{type:"team",file:e}:void 0}function X(e){let r=e.currentUser.recentFiles2;return r?r.filter(e=>null!==e.file&&!e.file.trashedAt&&!e.file.deletedAt&&(!!(0,u.k)().sites||"sites"!==e.file.editorType)):[]}function Z(e){let r=X(e),n=[],i=new Map,a=[];for(let e of r){let r=e.file,o=r.trackTags?.isTemplate,s={accessed_at:e.actionAt.toISOString(),branch_checkpoint_id:r.branchCheckpointId,client_meta:r.clientMeta,created_at:r.createdAt.toISOString(),creator_id:r.creatorId,deleted_at:null,description:r.description,edit_url:r.editUrl,editor_type:r.editorType,file_repo_id:r.fileRepoId,folder_access_enabled:r.folderAccessEnabled,folder_id:r.folderId,handoff_url:r.handoffUrl,has_file_link_password:r.hasFileLinkPassword,has_proto_link_password:r.hasProtoLinkPassword,is_favorited:r.isFavorited,is_new_user_playground_library:r.newUserPlaygroundLibrary||void 0,is_published_site:r.isPublishedSite,is_team_template:r.isTeamTemplate,is_template:o||void 0,is_try_file:r.isTryFile,key:r.key,library_key:r.libraryKey,last_published_at:r.lastPublishedAt||null,license:r.license,link_access:r.linkAccess,name:r._name||"Untitled",org_audience:r.orgAudience??void 0,org_browsable:r.orgBrowsable,parent_org_id:r.parentOrgId,proto_link_access:r.protoLinkAccess,prototype_url:r.prototypeUrl,scheme:r.scheme,source_checkpoint_id:r.sourceCheckpointId,source_file_key:r.sourceFileKey,starter_library_src_file_key:r.trackTags?.starterLibrarySrcFileKey||void 0,team_id:r.teamId,thumbnail_guid:r.thumbnailGuid,thumbnail_url:r.thumbnailUrl,thumbnail_url_override:r.thumbnailUrlOverride,preview_thumbnail_urls:null,touched_at:r.touchedAt,track_tags:r.trackTags?E.Z.toSinatra(r.trackTags):null,trashed_at:null,trashed_user_id:r.trashedUserId,updated_at:r.updatedAt?.toISOString(),url:r.url,viewer_export_restricted:r.viewerExportRestricted,can_edit:r.canEdit};if(r.fileRepoId&&r.repo){let n=i.get(r.fileRepoId);n?n.files.push(s):(n={repo:{created_at:r.repo.createdAt.toISOString(),default_file_key:r.repo.defaultFileKey,deleted_at:r.repo.deletedAt?.toISOString()||null,folder_id:r.repo.folderId,has_active_branches:r.repo.hasActiveBranches,has_file_link_password:r.repo.hasFileLinkPassword,has_proto_link_password:r.repo.hasProtoLinkPassword,id:r.repo.id,is_favorited:r.repo.isFavorited,link_access:r.repo.linkAccess,name:r.repo.name,org_audience:r.repo.orgAudience,org_browsable:r.repo.orgBrowsable,parent_org_id:r.repo.parentOrgId,proto_link_access:r.repo.protoLinkAccess,team_id:r.repo.teamId,trashed_at:r.repo.trashedAt?.toISOString()||null,updated_at:r.repo.updatedAt.toISOString()},files:[s],timestamp:e.actionAt.toISOString()},i.set(r.fileRepoId,n),a.push(n))}else n.push(s)}return{recent_files:n,recent_repos:a}}},698522:(e,r,n)=>{n.d(r,{M:()=>c});var i=n(141039),a=n(974326),o=n(810422),s=n(244158);let l=null;function c(){return l||(i.eD&&(l=new o.k),(0,a.T)()&&(l=new s.y)),l}},511231:(e,r,n)=>{n.d(r,{B9:()=>m,JK:()=>c,LN:()=>u,_Z:()=>h,vr:()=>d,wU:()=>p}),n(848318);var i=n(157907),a=n(379338),o=n(502255),s=n(53818);let l=["jpy","usd","gbp","cad","eur"],c=(0,s.D)(()=>{if(navigator){let e=navigator.languages;if(e&&e[0])return e[0];let r=navigator.language;if(r)return r}return"en-US"});class d{constructor(e){this.fullFormat={jpy:"JPY",usd:"USD",eur:"EUR",gbp:"GBP",cad:"CAD"},null===e&&(0,o.us)("Currency should not be null. Defaulted to usd."),this.currency=e??"usd",this.hasCents="jpy"!==this.currency,this.locale=c()}formatMoney(e,r){let n={currency:this.currency,currencySign:r?.currencySign,style:"currency"};this.hasCents&&r?.showCents||(n.maximumFractionDigits=0,n.minimumFractionDigits=0),this.hasCents&&(e*=.01);let i=e.toLocaleString(this.locale,n);return(i.startsWith("CA$")||i.startsWith("US$"))&&(i=i.slice(2)),r?.showFullFormat?`${i} ${this.fullFormat[this.currency]}`:i}}function u(){let e=(0,a.Ay)().user_currency_from_ip;return h()?e:"usd"}function p(){return new d(u())}function m(){let e=new Set;return(0,i.k)().internal_cart_allow_all_currencies,e.add("usd"),e.add(u()),Array.from(e)}function h(){(0,i.k)().internal_cart_allow_all_currencies;let e=(0,a.Ay)().user_currency_from_ip;if(!e||!l.includes(e)||"usd"===e)return!1;let r=(0,a.Ay)().user_data;return!!r&&!!r.id}},163042:(e,r,n)=>{n.d(r,{Lb:()=>a});var i=n(171659);function a(e){let r=(0,i.DN)();r.get("CHECKED_OSS_SALES_EXPERIMENT_LOCAL_KEY")||r.set("CHECK_OSS_SALES_EXPERIMENT_LOCAL_KEY",e)}},312255:(e,r,n)=>{n.d(r,{D8:()=>o,Lh:()=>s,_q:()=>c,jO:()=>l}),n(579020),n(273121);var i=n(53818);n(369600),n(661780);var a=n(849752);(0,i.D)((e,r,n)=>null!=e&&null!=r&&function(e,r){return!!e&&!!e.track_tags&&!e.trashed_at&&!e.deleted_at&&!!e.is_template&&r.includes(e.track_tags.figma_basics_experiment)}(r,n)&&e===r.creator_id);var o=(e=>(e.PROPERTIES_PANEL_TITLE="properties-panel-title",e.SCRUBBABLE_CONTROL="scrubbable-control",e.PAINT_PANEL_ROW="paint-panel-row",e.TEXT_PANEL="text-panel",e))(o||{});function s(e,r){return e+"-"+r.toLowerCase().replace(" ","-")}function l(){let e=(0,a.f)("editor_onboarded"),r=(0,a.f)("figma_basics_tooltips_onboarding"),n=(0,a.f)("no_figma_basics_tooltips_onboarding");return c({editor_onboarded:e,figma_basics_tooltips_onboarding:r,no_figma_basics_tooltips_onboarding:n,cursor_bot_v2__basics_onboarded:(0,a.f)("cursor_bot_v2__basics_onboarded"),cursor_bot_v2__no_basics_onboarded:(0,a.f)("cursor_bot_v2__no_basics_onboarded"),seen_starting_points_tooltips_onboarding:(0,a.f)("seen_starting_points_tooltips_onboarding")})}function c(e){return!!(e.editor_onboarded||e.figma_basics_tooltips_onboarding||e.no_figma_basics_tooltips_onboarding||e.cursor_bot_v2__basics_onboarded||e.cursor_bot_v2__no_basics_onboarded||e.seen_starting_points_tooltips_onboarding)}},168482:(e,r,n)=>{n.d(r,{OA:()=>p,rT:()=>u}),n(95650);var i=n(308746);n(442313);var a=n(788582),o=n(469024),s=n(380859),l=n(871117);let c=(e,r,n)=>{switch(e){case"product":return s.SL[r];case"role":return s.qY[r];case"seatType":case"seatChanges":return r;case"accountType":return s.U9[r];case"lastEdit":return s.rk[r];case"billingGroup":let i=decodeURIComponent(r),a=Object.keys(n).find(e=>n[e]?.name===i);if("unassigned"===r||"Unassigned"===r)return o.s;if(a)return a;return null;case"newEditor":return"true"===r;default:return null}},d=(e,r,n)=>{switch(e){case"productFilter":return s.Eg[r];case"roleFilter":return s.jN[r];case"permissionFilter":case"lastEditFilter":case"newEditorFilter":case"workspaceFilter":case"idpGroupFilter":case"seatTypeFilter":case"seatChangesFilter":return r;case"licenseGroupFilter":return encodeURIComponent((0,a.CC)(r,n));default:return null}};function u(e,r){if(!e)return null;let n=(0,i.qg)(e);return function(e){let r=e?.[s.e5.productFilter],n=e?.[s.e5.roleFilter],i=r===l.Te.DEV_MODE?s.B9:s.ZL;return!n||i.includes(n)?e:{...e,roleFilter:null}}(Object.keys(n).reduce((e,i)=>{if(!(i in s.Oo))return e;{let a=s.GX[i],o=n[i],l=c(i,o,r);return{...e,...l&&{[a]:l}}}},s.J0))}function p(e,r){return Object.keys(e).reduce((n,i)=>{let a=s.cC[i],o=e[i];return{...n,...o&&{[a]:d(i,o,r)}}},{})}},546246:(e,r,n)=>{n(95650),n(994811),n(376780),n(347184),n(171063),n(871117);var i=(e=>(e.BILLING_STATUS="billing_status",e.TAX_ID_STATUS="tax_id_status",e.DEV_MODE_SUGGESTED_UPGRADES="dev_mode_suggested_upgrades",e))(i||{})},788582:(e,r,n)=>{n.d(r,{CC:()=>o});var i=n(442313);n(556179),n(376780),n(154209);var a=n(469024);function o(e,r){return e===a.s?(0,i.t)("license_group.unassigned"):r[e]?.name??""}n(380859)},622812:(e,r,n)=>{n.d(r,{YP:()=>c,gO:()=>l,n1:()=>u,p9:()=>d}),n(157907);var i=n(376780),a=n(694253),o=n(995946),s=n(667998),l=(e=>(e[e.CLICK_LEAVE=0]="CLICK_LEAVE",e[e.CLICK_WITHDRAW=1]="CLICK_WITHDRAW",e[e.CLICK_JOIN=2]="CLICK_JOIN",e[e.CLICK_REQUEST=3]="CLICK_REQUEST",e[e.BYPASS_REQUEST=4]="BYPASS_REQUEST",e[e.CLICK_JOIN_AS_ADMIN=5]="CLICK_JOIN_AS_ADMIN",e))(l||{});function c(e,r,n,l){let c=(0,a.hasViewerRoleAccessOnTeam)(e.id,n),d=function(e,r){if(!e.org_id)return!1;let n=r.orgTeams?.teams.find(r=>r.id===e.id);if(n)return!!n.orphaned;let i=r.roles.byTeamId[e.id];return!i||Object.values(i).every(e=>e.level<o.e6.ADMIN&&!e.pending)}(e,n);if(c)return 0;if(r&&r.status===s.c.PENDING)return 1;if(e.org_access===i.bU.PRIVATE&&d&&(0,a.canAdminOrg)(l,n)||e.org_access===i.bU.SECRET&&d&&(0,a.canAdminOrg)(l,n))return 4;if((0,a.canManageNonSecretOrgTeam)(e,n,n.user?.id))return 5;if(e.org_access===i.bU.PUBLIC)return 2;if(e.org_access===i.bU.PRIVATE)return 3;return null}let d=e=>`JOINING_ORG_TEAM_${e}`,u=e=>`JOINING_${e.length}_BATCH_ORG_TEAMS_${e[0]}`},620760:(e,r,n)=>{n.d(r,{Hw:()=>s});var i=n(994811);n(405866),n(710665),n(694253),n(412429);var a=(e=>(e[e.NONE=0]="NONE",e[e.SINGLE_TEAM=1]="SINGLE_TEAM",e[e.MULTIPLE_TEAMS=2]="MULTIPLE_TEAMS",e))(a||{}),o=(e=>(e[e.NEVER=0]="NEVER",e[e.ONCE=1]="ONCE",e[e.TWICE=2]="TWICE",e[e.PERMANENTLY=3]="PERMANENTLY",e))(o||{});function s(e){return!!e&&!(0,i.qe)(e.email)}},412429:(e,r,n)=>{n.d(r,{LM:()=>d,WT:()=>m,Xy:()=>p,bC:()=>h,x9:()=>u,xw:()=>c});var i=n(425642);n(6819),n(453822),n(442313),n(871117);var a=n(376780),o=n(494955);n(503024);var s=n(922486),l=n(119310);function c(e){return e.currentUserOrgId&&e.user&&e.orgUsersByOrgId[e.currentUserOrgId]?e.orgUsersByOrgId[e.currentUserOrgId][e.user.id]:null}(0,l.bt)(c);let d=(0,l.bt)(function(e){let r=c(e);return r?.workspace_users?.find(e=>e.is_main_workspace)?.workspace_id}),u=s.x;function p(e){let r=Object.values(e).filter(e=>e.permission===a._D.ADMIN);return(0,i.KQ)(r,"created_at"),r}function m(e,r){let n=e.admin_users_metadata.map(e=>r[e.id]).filter(e=>!!e);return(0,i.KQ)(n,"created_at"),n}function h(e){return e.type===o.Wd.ORG_USER?!!e.scim_seat_type:!e.isOrgInvite&&!!e.scim_seat_type}},154209:(e,r,n)=>{n.d(r,{H_:()=>a,Oe:()=>h,Ts:()=>o,eE:()=>s,kA:()=>m,mg:()=>u,nX:()=>p,wA:()=>c,yK:()=>l}),n(848318),n(716544),n(157907);var i=n(994811);function a(e,r){let n=e.map(e=>e.domain.toLowerCase()),a=(0,i.zN)(r);return 0!==n.length&&!!a&&n.indexOf(a)>-1}function o(e){return e?.id!==void 0}function s(e,r){let n=o(r)?r.email:r;return!!n&&(0,i.xf)(n)&&e.domains.length>0&&!a(e.domains,n)}function l(e){return!!e.currentUserOrgId&&!!e.orgById[e.currentUserOrgId]?.template_picker_disabled}function c(e){return e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null}n(379338),n(493554),n(228238),n(280198),n(442313),n(376780),n(694253),n(75603),n(263144),n(43482),n(635547),n(24096),n(572699);let d=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/(\d+)/);function u(e){return d.test(e)}function p(e){let r=e.match(d);return r?r[1]:null}function m(e){return!!e?.bigma_enabled}function h(e){return m(e)}},710665:(e,r,n)=>{n.d(r,{BR:()=>z,Ht:()=>f,J9:()=>R,KI:()=>O,Kg:()=>D,Ky:()=>W,LF:()=>y,PS:()=>P,PX:()=>T,Rq:()=>K,Rx:()=>B,S$:()=>k,SD:()=>V,UE:()=>G,WQ:()=>w,WW:()=>b,Wf:()=>E,XX:()=>N,ZZ:()=>M,cW:()=>I,dX:()=>U,fD:()=>H,h:()=>v,n0:()=>A,oc:()=>F,w5:()=>C,zZ:()=>g}),n(992277);var i=n(95650),a=n(994811);n(502255);var o=n(416900),s=n(280198),l=n(442313),c=n(719398),d=n(92537),u=n(376780),p=n(694253),m=n(263144),h=n(515673),_=n(765982);let g="https://www.figma.com/pricing/#cid-20p4Q0lWSOxIWj30zTY6P2",f=2,E=1,y={[u._Y.DESIGN]:3,[u._Y.WHITEBOARD]:1,[u._Y.SLIDES]:3,[u._Y.SITES]:3,[u._Y.COOPER]:3,[u._Y.FIGMAKE]:3},b=3,v=0,T=0,I=5;function S(e){return e>new Date}function w(e){let r=e&&!e.org_id&&e.grace_period_end&&i.A.utc(e.grace_period_end);return!!r&&r.valueOf()>Date.now()}function A(e){return!!e&&null!=e.subscription&&e.subscription!==u.Qh.INCOMPLETE}function C(e){return!!e&&(A(e)||e.student_team||!!e.grace_period_end&&S(new Date(e.grace_period_end)))}function N(e){if(!e)return!1;let{subscription:r,studentTeamAt:n,gracePeriodEnd:i}=e;return!!r&&r!==u.Qh.INCOMPLETE||!!n||i&&S(i)}function L(e){let r=e.editorType,n=!!e.team&&!N(e.team),i=!e.teamId&&!e.parentOrgId,a=(0,d.jd)(e.project),o=y[r??u._Y.DESIGN];return r===u._Y.WHITEBOARD?n||i?o:1/0:n&&!a?o:1/0}function O(e){return L(e)<1/0}function R({openFile:e,pageCount:r}){return r>=L(e)}function P(e){return Object.values(e.teams).filter(r=>(0,p.canEditTeam)(r.id,e)&&(!C(r)||r.student_team))}function D(e){return Object.values(e.teams).filter(r=>(0,p.canEditTeam)(r.id,e)&&!C(r))}function M(e,r,n){var i,a,o;return i=e.team_id?r.teams[e.team_id]:null,a=r.user,o=r.userEduGracePeriods,(!!e.team_id||"org_edit"!==e.sharing_audience_control)&&!!(!e.team_id&&!(0,d.Gi)(e)||e.team_id&&(!n&&x(i,a,o)||!C(i)&&(e.is_invite_only||e.is_view_only)))}function k(e,r,n){return!(e.teamId||(0,d.VA)(e))||!!e.teamId&&(!!U(r,n)||(e.inviteOnlyAt||e.viewOnlyAt)&&!N(r))}function F(e,r){return x(r.teams[e],r.user,r.userEduGracePeriods)}function x(e,r,n){return!!e&&!!r&&(e.student_team?!((0,o.cn)(r)||(0,o.SH)(n,e.id).isInValidGracePeriod):e.restrictions_list?.includes(u.P4.LOCKED))}function U(e,r){return!!e&&!!r&&(e.studentTeamAt?!((0,o.cn)(r)||e.eduGracePeriod?.isValid):e.restrictionsList?.includes(u.P4.LOCKED))}function B(e){return Object.values(e.teams).some(r=>F(r.id,e)&&(0,p.canEditTeam)(r.id,e))}function V(e,r){let n=r.orgById[e];return n&&n.standing===m.ZG.SUSPENDED}function G(e,r){if(e.data&&e.data.message){let n=(0,c.J)(e);n&&r(s.s.error(n))}else{let n=(0,c.J)(e,(0,l.YD)("error.unknown_contact_support"));r(s.s.error(n))}}function H(e,r){return e===h.tY.MONTHLY?0:r}function K(e,r){return e===h.tY.MONTHLY?r:0}function W(e,r,n){let i="whiteboard"===n?"whiteboard_paid_status":"design_paid_status";return e.filter(e=>!(0,a.nD)(e.email)&&(e[i]===_.Zf.FULL&&!r.downgrade[n].includes(e.id)||r.upgrade[n].includes(e.id))).length}function z(e,r){let n=!1,i=null!==e?Object.values(e).reduce((e,i)=>{if(!i.user)return e;let a={id:i.user.id,design_paid_status:i.design_paid_status,whiteboard_paid_status:i.whiteboard_paid_status,email:i.user.email||"",handle:i.user.handle||"",img_url:i.user.img_url||""};return i.user?.id===r?.id?(n=!0,e.unshift(a)):e.push(a),e},[]):[];return!n&&r&&i.unshift({id:r.id,design_paid_status:_.Zf.STARTER,whiteboard_paid_status:_.Zf.STARTER,email:r.email,handle:r.handle,img_url:r.img_url}),i}},234433:(e,r,n)=>{n.d(r,{k:()=>o});var i=n(445777),a=n(579020);class o{constructor(e){this.eventName=e,this.fileKey=null,this.nodeChangesSizes=[],this.queries=[],this.replies=[],this.queriesTs=[],this.nodeChangesTs=[],this.repliesTs=[],this.alreadySent=!1,this.logEvent=e=>{if(this.fileKey&&!this.alreadySent)switch(e.type){case"sendSceneGraphQuery":this.queries.push(s(e.queries)),this.queriesTs.push(this.now());break;case"receiveNodeChanges":this.nodeChangesSizes.push(e.size),this.nodeChangesTs.push(this.now());break;case"receiveSceneGraphReply":this.replies.push(s(e.queries)),this.repliesTs.push(this.now());break;case"finishIncrementalLoading":if(e.fileKey===this.fileKey){if(this.nodeChangesSizes.length>0){let r={version:1,fileKey:e.fileKey,nodeChangesSizes:this.nodeChangesSizes,queries:this.queries,replies:this.replies,maxNodeChangesSize:Math.max.apply(null,this.nodeChangesSizes),...l(this.queriesTs,"query",5),...l(this.nodeChangesTs,"node",5),...l(this.repliesTs,"reply",5)};(0,a.sx)(this.eventName,r),this.alreadySent=!0}}else console.error(`IncrementalLoadTimer: file key mismatch ${e.fileKey} != ${this.fileKey}`);this.reset();break;default:(0,i.xb)(e)}}}reset(){this.fileKey=null,this.nodeChangesSizes=[],this.queries=[],this.replies=[],this.queriesTs=[],this.nodeChangesTs=[],this.repliesTs=[],this.alreadySent=!1}now(){return Math.round(performance.now())}setFileKey(e){this.fileKey=e}}function s(e){return[...e].sort().join(",")}function l(e,r,n){let i={};return e.forEach((e,a)=>{a<n&&(i[`${r}.${a}`]=e)}),i}},24096:(e,r,n)=>{n.d(r,{Ay:()=>v,C1:()=>A,D8:()=>N,DN:()=>C,F1:()=>g,GP:()=>E,Jd:()=>I,Pe:()=>b,Pq:()=>f,R$:()=>T,XG:()=>w,Xn:()=>y,qR:()=>S});var i=n(157907),a=n(442313),o=n(935529),s=n(486934),l=n(474880),c=n(376780);n(359399);var d=n(995946),u=n(765982);n(183905);var p=n(60546),m=n(36789),h=n(219205),_=n(871117);function g(){return(0,l.MP)()&&!(0,i.k)().integ_zoom_allow_extensions?{canRun:!1,message:(0,a.t)("widgets.no_zoom_widgets_plugins")}:{canRun:!0}}function f({copyExportRestrictedArgs:e}){return!(e&&b(e))}function E(e){return(0,p.$A)(e.selectedView)?(0,o.tn)(e)&&f({copyExportRestrictedArgs:e.openFile}):!((0,l.MP)()&&!(0,i.k)().integ_zoom_allow_extensions||(0,h.Vj)(e.selectedView)||(0,m.Jh)(e.selectedView))&&!e.mirror.appModel.isReadOnly}function y(e){if(!(0,i.k)().ext_require_appropriate_seat)return!0;if(!e.openFile)return!1;if(!e.openFile.plan?.campfireModelEnabledAt)return!0;let{editorType:r,currentPlanUser:n}=e.openFile,a=(0,_.wR)(r);return!!(n?.seatTypeLicenseTypes||[]).includes(a)}function b(e){return(0,i.k)().file_export_perm_v2?!e.canExport:!e.canEdit&&e.viewerExportRestricted}let v=n(256432).A;function T(e,r){return!!(e&&e.external_restricted_org_id&&e.external_restricted_org_id!==r)}function I(e,r){return"whiteboard"===r?e&&e.whiteboard_paid_status===c.El.RESTRICTED:"slides"!==r&&e&&e.design_paid_status===c.El.RESTRICTED}function S(e,r){return"whiteboard"===r?e&&e.whiteboard_paid_status===u.Zf.RESTRICTED:"slides"!==r&&e&&e.design_paid_status===u.Zf.RESTRICTED}function w(e,r){return null===r||("whiteboard"===r?e&&e.whiteboardPaidStatus===u.Zf.RESTRICTED:"slides"!==r&&e&&e.designPaidStatus===u.Zf.RESTRICTED)}function A(e,r){switch(e){case d.e6.OWNER:return r?(0,a.t)("permissions.level_name.branch_owner"):(0,a.t)("permissions.level_name.owner");case d.e6.ADMIN:return(0,a.t)("permissions.level_name.admin");case d.e6.EDITOR:return(0,a.t)("permissions.level_name.can_edit");case d.e6.VIEWER:return(0,a.t)("permissions.level_name.can_view");case d.e6.VIEW_PROTOTYPES:return(0,a.t)("permissions.level_name.can_view_prototypes");default:return(0,a.t)("permissions.level_name.none")}}function C({role:e,file:r,folder:n=null,isInDraftsFolder:i=!1}){if(e.level!==d.e6.VIEWER&&e.level!==d.e6.VIEW_PROTOTYPES)return null;let o=(0,s.Pn)(r);switch(e.level){case d.e6.VIEWER:{if(r.link_access===c.PQ.EDIT)return(0,a.t)("permissions.can_still_edit_anybody_with_the_link",{noun:o});if(r.link_access===c.PQ.ORG_EDIT&&e.org_user&&e.org_user.permission!==c._D.GUEST)return(0,a.t)("permissions.can_still_edit_org_member_with_link",{noun:o});if(e.pending)break;let s=!!n&&!n.is_invite_only&&!n.is_view_only;return L(!!e.teamLevel&&!i&&e.teamLevel>d.e6.VIEWER&&(!n||s),!!e.folderLevel&&e.folderLevel>d.e6.VIEWER,!!e.repoLevel&&e.repoLevel>d.e6.VIEWER)}case d.e6.VIEW_PROTOTYPES:{if(r.link_access===c.PQ.EDIT)return(0,a.t)("permissions.can_still_see_and_edit_anybody_with_the_link_noun",{noun:o});if(r.link_access===c.PQ.ORG_EDIT&&e.org_user&&e.org_user.permission!==c._D.GUEST)return(0,a.t)("permissions.can_still_see_and_edit_allow_editing_by_org_members_with_link",{noun:o});if(e.pending)break;let i=n&&!n.is_invite_only&&!n.is_view_only;if(e.teamLevel&&e.teamLevel>d.e6.VIEWER&&(!n||i))return(0,a.t)("permissions.can_still_see_and_edit_permission_team_file_is_in",{noun:o});if(e.folderLevel&&e.folderLevel>d.e6.VIEWER)return(0,a.t)("permissions.can_still_see_and_edit_permission_team_project_is_in",{noun:o});if(e.repoLevel&&e.repoLevel>d.e6.VIEWER)return(0,a.t)("permissions.can_still_see_and_edit_permission_main_file",{noun:o});if(r.link_access===c.PQ.VIEW)return(0,a.t)("permissions.can_still_edit_allow_view_anybody_with_link",{noun:o});if(r.link_access===c.PQ.ORG_VIEW&&e.org_user&&e.org_user.permission!==c._D.GUEST)return(0,a.t)("permissions.can_still_edit_allow_edit_anybody_with_link",{noun:o});if(e.teamLevel&&e.teamLevel>=d.e6.VIEWER&&(!n||i))return(0,a.t)("permissions.can_still_see_permission_team_file_is_on",{noun:o});if(e.folderLevel&&e.folderLevel>=d.e6.VIEWER)return(0,a.t)("permissions.can_still_see_permission_project_file_is_on",{noun:o});if(e.repoLevel&&e.repoLevel>=d.e6.VIEWER)return(0,a.t)("permissions.can_still_see_edit_permission_on_main_file",{noun:o})}}return null}function N({file:e,seenState:r,folder:n=null,isInDraftsFolder:i}){let o=(0,s.Pn)(e);if(e.link_access===c.PQ.EDIT)return(0,a.t)("permissions.can_still_edit_anybody_with_the_link",{noun:o});let l=!!n&&!n.is_invite_only&&!n.is_view_only;return L(!!r.teamLevel&&!i&&r.teamLevel>d.e6.VIEWER&&(!n||l),!!r.folderLevel&&r.folderLevel>d.e6.VIEWER,!!r.repoLevel&&r.repoLevel>d.e6.VIEWER)}function L(e,r,n){return e?(0,a.t)("permissions.can_still_edit_team_permissions"):r?(0,a.t)("permissions.can_still_edit_folder_permissions"):n?(0,a.t)("permissions.can_still_edit_edit_permissions"):null}},618593:(e,r,n)=>{n.d(r,{DI:()=>i,VI:()=>m,bJ:()=>_,d6:()=>h,nt:()=>g});var i,a=n(430285),o=n(493554),s=n(448329),l=n(376780),c=n(635547),d=n(997894),u=n(36789),p=n(219205);function m(e){return{canCreateDesignFile:e.canCreateDesignFile,canCreateFigjamFile:e.canCreateFigjamFile,canCreateSlidesFile:e.canCreateSlidesFile,canCreateSitesFile:e.canCreateSitesFile,canCreateCooperFile:e.canCreateCooperFile,canCreateFigmakeFile:e.canCreateFigmakeFile}}function h(e,r){return({[l._Y.DESIGN]:e.canCreateDesignFile,[l._Y.WHITEBOARD]:e.canCreateFigjamFile,[l._Y.SLIDES]:e.canCreateSlidesFile,[l._Y.SITES]:(0,p.oz)()&&e.canCreateSitesFile,[l._Y.COOPER]:(0,s.q)()&&e.canCreateCooperFile,[l._Y.FIGMAKE]:!!(0,u.aI)()&&e.canCreateFigmakeFile})[r]}async function _(e,r){let{project:n}=await d.M4.fetch(c.zCd.Query({projectId:e}));return!!n&&h(n,r)}function g(e){let r=(0,o.Rs)(c.zCd,{projectId:e},{enabled:!!e});return a.Qw.useTransform(r,e=>e.project)}(e=>{function r(e,r){return{canCreateCooperFile:e,canCreateDesignFile:e,canCreateFigjamFile:e,canCreateSlidesFile:e,canCreateSitesFile:e,canCreateFigmakeFile:e,...r}}e.generate=r,e.enabled=function(){return r(!0)},e.disabled=function(){return r(!1)}})(i||(i={}))},694253:(e,r,n)=>{n.d(r,{canAdminOrg:()=>Y,canAdminTeam:()=>U,canEditFolder:()=>M,canEditTeam:()=>x,canEditTeamRole:()=>K,canGuestOrg:()=>z,canManageNonSecretOrgTeam:()=>X,canMemberOrg:()=>$,canOwnFolder:()=>k,canOwnTeam:()=>B,canUploadAndEditVideo:()=>et,canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED:()=>er,canViewFolder_DEPRECATED:()=>D,canViewTeam:()=>F,getExplicitRoleForUserAndFile:()=>N,getPermissionsState:()=>b,getPermissionsStateMemoized:()=>v,getReadOnlyOverrideMessageForFolder:()=>ee,getResourceTeamId:()=>T,getRolesForResource:()=>L,hasAdminRoleAccessOnTeam:()=>H,hasEditorRoleAccessOnTeam:()=>G,hasViewerRoleAccessOnTeam:()=>V,isFigJamDisabledForOrg:()=>Q,isFileFigjamDisabled:()=>J,isOrgUserExternallyRestrictedFromState:()=>Z,isResourceOwner:()=>I,userIsAMemberOfAnOrg:()=>q});var i=n(157907),a=n(508242),o=n(69590),s=n(6819),l=n(416900),c=n(442313),d=n(92537),u=n(376780),p=n(412429),m=n(710665),h=n(337569),_=n(494955),g=n(995946),f=n(24096);function E(e,r,n,i,a,o,s,l,c,d,u,p,m,h,_){return{currentUserOrgId:e,user:r,fileByKey:n,repos:i,folders:a,teams:o,roles:s,orgById:l,orgUsersByOrgId:c,teamUserByTeamId:d,userEduGracePeriods:u,licenseGroups:p,orgTeams:m,openFile:h,currentTeamId:_}}let y=(0,a.xx)(E);function b(e){return E(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}function v(e){return y(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}function T(e,r){switch(e.resource_type){case u.vt.FILE:let n=r.fileByKey[e.resource_id_or_key];return n&&n.team_id;case u.vt.FILE_REPO:let i=r.repos[e.resource_id_or_key],a=r.folders[i?.folder_id];return a?.team_id??null;case u.vt.FOLDER:let o=r.folders[e.resource_id_or_key];return o?.team_id??null;case u.vt.TEAM:return e.resource_id_or_key}}function I(e,r,n,i){let a=function(e,r){switch(r){case u.vt.FILE:return e.byFileKey;case u.vt.FILE_REPO:return e.byRepoId;case u.vt.FOLDER:return e.byFolderId;case u.vt.TEAM:return e.byTeamId}}(i,n)[r];return!!a&&e in a&&a[e].level===g.e6.OWNER}function S(e,r){for(let n of e)if(n.level>=r)return!0;return!1}function w(e,r){let n=r.user?.id,i=r.roles;return e in i.byTeamId&&n&&n in i.byTeamId[e]?[i.byTeamId[e][n]]:[]}function A(e,r){let n=r.user&&r.user.id,i=[],a=r.roles;e in a.byFolderId&&n&&n in a.byFolderId[e]&&i.push(a.byFolderId[e][n]);let o=r.folders[e];return o&&o.team_id&&!o.is_invite_only&&(i=i.concat(w(o.team_id,r))),i}function C(e,r){let n=r.user&&r.user.id,i=r.roles,a=[];e in i.byRepoId&&n&&n in i.byRepoId[e]&&a.push(i.byRepoId[e][n]);let o=r.repos[e];return o&&(a=[...a,...A(o.folder_id,r)]),a}function N(e,r){let n=r.user&&r.user.id,i=r.roles;return e in i.byFileKey&&n&&n in i.byFileKey[e]?i.byFileKey[e][n]:null}function L(e,r,n){switch(e){case u.vt.FILE:return function(e,r){let n=[],i=N(e,r);null!==i&&n.push(i);let a=r.fileByKey[e];return a&&a.folder_id&&(n=n.concat(A(a.folder_id,r))),a&&a.file_repo_id&&(n=[...n,...C(a.file_repo_id,r)]),n}(r,n);case u.vt.FILE_REPO:return C(r,n);case u.vt.FOLDER:return A(r,n);case u.vt.TEAM:return w(r,n)}}function O(e,r,n){let a=(0,h._)(e,n);if(!a)return!1;let o=n.user?.id,s=a.org_id,l=(0,i.k)().sc_open_team_deprecation,c=a.sharing_audience_control;if(s){let i=!l&&r<=g.e6.EDITOR&&$(s,n)&&a.org_access===u.bU.PUBLIC&&a.default_permission===u.sC.EDIT,d=S(w(e,n),r),p=r<=g.e6.ADMIN&&(d||X(a,n,o)),m=!l&&r<=g.e6.VIEWER&&$(s,n)&&a.org_access===u.bU.PUBLIC,h=$(s,n)&&(r<=g.e6.VIEWER&&c===u.PQ.ORG_VIEW||r<=g.e6.EDITOR&&c===u.PQ.ORG_EDIT);return(p||m||d||i||h)&&z(s,n)}return R(e,r,n)}function R(e,r,n){return S(w(e,n),r)&&!function(e,r,n){if(n.user&&!(0,l.cn)(n.user))return!1;let i=(0,h._)(e,n);if(!i)return!1;let a=!!n.user&&(0,l.GU)(n.userEduGracePeriods,(0,l.cn)(n.user),i.id,i.student_team).showAccessRestricted;return r>g.e6.VIEWER&&a}(e,r,n)}function P(e,r,n){let a;let o=n.user&&n.user.id,s=n.folders[e];if(!o||!s)return!1;let l=(0,d.oq)(s.id,n);if(l&&!z(l,n))return!1;let c=s.team_id&&n.teams[s.team_id],p=(0,i.k)().sc_open_team_deprecation,m=s.sharing_audience_control;if(!p&&l&&$(l,n)&&r<=g.e6.VIEWER&&c&&c.org_access===u.bU.PUBLIC&&!s.is_invite_only||!p&&l&&$(l,n)&&r<=g.e6.EDITOR&&c&&c.org_access===u.bU.PUBLIC&&!s.is_invite_only&&!s.is_view_only&&c.default_permission===u.sC.EDIT||l&&$(l,n)&&(r<=g.e6.EDITOR&&m===u.PQ.ORG_EDIT||r<=g.e6.VIEWER&&m===u.PQ.ORG_VIEW))return!0;let h=A(e,n);return(h.forEach(e=>{e.resource_type===u.vt.FOLDER&&(a=e)}),!s.team_id||s.is_invite_only||s.is_view_only&&r>=g.e6.EDITOR)?!!a&&a.level>=r:S(h,r)}function D(e,r){return P(e,g.e6.VIEWER,r)}function M(e,r){return P(e,g.e6.EDITOR,r)}function k(e,r){return P(e,g.e6.OWNER,r)}function F(e,r){return O(e,g.e6.VIEWER,r)}function x(e,r){return O(e,g.e6.EDITOR,r)}function U(e,r){return O(e,g.e6.ADMIN,r)}function B(e,r){return O(e,g.e6.OWNER,r)}function V(e,r){return R(e,g.e6.VIEWER,r)}function G(e,r){return R(e,g.e6.EDITOR,r)}function H(e,r){return R(e,g.e6.ADMIN,r)}function K(e,r){return e.level!==g.e6.OWNER&&(e.level===g.e6.ADMIN?U(e.resource_id_or_key,r):x(e.resource_id_or_key,r))}function W(e,r,n){return n?e.orgUsersByOrgId[r]?.[n]??(0,o.J)(e,"org_user",r):null}function z(e,r){let n=r.user;if(!e||!n)return!1;let i=r.orgById[e]??(0,o.J)(r,"org",e);return j(W(r,e,n.id),i,_.jh.GUEST)}function $(e,r,n){if(!e)return!1;n=n||r.user?.id;let i=r.orgById[e]??(0,o.J)(r,"org",e);return j(W(r,e,n),i,_.jh.MEMBER)}function Y(e,r,n){if(!e)return!1;let i=r.orgById[e]??(0,o.J)(r,"org",e);return n=n||r.user?.id,j(W(r,e,n),i,_.jh.ADMIN)}function j(e,r,n){return!!r&&!!e&&(0,f.Ay)(e.permission)>=n}function q(e,r){return(0,p.x9)(e.orgUsersByOrgId,r).some(n=>$(n.org_id,e,r))}function X(e,r,n){return e.org_access!==u.bU.SECRET&&function(e,r,n){if(!(n=n||r.user?.id)||!e||!r.currentUserOrgId)return!1;let i=r.currentUserOrgId&&r.user&&r.orgUsersByOrgId[r.currentUserOrgId]?r.orgUsersByOrgId[r.currentUserOrgId][n]:null;null===i&&(i=(0,o.J)(r,"org_user",r.currentUserOrgId));let a=(0,h._)(e,r);if(!a||!i||r.currentUserOrgId!==a.org_id)return!1;if(H(e,r))return!0;let s=Y(r.currentUserOrgId,r,n);return a.org_access!==u.bU.SECRET&&(s||!!(a.workspace_id&&function(e,r,n){n=n||r.user?.id;let i=r.currentUserOrgId;return!!(e&&n&&i&&r.orgUsersByOrgId?.[i]?.[n].workspace_users?.find(r=>r.permission===u.bp.ADMIN&&r.workspace_id===e))}(a.workspace_id,r,n)))}(e.id,r,n)}function Z(e){return(0,f.R$)(e.user,e.currentUserOrgId)}function J(e,r){return"whiteboard"===e.editorType&&!!e.parentOrgId&&!!r.orgById[e.parentOrgId]?.figjam_disabled_at}function Q(e,r){return!!e&&!!r.orgById[e]?.figjam_disabled_at}function ee(e,r){if(e.level!==g.e6.VIEWER&&e.level!==g.e6.VIEW_PROTOTYPES)return null;let n=r.folders[e.resource_id_or_key];if(!n)return null;let i=e.user_id&&n.team_id&&r.roles.byTeamId[n.team_id]&&r.roles.byTeamId[n.team_id][e.user_id],a=!n.is_invite_only&&!n.is_view_only;return i&&i.level>g.e6.VIEWER&&a?(0,c.t)("permissions.can_still_edit_team_project_is_in"):null}function et(e,r){return!!e&&!!e.canEdit&&(e.team?(0,m.w5)(e.teamId?r.teams[e.teamId]:void 0):!!e.parentOrgId)}function er(){if(void 0===s.D)return!1;let e=s.D.getState(),r=b(e);return et(e.openFile,r)}},572699:(e,r,n)=>{n.d(r,{$g:()=>V,A8:()=>Z,FR:()=>z,Kd:()=>et,Mg:()=>Q,NN:()=>U,NP:()=>k,ST:()=>C,Tn:()=>W,UP:()=>B,Xd:()=>R,b_:()=>F,bv:()=>H,dh:()=>M,gI:()=>K,hk:()=>x,j_:()=>ee,n4:()=>D,rC:()=>O,rs:()=>P,tJ:()=>L,u3:()=>G,wb:()=>$,wt:()=>J,wy:()=>A,yN:()=>N});var i=n(848318),a=n(716544),o=n(445777),s=n(719670),l=n(988520),c=n(39773),d=n(430285),u=n(579020),p=n(653959),m=n(389191),h=n(502255),_=n(579463),g=n(155651),f=n(87089),E=n(376780),y=n(412429),b=n(710665),v=n(922030),T=n(492317);let I=new Map;function S(e,r,n={}){let i=[e,n.component,n.attribute,n.model].join("__________");I.has(i)||(u.az.trackDefinedEvent(e,r),I.set(i,!0))}function w(e,r,n){if(!n){window.__jestConfig__?.rolloutFlags&&(n="cutover");let i=(0,_.gP)(e);(n=i?.get(r||"group_default",void 0))||(n="passthrough")}return n}function A(e){let{name:r}=(0,g.j6)(),n=w("tou_current_plan_user_migrator_config",e.migrationGroup,e.phase),u=i.useRef(!1),p="shadowread"===n||"cutover"===n,h=(0,a.d4)(e=>{let r=e.user?.id;return r?e.teamUserByTeamId?.[v.ZT(e)]?.[r]??null:null}),_=(0,a.d4)(e=>(0,y.xw)(e)),f=(0,c.md)((0,T.gq)(p))??d.Qw.loaded(null),E="loaded"===f.status?f.data:null;(0,m.oY)(p&&"loaded"===f.status,n=>{S("plans.current_plan_user_lg_load_timing",{model:"planUser",type:E?.key.type??"",duration:n,component:e.component,attribute:e.attribute,migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute,model:"planUser"})});let b=e.legacy(h??null,_??null);if("passthrough"===n)return b;let I=e.migrated(E);switch("shadowread"===n&&!u.current&&((0,l.Vq)(h)||(0,l.Vq)(_))&&"loaded"===f.status&&!(0,s.c2)(b,I)&&(S("plans.current_plan_user_view_shadow_error",{type:E?.key.type??"",component:e.component,attribute:e.attribute,phase:n,migrationGroup:e.migrationGroup,legacyValue:JSON.stringify(b),migratedValue:JSON.stringify(I),trackingContext:r},{component:e.component,attribute:e.attribute,model:"planUser"}),u.current=!0),n){case"shadowread":return b;case"cutover":return I;default:(0,o.xb)(n)}}function C(e){let{name:r}=(0,g.j6)(),n=w("tou_lg_migrator_config",e.migrationGroup,e.phase),a="[LG] "+e.component,l="[LG] "+e.attribute,c=i.useRef(!1),d="shadowread"===n||"cutover"===n,u="loaded"===e.lgQuery.status?e.lgQuery.data:null;(0,m.oY)(d&&"loaded"===e.lgQuery.status,n=>{S("plans.current_plan_user_lg_load_timing",{model:"planUser",type:"",duration:n,component:a,attribute:l,migrationGroup:e.migrationGroup,trackingContext:r},{component:a,attribute:l,model:"planUser"})});let p=e.legacy(u);if("passthrough"===n)return p;let h=e.migrated(u);switch("shadowread"!==n&&"cutover"!==n||c.current||"loaded"!==e.lgQuery.status||(0,s.c2)(p,h)||(S("plans.current_plan_user_view_shadow_error",{type:"",component:a,attribute:l,phase:n,migrationGroup:e.migrationGroup,legacyValue:JSON.stringify(p),migratedValue:JSON.stringify(h),trackingContext:r},{component:a,attribute:l,model:"planUser"}),c.current=!0),n){case"shadowread":return p;case"cutover":return h;default:(0,o.xb)(n)}}function N(e){let{name:r}=(0,g.j6)(),n=w("tou_current_user_plan_migrator_config",e.migrationGroup,e.phase),a=i.useRef(!1),u="shadowread"===n||"cutover"===n,p=(0,v.ol)(),h=(0,f.sZ)(),_=(0,c.md)((0,T.rQ)(u))??d.Qw.loaded(null),E=(0,c.md)((0,T.Oh)(u))??d.Qw.loaded(null),y="loaded"===_.status?_.data:null,b="loaded"===E.status?E.data:null;(0,m.oY)(u&&"loaded"===_.status,n=>{S("plans.current_plan_lg_load_timing",{model:"planPublicInfo",type:y?.key.type??"",duration:n,component:e.component,attribute:e.attribute,migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute,model:"planPublicInfo"})}),(0,m.oY)(u&&"loaded"===E.status,n=>{S("plans.current_plan_lg_load_timing",{model:"plan",type:b?.key.type??"",duration:n,component:e.component,attribute:e.attribute,migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute,model:"plan"})});let I=e.legacy(p??null,h??null);if("passthrough"===n)return I;let A=e.migrated(y,b);switch(("shadowread"===n||"cutover"===n)&&!a.current&&((0,l.Vq)(p)||(0,l.Vq)(h))&&"loaded"===_.status&&!(0,s.c2)(I,A)&&(S("plans.current_plan_view_shadow_error",{type:y?.key.type??"",component:e.component,attribute:e.attribute,phase:n,legacyValue:JSON.stringify(I),migratedValue:JSON.stringify(A),migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute}),a.current=!0),n){case"shadowread":return I;case"cutover":return A;default:(0,o.xb)(n)}}function L(){return(0,c.md)((0,T.Oh)(!0))}function O({reportErrorsToTeam:e}){let r=L(),[n]=(0,p.mI)(r);if("loaded"!==n.status){let r=Error("disabled"===n.status?"Plan fetching disabled":"Error fetching plan");throw(0,h.$D)(e,r),r}let i=n.data;if(!i){let r=Error("No Plan found");throw(0,h.$D)(e,r),r}return i}function R(){return(0,c.md)((0,T.gq)(!0))}function P(){return(0,c.md)((0,T.rQ)(!0))}function D(){let e=P().unwrapOr(null);return e?e.tier:null}function M(e){return N({...e,attribute:"planName",legacy:(e,r)=>r?.name||e?.name,migrated:(e,r)=>r?.name})}function k(e){return N({...e,attribute:"teamPlanId",legacy:(e,r)=>e?.org_id?void 0:e?.id,migrated:e=>{if(e?.key.type===E.OL.TEAM)return e?.key.parentId??void 0}})}function F(e){return N({...e,attribute:"orgId",legacy:(e,r)=>r?.id,migrated:e=>{if(e?.key.type===E.OL.ORG)return e?.key.parentId??void 0}})}function x(e){return N({...e,attribute:"planParentId",legacy:(e,r)=>r?.id??e?.id,migrated:e=>e?.key.parentId??void 0})}function U(e){return A({...e,attribute:"currentOrgUserUserId",legacy:(e,r)=>r?.user_id,migrated:Y})}function B(e){return N({...e,attribute:"planType",legacy:(e,r)=>r?E.OL.ORG:e?E.OL.TEAM:void 0,migrated:e=>e?.key.type})}function V(e){return N({...e,attribute:"hasPlan",legacy:(e,r)=>!!e&&!r,migrated:e=>e?.key.type===E.OL.TEAM})}function G(e){return N({...e,attribute:"hasPlan",legacy:(e,r)=>!!r,migrated:e=>e?.key.type===E.OL.ORG})}function H(e){let r=B(e);return N({...e,attribute:"hasPlanUser",legacy:(e,n)=>{switch(r){case E.OL.ORG:return!!n;case E.OL.TEAM:return!!e;default:return!1}},migrated:e=>!!r&&!!e})}function K(e){return A({...e,attribute:"isOrgAdmin",legacy:(e,r)=>r?.permission===E._D.ADMIN,migrated:j})}function W(e){return A({...e,attribute:"isOrgGuest",legacy:(e,r)=>r?.permission===E._D.GUEST,migrated:X})}function z(e){return N({...e,attribute:"isProTeam",legacy:e=>(0,b.w5)(e)&&!e?.org_id,migrated:e=>!!e&&[E.Ag.PRO,E.Ag.STUDENT].includes(e.tier)})}function $(e){return N({...e,attribute:"isEnterprise",legacy:(e,r)=>!!r?.bigma_enabled,migrated:e=>e?.tier===E.Ag.ENTERPRISE})}function Y(e){return e?.key?.parentId??void 0}function j(e){return e?.key.type===E.h4.ORG_USER&&e?.permission===E.Xn.ADMIN}function q(e){return e?.key.type===E.h4.ORG_USER&&e?.permission===E.Xn.MEMBER}function X(e){return e?.key.type===E.h4.ORG_USER&&e?.permission===E.Xn.GUEST}function Z(e,r){switch(r){case E.Xn.ADMIN:return j(e);case E.Xn.MEMBER:return q(e)||j(e);case E.Xn.GUEST:return X(e)||q(e)||j(e);default:(0,o.xb)(r)}}function J(){return j(R().unwrapOr(null))}function Q(){let e=R().unwrapOr(null);return e?.permission===E.Xn.ADMIN}function ee(){let e=R();return i.useMemo(()=>e.transform(e=>Z(e,E.Xn.ADMIN)),[e])}function et(){let e=R();return i.useMemo(()=>e.transform(e=>Z(e,E.Xn.MEMBER)),[e])}},298461:(e,r,n)=>{n.d(r,{LC:()=>l,OL:()=>a.OL,i5:()=>s,s$:()=>o});var i=n(878028),a=n(376780),o=(e=>(e.DISABLE_FIGJAM="disable_figjam",e.DISABLE_WORKSHOP="disable_workshop",e.VOICE="voice",e.DISABLE_AI_FEATURES="disable_ai_features",e))(o||{}),s=(e=>(e.ELIGIBLE="eligible",e.UPSELL="upsell",e.INELIGIBLE="ineligible",e))(s||{}),l=(e=>(e.ENABLED="enabled",e.DISABLED="disabled",e))(l||{});let c=i.z.object({supports:i.z.nativeEnum(s),enabled:i.z.nativeEnum(l)});i.z.object({disable_figjam:c,voice:c,disable_workshop:c,disable_ai_features:c})},834542:(e,r,n)=>{n.d(r,{Ef:()=>p,HT:()=>d,RB:()=>u});var i=n(445777);n(994811),n(871117);var a=n(376780),o=n(298461);let s={[o.s$.VOICE]:{environments:{gov:o.i5.INELIGIBLE},tiers:{[a.Ag.ORG]:o.i5.ELIGIBLE,[a.Ag.ENTERPRISE]:o.i5.ELIGIBLE,[a.Ag.PRO]:o.i5.ELIGIBLE,[a.Ag.STUDENT]:o.i5.ELIGIBLE,[a.Ag.STARTER]:o.i5.UPSELL}},[o.s$.DISABLE_WORKSHOP]:{environments:{gov:o.i5.ELIGIBLE},tiers:{[a.Ag.ORG]:o.i5.ELIGIBLE,[a.Ag.ENTERPRISE]:o.i5.ELIGIBLE,[a.Ag.PRO]:o.i5.UPSELL,[a.Ag.STUDENT]:o.i5.UPSELL,[a.Ag.STARTER]:o.i5.UPSELL}},[o.s$.DISABLE_FIGJAM]:{environments:{gov:o.i5.ELIGIBLE},tiers:{[a.Ag.ORG]:o.i5.ELIGIBLE,[a.Ag.ENTERPRISE]:o.i5.ELIGIBLE,[a.Ag.PRO]:o.i5.UPSELL,[a.Ag.STUDENT]:o.i5.UPSELL,[a.Ag.STARTER]:o.i5.UPSELL}},[o.s$.DISABLE_AI_FEATURES]:{environments:{gov:o.i5.ELIGIBLE},tiers:{[a.Ag.ORG]:o.i5.ELIGIBLE,[a.Ag.ENTERPRISE]:o.i5.ELIGIBLE,[a.Ag.PRO]:o.i5.ELIGIBLE,[a.Ag.STUDENT]:o.i5.ELIGIBLE,[a.Ag.STARTER]:o.i5.ELIGIBLE}}};function l(e,r,n=window.INITIAL_OPTIONS.cluster_name){return"gov"===n&&s[r].environments.gov?s[r].environments.gov:e&&s[r]?.tiers[e.tier]?s[r].tiers[e.tier]:o.i5.INELIGIBLE}function c(e,r,n=window.INITIAL_OPTIONS.cluster_name){if(l(e,r,n)===o.i5.INELIGIBLE||!e)return o.LC.DISABLED;let a=l(e,r,n);switch(r){case o.s$.VOICE:if(a===o.i5.ELIGIBLE)return e.voiceEnabled?o.LC.ENABLED:o.LC.DISABLED;return o.LC.DISABLED;case o.s$.DISABLE_FIGJAM:if(a===o.i5.ELIGIBLE)return e.figjamDisabledAt?o.LC.ENABLED:o.LC.DISABLED;return o.LC.DISABLED;case o.s$.DISABLE_WORKSHOP:if(a===o.i5.ELIGIBLE)return e.workshopEnabled?o.LC.DISABLED:o.LC.ENABLED;return o.LC.DISABLED;case o.s$.DISABLE_AI_FEATURES:if(a===o.i5.ELIGIBLE)return e.aiFeaturesEnabled?o.LC.ENABLED:o.LC.DISABLED;return o.LC.DISABLED;default:(0,i.xb)(r,"Unknown plan feature")}}function d(e){return{...e,voice:{supports:l(e,o.s$.VOICE),enabled:c(e,o.s$.VOICE)},disable_figjam:{supports:l(e,o.s$.DISABLE_FIGJAM),enabled:c(e,o.s$.DISABLE_FIGJAM)},disable_workshop:{supports:l(e,o.s$.DISABLE_WORKSHOP),enabled:c(e,o.s$.DISABLE_WORKSHOP)},disable_ai_features:{supports:l(e,o.s$.DISABLE_AI_FEATURES),enabled:c(e,o.s$.DISABLE_AI_FEATURES)}}}function u(e,r){switch(e){case a.OL.TEAM:return r.team;case a.OL.ORG:return r.org;default:(0,i.xb)(e)}}function p(e,r){return{...u(e,r),planType:e}}},950774:(e,r,n)=>{let i;n.d(r,{$y:()=>X,BT:()=>Y,B_:()=>eI,Bs:()=>Q,Cu:()=>ep,G1:()=>el,H4:()=>eS,I2:()=>k,IM:()=>ea,It:()=>eP,KB:()=>D,LL:()=>C,ME:()=>eE,Mw:()=>K,OD:()=>em,Q4:()=>U,Ql:()=>V,Qx:()=>eo,Rp:()=>x,Sf:()=>R,Sx:()=>en,Ty:()=>M,VM:()=>B,Vb:()=>ee,W5:()=>F,Xx:()=>L,_C:()=>Z,b_:()=>W,cI:()=>O,d1:()=>i,dG:()=>eR,dM:()=>et,f$:()=>eu,f2:()=>er,fS:()=>eO,fd:()=>$,hY:()=>eT,i1:()=>q,iP:()=>z,jG:()=>eL,jS:()=>G,n4:()=>ef,nf:()=>J,o5:()=>ed,oZ:()=>es,po:()=>P,q$:()=>j,qC:()=>eM,sd:()=>ei,wk:()=>N,xi:()=>A});var a=n(551316),o=n(992277),s=n(741419),l=n(206651),c=n(179703),d=n(502255),u=n(107062);let p=[],m=[],h=[],_=[],g=[],f=[],E=[],y=[],b=[],v=[],T=[],I=[],S=null,w=new class{constructor(){this.task=null,this.eventByGuid=new Map,this.styleEventByGuid=new Map,this.nodeEventByGuid=new Map,this.timeOutMs=100,this.flush=()=>{let e=[];for(let r of this.eventByGuid.values())if("NONE"!==r.nodeType)for(let n of r.events)e.push(this.injectTypeIntoEvent(r,n));for(let r of g)r(e);let r=[];for(let e of this.styleEventByGuid.values())if("NONE"!==e.nodeType)for(let n of e.events)r.push(n);for(let e of f)e(r);let n=[];for(let e of this.nodeEventByGuid.values())if("NONE"!==e.nodeType)for(let r of e.events)n.push({...r,nodeType:e.nodeType});for(let e of E)e(n);this.eventByGuid.clear(),this.styleEventByGuid.clear(),this.nodeEventByGuid.clear(),this.task=null}}onEventFired(e){null==this.task&&(this.task=scheduler.postTask(this.flush,{delay:this.timeOutMs,priority:"user-visible"}));let r=this.eventByGuid.get(e.id)??{nodeType:this.publicNodeTypeFromEvent(e),events:[]};if(!r)return;"NONE"===r.nodeType&&(r.nodeType=this.publicNodeTypeFromEvent(e));let n=r.events.find(r=>r.type===e.type&&r.origin===e.origin);if(n)for(let r of e.properties)n.properties.add(r);else{let n=(0,c.UN)().get(e.id);n&&(e.type===s.iIc.STYLE_PROPERTY_CHANGE||e.type===s.iIc.STYLE_CREATE||e.type===s.iIc.STYLE_DELETE?n.styleKeyForPublish&&r.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),styleKey:(0,l.nM)({key:n.styleKeyForPublish,version:n.styleVersionHash})}):r.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),devFriendlyId:(0,c.UN)().developerFriendlyIdFromGuid(e.id),oldContainingCanvas:e.oldContainingCanvas}))}this.eventByGuid.set(e.id,r);let i=(0,c.UN)().get(e.id);if(i){if(i.styleKeyForPublish){let n=r.events.filter(e=>e.type===s.iIc.STYLE_DELETE||e.type===s.iIc.STYLE_CREATE||e.type===s.iIc.STYLE_PROPERTY_CHANGE);this.styleEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:n})}else{let n=r.events.filter(e=>e.type===s.iIc.CREATE||e.type===s.iIc.PROPERTY_CHANGE||e.type===s.iIc.DELETE).map(e=>{let r="";return e.type===s.iIc.CREATE||e.type===s.iIc.PROPERTY_CHANGE?r=i.containingCanvas||"":e.type===s.iIc.DELETE&&(r=e.oldContainingCanvas?.toString()||""),""===r&&(0,d.$D)(o.e.EXTENSIBILITY,Error("Containing canvas for nodechange event is empty")),{...e,containingCanvas:r}});this.nodeEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:n})}}}publicNodeTypeFromEvent(e){let r=(0,c.UN)().get(e.id);return r&&r?.type!=="NONE"?(0,u.w)(r):"NONE"}injectTypeIntoEvent(e,r){return r.type===s.iIc.CREATE||r.type===s.iIc.DELETE||r.type===s.iIc.PROPERTY_CHANGE?{...r,nodeType:e.nodeType}:r}};function A(){i={selectionChange(e){for(let r of p)e?r.boxSelection():r.normal()},boxSelectionEnded(){for(let e of p)e.boxSelection.flush()},currentPageChange(){for(let e of m)e()},timerChange(e){for(let r of h)r(e)},documentChange(e){w.onEventFired(e)},codegenPreferencesChange(e){for(let r of y)r(e)},slidesViewChange(e){for(let r of b)r({view:e})},stackInvariantsEnforced(e){eD?.(e)},pluginPageLoaded(e){for(let r of v)r(e)},pluginAccessibleNodeIds(){let e=new Set;for(let r of T)r().forEach(r=>e.add(r));return Array.from(e)},pluginAccessiblePages(){let e=new Set;for(let r of I)r().forEach(r=>e.add(r));return Array.from(e)}}}function C(e){p.push({normal:e,boxSelection:(0,a.s)(e,500)})}function N(e){p=p.filter(r=>r.normal!==e||(r.boxSelection.cancel(),!1))}function L(e){m.push(e)}function O(e){m=m.filter(r=>r!==e)}function R(e){h.push(e)}function P(e){h=h.filter(r=>r!==e)}function D(e){_.push(e)}function M(e){_=_.filter(r=>r!==e)}function k(e){for(let r of _)if(!1===r(e))return!1;return!0}function F(e){v.push(e)}function x(e){v=v.filter(r=>r!==e)}function U(e){T.push(e)}function B(e){T=T.filter(r=>r!==e)}function V(e){I.push(e)}function G(e){I=I.filter(r=>r!==e)}function H(){g.length||f.length||E.length?s.NfO.setIsDocumentChangeCallbackRegistered(!0):s.NfO.setIsDocumentChangeCallbackRegistered(!1)}function K(e){g.push(e),H()}function W(e){g=g.filter(r=>r!==e),H()}function z(e){f.push(e),H()}function $(e){f=f.filter(r=>r!==e),H()}function Y(e){E.push(e),H()}function j(e){E=E.filter(r=>r!==e),H()}function q(e){y.push(e)}function X(e){y=y.filter(r=>r!==e)}function Z(e){b.push(e),H()}function J(e){b=b.filter(r=>r!==e),H()}let{set:Q,remove:ee,has:et,runOrTimeout:er}=ek(),{set:en,remove:ei,has:ea,run:eo}=ek(),{set:es,remove:el,has:ec,run:ed,reset:eu,runOrTimeout:ep}=ek(),{set:em,remove:eh,has:e_,run:eg,reset:ef}=ek(),{set:eE,remove:ey,has:eb,run:ev,reset:eT}=ek(),{set:eI,remove:eS,has:ew,run:eA,reset:eC,runOrTimeout:eN}=ek();function eL(e){S=e}function eO(){return!!S}function eR(){S=null}async function eP(){return!S||await S()}let eD=null;function eM(e){return eD=e,()=>eD=null}function ek(){let e;let r=new Promise(r=>{e=r}),n=null,i=()=>{r=new Promise(r=>{e=r}),n=null},a=async(...e)=>{let n=await r;return await n(...e)};return{set:r=>{n=r,e(r)},remove:e=>{e===n&&i()},has:()=>!!n,run:a,runOrTimeout:async(e,...r)=>{let n=!1,i=new Promise(r=>{setTimeout(()=>{n=!0,r()},e)}),o=await Promise.race([a(...r),i]);return n?{didRun:!1}:{didRun:!0,returnValue:o}},reset:i}}},402840:(e,r,n)=>{n.d(r,{$H:()=>eQ,$u:()=>tg,AG:()=>ti,Ar:()=>eS,Bw:()=>e4,CA:()=>ed,CB:()=>eN,DM:()=>t_,Df:()=>ee,EK:()=>ea,EY:()=>ex,GX:()=>J,Gc:()=>e1,JT:()=>e2,K$:()=>en,L1:()=>eY,L8:()=>e3,LW:()=>tp,M5:()=>e6,MB:()=>eg,MH:()=>e0,Mi:()=>e7,Ms:()=>em,NW:()=>tn,Oe:()=>ef,Pl:()=>es,Pz:()=>et,Q4:()=>eF,Qt:()=>eP,Qx:()=>eA,Rd:()=>eR,Rt:()=>eM,Ru:()=>tr,SW:()=>eZ,Sb:()=>er,T:()=>ei,Th:()=>th,Tk:()=>eL,UH:()=>te,VQ:()=>tf,W4:()=>tl,WC:()=>e8,YG:()=>tc,YQ:()=>tE,ZB:()=>eJ,ZT:()=>eU,_H:()=>e9,_V:()=>tu,_w:()=>eD,c2:()=>q,fR:()=>e5,i8:()=>eX,ky:()=>ek,lT:()=>eb,mI:()=>ej,mm:()=>eh,mx:()=>tm,my:()=>eO,nW:()=>eH,nf:()=>eq,oD:()=>eG,ou:()=>eW,pk:()=>tt,qH:()=>eu,t3:()=>e_,tH:()=>e$,u0:()=>ez,uF:()=>ew,vj:()=>eV,wf:()=>eB,xC:()=>ta}),n(352004);var i=n(716544),a=n(425642),o=n(445777),s=n(992277),l=n(157907),c=n(210709),d=n(994811),u=n(6819),p=n(831932),m=n(16196),h=n(502255),_=n(896966),g=n(431118),f=n(808471),E=n(757033),y=n(442313),b=n(697714),v=n(23354),T=n(364370),I=n(544795),S=n(651638),w=n(285647),A=n(992444);n(718451);var C=n(263148),N=n(376780),L=n(24096),O=n(487088),R=n(75603),P=n(241917),D=n(302302),M=n(467733),k=n(677251),F=n(492119),x=n(192553),U=n(323935),B=n(858614),V=n(643249),G=n(710994),H=n(60546),K=n(625069),W=n(914443),z=n(273216),$=n(974326),Y=n(249863),j=n(698522);async function q(e,{ignoreMissingEditorType:r,resourceType:n,isPublishing:i}){let a=await e_(e,{resourceType:n});if(r&&a.error?.text===el)return a.manifest;if(a.error)throw Error((0,k.am)(a.error));return a.manifest}function X({parameters:e,parameterOnly:r},n){if(e&&function(e,r){if(!e.length)throw Error(`Expected "${r}.parameters" to have non-empty parameter list.`);let n=new Set;e.forEach(e=>{if(n.has(e.key))throw Error(`Expected "${r}.parameters" to have unique keys, but got more than one parameter with key: "${e.key}"`);n.add(e.key)});let i=!1;for(let{key:r,optional:n}of e){if(i&&!n)throw Error(`Optional parameters must be listed last in the parameter list. ${r} not marked as optional.`);n&&(i=!0)}}(e,n),r&&!e)throw Error(`Expected parameters to be defined for "${n}" marked as parameterOnly.`)}let Z={[P.nT.Design]:k.FW.FIGMA,[P.nT.DevHandoff]:k.FW.DEV,[P.nT.Whiteboard]:k.FW.FIGJAM,[P.nT.Slides]:k.FW.SLIDES,[P.nT.Sites]:k.FW.SITES,[P.nT.Figmake]:k.FW.SITES,[P.nT.Cooper]:k.FW.FIGMA,[P.nT.Illustration]:k.FW.FIGMA};function J(e){return Z[e]}let Q={[k.FW.FIGMA]:P.nT.Design,[k.FW.DEV]:P.nT.DevHandoff,[k.FW.INSPECT]:P.nT.DevHandoff,[k.FW.FIGJAM]:P.nT.Whiteboard,[k.FW.SLIDES]:P.nT.Slides,[k.FW.SITES]:P.nT.Sites};function ee(e){return Q[e]}function et(e){switch(e){case k.FW.FIGMA:case k.FW.DEV:case k.FW.INSPECT:return N._Y.DESIGN;case k.FW.FIGJAM:return N._Y.WHITEBOARD;case k.FW.SLIDES:return N._Y.SLIDES;case k.FW.SITES:return N._Y.SITES;default:(0,o.xb)(e)}}function er(e){switch(e){case k.FW.FIGMA:return F.$A.Design;case k.FW.FIGJAM:return F.$A.FigJam;case k.FW.DEV:case k.FW.INSPECT:return F.$A.Handoff;case k.FW.SLIDES:return F.$A.Slides;case k.FW.SITES:return F.$A.Design;default:(0,o.xb)(e)}}function en(){return(0,i.d4)(e=>"fullscreen"===e.selectedView.view?Z[e.selectedView.editorType]:void 0)}function ei(){let e=u.D.getState().selectedView;if("fullscreen"===e.view)return Z[e.editorType]}function ea(e,r){return Array.isArray(r)?r.includes(e):e===k.FW.FIGMA}class eo extends Error{constructor(e,r){super(e),this.message=e,this.manifest=r}}function es(){return el}let el='Missing editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]';function ec(e,r){let n=new Set(k.UX);return e.filter(e=>!n.has(e)||r?.has(e))}function ed(e){return k.Kd.some(r=>e.includes(r))}class eu{constructor(e,r){this.permissions=e,this.trustedPluginOrigin=r}static none(){return new eu([],void 0)}static forTest(e){return new eu(e||k.XS,void 0)}static forConsoleGlobal(){let e=[...k.pR];return(0,l.k)().first_draft_debug&&e.push("firstdraft"),new eu(e,void 0)}static forFirstPartyPlugin(){return new eu(k.XS,void 0)}static forLocalPlugin(e){let r=e.manifest.permissions||[];if((0,_.Lo)("ValidatedPluginPermissions","Validating permissions for local plugin",{pluginID:e.manifest.id,requestedPermissions:r}),(0,l.k)().plugins_internal_apis)return new eu(r,"*");let n=ec(r);return n.length<r.length&&(0,h.$D)(s.e.EXTENSIBILITY,Error("Untrusted local plugin denied internal api permissions")),new eu(n,void 0)}static forInstalledPlugin(e){let r=e.manifest.permissions||[];if((0,_.Lo)("ValidatedPluginPermissions","Validating permissions for installed plugin",{pluginID:e.plugin_id,requestedPermissions:r}),(0,O.eZ)(e.plugin_id))return new eu(ec(r,(0,O.xp)(e.plugin_id)),(0,O.HB)(e.plugin_id));let n=ec(r);return n.length<r.length&&(0,h.$D)(s.e.UNOWNED,Error("Untrusted installed plugin denied internal api permissions")),new eu(n,void 0)}}function ep(e){try{return new URLPattern(e)}catch(e){return null}}function em(e,r){let n=[],i=0;for(let[a,o]of r)n.push(e.substring(i,a)),i=o;return n.push(e.substring(i,e.length)),n.join("")}function eh(e,r,n){var i,a,o;let s,l,c,d,u;let p="widget"===n.resourceType||!!r.cachedContainsWidget;if("error"in r)l={type:k.ho.LOAD,text:r.error};else try{c=JSON.parse(r.manifest)}catch(e){l={type:k.ho.PARSE,text:e.message}}if("unknown"===n.resourceType){if(c)p=c.containsWidget;else if("manifest"in r)try{p=!!/containsWidget/.test(r.manifest)}catch{}}if(c){try{(0,B.MG)(c.editorType,x.ib,"manifest.editorType"),d=c.editorType}catch{}try{(0,B.MG)(c.capabilities,x.hb,"manifest.capabilities"),u=c.capabilities}catch{}}let m=(0,j.M)();if("manifest"in r&&m?.updateCachedContainsWidget({id:e,cachedContainsWidget:p}),!l)try{s=function(e,r){try{(0,B.MG)(e,"widget"===r.resourceType?x.Vf:x._O,"manifest")}catch(e){if(e instanceof Error)throw Error(function(e){let r="but got additional property",n=e.lastIndexOf(r);if(-1!==n){let i=e.substring(n+r.length).replace(/"/g,"").trim();return`Manifest has unexpected extra property: ${i}`}return e}(e.message));throw e}if("plugin"===r.resourceType){if(e.relaunchButtons){let r=new Set;e.relaunchButtons.forEach(n=>{if(r.has(n.command))throw new eo(`Expected "manifest.relaunchButtons" to have unique commands, but got more than one button with command: "${n.command}"`,e);r.add(n.command)})}!function(e){if(X(e,"manifest"),e.menu){if(e.parameters)throw Error("manifest.parameters should not be specified when menu items are defined");!function e(r){for(let n of r)(0,k.Av)(n)?X(n,n.name):(0,k.xg)(n)&&e(n.menu)}(e.menu)}}(e)}if(!function(e){if(!("editorType"in e))throw new eo(el,e);if(e.editorType.some(e=>!k.Ye.includes(e))||e.editorType.length<1||e.editorType.length>k.Ye.length)throw Error('Invalid editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]')}(e),!function(e){if(e.permissions){let r=e.permissions.find(e=>!k.XS.includes(e));if(void 0!==r)throw new eo(`Invalid permission specified: ${r}`,e)}}(e),!function(e){if(e.capabilities)for(let r of e.capabilities){if(k.Dk.includes(r)||function(e,r){throw new eo(`Invalid capability specified: ${r}`,e)}(e,r),"panel"===r||"inspect"===r||"codegen"===r||"linkpreview"===r||"vscode"===r){if(!(0,k.Pe)(e.editorType))throw new eo(`Capability "${r}" requires "editorType" to include "dev"`,e);if(e.containsWidget)throw new eo(`Capability "${r}" is not supported for widgets`,e)}if((0,$.T)()&&!e.capabilities.includes("vscode"))throw new eo('Manifest must include "vscode" capability to run in Figma for VS Code Extension',e)}}(e),!function(e){if(!e.capabilities?.includes("codegen")){if(e.codegenLanguages)throw new eo("codegenLanguages only supported for codegen plugins",e);if(e.codegenPreferences)throw new eo("codegenPreferences only supported for codegen plugins",e);return}if(!e.codegenLanguages||0===e.codegenLanguages.length)throw new eo("codegen plugins must define at least one language in codegenLanguages",e);if(!e.codegenPreferences)return;let r=e.codegenLanguages?.map(e=>e.value)??[],n=[],i=new Set;for(let a=0;a<e.codegenPreferences.length;a++){let o=e.codegenPreferences[a];for(let n of o.includedLanguages??[])if(!r.includes(n))throw new eo(`Unknown language "${n}" in codegenPreferences[${a}].includedLanguages`,e);if((0,k.MP)(o)&&n.push(o),(0,k.Wt)(o)){if(i.has(o.propertyName))throw new eo('codegenPreferences "action" itemType settings must have unique propertyName values',e);i.add(o.propertyName)}if((0,k.ZV)(o)){let r=0;if(o.options)for(let e of o.options)e.isDefault&&(r+=1);if(1!==r)throw new eo('codegenPreferences itemType: "select" should have exactly one default option',e)}}if(n.length>1)throw new eo('codegenPreferences should have at most one itemType: "unit"',e)}(e),"widget"===r.resourceType&&e.containsWidget&&(function(e){if(e.widgetApi&&e.editorType?.includes(k.FW.SLIDES))throw new eo("Widgets are not supported in Figma Slides",e)}(e),"1.0.0"!==e.widgetApi))throw new eo("Widgets must specify the 'widgetApi' manifest field. The latest version is '1.0.0'",e);if(e.networkAccess){let r=(0,U.pI)(e.networkAccess);if(!r.isValid)throw new eo(r.validationErr,e)}if(e.relatedLinkDomains){if(!(0,k.Pe)(e.editorType))throw new eo("'relatedLinkDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let r of e.relatedLinkDomains){if(!r.startsWith("https://")||r.startsWith("http://"))throw new eo(`Invalid domain '${r}' in 'relatedLinkDomains'. Domains must start with 'https:// or 'http://'`,e);if(!ep(r))throw new eo(`Invalid domain '${r}' in 'relatedLinkDomains'.`,e)}}if(e.devResourceDomains){if(!(0,k.Pe)(e.editorType))throw new eo("'devResourceDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let r of e.devResourceDomains){if(!r.startsWith("https://")||r.startsWith("http://"))throw new eo(`Invalid domain '${r}' in 'devResourceDomains'. Domains must start with 'https:// or 'http://'`,e);if(!ep(r))throw new eo(`Invalid domain '${r}' in 'devResourceDomains'.`,e)}}return e}(c,{resourceType:p?"widget":"plugin"})}catch(e){l={type:k.ho.VALIDATE,text:e.message},e.manifest&&(s=e.manifest)}let h=p?(i=d,{...ey,editorType:i||void 0}):(a=d,o=u,{...eE,editorType:a||void 0,capabilities:o||void 0});return{plugin_id:s&&s.id||"",name:function(e,r){if(e)return e.name;if(r.lastKnownName)return r.lastKnownName;if(!r.path)return"Error";{let e=r.path.split(/\/|\\/);return e.length>=2?e[e.length-2]:r.path}}(s,r),manifest:s??h,localFileId:e,localFilePath:r.path,error:l}}async function e_(e,r){let n=(0,j.M)();try{if(!n)throw Error("desktopApp not available");let i=await n.getLocalFileExtensionManifest(e);return eh(e,i,r)}catch(n){return{plugin_id:"",name:"Error",manifest:"widget"===r.resourceType?ey:eE,localFileId:e,localFilePath:"",error:{type:k.ho.LOAD,text:n.message}}}}async function eg(e){let r;let n=(0,j.M)();try{if(!n)throw Error("desktopApp not available");r=await n.getLocalFileExtensionSource(e)}catch(e){throw Error(`Unable to load code: ${e}`)}if(r.buildErrCode)throw Error("Build error: "+r.stderr+"\nPath was: "+r.path);let i=r.source;return r.html&&(i=function(e,r){let n=e=>JSON.stringify(e).split(/(<!--|-->|\bimport)/g).map((e,r)=>1&r?e.slice(0,2)+'"+"'+e.slice(2):e).join("");if("string"==typeof r)return`const __html__ = ${n(r)};${e}`;let i=Object.entries(r).map(([e,r])=>`[${n(e)}]:${n(r)}`).join(",");return`const __uiFiles__ = {${i}};${e}`}(i,r.html)),i}function ef(e){return e.error?.text===el?e.name:`${e.error?`\u26A0  `:""}${e.name}`}let eE={id:"",name:"",api:"",main:""},ey={id:"",name:"",api:"",main:"",containsWidget:!0,widgetApi:""},eb={id:"",plugin_id:"",manifest:{...eE},name:"",version:"",release_notes:"",installed_by:"user",description:"",tagline:"",creator_policy:"",created_at:"",redirect_icon_url:"",redirect_cover_image_url:"",redirect_code_url:"",is_private:!1,playground_fig_file_key:null},ev={id:"",publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:D.o1.USER,badges:[],description:""},creator:{id:"",handle:"",img_url:""},category_id:null,versions:{},install_count:0,unique_run_count:0,view_count:0,like_count:0,comment_count:0,unpublished_at:null,current_plugin_version_id:"",roles:{},realtime_token:"",support_contact:"",created_at:"",org_id:null,redirect_thumbnail_url:null,thumbnail_url:null,community_publishers:{accepted:[],pending:[]},comments_setting:C.Ni.ENABLED,is_widget:!1,editor_type:"design_and_whiteboard",publishing_status:null,badges:[]},eT={...ev,is_widget:!0},eI={name:"",currentVersionReleaseNotes:"",newVersionReleaseNotes:"",description:"",tagline:"",creatorPolicy:"",categoryId:"",iconSrc:"",coverImageSrc:"",widgetSnapshotImageSrc:"",widgetSnapshotImageError:null,supportContact:"",iconImageError:null,coverImageError:null,author:{user_id:""},twoFactorAuthDisabledError:null,emailNotVerifiedError:null,accountDetailsChangedError:null,freemiumRequiredForMigrating:null,commentsSetting:C.Ni.ENABLED,creators:[],publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1,playgroundFigFile:null,playgroundFilePublishType:S.J.Actions.NOOP};function eS(e){if(!e||!e.versions)return null;let r=e.current_plugin_version_id;return r&&e.versions[r]||null}function ew(e){let r=eS(e);return null===r?eb:r}function eA(e,r){if((0,Y.ZY)(r))return(0,Y.Qx)(r);let n=e[r]??{};for(let e in n)return n[e].current_plugin_version_id}let eC=e=>e?.containsWidget?eT:ev;function eN(e,r,n,i){if(n?.manifest?.id){if(e&&e[n?.manifest?.id])return e[n?.manifest?.id];if(r&&r[n?.manifest?.id])return r[n?.manifest?.id]}if(i){if(e&&e[i])return e[i];if(r&&r[i])return r[i]}return eC(n?.manifest)}function eL(e,r,n){if(n?.manifest?.id){if(e&&e[n?.manifest?.id])return e[n?.manifest?.id];if(r&&r[n?.manifest?.id])return r[n?.manifest?.id]}return null}function eO(e,r){return(0,K.Hc)(e,r,ev)}function eR(e,r){return(0,K.Hc)(e,r,eT)}function eP(e,r){let n={};return Object.keys(e).forEach(i=>{let a=e[i];a.roles.org&&a.roles.org.id===r&&(n[a.id]=a)}),n}function eD(e,r){let n={};return Object.keys(e).forEach(i=>{let a=e[i];ea(r,ew(a).manifest.editorType)&&(n[a.id]=a)}),n}function eM(e){return!!e?.roles?.org}function ek(e,r,n=!0){let i={};return Object.keys(e).forEach(a=>{let o=e[a],s=n?W.jY:W.Ro;((0,w.Dd)(o,r)||s(o,r))&&(i[a]=e[a])}),i}function eF(e){return(0,a.LN)(Object.keys(e).map(r=>ew(e[r]))).map(r=>e[r.plugin_id])}function ex(e,r){let n=e.roles,i=!r.is_public&&(0,I.AC)(e);return!!n.is_public!=!!r.is_public||n.org?.id!==r.org?.id||i}function eU(e){if(!e)throw Error("Code string cannot be empty");let r=(0,g.YH)(e).length;if(r>K.yO)throw Error(`plugin code exceeds max size of ${Math.floor(K.yO/1e6)}MB`);return r}function eB(e){return(0,w.Wl)(e,"Icon image")}async function eV(e,r){return eB(e),await eK(e,{width:z.DK,height:z.DK},r,(0,y.t)("community.publishing.error_icon_image_dimensions"))}function eG(e){return(0,w.Wl)(e,"Artwork image")}function eH(e){let r=e?.[0];if(!r)throw Error((0,y.t)("community.publishing.error_file_not_found"));return r}async function eK(e,r,n,i){let{width:a,height:o}=r,s=URL.createObjectURL(e),l=await (0,w.l8)(s);try{if(!function(e,r,n){let{width:i,height:a}=r;return e.width===i&&e.height===a||n&&e.width%i==0&&e.height%a==0&&e.width/i==e.height/a}(l,r,n))throw Error(i);if(l.width===a&&l.height===o)return e;let s=await new Promise((e,r)=>{let n=document.createElement("canvas");try{n.width=a,n.height=o,n.getContext("2d").drawImage(l,0,0,a,o),n.toBlob(n=>n?e(n):r(Error("Failed to resize image")))}catch(e){r(e)}finally{n.remove()}});return new File([s],e.name,{type:s.type})}finally{URL.revokeObjectURL(s),l.remove()}}async function eW(e){let r=(await E.Ay.post(`/api/${(0,K.n)(e)}`)).data.meta;if(!r.id)throw Error("cannot generate plugin ID");return r}function ez(e,r,n){return e.roles.org??(r&&n?{id:r.id,name:r.name,img_url:r.img_url}:null)}function e$(e,r){return r===k.Lu.ORG?e?{org:e}:(c.k.error("publishing a private plugin without a valid org entity."),null):{is_public:!0}}function eY(e){return e.name===eI.name&&e.newVersionReleaseNotes===eI.newVersionReleaseNotes&&e.supportContact===eI.supportContact&&e.description===eI.description&&e.iconSrc===eI.iconSrc&&e.coverImageSrc===eI.coverImageSrc&&null==e.iconBlob&&null==e.coverImageBlob}function ej(e,r,n,i,a){let o;let s=void 0!==r?e.localPlugins[r]:void 0,l=s&&s.manifest,c=eN(e.publishedPlugins,e.publishedWidgets,s,n),d=ew(c),u=l?.permissions?.includes("payments");try{o=(0,w.En)(c,e)}catch(e){throw Error("Unable to get Plugin Data. You might be trying to act on a personal plugin in an Org space.")}let{accepted:p,pending:m}=c.community_publishers,h={...(0,G.Rs)(),tokens:(c.community_publishers?[...p.map(e=>({...e,isPending:!1})),...m?.map(e=>({...e,isPending:!0}))||[]]:[]).reduce((r,n)=>(0,w.Ii)(e.authedProfilesById[n.id],o)?r:r.concat([{state:R.d.OK,content:n}]),[])};return{name:d.name||l&&l.name||eI.name,currentVersionReleaseNotes:d.release_notes||eI.newVersionReleaseNotes,newVersionReleaseNotes:eI.newVersionReleaseNotes,tags:c.tags,tagsV2:c.tags_v2&&Object.keys(c.tags_v2),supportContact:c.support_contact||e.user?.email||eI.supportContact,description:d.description||eI.description,tagline:d.tagline||eI.tagline,creatorPolicy:d.creator_policy??eI.creatorPolicy,iconSrc:d.redirect_icon_url||eI.iconSrc,widgetSnapshotImageSrc:i||d.redirect_snapshot_url||eI.widgetSnapshotImageSrc,widgetSnapshotImageBlob:a||eI.widgetSnapshotImageBlob,coverImageSrc:d.redirect_cover_image_url||eI.coverImageSrc,iconImageError:eI.iconImageError,coverImageError:eI.coverImageError,widgetSnapshotImageError:eI.widgetSnapshotImageError,twoFactorAuthDisabledError:eI.twoFactorAuthDisabledError,emailNotVerifiedError:eI.emailNotVerifiedError,accountDetailsChangedError:eI.accountDetailsChangedError,freemiumRequiredForMigrating:eI.freemiumRequiredForMigrating,author:o,publishers:h,creators:p.map(e=>({...e,isPending:!1})).concat((m??[]).map(e=>({...e,isPending:!0}))).filter(r=>!(0,w.Ii)(e.authedProfilesById[r.id],o)&&r.entity_type===D.o1.USER),commentsSetting:c.comments_setting||eI.commentsSetting,categoryId:c.category_id||eI.categoryId,blockPublishingOnToS:(0,w.xw)(e),playgroundFigFile:d.playground_fig_file,playgroundFilePublishType:S.J.Actions.NOOP,isPaid:!!c.monetized_resource_metadata||u,price:(0,T.vf)(c.monetized_resource_metadata),isSubscription:c.monetized_resource_metadata?.is_subscription,hasPaymentsApi:u,annualDiscount:c.monetized_resource_metadata?.annual_discount_percentage,isAnnualDiscountActive:!!c.monetized_resource_metadata?.annual_discount_active_at,carouselMedia:(0,v.N6)(c)}}function eq(e){return!!ew(e).id&&!e.unpublished_at}function eX(e){if(!e)return{};let r={};return e.forEach(e=>{eq(e)&&(r[e.id]=e)}),r}function eZ(e,r,n,i){let a={};return(e.email_validated_at||(a.emailNotVerifiedError=(0,y.t)("community.publishing.please_verify_your_email_address_to_publish")),i||(e.saml_sso_only||e.google_sso_only||e.two_factor_app_enabled||e.phone_number)&&(r.code!==D.aP.FAILURE||r.error!==(0,y.t)("community.publishing.you_must_enable_two_factor_authentication_to_publish")))?!i&&(e.plugin_publishing_blocked_at||e.community_blocked_at||r.code===D.aP.FAILURE&&r.error===(0,y.t)("community.publishing.you_must_verify_your_account_details_to_publish"))?a.accountDetailsChangedError=(0,y.t)("community.publishing.we_detected_a_change_to_your_account_details_please_contact_support_figma_com_to_publish_this_plugin"):r.code===D.aP.FAILURE&&r.error&&(a.other=r.error):a.twoFactorAuthDisabledError=n?(0,y.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_widget"):(0,y.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_plugin"),a}function eJ(e,r,n,i){if(!e)return{};let a={};0===(0,K.Yp)(e.name).length&&(a.name=(0,y.t)("community.publishing.name_must_not_be_empty")),0===(0,K.Yp)(e.tagline).length&&(a.tagline=(0,y.t)("community.publishing.add_a_tagline")),(0,m.ZB)(e.description)&&(a.description=(0,y.t)("community.publishing.add_a_description"));let o=(0,K.Yp)(e.supportContact);if(0===o.length?a.supportContact=(0,y.t)("community.publishing.support_contact_must_not_be_empty"):(0,d.xf)(o)||(0,g.gU)(o)||(a.supportContact=(0,y.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")),0===(0,K.Yp)(e.iconSrc).length&&(a.iconImageError=(0,y.t)("community.publishing.icon_cant_be_empty")),a.carouselMedia=(0,w.vC)(e.carouselMedia),e.categoryId||(a.categoryId=(0,y.t)("community.publishing.category_cant_be_empty")),void 0===e.price||r.permissions?.includes("payments")||i?.third_party_m10n_status!==M.PN.FLAGGED||(a.freemiumRequiredForMigrating=(0,y.t)("community.seller.freemium_required_for_migration")),e.playgroundFigFile&&r.editorType?.length===1){let i=r.editorType[0],o=e.playgroundFigFile.editor_type;if(i===k.FW.FIGMA&&"design"!==o||i===k.FW.FIGJAM&&"whiteboard"!==o){let e=i===k.FW.FIGMA?(0,y.t)("community.publishing.playground_file.figma"):(0,y.t)("community.publishing.playground_file.figjam");a.playgroundFigFile=n?(0,y.t)("community.publishing.widget_playground_file_editor_type_error",{editorType:e}):(0,y.t)("community.publishing.plugin_playground_file_editor_type_error",{editorType:e})}}n&&0===(0,K.Yp)(e.widgetSnapshotImageSrc).length&&(a.widgetSnapshotImageError=(0,y.t)("community.publishing.snapshot_must_not_be_empty"));let s=function(e,r){if(!e.isPaid||e.hasPaymentsApi)return null;if(!e.price)return(0,y.t)("community.publishing.price_is_required_for_paid_resources");if((0,T.Yp)(e.price))return e.price<T.mZ?(0,y.t)("community.seller.paid_resource_minimum_err"):(0,y.t)("community.seller.paid_resource_maximum_err");if((0,T.F8)(e.price))return(0,y.t)("community.seller.prices_must_follow_format");if(!r||(0,I.AC)(r))return null;let n=r?.monetized_resource_metadata?.price;return e.isSubscription&&n&&(0,T.Mj)(n/100,e.price)?(0,y.t)("community.seller.price_increase_limit"):!r?.monetized_resource_metadata?.can_increase_price&&n&&(0,T.WD)(n/100,e.price)?(0,y.t)("community.seller.price_can_only_be_increased_once_every_thirty_days"):null}(e,i);s&&(a.price=s);let l=e.isPaid&&e.annualDiscount&&e.isAnnualDiscountActive?Number.isInteger(e.annualDiscount)?null:(0,y.t)("community.seller.discount_must_follow_format"):null;return l&&(a.annualDiscount=l),a}function eQ(e){if(!e)return{};let r={},n=(0,K.Yp)(e.name).length;n<4?r.name=(0,y.t)("community.publishing.name_must_be_4_characters_long"):n>100&&(r.name=(0,y.t)("community.publishing.name_must_be_at_most_100_characters_long")),(0,K.Yp)(e.description).length>1e4&&(r.description=(0,y.t)("community.publishing.description_must_be_at_most_10000_characters_long")),(0,K.Yp)(e.newVersionReleaseNotes).length>1e4&&(r.newVersionReleaseNotes=(0,y.t)("community.publishing.release_notes_must_be_at_most_10000_characters_long")),(0,K.Yp)(e.creatorPolicy).length>1e4&&(r.creatorPolicy=(0,y.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long"));let i=(0,K.Lg)(e.tagline);return i&&(r.tagline=i),(0,K.Yp)(e.supportContact).length>100&&(r.supportContact=(0,y.t)("community.publishing.support_contact_must_be_at_most_100_characters_long")),e.iconImageError&&(r.iconImageError=e.iconImageError),e.coverImageError&&(r.coverImageError=e.coverImageError),r}function e0(e){return(0,k.k0)(e.plugin)}function e1(e){let r;let{localPlugins:n,publishedCanvasWidgetVersions:i,publishedWidgets:a}=u.D.getState(),o=!e.widgetVersionId,l=e.widgetId;if(l){if(o){let e=Object.values(n).filter(e=>e.plugin_id===l);e.length>1&&e5((0,y.t)("community.publishing.found_multiple_local_widgets_with_the_same_manifest_id")),1===e.length&&(r=e[0])}else{if(!(r=i[l]?.[e.widgetVersionId]||a[l]&&ew(a[l])))return;r.id===e.widgetVersionId||(0,f.nl)()||(0,f.Lg)()||(0,h.$D)(s.e.UNOWNED,Error(`plugin versionId=${r?.id} doesn't match node.widgetVersionId=${e.widgetVersionId}`))}return r}}function e2(e){let r=e.canRunPluginState?e.canRunPluginState:u.D.getState();if(!(0,L.GP)(r))return{canRun:!1,message:"Cannot run plugin because canRunPlugins returned false"};if(!e4(r,e.plugin))return{canRun:!1,message:"Cannot run plugin within org"};let{plugin:n,editorType:i}=e;if((0,k.ZQ)(n))return(0,k.k0)(n)?{canRun:!1,message:"Cannot run local widget"}:{canRun:!0};if(i){if(!ea(Z[i],n.manifest.editorType))return{canRun:!1,message:"Cannot run plugin with invalid editor type"};if(i===P.nT.DevHandoff&&!e6(n))return{canRun:!1,message:"Cannot run non-devmode plugin in dev mode"};if(i===P.nT.Slides&&!ts(n))return{canRun:!1,message:"Cannot run non-slides plugin in slides mode"}}return{canRun:!0}}function e4(e,r){if(!e.currentUserOrgId)return!0;let n=e.orgById[e.currentUserOrgId];if(!n||(0,k.ZQ)(r)||(0,k.bH)(r))return!0;if(!n.public_plugins_allowed)return!1;let i=(0,k.k0)(r);return(i?!n.widgets_whitelist_enforced:!n.plugins_whitelist_enforced)||!!(i?e.whitelistedWidgets:e.whitelistedPlugins)[r.plugin_id]}function e3(e){return e.roles.is_public?{role:"public"}:e.roles.org?{role:"org",roleOrgId:e.roles.org.id}:{role:"private"}}function e7(e,r){return r?r.localFileId:e.id}function e5(e){(0,V.pN)({shouldShowVisualBell:!0});let r=(0,j.M)();A.Y5.dispatch(b.F.enqueue({type:"plugins-runtime-error",message:e,button:r?{text:"Show/Hide console",action:()=>{r.toggleDevTools("bottom")}}:void 0,error:!0}))}function e8(){A.Y5.dispatch(b.F.dequeue({matchType:"plugins-runtime-error"}))}function e9(e,r){return e.plugin_id===r?.plugin_id&&e?.id===r?.id}function e6(e,r){return!!(!(0,$.T)()||e.manifest.capabilities?.includes("vscode")||r?.allowNonVsCodePluginsInVsCode)&&(0,k.Pe)(e.manifest.editorType)&&!(0,k.k0)(e)}function te(e){return e6(e)&&tg(e.manifest.capabilities)}function tt(e){return e6(e)&&e.manifest?.capabilities?.includes("codegen")}function tr(e){return e.manifest?.capabilities?.includes("textreview")}function tn(e,r,n){return Object.fromEntries(Object.entries(r).filter(([r,i])=>to(e,i,n)))}function ti(e,r){return r.filter(r=>to(e,r))}function ta(e,r){return Object.fromEntries(Object.entries(r).filter(([r,n])=>to(e,ew(n))))}function to(e,r,n){if(!e)return!0;switch(e){case P.nT.Whiteboard:case P.nT.Design:return ea(Z[e],r.manifest.editorType);case P.nT.DevHandoff:return e6(r,n);case P.nT.Slides:return ts(r);case P.nT.Figmake:case P.nT.Sites:case P.nT.Cooper:case P.nT.Illustration:return!1;default:(0,o.xb)(e)}}function ts(e){return ea(k.FW.SLIDES,e.manifest.editorType)&&!(0,k.k0)(e)}function tl(e){if(!("related-link-preview"!==e&&"codegen"!==e))return!1;let r=u.D.getState().selectedView;return(0,H.$A)(r)}function tc(e){return e?.manifest.editorType?.length===1&&(0,k.Pe)(e.manifest.editorType)}function td(e){let r=function(e){let r=["vscode"];return e.filter(e=>!r.includes(e))}(e.manifest.capabilities??[]);return 1===r.length&&"codegen"===r[0]}function tu(e){return tc(e)&&td(e)}function tp(e){return(0,k.Pe)(e.manifest.editorType)&&td(e)}function tm(e){let r=u.D.getState().selectedView;return(0,H.$A)(r)&&tp(e)}function th(e,r,n){let i=u.D.getState().selectedView,a=r?.plugins_whitelist_enforced,o=a&&n&&!!n[e.plugin_id]||!a;return(0,H.$A)(i)&&!tu(e)&&o}function t_({idToSearch:e,localExtensionsByFileId:r,publishedExtensions:n}){let i=r&&r[e];if(i)return i;let a=n?.[e];return a?eS(a):null}function tg(e){return!!(e?.includes("inspect")||e?.includes("panel"))}function tf(e){let r=ei(),n=e&&e?.plugin&&tu(e?.plugin);return e&&r&&ea(r,e.plugin.manifest.editorType)&&("dev"!==r||e6(e.plugin))&&("slides"!==r||ts(e.plugin))&&!n}function tE(){return(0,$.T)()?"plugins-menu-open-directory-vscode":p.Ay.mac?"plugins-menu-open-directory-mac":"plugins-menu-open-directory-win"}},678670:(e,r,n)=>{n.d(r,{C3:()=>a,SH:()=>o}),n(402840);let i=null;function a(e){i=e}function o(){return i}},837638:(e,r,n)=>{n.d(r,{R:()=>o}),n(95650);var i=n(142751),a=n(928001);let o=new class{loadPluginsPublishedByUser(e){let r=e.getState().loadingState,n=i.uF.loadingKeyForPayload();(0,a.Sc)(r,n)&&e.dispatch(i.uF())}async loadPluginsAuthoredByCurrentOrg(e){let{loadingState:r,currentUserOrgId:n}=e.getState();if(!n)return;let o=i.LP.loadingKeyForPayload(n);(0,a.Sc)(r,o)&&await e.dispatch(i.LP(n))}loadWidgetsAuthoredByCurrentOrg(e){let{loadingState:r,currentUserOrgId:n}=e.getState();if(!n)return;let o=i.a8.loadingKeyForPayload(n);(0,a.Sc)(r,o)&&e.dispatch(i.a8(n))}}},584846:(e,r,n)=>{n.d(r,{R:()=>_}),n(848318);var i=n(94822),a=n(445777),o=n(115321),s=n(210709),l=n(6819),c=n(808471),d=n(650080);n(936231),n(871117),n(369600);var u=n(950774);n(422010);var p=n(60546);n(843898);var m=n(406834);let h=class e{constructor(){this.runQueue=[],this.currentRunState=null,this.MAX_RESOLVE_ITERATIONS=10,this.upgradeHandler=null}setUpgradeHandler(e){this.upgradeHandler=e}handleUpgrade(){this.upgradeHandler&&this.upgradeHandler()}enqueue(e){let{runPluginArgs:r,onStart:n,mode:a,reuseExistingRunState:o=!0}=e,{plugin:s}=r;if(!(0,p.$A)(l.D.getState().selectedView))return(0,i.bT)(r);if(s.manifest.containsWidget)throw Error("Cannot enqueue a plugin that contains a widget");let c=this.createTask(n),d=this.findExistingRunState(e);if(o&&d)this.log("enqueue","Found existing run state, pushing runTask onto existing runState",{existingRunState:d,runTask:c}),d.runTasks.push(c),d===this.currentRunState&&"settled"===d.status&&this.resolveAllPromises(this.currentRunState);else{let e={runPluginArgs:r,runTasks:[c],mode:a,status:"idle"};this.log("enqueue","Creating new run state and adding to queue",{runState:e}),this.addToQueue(e),this.runNextPlugin()}return c.promise}getCurrentRunStatusOrNull(){return this.currentRunState?.status??null}getRunQueueLength(){return this.runQueue.length}async runNextPlugin(){if(await this.maybeTerminatePluginBeforeRun(),(0,m.hw)())return;let e=this.runQueue.shift();if(!e)return;this.currentRunState=e,this.prepPluginForRun(e.runPluginArgs.plugin);let r=this.runPlugin(e);await this.resolveAllPromises(e),await r,this.log("runNextPlugin","Finished running plugin",{runState:e}),this.runNextPlugin()}runPlugin(e){this.log("runNextPlugin","Running plugin",{runState:e});let{runPluginArgs:r}=e;return(0,i.bT)(r)}setRunPluginForTest(e){if(!(0,c.nl)())throw Error("Cannot set run plugin for test when not running interaction tests");this.runPlugin=e}createTask(e){let r=()=>{},n=()=>{};return{promise:new Promise((e,i)=>{r=e,n=i}),resolve:r,reject:n,onStart:e}}async resolvePromise({resolve:e,reject:r,onStart:n}){try{let r=await n?.();e(r)}catch(e){r(e)}}async resolveAllPromises(e){this.log("runNextPlugin","Resolving all promises",{runState:e}),e.status="resolving";let r=0;for(;r<this.MAX_RESOLVE_ITERATIONS;){let n=e.runTasks;if(0===n.length)break;e.runTasks=[],await Promise.allSettled(n.map(e=>this.resolvePromise(e))),r++}await this.maybeTerminatePluginAfterRunSettled(e),e.status="settled",this.log("runNextPlugin","Resolved all promises",{runState:e})}addToQueue(e){switch(this.log("addToQueue","Adding to queue",{toAdd:e}),e.mode){case"run-forever":case"run-and-terminate":this.runQueue.push(e);break;default:(0,a.xb)(e.mode)}}async maybeTerminatePluginBeforeRun(){let e=(0,m.hw)();(!!e!=!!this.currentRunState||this.currentRunState?.status==="settled"&&this.currentRunState?.runPluginArgs.plugin.plugin_id===e?.plugin_id)&&(this.log("maybeTerminatePluginBeforeRun","Terminating plugin"),await this.terminatePlugin())}async maybeTerminatePluginAfterRunSettled(e){let{mode:r}=e;switch(this.log("maybeTerminatePluginAfterRunSettled","Maybe terminating plugin",{toMaybeTerminate:e}),r){case"run-forever":this.runQueue.length>0&&await this.terminatePlugin();break;case"run-and-terminate":await this.terminatePlugin();break;default:(0,a.xb)(r)}}async terminatePlugin(){this.log("terminatePlugin","Terminating plugin"),this.currentRunState=null,await (0,m.wY)(),await (0,o.yQ)()}findExistingRunState({runPluginArgs:e,mode:r}){let n=this.currentRunState?.runPluginArgs.plugin.plugin_id;return n===e.plugin.plugin_id&&m.hw()?.plugin_id===n?this.currentRunState:this.runQueue.find(n=>n.runPluginArgs.plugin.plugin_id===e.plugin.plugin_id&&n.mode===r)}isCurrentlyRunning({runPluginArgs:e,mode:r}){return!!this.findExistingRunState({runPluginArgs:e,mode:r})}prepPluginForRun(e){this.log("prepPluginForRun","Prepping plugin for run",{plugin:e}),(0,d.dW)(e,null),(0,u.f$)(),(0,u.n4)(),(0,u.hY)()}log(r,n,i={}){if(!e.debug)return;let a={currentRunState:this.currentRunState,runQueue:this.runQueue,runningPluginState:m.iu,...i};s.k.log("[PluginManager]",`[${r}]`,n,a)}};h.instance=new h,h.debug=!1;let _=h},406834:(e,r,n)=>{n.d(r,{Kd:()=>b,Mt:()=>S,XF:()=>A,XY:()=>I,et:()=>w,fD:()=>g,hw:()=>f,iu:()=>_,lM:()=>E,mv:()=>v,nT:()=>N,qR:()=>y,wY:()=>C});var i=n(992277),a=n(39773),o=n(141039),s=n(6819),l=n(502255),c=n(808471),d=n(99624),u=n(74083),p=n(53818),m=n(55213);let h=null,_={currentPluginRunID:null,stats:null,currentWidget:void 0,setMediaEnabled:!1,allowedPluginOrigin:void 0,resetGlobalPluginAPI:null};function g(){return _.currentPluginRunID}function f(){return a.zl.get(d.GR)}function E(e){(0,l.kF)("pluginId",e?.plugin_id),a.zl.set(d.GR,e)}function y(e){(0,l.kF)("pluginTriggeredFrom",e),a.zl.set(d.vT,e??null)}function b(e){a.zl.set(d.$f,e)}function v(){return Math.random().toString(36).slice(2)}function T(e){(0,c.nl)(),(0,l.$D)(i.e.EXTENSIBILITY,e)}function I(e){h&&T(Error(`Did not close the previous plugin: type=${h.type}`)),h={type:"global",closePluginFunc:e}}function S(e,r){h?.type==="plugin"&&r?.ignorePreviousCloseFunc!==h.closePluginFunc&&T(Error(`Did not close the previous plugin: type=${h.type}`)),h?.type==="global"&&T(Error(`Did not close the previous plugin: type=${h.type}`)),h=e?{type:"plugin",closePluginFunc:e}:null}function w(){return h?.type==="global"}async function A(e){if(h){let{closePluginFunc:r,type:n}=h;h=null,"global"===n?await r():await r(e)}}let C=(0,p.n)(async e=>{await A(e?{message:e+"",isError:!0}:{}),N()});function N(){if((0,m.Tj)(void 0),_.currentWidget=void 0,E(null),y(null),b(null),_.currentPluginRunID=null,_.stats=null,a.zl.set(d.d4,null),a.zl.set(d.GR,null),o.eD&&_.setMediaEnabled&&(_.setMediaEnabled=!1),o.eD&&_.allowedPluginOrigin&&(o.eD.removeAllowedPluginOrigin(_.allowedPluginOrigin),_.allowedPluginOrigin=void 0),s.D){let e=(0,u.o8)(),r=(0,u.YR)();e&&r&&_.resetGlobalPluginAPI?.({userID:e,openFileKey:r})}}},487088:(e,r,n)=>{n.d(r,{HB:()=>x,Ph:()=>m,T0:()=>v,Up:()=>B,eZ:()=>F,sA:()=>V,xp:()=>U,yb:()=>G});var i=n(379338),a=n(808471),o=n(677251);let s="1039957324840667051",l="1042072203439057981",c="1017757619521383731",d="1037692671113105119",u="1030479012894344777",p="1100947233945489758",m="1274481464484630971",h="1220512233196109878",_="1220802563996996107",g="1221187540287746170",f="1029476790898052743",E="1270487405418367065",y="1028089855820989707",b="1100944790471783866",v="1268676638869538880",T="1217135789855512677",I="1217657098906612843",S={[s]:o.Kd,[l]:o.Kd,[c]:o.Kd,[d]:o.Kd,"1096460041736534298":["analytics"],[h]:["analytics","openexternal"],[_]:["analytics","filekey","openexternal"],"1098405969270214551":["analytics","filekey","openexternal"],"1151936790942917527":["analytics","openexternal"],"1101944648482192724":["analytics","openexternal"],"1094001923188252679":["analytics","filekey","openexternal"],[u]:o.Kd,[p]:o.Kd,"1030848035996871692":["hidecursors"],"1030845409121640454":["hidecursors"],[m]:["cortex","analytics"],[g]:["filekey"],"857346721138427857":["filekey"],"745330164019088593":["filekey"],"1377781599688680355":["cortex","analytics","filekey","firstdraft"],"1340067847030742527":["cortex","analytics","filekey","firstdraft"]},w={[s]:"https://recordwidget.vimeocdn.com",[l]:"https://recordwidget.vimeocdn.com",[c]:"https://recordwidget.vimeocdn.com",[d]:"https://recordwidget.vimeocdn.com",[u]:"https://www.figma.com",[p]:"https://www.figma.com"},A={"1034777534804649640":["analytics"],"1301665612022689456":["analytics","cortex"],[T]:["analytics","openexternal"],[I]:["analytics","filekey","openexternal"],"1271502283792345209":["cortex"],"1326353654536428586":["cortex"],"1441501928920333946":["cortex"],"1094384373580076374":["analytics","filekey","openexternal"],"1149460326641202255":["analytics","openexternal"],"1101526018404272582":["analytics","openexternal"],"1131307276886895456":["analytics","filekey","openexternal"],[f]:o.Kd,[E]:o.Kd,[y]:o.Kd,[b]:o.Kd,"1256428543638612749":["cortex"],[v]:["cortex","analytics"],"1277056884710848803":["cortex","analytics"],"1265815812125155376":["hidecursors"],"1029480467793180296":["hidecursors"],"1276624117086983457":["cortex"],"1313947182028153675":["cortex","analytics","filekey","firstdraft"],"1308848962842011451":["cortex","analytics","filekey","firstdraft"],"1338915561589337295":["cortex","analytics","filekey","firstdraft"],"1342184095219254574":["cortex","analytics","filekey","firstdraft"],"1248327534194310871":["openexternal"],"1247608093818933926":["openexternal"],"1098668453462136230":["analytics"],"1098643145465550199":["analytics","filekey","openexternal"],"1159008294965494982":["analytics","openexternal"],"1105998388939381214":["analytics","openexternal"],"1098069144593389942":["analytics","filekey","openexternal"],"1065825789137646656":o.Kd,"1105998344712102365":o.Kd,"1065825795062708289":["hidecursors"],"1065825813933952067":["hidecursors"]},C={[T]:(0,i.ck)("83e16c32f7fbe88022ff9fcff130cdd6c6423861")},N={[h]:(0,i.ck)("83e16c32f7fbe88022ff9fcff130cdd6c6423861")},L={[f]:"https://staging.figma.com",[E]:"https://staging.figma.com",[y]:"https://staging.figma.com",[b]:"https://staging.figma.com"},O=new Set([T,I]),R=new Set([h,_,g,"1220851659530313303"]),P=["1286790870036328880"],D=["1286792998372727741","1471237098317254321"],M={},k={};function F(e){return"prod"===(0,i.tl)().cluster_name?e in w||e in S:"staging"===(0,i.tl)().cluster_name?e in L||e in A:(0,a.nl)()||(0,a.Lg)()?e in M:!!(0,i.IX)()}function x(e){return"prod"===(0,i.tl)().cluster_name?e in w?w[e]:void 0:"staging"===(0,i.tl)().cluster_name?e in L?L[e]:void 0:(0,a.nl)()||(0,a.Lg)()?e in M?M[e]:void 0:(0,i.IX)()?"*":void 0}function U(e){if(!F(e))throw Error("Untrusted pluginID");return"prod"===(0,i.tl)().cluster_name?new Set(S[e]??[]):"staging"===(0,i.tl)().cluster_name?new Set(A[e]??[]):(0,a.nl)()||(0,a.Lg)()?new Set(k[e]??[]):(0,i.IX)()?new Set(o.UX):new Set}function B(){return"prod"===(0,i.tl)().cluster_name?R:"staging"===(0,i.tl)().cluster_name?O:((0,a.nl)()||(0,a.Lg)()||(0,i.IX)(),new Set)}function V(e){return"prod"===(0,i.tl)().cluster_name?N[e]:"staging"===(0,i.tl)().cluster_name?C[e]:void 0}function G(e){return"prod"===(0,i.tl)().cluster_name?D.includes(e):"staging"===(0,i.tl)().cluster_name?P.includes(e):!!((0,a.nl)()||(0,a.Lg)())||!!(0,i.IX)()}},511131:(e,r,n)=>{n.d(r,{S:()=>i});var i,a=n(95650),o=n(831932),s=n(431118),l=n(376780),c=n(312255);(e=>{e.getTooltipTrackingContext=function(e){return`Pro Onboarding Tooltip: ${(0,s.vE)(e)}`},e.getTrackingProperties=function(e){return{productArea:"pro_tier_onboarding",teamId:e}},e.isRecentlyUpgraded=function(e){return!!e&&!!e.last_upgraded_at&&90>=(0,a.A)().diff((0,a.A)(e.last_upgraded_at),"days",!0)},e.canSeeOnboardingInFile=function({editorType:e,selectedView:r,showStarterKit:n,userFlags:i,hasNotifications:a,isDevHandoffView:s,isAppUiShown:d,isLoading:u}){if(o.Ay.mobile||o.Ay.tablet||a||s||!d||u)return!1;let p="fullscreen"===r.view&&r.starterKitHasBeenHidden;if(e===l._Y.WHITEBOARD&&n&&!p)return!1;let m=(0,c._q)(i),h=!!i.figjam_editor_onboarded;return e===l._Y.DESIGN&&!!m||e===l._Y.WHITEBOARD&&!!h}})(i||(i={}))},944527:(e,r,n)=>{n.d(r,{ng:()=>i,uU:()=>g});var i,a=n(425642),o=n(157907),s=n(95650),l=n(732502),c=n(376780),d=n(710665),u=n(694253),p=n(259974),m=n(834111);let h="pro_trials_v3",_=c.GP.PRO_TRIAL,g="exp_pro_trials_v3_start_trial";(e=>{e.uxEnabled=()=>!!(0,o.k)().pro_trials_v3_ux,e.entryEnabled=()=>(0,e.uxEnabled)()&&!!(0,o.k)().exp_pro_trials_v3,e.expiryEnabled=()=>(0,e.uxEnabled)()&&!!(0,o.k)().pro_trials_v3_expiry,e.isUserInVariant=l.wN,e.getTrackingProperties=function(e){return e?{productArea:h,text:e}:{productArea:h}},e.getProTrial=function(e,i,a){if(!e)return null;let o=n(e);if(!o)return null;let s=new Date(e.grace_period_end),l=r(s),c=e.id;return{status:o,isOwner:i,userCanEditTeam:(0,u.canEditTeam)(c,a),trialExpiresAt:s,daysLeft:l,teamId:c}},e.getUpgradableProTrials=function(r,n){let i=Object.values(n.teams),o=(0,a.WI)(i.map(i=>e.getProTrial(i,!!r[i.id]?.[g],n))),l=o.filter(e=>e.status===p.a.TRIAL_EXPIRED&&e.userCanEditTeam);l.sort((e,r)=>(0,s.A)(e.trialExpiresAt).diff(r.trialExpiresAt));let c=o.filter(e=>e.status===p.a.IN_TRIAL&&e.userCanEditTeam);return c.sort((e,r)=>(0,s.A)(e.trialExpiresAt).diff(r.trialExpiresAt)),{ongoingTrials:c,expiredTrials:l}},e.getEligibleProTrialTeams=function(r,n,i,a){let o=(0,d.Rx)(i),s=Object.values(i.teams).filter(s=>e.canStartProTrial(r,n,o,s,i,a));return s.sort((e,r)=>(r.editors??0)-(e.editors??0)),s},e.canStartProTrial=function(r,n,i,a,o,l){return!(!r||!e.entryEnabled()||(0,d.w5)(a)||a.stripe_customer_id||!n||i||!(0,u.canEditTeam)(a.id,o)||30>(0,s.A)().utc().diff((0,s.A)(r.created_at).utc(),"days",!0)||(0,s.A)().utc().diff((0,s.A)(r.created_at).utc(),"days",!0)>90||e.getProTrialStatus(a)||Object.keys(l).some(e=>!!l[e][g]))&&!!e.isUserInVariant(r.id)};let r=e=>Math.max(Math.ceil((0,s.A)(e).diff((0,s.A)(),"days",!0)),0);function n(r){return(0,e.uxEnabled)()&&r.grace_period_end&&r.grace_period_type&&_===r.grace_period_type?new Date(r.grace_period_end)<new Date?p.a.TRIAL_EXPIRED:p.a.IN_TRIAL:null}function i(e){return!!e&&e.status===p.a.IN_TRIAL&&e.userCanEditTeam}e.getProTrialStatus=n,e.isEligibleTrialEntryView=function(e){return"folder"===e.view||"team"===e.view||(0,m.K)(e)},e.canSeeProTrialUx=i,e.canSeeProTrialUxInFile=function(e,r){return i(e)&&r?.editorType&&r?.canEdit},e.canSeeProTrialExpiryUx=function(r){if(!(0,e.expiryEnabled)()||!r||r.status!==p.a.TRIAL_EXPIRED)return!1;let n=(0,s.A)().utc().diff((0,s.A)(r.trialExpiresAt).utc(),"days",!0);return!(n<0)&&n<7},e.canSeeExpiredProTrialBanner=function(r,n,i){if(!n)return!1;let a=!!r[n.id]?.[g],o=e.getProTrial(n,a,i);return e.canSeeProTrialExpiryUx(o)}})(i||(i={}))},216986:(e,r,n)=>{n.d(r,{Bx:()=>T,Cs:()=>O,Hs:()=>b,Jr:()=>C,KJ:()=>N,M9:()=>E,RL:()=>y,Rv:()=>f,Zh:()=>D,_P:()=>P,e:()=>I,eA:()=>w,fz:()=>v,mf:()=>R,qb:()=>g,ql:()=>A,t0:()=>L,yE:()=>S});var i=n(445777),a=n(992277),o=n(741419),s=n(159563),l=n(857188),c=n(831932),d=n(502255),u=n(8374),p=n(790355);n(927589);var m=n(481540);n(992444),n(718451);var h=n(376780),_=n(834111);function g(e){return e===o.bq3.PRESET||e===o.bq3.CUSTOM?"scale-down":e===o.bq3.PRESENTATION?"contain":"min-zoom"}function f(e){return"fixed"}function E(e){let r=function(e){switch(e){case"NONE":return o.bq3.NONE;case"PRESET":return o.bq3.PRESET;case"CUSTOM":return o.bq3.CUSTOM;case"PRESENTATION":return o.bq3.PRESENTATION;default:(0,i.xb)(e)}}(e.initialDevice?.type??"NONE"),n=e.scalingInfo;return c.rr?{viewportScalingMode:"fit-width",contentScalingMode:n?.contentScalingMode??"fixed"}:{viewportScalingMode:n?.viewportScalingMode??g(r),contentScalingMode:n?.contentScalingMode??f(r)}}function y(e,r){return!r?.disableDefaultKeyboardNav&&([l.Uz.LEFT_ARROW,l.Uz.PAGE_UP].includes(e.keyCode)||e.shiftKey&&e.keyCode===l.Uz.N)}function b(e,r){return!(r?.disableDefaultKeyboardNav||r?.inlinePreview&&e.keyCode===l.Uz.SPACE&&e.shiftKey)&&[l.Uz.RIGHT_ARROW,l.Uz.SPACE,l.Uz.ENTER,l.Uz.N,l.Uz.PAGE_DOWN].includes(e.keyCode)}function v(e,r){return!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.R&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey}let T=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.F&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!r.inlinePreview,I=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.Z&&!e.metaKey&&!e.ctrlKey&&!r.inlinePreview&&r?.file?.editor_type!==h._Y.SLIDES,S=(e,r)=>e.keyCode===l.Uz.SPACE&&e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!r?.inlinePreview,w=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.C&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!r.inlinePreview;function A(e){return!1}let C=(0,u.nF)((e,r)=>{if(r.userInitiated){let n={scalingMode:r.viewportScalingMode,contentScalingMode:r.contentScalingMode,source:r.source};e.dispatch(P({name:"Prototype Scale Changed",params:n}))}let n=e.getState().selectedView;if("prototype"===n.view){let i=(0,s.Ay)(n,e=>{void 0===e.scalingInfo&&(e.scalingInfo={}),r.hasOwnProperty("viewportScalingMode")&&(e.scalingInfo.viewportScalingMode=r.viewportScalingMode),r.hasOwnProperty("contentScalingMode")&&(e.scalingInfo.contentScalingMode=r.contentScalingMode)});e.dispatch(p.$T(i))}}),N=(0,u.nF)((e,{showHotspots:r})=>{let n=e.getState().selectedView;if(n&&"prototype"===n.view){let i={...n,showHotspots:r};e.dispatch(p.$T(i))}}),L=(0,u.nF)((e,{showDeviceFrame:r})=>{let n=e.getState().selectedView;(0,i.B1)(n,"selectedView must be defined to show device frame"),(0,i.vA)("prototype"===n.view,"must be in the view to show device frame");let a={...n,showDeviceFrame:r};e.dispatch(p.$T(a))}),O=(0,u.nF)((e,{newDevice:r})=>{let n=e.getState().selectedView;(0,i.B1)(n,"selectedView must be defined to set initial device frame"),(0,i.vA)("prototype"===n.view,"must be in the view to set initial device frame");let a={...n,initialDevice:r,overrideDevice:void 0};e.dispatch(p.$T(a))}),R=(0,u.nF)((e,{newDevice:r})=>{let n=e.getState().selectedView;(0,i.B1)(n,"selectedView must be defined to set override device frame"),(0,i.vA)("prototype"===n.view,"must be in the view to set override device frame");let a={...n,overrideDevice:r};e.dispatch(p.$T(a))}),P=(0,u.nF)((e,r)=>{let n=e.getState(),i=r.params||{},a=(0,_.U2)(n.selectedView);m.ds(r.name,a,n,i)}),D=(()=>{let e=(0,u.nF)((e,r)=>{let n=e.getState(),i=r.params||{},o=(0,_.U2)(n.selectedView);if(!o){(0,d.$D)(a.e.PROTOTYPING,Error("No file key for prototype event"));return}m.GS(r.name,o,n,i)});return({name:r,params:n})=>e({name:r,params:n})})()},816662:(e,r,n)=>{n.d(r,{C$:()=>s,Cp:()=>d}),n(848318),n(716544);var i=n(741419);n(39773);var a=n(171659);n(667323),n(235441),n(305719),n(401822);var o=n(53818);function s(e){let r=[e];for(;0!==r.length;){let e=r.shift();if(!1!==e.visible){if("TEXT"===e.type)return!0;r.push(...e.childrenNodes)}}return!1}n(967867),n(369600),n(312255);let l="last-used-left-panel-tab",c="ASSETS_TAB";function d(e){a.x4&&a.x4.setItem(l,e===i.xae.ASSETS?c:"LAYERS_TAB")}(0,o.D)(()=>{if(a.x4){let e=a.x4.getItem(l);if(e)return e===c?i.xae.ASSETS:i.xae.LAYERS}return null})},279531:(e,r,n)=>{n.d(r,{H4:()=>u,Ud:()=>d,cZ:()=>m});var i=n(848318),a=n(716544),o=n(445777),s=n(536384),l=n.n(s),c=n(781806);let d=Symbol("NotVisibleRunAnyway");class u{constructor(e){this._callback=e,this._previousValue=null}render({isVisible:e,className:r,displayAs:n,valueArgs:a=[]}){let o=!0===e||e===d?this._previousValue=this._callback(...a):this._previousValue,s=!0===e;return o instanceof Array?o.map((e,a)=>e&&i.createElement(p,{key:e.key??a,isVisible:s,className:r,displayAs:n},e)):o&&i.createElement(p,{key:o.key??void 0,isVisible:s,className:r,displayAs:n},o)}}class p extends i.Component{constructor(){super(...arguments),this.ref=e=>{this.el=e}}componentDidUpdate(e){this.el&&(!e.isVisible&&this.props.isVisible&&c.F2.focusSubtreeIfNecessary(this.el),e.isVisible&&!this.props.isVisible&&c.F2.blurSubtreeIfNecessary(this.el))}getClassNameForDisplayAs(){let{displayAs:e}=this.props;switch(e){case"block":return"";case"contents":return"displayContents";default:(0,o.xb)(e)}}render(){let{isVisible:e}=this.props,r=l()(this.props.className?this.props.className:"cachedSubtree",this.getClassNameForDisplayAs());return i.createElement("div",{ref:this.ref,className:r,style:{display:e?"":"none"}},this.props.children)}}function m(e,r){"function"==typeof e?e(r):e&&(e.current=r)}p.defaultProps={displayAs:"contents"},p.displayName="CachedSubtreeComponent",(0,a.Ng)(void 0,e=>({dispatch:e}))},994768:(e,r,n)=>{n.d(r,{JG:()=>h,Jl:()=>_,SO:()=>m,U_:()=>p,X2:()=>E,gJ:()=>g,ul:()=>f});var i=n(445777),a=n(171659),o=n(235441),s=n(376780),l=n(526830),c=n(241917),d=n(492119),u=n(402840);function p(){let e=(0,o.my)();return e===c.nT.Whiteboard?d.$A.FigJam:(0,c.yY)(e)?d.$A.Design:e===c.nT.DevHandoff?d.$A.Handoff:e===c.nT.Slides?d.$A.Slides:null}let m="recent-face-stamps-figjam",h="recent-whiteboard-tools-figjam";function _(e,r){if(e===d.$A.FigJam)switch(r){case l.bD.PLUGIN:return"recent-plugins-figjam";case l.bD.WIDGET:return"recent-widgets-figjam";case l.bD.HUB_FILE:return"recent-templates-figjam";case d.dB.FACE_STAMP:return m;case d.dB.WHITEBOARD_TOOL:return h;default:return null}if(e===d.$A.Design)switch(r){case l.bD.PLUGIN:return"recent-plugins-figma-design";case l.bD.WIDGET:return"recent-widgets-figma-design";default:return null}if(e===d.$A.Handoff)return r===l.bD.PLUGIN?"recent-plugins-handoff":null;if(e===d.$A.Slides)switch(r){case l.bD.HUB_FILE:return"recent-templates-piper";case l.bD.PLUGIN:return"recent-plugins-slides"}return null}function g(e,r){if(!a.x4)return[];let n=[],i=_(e,r),o=i&&a.x4.getItem(i);try{n=o&&JSON.parse(o)||[]}catch(e){}return n.map(e=>({...e,type:e.type||d.vt.CommunityResource}))}function f(e){let r=(0,u.uF)(e),n=e.community_publishers.accepted.map(e=>({isPending:!1,profile:{id:e.id,profileHandle:e.profile_handle,user:null,team:null,org:null,[e.entity_type]:{name:e.name}},role:s.un.CREATOR}));return r.community_publishers=n,r}function E(e){switch(e.type){case d.vt.CommunityResource:return e.id;case d.vt.TeamTemplate:return e.key;default:(0,i.xb)(e)}}},133016:(e,r,n)=>{n.d(r,{Aw:()=>b,XV:()=>f,v9:()=>y}),n(425642);var i=n(741419);n(673906);var a=n(39773),o=n(579020),s=n(926252),l=n(574146),c=n(870769),d=n(79563),u=n(931516),p=n(492119);n(152301),n(139476);var m=n(627855),h=n(342431),_=n(778094);let g=e=>null==e||e.type===u.PW.STATE_GROUP?null:e?.containing_frame?.containingStateGroup?.nodeId||null;function f(e,r,n){if(!e)return{selectedItem:null,relatedItems:[]};let i=(0,_.QL)(e,n);if(!i)return function(e,r){let n=(0,l.Qx)(r),i=r.local.components[e]??r.local.stateGroups[e],a=g(i),o=a?n[a]:i,s=E(o,Object.values(n??{}));return{selectedItem:o,relatedItems:s}}(e,r);let{publishID:o,libraryKey:s}=i,d=a.zl.get(h.qp)[s],u=(0,c.iP)(r.publishedByLibraryKey.components,{library_key:s,team_id:d?.team_id??null}),p=(0,c.iP)(r.publishedByLibraryKey.stateGroups,{library_key:s,team_id:d?.team_id??null}),m={...(0,l.Jl)(u),...p},f=function(e,r){let n=g(e);return n?r[n]:e}(u[o]??p[o],m),y=E(f,Object.values(m??{}));return{selectedItem:f,relatedItems:y}}function E(e,r){if(!e||!e.containing_frame?.nodeId&&1===(0,d.ke)(e.name).length)return[];let n=(0,d.In)(e.name);return r.filter(r=>(0,c.nJ)(r.containing_frame,e?.containing_frame)&&(0,d.In)(r.name)===n)}function y(e,r,n,a,l,c,d,h){if(e){if((0,m.Oo)(e,n)){if(e.type===u.PW.COMPONENT){let r=e.node_id;i.glU.replaceSymbolBackingInstances({[r]:a},c)}else{let r=i.glU.getSimilarStates(a,e.node_id,"");i.glU.replaceSymbolBackingInstances(r,c)}(0,o.sx)("Instance Swapped To Local Component",{source:l,...d,queryId:h})}else r(s.uO({item:e,instanceGUIDs:a,sourceForTracking:l,storeInRecentsKey:p.$A.Design,usedSwapInstanceKeyboardShortcut:c,queryId:h??void 0}))}}function b(e){i.glU.replaceSymbolBackingInstances(e,!1)}},661458:(e,r,n)=>{n.d(r,{Dc:()=>F,hV:()=>C.h,mU:()=>k});var i=n(886450),a=n(992277),o=n(741419),s=n(157907),l=n(656470),c=n.n(l),d=n(579020),u=n(141039),p=n(994811),m=n(6819),h=n(502255),_=n(896966),g=n(757033),f=n(753804),E=n(367009),y=n(442313),b=n(697714),v=n(164963),T=n(8374),I=n(202890),S=n(789269),w=n(32790),A=n(439984),C=n(148150),N=n(50258),L=n(992444),O=n(76767);let R={downloadFile(e,r=null){let n=document.createElement("a");n.setAttribute("href",e),r&&(n.download=r),document.body.appendChild(n),n.click(),document.body.removeChild(n)},async addAssetsToZip(e,r,n,i,a){let o=[],s=[],l={},c={};if(0===r.length&&0===n.size)return;async function d(r){let n=2e3;for(;;)try{return await r()}catch(r){if(e())return;await new Promise(e=>setTimeout(e,n)),n<32e3&&(n*=2)}}for(let n=0;n<r.length&&!e();n+=100)await d(async()=>{let e=await g.Ay.post(`/file/${i}/image/batch`,{sha1s:r.slice(n,n+100)});o=o.concat(Object.keys(e.data.meta.s3_urls)),l={...l,...e.data.meta.s3_urls}});n.size>0&&await d(async()=>{let e=(await N.S.getVideos({fileKey:i})).data.meta.videos;for(let r in e)n.has(r)&&(c[r]=e[r]);s=Object.keys(c)});let u=o.length+s.length,p=u;P(u,u);let m=[];async function h(r){for(;r.nextIdx<r.queue.length&&!e();){let n=r.queue[r.nextIdx];r.nextIdx++,await d(async()=>{let i=(await g.Ay.crossOriginGetAny(r.urls[n],null,{responseType:"blob"})).response;if(P(--u,p),e())return;let o=await (0,f.v)();a.zipPromise=a.zipPromise.then(()=>a.zipWriter.add(`${r.prefix}/${n}`,new o.BlobReader(i),{level:0}))})}}let _={prefix:"images",queue:o,nextIdx:0,urls:l};for(let e=0;e<5;e++)m.push(h(_));m.push(h({prefix:"videos",queue:s,nextIdx:0,urls:c})),await Promise.all(m)}};function P(e,r){m.D.dispatch(I.VQ({pendingImageDownload:e,totalImages:r}))}function D(e,r,n){let i=m.D.dispatch,a=m.D.getState(),o=a.mirror.appModel,s=a.saveAsState.waitTime,l=(0,A.VI)(o.pagesList),c=2e4-s,d=!navigator.onLine||c<=0;i(x({mode:e,pagesAllLoaded:l,showSkipButton:d,completeSaveAction:r,cancelCallback:n})),d||setTimeout(()=>{i(U({mode:e,pagesAllLoaded:l,showSkipAfterWaitingMs:2e4,completeSaveAction:r,cancelCallback:n}))},c)}async function M(e,r){let n=(0,f.v)(),l=m.D.dispatch,u=m.D.getState(),_=!1,g=()=>{},E=!1,T=()=>{},I=new Promise(e=>{T=e}),S=new Promise(e=>{g=e}),A=()=>{g(),_=!0},N=0,L=0;function P(){return{downloadSkipped:_,attemptId:r,canceled:E,reason:"save-as",exportV2:!0,imageCount:N,videoCount:L,loadId:w.xK.loadID()}}let M=()=>{T(),E=!0,(0,d.sx)("File Export V2 Canceled",P())};D(C.h.SaveLocalFile,A,M);let k=(0,O.q)(o._em.SAVE_LOCAL_COPY);k.catch(()=>{(0,h.$D)(a.e.SCENEGRAPH_AND_SYNC,Error("saveAs: waitForAllPagesPromise rejected")),l(b.F.dequeue({matchType:"save-as-progress"})),l(b.F.enqueue({error:!0,message:(0,y.t)("visual_bell.save_as_error")}))}),await Promise.race([k,I,S]),l(b.F.dequeue({matchType:"save-as-progress"}));let F=o.AlE.getMutableActiveDocument(),x=o.Bko.findImagesUnder(F,["0:0"],o.MoD.ALL),U={},B=[];for(let e of x){let r=o.Bko.getCompressedImage(e);r?U[e]=r:B.push(e)}let V=new Set(o.Bko.findAllVideos());if(N=x.length,L=V.size,E)return;l(b.F.enqueue({type:"save-as-actual",message:(0,y.t)("visual_bell.saving"),icon:v.zX.SPINNER})),await new Promise(e=>setTimeout(e,0));let G=o.glU.attemptActiveDocumentSave(r);if(!G)return;let H=await n,K=new H.ZipWriter(new H.BlobWriter("application/zip"));async function W(){if(!G)return;let r=c()(Array.from(o.glU.getDeveloperRelatedLinks().values()));for(let n in await K.add("canvas.fig",new H.Uint8ArrayReader(G.canvas),{level:0}),await K.add("thumbnail.png",new H.Uint8ArrayReader(G.thumbnail),{level:0}),await K.add("meta.json",new H.TextReader(JSON.stringify({client_meta:JSON.parse(G.clientMeta),file_name:e.name,developer_related_links:r}))),await K.add("images",null,{directory:!0}),U){let e=U[n];await K.add(`images/${n}`,new H.Uint8ArrayReader(e),{level:0})}}l(b.F.dequeue({matchType:"save-as-actual"})),_||D(C.h.SaveLocalFile,A,M);let z={zipWriter:K,zipPromise:W()};if((0,s.k)().export_image_download_logging&&(0,d.sx)("Image Download For Export",{stage:"start",...P()}),await Promise.race([R.addAssetsToZip(()=>_||E,B,V,e.key,z),S,I]),(0,s.k)().export_image_download_logging&&(0,d.sx)("Image Download For Export",{stage:"finished",...P()}),l(b.F.dequeue({matchType:"save-as-progress"})),E)return;l(b.F.enqueue({type:"save-as-actual",message:(0,y.t)("visual_bell.saving"),icon:v.zX.SPINNER})),await z.zipPromise;let $=await K.close();if((0,p.fT)(u.user?.email)){let e="",r=u.authedUsers?.byId;if(r){Object.values(r).forEach(r=>{let n=r.email;(0,p.jm)(n)&&!(0,p.fT)(n)&&(e=n)});let n=new FileReader;n.onloadend=()=>{let r=n.result,a=(0,i.Et)(new Uint8Array(r));(0,d.sx)("Support Share Download",{sha1Hash:a,internalEmail:e})},n.readAsArrayBuffer($)}}let Y=URL.createObjectURL($),j=o.glU.fileExtension(),q=`${e.name}${j}`,X=(0,y.t)("save_as_actions.save_partial_file_name_suffix",{date:new Date().toLocaleDateString().replace(/_|\//g,"-")}),Z=`${e.name} - ${X}${j}`;R.downloadFile(Y,_?Z:q),URL.revokeObjectURL(Y),(0,d.sx)("File Export V2 Completed",P()),l(b.F.dequeue({matchType:"save-as-actual"}))}function k(e,r,n){F(C.h.Export,e,r,n,[o.CUU.getCurrentPage(o.Sie.REDUX,o.AlE.getActiveDocument())||""],"export-all-frames-to-pdf")}async function F(e,r,n,i,l,c,p){(0,_.Lo)("initiateSaveAs","begin",{completeSaveAction:i,nodesToLoad:l,mode:e}),n(I.Dc());let f=m.D.getState(),E=f.saveAsState.attemptId;if((0,s.k)().antiabuse_file_download_check)try{let e=f.openFile?.key||"",r=await g.Ay.post(`/api/file_download_log/${e}`,{is_desktop:!!u.eD});r.data?.meta?.download_err&&await N.S.getWAFValidator()}catch(e){if(429===e.status)throw e;(0,d.sx)("File Download Log Error",{attemptId:E,error:e})}if(e===C.h.SaveLocalFile&&((0,d.sx)("File Export Initiated",{attemptId:E,reason:c,exportV2:!0,loadId:w.xK.loadID()}),f.openFile)){M(f.openFile,E);return}D(e,i);let y=e===C.h.SaveLocalFile?o.MoD.ALL:o.MoD.NON_ANIMATED_ONLY;(0,s.k)().export_image_download_logging&&(0,d.sx)("Image Download For Export",{stage:"start",attemptId:E,reason:c}),await (0,S.Jr)().loadAllImagesUnder(l,y,c,P),(0,s.k)().export_image_download_logging&&(0,d.sx)("Image Download For Export",{stage:"finished",attemptId:E,reason:c});try{m.D.getState().saveAsState.startTime?(n(B({mode:e,completeSaveAction:i,settings:p})),n(I.hf({skipped:!1}))):(0,d.sx)("File Export V1 Canceled",{attemptId:E})}catch(e){(0,h.$D)(a.e.SCENEGRAPH_AND_SYNC,e)}}let x=(0,T.nF)((e,r)=>{let n={text:(0,y.t)("save_as_actions.cancel"),action:r.cancelCallback||(()=>{e.dispatch(I.Mt())})},i=function(e,r,n){switch(e){case C.h.SaveLocalFile:if(r)return(0,y.t)("save_as_actions.save_partial_file");return n?(0,y.t)("save_as_actions.save_without_images"):(0,y.t)("save_as_actions.save_partial_file");case C.h.Export:if(r)return null;return n?(0,y.t)("save_as_actions.export_without_images"):(0,y.t)("save_as_actions.export_without_content");default:return null}}(r.mode,navigator.onLine,r.pagesAllLoaded),a=null;i&&(a={text:i,action:()=>{(0,d.sx)("image_loading_canceled",{mode:r.mode}),e.dispatch(B({mode:r.mode,completeSaveAction:r.completeSaveAction})),e.dispatch(I.hf({skipped:!0}))}});let o={type:"save-as-progress",progressKey:"save-as",message:function(e,r){return e?r?(0,y.t)("save_as_actions.downloading_images"):(0,y.t)("save_as_actions.downloading_content"):r?(0,y.t)("save_as_actions.cannot_download_images"):(0,y.t)("save_as_actions.cannot_download_content")}(navigator.onLine,r.pagesAllLoaded),icon:v.zX.PROGRESS,button:n};e.dispatch(b.F.enqueue({...o,button:a?{primary:n,secondary:a}:n}))}),U=(0,T.nF)((e,r)=>{let n=e.getState();if(!n.visualBell.find(e=>"save-as-progress"===e.type)||!n.saveAsState?.startTime)return;let i=(n.saveAsState.waitTime||0)+Date.now()-n.saveAsState.startTime;(!navigator.onLine||i>r.showSkipAfterWaitingMs)&&(e.dispatch(b.F.clearAllExcept(["plugins-status"])),e.dispatch(x({mode:r.mode,pagesAllLoaded:r.pagesAllLoaded,showSkipButton:!0,completeSaveAction:r.completeSaveAction,cancelCallback:r.cancelCallback})))}),B=(0,T.nF)((e,r)=>{e.dispatch(b.F.clearAllExcept(["plugins-status"]));let n=e.getState().saveAsState;e.dispatch(E.n.set({message:function(e){switch(e){case C.h.SaveLocalFile:return(0,y.t)("visual_bell.saving");case C.h.Export:return(0,y.t)("visual_bell.exporting");case C.h.CopyAsPNG:return(0,y.t)("save_as_actions.copy_as_png_progress");case C.h.CopyAsSVG:return(0,y.t)("save_as_actions.copy_as_svg_progress");case C.h.RasterizeSelection:return(0,y.t)("save_as_actions.rasterize_selection_progress")}}(r.mode),showLoadingSpinner:!1,callback:()=>{"string"==typeof r.completeSaveAction?L.Y5.triggerAction(r.completeSaveAction,{source:"menu",attemptId:n.attemptId,settings:r.settings}):r.completeSaveAction()}}))})},158349:(e,r,n)=>{n.d(r,{J:()=>c,m:()=>d});var i=n(628055),a=n(757033),o=n(481238),s=n(874391),l=n(389763);async function c(e,r="",n="",d,u=!1){u&&await (0,l.l)();let{data:{meta:p}}=await a.Ay.post(`/api/multiplayer/${e}/create_savepoint`);return d(s.BC({history:{versions:[p]},direction:i.mL})),d(s.A9({status:!1})),d(o.D({fileKey:e,savepointID:p.id,label:r,description:n})),p}async function d(e,r="",n="",i,a=!1){return null!=e?await c(e,r,n,i,a):null}},834111:(e,r,n)=>{n.d(r,{$Z:()=>I,IE:()=>U,Iu:()=>x,K:()=>H,Np:()=>w,Tk:()=>F,U2:()=>G,YP:()=>M,bW:()=>P,s5:()=>V,vU:()=>k,xS:()=>S,yn:()=>D,zg:()=>B});var i=n(39153),a=n(668122),o=n(224037),s=n(701877),l=n(896750),c=n(867487),d=n(241917),u=n(430330),p=n(748288),m=n(163698),h=n(664606),_=n(60546),g=n(19174),f=n(579196),E=n(706737),y=n(495574),b=n(732054),v=n(594082),T=n(97859);let I=new c.k([new a.$T,new b.f,new _.YY,new g.y,new y.a,new o.m,new m.B,new s.G,new l._,new E.N,new f.u,new h.i,new v.T]);function S(e,r){return new URL(w(e,r),document.baseURI).href}function w(e,r){return I.selectedViewToPath(r,e)}let A=["drafts","fonts","libraries","search","settings","plugins","widgets","user"].concat(a.nw),C=RegExp(`^/files/([0-9]+)/(?:${A.join("|")})(.*)$`),N=RegExp("^/files/([0-9]+)/?$"),L=RegExp(`^/files/team/([0-9]+)/(?:${A.join("|")})(.*)$`),O=(e,r,n)=>{let i=e.split("/");return i[1]&&"files"===i[1]&&(6!==i.length||"files"!==i[1]||"team"!==i[2]||"restore"!==i[5])&&(e.match(C)?i.splice(2,1):e.match(L)?i.splice(2,2):(i.length>=3&&r&&i[2]===r&&i.splice(2,1),i.length>=3&&n&&i[3]===n&&i.splice(2,2))),i},R=(e,r)=>{let n=e.split("/");return n[1]&&"files"===n[1]&&(e.match(C)?n.splice(2,1):n.length>=3&&r&&n[2]===r&&n.splice(2,1)),n};function P(e){let r=e.match(C);if(r)return r[1];let n=e.match(N);return n?n[1]:null}function D(e){let r=e.match(L);return r?r[1]:null}function M(e){let r=R(e,(0,T.pk)());return""===r[r.length-1]&&r.splice(r.length-1,1),r}function k(e,r,n,i,a={view:"recentsAndSharing"}){let o=[];return""===(o=O(r,e.currentUserOrgId,e.currentTeamId))[o.length-1]&&o.splice(o.length-1,1),I.pathToSelectedView(e,o,n,i)||a}function F(e,r,n,i,a){if(r===i&&n===a)return e;let o=r===u.O.ORG?n:`team/${n}`,s=i===u.O.ORG?a:`team/${a}`;return e.replace(o,s)}function x(e,r){return I.selectedViewName(r,e)}function U(e){let r=e.modalShown;for(;r;){if("ACCOUNT_SETTINGS_MODAL"===r.type)return!0;r=r.prevModal}return!1}function B(e){return"fullscreen"===e.view&&e.workshopModeInfoLoaded&&e.workshopModeInfo&&e.editorType===d.nT.Whiteboard&&new Date<e.workshopModeInfo.until||!1}function V(e){return"fullscreen"===e.view&&e.nodeId||null}function G(e){switch(e.view){case"fullscreen":return e.fileKey||null;case"mobileViewer":return e.file?.key||null;case"prototype":return null==e.file&&i.Z({data:{selectedView:e}}),e.file.key;default:return null}}function H(e){return"recentsAndSharing"===e.view&&(void 0===e.tab||e.tab===p.G.RECENTLY_VIEWED)}},804072:(e,r,n)=>{n.d(r,{j:()=>o,q:()=>s});var i=n(716544),a=n(338159);function o(e){let{currentUserOrgId:r}=e;return r||(0,a.i)(e),`/${r}`}function s(){return(0,i.d4)(o)}},753515:(e,r,n)=>{n.d(r,{Z:()=>f});var i=n(719670),a=n(741419),o=n(4340),s=n(39773),l=n(77441),c=n(667323),d=n(545801),u=n(604613),p=n(870769),m=n(576046),h=n(175334),_=n(70629);let g=(0,s.eU)({});class f{constructor(e){this.store=e,this.dispatch=e=>{this.store.dispatch(e)}}showEyedropper(e,r,n,i,a,o,s,l,d,u){this.dispatch(c.Gm({color:e,width:r,height:n,rgba:i,grid:a,cursorPosition:o,assetId:s,variableSetModeId:l,resolvedVariableColor:d,dropperData:u}))}hideEyedropper(){this.dispatch(c.Gm(null))}updateSelectionImages(e){let r=s.zl.get(g),n=Object.keys(e).length!==Object.keys(r).length;if(!n){for(let i in r)if(!e[i]){n=!0;break}}n&&s.zl.set(g,e)}updateSelectionPaintsWithFillEncodedPaints(e,r,n,a,o,s,l,c){let u=(0,m.S)(e,r,n,a,o,s,c),p=this.store.getState().mirror.selectionPaints;(!(0,i.c2)(p.paints,u)||p.emptyDueToLimitExceeded||l)&&(this.store.dispatch(d.QA(u)),l&&this.store.dispatch(d.Xp(!0)))}updatePaintsDirectlyOnSingleNodeWithFillEncodedPaints(e,r){var n=[];for(let r of e){let e=(0,m.K)(r);e?n.push(e):console.error(`Failed to decode: ${r}`)}n=n.map((e,n)=>(e.variableScopes=new Set(r?r[n]:[]),e));let a=this.store.getState().mirror.selectionPaints;(!(0,i.c2)(a.paintsDirectlyOnSingleNode,n)||a.emptyDueToLimitExceeded)&&this.store.dispatch(d.n0(n))}updatePaintStyles(e,r,n){let a=this.store.getState().library,o=this.store.getState().mirror.sceneGraph,s=r.map(e=>{let r=(0,p.Gp)(e.key,e.guids,a);return r?{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:(0,p.uH)(r,o),variableScopes:new Set(e.variableScopes),isOnlyDirectlySelected:e.isOnlyDirectlySelected}:{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:"",variableScopes:new Set(e.variableScopes),isOnlyDirectlySelected:e.isOnlyDirectlySelected}});s.sort((e,r)=>e.count>r.count?-1:e.count===r.count&&e.styleName<r.styleName?-1:1),(!(0,i.c2)(e,s)||this.store.getState().mirror.selectionPaints.emptyDueToLimitExceeded)&&this.store.dispatch(n(s))}updateSelectionPaintsWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.styles,e,d.Lh)}updateSelectionTextAndEffectStyles(e){l.gq.syncFromFullscreen({styles:e})}updatePaintsDirectlyOnSingleNodeWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.stylesDirectlyOnSingleNode,e,d.uQ)}clearSelectionPaintsDueToLimitExceeded(){this.store.dispatch(d.Mc())}clearSelectionTextAndEffectStylesDueToLimitExceeded(){l.gq.syncFromFullscreen({styles:[]})}updateSelectionPaintFromDropper(e){let r=this.store.getState().currentSelectionPaintInPicker;if(null==r.originalPaint)return!1;let n=(0,m.K)(e);return null==n?(console.error(`Failed to apply paint: ${e}`),!1):(a.Osy.updatePaint((0,o.GP)(r.originalPaint),e,!0,null),this.store.dispatch(d.oI({...r,updatedPaintFromDropper:n.paint})),!0)}pickerHasSelectionPaintOpen(){return null!=this.store.getState().currentSelectionPaintInPicker.originalPaint}originalPaintForCurrentSelectionPaintsPicker(){let e=this.store.getState().currentSelectionPaintInPicker.originalPaint;return null==e?"":(0,o.GP)(e)}colorPickerSelectedVariable(){let e=this.store.getState().variablePickerShown;if(e.isShown&&e.resolvedType===a.rXF.COLOR&&"variable-picker-alias"===e.type)return{varId:e.variableID,modeId:e.modeID};let r=this.store.getState().pickerShown?.id,n=r?.startsWith(u.Yr),i=s.zl.get(_.E_);return n&&i?i:{}}isPrototypingModalOpen(){return this.store.getState().pickerShown?.id===u.o$}validateCopyBuffer(e,r){let n=this.store.getState().openFile?.key;n&&h.Z.postValidateCopy({nodeIds:e,fileKey:n,copyType:r})}}},871681:(e,r,n)=>{n.d(r,{hK:()=>s});var i=n(925040),a=n(429536),o=n(139348);let s=e=>e.selectedView;(0,i.Mz)(s,e=>"workspace"===e.view&&e.subView===o.V0.DIRECTORY?e.workspaceId:void 0);let l=(0,i.Mz)(s,e=>"team"===e.view?e.teamId:void 0),c=(0,i.Mz)(s,e=>"folder"===e.view?e.folderId:void 0),d=(0,i.Mz)(s,e=>e.currentTeamId,(e,r)=>"allProjects"===e.view?r:void 0),u=(0,i.Mz)(l,d,e=>e.teams,(e,r,n)=>e&&n[e]||r&&n[r]),p=(0,i.Mz)(c,e=>e.folders,(e,r)=>e&&r[e]),m=(0,i.Mz)(p,a.D,(e,r)=>e&&e.id!==r?e:void 0);(0,i.Mz)(u,m,(e,r)=>e||r)},778727:(e,r,n)=>{n.d(r,{$c:()=>ew,AC:()=>tw,Dc:()=>e8,F9:()=>Z,FZ:()=>ef,GS:()=>eD,Io:()=>F,Iy:()=>tS,JI:()=>tn,MH:()=>ea,MW:()=>ej,Mh:()=>U,Pd:()=>B,Pg:()=>W,Sh:()=>eC,Wz:()=>ed,bh:()=>ec,cM:()=>ee,dM:()=>eo,dU:()=>eP,e_:()=>k,fA:()=>e5,jO:()=>eg,ju:()=>eq,oB:()=>tr,p6:()=>tC,p9:()=>eR,qG:()=>tR,qN:()=>tO,tK:()=>es,vQ:()=>tA,x$:()=>tI,x6:()=>e_,y6:()=>eK});var i=n(425642),a=n(133696),o=n(741419),s=n(573446),l=n(157907),c=n(39773),d=n(223926),u=n.n(d),p=n(890446),m=n.n(p),h=n(946678),_=n.n(h),g=n(149674),f=n.n(g),E=n(925040),y=n(71313),b=n(503813),v=n(580008),T=n(92537),I=n(375536),S=n(369600),w=n(119310),A=n(870769),C=n(710665),N=n(747314),L=n(395614),O=n(931516),R=n(308142),P=n(53818),D=n(153059),M=n(111693);let k=e=>e.library,F=e=>e.library.libraryPublishingMode,x=e=>e.openFile?.publishedHubFile,U=e=>e.library.openHubFilePublished__LIVEGRAPH.components,B=e=>e.library.openHubFilePublished__LIVEGRAPH.stateGroups,V=e=>e.library.openHubFilePublished__LIVEGRAPH.styles,G=e=>e.library.openHubFilePublished__LIVEGRAPH.variables,H=e=>e.library.openHubFilePublished__LIVEGRAPH.variableSets,K=e=>e.library.openHubFilePublished__LIVEGRAPH.modules,W=(0,E.Mz)([U,V,G,H,B],(e,r,n,i,o)=>!(0,a.Im)(e)||!(0,a.Im)(r)||!(0,a.Im)(n)||!(0,a.Im)(i)||!(0,a.Im)(o)),z=(0,E.Mz)([S.XJ,N.qV],(e,r)=>e&&r[e]||{}),$=(0,E.Mz)([S.XJ,N.ZA],(e,r)=>e&&r[e]||{}),Y=e=>e.library.local.thumbnails,j=e=>e.library.openFilePublished__LIVEGRAPH.styles,q=e=>e.library.openFilePublished__LIVEGRAPH.variableSets,X=e=>e.library.openFilePublished__LIVEGRAPH.modules,Z=(0,E.Mz)([z,j,q,X],(e,r,n,i)=>!(0,a.Im)(r)||!(0,a.Im)(e)||!(0,a.Im)(n)||!(0,a.Im)(i)),J=(0,E.Mz)([e=>e.library.local.styles,S.sS,F,e=>e.library.publishableStyles,V,x,Y],(e,r,n,i,a,o,l)=>{if(n===O.o.HUBFILE&&o){let n=(0,s.l)(o.libraryKey),{newLocal:c}=(0,A.rC)(A.w8,i,a,e,l,{},r||"",n,new Set,O.PW.STYLE);return c}return e}),Q=(0,E.Mz)([j,V,F],(e,r,n)=>n===O.o.HUBFILE?r:e),ee=(0,E.Mz)([J,Q],(e,r)=>{if(!(0,l.k)().ds_remove_redux_library_status)return e;let n={};for(let i of Object.values(e)){let e=ek(i,r[i.node_id],ex);n[i.node_id]={...i,status:e}}return n}),et=(0,E.Mz)([e=>e.library.local.components,S.sS,F,U,x,e=>e.library.publishableSymbols,Y],(e,r,n,i,a,o,l)=>{if(n===O.o.HUBFILE&&a){let n=(0,s.l)(a.libraryKey),{newLocal:c}=(0,A.rC)(A.i_,o,i,e,l,{},r||"",n,new Set,O.PW.COMPONENT);return c}return e}),er=(0,E.Mz)([z,U,F],(e,r,n)=>n===O.o.HUBFILE?r:e),en=(0,E.Mz)([function(e){return e.library.local.stateGroups},S.sS,F,B,x,e=>e.library.publishableStateGroups,Y],(e,r,n,i,a,o,l)=>{if(n===O.o.HUBFILE&&a){let n=(0,s.l)(a.libraryKey),{newLocal:c}=(0,A.rC)(A.LB,o,i,e,l,{},r||"",n,new Set,O.PW.STATE_GROUP);return c}return e}),ei=(0,E.Mz)([$,B,F],(e,r,n)=>n===O.o.HUBFILE?r:e),ea=(0,E.Mz)([et,er,en,ei],(e,r,n,i)=>{if(!(0,l.k)().ds_remove_redux_library_status)return e;let a={},o=(e,r)=>{if(r?.content_hash!==e.content_hash||!(0,A.pD)(r.name,e?.name)||!(0,A.pD)(r.description,e.description)||(0,A.Q_)(r.containing_frame,e?.containing_frame))return!0;let a=(0,A.E2)(e),o=a&&n[a]||null,s=(0,A.E2)(r),l=s&&i[s]||null;return o?!l||eU(o,l):null!=l};for(let n of Object.values(e)){let e=ek(n,r[n.node_id],o);a[n.node_id]={...n,status:e}}return a}),eo=(0,E.Mz)([en,ei],(e,r)=>{if(!(0,l.k)().ds_remove_redux_library_status)return e;let n={};for(let i of Object.values(e)){let e=ek(i,r[i.node_id],eU);n[i.node_id]={...i,status:e}}return n}),es=(0,y.P8)([e=>{let r={};return Object.entries(e.library.localVariablesById).forEach(([e,n])=>{n.isSoftDeleted||(r[e]=n)}),r},e=>e.library.openFilePublished__LIVEGRAPH.variables,S.tB,F,x,G],(e,r,n,i,a,o)=>{let l={},c=i===O.o.HUBFILE&&a?o:r,d=n?.key??"",u=i===O.o.HUBFILE&&a?(0,s.l)(a.libraryKey):(0,s.l)(n?.libraryKey??"");for(let[r,n]of Object.entries(c))e.hasOwnProperty(r)||(l[r]={...n,subscriptionStatus:"LOCAL",isPublishable:!1,modeValues:{},keyForPublish:n.key,status:O.E8.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:d,file_key_source:b.Ps.LOCAL_FILE,library_key:u,hasOnlyBeenReordered:!1});for(let r of Object.values(e)){let e=c[r.node_id],n=ek(r,e,eB);l[r.node_id]={...r,status:n,file_key:d,file_key_source:b.Ps.LOCAL_FILE,library_key:u,key:e?.key,hasOnlyBeenReordered:!!(r&&e&&r.version===e.version&&r.sortPosition!==e.sortPosition)}}return l}),el=(0,E.Mz)([es],e=>u()(Object.values(e),e=>e.variableSetId)),ec=(0,y.P8)([e=>{let r={};return Object.entries(e.library.localVariableSetsById).forEach(([e,n])=>{n.isSoftDeleted||(r[e]=n)}),r},q,el,S.tB,F,x,H],(e,r,n,i,a,l,c)=>{let d=a===O.o.HUBFILE&&l?c:r,u=i?.key??"",p=a===O.o.HUBFILE&&l?(0,s.l)(l.libraryKey):(0,s.l)(i?.libraryKey??""),m={};for(let[r,n]of Object.entries(d))e.hasOwnProperty(r)||(m[r]={...n,subscriptionStatus:"LOCAL",modes:[],defaultModeID:"",isPublishable:!1,keyForPublish:n.key,status:O.E8.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:u,file_key_source:b.Ps.LOCAL_FILE,library_key:p,variableSetError:o.HG$.NONE,hasOnlyBeenReordered:!1});for(let r of Object.values(e)){let e=d[r.node_id],i=function(e,r,n){let i=ek(e,r,eV);if(i!==O.E8.CURRENT)return i;for(let e of n)if(e.status!==O.E8.CURRENT&&e.status!==O.E8.NOT_STAGED)return O.E8.CHANGED;return O.E8.CURRENT}(r,e,n[r.node_id]??[]);m[r.node_id]={...r,status:i,file_key:u,file_key_source:b.Ps.LOCAL_FILE,library_key:p,key:e?.key,hasOnlyBeenReordered:!!(r&&e&&r.version==r.version&&r.sortPosition!==e.sortPosition)}}return m}),ed=(0,E.Mz)([ea],e=>{let r={};for(let n of Object.values(e)){let e=(0,A.E2)(n);null!=e&&(r[e]=r[e]??[],r[e].push(n))}return r}),eu=(0,E.Mz)([ea],e=>f()(e,e=>!(0,A.ad)(e))),ep=e=>e.library.local.modules;function em(e,r){return!!r&&!(r.version===e.version&&(0,A.pD)(r.name,e?.name)&&(0,A.pD)(r.description,e.description))}function eh(e,r,n,i,a){if(!(0,l.k)().dse_module_publish)return{};let o={};if(a===O.o.HUBFILE&&i)for(let[r,i]of Object.entries(n))Object.keys(e).includes(r)||(o[r]={...i,status:O.E8.DELETED,deletedFromSceneGraph:!0});let s=a===O.o.HUBFILE?n:r;for(let r of Object.values(e)){let e=ek(r,s[r.node_id],em);o[r.node_id]={...r,status:e}}return o}let e_=(0,E.Mz)([ep,X,K,x,F],(e,r,n,i,a)=>(0,l.k)().dse_module_publish?eh(e,r,n,i,a):{}),eg=(0,E.Mz)([ep,X,K,x,(e,r)=>r],(e,r,n,i,a)=>eh(e,r,n,i,a)),ef=(0,E.Mz)([eu,eo],(e,r)=>({...e,...r})),eE=(0,E.Mz)([ef],e=>m()(e,e=>(0,A.CG)(e))),ey=(0,E.Mz)([ef],e=>Object.values(e).some(e=>(0,A.HF)(e.status))),eb=(0,E.Mz)([e_],e=>Object.values(e).some(e=>(0,A.HF)(e.status)));(0,E.Mz)([ey,eb],(e,r)=>e||r);let ev=(0,E.Mz)([ef,D.Xt],(e,r)=>Object.keys(r).reduce((r,n)=>(e[n]&&(r[n]=e[n]),r),Object.create(null))),eT=(0,E.Mz)([e_,D.Xt],(e,r)=>Object.keys(r).reduce((r,n)=>(e[n]&&(r[n]=e[n]),r),Object.create(null))),eI=(0,E.Mz)([ee,ef,ec,e_],(e,r,n,i)=>Object.keys(e).length>0||Object.keys(r).length>0||Object.keys(n).length>0||Object.keys(i).length>0),eS=(0,w.bt)(eI),ew=(0,c.eU)(e=>{if(e(eS))return!0;for(let r of Object.keys(I.Mk))if((0,L.O)(r)&&I.Mk[r].local){for(let n of Object.values(e(I.Mk[r].local)))if(!n.isSoftDeleted)return!0}return!1}),eA=(0,P.n)((0,E.Mz)([ef,e_],(e,r)=>Object.keys(e).length>0||Object.keys(r).length>0)),eC=(0,w.bt)(eA),eN=(e,r)=>null!=e.status&&(!!(0,A.lg)(e.status)||!!(0,A.Hb)(e.status)&&(r?r.has(e.node_id):!!e.old_key)),eL=(e,r)=>eN(e,r)&&(0,A.HF)(e.status),eO=(0,w.bt)(e=>e.userStateLoaded),eR=(0,c.eU)(e=>e(eO)&&e(S.yV)?.canEdit&&(e(tO)||e(ew))),eP=(0,E.Mz)([ea,eo,ee,(e,r)=>r],eM),eD=(0,E.Mz)([ea,eo,ee],(e,r,n)=>eM(e,r,n,void 0));function eM(e,r,n,i){let a={...e,...r,...n},o=new Set(i?Object.keys(i).filter(e=>"FORCED_COPY"!==i[e].publishType):Object.values(a).filter(e=>!!e.old_key).map(e=>e.node_id));return Array.from(o).map(r=>e[r]&&(0,A.E2)(e[r])).filter(e=>!!e).forEach(e=>{o.add(e)}),o}let ek=(e,r,n)=>{let i=r&&null==r.unpublished_at,a="isSoftDeleted"in e&&e.isSoftDeleted,o=!!e.isPublishable&&!a;return i&&!o?O.E8.DELETED:!i&&o?O.E8.NEW:i||o?n(e,r)?O.E8.CHANGED:O.E8.CURRENT:O.E8.NOT_STAGED},eF=(e,r)=>!(r&&r.content_hash===e?.content_hash&&(0,A.pD)(r.name,e.name)&&(0,A.pD)(r.description,e.description)),ex=(e,r)=>eF(e,r)||!(0,A.pD)(r.sort_position,e.sort_position),eU=(e,r)=>!(r&&r.version===e.version&&!(0,A.Q_)(r.containing_frame,e?.containing_frame)&&(0,A.pD)(r.name,e?.name)&&(0,A.pD)(r.description,e.description)),eB=(e,r)=>!e||!r||r.version!==e.version||r.sortPosition!==e.sortPosition,eV=(e,r)=>!(r&&r.version===e?.version&&r.sortPosition===e.sortPosition);function eG(e,r,n,a){let[o,s]=_()(r,r=>eN(r,e)),[l,c]=_()(o,n),[d,u]=_()(s,e=>(0,A.HF)(e.status));return{modified:{erroneous:(0,i.Ul)(l,...a),wellFormed:(0,i.Ul)(c,...a)},unmodified:{published:(0,i.Ul)(d,...a),unpublished:(0,i.Ul)(u,...a)}}}function eH(e,r){return null==r?ez(e):eW(e,r)}let eK=(0,c.Iz)(e=>{let r=e?(0,w.bt)(r=>eH(r,e)):(0,w.bt)(ez),n=e?(0,w.bt)(r=>eP(r,e)):(0,c.eU)(new Set);return(0,c.eU)(e=>{let i=e(r),a=e(n),o=Object.values(e(R.t).data??{});return{...i,libraryAssets:{[O.PW.RESPONSIVE_SET]:eG(a,(0,L.O)(O.PW.RESPONSIVE_SET)?o.filter(e=>e.type===O.PW.RESPONSIVE_SET):[],()=>!1,[A.gA]),[O.PW.CODE_COMPONENT]:eG(a,(0,L.O)(O.PW.CODE_COMPONENT)?o.filter(e=>e.type===O.PW.CODE_COMPONENT):[],()=>!1,[A.gA])}}})}),eW=(0,E.Mz)([ee,ea,eo,ef,ec,es,e_,eP,(e,r)=>r],e$),ez=(0,E.Mz)([ee,ea,eo,ef,ec,es,e_,eD],(e,r,n,i,a,o,s,l)=>e$(e,r,n,i,a,o,s,l,void 0));function e$(e,r,n,i,a,o,s,c,d){let u=(e,r)=>{if(!d)return 0;let n=d[e.node_id],i=d[r.node_id];return n&&i?"FORCED_COPY"===n.publishType&&"FORCED_COPY"!==i.publishType?1:"FORCED_COPY"!==n.publishType&&"FORCED_COPY"===i.publishType?-1:0:0},p=[...new Set(Object.values(o).filter(e=>!e.isPublishable).map(e=>e.variableSetId))].map(e=>a[e]).filter(e=>!!e);return{styles:eG(c,Object.values(e),()=>!1,[A.Lk,u]),components:eG(c,Object.values(r),A.zE,[A.gA,u]),stateGroups:eG(c,Object.values(n),A.zE,[A.gA,u]),productComponents:eG(c,Object.values(i),A.zE,[A.gA,u]),variableSets:eG(c,(0,l.k)().ds_variables_extended_sets?Object.values(a):Object.values(a).filter(e=>!(0,O.GI)(e)),A.RQ,[A.MA]),variableSetsWithHiddenVariables:eG(c,p,()=>!1,[A.MA]),variables:eG(c,Object.values(o),()=>!1,[A.MA]),modules:eG(c,(0,L.O)(O.PW.MODULE)?Object.values(s):[],()=>!1,[A.gA])}}let eY=(0,y.P8)([el],e=>Object.fromEntries(Object.entries(e).map(([e,r])=>[e,eG(new Set,r,()=>!1,[A.MA])]))),ej=()=>(0,y.P8)([eY,(e,r)=>r],(e,r)=>{let n=e[r];return n?n.modified.wellFormed:[]}),eq=()=>(0,y.P8)([eY,(e,r)=>r],(e,r)=>{let n=e[r];return n?n.unmodified.unpublished.filter(e=>!e.isPublishable):[]}),eX=(0,E.Mz)([eH],e=>e.styles.modified.wellFormed),eZ=(0,E.Mz)([ee],e=>Object.values(e).filter(e=>eL(e))),eJ=(0,E.Mz)([eH],e=>e.components.modified.wellFormed),eQ=(0,E.Mz)([eH],e=>e.stateGroups.modified.wellFormed),e0=(0,E.Mz)([eH],e=>e.productComponents.modified.wellFormed),e1=(0,E.Mz)([e0],e=>e.filter(e=>(0,A.HF)(e.status))),e2=(0,E.Mz)([eH],e=>e.variableSets.modified.wellFormed),e4=(0,E.Mz)([e2],e=>e.filter(e=>(0,A.HF)(e.status))),e3=(0,E.Mz)([eH],e=>(0,L.O)(O.PW.MODULE)?e.modules.modified.wellFormed:[]),e7=(0,E.Mz)([e3],e=>e.filter(e=>(0,A.HF)(e.status))),e5=(0,E.Mz)([S.tB,M.P],(e,r)=>!!((0,l.k)().cmty_lib_admin_publish&&e?.publishedHubFile)||!(0,T.jd)(e?.project)&&!!(e&&(0,C.w5)(e.teamId?r[e.teamId]:null))),e8=eX,e9=(0,E.Mz)([e8],e=>e.length>0),e6=(0,c.Iz)(e=>(0,w.bt)(r=>e9(r,e))),te=(0,E.Mz)([eZ],e=>e.length>0),tt=(0,w.bt)(te),tr=(0,E.Mz)([eJ,e5],(e,r)=>r?e:[]),tn=(0,E.Mz)([eQ,e5],(e,r)=>r?e:[]),ti=(0,E.Mz)([e0,e5],(e,r)=>r?e:[]),ta=(0,E.Mz)([ti],e=>e.length>0),to=(0,c.Iz)(e=>(0,w.bt)(r=>ta(r,e))),ts=(0,E.Mz)([e1,e5],(e,r)=>r?e:[]),tl=(0,E.Mz)([ts],e=>e.length>0),tc=(0,c.Iz)(e=>(0,w.bt)(r=>tl(r,e))),td=(0,E.Mz)([e2],e=>e),tu=(0,E.Mz)([td],e=>e.length>0),tp=(0,c.Iz)(e=>(0,w.bt)(r=>tu(r,e))),tm=(0,E.Mz)([e4],e=>e),th=(0,E.Mz)([tm],e=>e.length>0),t_=(0,c.Iz)(e=>(0,w.bt)(r=>th(r,e))),tg=(0,E.Mz)([e3,e5],(e,r)=>r?e:[]),tf=(0,E.Mz)([tg],e=>e.length>0),tE=(0,c.Iz)(e=>(0,w.bt)(r=>tf(r,e))),ty=(0,E.Mz)([e7],e=>e.length>0),tb=(0,c.Iz)(e=>(0,w.bt)(r=>ty(r,e))),tv=(0,c.Iz)(e=>(0,c.eU)(r=>{for(let n of Object.values(r(eK(e)).libraryAssets))if(n.modified.wellFormed.length>0&&(0,L.O)(n.modified.wellFormed[0].type))return!0;return!1})),tT=(0,c.Iz)(e=>(0,c.eU)(r=>{for(let n of Object.values(r(eK(e)).libraryAssets))if(n.modified.wellFormed.length>0&&(0,L.O)(n.modified.wellFormed[0].type)&&n.modified.wellFormed.some(e=>(0,A.HF)(e.status)))return!0;return!1})),tI=(0,c.Iz)(e=>{let r=(0,w.bt)(r=>e8(r,e)),n=(0,w.bt)(r=>ti(r,e)),i=(0,w.bt)(r=>td(r,e)),a=(0,w.bt)(r=>tg(r,e));return(0,c.eU)(o=>{let s=o(r),l=o(n),c=o(i),d=o(a),u=o(eK(e)),p=Object.keys(u.libraryAssets).flatMap(e=>(0,L.O)(e)?u.libraryAssets[e].modified.wellFormed:[]);return[...s.map(e=>e.node_id),...l.map(e=>e.node_id),...c.map(e=>e.node_id),...d.map(e=>e.node_id),...p.map(e=>e.node_id)]})}),tS=(0,c.Iz)(e=>(0,c.eU)(r=>r(e6(e))||r(to(e))||r(tp(e))||r(tE(e))||r(tv(e))));(0,c.Iz)(e=>(0,c.eU)(r=>r(tt)||r(tc(e))||r(t_(e))||r(tb(e))||r(tT(e)))),(0,E.Mz)([ev,ti],(e,r)=>r.some(r=>e[r.node_id])),(0,E.Mz)([eT,tg],(e,r)=>r.some(r=>e[r.node_id])),(0,E.Mz)([eE,N.c5],(e,r)=>({...r,...e}));let tw=(0,E.Mz)([tg],e=>e.map(e=>e.node_id));(0,E.Mz)([tn],e=>e.map(e=>e.node_id));let tA=(0,E.Mz)([tr,()=>(0,v.Pc)()],(e,r)=>e.filter(e=>e.deletedFromSceneGraph||r.includes(e.node_id)).map(e=>e.node_id)),tC=(0,E.Mz)([ea,()=>(0,v.Pc)()],(e,r)=>f()(e,e=>r.includes(e.node_id))),tN=(0,c.eU)(e=>Object.values(e(R.t).data??{}).some(e=>(0,A.HF)(e.status))),tL=(0,w.bt)(Z),tO=(0,c.eU)(e=>e(tL)||e(tN));function tR(e,r){return n=>e({...n,library:{...n.library,libraryPublishingMode:r}})}},256054:(e,r,n)=>{n.d(r,{Bw:()=>j,P1:()=>et,S9:()=>ee,WE:()=>el,WJ:()=>ei,Yy:()=>Y,bA:()=>er,cb:()=>eo,ij:()=>B,j_:()=>X,jk:()=>Z,kK:()=>Q,lm:()=>U,mO:()=>q,nm:()=>ec,pk:()=>ea,t_:()=>es,wy:()=>ed});var i=n(308769),a=n(781131),o=n(741419),s=n(39773),l=n(983401),c=n.n(l),d=n(925040),u=n(71313),p=n(896966),m=n(503813),h=n(323075),_=n(486934),g=n(240164),f=n(718451),E=n(119310),y=n(870769),b=n(75452),v=n(931516),T=n(343285),I=n(747314),S=n(153059),w=n(196584),A=n(937254);function C(e,r,n,i,o){let s=Object.create(null);for(let{key:r,version:i}of e)if(r){if(r in n){let e=r;r=n[r],i=o?.[e]===i?i:"FAKE_VERSION_FOR_MOVED_ITEM"}s[r]=s[r]||new Set,s[r].add(i)}for(let e of r)if(e in i){let r=i[e];s[r]=s[r]||new Set,s[r].add((0,a.Xf)("FAKE_VERSION_FOR_MOVED_ITEM"))}return s}let N=(0,d.Mz)([A.PX,e=>e.library.used__LIVEGRAPH.destinationStyleKeyToLegacySourceStyle],(e,r)=>Object.values(e).reduce((e,n)=>{if("loaded"!==n.status||!r[n.data.key])return e;let{key:i,version:a}=r[n.data.key];return e[i]=a,e},Object.create(null))),L=(0,d.Mz)([w._Q,S.O1,T.aR,T.BE,N],C),O=(0,d.Mz)([w.m0,S.T_,T.aR,T.BE],C),R=(0,d.Mz)([w.v3],e=>C(e,[],{},{})),P=(0,d.Mz)([w.Du],e=>Object.values(e).reduce((e,r)=>(e.has(r.key)||e.set(r.key,new Set),r.pageIds.forEach(n=>e.get(r.key)?.add(n)),e),new Map));function D(e,r,n){if(0===e.size)return!1;if(1===e.size){let i=Array.from(e)[0],a=n(r);return a?.toLowerCase()!==i.toLowerCase()}return!0}let M=(0,m.fv)();function k({publishedAssetsByKey:e,usedVersionsByAssetKey:r,editingFile:n,getVersion:i,getUpdateAsset:o}){let s=[];for(let l of Object.keys(r)){let c=e[(0,a.sg)(l)];!(!c||n&&(0,_.dp)(n,M(c)))&&D(r[(0,a.sg)(l)],c,i)&&s.push(o(c))}return s}let F=(0,d.Mz)([A.wi,L,h.d1,T.uB,T.tp,T.J8,w.tY,S.tX],(e,r,n,i,a,o,s,l)=>{let c=!1,d=[],u=!1;return{styleUpdatesForAllPages:k({publishedAssetsByKey:e,usedVersionsByAssetKey:r,editingFile:n,getVersion:e=>e.content_hash,getUpdateAsset:e=>{let r={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]};if(e.key in i&&(r.oldSubscribedKeysToUpdate=Array.from(i[e.key]),!o[e.key]))for(let e of(c=!0,r.oldSubscribedKeysToUpdate))s.has(e)&&(u=!0);if(e.key in a){for(let n of(r.localIdsToUpdate=Array.from(a[e.key]),o[e.key]||(c=!0),r.localIdsToUpdate))if(l.has(n)){u=!0;break}}return(s.has(e.key)||r.oldSubscribedKeysToUpdate.some(e=>s.has(e))||r.localIdsToUpdate.some(e=>l.has(e)))&&d.push(r),r}}),styleUpdatesForCurrentPage:d,includesMoveUpdatesOnAnyPage:c,includesMoveUpdatesOnCurrentPage:u}}),x=(0,u.P8)([I.Ls,O],(e,r)=>{let n=Object.keys(r),i=Object.keys(e);return c()(n,i)}),U=(0,d.Mz)([x,I.m3,w.S_,S.dK],(e,r,n,i)=>{let a=new Map;for(let o of e){let e=n[o];if(!e)continue;let s=i.get(e.nodeId),l=s?.parentNode;if(s&&l&&s.isState&&l?.stateGroupKey){let e=r[l.stateGroupKey];e&&a.set(o,e)}}return a}),B=(0,d.Mz)([I.Ls,I.ZA,O,h.d1,T.uB,T.tp,w.ty,S.BA],(e,r,n,i,a,o,s,l)=>{let c=!1,d=!1,u=k({publishedAssetsByKey:e,usedVersionsByAssetKey:n,editingFile:i,getVersion:e=>e.content_hash,getUpdateAsset:e=>{let r={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]},n=e.component_key;if(n in a)for(let e of(r.oldSubscribedKeysToUpdate=Array.from(a[n]),c=!0,r.oldSubscribedKeysToUpdate))s.has(e)&&(d=!0);if(n in o){for(let e of(r.localIdsToUpdate=Array.from(o[n]),c=!0,r.localIdsToUpdate))if(l.has(e)){d=!0;break}}return r}}),p=[],m=[],h=[],_=[],g=new Set;for(let e of u){let n=e.containing_frame?.containingStateGroup?.nodeId;if(n){let i=r[e.library_key]?.[n];if(i){let r=h.find(e=>e.key===i.key);if(null==r&&(r={...i,newStateKeyToOutdatedItems:{}},h.push(r)),e.component_key){let n=e.component_key;r.newStateKeyToOutdatedItems[n]={oldSubscribedKeysToUpdate:e.oldSubscribedKeysToUpdate,localIdsToUpdate:e.localIdsToUpdate},(s.has(e.component_key)||e.oldSubscribedKeysToUpdate.some(e=>s.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&!g.has(i.key)&&(_.push(r),g.add(i.key))}}}else p.push(e),(e.component_key&&s.has(e.component_key)||e.oldSubscribedKeysToUpdate.some(e=>s.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&m.push(e)}return{componentUpdatesForAllPages:p,stateGroupUpdatesForAllPages:h,includesMoveUpdatesOnAnyPage:c,componentUpdatesForCurrentPage:m,stateGroupUpdatesForCurrentPage:_,includesMoveUpdatesOnCurrentPage:d}}),V=(0,m.fv)(),G=(0,u.P8)([I.a3,I.gJ,R,h.d1,P,e=>e.mirror.appModel.currentPage],(e,r,n,i,s,l)=>{let c={},d=new Set,u=o.glU?.getInternalCanvasNodeId();for(let o of Object.keys(n)){let m=e[(0,a.ey)(o)];if(!m||i&&(0,_.dp)(i,V(m)))continue;let h=r[(0,a.yG)(m.variableCollectionKey)];if(!h)continue;let g=c[(0,a.yG)(m.variableCollectionKey)]||{...h,libraryVariableIdsForUpdate:[]};if((0,v.GI)(g)){(0,p.x1)("variables","Encountered variable bound to variable set extension");continue}let f=n[m.key];if(f&&D(f,m,e=>e.version)&&g.libraryVariableIdsForUpdate.push(m.node_id),g.libraryVariableIdsForUpdate.length>0&&(c[(0,a.yG)(h.key)]=g,s.has(h.key))){let e=s.get(h.key);(e?.has(l)||u&&e?.has(u))&&d.add(h.key)}}let m=Object.values(c),h=m.filter(e=>d.has(e.key));return{variableSetUpdatesForAllPages:m,variableSetUpdatesForCurrentPage:h}}),H=(0,E.bt)(B),K=(0,E.bt)(F),W=(0,E.bt)(G),z=(0,s.eU)(e=>{let r=[],n=new Set;for(let i of Object.values(e(J)))for(let e of i)if(e.type===v.PW.CODE_COMPONENT){if(n.has(e.key))continue;n.add(e.key),r.push(e)}return r}),$=(0,s.eU)(e=>{let r=e(g.z);return e(J)[r]??[]}),Y=(0,s.Iz)(e=>(0,s.eU)(r=>{let{componentUpdatesForAllPages:n,componentUpdatesForCurrentPage:i}=r(H);return e===y.aD.ALL?n:i})),j=(0,s.Iz)(e=>(0,s.eU)(r=>{let{stateGroupUpdatesForAllPages:n,stateGroupUpdatesForCurrentPage:i}=r(H);return e===y.aD.ALL?n:i})),q=(0,s.Iz)(e=>(0,s.eU)(r=>{let{styleUpdatesForAllPages:n,styleUpdatesForCurrentPage:i}=r(K);return e===y.aD.ALL?n:i})),X=(0,s.mg)(K,e=>e.styleUpdatesForAllPages),Z=(0,s.Iz)(e=>(0,s.eU)(r=>{let{variableSetUpdatesForAllPages:n,variableSetUpdatesForCurrentPage:i}=r(W);return e===y.aD.ALL?n:i})),J=(0,s.eU)(e=>{let r={};for(let n of Object.values(b.i))for(let[i,a]of Object.entries(e(n)))r[i]=r[i]||[],r[i].push(...a);return r}),Q=(0,s.Iz)(e=>(0,s.eU)(r=>{switch(e){case y.aD.ALL:return r(z);case y.aD.CURRENT:return r($)}})),ee=(0,s.eU)(e=>{let{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n,includesMoveUpdatesOnAnyPage:i}=e(H),{styleUpdatesForAllPages:a,includesMoveUpdatesOnAnyPage:o}=e(K),{variableSetUpdatesForAllPages:s}=e(W);return{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n,styleUpdatesForAllPages:a,variableSetUpdatesForAllPages:s,libraryAssetUpdatesForAllPages:e(z),includesMoveStyleUpdatesOnAnyPage:o,includesMoveComponentUpdatesOnAnyPage:i}}),et=(0,s.eU)(e=>{let{componentUpdatesForCurrentPage:r,stateGroupUpdatesForCurrentPage:n,includesMoveUpdatesOnCurrentPage:i}=e(H),{styleUpdatesForCurrentPage:a,includesMoveUpdatesOnCurrentPage:o}=e(K),{variableSetUpdatesForCurrentPage:s}=e(W);return{componentUpdatesForCurrentPage:r,stateGroupUpdatesForCurrentPage:n,styleUpdatesForCurrentPage:a,variableSetUpdatesForCurrentPage:s,libraryAssetUpdatesForCurrentPage:e($),includesMoveStyleUpdatesOnCurrentPage:o,includesMoveComponentUpdatesOnCurrentPage:i}}),er=(0,s.Iz)(e=>(0,s.eU)(r=>{let{componentUpdatesForAllPages:n,stateGroupUpdatesForAllPages:i,styleUpdatesForAllPages:a,variableSetUpdatesForAllPages:o,libraryAssetUpdatesForAllPages:s}=r(ee),{componentUpdatesForCurrentPage:l,stateGroupUpdatesForCurrentPage:c,styleUpdatesForCurrentPage:d,variableSetUpdatesForCurrentPage:u,libraryAssetUpdatesForCurrentPage:p}=r(et);return e===y.aD.ALL?{scopedComponentUpdates:n,scopedStateGroupUpdates:i,scopedStyleUpdates:a,scopedVariableSetUpdates:o,scopedLibraryAssetUpdates:s}:{scopedComponentUpdates:l,scopedStateGroupUpdates:c,scopedStyleUpdates:d,scopedVariableSetUpdates:u,scopedLibraryAssetUpdates:p}})),en=(0,s.mg)(ee,({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:r,styleUpdatesForAllPages:n,variableSetUpdatesForAllPages:i,libraryAssetUpdatesForAllPages:a,includesMoveStyleUpdatesOnAnyPage:o,includesMoveComponentUpdatesOnAnyPage:s})=>{let l=e.length+r.length+n.length+i.length+a.length;return{updateCount:l,hasUpdates:l>0,includesMoveStyleUpdatesOnAnyPage:o,includesMoveComponentUpdatesOnAnyPage:s}}),ei=(0,s.mg)(et,({componentUpdatesForCurrentPage:e,stateGroupUpdatesForCurrentPage:r,styleUpdatesForCurrentPage:n,variableSetUpdatesForCurrentPage:i,libraryAssetUpdatesForCurrentPage:a,includesMoveStyleUpdatesOnCurrentPage:o,includesMoveComponentUpdatesOnCurrentPage:s})=>{let l=e.length+r.length+n.length+a.length+i.length;return{updateCount:l,hasUpdates:l>0,includesMoveStyleUpdatesOnCurrentPage:o,includesMoveComponentUpdatesOnCurrentPage:s}});(0,s.mg)(en,({hasUpdates:e})=>e),(0,s.mg)(ei,({hasUpdates:e})=>e);let ea=(0,s.Iz)(e=>(0,s.eU)(r=>r(e===y.aD.ALL?en:ei).hasUpdates)),eo=(0,s.mg)(en,({updateCount:e})=>e);(0,s.mg)(ei,({updateCount:e})=>e);let es=(0,s.p6)([ee],({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:r,styleUpdatesForAllPages:n,variableSetUpdatesForAllPages:i,libraryAssetUpdatesForAllPages:a})=>({componentUpdateKeys:(0,y.X7)(e),stateGroupUpdateKeys:(0,y.X7)(r),styleUpdateKeys:(0,y.X7)(n),variableSetKeys:(0,y.X7)(i),libraryAssetKeys:(0,y.X7)(a)})),el=(0,E.bt)(e=>e.library.libraryUpdatesBannerDismissed);function ec(e,r){let n=(0,S.dK)(e),a=(0,f.E7)(r),o=a?i.PK.fromKiwi(a):null,s=o?n.getStyleNode(o):null;if(!s)return null;let l=s.guid,c=s.styleKeyForPublish,d=s.styleVersionHash;return c&&d?{GUID:l,key:c,version:d,isLocalStyle:s.isLocalStyle}:null}let ed=(0,s.eU)(!1)},153059:(e,r,n)=>{n.d(r,{$4:()=>_,$u:()=>g,AF:()=>p,BA:()=>S,F4:()=>y,O1:()=>b,Sh:()=>c,T_:()=>I,Xt:()=>s,a$:()=>u,dK:()=>l,dT:()=>f,f5:()=>w,rT:()=>E,t:()=>h,tX:()=>v,tn:()=>T,vD:()=>d});var i=n(925040),a=n(71313),o=n(119310);let s=e=>e.mirror.sceneGraphSelection,l=e=>e.mirror.sceneGraph,c=(0,a.Zm)(e=>Object.keys(s(e)));function d(e){let r=c(e),n=r[0];return 1===r.length&&n?n:null}function u(e){let r=c(e);return r.length>1?r:null}let p=(0,i.Mz)([l,d],(e,r)=>r?e.get(r):null),m=()=>(e,r)=>l(e).get(r);function h(){let e=m();return(0,a.Zm)((r,n)=>{let i=e(r,n);return null==i?null:{key:i.styleKeyForPublish,version:i.styleVersionHash}})}function _(){let e=h();return(0,a.Zm)((r,n)=>new Map(n.map(n=>[n,e(r,n)])))}function g(e){return e.mirror.selectionProperties.numSelected||0}let f=(0,a.P8)([c,l],E);function E(e,r){let n=[];return e.forEach(e=>{let i=r.get(e);(i?.type==="INSTANCE"||i?.isInstanceSublayer)&&n.push(e)}),n}let y=(0,i.Mz)([l,c],(e,r)=>{let n=[];return r.forEach(r=>{let i=e.get(r);i&&n.push(i)}),n});(0,a.Zm)(e=>e.library.publishableStyles.map(e=>e.nodeId));let b=(0,a.Zm)(e=>e.library.localStylesThatHaveUsagesOnLoadedPages),v=(0,a.Zm)(e=>new Set(e.library.localStylesThatHaveUsagesOnCurrentPage)),T=(0,o.bt)(b),I=(0,a.Zm)(e=>e.library.localSymbolsThatHaveUsagesOnLoadedPages),S=(0,a.Zm)(e=>new Set(e.library.localSymbolsThatHaveUsagesOnCurrentPage));function w(e,r){let n=l(e);return!n.get(r)?.visible}},298473:(e,r,n)=>{n.d(r,{b:()=>a,e:()=>o});var i=n(897392);function a(e,r,n){if(!r)return null;let a=(()=>{let a;let o=e.library.used__LIVEGRAPH.sourceAssetKeyToDestinationKey[r];if(o)return o;if(!n)return null;if("type"in n){let r=e.library.local.styles[n.node_id];if(r?.key!==n.key)return null;a=r.node_id}else a=(0,i.dI)(n.guid);return a?e.library.used__LIVEGRAPH.localNodeIdToDestinationKey[a]:null})();return e.library.used__LIVEGRAPH.styles[a??r]??null}function o(e,r){let{stylePreviewShown:n}=e;return n.isShown&&!n.isCreating&&n.style===r}},196584:(e,r,n)=>{n.d(r,{C9:()=>A,Co:()=>T,Du:()=>_,EY:()=>L,J5:()=>C,LL:()=>M,MH:()=>R,No:()=>f,OQ:()=>P,S_:()=>g,_Q:()=>y,jf:()=>N,kc:()=>O,m0:()=>p,sm:()=>x,tY:()=>F,ty:()=>D,v3:()=>h});var i=n(239910),a=n.n(i),o=n(626715),s=n.n(o),l=n(925040),c=n(71313),d=n(119310);function u(e){return(0,c.Vh)(e=>e.library,e)}let p=u(e=>e.subscribedSymbolsFromLoadedPages),m=u(e=>e.subscribedSymbolsOnCurrentPage),h=(0,c.P8)([e=>e.library.subscribedVariablesByIdFromLoadedPages],e=>Object.values(e)),_=e=>e.library.subscribedVariableSetsByIdFromLoadedPages,g=(0,l.Mz)([p],e=>a()(e,e=>e.key)),f=u(e=>e.subscribedStateGroupsFromLoadedPages),E=u(e=>e.subscribedStateGroupsOnCurrentPage),y=u(e=>e.directlySubscribedStylesFromLoadedPages),b=u(e=>e.directlySubscribedStylesOnCurrentPage),v=u(e=>e.indirectlySubscribedStylesFromLoadedPages),T=(0,l.Mz)([v],e=>e.length>0),I=(0,l.Mz)([y,v],(e,r)=>[...e,...r]);function S(e){return e.map(e=>e.nodeId)}function w(e){return s()(e.map(e=>e.key))}let A=(0,l.Mz)([p],S),C=(0,l.Mz)([m],S),N=(0,l.Mz)([f],S),L=(0,l.Mz)([E],S),O=(0,l.Mz)([y],S);(0,l.Mz)([b],S);let R=(0,l.Mz)([I],S),P=(0,l.Mz)([p],w),D=(0,l.Mz)([m],e=>new Set(e.map(e=>e.key))),M=(0,l.Mz)([f],w),k=(0,l.Mz)([y],w),F=(0,l.Mz)([b],e=>new Set(e.map(e=>e.key))),x=(0,d.bt)(k);(0,l.Mz)([I],w)},584164:(e,r,n)=>{n.d(r,{Bg:()=>o,Cy:()=>l,Q3:()=>s}),n(442313);var i=n(122367);function a(e){switch(e){case null:case void 0:return i.w_.ALLOWED;default:return e}}function o(e){return a(e?.public_link_controls_setting)===i.w_.BANNED}function s(e){return[i.w_.EXPIRATION_REQUIRED,i.w_.EXP_AND_PWD_REQUIRED].includes(a(e?.public_link_controls_setting))}function l(e){return[i.w_.PASSWORD_REQUIRED,i.w_.EXP_AND_PWD_REQUIRED].includes(a(e?.public_link_controls_setting))}},832367:(e,r,n)=>{n.d(r,{Ey:()=>_,To:()=>g,zY:()=>h}),n(241899);var i=n(579020),a=n(731889),o=n(379338),s=n(856480),l=n(135707),c=n(53818);let d=(0,o.tl)().stripe_api_public;var u=(e=>(e.CARD="card",e.SEPA="sepa_debit",e.IDEAL="ideal",e.SOFORT="sofort",e))(u||{});let p=null;function m(){return new Promise((e,r)=>{p?e(p):d?(0,a.k0)("https://js.stripe.com/v3/",{cors:!1}).then(()=>{e(p=Stripe(d,{locale:(0,s.Gq)().getPrimaryLocale(!1)}))}).catch(r):r("No Stripe api key")})}let h=(0,c.D)(e=>new Promise((r,n)=>{m().then(n=>{r(n.elements().create("card",e))}).catch(n)})),_=(0,c.D)((e,r)=>new Promise((n,i)=>{m().then(a=>{a.createToken(e,r).then(e=>{n(e)}).catch(i)}).catch(i)})),g=(0,c.D)(async(e,r,n)=>{let a=await m(),{data:{meta:{client_secret:o}}}=await l.m.getSetupIntentSecret({subtotal_estimate:r,currency:n}),s=()=>document.querySelectorAll("[name*=privateStripeFrame]").length,c=s(),d=!1,u=setInterval(()=>{c!==s()&&((0,i.sx)("Stripe Authentication Modal"),clearInterval(u),d=!0)},1e3),p=await a.confirmCardSetup(o,{payment_method:{card:{token:e}}});if(clearInterval(u),p.error)throw(0,i.sx)("Payment Confirmation Error",{error_message:p.error.message}),p.error;return(0,i.sx)("Payment Confirmation Success"),p.setupIntent.is3DS=d,p.setupIntent})},264917:(e,r,n)=>{n.d(r,{Qh:()=>_,m1:()=>I,Sp:()=>C,$p:()=>f,gM:()=>T,je:()=>E,Ly:()=>v,He:()=>y,fi:()=>b});var i=n(848318),a=n(425642),o=n(988520),s=n(573446),l=n(39773),c=n(260986),d=n.n(c),u=n(575058);n(493554);var p=n(195507),m=n(808471);n(386117),n(665549);var h=n(486934);n(103446),n(369600),n(635547),n(621212),n(700392),n(304713),n(458151),n(92537),n(572699),n(668249);var _=(e=>(e.COMMUNITY="community",e.ORGANIZATION="organization",e.WORKSPACE="workspace",e.TEAM="team",e.FILE="file",e.USER="user",e))(_||{});let g=i.createContext(null),f=(0,l.eU)(void 0);function E(){let{subscription:e,ensureSubscription:r}=(0,o.sR)(i.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");i.useEffect(()=>{r()},[r]);let n=i.useMemo(()=>(0,p.gB)([]),[]);return(0,m.nl)()?n:e}function y(){let e=E();return(0,u.k9)(()=>{let r=new Set;return e.data?.forEach(e=>r.add(e.libraryKey)),r},[e.data])}function b(){let{untransformedSubscription:e,ensureSubscription:r}=(0,o.sR)(i.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");return i.useEffect(()=>{r()},[r]),e}function v(){let{untransformedSubscription:e}=(0,o.sR)(i.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");if("loaded"!==e.status)return{};let r={},{file:n}=e.data;return n?.libraryOrgSubscriptions.length&&(r.org=n.libraryOrgSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryTeamSubscriptions.length&&(r.team=n.libraryTeamSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryFileSubscriptions.length&&(r.file=n.libraryFileSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryUserSubscriptions.length&&(r.user=n.libraryUserSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),r}function T(e,r,n,i,s,l){if("loading"===e.status||"errors"===e.status||"disabled"===e.status)return e;let c=e.data.file;if(null==c)return(0,p.gB)([]);let u=e.data.libraryPresetSubscriptionsV2,m=c.libraryOrgSubscriptions,_=c.computedWorkspacePublicInfo?.workspace?.librarySubscriptions,g=c.libraryTeamSubscriptions,f=c.libraryUserSubscriptions,E=c.libraryFileSubscriptions,y=[...m.filter(e=>i||!e.communityLibrary).filter(e=>n?null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride):null==(e.libraryFileSubscriptionOverride||e.libraryWorkspaceSubscriptionOverride||e.libraryTeamSubscriptionOverride)).map(e=>I(e,"organization")),...E.filter(e=>i||!e.communityLibrary).map(e=>I(e,"file"))];if(!s&&!l&&i){let e=(u??[]).filter(e=>{let r="loaded"!==e.default_subscribed.status||e.default_subscribed.data;return(n?!(c?.parentOrgId&&null!=e.libraryOrgSubscriptionOverride||c?.teamId&&null!=e.libraryTeamSubscriptionOverride)&&null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride):null==(e.libraryOrgSubscriptionOverride||e.libraryWorkspaceSubscriptionOverride||e.libraryTeamSubscriptionOverride||e.libraryFileSubscriptionOverride))&&r}).map(e=>S(e,"community"));y.push(...e)}if(n){let e=f.filter(e=>i||!e.communityLibrary).filter(e=>e.communityLibrary?null==e.libraryFileSubscriptionOverride:null==e.libraryFileSubscriptionOverride&&e.library?.file?.parentOrgId===s).map(e=>I(e,"user"));y.push(...e)}if(r){let e=g.filter(e=>i||!e.communityLibrary).filter(w).map(e=>I(e,"team")),r=(_||[]).filter(e=>i||!e.communityLibrary).filter(e=>null==(e.libraryFileSubscriptionOverride||e.libraryTeamSubscriptionOverride)).filter(e=>e.isSubscribed).map(e=>I(e,"workspace"));y.push(...e),y.push(...r)}else{let e=(function(e){let r=e?.teamId;return r?e?.currentUser?.orgAwareTeamRoles?.filter(e=>e.team?.id===r).map(e=>e.team?.libraryTeamSubscriptions).filter(o.Vq):e?.currentUser?.orgAwareTeamRoles?.map(e=>e.team?.libraryTeamSubscriptions).filter(o.Vq)})(c)?.map(e=>e.filter(e=>i||!e.communityLibrary).filter(A).map(e=>I(e,"team")))??[];y.push(...(0,a.Bq)(e))}let b=d()(y.filter(o.Vq),e=>e.libraryKey).filter(e=>!(0,h.LP)(c,e.libraryKey));return(0,a.KQ)(b,"name"),(0,p.gB)(b)}function I(e,r){let n=e.communityLibrary;return n?S({communityLibrary:n,id:e.id},r):e.library&&e.library&&e.library.file?{fileKey:e.library.file.key,libraryKey:(0,s.l)(e.library.file.libraryKey),id:e.id,name:e.library.file.name,numComponents:e.library.numComponents??0,numStateGroups:e.library.numStateGroups??0,numStyles:e.library.numStyles??0,numStylesFill:e.library.numStylesFill??0,numStylesText:e.library.numStylesText??0,numStylesEffect:e.library.numStylesEffect??0,numStylesGrid:e.library.numStylesGrid??0,numVariables:e.library.numVariables??0,numVariablesBoolean:e.library.numVariablesBoolean??0,numVariablesFloat:e.library.numVariablesFloat??0,numVariablesColor:e.library.numVariablesColor??0,numVariablesString:e.library.numVariablesString??0,numModuleAssets:e.library.numModuleAssets??0,parentOrgId:e.library.file.parentOrgId,subscriptionType:r,thumbnailUrl:e.library.file.thumbnailUrl,thumbnailUrlOverride:e.library.file.thumbnailUrlOverride,thumbnailGuid:e.library.file.thumbnailGuid,libraryType:"team"}:null}function S(e,r){return e?.communityLibrary?{fileKey:e.communityLibrary.hubFileId,libraryKey:(0,s.l)(e.communityLibrary.hubFile.libraryKey),id:e.id,name:e.communityLibrary.name,numComponents:e.communityLibrary.numComponents??0,numStateGroups:e.communityLibrary.numStateGroups??0,numStyles:e.communityLibrary.numStyles??0,numStylesFill:e.communityLibrary.numStylesFill??0,numStylesText:e.communityLibrary.numStylesText??0,numStylesEffect:e.communityLibrary.numStylesEffect??0,numStylesGrid:e.communityLibrary.numStylesGrid??0,numVariables:e.communityLibrary.numVariables??0,numVariablesBoolean:e.communityLibrary.numVariablesBoolean??0,numVariablesFloat:e.communityLibrary.numVariablesFloat??0,numVariablesColor:e.communityLibrary.numVariablesColor??0,numVariablesString:e.communityLibrary.numVariablesString??0,numModuleAssets:e.communityLibrary.numModuleAssets??0,parentOrgId:null,subscriptionType:r,thumbnailUrl:e.communityLibrary.hubFile.thumbnailUrl,thumbnailUrlOverride:null,thumbnailGuid:null,libraryType:"community"}:null}function w(e){return null==e.libraryFileSubscriptionOverride}function A(e){return null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride)}function C(e,r){switch(r){case"FILL":return e.numStylesFill;case"TEXT":return e.numStylesText;case"EFFECT":return e.numStylesEffect;case"GRID":return e.numStylesGrid;default:return 0}}},134428:(e,r,n)=>{n.d(r,{OL:()=>s,_M:()=>l,jx:()=>o,wZ:()=>a});var i=n(757033);function a(e,r){return i.Ay.put("/api/team_join_link",{team_id:e,level:r}).then(({data:e})=>e.meta).catch(e=>{throw e})}function o(e){return`${window.location.origin}/team_invite/redeem/${e.token}`}n(27964),n(24096);let s=e=>`RETRIEVING_TEAM_JOIN_LINK_${e}`,l=e=>`RESETTING_TEAM_JOIN_LINK_${e}`},922030:(e,r,n)=>{n.d(r,{BU:()=>N,Cl:()=>B,Ct:()=>q,Cz:()=>S,Eq:()=>V,H7:()=>$,HE:()=>U,Me:()=>z,PS:()=>M,R5:()=>I,UQ:()=>k,ZT:()=>H,_L:()=>Y,aW:()=>P,cD:()=>K,jv:()=>X,mx:()=>w,n$:()=>j,ol:()=>W,rR:()=>D,sK:()=>L});var i=n(716544);n(425642);var a=n(445777),o=n(992277),s=n(157907),l=n(508242),c=n(379338),d=n(695635),u=n(502255),p=n(579463);n(442313);var m=n(376780),h=n(635547),_=n(710665);n(694253);var g=n(775452),f=n(430330),E=n(995946);n(756102),n(977508);var y=n(53818);n(871117);var b=n(92537),v=n(119310),T=n(997894);async function I(e){let r=[],n={};return await Promise.all(e.map(async e=>{let i=await T.M4.fetchFile(e);if(!i?.trashed_at||!i?.team_id)return;r.push(i);let a=(await (0,d.Ek)(h.Aqu,{teamId:i.team_id})).team;a?.id&&(n[a.id]=a)})),await C(r,n)}n(24096);let S=Object.freeze({designFileCount:0,whiteboardFileCount:0,slideFileCount:"0"});async function w(e){let r=[],n={};return await Promise.all(e.map(async e=>{let i={...await T.M4.fetchFile(e.key),folder_id:e.folderId};if(i&&r.push(i),!e.folderId)return;let a=await (0,d.Ek)(h.yU5,{projectId:e.folderId}),o=a.project?.team;o?.id&&(n[o.id]=o)})),await C(r,n)}async function A(){return(await (0,p.hW)("slides_starter_team_limits_exp")).get("is_slide_restriction_on",!1)}let C=(0,y.D)(async(e,r)=>{let n={},i={};for(let r of e){let{folder_id:e,team_id:a,editor_type:o}=r;if(!e||!a||!o)continue;let s=i[e]??await T.M4.fetchFolder(e);i[e]=s,n[a]=n[a]??{},n[a][o]=n[a][o]??{draft:0,nonDraft:0},(0,b.ye)(s)?n[a][o].draft+=1:n[a][o].nonDraft+=1}let a=await A(),o=Object.entries(n).find(([e,n])=>{let i=r[e];return!!i&&Object.entries(n).filter(([e])=>(!!a||e!==m._Y.SLIDES)&&e!==m._Y.SITES).some(([e,r])=>!P(i,{type:3,editorType:e,teamFileCounts:i.teamFileCounts||S,nNonDraftFilesToAdd:r.nonDraft}))});return o?.[0]});function N(e){return!!(e.team_role||(e?.edit_roles?.design_files?.length||0)>0||(e?.edit_roles?.whiteboard_files?.length||0)>0||(e?.edit_roles?.folders?.length||0)>0||(e?.view_roles?.file_count||0)>0||(e?.view_roles?.folder_count||0)>0)}var L=(e=>(e[e.ADD_PROJECT=0]="ADD_PROJECT",e[e.ADD_EDITOR=1]="ADD_EDITOR",e[e.ADD_FILE=2]="ADD_FILE",e[e.ADD_N_FILES=3]="ADD_N_FILES",e))(L||{}),O=(e=>(e.NO_RESTRICTIONS="noRestrictions",e.FULLY_RESTRICTED="fullyRestricted",e.FILE_COUNT_LIMIT="fileCountLimit",e))(O||{});function R(e){switch(e){case m._Y.DESIGN:return{starterRestrictionType:"fileCountLimit",teamRestrictions:new Set([m.P4.FILES_LIMITED_LEGACY,m.P4.FILES_LIMITED]),teamFileCountsKey:"designFileCount"};case m._Y.WHITEBOARD:return{starterRestrictionType:"fileCountLimit",teamRestrictions:new Set([m.P4.WHITEBOARD_FILES_LIMITED_BETA,m.P4.WHITEBOARD_FILES_LIMITED]),teamFileCountsKey:"whiteboardFileCount"};case m._Y.SLIDES:return{starterRestrictionType:"fileCountLimit",teamRestrictions:new Set([m.P4.SLIDE_FILES_LIMITED_BETA,m.P4.SLIDE_FILES_LIMITED]),teamFileCountsKey:"slideFileCount"};case m._Y.SITES:return{starterRestrictionType:"fullyRestricted"};case m._Y.COOPER:return(0,s.k)().cooper?{starterRestrictionType:"noRestrictions"}:{starterRestrictionType:"fullyRestricted"};case m._Y.FIGMAKE:return{starterRestrictionType:"noRestrictions"};default:(0,a.xb)(e)}}function P(e,r){if(!e||e.restrictionsList?.includes(m.P4.LOCKED))return!1;if((0,_.XX)(e))return!0;switch(r.type){case 0:return!e.restrictionsList?.includes(m.P4.PROJECTS_LIMITED)&&!e.restrictionsList?.includes(m.P4.PROJECTS_LIMITED_LEGACY);case 1:return!e.restrictionsList?.includes(m.P4.EDITORS_LIMITED);case 2:{let n=R(r.editorType);switch(n.starterRestrictionType){case"fullyRestricted":return!1;case"noRestrictions":return!0;case"fileCountLimit":if(r.isDestinationTeamDrafts)return!0;if(e.restrictionsList?.some(e=>n.teamRestrictions.has(e))||r.teamFileCounts&&Number(r.teamFileCounts[n.teamFileCountsKey])>=_.WW)return!1;return!0;default:(0,a.xb)(n)}}case 3:{let n=R(r.editorType);switch(n.starterRestrictionType){case"fullyRestricted":return!1;case"noRestrictions":return!0;case"fileCountLimit":if(0===r.nNonDraftFilesToAdd)return!0;if(e.restrictionsList?.some(e=>n.teamRestrictions.has(e))||Number(r.teamFileCounts[n.teamFileCountsKey])+r.nNonDraftFilesToAdd>_.WW)return!1;return!0;default:(0,a.xb)(n)}}default:(0,a.xb)(r)}}function D(e,r){return P({subscription:e.subscription,restrictionsList:e.restrictions_list||[],studentTeamAt:e.student_team?new Date:null,gracePeriodEnd:e.grace_period_end?new Date(e.grace_period_end):null},r)}function M(e){return!!e.student_team||!!e&&!!e.subscription&&[m.Qh.OK,m.Qh.GRACE_PERIOD].includes(e.subscription)}function k(e){let r=e.user?.id,n=e.openFile?.key;if(!r||!n)return null;let i=e.fileByKey?.[n]?.team_id;return i?e.teamUserByTeamId?.[i]?.[r]:null}let F=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/([A-z0-9]*)\/team\/(\d+)/),x=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/team\/(\d+)/);function U(e){return F.test(e)}function B(e){return x.test(e)}function V(e){let r=new URL(e).pathname.match("team/([A-z0-9]*)");return r?r[1]:null}let G=["recentsAndSharing","draftsToMove","communityHub","search","user"];function H(e){try{if(e.openFile)return e.openFile.teamId||"";if("teamId"in e.selectedView)return e.selectedView.teamId||"";if("abandonedDraftFiles"===e.selectedView.view&&e.selectedView.adminPlanType===f.O.TEAM||"seatRequests"===e.selectedView.view&&e.selectedView.adminPlanType===f.O.TEAM)return e.selectedView.planId;if("folder"===e.selectedView.view){let r=e.selectedView.folderId;if(!e.folders[r])return(0,c.Ay)().page_load_team_id||"";return e.folders[r]?.team_id||""}if((G.includes(e.selectedView.view)||"deletedFiles"===e.selectedView.view||"limitedTeamSharedProjects"===e.selectedView.view||"trashedFolders"===e.selectedView.view||"desktopNewTab"===e.selectedView.view||"resourceHub"===e.selectedView.view)&&!e.currentUserOrgId)return e.currentTeamId||""}catch(e){(0,u.$D)(o.e.GROWTH_PLATFORM,Error(`Error getting team ID from Redux state: ${e.message}`))}return""}function K(){return(0,i.d4)(e=>H(e))||""}function W(){return(0,i.d4)(e=>""===H(e)||null==e.teams?null:e.teams[H(e)])||null}let z=(0,v.bt)(e=>e.teams[H(e)]||null);function $(e){return e.teams[H(e)]||null}function Y(e,r,n){return e?Object.keys((0,g.t)(r.byTeamId,e.id)).filter(e=>n[e]):[]}function j(e,r){let n=[],i={};for(let r of e)r&&(i[r.id]=r,n.push(r.id));return e.sort((e,n)=>{let i=r.indexOf(e.id),a=r.indexOf(n.id);return -1===i&&-1===a?e.createdAt<n.createdAt?1:-1:i-a}),e.map(e=>e.id)}function q(e,r,n){let i=0,a={};for(let o of(r.forEach(e=>a[e.id]=e),Object.keys(n))){let r=a[o],s=n[o][e];if(r&&s){if(r.pro_team||r.org_access||r.student_team)return!1;s.level===E.e6.OWNER&&i++}}return i>1}function X(e){return!!e&&!!e.match(/^[0-9]+$/)}(0,l.xx)(function(e,r,n){return e?Y(e,r,n).map(e=>n[e]):[]})},696528:(e,r,n)=>{n.d(r,{H1:()=>h,X0:()=>p,XJ:()=>d,z:()=>c});var i=n(741419),a=n(579020),o=n(6819),s=n(481540),l=n(793954);let c={includeMatches:!0,shouldSort:!1,findAllMatches:!1,ignoreLocation:!0};function d(e){return e.replace(/[\u201D\u201C\"\u2019\u2018]/g,"'")}function u(e){return e.textContent&&(e.textContent=d(e.textContent)),e}function p(e,r,n){let a=[];for(let o of e.indices){let s=o[0],l=o[1]+1,c=e.value;n.matchCase&&c.substring(s,l)!==r||n.wholeWords&&(s>0&&m(c[s-1])||l<e.value.length&&m(c[l]))||a.push({start:s,end:l,matchType:i.Ifi.TEXT_MATCH})}return a}function m(e){return/[\p{L}\p{N}\p{Pc}\p{M}]/u.test(e)}let h=new class{constructor(){this.searchLibrary=new l.CN({keys:["textContent","name","type","annotationTextContent"],exactMatch:!0,...c})}initializeIndex(){let e=performance.now(),r=i.YEY.getSearchableNodes(!0).map(u),n=o.D.getState();this.searchLibrary.set(r),(0,s.ds)("canvas_search_index_create",n.openFile?.key,n,{timeElapsedMs:Math.round(performance.now()-e),numberOfNodes:r.length})}destroyIndex(){this.searchLibrary.set([])}addNode(e){this.searchLibrary.add(e)}removeNode(e){this.searchLibrary.remove("guid",e)}async search(e,r={}){let n;this.updateIndex();let a=performance.now(),o=`'"${d(e)}"`,s=[{textContent:o}];if(r.searchLayerNames&&s.push({name:o}),r.searchAnnotationTextContent&&s.push({annotationTextContent:o}),r.layerTypes){let e=[];r.layerTypes.forEach(r=>{e.push({type:r})}),n={$and:[{$or:s},{$or:e}]}}else n={$or:s};let l=await this.searchLibrary.search(n),c={},u=0,m=0;for(let n of l){let a=[];for(let o of n.matches){let s=p(o,e,r);if("textContent"!==o.key&&s.length){let e=s[0];e.matchType=n.item.type===i.Z6A.CANVAS?i.Ifi.PAGE_MATCH:i.Ifi.LAYER_MATCH,a=[e,...a]}else a.push(...s)}if(a.length){u+=a.length,m++;let e=n.item.pageGuid,r={guid:n.item.guid,textMatches:a};c[e]?c[e].push(r):c[e]=[r]}}return{resultsByPage:c,metrics:{queryLength:e.length,numMatchingNodes:m,numMatches:u,queryTimeMs:Math.round(performance.now()-a)}}}logIndex(){this.updateIndex(),this.searchLibrary.logIndex()}updateIndex(){let e=performance.now(),r=i.YEY.getSearchableNodes(!1).map(u);if(r.length>2e3){this.initializeIndex();return}let n=[],o=[];for(let e of r)n.push(e.guid),(e.name||e.textContent)&&o.push(e);r.length&&this.searchLibrary.updateEntries("guid",n,o),r.length>0&&(0,a.sx)("canvas_search_index_update",{timeElapsedMs:Math.round(performance.now()-e),numberOfNodes:r.length})}}},10330:(e,r,n)=>{n.d(r,{$I:()=>c,YA:()=>d});var i=n(848318),a=n(89093),o=n(34646),s=n(442313),l=n(333505);function c(e){return({light:(0,s.t)("fullscreen_actions.theme.light"),dark:(0,s.t)("fullscreen_actions.theme.dark"),system:(0,s.t)("fullscreen_actions.theme.system_theme")})[e]}function d(e){return[{name:"theme-light-mode",checked:"light"===e,displayForQuickCommand:"theme-light-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"light",userInitiated:!0}))},searchSynonyms:["theme","dark mode"],iconType:i.createElement(a.Z),hideForQuickCommand:"light"===e},{name:"theme-dark-mode",checked:"dark"===e,displayForQuickCommand:"theme-dark-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"dark",userInitiated:!0}))},searchSynonyms:["theme","light mode"],iconType:i.createElement(o.a),hideForQuickCommand:"dark"===e},{name:"theme-system",checked:"system"===e,displayForQuickCommand:"theme-system-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"system",userInitiated:!0}))}}]}},7721:(e,r,n)=>{n.d(r,{Cp:()=>v,LU:()=>f,Px:()=>y,jB:()=>I,xd:()=>T,yH:()=>E,zS:()=>b});var i=n(848318),a=n(39773),o=n(493554),s=n(195507),l=n(442313),c=n(61485),d=n(871117),u=n(517989),p=n(376780),m=n(635547),h=n(177570),_=n(422010);let g={[p.G_.DESIGN]:1,[p.G_.SITES]:2,[p.G_.WHITEBOARD]:3,[p.G_.SLIDES]:4,[p.G_.DEV_MODE]:5};var f=(e=>(e.UPGRADE_NOT_NEEDED="UPGRADE_NOT_NEEDED_STATE",e.PROVISIONAL_ACCESS="PROVISIONAL_STATE",e.CAN_AUTO_UPGRADE="CAN_AUTO_UPGRADE_STATE",e.REQUESTED="REQUESTED_STATE",e.REQUEST="REQUEST_STATE",e))(f||{});let E=(0,a.eU)([]);function y(e,r){let{destinationPlan:n,requiresManualUpgrade:i,upgradeRequested:a}=e;return!!(n&&n.type===p.OL.ORG)&&!r&&!!i&&!!a}function b(e,r,n){let{destinationPlan:i,requiresManualUpgrade:a,upgradeRequested:o}=e;if(!n&&void 0!==n&&i&&i.type===p.OL.ORG&&a){if(o)return(0,l.t)("upgrades.request_sent");if(!r)return(0,l.t)("upgrades.request")}}function v(e,r){let n=(0,u.H)({planParentId:e,planType:p.OL.ORG}),i=(0,o.Rs)(m.ly7,{org_id:e,license_type:r},{enabled:!!e&&!!r&&n}),a=(0,s.oA)(s.oA(i.data)?.hasConnectedPlanUserInOrgFolder),l=a&&a[0]?.hasConnectedPlanUserInOrg;return!!n&&(null===l?void 0:l)}function T(e){let{hasProvisionalAccess:r,licenseType:n,destinationPlan:i,upgradeRequested:a,canAutoUpgrade:o,requiresUpgrade:s}=e??{};return r?"PROVISIONAL_STATE":n&&s&&i&&i.key.parentId?o?"CAN_AUTO_UPGRADE_STATE":a?"REQUESTED_STATE":"REQUEST_STATE":"UPGRADE_NOT_NEEDED_STATE"}function I({files:e,repos:r,destinationFolderId:n,isDestinationDrafts:a}){let s=(0,c.RR)(),{hasPendingRequest:l,getUpgradePathway:u,getUpgradeEligibility:f,getPlanAndPlanUser:E,getHasProvisionalAccess:y,getShouldShowCurf:b,getIsUpgradeHandlerLoading:v,getIsEligibleForProvisionalAccess:T}=(0,_.wH)({folderId:n,isDraftsMove:!0}),I=function(e,r){let n=e.filter(e=>null!=e).map(e=>({projectId:e})),a=(0,o.p)(m.NI1,n,{enabled:r});return(0,i.useMemo)(()=>a.reduce((e,r)=>(r.args.projectId&&e.set(r.args.projectId,r?.result?.data?.project?.path??null),e),new Map),[a])}([...new Set([...e,...r].map(e=>e.folder_id).filter(e=>null!==e))],s);return function({files:e,repos:r,isDestinationDrafts:n,isBillingRemodelEnabled:i,originFolderIdToPath:a,hasPendingRequest:o,getUpgradePathway:s,getUpgradeEligibility:l,getPlanAndPlanUser:c,getHasProvisionalAccess:u,getShouldShowCurf:m,loading:_,getIsEligibleForProvisionalAccess:f}){let E=function(e,r,n){let i=e=>""===n.get(String(e.folder_id)),a=e.filter(i).map(e=>(0,d.wR)(e.editor_type));return r.filter(i).length>0&&a.push(p.G_.DESIGN),a.reduce((e,r)=>null===e||g[r]<g[e]?r:e,null)}(e,r,a);if(!i||null===E||n||_)return{requiresUpgrade:!1,canAutoUpgrade:!1,requiresManualUpgrade:!1,upgradeRequested:!1,hasProvisionalAccess:!1,licenseType:null,destinationPlan:null,destinationPlanUser:null,shouldShowCurf:!1,getIsEligibleForProvisionalAccess:null};let y=s(E),{plan:b,planUser:v}=c(E)||{},T=l(E)!==h.q.UPGRADE_NOT_NEEDED;return{requiresUpgrade:T,canAutoUpgrade:T&&y===h.J.AUTO_PATHWAY,requiresManualUpgrade:T&&y!==h.J.AUTO_PATHWAY,upgradeRequested:T&&l(E)===h.q.CANNOT_UPGRADE&&o(E),hasProvisionalAccess:u(E),licenseType:E,destinationPlan:b??null,destinationPlanUser:v??null,shouldShowCurf:m(E),getIsEligibleForProvisionalAccess:f}}({files:e,repos:r,isDestinationDrafts:a,isBillingRemodelEnabled:s,originFolderIdToPath:I,hasPendingRequest:l,getUpgradePathway:u,getUpgradeEligibility:f,getPlanAndPlanUser:E,getHasProvisionalAccess:y,getShouldShowCurf:b,loading:v(),getIsEligibleForProvisionalAccess:T})}},497411:(e,r,n)=>{n.d(r,{me:()=>c});var i=n(39773),a=n(579463),o=n(171063),s=n(997894),l=n(318384);(0,i.eU)(null);let c=s.M4.Query({fetch:async({planType:e,planId:r})=>(await l.R.getProvisionalAccessEligibility(e,r)).data.meta,schema:e=>e.object({[o.ud.COLLABORATOR]:e.boolean(),[o.ud.DEVELOPER]:e.boolean(),[o.ud.EXPERT]:e.boolean()}),refetchIntervalMs:(0,a.gP)("provisional_access_refresh_interval").get("refreshIntervalInMs",36e5)});s.M4.Mutation(async e=>{let{planId:r,planType:n,upgradeReason:i,billableProductKey:a,fileKey:o,folderId:s,licenseType:c}=e;await l.R.upgrade(n,r,i,a,o,s,c)})},128029:(e,r,n)=>{n.d(r,{w:()=>i}),n(431118);function i(){return!!window.INITIAL_OPTIONS?.user_data}},902058:(e,r,n)=>{n.d(r,{td:()=>c,uo:()=>d}),n(171659),n(858423);var i=n(463802),a=n(757033),o=n(442313),s=n(8374),l=n(404615);n(143179);let c="-1",d=2500;(0,s.nF)((e,r)=>{if(!r.userInitiated){e.dispatch(l.Q$(r));return}return(0,i.Q)({requestPromise:a.Ay.put("/api/user_notifications_bell/community/clear"),fallbackError:(0,o.t)("user_notification.an_error_occurred_marking_all_as_read"),store:e,next:e.dispatch,action:l.Q$(r)})})},97859:(e,r,n)=>{n.d(r,{I2:()=>x,Il:()=>U,Ri:()=>v,Um:()=>D,Y9:()=>B,YH:()=>b,_X:()=>L,kb:()=>E,nt:()=>R,pk:()=>P,tb:()=>y,tp:()=>O,yk:()=>V});var i=n(965650),a=n(189363),o=n(415955),s=n.n(o),l=n(128080),c=n.n(l),d=n(423995),u=n(95650),p=n(141039),m=n(379338),h=n(389191),_=n(430330),g=n(708137),f=n(426662);let E=(0,i.v)(),y=(0,i.v)(),b=!window.EARLY_ARGS?.file_minimal_user_state;function v(){b=!0}let T=null,I=null,S={REQUESTED:"web.api_user_state.requested"},w=new class{constructor(){this.batchedCustomEvents=[],this.onVisibilityChange=async()=>{"hidden"===document.visibilityState&&await this.sendBatchedEvents()},this._currentlySendingBatchedEvents=!1,this.sendBatchedEvents=async()=>{if(this._currentlySendingBatchedEvents)return;this._currentlySendingBatchedEvents=!0;let e=this.batchedCustomEvents;this.batchedCustomEvents=[];try{await (0,h.BO)(e)}catch(e){}this._currentlySendingBatchedEvents=!1},document.addEventListener("visibilitychange",this.onVisibilityChange),window.addEventListener("pagehide",this.sendBatchedEvents),this.sendBatchedEventsInterval=setInterval(this.sendBatchedEvents,5e3)}async cleanup(){document.removeEventListener("visibilitychange",this.onVisibilityChange),window.removeEventListener("pagehide",this.sendBatchedEvents),clearInterval(this.sendBatchedEventsInterval),await (0,a.g)()}reportUserStateCall(e){this.batchedCustomEvents.push({metric:S.REQUESTED,tags:{source:e,client_visibility:document.visibilityState}})}},A=null,C=null,N=null;function L(e,r){v();let n=P(),i=D();return A&&n===C&&i===N||(w.reportUserStateCall(e),A=f.k.getState({orgId:n||void 0,teamId:i||void 0},r),C=n,C=i,A.then(()=>{A=null,C=null,N=null}).catch(()=>{A=null,C=null,N=null})),A}function O(e){return g.H.getState(e)}function R(e){e||(e="personal"),T=e}function P(){return T?"personal"===T?null:T:T=(0,m.tl)().org_id||null}function D(){return I||(I=(0,m.tl)().team_id||null),I}let M="recent_user_data",k=e=>btoa(JSON.stringify(e)),F=e=>JSON.parse(atob(e));function x(e){B(e,!0)}function U(e){let r=V(),n=s()(r),i=(0,d.UG)();if(n.communityProfileId=e,!c()(r,n))try{i.set(M,k(n))}catch(e){console.error("Failed to set community profile",e)}}function B(e,r,n,i,a,o){if(p.S8)return;let l=V(),m=s()(l),h=(0,d.UG)();if(r?m.communityUserId=e:m.fileBrowserUserId=e,void 0!==n&&(m.userIdToOrgId||(m.userIdToOrgId={}),m.userIdToOrgId[e]=n),(void 0!==n||void 0!==a)&&(m.userIdToPlan||(m.userIdToPlan={}),n?m.userIdToPlan[e]=[_.O.ORG,n]:a&&(m.userIdToPlan[e]=[_.O.TEAM,a])),i&&(m.communityProfileId=i),o&&(m.seenRecurringBannerIds||(m.seenRecurringBannerIds={}),m.seenRecurringBannerIds[o]=u.A.utc().toISOString()),!c()(l,m))try{h.set(M,k(m))}catch(e){console.error("Failed to set recent workspace",e)}}function V(){let e={communityUserId:null,communityProfileId:null,fileBrowserUserId:null,userIdToOrgId:{},seenRecurringBannerIds:{}},r=(0,d.UG)();try{let n=r.get(M);n&&(e=F(n))}catch(e){console.error("Failed to get recent workspace",e)}return e}},162371:(e,r,n)=>{n.d(r,{Eg:()=>ed,HF:()=>Q,Ht:()=>H,Nb:()=>ep,Ul:()=>er,V_:()=>G,_b:()=>ec,_h:()=>es,_t:()=>Y,cn:()=>$,hZ:()=>et,kT:()=>z,tP:()=>K,un:()=>en,vF:()=>eh,vw:()=>Z,w_:()=>j,yH:()=>em});var i=n(992277),a=n(741419),o=n(897392),s=n(157907),l=n(39773),c=n(611506),d=n(579020),u=n(95650),p=n(6819),m=n(628055),h=n(502255),_=n(896966),g=n(507152),f=n(757033),E=n(280198),y=n(833480),b=n(959334),v=n(697714),T=n(8374),I=n(790355),S=n(667323),w=n(874391),A=n(486934),C=n(449977),N=n(241917),L=n(937237),O=n(64708),R=n(50258),P=n(69584),D=n(219205),M=n(988707),k=n(985951),F=n(992444),x=n(912712),U=n(708098),B=n(997894),V=n(834111);let G="current_version",H=new c.q(40),K=(0,l.eU)("");var W=(e=>(e[e.Default=0]="Default",e[e.Recording=1]="Recording",e))(W||{});let z=B.M4.Query({fetch:async e=>{let r=e.fileKey;if(!r)return null;let n=performance.now(),i=await P.W.getPaginatedVersions({...e,fileKey:r,versionIds:e.versionIds?.join(",")}),a=performance.now()-n;return(0,d.sx)("version_diffing_performance_metrics",{name:"Lego versions fetched",durationMs:a}),i.data.meta?.versions||[]},key:"fileVersionsPaginated"});function $(e,r,n,i){return`${e}-${r}-${n.id}-${i}`}function Y(e,r){let n=p.D.getState(),i=n.openFile?.key,a=[r,n.mirror.sceneGraph.getInternalCanvas()?.guid].filter(e=>!!e);if(!i||!r)return null;let o=$(i,r,e,(0,L.N)(n.fileVersion));if(H.has(o))return H.get(o);let s=new Promise((n,s)=>(0,k.n)(`${e.canvas_url}&nodes_to_extract=${a.join(",")}`).then(([a,s,l])=>{let c=$(i,r,e,l),d=Promise.resolve({canvas:a,key:c});H.delete(o),H.set(c,d),n(d)}).catch(s));return H.set(o,s),s}function j(e){let r=p.D.getState(),n=r.openFile?.key,i=r.mirror.appModel.currentPage;if(!n||!i)return null;let a=$(n,i,e,(0,L.N)(r.fileVersion));H.delete(a)}let q=async(e,r,n,i)=>{let a=new URLSearchParams;a.set("diff_version",(0,A.C2)().toString()),a.set("from_file_version_id",r),a.set("migration_version",`${n}`),i&&i.length>0&&a.set("nodes_to_diff",i.join(","));let{data:{meta:{checkpoint_diff:o}}}=await f.Ay.post(`/api/file_diff/v2/checkpoint_diff/${e}?${a.toString()}`);return o},X=async e=>{let r=new Date().getTime(),{data:n}=await f.Ay.crossOriginGetAny(e,null,{responseType:"arraybuffer"}),i=new Date().getTime();return(0,d.sx)("versioning_performance_metrics",{name:"download_diff",durationMs:i-r},{forwardToDatadog:!0}),n};function Z(e){for(let r of e.versions)if(r.id===e.activeId)return r;if(e.linkedVersion&&e.activeId===e.linkedVersion.id)return e.linkedVersion}async function J(e,r,n){let i=await q(r.getState().openFile.key,e,r.getState().fileVersion,n);if(!i.signed_url)return"Error viewing what's changed between file versions.";let o=!!r.getState().openFile?.canEdit,s=new Date().getTime(),[l]=await Promise.all([X(i.signed_url),(0,x.W5)(a._em.DEBUG_TOOL)]),c=new Date().getTime();return((0,d.sx)("versioning_performance_metrics",{name:"download_diff_and_load_pages",durationMs:c-s,isEditor:o},{forwardToDatadog:!0}),a.glU.loadHistoryChangesState(l))?"":"Error loading HistoryChangesState into memory."}function Q(e,r){if(e)return r.versions.find(r=>r.id===e)}async function ee(e,r){let n=Date.now(),i=Q(e,r.getState().versionHistory);if(!i)return{elapsedTime:Date.now()-n,numPagesWithChanges:0};let o=await J(i.id,r),s=Date.now()-n;if(o)throw(0,_.x1)("version diffing","error checking for visible changes",{error:o}),Error("Error checking for visible changes");return{elapsedTime:s,numPagesWithChanges:a.glU.getPagesWithChanges().length}}let et=(0,T.nF)(async(e,r)=>{let n,i;let o=e.getState(),l=()=>{e.dispatch(I.$T({...o.selectedView,compareLatest:void 0}))},c=()=>{e.dispatch(S.Y6({mode:a.Oin.OFF})),l()},d=o.user;if(!(0,s.k)().version_diffing||!(0,s.k)().xr_debounce_threshold||!d||"fullscreen"!==o.selectedView.view||o.selectedView.editorType===N.nT.Whiteboard||o.mirror.appModel.topLevelMode===a.lyf.HISTORY||o.mirror.appModel.activeCanvasEditModeType===a.m1T.COMPARE_CHANGES)return c();let{openFileKey:p}=r;try{let e=await R.S.getLastInteraction({openFileKey:p});n=e.data.meta.last_view_at,i=e.data.meta.last_edit_at}catch{c()}let m=(0,u.A)(n),h=(0,u.A)(i),_=m>h?m:h;if(!_.isValid()||_<(0,u.A)().subtract(7,"days"))return c();let g=P.W.getPaginatedVersions({fileKey:p,createdAtOrBefore:_.toISOString()}),f=P.W.getPaginatedVersions({fileKey:p}),[E,y]=await Promise.all([g,f]),b=E.data.meta.versions,v=y.data.meta.versions;if(!(b.length>0&&v.length>0))return c();let T=b[0],w=v[0];if(!((0,u.A)(w.created_at)>(0,u.A)(T.created_at))||w.user_id===d.id||w.participating_users_array?.includes(d.handle))return c();e.dispatch(ec()),e.dispatch(eh({fromVersionId:T.id}))}),er=(0,T.nF)(async(e,r)=>{let n=e.getState(),i=n.user;if(!(0,s.k)().version_diffing||!i||"fullscreen"!==n.selectedView.view||n.selectedView.editorType===N.nT.Whiteboard||n.mirror.appModel.topLevelMode===a.lyf.HISTORY||n.mirror.appModel.activeCanvasEditModeType===a.m1T.COMPARE_CHANGES)return;let{openFileKey:o}=r,l=(0,u.A)(r.versionHistory.lastEdited),c=(0,u.A)(r.versionHistory.lastViewed),p=c>l?c:l;if(!p.isValid()||p<(0,u.A)().subtract(7,"days"))return;let m=Date.now(),h=P.W.getPaginatedVersions({fileKey:o,pageSize:1,createdAtOrBefore:p.toISOString()}),_=P.W.getPaginatedVersions({fileKey:o,pageSize:1}),[f,E]=await Promise.all([h,_]),y=f.data.meta.versions,b=E.data.meta.versions;if(y.length>0&&b.length>0){let r=y[0],n=b[0];if((0,u.A)(n.created_at)>(0,u.A)(r.created_at)&&n.user_id!==i.id&&!n.participating_users_array?.includes(i.handle)){let i={fileKey:o,eventId:(0,g.g)(),lastEdited:l.toISOString(),lastViewed:c.toISOString(),lastSeenVersion:r.id,lastSeenCreatedAt:r.created_at,latestVersion:n.id,latestCreatedAt:n.created_at};(0,d.sx)("Version Diffing Changed Since Last View",{...i,durationMs:Date.now()-m},{forwardToDatadog:!0}),e.dispatch(eo({lastSeenVersionId:r.id,trackingProps:i}))}}});function en(){let e=p.D,r=e.getState().versionHistory,n=Z(r),i=r.fetchedPageIds||new Set,a=e.getState().mirror.appModel.currentPage;return n&&n.id!==G?ea(n,e,i,a,o.Xy):Promise.reject("Version history inactive")}let ei=null;function ea(e,r,n,i,s,c){return new Promise((d,u)=>{let p=e.canvas_url;p||u("Couldn't get canvas URL for version.");let m=s===o.Xy,h=!m&&n.size>0,_=s??i,g=r.getState().mirror.appModel.currentPage;"LOAD_NEW_VERSION"===c&&g&&!s&&(_=g);let f=!r.getState().mirror.appModel.pagesList.every(e=>n.has(e.nodeId))&&!n.has(_);if(!f)return r.dispatch(w.SR({isLoadingPage:!1})),d();p+=`&nodes_to_extract=${_}`;let E=r.getState().selectedView;U.C.markVersionHistoryLoadStart(E.fileKey,E.nodeId,c);let y=(0,k.n)(p).then(([e])=>{if(y===ei){var o;ei=null;let s=r.getState().selectedView.editorType;if((o=r.getState().mirror.appModel.topLevelMode)===a.lyf.HISTORY||o===a.lyf.DEV_HANDOFF){let o;if(h)a.glU.applyFileToCurrentScene(e);else if(l.zl.set(K,""),!a.glU.loadFigFileForPreview(e))return u("Error loading this version into memory.");U.C.markVersionHistoryLoadEnd();let c=r.getState().selectedView.fileKey;o=s===N.nT.Whiteboard?"figjam":s===N.nT.Design||s===N.nT.Slides?(0,N.CO)(s):"unknown";let p=r.getState().selectedView.devModeFocusId?"focus_view":"version_history";U.C.report(c,o,p),f&&(m?r.getState().mirror.appModel.pagesList.forEach(e=>n.add(e.nodeId)):n.add(_),r.dispatch(w.EB({fetchedPageIds:n})),r.dispatch(w.SR({isLoadingPage:!1})),d()),E.nodeId&&E.nodeId!==i&&C.tJ([E.nodeId]),E.devModeFocusId&&a.w3z.focusOnNode(E.devModeFocusId,!1),r.dispatch(S.Y6({mode:a.Oin.OFF}))}}});ei=y})}let eo=(0,T.nF)(async(e,r)=>{let n,i;let{lastSeenVersionId:a,trackingProps:o}=r;try{let r=await ee(a,e);n=r.elapsedTime,i=r.numPagesWithChanges}catch(e){return}if(0===i){(0,d.sx)("Version Diffing Notification Skipped",{...r.trackingProps,pagesWithChanges:0,durationMs:n},{forwardToDatadog:!0});return}(0,d.sx)("Version Diffing Notification Shown",{...r.trackingProps,pagesWithChanges:i,durationMs:n},{forwardToDatadog:!0}),e.dispatch(b.Q.enqueueFront({notification:{type:y._.SEE_WHATS_CHANGED,message:"See what's changed since the last time you viewed this file",acceptCallback:()=>{(0,d.sx)("Version Diffing Notification Opened",o),e.dispatch(ec()),e.dispatch(eh({fromVersionId:a}))},dismissCallback:()=>{(0,d.sx)("Version Diffing Notification Dismissed",o)}}}))}),es=(0,T.nF)((e,{direction:r})=>{let n=e.getState(),i=(0,V.U2)(n.selectedView);i&&!n.versionHistory.loading&&(e.dispatch(w.ne({loading:!0})),(0,m.En)(`/api/versions/${i}`,30,n.versionHistory,r).then(n=>{i===(0,V.U2)(e.getState().selectedView)&&e.dispatch(w.BC({history:n,direction:r}))}))}),el=(0,T.nF)(e=>{e.dispatch(w.p0()),e.dispatch(es({direction:m.mL}))}),ec=(0,T.nF)((e,r)=>{r?.type===1?F.Y5.triggerAction("enter-history-mode-for-recording"):F.Y5.triggerAction("enter-history-mode"),F.Y5.triggerAction("deselect-all"),e.dispatch(el()),(0,D.Vj)(e.getState().selectedView)&&l.zl.set(M.s0,a.Nfd.FILE),a.Ez5?.uiState().showPropertiesPanel.set(!0),(0,d.sx)("Toggle Version History",{source:r?.source||null})}),ed=(0,T.nF)(e=>{e.dispatch(eu()),e.dispatch(v.F.dequeue({matchType:"versions"})),a.glU.exitVersionHistoryMode(e.getState().openFile?.canEdit??!1)}),eu=(0,T.nF)(e=>{e.dispatch(ep({id:G})),e.dispatch(eh({fromVersionId:void 0})),a.Egt.clearSelection(),e.dispatch(v.F.dequeue({matchType:"comparing"})),e.dispatch(v.F.dequeue({matchType:"view_changes"})),e.dispatch(S.Y6({mode:a.Oin.OFF}))}),ep=(0,T.nF)(async(e,r)=>{if(r.id===G){l.zl.set(K,""),a.glU.loadFigFileForPreview(new Uint8Array);let n=e.getState();e.dispatch(I.$T({...n.selectedView,versionId:void 0,compareVersionId:void 0})),e.dispatch(w.Fm({id:r.id}));return}e.dispatch(w.Fm({id:r.id}));let n=e.getState(),o=r.versions?r.versions.find(e=>e.id===r.id):Z(n.versionHistory);if(!o)return;e.dispatch(I.$T({...n.selectedView,compareVersionId:void 0}));let s=e.getState().mirror.appModel.currentPage,c=r.eventType,d=!!e.getState().selectedView.devModeFocusId;await ea(o,e,new Set,s,r.nodeId,c).catch(r=>{if(d){let e=`[${c}] Failed load version for preview in focus view: ${r}`;(0,h.$D)(i.e.DEVELOPER_TOOLS,Error(`[LOAD_VERSION_FOR_PREVIEW] ${e}`))}e.dispatch(E.s.error(r))})}),em=(0,T.nF)((e,r)=>{let n=r.version,a=r.currentPageNodeId,o=r.fetchedPageIds,s=r.eventType;ea(n,e,o,a,void 0,s).then(()=>e.dispatch(w.ke({version:r.version}))).catch(r=>{let n=`[${s}] Failed load fig file for preview: ${r}`;(0,h.$D)(i.e.SCENEGRAPH_AND_SYNC,Error(`[VERSION_HISTORY_INCREMENTAL_LOAD] ${n}`)),e.dispatch(E.s.error(r))})}),eh=(0,T.nF)(async(e,r)=>{if(!(0,s.k)().version_diffing){e.dispatch(w.TO(r));return}let n=r.fromVersionId;if(!n)return;let i=Q(n,e.getState().versionHistory);if(!i)return;let o=new Date().getTime(),l=await J(i.id,e);if(l){e.dispatch(E.s.error(l));return}let c=new Date().getTime(),u=e.getState().selectedView.editorType,p=O.lE[O.lE.COMPARE_CHANGES];if((0,d.sx)("versioning_performance_metrics",{name:"load_diff",durationMs:c-o,fromCheckpointKey:i.checkpoint_key,nodesToDiff:"all",editorType:u,source:p},{forwardToDatadog:!0}),i.canvas_url){let e=a.glU.getChangesToCompareFromHistoryChangesState();if(e.size>0){let r=Array.from(e).join(","),n=`${i.canvas_url}&nodes_to_extract=${r}`;(0,k.n)(n).then(([e])=>{a.glU.loadPartialHistoryScene(e)})}}let m=a.glU.startComparingChanges()?"":"Error starting history compare";if(m){e.dispatch(E.s.error(m));return}let h=e.getState();e.dispatch(I.$T({...h.selectedView,compareVersionId:n,compareLatest:void 0})),(0,d.sx)("Version History Compare Start",{fromVersionId:n}),e.dispatch(w.TO(r))})},276731:(e,r,n)=>{n.d(r,{Bj:()=>R,HA:()=>N,Os:()=>y,Pe:()=>p,QZ:()=>L,Vl:()=>C,aF:()=>O,b8:()=>w,cY:()=>A,f5:()=>h,j0:()=>v,k9:()=>f,kw:()=>g,l9:()=>S,lG:()=>E,t4:()=>_,u7:()=>T,zE:()=>b,zx:()=>I});var i=n(848318),a=n(719670),o=n(965650),s=n(303035),l=n(808471),c=n(701780),d=n(66347);let u=window.matchMedia("(prefers-reduced-motion: reduce)"),p={navigationDurationMs:200,animationTimingFunction:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,isGetViewportAtomic:!1},m=class e{constructor(e,r={}){this.getCommentDestinationForCanvasPosition=(e,r,n)=>this.viewport.getCommentDestinationForCanvasPosition(e,r,n),this.setCanvasSpaceCenter=(e,r,n)=>{this.viewport.setCanvasSpaceCenter(e,r,n)},this.setCurrentPageIdAsync=async e=>{await this.viewport.setCurrentPageIdAsync(e)},this.pageIdForNodeId=e=>this.viewport.pageIdForNodeId(e),this.getValidCommentsRect=()=>this.viewport.getValidCommentsRect(),this.viewport=e,this.config={...p,...r}}navigateTo(r,n,i={}){clearTimeout(this.delayTimeout),this.delayTimeout=void 0;let a=this.getViewportInfo();if(n||(n=a.zoomScale),u.matches||(0,l.nl)()||0===i.duration)return this.updateViewport(a,r,n),u.matches&&i.metricsCallback?.({prefersReducedMotion:!0}),Promise.resolve({cancelled:!1});let d=performance.now(),p=null,m=[],h=i.duration??this.config.navigationDurationMs;if(i.ignoreVisibleTargets){let n=c.Mi.subtract(r,{x:a.offsetX,y:a.offsetY});n=c.Mi.scale(1/a.zoomScale,n),n=c.Mi.abs(n);let o=Math.max(a.height,a.width)/2,s=e.DEFAULT_NAVIGATE_BUFFER*(1/a.zoomScale);if(c.Mi.max(n)<o-s)return i.metricsCallback?.({prefersReducedMotion:!1}),Promise.resolve({cancelled:!1})}let _=(0,o.v)(),g=!1,f=function(e){let r=document.getElementById("fullscreen-root");if(!r)return s.lQ;let n=()=>{r.addEventListener("mouseup",e),e()};return r.addEventListener("mousedown",n),()=>{r.removeEventListener("mousedown",n),r.removeEventListener("mouseup",e)}}(()=>{g=!0}),E=e=>{if(i.metricsCallback){let r=0,n=0;m.length&&(n=Math.round(m.reduce((e,n,i)=>((0===i&&e>17||n>17)&&r++,e+n))/m.length)),i.metricsCallback({numberOfSlowFrames:r,avgFrameDuration:n,animationCancelled:e,totalFrames:m.length,prefersReducedMotion:!1})}f(),_.resolve({cancelled:e})},y=n-a.zoomScale,b=c.Mi.scale(a.zoomScale,{x:a.offsetX,y:a.offsetY}),v=c.Mi.scale(n,r),T=c.Mi.subtract(v,b),I=this.getViewportInfo(),S=()=>{var e;let o=this.getViewportInfo();if(this.config.isGetViewportAtomic&&((e=I).offsetX!==o.offsetX||e.offsetY!==o.offsetY||e.zoomScale!==o.zoomScale)||g||i.signal?.aborted){E(!0);return}let s=performance.now(),l=s-d;null!=p&&m.push(Math.round(s-p)),p=s;let u=Math.min(l/h,1),_=this.config.animationTimingFunction(u);if(_>=1){E(!1),this.updateViewport(o,r,n);return}let f=a.zoomScale+y*_,v=c.Mi.add(b,c.Mi.scale(_,T)),w=c.Mi.scale(1/f,v);this.updateViewport(o,w,f),requestAnimationFrame(S),I=this.getViewportInfo()};return i.delay?this.delayTimeout=setTimeout(()=>{d=performance.now(),S()},i.delay):S(),_.promise}getViewportInfo(){return this.viewport.getViewportInfo()}getRawViewportInfo(){return this.viewport.getRawViewportInfo()}getCommentsWrapperOffset(e){return this.viewport.getCommentsWrapperOffset(e)}setZoomScale(e,r){this.viewport.setZoomScale(e,r)}setHovering(e){this.viewport.setHovering(e)}updateViewport(e,r,n){this.setZoomScale(e.zoomScale,n),this.setCanvasSpaceCenter(r,e,n)}};m.DEFAULT_NAVIGATE_BUFFER=60;let h=m,_={x:0,y:0,width:1,height:1,offsetX:0,offsetY:0,zoomScale:1,isPanning:!1,isZooming:!1},g=i.createContext(new h({getViewportInfo:()=>_,getRawViewportInfo:()=>_,getCommentsWrapperOffset:e=>({x:0,y:0}),setCanvasSpaceCenter:e=>{},setZoomScale:(e,r)=>{},setHovering:e=>{},setCurrentPageIdAsync:e=>Promise.resolve(),pageIdForNodeId:e=>"1:0",getCommentDestinationForCanvasPosition:(e,r,n)=>null,getValidCommentsRect:()=>null})),f=i.createContext(_.x),E=i.createContext(_.y),y=i.createContext(_.width),b=i.createContext(_.height),v=i.createContext(_.offsetX),T=i.createContext(_.offsetY),I=i.createContext(_.zoomScale),S=i.createContext(_.isPanning),w=i.createContext(_.isZooming),A=i.createContext(0),C=i.createContext(!1),N=i.createContext({current:_}),L=i.createContext({current:_});function O({latestViewport:e,children:r}){let n=i.useRef(e),a=i.useRef(e);return a.current=n.current,n.current=e,i.createElement(L.Provider,{value:a},i.createElement(N.Provider,{value:n},i.createElement(f.Provider,{value:e.x},i.createElement(E.Provider,{value:e.y},i.createElement(y.Provider,{value:e.width},i.createElement(b.Provider,{value:e.height},i.createElement(v.Provider,{value:e.offsetX},i.createElement(T.Provider,{value:e.offsetY},i.createElement(I.Provider,{value:e.zoomScale},i.createElement(S.Provider,{value:e.isPanning},i.createElement(w.Provider,{value:e.isZooming},r)))))))))))}function R(e){let{getViewport:r}=e,[n,o]=i.useState(r()||_),s=i.useCallback(()=>{o(e=>{let n=r()||_;return(0,a.c2)(e,n)?e:n})},[r,o]);return(0,d.N)(s),i.createElement(O,{latestViewport:n},e.children)}},182212:(e,r,n)=>{n.d(r,{AM:()=>s,qr:()=>l});var i=n(848318),a=n(716544);n(741419),n(405866);var o=n(689575);let s={MAIN_GUIDE:"https://help.figma.com/hc/articles/1500004414622",TROUBLESHOOT:"https://help.figma.com/hc/articles/4402390108951",ACCESSIBILITY:"https://help.figma.com/hc/articles/4402390110743",FEEDBACK_FORM:"https://form.asana.com?k=FPQgFCXUINQN6CmMtWiabQ&d=10497086658021"};function l(){let[e,r]=i.useState(null),n=(0,a.d4)(e=>e.voice.showWidget);return i.useEffect(()=>{n&&!e&&r(o.h.getInstance())},[n,e]),e}},910934:(e,r,n)=>{n.d(r,{_2:()=>a,w$:()=>o}),n(848318);var i=n(579020);n(361515),n(442313),n(369600),n(401194);let a="audio-paywall-key",o=(()=>{let e=!0,r=!1;return n=>{r||setTimeout(()=>{n>0&&e?(e=!1,(0,i.sx)("Context Viewed",{name:"join-call-with-others"})):e||0!==n||(r=!0,(0,i.sx)("Context Viewed",{name:"should-close-open-audio-nux"}))},200)}})()},689575:(e,r,n)=>{n.d(r,{h:()=>S,q:()=>b});var i=n(992277),a=n(157907),o=n(579020),s=n(141039),l=n(379338),c=n(831932),d=n(518259),u=n(502255),p=n(481540),m=n(480236),h=n(407177),_=n(722141),g=n(935421),f=n(527342),E=n(832693);let y=e=>e>.1,b=.05,v=`Something there is that doesn't love a wall,
That sends the frozen-ground-swell under it,
And spills the upper boulders in the sun;
And makes gaps even two can pass abreast.
The work of hunters is another thing:
I have come after them and made repair
Where they have left not one stone on a stone,
But they would have the rabbit out of hiding,
To please the yelping dogs. The gaps I mean,
No one has seen them made or heard them made,
But at spring mending-time we find them there.
I let my neighbor know beyond the hill;
And on a day we meet to walk the line
And set the wall between us once again.
We keep the wall between us as we go.
To each the boulders that have fallen to each.
And some are loaves and some so nearly balls
We have to use a spell to make them balance:
\u2018Stay where you are until our backs are turned!\u2019
We wear our fingers rough with handling them.
Oh, just another kind of out-door game,
One on a side. It comes to little more:
There where it is we do not need the wall:
He is all pine and I am apple orchard.
My apple trees will never get across
And eat the cones under his pines, I tell him.
He only says, \u2018Good fences make good neighbors.\u2019
Spring is the mischief in me, and I wonder
If I could put a notion in his head:
\u2018Why do they make good neighbors? Isn't it
Where there are cows? But here there are no cows.
Before I built a wall I'd ask to know
What I was walling in or walling out,
And to whom I was like to give offense.
Something there is that doesn't love a wall,
That wants it down.\u2019 I could say \u2018Elves\u2019 to him,
But it's not elves exactly, and I'd rather
He said it for himself. I see him there
Bringing a stone grasped firmly by the top
In each hand, like an old-stone savage armed.
He moves in darkness as it seems to me,
Not of woods only and the shade of trees.
He will not go behind his father's saying,
And he likes having thought of it so well
He says again, \u2018Good fences make good neighbors.\u2019`.split(/\n/g).map(e=>e.trim()),T=0,I=class e{constructor(e){this.isMuted=!1,this.handlingTokenExpiration=!1,this.decryptedUserMap={},this.averageRecentVoiceLevel={},this.volumeDataInterval=null,this.micStateInterval=null,this.streamingAudioForCaptions=!1,this._microphonePermissionDenied=!0,this.captionsToggleEnabled=!1,this.volumeLevelsStore=(0,g._)({}),this.activeSpeakerIdStore=(0,g._)(null),this.recentlySpokeIdStore=(0,g._)(null),this.setMicrophone=async e=>{try{this.unpublishedLocalAudioTrack?.setDevice(e.deviceId),await this.localAudioTrack?.setDevice(e.deviceId),this.microphone=e}catch(e){throw e}},this.setPlaybackDevice=async e=>{try{this.client?.remoteUsers.forEach(r=>r.audioTrack?.setPlaybackDevice(e.deviceId)),this.playbackDevice=e}catch(e){throw e}},this.getMicrophones=e=>this.AgoraRTC.getMicrophones(e),this.getPlaybackDevices=e=>this.AgoraRTC?.getPlaybackDevices(e),this.currentMicrophone=async()=>this.microphone||(await this.getMicrophones())?.[0],this.currentPlaybackDevice=async()=>this.playbackDevice||(await this.getPlaybackDevices())?.[0],this.getParticipantIds=async()=>{if(!this.client||!this.userId)throw Error("Client not yet instantiated");let e=[];for(let r of this.client.remoteUsers){let n=await this.getDecryptedUserId(r.uid);n&&e.push(n)}return e.push(this.userId),e},this.startPollingMicState=()=>{s.eD&&(this.microphonePermissionDenied&&s.eD.setUsingMicrophone(!1),this.micStateInterval=setInterval(()=>{this.client&&(s.eD?.setIsInVoiceCall("DISCONNECTED"!==this.client.connectionState),s.eD?.setUsingMicrophone(!!this.isPublishingLocalTrack()))},5e3))},this.stopPollingMicState=()=>{this.micStateInterval&&(clearInterval(this.micStateInterval),this.micStateInterval=null)},this.isPublishingLocalTrack=()=>this.client?.localTracks.some(e=>e.getTrackId()===this.localAudioTrack?.getTrackId()),this.startPollingVolumeData=()=>{this.volumeDataInterval||(this.volumeDataInterval=setInterval(async()=>{if(!this.client||!this.userId)return;let e={};for(let e in this.averageRecentVoiceLevel)this.averageRecentVoiceLevel[e]*=.8;for(let r of this.client.remoteUsers){let n=await this.getDecryptedUserId(r.uid);if(!n)continue;let i=r.audioTrack?.getVolumeLevel()||0,a=this.averageRecentVoiceLevel[n];this.averageRecentVoiceLevel[n]=(a||0)+i,e[n]={isMuted:!r.audioTrack,volumeLevel:i}}let r=this.localAudioTrack?.getVolumeLevel()||0;this.averageRecentVoiceLevel[this.userId]=this.isMuted?0:(this.averageRecentVoiceLevel[this.userId]||0)+r,e[this.userId]={isMuted:this.isMuted,volumeLevel:r},this.checkLocalVolumeLevels(),this.volumeLevelsStore.set(e),this.updateActiveSpeakers(),this.updateRecentlySpoke()},200))},this.stopPollingVolumeData=()=>{this.volumeDataInterval&&(clearInterval(this.volumeDataInterval),this.volumeDataInterval=null)},this.checkLocalVolumeLevels=()=>{this.isMuted&&this.unpublishedLocalAudioTrack&&this.unpublishedLocalAudioTrack.getVolumeLevel()>.6&&this.callEventCallback?.(E.$E.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED)},this.updateActiveSpeakers=()=>{let e=Object.entries(this.averageRecentVoiceLevel).filter(e=>e[1]>b).sort((e,r)=>e[1]>r[1]?-1:1).map(e=>e[0]);this.activeSpeakerIdStore.set(e)},this.updateRecentlySpoke=()=>{let e=Object.entries(this.averageRecentVoiceLevel).sort((e,r)=>e[1]>r[1]?-1:1).map(e=>e[0]);this.recentlySpokeIdStore.set(e)},this.onCallDisconnect=()=>{m.R9.sendVoiceMetadata(""),this.stopPollingVolumeData(),s.eD?.setIsInVoiceCall(!1),s.eD?.setUsingMicrophone(!1),this.localAudioTrack?.setEnabled(!1),this.unpublishedLocalAudioTrack?.setEnabled(!1)},this.attachDeviceListeners=e=>{e.onMicrophoneChanged=e=>{this.microphone?.deviceId===e.device.deviceId&&"INACTIVE"===e.state&&this.getMicrophones().then(e=>{this.microphone=e.length>0?e[0]:null})},e.onPlaybackDeviceChanged=e=>{this.playbackDevice?.deviceId===e.device.deviceId&&"INACTIVE"===e.state&&c.Ay.chrome&&this.getPlaybackDevices().then(e=>{this.playbackDevice=e.length>0?e[0]:null})}},this.audioCaptionQueues=new h.b,this.audioCaptionStream=new _.T,this.AgoraRTC=e,this.AgoraRTC.setLogLevel((0,a.k)().voice_agora_debug_level_logs?0:3),this.AgoraRTC.setArea(["OVERSEA"]),this.localAudioTrack=null,this.unpublishedLocalAudioTrack=null,this.microphone=null,this.playbackDevice=null,this.attachDeviceListeners(e),(0,a.k)().voice_debug_captions_enabled&&setTimeout(()=>{setInterval(()=>{this.audioCaptionStream.addNewCaption(this.userId?this.userId:"dummyUserId",Date.now(),v[T++%v.length])},1501)},1500)}static createInstance(){return this.instance?Promise.resolve():new Promise((r,n)=>{let i=document.createElement("script");i.src=(0,l.ck)("0706b46bdc09a419282285b791ea1dd3c019ecd6"),i.setAttribute("nonce",(0,l.tl)().csp_nonce),i.onload=()=>{let n=window.AgoraRTC;this.instance=new e(n),r()},i.onerror=()=>{n(Error("Provider audio script load error"))},document.body.appendChild(i)})}static getInstance(){return this.instance}static leave(){this.instance?.leave()}async join({appId:r,callId:n,token:i,callUserId:a,userId:l,encryptionKey:d,userEncryptionKey:u,setParticipantIdsCallback:m,callEventCallback:h,store:_,fileKey:g}){if(await this.setMicrophonePermissions(),!this.getSystemCompatibility())throw Error("System incompatible");this.setParticipantIdsCallback=m,this.userId=l,this.userEncryptionKey=u,this.callEventCallback=h;try{let e="vp8";c.Ay.safari&&+c.Ay.version>=13&&(e="h264"),await this.client?.leave(),this.client=this.AgoraRTC.createClient({mode:"live",codec:e}),this.AgoraRTC.setParameter("AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL",200),this.userId=l,this.handlingTokenExpiration=!1,this.client.setEncryptionConfig("aes-256-xts",d),this.attachClientListeners(n,i,l,d,h),await this.client.join(r,n,i,a),s.eD?.setIsInVoiceCall(!0),await this.client.setClientRole("host"),this.microphonePermissionDenied||(this.localAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:this.microphone?.deviceId}),this.unpublishedLocalAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:this.microphone?.deviceId})),this.localAudioTrack&&await this.client.publish(this.localAudioTrack),await this.unmute()}catch(a){(0,o.sx)("Voice Call - Error",{callId:n,token:i,userId:l,encryptionKey:d,message:`${a.message}`,agora_exception:!1,agora_recovery:!1,join:!0},{forwardToDatadog:!0});let r=Error(`Error joining call: ${a.message}`);throw await e.leave(),r}finally{(0,p.ds)("voice_user_joined",g,_.getState(),{callId:n,userId:l,encryptionKey:d,captions_enabled:this.captionsToggleEnabled}),(this.client?.connectionState!=="DISCONNECTED"||this.isPublishingLocalTrack())&&this.startPollingMicState()}}get uid(){return this.client?.uid}async renewToken(e){await this.client?.renewToken(e),this.handlingTokenExpiration=!1,(0,o.sx)("Voice Call - Token Renewed",{token:e,userId:this.client?.uid&&this.decryptedUserMap[this.client?.uid]})}async leave(){await this.client?.leave(),this.stopPollingMicState(),this.audioCaptionQueues.clear(),this.audioCaptionStream.clear()}async mute(){await this.localAudioTrack?.setEnabled(!1),this.audioCaptionQueues.removeTrack(this.userId,this.localAudioTrack?.getMediaStreamTrack()),s.eD?.setUsingMicrophone(!1),this.isMuted=!0}async unmute(){await this.localAudioTrack?.setEnabled(!0),(0,f.WO)()&&this.streamingAudioForCaptions&&this.audioCaptionQueues.addTrack(this.userId,this.localAudioTrack?.getMediaStreamTrack()),s.eD?.setUsingMicrophone(!0),this.isMuted=!1}streamAudioForCaptions(e){(0,f.WO)()&&this.streamingAudioForCaptions!==e&&(this.streamingAudioForCaptions=e,this.audioCaptionQueues.clear(),this.streamingAudioForCaptions&&(this.client?.remoteUsers.forEach(async e=>{let r=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(r,e.audioTrack?.getMediaStreamTrack())}),this.localAudioTrack&&!this.isMuted&&this.audioCaptionQueues.addTrack(this.userId,this.localAudioTrack.getMediaStreamTrack())))}getSystemCompatibility(){return this.AgoraRTC.checkSystemRequirements()}isLocalUserSpeaking(){return!!this.userId&&y(this.averageRecentVoiceLevel[this.userId])}attachClientListeners(e,r,n,i,a){this.client?.removeAllListeners(),this.client?.on("user-published",async(e,r)=>{if(await this.client?.subscribe(e,r),"audio"===r){let r=e.audioTrack||null;if(r?.play(),this.playbackDevice&&r?.setPlaybackDevice(this.playbackDevice.deviceId),f.WO()&&r&&this.streamingAudioForCaptions){let n=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(n,r.getMediaStreamTrack())}}}),this.client?.on("user-unpublished",async(e,r)=>{if(!s.eD||"audio"!==r)return;let n=await this.getDecryptedUserId(e.uid);if(!n)return;let i=new Set;for(let r of this.client?.remoteUsers||[]){let a=await this.getDecryptedUserId(r.uid),o=e.audioTrack?.getMediaStreamTrack().id;a===n&&o&&i.add(o)}this.audioCaptionQueues.removeUnpublishedTrack(n,i)});let l=!0;this.client?.on("network-quality",function(a){l&&(a.downlinkNetworkQuality>=4||a.uplinkNetworkQuality>=4)?(o.sx("Voice Call - Bad Call Quality",{callId:e,token:r,userId:n,encryptionKey:i,message:`Bad call quality detected. downlink = ${a.downlinkNetworkQuality}, uplink = ${a.uplinkNetworkQuality}`,agora_exception:!1,agora_recovery:!1,join:!1},{forwardToDatadog:!0}),l=!1):l=!0}),this.client?.on("user-joined",async e=>{this.setParticipantIdsCallback?.(await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&a(E.$E.USER_JOINED,r)}),this.client?.on("user-left",async e=>{this.setParticipantIdsCallback?.(await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&a(E.$E.USER_LEFT,r)}),this.client?.on("connection-state-change",async r=>{let n;switch(r){case"CONNECTED":if(m.R9.sendVoiceMetadata(e),this.setParticipantIdsCallback?.(await this.getParticipantIds()),this.startPollingVolumeData(),this._microphonePermissionDenied){n=E.$E.CONNECTED_WITH_MIC_DISABLED;break}n=E.$E.CONNECTED;break;case"DISCONNECTED":this.onCallDisconnect(),n=E.$E.DISCONNECTED;break;case"CONNECTING":n=E.$E.CONNECTING;break;case"DISCONNECTING":n=E.$E.DISCONNECTING;break;case"RECONNECTING":n=E.$E.RECONNECTING}void 0!==n&&a(n)}),this.client?.on("exception",s=>{let l;switch(s.code){case 2001:if(this.microphonePermissionDenied)break;l=E.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW;break;case 2002:l=E.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW;break;case 2003:if(this.microphonePermissionDenied)break;l=E.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW;break;case 2005:l=E.$E.WARNING_RECV_AUDIO_DECODE_FAILED;break;case 4001:if(this.microphonePermissionDenied)break;l=E.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER;break;case 4002:l=E.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER;break;case 4003:if(this.microphonePermissionDenied)break;l=E.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER;break;case 4005:l=E.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER}l&&a(l),s.code>=3e3?(console.error(s),o.sx("Voice Call - Error",{callId:e,token:r,userId:n,encryptionKey:i,message:s.msg,code:s.code,agora_exception:!1,agora_recovery:!0,join:!1},{forwardToDatadog:!0})):o.sx("Voice Call - Error",{callId:e,token:r,userId:n,encryptionKey:i,message:s.msg,code:s.code,agora_exception:!0,agora_recovery:!1,join:!1},{forwardToDatadog:!0})}),this.client?.on("token-privilege-will-expire",()=>{if(!this.handlingTokenExpiration){if(this.handlingTokenExpiration=!0,!this.client?.remoteUsers.length){a(E.$E.CALL_INACTIVE),o.sx("Voice Call - Token Will Expire",{callId:e,token:r,userId:n,encryptionKey:i,callInactive:!0});return}a(E.$E.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT),o.sx("Voice Call - Token Will Expire",{callId:e,token:r,userId:n,encryptionKey:i})}}),this.client?.on("token-privilege-did-expire",()=>{a(E.$E.TOKEN_EXPIRED),o.sx("Voice Call - Token Did Expire",{callId:e,token:r,userId:n,encryptionKey:i})})}async getDecryptedUserId(e){try{return this.decryptedUserMap[e]||(this.decryptedUserMap[e]=await (0,d.We)(this.userEncryptionKey,e.toString())),this.decryptedUserMap[e]}catch{(0,u.$D)(i.e.UNOWNED,Error(`Failed to decrypt encrypted user: ${e}`)),this.callEventCallback?.(E.$E.ERROR)}}async setMicrophonePermissions(){if(s.eD){this._microphonePermissionDenied=!await s.eD.requestMicrophonePermission();return}try{await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),this._microphonePermissionDenied=!1}catch(e){this._microphonePermissionDenied=!0}}get microphonePermissionDenied(){return this._microphonePermissionDenied}};I.instance=null;let S=I},527342:(e,r,n)=>{n.d(r,{HJ:()=>b,Lk:()=>h,Mw:()=>E,WO:()=>f,YL:()=>g,gW:()=>_,nN:()=>y});var i=n(848318),a=n(716544),o=n(141039),s=n(397579),l=n(831932);n(856480);var c=n(557444),d=n(369600),u=n(922030),p=n(832693);let m=()=>!((0,l.wg)()||(0,l.o4)());function h(){let e=(0,d.q5)(),r=(0,a.d4)(e=>e.orgById),n=(0,a.d4)(e=>e.teams),o=e?.key,l=(0,a.d4)(e=>o&&!!e.voice.activeCall[o]),[c,u]=i.useState(!1),p=(0,s.ZC)(c);return i.useEffect(()=>{let i=m()&&4===g({openFile:e,teams:n,orgById:r});!0===p&&!i&&l||u(i)},[e,r,n,p,l]),c}var _=(e=>(e[e.FEATURE_DISABLED=0]="FEATURE_DISABLED",e[e.DISABLED_BY_ORG=1]="DISABLED_BY_ORG",e[e.INELIGIBLE_FILE_IN_PERSONAL_SPACE=2]="INELIGIBLE_FILE_IN_PERSONAL_SPACE",e[e.ELIGIBLE_WITH_UPGRADE=3]="ELIGIBLE_WITH_UPGRADE",e[e.ELIGIBLE=4]="ELIGIBLE",e))(_||{});function g(e){if("gov"===window.INITIAL_OPTIONS.cluster_name)return 0;let r=e.openFile;if(!r||!r.parentOrgId&&!r.teamId)return 0;if(r.parentOrgId){let n=e.orgById[r.parentOrgId];return n?n.voice_enabled?4:1:0}if(r.teamId){let n=e.teams[r.teamId];return n?(0,u.PS)(n)?4:3:0}return 2}function f(){return!!o.eD}function E(e){return e>=p.MK.STARTED&&e<p.MK.DONE}function y(e){return e<p.MK.NOT_STARTED}function b(e,r){o.eD?.setCaptionsEnabled(r),e(c.t7(r))}},574172:(e,r,n)=>{n.d(r,{Em:()=>o,TI:()=>s,Wl:()=>a});var i=n(848318);function a(e,r){let[n,a]=(0,i.useState)(null),[o,s]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{if(r&&!o){let n=function(r){a(r[e]||null)};return r.volumeLevelsStore.subscribe(n),s(!0),()=>{r.volumeLevelsStore.unsubscribe(n),s(!1)}}},[r]),r)?n:null}function o(e,r,n){let i=r=>{n(r[e]||null)};return r&&r.volumeLevelsStore.subscribe(i),{unsubscribe:()=>r?.volumeLevelsStore.unsubscribe(i)}}function s(e,r){let[n,a]=(0,i.useState)(),[o,s]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{if(r&&!o){let n=function(r){a(r[e]?.isMuted)};return r.volumeLevelsStore.subscribe(n),s(!0),()=>{r.volumeLevelsStore.unsubscribe(n),s(!1)}}},[r]),r)return n}},385469:(e,r,n)=>{n.d(r,{$g:()=>w,Au:()=>g,BG:()=>m,Bt:()=>d,GD:()=>T,LF:()=>I,N$:()=>A,Qn:()=>v,_L:()=>_,bf:()=>a,fL:()=>u,hQ:()=>y,le:()=>b,mX:()=>f,oF:()=>p,pY:()=>h,rx:()=>S,sZ:()=>E,u_:()=>c,wS:()=>C,w_:()=>N});var i,a,o=n(896966),s=n(507152);function l(e){window.parent.postMessage(e,"*")}function c(){l({type:"FIGMA_READY"})}function d(e){l({type:"CSS_PROPERTIES",data:{cssProperties:e}})}function u(e){l({type:"HTML_SKELETON",data:{htmlSkeleton:e}})}function p(e){l({type:"TEXT",data:{text:e}})}function m(e,r){l({type:"LAYERS",data:{rootNodeId:e,layers:r}})}function h(e){l({type:"ASSET",data:{asset:e}})}function _(e){l({type:"RELATED_LINK_CREATED",data:{link:e}})}function g(e){l({type:"RELATED_LINK_REMOVED",data:{link:e}})}function f(e){l({type:"SELECTED_LAYER_GUID",data:{guid:e}})}function E(e){l({type:"SELECTED_PAGE_GUID",data:{guid:e}})}function y(e){l({type:"CONFIGURE_AUTOCOMPLETE",data:{providers:e}})}function b(e){l({type:"GENERATED_CODE",data:{sections:e}})}let v=(0,n(53818).n)(e=>{l({type:"OPEN_IN_BROWSER",data:{href:e}})});function T(e){l({type:"FILE_NAME",data:{name:e}})}function I(e,r,n){l({type:"THUMBNAIL",data:{nodeId:e,thumbnailDataUri:r,thumbnailSize:n}})}function S(){l({type:"PAGE_LOADED"})}function w(){l({type:"IDLE_LOGOUT"})}function A(e){l({type:"MAPPING_SUGGESTION",data:{requestId:e.requestId,mappings:e.mappings||null,error:e.error||null}})}(i||(i={})).sendGenerateFigmadocMessage=function(e){return C.sendMessage({type:"GENERATE_FIGMADOC",request:{userCode:e}})},(e=>{e.sendGetLocalFileExtensionManifest=function(e){return C.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_MANIFEST",request:{id:e}})},e.sendCreateMultipleNewLocalFileExtensions=function(e,r){return C.sendMessage({type:"CREATE_MULTIPLE_NEW_LOCAL_FILE_EXTENSIONS",request:{options:e,depth:r}})},e.sendGetLocalFileExtensionSourceMessage=function(e){return C.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_SOURCE",request:{id:e}})},e.sendUpdateCachedContainsWidget=function(e){return C.sendMessage({type:"UPDATE_CACHED_CONTAINS_WIDGET",request:e})},e.sendGetLocalManifestFileExtensionIdsToCachedMetadataMap=function(){return C.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_METADATA_MAP",request:void 0})},e.sendRegisterManifestChangeObserverMessage=function(e){return N.registerCallback({type:"REGISTER_MANIFEST_CHANGE_OBSERVER"},e)},e.sendRegisterCodeChangeObserverMessage=function(e){return N.registerCallback({type:"REGISTER_CODE_CHANGE_OBSERVER"},e)},e.sendRegisterUIChangeObserverMessage=function(e){return N.registerCallback({type:"REGISTER_UI_CHANGE_OBSERVER"},e)},e.sendOpenExtensionDirectoryMessage=function(e){return l({type:"OPEN_EXTENSION_DIRECTORY",data:{id:e}})},e.sendOpenExtensionManifestMessage=function(e){return l({type:"OPEN_EXTENSION_MANIFEST",data:{id:e}})},e.sendRemoveFileExtensionMessage=function(e){return C.sendMessage({type:"REMOVE_LOCAL_FILE_EXTENSION",request:{id:e}})},e.sendGetLocalManifestFileExtensionIdsToCachedContainsWidgetMapMessage=function(){return C.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_CONTAINS_WIDGET_MAP",request:void 0})},e.sendToggleDevToolsMessage=function(){return l({type:"TOGGLE_DEV_TOOLS"})},e.sendGetAllLocalFileExtensionIdsMessage=function(){return C.sendMessage({type:"GET_ALL_LOCAL_FILE_EXTENSION_IDS",request:void 0})},e.sendWriteNewExtensionDirectoryToDiskMessage=function(e){return C.sendMessage({type:"WRITE_NEW_EXTENSION_DIRECTORY_TO_DISK",request:e})}})(a||(a={}));let C=new class{constructor(){this.pendingMessagesById={}}sendMessage(e){let r=(0,s.g)(),n={...e,requestId:r};return new Promise((e,i)=>{this.pendingMessagesById[r]={...n,resolve:e,reject:i},l(n)})}resolveMessage(e){let r=this.pendingMessagesById[e.requestId];if(!r){(0,o.x1)("MessageWithResponseManager.resolveMessage","No pending message found",{response:e,pendingMessagesById:this.pendingMessagesById},{reportAsSentryError:!0});return}e.response&&(r.resolve(e.response),delete this.pendingMessagesById[e.requestId])}},N=new class{constructor(){this.callbacksById={}}registerCallback(e,r){let n=(0,s.g)();return this.callbacksById[n]=r,l({...e,callbackId:n}),()=>this.cancelCallback(n)}resolveMessage(e){let r=this.callbacksById[e.callbackId];if(!r){(0,o.x1)("MessageWithCallbackManager.resolveMessage","No callback found",{response:e,callbacksById:this.callbacksById},{reportAsSentryError:!0});return}r(e.callbackData)}async cancelCallback(e){await C.sendMessage({type:"CANCEL_CALLBACK",request:{callbackId:e}}),delete this.callbacksById[e]}}},128204:(e,r,n)=>{n.d(r,{wM:()=>i}),n(848318),n(716245),n(989446),n(195507),n(442313),n(43482),n(376780);function i(e){let r={},n=0,i=0;return e.forEach(e=>{if(e.workspace_id){let n=r[e.workspace_id]??0;n++,r[e.workspace_id]=n}else e.team_id?n++:i++}),{libraryCountByWorkspaceId:r,unassignedLibrariesCount:n,draftLibrariesCount:i}}},796503:(e,r,n)=>{n.d(r,{Ay:()=>R,yP:()=>L});var i=n(44509),a=n(379338),o=n(668122),s=n(23354),l=n(948442),c=n(142751),d=n(884060),u=n(790355),p=n(54018),m=n(667323),h=n(298934),_=n(354054),g=n(481540),f=n(486934),E=n(713547),y=n(526999),b=n(716181),v=n(710665),T=n(834111),I=n(128029),S=n(97859),w=n(241917),A=n(977508),C=n(504647),N=n(172286);let L=(e,r)=>T.$Z.selectedViewHasMissingResources(e,r),O=0,R=e=>r=>function(n){var R,P;let D=e.getState().selectedView;r(n);let M=e.getState();if(u.Qv.matches(n)){let r=M.selectedView;if(r===C.o0&&(r=(0,a.Ay)().selected_view||(0,T.vU)(M,i.Ay.location.pathname,i.Ay.location.search,i.Ay.location.hash)),"fullscreen"===r.view&&r.fileKey){let{fileKey:i}=r,a=e.getState().fileByKey[i];a&&!n.payload.fromRealtime&&(0,w.oD)(r.editorType)!==a.editor_type&&(r.editorType=(0,w.wN)(a.editor_type??"design"))}if(!(0,E.DQ)(E.Pw.GROUP_3)&&L(M,r)&&(r={view:"resourceUnavailable",resourceType:(R=r,new o.$T().selectedViewMissingResourceType(R))}),"teamUpgrade"===r.view&&r.teamId){let e=M.teams[r.teamId];e&&e.pro_team&&!(0,v.WQ)(e)&&(r={view:"team",teamId:r.teamId,teamViewTab:A.A$.SETTINGS})}r!==C.o0?e.dispatch(u.$T(r)):M.user?.drafts_folder_id?e.dispatch(u.$T({view:"folder",folderId:M.user.drafts_folder_id})):e.dispatch(u.$T({view:"recentsAndSharing"}))}else if(m.OB.matches(n)){let e={view:"fullscreen",fileKey:n.payload.file.key,editorType:n.payload.fullscreenEditorType},r=(0,T.Np)(M,e);i.Ay.replace(r,{...e,jsCommitHash:(0,y.Qr)()})}else if(u.$T.matches(n)){if("prototype"!==D.view&&"prototype"===n.payload.view&&(0,N.q)()){let e=(0,T.Np)(M,n.payload);i.Ay.redirect(e)}"fullscreen"===n.payload.view&&("fullscreen"!==D.view||n.payload.editorType!==D.editorType)&&b.B8(n.payload.editorType);let{selectedView:r}=e.getState();if(!("inlinePreview"in r&&r.inlinePreview)&&!n.payload.fromPopstate){let r=(0,T.Np)(M,n.payload);i.Ay.location.pathname+i.Ay.location.search!==r?(("fullscreen"!==n.payload.view||n.payload.fileKey!==a.Ay().editing_file?.key)&&!S.YH&&(0,I.w)()&&(0,S._X)("fileBrowserHistory middleware selectView").then(r=>{e.dispatch(u.Qv(r.data.meta))}),!n.payload.forceReplaceState&&i.Ay.location.state&&(P=n.payload,null==D||null==P?D!==P:T.$Z.requireHistoryChange(D,P))?i.Ay.push(r,{...n.payload,previousSelectedView:D,jsCommitHash:(0,y.Qr)()}):i.Ay.replace(r,{...n.payload,previousSelectedView:D,jsCommitHash:(0,y.Qr)()})):null==i.Ay.location.state&&i.Ay.replace(r,{...n.payload,previousSelectedView:D,jsCommitHash:(0,y.Qr)()}),e.getState()?.user?.appData?.loggedOut&&"fullscreen"!==n.payload.view&&i.Ay.reload("User Logged out")}if("searchAndBrowse"===n.payload.subView){let e=n.payload.data;e&&!e.category&&(0,y.hL)((0,s.vC)(e))}else(0,y.OR)(M,n.payload)}else if(l.Af.matches(n)&&"hubFile"===M.selectedView.subView)(0,y.OR)(M,{hubFileId:n.payload.hubFileId,subView:"hubFile",view:"communityHub"});else if(c.l5.matches(n)){let r=e.getState().selectedView,a=n.payload.publishedPlugins,o=r&&"communityHub"===r.view&&"plugin"===r.subView&&r.publishedPluginId;if(o&&a&&a.some(e=>e.id===o)){if(i.Ay){let e=(0,T.Np)(M,r);i.Ay.replace(e,{...r,jsCommitHash:(0,y.Qr)()})}(0,y.OR)(M,r)}}else if(p.yJ.matches(n)){let r=e.getState().selectedView;"folder"===r.view&&r.folderId===n.payload.folder.id&&(0,y.OR)(M,r)}else if(p.bE.matches(n)){let r=e.getState().selectedView;if("folder"===r.view&&r.folderId===n.payload.id){(0,y.OR)(M,r);let e=(0,T.Np)(M,r);i.Ay.replace(e,{...r,jsCommitHash:(0,y.Qr)()})}}else if(h.yJ.matches(n)){let r=e.getState().selectedView;if("fullscreen"===r.view){let e=r.fileKey&&M.fileByKey[r.fileKey];if(e){let a=(0,f.L8)(e,M.repos);if(a&&a.id===n.payload.repo.id){(0,y.OR)(M,r);let e=(0,T.Np)(M,r);i.Ay&&i.Ay.replace(e,{...r,jsCommitHash:(0,y.Qr)()})}}}}else if(d.yJ.matches(n)){let r=e.getState().selectedView;if("fullscreen"===r.view&&n.payload.file.key===r.fileKey||"prototype"===r.view&&n.payload.file.key===r.file.key){(0,y.OR)(M,r);let e=(0,T.Np)(M,r);i.Ay&&i.Ay.replace(e,{...r,jsCommitHash:(0,y.Qr)()})}}else if(_.Rz.matches(n)){let r=e.getState().selectedView;r?.view==="search"&&(i.Ay.replace((0,T.Np)(M,r),{...r,jsCommitHash:(0,y.Qr)()}),(0,y.OR)(M,r))}else u.Oe.matches(n)?(0,g.uE)("File Browser Sidebar Clicked",e.getState(),{clickedResourceType:n.payload.clickedResourceType,resourceIdOrKey:n.payload.resourceIdOrKey}):0===O&&(O=setTimeout(function(){O=0,null===e.getState().selectedView&&e.dispatch(u.$T({view:"recentsAndSharing"}))},0));return n}},734493:(e,r,n)=>{n.d(r,{py:()=>h,sC:()=>E});var i=n(308769),a=n(781131),o=n(878028),s=n(351766),l=n(376780),c=n(746948),d=n(500076),u=n(644049),p=n(843200);let m=(0,u.$B)("responsive_set");function h(e,r){if(r.assetType!==l.PW.RESPONSIVE_SET)return null;let n=(0,a.wF)(r.key),o=(0,a.Xe)(r.version);return{name:r.name,type:d.PW.RESPONSIVE_SET,sourceLibraryKey:e,key:n,version:o,assetId:i.cd.fromRef({key:n,version:o}),sourceAssetId:i.cd.fromLocalNodeIdStr(r.nodeId),sourceAssetGuid:r.nodeId,subscriptionStatus:"LIBRARY",mainThumbnailInfo:{thumbnailUrl:(0,u.EU)(e,n,o),height:Number.parseInt((0,s.oA)(r.mainNodeHeight)??"0"),width:Number.parseInt((0,s.oA)(r.mainNodeWidth)??"0")},canvasUrl:(0,u.IV)(e,n,o),containingFrame:(0,c.U7)((0,s.oA)(r.containingFrame)??null)??null,updatedAt:r.updatedAt,fullPage:(0,p.dl)(r.name)}}let _=(0,u.$B)("code_component");o.z.union([m.passthrough(),_.passthrough()]);let g=(0,u.Jw)("code_component"),f=(0,u.Jw)("responsive_set");o.z.union([g.passthrough(),f.passthrough()]);let E={[d.PW.COMPONENT]:c.Qp,[d.PW.MODULE]:c.uW,[d.PW.RESPONSIVE_SET]:h,[d.PW.STATE_GROUP]:c.SS,[d.PW.STYLE]:c.KC,[d.PW.VARIABLE]:c.GA,[d.PW.VARIABLE_SET]:c.cE,[d.PW.CODE_COMPONENT]:function(e,r){if(r.assetType!==l.PW.CODE_COMPONENT)return null;let n=(0,a.Sm)(r.key),o=(0,a.j6)(r.version);return{name:r.name,type:d.PW.CODE_COMPONENT,sourceLibraryKey:e,key:n,version:o,assetId:i._H.fromRef({key:n,version:o}),sourceAssetId:i._H.fromLocalNodeIdStr(r.nodeId),sourceAssetGuid:r.nodeId,subscriptionStatus:"LIBRARY",mainThumbnailInfo:{thumbnailUrl:(0,u.EU)(e,n,o),height:Number.parseInt((0,s.oA)(r.mainNodeHeight)??"0"),width:Number.parseInt((0,s.oA)(r.mainNodeWidth)??"0")},canvasUrl:(0,u.IV)(e,n,o),containingFrame:(0,c.U7)((0,s.oA)(r.containingFrame)??null)??null,updatedAt:(0,s.oA)(r.updatedAt)??new Date}}}},500076:(e,r,n)=>{n.d(r,{Hk:()=>s,PW:()=>a,Zx:()=>o});var i=n(741419),a=(e=>(e.COMPONENT="component",e.STYLE="style",e.STATE_GROUP="state_group",e.VARIABLE="variable",e.VARIABLE_SET="variable_set",e.MODULE="module",e.VARIABLE_OVERRIDE="variable_override",e.RESPONSIVE_SET="responsive_set",e.CONSTRAINED_TEMPLATE="constrained_template",e.CODE_LIBRARY="code_library",e.CODE_FILE="code_file",e.CODE_COMPONENT="code_component",e.MANAGED_STRING="managed_string",e))(a||{});function o(e){switch(e){case i.PWo.SYMBOL:return"component";case i.PWo.STYLE:return"style";case i.PWo.STATE_GROUP:return"state_group";case i.PWo.MODULE:return"module";case i.PWo.RESPONSIVE_SET:return"responsive_set";case i.PWo.VARIABLE:return"variable";case i.PWo.VARIABLE_SET:return"variable_set";case i.PWo.VARIABLE_OVERRIDE:return"variable_override";case i.PWo.CONSTRAINED_TEMPLATE:return"constrained_template";case i.PWo.CODE_LIBRARY:return"code_library";case i.PWo.CODE_FILE:return"code_file";case i.PWo.CODE_COMPONENT:return"code_component";case i.PWo.MANAGED_STRING:return"managed_string";case i.PWo.BRUSH:case i.PWo.NONE:return null}}function s(e){switch(e){case"component":return i.PWo.SYMBOL;case"module":return i.PWo.MODULE;case"style":return i.PWo.STYLE;case"state_group":return i.PWo.STATE_GROUP;case"variable":return i.PWo.VARIABLE;case"variable_set":return i.PWo.VARIABLE_SET;case"variable_override":return i.PWo.VARIABLE_OVERRIDE;case"responsive_set":return i.PWo.RESPONSIVE_SET;case"constrained_template":return i.PWo.CONSTRAINED_TEMPLATE;case"code_library":return i.PWo.CODE_LIBRARY;case"code_file":return i.PWo.CODE_FILE;case"code_component":return i.PWo.CODE_COMPONENT;case"managed_string":return i.PWo.MANAGED_STRING}}},124614:(e,r,n)=>{n.d(r,{MM:()=>s,Rt:()=>o,Vq:()=>l});var i=n(878028),a=n(180633),o=(e=>(e.ALL="All",e.STICKERS_AND_COMPONENTS="Stickers",e.TEMPLATES="Templates",e.TEAM_TEMPLATES="TeamTemplates",e.WIDGETS="Widgets",e.PLUGINS="Plugins",e.MORE="More",e.ORG_FACE_STAMPS="OrgFaceStamps",e))(o||{});let s=i.z.enum(["universal-insert-figjam-all","universal-insert-figjam-all-use-case","universal-insert-figjam-templates","universal-insert-figjam-stickers","universal-insert-figjam-stickers-compact-view","universal-insert-figjam-widgets","universal-insert-figjam-plugins","universal-insert-figjam-more","universal-insert-figjam-collage","universal-insert-figjam-all-whiteboard-tools"]);function l(e){switch(e){case a.p.ALL:return"universal-insert-figjam-all";case a.p.TEMPLATES:return"universal-insert-figjam-templates";case a.p.STICKERS_AND_COMPONENTS:return"universal-insert-figjam-stickers";case a.p.WIDGETS:return"universal-insert-figjam-widgets";case a.p.PLUGINS:return"universal-insert-figjam-plugins";case a.p.MORE:return"universal-insert-figjam-more";case a.p.RECENTS_COLLAGE:return"universal-insert-figjam-collage";default:throw Error("Unhandled modal tab in convertModalTabToTrackingSource")}}},634938:(e,r,n)=>{n.d(r,{_V:()=>o,b4:()=>a,kM:()=>i});var i=(e=>(e[e.Text=0]="Text",e[e.FrameOrGroup=1]="FrameOrGroup",e[e.Component=2]="Component",e[e.Instance=3]="Instance",e[e.Image=4]="Image",e[e.Shape=5]="Shape",e[e.Other=6]="Other",e[e.MatchCase=7]="MatchCase",e[e.WholeWords=8]="WholeWords",e))(i||{});let a=[0,1,2,3,4,5,6],o=[7,8]},390119:(e,r,n)=>{n.d(r,{Yv:()=>a,fJ:()=>i});let i="f195f195-f195-f195-f195-f195f195f195";var a=(e=>(e.DEFAULT="DEFAULT",e.CUSTOM="CUSTOM",e))(a||{})},526830:(e,r,n)=>{n.d(r,{I0:()=>y,KS:()=>m,PM:()=>T,Qv:()=>_,U:()=>b,Ug:()=>p,aL:()=>c,bD:()=>s,cS:()=>g,dj:()=>A,hE:()=>l,m3:()=>v,po:()=>w,vt:()=>u,xQ:()=>E,zF:()=>I});var i=n(878028),a=n(830789),o=n(467733),s=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e.COMMENT="comment",e))(s||{}),l=(e=>(e.SUBSCRIPTION="subscription",e.ONE_TIME="one_time",e))(l||{}),c=(e=>(e.DETAIL="detail",e.INSERTS="inserts",e.QUICK_ACTIONS="quick_actions",e.PLUGIN_ROW="plugin_row",e.REDESIGNED_PLUGIN_ROW="redesigned_plugin_row",e.SEARCH="search",e))(c||{}),d=(e=>(e[e.NO_USER=0]="NO_USER",e[e.NO_PROFILE=1]="NO_PROFILE",e))(d||{}),u=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e))(u||{}),p=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e.PROFILE="profile",e))(p||{});let m=a.iG.extend({author:i.Ip.ignore(),parent_id:i.z.string().nullable(),reply_count:i.z.number(),last_replied_at:i.z.string().nullable(),resource_version_id:i.z.string(),message_meta:i.z.array(i.Ip.ignore()),rating_value:i.z.number().optional()});i.z.object({plugin:i.Ip.ignore().nullish(),plugin_install:i.Ip.ignore().nullish(),whitelisted_plugin:i.Ip.ignore().nullish(),hub_file:i.Ip.ignore().nullish(),profile:i.Ip.ignore().nullish(),community_comment:i.Ip.ignore().nullish(),widget:i.Ip.ignore().nullish(),community_resource_payment:i.Ip.ignore().nullish()});var h=(e=>(e[e.SHOW_404=0]="SHOW_404",e[e.REDIRECT_TO_INTERNAL_PROFILE=1]="REDIRECT_TO_INTERNAL_PROFILE",e))(h||{}),_=(e=>(e.ALL="ALL",e.ME="ME",e.RATINGS_REVIEWS="RATINGS_REVIEWS",e.COMMENTS="COMMENTS",e))(_||{}),g=(e=>(e.COMMUNITY_LANDING="community_landing",e.FILE_BROWSER_RECOMMENDED_TEMPLATES="file_browser_recommended_templates",e.FIGJAM_TEMPLATES_PICKER="figjam_templates_picker",e.BROWSE_PLUGINS_MODAL="browse_plugins_modal",e.BROWSE_WIDGETS_MODAL="browse_widgets_modal",e.CURATED_PAGE="curated_page",e.NA="na",e.CONFIG_VOTE="config_vote",e.COMMUNITY_WIDGETS_PAGE="community_widgets_page",e.FIGJAM_SIMPLE_TEMPLATES_PICKER="figjam_simple_templates_picker",e.FIGMA_INSERTS_NUX="figma_inserts_nux",e.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",e.COMMUNITY_LIBRARIES_QUICKSTART="community_libraries_quickstart",e.FIGJAM_SECTION_PRESET_PICKER="figjam_section_preset_picker",e.CATEGORY_PAGE="category_page",e.PIPER_TEMPLATE_MODAL="piper_template_modal",e.SLIDES_FEATURED_CREATORS="slides_featured_creators",e.SITES_TEMPLATE_MODAL="sites_template_modal",e))(g||{}),f=(e=>(e.PM="PM",e.DES="DES",e.ENG="ENG",e.MKT="MKT",e.UR="UR",e.OTH="OTH",e.ALL="ALL",e.STARTER="STARTER",e))(f||{});function E(e){return null!=e&&"is_widget"in e&&e.is_widget}function y(e){return null!=e&&"current_plugin_version_id"in e&&!e.is_widget}function b(e){return null!=e&&"client_meta"in e}function v(e){return!!e?.monetized_resource_metadata}function T(e){return!!e?.monetized_resource_metadata?.has_freemium_code}function I(e){return"third_party_m10n_status"in e&&e.third_party_m10n_status===o.PN.FLAGGED||"is_3rd_party_monetized"in e&&!!e.is_3rd_party_monetized}var S=(e=>(e.POST_COMPOSER="POST_COMPOSER",e.NAVBAR="NAVBAR",e.RECENT_FILES_DIRECT_LINK="RECENT_FILES_DIRECT_LINK",e.IFRAME="IFRAME",e))(S||{}),w=(e=>(e.ACTIVE="active",e.INACTIVE="inactive",e))(w||{}),A=(e=>(e.PASTE="paste",e.DROP="drop",e.FILE_INPUT="file_input",e))(A||{}),C=(e=>(e[e.TRY_IT_OUT=0]="TRY_IT_OUT",e[e.OPEN=1]="OPEN",e))(C||{});i.z.object({id:i.z.string().nullish(),hubFileId:i.z.string().nullish(),pluginId:i.z.string().nullish(),widgetId:i.z.string().nullish(),oneStars:i.z.number(),twoStars:i.z.number(),threeStars:i.z.number(),fourStars:i.z.number(),fiveStars:i.z.number(),totalRatings:i.z.number(),avgRating:i.z.number().nullish(),createdAt:i.z.date().nullish(),updatedAt:i.z.date().nullish()})},269898:(e,r,n)=>{n.d(r,{w:()=>i});let i={displayText:"",disabled:!0,separator:!0}},241917:(e,r,n)=>{n.d(r,{Bu:()=>v,CO:()=>I,GJ:()=>l,Nw:()=>p,YP:()=>E,co:()=>m,fB:()=>T,fP:()=>h,nT:()=>_,oD:()=>f,oQ:()=>s,sq:()=>c,wN:()=>b,xq:()=>g,y9:()=>y,yY:()=>u});var i=n(741419),a=n(896966),o=n(376780);let s="si"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-2-n)}).join("")}(45,149,163)+"s",l="fig"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-31-n)}).join("")}(55,195,184,195)+"e",c="co"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-36-n)}).join("")}(2,149)+"per",d=function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-61-n)}).join("")}(32,202,198)+"lu"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-5-n)}).join("")}(4,119,129,109,125,126,124)+"o"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-30-n)}).join("")}(39,179);function u(e){return 1===e||7===e}function p(e){return 2===e||u(e)}function m(e){return 4===e||p(e)}function h(e,r){switch(e){case 1:case 7:case 3:return r===o._Y.DESIGN;case 2:return r===o._Y.WHITEBOARD;case 4:return r===o._Y.SLIDES;case 5:return r===o._Y.SITES;case 8:return r===o._Y.FIGMAKE;case 6:return r===o._Y.COOPER;default:return(0,a.x1)("editorType","Unknown editor type",{editorType:e}),!1}}var _=(e=>(e[e.Design=1]="Design",e[e.Whiteboard=2]="Whiteboard",e[e.DevHandoff=3]="DevHandoff",e[e.Slides=4]="Slides",e[e.Sites=5]="Sites",e[e.Cooper=6]="Cooper",e[e.Illustration=7]="Illustration",e[e.Figmake=8]="Figmake",e))(_||{});function g(e){switch(e){case 1:return i._YF.DESIGN;case 2:return i._YF.WHITEBOARD;case 3:return i._YF.DEV_HANDOFF;case 4:return i._YF.SLIDES;case 5:return i._YF.SITES;case 6:return i._YF.COOPER;case 7:return i._YF.ILLUSTRATION;case 8:return i._YF.FIGMAKE;default:return(0,a.x1)("editorType","Unknown editor type",{editorType:e}),i._YF.DESIGN}}function f(e){switch(e){case 2:return o._Y.WHITEBOARD;case 4:return o._Y.SLIDES;case 5:return o._Y.SITES;case 8:return o._Y.FIGMAKE;case 3:case 1:case 7:return o._Y.DESIGN;case 6:return o._Y.COOPER;default:return(0,a.x1)("editorType","Unknown editor type",{editorType:e}),o._Y.DESIGN}}function E(e){switch(e){case 2:return"whiteboard";case 4:return"slides";case 5:return"sites";case 8:return l;case 3:return"dev_handoff";case 7:return"draw";default:return"design"}}function y(e){if(null==e)return null;switch(e){case o._Y.DESIGN:return"DESIGN";case o._Y.WHITEBOARD:return"WHITEBOARD";case o._Y.SLIDES:return"SLIDES";case o._Y.SITES:return"SITES";case o._Y.COOPER:return"COOPER";case o._Y.FIGMAKE:return"FIGMAKE"}}function b(e){if(null==e)return 1;switch(e){case o._Y.DESIGN:return 1;case o._Y.WHITEBOARD:return 2;case o._Y.SLIDES:return 4;case o._Y.SITES:return 5;case o._Y.COOPER:return 6;case o._Y.FIGMAKE:return 8}}function v(e){switch(e){case 1:return"design";case 2:return"whiteboard";case 3:return"dev_handoff";case 4:return"slides";case 5:return s;case 8:return l;case 6:return c;case 7:return d;default:return e}}function T(e){switch(e){case i._YF.DESIGN:return 1;case i._YF.WHITEBOARD:return 2;case i._YF.DEV_HANDOFF:return 3;case i._YF.SLIDES:return 4;case i._YF.SITES:return 5;case i._YF.FIGMAKE:return 8;case i._YF.COOPER:return 6;case i._YF.ILLUSTRATION:return 7;default:return(0,a.x1)("editorType","Unknown editor type",{editorType:e}),1}}function I(e){switch(e){case 1:return"design";case 2:return"whiteboard";case 3:return"dev_handoff";case 4:return"slides";case 5:return s;case 8:return l;case 6:return c;case 7:return d;default:return(0,a.x1)("editorType","Unknown editor type",{editorType:e}),""}}},616385:(e,r,n)=>{n.d(r,{A:()=>i,b:()=>a});var i=(e=>(e.FILE="file",e.REPO="repo",e.FILE_IMPORT="file_import",e))(i||{}),a=(e=>(e[e.FOLDER_ROW=0]="FOLDER_ROW",e[e.NEW_FOLDER_TEAM=1]="NEW_FOLDER_TEAM",e))(a||{})},766878:(e,r,n)=>{n.d(r,{M8:()=>l,ai:()=>s,av:()=>_,f6:()=>o,kF:()=>c,lF:()=>m,zy:()=>g});var i=n(878028),a=n(677251),o=(e=>(e.FILE_BROWSER_COMMUNITY_HOME_SHELF="file_browser_community_home_shelf",e.FILE_BROWSER_SIDEBAR_RECENTS="file_browser_sidebar_recents",e.FILE_BROWSER_SIDEBAR_DRAFTS="file_browser_sidebar_drafts",e.FILE_BROWSER_SIDEBAR_FOLDER="file_browser_sidebar_folder",e.FILE_BROWSER_THUMBNAILS_RECENTS="file_browser_thumbnails_recents",e.FILE_BROWSER_TOOLBAR_RECENTS="file_browser_toolbar_recents",e.FILE_BROWSER_TOOLBAR_FOLDER="file_browser_toolbar_folder",e.FILE_BROWSER_TOOLBAR_DRAFTS="file_browser_toolbar_drafts",e.FILE_BROWSER_TOPBAR_DELETED="file_browser_topbar_deleted",e.FILE_BROWSER_TOPBAR_RECENTS="file_browser_topbar_recents",e.FILE_BROWSER_TOPBAR_FOLDER="file_browser_topbar_folder",e.FILE_BROWSER_TOPBAR_DRAFTS="file_browser_topbar_drafts",e.FILE_BROWSER_TOPBAR_OFFLINE="file_browser_topbar_offline",e.FILE_BROWSER_EMPTY_FOLDER="file_browser_empty_folder",e.FILE_BROWSER_FEED="file_browser_feed",e.FILE_BROWSER_FOLDER_CONTEXT_MENU="file_browser_folder_context_menu",e.FILE_BROWSER_FOLDER_EMPTY_TILE="file_browser_folder_empty_tile",e.FILE_BROWSER_CONNECT_FOLDER_EMPTY_PAGE="file_browser_connect_folder_empty_page",e.FILE_BROWSER_STARTER_TEAM_OVERVIEW="file_browser_starter_team_overview",e.FILE_BROWSER_TEAM_FILE_LIMIT_PAYWALL="file_browser_team_file_limit_paywall",e.FILE_BROWSER_TEAM_FOLDER_BUTTONS="file_browser_team_folder_buttons",e.FILE_BROWSER_NUX="file_browser_nux",e.FILE_BROWSER_ONBOARDING="file_browser_onboarding",e.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",e.CURSOR_BOT_END_MODAL="cursor_bot_end_modal",e.DESIGN_TOOLTIPS_PLUS_OUTRO_MODAL="design_tooltips_plus_outro_modal",e.DESIGN_VIDEO_OUTRO_MODAL="design_video_outro_modal",e.FIGJAM_NUDGE_MODAL="figjam_nudge_modal",e.DESKTOP_NEW_TAB_BUTTON="desktop_new_tab_button",e.FIGJAM_WHATS_NEW_MODAL="figjam_whats_new_modal",e.FIGJAM_AI_ONBOARDING_MODAL="figjam_ai_onboarding_announcement",e.OFFLINE_NOTIFICATION="offline_notification",e.COMMUNITY_COLLECTIONS_PAGE="community_collections_page",e.FIGJAM_MAKE_SOMETHING_POPUP="figjam_make_something_popup",e.CONFIG_24_FEATURE_ANNOUNCEMENT_CAROUSEL="config_24_feature_announcement_carousel",e.DESIGN_TO_SLIDES_ENTRYPOINT="design_to_slides_entrypoint",e.DESIGN_TO_SITES_ENTRYPOINT="design_to_sites_entrypoint",e.DESIGN_TO_BUZZ_ENTRYPOINT="design_to_buzz_entrypoint",e.BOARD_TO_DECK_FILE_MENU="figjam-file-editor-menu",e.BOARD_TO_DECK_SHARE_MODAL="figjam-share-modal",e.BOARD_TO_DECK_SELECTION="figjam-selection-inline-menu",e.BOARD_TO_DECK_PAGES_CONTEXT_MENU="figjam-page-context-menu",e))(o||{}),s=(e=>(e.NEW_TAB="new_tab",e.SAME_TAB="same_tab",e))(s||{});let l="multiplayer_user_state_change";var c=(e=>(e[e.NONE=0]="NONE",e[e.FOR_OPEN=1]="FOR_OPEN",e[e.FOR_MENU=2]="FOR_MENU",e))(c||{});let d=i.z.object({extensionId:i.z.string(),extensionType:i.z.enum(["plugin","widget"]),currentExtensionVersionId:i.z.string().nullable(),localFileId:i.z.number().nullable()}),u=i.z.object({displayName:i.z.string(),runPluginArgs:a.Ps.optional(),extensionInfo:d.optional().nullable()}),p=i.z.object({parameterValues:i.z.record(i.z.string()).optional().nullable()});u.omit({runPluginArgs:!0}).extend({selectedRunPluginArgs:p.optional().nullable()});var m=(e=>(e[e.BAR=0]="BAR",e[e.SPINNER=1]="SPINNER",e))(m||{}),h=(e=>(e[e.NEW_FILE=0]="NEW_FILE",e[e.EXISTING_FILE=1]="EXISTING_FILE",e[e.WAITING=2]="WAITING",e[e.FINISHED_WAITING=3]="FINISHED_WAITING",e))(h||{});class _{constructor(e,r,n){this.tabCloseText=e,this.unsaved=r,this.error=n,this.hasUnsavedChanges=!1,this.hasUnsavedChanges=r.hasAutosaveChanges||r.hasMultiplayerChanges}equals(e){return e&&this.tabCloseText===e.tabCloseText&&this.unsaved.hasAutosaveChanges===e.unsaved.hasAutosaveChanges&&this.unsaved.hasMultiplayerChanges===e.unsaved.hasMultiplayerChanges&&this.error===e.error}}var g=(e=>(e[e.CUT=0]="CUT",e[e.COPY=1]="COPY",e[e.PASTE=2]="PASTE",e))(g||{})},302302:(e,r,n)=>{n.d(r,{I7:()=>g,aP:()=>l,k2:()=>s,kM:()=>f,o1:()=>d,xK:()=>h});var i=n(878028),a=n(737539),o=n(366236),s=(e=>(e.RESOURCE_PAGE="resource_page",e.EDITOR="editor",e.UNIVERSAL_POSTING="universal_posting",e.ADMIN="admin",e))(s||{}),l=(e=>(e[e.EDIT=0]="EDIT",e[e.UPLOADING=1]="UPLOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE",e))(l||{});let c=i.z.object({"500_500":i.z.string().optional(),"120_120":i.z.string().optional()});var d=(e=>(e.USER="user",e.TEAM="team",e.ORG="org",e))(d||{});let u=i.z.object({email:i.z.string().optional(),user_id:i.z.string(),is_primary_user:i.z.boolean(),can_sell_on_community:i.z.boolean().optional()}),p=a.n.and(i.z.object({id:i.z.string(),name:i.z.string(),profile_handle:i.z.string(),img_url:i.z.coerce.string().optional(),img_urls:c,current_user_is_following:i.z.coerce.boolean(),current_user_is_followed:i.z.coerce.boolean(),is_restricted_by_current_user:i.z.coerce.boolean(),entity_type:i.z.nativeEnum(d),primary_user_id:i.z.string().nullable(),location:i.z.string().nullable(),follower_count:i.z.number(),following_count:i.z.number(),isPending:i.z.boolean().optional(),associated_users:i.z.array(u).optional(),has_published:i.z.boolean().optional(),description:i.z.string().nullish()})),m=i.z.object({accepted:i.z.array(p),pending:i.z.array(p).optional()}),h=i.z.object({creator:o.aw,publisher:p,community_publishers:m}),_=o.aw.pick({id:!0,email:!0}),g=i.z.object({accepted:i.z.array(o.aw),pending:i.z.array(_).optional()});var f=(e=>(e.OWNER="owner",e.PUBLISHER="publisher",e.NONE="none",e))(f||{})},759960:(e,r,n)=>{n.d(r,{QT:()=>o});var i=n(878028);n(171063);var a=(e=>(e.COLLAB="collab",e.DEV="dev",e.FULL="full",e.VIEW="view",e))(a||{});let o=i.z.nativeEnum(a)},483372:(e,r,n)=>{n.d(r,{Ae:()=>p,Gf:()=>l,PW:()=>u,gK:()=>m,w3:()=>h,zk:()=>d});var i=n(308769),a=n(741419),o=n(897392),s=n(353788);let l={isInitialized:!1,hasMissingFonts:!1,activeUserAction:a.QOV.DEFAULT,currentTool:a.NLJ.SELECT,currentStampToolName:null,activeCanvasEditModeType:a.m1T.DESIGN_LAYOUT,showUi:!0,showKeyboardShortcuts:!1,topLevelMode:a.lyf.LAYOUT,urlNodeId:"-1:-1",hideMultiplayerCursors:!1,showArtboardOutline:!1,useRealmsForPluginDev:!1,showComments:!0,currentSelectedGradientStop:{type:a.vRS.NONE,index:-1},currentSelectedProperty:{type:a.rrT.NONE,indices:[]},isUserPresent:!1,showTogglePrototypeModeButton:!1,forcePublishFlattened:!1,prototypeCanvasUiVisible:!1,showTooltips:!1,prototypeBackgroundPickerOpen:!1,pastableStyleCount:0,statePropertyToFocus:"",hoveredNode:"",multiplayerSessionState:a.kul.UNJOINED,isReadOnly:!0,isSceneReadOnly:!0,hyperlinkLocation:null,onCanvasNameEditorInfo:{mode:a.nzw.NONE,x:0,y:0,angle:0,padding:{x:0,y:0},margin:{x:0,y:0},cornerRadius:0,fontSize:11,measurementId:"",initMeasurementText:"",isCentered:!1,invertTextPosition:!1,axis:a._0v.X,trackId:"",isTLF:!1},votingSessionInfo:{sessionId:"",votingStage:a.W8Y.NO_SESSION,userVoteLimit:0,votedNodes:[],userIdToVoteStampIds:{}},loadingEmbeds:[],temporarilyExpandedInstanceLayers:[],keyboardShortcuts:{},selectedInteractions:[],hoveredInteractions:[],currentPage:"0:1",pagesList:[],devHandoffCodeLanguage:{type:"first-party",id:"WEB"},devHandoffPreferences:{codeExtensionPreferences:{}},branchingSceneState:a.aTl.ATTACHED_FILE_TIP,lastBranchingStagingAction:a.YIO.NONE,themePreference:null,sceneGeneration:0,spellCheckSuggestions:{figma:{suggestions:[],rangeText:"",rangeStart:0,rangeEnd:0,noSuggestionsFound:!1}},onCanvasPillInfo:null,activeTextReviewPlugin:null,hotReloadPluginDev:!0,useLocalRelatedLinkPlugin:!1};var c=(e=>(e[e.MIXED_OR_NO_SYMBOLS=0]="MIXED_OR_NO_SYMBOLS",e[e.SYMBOLS_ONLY=1]="SYMBOLS_ONLY",e))(c||{}),d=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.YES_WITHOUT_TRACKING_AS_EDIT=2]="YES_WITHOUT_TRACKING_AS_EDIT",e[e.YES_FORCE_TRACKING_AS_EDIT=3]="YES_FORCE_TRACKING_AS_EDIT",e[e.NO_BUT_TRACK_AS_EDIT=4]="NO_BUT_TRACK_AS_EDIT",e))(d||{}),u=(e=>(e[e.NOT_ASSET=0]="NOT_ASSET",e[e.ASSET_ICON=1]="ASSET_ICON",e[e.ASSET_IMAGE=2]="ASSET_IMAGE",e[e.ASSET_GIF=4]="ASSET_GIF",e[e.ASSET_VIDEO=8]="ASSET_VIDEO",e[e.ASSET_COMPONENT=16]="ASSET_COMPONENT",e))(u||{});function p(e){return e.map(e=>a.j0r[e])}function m(e){return e?e.map(e=>a.j0r[e]):[a.j0r.ALL_SCOPES]}function h(e){let r={entries:[]};return Object.keys(e).forEach(n=>{let l=e[n];if(l){if(l.isMixed)return;{let e=function(e){function r(e){if(e.type!==a.Z_n.ALIAS)return null;let r=i.sD.fromString(e.value);return r?i.sD.toKiwi(r):null}switch(e.type){case a.Z_n.BOOLEAN:return{dataType:"BOOLEAN",resolvedDataType:"BOOLEAN",value:{boolValue:e.value}};case a.Z_n.FLOAT:return{dataType:"FLOAT",resolvedDataType:"FLOAT",value:{floatValue:e.value}};case a.Z_n.COLOR:return{dataType:"COLOR",resolvedDataType:"COLOR",value:{colorValue:e.value}};case a.Z_n.STRING:return{dataType:"STRING",resolvedDataType:"STRING",value:{textValue:e.value}};case a.Z_n.ALIAS:{let n=r(e);if(!n)return null;return{dataType:"ALIAS",resolvedDataType:(0,s.Lv)(e.resolvedType),value:{alias:n}}}case a.Z_n.NODE_FIELD_ALIAS:{let r=[];for(let n of e.value.stablePathToNode){let e=(0,o.sH)(n);if(!e)return null;r.push(e)}let n=e.value.nodeField,i=e.value.indexOrKey;if(!r||!n||!i)return null;if("COMPONENT_PROP_ASSIGNMENTS"===n)return{dataType:"NODE_FIELD_ALIAS",resolvedDataType:(0,s.Lv)(e.resolvedType),value:{nodeFieldAliasValue:{stablePathToNode:{guids:r},nodeField:n,indexOrKey:i}}};return null}case a.Z_n.FONT_STYLE:{let n=e.value.asFloat&&r(e.value.asFloat)?{resolvedDataType:"FLOAT",fontStyleKey:"asFloat",variableId:r(e.value.asFloat)}:e.value.asString&&r(e.value.asString)?{resolvedDataType:"STRING",fontStyleKey:"asString",variableId:r(e.value.asString)}:null;if(!n)return null;return{dataType:"FONT_STYLE",resolvedDataType:"FONT_STYLE",value:{fontStyleValue:{[n.fontStyleKey]:{dataType:"ALIAS",resolvedDataType:n.resolvedDataType,value:{alias:n.variableId}}}}}}case a.Z_n.MAP:case a.Z_n.EXPRESSION:case a.Z_n.SYMBOL_ID:case a.Z_n.TEXT_DATA:case a.Z_n.MANAGED_STRING_ALIAS:case a.Z_n.CMS_ALIAS:case a.Z_n.IMAGE:case a.Z_n.LINK:case a.Z_n.JS_RUNTIME_ALIAS:case a.Z_n.SLOT_CONTENT_ID:return null}}(l);e&&r.entries?.push({variableData:e,variableField:n})}}else r.entries.push({variableField:n})}),r}},789863:(e,r,n)=>{n.d(r,{O:()=>s});var i=n(445777),a=n(442313),o=n(965845);function s(e,r){switch(e){case o.J7.ACTIVITY:return(0,a.t)("org_admin_tab.activity");case o.J7.DASHBOARD:return(0,a.t)("org_admin_tab.dashboard");case o.J7.WORKSPACES:return(0,a.t)("org_admin_tab.workspaces");case o.J7.TEAMS:return(0,a.t)("org_admin_tab.teams");case o.J7.MEMBERS:return(0,a.t)("org_admin_tab.members");case o.J7.BILLING:switch(r){case o.G_.OVERVIEW:return(0,a.t)("org_admin_tab.overview");case o.G_.BILLING_GROUPS:return(0,a.t)("org_admin_tab.billing_groups");case o.G_.INVOICES:return(0,a.t)("org_admin_tab.invoices");default:return(0,a.t)("org_admin_tab.billing")}case o.J7.RESOURCES:switch(r){case o._d.LIBRARIES:return(0,a.t)("resources_tab.libraries");case o._d.SHARED_FONTS:return(0,a.t)("resources_tab.fonts");case o._d.APPROVED_PLUGINS:return(0,a.t)("resources_tab.approved_plugins");case o._d.APPROVED_WIDGETS:return(0,a.t)("resources_tab.approved_widgets");default:return(0,a.t)("org_admin_tab.resources")}case o.J7.SETTINGS:return(0,a.t)("org_admin_tab.settings");case o.J7.CONTENT:switch(r){case o.SN.WORKSPACES:return(0,a.t)("org_admin_tab.workspaces");case o.SN.TEAMS:return(0,a.t)("org_admin_tab.teams");case o.SN.ABANDONED_DRAFTS:return(0,a.t)("org_admin_tab.abandoned_drafts");case o.SN.CONNECTED_PROJECTS:return(0,a.t)("org_admin_tab.connected_projects");default:return(0,a.t)("org_admin_tab.content")}default:(0,i.xb)(e)}}},965845:(e,r,n)=>{n.d(r,{G_:()=>s,J7:()=>i,SN:()=>a,_d:()=>o});var i=(e=>(e.DASHBOARD="",e.WORKSPACES="workspaces",e.TEAMS="teams",e.MEMBERS="members",e.CONTENT="content",e.ACTIVITY="activity",e.BILLING="billing",e.RESOURCES="resources",e.SETTINGS="settings",e))(i||{}),a=(e=>(e.WORKSPACES="workspaces",e.TEAMS="teams",e.ABANDONED_DRAFTS="abandoned-drafts",e.CONNECTED_PROJECTS="connected-projects",e))(a||{}),o=(e=>(e.LIBRARIES="",e.SHARED_FONTS="fonts",e.APPROVED_PLUGINS="plugins",e.APPROVED_WIDGETS="widgets",e))(o||{}),s=(e=>(e.OVERVIEW="overview",e.INVOICES="invoices",e.BILLING_GROUPS="billing-groups",e))(s||{})},347184:(e,r,n)=>{n.d(r,{pd:()=>u});var i=n(878028),a=n(171063),o=n(595919),s=n(502424),l=(e=>(e.SKIP_TRUE_UP="skip_true_up",e.MANUAL_PLAN_ADMIN="manual_plan_admin",e.CONTRACTUAL_LOCK_QUANTITY="contractual_lock_quantity",e.MANUAL_INTERNAL_ADMIN="manual_internal_admin",e.FREE_PERIOD="free_period",e))(l||{}),c=(e=>(e.Locked="locked",e.Floor="floor",e.None="none",e))(c||{});let d=(0,a.g7)(i.z.number()).required(o.Oq.dict(()=>!0)),u=i.z.object({invoices:i.z.custom(),account_credit:i.z.number(),currency:s.D,admin_email:i.z.string(),shipping_address:i.z.custom(),legal_name:i.z.string(),has_billing_address:i.z.boolean(),billable_seats:d,analyze_data_contract_v2_start:i.z.string().nullable().optional(),annual_renewal:i.z.string().nullable().optional(),non_adjustable_renewal_seats:(0,a.g7)(i.z.number()).nullish(),assigned_seats:i.z.record(i.z.string(),i.z.number()).nullable().optional(),unassigned_seats:i.z.record(i.z.string(),i.z.number()).nullable().optional()})},380859:(e,r,n)=>{n.d(r,{B9:()=>T,Eg:()=>f,GX:()=>m,J0:()=>p,LU:()=>l,Od:()=>s,Oo:()=>u,SL:()=>g,U9:()=>y,ZL:()=>v,cC:()=>h,dy:()=>o,e5:()=>d,jN:()=>w,oU:()=>c,qY:()=>S,rk:()=>A});var i=n(871117),a=n(376780),o=(e=>(e.ASC="asc",e.DESC="desc",e))(o||{}),s=(e=>(e.NAME="name",e.LAST_ACTIVE="last_active",e.LAST_DESIGN_ACTIVE="last_design_active",e.LAST_WHITEBOARD_ACTIVE="last_whiteboard_active",e.LAST_EDIT="last_edit",e.LAST_DESIGN_EDIT="last_design_edit",e.LAST_WHITEBOARD_EDIT="last_whiteboard_edit",e.DESIGN_ROLE="design_role",e.DESIGN_UPGRADE_DATE="design_upgrade_date",e.WHITEBOARD_ROLE="whiteboard_role",e.WHITEBOARD_UPGRADE_DATE="whiteboard_upgrade_date",e.LICENSE_GROUP="license_group",e.WORKSPACE="workspace",e.SCIM_DATA="scim_data",e.DESIGN_UPGRADE_REASON="design_upgrade_reason",e.WHITEBOARD_UPGRADE_REASON="whiteboard_upgrade_reason",e.BILLABLE_PRODUCT_SEAT="seat",e.SEARCH_SCORE="score",e.DEV_MODE_ROLE="dev_mode_role",e.DEV_MODE_UPGRADE_DATE="dev_mode_upgrade_date",e.UPGRADE_REASON="upgrade_reason",e.UPGRADE_DATE="upgrade_date",e))(s||{});let l=["last_active","last_design_active","last_whiteboard_active","last_edit","last_design_edit","last_whiteboard_edit","design_upgrade_date","whiteboard_upgrade_date","dev_mode_upgrade_date","upgrade_date"],c={columnName:"name",isReversed:!1};var d=(e=>(e.productFilter="productFilter",e.licenseGroupFilter="licenseGroupFilter",e.workspaceFilter="workspaceFilter",e.idpGroupFilter="idpGroupFilter",e.permissionFilter="permissionFilter",e.roleFilter="roleFilter",e.lastEditFilter="lastEditFilter",e.newEditorFilter="newEditorFilter",e.seatTypeFilter="seatTypeFilter",e.seatChangesFilter="seatChangesFilter",e))(d||{}),u=(e=>(e.product="product",e.workspace="workspace",e.billingGroup="billingGroup",e.idpGroup="idpGroup",e.accountType="accountType",e.role="role",e.lastEdit="lastEdit",e.newEditor="newEditor",e.seatType="seatType",e.seatChanges="seatChanges",e))(u||{});let p={productFilter:null,licenseGroupFilter:null,workspaceFilter:null,idpGroupFilter:null,permissionFilter:null,roleFilter:null,lastEditFilter:null,newEditorFilter:!1,seatTypeFilter:null,seatChangesFilter:null},m={product:"productFilter",role:"roleFilter",billingGroup:"licenseGroupFilter",workspace:"workspaceFilter",idpGroup:"idpGroupFilter",accountType:"permissionFilter",lastEdit:"lastEditFilter",newEditor:"newEditorFilter",seatType:"seatTypeFilter",seatChanges:"seatChangesFilter"},h={productFilter:"product",licenseGroupFilter:"billingGroup",workspaceFilter:"workspace",idpGroupFilter:"idpGroup",permissionFilter:"accountType",roleFilter:"role",lastEditFilter:"lastEdit",newEditorFilter:"newEditor",seatTypeFilter:"seatType",seatChangesFilter:"seatChanges"},_={FIGMA:"figma",FIGJAM:"figjam",DEV_MODE:"dev_mode"},g={[_.FIGMA]:i.Te.DESIGN,[_.FIGJAM]:i.Te.WHITEBOARD,[_.DEV_MODE]:i.Te.DEV_MODE},f={[i.Te.DESIGN]:_.FIGMA,[i.Te.WHITEBOARD]:_.FIGJAM,[i.Te.DEV_MODE]:_.DEV_MODE},E={IDP:"provisional",UNVERIFIED:"unverified"},y={[a._D.ADMIN]:a._D.ADMIN,[a._D.GUEST]:a._D.GUEST,[a._D.MEMBER]:a._D.MEMBER,[E.IDP]:E.IDP,[E.UNVERIFIED]:E.UNVERIFIED};var b=(e=>(e.VIEWER="starter",e.FULL="full",e.VIEWER_RESTRICTED="restricted",e.DEV_MODE_ONLY="dev_mode_only",e))(b||{});let v=["starter","full","restricted"],T=["full","dev_mode_only","restricted"],I={EDITOR:"editor",VIEWER:"viewer",VIEWER_RESTRICTED:"viewer-restricted",DEV_MODE_ONLY:"dev-mode-only"},S={[I.EDITOR]:"full",[I.VIEWER]:"starter",[I.VIEWER_RESTRICTED]:"restricted",[I.DEV_MODE_ONLY]:"dev_mode_only"},w={full:I.EDITOR,starter:I.VIEWER,restricted:I.VIEWER_RESTRICTED,dev_mode_only:I.DEV_MODE_ONLY},A={"3mo":"3mo","6mo":"6mo","1yr":"1yr"}},124740:(e,r,n)=>{n.d(r,{Kq:()=>o,hJ:()=>a,ig:()=>s});var i=n(878028);n(376780);let a=n(183905).kE.extend({orphaned:i.z.boolean().optional(),member_count:i.z.number().optional()});var o=(e=>(e.NAME="name",e.OWNER="owner_name",e.PROJECTS="projects",e.MEMBERS="member_count",e.WORKSPACE="workspace_name",e.ORG_ACCESS="org_access",e))(o||{}),s=(e=>(e.JOINED="JOINED",e.NOT_JOINED="NOT_JOINED",e))(s||{})},494955:(e,r,n)=>{n.d(r,{Ru:()=>I,WU:()=>S,Wd:()=>T,jh:()=>v,x0:()=>A});var i=n(445777),a=n(878028),o=n(171063),s=n(871117),l=n(376780),c=n(930593),d=n(759960),u=n(363456),p=n(720508),m=n(366236),h=n(229742);let _=(0,a.fc)(l.El),g=(0,a.fc)(l._D);var f=(e=>(e.SELF_SELECTED="self",e.SELF_SELECTED_NOT_LISTED="not listed",e.SELF_SELECTED_DONT_KNOW="don't know",e.SCIM_GROUP="scim_group",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e))(f||{});let E=a.z.nativeEnum(f),y=a.z.object({id:a.z.string(),license_group_id:a.z.string().nullable(),org_user_id:a.z.string(),assigned_at:a.z.string(),created_at:a.z.string(),actor_user_id:a.z.string().nullable(),update_reason:E,updated_at:a.z.string(),idp_group:u.m.nullable().optional(),idp_group_uuid:a.z.string().nullish()}),b=a.z.object({id:a.z.string(),license_group_id:a.z.string().nullable(),org_user_id:a.z.string(),created_at:a.z.string(),updated_at:a.z.string()});l.El.FULL,l.El.STARTER,l.El.RESTRICTED;var v=(e=>(e[e.GUEST=0]="GUEST",e[e.MEMBER=2]="MEMBER",e[e.ADMIN=3]="ADMIN",e))(v||{}),T=(e=>(e.ORG_USER="org_user",e.IDP_USER="idp_user",e.ORG_INVITE="org_invite",e))(T||{});let I=a.z.object({design_paid_status:_,whiteboard_paid_status:_,dev_mode_paid_status:_,id:a.z.string(),org_id:a.z.string(),user_id:a.z.string(),user:m.aw,permission:g,description:a.z.string().nullish(),drafts_folder_id:a.z.string(),created_at:a.z.string(),updated_at:a.z.string(),disabled_at:a.z.string().nullish(),account_type:a.z.string().optional(),account_type_changed_at:a.z.string().optional(),last_edit:a.z.string().nullish(),last_seen:a.z.string().nullish(),last_design_edit:a.z.union([a.z.string(),c.t]).nullish(),last_whiteboard_edit:a.z.union([a.z.string(),c.t]).nullish(),last_design_seen:a.z.union([a.z.string(),c.t]).nullish(),last_whiteboard_seen:a.z.union([a.z.string(),c.t]).nullish(),last_dev_mode_seen:a.z.union([a.z.string(),c.t]).nullish(),scim_account_type:a.z.string().nullish(),scim_whiteboard_paid_status:a.z.string().nullish(),scim_dev_mode_paid_status:a.z.string().nullish(),scim_is_admin:a.z.boolean().nullish(),scim_seat_type:d.QT.nullish(),user_state_changed_at:a.z.string().optional(),design_upgrade_reason:p.P.nullish(),whiteboard_upgrade_reason:p.P.nullish(),dev_mode_upgrade_reason:p.P.nullish(),scim_metadata:a.z.record(a.z.string().nullish()).nullish(),agreed_to_community_tos_at:a.z.string().nullish(),license_group_member:y.nullish(),license_group_admins:a.z.array(b).optional(),license_admin:a.z.boolean().optional(),is_email_validated:a.z.boolean().optional().nullable(),show_figjam_user_onboarding:a.z.boolean().nullable(),has_shown_figjam_admin_onboarding:a.z.boolean().nullable(),has_shown_figjam_admin_launch_onboarding:a.z.boolean().nullable(),ecc_upgrading_locked:a.z.boolean().nullish(),type:a.z.literal("org_user").default("org_user"),workspace_users:a.z.array(h.C).optional(),is_dev_mode_beta_user:a.z.boolean().optional(),active_seat_type:o.cD.nullish(),active_seat_upgrade_date:a.z.string().optional(),active_seat_upgrade_method:p.P.nullish()}),S=I;function w(e,r){switch(r){case s.G_.DESIGN:return e.design_paid_status;case s.G_.FIGJAM:return e.whiteboard_paid_status;case s.G_.DEV_MODE:return e.dev_mode_paid_status;default:(0,i.xb)(r)}}function A(e,r){switch(r){case s.G_.DESIGN:case s.G_.FIGJAM:return w(e,r);case s.G_.DEV_MODE:return w(e,s.G_.DESIGN)===l.El.FULL?l.El.FULL:w(e,r);default:(0,i.xb)(r)}}s.G_.FIGJAM,s.G_.DESIGN,s.G_.DEV_MODE},263144:(e,r,n)=>{n.d(r,{CT:()=>w,Gv:()=>y,X1:()=>I,ZG:()=>g});var i=n(878028),a=n(376780),o=n(369291),s=n(502424),l=n(76521),c=n(608943),d=n(122367);let u=(0,i.fc)(a.U0),p=(0,i.fc)(a.El),m=(0,i.fc)(a.kI);var h=(e=>(e.ANY="any",e.GOOGLE="google",e.SAML="saml",e))(h||{});let _=i.z.union([i.z.literal("AUTO"),i.z.literal("GOOD"),i.z.literal("DELINQUENT"),i.z.literal("SUSPENDED"),i.z.literal("DEACTIVATED")]),g={AUTO:"AUTO",GOOD:"GOOD",DELINQUENT:"DELINQUENT",SUSPENDED:"SUSPENDED",DEACTIVATED:"DEACTIVATED"};var f=(e=>(e.MANUAL="manual",e.DISABLED="disabled",e.QUARTERLY="quarterly",e.CHARGE_IMMEDIATELY="quarterly_auto_charge",e))(f||{});let E=i.z.nativeEnum(f);var y=(e=>(e.REQUIRE_APPROVAL="require_approval",e.BANNED="banned",e))(y||{});let b=i.z.nativeEnum(y);var v=(e=>(e.US="US",e.EU="EU",e))(v||{});let T=i.z.nativeEnum(v);i.z.object({name:i.z.string(),img_url:i.z.string().optional(),id:i.z.string()});var I=(e=>(e.Initial="Initial",e.ChoosePlan="ChoosePlan",e.AddCollaborators="AddCollaborators",e.PseudoCreateTeam="PseudoCreateTeam",e.CreateTeam="CreateTeam",e.TeamSelect="TeamSelect",e.SeatSelect="SeatSelect",e.Details="Details",e.Payment="Payment",e.Review="Review",e.Confirmation="Confirmation",e))(I||{}),S=(e=>(e.DEPROVISION="deprovision",e))(S||{}),w=(e=>(e.GUESTS="guests",e.MEMBERS="members",e.ALL_USERS="all_users",e))(w||{});l.bV.extend({id:i.z.string(),name:i.z.string(),legal_name:i.z.string().optional(),domain_capture:i.z.boolean(),created_at:i.z.string().optional(),updated_at:i.z.string().optional(),deleted_at:i.z.string().optional(),img_url:i.z.string().optional(),handle:i.z.string().optional(),figjam_disabled_at:i.z.date().nullable(),realtime_token:i.z.string().optional(),standing:_,stripe_customer_id:i.z.string().optional(),invite_whitelist_guest_invite_setting:b.nullable(),invite_whitelist_member_allowlist_enabled:i.z.boolean().nullable(),ip_ranges:i.z.array(i.z.string()),past_due_at:i.z.string().nullable(),plugins_whitelist_enforced:i.z.boolean(),widgets_whitelist_enforced:i.z.boolean(),plugin_requests_allowed:i.z.boolean(),widget_requests_allowed:i.z.boolean(),public_plugins_allowed:i.z.boolean(),voice_enabled:i.z.boolean().optional(),billing:E.nullable(),google_sso_only:i.z.boolean(),saml_sso_only:i.z.boolean(),locked_quantity_full_members:i.z.number().nullable(),locked_quantity_figjam_members:i.z.number().nullable(),featured_scim_metadata:u.nullable(),community_profile_id:i.z.string().optional(),community_profile_handle:i.z.string().optional(),template_picker_disabled:i.z.boolean().optional(),experiment_eligible:i.z.boolean().optional(),bigma_enabled:i.z.boolean().optional(),bigma_enabled_at:i.z.number().optional(),file_export_setting:i.z.string().nullable().optional(),mfa_required:i.z.string().optional(),discovery_enabled:i.z.boolean().optional(),workshop_enabled:i.z.boolean().optional(),cursor_chat_disabled:i.z.boolean().optional(),design_default_paid_status:p.optional(),whiteboard_default_paid_status:p.optional(),k12_google_org:i.z.boolean(),shared_org_license_group_settings:d.Vh.nullable(),vat_gst_id:i.z.string().optional().nullable(),tax_id_verification_status:m.optional(),are_custom_templates_allowed:i.z.boolean(),should_auto_renew:i.z.boolean(),has_automatic_upcoming_invoice:i.z.boolean(),target_locality:T.optional(),org_domains:c.N.optional().nullable(),workspaces_count:i.z.number().optional(),cmty_publish_as_user_enabled:i.z.boolean().optional(),license_groups_count:i.z.number().optional(),workspaces_nux_active_at:i.z.string().optional(),ai_features_disabled:i.z.boolean().optional(),ai_features_disabled_at:i.z.string().optional(),ai_data_sharing_enabled:i.z.boolean().optional(),is_dev_mode_opt_in_accepted:i.z.boolean().optional(),has_invalid_upgrades:i.z.boolean().optional(),figma_provided_libraries_disabled:i.z.boolean().optional(),billing_api:o.z,stripe_memo:i.z.string().optional(),self_serve:i.z.boolean().optional(),invoice_currency:i.z.nativeEnum(s.S).optional(),is_slides_disabled:i.z.boolean().optional(),activity_logs_max_query_duration_in_days:i.z.number().optional(),tier:i.z.nativeEnum(a.Ag),billing_tier:i.z.nativeEnum(a.Ag),security_add_on_enabled_at:i.z.number().optional().nullable(),all_domains_verified:i.z.boolean().optional()})},515673:(e,r,n)=>{n.d(r,{$V:()=>p,CO:()=>c,EB:()=>u,NW:()=>o,R$:()=>l,TN:()=>a,UW:()=>d,tY:()=>i,tn:()=>s});var i=(e=>(e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ANNUAL=1]="ANNUAL",e[e.MONTHLY=2]="MONTHLY",e[e.STUDENT=3]="STUDENT",e))(i||{}),a=(e=>(e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.PLAN_COMPARISON_MODAL=1]="PLAN_COMPARISON_MODAL",e[e.NUX=2]="NUX",e[e.CONSUMPTION_MODAL=3]="CONSUMPTION_MODAL",e[e.PRICING_PAGE=4]="PRICING_PAGE",e[e.DEV_MODE_MODAL=5]="DEV_MODE_MODAL",e[e.SITES_MODAL=6]="SITES_MODAL",e))(a||{}),o=(e=>(e.MONTH="month",e.YEAR="year",e))(o||{});let s={UPGRADE_NEW_TEAM:"upgrade_new_team",PLAN_COMPARISON:"plan_comparison",CREATE_TEAM:"create_team",ADD_COLLABORATORS:"add_collaborators",CHOOSE_PLAN:"choose_plan",PAYMENT_AND_ADDRESS:"payment_and_address",CONFIRM_PAY:"confirm_pay"};var l=(e=>(e.MONTHLY="monthly",e.ANNUAL="annual",e))(l||{});let c="US",d="JP",u=e=>({line1:"",line2:"",country:e||c,city:"",region:"",postal_code:""});function p(e){return""===e.line1&&""===e.line2&&""===e.city&&""===e.region&&""===e.postal_code}var m=(e=>(e.PRODUCT_PRO_DESIGN_ANNUAL="prod_BTrZbmnROhwnmX",e.PRODUCT_PRO_DESIGN_MONTHLY="prod_BUXN0CamqLCsuF",e.PRODUCT_PRO_FIGJAM_ANNUAL="figjam_annual_usd_36",e.PRODUCT_PRO_FIGJAM_MONTHLY="figjam_monthly_usd_5",e))(m||{})},677251:(e,r,n)=>{n.d(r,{Ag:()=>b,Au:()=>ed,Av:()=>ec,C:()=>en,Dk:()=>L,FW:()=>z,Gb:()=>eh,HK:()=>E,Kd:()=>T,LR:()=>J,Lu:()=>em,Lz:()=>ei,MP:()=>M,Pe:()=>ee,Ps:()=>eE,Px:()=>j,R2:()=>er,UX:()=>I,Wt:()=>P,XS:()=>N,Ye:()=>$,ZQ:()=>X,ZV:()=>F,am:()=>ep,bH:()=>Z,f5:()=>eo,ho:()=>y,k0:()=>Q,n_:()=>e_,ow:()=>et,pL:()=>Y,pR:()=>w,sM:()=>ea,u8:()=>f,xg:()=>eu});var i,a=n(878028),o=n(476070),s=n(263148),l=n(376780),c=n(302302),d=n(124614),u=n(737539),p=n(571981),m=n(755461),h=n(324964),_=n(467733),g=n(262531),f=(e=>(e[e.PUBLIC_PLUGINS_DISALLOWED=0]="PUBLIC_PLUGINS_DISALLOWED",e[e.PLUGIN_NOT_ORG_APPROVED=1]="PLUGIN_NOT_ORG_APPROVED",e[e.PLUGIN_INSTALLED_FOR_ORG=2]="PLUGIN_INSTALLED_FOR_ORG",e[e.PLUGIN_INSTALLED_FOR_USER=3]="PLUGIN_INSTALLED_FOR_USER",e[e.PLUGIN_INSTALLABLE=4]="PLUGIN_INSTALLABLE",e))(f||{}),E=(e=>(e.FIGMA="design",e.FIGJAM="whiteboard",e.UNIVERSAL="design_and_whiteboard",e.INSPECT="inspect",e.FIGMA_AND_INSPECT="design_and_inspect",e))(E||{}),y=(e=>(e.LOAD="LOAD",e.PARSE="PARSE",e.VALIDATE="VALIDATE",e))(y||{}),b=(e=>(e.Plugin="plugin",e.Widget="widget",e))(b||{});let v=a.z.object({type:a.z.nativeEnum(y),text:a.z.string()}),T=["camera","microphone","displaycapture"],I=["openexternal","analytics","cortex","debug","firstdraft","filekey","hidecursors",...T],S=a.z.object({command:a.z.string(),name:a.z.string(),multipleSelection:a.z.boolean().optional()}),w=["currentuser","activeusers","teamlibrary","fileusers","payments","clipboardwrite"],A=a.z.object({name:a.z.string(),key:a.z.string(),description:a.z.string().optional(),optional:a.z.boolean().optional(),allowFreeform:a.z.boolean().optional()}),C=a.z.array(A),N=[...w,...I];[...N];let L=["textreview","panel","inspect","codegen","linkpreview","vscode"],O=a.z.object({label:a.z.string(),value:a.z.string(),isDefault:a.z.boolean().optional()}),R=a.z.object({itemType:a.z.literal("action"),propertyName:a.z.string(),includedLanguages:a.z.array(a.z.string()).optional(),label:a.z.string().optional()});function P(e){return R.safeParse(e).success}let D=a.z.object({itemType:a.z.literal("unit"),scaledUnit:a.z.string(),defaultScaleFactor:a.z.number().optional(),default:a.z.boolean().optional(),includedLanguages:a.z.array(a.z.string()).optional()});function M(e){return D.safeParse(e).success}let k=a.z.object({itemType:a.z.literal("select"),propertyName:a.z.string(),label:a.z.string().optional(),options:a.z.array(O),includedLanguages:a.z.array(a.z.string()).optional()});function F(e){return k.safeParse(e).success}let x=a.z.union([R,D,k]),U=a.z.array(x),B=a.z.object({label:a.z.string(),value:a.z.string()}),V=a.z.object({command:a.z.string(),name:a.z.string(),parameters:C.optional(),parameterOnly:a.z.boolean().optional()}),G=a.z.object({separator:a.z.literal(!0)}),H=a.z.object({name:a.z.string()}).extend({menu:a.z.lazy(()=>a.z.array(a.z.union([V,G,H])))}),K=a.z.object({allowedDomains:a.z.array(a.z.string()),reasoning:a.z.string().optional(),devAllowedDomains:a.z.array(a.z.string()).optional()}),W=a.z.union([H,V,G]);var z=(e=>(e.FIGMA="figma",e.FIGJAM="figjam",e.INSPECT="inspect",e.DEV="dev",e.SITES="sites",e.SLIDES="slides",e))(z||{});let $=Object.values(z),Y=a.z.object({id:a.z.string().optional(),name:a.z.string(),api:a.z.string(),main:a.z.string(),ui:a.z.union([a.z.string(),a.z.record(a.z.string(),a.z.string())]).optional(),build:a.z.string().optional(),enableProposedApi:a.z.boolean().optional(),enablePrivatePluginApi:a.z.boolean().optional(),menu:W.array().optional(),networkAccess:K.optional(),relaunchButtons:S.array().optional(),relatedLinkDomains:a.z.array(a.z.string()).optional(),devResourceDomains:a.z.array(a.z.string()).optional(),parameters:C.optional(),parameterOnly:a.z.boolean().optional(),editorType:a.Ip.filteredArray(a.z.nativeEnum(z)).optional(),containsWidget:a.z.boolean().optional(),widgetApi:a.z.string().optional(),permissions:a.Ip.filteredArray(a.z.union([a.z.enum(w),a.z.enum(I)])).optional(),enableReadOnly:a.z.boolean().optional(),capabilities:a.Ip.filteredArray(a.z.enum(L)).optional(),codegenLanguages:a.z.array(B).optional(),codegenPreferences:U.optional(),documentAccess:a.z.enum(["dynamic-page"]).optional()});(e=>{e.PluginVersionSchema=a.z.object({id:a.z.string(),name:a.z.string().nullable(),version:a.z.string().nullable(),releaseNotes:a.z.string().nullable(),description:a.z.string().nullable(),tagline:a.z.string().nullable(),creatorPolicy:a.z.string().nullable(),manifest:a.z.string().nullable(),createdAt:a.z.date(),iconPath:a.z.string().nullable(),coverImagePath:a.z.string().nullable(),codePath:a.z.string().nullable(),plugin:a.z.object({currentPluginVersionId:a.z.string().nullable()})}),e.PluginInstallSchema=a.z.object({id:a.z.string(),pluginId:a.z.string(),pinnedStatus:a.z.nativeEnum(l.hM),createdAt:a.z.date(),plugin:a.z.object({id:a.z.string(),currentPluginVersionId:a.z.string().nullable(),publishingStatus:a.z.nativeEnum(l.KB).nullable(),isWidget:a.z.boolean().nullable(),viewableInEditor:a.z.boolean(),orgId:a.z.string().nullable(),approvedAt:a.z.date().nullable(),approvalStatus:a.z.number().nullable(),communityPublishers:a.z.lazy(()=>e.CommunityPublisherSchema).array().nullable(),currentPluginVersion:e.PluginVersionSchema.nullable()}).nullable()}),e.OrgSchema=a.z.object({id:a.z.string(),installedPlugins:a.z.array(e.PluginInstallSchema)}),e.CommunityTeamSchema=a.z.object({id:a.z.string(),name:a.z.string()}),e.OrgInfoSchema=a.z.object({id:a.z.string(),name:a.z.string()}),e.CommunityProfileSchema=a.z.object({id:a.z.string(),profileHandle:a.z.string(),user:a.z.object({id:a.z.string(),name:a.z.string().nullable()}).nullable(),team:e.CommunityTeamSchema.nullable(),org:e.OrgInfoSchema.nullable()}),e.CommunityPublisherSchema=a.z.object({role:a.z.nativeEnum(l.un),isPending:a.z.boolean(),profile:e.CommunityProfileSchema})})(i||(i={}));let j=a.z.object({id:a.z.string(),plugin_id:a.z.string(),name:a.z.string(),version:a.z.string(),current_plugin_version_id:a.z.string().optional(),release_notes:a.z.string(),description:a.z.string(),tagline:a.z.string().nullable(),creator_policy:a.z.string().nullable(),is_private:a.z.boolean(),manifest:Y,created_at:a.z.string(),org_id:a.z.string().optional(),redirect_icon_url:a.z.string(),redirect_cover_image_url:a.z.string(),redirect_code_url:a.z.string(),redirect_snapshot_url:a.z.string().nullish(),community_publishers:a.z.array(i.CommunityPublisherSchema).optional(),installed_by:a.z.union([a.z.literal("user"),a.z.literal("org")]).nullish(),playground_fig_file_key:a.z.string().nullish(),playground_fig_file:a.Ip.ignore().optional(),playground_file_version_id:a.z.string().nullish()}),q=a.z.object({plugin_id:a.z.string(),name:a.z.string(),manifest:Y,localFileId:a.z.number(),localFilePath:a.z.string(),error:v.optional(),cachedContainsWidget:a.z.boolean().optional(),lastKnownPluginId:a.z.string().optional(),testCode:a.z.string().optional()});function X(e){return void 0!==e.localFileId}function Z(e){return!X(e)&&!!e.is_private}function J(e){return!X(e)&&!Z(e)}function Q(e){return!!e.manifest?.containsWidget}function ee(e){return!!(e?.includes("dev")||e?.includes("inspect"))}function et(e,r,n){return!!(!n||!e||Z(e)||X(e))||!!n.public_plugins_allowed&&((Q(e)?!n.widgets_whitelist_enforced:!n.plugins_whitelist_enforced)||!!r[e?.plugin_id])}let er=a.z.object({org:a.z.object({id:a.z.string(),name:a.z.string()}).optional(),is_public:a.z.boolean().optional()}),en=a.z.object({id:a.z.string(),versions:a.z.record(j),current_plugin_version_id:a.z.string().nullable(),is_widget:a.z.coerce.boolean()}),ei=en.merge(a.z.object({install_count:a.z.number(),view_count:a.z.number(),like_count:a.z.number(),comment_count:a.z.number(),category_id:a.z.string().nullable(),roles:er,org_id:a.z.string().nullable(),realtime_token:a.z.string(),created_at:a.z.string(),redirect_thumbnail_url:a.z.string().nullable(),thumbnail_url:a.z.string().nullable(),tags:a.z.array(a.z.string()).optional(),tags_v2:a.z.record(a.z.string()).optional(),current_user_has_run:a.z.boolean().optional(),current_user_first_ran_at:a.z.string().nullish(),unique_run_count:a.z.number(),editor_type:a.z.nativeEnum(E),unpublished_at:a.z.string().nullable(),support_contact:a.z.string().nullable(),comments_setting:a.z.nativeEnum(s.Ni).nullable(),related_content:(0,o.M)(a.z.lazy(()=>ei)),hide_related_content_by_others:a.z.coerce.boolean().optional(),publishing_status:a.z.nativeEnum(l.KB).nullable(),score:a.z.number().optional(),install_status:a.z.nativeEnum(f).optional(),profile_install_status:a.z.nativeEnum(f).optional(),commenting_is_restricted:a.z.boolean(),monetization_status:a.z.nativeEnum(_.UC).nullish(),community_resource_payment:h.fe.optional(),third_party_m10n_status:a.z.nativeEnum(_.PN).nullish(),creator_policy:a.z.string().optional(),plugin_publishers:c.I7.optional(),carousel_media_urls:a.z.optional(g.fE),carousel_videos:a.z.optional(g.Fy)})).and(c.xK).and(u.n).and(m.Y).and(p.q),ea=ei.and(a.z.object({is_widget:a.z.literal(!0)}));function eo(e){return e.third_party_m10n_status===_.PN.MIGRATING}let es=a.z.object({name:a.z.string(),data:a.z.unknown().optional(),icon:a.z.union([a.z.string(),a.z.instanceof(Uint8Array)]).optional(),iconUrl:a.z.string().optional()}),el=a.z.record(es);function ec(e){return"command"in e&&"name"in e}function ed(e){return"separator"in e&&e.separator}function eu(e){return"name"in e&&"menu"in e}function ep({type:e,text:r}){switch(e){case"LOAD":return"Manifest load error: "+r;case"PARSE":return"Manifest not valid JSON: "+r;case"VALIDATE":return"Manifest error: "+r}}Symbol("relaunchMixedDescription");var em=(e=>(e.ORG="ORG",e.PUBLIC="PUBLIC",e))(em||{});function eh(e,r){return r?`GET_PLUGIN_ALLOW_LIST_${e}_${r}`:`GET_PLUGIN_ALLOW_LIST_${e}`}function e_(e,r){return r?`GET_WIDGET_ALLOW_LIST_${e}_${r}`:`GET_WIDGET_ALLOW_LIST_${e}`}let eg=a.z.enum(["default","textreview","inspect","codegen","linkpreview","auth"]),ef=a.z.union([a.z.enum(["contextmenu","filemenu","runlast","osmenu","relaunch","quick-actions","universal-insert","parameter-entry","paste_from_url","textreview","handoff-relaunch","handoff-panel","codegen","related-link-click","related-link-preview","related-link-auth","pinned","try-plugin-params","auto-run"]),d.MM]),eE=a.z.object({plugin:a.z.union([j,q]),command:a.z.string(),queryMode:a.z.boolean(),runMode:eg,triggeredFrom:ef,openFileKey:a.z.string(),ignoreForRunLastPlugin:a.z.boolean().optional(),deferRunEvent:a.z.boolean().optional(),parameterValues:el.optional(),isWidget:a.z.boolean(),widgetAction:a.z.string().nullable().optional(),forcePluginVersionId:a.z.string().nullable().optional()})},587105:(e,r,n)=>{n.d(r,{o:()=>i});let i={r:0,g:0,b:0,a:255}},523194:(e,r,n)=>{n.d(r,{J:()=>o,j:()=>function e(r,n,o){if(r&&n&&"value"in r&&"value"in n&&"object"==typeof r.value&&"object"==typeof n.value&&"indexOrKey"in r.value&&"stablePathToNode"in r.value&&"indexOrKey"in n.value&&"stablePathToNode"in n.value&&"COMPONENT_PROP_ASSIGNMENTS"===r.value.nodeField&&"COMPONENT_PROP_ASSIGNMENTS"===n.value.nodeField){let e=r.value.stablePathToNode,i=n.value.stablePathToNode,s=e&&1===e.length?o.get(e[0]):null,l=i&&1===i.length?o.get(i[0]):null;if(s&&l&&s.isState&&l.isState&&s.containingStateGroupId===l.containingStateGroupId)return a.Egt.getExplicitPropDefIDBinding(s.guid,r.value.indexOrKey)===a.Egt.getExplicitPropDefIDBinding(l.guid,n.value.indexOrKey)}if(r&&n&&"value"in r&&"value"in n&&"object"==typeof r.value&&"object"==typeof n.value&&"expressionFunction"in r.value&&"expressionArguments"in r.value&&"expressionFunction"in n.value&&"expressionArguments"in n.value){let i=r.value,a=n.value;if(i.expressionFunction!==a.expressionFunction||i.expressionArguments.length!==a.expressionArguments.length)return!1;for(let r=0;r<i.expressionArguments.length;r++)if(!e(i.expressionArguments[r],a.expressionArguments[r],o))return!1;return!0}return(0,i.c2)(r,n)}});var i=n(719670),a=n(741419),o=(e=>(e.NORMAL="normal",e.INHERITED_INTERNAL="inherited_internal",e))(o||{})},748288:(e,r,n)=>{n.d(r,{G:()=>a});var i=n(188591),a=(e=>(e.RECENTLY_VIEWED="recently-viewed",e.SHARED_FILES="shared-with-you",e.SHARED_PROJECTS="shared-projects",e))(a||{});i.C0.NAME,i.C0.CREATED_AT,i.C0.ACCESSED_AT,i.C0.NAME,i.C0.CREATED_AT,i.C0.SHARED_AT,i.C0.NAME,i.C0.CREATED_AT,i.C0.SHARED_AT},262531:(e,r,n)=>{n.d(r,{Fy:()=>m,P1:()=>s,Sq:()=>_,dE:()=>h,fE:()=>d});var i=n(878028),a=n(57968),o=(e=>(e[e.CURATED_IMAGE=0]="CURATED_IMAGE",e[e.EMBED=1]="EMBED",e))(o||{});let s=i.z.record(i.z.string().refine(e=>Object.keys(a.B.COMMUNITY_HUB_FILE_THUMBNAIL).includes(e)),i.z.string().url()),l=i.z.object({url:i.z.string().url()}),c=l.extend({id:i.z.string(),sha1:i.z.string(),resized_thumbnail_urls:i.z.optional(s),created_at:i.z.coerce.date()}),d=i.z.record(i.z.string(),c);l.extend({sha1:i.z.string(),buffer:i.z.instanceof(Uint8Array)});let u=i.z.object({url:i.z.string().url(),thumbnail_url:i.z.string().url()}),p=u.extend({id:i.z.string(),sha1:i.z.string(),thumbnail_sha1:i.z.string(),video_file_uuid:i.z.string().uuid()}),m=i.z.record(i.z.string(),p);function h(e){return"buffer"in e}function _(e){return"id"in e}u.extend({sha1:i.z.string(),buffer:i.z.instanceof(Uint8Array),thumbnail_sha1:i.z.string(),thumbnail_buffer:i.z.instanceof(Uint8Array)})},35315:(e,r,n)=>{n.d(r,{N:()=>i});var i=(e=>(e[e.URGENT_ALERT=9999]="URGENT_ALERT",e[e.HIGH_PRIORITY_MODAL=20]="HIGH_PRIORITY_MODAL",e[e.OVERRIDING_MODAL=15]="OVERRIDING_MODAL",e[e.DEFAULT_MODAL=10]="DEFAULT_MODAL",e[e.SECONDARY_MODAL=5]="SECONDARY_MODAL",e[e.SURVEY=1]="SURVEY",e))(i||{})},783235:(e,r,n)=>{n.d(r,{$L:()=>u,Du:()=>k,Ej:()=>U,Hn:()=>F,KB:()=>h,L0:()=>P,Lk:()=>A,Lr:()=>y,MU:()=>K,Mm:()=>G,Mp:()=>V,OZ:()=>B,Or:()=>H,Rr:()=>m,Rx:()=>b,Rz:()=>W,WY:()=>o,W_:()=>R,Wr:()=>g,XW:()=>I,Xr:()=>_,Zr:()=>E,_M:()=>O,a7:()=>L,dC:()=>s,dt:()=>S,f9:()=>p,fS:()=>v,gw:()=>w,hf:()=>x,j9:()=>T,jD:()=>d,mp:()=>C,q6:()=>M,qm:()=>N,qy:()=>l,tC:()=>D,uH:()=>a,uR:()=>c});var i=n(442313),a=(e=>(e.FILES="files",e.PROJECTS="projects",e.TEAMS="teams",e.USERS="users",e.HUB_FILES="hub_files",e.PUBLIC_PLUGINS="public_plugins",e.PRIVATE_PLUGINS="private_plugins",e.PUBLIC_PROFILES="public_profiles",e.PUBLIC_WIDGETS="public_widgets",e.PRIVATE_WIDGETS="private_widgets",e))(a||{}),o=(e=>(e.RESOURCE="resource",e.CREATOR="creator",e.SPACE="space",e))(o||{}),s=(e=>(e.USERS="users",e.PROJECTS="projects",e.TEAMS="teams",e.ORGS="orgs",e))(s||{}),l=(e=>(e.FOLDER="folders",e.TEAM="teams",e.ORG="orgs",e))(l||{}),c=(e=>(e.DROPDOWN="dropdown",e.AUTOCOMPLETE="autocomplete",e))(c||{}),d=(e=>(e.PILL="pill",e.CLEAR_ALL="clear_all",e.ALL_TYPES="all_types",e.SELECTION="selection",e))(d||{}),u=(e=>(e.ALL_FILES="FILES",e.DESIGN_FILES="DESIGN_FILES",e.FIGJAM_FILES="FIGJAM_FILES",e.SLIDES="SLIDES",e.USERS="USERS",e.PROJECTS="PROJECTS",e.TEAMS="TEAMS",e.PLUGINS="PLUGINS",e.WIDGETS="WIDGETS",e.SITES="SITES",e))(u||{}),p=(e=>(e.NAME="name",e.FUZZY_NAME="fuzzy-name",e.NAME_WORD_DELIMITER_V2="name-word-delimiter-v2",e.DEEP_SEARCH_TEXT="deep-search-text",e.PAGE_NAME="page-name",e.FRAME_NAME="frame-name",e.FRAGMENT_RETRIEVAL="fragment-retrieval",e))(p||{}),m=(e=>(e.ONE_TYPE="one_type",e.ALL_TYPES_BLOCKING="all_types_blocking",e.ALL_TYPES_STREAMING="all_types_streaming",e))(m||{});function h(e){switch(e){case"files":return(0,i.t)("search.preview_section.files_capitalized");case"projects":return(0,i.t)("search.preview_section.projects_capitalized");case"users":return(0,i.t)("search.preview_section.people_capitalized");case"teams":return(0,i.t)("search.preview_section.teams_capitalized");case"private_plugins":return(0,i.t)("search.preview_section.plugins_capitalized");case"hub_files":return(0,i.t)("search.preview_section.community_capitalized");default:return""}}function _(e){if(!e)return null;switch(e.value){case"FILES":case"DESIGN_FILES":case"FIGJAM_FILES":case"SLIDES":case"SITES":return"files";case"USERS":return"users";case"PROJECTS":return"projects";case"TEAMS":return"teams";case"PLUGINS":return"private_plugins";case"WIDGETS":return"private_widgets";default:return null}}function g(e){switch(e){case"files":return"FILES";case"users":return"USERS";case"projects":return"PROJECTS";case"teams":return"TEAMS";case"private_plugins":return"PLUGINS";case"private_widgets":return"WIDGETS";default:return null}}var f=(e=>(e.DESIGN="design",e.FIGJAM="whiteboard",e.SLIDES="slides",e.SITES="sites",e))(f||{});function E(e){if(e)switch(e.value){case"DESIGN_FILES":return"design";case"FIGJAM_FILES":return"whiteboard";case"SLIDES":return"slides";case"SITES":return"sites";default:return}}function y(e){if(!e)return null;let r={};for(let[n,i]of Object.entries(e))i&&("creatorIds"===n?r["creator_ids[]"]=i:"folderIds"===n&&i.length>0?r["folder_ids[]"]=i:"teamIds"===n&&i.length>0?r["team_ids[]"]=i:"orgIds"===n&&i.length>0?r["org_ids[]"]=i:r[n]=i);return r}var b=(e=>(e.ORG="internal",e.ORG_GUEST="internal_guest",e.PERSONAL="personal",e.COMMUNITY="community",e))(b||{});let v={internal:{modelTypes:["files","projects","users","teams","private_plugins","private_widgets"],correspondingModelTypes:{hub_files:"files",public_profiles:"users",public_plugins:"private_plugins",public_widgets:"private_widgets"},defaultModelType:"files"},internal_guest:{modelTypes:["files","projects","users","teams"],correspondingModelTypes:{hub_files:"files",public_profiles:"users"},defaultModelType:"files"},personal:{modelTypes:["files","projects","users"],correspondingModelTypes:{hub_files:"files",public_profiles:"users"},defaultModelType:"files"},community:{modelTypes:["hub_files","public_plugins","public_profiles","public_widgets"],correspondingModelTypes:{files:"hub_files",users:"public_profiles",private_plugins:"public_plugins",private_widgets:"public_widgets"},defaultModelType:"hub_files"}};var T=(e=>(e.POPULARITY="popularity",e.RECENCY="recency",e.RELEVANCY="relevancy",e.NAME="name",e.AUTHOR_NAME="author_name",e.INSTALL_COUNT="install_count",e.MEMBER_COUNT="member_count",e.UPDATED_AT="updated_at",e.TOUCHED_AT="touched_at",e.CREATED_AT="created_at",e.EMAIL="email",e))(T||{}),I=(e=>(e.NAME="name",e.AUTHOR_NAME="author_name",e.UPDATED_AT="updated_at",e.INSTALL_COUNT="install_count",e.RELEVANCY="relevancy",e.RUN_COUNT="run_count",e))(I||{}),S=(e=>(e.NAME="name",e.AUTHOR_NAME="author_name",e.UPDATED_AT="updated_at",e.INSTALL_COUNT="install_count",e.RELEVANCY="relevancy",e))(S||{}),w=(e=>(e.POPULARITY="popularity",e.RECENCY="recency",e))(w||{}),A=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.TOUCHED_AT="touched_at",e.CREATED_AT="created_at",e.OWNER="owner",e))(A||{}),C=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.CREATED_AT="created_at",e))(C||{}),N=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.FILES_LAST_TOUCHED_AT="files_last_touched_at",e.CREATED_AT="created_at",e.MEMBER_COUNT="member_count",e))(N||{}),L=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.EMAIL="email",e))(L||{}),O=(e=>(e.RELEVANCY="relevancy",e))(O||{}),R=(e=>(e.RELEVANCY="relevancy",e))(R||{}),P=(e=>(e.PREVIEW="preview",e.FULL_PAGE="full_page",e.OUTSIDE_FILE_BROWSER="outside_file_browser",e))(P||{}),D=(e=>(e.OPEN="open",e.CLOSE="close",e))(D||{});function M(e){switch(e){case"files":return(0,i.t)("search.search_model_type_header.files");case"projects":return(0,i.t)("search.search_model_type_header.projects");case"teams":return(0,i.t)("search.search_model_type_header.teams");case"users":return(0,i.t)("search.search_model_type_header.people");case"hub_files":return(0,i.t)("search.search_model_type_header.hub_files");case"public_plugins":return(0,i.t)("search.search_model_type_header.public_plugins");case"private_plugins":return(0,i.t)("search.search_model_type_header.private_plugins");case"public_profiles":return(0,i.t)("search.search_model_type_header.creators");case"public_widgets":return(0,i.t)("search.search_model_type_header.public_widgets");case"private_widgets":return(0,i.t)("search.search_model_type_header.private_widgets")}}function k(e){switch(e){case"teams":return(0,i.t)("file_browser.team");case"hub_files":return(0,i.t)("activity_log.resource.file");case"public_plugins":case"private_plugins":return(0,i.t)("community.plugins.plugin");case"public_profiles":return(0,i.t)("search.preview_section.creator");case"public_widgets":case"private_widgets":return(0,i.t)("community.plugins.widget");case"users":case"files":case"projects":return(0,i.t)("permissions.level_name.none")}}function F(e){if(1===(e=Array.from(new Set(e))).length)return e[0];{let r=e.pop();return e.join(", ")+" and "+r}}function x(e){switch(e){case"files":return(0,i.t)("search.search_model_type.empty_state_files");case"projects":return(0,i.t)("search.search_model_type.empty_state_projects");case"teams":return(0,i.t)("search.search_model_type.empty_state_teams");case"users":return(0,i.t)("search.search_model_type.empty_state_people");case"hub_files":return(0,i.t)("search.search_model_type.empty_state_hub_files");case"public_plugins":return(0,i.t)("search.search_model_type.empty_state_public_plugins");case"private_plugins":return(0,i.t)("search.search_model_type.empty_state_private_plugins");case"public_profiles":return(0,i.t)("search.search_model_type.empty_state_creators");case"public_widgets":return(0,i.t)("search.search_model_type.empty_state_public_widgets");case"private_widgets":return(0,i.t)("search.search_model_type.empty_state_private_widgets");default:return""}}let U=["files","projects","users","teams"],B=["files","projects","users","hub_files"],V=["public_plugins","private_plugins","public_widgets","private_widgets","public_profiles"],G=["public_plugins","private_plugins","public_widgets","private_widgets","teams","public_profiles"],H=4,K=10,W=30},217084:(e,r,n)=>{n.d(r,{A5:()=>a,Ft:()=>p,G4:()=>c,QB:()=>E,SC:()=>m,Sc:()=>h,U6:()=>d,bN:()=>u,bb:()=>o,ck:()=>g,gu:()=>f,jX:()=>_,kV:()=>s,ou:()=>l});var i=n(515673),a=(e=>(e[e.INVITE=0]="INVITE",e[e.PUBLISH_COMMUNITY=1]="PUBLISH_COMMUNITY",e[e.PUBLISH_TEMPLATE=2]="PUBLISH_TEMPLATE",e[e.POST_TO_FEED=3]="POST_TO_FEED",e[e.COLLABORATORS=4]="COLLABORATORS",e[e.EMBED_CODE=5]="EMBED_CODE",e[e.SHARE_SETTINGS=6]="SHARE_SETTINGS",e[e.FOLDER_MEMBERS=7]="FOLDER_MEMBERS",e[e.SHARE_GOOGLE_DEVICE_DISCLAIMER=8]="SHARE_GOOGLE_DEVICE_DISCLAIMER",e[e.SHARE_TO_GOOGLE_CLASSROOM=9]="SHARE_TO_GOOGLE_CLASSROOM",e[e.CONNECTED_PROJECT_USERS=10]="CONNECTED_PROJECT_USERS",e))(a||{}),o=(e=>(e.ACCOUNT="account",e.PLUGINS="plugins",e.COMMUNITY="community",e.NOTIFICATIONS="notifications",e))(o||{});function s(e){return"search"===e.view}let l={UNIVERSAL_PUBLISHING:"publish",ACCOUNT_SETTINGS:"settings"};var c=(e=>(e[e.DEFAULT=0]="DEFAULT",e.FULLSCREEN="fullscreen",e.FULLSCREEN_WITH_COMMENTS="fullscreen_comments",e))(c||{}),d=(e=>(e.ONBOARDING="onboarding",e))(d||{});function u(e){return"org"===e.view}var p=(e=>(e[e.PROJECT=0]="PROJECT",e[e.TEAM=1]="TEAM",e[e.WORKSPACE=2]="WORKSPACE",e[e.LICENSE_GROUP=3]="LICENSE_GROUP",e))(p||{}),m=(e=>(e.UPGRADE_EXISTING_TEAM="upgrade_existing_team",e.CREATE_AND_UPGRADE="create_and_upgrade",e.CREATE="create",e))(m||{}),h=(e=>(e[e.UNDETERMINED=0]="UNDETERMINED",e[e.STARTER=1]="STARTER",e[e.TEAM=2]="TEAM",e[e.ORG=3]="ORG",e))(h||{});function _(e){return"upgrade_existing_team"===e}function g(e,r){return"create"===e&&(r===i.tn.CREATE_TEAM||r===i.tn.ADD_COLLABORATORS)||r===i.tn.PLAN_COMPARISON}let f=["deletedFiles","teamCreation","folder","addAnnualPlan","addCollaborators","team","teamUpgrade","orgAdminSettings","licenseGroup","workspace","billingGroupDashboard","search","user","promoReview","eduReview","teamFeed","resourceUnavailable","feed","sharedWithYou","teamAdminConsole","recentsAndSharing","draftsToMove","allProjects","limitedTeamSharedProjects","orgDomainManagement","abandonedDraftFiles","seatRequests","componentBrowser","componentBrowserLibrary"];function E(e){return f.includes(e.view)}},122367:(e,r,n)=>{n.d(r,{Sm:()=>s,Vh:()=>u,w_:()=>c});var i=n(878028),a=(e=>(e.TEAM_CREATION_CONTROLS_ANYONE="team_creation_controls_anyone",e.TEAM_CREATION_CONTROLS_ADMIN_ONLY="team_creation_controls_admin_only",e))(a||{});let o=i.z.nativeEnum(a);var s=(e=>(e.MEMBERS="members",e.ALL_USERS="all_users",e.DISABLED="disabled",e))(s||{});let l=i.z.nativeEnum(s);var c=(e=>(e.ALLOWED="public_link_controls_setting_allowed",e.PASSWORD_REQUIRED="public_link_controls_setting_password_required",e.EXPIRATION_REQUIRED="public_link_controls_setting_expiration_required",e.EXP_AND_PWD_REQUIRED="public_link_controls_setting_password_and_expiration_required",e.BANNED="public_link_controls_setting_banned",e))(c||{});let d=i.z.nativeEnum(c),u=i.z.object({team_creation_controls:o.optional().nullable(),external_collaboration_controls:i.z.boolean(),ip_account_restriction:i.z.boolean().optional(),ip_allowlist:i.z.boolean().optional(),idle_timeout_duration_in_secs:i.z.number().optional().nullable(),autogen_password_controls:i.z.boolean(),public_link_controls_setting:d.optional().nullable(),public_link_controls_max_expiration:i.z.number().optional().nullable(),configured_upgrade_request_setting:l.optional().nullable(),configured_upgrade_request_message:i.z.string().optional().nullable(),file_export_setting:i.z.string().optional().nullable()})},756102:(e,r,n)=>{var i=(e=>(e.NAME="Name",e.ACTIVE_AT="Last active",e.DESIGN_PAID_STATUS="Design role",e.FIGJAM_PAID_STATUS="FigJam role",e))(i||{})},667998:(e,r,n)=>{n.d(r,{c:()=>i});let i={PENDING:"pending",APPROVED:"approved",DENIED:"denied",WITHDRAWN:"withdrawn"}},765982:(e,r,n)=>{n.d(r,{Zf:()=>l,j4:()=>c,wF:()=>d});var i=n(878028),a=n(870270),o=n(171063),s=n(366236),l=(e=>(e.FULL="full",e.RESTRICTED="restricted",e.STARTER="starter",e))(l||{}),c=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e))(c||{});let d=(0,a.S8)("TeamUser",i.z.object({id:(0,a.ie)(),team_id:i.z.string(),user_id:i.z.string(),design_paid_status:i.z.nativeEnum(l),whiteboard_paid_status:i.z.nativeEnum(l),drafts_folder_id:i.z.string().nullable().optional(),created_at:i.z.string(),updated_at:i.z.string(),user:s.aw.optional(),show_figjam_user_onboarding:i.z.boolean().nullable(),active_seat_type:o.cD.nullish()}))},568389:(e,r,n)=>{n.d(r,{$:()=>i}),n(442313);var i=(e=>(e.ROLE_UPGRADE="role_upgrade",e.INVITE_REDEEM="invite_redeem",e.INVITE_AUTOUPGRADE="invite_autoupgrade",e.CREATE_TEAM="create_team",e.FIGMA_ADMIN="figma_admin",e.DEPART_TEAM="depart_team",e.CREATE_FILE="create_file",e.RESOURCE_MOVED="resource_moved_to_team",e.RESOURCE_MOVED_FROM_DRAFTS="resource_moved_from_plan_drafts",e.RESTORED_FROM_TRASH="resource_restored_from_trash",e.JOIN_LINK_REDEEM="join_link_redeem",e.ADMIN_UPGRADE="team_admin_upgrade",e.CHECKOUT="checkout",e.EDIT_REQUEST_APPROVAL="edit_request_approval",e.EDIT_REQUEST_AUTO_APPROVAL="edit_request_auto_approval",e.EDIT_ACTION="edit_action",e.EDIT_BUTTON="edit_button",e.FIGJAM_GA_REUPGRADE="fj_ga_reupgrade",e.RUN_PLUGIN="run_plugin",e.DEV_MODE="dev_mode",e.DRAFTS_SHARE="drafts_share",e.DEVELOPER_BUNDLE_OPT_IN="developer_bundle_opt_in",e))(i||{})},183905:(e,r,n)=>{n.d(r,{Fb:()=>v,ZN:()=>S,bL:()=>I,kE:()=>T,pE:()=>w,qg:()=>y});var i=n(157907),a=n(878028),o=n(870270),s=n(376780),l=n(76521),c=n(469024);let d=(0,a.fc)(s.GP),u=(0,a.fc)(s.PQ),p=(0,a.fc)(s.bU),m=(0,a.fc)(s.El),h=(0,a.fc)(s.kU),_=(0,a.fc)(s.Qh),g=(0,a.fc)(s.kI),f=(0,a.fc)(s.sC),E=(0,a.fc)(s.P4),y=118;var b=(e=>(e.REQUIRES_SOURCE_ACTION="requires_source_action",e))(b||{}),v=(e=>(e.ORG_BROWSABLE="org_browsable",e.HIDDEN="hidden",e))(v||{});let T=(0,o.S8)("Team",l.bV.extend({created_at:a.z.string(),id:(0,o.ie)(),img_url:a.z.string().optional(),org_id:a.z.string().nullable(),name:a.z.string(),description:a.z.string(),projects:a.z.number().nullish(),editors:a.z.number().nullish(),realtime_token:a.z.string().optional(),restrictions_list:a.z.array(E).nullable(),subscription:_.nullable(),subscription_raw:_.nullable(),org_access:p.nullable(),stripe_customer_id:a.z.string().nullable(),student_team_at:a.z.string().nullable(),student_team_state:h,student_autoverifying_team_at:a.z.string().nullable(),student_team:a.z.boolean(),pro_team:a.z.boolean(),org_team:a.z.boolean(),starter_team:a.z.boolean(),grace_period_end:a.z.string().nullable(),grace_period_type:d.nullable(),last_upgraded_at:a.z.string().nullable(),updated_at:a.z.string().nullable().optional(),deleted_at:a.z.string().nullable(),community_profile_id:a.z.string().optional(),community_profile_handle:a.z.string().optional(),license_group_id:a.z.string().nullable(),license_group:c.W.nullable(),workspace_id:a.z.string().nullable(),default_permission:f.optional().nullable(),is_favorited:a.z.boolean().optional(),vat_gst_id:a.z.string().optional(),tax_id_verification_status:g.optional(),cmty_publish_as_user_enabled:a.z.boolean().optional(),ai_features_disabled:a.z.boolean().optional(),figma_provided_libraries_disabled:a.z.boolean().optional(),legal_name:a.z.string().nullable(),design_default_paid_status:m.optional(),whiteboard_default_paid_status:m.optional(),sanctioned_at:a.z.string().nullable(),sharing_audience_control:u.optional(),org_browsable:a.z.boolean().optional(),hidden:a.z.boolean().optional()}));function I(e,r){let n=(0,i.k)().ps_benchmark;return r?`${location.origin}/files/${r}/team/${e}`:`${location.origin}/files/team/${e}${n?"/all-projects":""}`}var S=(e=>(e.MOVE_FILES="move_files",e.DUPLICATE_FILES="duplicate_files",e.RESTORE_FILES="restore_files",e.MOVE_FOLDER="move_folder",e.IMPORT_FILES="import_files",e.CREATE_FILE="create_file",e.CREATE_FOLDER="create_folder",e.CREATE_FILE_FROM_TEMPLATE="create_file_from_template",e.CREATE_PAGE="create_page",e.DUPLICATE_PAGE="duplicate_page",e.CREATE_MORE_VARIABLE_MODES="create_more_variable_modes",e.PUBLISH_MORE_VARIABLE_MODES="publish_more_variable_modes",e.CREATE_FILE_FROM_DROPDOWN="create_file_from_dropdown",e.INSERT_ADVANCED_SHAPE="insert_advanced_shape",e.ACCEPT_PROJECT_CONNECTION_INVITE="accept_project_connection_invite",e))(S||{}),w=(e=>(e.PUBLISH_COMPONENTS="publish_components",e.USE_AUDIO="use_audio",e.VIEW_ONLY_PROJECT="view_only_project",e.INVITE_ONLY_PROJECT="invite_only_project",e))(w||{})},188591:(e,r,n)=>{n.d(r,{C0:()=>i,Jh:()=>s,XU:()=>c,cT:()=>d,mo:()=>u,rJ:()=>o,rR:()=>p,t2:()=>l,ue:()=>a});var i=(e=>(e[e.NAME=0]="NAME",e[e.CREATED_AT=1]="CREATED_AT",e[e.TOUCHED_AT=2]="TOUCHED_AT",e[e.TRASHED_AT=3]="TRASHED_AT",e[e.OWNER=4]="OWNER",e[e.SEARCH_RELEVANCE=5]="SEARCH_RELEVANCE",e[e.PROJECT_NAME=6]="PROJECT_NAME",e[e.ACCESSED_AT=7]="ACCESSED_AT",e[e.SHARED_AT=8]="SHARED_AT",e))(i||{}),a=(e=>(e[e.ASC=0]="ASC",e[e.DESC=1]="DESC",e))(a||{}),o=(e=>(e[e.ANY=0]="ANY",e[e.SELF=1]="SELF",e[e.OTHER=2]="OTHER",e))(o||{}),s=(e=>(e[e.CAN_BE_VIEWED=0]="CAN_BE_VIEWED",e[e.CAN_BE_RESTORED_DELETED=1]="CAN_BE_RESTORED_DELETED",e))(s||{}),l=(e=>(e[e.ANY=0]="ANY",e[e.DESIGN=1]="DESIGN",e[e.FIGJAM=2]="FIGJAM",e[e.PROTOTYPE=3]="PROTOTYPE",e[e.SLIDES=4]="SLIDES",e[e.SITES=5]="SITES",e))(l||{}),c=(e=>(e[e.LIST=0]="LIST",e[e.GRID=1]="GRID",e))(c||{}),d=(e=>(e.ALL="",e.SHARED="shared",e.ORG_DELETED_DRAFTS="deleted_user_drafts",e))(d||{});function u(e){switch(e){case 1:default:return"can_be_restored_deleted";case 0:return"can_be_viewed"}}var p=(e=>(e[e.TIME=0]="TIME",e[e.ALPHABETICAL=1]="ALPHABETICAL",e[e.OTHER=2]="OTHER",e))(p||{})},366236:(e,r,n)=>{n.d(r,{D6:()=>o,P5:()=>a,aw:()=>d,pl:()=>u,vA:()=>c,z4:()=>l});var i=n(878028),a=(e=>(e.NONE="none",e.ACCEPTED="accepted",e.STARTED_ONBOARDING="started_onboarding",e.DISABLED="disabled",e.ENABLED="enabled",e))(a||{}),o=(e=>(e.FILE="file",e.EXTENSION="extension",e))(o||{}),s=(e=>(e.NUM_CUSTOMERS="num_customers",e.PAYOUTS="payouts",e.GROSS="gross",e.LAST_UPDATED="last_updated_at",e.ALL_TIME_TOTAL_EARNED="all_time_total_earned",e.NUM_PURCHASES="num_purchases",e))(s||{});function l(e){return e&&({none:0,accepted:1,started_onboarding:2,disabled:3,enabled:4})[e]||0}var c=(e=>(e.ALWAYS="always",e.NEVER="never",e))(c||{});let d=i.z.object({id:i.z.string(),name:i.z.string().optional(),handle:i.z.string(),img_url:i.z.string(),email:i.z.string().optional(),description:i.z.string().nullish(),org_id:i.z.string().optional()});var u=(e=>(e.EDITOR_ON_MAIN="Editor on main",e.EDITOR_ON_TEAM="Editor on team",e))(u||{})},236864:(e,r,n)=>{n.d(r,{V5:()=>i});let i=new Set(["seen_pro_cart_abandon_survey","seen_drafts_collaboration_survey","seen_first_use_survey","seen_type_of_work_survey","seen_org_admin_survey","seen_pro_admin_survey","seen_org_cart_abandon_survey","seen_remote_templates_opt_out_survey","seen_editor_new_user_survey","seen_editor_new_user_research_intake","seen_starter_team_loophole_survey","dismissed_starter_team_loophole_survey","completed_starter_team_loophole_survey"])},143179:(e,r,n)=>{var i;(e=>{(e=>{(e.Block||(e.Block={})).ATTACHMENT_TYPES=new Set(["BodyAndThumbnailAttachment","ActionableAttachment","ClientActionableAttachment","BodyAttachment"])})(e.BlockKit||(e.BlockKit={}))})(i||(i={}))},832693:(e,r,n)=>{n.d(r,{$E:()=>i,MK:()=>s,bU:()=>a});var i=(e=>(e[e.CONNECTED=0]="CONNECTED",e[e.CONNECTED_WITH_MIC_DISABLED=1]="CONNECTED_WITH_MIC_DISABLED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.CONNECTING=3]="CONNECTING",e[e.DISCONNECTING=4]="DISCONNECTING",e[e.RECONNECTING=5]="RECONNECTING",e[e.ERROR=6]="ERROR",e[e.CALL_INACTIVE=7]="CALL_INACTIVE",e[e.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT=8]="TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT",e[e.TOKEN_WILL_EXPIRE=9]="TOKEN_WILL_EXPIRE",e[e.TOKEN_EXPIRED=10]="TOKEN_EXPIRED",e[e.TOKEN_SILENTLY_RENEWED=11]="TOKEN_SILENTLY_RENEWED",e[e.USER_JOINED=12]="USER_JOINED",e[e.USER_LEFT=13]="USER_LEFT",e[e.ERROR_MICROPHONE_PERMISSIONS_DENIED=14]="ERROR_MICROPHONE_PERMISSIONS_DENIED",e[e.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED=15]="WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED",e[e.UNMUTE=16]="UNMUTE",e[e.MUTE=17]="MUTE",e[e.ERROR_ON_LEAVE=18]="ERROR_ON_LEAVE",e[e.SYSTEM_INCOMPATIBLE=19]="SYSTEM_INCOMPATIBLE",e[e.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW=20]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW",e[e.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW=21]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW",e[e.WARNING_SEND_AUDIO_BITRATE_TOO_LOW=22]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW",e[e.WARNING_RECV_AUDIO_DECODE_FAILED=23]="WARNING_RECV_AUDIO_DECODE_FAILED",e[e.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER=24]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",e[e.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER=25]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",e[e.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER=26]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",e[e.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER=27]="WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER",e))(i||{}),a=(e=>(e[e.NONE=0]="NONE",e[e.HEADPHONES=1]="HEADPHONES",e[e.FULL=2]="FULL",e))(a||{}),o=(e=>(e.ERROR="error",e.WARNING="warning",e.MESSAGE="message",e.SUCCESS="success",e.PENDING="pending",e))(o||{}),s=(e=>(e[e.DONE=100]="DONE",e[e.STARTED=1]="STARTED",e[e.NOT_STARTED=0]="NOT_STARTED",e[e.DISK_ERROR=-1]="DISK_ERROR",e[e.NETWORK_ERROR=-2]="NETWORK_ERROR",e))(s||{})},139348:(e,r,n)=>{n.d(r,{Fi:()=>o,V0:()=>i,dN:()=>a,m2:()=>s,rj:()=>l});var i=(e=>(e.ADMIN="admin",e.DIRECTORY="directory",e))(i||{}),a=(e=>(e.TEAMS="teams",e))(a||{});let o=["teams"];var s=(e=>(e.TEAMS="teams",e.MEMBERS="members",e.LIBRARIES="libraries",e.SETTINGS="settings",e))(s||{});let l=["members","teams","libraries","settings"];l[0]},90874:(e,r,n)=>{n.d(r,{aY:()=>R,bE:()=>O});var i=n(848318),a=n(716544),o=n(445777),s=n(39773),l=n(493554),c=n(449737),d=n(96447);n(369600);var u=n(661780),p=n(376780),m=n(635547),h=n(154209),_=n(572699),g=n(668249),f=n(402840);n(584846);var E=n(99624),y=n(903459),b=n(60546),v=n(731755),T=n(356505),I=n(776402),S=n(777611),w=n(442313),A=n(775038),C=n(464012),N=(e=>(e.STOP_AUTO_RUN_FROM_USER="stop-auto-run-from-user",e.STOP_AUTO_RUN_FROM_ORG="stop-auto-run-from-org",e.CONFIRM_REPLACE="confirm-replace",e.ENABLE_AUTO_RUN="enable-auto-run",e))(N||{});let L=(0,C.Ju)(function({commonShowModalArgs:e,newPluginName:r,autoRunModalType:n,open:s}){let l,d;let u=(0,a.wA)(),m=()=>{y.s.updateUserAutoRunPluginId(e.pluginID,p.xw.NONE),u(c.Lo())},h=()=>u(c.Lo()),f=(0,_.yN)({migrationGroup:g.L.GROUP_5,component:"AutoRunConfirmModal",attribute:"orgName",legacy:(e,r)=>r?.name||void 0,migrated:(e,r)=>e?.key.type===p.OL.ORG?r?.name:void 0}),E={currentAutoRunPluginName:i.createElement(A.E,{fontWeight:"bold"},e.currentAutoRunPluginName)},b={orgName:i.createElement(A.E,null,f||""),orgPluginName:i.createElement(A.E,{fontWeight:"bold"},e.orgPluginName)},C={orgPluginName:i.createElement(A.E,{fontWeight:"bold"},e.orgPluginName),newPluginName:i.createElement(A.E,{fontWeight:"bold"},r),orgName:i.createElement(A.E,null,f||"")};switch(n){case"stop-auto-run-from-user":l=i.createElement(i.Fragment,null,i.createElement(v.nB,null,i.createElement(A.E,{color:"default",fontWeight:"medium"},(0,w.tx)("dev_handoff.autorun_confirm_modal.stop_auto_run_desc",E))),i.createElement(v.wi,null,i.createElement(v.jk,null,i.createElement(T.$n,{variant:"secondary",onClick:h},(0,w.t)("dev_handoff.autorun_confirm_modal.cancel")),i.createElement(T.$n,{variant:"primary",onClick:()=>{m(),u((0,c.to)({type:L,data:{commonShowModalArgs:e,autoRunModalType:"enable-auto-run"}}))}},(0,w.t)("dev_handoff.autorun_confirm_modal.stop_auto_run")))));break;case"enable-auto-run":l=i.createElement(i.Fragment,null,i.createElement(v.nB,null,i.createElement(A.E,{color:"default",fontWeight:"medium"},(0,w.tx)("dev_handoff.autorun_confirm_modal.enable_auto_run_desc",b))),i.createElement(v.wi,null,i.createElement(v.jk,null,i.createElement(T.$n,{variant:"secondary",onClick:h},(0,w.t)("dev_handoff.autorun_confirm_modal.dont_enable")),i.createElement(T.$n,{variant:"primary",onClick:()=>{y.s.updateUserAutoRunPluginId(e.pluginID,p.xw.INHERIT),u(c.Lo())}},(0,w.t)("dev_handoff.autorun_confirm_modal.enable_auto_run")))));break;case"confirm-replace":l=i.createElement(i.Fragment,null,i.createElement(v.nB,null,i.createElement(A.E,{color:"default",fontWeight:"medium"},(0,w.tx)("dev_handoff.autorun_confirm_modal.confirm_replace",C))),i.createElement(v.wi,null,i.createElement(v.jk,null,i.createElement(T.$n,{variant:"secondary",onClick:h},(0,w.t)("dev_handoff.autorun_confirm_modal.cancel")),i.createElement(T.$n,{variant:"primary",onClick:()=>{y.s.updateUserAutoRunPluginId(e.pluginID,p.xw.OVERRIDE),u(c.Lo())}},(0,w.t)("dev_handoff.autorun_confirm_modal.replace")))));break;case"stop-auto-run-from-org":l=i.createElement(i.Fragment,null,i.createElement(v.nB,null,i.createElement(A.E,{color:"default",fontWeight:"medium"},(0,w.tx)("dev_handoff.autorun_confirm_modal.stop_auto_run_from_org",b))),i.createElement(v.wi,null,i.createElement(v.jk,null,i.createElement(T.$n,{variant:"secondary",onClick:h},(0,w.t)("dev_handoff.autorun_confirm_modal.cancel")),i.createElement(T.$n,{variant:"primary",onClick:m},(0,w.t)("dev_handoff.autorun_confirm_modal.stop_auto_run")))));break;default:(0,o.xb)(n)}switch(n){case"stop-auto-run-from-user":case"stop-auto-run-from-org":d=(0,w.t)("dev_handoff.autorun_confirm_modal.title_stop_auto_run");break;case"confirm-replace":d=(0,w.t)("dev_handoff.autorun_confirm_modal.title_replace_auto_run");break;case"enable-auto-run":d=(0,w.t)("dev_handoff.autorun_confirm_modal.title_enable_auto_run",{pluginName:e.orgPluginName});break;default:(0,o.xb)(n)}let N=I.hS({open:s,onClose:()=>u(c.Lo())});return i.createElement(S.bL,{manager:N,width:"md",htmlAttributes:{"data-testid":"autorun-confirm-modal"}},i.createElement(v.vo,null,i.createElement(v.Y9,null,i.createElement(v.hE,null,d)),l))},"AutoRunConfirmModal");function O(e){let r=e?.plugin_id??"",n=e?.name??"",l=function(){let e=P(),r=D(),n=(0,_.b_)({component:"usePluginToAutoRun",migrationGroup:g.L.GROUP_11}),i=u.iZ()?.id;if(!(e.loaded&&r.loaded))return{loaded:!1,plugin:null};let a=null;switch(e.autoRunPrefs?.autoRunPluginBehavior){case p.xw.NONE:a=null;break;case p.xw.OVERRIDE:a=e.autoRunPrefs.autoRunPlugin;break;case p.xw.INHERIT:default:a=r.autoRunPrefs?.autoRunPlugin??null}let o=a?(0,d.mf)(a,n??"",i??"",null)??null:null;return{loaded:!0,plugin:R(o)?o:null}}(),m=D(),h=(0,b.ks)(),f=h&&l.plugin?.plugin_id===r,v=(0,s.Xr)(E.Lx),T=P(),I=(0,a.wA)();return{isPluginSetToAutoRun:f,callback:i.useCallback(()=>{if(!h||(v(!0),!l.loaded||!m.loaded))return;let e=T.autoRunPrefs?.autoRunPluginBehavior,i={pluginID:r,orgPluginName:m.autoRunPrefs?.autoRunPlugin.currentPluginVersion?.name||"",currentAutoRunPluginName:l.plugin?.name||""};switch(e){case void 0:case p.xw.NONE:y.s.updateUserAutoRunPluginId(r,p.xw.OVERRIDE);break;case p.xw.OVERRIDE:r!==l.plugin?.plugin_id?y.s.updateUserAutoRunPluginId(r,p.xw.OVERRIDE):m.autoRunPrefs?I((0,c.to)({type:L,data:{commonShowModalArgs:i,autoRunModalType:N.STOP_AUTO_RUN_FROM_USER}})):y.s.updateUserAutoRunPluginId(r,p.xw.NONE);break;case p.xw.INHERIT:m.autoRunPrefs?r!==m.autoRunPrefs.autoRunPluginId?I((0,c.to)({type:L,data:{commonShowModalArgs:i,newPluginName:n,autoRunModalType:N.CONFIRM_REPLACE}})):I((0,c.to)({type:L,data:{commonShowModalArgs:i,autoRunModalType:N.STOP_AUTO_RUN_FROM_ORG}})):y.s.updateUserAutoRunPluginId(r,p.xw.OVERRIDE);break;default:(0,o.xb)(e)}},[h,v,l.loaded,l.plugin?.name,l.plugin?.plugin_id,m.loaded,m.autoRunPrefs,T.autoRunPrefs?.autoRunPluginBehavior,r,I,n])}}function R(e){return e&&(0,f.UH)(e)}function P(){let e=(0,u.iZ)();return M((0,l.Rs)(m.Sc8,{targetOrgId:null,targetUserId:e?.id??""},{enabled:!!e?.id}))}function D(e){let r=(0,_.yN)({attribute:"id,isEnterprise",component:"useOrgAutoRunPlugin",migrationGroup:g.L.GROUP_11,legacy:(e,r)=>({id:r?.id,isEnterprise:(0,h.kA)(r)}),migrated:e=>({id:e?.key.type!==p.OL.ORG?void 0:e?.key.parentId??void 0,isEnterprise:e?.tier===p.Ag.ENTERPRISE})}),n=(0,l.Rs)(m.Sc8,{targetOrgId:r?.id??"",targetUserId:null},{enabled:r.isEnterprise});return r.isEnterprise?M(n,e):{loaded:!0,autoRunPrefs:null}}function M(e,r){if("loaded"!==e.status)return{loaded:!1,autoRunPrefs:null};let n=e.data.pluginPreferences,i=!!(r||n?.autoRunEnabled);return n&&n.autoRunPluginId&&n.autoRunPlugin&&i?{loaded:!0,autoRunPrefs:{autoRunPluginId:n.autoRunPluginId,autoRunPluginBehavior:n.autoRunBehavior,autoRunPlugin:n.autoRunPlugin}}:{loaded:!0,autoRunPrefs:null}}},44841:(e,r,n)=>{n.d(r,{Q:()=>d});var i=n(848318),a=n(719670);n(182059),n(566699),n(442313);var o=n(464079),s=n(203839);n(950738);var l=n(376780);n(503024);var c=n(318309);function d(){let{setCodegenSettings:e,localCodegenSettings:r}=(0,c.VR)(),n=(0,o.v4)(),d=(0,s.gc)(),u=i.useMemo(()=>r?.behavior===l.Rc.OVERRIDE&&(0,a.he)(r?.language,n)&&(0,a.he)(r?.preferences,d),[n,d,r]);return{updateDefaultCodegenSettings:i.useCallback(()=>{e({behavior:u?l.Rc.INHERIT:l.Rc.OVERRIDE,language:n,preferences:d})},[n,d,u,e]),isSetToDefault:u}}n(205397)},38988:(e,r,n)=>{n.d(r,{Ew:()=>i.E,IN:()=>c.IN,L_:()=>o.L_,VY:()=>s.V,Wh:()=>c.Wh,Yx:()=>l.Y,_x:()=>a._x,gH:()=>c.gH,mN:()=>a.mN});var i=n(939171),a=n(157727);n(505865);var o=n(393881),s=n(489221),l=n(904450),c=n(500745)},393881:(e,r,n)=>{n.d(r,{DZ:()=>m,L_:()=>h});var i=n(848318),a=n(39773),o=n(701780);n(782623),n(166365),n(17755),n(727341);var s=n(6760);n(23130);var l=n(500745),c=n(505865),d=n(104287),u=n(79979),p=n(581520);n(634218);let m=(0,a.eU)({titleIconURL:"",titleIconSvgSrc:void 0,title:"",displayed:!1,width:l.bA,height:l.Yw,initialPosition:new o.Mi(0,0),cancelCallback:void 0,onDragEnd:e=>{}});class h extends i.Component{constructor(e){super(e),this.state={titleIconURL:"",titleIconSvgSrc:void 0,title:"",displayed:!1,width:l.bA,height:l.Yw,initialPosition:new o.Mi(0,0),cancelCallback:void 0,onDragEnd:e=>{},dragging:!1,dataFplVersion:document.body.getAttribute("data-fpl-version")},this.onDragStart=()=>{this.setState({dragging:!0})},this.onDragEnd=e=>{this.setState({dragging:!1}),"function"==typeof this.state.onDragEnd&&this.state.onDragEnd(e)},this.onClose=()=>{this.state.cancelCallback&&this.state.cancelCallback()},h.instance=this,this.observer=this.createMutationObserver()}static getInstance(){return h.instance}updateState(e){this.setState(r=>({...r,...e}))}componentDidMount(){this.observer.observe(document.body,{attributes:!0})}componentWillUnmount(){this.observer&&this.observer.disconnect()}createMutationObserver(){return new MutationObserver(e=>{for(let r of e)if("attributes"===r.type&&"data-fpl-version"===r.attributeName){let e=(0,d.J)();this.setState({dataFplVersion:e})}})}render(){let{width:e,height:r}=this.state;return i.createElement("div",{style:{display:this.state.displayed?"":"none"},className:`${u.o} ${p.xE}`,"data-testid":"pluginModalContainer","data-fpl-version":this.state.dataFplVersion},i.createElement(s.vx,{alwaysEnsureHeaderModalOnScreen:!0,canResetPosition:this.state.displayed,dragHeaderOnly:!0,frameStyle:{overflow:"hidden"},hidden:!this.state.displayed,ignoreCloseShortcut:!0,initialHeight:r,initialPosition:this.state.initialPosition,initialWidth:e,isUI3Override:"ui3"===this.state.dataFplVersion,onClose:this.onClose,onDragEnd:this.onDragEnd,onDragStart:this.onDragStart,preventKeyboardFocus:!0,recordingKey:"pluginModal",title:this.state.title,titleIconSvgClassName:u.v,titleIconSvgSrc:this.state.titleIconSvgSrc,titleIconURL:this.state.titleIconURL,truncateTitleText:!0},i.createElement(c.j,{iframeId:l.Wh.MODAL,dragging:this.state.dragging})),i.createElement(c.j,{iframeId:l.Wh.FETCH}))}}},274548:(e,r,n)=>{var i=n(848318),a=n(976219),o=n(253468),s=n(497316),l=n(891627),c=n(716544),d=n(475020),u=n(792760),p=n(39773),m=n(541525),h=n(575058),_=n(766692),g=n(182059),f=n(470403),E=n(566699),y=n(17755),b=n(442313),v=n(176477),T=n(935529),I=n(790355),S=n(93724),w=n(352809),A=n(764945),C=n(584305),N=n(2626);n(96447);var L=n(727341),O=n(950738),R=n(526830),P=n(503024),D=n(99624);n(318309);var M=n(836301),k=n(60546),F=n(161922),x=n(205397),U=n(972844),B=n(385672),V=n(695998),G=n(580012);function H(){let e=q(),r=!!e,[n,a]=i.useState({x:0,y:0});return i.useEffect(()=>{if(r){let e=e=>{a({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)}},[r]),e?l.createPortal(i.createElement(M.V,{plugin:e,className:y.s.h16.w16.bRadius2.$,style:{position:"fixed",left:n.x-8,top:n.y-8,pointerEvents:"none",zIndex:1e5}}),document.body):null}function K(e){let{pinnedPlugins:r,unpinPlugin:n,movePin:a,runPlugin:o}=e,s=(0,p.md)(D.be),[l,d]=i.useState(!1),u=q(),m=(0,c.wA)(),{shownPlugins:_,overflowPlugins:g}=r.length>3?{shownPlugins:r.slice(0,2),overflowPlugins:r.slice(2)}:{shownPlugins:r,overflowPlugins:[]},f=s?.plugin_id??null,E=g.findIndex(e=>e.plugin_id===f);if(-1!==E){let e=g[E];u||g.splice(E,1),_.push(e)}let b=_[_.length-1]?.plugin_id,v=(0,h.k9)(()=>new Set(r.map(e=>e.plugin_id)),[r]);return i.useEffect(()=>{m(S.Vg({resourceType:R.bD.PLUGIN,resourceIds:Array.from(v)}))},[v,m]),i.createElement("div",{className:y.s.flex.flexRow.flexGrow1.itemsEnd.$,"data-testid":"pinned-plugins"},i.createElement("div",{className:V.hm},i.createElement(Y,{target:{type:"begin"},variant:"vertical"}),_.map(e=>{let r=e.plugin_id===f&&!!u&&-1!==E;return i.createElement("div",{key:e.plugin_id,style:{visibility:r?"hidden":"visible",display:"contents"}},i.createElement(W,{plugin:e,unpinPlugin:n,movePin:a,runPlugin:o,setIsDropdownShown:d}),i.createElement(Y,{target:{type:"after",id:e.plugin_id},variant:"vertical",disabled:r}))}),g.length>0&&i.createElement(z,{isDropdownShown:!!u||l,setIsDropdownShown:d,plugins:g,unpinPlugin:n,lastShownPluginID:b,movePin:a,runPlugin:o})))}function W({plugin:e,unpinPlugin:r,movePin:n,runPlugin:o,setIsDropdownShown:s}){let l=(0,N.Gt)(e.plugin_id,"pinned"),d=(0,p.md)(D.be),u=d?.plugin_id??null,[h,_]=(0,p.fp)(v.H),g=(0,m.U)(),f=i.useRef(null),E=(0,T._I)(),b=(0,k.ks)()&&!E,S=(0,c.wA)(),C=(0,O.Um)(),L=(0,A.p)(e.plugin_id,l),R=L.length>0,x=(0,B.yG)(e.plugin_id,"pinned")&&R,G=i.useCallback(r=>{if(R){x?S(I.oB()):S((0,B.dr)({pluginId:e.plugin_id,tileType:"pinned"}));return}l()},[R,l,x,S,e.plugin_id]),[{isDragging:H},K]=(0,a.i)(()=>({type:"pinned-plugin",collect:e=>({isDragging:!!e.isDragging()}),item:e,canDrag:()=>u!==e.plugin_id&&!b,end:(r,i)=>{let a=i.getDropResult();i.didDrop()&&a&&n(e.plugin_id,a)}}),[b,n,u,e.plugin_id]),W=C?.type===X&&C.data.pluginId===e.plugin_id,z=i.useCallback(r=>{r.stopPropagation(),r.preventDefault(),W?S(I.oB()):S(I.j7({type:X,data:{targetRect:r.currentTarget.getBoundingClientRect(),pluginId:e.plugin_id}}))},[S,W,e.plugin_id]),Y=f.current?.getBoundingClientRect();return i.createElement("div",{className:y.s.relative.$,ref:f},i.createElement("button",{className:d?.plugin_id===e.plugin_id?V.TU:V.y_,"data-tooltip-type":W||H?void 0:P.Ib.TEXT,"data-tooltip":W||H?void 0:e.name,onClick:r=>{b?(_(v._.PLUGIN),S(w.IN({fdPreviewResource:{id:e.plugin_id,type:U.s.PLUGIN}}))):R?G(r):o&&(_(v._.PLUGIN),u!==e.plugin_id&&(l(),g("Dev Handoff Ran Pinned Plugin",{pluginId:e.plugin_id})),s(!1))},onContextMenu:z},i.createElement(M.V,{plugin:e,draggable:!1,className:y.s.h16.w16.bRadius2.$,ref:K,style:{opacity:H?.5:1}})),W&&i.createElement($,{plugin:e,unpinPlugin:r}),x&&Y&&i.createElement(F.j,{showPoint:!1,items:L,onSelectItem:r=>{r.callback&&(r.callback("",null,S),s(!1),g("Dev Handoff Ran Pinned Plugin Submenu",{pluginId:e.plugin_id}))},parentRect:Y,dispatch:S,lean:"left"}))}function z({plugins:e,unpinPlugin:r,lastShownPluginID:n,isDropdownShown:a,setIsDropdownShown:o,movePin:s,runPlugin:l}){let c=i.useRef(null);return i.useEffect(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&o(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[o]),i.createElement(i.Fragment,null,i.createElement("div",{className:V.zA,ref:c},i.createElement(d.d,{recordingKey:"overflow_pins","aria-expanded":!1,onClick:()=>{o(!a)},"aria-label":(0,b.t)("dev_handoff.inspect_panel.more_plugins"),htmlAttributes:{onMouseDown:C.dG,"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,b.t)("dev_handoff.inspect_panel.more_plugins")}},i.createElement(E.U,{svg:G.A},i.createElement(u.J,null))),a&&i.createElement("div",{className:V.Wm},i.createElement(Y,{target:{type:"after",id:n},variant:"horizontal"}),e.map(e=>i.createElement(i.Fragment,{key:e.plugin_id},i.createElement(W,{plugin:e,unpinPlugin:r,movePin:s,runPlugin:l,setIsDropdownShown:o}),i.createElement(Y,{target:{type:"after",id:e.plugin_id},variant:"horizontal"}))))))}function $({plugin:e,unpinPlugin:r}){let n=(0,O.Um)();return i.createElement(x.Cf,{targetRect:n?.data.targetRect,lean:"left",minWidth:64,maxWidth:120,disableDropdownScrollContainer:!0,propagateCloseClick:!0},i.createElement(g.c$,{onClick:()=>r(e.plugin_id)},(0,b.tx)("dev_handoff.inspect_panel.unpin")))}function Y({target:e,variant:r,disabled:n=!1}){let a=(0,L.GS)()?24:32,[{isOver:s},l]=(0,o.H)(()=>({accept:"pinned-plugin",drop:()=>e,collect:e=>({isOver:!!e.isOver()}),canDrop:()=>!n}),[e,n]),c={position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexGrow:"begin"===e.type?1:0,..."vertical"===r?"begin"===e.type?{position:"relative",justifyContent:"end",minWidth:16,height:a,marginRight:-8}:{width:16,height:a,top:0,left:-8}:{width:a,height:16,top:-8,left:0}};return i.createElement("div",{style:{position:"relative",flexGrow:"begin"===e.type?1:0,width:0,height:0,display:"flex",overflow:"visible",zIndex:1}},i.createElement("div",{style:c,ref:l},s&&i.createElement(j,{variant:r,target:e})))}function j({variant:e,target:r}){return i.createElement("div",{style:{background:"var(--color-icon-brand)",..."horizontal"===e?{height:2,width:32}:{height:32,width:2},..."begin"===r.type?{marginRight:6}:{}}})}function q(){let e=(0,s.u)(),[r,n]=i.useState(null);return i.useEffect(()=>e.getMonitor().subscribeToStateChange(()=>{"pinned-plugin"===e.getMonitor().getItemType()?n(e.getMonitor().getItem()):n(null)}),[e,n]),r}i.memo(function(e){return!function(){let[e,r]=i.useState(!1);return i.useEffect(()=>{let e=requestAnimationFrame(()=>{r(!0)});return()=>cancelAnimationFrame(e)},[]),e}()?null:i.createElement(f.tH,{boundaryKey:"PinnedPlugins",fallback:i.createElement(i.Fragment,null)},i.createElement(_.hh,null,i.createElement(K,{...e}),i.createElement(H,null)))});let X="PINNED_PLUGIN_DROPDOWN"},318309:(e,r,n)=>{n.d(r,{VR:()=>L});var i=n(848318),a=n(716544),o=n(988520);n(39773);var s=n(541525);n(296425);var l=n(493554),c=n(757033);n(697401);var d=n(935529),u=n(27408);n(650080),n(203839);var p=n(405866),m=n(96447),h=n(622991);n(449977),n(369600);var _=n(661780),g=n(376780),f=n(635547),E=n(572699),y=n(668249);n(402840),n(487088);var b=n(60546),v=n(445777),T=n(741419),I=n(157907),S=n(159563);let w={language:{type:"first-party",id:"WEB"},preferences:{customSettings:null,unit:g.tK.PIXEL,scaleFactor:null},behavior:g.Rc.INHERIT};class A{constructor(e,r,n){if(this.workingPreferences=e,this.parentPreferences=r,this.parentEnabledPreferences=n,!r||!n)return;let{codegenEnabled:i,pinnedPluginsEnabled:a}={...n},o={...r};i||(o.codegenSettings=null),!a&&(0,I.k)().dev_mode_org_pinned_plugins_ent&&(o.pins=[],o.removedInheritedPins=[]),this.parentPreferences=o}orgPinsNotInUserPins(){let e=[];for(let r of this.parentPreferences?.pins??[])this.workingPreferences.pins.find(e=>e.pluginId===r.pluginId)||e.push(r);return e}get pinnedPluginIDs(){let e=[...this.workingPreferences.pins,...this.orgPinsNotInUserPins()],r=new Set(this.workingPreferences.removedInheritedPins);return e.filter(e=>!r.has(e.pluginId)&&(!e.inherited||C(this.parentPreferences,e.pluginId))).map(e=>e.pluginId)}get codegenSettings(){return this.parentPreferences&&this.workingPreferences.codegenSettings?.behavior!==g.Rc.OVERRIDE?this.parentPreferences?.codegenSettings??null:this.workingPreferences.codegenSettings}update(e){return new A((0,S.Ay)(this.workingPreferences,e),this.parentPreferences,this.parentEnabledPreferences)}pinPlugin(e){var r;let n=(r=this.workingPreferences,r?.pins.findIndex(r=>r.pluginId===e&&r.inherited));return null!=n&&-1!==n?this.update(r=>{r.pins[n].inherited=!1,r.removedInheritedPins=r.removedInheritedPins.filter(r=>r!==e)}):C(this.workingPreferences,e)?this:this.update(r=>{r.pins.push({pluginId:e,inherited:!1}),r.removedInheritedPins=r.removedInheritedPins.filter(r=>r!==e)})}unpinPlugin(e){return this.update(r=>{r.pins=r.pins.filter(r=>r.pluginId!==e),C(this.parentPreferences,e)&&r.removedInheritedPins.push(e)})}movePin(e,r){return"after"===r.type&&e===r.id||"begin"===r.type&&this.pinnedPluginIDs[0]===e?this:this.update(n=>{let i=C(this.workingPreferences,e),a=C(this.parentPreferences,e),o=!!(!i&&a);switch(n.pins=n.pins.filter(r=>r.pluginId!==e),r.type){case"begin":n.pins.unshift({pluginId:e,inherited:o});break;case"after":{let i=n.pins.findIndex(e=>e.pluginId===r.id);if(-1!==i)n.pins.splice(i+1,0,{pluginId:e,inherited:o});else{let i=this.orgPinsNotInUserPins(),a=i.findIndex(e=>e.pluginId===r.id);if(-1===a)throw Error("Invalid pin to move after");n.pins.push(...i.slice(0,a+1).map(e=>({...e,inherited:!0})),{pluginId:e,inherited:o})}}}})}get localCodegenSettings(){if(!this.codegenSettings)return null;let e=this.codegenSettings?.language,r=this.lgLanguageToLocalLanguage(e);if(!r)return null;let n=this.codegenSettings.preferences,i=this.lgUnitToLocalUnit(n.unit);return{language:r,preferences:{scaleFactor:n.scaleFactor??void 0,customSettings:n.customSettings??void 0,unit:i},behavior:this.codegenSettings.behavior}}setCodegenSettingLanguage(e){return this.update(r=>{let n=this.localLanguageTypeToLgLanguageType(e.type);if(!n)throw Error("Invalid language type");let i={...e,type:n,pluginLanguage:e.pluginLanguage??null};r.codegenSettings={language:i,preferences:this.codegenSettings?.preferences||w.preferences,behavior:this.codegenSettings?.behavior||w.behavior}})}setCodegenSettingUnit(e){return this.update(r=>{if(!this.codegenSettings)return;let n=this.localUnitToLgUnit(e);if(!n)throw Error("Invalid unit");let i=this.codegenSettings.preferences?{...this.codegenSettings.preferences,unit:n}:{scaleFactor:null,unit:n,customSettings:null};r.codegenSettings={language:this.codegenSettings.language,preferences:i,behavior:this.codegenSettings.behavior}})}setCodegenSettingCustomSettings(e,r){return this.update(n=>{if(!this.codegenSettings)return;let i=this.localLanguageTypeToLgLanguageType(e.type);if(!i)throw Error("Invalid language type");let a={...e,type:i,pluginLanguage:e.pluginLanguage??null},o={scaleFactor:this.codegenSettings.preferences?.scaleFactor??null,unit:this.codegenSettings.preferences?.unit??null,customSettings:{...this.codegenSettings.preferences?.customSettings,...r.customSettings}};n.codegenSettings={language:a,preferences:o,behavior:this.codegenSettings.behavior}})}setCodegenSetting(e){return this.update(r=>{if(!e){r.codegenSettings=null;return}let{behavior:n,language:i,preferences:a}=e,o=this.localLanguageTypeToLgLanguageType(i.type);if(!o)throw Error("Invalid language type");let s={...i,type:o,pluginLanguage:i.pluginLanguage??null},l={unit:this.localUnitToLgUnit(a.unit),customSettings:a.customSettings??null,scaleFactor:a.scaleFactor??null};r.codegenSettings={behavior:n,language:s,preferences:l}})}localUnitToLgUnit(e){switch(e){case T.tKW.PIXEL:return g.tK.PIXEL;case T.tKW.SCALED:return g.tK.SCALED;default:return null}}lgUnitToLocalUnit(e){switch(e){case g.tK.PIXEL:return T.tKW.PIXEL;case g.tK.SCALED:return T.tKW.SCALED;default:return}}localLanguageTypeToLgLanguageType(e){switch(e){case"first-party":return g.h9.FIRST_PARTY;case"published-plugin":return g.h9.PUBLISHED_PLUGIN;default:return null}}lgLanguageToLocalLanguage(e){let r;switch(e.type){case g.h9.FIRST_PARTY:r={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage??void 0};break;case g.h9.PUBLISHED_PLUGIN:if(!e.pluginLanguage)return null;r={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage};break;default:(0,v.xb)(e.type)}return r}serialize(){return{pins:this.workingPreferences.pins.map(e=>({pluginId:e.pluginId,inherited:e.inherited})),removedInheritedPins:Array.from(new Set(this.workingPreferences.removedInheritedPins)),codegenSettings:this.workingPreferences.codegenSettings}}}function C(e,r){return e?.pins.some(e=>e.pluginId===r)}let N={pins:[],removedInheritedPins:[],codegenSettings:null};function L(){let{loaded:e,preferences:r}=function(){let e=(0,_.TA)(),{loaded:r,preferences:n}=R((0,l.Rs)(f.JuA,{targetOrgId:null,targetUserId:e}));return{loaded:r,preferences:n}}(),{loaded:n,preferences:c,codegenEnabled:h,pinnedPluginsEnabled:v}=function(){let e=(0,E.yN)({migrationGroup:y.L.GROUP_6,component:"useLGOrgPluginPreferences",attribute:"targetOrgId",legacy:(e,r)=>r?.id??null,migrated:e=>e?.key.type===g.OL.ORG?e.key.parentId??null:null});return R((0,l.Rs)(f.JuA,{targetOrgId:e,targetUserId:null}))}(),T=(0,a.wA)(),I=(0,s.U)(),S=(0,b.ks)(),w=(0,d._I)(),C=S&&!w;(0,i.useEffect)(()=>{r&&D(null)},[r]);let L=(0,i.useMemo)(()=>new A(r??N,c??null,{codegenEnabled:h,pinnedPluginsEnabled:v}),[r,c,h,v]),[P,D]=(0,i.useState)(null),M=(0,i.useMemo)(()=>{let e=new Map;for(let n of[...r?.pins??[],...c?.pins??[]])n.plugin&&e.set(n.pluginId,n.plugin);return e},[c?.pins,r?.pins]),k=(0,i.useMemo)(()=>P?.pinnedPluginIDs??L.pinnedPluginIDs,[L,P]),F=(0,E.b_)({migrationGroup:y.L.GROUP_6,component:"usePluginPreferences"})??null,x=(0,_.TA)(),U=(0,m.YN)(),B=(0,i.useMemo)(()=>k.map(e=>{let r=M.get(e);if(!r||!r.publishingStatus||r.publishingStatus!==g.KB.APPROVED_PUBLIC&&r.publishingStatus!==g.KB.ORG_PRIVATE)return null;let n=(0,m.mf)(r,F,x,null);return n&&(C||U(n))?n:null}).filter(o.Vq),[k,M,F,x,C,U]),V=e=>{D(e),O(e.serialize()).catch(()=>{D(null)})};return{pinnedPlugins:B,unpinPlugin(e){V(L.unpinPlugin(e)),I("Dev Handoff Unpin Plugin",{pluginID:e})},pinPlugin(e){T(p.b({[u.xb]:!0})),V(L.pinPlugin(e)),I("Dev Handoff Pin Plugin",{pluginID:e})},movePin(e,r){V(L.movePin(e,r)),I("Dev Handoff Moved Plugin",{pluginID:e})},localCodegenSettings:L.localCodegenSettings,setCodegenSettings(e){V(L.setCodegenSetting(e))},setCodegenSettingsLanguage(e){V(L.setCodegenSettingLanguage(e))},setCodegenSettingsUnit(e){V(L.setCodegenSettingUnit(e))},setCodegenSettingsCustomSettings(e,r){V(L.setCodegenSettingCustomSettings(e,r))},loaded:e&&n}}async function O(e){await c.Ay.post("/api/plugin_preferences/user",{preferences:e})}function R(e){if("loaded"!==e.status)return{loaded:!1,preferences:null,codegenEnabled:!1,pinnedPluginsEnabled:!1};let r=e.data.pluginPreferences,{codegenEnabled:n,pinnedPluginsEnabled:i}=r||{};return{loaded:!0,preferences:r?.preferences,codegenEnabled:n??!1,pinnedPluginsEnabled:i??!1}}h.qZ.CSS,g.h9.FIRST_PARTY,g.tK.PIXEL,g.Rc.INHERIT},710994:(e,r,n)=>{n.d(r,{F5:()=>o,Rs:()=>l,Z:()=>s,nx:()=>c});var i=n(447978),a=n(75603);function o(e,r){let n=!!(e.tokens&&e.tokens.length||e.inputValue&&e.inputValue.length);return e.tokens.some(e=>e.state===a.d.ERROR)&&(n=!1),e.inputValue&&e.inputValue.length&&r(e.inputValue).state===a.d.ERROR&&(n=!1),n}function s(e){let r=[];for(let n of e.tokens){let e="string"==typeof n.content?n.content:n.content.email;r.push(e.toLowerCase())}return e.inputValue&&r.push(e.inputValue.trim().toLowerCase()),r}function l(){return{inputValue:"",tokens:[],errorMessage:""}}function c(e=l(),r){return i.cL.matches(r)?l():i.hZ.matches(r)?{...r.payload}:i.Ox.matches(r)?{...e,tokens:e.tokens.concat(r.payload),inputValue:""}:i.pf.matches(r)?{...e,inputValue:r.payload}:i.g.matches(r)?{...e,errorMessage:r.payload}:e}},355323:(e,r,n)=>{n.d(r,{Nf:()=>v,Rn:()=>E,TY:()=>_,Yh:()=>y,c1:()=>b,fj:()=>m,jv:()=>g,pi:()=>h});var i=n(741419),a=n(157907),o=n(846451),s=n(831932),l=n(442313),c=n(790355),d=n(667323),u=n(747863),p=n(483372);function m(e={...p.Gf},r){return c.Ts.matches(r)?p.Gf:(d.p5.matches(r)&&r.payload.appModelChanges&&-1===(e={...e,...r.payload.appModelChanges,isInitialized:!0}).currentSelectedGradientStop.index&&(e.currentSelectedGradientStop={index:0,type:i.vRS.COLOR}),e)}let h="fullscreen-menu-dropdown";function _(e){return e?.type===h}let g="quick-actions-dropdown",f=Object.create(null);function E(e){let r=f[e];return r||(r=f[e]=`actionEnabled__${e}`),r}function y(e,r){return!!e[E(r)]}function b(e,r){let n="\u{1F310}";switch(r){case"set-tool-bend":return s.Ay.mac?"\u2318":"Ctrl";case"set-tool-vector-lasso":return"Q";case"stack-reorder-left":case"stack-counter-align-left":return"\u2190";case"stack-reorder-left-end":return"\u2325\u2190";case"stack-reorder-right":case"stack-counter-align-right":return"\u2192";case"stack-reorder-right-end":return"\u2325\u2192";case"stack-reorder-up":case"stack-counter-align-top":return"\u2191";case"stack-reorder-up-end":case"stack-reorder-down-end":return"\u2325\u2191";case"stack-reorder-down":case"stack-counter-align-bottom":return"\u2193";case"set-tool-default-desc-figjam":case"set-tool-default-desc-figma":return"V";case"set-tool-marker":return"M";case"set-tool-stamp":case"set-tool-code-component":return"E";case"set-tool-type":return"T";case"set-tool-connector-elbowed":return"X";case"toggle-publish":return s.Ay.mac?"\u23252":"Alt+2";case"toggle-inline-preview":case"toggle-inline-html-preview":return"\u21E7"+(0,l.t)("whiteboard.keyboard_shortcuts.key_label.space");case"toggle-sidebar":if(u.nt.ui3.getValue())switch((0,o.v7)()){case i.aTn.US_QWERTY:case i.aTn.UNKNOWN:case i.aTn.DVORAK:return s.Ay.mac?"\u21E7\\":"Shift+\\"}break;case"set-tool-sites-responsive-set":return"W";case"deselect-all":return"\u238B";case"multi-edit-text":return"Enter";case"page-next":if((0,a.k)().ce_mac_page_shortcuts&&s.Ay.mac)return n+"\u2193";break;case"page-previous":if((0,a.k)().ce_mac_page_shortcuts&&s.Ay.mac)return n+"\u2191"}if(e[r]){let n=e[r];if(n&&n.length>=1)return n[0].text}return""}function v(e){return e&&e.currentPage?e.currentPage:"0:1"}},262032:(e,r,n)=>{n.d(r,{K3:()=>p,YI:()=>u,bp:()=>c,sp:()=>m,y2:()=>d});var i=n(445777),a=n(952423),o=n(790355),s=n(667323),l=n(954464);function c(e=Object.create(null),r){if(o.Ts.matches(r)||l.a.matches(r))return Object.create(null);if(s.p5.matches(r)&&r.payload.selection){let{add:n,remove:a,replace:o}=r.payload.selection;if((0,i.KF)(!((n||a)&&o),"We expect either an add or remove OR a replace."),o)return o;let s=Object.assign(Object.create(null),e,n);for(let e in a)delete s[e];return s}return e}function d(e,r,n){for(let i in r){let r=e.get(i);r&&(0,a.hV)(r,n)}}function u(e,r,n){for(let i in r){let r=e.get(i);r&&n(r)}}function p(e,r){return!!e[r]}function m(e,r,n){return!!function(e,r,n){if(r[n])return e.get(n)||null;let i=null;return(0,a.Si)(e,n,e=>{if(!i&&r[e.guid]&&(i=e),i)return"stop"}),i}(e,r,n)}},779859:(e,r,n)=>{n.d(r,{A:()=>s});var i=n(8374),a=n(935160),o=n(312278);function s(e={},r){if(a.D.matches(r)){let n={...e};for(let i of r.payload)n[i.file_key]={...e[i.file_key],...i};return n}return e}(0,i.nF)(async(e,{fileKey:r})=>{let n=e.getState(),i=n.currentUserOrgId,s=n.currentTeamId;if(r in n.recentCustomTemplates||!i&&!s)return;let l=await o.q.getRecents({fileKeys:r,...i?{orgId:i}:s?{teamId:s}:{}});l&&l.data.meta.templates.length>0&&e.dispatch(a.D([l.data.meta.templates[0]]))})},31820:(e,r,n)=>{n.d(r,{pw:()=>p,q5:()=>u,y2:()=>m});var i=n(157907),a=n(171659),o=n(790355),s=n(132061);let l={[s.P.VIEW_MODE]:"view-bar-view-mode-option",[s.P.SORT_MODE]:"view-bar-sort-options"};function c(e){let r=a.x4&&a.x4.getItem(e)||"{}";try{return JSON.parse(r)}catch(e){return{}}}function d(e,r){if(a.x4)try{let n=JSON.stringify(r);a.x4.setItem(e,n)}catch(e){}return r}function u(e={},r){if(o.Qv.matches(r)&&!(0,i.k)().file_browser_ia_overhaul_remove_list_view)return c(l[s.P.VIEW_MODE]);if(o.uV.matches(r)){let n={...e,[r.payload.viewId]:r.payload.viewMode};return d(l[s.P.VIEW_MODE],n)}return e}function p(e={},r){if(o.Qv.matches(r))return c(l[s.P.SORT_MODE]);if(o.ZR.matches(r)){let n={...e,[r.payload.viewId]:r.payload.sortMode};return d(l[s.P.SORT_MODE],n)}return e}function m(e,r,n){return r[e]??n}},929290:(e,r,n)=>{var i=n(878028),a=n(972813),o=n(757033),s=n(582248);let l=i.z.object({id:i.z.string(),name:i.z.string().nullable(),creatorId:i.z.string(),teamId:i.z.string(),baseColors:i.z.array(i.z.string()),uuid:i.z.string().uuid(),isTeamDefault:i.z.boolean()});new class{constructor(){this.ColorPaletteSchemaValidator=(0,a.YV)("ColorPaletteSchemaValidator",(0,s.DB)(l),null)}createColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:r})=>await r.post("/api/color_palettes",a.td.toAPIParameters(e)))}updateColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:r})=>await r.put(`/api/color_palettes/${e.uuid}`,a.td.toAPIParameters(e)))}async deleteColorPalette(e){await o.Ay.del(`/api/color_palettes/${e}`)}setUserColorPaletteOverrideForFile(e,r){return o.Ay.post(`/api/files/${e}/color_palette`,a.td.toAPIParameters({colorPaletteUuid:r}))}async setTeamDefaultPalette(e,r){await o.Ay.post(`/api/teams/${e}/default_color_palette`,a.td.toAPIParameters({colorPaletteUuid:r}))}async clearTeamDefaultPalette(e){await o.Ay.del(`/api/teams/${e}/default_color_palette`)}}},579456:(e,r,n)=>{n.d(r,{U:()=>o});var i=n(972813),a=(e=>(e.VIEW_OR_PENDING="view_or_pending",e.VIEW_PROTOTYPE_OR_PENDING="view_prototype_or_pending",e))(a||{});let o=new class{constructor(){this.ContactsSchemaValidator=(0,i.vh)(),this.AtMentionsSchemaValidator=(0,i.vh)(),this.searchAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/at_mentions",i.td.toAPIParameters(e)))),this.getAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/at_mentions",i.td.toAPIParameters(e)))),this.ShareModalSchemaValidator=(0,i.vh)(),this.searchShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/share",i.td.toAPIParameters(e))),this.getShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/share",i.td.toAPIParameters(e))),this.FeedAtMentionsSchemaValidator=(0,i.vh)(),this.getFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_at_mentions",i.td.toAPIParameters(e)))),this.searchFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_at_mentions",i.td.toAPIParameters(e)))),this.FaceStampsMentionSchemaValidator=(0,i.vh)(),this.searchFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/face_stamps",i.td.toAPIParameters(e)))),this.getRecentFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/face_stamps",i.td.toAPIParameters(e)))),this.FeedPostCreatorsSchemaValidator=(0,i.vh)(),this.getFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_post_creators",i.td.toAPIParameters(e)))),this.searchFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_post_creators",i.td.toAPIParameters(e))))}getContacts(e){return this.ContactsSchemaValidator.validate(async({xr:r})=>await r.get("/api/contacts",i.td.toAPIParameters(e)))}}},842589:(e,r,n)=>{n.d(r,{Y:()=>o});var i=n(972813),a=n(757033);let o=new class{constructor(){this.GenerateImageTokenSchemaValidator=(0,i.vh)()}getGenerateImageToken(e){return this.GenerateImageTokenSchemaValidator.validate(async({xr:r})=>await r.get(`/api/feed_posts/generate_image_token/${e.fileKey}`,i.td.toAPIParameters({org_id:e.orgId,token_version:e.tokenVersion})))}markFeedViewed(e){a.Ay.post(`/api/feed_posts/${e.publicUuid}/mark_viewed`)}vote(e){a.Ay.post(`/api/feed_posts/${e.publicUuid}/vote`,{vote_option:e.voteOption})}}},631405:(e,r,n)=>{n.d(r,{If:()=>s});var i=n(878028),a=n(972813);let o=i.z.object({save_location:i.z.string(),folder_name:i.z.string().optional(),org_id:i.z.string().optional()}),s=(0,a.YV)("ClaimTryFileSchemaValidator",o,null,!0);new class{claimTryFile(e){return s.validate(async({xr:r})=>await r.put(`/api/file/claim/${e.fileKey}`))}}},223291:(e,r,n)=>{n.d(r,{Gh:()=>g});var i=n(320454),a=n(157907),o=n(878028),s=n(6819),l=n(972813),c=n(757033),d=n(895927),u=n(747863),p=n(834111),m=n(53818);let h=o.z.object({userPromptRaw:o.z.string(),jsx:o.z.string().optional(),theme:o.z.record(o.z.any()).optional(),trace:o.z.any().optional(),layoutJsx:o.z.string().optional(),v3Components:o.z.record(o.z.string()).optional(),userPrompt:o.z.string().optional(),userPromptFull:o.z.string().optional(),systemPrompt:o.z.string().optional()}),_=o.z.object({prompt_version:o.z.string().optional(),eval_results:o.z.array(h)});o.z.union([o.z.object({status:o.z.literal("pending")}),o.z.object({status:o.z.literal("failed")}),_.extend({status:o.z.literal("success")})]);let g=new class{constructor(){this.FirstDraftKitStatusSchemaValidator=(0,l.vh)(),this.FirstDraftPublishStatusSchemaValidator=(0,l.vh)(),this.FirstDraftAllKitsSchemaValidator=(0,l.vh)(),this.FirstDraftMatchGroupSchemaValidator=(0,l.vh)(),this.FirstDraftKitKeyFromLibraryKeySchemaValidator=(0,l.vh)(),this.getFirstDraftKitKeyFromLibraryKey=(0,m.n)(({libraryKey:e})=>this.FirstDraftKitKeyFromLibraryKeySchemaValidator.validate(async({xr:r})=>await r.get("/api/first_draft/kit_key_from_library_key",l.td.toAPIParameters({file_key:(0,p.U2)(s.D?.getState().selectedView),library_key:e}),{headers:this.buildHeaders()}))),this.FirstDraftMatchPresetModesSchemaValidator=(0,l.vh)(),this.FirstDraftPublishLocalKitSchemaValidator=(0,l.vh)(),this.FirstDraftUpdataMetadataSchemaValidator=(0,l.vh)(),this.FirstDraftGenerateThemeV5SchemaValidator=(0,l.vh)(),this.FirstDraftAllEvalSetsSchemaValidator=(0,l.vh)(),this.FirstDraftRunEvalsSchemaValidator=(0,l.vh)(),this.FirstDraftEvalStatusSchemaValidator=(0,l.vh)(),this.FirstDraftGetRetrievedExamplesSchemaValidator=(0,l.vh)()}buildHeaders(){let e={...c.Ay.defaults.headers};return u.nt.aiFeaturesUseBedrockLlama.getValue()&&(e[i.H.CHOSEN_LLM_PROVIDER]="amazon-bedrock"),e}getFirstDraftKitStatus(){let e=(0,p.U2)(s.D?.getState().selectedView);return this.FirstDraftKitStatusSchemaValidator.validate(async({xr:r})=>await r.get(`/api/first_draft/kit_status/${e}`,null,{headers:this.buildHeaders()}))}postFirstDraftPublishStatus({productComponentKeyToVersion:e,groupedComponentKeyToVersion:r,exampleKeyToVersion:n,variableSetKeyToVersion:i,publishType:o,kitKey:l}){let c=(0,p.U2)(s.D?.getState().selectedView);return this.FirstDraftPublishStatusSchemaValidator.validate(async({xr:s})=>await s.post("/api/first_draft/kit_status",{product_components:e,grouped_components:r,examples:n,variable_sets:i,is_local:o===d.tf.LOCAL_GENERATION,kit_key:l,type_info_version:(0,a.k)().first_draft_direct_gen?d.Rd:d.Q6,theme_info_version:d.$5,file_key:c},{headers:this.buildHeaders()}))}getFirstDraftAllKits(){let e=(0,p.U2)(s.D?.getState().selectedView),r=s.D?.getState().currentUserOrgId,n=s.D?.getState().currentTeamId,i={file_key:e};return(0,a.k)().first_draft_show_direct_gen_kits&&(i={...i,org_id:r,team_id:n}),this.FirstDraftAllKitsSchemaValidator.validate(async({xr:e})=>await e.get("/api/first_draft/all_kits",l.td.toAPIParameters(i),{headers:this.buildHeaders()}))}getFirstDraftMatchGroup(e){let r=(0,p.U2)(s.D?.getState().selectedView);return this.FirstDraftMatchGroupSchemaValidator.validate(async({xr:n})=>await n.get("/api/first_draft/match_group",l.td.toAPIParameters({file_key:r,...e}),{headers:this.buildHeaders()}))}postFirstDraftMatchPresetModes(e){let r=(0,p.U2)(s.D?.getState().selectedView);return this.FirstDraftMatchPresetModesSchemaValidator.validate(async({xr:n})=>await n.post("/api/first_draft/match_preset_modes",{kit_key:e.kit_key,is_local:e.is_local,user_prompt:e.user_prompt,file_key:r},{headers:this.buildHeaders()}))}postFirstDraftPublishLocalKit({fileKey:e,publishMetadata:r}){return this.FirstDraftPublishLocalKitSchemaValidator.validate(async({xr:n})=>await n.post(`/api/first_draft/publish_local_kit/${e}`,{publish_metadata:r,file_key:e},{headers:this.buildHeaders()}))}postFirstDraftUpdateMetadata({fileKey:e,publishMetadata:r}){return this.FirstDraftUpdataMetadataSchemaValidator.validate(async({xr:n})=>await n.post(`/api/first_draft/update_metadata/${e}`,{publish_metadata:r,file_key:e},{headers:this.buildHeaders()}))}postFirstDraftGenerateThemeV5({userPrompt:e,isLocal:r,kitKey:n}){let i=(0,p.U2)(s.D?.getState().selectedView);return this.FirstDraftGenerateThemeV5SchemaValidator.validate(async({xr:a})=>await a.post("/api/first_draft/generate_theme",{user_prompt:e,is_local:r,kit_key:n,file_key:i},{headers:this.buildHeaders()}))}getFirstDraftAllEvalSets(){return this.FirstDraftAllEvalSetsSchemaValidator.validate(async({xr:e})=>await e.get("/api/first_draft/all_eval_sets",null,{headers:this.buildHeaders()}))}postFirstDraftRunEvals({model:e="gpt-4-turbo-2024-04-09",selectedEval:r,isLocal:n,kitKey:i,evalPrompts:a}){let o={model:e,is_local:n,kit_key:i};return a?o.eval_prompts=a:o.eval_set_id=r,this.FirstDraftRunEvalsSchemaValidator.validate(async({xr:e})=>await e.post("/api/first_draft/run_evals",o,{headers:this.buildHeaders()}))}getFirstDraftsEvalStatus({s3Key:e}){return this.FirstDraftEvalStatusSchemaValidator.validate(async({xr:r})=>await r.post("/api/first_draft/eval_status",{s3_key:e},{headers:this.buildHeaders()}))}getFirstDraftRetrievedExamples({kitKey:e,isLocal:r,prompt:n}){return this.FirstDraftGetRetrievedExamplesSchemaValidator.validate(async({xr:i})=>await i.post("/api/first_draft/get_retrieved_examples",{kit_key:e,is_local:r,prompt:n},{headers:this.buildHeaders()}))}}},215858:(e,r,n)=>{n.d(r,{H:()=>a});var i=n(972813);let a=new class{constructor(){this.TemplatesSchemaValidator=(0,i.vh)(),this.StartingPointsTemplatesSchemaValidator=(0,i.vh)(),this.VersionsSchemaValidator=(0,i.vh)(),this.StatusSchemaValidator=(0,i.vh)(),this.ProfileSchemaValidator=(0,i.vh)(),this.LibrariesSchemaValidator=(0,i.vh)(),this.PublishHubFileSchemaValidator=(0,i.vh)(),this.UpdateHubFileSchemeValidator=(0,i.vh)(),this.HubFileMultiImageUploadSchemaValidator=(0,i.vh)()}getTemplates(e){return this.TemplatesSchemaValidator.validate(async({xr:r})=>await r.get("/api/hub_files/templates",{type:e.type}))}getStartingPointsTemplates(){return this.StartingPointsTemplatesSchemaValidator.validate(async({xr:e})=>await e.get("/api/hub_files/templates",{type:"starting_points"}))}getVersions(e){return this.VersionsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/hub_files/${e.id}/versions`))}getStatuses(e){return this.StatusSchemaValidator.validate(async({xr:r})=>await r.get(`/api/hub_files/${e.id}/status`))}getProfile(e){return this.ProfileSchemaValidator.validate(async({xr:r})=>await r.get(`/api/hub_files/profile/${e.profileId}`))}getLibraries(e){return this.LibrariesSchemaValidator.validate(async({xr:r})=>await r.get("/api/hub_files/libraries",{library_ids:e.libraryIds.join(",")}))}likeHubFile(e){return this.VersionsSchemaValidator.validate(async({xr:r})=>await r.post(`/api/hub_files/${e.id}/like`))}unlikeHubFile(e){return this.VersionsSchemaValidator.validate(async({xr:r})=>await r.del(`/api/hub_files/${e.id}/like`))}publishHubFile(e){return this.PublishHubFileSchemaValidator.validate(({xr:r})=>r.post("/api/hub_files",e))}updateHubFile(e,r){return this.UpdateHubFileSchemeValidator.validate(({xr:n})=>n.put(`/api/hub_files/${e}`,r))}setupMultiImageUploadForHubFile(e){return this.HubFileMultiImageUploadSchemaValidator.validate(({xr:r})=>r.post("/api/hub_files/upload",e))}}},314693:(e,r,n)=>{n.d(r,{G:()=>l,h:()=>s});var i=n(878028),a=n(972813),o=n(494955),s=(e=>(e.DEV_MODE_BETA_SUGGESTED_UPGRADES="dev_mode_beta_suggested_upgrades",e.MEMBERS_TAB="members_tab",e))(s||{});let l=new class{constructor(){this.GuestResourcesSchemaValidator=(0,a.vh)(),this.OrgUserSchemaValidator=(0,a.YV)("OrgUserSchemaValidator",o.WU,null,!1),this.UpdateOrgUsersSchemaValidator=(0,a.YV)("UpdateOrgUsersSchemaValidator",i.z.array(o.WU),null,!1),this.CreateStarterTeamSchemaValidator=(0,a.vh)(),this.requestUpgradeSchemaValidator=(0,a.vh)()}getGuestResources(e){return this.GuestResourcesSchemaValidator.validate(async({xr:r})=>await r.get(`/api/org_user/${e.orgUserId}/guest_resources`))}updateOrgUser(e){let{id:r,changes:n}=e;return this.OrgUserSchemaValidator.validate(({xr:e})=>e.put(`/api/org_users/${r}`,a.td.toAPIParameters(n)))}updateOrgUsers(e){let{orgId:r,...n}=e;return this.UpdateOrgUsersSchemaValidator.validate(({xr:r})=>r.put(`/api/orgs/${e.orgId}/org_users`,a.td.toAPIParameters(n)))}createStarterTeam(){return this.CreateStarterTeamSchemaValidator.validate(({xr:e})=>e.post("/api/org_user/create_starter_team"))}postOrgUserFlags(e){let{orgUserId:r,flags:n}=e;return a._5.validate(({xr:e})=>e.post(`/api/org_users/${r}/flags`,{flags:n}))}requestOrgAccountTypeRequest(e){return this.requestUpgradeSchemaValidator.validate(async({xr:r})=>await r.post(`/api/orgs/${e.org_id}/org_users/request_upgrade`,e))}getMemberCSVExport(e){return a._5.validate(({xr:r})=>r.post(`/api/orgs/${e.orgId}/export_members`))}}},43482:(e,r,n)=>{n.d(r,{Eh:()=>f});var i,a=n(878028),o=n(972813),s=n(757033),l=n(997894),c=n(346801),d=n(618216),u=n(347184),p=n(940513),m=n(494955);(e=>{e.isOrgInvite=function(e){return e.type===m.Wd.ORG_INVITE},e.isOrgUser=function(e){return e.type===m.Wd.ORG_USER},e.isIdpUser=function(e){return e.type===m.Wd.IDP_USER}})(i||(i={}));let h=m.Ru.pick({id:!0,user:!0,type:!0}),_=a.z.discriminatedUnion("type",[m.WU,d.S,p.n]),g=a.z.object({users:a.z.array(a.z.union([_,h])).optional(),cursor:a.Ip.ignore(),designEditorCutoff:a.Ip.ignore().optional(),whiteboardEditorCutoff:a.Ip.ignore().optional(),devModeEditorCutoff:a.Ip.ignore().optional(),totalUserCount:a.z.number()}),f=new class{constructor(){this.IdpUsersSchemaValidator=(0,o.vh)(),this.LicenseGroupsSchemaValidator=(0,o.vh)(),this.BillingDataSchemaValidator=(0,o.YV)("BillingDataSchemaValidator",u.pd.nullable(),null),this.UpdateOrgSchemaValidator=(0,o.vh)(),this.TeamsSchemaValidator=(0,o.vh)(),this.TeamSchemaValidator=(0,o.vh)(),this.EligibleUpgradesFigjamSchemaValidator=(0,o.vh)(),this.OrgNameSchemaValidator=(0,o.vh)(),this.DomainsSchemaValidator=(0,o.vh)(),this.AdminsSchemaValidator=(0,o.YV)("AdminsSchemaValidator",e=>e.array(m.WU),null,!1),this.OrgUsersPaginatedSchemaValidator=(0,o.YV)("OrgUsersPaginatedSchemaValidator",g,null,!1),this.OrgUsersPaginatedSchemaValidatorPassthrough=(0,o.vh)(),this.UserSchemaValidator=(0,o.YV)("UserSchemaValidator",m.WU,null,!1),this.OauthConnectionsSchemaValidator=(0,o.vh)(),this.ShowVatGstSchemaValidator=(0,o.vh)(),this.LicenseGroupsMembersCountsSchemaValidator=(0,o.vh)(),this.WorkspaceTeamsCountsSchemaValidator=(0,o.vh)(),this.OrgUsersCountSchemaValidator=(0,o.vh)(),this.OrgUsersFilterCountsSchemaValidator=(0,o.vh)(),this.OrgTeamsFilterCountsSchemaValidator=(0,o.vh)(),this.OrgAdminsSchemaValidator=(0,o.vh)(),this.OrgAdminsQuery=l.M4.Query({fetch:async({orgId:e})=>(await this.getOrgAdmins({orgId:e})).data.meta}),this.OrgTeamsCountSchemaValidator=(0,o.vh)(),this.SetDomainCaptureSchemaValidator=(0,o.vh)(),this.EligibleUpgradesSchemaValidator=(0,o.YV)("EligibleUpgradesSchemaValidator",e=>e.object({eligible_teams:e.array(c._),eligible_team_users:e.array(c.P)}),null,!1)}getIdpUsers(e){return this.IdpUsersSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/idp_users`))}getLicenseGroups(e){return this.LicenseGroupsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.currentOrgId}/license_groups`))}getBillingData(e){return this.BillingDataSchemaValidator.validate(async({xr:r})=>{let n=await r.get(`/api/orgs/${e.orgId}/billing_data`);return n.data.meta?n:{...n,data:{...n.data,meta:null}}})}updateOrgPaymentMethod(e){return this.BillingDataSchemaValidator.validate(async({xr:r})=>{let n=await r.put(`/api/orgs/${e.orgId}/billing_data`,e.paymentMethod);return n.data.meta?n:{...n,data:{...n.data,meta:null}}})}changeShippingAddress(e){return s.Ay.put(`/api/orgs/${e.orgId}`,{shipping_address:e.shippingAddress})}updateOrgRenewalCounts(e){return this.UpdateOrgSchemaValidator.validate(async({xr:r})=>await r.put(`/api/orgs/${e.orgId}/renewal_counts`,{renewal_seats:e.unassignedSeatCounts}))}getTeams(e){return this.TeamsSchemaValidator.validate(async({xr:r})=>{let{orgId:n,...i}=e;return await r.get(`/api/orgs/${e.orgId}/teams`,o.td.toAPIParameters(i))})}getTeam(e){return this.TeamSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/teams/${e.teamId}`))}getEligibleUpgradesFigjam(){return this.EligibleUpgradesFigjamSchemaValidator.validate(async({xr:e})=>await e.get("/api/orgs/eligible_upgrades_figjam"))}getOrgName(e){return this.OrgNameSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_name`))}getDomains(e){return this.DomainsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.currentOrgId}/domains`))}addDomainUsers(e){return s.Ay.post(`/api/orgs/${e.currentOrgId}/add_domain_users`,{user_ids:e.userIds})}getAdmins(e){return this.AdminsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/admins`,o.td.toAPIParameters({include_license_admins:e.includeLicenseAdmins})))}getOrgUsersPaginatedV2(e){let{orgId:r,after:n,minimalFields:i,pageSize:a,sort:s,filter:l,...c}=e;return this.OrgUsersPaginatedSchemaValidatorPassthrough.validate(async({xr:e})=>await e.get(`/api/v2/orgs/${r}/org_users`,o.td.toAPIParameters({...c,...l||{},...s||{},minimalFields:i||void 0,pageSize:a||void 0,after:n?JSON.stringify(n):void 0})))}getUser(e){return this.UserSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/user/${e.userId}`))}getOauthConnections(e){return this.OauthConnectionsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/oauth_connections`))}getShowVatGst(e){return this.ShowVatGstSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/show_vat_gst`))}getLicenseGroupsMembersCounts(e){return this.LicenseGroupsMembersCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/license_groups/members/counts`))}getWorkspaceTeamsCounts(e){return this.WorkspaceTeamsCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/workspaces/teams/counts`))}getOrgUsersCount(e){return this.OrgUsersCountSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_users/count`))}getOrgUsersFilterCounts(e){return""===e.searchQuery&&delete e.searchQuery,this.OrgUsersFilterCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_users/filter_counts`,o.td.toAPIParameters({searchQuery:e.searchQuery,product:e.product,licenseGroupId:e.licenseGroupId,workspaceId:e.workspaceId,permission:e.permission,role:e.role,seatType:e.seatType})))}getOrgTeamsFilterCounts(e){let{orgId:r,searchQuery:n,orgAccess:i,teamsWithoutOwners:a,teamsMemberOf:o,workspaceId:s,sortBy:l,sortOrder:c}=e;return this.OrgTeamsFilterCountsSchemaValidator.validate(async({xr:e})=>{let d={search_query:n,org_access:i||void 0,teams_without_owners:a?String(a):void 0,teams_member_of:void 0!==o?JSON.stringify(o):void 0,workspace_id:s||void 0,sort_by:l,order_by:c};return await e.get(`/api/orgs/${r}/team_counts`,d)})}getOrgAdmins(e){return this.OrgAdminsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_admins`))}apiAutogenControls(e){let{orgId:r,autogen_password_controls:n}=e;return s.Ay.put(`/api/orgs/${r}`,{autogen_password_controls:n})}delWorkspaces(e){return s.Ay.del(`/api/orgs/${e.orgId}/workspaces`,{workspace_ids:e.workspaceIds})}validateTrial(e){return s.Ay.post(`/api/orgs/${e.orgId}/validate_trial`,{billing_trial_id:e.billingTrialId})}selfAssignWorkspace(e){return s.Ay.post(`/api/orgs/${e.orgId}/self_assign_workspace`,{workspace_id:e.workspaceId})}postDevModeOptInTermsAccepted(e){return s.Ay.post(`/api/orgs/${e.orgId}/dev_mode_terms_accepted`)}putToggleSlidesDisabled(e){return s.Ay.put(`/api/orgs/${e.orgId}/toggle_slides_disabled`,{slides_disabled:e.slidesDisabled})}putToggleSitesPublishingDisabled(e){return s.Ay.put(`/api/orgs/${e.orgId}/toggle_sites_publishing_disabled`,{sites_publishing_disabled:e.sitesPublishingDisabled})}updateAiDataSharing(e){return s.Ay.put(`/api/orgs/${e.orgId}/ai_data_sharing`,{enabled:e.enabled})}getOrgTeamsCount(e){return this.OrgTeamsCountSchemaValidator.validate(({xr:r})=>r.get(`/api/orgs/${e.orgId}/teams_count`))}setDomainCapture(e){return this.SetDomainCaptureSchemaValidator.validate(({xr:r})=>r.put(`/api/orgs/${e.org_id}/domain_capture`,{enable:!0}))}getEligibleUpgrades(){return this.EligibleUpgradesSchemaValidator.validate(async({xr:e})=>await e.get("/api/orgs/eligible_upgrade_data"))}}},903459:(e,r,n)=>{n.d(r,{s:()=>o});var i=n(972813),a=n(757033);let o=new class{updateOrgPreferences(e,r){let{preferences:n,...i}=r,o={preferences:n};return e.bigma_enabled?(o.auto_run_plugin_id=i.auto_run_plugin_id,o.auto_run_enabled=i.auto_run_enabled,o.codegen_enabled=i.codegen_enabled,o.pinned_plugins_enabled=i.pinned_plugins_enabled):!1===i.pinned_plugins_enabled&&(o.pinned_plugins_enabled=!1),a.Ay.post(`/api/plugin_preferences/org/${e.id}`,o)}updateUserAutoRunPluginId(e,r){return a.Ay.put("/api/plugin_preferences/user",i.td.toAPIParameters({autoRunBehavior:r,autoRunPluginId:e}))}}},965344:(e,r,n)=>{n.d(r,{a:()=>g});var i=n(992277),a=n(878028),o=n(502255),s=n(972813),l=n(757033),c=n(753433),d=n(310519),u=n(817990),p=n(997894),m=n(677251),h=(e=>(e.HOMEPAGE="homepage",e.CATEGORY="category",e.PROFILE="profile",e.SUGGESTED_EXTENSIONS="suggested_extensions",e.RESOURCE_HUB="resource_hub",e.COOPER_TEMPLATE_PICKER="cooper_template_picker",e.SITES_TEMPLATE_PICKER="sites_template_picker",e))(h||{});let _=a.z.object({resource:u.Q3.optional(),private_plugin:a.Ip.ignore(m.Lz).optional()}),g=new class{constructor(){this.ResourceWithContentIDSchemaValidator=(0,s.YV)("ResourceWithContentIDSchemaValidator",_,"cmty_rdp_resource_platform",!0),this.CommunityResourcesSchemaValidator=(0,s.Rq)("CommunityResourcesSchemaValidator",u.Y9,"cmty_feed_resource_platform",!0),this.ResourcesPaginatedQuery=p.M4.PaginatedQuery({fetch:async(e,{pageParam:r})=>{try{let n=await this.CommunityResourcesSchemaValidator.validate(async({xr:n})=>{let i=s.td.toAPIParameters({sort_by:(0,c.H)(),...e,resourceType:e.resourceType&&e.resourceType.join(","),tags:e.tags&&e.tags.join(","),cursor:r});return await n.getPaginated("/api/resources",i)});return{data:n.data.meta,nextPage:n.data.pagination.nextPage,prevPage:n.data.pagination.prevPage}}catch(e){throw(0,o.$D)(i.e.COMMUNITY,e),e}}}),this.AdminResourceRecommendationsSchemaValidator=(0,s.YV)("CommunityAdminResourceRecommendationsSchema",u._s,null),this.CommunityHomeShelfContentSchemaValidator=(0,s.YV)("CommunityHomeShelfContentSchema",u.Bn,null),this.getHomeShelfContent=p.M4.Query({fetch:({seenResourceIds:e})=>this.CommunityHomeShelfContentSchemaValidator.validate(async({xr:r})=>{try{return await r.get("/api/resources/home_shelf",s.td.toAPIParameters({seenResourceIds:e?.join(",")}),{timeout:1e4})}catch(e){throw(0,o.$D)(i.e.COMMUNITY,e),e}})})}getResourceWithContentID(e){return this.ResourceWithContentIDSchemaValidator.validate(async({xr:r})=>await r.get(`/api/resources/${d.S[e.resourceType]}/${e.contentId}`))}likeResource(e){return l.Ay.post(`/api/resource/${e.resourceId}/like`)}unlikeResource(e){return l.Ay.del(`/api/resource/${e.resourceId}/like`)}saveResource(e){return l.Ay.post(`/api/resource/${e.resource.id}/save`,{profile_id:e.profileId,org_id:e.orgId})}unsaveResource(e){return l.Ay.del(`/api/resource/${e.resource.id}/save`,{profile_id:e.profileId,org_id:e.orgId})}getAdminResourceRecommendations(){return this.AdminResourceRecommendationsSchemaValidator.validate(async({xr:e})=>await e.get("/api/admin/resource/recommendations"))}}},962700:(e,r,n)=>{n.d(r,{G:()=>a});var i=n(972813);let a=new class{constructor(){this.FileUsersSchemaValidator=(0,i.vh)(),this.TeamSchemaValidator=(0,i.vh)(),this.RolesSchemaValidator=(0,i.vh)()}getFileUsers(e){return this.FileUsersSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/file_users/${e.fileKey}`))}getTeam(e){return this.TeamSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/team/${e.teamId}`))}getRoles(e){return this.RolesSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/${e.resourceType}/${e.resourceId}`))}}},312278:(e,r,n)=>{n.d(r,{q:()=>o});var i=n(972813),a=n(757033);n(997894).M4.Query({fetch:async e=>await o.getNumTemplatesByTeam({teamId:e.teamId,editorType:e.editorType}).then(e=>e.data.meta.total)});let o=new class{constructor(){this.RecentsSchemaValidator=(0,i.vh)(),this.TeamBrowseFromSize10SchemaValidator=(0,i.vh)(),this.SearchPaginatedSchemaValidator=(0,i.vh)(),this.TeamTemplateLimitValidator=(0,i.vh)(),this.TeamTemplateCountValidator=(0,i.vh)(),this.UploadTemplateCoverImage=(0,i.vh)(),this.UpsertTemplateValidator=(0,i.vh)()}getRecents(e){return this.RecentsSchemaValidator.validate(async({xr:r})=>await r.get("/api/templates",{org_id:e.orgId,team_id:e.teamId,file_keys:e.fileKeys}))}getTeamBrowsePaginated(e){return this.TeamBrowseFromSize10SchemaValidator.validate(async({xr:r})=>await r.get(`/api/templates/${e.orgId}/team/${e.teamId}/browse`,i.td.toAPIParameters({from:e.from,size:e.size,templateType:e.templateType})))}getSearchPaginated(e){let{orgId:r,...n}=e;return this.SearchPaginatedSchemaValidator.validate(({xr:r})=>r.get(`/api/templates/${e.orgId}/search`,i.td.toAPIParameters(n)))}getFilteredTeamTemplates(e){let{orgId:r,...n}=e;return a.Ay.post(`/api/templates/${r}/browse`,n)}getTeamTemplateLimitReached(e){return this.TeamTemplateLimitValidator.validate(({xr:r})=>r.get(`/api/templates/${e.teamId}/limits`,i.td.toAPIParameters({editorType:e.editorType})))}getNumTemplatesByTeam(e){return this.TeamTemplateCountValidator.validate(({xr:r})=>r.get(`/api/templates/${e.teamId}/count`,i.td.toAPIParameters({editorType:e.editorType})))}uploadTemplateCoverImage(e){return this.UploadTemplateCoverImage.validate(({xr:r})=>r.post(`/api/templates/file/${e.fileKey}/upload`))}upsertTemplate(e){let{fileKey:r,payload:n,params:a}=e;return this.UpsertTemplateValidator.validate(({xr:e})=>e.post(`/api/templates/file/${r}`,n,i.td.toAPIParameters({params:a})))}}},593330:(e,r,n)=>{n.d(r,{J4:()=>a,vF:()=>i});var i=(e=>(e[e.INCLUDE=0]="INCLUDE",e[e.CHILDREN=1]="CHILDREN",e[e.OMIT=2]="OMIT",e))(i||{});function a(e){return e&&0===e.inclusion?e:void 0}},662653:(e,r,n)=>{n.d(r,{L:()=>S});var i=n(848318),a=n(716544),o=n(420235),s=n(776402),l=n(777611),c=n(731755),d=n(232096),u=n(596616),p=n(622876),m=n(157907),h=n(514375),_=n(17755),g=n(442313),f=n(775038),E=n(333505),y=n(235441),b=n(719244),v=n(376780),T=n(464012),I=n(781806);let S=(0,T.Ju)(function({open:e,onClose:r}){let[n,T]=(0,b.y)(),S=(0,o.X)(),w=(0,a.wA)(),A=(0,a.d4)(e=>e.screenreader.errorType),C=(0,y.lg)(),{enhancedContrast:N}=(0,p.GA)(),L=(0,i.useCallback)(()=>{C===v._Y.WHITEBOARD&&I.F2.focusCustomCanvasFocusElement(),r()},[r,C]),O=s.hS({open:e,onClose:L});return i.createElement(l.bL,{manager:O,width:"md"},i.createElement(c.vo,null,i.createElement(c.Y9,null,i.createElement(c.hE,null,(0,g.tx)("fullscreen.accessibility_settings.dialog_title"))),i.createElement(c.nB,null,i.createElement("div",{className:_.s.pb8.$},i.createElement(d.d,{disabled:"platform_error"===A,checked:n,onChange:(e,{source:r})=>{(0,h.f)(e?h.h.TOGGLE_DOM_ON_MENU:h.h.TOGGLE_DOM_OFF_MENU,{isMouseEvent:"mouse"===r}),T(e)},label:i.createElement(u.J,null,(0,g.tx)("fullscreen.accessibility_settings.enable_screenreader_label")),ref:S},"platform_error"===A?(0,g.t)("fullscreen.accessibility.platform_error"):(0,g.t)("fullscreen.accessibility_settings.enable_screenreader_description_figjam_beta"),"render_error"===A&&i.createElement("span",{role:"alert",className:_.s.block.mt8.$},i.createElement(f.E,{color:"danger"},(0,g.tx)("fullscreen.accessibility.dom_error")))),(0,m.k)().fpl_enhanced_contrast_toggle&&i.createElement(d.d,{checked:N,onChange:(e,{source:r})=>{(0,h.f)(e?h.h.TOGGLE_ENHANCED_CONTRAST_ON:h.h.TOGGLE_ENHANCED_CONTRAST_OFF,{isMouseEvent:"mouse"===r}),w(E.fK({enhancedContrast:e,userInitiated:!0}))},label:i.createElement(u.J,null,(0,g.tx)("fullscreen.accessibility_settings.enhanced_contrast_label")),ref:S},(0,g.t)("fullscreen.accessibility_settings.enhanced_contrast_description"))))))},"ACCESSIBILITY_SETTINGS",T.ZU.YES)},73464:(e,r,n)=>{n.d(r,{h:()=>l});var i=n(39773),a=n(481540),o=n(119310),s=n(438462);let l=(0,i.eU)(s.H.NOT_INITIALIZED),c=(0,o.bt)(e=>({state:e,fileKey:e.openFile?.key})),d=[s.H.ACTIVE_AFTER_IDLE,s.H.ACTIVE_FIRST_TIME];(0,i.eU)(null,(e,r,n)=>{let{state:i,fileKey:o}=e(c),u=e(l);if((u&&d.includes(u)?"start":"end")!=(n&&d.includes(n)?"start":"end")){let e="";switch(n){case s.H.ACTIVE_AFTER_IDLE:case s.H.ACTIVE_FIRST_TIME:e="active";break;case s.H.IDLE_DUE_TO_INACTIVITY:case s.H.IDLE_DUE_TO_TAB_SWITCH:e="inactive";break;default:e="non-initialized"}(0,a.ds)("active_time_spent_event",o,i,{currentState:e,activeState:n},{forwardToDatadog:!0,batchRequest:!1})}r(l,n)})},40962:(e,r,n)=>{n.d(r,{N:()=>l,Y:()=>c});var i=n(157907),a=n(39773),o=n(97912);let s="showFigmentDebugger";function l(e,r){try{if(!(0,i.k)().internal_only_debug_tools||!(0,i.k)().figment_debugger||null==e)return;a.zl.set(o.a4,{requestJsons:e,networkState:r})}catch(e){console.error("[Figment Debugger] Error tracking request")}}function c(){var e;let r=function(){try{if(null==localStorage)return!1;let e=localStorage.getItem(s);return"true"===e}catch(e){return!1}}();e=!r,localStorage.setItem(s,e?"true":"false"),a.zl.set(o.eE,!r)}},694104:(e,r,n)=>{var i=n(848318);n(397579),n(834996),i.createContext(null)},832876:(e,r,n)=>{n.d(r,{az:()=>ey,pw:()=>Z,Ro:()=>el,w7:()=>ed,CH:()=>eu,fZ:()=>Q,rE:()=>eb,z6:()=>ec,Sw:()=>W,Pq:()=>K});var i=n(848318),a=n(536384),o=n.n(a),s=n(782623),l=n(453822),c=n(166365),d=n(442313),u=n(775038),p=n(503024),m=n(39766);let h="avatar--avatar--fFibd",_="avatar--dim--UbqLc",g="avatar--avatarWithHandle--Z3934",f="avatar--avatarWithOutwardBorder--3JJ57",E="avatar--avatarWithInwardBorder--L469R",y="avatar--clickableAvatarWithHandle--d90vX";var b=n(321914),v=n(666729),T=n(741368),I=n(586295),S=n(197318),w=n(529093),A=n(31844),C=n(795123),N=n(391394),L=n(388456),O=n(900825),R=n(151530),P=n(303995),D=n(842644),M=n(964277),k=n(743990),F=n(690855),x=n(810288),U=n(488285),B=n(296555);let V=[b.A,v.A,T.A,I.A,S.A,w.A,A.A,C.A,N.A,L.A,O.A,R.A,P.A,D.A,M.A,k.A,F.A,x.A],G=["avatar--workspaceAvatarBlue--XbbpI","avatar--workspaceAvatarPurple--FOGSP","avatar--workspaceAvatarGreen--PWm5o","avatar--workspaceAvatarTeal--4j3FH"],H=[];for(let e=0;e<V.length*G.length;e+=1){let r=e%V.length,n=V[r],i=(e+Math.floor(e/V.length))%G.length,a=G[i];H.push({svgSrc:n,className:a})}function K(e){return e.startsWith("https://www.gravatar.com/avatar/")}function W(e){return e&&!K(e)?e:void 0}let z={CIRCLE:`${h} avatar--circle--ag36Q`,SQUARE:`${h} avatar--square--p4eL1`,ROUNDED_SQUARE:`${h} avatar--roundedSquare--cq522`};function $(e){return"number"==typeof e?{imgSize:e,fallbackSize:e}:e}class Y{constructor(e,r){this.lower=e,this.upper=r}contains(e){return e>=this.lower&&e<this.upper}}let j=new Y(65,91),q=new Y(97,123),X=new Y(48,58);class Z extends i.Component{render(){let e={display:"flex",justifyContent:"center",color:this.props.tint||(0,m.Xx)(this.props.color),backgroundColor:this.props.color||void 0,opacity:this.props.opacity},r=this.props.enabled||!0,{size:n,fontSize:a}=this.props;n&&(e.width=`${n}px`,e.height=`${n}px`,e.lineHeight=`${n}px`,e.fontSize=`${a??n/2}px`);let s=z[this.props.shape||"CIRCLE"];return i.createElement("span",{"data-testid":this.props.dataTestId,style:e,className:o()(s,this.props.className||"",{[_]:!r,[f]:"outward"===this.props.borderStyle,[E]:"inward"===this.props.borderStyle}),"aria-hidden":"true"},this.props.children)}}class J extends i.Component{render(){return i.createElement(Z,{dataTestId:"initial-avatar",...this.props},this.props.initial)}}function Q(e){let r={};if(e.size&&e.svgSizeRatio){let n=e.size*e.svgSizeRatio;r.width=`${n}px`,r.height=`${n}px`}if(!e.removeCustomFill){let n=(0,m.Xx)(e.color);r.fill=n}return i.createElement(Z,{...e},i.createElement("div",{style:r},i.createElement(c.B,{svg:e.svg,autosize:!0})))}class ee extends i.Component{render(){let{size:e}=this.props,r=e?`${e}px`:void 0,n=z[this.props.shape||"CIRCLE"],a=this.props.enabled||!0;return i.createElement(c.B,{className:`${n} ${this.props.className||""} ${a?"":_}`,style:this.props.style||{},svg:this.props.src,autosize:!0,width:r,height:r,dataTestId:"svg-avatar"})}}class et extends i.Component{constructor(e){super(e),this.state={loadError:!1}}render(){let e={},r=this.props.style||{};if(this.props.size){let n=this.state.loadError?$(this.props.size)?.fallbackSize:$(this.props.size)?.imgSize,i=`${n}px`;e.width=i,e.height=i,r.width=i,r.height=i}let n=this.props.enabled||!0,a=z[this.props.shape||"CIRCLE"],l=this.state.loadError||!this.props.imgUrl?this.props.children:i.createElement(s.oW,{"data-testid":"image-avatar",className:`${n?"":_}`,style:e,src:this.props.imgUrl,onError:()=>this.setState({loadError:!0}),alt:""});return i.createElement("div",{className:o()(a,this.props.className,{[_]:!n,[f]:"outward"===this.props.borderStyle,[E]:"inward"===this.props.borderStyle}),style:r},l)}}let er=[j,q,X],en={colors:m.us,getInitial:e=>e?e[0]:null,defaultFallbackAvatarSvg:U.A},ei=["fallback_text","handle","name","email"],ea=(e,r=en)=>class extends i.Component{constructor(){super(...arguments),this.computeFallbackInitial=()=>{let e=em((this.props.initializableEntityProperties?this.props.initializableEntityProperties:ei).map(e=>this.props.entity[e]));return e&&"string"==typeof e?r.getInitial(e):null},this.computeFallbackColor=()=>(0,m.$L)(this.props.entity.id,r.colors)}render(){let n=this.props.fallbackInitial||this.computeFallbackInitial(),a=this.computeFallbackColor()||null,o=this.props.entity.img_url||this.props.entity.imageURL||this.props.entity.imageUrl||this.props.entity.imgUrl||null;return i.createElement(e,{imgUrl:o,fallbackInitial:n,fallbackColor:this.props.defaultFallbackAvatarSvg&&!n?null:a,fallbackTintColor:this.props.defaultFallbackAvatarSvg?void 0:r.defaultFallbackTintColor,...this.props,defaultFallbackAvatarSvg:this.props.defaultFallbackAvatarSvg||r.defaultFallbackAvatarSvg})}};class eo extends i.Component{renderFallback(){let{size:e,fontSize:r,fallbackSvg:n,avatarSvg:a,svgSizeRatio:o}=this.props,s=$(e)?.fallbackSize;if(a)return i.createElement(Q,{size:s,fontSize:r,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape,svg:a,svgSizeRatio:o,opacity:this.props.opacity});if(n)return i.createElement(ee,{size:$(e)?.fallbackSize,src:n,shape:this.props.shape});if(this.props.hideFallbackInitial)return i.createElement(Z,{size:$(e)?.fallbackSize,fontSize:r,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape});let l=this.props.fallbackInitial;return l?i.createElement(J,{size:$(e)?.fallbackSize,fontSize:r,className:this.props.className,initial:l,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape,borderStyle:this.props.borderStyle}):this.props.defaultFallbackAvatarSvg?i.createElement(ee,{className:this.props.className,size:$(e)?.fallbackSize,src:this.props.defaultFallbackAvatarSvg,style:{fill:this.props.fallbackTintColor||void 0,background:this.props.fallbackColor||void 0},enabled:this.props.enabled,shape:this.props.shape}):i.createElement(Z,{size:$(e)?.fallbackSize,fontSize:r,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape})}render(){return!this.props.imgUrl||K(this.props.imgUrl)?this.renderFallback():i.createElement(et,{size:this.props.size||null,imgUrl:this.props.imgUrl,className:`${this.props.className||""}`,enabled:this.props.enabled,shape:this.props.shape,borderStyle:this.props.borderStyle},this.renderFallback())}}eo.displayName="Avatar";let es=ea(eo,{...en,getInitial:e=>{let r=e.charCodeAt(0);return er.some(e=>e.contains(r))?e[0]:null}}),el=es;function ec({entity:e,size:r=40,shape:n="SQUARE"}){if(e.imgUrl)return i.createElement(es,{shape:n,entity:e,size:r});let a=(0,m.sC)(e?.id,H);return i.createElement(ee,{src:a.svgSrc,size:r,shape:n,className:a.className})}let ed=ea(eo,{...en,defaultFallbackAvatarSvg:B.A,getInitial:e=>e.charCodeAt(0)===e.codePointAt(0)?e[0]:null});function eu(e){return i.createElement(ed,{shape:"SQUARE",...e})}class ep extends i.Component{render(){let e=this.props.size||0,r=Math.round(e/4)+1,n=Math.round(r/5);return i.createElement("span",{className:"avatar--avatarBellWrapper--sd6MY",style:e?{width:`${e}px`,height:`${e}px`}:void 0},this.props.showBell&&i.createElement("div",{className:"avatar--bell--Lk6s9",style:e?{width:`${r}px`,height:`${r}px`,top:`-${n}px`,right:`-${n}px`}:void 0}),this.props.children)}}ep.displayName="AvatarBellWrapper";let em=(e=[],r="?")=>e.find(e=>e)||r,eh=(e,r)=>class extends i.Component{constructor(){super(...arguments),this.onClick=e=>{this.props.onClick&&this.props.onClick(e,this.props.entity)}}render(){let n=this.props["data-tooltip-proxy-element-id"]||`avatar_${this.props.entity.id}_tooltip_proxy`;return i.createElement("div",{className:`${g} ${this.props.onClick?y:""} ${this.props.enabled?"avatar--disabledDimAvatarWithHandle--5l6cM":""} ${this.props.className||""}`,onClick:this.props.onClick?this.onClick:void 0,"data-tooltip-proxy-element-id":n,"data-onboarding-key":this.props["data-onboarding-key"]},i.createElement("div",{id:n,"data-tooltip-type":p.Ib.TEXT,"data-tooltip":this.props["data-tooltip"],"data-tooltip-offset-x":this.props["data-tooltip-offset-x"],"data-tooltip-offset-y":this.props["data-tooltip-offset-y"],"data-tooltip-max-width":this.props["data-tooltip-max-width"]},e&&i.createElement(e,{...this.props,className:void 0})),i.createElement(r,{...this.props}),this.props.children)}};var e_=(e=>(e.DEFAULT="default",e.HEADING_MEDIUM="heading_medium",e))(e_||{});let eg={default:void 0,heading_medium:"avatar--labelHeadingMedium--IeX2-"};class ef extends i.Component{render(){let{labelSize:e="default"}=this.props,r=eg[e],n=this.props.showTruncatedTextTooltip?i.createElement(u.E,{truncate:!0},this.props.text):i.createElement("span",{className:"avatar--handle--wlTXK"},this.props.text),a=this.props.showTruncatedTextTooltip?void 0:this.props.tooltipText??void 0;return i.createElement("div",{className:o()("avatar--info--vDGTn",r),title:a},i.createElement("div",{className:o()("avatar--handleRow--0K2-H",g,r,{[y]:this.props.onLabelClick}),onClick:this.props.onLabelClick},this.props.text.length>0&&n,this.props.showIsMe&&i.createElement("span",{className:o()("avatar--isMe--LeNkH",r)},(0,d.tx)("avatar.tooltip.you")),this.props.badge&&i.createElement(l.Ex,{...this.props.badge}),this.props.isScimUser&&i.createElement(l.Ex,{color:l.zE.DEFAULT,text:(0,d.t)("members_table.org_user_name_cell.scim_badge")})),this.props.email&&i.createElement("div",{className:this.props.onEmailClick?"avatar--emailHover--ekuTn":"",onClick:this.props.onEmailClick},i.createElement("div",{className:"avatar--email--G3FcZ"},this.props.email)))}}let eE=e=>class extends i.Component{render(){let r=[this.props.overrideHandle,this.props.entity.handle,this.props.entity.name];this.props.fallbackToEmail&&r.push(this.props.entity.email);let n=em(r,this.props.defaultText),a=`${n}${this.props.includeUserEmailAddress?`
${this.props.entity.email}`:""}`,{onEmailClick:o,onLabelClick:s,...l}=this.props;return i.createElement(e,{text:n,email:this.props.includeUserEmailAddress?this.props.entity.email:null,tooltipText:this.props.showTooltip?a:null,onEmailClick:o,onLabelClick:s,...l})}},ey=eh(es,eE(ef)),eb=eh(eu,eE(ef))},558253:(e,r,n)=>{n.d(r,{Id:()=>h});var i=n(848318),a=n(771186),o=n(166365),s=n(442313),l=n(511039),c=n(454916),d=n(832876),u=n(687467),p=n(754897);let m=(e,r={})=>function(n){let d=null==n.size?120:n.size,m=()=>{n.dispatch((0,l.X)({entity:n.entity,entityType:n.entityType,shape:r.editorShape?r.editorShape:void 0}))},h={width:`${d}px`,minWidth:`${d}px`,height:`${d}px`,minHeight:`${d}px`},_=n.avatarEditorState&&n.avatarEditorState.status===c.hv.UPLOADING&&n.entity===n.avatarEditorState.entity,g=r.className?r.className:u.n1,f=i.createElement(a.x,{isLoading:_,className:`${u.Lq} ${g}`},()=>i.createElement(e,{size:d,...n})),E=i.createElement("div",{className:`${g} ${n.overlayClass||""}`},i.createElement(o.B,{className:`${u.Lw} ${u.Kk} ${g} ${n.overlayClass||""}`,svg:n.icon||p.A}));return r.withButton?i.createElement("div",{className:`${u.iE} ${u.n1}`,style:h},f,E,i.createElement("div",{className:u.hc,onClick:m},(0,s.tx)("avatar_editor.edit"))):i.createElement("div",{className:`${u.iQ} ${g}`,onClick:m,style:h},f,E)};m(d.Ro);let h=m(d.Ro,{withButton:!0});m(d.CH,{editorShape:"SQUARE",className:u.Ew}),m(d.z6,{editorShape:"SQUARE",className:u.Ew})},150084:(e,r,n)=>{n.d(r,{f:()=>c});var i=n(848318),a=n(500276),o=n(77412),s=n(503024),l=n(916678);let c=i.forwardRef(function(e,r){let n=e.size;return i.createElement("div",{ref:r,className:`${l.z} ${e.className||""}`,"data-tooltip-type":e.hoverText?s.Ib.TEXT:void 0,"data-tooltip":e.hoverText,style:a.sx.if(e.size,{width:`${n}px`,height:`${n}px`,lineHeight:`${n}px`}).if(e.textColor,{color:(0,o.jk)(e.textColor)}).if(e.backgroundColor,{backgroundColor:(0,o.K)(e.backgroundColor)}).$},e.text)})},43398:(e,r,n)=>{n.d(r,{_:()=>o}),n(848318);var i=n(741419);n(629829),n(39773),n(536384),n(691191),n(463117),n(322627),n(831932),n(991371),n(145015),n(166365),n(442313);var a=n(207715);function o(){return(0,a.ut)(i.Ez5?.uiState().editorBannerHeight,0)}n(241917),n(921598),n(651705),n(600310)},651705:(e,r,n)=>{var i=(e=>(e[e.starterViewOnlySitesBanner=0]="starterViewOnlySitesBanner",e[e.TestThemeBanner=1]="TestThemeBanner",e[e.TestWarningBanner=2]="TestWarningBanner",e[e.TestOOMBanner=3]="TestOOMBanner",e[e.TestInfoBanner=4]="TestInfoBanner",e[e.StarterTeamOverFreeLimitAndLocked=5]="StarterTeamOverFreeLimitAndLocked",e[e.EduGracePeriodAccessRestricted=6]="EduGracePeriodAccessRestricted",e[e.EduGracePeriodShowReminder=7]="EduGracePeriodShowReminder",e[e.OrphanedOrgDraftsFile=8]="OrphanedOrgDraftsFile",e[e.TeamAbandonedDraftsFile=9]="TeamAbandonedDraftsFile",e[e.TeamAdminOpenInvoiceReminder=10]="TeamAdminOpenInvoiceReminder",e[e.PersonalProjectDeprecatedFile=11]="PersonalProjectDeprecatedFile",e[e.ProTeamPastDue=12]="ProTeamPastDue",e[e.ProTeamChargeFailed=13]="ProTeamChargeFailed",e[e.ProTeamNoMonthlySubEditorCountExceeded=14]="ProTeamNoMonthlySubEditorCountExceeded",e[e.ProTrialsExpiryBanner=15]="ProTrialsExpiryBanner",e[e.MultiplayerSessionUpgrade=16]="MultiplayerSessionUpgrade",e[e.AdminI18nLocalWarnBanner=17]="AdminI18nLocalWarnBanner",e[e.FigJamTryDraftsBanner=18]="FigJamTryDraftsBanner",e[e.FigJamTryClaimBanner=19]="FigJamTryClaimBanner",e[e.CommunityResourceCTANuxBanner=20]="CommunityResourceCTANuxBanner",e[e.communityM10nApprovalBanner=21]="communityM10nApprovalBanner",e[e.communityM10nFinishSetupBanner=22]="communityM10nFinishSetupBanner",e[e.communityM10nAdtlInfoNeededBanner=23]="communityM10nAdtlInfoNeededBanner",e[e.communityResourceInReviewBanner=24]="communityResourceInReviewBanner",e[e.CommunityResourceCreatorBanner=25]="CommunityResourceCreatorBanner",e[e.ExternalContentControlBanner=26]="ExternalContentControlBanner",e[e.MemoryWarningBanner=27]="MemoryWarningBanner",e[e.MemoryErrorBanner=28]="MemoryErrorBanner",e[e.MemorySafeBanner=29]="MemorySafeBanner",e[e.AdminUserDisposableDomainWarningBanner=30]="AdminUserDisposableDomainWarningBanner",e[e.FileIsTeamTemplate=31]="FileIsTeamTemplate",e[e.DowntimeBanner=32]="DowntimeBanner",e[e.FreemiumPreviewBanner=33]="FreemiumPreviewBanner",e[e.FileCreationFailureBanner=34]="FileCreationFailureBanner",e[e.DevModePaywallBanner=35]="DevModePaywallBanner",e[e.DevModeInTrialBanner=36]="DevModeInTrialBanner",e[e.devModeStarterTrialBanner=37]="devModeStarterTrialBanner",e[e.DesktopDownloadBanner=38]="DesktopDownloadBanner",e[e.BrowserDeprecationBanner=39]="BrowserDeprecationBanner",e[e.FragmentTextSearchQualityBanner=40]="FragmentTextSearchQualityBanner",e[e.Gen1DesignViewerBanner=41]="Gen1DesignViewerBanner",e[e.DesktopDeprecationBanner=42]="DesktopDeprecationBanner",e[e.UI3LoggedOutCta=43]="UI3LoggedOutCta",e[e.SeatBillingTermsReminder=44]="SeatBillingTermsReminder",e[e.CooperOldFileBanner=45]="CooperOldFileBanner",e[e.CommunityTagsUpdateNudgeBanner=46]="CommunityTagsUpdateNudgeBanner",e[e.InteropPagesBanner=47]="InteropPagesBanner",e[e.ForceClientReload=48]="ForceClientReload",e[e.SlidesTemplatePublishNudgeBanner=49]="SlidesTemplatePublishNudgeBanner",e[e.DevModeDemoFileUpsellBanner=50]="DevModeDemoFileUpsellBanner",e[e.SunsetUI2Banner=51]="SunsetUI2Banner",e))(i||{}),a=(e=>(e.INFO="info",e.WARN="warn",e.SUCCESS="success",e.ERROR="error",e.WARN_SOFT="warn_soft",e.CONFIDENTIALITY="confidentiality",e.BRAND_STRONG="brand_strong",e.DANGER="danger",e.INFO_SOFT="info_soft",e.FPL_DEFAULT="fpl_default",e.FPL_DANGER="fpl_danger",e.FPL_BRAND="fpl_brand",e.FPL_SUCCESS="fpl_success",e.FPL_WARN="fpl_warn",e))(a||{}),o=(e=>(e.STRUCTURED="structured",e.CUSTOM="custom",e))(o||{})},783922:(e,r,n)=>{n.d(r,{FK:()=>g});var i,a,o=n(848318),s=n(536384),l=n.n(s),c=n(831932),d=n(26039),u=n(442313),p=n(376780),m=n(832876),h=n(224306),_=n(410784);function g(e){let r={backgroundClip:c.Ay.safari?"padding-box":""};return e.backgroundColor&&(r.backgroundColor=e.backgroundColor),o.createElement("div",{className:l()(_.nN,e.className,e.removeBorder&&h.ev),onClick:e=>{e.preventDefault()},style:r},o.createElement("div",{className:e.customRatioClassName??h.ll}),o.createElement("div",{className:h.nK},e.children))}o.memo(function(e){return o.createElement("div",{onClick:e.onClick,onContextMenu:e.onContextMenu,className:l()(_.Wg,e.containerStyle)},o.createElement("div",null,e.image),o.createElement("div",{className:e.bottomRowStyle??_.yE},e.bottomRow))}),(e=>{e.Center=function(e){return o.createElement("div",{className:_.pn},e.children)},e.Cover=function(e){return o.createElement("div",{className:_.bh},e.children)},e.BottomLeft=function(e){return o.createElement("div",{className:_.wb},e.children)},e.BottomRowRight=function(e){return o.createElement("div",{className:_.vw},e.children)}})(i||(i={})),(e=>{e.NameAndFileIconMetadata=function(e){let r=o.useMemo(()=>{switch(e.viewerMode){case p.y4.WHITEBOARD:return d.y1.WHITEBOARD;case p.y4.SLIDE_TEMPLATE:return d.y1.SLIDES;case p.y4.CANVAS:case p.y4.LIBRARY:return d.y1.DESIGN;case p.y4.PROTOTYPE:return d.y1.PROTOTYPE;default:return null}},[e.viewerMode]);return o.createElement("div",{className:`${_.QQ} ${e.className}`},o.createElement("div",{className:_.Hw},o.createElement("div",{className:e.textClassName||_.oY},e.name)),r&&o.createElement(d.MW,{type:r,size:d.LE.SMALL,className:_.kR}))},e.AvatarAndNameMetadata=function(e){let r=e.publishers&&e.publishers.length>0&&e.publishers[0];return o.createElement("div",{className:`${_.QQ} ${e.className}`},r&&o.createElement("div",{className:_.$7},o.createElement(m.Ro,{entity:r,size:32,className:_.ez})),o.createElement("div",{className:_.Hw},o.createElement("div",{className:e.textClassName||_.oY},e.name)))},e.FullMetadata=function(e){if(!e.publishers||0===e.publishers.length)return null;let r=e.publishers.length-1,n=e.publishers.length>1?(0,u.t)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:r}):"";return o.createElement("div",{className:_.QQ,onClick:e.onClick},o.createElement("div",{className:_.$7},o.createElement(m.Ro,{entity:e.publishers[0],size:32,className:_.ez})),o.createElement("div",{className:_.Hw},o.createElement("div",{className:_.ac},e.name),o.createElement("div",{className:e.hoverText?_.Jk:_.Rb},(0,u.t)("community.cards.by")," ",e.publishers[0].name," ",n),e.hoverText&&o.createElement("div",{className:_.yG},e.hoverText)))}})(a||(a={}))},55489:(e,r,n)=>{n.d(r,{bX:()=>A});var i=n(848318),a=n(716544),o=n(677772),s=n(311037),l=n(596616),c=n(157907),d=n(579020),u=n(303035),p=n(757033),m=n(991371),h=n(145015),_=n(963570),g=n(17755),f=n(442313),E=n(364370),y=n(160837),b=n(449737),v=n(467733),T=n(464012),I=n(678290),S=n(117592),w=n(639088);let A=(0,T.Ju)(function(e){let{name:r,user:n,monetizedResource:u}=e,[m,h]=i.useState(!1),[y,T]=i.useState(null),[w,A]=i.useState(""),L=(0,a.wA)(),O=()=>{L((0,b.to)({type:C,data:{user:n}}))},R=()=>{L((0,b.to)({type:N,data:{user:n}}))};return i.createElement(S.Rw,{autoFocusCta:!1,cancelText:(0,f.tx)("general.close"),confirmText:(0,f.tx)("general.confirm"),confirmationTitle:(0,f.tx)("community.buyer.need_a_refund"),content:i.createElement("div",{className:g.s.flexColumn.colorText.$},(0,f.tx)("community.buyer.we_re_sorry_to_hear_resource_name_didnt_work_out",{resourceName:i.createElement("span",{className:g.s.fontBold.$},r)}),(0,c.k)().cmty_refund_modal_radio_input_migration?i.createElement("form",{className:g.s.my16.$},i.createElement(o.b,{value:y??void 0,onChange:e=>{T(e)},legend:i.createElement(s.q,null,(0,f.tx)("community.buyer.refund_reason"))},Object.values(v.bG).map(e=>i.createElement(o.c,{key:e,value:e,label:i.createElement(l.J,null,(0,E.vi)(e))}))),y===v.bG.OTHER?i.createElement("div",{className:g.s.mt8.$},i.createElement(I.v,{value:w,onChange:e=>A(e.target.value),placeholder:(0,f.t)("community.buyer.refund_reason.add_additional_details"),maxLength:v.JV})):null):i.createElement("div",{className:g.s.my16.$},i.createElement(_.z,{value:y,onChange:e=>{T(e)}},Object.values(v.bG).map(e=>i.createElement(_.Z,{className:g.s.font11.selectNone.$,key:e,value:e},(0,E.vi)(e)))),y===v.bG.OTHER?i.createElement("div",{className:g.s.mt8.$},i.createElement(I.v,{value:w,onChange:e=>A(e.target.value),placeholder:(0,f.t)("community.buyer.refund_reason.add_additional_details"),maxLength:v.JV})):null)),disableConfirm:!y,hideOnConfirm:!1,isLoading:m,onConfirm:()=>{h(!0),(0,d.sx)("Request Refund Modal Confirm",{refundReason:y,refundOtherReasonText:w,monetizedResourceMetadataId:u.id}),p.Ay.post(`/api/community/buyer/${u.id}/refund`,{refund_reason:y,refund_other_reason_text:w}).then(()=>{h(!1),L(b.Ce()),O()}).catch(e=>{h(!1),L(b.Ce()),R()})},popStack:!0,size:"small"})},"CommunityRequestRefundModal"),C=(0,T.Ju)(function(e){let{user:r}=e,n=(0,a.wA)();return i.createElement(S.Nb,{size:"small",hide:u.lQ,title:(0,f.t)("community.buyer.refund_requested")},i.createElement(m.s_,{dispatch:n}),(0,f.tx)("community.buyer.keep_an_eye_out",{here:i.createElement(h.CY,{onClick:()=>{(0,y.c9)(r),n(b.Ce())},trusted:!0},(0,f.tx)("community.buyer.here"))}),i.createElement("div",{className:w.v0},i.createElement(h.tM,{onClick:()=>n(b.Ce())},(0,f.tx)("general.close"))))},"CommunityRefundRequestedSuccessModal"),N=(0,T.Ju)(function(e){let{user:r}=e;return i.createElement(S.Rw,{size:"small",confirmationTitle:(0,f.tx)("community.buyer.unable_to_process_refund"),content:i.createElement("span",{className:g.s.colorText.$},(0,f.tx)("community.buyer.error_requesting_refund_please_contact_support")),confirmText:(0,f.tx)("community.buyer.get_support"),onConfirm:()=>(0,y.oW)(r),cancelText:(0,f.tx)("general.close"),autoFocusCta:!1})},"CommunityErrorRequestingRefundModal")},361260:(e,r,n)=>{n.d(r,{A:()=>H});var i=n(848318),a=n(716544),o=n(445777),s=n(719670),l=n(536384),c=n.n(l),d=n(579020),u=n(145015),p=n(385150),m=n(575492),h=n(17755),_=n(442313),g=n(895104),f=n(320409),E=n(775038),y=n(449737),b=n(727341),v=n(376780),T=n(997894),I=n(325605),S=n(969440),w=n(401704),A=n(501668),C=n(886686),N=n(886233),L=n(422358),O=n(755299),R=n(230645);function P({text:e}){return i.createElement(E.E,{"data-testid":"extension-security-form-error",color:"danger"},e)}function D(e){let{canShowErrors:r}=(0,C.I)();return r&&(0,I.G6)(e)}function M(e){let{onChange:r,question:n}=e,{prompt:a,value:o,placeholder:s}=n,l=D(n);return i.createElement("div",{className:h.s.flex.flexColumn.gap8.$},a&&i.createElement("div",null,function(e){let r=e.match(/\[([^\]]+)\]\(([^)]+)\)/);if(!r||!r.index)return e;let[n,a,o]=r;return i.createElement("span",{"data-testid":"parsed-text-content"},e.slice(0,r.index),i.createElement("a",{href:o,target:"_blank",className:h.s.colorTextBrand.cursorPointer.$},a),e.slice(r.index+n.length))}(a)),i.createElement(u.ks,{className:h.s.wFull.$,value:o??"",onChange:r,placeholder:s}),l&&i.createElement(P,{text:(0,_.t)("community.publishing.data_security.incomplete_text")}))}function k(e){let{question:r,dispatch:n,path:a}=e,{prompt:o,options:s}=r,l=D(r);return i.createElement("div",{className:h.s.flex.flexColumn.gap16.$},i.createElement(E.E,{fontWeight:"semi-bold"},o),i.createElement(i.Fragment,null,s.map((e,r)=>{let o=`path-${a.join("-")}-option-input-${r}`;return i.createElement("div",{className:h.s.flex.flexColumn.$,key:`option-${r}`},i.createElement("div",{className:h.s.flex.gap8.$},i.createElement("input",{type:"radio",id:o,checked:e.isSelected??!1,onChange:()=>{n({type:"UPDATE_SINGLE_SELECT_QUESTION",questionIndex:a[0],optionIndex:r})},className:h.s.cursorPointer.$}),i.createElement("label",{htmlFor:o,className:h.s.cursorPointer.$},e.label)),e.subQuestions&&e.isSelected&&i.createElement("div",{className:h.s.ml20.flex.flexColumn.gap8.pt8.$},e.subQuestions.map((e,o)=>i.createElement(x,{key:`sub-question-${o}`,question:e,dispatch:n,path:a.concat(r,o)}))))})),l&&i.createElement(P,{text:(0,_.t)("community.publishing.data_security.incomplete_single_select")}))}function F(e){let{dispatch:r,path:n,question:a}=e,{prompt:o,options:s}=a,l=D(a);return i.createElement("div",{className:h.s.flex.flexColumn.gap16.$},i.createElement(E.E,{fontWeight:"semi-bold"},o),i.createElement(i.Fragment,null,s.map((e,a)=>{let o=`path-${n.join("-")}-option-input-${a}`;return i.createElement("div",{className:h.s.flex.flexColumn.$,key:`option-${a}`},i.createElement("div",{className:h.s.flex.gap8.$},i.createElement("input",{type:"checkbox",checked:e.isSelected??!1,onChange:()=>{r({type:"UPDATE_MULTI_SELECT_QUESTION",questionIndex:n[0],optionIndex:a})},id:o,className:h.s.cursorPointer.$}),i.createElement("label",{htmlFor:o,className:h.s.cursorPointer.$},e.label)),e.subQuestions&&e.isSelected&&i.createElement("div",{className:h.s.ml20.flex.flexColumn.gap8.pt8.$},e.subQuestions.map((e,o)=>i.createElement(x,{key:`sub-question-${o}`,question:e,dispatch:r,path:n.concat(a,o)}))))})),l&&i.createElement(P,{text:(0,_.t)("community.publishing.data_security.incomplete_multi_select")}))}function x(e){let{question:r,dispatch:n,path:a}=e;switch(r.inputType){case"single_select":return i.createElement(k,{question:r,dispatch:n,path:a});case"multi_select":return i.createElement(F,{question:r,dispatch:n,path:a});case"text":return i.createElement(M,{question:r,onChange:e=>{1===a.length?n({type:"UPDATE_TEXT_QUESTION",questionIndex:a[0],value:e.currentTarget.value}):3===a.length&&n({type:"UPDATE_TEXT_SUBQUESTION",path:[a[0],a[1],a[2]],value:e.currentTarget.value})},path:a});default:return null}}function U(e){let{extensionType:r,securityForm:n,dispatch:a}=e,o="plugin"===r?(0,_.tx)("community.publishing.security_form.plugin_description"):(0,_.tx)("community.publishing.security_form.widget_description"),s="plugin"===r?(0,_.tx)("community.publishing.security_form.plugin_sharing_description"):(0,_.tx)("community.publishing.security_form.widget_sharing_description");return i.createElement("div",{className:h.s.p16.flex.flexColumn.$,"data-testid":"extension-security-form"},i.createElement("div",{className:h.s.pb16.$},i.createElement(E.E,{fontSize:14,fontWeight:"medium"},(0,_.tx)("community.publishing.security_form.header"))),i.createElement("div",{className:h.s.pb16.$},o),i.createElement("div",{className:h.s.pb16.$},s,i.createElement("a",{href:"plugin"===r?"https://help.figma.com/hc/articles/360042293394":"https://help.figma.com/hc/articles/4410337103639",target:"_blank",className:h.s.colorTextBrand.cursorPointer.$},(0,_.tx)("community.publishing.security_form.learn_more"))),i.createElement("div",{className:h.s.flex.flexColumn.gap32.$},n.questions.map((e,r)=>i.createElement(x,{key:`question-${r}`,question:e,dispatch:a,path:[r]}))))}function B({onDiscard:e,onDone:r,securityFormFromDB:n,localSecurityFormResponse:o,onOptOut:l,currentFormStatus:u,extensionId:p}){let m=i.useMemo(()=>!(0,s.c2)(o,n),[o,n]),{canShowErrors:E,numberOfErrors:v,optedOutOfSecurityForm:T,extensionType:S}=(0,C.I)(),w=(0,I.qu)(n),N=(0,a.wA)(),O=(0,b.GS)();return i.createElement("div",{className:c()(h.s.flex.gap8.p16.justifyBetween.alignCenter.absolute.bottom0.left0.right0.bSolid.bt1.colorBorder.colorBg.$,{[L._]:O})},!w&&i.createElement("button",{className:h.s.bgTransparent.noWrap.if(T,h.s.colorTextSecondary,h.s.colorTextBrand.cursorPointer).$,onClick:()=>{N((0,y.to)({type:A.i,data:{onConfirm:l,status:u,extensionType:S},showModalsBeneath:!0})),(0,d.sx)("Data Security Plugin Form",{action:"Remove security details",extensionType:S,extensionId:p})},disabled:T},(0,_.tx)("community.publishing.security_form.opt_out_button")),i.createElement(g.Y,{width:"fill-parent",horizontalAlignItems:"end"},i.createElement(f.$,{variant:"secondary",onClick:()=>{e(),(0,d.sx)("Data Security Plugin Form",{action:"Discard changes",extensionType:S,extensionId:p})},disabled:!m},(0,_.tx)("community.publishing.security_form.discard_changes")),i.createElement(f.$,{variant:"primary",onClick:r,disabled:E&&v>0},(0,_.tx)("general.done"))))}function V({currentFormStatus:e}){let r,n,a;if(!e)return null;switch(e){case v.bQ.APPROVED:r=i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.approved.title"))),i.createElement("div",null,i.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.approved.description")))),n=O.A,a="success";break;case v.bQ.PENDING:r=i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.pending.title"))),i.createElement("div",null,i.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.pending.description")))),n=R.A,a="brand";break;case v.bQ.REJECTED:r=i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.rejected.title"))),i.createElement("div",null,i.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.rejected.description"))),i.createElement("div",null),i.createElement("div",null,i.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.rejected.description.check_email")))),n=R.A,a="brand";break;default:(0,o.xb)(e)}return i.createElement(p.z,{iconSrc:n,variant:a,orientation:"vertical"},r)}function G({localSecurityFormResponse:e,securityFormFromDB:r,setSecurityFormResponse:n,extensionType:a,onDone:o,currentFormStatus:s,existingSecurityFormResponse:l,extensionId:c}){let d={questions:r.questions,version:r.version},[u,p]=(0,i.useReducer)(N.V,e??d),{setCanShowErrors:h,setOptedOutOfSecurityForm:_,optedOutOfSecurityForm:g}=(0,C.I)();return i.useEffect(()=>{n(u),(0,I.qu)(u)||_(!1)},[n,u,_]),i.createElement(i.Fragment,null,i.createElement(m.P,{className:L.j,maxHeight:800},i.createElement(V,{currentFormStatus:s}),i.createElement(U,{securityForm:u,dispatch:p,extensionType:a})),i.createElement(B,{onOptOut:()=>{p({type:"RESET_FORM"}),_(!0)},onDiscard:()=>{p({type:"DISCARD_CHANGES",originalState:d}),h(!1)},onDone:()=>{if((0,I.wT)(e,l)&&!g){h(!0);return}o()},securityFormFromDB:r,localSecurityFormResponse:e,currentFormStatus:s,extensionId:c}))}function H(e){let{version:r,setSecurityFormResponse:n,extensionType:a,localSecurityFormResponse:o,existingSecurityFormResponse:s,onDone:l,optedOutOfSecurityForm:c,setOptedOutOfSecurityForm:d,extensionId:u}=e,[p]=(0,T.IT)(K(r),{enabled:!s}),m=(0,b.GS)(),_=(s?{version:String(s.formVersion),questions:s.responses}:null)??("loaded"===p.status?p.data:null);return _?i.createElement(C.B,{localSecurityFormResponse:o,existingSecurityFormResponse:s,optedOutOfSecurityForm:c,setOptedOutOfSecurityForm:d,extensionType:a},i.createElement(G,{localSecurityFormResponse:o,securityFormFromDB:_,setSecurityFormResponse:n,extensionType:a,onDone:l,currentFormStatus:s?.status??null,existingSecurityFormResponse:s,extensionId:u})):m?i.createElement("div",{className:h.s.p8.$},i.createElement(w.R,null)):null}let K=T.M4.Query({fetch:async e=>await S.is.getBlankSecurityForm(e)})},962465:(e,r,n)=>{n.d(r,{IW:()=>P,fV:()=>O,fp:()=>R});var i=n(848318),a=n(716544),o=n(430285),s=n(666428),l=n(857188),c=n(493554),d=n(282424),u=n(473889),p=n(197945),m=n(166365),h=n(442313),_=n(23354),g=n(354054),f=n(285647),E=n(717752),y=n(841747),b=n(918105),v=n(635547),T=n(783235),I=n(101217),S=n(808123),w=n(312949),A=n(586892),C=n(821527),N=(e=>(e.FILES="FILES",e.PLUGINS="PLUGINS",e.WIDGETS="WIDGETS",e))(N||{});function L(e){return i.createElement("div",{className:w.bx},i.createElement("div",{className:w.Uz},"FILES"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.files_title"):"PLUGINS"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.plugins_title"):(0,h.t)("community.universal_posting_modal.resource_empty.widgets_title")),i.createElement("div",{className:w.SL},"FILES"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.files_subtitle"):"PLUGINS"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.plugins_subtitle"):(0,h.t)("community.universal_posting_modal.resource_empty.widgets_subtitle")))}function O(e){var r,n,l,c;let d=(0,a.d4)(e=>e.currentUserOrgId),u=(n=(0,s.lP)(d||null),l=i.useMemo(()=>{let e=n.data||[];return o.Qw.loaded(e.filter(e=>e.file?.parentOrgId===d))},[n,d]),c=e.editorTypes,r=i.useMemo(()=>{if(!c||0===c.length)return l;let e=l.data||[];return o.Qw.loaded(e.filter(e=>e.file?.editorType!=null&&c.includes(e.file.editorType)))},[l,c]),i.useMemo(()=>"loaded"!==r.status?[]:r.data.flatMap(e=>null!==e.file?[{type:E.nb.FILE,file:{...e.file,signedPreviewThumbnailUrls:null,UserFileRecentAny:{actionAt:e.actionAt}},sharedWithYouFields:null}]:[]),[r]));return 0===u.length?i.createElement(L,{tab:"FILES"}):i.createElement("div",{className:w.Vg,onClick:e.deselectActiveFile},u.map(r=>{if(r.type!==E.nb.FILE)return null;let{file:n}=r;return e.filterFn&&!e.filterFn(n)?null:i.createElement(D,{key:n.key,file:n,setActiveFile:e.setActiveFile,activeFileKey:e.activeFileKey})}))}function R({activeSearchQuery:e,activeFileKey:r,setActiveFile:n,deselectActiveFile:o,searchResults:s,editorTypes:l}){let d=(0,y.FC)(),p=(0,a.d4)(e=>e.authedProfilesById),m=(0,a.d4)(e=>e.figFileDuplicatedFromHubFile),g=i.useMemo(()=>(s||[]).map(({model:{key:e}})=>({key:e})),[s]),E=(0,c.p)(v.dDF,g),T=i.useMemo(()=>E.map(({result:e})=>e.transform(e=>!!e.file?.hasPermission)),[E]);if(!s)return i.createElement("div",{className:w.g4},i.createElement(u.kt,{size:"small"}));let I=s.filter((e,r)=>e.model.editorType&&(void 0===l||l?.includes(e.model.editorType))&&!(0,f.JJ)(b.F.toSinatra(e.model),T[r].unwrapOr(!1),{...d,authedProfilesById:p,figFileDuplicatedFromHubFile:m},null));return 0===I.length?i.createElement("div",{className:w.bx},i.createElement("div",{className:w.Uz},(0,h.tx)("community.universal_posting_modal.recent_editable_files_search.no_files_matching",{searchQuery:i.createElement("span",{className:w.ZF},e)}))):i.createElement("div",{className:w.Vg,onClick:o},I.map(e=>{let a=e.model,o=a.hub_file&&(0,_.r7)(a.hub_file);return i.createElement(D,{key:a.key,file:a,disabled:o,setActiveFile:n,activeFileKey:r})}))}function P(e){let{query:r,setQuery:n,setSearchResults:o,hasCloseButton:s=!0}=e,c=(0,a.wA)(),u=i.useCallback(()=>{r&&(c(g.Dy({entryPoint:"community:universal_posting"})),o(null),I.$W.getFullResults({query:r,desc:!0,sort:T.Lk.RELEVANCY,orgId:void 0,isGlobal:!0,searchModelType:T.uH.FILES}).then(({data:{meta:e}})=>{o(e.results.map(e=>({...e,model:{...b.F.toLiveGraph(e.model),fileRepo:e.model.file_repo,fragments:e.model.fragments,owner:e.model.owner}})))}))},[r,c,o]),_=i.useCallback(()=>{n("")},[n]),f=i.useCallback(e=>(e.keyCode===l.Uz.ENTER&&u(),!0),[u]),E=i.useCallback(e=>{n(e)},[n]);i.useEffect(()=>{let e=setTimeout(u,300);return()=>clearTimeout(e)},[r,u]);let y=i.useRef(null),{searchInputRef:v,onMouseDown:S,onMouseUp:N,onBlur:L,onClearSearchClick:O,onSearchKeyDown:R,onSearchChange:P}=(0,p.ne)({...e,focusOnMount:!1,clearSearch:_,onChange:E,onSubmit:u,isKeyDownHandled:f},y);return i.createElement("div",{className:w.Tm},i.createElement(m.B,{className:w.qc,svg:A.A}),i.createElement(d.L,{ref:v,className:w.Rt,onBlur:L,onChange:P,onKeyDown:R,onMouseDown:S,onMouseUp:N,placeholder:e.placeholderText??(0,h.t)("community.universal_posting_modal.search_bar.placeholder"),spellCheck:!1,value:r}),!!r&&s&&i.createElement(m.B,{className:w.i3,svg:C.default,onClick:O}))}function D(e){let{file:r,disabled:n,setActiveFile:a,activeFileKey:o}=e,s=i.useMemo(()=>b.F.toSinatra(r),[r]);return i.createElement(S.GQ,{onClick:e=>{e.stopPropagation(),n||a(r)},file:s,subtitle:i.createElement(S.lJ,{file:s}),activeFileUsers:[],currentUser:null,isSelected:!n&&o===r.key,disabled:n,tooltipText:n?(0,h.t)("community.publishing.this_file_has_been_published_to_community_as_a_library"):void 0})}},844945:(e,r,n)=>{n.d(r,{Qi:()=>g,U6:()=>f});var i=n(848318),a=n(716544),o=n(44509),s=n(857188),l=n(902213),c=n(790355),d=n(834111),u=n(832876),p=n(167803);let m={underline:p.ah,noUnderline:p.HU};class h extends i.PureComponent{constructor(){super(...arguments),this.onClick=e=>{if(e.preventDefault(),e.stopPropagation(),(0,s.oJ)(e)||this.props.openInNewTab){o.Ay.redirect(this.props.hrefPath||"","_blank");return}let r=_(this.props);this.props.dispatch(c.$T(r))}}render(){let e={...this.props.publisher,img_url:this.props.publisher.img_urls["120_120"]},r=i.createElement(i.Fragment,null,this.props.showAvatar&&i.createElement("div",{className:this.props.avatarClassName||p.Du},i.createElement(u.Ro,{size:this.props.avatarSize||32,entity:e})),!this.props.hideName&&i.createElement("span",{className:this.props.childrenClassName||p.fh},this.props.publisher.name));return i.createElement("div",{className:`${this.props.className||""}`},this.props.disabled?i.createElement("span",{className:this.props.childrenClassName||p.oY},r):i.createElement("a",{href:new l.xn({profileHandle:this.props.publisher.profile_handle}).href,className:this.props.childrenClassName||this.props.authorLinkStyle,onClick:this.onClick},r))}}let _=e=>({view:"communityHub",subView:"handle",handle:e.publisher.profile_handle}),g=(0,a.Ng)((e,r)=>{let n=_(r);return{hrefPath:(0,d.Np)(e,n),authorLinkStyle:m.underline}})(h);function f(e){let r=(0,a.wA)(),n={view:"communityHub",subView:"handle",handle:e.profile.profile_handle},u=(0,a.d4)(e=>(0,d.Np)(e,n));return i.createElement("a",{href:new l.xn({profileHandle:e.profile.profile_handle}).href,className:p.M2,onClick:e=>{if(e.preventDefault(),e.stopPropagation(),(0,s.oJ)(e)){o.Ay.redirect(u||"","_blank");return}r(c.$T(n))}},e.children)}(0,a.Ng)((e,r)=>({hrefView:_(r),hrefPath:(0,d.Np)(e,_(r)),authorLinkStyle:m.underline}))(h)},178361:(e,r,n)=>{n.d(r,{T:()=>b});var i=n(848318),a=n(716544),o=n(579020),s=n(730169),l=n(303035),c=n(991371),d=n(145015),u=n(442313),p=n(449737),m=n(405866),h=n(369600),_=n(661780),g=n(464012),f=n(117592),E=n(328449),y=n(393328);let b=(0,g.Ju)(function({onAgree:e,onDecline:r}){let n=(0,a.wA)(),g=(0,_.iZ)(),b=(0,h.q5)();!function(){let e=(0,_.iZ)(),r=(0,h.q5)();(0,s.h)(()=>{o.az.trackDefinedEvent("preset_libraries.apple_eula_displayed",{userId:e?.id??void 0,fileTeamId:r?.teamId??void 0,fileParentOrgId:r?.parentOrgId??void 0,fileKey:r?.key,asyncModal:!1})})}();let v=i.useCallback(e=>{o.az.trackDefinedEvent("preset_libraries.apple_eula_clicked",{actionType:e,userId:g?.id??void 0,fileTeamId:b?.teamId??void 0,fileParentOrgId:b?.parentOrgId??void 0,fileKey:b?.key,asyncModal:!1})},[b,g]);return i.createElement(f.Nb,{hide:l.lQ,disableClickOutsideToHide:!0,className:y.kL},i.createElement("div",{className:y.wx},(0,u.tx)("community.eula.license_agreement_v2"),i.createElement(c.s_,{onClose:()=>v("x"),dispatch:n,customStyle:{right:"4px",top:"4px"}})),i.createElement("div",{className:y.IP},i.createElement("div",{className:y.rf},i.createElement("div",{className:y.r3},(0,u.tx)("community.eula.license_agreement_preamble")),i.createElement(E.N,null))),i.createElement("div",{className:y.qr},i.createElement(d.tM,{onClick:()=>{v("decline"),n(p.Lo()),r?.()},className:y.lO},(0,u.tx)("community.eula.disagree")),i.createElement(d.vd,{onClick:()=>{v("accept"),n(m.b({apple_eula_accepted:!0})),e()},className:y.lO},(0,u.tx)("community.eula.agree"))))},"APPLE_EULA_MODAL_TYPE",g.ZU.YES)},880245:(e,r,n)=>{n.d(r,{Pn:()=>u});var i=n(848318),a=n(551316),o=n(645736),s=n(442313),l=n(495052),c=n(68745),d=n(336229);let u="seen_community_comments_compose";function p({dismissModal:e}){let r=i.useRef(null),n=i.useCallback((0,a.s)(()=>{r.current&&(r.current.style.opacity="0")},0,!0),[r]),c=i.useCallback((0,a.s)(()=>{r.current&&(r.current.style.opacity="1")},450),[r]);i.useEffect(()=>(window.addEventListener("scroll",n,!1),window.addEventListener("scroll",c,!1),()=>{window.removeEventListener("scroll",n,!1),window.removeEventListener("scroll",c,!1)}),[n,c]);let u=i.useCallback(e=>{let n=r.current;n&&(e.isIntersecting?n.style.visibility="visible":n.style.visibility="hidden")},[r]);return i.createElement(l.NJ,{targetKey:"sort-state-dropdown",dismissModal:e,width:301,display:"hidden",containerRef:r,className:d.pO},i.createElement(o.a,{onIntersectionChange:u}),i.createElement("div",{className:d.Hj},(0,s.tx)("community.onboarding.see_more_of_what_you_love")),(0,s.tx)("community.onboarding.whether_you_want_to_focus_on_creators_you_follow_discover_new_files_and_plugins_or_find_out_what_s_trending_you_can_customize_your_feed_here"))}e=>i.createElement(p,{...e}),c.q3.SELF_CONTAINED},641802:(e,r,n)=>{var i,a,o,s=n(848318),l=n(716544),c=n(475020),d=n(792760),u=n(536384),p=n.n(u);n(579020);var m=n(831932),h=n(16196),_=n(991371),g=n(182059),f=n(145015),E=n(213165),y=n(166365),b=n(566699),v=n(291499),T=n(433074),I=n(442313),S=n(125644),w=n(544795),A=n(211591),C=n(790355),N=n(449737);n(352809);var L=n(155651),O=n(96447),R=n(950738),P=n(698522),D=n(402840);n(526830);var M=n(503024),k=n(836301),F=n(205397),x=n(256429),U=n(608010),B=n(439993),V=n(385754),G=n(117592);n(377748);var H=n(561431),K=n(48437),W=n(656444),z=n(905874),$=n(580012),Y=n(415431),j=n(465311),q=n(568132),X=n(295891),Z=n(5312),J=n(579393),Q=n(26950),ee=n(691417),et=n(582870),er=n(619883),en=n(737297);let ei=class e extends s.PureComponent{constructor(){super(...arguments),this.state={isMouseOver:!1,shouldShowErrorModal:!1},this.isWidget=!!this.props.plugin.manifest?.containsWidget,this.onPublish=()=>{this.props.onPublishClick&&this.props.onPublishClick(this.props.plugin.localFileId)},this.onDelete=()=>{this.props.dispatch(A.qR(this.props.plugin.localFileId))},this.onClick=()=>{this.props.onTileClick?this.props.onTileClick():this.onRevealLocally()},this.onRevealLocally=()=>{(0,P.M)().openExtensionDirectory(this.props.plugin.localFileId)},this.showError=()=>{this.setState({shouldShowErrorModal:!0})},this.hideError=()=>{this.setState({shouldShowErrorModal:!1})},this.tileDropdownType=this.isWidget?e.DEVELOPMENT_PLUGIN_DROPDOWN:e.DEVELOPMENT_WIDGET_DROPDOWN,this.onContextMenu=e=>{this.props.dispatch(C.j7({type:this.tileDropdownType,data:{type:"context",localFileId:this.props.plugin.localFileId,clientX:e.clientX,clientY:e.clientY}}))},this.shouldShowContextMenu=()=>this.props.dropdownShown&&this.props.dropdownShown.type===this.tileDropdownType&&this.props.dropdownShown.data.localFileId===this.props.plugin.localFileId&&"context"===this.props.dropdownShown.data.type,this.shouldShowPointingDropdown=()=>null!=this.props.dropdownShown&&this.props.dropdownShown.type===this.tileDropdownType&&this.props.dropdownShown.data.localFileId===this.props.plugin.localFileId&&"pointing"===this.props.dropdownShown.data.type,this.onDotsClick=()=>{this.props.dispatch(C.j7({type:this.tileDropdownType,data:{type:"pointing",localFileId:this.props.plugin.localFileId}}))},this.dotsIconRef=s.createRef(),this.onMouseEnter=()=>{this.setState({isMouseOver:!0})},this.onMouseLeave=()=>{this.setState({isMouseOver:!1})}}render(){let e=s.createElement(s.Fragment,null,s.createElement(g.c$,{onClick:this.onPublish},(0,I.tx)("community.plugins.publish_new_version")),s.createElement(g.c$,{onClick:this.onRevealLocally},function(e){switch(e){case"plugins-menu-dev-create-new":return(0,I.t)("fullscreen.plugins_menu.new_plugin");case"widgets-menu-dev-create-new":return(0,I.t)("fullscreen.plugins_menu.new_widget");case"widgets-menu-dev-import-from-manifest":return(0,I.t)("fullscreen.plugins_menu.import_widget_from_manifest");case"plugins-menu-dev-import-from-manifest":return(0,I.t)("fullscreen.plugins_menu.import_plugin_from_manifest");case"plugins-menu-open-directory-mac":return(0,I.t)("fullscreen.plugins_menu.open_directory_mac");case"plugins-menu-open-directory-win":return(0,I.t)("fullscreen.plugins_menu.open_directory_win");case"plugins-menu-open-directory-vscode":return(0,I.t)("fullscreen.plugins_menu.open_directory_vscode");default:return""}}((0,D.YQ)())),s.createElement(g.wv,null),s.createElement(g.c$,{onClick:this.onDelete},(0,I.tx)("community.permissions_modal_publish_tab.footer.remove"))),{name:r,error:n}=this.props.plugin,i=this.isWidget?(0,I.t)("community.plugins.widget"):(0,I.t)("community.plugins.plugin");return s.createElement("div",{className:W.bp},s.createElement("div",{className:n?W.rS:W.el,onClick:n?this.showError:this.onClick,onContextMenu:this.onContextMenu,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},n?s.createElement("div",{className:W.yd},s.createElement(v.t,{svg:er.A})):this.isWidget?s.createElement("div",{className:W.im},this.props.isPublished?s.createElement("img",{className:W.K0,src:`/community/icon?resource_type=widget&resource_id=${this.props.plugin.plugin_id}`,alt:""}):s.createElement(v.t,{svg:q.A})):s.createElement("div",{className:W.im},s.createElement(v.t,{svg:Q.A,fallbackSvg:ee.A})),s.createElement("div",{className:W.In},s.createElement("div",{className:n?W.iH:W.YG},r,this.props.isPublished?s.createElement(v.t,{svg:j.A}):null),n&&this.state.isMouseOver?s.createElement(T.o,{className:W.cV,text:"Error: "+n.text}):s.createElement(E.R,{className:W.cV,text:this.props.plugin.localFilePath.replace("/manifest.json","")})),n&&s.createElement(y.B,{className:W.rs,svg:m.Ay.mac?X.A:Z.A})),s.createElement(x.YW,{svg:$.A,fallbackSvg:Y.A,className:p()(W.q6,this.shouldShowPointingDropdown()?W.Yh:""),onClick:this.onDotsClick,ref:this.dotsIconRef,"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,I.t)("community.plugins.options"),selected:this.shouldShowPointingDropdown()}),this.shouldShowContextMenu()&&s.createElement(g.ms,{className:W.Gm,style:{left:this.props.dropdownShown.data.clientX,top:this.props.dropdownShown.data.clientY}},e),this.shouldShowPointingDropdown()&&s.createElement(F.Cf,{className:W.Gm,minWidth:122,targetRect:this.dotsIconRef.current.getBoundingClientRect(),propagateCloseClick:!0},e),this.state.shouldShowErrorModal&&s.createElement(G.aF,{size:"small",title:(0,I.t)("community.plugins.plugin_or_widget_issue",{resourceType:i})},s.createElement(_.s_,{...this.props}),s.createElement("div",{className:W.hM},this.props.plugin.error?this.props.plugin.error.text:n?.text),s.createElement("div",{className:W.H1},s.createElement(f.$$,{onClick:this.hideError},(0,I.tx)("general.done")))))}};function ea(e){return s.createElement("div",{className:e.containerClassName||W.x$,onContextMenu:e.onOptionsClick,onClick:e.onClick||(e=>e.preventDefault())},s.createElement(K.li.IconAndBadgeContainer,{className:W.yq},s.createElement("div",{className:W.zr},e.pluginIcon),e.showEditorTypeIcon&&s.createElement(K.li.BadgeContainer,null,s.createElement(K.dn,{editorType:e.editorType,is16x16:!0}))),s.createElement("div",{className:W.Kz},s.createElement("div",{className:W.P8},s.createElement("div",{className:W.iZ},e.title),e.titleSuffix),s.createElement("div",{className:m.rr?W.uN:W.UB},"string"==typeof e.subTitle?(0,h.$J)(e.subTitle):e.subTitle)),s.createElement("div",{className:W.Hq},s.createElement(c.d,{ref:e.optionsIconRef,onClick:e.onOptionsClick,"aria-expanded":e.isSelected,htmlAttributes:{"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,I.t)("community.plugins.options")},"aria-label":(0,I.t)("community.plugins.options"),disabled:e.disabled},s.createElement(b.U,{svg:$.A,fallbackSvg:Y.A},s.createElement(d.J,null)))))}ei.DEVELOPMENT_PLUGIN_DROPDOWN="DEVELOPMENT_PLUGIN_DROPDOWN",ei.DEVELOPMENT_WIDGET_DROPDOWN="DEVELOPMENT_WIDGET_DROPDOWN",(i||(i={})).Tile=function(e){let r=(0,R.Um)(),n=r?.type===V.lD&&r.data.localFileId===e.plugin.localFileId,i=(0,l.wA)(),a=s.useRef(null);return s.createElement(s.Fragment,null,s.createElement(ea,{containerClassName:e.containerClassName,disabled:!1,editorType:e.plugin.manifest.editorType||[],isSelected:n,onClick:e.onClick,onOptionsClick:r=>{if(r.stopPropagation(),n){i(C.oB());return}let o=a.current;i(C.j7({type:V.lD,data:{localFileId:e.plugin.localFileId,targetRect:o.getBoundingClientRect()}}))},optionsIconRef:a,pluginIcon:s.createElement("div",{className:W.TM},e.plugin.error?s.createElement(y.B,{className:W.QW,svg:en.A}):s.createElement(v.t,{className:W.ft,svg:z.A})),showEditorTypeIcon:e.showEditorTypeIcon,subTitle:s.createElement(U.A,{localResource:e.plugin,publishedResource:void 0}),title:e.plugin.name}),n&&s.createElement(V.T9,{localResource:e.plugin}))},(e=>{function r(e){if((0,w.AC)(e))return s.createElement(S.L,{height:"16"});if((0,D.Rt)(e)){let r=e.roles.org?.name;return s.createElement(y.B,{svg:J.A,className:W.kQ,"data-tooltip-type":M.Ib.TEXT,"data-tooltip":r?(0,I.t)("community.plugins.private_for_plugin_org_name",{orgName:r}):(0,I.t)("community.plugins.private_for_plugin_org")})}if(e.roles.is_public)return s.createElement(y.B,{className:W.Ac,svg:et.A,"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,I.t)("community.plugins.published_to_community")})}e.Tile=function(e){let n=(0,R.Um)(),i=n?.type===V.lD&&n.data.pluginId===e.plugin.id&&n.data.targetRect,a=(0,l.wA)(),o=s.useRef(null),c=(0,D.uF)(e.plugin),d=(0,O.WK)(e.plugin.id),u=s.useCallback(()=>r(e.plugin),[e.plugin])();return s.createElement(s.Fragment,null,s.createElement(ea,{containerClassName:e.containerClassName,disabled:!!e.plugin.unpublished_at,editorType:c.manifest.editorType||[],isSelected:i,onClick:e.onClick,onOptionsClick:()=>{if(i){a(C.oB());return}let r=o.current;a(C.j7({type:V.lD,data:{pluginId:e.plugin.id,targetRect:r.getBoundingClientRect()}}))},optionsIconRef:o,pluginIcon:s.createElement(k.V,{plugin:c}),showEditorTypeIcon:!0,subTitle:s.createElement(U.A,{localResource:d,publishedResource:e.plugin}),title:c.name,titleSuffix:u}),i&&s.createElement(V.T9,{publishedResource:e.plugin,viewResource:()=>{a(C.$T({view:"communityHub",subView:"plugin",publishedPluginId:e.plugin.id})),a(N.Ce())}}))},e.PluginManagementTitleBadge=r})(a||(a={})),(o||(o={})).Tile=function(e){let r=(0,D.uF)(e.plugin);return s.createElement("div",{className:e.containerClassName??W.x$},s.createElement(K.li.IconAndBadgeContainer,{className:W.yq},s.createElement("div",{className:W.zr},s.createElement(k.V,{plugin:r})),s.createElement(K.li.BadgeContainer,null,s.createElement(K.dn,{editorType:r.manifest.editorType,is16x16:!0}))),s.createElement("div",{className:W.Kz},s.createElement(B.PE,{resource:e.plugin})))},(0,L.tf)(function({plugin:e,className:r,onClick:n}){let i=(0,D.uF)(e),a=(0,l.wA)();return s.createElement("a",{className:r||W.m6,"data-plugin-id":e.id,key:e.id,onClick:r=>{r.metaKey||(r.preventDefault(),n?.(),a(C.$T({view:"communityHub",subView:"plugin",publishedPluginId:e.id})))},href:(0,H.ho)(e.id)},s.createElement(K.li.IconAndBadgeContainer,{className:W.yk},s.createElement("div",{className:W.A9},s.createElement(k.V,{plugin:i})),s.createElement(K.li.BadgeContainer,null,s.createElement(K.dn,{editorType:i.manifest.editorType,is16x16:!0}))),s.createElement("div",{className:W.XV},s.createElement("div",{className:W.vc},i.name),s.createElement("div",{className:W.ar},(0,w.G8)(i,h.$J))))})},568387:(e,r,n)=>{n.d(r,{WW:()=>G});var i=n(848318),a=n(716544),o=n(445777),s=n(579020),l=n(730169),c=n(303035),d=n(26039),u=n(166365),p=n(17755),m=n(442313),h=n(176283),_=n(23354),g=n(108597),f=n(790355),E=n(449737),y=n(950738),b=n(599422),v=n(376780),T=n(572699),I=n(668249),S=n(402840),w=n(526830),A=n(241917),C=n(677251),N=n(824880),L=n(161922),O=n(205397),R=n(789605),P=n(48437),D=n(884637),M=n(930602),k=n(954184);function F(e,r,n,i){(0,s.sx)("extension_opened_from_community",{extension_id:e,file_type:r,editor_type:n,searchSessionId:i})}function x(e){return i.createElement("button",{type:"button",className:D.t,onClick:e.onClick,"data-testid":e.dataTestId},i.createElement("div",{className:D.Z3},i.createElement("div",{className:p.s.w32.flex.justifyCenter.$},e.icon),i.createElement("div",{className:D.CA},e.text)),e.rightIcon)}function U(e){let r=e.fileName?e.fileName:e.playgroundFile?(0,m.t)("community.using.playground_file"):e.fileIconType===d.y1.WHITEBOARD?(0,m.t)("community.using.figjam_board"):(0,m.t)("community.using.figma_file");return i.createElement(x,{onClick:e.onClick,"data-testid":e.dataTestId,icon:i.createElement("div",{className:D.dD},i.createElement(P.Zt,{fileIconType:e.fileIconType})),text:r})}function B(e){let r=(0,a.wA)(),{files:n,resource:s,editorTypes:l}=e,c=(0,h.J)(),u=e=>{if(!e.org_id)return;let n=(0,_.qD)(s),i={extension:{pluginId:n.plugin_id,iconUrl:n.redirect_icon_url,name:n.name},isWidget:s.is_widget,orgId:e.org_id,workspaceDetails:{workspaceId:e.workspace_id,workspaceName:e.workspace_name,fileKey:e.key,fileName:e.name},openedFrom:"community",fullscreenEditorType:null};r((0,E.to)({type:R.S,data:i}))},p=e=>{F(s.id,"existing_file",(0,A.wN)(e.editor_type),c),r(g.aI({resource:s,fullscreenEditorType:e.editor_type===v._Y.DESIGN&&(0,C.Pe)(l)?A.nT.DevHandoff:(0,A.wN)(e.editor_type),fileKey:e.key,userId:e.user_id}))};return n?.length===0?null:i.createElement(i.Fragment,null,i.createElement("div",{className:D.Dh},(0,m.tx)("community.detail_view.recent_files")),i.createElement("div",{className:D.Dr},n?n.map(e=>i.createElement(U,{key:e.key,fileIconType:function(e){switch(e.editor_type){case v._Y.DESIGN:return e.last_published_at?d.y1.PUBLISHED:d.y1.DESIGN;case v._Y.WHITEBOARD:return d.y1.WHITEBOARD;case v._Y.SLIDES:return d.y1.SLIDES;case v._Y.SITES:case v._Y.COOPER:case v._Y.FIGMAKE:return d.y1.DESIGN;default:(0,o.xb)(e.editor_type)}}(e),fileName:e.name,onClick:()=>{r(f.oB()),e.can_run?(0,w.zF)(s)?g.s0(r,()=>p(e)):p(e):e.requests_allowed&&u(e)}})):i.createElement("div",{className:D.d1},[...Array(6)].map((e,r)=>i.createElement("div",{key:r,className:D.iM})))))}function V({hasSecondaryDropdown:e,text:r,primaryFullscreenEditorType:n,resource:o}){let s=(0,a.wA)(),l=(0,S.uF)(o),c=(0,h.J)();return i.createElement(x,{onClick:()=>{if(!e){let e=!!(l.playground_fig_file||n===A.nT.DevHandoff);F(o.id,e?"playground":"new_file",n,c),s(f.oB());let r=()=>{s(g.aI({resource:o,fullscreenEditorType:n,isPlaygroundFile:e}))};(0,w.zF)(o)?g.s0(s,r):r()}},icon:i.createElement(u.B,{svg:k.A,className:D.K1}),text:r,rightIcon:e?i.createElement(u.B,{svg:M.A,className:D.Yr}):void 0})}function G(e,r,n){let u=(0,a.wA)(),p=(0,y.Um)(),_=p?.type===H&&p.data.resourceId===e.id&&p.data.viewContext===n,E=i.memo(function({primaryFullscreenEditorType:n}){let a=(0,T.yN)({migrationGroup:I.L.GROUP_1,component:"PluginTrySwitchEditorDropdown",attribute:"figjamDisabledAt",legacy:(e,r)=>r?.figjam_disabled_at??null,migrated:(e,r)=>r?.figjamDisabledAt??null}),E=(0,h.J)(),[y,v]=i.useState();(0,l.h)(()=>{!async function(){let r=await N.C.getRecentFiles({extensionId:e.id,isWidget:!!e.is_widget});(0,s.sx)("recent_files_for_plugins_loaded",{response_count:r.data.meta.length,extension_id:e.id,searchSessionId:E}),v(r.data.meta.filter(e=>e.can_run||e.requests_allowed).slice(0,6))}()});let w=(0,S.uF)(e),R=w.manifest.editorType?.sort()??[],P=!!w.playground_file_version_id||n===A.nT.DevHandoff,M=Array.from(new Set(R.map(e=>{switch(e){case C.FW.FIGMA:case C.FW.DEV:case C.FW.INSPECT:return n===A.nT.DevHandoff?A.nT.DevHandoff:A.nT.Design;case C.FW.FIGJAM:return a?null:A.nT.Whiteboard;case C.FW.SLIDES:return A.nT.Slides;case C.FW.SITES:return null;default:(0,o.xb)(e)}}))).filter(e=>null!=e),k=M.map(r=>({displayText:(0,m.t)("community.using.new_file"),preventDismissOnSelected:!0,render:()=>i.createElement(U,{fileIconType:function(e){switch(e){case A.nT.Design:return d.y1.DESIGN;case A.nT.Whiteboard:return d.y1.WHITEBOARD;case A.nT.DevHandoff:return d.y1.DESIGN;case A.nT.Slides:return d.y1.SLIDES;case A.nT.Sites:case A.nT.Figmake:case A.nT.Cooper:case A.nT.Illustration:return d.y1.DESIGN;default:(0,o.xb)(e)}}(r),onClick:()=>{F(e.id,"new_file",r,E),u(f.oB()),u(g.aI({resource:e,fullscreenEditorType:r}))}})})),x={displayText:(0,m.t)("community.using.new_file"),className:D.pz,preventDismissOnSelected:!0,render:()=>i.createElement(V,{hasSecondaryDropdown:k.length>1,text:(0,m.t)("community.using.new_file"),primaryFullscreenEditorType:n,resource:e}),children:k.length>1?k:void 0},G={displayText:(0,m.t)("community.using.playground_file"),className:D.pz,preventDismissOnSelected:!0,render:()=>i.createElement(V,{hasSecondaryDropdown:!1,text:(0,m.t)("community.using.playground_file"),primaryFullscreenEditorType:n,resource:e})};(0,b.U3)("resize",()=>{_&&u(f.oB())});let H=(()=>{let r=[];if(void 0===y||y.length>0)r.push({displayText:"recentFiles",preventDismissOnSelected:!0,render:()=>i.createElement(B,{files:y,resource:e,editorTypes:R})});else if(!P&&M.length>1)return k;return P?r.push(G):r.push(x),r})();return i.createElement(L.j,{autoHeight:!0,className:D.qN,dispatch:u,hidePointWhenContentOffScreen:!0,items:H,lean:r,minWidth:280,onSelectItem:c.lQ,parentRect:p?.data.targetRect,rootAndSubmenuMaxWidth:280,showPoint:!1,subMenuClassName:D._3,type:O.it.MATCH_BACKGROUND})});return{dropdownIsShown:_,toggleSwitchEditorDropdown:(r,i)=>{let a=r.current?.getBoundingClientRect();a&&((void 0!==i?i:!_)?u(f.j7({type:H,data:{resourceId:e.id,viewContext:n,targetRect:a}})):u(f.oB()))},PluginTrySwitchEditorDropdown:E}}let H="PLUGIN_TRY_SWITCH_EDITOR_DROPDOWN"},800407:(e,r,n)=>{n.d(r,{KM:()=>p,YJ:()=>g,fJ:()=>_,x5:()=>m});var i=n(848318),a=n(536384),o=n.n(a),s=n(17755),l=n(442313),c=n(727341),d=n(140515),u=n(70909),p=(e=>(e.PUBLISH="publish",e.PERMISSIONS="permissions",e.DATA_SECURITY="data_security",e))(p||{});let m=["publish","data_security","permissions"],h=[{tab:m[0],title:()=>(0,l.t)("community.publishing.publish_tab"),isVisible:()=>!0},{tab:m[1],title:()=>(0,l.t)("community.publishing.data_security_tab"),isVisible:()=>!0},{tab:m[2],title:()=>(0,l.t)("community.publishing.permissions_tab"),dataOnboardingKey:d.k,isVisible:()=>!0}];function _(e){let r=(0,c.GS)();return i.createElement("div",{className:e.tab===e.selectedTab?o()(u.xR,{[u.E3]:r}):o()(u.Mf,{[u.E3]:r}),key:e.tab,role:"tab",onClick:()=>e.onClick(e.tab),onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),tabIndex:0,"data-onboarding-key":e.dataOnboardingKey},e.title())}function g(e){return i.createElement("div",{className:s.s.flex.itemsCenter.$,role:"tablist"},h.map(r=>e.allowedTabs.includes(r.tab)&&r.isVisible()?i.createElement(_,{key:r.tab,selectedTab:e.selectedTab,onClick:e.onClick,tab:r.tab,title:r.title,dataOnboardingKey:r.dataOnboardingKey}):null))}},561431:(e,r,n)=>{n.d(r,{X$:()=>o,YW:()=>l,ab:()=>c,ho:()=>s,ox:()=>d});var i=n(23354),a=n(532398);function o(e,r){return(0,i.UI)({path:a.Uo.FILE,id:e,name:r})}function s(e,r){return(0,i.UI)({path:a.Uo.PLUGIN,id:e,name:r})}function l(e,r){return(0,i.UI)({path:a.Uo.WIDGET,id:e,name:r})}function c(e,r){return new URL(s(e,r),location.href).href}function d(e,r){return new URL(l(e,r),location.href).href}},732939:(e,r,n)=>{n.d(r,{H:()=>p});var i=n(848318),a=n(716544),o=n(442313),s=n(544795),l=n(142751),c=n(526830),d=n(464012),u=n(117592);let p=(0,d.Ju)(function({plugin:e}){let r,n,d,p;let m=(0,a.wA)(),h=e.is_widget?(0,o.t)("community.plugins.widget"):(0,o.t)("community.plugins.plugin"),_=()=>{m(l.et({resource:e}))};return(0,s.AC)(e)?(n=(0,o.t)("community.plugins.withdraw_from_review"),r=e.roles.org?(0,o.t)("community.plugins.this_action_will_remove_your_public_resource_type_review_submission_your_resource_type_will_still_be_available_to_members_of_org_name",{resourceType:h,orgName:e.roles.org.name}):(0,o.t)("community.plugins.this_action_will_remove_your_public_resource_type_review_submission",{resourceType:h}),d=(0,o.t)("community.plugins.withdraw"),p=()=>{e.roles.org?m(l.zn({pluginId:e.id,role:e.roles})):_()}):((0,c.m3)(e)?(n=(0,o.t)("community.plugins.delist_your_resource_type",{resourceType:h}),r=(0,o.t)("community.resource.delisting_this_resource_will_prevent_people_from_discovering_or_purchasing_this_resource"),d=(0,o.t)("community.resource.delist")):(n=(0,o.t)("community.plugins.unpublish_resource_type",{resourceType:h}),r=(0,o.t)("community.plugins.this_action_will_cause_your_resource_type_to_disappear_current_users_will_lose_access_to_your_resource_type_immediately_you_cannot_undo_this_action_however_if_you_publish_your_resource_type_again_later_it_will_keep_its_url",{resourceType:h}),d=(0,o.t)("community.resource.unpublish")),p=_),i.createElement(u.Rw,{confirmationTitle:n,content:r,onConfirm:p,confirmText:d,size:"small",destructive:!0,disableClickOutsideToHide:!0,enableEscapeToClose:!0,popStack:!0})},"UnpublishPluginModal",d.ZU.YES)},555799:(e,r,n)=>{n(53620),n(256543),n(673906),n(157907),n(579020)},138761:(e,r,n)=>{n(53620);var i=n(878028);n(665471),n(555799),n(50744);var a=(e=>(e.GOOGLE="google",e.OPENAI="openai",e))(a||{});i.z.object({suggestions:i.z.array(i.z.object({propertyName:i.z.string().describe("Name of the property on the component that you are modifying"),propertyValue:i.z.string().describe("Suggested value for the property"),confidence:i.z.number().min(0).max(1).describe("Confidence score between 0 and 1")}))})},720917:(e,r,n)=>{n(848318),n(53620),n(256543),n(157907),n(541525),n(369600),n(138761),n(507152),n(757033),n(948895),n(50744)},99042:(e,r,n)=>{n.d(r,{fu:()=>o,xB:()=>a}),n(848318),n(992277),n(179703),n(157907);var i=n(39773);n(579020),n(397579),n(379338),n(640823),n(502255),n(579463),n(808471),n(353304),n(686132),n(542143),n(555799),n(138761),n(720917);let a=(0,i.eU)(null),o=(0,i.eU)(void 0)},50744:(e,r,n)=>{n(741419),n(192187)},353304:(e,r,n)=>{n.d(r,{B_:()=>H,Fv:()=>j,Pp:()=>x,Ql:()=>G,Rq:()=>et,T1:()=>er,X9:()=>K,Yi:()=>X,ZH:()=>Z,_P:()=>Y,aO:()=>Q,dl:()=>B,eM:()=>V,f3:()=>J,fx:()=>ei,k4:()=>q,lg:()=>en,qe:()=>M,s_:()=>ea,ui:()=>$,wd:()=>z,wh:()=>R,xP:()=>W,xb:()=>U,zn:()=>F});var i=n(848318),a=n(669443),o=n(375632),s=n(944996),l=n(593881),c=n(473977),d=n(514153),u=n(318582),p=n(408115),m=n(951550),h=n(569073),_=n(496095),g=n(516686),f=n(256543),E=n(741419),y=n(157907),b=n(579020),v=n(457040),T=n(442313),I=n(627855),S=n(718451),w=n(919699),A=n(839808),C=n(213162),N=n(275646),L=n(754946),O=n(911168);let R=304;var P=(e=>(e[e.DEFINITION=0]="DEFINITION",e[e.ASSIGNMENT=1]="ASSIGNMENT",e))(P||{}),D=(e=>(e[e.REGULAR=0]="REGULAR",e[e.WIDE=1]="WIDE",e[e.UNBOUNDED=2]="UNBOUNDED",e[e.RESIZABLE_SIDEBAR=3]="RESIZABLE_SIDEBAR",e))(D||{});function M(e){switch(e){case E.J0O.BOOL:return N.A;case E.J0O.NUMBER:return O.A;case E.J0O.TEXT:return C.A;case E.J0O.INSTANCE_SWAP:return A.A;case E.J0O.IMAGE:return L.A;case E.J0O.SLOT:return A.A}}let k={[E.J0O.BOOL]:{SIZE_24_SMALL:a.$,SIZE_16:o.X},[E.J0O.TEXT]:{SIZE_24_SMALL:s.p,SIZE_16:l.T},[E.J0O.INSTANCE_SWAP]:{SIZE_24_SMALL:c.V,SIZE_16:d.m},[E.J0O.NUMBER]:{SIZE_24_SMALL:u.O,SIZE_16:p.c},[E.J0O.IMAGE]:{SIZE_24_SMALL:m.s,SIZE_16:h._},[E.J0O.SLOT]:{SIZE_24_SMALL:_.h,SIZE_16:g.R}};function F(e,r=!1){let n=k[e][r?"SIZE_16":"SIZE_24_SMALL"];return i.createElement(n,null)}function x(e,r,n,i){e&&(0,b.sx)("ds_component_props_def_create_modal_open",{product_component_guid:e.guid,product_component_is_state_group:e.isStateGroup,is_bottoms_up_creation:r,prop_type:E.J0O[n],source:i})}function U(e){switch(e){case E.J0O.BOOL:return(0,T.t)("design_systems.component_properties.boolean");case E.J0O.TEXT:return(0,T.t)("design_systems.component_properties.text");case E.J0O.INSTANCE_SWAP:return(0,T.t)("design_systems.component_properties.instance_swap");case E.J0O.VARIANT:return(0,T.t)("design_systems.component_properties.variant");case E.J0O.NUMBER:return(0,T.t)("design_systems.component_properties.number");case E.J0O.IMAGE:return(0,T.t)("design_systems.component_properties.image");case E.J0O.SLOT:return(0,T.t)("design_systems.component_properties.slot")}}function B(e,r){if((0,S.gl)(r))return S.oV;if(r&&"object"==typeof r&&"type"in r&&r.type===E.Z_n.ALIAS||(0,y.k)().ds_variable_props_binding_props&&r&&"object"==typeof r&&"type"in r&&r.type===E.Z_n.NODE_FIELD_ALIAS)return r;switch(e){case E.J0O.BOOL:return"true"===r;case E.J0O.IMAGE:case E.J0O.TEXT:case E.J0O.INSTANCE_SWAP:case E.J0O.NUMBER:case E.J0O.SLOT:return r;default:throw Error(`Unexpected component prop type: ${e}`)}}function V(e){switch(e){case f.RR.VISIBLE:return{defaultType:E.J0O.BOOL,types:[E.J0O.BOOL]};case f.RR.TEXT:return{defaultType:E.J0O.TEXT,types:[E.J0O.TEXT,E.J0O.NUMBER]};case f.RR.OVERRIDDEN_SYMBOL_ID:return{defaultType:E.J0O.INSTANCE_SWAP,types:[E.J0O.INSTANCE_SWAP]}}}function G(e){switch(e){case E.J0O.BOOL:return!0;case E.J0O.TEXT:return"";case E.J0O.INSTANCE_SWAP:return null;case E.J0O.VARIANT:return(0,T.t)("design_systems.states_panel.default_property_value");case E.J0O.NUMBER:return"0";case E.J0O.IMAGE:return null}}function H(e,r){switch(e){case E.J0O.INSTANCE_SWAP:return!!r;case E.J0O.TEXT||E.J0O.VARIANT:return!!r?.length;case E.J0O.NUMBER:return et(r);default:return!0}}let K={format:e=>e?(0,T.t)("design_systems.component_properties.boolean_true"):(0,T.t)("design_systems.component_properties.boolean_false"),isEqual:(e,r)=>e===r};function W(e,r){if(!r.length)return null;let n=e(r[0]);return n&&r.every(r=>e(r)===n)?n:null}function z(e,r){if(!e.length)return null;let{backingSymbolGUID:n,backingStateGroupGUID:i}=(0,w.nD)(new Set(e),r);return i&&(0,S.hS)(i)?r.get(i):n&&(0,S.hS)(n)?r.get(n):S.oV}function $(e,r,n){return(0,I.Oo)(e,n)?E.glU.getDefaultStateForLocalStateGroup(r):E.glU.getDefaultStateForSubscribedStateGroup(r,e.default_state_key)}function Y(e){if(e)try{return new URL(e).hostname}catch(e){}}var j=(e=>(e.PILL="pill",e.ICON="icon",e))(j||{});function q(e,r){let n;if(e.length){for(let i of e){let e=r.get(i);if(e){if(e.isInstance){let r=e.symbolId;if(!r)continue;if(void 0===n)n=r;else if(r!==n)return}else if(e.isCodeInstance){let r=e.backingCodeComponent?.guid;if(!r)continue;if(void 0===n)n=r;else if(r!==n)return}else if(e.isCodeLayer){if(void 0===n)n=e.guid;else if(e.guid!==n)return}}}return n}}function X(e,r){let n;if(e.length){for(let i of e){let e=r.get(i);if(!e||"INSTANCE"!==e.type)continue;let a=e.symbolId;if(!a)continue;let o=r.get(a);if(!o)continue;if(o.isLooseComponent)return;let s=o.containingStateGroupId;if(s){if(void 0===n)n=s;else if(s!==n)return}}return n}}function Z(e,r){if(!e.length)return new Set;let n=new Set(r[e[0]]?.hiddenProps);return e.reduce((e,n)=>r[n]?.hiddenProps?(0,v.iR)(e,new Set(r[n].hiddenProps)):e,n)}function J(e,r){return e?r[e]?.componentPropDefError??E.uXg.NONE:E.uXg.NONE}function Q(e,r){let n=r[e]?.defs;return n?Object.values(n).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1):[]}let ee=/^[+-]?(\d+(\.\d*)?|\.\d+)$/;function et(e){if(!ee.test(e))return!1;let r=parseFloat(e);return!isNaN(r)&&isFinite(r)&&""!==e.trim()}function er(e){return et(e)?Number(parseFloat(e).toFixed(2)):(console.warn("Failed converting string to float:",e),0)}function en(e){return isNaN(e)?(console.warn("Failed converting number to string:",e),"0"):e.toFixed(2).replace(/\.?0+$/,"")}function ei(e){if(e?.length===1)switch(e[0]){case"TEXT_DATA":return f.RR.TEXT;case"VISIBLE":return f.RR.VISIBLE;default:return}}function ea(e){return i.useMemo(()=>e===E.J0O.BOOL?{variableType:E.rXF.BOOLEAN,requestedTypes:[E.rXF.BOOLEAN],variableScope:E.j0r.ALL_SCOPES}:e===E.J0O.TEXT?{variableType:E.rXF.TEXT_DATA,requestedTypes:[E.rXF.STRING],variableScope:E.j0r.TEXT_CONTENT}:e===E.J0O.NUMBER?{variableType:E.rXF.FLOAT,requestedTypes:[E.rXF.FLOAT],variableScope:E.j0r.ALL_SCOPES}:void 0,[e])}},424939:(e,r,n)=>{n.d(r,{S3:()=>I});var i=n(848318);n(716544),n(719670);var a=n(897378),o=n(605988);n(256543),n(741419),n(673906),n(353788),n(157907),n(125055),n(770303),n(857188);var s=n(654104);n(983229),n(26257),n(575492);var l=n(566699);n(975806);var c=n(442313);n(667323),n(742784),n(926252),n(697751),n(992444),n(449977);var d=n(773422);n(950738),n(51910),n(369600),n(705363),n(747863),n(931516);var u=n(503024);n(25904),n(678290),n(924283),n(878641),n(174615),n(302839),n(533168),n(139476),n(268904),n(601143),n(678517),n(52953),n(541910);var p=n(949651),m=n(174625);n(450796),n(923713),n(6760),n(353304),n(342874),n(957268),n(296452);var h=n(218889),_=n(631970),g=n(435789);function f({value:e,index:r,isRenaming:n,onInputKeyDown:i,setRenamingIndex:a,setSelectedIndices:o,renameValueForAllStates:s}){let{useGrid:l}=React.useContext(UI3GridGatingContext),c=useMaybeStopArrowKeyPropagation();return React.createElement("div",{className:styles.variantValueInputWrapper},n?React.createElement(RecordableInput,{className:styles.variantValueInput,onKeyDown:r=>{c(r),i(r,e)},onBlur:r=>{s(e,r.currentTarget.value),l&&a(null)},recordingKey:SafeRecord.joinKeys("editVariantPropertyValue",r),defaultValue:e,onFocus:e=>{l&&e.stopPropagation(),e.target?.select()},autoFocus:!0}):React.createElement(Inaccessible.recordableDiv,{autoFocus:!0,className:styles.variantValueInput,onMouseDown:e=>e.stopPropagation(),onFocus:()=>{a(r),o([r])},recordingKey:SafeRecord.joinKeys("variantValueName",r),tabIndex:0},e))}function E({value:e,numVariantsWithPropertyValue:r,selectVariantsWithPropertyValue:n}){let i=t("design_systems.component_properties.select_variants_with_property_value",{numVariants:r});return React.createElement(IconButton,{disabled:!r,onClick:()=>n(e),"aria-label":i,recordingKey:SafeRecord.joinKeys("editComponentPropDefPicker","targetButton"),htmlAttributes:{onMouseDown:e=>e.stopPropagation(),"data-tooltip":i,"data-tooltip-type":TooltipType.TEXT}},React.createElement(SvgUI3Compat,{svg:TARGET_ICON,fallbackSvg:TARGET_ICON_1X},React.createElement(Icon24Select,null)))}function y({componentPropDef:e,dropdownShown:r,shouldShowVariableBinding:n,boundVariable:i}){let a=useDispatch(),o=React.useCallback(r=>{e.type===ComponentPropType.BOOL&&r!==propValueToCastedValue(ComponentPropType.BOOL,e.defaultValue)&&editScope.user("edit-prop-default-value",()=>Fullscreen.editBoolComponentPropDefDefaultValue(e.explicitDefID,r))},[e]);return React.createElement("div",{className:styles.inputContainer},n?React.createElement(VariableValueInputForm,{variableValue:i??getDefaultVariableValueForResolvedType(VariableResolvedDataType.BOOLEAN,propValueToCastedValue(ComponentPropType.BOOL,e.defaultValue)),onChange:e=>{o(e.value)},recordingKey:SafeRecord.joinKeys("editComponentPropDefaultValue",propTypeToLocalizedString(e.type)),innerContainerClassName:styles.booleanCellOverride}):React.createElement(Select,{id:"edit-component-prop-default-value-select",property:propValueToCastedValue(ComponentPropType.BOOL,e.defaultValue),onChange:o,dispatch:a,formatter,dropdownShown:r,inputClassName:styles.input,recordingKey:SafeRecord.joinKeys("editComponentPropDefaultValue",propTypeToLocalizedString(e.type))},React.createElement(Option,{value:!0}),React.createElement(Option,{value:!1})))}function b({componentPropDef:e,shouldShowVariableBinding:r}){let[n,i]=React.useState(e.type===ComponentPropType.TEXT?e.defaultValue:""),a=React.useCallback(()=>{e.type===ComponentPropType.TEXT&&n&&n!==e.defaultValue&&editScope.user("edit-prop-default-value",()=>{Fullscreen.editTextComponentPropDefDefaultValue(e.explicitDefID,n)})},[e,n]);return React.createElement("div",{className:styles.inputContainer},React.createElement(ConditionalWrapper,{condition:r,wrapper:e=>React.createElement(VariableInputControl,{noBorder:!0,recordingKey:SafeRecord.joinKeys("componentPropDefTextInput","variableInputControl")},e)},React.createElement(ExpandingTextarea,{className:styles.textArea,onChange:e=>editScope.user("edit-prop-default-value",()=>i(e.currentTarget.value)),onBlur:a,onKeyDown:e=>{e.stopPropagation(),e.keyCode!==Key.ENTER||e.shiftKey||e.currentTarget.blur()},value:n,onFocus:e=>e.currentTarget?.select(),recordingKey:SafeRecord.joinKeys("editComponentPropDefaultValue",propTypeToLocalizedString(e.type))})))}function v({componentPropDef:e,shouldShowVariableBinding:r}){let[n,i]=React.useState(e.type===ComponentPropType.NUMBER?e.defaultValue:0),a=React.useCallback(e=>{isValidFloat(e)&&i(stringToFloat(e))},[]),o=React.useCallback(()=>{e.type===ComponentPropType.NUMBER&&void 0!==n&&n!==e.defaultValue&&editScope.user("edit-prop-default-value",()=>Fullscreen.editNumberComponentPropDefDefaultValue(e.explicitDefID,n))},[e,n]);return React.createElement("div",{className:styles.inputContainer},React.createElement(ConditionalWrapper,{condition:r,wrapper:e=>React.createElement(VariableInputControl,{noBorder:!0,recordingKey:SafeRecord.joinKeys("componentPropDefNumberInput","variableInputControl")},e)},React.createElement(ExpandingTextarea,{className:styles.textArea,onChange:e=>editScope.user("edit-prop-default-value",()=>a(e.currentTarget.value)),onBlur:o,onKeyDown:e=>{e.stopPropagation(),e.keyCode!==Key.ENTER||e.shiftKey||e.currentTarget.blur()},value:floatToString(n),onFocus:e=>e.currentTarget?.select(),recordingKey:SafeRecord.joinKeys("editComponentPropDefaultValue",propTypeToLocalizedString(e.type))})))}function T({componentPropDef:e,modalWidth:r,instanceSwapDefaultValue:n,openFileKey:i}){let a=useSceneGraph(),o=useDispatch(),{preferredValues:s,preferredValuesFetchError:l,retryPreferredValuesFetch:c}=usePreferredValues(e),d=React.useMemo(()=>l?React.createElement(PreferredValuesFetchError,{onRetry:c,recordingKey:"editComponentPropDef"}):void 0,[l,c]);return React.createElement("div",{className:styles.inputContainer},React.createElement(InstanceSwapPickerToggle,{entrypointForLogging:InstanceSwapPickerLogging.InstancePickerEntrypoint.EDIT_COMPONENT_PROP_PICKER,instanceSwapNode:n,onSwapCallback:r=>{o(ensureComponentOrStateGroupIsLoaded({item:r,callback:n=>{let a=r.type===AssetType.STATE_GROUP?getDefaultStateGUID(r,n,i):n;editScope.user("edit-prop-default-value",()=>Fullscreen.editInstanceComponentPropDefDefaultValue(e.explicitDefID,a))}}))},pickerID:`edit-instance-swap-prop-picker-${e.explicitDefID}`,pickerWidth:r,preferredItems:s,preferredValuesErrorComponent:d,sceneGraph:a,shouldPerformSwapOnClick:!0,title:t("design_systems.component_properties.choose_default_instance_value")}))}function I({value:e,onClear:r}){let n=e.value,f=(0,d.u)(n),E=(0,d.BQ)(n??void 0);return f?i.createElement("div",{className:h.gL},i.createElement("div",{className:_.K8},i.createElement(m.P,{value:f?.name,variableId:n,isStandalone:!0,thumbnailValue:E,isDeleted:(0,p.eF)(f)})),i.createElement(a.K,{onClick:()=>r(E),htmlAttributes:{"data-tooltip":(0,c.t)("design_systems.component_properties.detach_property"),"data-tooltip-type":u.Ib.TEXT},recordingKey:s.Pt("componentPropDef","detachVariableButton"),"aria-label":(0,c.t)("design_systems.component_properties.detach_property")},i.createElement(l.U,{className:h.G9,svg:g.A,fallbackSvg:g.A},i.createElement(o.U,{className:h.G9})))):i.createElement(i.Fragment,null)}function S({componentPropDef:e,shouldShowVariableBinding:r}){let{modalWidth:n}=usePickerMeasurements(PickerType.INSTANCE_SWAP_PICKER),i=useOpenFileKey(),a=useDropdownShown(),o=useSelector(r=>e?.type===ComponentPropType.INSTANCE_SWAP?getHighestBackingProductComponent([e.defaultValue],r.mirror.sceneGraph):null),s=React.useMemo(()=>e.type===ComponentPropType.BOOL||e.type===ComponentPropType.NUMBER||e.type===ComponentPropType.TEXT,[e.type]),l=React.useMemo(()=>s&&e.varValue.type===VariableDataType.ALIAS,[s,e]),c=React.useMemo(()=>l?e.varValue:void 0,[l,e]);if(l&&r)return React.createElement(I,{value:e.varValue,onClear:r=>{editScope.user("component-prop-def",()=>Fullscreen.unbindComponentPropDef(e.explicitDefID,r))}});switch(e.type){case ComponentPropType.BOOL:return React.createElement(y,{componentPropDef:e,dropdownShown:a,shouldShowVariableBinding:r,boundVariable:c});case ComponentPropType.TEXT:return React.createElement(b,{componentPropDef:e,shouldShowVariableBinding:r});case ComponentPropType.NUMBER:return React.createElement(v,{componentPropDef:e,shouldShowVariableBinding:r});case ComponentPropType.INSTANCE_SWAP:return React.createElement(T,{componentPropDef:e,modalWidth:n,instanceSwapDefaultValue:o,openFileKey:i});case ComponentPropType.IMAGE:case ComponentPropType.SLOT:return null;default:assertNever(e.type)}}},152301:(e,r,n)=>{n.d(r,{s:()=>a});var i=n(718451);function a(e,r,n){if(!e)return{};let a={};for(let o of r){let r=e[o]?.stateVariantProps?.propertyValues;if(r)for(let e of n)e in a&&a[e]!==r[e]?a[e]=a[e]&&r[e]?i.oV:"":a[e]=r[e]||""}return a}},686132:(e,r,n)=>{n(848318),n(716544),n(741419),n(897392),n(157907),n(575058),n(718451),n(153059),n(353304),n(152301),n(478622),n(976035)},342874:(e,r,n)=>{n.d(r,{J0:()=>f,Kn:()=>I,_A:()=>v,bq:()=>w,dl:()=>A,fN:()=>g,i0:()=>S,wS:()=>N});var i=n(848318),a=n(716544);n(256543),n(741419);var o=n(575058),s=n(8374),l=n(926252),c=n(870769),d=n(778727);n(343285);var u=n(747314);n(931516);var p=n(503024),m=n(271796),h=n(53818),_=n(478622);let g=e=>["preferredValuesInstancePicker",...e],f=e=>({"data-tooltip-type":p.Ib.TEXT,"data-tooltip-show-left":!0,...(0,m.pf)(e)}),E=()=>{},y=new Promise(e=>{E=e});function b(){E(),y=new Promise(e=>{E=e})}let v=e=>`GET_MISSING_PREFERRED_PRODUCT_COMPONENTS_FOR_${e}`,T=(e,r)=>({callback:E,promise:y,resetPromise:b,loadingKey:v(e.getState().openFile?.key),callbackForComponent:r});(0,s.nF)((e,{stateGroupKeys:r,componentKeys:n,callback:i})=>{l.tL(n,r,e,T(e,i))});var I=(e=>(e.ADD="ADD",e.REMOVE="REMOVE",e))(I||{});function S(e,r){let n=(0,a.d4)(d.FZ),o=(0,a.d4)(u.c5),[s,l]=(0,i.useState)(()=>{let i=[];if("string"==typeof e){let a=(0,c.NY)(e,r,n,o);a&&i.push(a)}return i});return[s,l]}function w(e){return(0,i.useCallback)((r,n)=>{e(e=>{let i=[...e];return r.forEach(e=>{let r=(0,c.CG)(e),a=i.findIndex(e=>r===(0,c.CG)(e));a>-1&&"ADD"!==n?i.splice(a,1):-1===a&&"REMOVE"!==n&&i.push(e)}),i})},[e])}function A(e){return(0,i.useCallback)(r=>{e([...r])},[e])}let C=(0,h.n)(e=>(!!e.component_key||!!e.key)&&!e.unpublished_at);function N(e){let r=(0,a.d4)(_.Lg),n=(0,a.d4)(d.FZ),s=(0,i.useMemo)(()=>!!r&&C(n[r]??{}),[r,n]);return(0,o.k9)(()=>s?new Set(e.filter(e=>!C(e)).map(e=>e.node_id)):new Set,[s,e])}},957268:(e,r,n)=>{n(848318),n(716544),n(654104),n(166365),n(442313),n(928001),n(342874),n(527659)},482710:(e,r,n)=>{n.d(r,{Yc:()=>w,yQ:()=>A});var i=n(848318),a=n(716544),o=n(473977),s=n(256543),l=n(921494),c=n(654104),d=n(566699),u=n(442313),p=n(790355),m=n(449737),h=n(950738),_=n(503024),g=n(651620),f=n(246633),E=n(58017),y=n(353304),b=n(66569),v=n(478622),T=n(366796),I=n(731035);let S=e=>e.stopPropagation();function w(e,r){let n=i.useMemo(T.On,[]),a=i.useMemo(v.Ms,[]),{containingProductComponent:o,defReferencedBySelection:c,nodesHaveInstanceSublayer:d,selectionHasProductComponent:u}=(0,l.R)(i=>{let o=(0,v.Lg)(i),s=o?i.mirror.sceneGraph.get(o):null,l=a(i,r);return{containingProductComponent:s,defReferencedBySelection:n(i,e),nodesHaveInstanceSublayer:l,selectionHasProductComponent:(0,v.Ln)(i)}});return!i.useMemo(()=>!!o?.guid&&!d&&(!u||e!==s.RR.VISIBLE),[o,d,u,e])||!!c}function A({nodeField:e,defaultValue:r,guids:n}){let s=i.useRef(null),A=w(e,n),C=function(e){let r=(0,l.R)(e=>e.modalShown),n=i.useMemo(()=>(0,y.eM)(e).defaultType,[e]),a=E.sD.concat("-",e),o=(0,h.Um)(),s=!!o&&o.type===a&&o.data.nodeField===e,c=!!r&&r.type===b.n.type&&r.data?.propType===n;return s||c}(e),N=function(e,r,n,o){let s=(0,a.wA)(),c=i.useMemo(()=>(0,y.eM)(e).defaultType,[e]),d=i.useMemo(T.p1,[]),{containingProductComponent:u,hasExistingDefs:h}=(0,l.R)(r=>{let n=(0,v.Lg)(r);return{containingProductComponent:n?r.mirror.sceneGraph.get(n):null,hasExistingDefs:!!d(r,n,e).length}});return i.useCallback(()=>{if(r.current){if(h)s(p.j7({type:E.sD.concat("-",e),data:{nodeField:e,targetRect:r.current.getBoundingClientRect()}}));else{(0,y.Pp)(u,!0,c,y.Fv.ICON);let i=r.current,a=i?(0,g.cn)(i,y.wh):{};s(m.to({type:b.n,data:{prePopulatedDefaultValue:n,propType:c,refField:e,initialX:a?.x??0,initialY:a?.y??0}}))}}},[r,h,void 0,s,e,u,c,n])}(e,s,r),L=function(e){let r=i.useMemo(T.p1,[]),{hasExistingDefs:n}=(0,l.R)(n=>{let i=(0,v.Lg)(n);return{hasExistingDefs:!!r(n,i,e).length}}),a=i.useMemo(()=>(0,y.eM)(e).defaultType,[e]);return n?(0,u.t)("design_systems.component_properties.apply_component_property",{propType:(0,y.xb)(a).toLocaleLowerCase()}):(0,u.t)("design_systems.component_properties.create_component_property_of_type",{propType:(0,y.xb)(a).toLocaleLowerCase()})}(e);return A?null:i.createElement(i.Fragment,null,i.createElement("div",{ref:s},i.createElement(f.YW,{recordingKey:c.Pt("applyPropRefButton",e),selected:C,"data-tooltip-type":_.Ib.TEXT,"data-tooltip":L,onMouseDown:S,onClick:N},i.createElement(d.U,{svg:I.A},i.createElement(o.V,null)))),i.createElement(E.Xn,{source:y.Fv.ICON,nodeField:e,defaultValue:r}))}},513547:(e,r,n)=>{n.d(r,{L:()=>Z});var i=n(848318),a=n(716544),o=n(817552),s=n(513886),l=n(897378),c=n(331196),d=n(754861),u=n(605988),p=n(452551),m=n(256543),h=n(741419),_=n(673906),g=n(536384),f=n.n(g),E=n(818754),y=n(921494),b=n(654104),v=n(182059),T=n(874249),I=n(566699),S=n(357287),w=n(442313),A=n(195567),C=n(790355),N=n(727341),L=n(449977),O=n(747863),R=n(153059),P=n(503024),D=n(487061),M=n(678517),k=n(163677),F=n(492678),x=n(58017),U=n(353304),B=n(478622),V=n(366796),G=n(27776),H=n(246565),K=n(435789),W=n(985908),z=n(388041),$=n(546131);let Y=v.ms,j=v.c$,q="component-prop-pill-dropdown",X=e=>{e.preventDefault(),e.stopPropagation()};function Z(e){let r;let{nodeField:n,currentValue:l,instanceGUIDs:d}=e,u=(0,N.GS)(),p=i.useMemo(V.en,[]),_=i.useContext(k.p),{containingProductComponentGUID:g,containingInstanceGUID:v,def:D,selectionHasInstanceSublayer:M,zombieRefNameFromSelection:K,dropdownShown:W}=(0,y.R)(e=>{let r=(0,R.Sh)(e);return{containingProductComponentGUID:(0,B.Lg)(e),containingInstanceGUID:(0,B.UR)(e),def:p(e,d??r,n),selectionHasInstanceSublayer:(0,B.PY)(e),zombieRefNameFromSelection:(0,V.pN)(e,n),dropdownShown:e.dropdownShown}}),$=(0,a.wA)(),X=i.useCallback(e=>{g&&D&&$(C.j7({type:q,data:{position:{top:e.clientY,left:Math.min(e.clientX,window.innerWidth-(0,E.hG)(G.uj0)/2)}}}))},[g,D,$]),Z=i.useRef(null),en=x.sD.concat("-",n),ei=i.useRef(null),ea=b.rf(`propPill.${n}`,"click",()=>{!M&&D&&ei.current&&(ei.current&&(n===m.RR.TEXT||n===m.RR.VISIBLE)?_?.showBindingUI(ei.current):$(C.j7({type:en,data:{nodeField:n,targetRect:ei.current.getBoundingClientRect()}})))}),eo=i.useCallback(()=>{let e=D?.explicitDefID;g&&e&&(L.wr(),L.Dh([g]),$(A.n0({propDefId:e})))},[g,D,$]),es=W?.type===q,el=(0,O.o3)(O.nt.variablePillA11y)&&u,ec=i.useRef(null),ed=(0,o.R)(ec);if(!D)return null;let eu=g?(0,w.t)("design_systems.component_properties.link_unlinked_property_help_text"):(0,w.t)("design_systems.component_properties.unlinked_property_help_text");D?.type===h.J0O.BOOL?r="BOOLEAN":D?.type===h.J0O.TEXT?r="STRING":D?.type===h.J0O.NUMBER&&(r="FLOAT");let ep=i.createElement(T.a,{className:f()({[H.Q_]:M,[H.LC]:!M,[H.RH]:W?.type===en,[H.YM]:D?.type===h.J0O.INSTANCE_SWAP}),onClick:ea,pillRef:ei},i.createElement("div",{ref:Z},D?i.createElement(I.U,{svg:(0,U.qe)(D.type)},r?i.createElement("div",{className:H.K8},i.createElement(F.i,{type:r})):i.createElement("div",null)):i.createElement("div",{"data-testid":"zombie-prop-icon"},i.createElement(I.U,{svg:z.A},i.createElement(c.G,null)))),i.createElement("p",{className:H.Me},D?.name??K)),em=i.createElement(s.o,{eventListeners:["onMouseDown"]},i.createElement("div",{className:H.V_,"data-tooltip-type":P.Ib.TEXT,"data-tooltip-offset-x":(()=>{if(Z.current&&ei.current)return Z.current.offsetLeft+Z.current.offsetWidth/2-(ei.current.offsetLeft+ei.current.offsetWidth/2)})(),"data-tooltip":D?D&&ed?D.name:null:eu,"data-tooltip-tip-align-left":!0,"data-tooltip-text-left":!0,ref:ec},ep)),eh=i.createElement(J,{containingInstanceGUID:v,containingProductComponentGUID:el?g:void 0,propDefId:D?.explicitDefID}),e_=i.createElement(Q,{nodeField:n}),eg=i.createElement(ee,{nodeField:n,zombieRefNameFromSelection:K,currentValue:l}),ef=i.createElement(er,{goToPropertyButton:eh,detachPropertyButton:e_,addPropertyButton:eg,selectionHasInstanceSublayer:M,containingProductComponentGUID:g,zombieRefNameFromSelection:K}),eE=i.createElement(et,{input:em,ui2RefButton:ef,goToPropertyButton:eh,detachPropertyButton:e_,addPropertyButton:eg,selectionHasInstanceSublayer:M,containingProductComponentGUID:g,zombieRefNameFromSelection:K,def:D,onContextMenu:X,nodeField:n}),ey=i.createElement(S.n.div,{className:H.t$,onContextMenu:X,"data-test-id":"component-prop-pill"},em,ef);return i.createElement(i.Fragment,null,u?eE:ey,es&&!el&&i.createElement(Y,{style:W?.data.position,positionFixed:!0},i.createElement(j,{onClick:eo,recordingKey:"go-to-property"},(0,w.tx)("design_systems.component_properties.go_to_property"))),i.createElement(x.Xn,{source:U.Fv.PILL,nodeField:n,iconWidth:Z?.current?Z.current.getBoundingClientRect().width/2+10:void 0}))}function J(e){let{containingInstanceGUID:r,containingProductComponentGUID:n,propDefId:o}=e,s=(0,a.wA)(),c=r||n,u=i.useCallback(()=>{c&&o&&(L.wr(),L.Dh([c]),s(A.n0({propDefId:o})))},[c,o,s]);return i.createElement(l.K,{onClick:u,"aria-label":(0,w.t)("design_systems.component_properties.go_to_property"),recordingKey:"selectContainingInstance",htmlAttributes:{"data-tooltip":(0,w.t)("design_systems.component_properties.go_to_property"),"data-tooltip-type":P.Ib.TEXT}},i.createElement(I.U,{svg:W.A},i.createElement(d.A,null)))}function Q(e){let{nodeField:r}=e,n=i.useCallback(()=>{_.l7.user("delete-prop-ref",()=>h.glU.deleteComponentPropRef(r))},[r]);return i.createElement(l.K,{onClick:n,"aria-label":(0,w.t)("design_systems.component_properties.detach_property"),recordingKey:"deleteComponentPropRef",htmlAttributes:{"data-tooltip":(0,w.t)("design_systems.component_properties.detach_property"),"data-tooltip-type":P.Ib.TEXT,"data-onboarding-key":D.FX}},i.createElement(I.U,{svg:K.A},i.createElement(u.U,null)))}function ee(e){let{nodeField:r,zombieRefNameFromSelection:n,currentValue:a}=e,o=i.useCallback(()=>{n&&_.l7.user("add-prop-ref",()=>{switch(r){case m.RR.TEXT:h.glU.addTextComponentPropDef(n,a,r,null);break;case m.RR.VISIBLE:h.glU.addBoolComponentPropDef(n,a,r,null);break;default:throw Error(`Unexpected node field for component prop: ${r}`)}})},[r,n,a]);return i.createElement(l.K,{onClick:o,"aria-label":(0,w.t)("design_systems.component_properties.link_unlinked_property"),recordingKey:"addComponentPropDefFromZombieRef",htmlAttributes:{"data-tooltip":(0,w.t)("design_systems.component_properties.link_unlinked_property"),"data-tooltip-type":P.Ib.TEXT}},i.createElement(I.U,{svg:$.A},i.createElement(p.x,null)))}function et(e){let{input:r,ui2RefButton:n,goToPropertyButton:a,detachPropertyButton:o,addPropertyButton:s,selectionHasInstanceSublayer:l,containingProductComponentGUID:c,zombieRefNameFromSelection:d,def:u,onContextMenu:p,nodeField:_}=e,g=(0,O.o3)(O.nt.variablePillA11y),{ui3FirstButton:E,ui3SecondButton:y}=i.useCallback(()=>g?{ui3FirstButton:a,ui3SecondButton:o}:{ui3FirstButton:l?i.createElement("span",{onContextMenu:X},a):i.createElement("span",{onContextMenu:X},o),ui3SecondButton:!l&&c&&d?i.createElement("span",{onContextMenu:X},s):null},[a,o,s,g,l,c,d])();return i.createElement(S.n.div,{onContextMenu:p},y?i.createElement(M.pG,{dataTestId:"component-prop-pill",appendedClassName:f()(H.t$,{[H.uZ]:u?.type===h.J0O.INSTANCE_SWAP,[H.fd]:_===m.RR.TEXT}),input:r,leftIcon:E,rightIcon:y}):i.createElement(M.DE,{dataTestId:"component-prop-pill",appendedClassName:f()(H.t$,{[H.uZ]:u?.type===h.J0O.INSTANCE_SWAP,[H.fd]:_===m.RR.TEXT}),input:r,icon:n,label:null}))}function er(e){let{goToPropertyButton:r,detachPropertyButton:n,addPropertyButton:a,selectionHasInstanceSublayer:o,containingProductComponentGUID:s,zombieRefNameFromSelection:l}=e;return i.createElement("span",{onContextMenu:X},o?r:i.createElement("div",{className:H.UD},n,s&&l&&a))}},822870:(e,r,n)=>{n.d(r,{Ae:()=>u});var i=n(73823),a=n.n(i),o=n(925040),s=n(71313),l=n(153059),c=n(478622);(0,s.P8)([c.C1,c.S8,c.TJ],(e,r,n)=>{if(!n&&e&&r&&e[r])return e[r].primaryInstances});let d=(0,s.P8)([l.dK,c.C1,c.S8,c.TJ,c.QW],(e,r,n,i,o)=>{if(i)return;let s=[],l=new Set;if(r&&n&&r[n]){let i=e.get(n);if(!i)return;if(!i.isStateGroup||0===o.length)return a()(r[n].primaryInstances?.filter(e=>e.isBubbled)||[],e=>[e.connectedGUIDs,...e.bubbledNestedInstances.map(e=>e.connectedGUIDs)]);for(let e of o)for(let n of r[e]?.primaryInstances?.filter(e=>e.isBubbled)||[]){if(n.connectedGUIDs&&!l.has(n.connectedGUIDs[0])){for(let e of n.connectedGUIDs)l.add(e);s.push(n.connectedGUIDs)}for(let e of n.bubbledNestedInstances)if(e.connectedGUIDs&&!l.has(e.connectedGUIDs[0])){for(let r of e.connectedGUIDs)l.add(r);s.push(e.connectedGUIDs)}}return s}}),u=(0,s.P8)([c.C1,l.AF],(e,r)=>{if(!r||!r.isAlive||"INSTANCE"!==r.type)return[];let n=r.guid;return e&&n&&e[n]?e[n].bubbledNestedInstanceGUIDs?.map(e=>[e])??[]:[]});(0,o.Mz)([d,u],(e,r)=>e||r||[])},815230:(e,r,n)=>{n.d(r,{UT:()=>u,z4:()=>p});var i=n(925040),a=n(718451),o=n(153059),s=n(366796),l=n(976035);let c=(0,i.Mz)([s.W0],e=>e.length>0),d=(0,i.Mz)([l.x1],e=>e.length>0);(0,i.Mz)([c,d],(e,r)=>e||r);let u=(0,i.Mz)([o.F4],e=>{if(!e.length)return null;let r=new Set(e.map(e=>e.textContent)),[n]=r;return 1===r.size?n:a.oV});function p(){return(0,i.Mz)([(0,l.Cu)(),(0,s.Ee)()],(e,r)=>[...e,...r])}(0,i.Mz)([l.x1,s.W0],(e,r)=>[...e,...r])},478622:(e,r,n)=>{n.d(r,{C1:()=>c,Lg:()=>h,Ln:()=>R,Ms:()=>L,Nw:()=>u,PY:()=>O,QW:()=>p,S8:()=>_,TJ:()=>N,UR:()=>T,VC:()=>m,X9:()=>S,d:()=>C,nM:()=>D,tK:()=>E,tc:()=>I,y7:()=>d});var i=n(925040);n(35474);var a=n(504791);n(718451);var o=n(870769),s=n(153059),l=n(353304);let c=e=>e.mirror.selectionProperties.componentProps,d=(0,i.Mz)([s.dK,s.Sh],P),u=(0,i.Mz)([s.dK,s.Sh],D),p=(0,i.Mz)([s.dK,s.Sh],(e,r)=>{let n=new Set;for(let i of r){let r=e.get(i)?.containingSymbolId;r&&n.add(r)}return Array.from(n)}),m=()=>(0,i.Mz)([s.dK,(e,r)=>r],(e,r)=>D(e,r)??P(e,r)),h=(()=>{let e=m();return r=>e(r,(0,s.Sh)(r))})(),_=(0,i.Mz)([d,u],(e,r)=>e??r),g=()=>(0,i.Mz)([(e,r)=>r,s.dK],(e,r)=>{let n=(0,a.p)(e,e=>{let n=r.get(e);return!!n&&(0,o.LI)(n)});for(let i of e){let e=r.get(i),a=e?.containingStateGroupId??e?.containingSymbolId;if(a&&a!==n)return}return n??void 0}),f=()=>(0,i.Mz)([(e,r)=>r,s.dK],(e,r)=>(0,a.p)(e,e=>{let n=r.get(e);return!!n&&(0,o.FS)(n)})??void 0);(()=>{let e=g();return r=>e(r,(0,s.Sh)(r))})();let E=()=>(0,i.Mz)([m(),g()],(e,r)=>e??r),y=()=>(0,i.Mz)([f()],e=>e),b=(()=>{let e=E();return r=>e(r,(0,s.Sh)(r))})();(0,i.Mz)([b,s.dK],(e,r)=>e?r.get(e):null);let v=(()=>{let e=y();return r=>e(r,(0,s.Sh)(r))})();(0,i.Mz)([v,s.dK],(e,r)=>e?r.get(e):null);let T=(0,i.Mz)([c,s.Sh],(e,r)=>{if(e)return(0,l.xP)(r=>e[r]?.containingInstance,r)??void 0}),I=()=>(0,i.Mz)([c,(e,r)=>r],(e,r)=>{if(e)return(0,l.xP)(r=>e[r]?.containingInstanceBackingSymbol,r)??void 0}),S=()=>(0,i.Mz)([c,s.dK,(e,r)=>r],(e,r,n)=>{if(!e)return;let i=n.map(r=>e[r]?.containingInstance||r);return M(e,i,r)}),w=(0,i.Mz)([c,s.Sh],(e,r)=>{if(e)return k(e,r)}),A=(0,i.Mz)([c,s.Sh,s.dK],(e,r,n)=>{if(e)return M(e,r,n)}),C=()=>(0,i.Mz)([c,(e,r)=>r,s.dK],(e,r,n)=>{if(!e)return;let i=[];for(let e of r){let r=n.get(e);if(!r||r.isLooseComponent||r.isState||r.isStateGroup)return;r.symbolId&&i.push(e)}return M(e,i,n)??k(e,i)}),N=(0,i.Mz)([A,w],(e,r)=>r??e),L=()=>(0,i.Mz)([s.dK,(e,r)=>r],(e,r)=>r.some(r=>e.get(r)?.isInstanceSublayer??!1)),O=(()=>{let e=L();return r=>e(r,(0,s.Sh)(r))})(),R=(0,i.Mz)([s.F4],e=>e.some(e=>"SYMBOL"===e.type||!!e.isStateGroup));function P(e,r){return(0,l.xP)(r=>e.get(r)?.containingSymbolId,r)??void 0}function D(e,r){return(0,l.xP)(r=>e.get(r)?.containingStateGroupId,r)??void 0}function M(e,r,n){return(0,l.xP)(r=>{let i=e[r]?.backingSymbol;if(i)return n.get(i)?.containingStateGroupId},r)??void 0}function k(e,r){return(0,l.xP)(r=>e[r]?.backingSymbol??e[r]?.containingInstanceBackingSymbol,r)??void 0}(0,i.Mz)([s.F4],e=>e.every(e=>"SYMBOL"===e.type||"INSTANCE"===e.type||!!e.isSymbolSublayer||!!e.isInstanceSublayer))},366796:(e,r,n)=>{n.d(r,{Ee:()=>N,On:()=>S,Tn:()=>w,W0:()=>y,en:()=>T,p1:()=>v,pN:()=>b,vS:()=>C});var i=n(741419),a=n(925040),o=n(71313),s=n(431118),l=n(442313),c=n(718451),d=n(7712),u=n(153059),p=n(353304),m=n(139476),h=n(478622);let _=(0,o.P8)([h.C1,(e,r)=>r],(e,r)=>e&&r&&e[r]?.defs||{}),g=(0,o.P8)([h.C1,h.Lg],(e,r)=>e&&r?e[r]?.defs??{}:{}),f=(0,o.P8)([g],e=>Object.values(e).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1).map(e=>e.name)),E=()=>(0,o.P8)([h.C1,(0,h.tK)(),(0,h.d)()],(e,r,n)=>{let i=n??r;return e&&i?Object.values(e[i]?.defs||{}).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1):[]}),y=(()=>{let e=E();return r=>e(r,(0,u.Sh)(r))})(),b=(0,a.Mz)([h.C1,u.Sh,(e,r)=>r],(e,r,n)=>{if(e)return(0,p.xP)(r=>{let i=e[r]?.refs?.[n];if(i?.isLinked===!1)return i.fallbackName},r)??void 0});function v(){return(0,o.P8)([_,(e,r,n)=>n],(e,r)=>{let n=(0,p.eM)(r).types,i=Object.values(e).filter(({type:e})=>n.includes(e));return(0,s.DV)(i,e=>e.name.toLocaleLowerCase()),i})}let T=()=>(0,a.Mz)([h.C1,(0,h.VC)(),(0,h.tc)(),(0,h.X9)(),(e,r,n)=>r,(e,r,n)=>n],(e,r,n,i,a,o)=>{if(!e)return null;if(r){let n=(0,p.xP)(r=>{let n=e[r]?.refs?.[o];if(n?.isLinked)return n.explicitDefID},a);if(n)return e[r]?.defs?.[n]||null}let s=I(e,a,o);return s&&n?e[n]?.defs?.[s]||null:s&&i&&e[i]?.defs?.[s]||null}),I=(e,r,n)=>{let i=[];for(let n of r){let r=e[n]?.correspondingSymbolSublayer;if(!r)return null;i.push(r)}return(0,p.xP)(r=>{let i=e[r]?.refs?.[n];if(i?.isLinked)return i.explicitDefID},i)};function S(){let e=T();return(r,n)=>e(r,(0,u.Sh)(r),n)}let w=()=>(0,a.Mz)([h.C1,(e,r,n)=>r,(e,r,n)=>n],(e,r,n)=>{if(!e)return!1;let i=[];for(let n of r){i.push(n);let r=e[n]?.correspondingSymbolSublayer;r&&i.push(r)}return i.some(r=>e[r]?.refs?.[n]!==void 0)}),A=()=>(0,o.P8)([h.C1,u.dK,(e,r)=>r],(e,r,n)=>{if(!e||0===n.length)return{};let i=(0,p.k4)(n,r),a=(0,p.Yi)(n,r)??i;if(!a)return{};let o=Object.keys(e[a]?.defs??{});if(0===o.length)return{};let s={};for(let i of o){let a=null;for(let o of n){let n=r.get(o);if(n?.type!=="INSTANCE")continue;let s=e[n.guid]?.assignments;if(!s)continue;let l=s[i];if(null!=l){if(l.isMixed){a={isMixed:!0};break}if(null===a)a={isMixed:!1,value:l.value};else if(a.value!==l.value){a={isMixed:!0};break}}}a&&(s[i]=a)}return s}),C=(0,a.Mz)([(e,r)=>r,(e,r,n)=>n,f,u.AF],(e,r,n,a)=>{if(e===i.J0O.BOOL&&r){let e=a?.name?(0,l.t)("design_systems.component_properties.boolean_property_default_name",{selectedNodeName:a.name}):(0,l.t)("design_systems.component_properties.boolean_property_default_name_fallback",{numSelected:a?1:2});return(0,d.g)(e,n)}if(e===i.J0O.NUMBER&&r){let e=(0,l.t)("design_systems.component_properties.number_property_default_name");return(0,d.g)(e,n)}{let r=e===i.J0O.INSTANCE_SWAP?(0,l.t)("design_systems.component_properties.instance_swap_property_default_name"):(0,p.xb)(e);return(0,d.g)(r,n)}});function N(){return(0,o.P8)([u.dK,E(),A(),h.C1,(e,r)=>r],(e,r,n,a,o)=>{if(!a)return[];let s=(0,p.ZH)(o,a);return r.filter(e=>!s.has(e.explicitDefID)).map(r=>{let a=r.defaultValue;if(null!=n[r.explicitDefID]){let e=n[r.explicitDefID];a=e?e.isMixed?c.oV:null==e.value?m.xJ:e.value:m.xJ}if(r.type===i.J0O.INSTANCE_SWAP&&a!==m.xJ&&a!==c.oV){let r=(0,p.wd)([a],e);a=r&&(0,c.hS)(r)?r.name:m.xJ}return{name:r.name,value:a,type:r.type}})})}},976035:(e,r,n)=>{n.d(r,{Cu:()=>g,YH:()=>y,x1:()=>E});var i=n(256543),a=n(741419),o=n(925040),s=n(71313),l=n(442313),c=n(718451),d=n(7712),u=n(153059),p=n(353304),m=n(152301),h=n(139476),_=n(478622);function g(){return(0,s.P8)([h.uL,_.C1,u.dK,(e,r)=>r],(e,r,n,i)=>{if(!r||0===i.length)return[];let o=(0,p.Yi)(i,n)??(0,_.nM)(n,i);if(!o||i.includes(o))return[];let s=r[o]?.stateGroupVariantProps;if(!s)return[];let d=(0,m.s)(r,i,s.propertySortOrder);return(s.propertySortOrder||[]).map(e=>{let r=!function(e){if(2===e.length){let r=e.map(e=>e.toLowerCase());for(let e of h.NE){let n=r.indexOf(e[0]),i=r.indexOf(e[1]);if(-1!==n&&-1!==i)return!0}}return!1}(s.propertyValues[e])?a.J0O.VARIANT:a.J0O.BOOL,n=d[e]||h.xJ;return(0,c.gl)(n)?{name:e,value:(0,l.t)("inspect_panel.property.mixed"),type:r}:{name:e,value:n,type:r}})})}let f=()=>(0,s.P8)([_.C1,(0,_.tK)(),(0,_.d)()],(e,r,n)=>{if(!e)return[];let o=n??r;return o?function(e,r){let n=r[e]?.stateGroupVariantProps;if(!n)return[];let o=(0,p.aO)(e,r),s=(0,p.f3)(e,r);return n.propertySortOrder.map(e=>{let r=s===a.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR&&o.some(r=>r.name===e),l=n.propertyValues[e];return{name:e,values:l,type:a.J0O.VARIANT,kind:i.uN.VARIANT,error:r?a.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR:a.uXg.NONE}})}(o,e):[]}),E=(()=>{let e=f();return r=>e(r,(0,u.Sh)(r))})(),y=(0,o.Mz)([E],e=>{let r=e.map(e=>e.name),n=(0,l.t)("design_systems.component_properties.variant_property_default_name");return(0,d.g)(n,r)})},614671:(e,r,n)=>{n.d(r,{$j:()=>R,Ht:()=>L,Jl:()=>V,M4:()=>B,Pd:()=>x,Se:()=>D,Zp:()=>U,fl:()=>C,gq:()=>O,ig:()=>P,j5:()=>A,qd:()=>M,vD:()=>N,w2:()=>F});var i=n(848318),a=n(622876),o=n(536384),s=n.n(o),l=n(442313),c=n(552032),d=n(360399),u=n(584305),p=n(727341),m=n(718451),h=n(483372),_=n(503024),g=n(685567),f=n(665665),E=n(189317),y=n(398145),b=n(601143),v=n(384561),T=n(642242),I=n(779179);let S={scrubMultiplier:1,wheelMultiplier:1,smallNudgeAmount:c.bA,bigNudgeAmount:c._q};function w({children:e,onNormalClick:r}){let{setScrubbableElement:n}=(0,i.useContext)(T.s),a=(0,i.useRef)(null),o=(0,i.useRef)(null),s=(0,i.useRef)(!1),l=(0,i.useRef)(null),c=(0,i.useRef)(null);(0,i.useEffect)(()=>(n(a.current),()=>n(null)),[n]);let d=(0,i.useCallback)(e=>{s.current=!1,l.current={x:0,y:0},c.current={x:e.clientX,y:e.clientY};let r=window.setTimeout(()=>{o.current=null},500);o.current=r},[]),u=(0,i.useCallback)(()=>{null===o.current||s.current||(clearTimeout(o.current),r?.()),o.current=null,l.current=null,c.current=null},[r]),p=(0,i.useCallback)(e=>{if(!l.current)return;let r=e.movementX,n=e.movementY;null==r&&null==n&&c.current&&(r=e.clientX-c.current.x,n=e.clientY-c.current.y,c.current={x:e.clientX,y:e.clientY}),l.current.x+=r,l.current.y+=n;let{x:i,y:a}=l.current;Math.sqrt(i*i+a*a)>5&&(s.current=!0)},[]);return(0,i.useEffect)(()=>()=>{null!==o.current&&clearTimeout(o.current)},[]),i.createElement("div",{ref:a,onPointerDown:d,onPointerUp:u,onPointerMove:p},e)}function A(e){let{onValueChange:r,forwardedRef:n,onKeyDown:a}=e,o=(0,i.useRef)(null),l=n??o,c=(0,b.Qu)(),d=(0,i.useCallback)(e=>{c(e),a?.(e)},[c,a]),_=(0,i.useCallback)(e=>r?.(e,h.zk.YES),[r]),f=(0,i.useCallback)(()=>{l.current?.focus(),l.current?.select()},[l]),v=(0,p.GS)(),A=e.isTokenizable?y.$:E.p_,C=(0,i.useCallback)(e=>i.createElement(w,{onNormalClick:f},e),[f]),N=v&&!e.minimizeScrubTargetWidth;return i.createElement(T.b,{...S,...e,scrubbingDisabled:e.scrubbingDisabled||e.disabled||null==e.value||e.value===m.oV&&!e.mixedMathHandler},e.childrenAtEnd?null:i.createElement(g.e,{condition:(!!e.children||!!N)&&v,wrapper:C},i.createElement(i.Fragment,null,e.children?e.children:N?i.createElement("div",{className:I.V}):null)),i.createElement(A,{allowEmpty:e.allowEmpty,autoFocus:e.autoFocus,className:s()(e.inputClassName,{[I.sC]:!0,[I.WC]:!e.childrenAtEnd&&v&&!e.children&&N}),dataTestId:e.dataTestId,disabled:e.disabled??null===e.value,ellipsis:v,formatter:e.formatter,forwardedRef:l,mixedMathCallback:e.mixedMathCallback,mixedMathHandler:e.mixedMathHandler,noBorderOnFocus:!0,noLeftBorder:e.noLeftBorder,onBlur:e.onBlur,onChange:_,onClick:e.onClick,onFocus:e.onFocus,onKeyDown:d,onKeyUp:e.onKeyUp,onMixedMathNudge:e.onMixedMathNudge,onMouseDown:u.dG,placeholder:e.placeholder,property:e.value??null,recordingKey:e.recordingKey,softDisabled:e.softDisabled,squareRightBorder:e.squareRightBorder}),e.childrenAtEnd?i.createElement(g.e,{condition:!!e.children&&v,wrapper:C},i.createElement(i.Fragment,null,e.children)):null,e.endNode)}function C({onMouseEnter:e,onMouseLeave:r,onMouseEnterNonPropagating:n,...a}){let o={...S,...a,noBorderOnFocus:a.noBorderOnFocus||a.disableSelectFocus};return i.createElement("div",{className:a.className},i.createElement(f.a3,{allowEmpty:a.allowEmpty,autoFocus:a.autoFocus,chevronClassName:a.chevronClassName,dataTestId:a.dataTestId,disableSelectFocus:a.disableSelectFocus,disabled:a.disabled,dispatch:a.dispatch,dropdownAlignment:a.dropdownAlignment,dropdownClassName:a.dropdownClassName,dropdownShown:a.dropdownShown,dropdownWidth:a.dropdownWidth,enablePreview:a.enablePreview,formatter:a.formatter,forwardedRef:a.forwardedRef,hasIconStyle:a.hasIconStyle,icon:a.icon,id:a.id,inputClassName:a.inputClassName,isTokenizable:a.isTokenizable,mixedMathHandler:a.mixedMathHandler,noPlaceholderLine:a.noPlaceholderLine,omitValueFromDropdown:a.omitValueFromDropdown,onChange:(e,r=h.zk.YES)=>{a.onValueChange?.(e,r)},onInputBlur:a.onBlur,onInputFocus:a.onFocus,onKeyDown:a.onKeyDown,onKeyUp:a.onKeyUp,onMouseEnter:e,onMouseEnterNonPropagating:n,onMouseLeave:r,onboardingKey:a.onboardingKey,openBelowTarget:a.openBelowTarget,optionsWithDisabledPreviews:a.optionsWithDisabledPreviews,placeholder:a.placeholder,property:a.value,recordingKey:a.recordingKey,scrubbableControlProps:o,targetDomNode:a.targetDomNode,unNamespacedInputRecordingKey:a.unNamespacedInputRecordingKey,willShowDropdown:a.willShowDropdown},a.children))}function N(e){let{min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o,formatter:s}=e,l=(0,i.useMemo)(()=>new d.Lk({min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o}),[r,n,a,o]);return i.createElement(C,{...e,formatter:s??l})}function L(e){let{min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o}=e,s=(0,i.useMemo)(()=>new d.X9({min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o}),[r,n,a,o]);return i.createElement(A,{...e,formatter:s})}function O(e){let{min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o,onEvaluateExpressionError:s}=e,l=(0,i.useMemo)(()=>new d.Lk({min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o,onEvaluateExpressionError:s}),[r,n,a,o,s]);return i.createElement(A,{...e,formatter:l})}function R({min:e=0,max:r,floatingPointFormat:n,onEvaluateExpressionError:a,...o}){let{smallNudgeAmount:s,bigNudgeAmount:l}=o,c=(0,i.useMemo)(()=>new d.Lk({min:Math.max(e,0),max:r,smallNudgeAmount:s,bigNudgeAmount:l,floatingPointFormat:n,onEvaluateExpressionError:a}),[e,r,s,l,n,a]);return i.createElement(A,{...o,formatter:c})}function P({min:e=0,max:r,...n}){let{smallNudgeAmount:a,bigNudgeAmount:o}=n,s=(0,i.useRef)(!1),l=(0,i.useMemo)(()=>new d.NB({min:Math.max(e,0),max:r,smallNudgeAmount:a,bigNudgeAmount:o}),[e,r,a,o]),c=(0,m.gl)(n.value)&&n.mixedMathHandler,u=n.disabled||n.scrubbingDisabled||"number"!=typeof n.value&&!Array.isArray(n.value)&&!c,p=n.isTokenizable?y.$:E.p_;return i.createElement(T.b,{...S,...n,formatter:l,scrubbingDisabled:u,onScrubBegin:e=>{s.current=!0,n.onScrubBegin?.(e)},onScrubEnd:e=>{s.current=!1,n.onScrubEnd?.(e)},className:n.className},n.children,i.createElement(p,{className:n.inputClassName,dataTestId:n.dataTestId,disabled:n.disabled,formatter:l,forwardedRef:n.forwardedRef,mixedMathHandler:n.mixedMathHandler,noBorderOnFocus:!0,onBlur:n.onBlur,onChange:e=>n.onValueChange(e,h.zk.YES),onClick:n.onClick,onFocus:n.onFocus,onKeyDown:n.onKeyDown,onMixedMathNudge:n.onMixedMathNudge,onNudge:n.onNudge,onPaste:n.onPaste,placeholder:n.placeholder,property:n.value??null,recordingKey:n.recordingKey,shouldClearOnFocus:n.shouldClearOnFocus,source:s.current?"scrub":"document"}))}function D({min:e,max:r,allowEmpty:n,...a}){let{smallNudgeAmount:o,bigNudgeAmount:s}=a,l=(0,i.useRef)(!1),c=(0,i.useMemo)(()=>new d.PZ({min:e,max:r,smallNudgeAmount:o,bigNudgeAmount:s,allowEmpty:n}),[e,r,o,s,n]),u=(0,m.gl)(a.value)&&a.mixedMathHandler,p=a.disabled||a.scrubbingDisabled||"number"!=typeof a.value&&!u,_=a.isTokenizable?y.$:E.p_;return i.createElement(T.b,{...S,...a,formatter:c,scrubbingDisabled:p,onScrubBegin:e=>{l.current=!0,a.onScrubBegin?.(e)},onScrubEnd:e=>{l.current=!1,a.onScrubEnd?.(e)},className:a.className},a.children,i.createElement(_,{allowEmpty:n,className:a.inputClassName,dataTestId:a.dataTestId,disabled:a.disabled,formatter:c,forwardedRef:a.forwardedRef,mixedMathHandler:a.mixedMathHandler,noBorderOnFocus:!0,onBlur:a.onBlur,onChange:e=>a.onValueChange(e,h.zk.YES),onFocus:a.onFocus,onKeyDown:a.onKeyDown,onMixedMathNudge:a.onMixedMathNudge,onNudge:a.onNudge,onPaste:a.onPaste,placeholder:a.placeholder,property:a.value??null,recordingKey:a.recordingKey,shouldClearOnFocus:a.shouldClearOnFocus,source:l.current?"scrub":"document"}))}function M({max:e=3600,displayFractions:r=!1,...n}){let a=(0,i.useMemo)(()=>new d.f0(e,r),[e,r]);return i.createElement(A,{...n,formatter:a})}let k={...S,scrubMultiplier:4,wheelMultiplier:2};function F({min:e=0,max:r=1,decimals:n,hidePercentSign:a,...o}){let{smallNudgeAmount:s,bigNudgeAmount:l}=o,c=(0,i.useMemo)(()=>new d.LN({min:e,max:r,smallNudgeAmount:s,bigNudgeAmount:l,decimals:n,hidePercentSign:a}),[e,r,s,l,n,a]);return i.createElement(A,{...k,...o,formatter:c,postScrubMultiplier:.001,postBigNudgeAmount:.1})}function x(e){let r="ui3"===(0,a.DP)().version,{inputClassName:n,...o}=e,c=e.ui3RightJustifyPercentSign??!0,d=(0,v.P)((0,l.t)("fullscreen.scrubbable.opacity"));return r?i.createElement(F,{...o,inputClassName:s()(n,{[I.Ww]:c}),"data-tooltip-type":_.Ib.TEXT,"data-tooltip":d,hidePercentSign:c,childrenAtEnd:c},c?i.createElement("span",{className:I.QK},(0,l.tx)("fullscreen.scrubbable.percent")):e.children):i.createElement(F,{...e,"data-tooltip-type":_.Ib.TEXT,"data-tooltip":(0,l.t)("fullscreen.scrubbable.opacity"),tooltipForScreenReadersOnly:!0})}function U(e){let{smallNudgeAmount:r,bigNudgeAmount:n}=e,a=(0,i.useMemo)(()=>new d.cu({smallNudgeAmount:r,bigNudgeAmount:n}),[r,n]);return i.createElement(A,{...e,formatter:a,postScrubMultiplier:e.reverseScrub?.5:-.5,postWheelMultiplier:e.reverseScrub?.2:-.2,postBigNudgeAmount:.1})}function B(e){let r=(0,i.useMemo)(()=>new d.cu({min:7.16,max:180}),[]);return i.createElement(A,{...e,formatter:r,postScrubMultiplier:.5,postBigNudgeAmount:.1,postWheelMultiplier:.2})}function V(e){let{min:r,smallNudgeAmount:n=c.bA,bigNudgeAmount:a=c._q,formatter:o}=e,s=(0,i.useRef)(!1),l=(0,i.useMemo)(()=>o??new d.h7({min:r,smallPixelNudgeAmount:n,bigPixelNudgeAmount:a}),[r,n,a,o]),u=e.isTokenizable?y.$:E.p_;return i.createElement(T.b,{...S,bigNudgeAmount:a,className:e.className,"data-tooltip":e["data-tooltip"],"data-tooltip-type":e["data-tooltip-type"],disabled:e.disabled,dispatch:e.dispatch,formatter:l,noBorderOnHover:e.noBorderOnHover,onScrubBegin:()=>{s.current=!0},onScrubEnd:()=>{s.current=!1},onValueChange:e.onValueChange,scrubMultiplier:e.scrubMultiplier,scrubbingDisabled:e.disabled,smallNudgeAmount:n,tooltipForScreenReadersOnly:e.tooltipForScreenReadersOnly,value:e.value},e.children,i.createElement(u,{className:e.inputClassName,disabled:e.disabled,formatter:l,noBorderOnFocus:!0,onChange:r=>e.onValueChange(r,h.zk.YES),placeholder:e.placeholder,property:e.value,recordingKey:e.recordingKey,shouldClearOnFocus:e.shouldClearOnFocus,source:s.current?"scrub":"document"}))}},25904:(e,r,n)=>{n.d(r,{sA:()=>C,sJ:()=>A});var i=n(848318),a=n(376025),o=n(543913),s=n(536384),l=n.n(s),c=n(175196),d=n(654104),u=n(983229),p=n(166365),m=n(442313),h=n(881393),_=n(773422),g=n(950738),f=n(503024),E=n(268904),y=n(52953),b=n(163677),v=n(362566),T=n(779179),I=n(838262),S=n(764361);let w=i.forwardRef(function({children:e,disabled:r,icon:n,inputClassName:a,isActive:o,nonTextChild:s,noBorder:c,onMouseDownCapture:p,onContextMenuCapture:m,onFocus:h,onBlur:_,onKeyDown:g,recordingKey:f},E){return i.createElement(u.D8,{forwardedRef:E,recordingKey:d.Pt(f,"comboInputControl","container"),className:l()(a,{[I.mc]:!0,[I.vu]:o,[I.KH]:!c,[I.r9]:r,[I.fE]:s}),onMouseDownCapture:p,onContextMenuCapture:m,onFocus:h,onBlur:_,onKeyDown:g},i.createElement("div",{className:I.I6},e),!r&&n)}),A=i.forwardRef(function({inputClassName:e,inputRef:r,currentFieldValue:n,recordingKey:s,disabled:u,children:h,hideIcon:_=!1,nonTextChild:y,isActive:A,onPickerOpen:C,disableEntryPoint:N=!1,noBorder:L,hasBindingContextMenu:O,onClickDetachButton:R,onFocus:P,onBlur:D},M){let k=i.useId(),F=(0,i.useContext)(b.p),x=F?.boundVariableId,U=(0,i.useRef)(null),B=(0,E.R)(),{showing:V,show:G,data:H,hide:K}=(0,g.BK)(v.v+k),W=i.useCallback(()=>{C?C():F?.showBindingUI(U.current,{currentFieldValue:n}),K()},[n,K,C,F]),z=i.useCallback(()=>{F?.onVariableSelected?.(void 0),K(),R?.()},[K,F,R]),$=d.rf(d.Pt(s,"detachIcon"),"click",z),Y=d.rf(s,"mousedown",e=>{if(e&&!N&&e.shiftKey){W(),e.preventDefault(),e.stopPropagation();return}}),j=d.rf(s,"contextmenu",e=>{e&&!N&&O&&r?.current&&(G({data:{position:{top:e.clientY,left:e.clientX}}}),e.preventDefault(),e.stopPropagation())}),q=_||N?null:x?i.createElement(a.E,{className:l()(I.AM,I.Ab),htmlAttributes:{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":(0,m.t)("variables.binding_ui.detach_variable_tooltip")},"aria-label":(0,m.t)("variables.binding_ui.detach_variable_tooltip"),onClick:$},i.createElement(o.o,{className:I.HQ})):i.createElement(p.B,{ariaLabel:(0,m.t)("fullscreen.properties_panel.apply_variable"),className:l()(I.Kk),"data-tooltip":B?(0,m.t)("fullscreen.properties_panel.apply_variable"):void 0,"data-tooltip-type":B?f.Ib.TEXT:void 0,dataTestId:d.Pt("variable-control-icon",s??""),onClick:W,recordingKey:d.Pt(s,"comboBoxButton"),role:"button",svg:S.default,tabIndex:-1});return i.createElement(i.Fragment,null,i.createElement(w,{ref:(0,c.A)(M,U),disabled:u,icon:q,inputClassName:l()(e,{[T.Gp]:!!q}),isActive:null!=A?A:!!F?.isShowingBindingUI,noBorder:L,nonTextChild:y,onBlur:D,onContextMenuCapture:j,onFocus:P,onKeyDown:e=>{"ArrowDown"===e.key&&e.altKey&&W()},onMouseDownCapture:Y,recordingKey:s},h),O&&r&&V&&"number"==typeof H?.position?.top&&"number"==typeof H?.position?.left&&i.createElement(v.G,{inputRef:r,isBound:!!F?.boundVariableId,left:H.position.left,onClose:K,onOpenVariablePicker:W,onUnbindVariable:$,recordingKey:d.Pt(s,"contextMenu"),top:H.position.top}))}),C=i.memo(function({fields:e,currentFieldValue:r,resolvedType:n,editingStyleGuid:a,inputClassName:o,inputRef:s,disabled:l,recordingKey:c,disableEntryPoint:d,hideIcon:u,noBorder:p,children:m,hasBindingContextMenu:h,onClickDetachButton:g,onBlur:f,onFocus:E}){let b=(0,_.SG)(e).data??[];return i.createElement(y._X,{fields:e,resolvedType:n,editingStyleGuid:a},i.createElement(A,{currentFieldValue:r,disableEntryPoint:!!d||0===b.length,disabled:l,hasBindingContextMenu:h,hideIcon:u,inputClassName:o,inputRef:s,noBorder:p,onBlur:f,onClickDetachButton:g,onFocus:E,recordingKey:c},m))});i.forwardRef(function({currentFieldValue:e,disabled:r,isActive:n,recordingKey:a,children:o,onPickerOpen:s,dataTestId:u,openOnRightClick:p,inputClassName:m,tooltip:_},g){let E=(0,i.useContext)(b.p),y=(0,i.useRef)(null),v=i.useCallback(()=>{s?s():E?.showBindingUI(y.current,{currentFieldValue:e})},[e,s,E]),T=d.rf(a,"mousedown",e=>{if(e&&!r){if(p){if((0,h.i)(e)){e.preventDefault(),e.stopPropagation();return}if(e.shiftKey&&1&e.buttons){v(),e.preventDefault(),e.stopPropagation();return}}else if(1&e.buttons){v(),e.preventDefault(),e.stopPropagation();return}}}),S=d.rf(a,"contextmenu",e=>{e&&!r&&(v(),e.preventDefault(),e.stopPropagation())});return i.createElement("div",{ref:(0,c.A)(g,y),className:l()(m,{[I.jX]:!0,[I.NH]:n&&!m}),onMouseDownCapture:T,onContextMenu:S,"data-testid":u,"data-tooltip-type":_?f.Ib.TEXT:void 0,"data-tooltip":_??void 0},o)})},190037:(e,r,n)=>{n.d(r,{A:()=>N});var i=n(848318),a=n(831932),o=n(716544),s=n(157907),l=n(39773),c=n(579020),d=n(95650),u=n(379338),p=n(757033),m=n(442313),h=n(697714),_=n(180423),g=n(176629),f=n(670673),E=n(35315),y=n(676448),b=n(887858),v=n(431060),T=n(151144);let I=(0,f.r1)("seen_mobile_proto_download_modal_prompt");function S(){let e=(0,o.wA)(),r=(0,l.md)(I),n=(0,o.d4)(e=>e.userAnalyticsData?.is_active_mobile_user),a=(0,o.d4)(e=>e.user?.created_at),f=(0,d.A)(a).add(14,"day").isSameOrAfter((0,d.A)()),{isShowing:S,show:w,complete:A}=(0,g.e)({overlay:T.y3_,priority:E.N.DEFAULT_MODAL},[r]);if((0,i.useEffect)(()=>{w({canShow:e=>!!(0,s.k)().mobile_download_modal_prompts&&!f&&!e&&!n})},[w,n,f]),!S)return null;let C=()=>{p.Ay.post("/api/send_mobile_download_email",{type:"prototype"}),(0,c.sx)("post_proto_mobile_app_download_prompt_email_me_cta_clicked"),A(),e(h.F.enqueue({message:(0,m.t)("rcs.mobile_comment_reply_upsell.email_sent")}))};return i.createElement(b.X,{description:(0,m.tx)("mobile_download_prompts.run_your_mobile_prototypes"),isShowing:S,media:i.createElement(y.y,{aspectRatio:1.75,alt:"A graphic show mobile prototypes with a qr code",src:(0,u.ck)("b50fba0faeea245feed92fe60337297d827e4984")}),onClose:()=>{A()},position:v.Q.BOTTOM_RIGHT,primaryCta:{label:(0,m.tx)("mobile_download_prompts.email_me"),type:"button",onClick:()=>C(),ctaTrackingDescriptor:_.c.MOBILE_APP_DOWNLOAD_PROTOTYPE_PROMPT_CLICKED},secondaryCta:{label:(0,m.tx)("mobile_download_prompts.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/1500007537281-Guide-to-the-Figma-mobile-app",ctaTrackingDescriptor:_.c.LEARN_MORE},title:(0,m.tx)("mobile_download_prompts.mobile_interactions"),trackingContextName:"Mobile Prototype Download Modal Prompt",userFlagOnShow:"seen_mobile_proto_download_modal_prompt"})}var w=n(273952),A=n(737209),C=n(828935);let N=i.memo(function(){return i.createElement(i.Fragment,null,i.createElement(C.p,null,i.createElement(w.w,null)),!a.Xb&&i.createElement(C.p,null,i.createElement(S,null)),i.createElement(C.p,null,i.createElement(A.b,null)))})},459704:(e,r,n)=>{n.d(r,{wH:()=>l}),n(848318),n(716544);var i=n(141039),a=n(405866);function o(e){switch(e){case"default":return"color_management_desktop_app_setting_default";case"unmanaged":return"color_management_desktop_app_setting_unmanaged";case"managed":return"color_management_desktop_app_setting_managed";case"srgb":return"color_management_desktop_app_setting_srgb"}}function s(e,r){return e.getState().userFlags[r]}function l(e){if(!i.eD)return;let r=i.eD?.getLegacyColorSpacePreference();!function(e,r,n){let{isDefault:i,isManaged:s,isSrgb:l,isUnmanaged:c}=r,d={};i&&"default"!==n&&(d.color_management_desktop_app_setting_default=!1),c&&"unmanaged"!==n&&(d.color_management_desktop_app_setting_unmanaged=!1),s&&"managed"!==n&&(d.color_management_desktop_app_setting_managed=!1),l&&"srgb"!==n&&(d.color_management_desktop_app_setting_srgb=!1);let u=i&&"default"===n||c&&"unmanaged"===n||s&&"managed"===n||l&&"srgb"===n;void 0===n||u||(d[o(n)]=!0),Object.keys(d).length>0&&e(a.b(d))}(e.dispatch,{isDefault:!!s(e,o("default")),isUnmanaged:!!s(e,o("unmanaged")),isManaged:!!s(e,o("managed")),isSrgb:!!s(e,o("srgb"))},r)}n(849752)},302451:(e,r,n)=>{n.d(r,{mM:()=>o,nQ:()=>s});var i=n(39773),a=(e=>(e.INTRO="Intro Step",e.STATUSES="Statuses Step",e.COMPARE_CHANGES="Compare Changes Step",e.ANNOTATIONS="Annotations Step",e.CODE_CONNECT="Code Connect Step",e.OUTRO="Outro Step",e))(a||{});(0,i.eU)("Intro Step"),(0,i.eU)(!1),(0,i.eU)(!1),(0,i.eU)(!1),(0,i.eU)(!1);let o=(0,i.eU)(!1),s=(0,i.eU)(!1)},87748:(e,r,n)=>{n(741419)},586649:(e,r,n)=>{n(848318),n(716544);var i=n(39773);n(730169),n(405866),n(176629),n(61818),n(496059),n(164936),n(684525);var a=n(670673);n(270070),n(92537),n(369600),n(376780),n(312255),n(35315),n(229424),n(906210),n(480771),n(306794),n(68745),n(151144),(0,i.eU)(!1),(0,a.r1)("dismissed_move_drafts_nudge")},661513:(e,r,n)=>{n.d(r,{s:()=>i}),n(848318),n(716544),n(179703),n(39773),n(405866),n(201494),n(176629),n(164936),n(684525),n(670673),n(270070),n(92537),n(369600),n(376780),n(635547),n(312255),n(35315),n(229424),n(480771),n(586649),n(306794),n(68745),n(151144);let i="Node Count Reached for Draft"},600923:(e,r,n)=>{n.d(r,{d:()=>o});var i=n(95650),a=n(579463);function o({emailValidatedAt:e,jobTitle:r}){return!!r||function(e){if(!e)return!1;let r=(0,a.gP)("days_allowed_to_see_nux").get("days",2);return(0,i.A)(e).add(r,"day").isBefore((0,i.A)())}(e)}},312885:(e,r,n)=>{n.d(r,{l5:()=>s});var i=n(39773),a=n(272659),o=(e=>(e.NOT_STARTED="NOT_STARTED",e.MODAL_SHOWING="MODAL_SHOWING",e.USE_CASE_STEPS="USE_CASE_STEPS",e.COMPLETED="COMPLETED",e))(o||{});(0,i.eU)("NOT_STARTED");let s=(0,i.eU)(a.fD.NONE);(0,i.eU)(!1)},990807:(e,r,n)=>{n.d(r,{Is:()=>a,Iv:()=>i});let i="sites-preview",a="sites-linting-error"},842609:(e,r,n)=>{n.d(r,{zM:()=>a}),n(848318),n(716544);var i=n(442313);n(500276),n(775038),n(34055),n(235441),n(727341),n(201494),n(176629),n(369600),n(241917),n(35315),n(680632),n(449345),n(409389),n(6760),n(345908),n(151144),n(642117);let a="open-playground-file-onboarding-event";(0,i.tx)("rcs.playground_file.switch_devmode_to_design_title")},680393:(e,r,n)=>{n.d(r,{oE:()=>o,zK:()=>a}),n(848318),n(39773),n(442313),n(201494),n(176629);var i=n(670673);n(35315),n(480771),n(68745),n(151144);let a="plugin-publish-invite-publishers-onboarding-event",o="plugin-publish-invite-publishers-click-event";(0,i.r1)("seen_plugin_publish_invite_publishers_onboarding")},491641:(e,r,n)=>{n.d(r,{n:()=>i});let i=(0,n(39773).eU)(!1)},475125:(e,r,n)=>{n.d(r,{Ih:()=>i,pN:()=>a}),n(405866);let i="seen_ready_for_dev_callout",a="seen_ui3_design_onboarding_steps"},640839:(e,r,n)=>{n.d(r,{uQ:()=>a}),n(848318);var i=n(39773);n(792647);let a=1;(0,i.eU)(null),(0,i.eU)(null)},60546:(e,r,n)=>{n.d(r,{$A:()=>y,LS:()=>v,YY:()=>T,ks:()=>b});var i=n(716544),a=n(741419),o=n(39773),s=n(308746),l=n(431118),c=n(442313),d=n(361214),u=n(109654),p=n(929683),m=n(278074),h=n(486934),_=n(489689),g=n(801107),f=n(241917),E=n(757134);function y(e){return e?.view==="fullscreen"&&e?.editorType===f.nT.DevHandoff}function b(){return(0,i.d4)(e=>y(e.selectedView))}function v(){return(0,i.d4)(e=>y(e.selectedView)&&(0,d.Mx)(e)&&(e.mirror.appModel.currentTool===a.NLJ.SELECT||e.mirror.appModel.currentTool===a.NLJ.DROPPER_COLOR||e.mirror.appModel.currentTool===a.NLJ.ANNOTATE||e.mirror.appModel.currentTool===a.NLJ.MEASURE))}class T{pathToSelectedView(e,r,n,i){let a=n?(0,s.v6)(n):{},l=r[1];if(("design"===l||"file"===l)&&("1"===a["ready-for-dev"]||("dev"===a.mode||"dev"===a.m)&&"auto"!==a.m)){let n="branch"===r[3]&&r[4]?r[4]:r[2],s={view:"fullscreen",editorType:e?.user?f.nT.DevHandoff:f.nT.Design,fileKey:n};(0,E.d8)(i,s),(0,E.qi)(a,s);let l=e?.openFile?.canAccessFullDevMode;a["cc-version-id"]&&(a["node-id"]||a["cc-node-id"])&&!a.vars&&l&&(s.compareChangesVersionId=a["cc-version-id"]),a["cc-activity-id"]&&(a["node-id"]||a["cc-node-id"])&&!a.vars&&l&&(s.compareChangesActivityId=a["cc-activity-id"]),a["cc-filter-status"]&&(a["cc-version-id"]||a["cc-activity-id"])&&(a["node-id"]||a["cc-node-id"])&&!a.vars&&l&&(s.filterStatusVersions="1"===a["cc-filter-status"]),a["cc-node-id"]&&a["cc-version-id"]&&!a.vars&&l&&(s.compareChangesNodeId=a["cc-node-id"]);let c=(0,u.b)(e);return"1"===a.vars?(s.showDevModeVariablesTable=!0,o.zl.set(m.$,p.Nh.DirectUrl),a["var-id"]&&(s.devModeVariablesTableSelectedVariable=a["var-id"])):c&&"1"===a["ready-for-dev"]&&(s.showOverview=!0),s.showDevModeVariablesTable||o.zl.set(m.$,null),y(s)&&("dev"===a.mode||"dev"===a.m)&&(s.mode="dev",!c||!a["focus-id"]||s.showOverview||a.vars||(s.devModeFocusId=a["focus-id"],a["node-id"]||(s.nodeId=a["focus-id"]))),s}return null}requireHistoryChange(e,r){return!1}selectedViewToPath(e,r){if(y(e)||"fullscreen"===e.view&&!0===e.showOverview){let n;if(e.fileKey===g.Zt)return(0,E.oU)();let i=this.selectedViewName(e,r),a=i?(0,l.sy)(i):"",o={},s=e.fileKey,c=e.fileKey&&r.fileByKey[e.fileKey],d="design";return c?n=(0,E.ZH)(d,s||"",a,c,(0,h.L8)(c,r.repos)):(n=`/${d}/${s}`,a?n+=`/${a}`:n+="/Untitled"),(0,E.gR)(o,e.nodeId),(0,E.H_)(o,e.nodeId),(0,E.Wi)(o,e.versionId),e.compareChangesVersionId&&(o["cc-version-id"]=e.compareChangesVersionId),e.filterStatusVersions&&(o["cc-filter-status"]=1),e.compareChangesNodeId&&(o["cc-node-id"]=(0,_.EO)(e.compareChangesNodeId)),e.devModeFocusId&&(o["focus-id"]=(0,_.EO)(e.devModeFocusId)),e.showOverview&&(o["ready-for-dev"]="1"),e.showDevModeVariablesTable&&(o.vars="1",e.devModeVariablesTableSelectedVariable&&(o["var-id"]=(0,_.Ml)(e.devModeVariablesTableSelectedVariable))),o.m="dev",n=(0,E.sR)(n,o),n=(0,E.qr)(n,e.commentThreadId)}return null}selectedViewName(e,r){if(y(e)){let n=null;if(e.fileKey){let i=r.fileByKey[e.fileKey];if(i){let e=(0,h.L8)(i,r.repos);n=e?(0,h.At)(i,e):i.name}}return n??(0,c.t)("dev_handoff.dev_handoff_view_selector.untitled")}return null}selectedViewHasMissingResources(e,r){return!!y(r)&&!!r.fileKey&&!(r.fileKey in e.fileByKey)}}},536572:(e,r,n)=>{n.d(r,{b:()=>m});var i=n(848318),a=n(622876),o=n(536384),s=n.n(o),l=n(145015),c=n(17755),d=n(500276),u=n(268274),p=n(939506);function m(e){let r="ui3"===(0,a.DP)().version,n=void 0!==e.media,o=void 0!==e.title,m=(e.stepCounter||e.primaryCta||e.secondaryCta||e.overrideFooter)!==void 0;return i.createElement(i.Fragment,null,i.createElement(u.AT,{isTooltip:e.isTooltip,title:e.title,description:e.description,onClose:e.onClose,emphasized:e.emphasized,hideCloseButton:e.hideCloseButton}),o&&!r&&i.createElement(l.Kz,{direction:"y",multiple:n?1.5:1}),n&&i.createElement(i.Fragment,null,e.media,!r&&i.createElement(l.Kz,{direction:"y",multiple:2})),o&&i.createElement("div",{className:s()(c.s.font11.fontNormal.lh16.$,p.g),style:d.sx.add({letterSpacing:"0.055px"}).$},e.description),m&&i.createElement(i.Fragment,null,!r&&i.createElement(l.Kz,{direction:"y",multiple:n||!o?2:3}),e.overrideFooter?e.overrideFooter:i.createElement(u.CJ,{stepCounter:e.stepCounter,primaryCta:e.primaryCta,secondaryCta:e.secondaryCta,emphasized:e.emphasized})))}},342592:(e,r,n)=>{n.d(r,{j:()=>a});var i=n(848318);function a(e){(0,i.useEffect)(()=>{let r=r=>{"Escape"===r.key&&e()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e])}},233082:(e,r,n)=>{n.d(r,{xx:()=>v});var i=n(848318),a=n(776402),o=n(777611),s=n(731755),l=n(356505),c=n(145015),d=n(17755),u=n(442313),p=n(500276),m=n(542052),h=n(180423),_=n(155651),g=n(727341),f=n(481540),E=n(464012),y=n(978041);function b(e){let r=(0,_.j6)(),n=a.hS({open:!0,onClose:n=>{switch(n.source){case"button":let i=r.name;return(0,f.Cu)({...r.properties,...null!=i?{trackingContext:i}:{},trackingDescriptor:h.c.CLOSE,text:"Close"}),e.onClose("close_button_clicked");case"outside":return e.onClose("modal_background_clicked");case"escape":return e.onClose("escape_button_pressed");case"other":return e.onClose("other")}},preventUserClose:e.preventUserClose});return i.createElement(_.fu,{name:e.trackingContextName,properties:e.trackingProperties},i.createElement(o.bL,{manager:n,width:e.width??700,overrideCloseButtonColor:e.closeButtonColor},i.createElement(s.vo,null,e.children)))}function v(e){return i.createElement(b,{...e},"landscape"===e.orientation?i.createElement(I,{...e}):i.createElement(T,{...e}),i.createElement(N,{stepCounter:e.stepCounter}))}function T(e){let r=(0,g.GS)();return i.createElement("div",{className:d.s.flex.$},i.createElement("div",{className:d.s.flex.flexColumn.justifyCenter.p32.$},i.createElement("div",{className:d.s.if(r,d.s.textHeadingLarge,d.s.fontInter.font24.fontSemiBold.lh32).$,style:p.sx.add({letterSpacing:"-0.456px"}).$},e.title),i.createElement(c.Kz,{direction:"y",multiple:1}),i.createElement("div",{className:d.s.if(r,d.s.textBodyLarge,d.s.fontInter.font14.fontNormal.lh24).$,style:p.sx.add({letterSpacing:"-0.084px"}).$},e.description),(e.primaryCta||e.secondaryCta)&&i.createElement(i.Fragment,null,i.createElement(c.Kz,{direction:"y",multiple:3}),i.createElement("div",{className:d.s.flex.gap8.$},e.primaryCta&&i.createElement(y.F,{defaultVariant:"primary",large:!0,ctaButtonMeta:e.primaryCta}),e.secondaryCta&&i.createElement(y.F,{defaultVariant:"secondary",large:!0,ctaButtonMeta:e.secondaryCta}))),e.disclaimerFooter&&i.createElement("div",{className:d.s.textBodySmall.colorTextSecondary.pt8.$},e.disclaimerFooter)),e.media)}function I(e){let r=(0,g.GS)();return i.createElement("div",{className:d.s.flex.flexColumn.$},e.media,i.createElement("div",{className:d.s.flex.pl32.pr32.pt32.pb24.gap32.$},i.createElement("div",{className:d.s.if(r,d.s.textHeadingLarge,d.s.fontInter.font24.fontSemiBold.lh32).w200.flexShrink0.$,style:p.sx.add({letterSpacing:"-0.456px"}).$},e.title),i.createElement("div",{className:d.s.if(r,d.s.textBodyLarge,d.s.fontInter.font14.fontNormal.lh24).$,style:p.sx.add({letterSpacing:"-0.084px"}).$},e.description)),i.createElement("div",{className:d.s.flex.pl32.pr32.gap8.justifyEnd.$},e.secondaryCta&&i.createElement(y.F,{defaultVariant:"secondary",large:!0,ctaButtonMeta:e.secondaryCta}),e.primaryCta&&i.createElement(y.F,{defaultVariant:"primary",large:!0,ctaButtonMeta:e.primaryCta})),e.disclaimerFooter&&i.createElement("div",{className:d.s.textBodySmall.colorTextSecondary.$},e.disclaimerFooter),i.createElement(c.Kz,{direction:"y",multiple:4}))}function S(e){return i.createElement("div",{className:d.s.absolute.left0.pl8.$,hidden:e.hidden},i.createElement(l.$n,{variant:"ghost",onClick:e.onBack},i.createElement("div",{className:d.s.font13.lh24.flex.itemsCenter.pr12.$},i.createElement(m.In,{icon:"chevron-left-32"}),(0,u.tx)("general.back"))))}function w(e){return i.createElement("div",{className:d.s.absolute.right0.pr8.$,hidden:e.hidden},i.createElement(l.$n,{variant:"ghost",onClick:e.onNext},i.createElement("div",{className:d.s.font13.lh24.flex.itemsCenter.pl12.$},(0,u.tx)("general.next"),i.createElement(m.In,{icon:"chevron-right-32"}))))}function A(e){return i.createElement("div",{className:d.s.absolute.right0.pr8.$,hidden:e.hidden},i.createElement(l.$n,{variant:"ghost",onClick:e.onDone},i.createElement("div",{className:d.s.font13.lh24.flex.itemsCenter.$},(0,u.tx)("general.done"))))}function C(e){let r=r=>r+1===e.stepNum;return i.createElement("div",{className:d.s.flex.gap8.h32.justifyCenter.itemsCenter.absolute.left0.right0.mxAuto.$},Array(e.totalNumSteps).fill(0).map((e,n)=>i.createElement("div",{className:d.s.w8.h8.bRadius8.b1.colorBorder.if(r(n),d.s.colorBgInverse,d.s.colorBg).$,key:n})))}function N(e){let{stepCounter:r}=e;if(!r)return null;let n=1===r.stepNum,a=r.stepNum===r.totalNumSteps;return i.createElement("div",{className:d.s.p8.bt1.colorBorder.bSolid.h32.$},i.createElement(C,{stepNum:r.stepNum,totalNumSteps:r.totalNumSteps}),i.createElement(S,{onBack:r.onBack,hidden:n}),i.createElement(w,{onNext:r.onNext,hidden:a}),i.createElement(A,{onDone:r.onNext,hidden:!a}))}n(716544),n(397579),n(449737),n(787203),(0,E.Ju)(()=>null,"FeatureAnnouncement")},51413:(e,r,n)=>{n.d(r,{l:()=>a});var i=n(848318);function a(e,r,n){(0,i.useEffect)(()=>{let i=i=>{e&&r.current&&!r.current.contains(i.target)&&n()};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[e,r,n])}},338745:(e,r,n)=>{n.d(r,{M:()=>o});var i=n(848318),a=n(20149);let o=i.forwardRef((e,r)=>{let n={};return e.shouldDisableAnimation||(n={initial:{translateY:10},animate:{translateY:0},transition:{duration:.2,ease:"easeInOut",translateY:{duration:1}},transformTemplate:(r,n)=>e.transformString?`${e.transformString} ${n}`:n}),i.createElement(a.P.div,{"data-preferred-theme":e.isTooltip?"dark":void 0,className:e.className,style:e.style,ref:r,role:"tooltip",layoutId:e.shouldDisableAnimation?void 0:"FeatureCallout",variants:n,layout:"position"},e.children)})},91888:(e,r,n)=>{n(848318),n(716544),n(39773),n(536384),n(831932),n(22647),n(731849),n(447438),n(5573),n(249555),n(143628)},121283:(e,r,n)=>{n.d(r,{YY:()=>i,nP:()=>a});let i=new Set(["USER","PLUGIN","AI","REST_API"]),a={MIXED:"MIXED",USER:"USER",PLUGIN:"PLGIN",AI:"AI",INVALID:"INVLD",SYSTEM:"SYSTM",TEST_SETUP:"TEST",REST_API:"REST",ONBOARDING:"ONBRD",AUTOSAVE:"ASAVE"}},141865:(e,r,n)=>{n.d(r,{bU:()=>o,wh:()=>i}),n(157907);let i=new Set(["name","characters","symbolDescription","description","url","canvasName","textContent","sourceCode"]),a=RegExp(`^(background|circle|column|component|dialog|document|ellipse|frame|group|icon|image|internal only canvas|line|padding|page|path|polygon|rectangle|row|star|text|union|vector)\\s*[\\d\\.]*$|^\\w\u2022+\\w( \\(\\d+ characters\\))?$`);function o(e,r){if(""===e)return"";if("show"===r)return e;let n='"'===e[0]&&'"'===e[e.length-1],i=n?e.substring(1,e.length-1):e;if(a.test(i.toLowerCase()))return e;let o=n?'"':"";return o+i[0]+i.substring(1,i.length-1).replace(/\S/g,"\u2022")+i[i.length-1]+o}},4516:(e,r,n)=>{n.d(r,{p:()=>s});var i=n(848318),a=n(157907),o=n(361256);i.memo(function(){return(0,a.k)().internal_only_debug_tools?i.createElement(c,null):null});let s=i.memo(function(){return(0,a.k)().internal_only_debug_tools?i.createElement(d,null):null}),l={loading:()=>null,error:function(){return i.useEffect(()=>{console.error("Failed to load FigmaScope")},[]),null}},c=o.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(6896),n.e(9727),n.e(7509),n.e(3663),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(5974),n.e(8355),n.e(9567),n.e(6739),n.e(4039),n.e(895)]).then(n.bind(n,808037)).then(e=>e.EmbeddedFigmaScopeViewForEditorEnabled),{...l,componentName:"EmbeddedFigmaScopeViewForEditorEnabled"}),d=o.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(6896),n.e(9727),n.e(7509),n.e(3663),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(5974),n.e(8355),n.e(9567),n.e(6739),n.e(4039),n.e(895)]).then(n.bind(n,808037)).then(e=>e.EmbeddedFigmaScopeViewForViewerEnabled),{...l,componentName:"EmbeddedFigmaScopeViewForViewerEnabled"})},405288:(e,r,n)=>{n.d(r,{H:()=>u});var i=n(656470),a=n.n(i),o=n(579020),s=n(457040),l=n(941695),c=n(823171),d=n(181637);class u{constructor(){this.indices=Object.entries(l.L).map(([e,r])=>new c.L({property:e,aliases:r}))}indexObject(e){for(let r of this.indices)r.indexObject(e)}indexObjects(e){for(let r of this.indices)for(let n of e)r.indexObject(n)}searchWithText(e){return this.search((0,d.B)(e))}searchWithProperties(e){return this.search((0,d.R)(e))}search(e){let r;for(let n of(o.az.trackDefinedEvent("figmascope.search",{used_operators:e.length>1||e[0]?.property!=null}),e)){let e=new Map;for(let r of this.getIndicesToSearchForToken(n))for(let i of r.search(n)){let{object:r,...n}=i;e.has(r)?e.get(r).matches.push(n):e.set(r,{object:r,matches:[n]})}r=r?(0,s.wD)(r,e,(e,r,n)=>({object:e,matches:r.matches.concat(n.matches)})):e}return r?a()(Array.from(r.values())).sort(p):[]}getIndicesToSearchForToken({property:e}){return null==e?this.indices.filter(e=>"parentGuid"!==e.property):(e=e.toLowerCase(),this.indices.filter(r=>{if(r.property.toLowerCase()===e)return!0;for(let n of r.aliases)if(n.toLowerCase()===e)return!0;return!1}))}}function p(e,r){let n=e.matches.filter(e=>e.isExact).length;return r.matches.filter(e=>e.isExact).length-n||r.matches.length-e.matches.length}},935412:(e,r,n)=>{n.d(r,{P:()=>w});var i=n(848318),a=n(902768),o=n(29404),s=n(425642),l=n(39773),c=n(73823),d=n.n(c),u=n(579020),p=n(818754),m=n(575058),h=n(397579),_=n(17755),g=n(895104),f=n(268337),E=n(645672),y=n(361595),b=n(830492),v=n(251526),T=n(27776);let I=(0,p.jz)(T.hVg),S=(0,p.jz)(T.k$X),w=i.memo(function({panel:e,items:r,diffItems:n,extraItems:c}){let[d,u]=(0,l.fp)("middle"===e?y.l3:y._Y),[p,m]=(0,l.fp)("middle"===e?y.A9:y.fQ),h=i.useMemo(()=>{let e=[];for(let r of c??[])e=e.concat(D(r,0,void 0,d,p));let i=R(r??[],void 0,p),a=null!=n,o=R(n??[],void 0,p);for(let r of(0,s.TR)(i,o,e=>L(e,void 0)))e=a?e.concat(M(r.left,r.right,0,void 0,d,p)):e.concat(D(r.left??r.right,0,void 0,d,p));return e},[r,n,c,d,p]),_=i.createRef();function g(e){if(void 0!==h[e]){let r=h[e].value;if(r&&"nodeThumbnail"===r.type){let e=(0,E.D)(r.value);if(e)return e.renderHeight+S}}return I}return i.useEffect(()=>{_.current?.resetAfterIndex(0)},[_,h]),i.createElement(a.A,{disableWidth:!0},({height:r})=>i.createElement(o._m,{ref:_,itemSize:g,itemCount:h.length,height:r,itemKey:e=>h[e].expansionKey,itemData:{panel:e,displayedProperties:h,togglePropertyExpanded:u,togglePropertyPinned:m},width:"100%"},A))});function A({style:e,index:r,data:{panel:n,displayedProperties:a,togglePropertyExpanded:o,togglePropertyPinned:s}}){let l=a[r],c=(0,h.ZC)(l),[d,u]=i.useState(!1),p=i.useRef(void 0);i.useEffect(()=>{c&&null!=(0,f.Ru)(c,l)&&(clearTimeout(p.current),u(!0),p.current=setTimeout(()=>u(!1),250))},[l,c]),i.useEffect(()=>()=>clearTimeout(p.current),[]);let _=(0,m.zN)(e);return i.createElement(N,{...l,style:_,isChanging:d,panel:n,index:r,togglePropertyExpanded:o,togglePropertyPinned:s})}let C=i.memo(function({diffValue:e,value:r}){return i.createElement(g.Y,{width:"hug-contents"},null!=e&&i.createElement(b.M,{value:e}),null!=e&&i.createElement("span",null,"\u21E8"),null!=r&&i.createElement(b.M,{value:r}))}),N=i.memo(function({childExpansionKeys:e,expansionKey:r,indent:n,isExpanded:a,isChanging:o,isPinned:s,isLeaf:l,isImage:c,label:d,index:p,style:m,value:h,diffValue:f,diffType:E,panel:y,togglePropertyExpanded:b,togglePropertyPinned:T}){return i.createElement(v.Z,{changeType:E,indent:c?0:n,isChanging:o,isExpanded:a,isLeaf:l,isPinned:s,keyboardNavigationPath:[p],style:c?{...m,height:"fit-content",width:"100%",alignItems:"flex-start"}:m,toggleExpanded:n=>{a||u.az.trackDefinedEvent("figmascope.expand_row",{field:d,panel:y}),b(r,n?e:[])},togglePinned:c?void 0:()=>{s||u.az.trackDefinedEvent("figmascope.pin_row",{field:d,panel:y}),T(r)}},c?i.createElement(C,{diffValue:f,value:h}):i.createElement(i.Fragment,null,i.createElement("span",{className:_.s.colorText.$},d),i.createElement("div",{className:_.s.ellipsis.noWrap.overflowHidden.alignCenter.$},i.createElement(C,{diffValue:f,value:h}))),i.createElement(g.M,null))}),L=(e,r)=>{let n=e.key??e.label;return r?[r,n].join("."):n},O=(e,r)=>!!r[e],R=(e,r,n)=>[...e.filter(e=>O(L(e,r),n)),...e.filter(e=>!O(L(e,r),n))],P=(e,r,n,i)=>{if(e)return!1;let a=i[r];return null!=a?a:n??!1},D=(e,r,n,i,a)=>{let o=L(e,n),s=0===e.children.length,l=e.value?.type==="nodeThumbnail",c=P(s,o,e.expandByDefault,i),u=d()(R(e.children??[],o,a),e=>D(e,r+1,o,i,a)),p={label:e.label,value:e.value,isExpanded:c,isLeaf:s,isImage:l,indent:r,expansionKey:o,childExpansionKeys:d()(u,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:O(o,a)};return c?[p,...u]:[p]},M=(e,r,n,i,a,o)=>{let l=e??r;if(!l)throw Error("Nothing to diff");if(e&&r&&L(e,i)!==L(r,i))throw Error("Mismatched keys");let c=L(l,i),u=R(e?.children??[],c,o),p=R(r?.children??[],c,o),m=(0,s.TR)(u,p,e=>L(e,c)),h=!1,_=d()(m,({left:e,right:r})=>{let i=M(e,r,n+1,c,a,o);return h=h||null!=i[0].diffType,i}),g=0===m.length,E=(0,f.Ru)(e,r,h),y=P(g,c,l.expandByDefault??!1,a),b=l.value?.type==="nodeThumbnail",v={label:l.label,value:l.value,diffValue:e&&r&&E?r?.value:void 0,isExpanded:y,isLeaf:g,isImage:b,indent:n,expansionKey:c,childExpansionKeys:d()(_,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:O(c,o),diffType:E};return y?[v,..._]:[v]}},178262:(e,r,n)=>{var i=n(848318);n(716544);var a=n(629829),o=n(39773),s=n(221769),l=n(20149);n(579020);var c=n(543072),d=n(226128);n(782623);var u=n(442313);n(405866),n(481540),n(369600),n(841747),n(849752),n(503024),n(828935);var p=n(709291),m=n(8719),h=n(185371),_=n(159377);n(157907),n(379338),n(180423),n(176629),n(35315),n(676448),n(680632),n(151144),n(443899);var g=n(728075);let f=[g.JT,g.dV,g.Wn,g.$C,g.w3,g.$r,g.Me];function E({name:e,palIndex:r,colorIndex:n,hatIndex:c,modalVariant:d=!1,canAnimate:p=!1,showNameOnHover:_=!0,isEating:g=!1,multiplayerColor:E=null,allowFlipping:v=!1,cursor:T=!1,photostrip:I=!1}){let S=e&&e.length>0?e:(0,u.t)("figpals.default_name"),[w,A]=i.useState(!1),[C,N]=(0,o.fp)(h.MU),L=(0,i.useRef)(),O=i.useMemo(()=>{let e=E||f[n%f.length];return e.startsWith("#")||(e="#"+e),e},[E,n]),R=(0,m.Pd)(r,n),[P,D]=(0,i.useState)(!1),[M,k]=(0,i.useState)(null),F=i.useCallback(e=>{_?(e||(N(0),L.current&&window.clearTimeout(L.current),L.current=window.setTimeout(()=>{N(h.B4)},2e3)),A(e)):A(!1)},[_,N]);if((0,i.useEffect)(()=>()=>{L.current&&window.clearTimeout(L.current)},[]),!R)return i.createElement(i.Fragment,null);let x=(0,m.V8)(c,R.hatPosition),{spriteTop:U,spriteLeft:B,url:V}=R,{hatTop:G,hatLeft:H,url:K}=x,W=p&&!1,z=Math.floor(10*Math.random());return i.createElement("div",{onClick:()=>{P||M||!p||(D(!0),k(setTimeout(()=>{D(!1),k(null)},1e3)))},...a.Ay.props(b.figpal,d&&b.figPalModal,T?b.noPointerEvents:b.autoPointerEvents),onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1)},i.createElement("div",{...a.Ay.props(b.animationOuter,g&&b.figPalEating)},i.createElement("div",{...a.Ay.props(b.animationOuter,d&&!I&&b.modalAnimate,W&&b.figPalWalking(z))},i.createElement("div",{...a.Ay.props(b.animationOuter,P&&b.figPalJumping)},i.createElement(s.N,null,w&&i.createElement(l.P.div,{key:"modal",initial:{opacity:0,y:-4},animate:{opacity:1,y:0,transition:{delay:C,opacity:{duration:.1},y:{duration:.15}}},exit:{opacity:0,y:-4,transition:{opacity:{duration:.1},y:{duration:.15}}}},i.createElement("div",{className:"x10l6tqk x1u4bug8 xjibb99 x1nrll8i xuuh30 x78zum5 xl56j7k x1vjfegm"},i.createElement(y,{name:S,color:O})))),i.createElement("div",{...a.Ay.props(b.figpalInner,v&&r%3==2&&!W?b.figpalFlipped:null)},i.createElement("div",{...a.Ay.props(b.figPalBase(V,B,U))}),i.createElement("div",{...a.Ay.props(b.figPalHat(K,H,G))}))))))}function y({name:e,color:r}){let n=i.useMemo(()=>(0,c.GL)(r),[r]);return i.createElement("div",{className:"x1cum3z5 x1ihjnay x3nfvp2 x1nyoefi x6s0dn4 x883omv x1u4bug8 xb3r6kr",style:{backgroundColor:r}},i.createElement("div",{className:"x1tk3asg x2b8uid x122x9cr x1j6dyjg x1j61x8r xh88oxj x1d3mw78 xqp8s7e xuxw1ft xb3r6kr xlyipyv xh8yej3",style:{color:n}},e))}i.memo(function({cursor:e=!1}){let r=(0,d.fU)(),n=(0,_.q8)(),o=(0,_.d_)();if(!(0,_.Yw)())return i.createElement(i.Fragment,null);let{currentPal:s}=n;if(!s)return i.createElement(i.Fragment,null);let l=s.name||(0,u.t)("figpals.default_name"),c=s.ownerName,m=c?(0,u.t)("figpals.someones_pal",{ownerName:c,palName:l}):l;return i.createElement("div",{...a.Ay.props(e&&b.noPointerEvents)},i.createElement(p.Y_,null),i.createElement(E,{name:m,palIndex:s?.palIndex,colorIndex:s?.colorIndex,hatIndex:s?.hatIndex,canAnimate:!e,showNameOnHover:!e,isEating:o,multiplayerColor:r,cursor:e}))});let b={figpal:{width:"x1useyqa",height:"x14h49td",$$css:!0},figPalModal:{transform:"x1gz8ohu",$$css:!0},animationOuter:{width:"xh8yej3",height:"x5yr21d",$$css:!0},modalAnimate:{animationName:"x1xj5oci",animationDuration:"x7t6ubo",animationIterationCount:"xa4qsjk",$$css:!0},figpalInner:{width:"xh8yej3",height:"x5yr21d",top:"x13vifvy",left:"xu96u03",insetInlineStart:null,insetInlineEnd:null,position:"x1n2onr6",zIndex:"x8knxv4",$$css:!0},figPalBase:(e,r,n)=>[{width:"xh8yej3",height:"x5yr21d",background:"x7m5jml",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundSize:null,backgroundRepeat:"xiy17q3",position:"x10l6tqk",$$css:!0},{"--background":`url('${e}') -${r}px -${n}px`}],figPalWalking:e=>[{animationName:"x6oeb5o",animationDuration:"x18ebdri",animationIterationCount:"xa4qsjk",animationDelay:"x1js0keu",animationTimingFunction:"x1htlvfj",transformOrigin:"x18ouj0k",$$css:!0},{"--animationDelay":(e=>"number"==typeof e?e+"ms":null!=e?e:void 0)(-e+"s")}],figPalJumping:{animationName:"xfd4byw",animationDuration:"xxkxylk",transformOrigin:"x18ouj0k",animationIterationCount:"x1v7wizp",$$css:!0},figPalEating:{animationName:"x1c0n7k9",animationDuration:"x4afe7t",animationIterationCount:"x9y4sls",animationTimingFunction:"x4hg4is",transformOrigin:"x18ouj0k",$$css:!0},figpalFlipped:{transform:"xpk2tj9",$$css:!0},figPalHat:(e,r,n)=>[{width:"xh8yej3",height:"x5yr21d",background:"x7m5jml",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundSize:null,backgroundRepeat:"xiy17q3",position:"x10l6tqk",$$css:!0},{"--background":`url('${e}') -${r}px -${n}px`}],noPointerEvents:{pointerEvents:"x47corl",$$css:!0},autoPointerEvents:{pointerEvents:"x67bb7w",$$css:!0}}},8719:(e,r,n)=>{n.d(r,{Pd:()=>m,V8:()=>h,WK:()=>f,bq:()=>E});var i=n(379338);n(442313);let a=[{type:"snake",hatPosition:"left"},{type:"elephant",hatPosition:"middle"},{type:"snail",hatPosition:"snail"},{type:"puffer",hatPosition:"middle"},{type:"fish",hatPosition:"middle"},{type:"frog",hatPosition:"middle"},{type:"duck",hatPosition:"left"},{type:"caterpillar",hatPosition:"left"},{type:"cat",hatPosition:"bottom"},{type:"dog",hatPosition:"bottom"},{type:"rodent",hatPosition:"bottom"},{type:"bird",hatPosition:"left"},{type:"capybara",hatPosition:"left"}],o=[{type:"egg",hatPosition:"middle"},{type:"coconut",hatPosition:"middle"},{type:"fruit",hatPosition:"middle"},{type:"boba",hatPosition:"middle"},{type:"sushi",hatPosition:"middle"},{type:"bread",hatPosition:"middle"},{type:"dumpling",hatPosition:"middle"},{type:"pizza",hatPosition:"middle"},{type:"veggie",hatPosition:"middle"},{type:"onigiri",hatPosition:"middle"},{type:"mug",hatPosition:"middle"},{type:"pancakes",hatPosition:"middle"}],s=[{type:"ball",hatPosition:"middle"},{type:"poop",hatPosition:"middle"},{type:"star",hatPosition:"middle"},{type:"rock",hatPosition:"middle"},{type:"cloud",hatPosition:"middle"},{type:"transit",hatPosition:"middle"},{type:"rainbow",hatPosition:"middle"},{type:"flower",hatPosition:"middle"},{type:"mushroom",hatPosition:"middle"}],l=[{type:"figgy",hatPosition:"middle"},{type:"cursor",hatPosition:"left"},{type:"pen",hatPosition:"left"},{type:"boolean",hatPosition:"left"},{type:"intersect",hatPosition:"left"},{type:"library",hatPosition:"middle"},{type:"comment",hatPosition:"middle"},{type:"pencil",hatPosition:"left"},{type:"heart",hatPosition:"middle"}],c=[...a,...o,...s,...l],d=(0,i.ck)("198468bc939e12c28c348b2481257c491403d680"),u=(0,i.ck)("7f151ffba9e7f7d9f7c3e3866d5d5b8735539a8c"),p=a.length+o.length+s.length+l.length;function m(e,r){if(e>=p||r>=9)return null;let n=c[e];return n?{spriteTop:55*e+2*e,spriteLeft:48*r+2*r,url:d,type:n.type,hatPosition:n.hatPosition}:null}function h(e,r){return{hatTop:55*e,hatLeft:48*["left","middle","bottom","snail"].indexOf(r),url:u}}(0,i.ck)("dea3b59f4f9ababec739754c0a9aed28795beb00");let _=["eat","love","sad","surprised","fire"];(0,i.ck)("265cd97f5b7151146354be9f4955e9e73dbf7ce0"),(0,i.ck)("a0619bf235b1993ee0ee1f4d0ee3225e689bd60b"),(0,i.ck)("2065ed438dbb7cf2180417d69a0a8d34de3b252e"),(0,i.ck)("71c9f3bddcdd0453cde03a7243864ba4ba64cf3b");let g={eat:(0,i.ck)("fa64c5e73093e0a0d00ffbeba9b7d19aa304ae8f"),love:(0,i.ck)("ff5be810b821d264cc2c95f665d24a867c34e587"),sad:(0,i.ck)("78f60a21d2616c2a24c7645d8636dec855e48ffb"),surprised:(0,i.ck)("1429964104bceac90c5c8e731ce4cc50b27e2797"),fire:(0,i.ck)("d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2")};function f(e){return e&&g[e]||""}function E(){return _}},185371:(e,r,n)=>{n.d(r,{B4:()=>c,Dj:()=>l,MU:()=>d,O9:()=>s,Tv:()=>o});var i=n(39773),a=n(4317);let o=(0,i.E3)(a.S,{},{subscribeToChanges:!0});(0,i.eU)(!1),(0,i.E3)("figpals-docking",!1,{subscribeToChanges:!0}),(0,i.eU)(void 0),(0,i.eU)(!1),(0,i.eU)(!1),(0,i.E3)("figpals.otherPalsEnabled",!0);let s=(0,i.eU)({}),l=(0,i.eU)(void 0);(0,i.eU)(null);let c=.4,d=(0,i.eU)(c)},4317:(e,r,n)=>{n.d(r,{S:()=>i});let i="aprilFunFigPal"},159377:(e,r,n)=>{n.d(r,{Yw:()=>T,_7:()=>E,d_:()=>f,q8:()=>v});var i=n(848318),a=n(716544),o=n(741419),s=n(157907),l=n(39773),c=n(171659),d=n(475927),u=n(757617),p=n(164936),m=n(661780),h=n(207715);n(8719);var _=n(185371),g=n(4317);function f(){return Object.values((0,l.md)(_.O9)).filter(e=>"eat"===e).length>0}function E(e){let r=e=>{if(!(0,s.k)().april_fun_2025_figpals)return;let r=c.TQ()?.getItem(g.S);if(r)try{let n=JSON.parse(r)[e];if(!n)return;let i=y(n);i&&o.h3O.sendAprilFunFigPal(i.name,i.customization)}catch(e){console.error("issue getting fig pal",e)}};i.useEffect(()=>{r(e)},[e]),(0,c.tl)({onSync:()=>r(e),shouldSyncValue:e=>e.key===g.S&&null!=e.newValue})}let y=e=>{let r=e.hatIndex?e.hatIndex:0,n=e.colorIndex?e.colorIndex:0,i=e.palIndex?e.palIndex:0;return{name:e.name||"",customization:n+"|"+i+"|"+r}},b=(e,r,n,i)=>{let a=e.customization.split("|");return a&&3===a.length&&r?{name:e.name,colorIndex:parseInt(a[0]),palIndex:parseInt(a[1]),hatIndex:parseInt(a[2]),userId:r,ownerName:n,ownerMultiplayerColor:i}:null};function v(){let e=(0,m.iZ)(),r=(0,a.d4)(({multiplayer:{allUsers:e}})=>e),[n,o]=function(e){let[r,n]=(0,l.fp)(_.Tv),a=r[e],o=i.useCallback((e,i)=>{n({...r,[e]:i})},[r,n]);return a?[a&&void 0!==a.palIndex&&void 0!==a.colorIndex&&void 0!==a.hatIndex?a:null,o]:[null,o]}(e?.id||"");if(!e)return{currentPal:null,otherPals:[]};let s=r.filter(r=>r.userID===e.id);return s&&s[0]&&s[0].aprilFunFigPal?{currentPal:b(s[0].aprilFunFigPal,e.id,e.name,s[0].color),otherPals:Object.values(r.filter(r=>r.userID!==e.id).reduce((e,r)=>({[r.userID]:r,...e}),{})).map(e=>b(e.aprilFunFigPal,e.userID,e.name,e.color)).filter(e=>null!==e)}:{currentPal:n,otherPals:[]}}function T(){let e=o.Ez5?.editorPreferences(),r=(0,h.ut)(e?.aprilFunFigPalsEnabled,!1);return function(){let e=(0,l.md)(p.wg),{topLevelMode:r,editModeType:n}=(0,u.rM)(d.lW),i=r===o.lyf.HISTORY||n===o.m1T.DEV_HANDOFF_HISTORY;return(0,s.k)().april_fun_2025_figpals&&e&&!i}()&&r}},170485:(e,r,n)=>{n.d(r,{_:()=>l});var i=n(157907),a=n(39773),o=n(87089),s=n(635547);let l=(0,a.eU)(e=>{let r=(0,i.k)().mfa_for_guests,n=e(o.h0);if(!r||!n)return!1;let a=e(s.M9q.Query({orgId:n}));if("loaded"!==a.status)return!1;let l=a.data.currentUser.baseOrgUser?.isMfaRestricted;return l?.status==="loaded"&&!0===l.data})},556522:(e,r,n)=>{n.d(r,{Q:()=>c});var i=n(848318);n(716544);var a=n(157907),o=n(579020),s=n(493554),l=n(635547);function c(e,r){let n=i.useMemo(()=>({stuckMs:1e4,onEvent:(r,n,i)=>{var s,l;return s=e.currentOrgId,l=e.currentTeamId,void((0,a.k)().file_browser_sidebar_lg_logging&&(0,o.sx)("File Browser Sidebar LG",{lgEvent:r,traceId:i.traceId,hasBeenOffline:i.wasOffline,hasBeenBackgrounded:i.wasBackgrounded,timeElapsedMs:i.timeElapsedMs,orgId:s,teamId:l,errors:JSON.stringify(n.errors)}))}}),[e.currentOrgId,e.currentTeamId]);return(0,s.oS)(l.$kt,e,{...r,subscriptionLogger:n})}},473764:(e,r,n)=>{n.d(r,{AN:()=>i}),n(848318),n(716544),n(741419),n(322035),n(420216),n(44509),n(831932),n(736248),n(722941),n(279694),n(166365),n(882439),n(442313),n(155651),n(600392),n(257489),n(255499),n(366651),n(486934),n(834697),n(710905),n(369600),n(834996),n(661780),n(356505),n(629311),n(493554),n(719006),n(790355),n(635547),n(997894),n(694253),n(241917),n(791964),n(173661),n(478905),n(566892),n(268904),n(345908),n(387360),n(300612),n(273835),n(449737),n(235441),n(674324),n(43398),n(651705),n(994742),n(216209),n(536384),n(624600),n(639088);let i=120},387360:(e,r,n)=>{n(848318),n(716544),n(95650),n(44509),n(736248),n(442313),n(449737),n(369600),n(834996),n(808765)},300612:(e,r,n)=>{n.d(r,{PQ:()=>T});var i=n(848318),a=n(716544),o=n(445777),s=n(157907),l=n(592353),c=n(420216),d=n(44509),u=n(989446),p=n(379338),m=n(925025),h=n(831932),_=n(736248),g=n(279694),f=n(732502),E=n(955628),y=n(790866),b=n(732458);function v({origin:e,iFrameHandler:r,overrideUseFedCMPrompt:n}){let s=window;try{window.origin===window.parent.origin&&(s=window.parent||window)}catch{}let h=(0,u.J)(()=>(0,E.o)(s),[s]),y=(0,a.wA)(),v=!!(0,f.S$)(),T=n??v,I=i.useRef(!1),S=i.useCallback(async({credential:n})=>{(0,g.g)("google_one_tap_login_start",e,{},{forwardToDatadog:!0});let i=(0,b.z)(n);if(!i)return;let a={name:i.name,token:n,tokenType:l.V.ID_TOKEN};if(r){r(a);return}try{y(_.WY({redirectUrl:function(){let e=d.Ay.location.pathname;try{window.origin===window.parent.origin&&(e=window.parent.location.pathname)}catch{}return e}()}));let r=await (0,c.W8)(a,{dispatch:y,apiUrl:c._B,origin:e});"mfa"===r.type&&s!==window&&s.postMessage({type:"auth_iframe_show"},"*"),"login"===r.type&&((0,g.g)("google_one_tap_login_complete",e,{},{forwardToDatadog:!0}),y(_.My({userId:r.user.id})))}catch(e){s!==window&&s.postMessage({type:"auth_iframe_show"},"*"),y(_.Qg({message:e.message}))}},[e,r,y,s]);return i.useEffect(()=>{if(h.status===m.r.SUCCESS&&!I.current){I.current=!0;let r=h.value,{google_client_id:n}=(0,p.Ay)();(0,o.KF)(void 0!==n,"google_client_id should be defined in initialOptions"),r.accounts.id.initialize({client_id:n,callback:S,cancel_on_tap_outside:!1,itp_support:!0,use_fedcm_for_prompt:T}),r.accounts.id.prompt(r=>{if(T){let n=r.getMomentType();(0,g.g)("google_one_tap_prompt_moment",e,{momentType:n,reason:"dismissed"===n?r.getDismissedReason():void 0},{forwardToDatadog:!0});return}"display"===r.getMomentType()?r.isDisplayed()?(0,g.g)("google_one_tap_prompt_displayed",e,{},{forwardToDatadog:!0}):(0,g.g)("google_one_tap_prompt_display_failed",e,{reason:r.getNotDisplayedReason()},{forwardToDatadog:!0}):"skipped"===r.getMomentType()?(0,g.g)("google_one_tap_prompt_skipped",e,{reason:r.getSkippedReason()},{forwardToDatadog:!0}):"dismissed"===r.getMomentType()&&(0,g.g)("google_one_tap_prompt_dismissed",e,{reason:r.getDismissedReason()},{forwardToDatadog:!0})})}},[h,S,e,T]),null}function T(e){return s.k()?.google_one_tap_killswitch||(0,p.sL)()||e.hideOnMobile&&(0,h.o4)()?null:i.createElement(y.d,null,i.createElement(v,{...e}))}},812361:(e,r,n)=>{n.d(r,{EO:()=>u,ZG:()=>p,iT:()=>s,l0:()=>d,xR:()=>l});var i=n(352712),a=n(359713),o=n(442313);function s(e){return"SECTION"===e}function l(e){if(0===Math.round(e.angle))return e;let r=(0,a.getCenteredRotation)(e.angle,e.width,e.height);return{...e,x:e.x-r[0][2],y:e.y-r[1][2]}}n(45584),n(98582);let c={x:0,y:0,width:1e3,height:1e3,angle:0};function d(e,r){let n=0!==Math.round(e.angle)?{transform:`rotate(${(360-e.angle).toString()}deg)`}:{},i=c;return"canvas"!==r&&(i=r),{position:"absolute",left:100*e.x/i.width+"%",top:100*e.y/i.height+"%",width:100*e.width/i.width+"%",height:100*e.height/i.height+"%",...n}}function u(e,r,n={x:1e3,y:1e3},a=i.s.identity().toFigMatrix()){let o=e.x/n.x,s=e.y/n.y,l=i.s.fromFigMatrix(a);if(!l.invert())return{position:"absolute",height:"1px",width:"1px"};l.multiply(i.s.fromFigMatrix(r));let c=l.offset(),d=l.toDegrees();return{position:"absolute",top:`${c.y/n.y*100}%`,left:`${c.x/n.x*100}%`,height:`${100*s}%`,width:`${100*o}%`,transform:`rotate(${d}deg)`,transformOrigin:"top left"}}function p(e){switch(e){case"DIAMOND":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-diamond");case"ELLIPSE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-ellipse");case"ENG_DATABASE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-database");case"ENG_FILE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-file");case"ENG_FOLDER":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-folder");case"ENG_QUEUE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-queue");case"PARALLELOGRAM_RIGHT":case"PARALLELOGRAM_LEFT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-parallelogram-right");case"ROUNDED_RECTANGLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-rounded-rectangle");case"SQUARE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-square");case"TRIANGLE_DOWN":case"TRIANGLE_UP":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-triangle-down");case"TRAPEZOID":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-trapezoid");case"STAR":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-star");case"SHIELD":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-shield");case"HEXAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-hexagon");case"PENTAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-pentagon");case"OCTAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-octagon");case"PLUS":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-plus");case"PREDEFINED_PROCESS":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-predefined-process");case"MANUAL_INPUT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-manual-input");case"CHEVRON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-chevron");case"DOCUMENT_SINGLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-single");case"DOCUMENT_MULTIPLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-multiple");case"ARROW_LEFT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-left");case"ARROW_RIGHT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-right");case"SUMMING_JUNCTION":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-summing-junction");case"OR":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-or");case"SPEECH_BUBBLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-speech-bubble");case"INTERNAL_STORAGE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-internal-storage");default:throw Error(`Unhandled shape type: ${e}`)}}},558870:(e,r,n)=>{n.d(r,{r:()=>o}),n(741419);var i=n(442313),a=n(241917);function o(e,r){switch(e){case"SECTION":return(0,i.t)("fullscreen.accessibility_dom.node_name_section");case"STICKY":return(0,i.t)("fullscreen.accessibility_dom.node_name_sticky");case"ROUNDED_RECTANGLE":case"SHAPE_WITH_TEXT":return(0,i.t)("fullscreen.accessibility_dom.node_name_shape");case"CONNECTOR":return(0,i.t)("fullscreen.accessibility_dom.node_name_connector");case"CODE_BLOCK":return(0,i.t)("fullscreen.accessibility_dom.node_name_code_block");case"LINE":return(0,i.t)("fullscreen.accessibility_dom.node_name_line");case"TEXT":return(0,i.t)("fullscreen.accessibility_dom.node_name_text");case"TABLE":return(0,i.t)("fullscreen.accessibility_dom.node_name_table");case"TABLE_CELL":return(0,i.t)("fullscreen.accessibility_dom.node_name_table_cell_generic");case"WIDGET":return(0,i.t)("fullscreen.accessibility_dom.node_name_widget");case"INSTANCE":if(r===a.nT.Whiteboard)return(0,i.t)("fullscreen.accessibility_dom.node_name_instance");return(0,i.t)("fullscreen.accessibility_dom.design.node_name_instance");case"STAMP":return(0,i.t)("fullscreen.accessibility_dom.node_name_stamp");case"CANVAS":if(r===a.nT.Whiteboard)return(0,i.t)("fullscreen.accessibility_dom.node_name_canvas");return(0,i.t)("fullscreen.accessibility_dom.design.node_name_canvas");default:return(0,i.t)("fullscreen.accessibility_dom.node_name_fallback")}}},472706:(e,r,n)=>{n.d(r,{B5:()=>O});var i=n(848318),a=n(716544),o=n(719670),s=n(464437),l=n(741419),c=n(157907),d=n(39773),u=n(536384),p=n.n(u),m=n(831932),h=n(442313),_=n(790355),g=n(604613),f=n(235441),E=n(992444),y=n(449977),b=n(45584),v=n(474153),T=n(508125),I=n(732686),S=n(812361),w=n(266623),A=n(956438),C=n(941489),N=n(870845),L=n(404319);let O={alwaysPan:!1,noPanViewportMultiplier:.9,panJustEnoughViewportMultiplier:1.5},R={jumpOnAbort:!0};function P(e){let r=(0,s.qE)(e.headerLevel,2,6);return e.header?i.createElement(i.Fragment,null,i.createElement("div",{role:"heading","aria-level":r,id:e.header.headerId},e.header.label),e.children):i.createElement(i.Fragment,null,e.children)}function D({accessibilityScope:e,nodeId:r,...n}){let a=(0,v.W)(r,e);if(!a)return null;let{childIds:o,...s}=a;return i.createElement(M,{...n,...s,nodeId:r,childIds:o,accessibilityScope:e})}let M=i.memo(({childIds:e,...r})=>{let{accessibilityScope:n,isDebugMode:a,navigate:o,nodeId:s,headingLevel:l,suppressIds:c,type:d,absoluteTransform:u,dimensions:p,transformProperties:m}=r,h=(0,S.iT)(d)?l+1:l,_=e.length;return i.createElement(k,{...r,size:_},e.map((e,r)=>i.createElement(D,{key:e,accessibilityScope:n,headingLevel:h,isDebugMode:a,navigate:o,nodeId:e,parent:{dimensions:p,transformProperties:m,absoluteTransform:u,guid:s},setPosition:r+1,setSize:_,suppressIds:c})))},function({directTextContent:e,innerTextContent:r,tableCells:n,transformProperties:i,childIds:s,stampFrequencies:l,accessibleLabel:c,absoluteTransform:d,dimensions:u,parent:p,...m},{directTextContent:h,innerTextContent:_,tableCells:g,transformProperties:f,childIds:E,stampFrequencies:y,accessibleLabel:b,absoluteTransform:v,dimensions:T,parent:I,...S}){return(0,a.bN)(m,S)&&(0,a.bN)(u,T)&&(0,a.bN)(d,v)&&(0,a.bN)(i,f)&&(0,a.bN)(l,y)&&(0,a.bN)(c,b)&&(0,a.bN)(s,E)&&(0,a.bN)(p?.absoluteTransform,I?.absoluteTransform)&&(0,a.bN)(p?.dimensions,I?.dimensions)&&(0,a.bN)(p?.transformProperties,I?.transformProperties)&&(0,o.c2)(e,h)&&(0,o.c2)(r,_)&&(0,o.c2)(n,g)});function k({children:e,setSize:r=1,setPosition:n=1,headingLevel:o=2,author:s,transformProperties:u,directTextContent:v,innerTextContent:A,tableCells:N,headerLabel:D,guid:M,isDebugMode:k,navigate:x,ariaRole:U,name:B,shapeType:V,size:G,type:H,nodeId:K,suppressIds:W,stampFrequencies:z,accessibleLabel:$,contentsHidden:Y,dimensions:j,absoluteTransform:q,parent:X}){let Z;let J=(0,a.Pj)(),Q=J.getState().comments.showResolved,ee=(0,a.d4)(e=>e.mirror.appModel.showComments),et=J.getState().mirror.sceneGraph,er=(0,S.iT)(H)?o+1:o,en=(0,f.E3)(),ei=(0,w.E)({type:H,shapeType:V,ariaRole:U,name:B,setData:{size:r,i:n,headerLevel:o},numChildren:G,stampFrequencies:z,accessibleLabel:$,contentsHidden:Y,editorType:en}),ea=!X;if((0,c.k)().a11y_design_dom_mirror)Z=ea?(0,S.EO)(j,q):(0,S.EO)(j,q,X.dimensions,X.absoluteTransform);else{let e=ea?"canvas":X.transformProperties;Z=(0,S.l0)(u,e)}let eo=(0,C.rp)(v,C.d2.SEMANTIC),es=(0,C.rp)(A,C.d2.SEMANTIC),el=(0,C.Dm)(et,K,N),ec=D?{label:D,headerId:`sectionHeaderFor-${M}`}:null,ed=(0,a.d4)(e=>{let r=Object.keys(e.mirror.sceneGraphSelection);return(e.mirror.appModel.activeCanvasEditModeType!==l.m1T.TEXT&&1===r.length?r[0]:"")===M}),{groupCommentNodeId:eu,groupCommentTransformProperties:ep,groupSize:em}=function(e,r){let n,i,a;let o=r.get(e)?.parentGuid,s=o?r.get(o):void 0;for(;s?.resizeToFit;){n=s.guid??e;let i=s.parentGuid;s=i?r.get(i):void 0}if(n){let r=l.glU.getSortedChildGuids(n);r.length>0&&r[r.length-1]===e?(a=r.length,i=(0,S.xR)(l.Egt.getNodeTransformProperties(n))):n=void 0}return{groupCommentNodeId:n,groupCommentTransformProperties:i,groupSize:a}}(M,et);(function(e,r,n,a,o,s,l,c,u){let p=(0,d.Xr)(T.f),m=(0,f.E3)();i.useEffect(()=>{e&&p({type:"SET_CURRENTLY_SELECTED_NODE",payload:{nodeId:u,ariaLabel:(0,w.E)({type:r,shapeType:n,name:a,accessibleLabel:o,setData:{size:s,i:l,headerLevel:c},editorType:m})}})},[o,c,l,e,a,u,n,s,r,p,m])})(ed,H,V,B,$,r,n,o,K),i.useLayoutEffect(()=>{if(W)return;let e=document.getElementById(M);e&&(ed&&!l.VDs.getExpectingTextInput()?(e.setAttribute("tabindex","0"),e.focus()):(e.setAttribute("tabindex","-1"),e.blur()))},[M,ed,W]);let[eh,e_]=(0,I.l)(k?[X,s,u,v,A,D,M,ed,U,B,V,H,K,W]:[]);return i.createElement(i.Fragment,null,i.createElement("div",{ref:e_,"aria-label":ei,className:p()(L.rH,k&&eh),contentEditable:m.Ay.windows&&ed?"true":void 0,"data-fullscreen-intercept-dangerously-include-tab":!0,"data-guid":W?M:void 0,id:W?void 0:M,onContextMenu:e=>{J.dispatch(_.j7({type:g.K9,data:{clientX:e.clientX,clientY:e.clientY}})),e.preventDefault()},onFocus:e=>{e.target!==e.currentTarget||e.relatedTarget===e.currentTarget||ed||(y.wr(),y.Dh([M]),E.Y5.commit(),x((0,b.QZ)({nodeId:M,...O}),R))},role:U,style:Z,tabIndex:-1},i.createElement(P,{header:ec,headerLevel:er},es.length>0?es:null,eo.length>0?eo:null,null!=s&&(0,h.tx)("fullscreen.accessibility.author",{authorName:s}),el.length>0?el:null,e),ee?i.createElement(F,{guid:M,navigate:x,isDebugMode:k,parentTransformProperties:u,showResolved:Q,intermediateTransformProperties:void 0,parentAbsoluteTransform:q,parentDimensions:j}):null),ee&&eu?i.createElement(F,{guid:eu,navigate:x,isDebugMode:k,parentTransformProperties:"canvas",intermediateTransformProperties:ep??u,showResolved:Q,groupSize:em,parentAbsoluteTransform:void 0,parentDimensions:void 0}):null)}function F({guid:e,isDebugMode:r,navigate:n,isTopLevel:a,groupSize:o,parentTransformProperties:s,intermediateTransformProperties:l,showResolved:c,parentAbsoluteTransform:d,parentDimensions:u}){let p=(0,N.x)(e,c),m=i.createElement(A.X,{threads:p,navigate:n,isDebugMode:r,parentTransformProperties:s,intermediateTransformProperties:l,parentAbsoluteTransform:d,parentDimensions:u});if(!p||0===p.length)return null;if(a)return i.createElement("div",{role:"region","aria-labelledby":"canvas-comments-heading"},i.createElement("h2",{id:"canvas-comments-heading"},(0,h.tx)("fullscreen.accessibility_dom.unattached_comments")),m);if(!o)return m;{let e=(0,h.t)("fullscreen.accessibility_dom.grouped_comments",{groupSize:o});return i.createElement("div",{role:"group","aria-label":e},m)}}},237873:(e,r,n)=>{function i(){let e=document.getElementById("fullscreen-root")?.getElementsByClassName("focus-target");if(null==e)return null;for(let r of e){let e="application"===r.getAttribute("role")||"application"===r.role;if(r.hasAttribute("readonly")&&e)return r}return null}function a(){i()?.focus()}n.d(r,{$z:()=>a,lo:()=>i}),n(848318),n(716544),n(741419),n(921494),n(431118),n(442313),n(697714),n(719244),n(132073),n(992444),n(241917),n(767252),n(558870)},3220:(e,r,n)=>{n.d(r,{a1:()=>_});var i=n(848318),a=n(258904),o=n(536384),s=n.n(o),l=n(182059),c=n(600627),d=n(566699);n(17755);var u=n(493834),p=n(339678);function m(e){return i.createElement("div",{className:u.zc},e.children)}function h(e){return i.createElement("div",{className:u.ro},e.children)}function _(e){return i.createElement(l.c$,{disabled:!e.isEnabled,onClick:e.onClick,onPointerUp:e.onPointerUp,recordingKey:e.recordingKey,className:s()(u.NV,{[u.Kt]:e.inPanel}),buttonRef:e.buttonRef,onboardingKey:e.onboardingKey,simulateHover:e.simulateHover,tooltip:e.tooltip},!e.hideCheck&&i.createElement("div",{className:u.l8},e.isChecked&&i.createElement(d.U,{svg:p.A},i.createElement(a.l,null))),e.children&&i.createElement(m,null,e.children),i.createElement("div",{className:u.Qq},e.text),e.shortcut?i.createElement(c.S,{shortcut:e.shortcut,className:u.LE}):e.rightIcon&&i.createElement(h,null,e.rightIcon))}},113100:(e,r,n)=>{n.d(r,{AP:()=>p,FQ:()=>g,XR:()=>h,h9:()=>u,l6:()=>_,uA:()=>f});var i=n(848318),a=n(741419),o=n(673906),s=n(442313),l=n(701200),c=n(166917),d=(e=>(e[e.DARK=0]="DARK",e[e.LIGHT=1]="LIGHT",e))(d||{});function u(e){switch(e){case a.Bll.ACCESSIBILITY:return(0,s.t)("dev_handoff.annotations.category_preset.accessibility");case a.Bll.BEHAVIOR:return(0,s.t)("dev_handoff.annotations.category_preset.behavior");case a.Bll.CONTENT:return(0,s.t)("dev_handoff.annotations.category_preset.content");case a.Bll.DEVELOPMENT:return(0,s.t)("dev_handoff.annotations.category_preset.development");case a.Bll.INTERACTION:return(0,s.t)("dev_handoff.annotations.category_preset.interaction")}}function p(e){switch(e){case a.Bll.ACCESSIBILITY:return a.RN1.PINK;case a.Bll.CONTENT:return a.RN1.ORANGE;case a.Bll.BEHAVIOR:return a.RN1.BLUE;case a.Bll.DEVELOPMENT:return a.RN1.GREEN;case a.Bll.INTERACTION:return a.RN1.BLUE}}let m={[a.RN1.GREEN]:"rgba(61, 160, 89, 1)",[a.RN1.PINK]:"rgba(216, 52, 158, 1)",[a.RN1.RED]:"rgba(227, 76, 44, 1)",[a.RN1.BLUE]:"rgba(27, 113, 217, 1)",[a.RN1.YELLOW]:"rgba(251, 198, 69, 1)",[a.RN1.ORANGE]:"rgba(255, 165, 0, 1)",[a.RN1.TEAL]:"rgba(0, 128, 128, 1)",[a.RN1.VIOLET]:"rgba(148, 0, 211, 1)"};function h(e={initializeIfNull:!1}){let{initializeIfNull:r=!1}=e,n=(0,i.useMemo)(()=>a.w3z.isReadOnly(a.SES.ANNOTATIONS),[]),s=(0,c.wA)(e=>e.getRoot().annotationCategories);return(0,i.useEffect)(()=>{!n&&null===s&&r&&(0,l.r)(()=>{o.l7.system("initialize-annotation-categories",()=>{a.w3z.initializeAnnotationCategories()})})},[s,n,r]),s??[]}function _(e){return e.preset!==a.Bll.NONE?p(e.preset):e.custom?.color??null}function g(e){return e.preset!==a.Bll.NONE?m[p(e.preset)]:e.custom?.color!=null?m[e.custom.color]:null}function f(e){return e.preset!==a.Bll.NONE?u(e.preset):e.custom?.label??""}},240207:(e,r,n)=>{n.d(r,{CK:()=>s,r6:()=>o});var i=n(39773);n(507152);let a=(0,n(792478).rt)(void 0);function o(){return i.zl.get(a)}function s(){return(0,i.md)(a)}},447215:(e,r,n)=>{n.d(r,{P:()=>l});var i=n(39773),a=n(792478),o=n(185399);let s=(0,a.rt)({suggestions:[],analyticsData:o.YQ,isSeen:!0}),l=(0,i.eU)(e=>e(s),(e,r,n)=>{let i=e(s),a=n.suggestions.slice(0,o.lS),l=i.suggestions.length!==a.length||i.suggestions.some((e,r)=>e.id!==a[r]?.id),c=i.isSeen;l&&(c=0===a.length),r(s,{...n,suggestions:a,isSeen:c})});(0,i.eU)(e=>e(s).isSeen,(e,r)=>{let n=e(s);r(s,{...n,isSeen:!0})})},63998:(e,r,n)=>{n.d(r,{O:()=>m,k1:()=>h,tM:()=>u});var i=n(742464),a=n(39773),o=n(579020),s=n(240207),l=n(447215),c=n(185399),d=n(27107);let u="auto-suggest",p=new Set([c.qd.EVAL,c.qd.SHADOW_SUGGESTIONS]);class m{constructor({analyticsData:e=c.YQ,config:r,entryPoint:n}){this.analyticsData=e,this.config=r.loggerConfig,this.timers=[Date.now()],this.debugInfo={},this.entryPoint=n,this.shouldLog=!p.has(n)}logFunnelEvent(e){var r,n;this.config.logFunnelEvents&&this.shouldLog&&(r=this.analyticsData,n=this.entryPoint,o.az.trackDefinedEvent("auto_suggest.funnel",{...r,funnelEvent:e,sessionId:(0,s.r6)(),entryPoint:n,suggestionsVersion:(0,d.OD)(),triggerVersion:(0,d.GD)()}))}logTimer(e,r,n){if(!this.config.logTimers)return -1;let a=Date.now();if(this.timers.length>0){let l=a-this.timers[(0,i.Et)(n)?n:this.timers.length-1],c=this.timers.push(a);return this.shouldLog&&o.az.trackDefinedEvent("auto_suggest.timer",{...this.analyticsData,context:e,stepName:r,duration:l,sessionId:(0,s.r6)(),entryPoint:this.entryPoint,suggestionsVersion:(0,d.OD)(),triggerVersion:(0,d.GD)()}),c-1}return -1}logDebugInfo(e,r){this.config.logDebugInfo&&(this.debugInfo[e]=r)}}function h(e){let{analyticsData:r}=a.zl.get(l.P);o.az.trackDefinedEvent("auto_suggest.component_inserted",{...e,...r,sessionId:(0,s.r6)(),suggestionsVersion:(0,d.OD)(),triggerVersion:(0,d.GD)()})}},185399:(e,r,n)=>{n.d(r,{GG:()=>s,H2:()=>c,MX:()=>l,Ou:()=>i,PV:()=>o,YQ:()=>u,lS:()=>a,qd:()=>d});var i=(e=>(e[e.FRAGMENTS=0]="FRAGMENTS",e[e.RECENTS=1]="RECENTS",e))(i||{});let a=4,o={searchByNodeType:"all",targetNodeConfig:{skipLowVolumeNodes:3,numFragments:15,rankingConfig:{count:1,fragmentCount:0,avgCountPerFragment:0,avgScorePerFragment:0,avgProximityScore:0},filteringConfig:{fragmentsBelowScore:.85,proximityScoreThreshold:0},minRequiredResults:2},topLevelNodeConfig:{skipLowVolumeNodes:3,numFragments:15,rankingConfig:{count:1,fragmentCount:0,avgCountPerFragment:0,avgScorePerFragment:0,avgProximityScore:1},filteringConfig:{fragmentsBelowScore:.85,proximityScoreThreshold:0},minRequiredResults:1},loggerConfig:{logFunnelEvents:!0,logTimers:!0,logDebugInfo:!0},numResults:4,numConcurrentFragmentLoads:3,dominantFrameConfig:{}};var s=(e=>(e.START="start",e.SKIP_LOW_VOLUME_NODE="skip_low_volume_node",e.SKIP_NO_SUBSCRIBED_LIBRARIES="skip_no_subscribed_libraries",e.INITIATING_FRAGMENT_SEARCH="initiating_fragment_search",e.NO_RESULTS="no_results",e.RESULTS_SHOWN="results_shown",e.RESULT_INSERTED="result_inserted",e.RESULT_DISMISSED="result_dismissed",e.ABORTED="aborted",e.PANEL_OPENED="panel_opened",e.PANEL_CLOSED="panel_closed",e.STARTED_SEARCH="searched_asset",e))(s||{}),l=(e=>(e.SOURCE_FRAGMENT="source_fragment",e.TL_NODE_RESULTS="tl_node_results",e.TARGET_NODE_RESULTS="target_node_results",e))(l||{}),c=(e=>(e.TOTAL="total",e.SEARCH_SUGGESTIONS_START="search_suggestions_start",e.FRAGMENT_SEARCH="fragment_search",e.EXTRACT_CONTEXT="extract_context",e.SUMMARIZE_CONTEXT="summarize_context",e.FILTERING_RANKING="filtering_ranking",e.ASSET_LOOKUP="asset_lookup",e))(c||{}),d=(e=>(e.ASSET_PANEL="asset_panel",e.EVAL="eval",e.SHADOW_SUGGESTIONS="shadow_suggestions",e))(d||{});let u={fileKey:"",queryId:"",selectionId:""}},27107:(e,r,n)=>{n.d(r,{AP:()=>T,Ag:()=>I,GD:()=>E,OD:()=>f,Pt:()=>L,Sg:()=>A,ZU:()=>D,ay:()=>R,e_:()=>b,iG:()=>S,k1:()=>_,mA:()=>y,n1:()=>C,op:()=>P,w3:()=>w,x_:()=>O}),n(741419);var i=n(952423);n(157907);var a=n(675871),o=n.n(a),s=n(6819),l=n(379338),c=n(948895);n(235441);var d=n(45584);n(51910),n(369600);var u=n(747314),p=n(931516);n(468410);var m=n(765577),h=n(185399);function _(){return(0,l.Ay)().anticipation_config||((0,l.Ay)().anticipation_config=h.PV),(0,l.Ay)().anticipation_config}var g=(e=>(e[e.DEFAULT=2]="DEFAULT",e))(g||{});function f(){return 2}function E(){return m.JL}function y(e){let r=0;return(0,i.hV)(e,e=>!e||e.isInternalOnlyNode||e.opacity<=0||!e.visible?"skip":(r+=1,"INSTANCE"===e.type)?"skip":void 0),r}function b(e,r){let n=e.absoluteBoundingBox,i=r.absoluteBoundingBox;return{size:{width:n.w,height:n.h},fragmentSize:{width:i.w,height:i.h},relativePosition:{x:n.x-i.x,y:n.y-i.y}}}function v(e,r){let n={x:e.relativePosition.x+e.size.width/2,y:e.relativePosition.y+e.size.height/2},i={x:n.x/e.fragmentSize.width,y:n.y/e.fragmentSize.height},a={x:r.relativePosition.x+r.size.width/2,y:r.relativePosition.y+r.size.height/2},o={x:a.x/r.fragmentSize.width,y:a.y/r.fragmentSize.height},s={x:1-Math.abs(i.x-o.x),y:1-Math.abs(i.y-o.y)};return Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2))}function T({usage:e,filteringConfig:r,subscribedLibraryKeys:n,fragment:i,targetNodePositionInfo:a}){if(!e.libraryKey||!n?.has(e.libraryKey))return null;let o={size:{width:e.positionInfo.width,height:e.positionInfo.height},fragmentSize:{width:i.width,height:i.height},relativePosition:{x:e.positionInfo.relativeX,y:e.positionInfo.relativeY}},s=a?v(o,a):0;if((r?.proximityScoreThreshold||0)>s)return null;switch(o.proximityScore=s,e.type){case"symbol":return{fragment:i,key:e.key,libraryKey:e.libraryKey,positionInfo:o,type:p.PW.COMPONENT};case"state_group":return{fragment:i,key:e.key,libraryKey:e.libraryKey,positionInfo:o,type:p.PW.STATE_GROUP,stateComponentKey:e.stateComponentKey};default:return null}}function I({scene:e,root:r,fragment:n,targetNodePositionInfo:a,filteringConfig:o,subscribedLibraryKeys:s,includeNestedComponents:l,includeComponentProps:c}){let d=[],u=l?void 0:"skip",m=!!a;return(0,i.hV)(r,r=>{if(!r||r.isInternalOnlyNode||r.opacity<=0||!r.visible)return"skip";if("INSTANCE"===r.type){let i={fragment:n},l=r.symbolId;if(!l)return u;if(m){let n=b(r,e.get(r.findContainingTopLevelFrameOrSelf())),s=a?v(n,a):0;if((o?.proximityScoreThreshold||0)>s)return u;i.positionInfo={...n,proximityScore:s}}let h=e.get(l);if(!h)return u;let _=c?r.componentProperties():void 0;if(h.isState){let r=e.get(h.containingStateGroupId);if(!r)return u;i={...i,type:p.PW.STATE_GROUP,key:r.stateGroupKey,stateComponentKey:h.componentKey,libraryKey:r.sourceLibraryKey,props:_}}else i={...i,type:p.PW.COMPONENT,key:h.componentKey,libraryKey:h.sourceLibraryKey,props:_};return i.key&&i.libraryKey&&i.libraryKey.length&&h.publishID&&h.isSubscribedAsset&&i.libraryKey&&(!s||s?.has(i.libraryKey))&&d.push(i),u}}),d}function S(e){let r={};return e.forEach(e=>{let{key:n,type:i,libraryKey:a,fragment:o,positionInfo:s,asset:l}=e;r[n]||(r[n]={type:i,key:n,libraryKey:a,asset:l,count:0,fragmentCount:0,countPerFragment:{},scorePerFragment:{},stateCounts:{},proximityScores:[],avgCountPerFragment:0,avgScorePerFragment:0,avgProximityScore:0});let c=r[n];c.count++,s&&c.proximityScores.push(s.proximityScore);let d=o?`${o.file_key}.${o.node_id}`:null;if(o&&d&&(!c.countPerFragment[d]&&(c.countPerFragment[d]=0,c.scorePerFragment[d]=o.score,c.fragmentCount++),c.countPerFragment[d]++),i===p.PW.STATE_GROUP){let{stateComponentKey:r}=e;c.stateCounts[r]||(c.stateCounts[r]=0),c.stateCounts[r]++}}),Object.values(r).forEach(e=>{let r=Object.values(e.countPerFragment);e.avgCountPerFragment=r.length>0?o()(r):0;let n=Object.values(e.scorePerFragment);e.avgScorePerFragment=n.length>0?o()(n):0,e.avgProximityScore=e.proximityScores.length>0?o()(e.proximityScores):0}),r}function w({scene:e,topLevelNode:r}){return S(I({scene:e,root:r,includeNestedComponents:!0,includeComponentProps:!1}))}function A({componentUsage:e,rankingConfig:r}){let n=Object.values(e),i={count:Math.max(...n.map(e=>e.count)),fragmentCount:Math.max(...n.map(e=>e.fragmentCount)),avgCountPerFragment:Math.max(...n.map(e=>e.avgCountPerFragment)),avgScorePerFragment:Math.max(...n.map(e=>e.avgScorePerFragment)),avgProximityScore:Math.max(...n.map(e=>e.avgProximityScore))},a={count:Math.min(...n.map(e=>e.count)),fragmentCount:Math.min(...n.map(e=>e.fragmentCount)),avgCountPerFragment:Math.min(...n.map(e=>e.avgCountPerFragment)),avgScorePerFragment:Math.min(...n.map(e=>e.avgScorePerFragment)),avgProximityScore:Math.min(...n.map(e=>e.avgProximityScore))};return n.map(e=>{let n=(e,r,n)=>n===r?0:(e-r)/(n-r),o=n(e.count,a.count,i.count)*r.count,s=n(e.fragmentCount,a.fragmentCount,i.fragmentCount)*r.fragmentCount,l=n(e.avgCountPerFragment,a.avgCountPerFragment,i.avgCountPerFragment)*r.avgCountPerFragment,c=n(e.avgScorePerFragment,a.avgScorePerFragment,i.avgScorePerFragment)*r.avgScorePerFragment,d=n(e.avgProximityScore,a.avgProximityScore,i.avgProximityScore)*r.avgProximityScore;return{...e,key:e.key,score:o+s+l+c+d}}).sort((e,r)=>r.score-e.score)}function C({componentUsage:e,contextComponentUsage:r}){Object.values(e).forEach(({key:n,countPerFragment:i})=>{let a=r[n];if(!a)return;let o=function(e){if(0===e.length)return 0;if(1===e.length)return e[0];let r=[...e].sort((e,r)=>e-r),n=Math.floor(r.length/2);return r.length%2!=0?r[n]:(r[n-1]+r[n])/2}(Object.values(i));a.count<o||delete e[n]})}var N=(e=>(e.ASSET_NOT_FOUND="asset_not_found",e.STATE_TO_STATE_GROUP="state_to_state_group",e))(N||{});function L(e){let r=function(e,r){let n=s.D.getState(),i=(0,u.Ls)(n),a=(0,u.m3)(n),o={};return e.forEach(({type:e,key:n})=>{switch(e){case p.PW.COMPONENT:let s=i[n];s&&(o[n]={...s,suggestionSource:r});break;case p.PW.STATE_GROUP:let l=a[n];l&&(o[n]={...l,suggestionSource:r})}}),o}(e.map(({key:e,type:r})=>({type:r,key:e})),h.Ou.FRAGMENTS),n=(0,u.ZA)(s.D.getState()),i={asset_not_found:[],state_to_state_group:[]},a=[];return e.forEach(e=>{let o=r[e.key];if(!o){i.asset_not_found.push({before:e,after:null});return}let s={...e,asset:o};if(e.type===p.PW.COMPONENT&&o.type===p.PW.COMPONENT&&o.containing_frame?.containingStateGroup){let r=o.containing_frame.containingStateGroup.nodeId,a=r?n[e.libraryKey]?.[r]:null;a?(s={...e,key:a.key,type:p.PW.STATE_GROUP,stateComponentKey:e.key,asset:{...a,suggestionSource:h.Ou.FRAGMENTS}},i.state_to_state_group.push({before:e,asset:o,after:s})):i.state_to_state_group.push({before:e,asset:o,after:null})}a.push(s)}),{updatedComponentInfo:a,debugData:i}}function O(e){if(e)return JSON.stringify({x:e.x,y:e.y})}function R(e){if(e)return JSON.stringify({x:e.x,y:e.y,w:e.w,h:e.h})}function P(e){let r=(0,d.qc)(e);return JSON.stringify({x:r.x,y:r.y,w:r.width,h:r.height})}function D(e){let r=Date.now();return{thumbnail:(0,c.T1)(e),duration:Date.now()-r}}},491962:(e,r,n)=>{n.d(r,{rA:()=>o});var i=n(741419),a=n(634938);let o={[i.D1Y.TEXT]:0,[i.D1Y.FRAME_OR_GROUP]:0,[i.D1Y.COMPONENT]:0,[i.D1Y.INSTANCE]:0,[i.D1Y.IMAGE]:0,[i.D1Y.SHAPE]:0,[i.D1Y.OTHER]:0};[...a.b4,...a._V];var s=(e=>(e[e.PREV=-1]="PREV",e[e.NONE=0]="NONE",e[e.NEXT=1]="NEXT",e))(s||{})},723744:(e,r,n)=>{n.d(r,{c:()=>_,o:()=>g});var i=n(848318),a=n(411132),o=n(654104),s=n(166365),l=n(963376),c=n(790355),d=n(777288),u=n(503024),p=n(38438),m=n(769773);class h extends o.uA{constructor(e){super(e),this._onChevronToggleDropdown=()=>{if(this.props.isLoggedOutCommentUser){this.props.showAuthModalForLoggedOutExp?.();return}if(!this.props.dispatch||!this.props.dropdownKey)return;if(this.props.showingDropdown){this.props.dispatch(c.oB());return}let e=this.chevronRef.current;this.props.dispatch(c.j7({type:this.props.dropdownKey,data:{...this.props.additionalDispatchData,targetRect:e.getBoundingClientRect()}})),this.props.rcsHandlerId&&(0,l.YQ)({id:this.props.rcsHandlerId,properties:{dropdownKey:this.props.dropdownKey}})},this.onChevronClicked=o.cZ(this,this.props.toggleOnClick?"click":"mousedown",e=>{this._onChevronToggleDropdown(),this.props.dispatch&&this.props.dropdownKey&&e.stopPropagation()}),this._onChevronStopPropagation=e=>{e.stopPropagation()},e.divRef?this.chevronRef=e.divRef:this.chevronRef=i.createRef()}render(){let e=[p.FH,this.props.showingDropdown?p.u:"",this.props.className||"",this.props.disableHoverAnimation?p.y$:""].join(" "),r=[p.cN,this.props.svgContainerClassName||""].join(" "),n=0===this.props.tabIndex;return i.createElement("div",{ref:this.chevronRef,"aria-label":n?this.props.ariaLabel:void 0,className:e,"data-onboarding-key":this.props.dataOnboardingKey,"data-testid":this.props.dataTestId,"data-tooltip":this.props.tooltipText,"data-tooltip-type":u.Ib.TEXT,onClick:this.props.toggleOnClick?this.onChevronClicked:this._onChevronStopPropagation,onKeyDown:e=>(0,d.hx)({e,onClickHandler:e=>{this._onChevronToggleDropdown()},onEscapeHandler:e=>{this.chevronRef?.current?.blur()}}),onMouseDown:this.props.toggleOnClick?void 0:this.onChevronClicked,role:n?"button":void 0,tabIndex:this.props.tabIndex},this.props.isUI3?i.createElement(a.O,null):i.createElement(s.B,{svg:this.props.iconOverride||m.A,className:r}),this.props.children)}}function _(e){return i.createElement(h,{...e})}function g(e){return i.createElement(h,{...e})}h.displayName="Chevron"},105594:(e,r,n)=>{var i=n(848318);n(741419),n(397579),n(199689),n(252244),(0,i.createContext)({isLeftPanelCollapsed:!1,isRightPanelCollapsed:!1})},391258:(e,r,n)=>{n.d(r,{q:()=>O});var i=n(848318),a=n(716544),o=n(157907),s=n(543072),l=n(701780),c=n(991371),d=n(197933),u=n(442313),p=n(697714),m=n(320409),h=n(790355),_=n(449737),g=n(557675),f=n(604613),E=n(859470),y=n(503024),b=n(464012),v=n(466829),T=n(802687),I=n(910029),S=n(117592),w=n(532956),A=n(411947),C=n(53744);let N={shouldZoomToStart:!1,shouldWheelPan:!0,enableZoomControls:!0,enableZoomKeyControls:!0,minZoomFactor:.01,maxZoomFactor:10,crossOrigin:"use-credentials"};var L=(e=>(e[e.LEFT=-1]="LEFT",e[e.RIGHT=1]="RIGHT",e))(L||{});let O=(0,b.Ju)(function(e){let r=(0,a.wA)(),[n,b]=i.useState(e.selectedIdx),L=i.useRef(null),[O,R]=i.useState(null),P=i.useRef(null),{onUpdateAltText:D}=e,[M,k]=i.useState(e.attachments),F=(0,T.UR)(I.b.ATTACHMENT_MODAL_BACKGROUND_COLOR),x=F?(0,s.H0)(F):void 0,U=e=>{if(L.current){let r=L.current?.children[e].firstChild;r?.blur()}},B=e=>{U(n),b(e),R(null)},V=e=>{B((n+e+M.length)%M.length)},G=e=>{let r=n===(-1===e?0:M.length-1);return i.createElement(m.$,{onClick:()=>V(e),icon:-1===e?"chevron-left-32":"chevron-right-32",variant:"text",disabled:r})},H=e=>{if("ArrowLeft"===e.key)0!==n&&V(-1);else if("ArrowRight"===e.key){if(n===M.length-1)return;V(1)}},K=()=>(r(_.Lo()),!0);(0,E.O1)(K,E.KD.FULL_SCREEN_MODAL);let W=(e,n)=>{e.preventDefault(),e.stopPropagation(),r(h.j7({type:f.DT,data:{id:"comment_attachment_context_menu",clientX:e.clientX,clientY:e.clientY,attachment:n}}))},z=i.useRef(null),$=i.useCallback(()=>{if(P.current&&!O){let e=P.current.getBoundingClientRect(),n=new l.Mi(e.left+e.width/2,e.top);r(g.jD()),R(n)}else R(null)},[r,O]),Y=i.useCallback(e=>{if(z.current){let i=z.current.value.trim();(i||e)&&D(i,n).then(e=>{e&&(200!==e.status?r(p.F.enqueue({message:(0,u.t)("comments.failed_to_update_alt_text")})):k(e=>(e[n]={...e[n],altText:i},e)))}).catch(e=>{r(p.F.enqueue({message:(0,u.t)("comments.failed_to_update_alt_text")}))})}R(null)},[r,D,n]);return i.createElement(i.Fragment,null,i.createElement(d.i,{displayAs:d.C.Block},i.createElement(S.aF,{className:C.zw,size:"any",onKeyDown:e=>{H(e)}},i.createElement("div",{className:C.qG},i.createElement("div",{className:C.N1},i.createElement("div",{className:C.qd},M[n].metadata.file_name??(0,u.t)("comments.attachment_default_name",{fileExtension:M[n].mediaType.split("/")[1]})),i.createElement(c.Jn,{className:C.yu,recordingKey:"commentMediaDetailModal",onClick:K,innerText:(0,u.t)("comments.close"),"aria-label":(0,u.t)("comments.close")})),i.createElement("div",{className:C.xs},i.createElement(w.DH,{imageSrc:M[n].imageUrl,onContextMenu:e=>{W(e,M[n])},pageBackgroundColor:x??void 0,...N}),!!(0,o.k)().comments_media_alt_text&&(e.canEdit||M[n].altText)&&i.createElement("button",{className:M.length>1?C.dE:C.R5,"data-tooltip-type":y.Ib.TEXT,"data-tooltip":O?void 0:(0,u.t)("comments.add_description"),"data-tooltip-show-above":!0,onClick:()=>O?Y(M[n].altText):$(),ref:P},(0,u.t)("comments.alt_text"))),M.length>1&&i.createElement("div",{className:C.Qc},G(-1),i.createElement("div",{ref:L,className:C.iT},M.map((e,r)=>i.createElement("div",{key:e.thumbnailUrl,className:C.ub},i.createElement(A.M,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,u.t)("comments.attachment_thumbnail_alt_text_default"),isSelected:r===n,onClick:e=>{B(r)},onRightClick:r=>W(r,e)})))),G(1)))),O&&i.createElement(v.A,{text:M[n].altText??"",location:O,onEnter:()=>Y(M[n].altText),onEscape:()=>(R(null),!0),inputRef:z,canEdit:e.canEdit})))},"AttachmentDetailModal",b.ZU.NO)},411947:(e,r,n)=>{n.d(r,{M:()=>f,v:()=>g});var i=n(848318),a=n(468189),o=n(536384),s=n.n(o),l=n(166365),c=n(442313),d=n(417944),u=n(958668),p=n(927263);let m=e=>e.height<256&&e.width<256,h=e=>e.height/e.width>2||e.width/e.height>2,_=e=>e.width>e.height?{width:256,height:128}:{width:128,height:256};function g(e){return i.createElement("div",{className:s()(u.hr,e.isFigmake&&u.RS)},i.createElement(f,{...e}),i.createElement("button",{className:s()(u.P3,e.isFigmake&&u.zG),onClick:()=>e.onDelete()},i.createElement(l.B,{svg:p.A,className:u.i3})))}function f(e){let r=e.dimensions??void 0,n=r&&(m(r)?r:h(r)?_(r):(0,d.$K)(r.width,r.height,256));return i.createElement("button",{className:s()(e.isSelected?u.ig:u.vi,e.isFigmake&&u.nL),onClick:()=>{e.onClick(e.thumbnailUrl)},style:n&&{width:`${n.width}px`,height:`${n.height}px`},onContextMenu:r=>{e.onRightClick&&e.onRightClick(r)}},i.createElement("img",{src:e.thumbnailUrl,crossOrigin:"use-credentials",alt:e.altText||(0,c.t)("comments.attachment_thumbnail_alt_text_default"),className:u.q_}),i.createElement("div",{className:e.overlayText||e.isUploading?u.Xu:u.VO},e.isUploading&&i.createElement(a.k,null),e.overlayText))}},483688:(e,r,n)=>{n.d(r,{a:()=>_});var i=n(848318),a=n(716544),o=n(442313),s=n(790355),l=n(449737),c=n(604613),d=n(391513),u=n(391258),p=n(411947),m=n(649567),h=n(958668);function _(e){let r=(0,a.wA)(),{attachments:n}=e,_=i=>{r((0,l.to)({type:u.q,data:{attachments:n,selectedIdx:n.map(e=>e.thumbnailUrl).indexOf(i),onUpdateAltText:g,canEdit:e.canEdit},showModalsBeneath:!0}))},g=(r,i)=>{let a=n[i];return d.l.put(e.fileKey,a.id,r)},f=(e,n)=>{e.preventDefault(),e.stopPropagation(),r(s.j7({type:c.DT,data:{id:"comment_attachment_context_menu",clientX:e.clientX,clientY:e.clientY,attachment:n}}))};return i.createElement("div",{className:m.KK},n.slice(0,3).map((e,r)=>i.createElement("div",{key:e.id,className:h.Kn},i.createElement(p.M,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,o.t)("comments.attachment_thumbnail_alt_text_default"),overlayText:n.length>3&&2===r?`+${n.length-3}`:void 0,onClick:_,onRightClick:r=>f(r,e),dimensions:0===r&&1===n.length?e.metadata.dimensions:void 0}))))}},467421:(e,r,n)=>{n.d(r,{Z5:()=>c,i$:()=>o,uw:()=>l});var i=n(848318),a=n(157907);let o={minZoomPercentage:76,zoomScaleOverlap:64,clusterClickResultViewportPercentage:35,rebuildClustersZoomDelay:50,disableSidebar:!1},s=new Set;function l(e){if(!(0,a.k)().internal_only_debug_tools)return;let r="function"==typeof e?e({...o}):e;o={...o,...r},requestAnimationFrame(()=>{s.forEach(e=>e(o))})}function c(){let[e,r]=i.useState(o);return i.useEffect(()=>{let e=e=>{r(e)};return s.add(e),()=>{s.delete(e)}},[r]),e}},534833:(e,r,n)=>{n.d(r,{Ao:()=>s,Ko:()=>c,LX:()=>o,c4:()=>d,xN:()=>l});var i=n(128080),a=n.n(i),o=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ACTIVE=1]="ACTIVE",e[e.DIMMED=2]="DIMMED",e))(o||{});function s(e,r){return`${100*Math.round(e.x/100)},${100*Math.round(e.y/100)},${r}`}function l(e,r){if(e.isSinglePin&&r.isSinglePin){var n,i;return n=e.pins[0],i=r.pins[0],n.x!==i.x||n.y!==i.y||!a()(n.avatars,i.avatars)||!a()(n.previewMessageMeta,i.previewMessageMeta)||n.isUnread!==i.isUnread||n.numUnreadReplies!==i.numUnreadReplies||n.isResolved!==i.isResolved||!a()(n.selectionBoxAnchor,i.selectionBoxAnchor)||!a()(n.otherBoundingBoxes,i.otherBoundingBoxes)||!a()(n.isPinnedToFile,i.isPinnedToFile)}return e.pins.length!==r.pins.length||e.isUnread!==r.isUnread||e.isPinnedToFile!==r.isPinnedToFile}let c={length:0,leafNodes:new Set([]),all:()=>[],getParentOf:()=>null,zoomScale:-1};function d(e){let r=new Map,n=[];return e.forEach(e=>{if(r.has(e.user.id)){let i=r.get(e.user.id);n[i].num_unread_comments+=e.isUnread?1:0,n[i].num_comments+=1}else n.push({avatar_url:e.user.img_url,avatar_user_id:e.user.id,avatar_user_handle:e.user.handle,num_unread_comments:e.isUnread?1:0,num_comments:1}),r.set(e.user.id,n.length-1)}),n}},764318:(e,r,n)=>{n.d(r,{p:()=>l});var i=n(848318),a=n(701780),o=n(45584),s=n(306196);function l(e){let r=(0,o.Cj)(),n=a.Mi.scale(-1,r);return i.createElement("div",{className:s.M,style:{top:r.y,left:r.x,height:r.height,width:r.width},onScroll:e.forceNoScroll?e=>{e.currentTarget.scrollLeft=0,e.currentTarget.scrollTop=0}:void 0},i.createElement("div",{className:s.W,style:{top:n.y,left:n.x}},e.children))}},255603:(e,r,n)=>{n.d(r,{HH:()=>N,xT:()=>T});var i=n(848318),a=n(716544),o=n(536384),s=n.n(o),l=n(579020),c=n(586994),d=n(855584),u=n(145015),p=n(931199),m=n(442313),h=n(449502),_=n(834996),g=n(661780),f=n(804072),E=n(503024),y=n(476087),b=n(814815),v=n(163841);function T(e){let r=RegExp("^\\w+:"),n=e.match(r);return""===e||n&&["http:","https:","mailto:","tel:"].includes(n[0].toLowerCase())?e:"https://"+e}let I=i.memo(e=>{let{text:r,hyperlink:n}=e,o=i.useMemo(()=>(0,c.x6)(r),[r]),s=(0,_.z3)(),l=(0,a.wA)();return i.createElement(u.CY,{"data-tooltip":E.MW.HYPERLINK_POPUP,"data-tooltip-editor-type":s,"data-tooltip-interactive":!0,"data-tooltip-precise":!0,"data-tooltip-show-above":!0,"data-tooltip-type":E.Ib.SPECIAL,"data-tooltip-unconstrain-width":!0,"data-tooltip-url-string":n,onClick:()=>{l((0,h.RK)({rawInput:T(n)}))},trusted:!1},o)}),S=i.memo(e=>{let{userId:r,imgUrl:n,handle:a,href:o}=e;return i.createElement(u.CY,{"data-mention-user-id":r,"data-tooltip":y.N,"data-tooltip-show-above":!0,"data-tooltip-type":E.Ib.SPECIAL,"data-tooltip-unconstrain-width":!0,"data-tooltip-user-handle":a,"data-tooltip-user-img-url":n,href:o,target:"_blank",trusted:!0},a)}),w=i.memo(function(e){let r=g.iZ()?.community_profile_id,{handle:n,commentId:a,profileId:o,profileName:s,profileImgUrl:c}=e,p=(0,d.F)(n),m=(0,d.F)(s);return i.createElement(u.CY,{"data-tooltip":y.N,"data-tooltip-show-above":!0,"data-tooltip-type":E.Ib.SPECIAL,"data-tooltip-unconstrain-width":!0,"data-tooltip-user-handle":m,"data-tooltip-user-img-url":c,href:`/${p}`,onClick:()=>{(0,l.sx)("at_mention_link_clicked",{mentioned_profile_id:o,profile_id:r,comment_id:a})},target:"_blank",trusted:!0},p)}),A=i.memo(e=>{let{text:r,tokenStyles:n}=e,a=i.useMemo(()=>(0,c.x6)(r),[r]),o=n?.map(e=>"b"===e?v.hp:"i"===e?v.u5:"s"===e?v.Vc:"lightbold"===e?v.XH:void 0)||[];return i.createElement(p.M,null,i.createElement("span",{className:s()(o)},a))}),C=i.memo(e=>{let{text:r,userId:n,profileId:a,user:o,orgPath:s,profiles:l,commentId:c,tokenStyles:u,hyperlink:p}=e,m=(0,d.F)(r);if(n)return i.createElement(S,{href:`/files${s}/user/${n}`,userId:n,handle:(0,d.F)(o?.handle)||void 0,imgUrl:o?.img_url});if(a&&m){let e="@"+m,r=l?.[a];return r?i.createElement(w,{handle:e,commentId:c,profileId:r.id,profileName:r.name,profileImgUrl:r.img_url}):i.createElement("span",null,e)}if(null===a&&m){let e="@"+m;return i.createElement("span",null,e)}let h=p&&T(p);return h&&m&&(0,b.$)(h)?i.createElement(I,{text:m,hyperlink:h}):m?i.createElement(A,{text:m,tokenStyles:u}):null}),N=i.memo(e=>{let r=(0,f.q)(),n=(0,a.d4)(r=>e.mentionedProfiles||r.communityHub?.comments?.mentionedProfiles),o=(e,r,n,a,s)=>e.map((e,l)=>{let c="";if(e.styles?.includes("ul")?c=v.ty:e.styles?.includes("ol")&&(c=v.A9),e.children?.length){let d=e.children.map((e,d)=>i.createElement("li",{key:`li-${r}-${l}-${d}`,className:c},o(e.children,`${r}-${l}-${d}`,n,a,s)));if(e.styles?.includes("ul"))return i.createElement("ul",{key:`ul-${r}-${l}`},d);if(e.styles?.includes("ol"))return i.createElement("ol",{key:`ol-${r}-${l}`},d)}return i.createElement(C,{key:`${r}-${l}`,commentId:s,hyperlink:e.link,orgPath:n,profileId:e.profile_id,profiles:a||null,text:(0,d.F)(e.t)||void 0,tokenStyles:e.styles||null,user:e.user_annotated,userId:e.user_id})}),{messageMeta:s,showEditedIndicator:l,commentId:c}=e,u=e.className||v.zD;return i.createElement("div",{className:v.$t+" "+u,"data-testid":"comment-message",dir:"auto"},o(s,c,r,n,c),l&&i.createElement("span",{className:v.oh,key:"edited_indicator"},"\xa0",(0,m.tx)("comments.edited")))});N.displayName="CommentMessage"},896641:(e,r,n)=>{n.d(r,{y:()=>i}),n(848318),n(727341),n(577023),n(252244),n(27776);let i={showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,orphanedBy:"deleted_pages"}},572429:(e,r,n)=>{n.d(r,{L9:()=>L,T4:()=>P,ek:()=>x,hh:()=>V,pO:()=>G,vO:()=>U});var i=n(848318),a=n(716544),o=n(741419),s=n(897392),l=n(179703),c=n(128080),d=n.n(c),u=n(586994),p=n(442313),m=n(200502),h=n(119699),_=n(196484),g=n(125395),f=n(391718),E=n(170513),y=n(507720),b=n(678395),v=n(625069),T=n(661780),I=n(207715),S=n(830789),w=n(526830),A=n(802687),C=n(879087);let N=new Set([]);function L(e){return({creationDate:(0,p.t)("comments.sort_by_date"),recent:(0,p.t)("comments.sort_by_last_action"),unread:(0,p.t)("comments.sort_by_unread"),slide:(0,p.t)("comments.sort_by_slide")})[e]}let O=(e,r)=>Date.parse(r.comments[0].created_at)-Date.parse(e.comments[0].created_at),R={creationDate:O,recent:(e,r)=>Date.parse(r.lastRepliedAt||r.comments[r.comments.length-1].created_at)-Date.parse(e.lastRepliedAt||e.comments[e.comments.length-1].created_at),unread:(e,r)=>{let n=Number(e.comments.some(e=>e.isUnread)),i=Number(r.comments.some(e=>e.isUnread));return n===i?O(e,r):i-n},slide:(e,r)=>0};function P(e){return({resolved:(0,p.t)("comments.show_resolved_comments"),yours:(0,p.t)("comments.only_your_threads"),currentPage:(0,p.t)("comments.only_current_page"),currentSlide:(0,p.t)("comments.only_current_slide")})[e]}let D=e=>!e.comments[0].resolved_at,M=e=>e.sidebarItemType===S.kT.COMMENT_THREAD,k=e=>e.sidebarItemType===S.kT.FEED_POST,F={currentPage:!1,currentNode:!1,currentSlide:!1,currentDevModeFocus:!1};function x(e){return({commentsOnly:(0,p.t)("comments.only_comments"),postsOnly:(0,p.t)("comments.only_posts")})[e]}let U={postsOnly:[C.mW.RESOLVED],all:[],commentsOnly:[]};async function B(e,r){if(r){let n=r.replace(u.Py,u.H3);return await e.search(n).then(e=>new Set(e.map(e=>e.item.parentId||e.item.id)))}return N}let V=i.createContext({});function G(e){let r=(0,E.wq)(),n=(0,a.wA)(),c=(0,v.UP)(),u=(0,a.d4)(e=>e.comments.showResolved),p=(0,a.d4)(e=>e.comments.showOnlyParticipating),S=(0,a.d4)(e=>e.mirror.appModel.currentPage),N=e.currentNode||S,L=(0,T.TA)()||void 0,O=(0,a.d4)(e=>e.selectedView.commentThreadId),P=(0,I.ut)(o.Ez5?.singleSlideView().focusedSlideId,s.AD),x=(0,h.hA)(),G=(0,A.Ld)(),[H,K]=i.useState("creationDate"),[W,z]=i.useState({...F,resolved:!u,yours:p,currentDevModeFocus:!!x,...e.initialFilterState}),[$,Y]=i.useState("all"),[j,q]=i.useState(""),[X,Z]=i.useState(null),J=(0,b.kC)(r),Q=i.useMemo(()=>({resolved:D,yours:e=>L&&e.comments.some(e=>e.user_id===L||(0,y.F$)(e).includes(L))||!1,currentPage:e=>S&&e.page===S||!1,currentNode:e=>{let r=e.comments[0].client_meta;return!!r?.in_frame&&r.node_id===N},currentSlide:e=>{let r=e.comments[0].client_meta?.node_id,n=r?(0,l.UN)().get(r):void 0,i=n?n.containingSlideId:s.AD;return P===s.AD||i===s.AD||i===P},currentDevModeFocus:e=>{let r=x?(0,l.UN)().get(x):null;if(!r)return!0;let n=e.comments[0]?.client_meta?.node_id,i=n?(0,l.UN)().get(n):null;return(0,m.WJ)(r,i)}}),[L,S,N,P,x]),ee=i.useMemo(()=>({all:()=>!0,commentsOnly:M,postsOnly:k}),[]),et=i.useCallback(e=>{q(e)},[]),er=i.useCallback(e=>{n(_.nL({activeSort:e})),K(e)},[n]),en=i.useCallback(e=>{"resolved"===e&&(n(_.U3({showResolved:W.resolved})),c&&n((0,f.mH)(W.resolved))),"yours"===e&&(n(_.RO({showOnlyParticipating:!W.yours})),c&&n(g.Zj(W.yours?w.Qv.ALL:w.Qv.ME))),z(r=>(r[e]=!r[e],{...r}))},[n,W,c]),ei=i.useMemo(()=>{let e=new Set;for(let r of Object.values(C.mW))W[r]&&e.add(r);return e},[W]),ea=i.useCallback(e=>{Y(e)},[]);i.useEffect(()=>{U[$].forEach(e=>{("resolved"===e?!ei.has(e):ei.has(e))&&en(e)})},[$,ei,en]),i.useEffect(()=>{j?B(J,j).then(e=>{d()(X,e)||Z(e)}):Z(null)},[r,j,X,J]);let eo=i.useMemo(()=>({...R,...G}),[G]),es=i.useMemo(()=>(function(e,r,n,i,a,o,s,l){if("loaded"!==e.status)return e;let c=[...e.data];for(let e of(l&&(c=c.filter(e=>l.has(e.id))),i))c=c.filter(o[e]);return c=c.filter(s[n]),{...e,data:c.sort(a[r])}})(r,H,$,ei,eo,Q,ee,X),[r,H,$,ei,eo,Q,ee,X]),el=i.useMemo(()=>({setSort:er,toggleFilter:en,setMode:ea,setQuery:et}),[et,er,en,ea]),ec=i.useMemo(()=>({activeQuery:j,activeSort:H,activeMode:$,activeFilters:ei,threads:r,filteredThreads:es,filteredSidebarItems:es,threadManager:el}),[j,H,$,ei,r,es,el]),ed=i.useMemo(()=>{if(r&&"loaded"===r.status)return r.data.find(e=>e.id===O)},[O,r]);return i.useEffect(()=>{ed&&ed.comments[0].resolved_at&&W.resolved&&en("resolved")},[W,ed,en]),i.useEffect(()=>{z(e=>({...e,currentDevModeFocus:!!x}))},[x,z]),i.createElement(V.Provider,{value:ec},e.children)}},688637:(e,r,n)=>{n.d(r,{Uu:()=>g,wV:()=>f});var i=n(848318),a=n(716544),o=n(196484),s=n(507720),l=n(45584),c=n(661780),d=n(835491),u=n(286720),p=n(576466),m=n(610080),h=n(798918);let _=n(479760).ss;function g(e){let r=(0,a.d4)(e=>e.comments.typeahead);return e.mentionsDisabled&&r?.type==="mentions"?null:i.createElement(E,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:!1,decoratorsRef:e.decoratorsRef,width:e.width,direction:e.direction,targetRect:e.targetRect,useFixedPosition:!0,useWindowAsViewport:!0})}function f(e){let r=(0,a.d4)(e=>e.comments.typeaheadPositionOffset),n=i.useMemo(()=>{let n=e.position||{x:0,y:0};return{top:r.top+n.y,right:r.right+n.x,bottom:r.bottom+n.y,left:r.left+n.x,width:r.width,height:r.height}},[r,e.position]),o=(0,s.mz)();return i.createElement(E,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:e.isCommunityMentions,decoratorsRef:e.decoratorsRef,width:o,direction:h.ri.DOWNWARDS,targetRect:n})}function E(e){let r;let n=(0,a.d4)(e=>e.comments.emojiPicker),s=(0,a.d4)(e=>e.comments.typeahead),[g,f]=(0,i.useState)(null);i.useEffect(()=>{s?.type==="suggestions"&&f(u.NS)},[s?.type]);let E=(0,a.wA)(),y=i.useCallback(()=>{E(o.RI({visible:!1}))},[E]),b=i.useCallback(e=>{E(o.We(e))},[E]),v=(0,l._X)({subscribeToUpdates_expensive:!0}),T=i.useMemo(()=>e.useWindowAsViewport?{isPanning:!1,isZooming:!1,height:window.innerHeight}:v,[e.useWindowAsViewport,v]),I=(T?.isPanning||T?.isZooming)&&n?.visible;i.useEffect(()=>{I&&y()},[I,y]);let S=(0,c.iZ)(),w=!!(n&&n.visible||s),{onClear:A}=e,C=i.useCallback(()=>{n&&n.visible&&y(),s&&A()},[n,s,y,A]),{decoratorsRef:N}=e;return i.useEffect(()=>{N&&(N.current={visible:w,clearDecorators:C})},[C,N,w]),r={...r=e.useFixedPosition||e.direction!==h.ri.UPWARDS?g&&e.targetRect.height>0&&e.targetRect.bottom>T.height-g&&e.targetRect.top>T.height-e.targetRect.bottom?e.useFixedPosition?{useFixedPosition:!0,targetRect:e.targetRect,direction:h.ri.UPWARDS}:{positionFromBottom:{left:e.targetRect.left,bottom:T.height-e.targetRect.top},direction:h.ri.UPWARDS}:{useFixedPosition:e.useFixedPosition,targetRect:e.targetRect,direction:h.ri.DOWNWARDS}:{positionFromBottom:e.positionFromBottom,direction:h.ri.UPWARDS},useWindowAsViewport:e.useWindowAsViewport},i.createElement("div",{style:{pointerEvents:"auto"}},n&&n.visible&&i.createElement(d._,{onInsert:n.onPick,onCancel:n.onCancel??y,targetRect:n.targetRect}),s&&"emojis"===s.type&&i.createElement(p.j,{dispatchTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,width:e.width,setMaxTypeaheadHeight:f,isComments:!0,...r}),S&&s&&"mentions"===s.type&&(s.search||s.mentions.length>0)&&i.createElement(m.E,{dataTestId:"comment-mentions-typeahead",dispatch:E,entity:S,isComments:!0,isCommunityMentions:e.isCommunityMentions,onClear:e.onClear,onInsert:e.onInsert,recordingKey:"mentionsTypeaheadView",setMaxTypeaheadHeight:f,setTypeahead:b,typeahead:s,width:e.width,zIndex:e.isCommunityMentions?void 0:_,...r}),s&&"suggestions"===s.type&&i.createElement(u.Cs,{setTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,width:e.width,...r}))}},582907:(e,r,n)=>{n.d(r,{Kb:()=>v,ny:()=>b});var i=n(848318),a=n(536384),o=n.n(a),s=n(586994),l=n(431118),c=n(442313),d=n(978744),u=n(503024),p=n(246633),m=n(218314),h=n(334137),_=n(376821);function g(e){return void 0!==e.numUsers}let f={};function E(e,r){let n=e.map(e=>e.handle).slice(0,r),i=e.length-r;return i>0&&n.push((0,l.td)(i,"other")),(0,l.Yx)(n)}d.i.forEach(e=>{f[`:${e.id}:`]=e});let y=i.forwardRef(function(e,r){let n=g(e.reaction)?e.reaction.numUsers:e.reaction.users.length,a=Object.keys(e.reaction.skinTonesToUsers).length,l=a>0?Object.keys(e.reaction.skinTonesToUsers):[""],c=l.map(r=>(0,s.UF)(`${e.reaction.emoji}${r}`)[0]),d={};if(!g(e.reaction)){let r=[],n=[];if(a>0)l.forEach(i=>{let o=`${e.reaction.emoji}${i}`;r.push((0,s.UF)(o)[0].unicode);let l=E(e.reaction.skinTonesToUsers[i],Math.floor(40/a));n.push([o,l])});else{r.push((0,s.UF)(e.reaction.emoji)[0].unicode);let i=E(e.reaction.users,40);n.push([e.reaction.emoji,i])}d={emojiUnicodeList:r,emojiShortcodeToUsers:n}}return i.createElement("button",{className:o()({[h.bs]:e.reaction.selected,[h.mJ]:!e.reaction.selected,[h.aN]:!e.visible}),"data-tooltip-type":u.Ib.SPECIAL,"data-tooltip":m.h,"data-tooltip-data":JSON.stringify(d),"data-tooltip-max-width":200,onClick:e.onClick,"data-testid":`reaction-button-${e.reaction.emoji}`,ref:r},c.map(e=>i.createElement("span",{key:`${e.meta}`,className:h.A9},e.unicode)),i.createElement("span",{className:h.U9},n))});function b(e){let r=e.styleClassName?e.styleClassName:h.BB;return i.createElement(p.YW,{svg:_.A,"data-tooltip-type":u.Ib.TEXT,"data-tooltip":(0,c.t)("comments.add_reaction"),onClick:e.onClick,selected:e.selected,className:r,selectedClassName:e.selectedStyleClassName,dataTestId:"add-reaction-button","data-fullscreen-intercept":e["data-fullscreen-intercept"]})}function v(e){let{reactions:r,collapseOverflow:n,onClickExisting:a,children:s,prependToList:l}=e,d=i.useRef(null),u=i.useRef({}),[p,m]=i.useState(null),[_,g]=i.useState(!n);i.useLayoutEffect(()=>{if(!d.current)return;let{width:e}=d.current.getBoundingClientRect(),n=-parseInt(h.h)+parseInt(h.bB),i=0;for(let a of r){let o=u.current[a.emoji];if(!o)return;if((n+=parseInt(h.h)+o.getBoundingClientRect().width)>e||i===r.length-1&&n+40+parseInt(h.h)>e)break;i+=1}m(i)},[r]);let f=null===p?null:r.length-p,E=r.map((r,n)=>{let o=a?e=>a(r,e):void 0;return i.createElement(y,{key:r.emoji,reaction:r,onClick:o,ref:e=>u.current[r.emoji]=e,visible:_||e.addedReaction||null===p||n<p})}),b=!(_||e.addedReaction)&&null!==f&&f>0;return i.createElement(i.Fragment,null,i.createElement("div",{className:o()({[h.KD]:!0,[h.l$]:b,[h._s]:!(_||e.addedReaction)&&null===f}),ref:d},...l??[],E,!b&&s),b&&i.createElement("div",{className:h.Jd},i.createElement("button",{className:h.mJ,onClick:()=>{g(!0)},"data-testid":"show-more-reactions-button"},(0,c.tx)("comments.num_hidden_more",{numHidden:f}))))}},390280:(e,r,n)=>{n.d(r,{K:()=>d});var i=n(848318),a=n(431118),o=n(442313),s=n(576220),l=n(524987),c=n(149906);function d(e){let r=i.useCallback(()=>{e.replyContainerRef?.current&&e.replyContainerRef.current.scrollIntoView({block:"end",behavior:"smooth"})},[e.replyContainerRef]),n=i.createElement(l.C,{allowAttachments:e.allowAttachments,ariaLabel:e.authorNames?(0,o.t)("fullscreen.accessibility.reply_to_comment_with_authors",{username:(0,a.Yx)(e.authorNames)}):(0,o.t)("fullscreen.accessibility.reply_to_comment"),attachments:e.attachments,authorChanged:e.authorChanged,className:e.className,createdAt:e.createdAt,deleteAttachment:e.deleteAttachment,dispatch:e.dispatch,editingExistingComment:e.editingExistingComment,editorOnClear:e.editorOnClear,editorOnInsert:e.editorOnInsert,editorRef:e.editorRef,editorType:e.editorType,errorFallback:i.createElement(l.e,{type:"thread"}),fallback:null,fileKey:e.fileKey,hideEmojiPicker:e.hideEmojiPicker,hyperlinkLocation:e.hyperlinkLocation,isDisabled:e.isDisabled,isEmojiPickerDisabled:e.isEmojiPickerDisabled,maintainSelectionOnFocus:e.maintainSelectionOnFocus,mentionables:e.mentionables,messageMeta:e.messageMeta,mountInputFocused:e.mountInputFocused,onCancel:e.onCancel,onComposeFocus:e.onComposeFocus,onEditStart:e.onEditStart,onSubmit:e.onSubmit,placeholderText:e.placeholderText,recordingKey:e.recordingKey,scrollToBottom:e.replyContainerRef&&r,setHyperlinkEditorRef:e.setHyperlinkEditorRef,setHyperlinkLocation:e.setHyperlinkLocation,setIsEditorFocused:e.setIsEditorFocused,submitText:e.submitText,threadId:e.threadId,threadPosition:e.threadPosition,typeahead:e.typeahead,updateAttachment:e.updateAttachment,updateMessage:e.updateMessage,user:e.user,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition});return i.createElement("div",{className:c.MP,ref:e.replyContainerRef},i.createElement("div",{className:c.i8},i.createElement(s.H8,{user:e.user||{}})),n)}},783432:(e,r,n)=>{n(848318),n(716544),n(425642),n(157907);var i=n(39773);n(896966),n(442313),n(449737),n(779073),n(976308),n(326971),n(51910),n(369600),n(376780),n(710665),n(988540),n(183905),n(777042),n(373072),n(252244),n(616385),n(515071),n(810175),n(345883),(0,i.eU)(!1)},537038:(e,r,n)=>{n.d(r,{hf:()=>s}),n(741419);var i=n(39773),a=n(708898);n(150980),n(6819),n(697714);var o=n(365581);function s(){return function(){let e=i.zl.get(a.v4);return{availableVariables:i.zl.get(a.nE),localVariables:i.zl.get(o.uk),libraryVariables:e.libraryVariables,libraryVariableSetIdToSet:e.libraryVariableSetIdToSet,libraryKeys:e.libraryKeys}}()}},731849:(e,r,n)=>{n.d(r,{M:()=>s});var i=n(235441),a=n(727341),o=n(747863);function s(){let e=(0,i.Em)(),r=(0,a.GS)(),n=(0,o.o3)(o.nt.selectionActionsInToolbelt);return e&&r&&n}},447438:(e,r,n)=>{n(848318),(0,n(39773).eU)({isShowing:!1,isFigjamDLTBanner:!1})},814293:(e,r,n)=>{n.d(r,{bK:()=>d,oZ:()=>u,r8:()=>s,uK:()=>c});var i=n(39773),a=n(868638);let o=(0,i.eU)({}),s=(0,i.Iz)(e=>(0,i.eU)(r=>r(o)[e],(r,n,i)=>{n(o,r=>({...r,[e]:i}))}));(0,i.eU)(e=>Object.values(e(o)));let l=(0,i.eU)(!1),c=(0,i.eU)({autoScroll:!1});async function d(e,r,n,d){let{guid:u}=e;i.zl.set(c,e=>e.autoScroll?{...e,guid:u}:e),d||i.zl.set(l,!0),await function(e,r){let{guid:n,name:o}=e,l=.03*o.length;return new Promise(c=>{(0,a.i)(o.length,0,{onUpdate:a=>{!r.signal.aborted&&e.isAlive&&i.zl.set(s(n),{guid:n,boundingBox:e.absoluteBoundingBox,state:"deleting",name:o.slice(0,Math.floor(a))})},duration:l,ease:"linear",onComplete:c})})}(e,n),await function(e,r,n){let{guid:o}=e,l=.07*r.length;return new Promise(c=>{(0,a.i)(0,r.length,{onUpdate:a=>{!n.signal.aborted&&e.isAlive&&i.zl.set(s(o),{guid:o,boundingBox:e.absoluteBoundingBox,state:"writing",name:r.slice(0,Math.floor(a))})},duration:l,ease:"linear",onComplete:c})})}(e,r,n),s.remove(u),i.zl.set(o,e=>{let r={...e};return delete r[u],r}),d||i.zl.set(l,!1)}function u(){s.removeAll()}},659402:(e,r,n)=>{n.d(r,{W:()=>o}),n(39773);var i=n(6819),a=n(481540);function o(e,r,n,o){var s,l,c,d;let u=i.D.getState(),p=(s=r,l=e,c=n,d=i.D,{search_session_id:o,node_id:s,node_type:function(e,r){if(!e)return null;let n=r.getState().mirror.sceneGraph.get(e);return n?.type||null}(s,d),query_length:l?.length,contains_at_symbol:l?.includes("@"),result_row_index:c});(0,a.ds)("canvas_mention_search_cancelled",u.openFile?.key,u,p)}n(808160)},300129:(e,r,n)=>{n.d(r,{LL:()=>b,be:()=>v,k6:()=>I,xG:()=>T});var i=n(848318);n(821360);var a=n(992277),o=n(741419),s=n(673906),l=n(379338),c=n(502255),d=n(896966),u=n(11012),p=n(273216),m=n(73467),h=n(728075);let _=Object.create(null);function g(e){return(0,p.w6)(e).catch(()=>null)}let f=new m.A,E=(0,l.ck)("cbbdc3ccc2f650369332a454328722aa11cbd78a");async function y({profileImageUrl:e,userName:r,userColor:n,noCircleOutline:i}){let o=500*window.devicePixelRatio,s=81.25*window.devicePixelRatio,[l,d]=await Promise.all([g({url:E,height:o,width:o}),e?g({url:e,height:o,width:o}):null]),u=(0,p.Dl)(o,o),m=u.getContext("2d");if(!l)return"";!function(...e){for(let r of e)if(r&&(!(r instanceof HTMLImageElement)||!r.src||!r.width||!r.height)){let e=r.outerHTML||Object.prototype.toString.call(r);(0,c.$D)(a.e.FIGJAM,Error(`Expected object to be a valid HTMLImageElement but it wasn't: '${e}'`))}}(l,d);try{i||m.drawImage(l,0,0,o,o)}catch(e){return S(l,e),""}if(m.arc(o/2,o/2,o/2-s,0,2*Math.PI,!0),m.clip(),d){let e=o-2*s;try{m.drawImage(d,s,s,e,e)}catch(e){return S(d,e),""}}else{if(!n||!r)return"";m.fillStyle=n,m.fillRect(0,0,o,o),m.textBaseline="middle",m.textAlign="center";let e=187.5*window.devicePixelRatio;m.font=`${e}px Inter`,m.fillStyle===h.$C?m.fillStyle=h.PN:m.fillStyle="white",m.fillText(r.substring(0,1).toUpperCase(),o/2,o/2+10*window.devicePixelRatio)}m.scale(window.devicePixelRatio,window.devicePixelRatio);let _=u.toDataURL("image/png");return f.set(_,e,r,n,i),_}function b(e,r,n,a){let[o,s]=(0,i.useState)(f.get(e,r,n,a)||"");return(0,i.useEffect)(()=>{if(!e&&!(r&&n)){s("");return}let i=!1,l=f.get(e,r,n,a);return l!==o&&(l?s(l):y({profileImageUrl:e,userName:r,userColor:n,noCircleOutline:a}).then(e=>{i||s(e)})),()=>{i=!0}},[e,r,n,a,o]),o}async function v(e,r){let n=await (0,u.T)(e,_);(0,d.Lo)("activateStampToolWithImageURL","setting stamp tool",{label:r,bytesLength:n?.length}),o.glU.activateStampTool(n,r)}async function T(e,r,n,i,a,l){let c=await (0,u.T)(e,_);(0,s.l7)(l,"drop-face",()=>o.glU.dropFaceOntoCanvas(c,"Face Stamp",r,n,i,a))}function I(e,r){if(e.image)return(0,l.ck)(e.image);if(e.imageFunc)return e.imageFunc(r);throw Error(`Invalid emoji ${e} has no image nor imageFunc`)}function S(e,r){if(r&&(0,c.$D)(a.e.FIGJAM,r),!e)return;let n=e.outerHTML||Object.prototype.toString.call(e);(0,c.$D)(a.e.FIGJAM,Error(`Expected object to be a valid HTMLImageElement but it wasn't: '${n}'`))}},767252:(e,r,n)=>{n.d(r,{WJ:()=>p,hf:()=>d,sn:()=>o,tR:()=>u});var i=n(379338),a=n(442313);let o="s-heart";function s(e){return[{type:"STAMP",name:"s-thumbsUp",image:e.thumbsUp,position:2,label:"Thumbs up",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.thumbs_up")},{type:"STAMP",name:"s-plusOne",offset:.72,image:e.plusOne,position:1,label:"+1",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.plus_one")},{type:"STAMP",name:"s-star",image:e.star,position:8,label:"Star",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.star")},{type:"STAMP",name:"s-question",image:e.question,position:7,label:"Question",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.question")},{type:"STAMP",name:"s-thumbsDown",image:e.thumbsDown,position:6,label:"Thumbs down",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.thumbs_down")},{type:"STAMP",name:"s-dot",imageFunc:e.dots,position:5,label:"Dot",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.dot")},{type:"STAMP",name:"s-profile",offset:.73,imageFunc:e.profile,position:4,label:"Profile",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.profile")},{type:"STAMP",name:"s-heart",image:e.heart,position:3,label:"Heart",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.heart")}]}let l={F24E1E:"f5c62908951d5597fd78d43b466a590616ba2693","0FA958":"a80c699432955f63c3613761744dfb61758780ae",FFC700:"a9d0704b01ae94a42c00e495f58e169966099333","5551FF":"87a816dc22c9fe975e6cb531cc7f2b47ff66f26e",D27C2C:"a7115640741f347d4fec9f4f82bf88465e6081f4",848484:"1775b53401dbbb5bfb48ae9b00b650952e5c8d67",EBEBEB:"c3312ab90b95e13d91b5a826628708663e502ddc",667799:"27be94d8a31dc67f2fdf0bc0ed1cd2c7d6c48cba","007BE5":"4f73e22fc8d7e9d55bfb24dcc7b7d6201ca51fb3","9747FF":"d337617455a562b3a0859d87fac6d82f86d8d729",FF24BD:"19e369b3f6531ed8571b6fed7db7e2fe7b4d4517",F24822:"4c9a2a1f92768b87946ec3a4d9000f0fe99d760c",FFCD29:"13a81b40823bfed9e05f4b0eedab902453bf47b3","14AE5C":"fd086d9788aa1e5a4dd7c10436a59d5d51c6c063"},c={"s-heart":"421d20c98db007d377890189b093545f16498acc","s-thumbsDown":"0bda50cfaecc87b58d0a78e8a8768b55a9f67c03","s-star":"cbc8d70c16c1fcf0d8690429564495cce3ab11c0","s-thumbsUp":"5e39a5f28101ed8ca9d9e38275066867c47294e9","s-question":"75a4d8d5c7e5fc18ad3f76ce2c1166b68f9ec046","s-plusOne":"0d4a582f5dd156228c1443c9fd19a331ff8f087b"};function d(e){return s({heart:c["s-heart"],thumbsDown:c["s-thumbsDown"],star:c["s-star"],thumbsUp:c["s-thumbsUp"],question:c["s-question"],profile:()=>e,dots:e=>{let r=l[e]||l["667799"];return(0,i.ck)(r)},plusOne:c["s-plusOne"]})}let u=(0,i.ck)("2b2029d1eabf48358e208427103a2023435751dc"),p=s({heart:"cdb352553f6650801d744ab73fd416222f120bd6",thumbsDown:"1b9c978d009d03d1abececfe15edf721a7c14374",star:"a9c2008e62c6d5a4421a22cd960b5ca54fdbe93f",thumbsUp:"d7c56a0ef07da63ed9f641ab04637704a4744c74",question:"4fe56356e345e558e669ff6e369f0265ee0b7fe7",profile:()=>(0,i.ck)("cb417fb549d06a2fb42e182cddd2b94b1996b768"),dots:()=>u,plusOne:"96363e23778476978d264bfcbd286bc0cbafe6cd"})},18262:(e,r,n)=>{n(848318),n(536384),n(145015),n(882439),n(442313),n(895104),n(180423),n(155651),n(727341),n(312255),n(495052),n(863671),n(404712),n(809086)},7047:(e,r,n)=>{n(848318),n(716544),n(741419),n(405866);var i=n(992444);n(103446),n(849752),(0,n(53818).D)(()=>i.Y5.fromFullscreen)},505137:(e,r,n)=>{n(848318),n(716544),n(741419),n(405866);var i=n(992444);n(103446),n(849752),(0,n(53818).D)(()=>i.Y5.fromFullscreen)},245322:(e,r,n)=>{n.d(r,{a2:()=>s}),n(848318),n(716544);var i=n(551316),a=n(39773);n(405866);let o={x:(0,a.eU)(void 0),y:(0,a.eU)(void 0),cornerRadius:(0,a.eU)(void 0),angle:(0,a.eU)(void 0),width:(0,a.eU)(void 0),height:(0,a.eU)(void 0),fontSize:(0,a.eU)(void 0),fontStyle:(0,a.eU)(void 0),fontFamily:(0,a.eU)(void 0),fillPaints:(0,a.eU)(void 0),strokePaints:(0,a.eU)(void 0),effects:(0,a.eU)(void 0)},s=(0,i.s)(e=>{let r=o[e];r&&a.zl.set(r,e=>!e)},200,!0)},315227:(e,r,n)=>{n(848318),n(536384),n(116111),n(268904)},589169:(e,r,n)=>{n.d(r,{Zk:()=>I,x0:()=>T}),n(848318);var i=n(992277),a=n(157907),o=n(39773),s=n(195507),l=n(502255),c=n(896966),d=n(808471),u=n(235441),p=n(496059);n(661780);var m=n(635547),h=n(609777);n(468410);var _=n(711589),g=n(635611);n(974392);var f=n(250240);let E=(0,o.E3)("frecencyHistory",{numItems:0,userIds:{}},{subscribeToChanges:!1},{debounceTime:1e3}),y=(0,o.eU)(e=>e(m.Fr3.Query({})));class b{constructor({json:e,setJson:r,userId:n,fullscreenEditorType:i}){this.MAX_ENTRIES=5e3,this.numItems=e.numItems,this.userIds=e.userIds,this.setJson=r,this.fullscreenEditorType=i??"none",this.userId=n??"anonymous",this.cachedActions=this.initActions(),this.cachedQueries=this.initQueries()}addUsage(e,r){let n=this.getActions();n.addUsage(e)&&this.incrementTotalItems();let i=this.getQueries();i.addUsage(r,e)&&this.incrementTotalItems(),this.userIds[this.userId]={...this.userIds[this.userId],[this.fullscreenEditorType]:{actions:n.serialize(),queries:i.serialize()}},this.numItems>this.MAX_ENTRIES&&this.prune(),this.save(),h.I.updateFrecencyHistory({actionKey:e,timestamp:Date.now(),editorType:this.fullscreenEditorType})}prune(){let e=Object.entries(this.userIds).flatMap(([e,r])=>Reflect.ownKeys(r).flatMap(n=>{let i=r[n];if(!i)return[];let{actions:a,queries:o}=i,s=Object.entries(a).flatMap(([r,{timestamps:i}])=>({userId:e,editorType:n,action:r,timestamp:i[0]})),l=Object.entries(o).flatMap(([r,i])=>Object.entries(i).flatMap(([i,{timestamps:a}])=>({userId:e,editorType:n,action:i,query:r,timestamp:a[0]})));return s.concat(l)}));e.sort((e,r)=>e.timestamp-r.timestamp);let r=this.MAX_ENTRIES/2;for(let n=0;n<r;n++){let{userId:r,editorType:i,action:a,query:o}=e[n],s=this.userIds[r][i];s&&(void 0!==o?delete s.queries[o][a]:delete s.actions[a],this.userIds[r][i]=s,this.numItems-=1)}}incrementTotalItems(){this.numItems+=1}initActions(){let e=this.userIds[this.userId]?.[this.fullscreenEditorType]?.actions??{};return new _.l(e)}initQueries(){let e=this.userIds[this.userId]?.[this.fullscreenEditorType]?.queries??{};return new g.B(e)}getActions(){return this.cachedActions}getQueries(){return this.cachedQueries}save(){try{this.setJson({numItems:this.numItems,userIds:this.userIds}),v=this}catch(e){(0,c.x1)("error","Failed to save frecency data",e,{reportAsSentryError:!0})}}setMaxEntriesForTesting(e){(0,d.Lg)()&&(this.MAX_ENTRIES=e)}}let v=null;function T(){let e=o.zl.get(p.N).data,r=o.zl.get(u.u8);v&&v.userId===e&&v.fullscreenEditorType===r||(v=new b({json:o.zl.get(E),setJson:e=>o.zl.set(E,e),userId:e,fullscreenEditorType:r}));let n=function(e,r){if(!e.data)return null;let n=(0,s.oA)(e.data.actionsHistory);return n&&n.frecencyHistory?function(e,r){let n=function(e){let r;try{r=JSON.parse(e)}catch(r){return(0,l.$D)(i.e.AI_FOR_PRODUCTION,Error(`Invalid JSON value for frecency history from DB: ${e}`),{}),null}let n=f.SR.safeParse(r);if(!n.success)return(0,l.$D)(i.e.AI_FOR_PRODUCTION,Error(`Invalid format for frecency history object from DB: ${e}`),{}),null;let a={};for(let[e,r]of Object.entries(n.data)){let n=Number(e);if(!f.B3.safeParse(n).success)return(0,l.$D)(i.e.AI_FOR_PRODUCTION,Error(`Invalid key in frecency history object from DB: ${e}`),{}),null;a[n]=r}return a}(e);if(n&&r){let e=n[r]?.actions;if(e)return new _.l(e)}return null}(n.frecencyHistory,r):null}(o.zl.get(y),o.zl.get(u.u8));return{actions:(0,a.k)().qa_recently_used_db_read&&n?n:v.getActions(),queries:v.getQueries()}}function I(){o.zl.set(E,{numItems:0,userIds:{}}),v=null}},777042:(e,r,n)=>{var i=n(848318),a=n(716544),o=n(741419),s=n(673906),l=n(508242),c=n(654104),d=n(367009);n(935529);var u=n(790355),p=n(604613),m=n(817519),h=n(686500);n(472203);var _=n(155651);n(280338);var g=n(508347),f=n(964e3),E=n(241917),y=n(355323),b=n(229424);n(60546);var v=n(161922);n(157907),n(379338),n(963376);var T=n(39773),I=n(701780),S=n(156912),w=n(810573),A=n(869410),C=n(449737),N=n(464012),L=n(6760),O=n(326616);(0,N.Ju)(function(){let e=(0,a.wA)(),r=i.useCallback(()=>{e(C.AS())},[e]),[n,o]=(0,T.fp)(S.cH),[s,l]=(0,T.fp)(A.MW),[c,d]=(0,T.fp)(w.Oq);return i.createElement(L.vx,{title:"Code Connect Debug Settings",headerSize:"small",initialPosition:new I.Mi(0,0),onClose:r},i.createElement("div",{className:O.kL},i.createElement("div",{className:O.zN},i.createElement("input",{type:"checkbox",onChange:e=>o(e.target.checked),checked:n}),i.createElement("span",{className:O.Pf},"Debugger break in template execution")),i.createElement("div",{className:O.zN},i.createElement("input",{type:"checkbox",onChange:e=>l(e.target.checked),checked:s}),i.createElement("span",{className:O.Pf},"Log Code Connect document")),i.createElement("div",{className:O.zN},i.createElement("input",{type:"checkbox",onChange:e=>d(e.target.checked),checked:c}),i.createElement("span",{className:O.Pf},"Log JS before execution"))))},"CodeConnectDebugModal"),n(405866),n(992444);var R=n(369600);n(849752),n(376780);var P=n(718451),D=n(503024),M=n(614671),k=n(467421),F=n(875676);function x(e){let[r,n]=i.useState(e.initialValue),o=i.useCallback(e=>{(0,P.gl)(e)||n(e.valueOf())},[n]),s=(0,a.wA)();return i.useEffect(()=>{(0,k.uw)({[e.configPropertyName]:r})},[r,e.configPropertyName]),i.createElement(M.Ht,{bigNudgeAmount:e.bigNudgeAmount,className:F.hF,"data-tooltip":e.propertyDescription,"data-tooltip-type":D.Ib.TEXT,dispatch:s,max:e.maxVal,min:e.minVal,onValueChange:o,smallNudgeAmount:e.smallNudgeAmount,value:r},i.createElement("span",{className:F.Pf},e.displayName))}(0,N.Ju)(function(){let e=(0,a.wA)(),r=i.useCallback(()=>{e(C.AS())},[e]);return i.createElement(L.vx,{title:"Comments Debug Settings",headerSize:"small",initialPosition:new I.Mi(0,0),onClose:r},i.createElement("div",{className:F.kL,onMouseDown:e=>{e.stopPropagation()}},i.createElement(x,{configPropertyName:"minZoomPercentage",initialValue:k.i$.minZoomPercentage,displayName:"Clustering Zoom Level Threshold",propertyDescription:"The zoom level threshold at which we will no longer apply clustering",minVal:1,maxVal:25600,bigNudgeAmount:5,smallNudgeAmount:.1}),i.createElement(x,{configPropertyName:"zoomScaleOverlap",initialValue:k.i$.zoomScaleOverlap,displayName:"Pin Overlap",propertyDescription:"The base number of pixels we check for overlapping pins when clustering, this value is multiplied by the current zoomScale to compute bounding box",minVal:1,maxVal:2e4,bigNudgeAmount:100,smallNudgeAmount:10}),i.createElement(x,{configPropertyName:"clusterClickResultViewportPercentage",initialValue:k.i$.clusterClickResultViewportPercentage,displayName:"Cluster Click Result Viewport Percentage",propertyDescription:"After a cluster click, one of the pins in the cluster will be positioned this percentage between the center of the viewport and the edge of the viewport. However, we will always zoom in far enough to break the cluster, even if one of the pins ends up being positioned farther away than this percentage.",minVal:1,maxVal:100,bigNudgeAmount:5,smallNudgeAmount:1}),i.createElement(x,{configPropertyName:"rebuildClustersZoomDelay",initialValue:k.i$.rebuildClustersZoomDelay,displayName:"Rebuild Cluster User Zoom Delay",propertyDescription:"Delay in ms that occurs between a zoomScale change and the clusters rebuilding",minVal:0,maxVal:1e4,bigNudgeAmount:100,smallNudgeAmount:10})))},"CommentDebugSettingsModal"),n(548876),n(243929);var U=n(757033),B=n(158349),V=n(314272),G=n(284709);class H extends Error{}async function K({dispatch:e,fileKey:r,log:n=()=>{}}){try{n("Generating file version...");let i=(await B.m(r,"Exported to ML account","",e,!0))?.id;if(void 0===i)throw Error("undefined versionId");n(`Exporting file version ${i}...`);let{meta:{run_key:a}}=(await U.Ay.post(`/api/ml/export/file_version/${i}`)).data;n(`Waiting for run ${a}...`);for(let e=30;e>=0;e--){await new Promise(e=>setTimeout(e,1e3));let{meta:{ready:r,s3_uri:i}}=(await (0,U.Ay)({url:`/api/ml/export/status/${encodeURIComponent(a)}`})).data;if(r){n(`Export manifest is ready at ${i}`);break}if(0===e){n("Timed out!");return}}n("Succeeded!")}catch(e){if(e instanceof H)return;n("Failed!"),n(`${e}`)}}(0,N.Ju)(function(){let e=(0,a.wA)(),r=i.useCallback(()=>{e(C.AS())},[e]),[n,o]=i.useState([]),s=(0,R.tS)();return i.useEffect(()=>{let n=!1,i=e=>{if(n)throw new H;o(r=>r.concat([e]))};return null===s?i("No open file"):K({dispatch:e,fileKey:s,log:i}),()=>{n=!0,r()}},[r,e,s]),i.createElement(V.XV,{title:"ML Export",headerSize:"large",minWidth:300,onClose:r},i.createElement("div",{className:G.k},n.join("\n")))},"MLExportModal");var W=n(458498);let z="preferences-menu";class $ extends c.o6{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.onKeyDown=e=>{(0,f.jr)(e,f.W0.NO)},this.selectPreferencesMenu=()=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(this.getPathToPreferences())},this.getPathToPreferences=()=>[(0,h.A)(z)]}componentDidUpdate(e,r){if(super.componentDidUpdate(e,r),this.props.selectionToUpdate&&this.props.selectionToUpdate===o.m7W.PREFERENCES){let e=this.multilevelDropdown&&this.multilevelDropdown.getActiveItemAtDepth(0);!e||(0,m.k$)(e)||(0,m.gN)(e)||(0,m.id)(e)||!e.name||e.name!==z?(this.selectPreferencesMenu(),this.props.dispatch(u.ho({type:y.pi,data:{selectionToUpdate:null}}))):this.props.dispatch(u.oB())}}render(){let e=this.props.positionOnChevron&&this.props.chevronRef?.current?.getBoundingClientRect()||null;return i.createElement("div",{className:`${p.Dm}`},i.createElement(Y,{ref:this.multilevelDropdownRef,activatePathOnMount:this.props.dropdown.data.togglePreferences?this.getPathToPreferences():void 0,allowCodegenOptions:this.props.selectedView.editorType===E.nT.Design,alwaysShowCheckMarkOffset:!0,appModel:this.props.appModel,"aria-labelledby":this.props["aria-labelledby"],controlledByID:this.props.controlledByID,dispatch:this.props.dispatch,id:this.props.id,isLimitedDevMode:this.props.isLimitedDevMode,lean:this.props.isUI3?"right":void 0,menuItems:this.props.menuItems,onKeyDown:this.onKeyDown,recordingKey:"mainMenu",selectedView:this.props.selectedView,showPoint:!this.props.isUI3&&this.props.appModel.showUi,targetRect:e??(this.props.appModel.showUi?this.props.dropdown.data.targetRect:{top:0,left:0})}))}}$.displayName="FullscreenMainMenu";class Y extends i.Component{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.getActiveItemAtDepth=e=>this.multilevelDropdown?this.multilevelDropdown.getActiveItemAtDepth(e):null,this.setActiveItemPath=e=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(e)},this.onSelectItem=(e,r)=>{s.l7.user(`fullscreen-menu-${e.name??e.action??"unknown"}`,()=>{if(e.callback&&e.callback((0,m.Dz)(e),e.args,this.props.dispatch,r),e.action&&!e.input){let n=e.action;e.loadingIndicatorString?this.props.dispatch(d.n.set({message:e.loadingIndicatorString,callback:()=>{g.VU.get(n,e.source??"menu",e.args)(r)}})):g.VU.get(n,e.source??"menu",e.args)(r)}})},this.transformMenuItems=(0,l.xx)(e=>(0,W.jv)(e,{appModel:this.props.appModel,selectedView:this.props.selectedView,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,removeDisabledItems:this.props.removeDisabledItems,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,isLimitedDevMode:this.props.isLimitedDevMode}))}componentDidMount(){this.closeIfNoItems()}componentDidUpdate(){this.closeIfNoItems()}componentWillUnmount(){this.props.controlledByID&&document.getElementById(this.props.controlledByID)?.focus()}hasMenuValidItems(){let e=this.transformMenuItems(this.props.menuItems);return e.length>0&&e.some(e=>!e.separator&&(this.props.allowDisabledOnly||!e.disabled))}closeIfNoItems(){this.hasMenuValidItems()||this.props.dispatch(u.oB())}render(){let e=this.transformMenuItems(this.props.menuItems);return this.hasMenuValidItems()?i.createElement(_.fu,{name:b.e0.EDITOR_MENU},i.createElement(v.j,{ref:this.multilevelDropdownRef,activatePathOnMount:this.props.activatePathOnMount,allowCodegenOptions:this.props.allowCodegenOptions,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,"aria-labelledby":this.props["aria-labelledby"],dispatch:this.props.dispatch,id:this.props.id,items:e,lean:this.props.lean,minWidth:this.props.minWidth,onKeyDown:this.props.onKeyDown,onSelectItem:this.onSelectItem,parentRect:this.props.targetRect,recordingKey:this.props.recordingKey,showPoint:this.props.showPoint})):null}}Y.displayName="FullscreenMultilevelDropdown"},790940:(e,r,n)=>{n.d(r,{xm:()=>y});var i=n(445777),a=n(157907),o=n(635),s=n.n(o),l=n(564433),c=n(673064),d=n(817519),u=n(593749),p=n(355323),m=n(737808),h=n(468410),_=n(589169),g=n(458498),f=n(732881),E=n(351171);class y{constructor(e,r,n,i){for(let a of(this.searchMap={},this.searchMapKeys=[],this.includeDisabled=!1,this.acceptsUnicode=!1,this.queryStringMap={},this.includeDisabled=!!(i&&i.includeDisabled),this.acceptsUnicode=!!(i&&i.acceptsUnicode),n.forEach(n=>this.addFigmaMenuItemsToSearchMap(e,r,n)),this.searchMapKeys=Object.keys(this.searchMap),this.searchMapKeys)){let e=this.searchMap[a],r=e.queryString?`${e.queryString} ${a}`:a;this.queryStringMap[r]=e}}addFigmaMenuItemsToSearchMap(e,r,n){if(!n||(0,d.k$)(n)||(0,d.gN)(n)||(0,d.id)(n)||!(0,g.UN)(n,{isDesktopMenu:!1,isReadOnly:e.isReadOnly,isSearching:!0,selectedView:r}))return;let a="children"in n;if(!(0,d._o)(n)||a||n.hideForQuickCommand||this._addToIndexInternal(n),"plugins-menu"!==n.name&&"widgets-menu"!==n.name&&a)for(let a of((0,i.KF)(null!=n.children,"this should be the type of menu groups that has FullscreenMenuItem as children"),n.children))this.addFigmaMenuItemsToSearchMap(e,r,a)}_addToIndexInternal(e){let{itemDisplayText:r,searchItem:n}=function(e){let r=(0,m.EG)(e),n={fullscreenMenuAction:e,queryString:"",searchKey:r};if("plugins-menu-item"===e.name){let r=e.extensionSearchString||"";n.searchKey=r}return e.isRepairCommand&&(0,a.k)().internal_only_debug_tools&&!(0,h.h8)()&&(n.queryString="repair"),e.searchSynonyms&&!(0,h.h8)()&&(n.queryString=[n.queryString,...e.searchSynonyms].join(" ")),{itemDisplayText:r,searchItem:n}}(e);this.searchMap[r]=n}getItem(e,r){if(!(r in this.searchMap))return;let n={...this.searchMap[r].fullscreenMenuAction};return n.disabled=b(e,n),n}_buildSearchResult(e,r,n,i){let a={...r},o={...a.fullscreenMenuAction};return o.stringMatchedAgainst=n?.text||"",o.substringMatchScore=i?.score||0,o.substringMatchedAgainst=i?.text||"",o.stringMatchScore=this._getStringMatchScore(o,n),o.popularityScore=(0,u.a)(o.action),o.disabled=b(e,o),{...a,fullscreenMenuAction:o}}_getStringMatchScore(e,r){return void 0!==e.isLowPriorityMatch&&e.isLowPriorityMatch?0:r?.score||0}_searchByFuzzyMatchAndSubstringMatch(e,r){if(!r)return[];let n=new l.A(r,this.acceptsUnicode);if(!n.isValidQuery())return[];let i=new c.dU(r),a=[];for(let[r,o]of Object.entries(this.queryStringMap)){let l=n.matchAgainstText(r),d=l?.score||0,u=[];for(let e of(u.push(i.matchAgainstText(r,c.cT.VISIBLE)),o.fullscreenMenuAction.searchSynonyms||[])){let r=i.matchAgainstText(e,c.cT.HIDDEN);u.push(r)}let p=s()(u,e=>e.score),m=p?.score||0;(d>0||m>0)&&a.push(this._buildSearchResult(e,o,l,p))}return a}_searchByFuzzyMatch(e,r){let n=new l.A(r,this.acceptsUnicode);if(!n.isValidQuery())return[];let i=[],a=n.matchAgainst(Object.keys(this.queryStringMap));if(a.length)for(let r of a){if((0,h.h8)()&&r.score<1)continue;let n={...this.queryStringMap[r.text]};i.push(this._buildSearchResult(e,n,r))}return i}_searchForSearchItem(e,r){if(!r)return[];let n=[];n=(0,h.h8)()?this._searchByFuzzyMatchAndSubstringMatch(e,r):this._searchByFuzzyMatch(e,r);let i=(0,h.h8)()?(0,E.ou)({...(0,_.x0)(),acceptsUnicode:this.acceptsUnicode}):f.r;return n=n.sort((e,n)=>i.sort(r,e,n)),this.includeDisabled||(n=n.filter(e=>!e.fullscreenMenuAction.disabled)),n}search(e,r){return this._searchForSearchItem(e,r).map(e=>e.fullscreenMenuAction)}searchIncludeKey(e,r){return this._searchForSearchItem(e,r).map(e=>[e.searchKey,e.fullscreenMenuAction])}list(e){let r=this.searchMapKeys.map(r=>{let n={...this.searchMap[r].fullscreenMenuAction};return n.popularityScore=(0,u.a)(n.action),n.disabled=b(e,n),n});return r.sort((e,r)=>(r.popularityScore||0)-(e.popularityScore||0)),r}map(e){let r={};return this.searchMapKeys.forEach(n=>{let i={...this.searchMap[n].fullscreenMenuAction};i.popularityScore=(0,u.a)(i.action),i.disabled=b(e,i),r[i.name||i.action||n]=i}),r}}function b(e,r){return r.disabled?r.disabled:!(r.name||(0,p.Yh)(e,r.action)||r.quickAction?.alwaysEnabled)}},711510:(e,r,n)=>{n.d(r,{$O:()=>l,Z8:()=>s}),n(716544),n(992277),n(157907);var i=n(39773);n(878028);var a=n(260986),o=n.n(a);n(6819),n(195507),n(653959),n(502255),n(93724),n(96447),n(369600),n(635547),n(402840),n(526830),n(766878),n(677251);let s=(0,i.eU)([]);function l(){return o()(i.zl.get(s),"displayName")}},5573:(e,r,n)=>{n.d(r,{d:()=>F}),n(956512);var i=n(848318),a=n(891627),o=n(716544),s=n(622876),l=n(741419),c=n(897392),d=n(179703),u=n(508242),p=n(579020),m=n(818754),h=n(701780),_=n(235441),g=n(992444),f=n(577023),E=n(461665),y=n(449977),b=n(376780),v=n(207715),T=n(103589),I=n(276731),S=n(27776);let w=new Set(["DOCUMENT","CANVAS","NONE"]),A=(0,m.jz)(S.y9S),C=(0,m.jz)(S.IuL),N=(0,m.jz)(S.LQy),L=(0,m.jz)(S.MJh),O=(e,r,n)=>n?e===b._Y.WHITEBOARD?r?N:C:r?L:0:0,R=(0,u.xx)((e,r,n,i,a)=>{let{x:o,y:s,offsetX:l,offsetY:c,width:d,height:u,zoomScale:p}=e;r&&(o+=A,s+=A,l+=A/p/2,c+=A/p/2,d-=A,u-=A,d=Math.max(d,0),u=Math.max(u,0));let m=O(i,a,n);return u-=m,u=Math.max(u,1),c-=m/p/2,{...e,x:o,y:s,offsetX:l,offsetY:c,width:d,height:u}}),P=e=>{let r=e.split(",");if(r.length)return r[0].replace(/[\[\]\s]/g,"")},D=e=>e.replace(/[\[\]\s]/g,"").split(",");function M(e,r,n){let i;let a=l.glU.getActiveCommentAnchorData();i=n&&a&&a.stablePath!==c.x7&&a.stablePath.length>0?a.stablePath:l.glU.getCommentAnchorDataAtPosition(e.x,e.y).stablePath;let o={canvasPosition:e,pageId:r,viewport:g.Y5.getViewportInfo(),createdIn:window.FigmaMobile?"mobileViewer":"fullscreen"};if(null==i||i===c.x7)return o;let s=l.Egt.getBoundsForStablePath(i);if(!s&&n&&((0,p.sx)("Comment stablePathBounds invalid",{usingActiveNode:!0},{forwardToDatadog:!0}),s=l.Egt.getBoundsForStablePath(i)),!s)return((0,p.sx)("Comment stablePathBounds invalid",{usingActiveNode:!1},{forwardToDatadog:!0}),r)?{...o,nodeId:r,inFrame:!1,stablePath:[r]}:o;let d={x:s.x,y:s.y},u=h.Mi.subtract(e,d),m=P(i);return{...o,nodeId:m,nodeOffset:u,inFrame:r!==m,stablePath:D(i)}}function k(e){let r=(0,v.J2)((0,f.UK)().renderRulers),n=(0,o.d4)(e=>e.mirror.appModel.showUi),u=(0,_.lg)(),p=i.useRef(g.Y5.getViewportInfo()),[m,h]=i.useState(g.Y5.getViewportInfo()),E="ui3"===(0,s.DP)().version;!function(e){let r=(0,o.d4)(e=>"prototype"===e.selectedView.view||"communityHub"===e.selectedView.view);i.useEffect(()=>{!r&&g.Y5.isReady()&&(e(g.Y5.getViewportInfo()),(0,T.H)())},[e,r]),i.useEffect(()=>{let r=r=>{(0,a.flushSync)(()=>{e(r)})};return g.Y5.viewport.on("onSetViewport",r),()=>{g.Y5.viewport.removeListener("onSetViewport",r)}},[e])}(i.useCallback(e=>{p.current=e,h(e)},[h]));let b=i.useMemo(()=>({getViewportInfo:()=>R(p.current,r,n,u,E),getRawViewportInfo:()=>p.current,getCommentsWrapperOffset:e=>({x:0,y:1}),setCanvasSpaceCenter:e=>l.glU.setCanvasSpaceCenter(e.x,e.y),setZoomScale:(e,r)=>l.glU.setCanvasZoomScale(r),setHovering:e=>{if(!e){(0,y.Uc)(c.AD);return}let r=l.glU.getCommentAnchorDataAtPosition(e.x,e.y).stablePath,n=r?(0,d.UN)().getFromStablePath(D(r)):null;n&&!w.has(n.type)?(0,y.Uc)(n.guid):(0,y.Uc)(c.AD)},setCurrentPageIdAsync:async e=>await (0,d.UN)().setCurrentPageFromNodeAsync(e),pageIdForNodeId:e=>l.glU.getPageIdFromNode(e),getCommentDestinationForCanvasPosition:M,getValidCommentsRect:()=>null}),[r,n,u,E]),S=i.useMemo(()=>new I.f5(b,{...I.Pe,isGetViewportAtomic:!0}),[b]);return i.createElement(I.kw.Provider,{value:S},i.createElement(I.aF,{latestViewport:m},e.children))}function F(e){return(0,E.q)()?i.createElement(k,null,e.children):i.createElement(i.Fragment,null,e.children)}},505785:(e,r,n)=>{n.d(r,{DS:()=>V,Qp:()=>W,R$:()=>K,WD:()=>z,_W:()=>k,aF:()=>G,kh:()=>M,ob:()=>D,q0:()=>F,r1:()=>x,t$:()=>U});var i=n(848318),a=n(716544);n(108487);var o=n(992277),s=n(741419),l=n(179703);n(157907);var c=n(39773),d=n(549090),u=n(579020),p=n(818754),m=n(730169),h=n(493554),_=n(195507),g=n(502255),f=n(587895),E=n(91041),y=n(473889),b=n(442313),v=n(358567),T=n(85442),I=n(369600),S=n(376780),w=n(635547),A=n(997894),C=n(162371),N=n(40754),L=n(937237),O=n(314272),R=n(786175),P=n(850755);let D={alwaysPan:!0,maxScale:1},M={alwaysNavToSimilarViewport:!0},k=300,F=.5,x=4;function U(e,r){let n=(0,a.d4)(e=>e.openFile?.key),i=(0,a.d4)(e=>e.mirror.appModel.currentPage),o=r??i,s=(0,a.d4)(e=>e.fileVersion);return!!n&&!!o&&!!e&&(0,C.cn)(n,o,e,(0,L.N)(s))===c.zl.get(C.tP)}N.mg.COMPARE_THUMBNAIL;let B=(0,c.eU)("");function V(e){let r=new l.qo(s.juq.LIVE_FILE),n=(0,d.ei)(e,!1,r),p=n?.createdAt||null,f=p?new Date(p).toISOString():void 0,E=n?.lastEditedAt||null,y=E?new Date(E&&E%6e4==0&&E<17061264e5?E+6e4:E).toISOString():void 0,b=d.E1()?.toISOString(),T=(0,a.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.filterStatusVersions),N=function(e){let r=(0,I.tS)(),n=function(e){let r=(0,I.q5)(),n=r?.key,a=(0,h.Rs)(w.WND,{nodeId:e,fileKey:n??""},{enabled:!!n&&!!e}),[s,l]=(0,c.fp)(B);return(0,m.h)(()=>l("")),i.useMemo(()=>{if("loaded"===a.status){let r=a.data.file;if(r.status===_.tT.Error)return(0,g.$D)(o.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error fetching activity log: File error = "+r.error)),null;let n=r.data?.devModeActivity;if(!r.data||!n||0===n.length)return[];let i=n.filter(e=>e.activityType===S.o6.STATUS_CHANGE).sort((e,r)=>r.timestamp.getTime()-e.timestamp.getTime()),c=`${e} - ${i.length}`;return e&&c!==s&&(l(c),(0,u.sx)("dev_mode.activity.fetch_activity_log",{numEntries:i.length},{forwardToDatadog:!0})),i}return"errors"===a.status?((0,g.$D)(o.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error fetching activity log: "+JSON.stringify(a.errors))),null):"loading"===a.status?"loading":null},[a,s,e,l])}(e??""),a=e?("loading"===n?null:n)?.map(e=>e.version?.id).filter(v.t):void 0,s=(0,C.kT)({fileKey:r,pageSize:200,versionIds:a}),[l]=(0,A.IT)(s,{enabled:!!r});return i.useEffect(()=>{"errors"===l.status&&(0,g.$D)(o.e.FEEDBACK,Error(`Version fetch in CC error: ${l.errors}`))},[l.status]),{versions:l.data||[],requestStatus:"loading"===n?"loading":l.status}}(T?e:void 0),L=i.useMemo(()=>T?N.versions:function(e,r,n,i){let a=[],o=!1;function s(){if(a.length>0){let e=a[a.length-1];e.frameCreated=!0,e.frameEdited=void 0}}for(let l of e){let e={...l};if(e.canvas_url&&(!o&&i&&e.created_at&&e.created_at<i&&(o=!0,e.lastViewed=!0),!r||!(e.edited_at>r))){if(n&&e.edited_at<n)return s(),a;a.push(e)}}return s(),a}(N.versions,y,f,b),[N.versions,y,f,b,T]),{requestStatus:O}=N;return{versions:L,versionsQueryLoaded:"loaded"===O||"disabled"===O}}function G({title:e,onClose:r,children:n}){let a=(0,p.jz)(R.compareChangesModalWidth);return i.createElement(O.XV,{title:e,fixedCenter:!0,disableClickOutsideToHide:!0,onClose:r,headerClassName:P.wx,containerClassName:P.ik,maxWidth:a,innerContainerClassName:P.Hb,focus:!0},n)}function H(e){return!!e&&e.hasOwnProperty("getImage")}function K(e){let{view:r,opacity:n,Overlay:a,hideNoImageText:o,header:s}=e,l=()=>void 0!==n?{opacity:n}:{},c=i.useMemo(()=>H(e.image)?e.image:e.image&&{data:e.image.image,width:e.image.width,height:e.image.height,scale:e.image.scale||x},[e]);return i.createElement("div",{className:r===f.Ss.SIDE_BY_SIDE?P.KJ:P.DF},!!s&&i.createElement("div",{className:P.Lg},s),!c&&i.createElement("div",{className:P.$0},!o&&(0,b.tx)("collaboration.feedback.compare_changes_modal.no_image_found")),H(e.image)?i.createElement(E.Nf,{className:P.Sl,style:{...l()},image:c,Overlay:a}):c&&i.createElement(E.ec,{className:P.Sl,style:{...l()},image:c,Overlay:a}))}function W(){return i.createElement("div",{className:P.GE},i.createElement(y.qc,null))}function z(e,r){let n=e?.toString();n&&r(T.lW({stringToCopy:n}))}},220624:(e,r,n)=>{n.d(r,{xX:()=>l,$_:()=>c});var i=n(848318);n(716544),n(741419),n(157907),n(579020);var a=n(95650);n(473889),n(166365),n(566699);var o=n(442313);n(162371),n(503024);var s=n(832876);function l(e,r=!1){let n=(0,a.A)(new Date),i=(0,a.A)(e);return i.isSame(n,"day")?(0,o.t)("collaboration.feedback.time_hour_minutes",{time:i.toDate()}):i.isSame(n,"year")?(0,o.t)("collaboration.feedback.time_date_minutes_without_year",{time:i.toDate()}):r?(0,o.t)("collaboration.feedback.time_date_minutes",{time:i.toDate()}):(0,o.t)("collaboration.feedback.date",{time:i.toDate()})}function c(e,r){return e?i.createElement(s.Ro,{size:r,entity:{img_url:e}}):i.createElement("div",{className:"diffing_compare_summary--noUserImage--XijV0"})}n(246633)},142518:(e,r,n)=>{n.d(r,{Ah:()=>eX,Cr:()=>eQ,YL:()=>eJ,aS:()=>e8,jP:()=>e0,ur:()=>eZ});var i=n(848318),a=n(716544),o=n(445777),s=n(992277),l=n(906705),c=n(241399),d=n(351542),u=n(792760),p=n(404827),m=n(187653),h=n(114051),_=n(452551),g=n(743791),f=n(741419),E=n(157907),y=n(536384),b=n.n(y),v=n(579020),T=n(803898),I=n(818754),S=n(857188),w=n(195507),A=n(628055),C=n(831932),N=n(16196),L=n(654104),O=n(983229),R=n(502255),P=n(896966),D=n(182059),M=n(145015),k=n(753131),F=n(473889),x=n(166365),U=n(566699),B=n(17755),V=n(280198),G=n(442313),H=n(697714),K=n(775038),W=n(903217),z=n(370255),$=n(629840),Y=n(884060),j=n(790355),q=n(667323),X=n(449737),Z=n(481238),J=n(508195),Q=n(604613),ee=n(686500),et=n(180423),er=n(155651),en=n(592845),ei=n(727341),ea=n(323075),eo=n(976308),es=n(867397),el=n(992444),ec=n(834697),ed=n(710665),eu=n(694253),ep=n(94822),em=n(920963),eh=n(162371),e_=n(988540),eg=n(241917),ef=n(766878),eE=n(183905),ey=n(503024),eb=n(64708),ev=n(60546),eT=n(640767),eI=n(495574),eS=n(220624),ew=n(312321),eA=n(3418),eC=n(205397),eN=n(246633),eL=n(515071),eO=n(816267),eR=n(818775),eP=n(27776),eD=n(447412),eM=n(315990),ek=n(25185),eF=n(515464),ex=n(783904),eU=n(817359),eB=n(523860),eV=n(85206),eG=n(391784),eH=n(522231),eK=n(954184),eW=n(546131),ez=n(261089),e$=n(343167),eY=n(927263);let ej=(0,I.jz)(eP.uj0),eq=(0,I.jz)(eP.QBm);function eX(e){return e===f.m1T.HISTORY||e===f.m1T.COMPARE_CHANGES||e===f.m1T.DEV_HANDOFF_HISTORY}function eZ(e){return e.label?e.label:e.participating_users_array&&e.participating_users_array[0]?e.participating_users_array[0]:e.user.handle?e.user.handle:((0,P.x1)("version","Verison history got user without a handle",{item:e}),(0,R.$D)(s.e.SCENEGRAPH_AND_SYNC,Error("Verison history got user without a handle")),"(unknown user)")}function eJ(e){switch(e.item.view){case"branch_child_create":return(0,G.tx)("collaboration.feedback.new_branch_created");case"branch_child_merge":return(0,G.tx)("collaboration.feedback.branch_merged");case"branch_child_update":return(0,G.tx)("collaboration.feedback.branch_updated_from_main_file");case"branch_create":return(0,G.tx)("collaboration.feedback.branch_created");case"branch_merge":return(0,G.tx)("collaboration.feedback.branch_merged_into_main_and_archived");case"branch_update":return(0,G.tx)("collaboration.feedback.updated_from_main");case"branch_archive":return(0,G.tx)("collaboration.feedback.branch_archived");case"branch_restore":return(0,G.tx)("collaboration.feedback.branch_restored");case"file_restore":if(e.item.label)return(0,G.tx)("collaboration.feedback.version_restored_label",{label:e.item.label});return(0,G.tx)("collaboration.feedback.version_restored")}return i.createElement(i.Fragment,null,eZ(e.item))}function eQ(e){let{time:r}=e,n=i.useMemo(()=>(0,eS.xX)(r,!0),[r]),{onChange:a}=e;return i.useEffect(()=>{a&&a(n)},[a,n]),i.createElement(i.Fragment,null,n)}class e0 extends L.uA{constructor(e){super(e),this.descriptionRef=i.createRef(),this.onClick=L.cZ(this,"click",()=>{setTimeout(()=>{this.props.isAllowedToChangeVersion()&&!this.props.isActive&&this.props.onSelect&&this.props.onSelect(this.props.versionId)},300)}),this.disabledOnClickHandler=L.cZ(this,"click",()=>{setTimeout(()=>{if((0,v.sx)("CTA Clicked",{name:"Disabled Version History",teamId:this.props.team?.id}),this.props.isStarterTeam){if(!this.props.team){(0,R.$D)(s.e.MONETIZATION_UPGRADES,Error("Paywall: no team present"));return}this.props.dispatch(X.to({type:eL.DV,data:{team:this.props.team,editorType:this.props.editorType,resource:e_.Bi.VERSION_HISTORY,currentPlan:eo.F.Plan.STARTER,upsellPlan:eo.F.Plan.PRO}}))}},300)}),this.onMouseEnter=e=>{let r=this.descriptionRef.current;r&&r.scrollHeight>r.clientHeight&&this.setState({hovered:!0})},this.onMouseLeave=e=>{this.setState({hovered:!1})},this.onDoubleClick=L.cZ(this,"dblclick",()=>{this.props.onCreateSavepoint?this.props.onCreateSavepoint():this.props.onEditSavepoint&&this.props.onEditSavepoint(this.props.versionId)}),this.onMenuClick=L.cZ(this,"contextmenu",e=>{this.props.onSavepointMenuCallback&&this.props.versionId!==eh.V_&&this.props.onSavepointMenuCallback(this.props.versionId,this.props.checkpointKey||"",e)}),this.onBranchClick=L.cZ(this,"click",e=>{e.stopPropagation(),this.props.dispatch(j.$T({view:"fullscreen",fileKey:this.props.branchFileKey,editorType:eg.nT.Design}))}),this.onCompareClick=L.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChanges&&this.props.isAllowedToChangeVersion()&&this.props.isCurrentVersionActive&&!this.props.isComparing&&this.props.onCompareChanges(this.props.versionId)},300)}),this.onCompareCurrentClick=L.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChangesFromCurrent&&this.props.isAllowedToChangeVersion()&&!this.props.isComparing&&this.props.onCompareChangesFromCurrent()},300)}),this.toggleSeeMore=e=>{e.preventDefault(),e.stopPropagation(),this.setState({expandedDescription:!this.state.expandedDescription})},this.ref=e=>{e&&(this.versionRowDiv=e)},this.generateEditorName=(e,r)=>i.createElement("div",{className:eD.Lw,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-left":!0,"data-tooltip-max-width":1e3,key:`who_${e}`,dir:"auto"},r),this.generateBranchLink=e=>{if(!this.props.fileByKey||!this.props.branchFileKey)return null;{let r=this.props.fileByKey[this.props.branchFileKey];return r&&!r.deleted_at?i.createElement("span",{className:eD.qC,onClick:this.onBranchClick},e||(r.name??(0,G.tx)("collaboration.feedback.branch"))):i.createElement("span",{className:eD.at},r?.name??(0,G.tx)("collaboration.feedback.branch"))}},this.setFormattedTime=e=>{this.setState({formattedTime:e})},this.state={expandedDescription:!1,hovered:!1}}componentDidMount(){super.componentDidMount(),this.versionRowDiv&&this.props.isActive&&!this.props.first&&this.versionRowDiv.scrollIntoView(!1)}componentDidUpdate(e,r){super.componentDidUpdate(e,r);let n=this.props.description,i=e.description;n!==i&&(this.state.expandedDescription&&n&&i&&n.length>=i.length||this.setState({expandedDescription:!1}))}render(){let e,r,n;let a=this.descriptionRef.current,o=!!(a&&(this.state.expandedDescription||a.scrollHeight>a.clientHeight||this.state.hovered)&&!this.props.isActive),s=(0,eS.$_)(this.props.userUrl,15),p=this.props.versionId===eh.V_,m=!p&&!(0,eb.AI)({view:this.props.view??"file_default",label:this.props.label})&&!this.props.isLinked,h=this.props.version?.frameCreated||this.props.version?.frameEdited||this.props.version?.lastViewed,_=m&&!h,g=this.props.isPreview?eD.qv:eD.AS;this.props.disabled&&!this.props.isStarterTeam&&(g=eD.Y0+" "+g),p&&(g=eD.j$+" "+g),(this.props.isActive||this.props.isComparing)&&(g=eD.SU+" "+g),this.props.onSelect&&(g=eD.kD+" "+g);let f=this.props.isActive&&!p?eD.Nh:this.state.expandedDescription?eD.lV:o?eD.LF:eD.h_,E=this.state.expandedDescription?(0,G.tx)("collaboration.feedback.show_less"):(0,G.tx)("collaboration.feedback.show_more"),y=[],b=0;if(this.props.participatingImagesDict){let n=Object.keys(this.props.participatingImagesDict).length;for(let[a,o]of Object.entries(this.props.participatingImagesDict))if(e=(0,eS.$_)(o,15),r=this.generateEditorName(b,a),y.push(i.createElement("span",{className:eD.zL,key:a},(!this.props.first||"current_version"!=this.props.versionId)&&e,r)),++b>4&&b<n&&!this.props.isActive){y.push(i.createElement("div",{className:eD.lw,key:"number-additional-editors"},(0,G.tx)("collaboration.feedback.num_editors_number_editor_count_more",{numEditors:n-Number(b)})));break}}else this.props.user&&this.props.userUrl?(e=(0,eS.$_)(this.props.userUrl,15),r=this.generateEditorName(b,this.props.user),y.push(i.createElement("span",{className:eD.zL,key:"branching-solo-editor"},(!this.props.first||"current_version"!=this.props.versionId)&&e,r))):_&&"file_multiplayer"===this.props.view&&"Figma System"===this.props.user&&y.push(i.createElement("div",{className:eD.EB,key:"figma-system"},this.props.user));let v=eD.N5;this.props.hideLine?v="":this.props.first&&this.props.last?v=eD.y5:this.props.first?v=eD.pi:this.props.last&&(v=eD.p8);let T=this.props.isUI3?void 0:s,I=null,S="text"in this.props?this.props.text.toLowerCase():void 0;_||(T="components published"===S||"published to community hub"===S?i.createElement(U.U,{className:eD.mk,svg:ez.A,useOriginalSrcFills_DEPRECATED:!0},i.createElement(l.z,null)):i.createElement(ew.D,null)),_&&this.props.last&&(T=i.createElement(ew.D,null));let w=this.props.isUI3&&this.props.devModeActivity&&this.props.devModeActivity.length>0;if(w){let{status:e,nodes:r}=(0,$.D0)(this.props.devModeActivity);I=i.createElement(eR.e,{status:e,nodes:r}),T=i.createElement(eR.M,{status:e})}if(this.props.isBranchingVersion)switch(this.props.view){case"branch_child_create":T=i.createElement(U.U,{className:eD.F4,svg:eU.A},i.createElement(c.o,null)),I=(0,G.tx)("collaboration.feedback.branch_child_create",{link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(v=eD.zj),this.props.last&&(v=this.props.isUI3?"":eD.JE);break;case"branch_child_merge":T=i.createElement(U.U,{className:eD.Wi,svg:ex.A},i.createElement(d.C,null)),I=(0,G.tx)("collaboration.feedback.merged",{link:this.generateBranchLink(this.props.label)});break;case"branch_child_update":T=i.createElement(ew.D,null),I=(0,G.tx)("collaboration.feedback.branch_child_update",{link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(v=eD.zj),this.props.last&&(v=this.props.isUI3?"":eD.JE);break;case"branch_merge":T=i.createElement(U.U,{className:eD.mq,svg:eH.A,useOriginalSrcFills_DEPRECATED:!0},i.createElement(d.C,null)),I=(0,G.tx)("collaboration.feedback.branch_merge",{link:this.generateBranchLink((0,G.t)("collaboration.feedback.main_branch_name"))});break;case"branch_create":T=i.createElement(U.U,{className:eD.VO,svg:eF.A},i.createElement(c.o,null)),I=(0,G.tx)("collaboration.feedback.branch_created");break;case"branch_update":T=i.createElement(U.U,{className:eD.F4,svg:eU.A},i.createElement(c.o,null)),I=(0,G.tx)("collaboration.feedback.branch_updated_from",{link:this.generateBranchLink((0,G.t)("collaboration.feedback.main_branch_name"))});break;case"branch_archive":T=i.createElement(U.U,{className:eD.lf,svg:ek.A},i.createElement(l.z,null)),I=(0,G.tx)("collaboration.feedback.branch_archived");break;default:T=i.createElement(ew.D,null)}let A=[];this.props.version?.frameCreated&&A.push(this.props.isSection?(0,G.tx)("collaboration.feedback.compare_changes_modal.section_created"):(0,G.tx)("collaboration.feedback.compare_changes_modal.frame_created")),this.props.version?.lastViewed&&A.push((0,G.tx)("collaboration.feedback.compare_changes_modal.last_viewed_by_you")),m&&!_&&this.props.time?A.push(i.createElement("div",{className:eD.IF},i.createElement(eQ,{time:this.props.time}))):_&&this.props.time?A.push(this.renderTime(this.props.time,eD.Ov,this.props.showCompareChanges)):"displayText"in this.props?A.push(this.props.displayText):A.push(this.props.text),this.props.isUI3&&this.props.isComparing&&!this.props.isComparingLoading&&!p&&(n=i.createElement("div",{className:eD.UY},i.createElement("div",{className:eD.sh},A[0]),i.createElement(x.B,{svg:eM.A,className:eD.KD}),i.createElement("div",{className:eD.$D},(0,G.tx)("collaboration.feedback.current_file"))));let C=i.createElement(i.Fragment,null,this.props.isBranchingVersion&&this.props.fileByKey&&this.props.branchFileKey?i.createElement("div",{className:eD.RI,dir:"auto"},I):w?i.createElement("div",{className:eD.Pf,dir:"auto"},I):n?i.createElement("div",{className:eD.Pf,dir:"auto"},n):i.createElement("div",{className:eD.Pf,dir:"auto"},A[0])),O=(0,N.$J)(this.props.description),R=y.length>0&&i.createElement("div",{className:eD.VM},y),P=!m&&this.props.time&&i.createElement("span",{className:eD.DS,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,eS.xX)(this.props.time)}," ",this.props.isLinked?i.createElement(eQ,{onChange:this.setFormattedTime,time:this.props.time}):i.createElement(k.h1,{onChange:this.setFormattedTime,date:this.props.time})),D=A.length>1||O||o||R||P,M=i.createElement(i.Fragment,null,A.length>1&&i.createElement("div",{className:eD.HK},A.slice(1).map((e,r)=>i.createElement("div",{className:eD.Pf,dir:"auto",key:r},e))),(!this.props.isUI3||O)&&i.createElement("div",{className:f,style:{paddingRight:this.getLabelRightPosition(this.props.showCompareChanges)},ref:this.descriptionRef,dir:"auto"},O),o&&i.createElement("div",{className:eD.B0,onClick:this.props.disabled?void 0:this.toggleSeeMore},i.createElement("div",{className:eD.yT},E)),this.props.isUI3?i.createElement(i.Fragment,null,R,P,this.props.rowBodyFooter||!P&&(R||a)&&i.createElement("div",null)):i.createElement("div",null,R,P,this.props.rowBodyFooter)),B=this.props.isActive&&this.props.onSavepointMenuCallback&&!p&&i.createElement(eN.K0,{onClick:this.props.disabled?void 0:this.onMenuClick,className:eD.Wh,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.more_options"),recordingKey:L.Pt(this.props,"versonContext")},i.createElement(U.U,{svg:eG.A},i.createElement(u.J,null))),V=this.props.onHoverMenuCallback&&!this.props.onSavepointMenuCallback?i.createElement(eN.K0,{onClick:this.props.onHoverMenuCallback,className:this.props.forceShowHoverMenu?eD.xL:eD.Gb,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.more_options"),recordingKey:L.Pt(this.props,"versonContextHover")},i.createElement(U.U,{svg:eG.A},i.createElement(u.J,null))):null,H=i.createElement("button",{onClick:this.onCompareClick,className:eD.kr},(0,G.tx)("collaboration.feedback.compare")),K=i.createElement("button",{onClick:this.onCompareCurrentClick,className:eD.kr},(0,G.tx)("collaboration.feedback.compare")),W=i.createElement("button",{onClick:this.props.onDoneComparingClick,className:eD.kr},(0,G.tx)("collaboration.feedback.done_version_history"));return i.createElement(i.Fragment,null,(!_||this.props.showAutosaves)&&i.createElement("div",{className:g,ref:this.ref,onClick:this.props.disabled?this.disabledOnClickHandler:this.onClick,onMouseEnter:this.props.disabled&&!this.props.isStarterTeam?void 0:this.onMouseEnter,onMouseLeave:this.props.disabled&&!this.props.isStarterTeam?void 0:this.onMouseLeave,onContextMenu:this.props.disabled?void 0:this.onMenuClick,onDoubleClick:this.props.disabled&&this.props.isStarterTeam?void 0:this.onDoubleClick,"data-testid":"version-row"},!this.props.isUI3&&i.createElement("div",{className:v}),i.createElement("div",{className:_?eD.RV:eD.mP},i.createElement("div",{className:eD.Tc},i.createElement("div",{className:D?eD.eF:eD.nw,style:{right:this.getLabelRightPosition(this.props.showCompareChanges)}},this.props.iconOverride?this.props.iconOverride(i.createElement("div",{className:v})):this.props.isUI3?i.createElement("div",{className:eD.Gl},i.createElement("div",{className:v}),T):T,this.props.isUI3?i.createElement("div",{className:eD.B_},i.createElement("div",{className:eD.eP},C,M),B,this.props.onHoverMenuCallback&&V,this.props.showCompareChanges&&!this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&p&&K,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&!p&&!this.props.isComparing&&H,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&this.props.isComparing&&W,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&this.props.isComparingLoading&&!p&&!this.props.isComparing&&i.createElement("div",{className:eD.Ob},i.createElement(F.kt,null))):C),!this.props.isUI3&&B,!this.props.isUI3&&V),!this.props.isUI3&&M)))}renderTime(e,r,n){let a=i.createElement(eQ,{time:e,onChange:this.setFormattedTime});return i.createElement("div",{className:r},a)}getLabelRightPosition(e){return e?"65px":"35px"}}function e1({shouldShowUpgradeLink:e,startUpgrade:r,hasRestrictedVersions:n}){let a=en.h.useTrackingContext({trigger:em.b.HISTORY_UPSELL});return i.createElement(er.fu,{name:"Version History Paywall Panel",properties:{...a}},i.createElement("div",{className:eD.NM},i.createElement(K.E,{fontWeight:"semi-bold"},(0,G.tx)(n?"upsell.history.need_to_travel_back_in_time":"upsell.history.everything_else_is_history")),i.createElement("div",null,e?i.createElement(K.E,null,(0,G.tx)("upsell.history.upsell_upgrade_description",{upgradeLink:i.createElement(M.Ph,{className:eD.s6,onClick:r,trackingProperties:{trackingDescriptor:et.c.UPGRADE,upsellSource:em.b.HISTORY_UPSELL,canUserAccessProFeature:!1},trusted:!0},i.createElement(K.E,null,(0,G.tx)("upsell.history.upsell_upgrade")))})):i.createElement(K.E,null,(0,G.tx)("upsell.history.upsell_learn_more_description",{upgradeLink:i.createElement(M.Ph,{className:eD.s6,href:"/pricing",trusted:!0,trackingProperties:{canUserAccessProFeature:!1}},(0,G.tx)("upsell.history.learn_more"))})))))}function e2(){return i.createElement(i.Fragment,null,i.createElement("span",{className:eD.ot},C.Ay.mac?(0,G.tx)("collaboration.feedback.shortcut_mac"):(0,G.tx)("collaboration.feedback.shortcut")))}e0.displayName="VersionRow";class e4 extends L.uA{constructor(e){super(e),this.label="",this.description="",this.hasLabeled=!1,this.autoExpandUnlabeledOnly=!0,this.autoExpandGroupId="",this.expandLast=!1,this.toggleAutoItemById=e=>{let r=new Set(this.state.expandedIds);r.has(e)||this.autoExpandUnlabeledOnly&&!this.hasLabeled||this.autoExpandGroupId===e?(r.delete(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!1),this.setState({autoExpandForCurrentSelection:!1})):(r.add(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!0)),this.autoExpandGroupId="",this.setState({expandedIds:r})},this.drawRows=(e,r,n,i)=>{let a=[],o=0,s=-1,l=-1,c=0,d=e.length-1-e.slice().reverse().findIndex(e=>(0,eb.AI)(e)),u=e.length-1-e.slice().reverse().findIndex(e=>this.props.user?.handle&&(e.participating_users_array?.includes(this.props.user?.handle)||e.user.handle===this.props.user?.handle));for(;o<e.length;){let r=e[o];if((0,eb.AI)(r)){let p=n&&(0===o&&r.disabled||0===a.length);c>0&&(this.renderAutoVersionBatch(a,e,s,l,n&&(r.disabled&&0===s||0===a.length),!1,this.state.showAutosaves,i),p=!1),a.push(this.renderRow(r,p,o===e.length-1||o===d&&!this.state.showAutosaves||o===u&&this.state.showOnlyUserVersionHistory,i)),c=0,s=-1,l=-1}else s<0&&(s=o),l=o,c++;o++}return c>0&&this.renderAutoVersionBatch(a,e,s,l,n&&(e[0].disabled&&0===s||0===a.length),r,this.state.showAutosaves,i),a},this.hasLabeledVersions=e=>{for(let r of e)if(r.label&&r.label.length>0)return!0;return!1},this.startLoadingVersion=e=>{this.props.dispatch(j.$T({...this.props.selectedView,versionId:e.id})),this.props.dispatch(q.Y6({mode:f.Oin.KEEP_UI,type:ef.lF.SPINNER})),this.setState({isLoadingVersion:!0,loadingVersionId:e.id}),(0,v.sx)("History Version Savepoint Viewed",{savepointId:e.id,savedAt:e.touched_at})},this.finishedLoadingVersion=()=>{let e=this.state.loadingVersionId;if(e&&e.length>0){let r=this.getVersionByID(e);if(r&&!this.props.modalShown){let e;if(null!=r.label&&r.label.length>0)e=(0,G.t)("collaboration.feedback.viewing_version",{label:r.label});else{let n=(0,eS.xX)(r.touched_at);e=(0,G.t)("collaboration.feedback.viewing_version",{label:n})}e.length>34&&(e=e.substring(0,34)+"\u2026"),this.props.dispatch(H.F.enqueue({type:"versions",message:e}))}}this.setState({isLoadingVersion:!1,loadingVersionId:""})},this.loadVersionById=e=>{if(e===this.props.versionHistory.activeId)return;if(e===eh.V_){this.props.dispatch((0,eh.Nb)({id:eh.V_}));return}let r=this.getVersionByID(e);r&&this.loadVersion(r)},this.loadVersion=e=>{e.id!==this.props.versionHistory.activeId&&(this.startLoadingVersion(e),requestAnimationFrame(()=>{this.props.dispatch((0,eh.Nb)({id:e.id,eventType:"LOAD_NEW_VERSION"}))}))},this.isAllowedToChangeVersion=()=>null===this.props.modalShown&&!(0,ep.hM)(),this.onKeyDown=L.C0(this,"keydown",e=>{if(!this.props.dropdownShown&&!this.props.modalShown&&!this.props.versionHistory.compareId){if(e.keyCode===S.Uz.ESCAPE)this.props.modalShown||0!==Object.keys(this.props.mirror.sceneGraphSelection).length||this.props.dispatch((0,eh.Eg)());else if(e.keyCode===S.Uz.UP_ARROW||e.keyCode===S.Uz.DOWN_ARROW){if(!this.isAllowedToChangeVersion())return;let r=this.props.versionHistory.versions.length;this.setState({autoExpandForCurrentSelection:!0}),this.autoExpandGroupId="";let n=-1;if(this.props.versionHistory.activeId===eh.V_)e.keyCode===S.Uz.DOWN_ARROW&&(n=0);else{let r=this.props.versionHistory.versions.findIndex(e=>e.id===this.props.versionHistory.activeId);-1!==r&&(n=e.keyCode===S.Uz.UP_ARROW?r-1:r+1)}if(n<0){this.props.dispatch((0,eh.Nb)({id:eh.V_}));return}n>=r&&(n=r-1);let i=this.props.versionHistory.versions[n];i.disabled||this.loadVersion(i)}}}),this.startComparingChanges=e=>{this.props.dispatch(q.Y6({mode:f.Oin.KEEP_UI,type:ef.lF.SPINNER})),this.setState({isLoadingCompareChanges:!0,loadingCompareId:e.id})},this.finishedComparingChanges=()=>{let e=this.state.loadingCompareId;if(e&&e.length>0&&!this.props.modalShown){let r=this.getVersionByID(e);if(!r)return;if(0===f.AWq.getChunkChangeCount()){f.Egt.clearSelection();let e=(0,G.t)("collaboration.feedback.no_visible_changes");e.length>56&&(e=e.substring(0,56)+"\u2026"),this.props.dispatch(H.F.dequeue({})),this.props.dispatch(H.F.enqueue({type:"comparing",message:e}))}else{let e=null!=r.label&&r.label.length>0?r.label:(0,eS.xX)(r.touched_at),n=(0,G.t)("collaboration.feedback.comparing_changes_toast",{fromVersionLabel:e});n.length>56&&(n=n.substring(0,56)+"\u2026"),this.props.dispatch(H.F.dequeue({})),this.props.dispatch(H.F.enqueue({type:"comparing",message:n}))}}this.setState({isLoadingCompareChanges:!1,loadingCompareId:""}),this.props.dispatch(q.Y6({mode:f.Oin.OFF}))},this.compareChangesById=e=>{if(e===eh.V_)return;if(e===this.props.versionHistory.compareId){this.props.dispatch((0,eh.vF)({fromVersionId:e}));return}let r=this.getVersionByID(e);r&&this.compareChanges(r)},this.compareChangesFromCurrent=()=>{let e=this.props.versionHistory.activeId;if(!e)return;let r=this.getVersionByID(e);r&&(this.props.dispatch((0,eh.Nb)({id:eh.V_})),this.compareChanges(r))},this.compareChanges=e=>{e.id!==this.props.versionHistory.compareId&&(this.startComparingChanges(e),requestAnimationFrame(()=>{this.props.dispatch((0,eh.vF)({fromVersionId:e.id}))}))},this.loadMore=()=>{this.expandLast=!0,this.props.dispatch((0,eh._h)({direction:A.AS}))},this.startUpgrade=()=>{let e=this.getOpenFile(),r=e.teamId&&this.props.teams[e.teamId];if(!r){(0,R.$D)(s.e.MONETIZATION_UPGRADES,Error("Paywall: no team present"));return}this.props.dispatch(X.to({type:W.V,data:{upsellSource:em.b.HISTORY_UPSELL,teamId:r.id,openCheckoutInNewTab:!0}}))},this.restoreVersion=e=>{this.canEditFile()&&(this.props.dispatch(Y.PF({fileKey:this.getOpenFile().key,versionId:e.id})),(0,v.sx)("History Version Checkpoint Restored",{versionId:e.id,savedAt:e.touched_at}))},this.duplicateVersion=e=>{let r=this.getOpenFile(),n=(0,ec.xp)(r,r.project,(0,eu.getPermissionsState)(this.props));n?this.props.dispatch(X.to({type:eL.DV,data:{team:n,resource:e_.vL.FILE,action:eE.ZN.DUPLICATE_FILES,editorType:r.editorType,currentPlan:eo.F.Plan.STARTER,upsellPlan:eo.F.Plan.PRO}})):(this.props.dispatch(Y.YW({file:this.getOpenFile(),versionId:e.id})),(0,v.sx)("History Version Checkpoint Duplicated",{versionId:e.id,savedAt:e.touched_at}))},this.clearVersion=e=>{this.props.dispatch(Z.D({fileKey:this.getOpenFile().key,savepointID:e,label:"",description:""}))},this.addSavepoint=()=>{this.canEditFile()&&this.props.dispatch(X.to({type:eO.yU,data:{}}))},this.editSavepoint=e=>{if(this.canEditFile()&&e){let r=this.getVersionByID(e);r?.label&&(this.label=r.label),r?.description&&(this.description=r.description),this.props.dispatch(X.to({type:eO.yU,data:{description:this.description,label:this.label,savepointID:e}}))}},this.showUndoMergeModal=e=>{this.props.dispatch(X.to({type:eT.G,data:{version:e}}))},this.dropdownCallback=(e,r)=>{let{version:n}=r;switch(e){case"savepoint-clear":this.clearVersion(n.id);break;case"savepoint-restore":this.restoreVersion(n);break;case"savepoint-duplicate":this.duplicateVersion(n);break;case"savepoint-edit":case"savepoint-label":this.editSavepoint(n.id);break;case"savepoint-compare":this.compareChangesFromCurrent();break;case"savepoint-link":try{!function(e,r,n){e(J.zT({...r,versionId:n})),e(H.F.enqueue({type:"link_copied_to_clipboard",message:(0,ee.A)("link-copied")}))}(this.props.dispatch,this.props.selectedView,n.id)}catch(e){this.props.dispatch(V.s.error("Failed to copy link"))}break;case"savepoint-undo-merge":this.showUndoMergeModal(n)}},this.getVersionByID=e=>{let r=this.props.versionHistory,n=r.versions.find(r=>r.id===e);return r.linkedVersion?.id===e?r.linkedVersion:n},this.onSavepointMenu=(e,r,n)=>{if(this.props.dropdownShown&&this.props.dropdownShown.type===Q.$O){n.preventDefault();return}n.stopPropagation(),n.preventDefault();let i=this.getVersionByID(e),a=this.getOpenFile(),{clientX:o,clientY:s}=n;this.props.dispatch(j.j7({type:Q.$O,data:{clientX:o,clientY:s,version:i,callback:this.dropdownCallback,editName:i.label?"savepoint-edit":"savepoint-label",enableClear:i.label&&i.label.length>0,disableDuplicate:this.props.selectedView.editorType===eg.nT.Slides&&(0,w.oA)(a.org?.isSlidesDisabled)||this.props.selectedView.editorType===eg.nT.Whiteboard&&!!a.org?.figjamDisabledAt||this.props.selectedView.editorType===eg.nT.Sites&&!!a.org?.isSitesDisabled||this.props.selectedView.editorType===eg.nT.Cooper&&!!a.org?.isCooperDisabled}}))},this.onDoneComparingClick=L.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.isAllowedToChangeVersion()&&this.props.versionHistory.compareId&&(this.props.dispatch((0,eh.Nb)({id:eh.V_})),f.Egt.clearSelection(),this.props.dispatch(H.F.dequeue({matchType:"comparing"})),this.props.dispatch(H.F.dequeue({matchType:"view_changes"})))},300)}),this.renderRow=(e,r,n,a)=>{let o=this.getOpenFile();return i.createElement(e0,{key:`history-item-${e.id}`,branchFileKey:e.branch_file_key,checkpointKey:e.checkpoint_key,clearVersion:this.clearVersion.bind(this,e.id),description:e.description,devModeActivity:e.dev_mode_activity,disabled:e.disabled,dispatch:this.props.dispatch,displayText:i.createElement(eJ,{item:e}),editorType:o.editorType,fileByKey:this.props.fileByKey,first:r,isActive:this.props.versionHistory.activeId===e.id,isAllowedToChangeVersion:this.isAllowedToChangeVersion,isBranchingVersion:(0,eb.pW)(e),isComparing:this.props.versionHistory.compareId===e.id,isComparingLoading:this.state.loadingCompareId===e.id,isCurrentVersionActive:this.props.versionHistory.activeId===eh.V_,isStarterTeam:a,isUI3:this.props.isUI3,label:e.label,last:n,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,onDoneComparingClick:this.onDoneComparingClick,onEditSavepoint:this.editSavepoint,onSavepointMenuCallback:this.onSavepointMenu,onSelect:this.loadVersionById,participatingImagesDict:e.participating_images_dict,recordingKey:L.Pt(this.props,"version",e.id),showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),team:o.teamId?this.props.teams?.[o.teamId]:void 0,text:eZ(e),time:e.touched_at,user:e.user&&e.user.handle,userUrl:e.user&&((0,eb.pW)(e)||e.label)?e.user.img_url:null,versionId:e.id,view:e.view?e.view:null})},this.onClose=()=>{if(this.props.onClose){this.props.onClose();return}this.props.dispatch((0,eh.Eg)())},this.state={isLoadingVersion:!1,loadingVersionId:"",isLoadingCompareChanges:!1,loadingCompareId:"",expandedIds:new Set,autoExpandForCurrentSelection:!1,showAutosaves:!0,showOnlyUserVersionHistory:!1}}renderAutoVersionBatch(e,r,n,a,o,s,l,c){let d;if(n<0||null===r||r.length<1)return;let u=r[n].id,h=this.state.expandedIds.has(u)||this.autoExpandUnlabeledOnly&&!this.hasLabeled;if(this.state.autoExpandForCurrentSelection)for(let e=n;e<=a;e++)r[e].id===this.props.versionHistory.activeId&&(h=!0,this.autoExpandGroupId=this.props.versionHistory.activeId);this.expandLast&&s&&(h||this.toggleAutoItemById(u),this.expandLast=!1);let _=a-n+1,g=!0;if(1===_&&(h=!0,g=!1),d=s&&(1===_||!h)?o?eD.y5:eD.p8:o?eD.pi:eD.N5,g&&l&&e.push(i.createElement(O.D8,{key:`auto_row_${n}`,recordingKey:L.Pt(this.props,`autoVersionBatch.${n}`),className:r[n].disabled?eD.Ao:eD.QQ,onClick:this.toggleAutoItemById.bind(this,u)},!this.props.isUI3&&i.createElement("div",{className:d}),i.createElement("div",{className:eD.Jt},this.props.isUI3?i.createElement("div",{className:eD.Gl},i.createElement("div",{className:d}),h?i.createElement(p.r,null):i.createElement(m.R,null)):i.createElement(ew.D,null),i.createElement("div",{className:eD.aJ},(0,G.tx)("collaboration.feedback.autosave_count",{count:_}),!this.props.isUI3&&i.createElement(x.B,{key:"expand-caret",className:h?eD.ey:eD.GE,svg:h?eB.A:eV.A}))))),h)for(let i=n;i<=a;i++)e.push(this.renderRow(r[i],o&&n===a,s&&i===a,c))}componentDidMount(){super.componentDidMount(),this.props.versionHistory.activeId||this.props.dispatch((0,eh.Nb)({id:eh.V_})),document.addEventListener("keydown",this.onKeyDown),el.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",this.finishedLoadingVersion),T.j.on("loadedCompareChanges",this.finishedComparingChanges)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("keydown",this.onKeyDown),el.Y5.fromFullscreen.removeListener("sceneGraphMirrorUpdate",this.finishedLoadingVersion),T.j.removeListener("loadedCompareChanges",this.finishedComparingChanges)}getOpenFile(){let e=this.props.openFile;return null==e&&(0,P.x1)("history","history view should only be possible to open when we have a file"),(0,o.KF)(null!=e,"history view should only be possible to open when we have a file"),e}canEditFile(){return this.props.openFile?.canEdit}showCompareChanges(){return(0,E.k)().version_diffing&&this.props.selectedView.editorType===eg.nT.Design}render(){let e=this.getOpenFile(),r=e.team,n=this.props.versionHistory.versions.filter(e=>!this.state.showOnlyUserVersionHistory||this.props.user?.handle&&(e.participating_users_array?.includes(this.props.user?.handle)||e.user.handle===this.props.user?.handle)),a=n.filter(e=>!e.disabled),o=n.filter(e=>e.disabled).slice(0,ed.cW);this.hasLabeled=this.hasLabeledVersions(a)||this.hasLabeledVersions(o);let s=null,l=(0,A.u9)(this.props.versionHistory),c=!(0,ed.XX)(r)&&!this.props.currentUserOrgId&&(o.length>0||!l),d=!!r&&(0,eu.canEditTeam)(r.id,(0,eu.getPermissionsState)(this.props));c&&(s=i.createElement(e1,{startUpgrade:this.startUpgrade,shouldShowUpgradeLink:d,hasRestrictedVersions:!!o.length}));let u=i.createElement("div",{className:eD.UX},!this.props.versionHistory.loading&&(0,A.u9)(this.props.versionHistory)&&i.createElement("a",{className:eD.nf,onClick:this.loadMore},(0,G.tx)("collaboration.feedback.show_older"))),p=this.props.versionHistory.docHasChanged&&!this.props.versionHistory.loading,m=this.props.versionHistory.linkedVersion,h=m&&a.some(e=>m.id===e.id),_=!this.state.showOnlyUserVersionHistory||m?.user.id===this.props.user?.id,g=(0,ev.$A)(this.props.selectedView),E=(0,eI.C)(this.props.selectedView),y=!this.canEditFile(),v=a.map(e=>(0,eb.AI)(e)?1:0).reduce((e,r)=>e+r,0);return i.createElement("div",null,this.props.progressBarState.mode!==f.Oin.ON_AND_LOCKED&&i.createElement(er.fu,{name:"Version History Panel",properties:{teamId:r?.id}},i.createElement("div",{className:b()(eD.kL,Q.Dm),style:g||E||this.props.isUI3?{width:g||this.props.isUI3?"100%":ej+eq,borderLeft:g?"unset":void 0,minWidth:E&&this.props.isUI3?"240px":"unset"}:{position:"fixed",top:"auto",bottom:"auto",width:ej+eq,height:"100%"}},i.createElement(e3,{onClose:this.onClose,addSavepoint:this.addSavepoint,filterOptions:{showAutosaves:this.state.showAutosaves,setShowAutosaves:e=>this.setState({showAutosaves:e}),showOnlyUserVersionHistory:this.state.showOnlyUserVersionHistory,setShowOnlyUserVersionHistory:e=>this.setState({showOnlyUserVersionHistory:e})},isViewOnly:y,recordingKey:L.Pt(this.props,"toolbar")}),i.createElement("div",{"data-not-draggable":!0},i.createElement("div",{className:eD.dG},!this.hasLabeled&&!y&&!g&&i.createElement("div",{className:eD.fy},i.createElement("div",null,(0,G.tx)("collaboration.feedback.press_shortcut_to_add_to_version_history_while_editing",{shortcut:i.createElement(e2,null)}))),m&&!h&&_&&i.createElement(e0,{checkpointKey:m.checkpoint_key,description:m.description,dispatch:this.props.dispatch,displayText:(0,G.tx)("collaboration.feedback.get_version_text_linked_version_linked_version",{versionText:i.createElement(eJ,{item:m})}),editorType:e.editorType,first:!0,isActive:this.props.versionHistory.activeId===m.id,isAllowedToChangeVersion:this.isAllowedToChangeVersion,isBranchingVersion:(0,eb.pW)(m),isComparing:this.props.versionHistory.compareId===m.id,isComparingLoading:this.state.loadingCompareId===m.id,isCurrentVersionActive:this.props.versionHistory.activeId===eh.V_,isLinked:!0,isUI3:this.props.isUI3,label:m.label,last:!0,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,onDoneComparingClick:this.onDoneComparingClick,onSavepointMenuCallback:this.onSavepointMenu,onSelect:this.loadVersionById,showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),time:m.touched_at,userUrl:m.user.img_url,versionId:m.id,view:m.view?m.view:null}),this.props.versionHistory.loading&&i.createElement("div",{className:eD.u1},i.createElement(F.kt,null)),p&&i.createElement(e0,{addSavepoint:this.addSavepoint,dispatch:this.props.dispatch,displayText:(0,G.tx)("collaboration.feedback.current_version"),editorType:e.editorType,first:!0,hideLine:0===a.length||!this.state.showAutosaves&&0===v,isActive:this.props.versionHistory.activeId===eh.V_,isAllowedToChangeVersion:this.isAllowedToChangeVersion,isComparing:!!this.props.versionHistory.compareId,isComparingLoading:this.state.loadingCompareId===eh.V_,isCurrentVersionActive:this.props.versionHistory.activeId===eh.V_,isUI3:this.props.isUI3,last:!1,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,onCreateSavepoint:this.addSavepoint,onDoneComparingClick:this.onDoneComparingClick,onSavepointMenuCallback:this.onSavepointMenu,onSelect:this.loadVersionById,recordingKey:L.Pt(this.props,"currentVersion"),showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),userUrl:this.props.user.img_url,versionId:eh.V_,view:null}),this.drawRows(a,0===o.length,!p),this.drawRows(o,!0,!1,d),s),0===o.length&&u))))}}function e3(e){let{onClose:r,addSavepoint:n,filterOptions:a,isViewOnly:o}=e,{toggleDropdown:s,dropdownTargetRef:l,isDropdownShown:c}=(0,eA.B)("FILTER_VERSIONS_DROPDOWN"),d=(0,ei.GS)(),u=()=>{a?.setShowOnlyUserVersionHistory(!a?.showOnlyUserVersionHistory)},p=a?[i.createElement(D.MM,{key:"all",checked:!a.showOnlyUserVersionHistory,onClick:()=>a.showOnlyUserVersionHistory?u():null},(0,G.tx)("collaboration.feedback.all_filter_text")),i.createElement(D.MM,{key:"only_yours",disabled:o,checked:a.showOnlyUserVersionHistory,onClick:()=>a.showOnlyUserVersionHistory?null:u()},(0,G.tx)("collaboration.feedback.only_yours_filter")),i.createElement(D.wv,{key:"sep"}),i.createElement(D.MM,{key:"autosaves",checked:a.showAutosaves,onClick:()=>{a?.setShowAutosaves(!a.showAutosaves)}},(0,G.tx)("collaboration.feedback.show_autosave_versions"))]:[];return i.createElement("div",{className:eD.N1},i.createElement("div",{className:eD.qd},(0,G.tx)("collaboration.feedback.version_history")),i.createElement("div",{className:d?B.s.flex.itemsCenter.gap4.$:B.s.flex.itemsCenter.$},a&&i.createElement("div",{ref:l},i.createElement(eN.YW,{selected:!!a.showOnlyUserVersionHistory,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.filter_tooltip"),onClick:s,onMouseDown:e=>c&&e.stopPropagation()},i.createElement(U.U,{svg:e$.A},i.createElement(h.S,null)))),c&&l.current&&i.createElement(eC.Jz,{showPoint:!0,targetRect:l.current.getBoundingClientRect(),options:p,hideDropdown:s,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,autofocusPrevElementOnTab:!1,propagateCloseClick:!0}),!o&&i.createElement(eN.K0,{onClick:n,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.add_to_version_history_tooltip"),dataTestId:"versions-add-savepoint",recordingKey:L.Pt(e,"plusVersion")},i.createElement(U.U,{svg:eK.A,fallbackSvg:eW.A},i.createElement(_.x,null))),i.createElement(eN.K0,{onClick:r,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.close_tooltip"),recordingKey:L.Pt(e,"button-close")},i.createElement(U.U,{svg:eY.A},i.createElement(g.L,null)))))}function e7({versions:e,selectedVersion:r,setVersion:n,last:o,idx:s,isSection:l}){let c=(0,a.wA)(),d=(0,es.ud)(),u=(0,ei.GS)();return i.createElement(i.Fragment,null,e.map((a,p)=>i.createElement(e0,{key:`history-item-${a.id}`,branchFileKey:a.branch_file_key,checkpointKey:a.checkpoint_key,description:a.description,devModeActivity:a.dev_mode_activity,disabled:a.disabled,dispatch:c,displayText:i.createElement(eJ,{item:a}),editorType:null,fileByKey:d,first:0===s&&0===p,isActive:r?.id===a.id,isAllowedToChangeVersion:()=>!0,isBranchingVersion:(0,eb.pW)(a),isSection:l,isUI3:u,label:a.label,last:o&&p===e.length-1,onSelect:()=>n(a),participatingImagesDict:a.participating_images_dict,showAutosaves:!0,text:eZ(a),time:a.touched_at,user:a.user&&a.user.handle,userUrl:a.user&&((0,eb.pW)(a)||a.label)?a.user.img_url:null,version:a,versionId:a.id,view:a.view?a.view:null})))}function e5({versions:e,selectedVersion:r,setVersion:n,last:a,idx:o}){let s;let[l,c]=i.useState(r&&!!e.find(e=>e.id===r.id)),d=z.eS()?.isSection,u=(0,ei.GS)();s=a&&(1===e.length||!l)?0===o?eD.y5:eD.p8:0===o?eD.pi:eD.N5;let h=u?i.createElement(O.D8,{className:eD.QQ,onClick:()=>c(!l)},i.createElement("div",{className:eD.Jt},i.createElement("div",{className:eD.Gl},l?i.createElement(p.r,null):i.createElement(m.R,null)),i.createElement("div",{className:eD.aJ},(0,G.tx)("collaboration.feedback.autosave_count",{count:e.length})))):i.createElement(O.D8,{className:eD.QQ,onClick:()=>c(!l)},i.createElement("div",{className:s}),i.createElement("div",{className:eD.Jt},i.createElement(ew.D,null),i.createElement("div",{className:eD.aJ},(0,G.tx)("collaboration.feedback.autosave_count",{count:e.length}),i.createElement(x.B,{key:"expand-caret",className:l?eD.ey:eD.GE,svg:l?eB.A:eV.A}))));return i.createElement("div",{key:`auto_row_${o}`},h,l&&i.createElement(e7,{versions:e,selectedVersion:r,setVersion:n,last:a,idx:o,isSection:d}))}function e8({versions:e,selectedVersion:r,setVersion:n}){let a=[],o=[],s=0,l=z.eS()?.isSection;function c(e){o.length>0&&(a.push(i.createElement(e5,{key:s,versions:[...o],selectedVersion:r,setVersion:n,idx:s,last:e})),s++,o=[])}for(let d=0;d<e.length;d++){let u=e[d];(0,eb.AI)(u)||u.frameCreated||u.frameEdited||u.lastViewed?(c(!1),a.push(i.createElement(e7,{key:s,versions:[u],selectedVersion:r,setVersion:n,idx:s,last:d===e.length-1,isSection:l})),s++,o=[]):o.push(u)}return c(!0),i.createElement(i.Fragment,null,a)}e4.displayName="VersionHistoryView",(0,a.Ng)(ea.l$)(e4)},469345:(e,r,n)=>{n.d(r,{PZ:()=>e_,SI:()=>ep});var i=n(848318),a=n(716544),o=n(108487),s=n(719670),l=n(992277),c=n(246274),d=n(192187),u=n(741419),p=n(897392),m=n(179703),h=n(157907),_=n(39773),g=n(536384),f=n.n(g),E=n(549090),y=n(579020),b=n(702),v=n(6819),T=n(427193),I=n(502255),S=n(645221),w=n(587895),A=n(91041),C=n(442313),N=n(185067),L=n(172818),O=n(370255),R=n(780336),P=n(790355),D=n(667323),M=n(449737),k=n(725469),F=n(402192),x=n(51910),U=n(369600),B=n(661780),V=n(162371),G=n(766878),H=n(464012),K=n(12435),W=n(998509),z=n(79223),$=n(395273),Y=n(310232),j=n(425116),q=n(837463),X=n(533709),Z=n(884947),J=n(505785),Q=n(121424),ee=n(142518),et=n(20825),er=n(850755);let en=[2,3,6,13,25,50,75,100,200,300,1e3];function ei(e,r,n){if(!n)return!1;let i=r.get((0,p.dI)(e));if(!i)return!1;let a=i.absoluteBoundingBox;return!!a&&a.x<n.x+n.w&&a.x+a.w>n.x&&a.y<n.y+n.h&&a.y+a.h>n.y}function ea(e,r){return{x:e.x-r.x,y:e.y-r.y,width:e.w,height:e.h}}function eo(e,r,n=!1){if(!r)return null;let i=e.get(r);return i?n?i.absoluteRenderBounds:i.absoluteBoundingBox:null}function es(e){return!!(e?.basis?.styleType||e?.change?.styleType)}function el(e,r,n){let i=e?.basis?.guid?(0,p.dI)(e.basis.guid):p.AD,a=es(e)?null:eo(r.scene,i,!1),o=e?.change.guid?(0,p.dI)(e.change.guid):p.AD,s=e?.state==="removed"||es(e)?null:eo(n.scene,o,!1);return{before:{id:i,box:a&&r.baseBox?ea(a,r.baseBox):null},after:{id:o,box:s&&n.baseBox?ea(s,n.baseBox):null}}}function ec({frameId:e,historyFrameId:r,historySceneGraph:n,chunkChanges:a,discreteDiffing:c,setChunkChanges:d}){let m=(0,x.eY)(),[h,g]=(0,_.fp)(R.Ib),f=i.useMemo(()=>c?u.Egt.getLayerGUIDMapping(r,n.scene,e,m.scene):void 0,[c,e,r,n.scene,m.scene]);return i.useEffect(()=>{if(a)return;let i=u.egF.getNodeTree(r,n.scene,!c),h=u.egF.getNodeTree(e,m.scene,!c);if(!i||!h){g(new Map),d({});return}b.sn.reset("dev_mode.compare_changes.diffing",r),b.sn.start("dev_mode.compare_changes.diffing",{key:r});let{deltaTree:_,deltaNodeMap:E}=function(e,r,n,i,a,c,d=!0){let m;let h=new Map,_=o.w.decodeMessage(e.nodeChanges).nodeChanges,g=o.w.decodeMessage(r.nodeChanges).nodeChanges;if(!_||!g)return{deltaTree:{},deltaNodeMap:h};let f=new Map,E=0;!function e(r){if(E>=_.length)return(0,I.$D)(l.e.DEVELOPER_TOOLS,Error("History node index out of bounds")),null;for(let n of(f.set(r.id,{change:_[E],node:r}),E++,r.children))e(n)}(e.tree);let y=d?n.get((0,p.dI)(g[0].guid)):null,b=_[0]&&d?i.get((0,p.dI)(_[0].guid)):null,v=y?.absoluteBoundingBox||null,T=b?.absoluteBoundingBox||null;function S(e,r,n){h.set(e,r.value),(0,$.NI)(n,r)}let w=0,A=function e(r,m={}){let _,E;if(w>=g.length)return(0,I.$D)(l.e.DEVELOPER_TOOLS,Error("Node index out of bounds")),{};let y=g[w],b=0===w;w++;let A=c?c.get(r.id)??p.AD:r.id,C=f.get(A),N={previousChange:C?.change,currentChange:y,isRootNode:b};if(C){let e=function(e,r,n,i,a){let l=new Map;for(let[c,d]of z.AW){let m=null,h=null;if((0,K.ar)(c)&&(e[c]&&e[c].guid&&(m=(0,p.dI)(e[c].guid)),r[c]&&r[c].guid&&(h=(0,p.dI)(r[c].guid))),m||h){let p=function(e,r){if(r){if("styleIdForStrokeFill"===c){e.strokePaints=r.fillPaints;return}for(let n of d)e[n]=r[n]}},_=h?u.egF.getNodeTree(h,i.scene,a)?.nodeChanges:null,g=m?u.egF.getNodeTree(m,n.scene,a)?.nodeChanges:null,f=_?o.w.decodeMessage(_).nodeChanges?.[0]:null,E=g?o.w.decodeMessage(g).nodeChanges?.[0]:null;if(p(r,f),p(e,E),f&&!E)l.set(c,{state:"removed",previousChange:f,currentChange:{phase:"REMOVED"}});else if(!f&&E)l.set(c,{state:"added",previousChange:{phase:"REMOVED"},currentChange:E});else if(f&&E){for(let e of["name",...d])if(!(0,s.cF)(f[e],E[e])){l.set(c,{state:"changed",previousChange:f,currentChange:E});break}}}}return l}(y,C?.change,n,i,a);for(let e of z.cs)if(!(0,s.cF)(C.change[e],y[e])&&("textData"!==e||C.change[e]?.characters!==y[e]?.characters)){if("transform"===e&&b||d&&!ei(C.change.guid,i,v)&&!ei(y.guid,n,v))continue;N.state="changed";break}e.size>0&&(N.changedStyles=e)}else(!d||ei(y.guid,n,v))&&(N.state="added");for(let n of(y.guid&&(N.state||N.changedStyles)&&(E={value:N}),_=E||m,E&&S((0,p.dI)(y.guid),E,m),r.children.forEach(r=>e(r,_)),C?.node?.children||[]))f.has(n.id)&&function({checkOverlap:e,parent:r,nodeId:n}){let a=f.get(n);if(e&&!ei(a?.change.guid,i,T))return;let o={value:{state:"removed",previousChange:a?.change,currentChange:{phase:"REMOVED"}}};h.has((0,p.dI)(f.get(n)?.change.guid))&&(0,I.$D)(l.e.DEVELOPER_TOOLS,Error("Error generating deleted nodes"));let s=(0,p.dI)(a?.change.guid);S(s,o,r),f.delete(s)}({checkOverlap:d,nodeId:n.id,parent:_});return f.delete(A),m}(r.tree);if(!A.value&&A.children&&1===A.children.length){let e=A.children[0];delete e.parent,m=e}else m=A;return{deltaTree:m,deltaNodeMap:h}}(i,h,m,n,!c,f,!0);g(E),d((0,$.X$)(_,function(e){let r=e.value,n=null,i=r.state;return("added"===r.state||"changed"===r.state)&&(n={isRootNode:!!r.isRootNode,basis:r.previousChange?r.previousChange:{phase:"REMOVED"},change:r.currentChange,state:i}),"removed"===r.state&&r.previousChange&&(n={isRootNode:!!r.isRootNode,basis:r.previousChange,change:{phase:"REMOVED"},state:i}),r.changedStyles&&(n||(n={isRootNode:!!r.isRootNode,basis:r.previousChange,change:r.currentChange,state:i}),n.changedStyles=r.changedStyles),{result:n}}));let v=b.sn.tryStop("dev_mode.compare_changes.diffing",r);v&&(0,y.sx)("dev_mode.compare_changes.diffing",{type:"node_changes",durationMs:v},{forwardToDatadog:!0})},[e,g,a,d,r,n.scene,m.scene,f,n,m,c]),i.useEffect(()=>()=>{g(new Map)},[g]),null}function ed(e,r){if(e.isState){let r=e.parentNode?.name;return r?`${r}/${e.name}`:e.name}if(r.singleBackingSymbol&&r.singleBackingStateGroup){let n=r.singleBackingSymbol.name;return n?`${e.name}/${n}`:e.name}return e.name}function eu(e){return{node:(0,N.mJ)(e),backingSymbolData:(0,Z.$)([e])}}function ep({nodeId:e,detachedComponentsScene:r,documentIndex:n,showError:i}){let a=n===d.x1?u.juq.HISTORY:r?u.juq.DETACHED_COMPONENTS:c.G,o=new m.qo(a),s=o.get(e)?.absoluteRenderBounds||{x:0,y:0,w:0,h:0},l=0,p=!0;return()=>({nodeBounds:{x:s.x,y:s.y,width:s.w,height:s.h},getImage:({scale:i,clipRect:a})=>{let s;let c=Date.now();c-l>1e4&&(l=c,(s=new T.jk("performance.dev_mode.compare_changes.get_image",{})).start());let d=(0,Q.L6)(e,n,r,i,a);if(s){let e=s.stop(),r=d?.image?.length??0;e&&r&&(0,y.sx)("performance.dev_mode.compare_changes.get_image",{elapsedMs:e,imageBytes:r,sceneType:o.getSceneTypeDebugString(),isFirstImage:p},{forwardToDatadog:!0})}return p=!1,d&&{data:d.image,width:d.width,height:d.height,scale:d.width/d.canvasSpaceBounds.width,canvasSpaceBounds:d.canvasSpaceBounds}},showError:i})}function em({version:e,isSection:r}){let n=new Date(e.touched_at?e.touched_at:e.created_at),a=e.label;e.frameCreated?a=r?(0,C.tx)("collaboration.feedback.compare_changes_modal.section_created"):(0,C.tx)("collaboration.feedback.compare_changes_modal.frame_created"):e.lastViewed&&(a=(0,C.tx)("collaboration.feedback.compare_changes_modal.last_viewed_by_you"));let o=a?i.createElement(ee.Cr,{time:n}):null;return i.createElement("div",{className:er.sh},i.createElement("div",{className:er.dp},a||i.createElement(ee.Cr,{time:n})),i.createElement("div",{className:er.m7},o))}let eh=(0,_.eU)(null);function e_(e){let{nodeId:r,onCloseModal:n,modalTitle:a,currentImage:o,historicImage:s,historicHeader:l,currentHeader:c,versions:d,selectedVersion:g,setSelectedVersion:E,renderLoadingBar:v,modalError:T,discreteDiffingInput:I,initialSelectedNodeId:S,skipCorrectHistoryCanvasCheck:N,preferencesApi:R,origin:P}=e,D=(0,U.tS)(),M=B.iZ()?.id,[k,F]=i.useState(w.Ss.SIDE_BY_SIDE),[x,V]=i.useState(J.q0),[G,H]=i.useState(!0),[K,q]=i.useState(null),[X,Z]=i.useState(null),[Q,ei]=i.useState(!0),[ea,es]=i.useState(!0),ed=O.eS()?.isSection,[eu,ep]=i.useState(()=>S?{id:S,zoomToSelection:!0}:null),[e_,eE]=(0,_.fp)(eh),[ey,eb]=i.useState(void 0),ev=(0,_.fp)(A.w1)[1],eT=(0,J.t$)(g||null,r)||!!I,eI=N||eT,eS=i.useMemo(()=>I?.sceneGraph?I.sceneGraph:new m.qo(u.juq.HISTORY),[I?.sceneGraph]),ew=(0,L.G)();i.useEffect(()=>{eu&&eu.id!==r&&(0,y.sx)("Diff Modal New Layer Selected",{userId:M,fileKey:D,frameId:r,versionId:g?.id,layer_id:eu.id})},[eu]);let eA=i.useRef(g);i.useEffect(()=>{eA.current!==g&&(eA.current=g,eb(void 0),ep(null))},[g,eA]);let eC=void 0!==o,eN=void 0!==s,eL=i.useCallback(e=>{"Escape"===e.key&&(eu?(ep(null),e.stopPropagation(),e.preventDefault()):n())},[n,eu]);i.useEffect(()=>(document.addEventListener("keydown",eL),()=>{document.removeEventListener("keydown",eL)}),[eL]),i.useEffect(()=>{if("cc_versions"===P&&ey&&!ea){(0,$.mf)(ey)?(0,y.sx)("Diff Modal No Changes Between Versions",{userId:M,fileKey:D,frameId:r,versionId:g?.id,initialVersion:Q,versionMetadata:!1},{forwardToDatadog:!0}):(0,y.sx)("dev_mode.compare_changes.version_has_changes",{userId:M,fileKey:D,frameId:r,versionId:g?.id,initialVersion:Q,versionMetadata:!1},{forwardToDatadog:!0});let e=b.sn.tryStop("dev_mode.compare_changes.switch_versions",g?.id);e&&(0,y.sx)("dev_mode.compare_changes.switch_versions",{elapsedMs:e},{forwardToDatadog:!0})}},[P,Q,ea,ey,g,r,D,M]),i.useEffect(()=>{g&&null===s&&(0,y.sx)("dev_mode.compare_changes.no_image",{userId:M,fileKey:D,frameId:r,versionId:g?.id},{forwardToDatadog:!0})},[s,g,r,D,M]);let eO=()=>i.createElement(w.BL,{isPreviewAvailable:eC,showOptions:eC,view:k,onSideBySideClick:()=>{F(w.Ss.SIDE_BY_SIDE)},onOverlayClick:()=>{F(w.Ss.OVERLAY)},additionalStyles:er.tH}),[eR,eP]=i.useState(new Set),eD=i.useCallback((e,r)=>{r?eP(r=>new Set([...r,...e])):eP(r=>{let n=new Set(e);return new Set([...r].filter(e=>!n.has(e)))})},[eP]),eM=(0,i.useCallback)(e=>{let r=e?.value;if(r){let n="removed"===r.state?r.beforeNodeId:r.afterNodeId;ep({id:n,zoomToSelection:!1}),q(r.beforeNodeId),Z(r.afterNodeId);let i=[n],a=e?.parent;for(;a;){let e=a.value;if(e){let r="removed"===e.state?e.beforeNodeId:e.afterNodeId;i.push(r)}a=a.parent}eD(i,!0)}else ep(null),q(null),Z(null)},[eD]),ek=(0,i.useCallback)(e=>{e?eE("removed"===e.state?e.beforeNodeId:e.afterNodeId):eE(p.AD)},[eE]),eF=(0,i.useCallback)(e=>eE(e),[eE]),ex=(0,i.useCallback)((e,r)=>{e===eu?.id?(ep(null),q(null),Z(null)):(ep({id:e,zoomToSelection:!0}),eE(e),q((0,p.dI)(r.basis.guid)),Z((0,p.dI)(r.change.guid)))},[eu?.id,eE]),eU=(0,i.useMemo)(()=>ey&&(0,W.kF)(ey,z.FO.LEGO,void 0,j.O0)||{},[ey]),eB=!(0,$.mf)(eU),eV=I?I.nodeId:r,{beforeBoxes:eG,afterBoxes:eH}=function(e){let{frameId:r,historyFrameId:n,view:a,displayableChanges:o,historySceneGraph:s}=e;return(0,i.useMemo)(()=>{if(!r||!n)return{};let e=function(e,r,n,i){let a=(0,m.UN)(),o=eo(r,n,!0),s=eo(a,e,!0);return(0,$.X$)(i,e=>{let n=el(e.value,{scene:r,baseBox:o},{scene:a,baseBox:s});return{result:{beforeBox:n.before.box,afterBox:n.after.box,afterBoxNodeId:n.after.id,beforeBoxNodeId:n.before.id}}})}(r,s,n,o);return{beforeBoxes:(0,$.X$)(e,e=>{let i=e.value,a=i.beforeBoxNodeId===n||i.afterBoxNodeId===r;return i.afterBox?i.beforeBox?{result:{rect:i.beforeBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"changed",isRootFrame:a}}:{result:{rect:i.afterBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"added",isRootFrame:a}}:{result:{rect:i.beforeBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"removed",isRootFrame:a}}}),afterBoxes:(0,$.X$)(e,e=>{let i=e.value,a=i.beforeBoxNodeId===n||i.afterBoxNodeId===r;return i.afterBox?i.beforeBox?{result:{rect:i.afterBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"changed",isRootFrame:a}}:{result:{rect:i.afterBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"added",isRootFrame:a}}:{result:{rect:i.beforeBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"removed",isRootFrame:a}}})}},[r,n,a,o])}({frameId:r,historyFrameId:eV,historySceneGraph:eS,view:k,displayableChanges:eU,activeNode:e_,selectedNode:eu});i.useEffect(()=>{if(!eu?.id||!eu?.zoomToSelection||!r||!eV)return;let{baseBeforeBox:e,baseAfterBox:n,resultBoxes:i}=function(e,r,n,i,a){let o=(0,m.UN)(),s=eo(r,n,!0),l=eo(o,e,!0),c=[];for(let e of i){let n=(0,$.lE)(a,r=>(0,p.dI)(r.change.guid)===e||(0,p.dI)(r.basis.guid)===e);if(n){let e=el(n,{scene:r,baseBox:s},{scene:o,baseBox:l});c.push({beforeBox:e.before.box,afterBox:e.after.box,beforeBoxNodeId:e.before.id,afterBoxNodeId:e.after.id})}}return{baseBeforeBox:s,baseAfterBox:l,resultBoxes:c}}(r,eS,eV,[eu.id],eU),{beforeBox:a,afterBox:o}=i[0]??{},s=1/0,l=1/0,c=-1/0,d=-1/0;a&&e&&(a.x-=e.w/2,a.y-=e.h/2,s=Math.min(s,a.x),l=Math.min(l,a.y),c=Math.max(c,a.x+a.width),d=Math.max(d,a.y+a.height)),o&&n&&(o.x-=n.w/2,o.y-=n.h/2,s=Math.min(s,o.x),l=Math.min(l,o.y),c=Math.max(c,o.x+o.width),d=Math.max(d,o.y+o.height)),s!==1/0&&ev({x:s,y:l,width:c-s,height:d-l})},[eu,ev,r,eU]),i.useEffect(()=>()=>{ev(void 0)},[ev]);let eK=eG?{rootBox:eG,onBoxClicked:eM,onBoxHovered:ek,selectedNodeId:eu?.id,expandedLayers:eR,ignoreState:"added",interactive:k===w.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:eh,recordingKey:"before"}:null,eW=eH?{rootBox:eH,onBoxClicked:eM,onBoxHovered:ek,selectedNodeId:eu?.id,expandedLayers:eR,ignoreState:"removed",interactive:k===w.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:eh,recordingKey:"after"}:null,ez=!v&&!T;return i.createElement(J.aF,{title:a,onClose:n},i.createElement("div",{className:er.xZ},i.createElement("div",{className:er.f},v&&!T&&i.createElement("div",{className:er.Lq},i.createElement(Y.G,{hasLoadedDiffs:!1})),ez&&i.createElement("div",{className:er.ND},(d||eB)&&i.createElement("div",{className:f()(er._H,"devHandoffLeftPanel")},E&&i.createElement("div",{className:er.b6},i.createElement("div",{className:f()(er.Zl)},(0,C.tx)("collaboration.feedback.compare_changes_modal.history"),(0,h.k)().dt_compare_changes_debug_helpers&&i.createElement(ef,{fileKey:D,setSelectedVersion:E})),i.createElement(ee.aS,{versions:d||[],selectedVersion:g,setVersion:e=>{e.id!==g?.id&&(0,y.sx)("Diff Modal Selected Version Changed",{userId:M,fileKey:D,frameId:r,versionId:e.id}),b.sn.reset("dev_mode.compare_changes.switch_versions",e.id),b.sn.start("dev_mode.compare_changes.switch_versions",{key:e.id}),es(!0),Q&&ei(!1),E(e)}})),i.createElement(W.zg,{changesToDisplay:eU,selectedNode:eu?.id,expandedLayers:eR,setLayerExpanded:eD,onHover:eF,onClick:ex})),i.createElement("div",{className:er.vF},k===w.Ss.SIDE_BY_SIDE&&i.createElement("div",{className:er.m_},i.createElement("div",{className:er.ZJ},l?i.createElement("div",{className:er.K9},i.createElement("div",{className:er.gO},l)):g&&i.createElement(em,{version:g,isSection:ed})),i.createElement("div",{className:er.t4}),i.createElement("div",{className:er.ZJ},c?i.createElement("div",{className:er.K9},i.createElement("div",{className:er.gO},c)):i.createElement("div",{className:er.K9},(0,C.tx)("collaboration.feedback.compare_changes_modal.current_image_header")))),k===w.Ss.SIDE_BY_SIDE&&i.createElement("div",{className:er.Ik},i.createElement(w.qW,{zoomPercentageOptions:en,resetStateOnChangeValue:r,compareThumbnailSource:z.FO.LEGO,zoomOnMousePointer:!0},i.createElement("div",{className:er.bV},eN?i.createElement(et.H1,{value:eK},i.createElement(J.R$,{image:s,view:k,Overlay:et.q1})):i.createElement(J.Qp,null),i.createElement("div",{className:er.mq}),eC?i.createElement(et.H1,{value:eW},i.createElement(J.R$,{image:o,view:k,Overlay:et.q1})):i.createElement(J.Qp,null)),eC&&eO())),k===w.Ss.OVERLAY&&i.createElement("div",{className:er.Ik},i.createElement(w.xY,{zoomPercentageOptions:en,resetStateOnChangeValue:r,zoomOnMousePointer:!0},i.createElement("div",{className:er.Kk},eN?i.createElement(et.H1,{value:eK},i.createElement(J.R$,{image:s,view:k,hideNoImageText:!0,Overlay:et.q1})):i.createElement(J.Qp,null),G&&(eC?i.createElement(et.H1,{value:eW},i.createElement(J.R$,{image:o,view:k,hideNoImageText:!0,opacity:x,Overlay:et.q1})):i.createElement(J.Qp,null))),eC&&i.createElement(w.u,{opacity:x,isAfterImageShown:G,onToggleClick:()=>H(!G),onOpacityChange:e=>V(e.a)}),eC&&eO())),eI&&r&&eV&&i.createElement(ec,{frameId:r,historyFrameId:eV,historySceneGraph:eS,chunkChanges:ey,discreteDiffing:!!I,setChunkChanges:e=>{es(!1),eb(e)}}))),T&&i.createElement("div",{className:er.Q9},(0,C.tx)("collaboration.feedback.compare_changes_modal.error")),i.createElement("div",null)),ez&&(eI?ey&&(0,$.mf)(ey)?i.createElement(j.Ox,{text:(0,C.t)("collaboration.feedback.compare_changes_modal.no_changes")}):i.createElement(eg,{layerChangeNodeId:X,layerBasisNodeId:K,layerBasisSceneGraph:eS,selectedVersion:g||void 0,displayableChanges:eU,showSelectLayerHint:!eu,preferencesApi:R??ew}):i.createElement(j.Ox,{text:""}))))}function eg({layerChangeNodeId:e,layerBasisNodeId:r,layerBasisSceneGraph:n,selectedVersion:a,displayableChanges:o,showSelectLayerHint:s,preferencesApi:l}){return s?i.createElement(j.Ox,{text:(0,C.t)("collaboration.feedback.compare_changes_modal.select_a_layer")}):i.createElement(j.wv,{layerChangeNodeId:e,layerBasisNodeId:r,layerBasisSceneGraph:n,selectedVersion:a,displayableChanges:o,preferencesApi:l})}function ef({fileKey:e,setSelectedVersion:r}){let n=(0,i.useRef)(null),[a,o]=(0,i.useState)("Upload local file");return i.createElement("label",{className:er.$8},a,i.createElement("input",{style:{display:"none"},ref:n,type:"file",accept:".fig",onChange:async()=>{let i=n.current?.files?.[0];if(i&&k.F){let n=await (0,F._)(v.D,(0,h.k)(),k.F,i),a=v.D.getState().mirror.appModel.currentPage,s=`${e}-${a}-debug`;V.Ht.set(s,Promise.resolve({key:s,canvas:n.bytes})),o(i.name),r({id:"debug"})}}}))}(0,H.Ju)(function(e){let{nodeId:r,layerName:n}=e,o=(0,a.wA)(),s=(0,a.d4)(e=>"fullscreen"===e.selectedView.view?e.selectedView.editorType:null),c=(0,a.d4)(e=>e.versionHistory.activeId),{Sprig:p}=(0,S.A)(),m=(0,U.tS)(),h=E.E1()?.toISOString(),g=(0,_.fp)(R.Ib)[1],{versions:f,versionsQueryLoaded:T}=(0,J.DS)(r),w=(0,a.d4)(e=>e.selectedView.compareChangesVersionId??null),A=(0,a.d4)(e=>e.selectedView.compareChangesActivityId??null),N=(0,i.useMemo)(()=>w?f.find(e=>e.id===w)??null:A?f.find(e=>e.dev_mode_activity?.some(e=>e.id===A))??null:null,[f,w,A]),L=i.useCallback(e=>{!e&&(W(void 0),function(e,r,n,i){let a=v.D.getState().selectedView;r(P.$T({...a,compareChangesVersionId:e,filterStatusVersions:n,compareChangesNodeId:void 0,compareChangesActivityId:void 0}))}(e,o,!1,0),c&&c!==V.V_&&(o(D.Y6({mode:u.Oin.KEEP_UI,type:G.lF.SPINNER})),requestAnimationFrame(()=>{o((0,V.Nb)({id:c,nodeId:r??void 0,eventType:"LOAD_NEW_VERSION",versions:f}))}))),e!==w&&(W(void 0),function(e,r){let n=v.D.getState().selectedView;r(P.$T({...n,compareChangesVersionId:e,compareChangesActivityId:void 0}))}(e,o))},[o,w,c,f,r]),[O,k]=(0,_.fp)(V.tP),[F,x]=i.useState(!0),[B,H]=i.useState(!1),[K,W]=i.useState(void 0),z=void 0!==K,[$,Y]=i.useState(void 0),j=void 0!==$,X=(0,J.t$)(N,r);i.useEffect(()=>{if(!F||!z||!j||!T)return;x(!1);let e=b.sn.tryStop("dev_handoff.view_history",r);e&&(0,y.sx)("dev_handoff.view_history",{elapsedMs:e,origin:"cc_versions"},{forwardToDatadog:!0}),p("track","open_compare_changes",{origin:"cc_versions"})},[p,F,z,j,T,r]);let Z=(0,q.P)();i.useEffect(()=>{if(Z&&T){if(N){w||L(N.id);return}if(0===f.length){W(null),L(void 0);return}if(h){for(let e of f)if(e.lastViewed){L(e?.id);return}}L(f[0]?.id)}},[Z,h,A,N,w,L,f,T]),i.useEffect(()=>{if(X||!N)return;let e=performance.now();V._t(N,r)?.then(({canvas:r,key:n})=>{let i=performance.now();if(n===O)return;if(!u.glU.loadPartialHistoryScene(r))throw Error("Error loading history canvas");k(n);let a=performance.now(),o=Math.trunc(i-e),s=Math.trunc(a-i);y.sx("version_diffing_performance_metrics",{name:"historic_nodes_load_time",fileKey:m,fetchBytesDurationMs:o,loadNodesDurationMs:s,canvasBytesLength:r.byteLength,fetchMode:"node",entrypoint:"lego_layer"})}).catch(e=>{I.$D(l.e.DEVELOPER_TOOLS,Error(`Error fetching history canvas: ${e}`)),V.w_(N),H(!0)})},[X,N,O,k,s,m,r]),i.useEffect(()=>{let e=setTimeout(()=>{if(!X){W(void 0);return}W(ep({nodeId:r,documentIndex:d.x1,showError:()=>{W(null)}}))},J._W);return()=>clearTimeout(e)},[r,N,X]),i.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{Y(void 0),(0,I.$D)(l.e.DEVELOPER_TOOLS,Error("Current image loading error")),H(!0)},n=ep({nodeId:r,showError:e});if(!n){e();return}Y(n)},J._W);return()=>clearTimeout(e)},[r]);let Q=i.useCallback(()=>{g(new Map),L(void 0),o(M.Ce())},[g,L,o]);return i.createElement(e_,{currentImage:$,historicImage:K,modalError:B,modalTitle:n?(0,C.t)("collaboration.feedback.compare_changes_modal.layer_name_header",{layerName:n}):(0,C.t)("collaboration.feedback.compare_changes_modal.header"),nodeId:r,onCloseModal:Q,origin:"cc_versions",renderLoadingBar:F,selectedVersion:N,setSelectedVersion:e=>{L(e.id)},versions:f})},X.mH,H.ZU.YES),(0,H.Ju)(function(e){let{nodeId:r,detachedInfoStatus:n,origin:o}=e,s=(0,a.wA)(),{Sprig:l}=(0,S.A)(),[d,h]=i.useState(!0),[_,g]=i.useState(!1),[f,E]=i.useState(void 0),[v,T]=i.useState(void 0),I=void 0!==f,w=void 0!==v,A="loaded"===n.status,N=A?n.result:void 0;i.useEffect(()=>{if(!d||!I||!w||!A)return;h(!1);let e=b.sn.tryStop("dev_handoff.view_history",r);e&&(0,y.sx)("dev_handoff.view_history",{elapsedMs:e,origin:o},{forwardToDatadog:!0}),l("track","open_compare_changes",{origin:"cc_detached_component"})},[l,d,I,w,r,A,o]),i.useEffect(()=>{let e=setTimeout(()=>{if(!A||!N?.dataComponentId){E(void 0);return}E(ep({nodeId:N?.dataComponentId,detachedComponentsScene:N?.dataLocation==="temp-scene",showError:()=>{E(null)}}))},J._W);return()=>clearTimeout(e)},[A,N]),i.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{T(void 0),g(!0)},n=ep({nodeId:r,showError:e});if(!n){e();return}T(n)},J._W);return()=>clearTimeout(e)},[r]);let L=i.useCallback(()=>{s(M.Ce())},[s]),O=(0,C.t)("collaboration.feedback.compare_changes_modal.header"),R=(0,C.tx)("inspect_panel.node_type.main_component"),P={nodeId:N?.dataComponentId??p.AD,sceneGraph:new m.qo(N?.dataLocation==="temp-scene"?u.juq.DETACHED_COMPONENTS:c.G)};return i.createElement(e_,{nodeId:r,onCloseModal:L,modalTitle:O,currentImage:v,historicImage:f,historicHeader:R,renderLoadingBar:d,modalError:_,discreteDiffingInput:P})},X.dF,H.ZU.YES),(0,H.Ju)(function(e){let{changeNodeId:r,basisNodeId:n,initialSelectedNodeId:o,isComparingOverrides:s=!1}=e,l=(0,a.wA)(),{Sprig:d}=(0,S.A)(),u=eu(r),p=eu(n),[h,_]=i.useState(!1),[g,f]=i.useState(void 0),[E,v]=i.useState(void 0),T=void 0!==g,I=void 0!==E;i.useEffect(()=>{if(!T||!I)return;let e=b.sn.tryStop("dev_handoff.view_history",r),n=s?"cc_overrides":"cc_nodes";e&&(0,y.sx)("dev_handoff.view_history",{elapsedMs:e,origin:n},{forwardToDatadog:!0}),d("track","open_compare_changes",{origin:n})},[d,s,T,I,r]),i.useEffect(()=>{f(ep({nodeId:n,showError:()=>f(null)}))},[n]),i.useEffect(()=>{let e=()=>{v(void 0),_(!0)},n=ep({nodeId:r,showError:e});if(!n){e();return}v(n)},[r]);let w=i.useCallback(()=>{l(M.Ce())},[l]),A=(0,C.t)("collaboration.feedback.compare_changes_modal.header"),N={nodeId:n,sceneGraph:new m.qo(c.G)};return u.node&&p.node?i.createElement(e_,{currentHeader:ed(u.node,u.backingSymbolData),currentImage:E,discreteDiffingInput:N,historicHeader:ed(p.node,p.backingSymbolData),historicImage:g,initialSelectedNodeId:o,modalError:h,modalTitle:A,nodeId:r,onCloseModal:w,renderLoadingBar:!1}):null},X.Dx,H.ZU.YES)},756462:(e,r,n)=>{n.d(r,{Ec:()=>U});var i=n(848318),a=n(716544);n(741419);var o=n(536384),s=n.n(o),l=n(579020),c=n(654104),d=n(983229),u=n(166365),p=n(442313),m=n(500276),h=n(449502);n(235441);var _=n(754823);n(992444);var g=n(489689),f=n(376780),E=n(790663),y=n(110712);let b="hyperlink_popup--icon--7YW8G",v="hyperlink_popup--inlineText--U1QY9",T="hyperlink_popup--path--UM5d- hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",I="hyperlink_popup--text--kzWyq hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",S="hyperlink_popup--clickable--VAzTE",w="hyperlink_popup--divider--NSUKF",A="hyperlink_popup--open--EsmHi",C="hyperlink_popup--edit--Q80cZ";var N=n(353951),L=n(801573),O=n(333261),R=n(666535),P=n(335158),D=n(690738),M=n(517886),k=n(268295),F=n(51002);function x(e){let r,n,o;let x=(0,a.wA)(),U=r=>{x((0,h.RK)({rawInput:e.urlString,event:r})),e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup()},B=r=>{e.data.type===y.F.MAILTO||e.data.type===y.F.TEL?(0,E.UA)(x,e.data.url.pathname,"HyperlinkPopup"):console.error("We don't yet enable copy for other hyperlinks"),e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup(),r.stopPropagation()},V=r=>{e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup(),e.showHyperlinkEditor(),(0,l.sx)("Show Hyperlink Editor",{source:"HyperlinkPopup"}),r.stopPropagation()},G=r=>{(e.data.type===y.F.GENERIC||e.data.type===y.F.FIGMA_FILE||e.data.type===y.F.FIGMA_PROTOTYPE||e.data.type===y.F.FIGMA_VERSION)&&e.getLinkMetadata&&x(e.getLinkMetadata({clipboardText:e.data.url.toString(),url:e.data.url.toString(),isTextIframe:!1,entrypoint:_.WJ.MODAL}))},H=r=>{e.data.type===y.F.MAILTO||e.data.type===y.F.TEL?B(r):U(r)},{data:K}=e;switch(K.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:case y.F.FIGMA_VERSION:let W=K.url.host.replace(/http(s)?(:)?(\/\/)?|(\/\/)?(www\.)?/,""),z=K.url.pathname+K.url.search+K.url.hash,$=z.split(/\//),Y="design"===$[1]||"board"===$[1]||"proto"===$[1],j="board"===$[1];switch(K.type){case y.F.GENERIC:n=D.A;break;case y.F.FIGMA_FILE:case y.F.FIGMA_VERSION:n=Y?j?N.A:O.A:D.A;break;case y.F.FIGMA_PROTOTYPE:n=k.A}if((0,g.F4)(K.url.host)&&Y&&$[2]&&$[3]){let e=K.url.pathname.split(/\//)[3];if(e)try{o=decodeURI(e).replace(/-/g," ")}catch(e){}}r=o?i.createElement("div",{className:I},o):i.createElement(i.Fragment,null,i.createElement("div",{className:"hyperlink_popup--domain--k0xkl hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9"},W),z&&"/"!==z&&i.createElement("div",{className:T},z));break;case y.F.PAGE:n=R.A,r=i.createElement("div",{className:I},K.text);break;case y.F.FRAME:let q=K.text;q&&e.editorType===f._Y.SITES&&(q="/"===q?(0,p.t)("sites.panel.home"):q),n=P.A,r=i.createElement(i.Fragment,null,i.createElement("div",{className:I},q),K.secondaryText&&i.createElement("div",{className:"hyperlink_popup--secondaryText--bLzWO hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9"},i.createElement(u.B,{className:"hyperlink_popup--pageSeparator--SAx-p",svg:L.A}),K.secondaryText));break;case y.F.INVALID:n=D.A,r=i.createElement("div",{className:I},(0,p.tx)("hyperlink.invalid_link",{link:K.urlString}));break;case y.F.MISSING:case y.F.NOT_LOADED:n=D.A,r=i.createElement("div",{className:I},K.text);break;case y.F.MAILTO:r=i.createElement("div",{className:T},K.url.pathname),n=M.A;break;case y.F.TEL:n=F.A,r=i.createElement("div",{className:T},K.url.pathname)}let X=e.canEdit,Z=e.canEdit&&(K.type===y.F.GENERIC||K.type===y.F.FIGMA_FILE||K.type===y.F.FIGMA_VERSION||K.type===y.F.FIGMA_PROTOTYPE),J=function(){switch(e.data.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return(0,p.t)("hyperlink.prefix.open");case y.F.FIGMA_VERSION:return(0,p.t)("hyperlink.prefix.open_past_version");case y.F.PAGE:case y.F.FRAME:return(0,p.t)("hyperlink.prefix.go_to");case y.F.MAILTO:case y.F.TEL:return(0,p.t)("hyperlink.prefix.email");case y.F.INVALID:case y.F.MISSING:case y.F.NOT_LOADED:return null}}(),Q=(()=>{switch(e.data.type){case y.F.MAILTO:return(0,p.t)("hyperlink.send_mail");case y.F.TEL:return(0,p.t)("hyperlink.call_telephone");default:return null}})(),ee=(()=>{if(e.editorType===f._Y.SITES)switch(e.data.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return(0,p.tx)("hyperlink.prefix.open")}return i.createElement(i.Fragment,null,J?i.createElement("span",{className:v},J," "):null,r)})(),et=(r,a)=>i.createElement(d.GG,{type:"button",className:s()({[S]:r,[A]:!r}),onAuxClick:H,onMouseDown:H,recordingKey:e.recordingKey},r&&i.createElement(u.B,{className:b,style:m.sx.if(n===N.A,m.sx.add({transform:"rotate(90deg)"})).$,svg:n}),a),er=i.createElement(d.GG,{type:"button",className:`${A} ${S}`,onAuxClick:U,onMouseDown:U,recordingKey:c.Pt(e,"secondaryButton")},Q),en=(r,n)=>i.createElement(d.GG,{type:"button",recordingKey:c.Pt(e,"editHyperlinkPopup"),className:s()({[C]:!r,"hyperlink_popup--editContainer--W1EMp":r,[S]:r}),onMouseDown:V},r&&i.createElement(i.Fragment,null,i.createElement(u.B,{className:b,svg:D.A}),i.createElement("div",{className:s()(v,"hyperlink_popup--editText--IGsdw")},(0,p.tx)("hyperlink.edit"))),n);return i.createElement("div",{className:"hyperlink_popup--popup--fByJA _overlayBase--_overlayBase--Rkj8l",onMouseEnter:()=>{e.onMouseEnter&&e.onMouseEnter()}},(()=>{switch(e.editorType){case f._Y.SITES:switch(K.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return i.createElement(i.Fragment,null,X&&i.createElement(i.Fragment,null,en(!0,r),i.createElement("div",{className:w})),et(!1,ee));default:return i.createElement(i.Fragment,null,et(!0,ee),X&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),en(!1,(0,p.tx)("hyperlink.edit"))))}case f._Y.WHITEBOARD:return i.createElement(i.Fragment,null,et(!0,ee),X&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),en(!1,(0,p.tx)("hyperlink.edit"))),Z&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),i.createElement(d.D8,{dataTestId:"hyperlink.preview",role:"button",recordingKey:c.Pt(e,"unfurlHyperlinkPopup"),className:C,onMouseDown:G},(0,p.tx)("hyperlink.create_preview"))));default:return i.createElement(i.Fragment,null,et(!0,ee),Q&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),er),X&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),en(!1,(0,p.tx)("hyperlink.edit"))))}})())}function U(e){let{data:r,editorType:n,urlString:a,canEdit:o,onMouseEnter:s,immediatelyDismissHyperlinkPopup:l,getLinkMetadata:c,showHyperlinkEditor:d}=e;return i.createElement(x,{data:r,editorType:n,urlString:a,canEdit:o,recordingKey:"hyperlinkPopup",onMouseEnter:s,immediatelyDismissHyperlinkPopup:l,getLinkMetadata:c,showHyperlinkEditor:d})}},303703:(e,r,n)=>{n.d(r,{Jq:()=>u});var i=n(848318),a=n(536384),o=n.n(a),s=n(654104),l=n(507152),c=n(61674);let d=(0,l.g)();var u=(e=>(e.ESSENTIAL="essential",e.TOOLS="tools",e.VIEW="view",e.ZOOM="zoom",e.TEXT="text",e.SHAPE="shape",e.SELECT="select",e.CURSOR="cursor",e.EDIT="edit",e.COPY="copy",e.TRANSFORM="transform",e.ARRANGE="arrange",e.COMPONENTS="components",e.ADVANCED="advanced",e.ACCESSIBILITY="accessibility",e))(u||{});i.forwardRef((e,r)=>{let{tabInfo:n,completedTabs:a,onNavClick:o}=e;return i.createElement(i.Fragment,null,n.map((s,l)=>i.createElement(p,{key:s.id,tabInfo:n,completedTabs:a,onNavClick:o,recordingKey:e.recordingKey,tab:s,index:l,ref:r})))});let p=i.forwardRef((e,r)=>{let{tab:n,index:a,onNavClick:l,completedTabs:u}=e,p=s.rf(s.Pt(e,n.id),"click",e=>{l(n.id)});return void 0!==n.active?i.createElement("div",{key:n.id,ref:e=>{r.current||(r.current=[]),r.current[a]=e},"aria-controls":d,"aria-selected":n.active,className:n.className,"data-completed":u[n.id],id:n.id,onClick:p,role:"tab",tabIndex:-1},n.displayName):i.createElement("div",{key:n.id,className:o()(n.className,c.GM)})})},373072:(e,r,n)=>{n(157907),n(727341),n(326971),n(369600),n(87089),n(661780),n(252244),n(121284);var i=(e=>(e.FILE_LOADING="fileLoading",e.K_12="k12",e.READ_ONLY="readOnly",e.PERSONAL_DRAFT="personalDraft",e))(i||{}),a=(e=>(e.ADD_PAGE="addPage",e.VIEW_PAGES="viewPages",e))(a||{})},458248:(e,r,n)=>{n.d(r,{k:()=>i}),n(848318),n(716544),n(536384),n(727341),n(51910),n(315227),n(252244),n(362201),n(27776);let i="left-panel-container"},252244:(e,r,n)=>{n.d(r,{Ye:()=>u,n0:()=>p}),n(848318),n(716544);var i=n(741419);n(673906),n(179703);var a=n(39773);n(579020),n(463117),n(397579),n(209075),n(963376),n(442313),n(697714);var o=n(727341);n(697751),n(992444),n(577023);var s=n(387819);n(449977);var l=n(51910);n(169320);var c=n(792478),d=n(207715);function u(){let e=(0,o.GS)(),r=!(0,d.ut)(i.Ez5?.editorPreferences()?.showSidebar,s.R.showSidebar),n=(0,d.ut)(i.Ez5?.uiState()?.leftPanelCollapsedUI3,!s.R.showSidebar);return e?n:r}function p(){return(0,l.p8)("pagesList")}n(764016),n(948550),(0,a.Iz)(e=>(0,c.Wh)(()=>(0,a.eU)(e)))},542468:(e,r,n)=>{n.d(r,{j:()=>m});var i=n(848318),a=n(741419),o=n(921494),s=n(182059),l=n(442313),c=n(769615),d=n(184637);let u=s.ms,p=s.c$,m="component-insert-leaf-context-menu";i.memo(function(){let{dropdownShown:e,defaultLibraryKeys:r,openFileKey:n}=(0,o.R)(e=>({dropdownShown:e.dropdownShown,defaultLibraryKeys:e.library.defaultPublished.libraryKeys,openFileKey:e.openFile?.key||null})),s=e?.data?.component,h=s?.file_key===n,_=(0,c.b)({libraryKey:s?.library_key,nodeId:s?.node_id});if(!e||e.type!==m||!s||r.includes(s.library_key))return null;let g=_.data;return h||g?.link?i.createElement(u,{className:d.H,style:e.data.position},h?i.createElement(p,{recordingKey:`goToLocalComponent.${s.node_id}`,onClick:()=>a.glU.goToSymbolOrStateGroupById(s.node_id,!1)},(0,l.tx)("design_systems.instance_swap_picker.go_to_main_component")):i.createElement(p,{recordingKey:`goToSubscribedComponent.${s.node_id}`,href:g?.link,target:"_blank"},(0,l.tx)("design_systems.instance_swap_picker.go_to_main_component"))):null})},606261:(e,r,n)=>{n.d(r,{I1:()=>C,RG:()=>P,cY:()=>L,dL:()=>M,jz:()=>F,pz:()=>O,yP:()=>R});var i=n(573446),a=n(39773),o=n(239910),s=n.n(o),l=n(195507),c=n(303035),d=n(457040),u=n(852338),p=n(967867),m=n(458151),h=n(92537),_=n(698397),g=n(772530),f=n(427748),E=n(588471),y=n(169794),b=n(369600),v=n(119310),T=n(635547),I=n(710665),S=n(264917),w=n(922030),A=n(931516);let C=(0,a.eU)(e=>{let r=e(b.yV);if(!r)return(0,l.Xm)();let n=r.parentOrgId,i=!!r.teamId,a=(0,h.T9)(r?.project),o=e(T.DtB.Query({fileKey:r.key??"",teamId:r.teamId??"-1",workspaceId:r.team?.workspaceId??null,orgId:n,group:(0,m.M)()??null})),s=e(p.JB),c=e(w.Me),d=(0,I.w5)(c);return(0,S.gM)(o,i,a,s,n,d)}),N=(0,a.Iz)(e=>(0,a.mg)(C,r=>new Set(r.data?.map(r=>r[e])),d.yZ)),L=e=>N(e),O=(0,v.OX)(A.o.LIBRARY,"SET_LIBRARY_PUBLISHING_MODE"),R=(0,v.bt)(e=>e.openFile?.publishedHubFile?.id),P=(0,v.bt)(e=>e.openFile?.publishedHubFile?.libraryKey?(0,i.l)(e.openFile.publishedHubFile.libraryKey):null),D=(0,v.bt)(e=>e.openFile?.editorType),M=(0,a.eU)(null),k=(e,r)=>r,F=(()=>{let e=(0,a.M2)((0,a.eU)(e=>{let r=e(R),n=e(D),i={variableSets:{},variables:{},styles:{},components:{},stateGroups:{},modules:{}};if(!r||!(0,u.DU)(n??void 0))return i;let a=e(T.vsj.Query({hubFileId:r})),o=(0,_.J)(a),l=(0,f.o)(a),c=e(T.Acj.Query({hubFileId:r})),d=(0,E.F)(c),p=e(T.eHy.Query({hubFileId:r})),m=(0,y.kX)({type:"community",value:p},!0),h=(0,y.cM)({type:"community",value:p},!0),b=e(T.CfA.Query({hubFileId:r})),v=(0,g.i)(b);return i.variables=s()(h,"node_id"),i.variableSets=s()(m,"node_id"),i.styles=s()(d,"node_id"),i.components=s()(o,"node_id"),i.stateGroups=s()(l,"node_id"),i.modules=s()(v,"node_id"),i},c.lQ)),r=(0,v.Pj)(e,"SET_OPEN_HUB_FILE_PUBLISHED_LIVEGRAPH",{variableSets:{},variables:{},styles:{},components:{},stateGroups:{},modules:{}}),n=(0,a.FZ)(r,k);return(0,v.S9)(n,r.reducer)})()},546514:(e,r,n)=>{n.d(r,{E1:()=>y,aU:()=>E});var i=n(848318),a=n(716544),o=n(579020),s=n(730169),l=n(175196),c=n(792647),d=n(197945),u=n(71358),p=n(992444),m=n(964e3),h=n(369600),_=n(56325),g=n(314916);let f=e=>!!e.isNewAssetsPanel;function E(e){let{isVisible:r,query:n,placeholder:c,onChange:E,className:y,extraSpacing:b,hideXIcon:v,hideSearchIcon:T,isFigjam:I,isLibraryModalUi3:S,autofocus:w,selectOnFocus:A,entryPointForTracking:C,forwardedRef:N,recordingKey:L}=e,O=(0,a.wA)(),R=(0,h.q5)(),P=(0,a.d4)(e=>e.search.sessionId),D=(0,_.k)(),M=i.useRef(null),k=function({isVisible:e,autofocus:r,selectOnFocus:n,ref:a}){return i.useCallback(()=>{a?.current&&e&&r&&a.current.focus(n)},[r,e,a,n])}({isVisible:r,autofocus:w,selectOnFocus:A,ref:M}),F=i.useCallback(e=>!!(e.altKey&&p.Y5.isReady())&&(0,m.f7)(e,!0),[]);(0,s.h)(()=>{function e(){O(u.ky())}return k(),e(),e});let x=i.useCallback(()=>{"editor:assets_panel"===C&&o.az.trackDefinedEvent("assets_panel.search_cleared",{searchQuery:n,assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)?e.onClearSearch():E(""),O(u.ky())},[C,e,O,n,D,R?.key,R?.teamId,R?.parentOrgId,E]),U=i.useCallback(e=>{C&&(""===e&&P?O(u.ky()):""===e||P||O(u.Dy({entryPoint:C})),E(e))},[O,C,P,E]),B=i.useCallback(()=>{""===n||P||O(u.Dy({entryPoint:C})),"editor:assets_panel"===C&&o.az.trackDefinedEvent("assets_panel.search_focused",{assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)&&e.onFocus()},[C,R?.key,R?.parentOrgId,R?.teamId,e,D,P,O,n]),V=i.useCallback(()=>{"editor:assets_panel"===C&&o.az.trackDefinedEvent("assets_panel.search_unfocused",{assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)&&e.onBlur()},[C,R?.key,R?.parentOrgId,R?.teamId,e,D]);return I||S?i.createElement(d.IW,{ref:(0,l.A)(M,N),className:y,clearSearch:x,focusOnMount:!1,hideXIcon:v,isKeyDownHandled:F,onBlur:V,onChange:U,onFocus:B,placeholder:c,query:n,recordingKey:L,withUI3Icon:S}):f(e)?i.createElement(g.K,{ref:(0,l.A)(M,N),clearSearch:x,focusOnMount:!1,isKeyDownHandled:F,onBlur:V,onChange:U,onFocus:B,placeholder:e.placeholder,query:n,recordingKey:L}):i.createElement(d.Lp,{ref:(0,l.A)(M,N),className:y,clearSearch:x,dataTestId:"asset-panel-search-bar-input",extraSpacing:b,focusOnMount:!1,hideSearchIcon:T,hideXIcon:v,isKeyDownHandled:F,onBlur:V,onChange:U,onFocus:B,placeholder:c,query:n,recordingKey:L})}function y({autofocus:e,className:r,column:n,extraSpacing:a,hideSearchIcon:o,hideXIcon:d,isFigjam:u,isVisible:p,onChange:m,path:h,placeholder:_,query:g,recordingKey:f,selectOnFocus:y,entryPointForTracking:b,forwardedRef:v,...T}){let I=i.useRef(null),S=i.useCallback(()=>{y&&I.current?.select()},[y]),{setKeyboardNavigationElement:w}=(0,c.M3)({path:h,column:n,disabled:!p,onFocus:S});return(0,s.h)(()=>{I.current&&w?.(I.current.searchInput)}),i.createElement(E,{autofocus:e,className:r,entryPointForTracking:b,extraSpacing:a,forwardedRef:(0,l.A)(I,v),hideSearchIcon:o,hideXIcon:d,isFigjam:u,isVisible:p,onChange:m,placeholder:_,query:g,recordingKey:f,selectOnFocus:y,setKeyboardNavigationElement:w,...T})}},259424:(e,r,n)=>{n.d(r,{PI:()=>l,rp:()=>s});var i=n(818754),a=n(931516),o=n(475869);(0,i.hG)(o.ZV),(0,i.hG)(o.FX);var s=(e=>(e.WIDE="WIDE",e.SMALL="SMALL",e.NORMAL="NORMAL",e.THIN="THIN",e))(s||{});function l(e,r){let n=!0,i=!0;for(let r of e){let e,o;if(r.type!==a.PW.STYLE){if("min_node_width"in r)e=r.min_node_width,o=r.min_node_height;else{if(!("width"in r))continue;e=r.width,o=r.height}if(!e||!o)return"NORMAL";if(e<3*o&&(n=!1),(e>64||o>64)&&(i=!1),!n&&!i)break}}return n?"WIDE":i&&!r?"SMALL":"NORMAL"}},277253:(e,r,n)=>{n.d(r,{I:()=>i});var i=(e=>(e.ALL="all",e.RECENT="recent",e.LOCAL="local",e.FILE="file",e.SITE_KIT="site kit",e))(i||{})},552127:(e,r,n)=>{n.d(r,{DG:()=>a}),n(848318);var i=n(171659);function a(e,r){null!==i.x4&&i.x4.setItem(`library-section-expanded-${e}`,JSON.stringify(r))}},897875:(e,r,n)=>{n.d(r,{J:()=>l});var i=n(848318),a=n(716544),o=n(449737);n(778727),n(747314),n(931516);var s=n(38348);function l(e,r,n){let l=(0,a.wA)(),c=(0,a.d4)(e=>e.modalShown);return i.useCallback(()=>{c?.type===s.V&&c?.data&&l(o.hm({data:{...c?.data,asset:e,sectionPosition:r,sectionNameForTracking:n},type:s.V}))},[e,l,c,r,n])}},342887:(e,r,n)=>{n.d(r,{$1:()=>b,ND:()=>y,cx:()=>A,mZ:()=>f,oV:()=>I});var i=n(848318);n(716544);var a=n(425642),o=n(573446),s=n(39773);n(579020);var l=n(303035),c=n(896966);n(721271);var d=n(727341),u=n(574146);n(342431);var p=n(345146);n(369600);var m=n(870769);n(405888),n(24158);var h=n(931516),_=n(853833),g=n(53818);n(56325);let f="assets-panel",E=[];function y(e,r,n){let i=(0,u.y3)(e),a=[],o=[],s=[],l=n?Object.values(n):[],c=0,d=0,p=new Set;if(r)for(let e of Object.keys(r)){let n=r[e],i=n.containing_frame?.containingStateGroup?.nodeId;i&&n.old_key&&p.add(i)}for(let e of i)if(e.deletedFromSceneGraph||(a.push(e),e.status===h.E8.NOT_STAGED||e.status===h.E8.DELETED?s.push(e):o.push(e)),(0,u.UB)(e.status)&&d++,e.status!==h.E8.CURRENT&&e.status!==h.E8.NOT_STAGED||(e.type===h.PW.COMPONENT||e.type===h.PW.STATE_GROUP)&&(0,m.Hb)(e.status)&&e.old_key||e.type===h.PW.STATE_GROUP&&(0,m.Hb)(e.status)&&p.has(e.node_id)){c++;continue}return{allItems:a,publishedItems:o,privateItems:s,erroneousItems:l,numUpdates:c,numPublished:d}}function b({library:e,fileDataByLibraryKey:r}){let n=T({itemsByTeamId:e.publishedByLibraryKey.stateGroups,fileDataByLibraryKey:r}),a=function({library:e,fileDataByLibraryKey:r}){return T({itemsByTeamId:e.publishedByLibraryKey.components,fileDataByLibraryKey:r,predicate:v})}({library:e,fileDataByLibraryKey:r});return(0,i.useMemo)(()=>{let e={},r={};for(let n of a.subscribedFiles){if(!n.library_key)continue;let i=(0,o.l)(n.library_key);e[i]=n,r[i]=(r[i]||[]).concat(a.libraryKeyToSubscribedItems[i]??[])}for(let i of n.subscribedFiles){if(!i.library_key)continue;let a=(0,o.l)(i.library_key);e[a]=i,r[a]=(r[a]||[]).concat(n.libraryKeyToSubscribedItems[a]??[])}return{subscribedFiles:Object.values(e),libraryKeyToSubscribedItems:r}},[a,n])}(0,g.n)((e,r)=>{let n=y((0,u.Jl)(e)),i=y(r,e);return{allItems:[].concat(n.allItems,i.allItems),publishedItems:[].concat(n.publishedItems,i.publishedItems),privateItems:[].concat(n.privateItems,i.privateItems),erroneousItems:[].concat(n.erroneousItems,i.erroneousItems),numUpdates:n.numUpdates+i.numUpdates,numPublished:n.numPublished+i.numPublished}});let v=e=>e.containing_frame?.containingStateGroup==null;function T({itemsByTeamId:e,fileDataByLibraryKey:r,predicate:n=l.af}){let s=(0,m.fc)();return(0,i.useMemo)(()=>{let i=Object.create(null);for(let a in e){let l=e[a];for(let e in l){let a=(0,o.l)(e),c=r[a];if(!c||!s((0,o.l)(c.library_key)))continue;let d=[],u=l[a];for(let e in u){let r=u[e];r&&n(r)&&d.push(r)}d.length>0&&(i[a]=d)}}let l=[];return Object.keys(i).forEach(e=>{let n=r[(0,o.l)(e)];n&&l.push(n)}),(0,a.KQ)(l,"name"),{libraryKeyToSubscribedItems:i,subscribedFiles:l}},[e,r,n,s])}function I({library:e,hubFilesByLibraryKey:r,visualAssetLibraryKeys:n=E}){let a=S({itemsByTeamId:e.publishedByLibraryKey.stateGroups,hubFilesByLibraryKey:r,visualAssetLibraryKeys:n}),s=S({itemsByTeamId:e.publishedByLibraryKey.components,hubFilesByLibraryKey:r,visualAssetLibraryKeys:n});return(0,i.useMemo)(()=>{let e={},r={};for(let n of[s,a])for(let i of n.subscribedHubFiles){if(!i.library_key){(0,c.x1)("library key","Hub file unexpectedly has no library key",{hubFileId:i.id});continue}let a=(0,o.l)(i.library_key);e[a]=i,r[a]=(r[a]||[]).concat(n.libraryKeyToSubscribedItems[a]??[])}return{subscribedHubFiles:Object.values(e),libraryKeyToSubscribedItems:r}},[a,s])}function S({itemsByTeamId:e,hubFilesByLibraryKey:r,visualAssetLibraryKeys:n=E}){let s=(0,m.fc)();return(0,i.useMemo)(()=>{let i={};for(let a in e){let l=e[a];for(let e in l){let a=(0,o.l)(e),c=r[a],d=n.includes(a);if(!c||!s((0,o.l)(c.library_key))&&!d)continue;let u=[],p=l[a];for(let e in p){let r=p[e];r&&!(r?.type===h.PW.COMPONENT&&r?.containing_frame?.containingStateGroup)&&u.push(r)}u.length>0&&(i[a]=u)}}let l=Object.keys(i).map(e=>r[e]);return(0,a.v7)(l,e=>e.versions[e.current_hub_file_version_id]?.name),{libraryKeyToSubscribedItems:i,subscribedHubFiles:l}},[e,r,n,s])}var w=(e=>(e[e.Grid=0]="Grid",e[e.List=1]="List",e))(w||{});function A(e){let r=(0,d.GS)(),n=(0,s.md)(_.TG);return!!e&&(!!(0,h.Do)(e)||e.type===h.PW.MODULE||(e.type===h.PW.COMPONENT||e.type===h.PW.STATE_GROUP)&&(r||(0,p.o)(e,n)))}},643231:(e,r,n)=>{n.d(r,{Ee:()=>O,N2:()=>L});var i=n(848318),a=n(792978),o=n(356505),s=n(423526),l=n(233162),c=n(536384),d=n.n(c),u=n(654104),p=n(983229),m=n(792647),h=n(566699),_=n(17755),g=n(442313);n(386117);var f=n(727341);n(665549);var E=n(797952);n(114912),n(482821);var y=n(931516),b=n(432676);n(579020),n(730169),n(402110),n(369600),n(273121),n(342887);var v=n(882820);n(889386);let T="empty_states--emptyStateContent--i0Ad8",I="empty_states--emptyStateIcon--kLLCD",S="empty_states--emptyStateIconWrapper--SHUbu",w="empty_states--emptyStateText--gZR-A";var A=n(136271),C=n(623519),N=n(773612);function L(e,r){return e?r?b.r6.BROWSE_LIBRARIES_ACTIONS:b.r6.BROWSE_LIBRARIES_ASSETS_PANEL:r?b.r6.ACTIONS_EXPLORE_LIBRARIES_LINK:b.r6.ASSETS_PANEL_EXPLORE_LIBRARIES_LINK}function O({onClickExplore:e,width_ui3:r,fromActionsModal:n,bgTransparentUI3:a=!1}){let o=(0,f.GS)(),s=i.useMemo(()=>L(o,!!n),[n,o]),{onToggleLibraryModal:l}=(0,E.u)({entrypoint:s,modalType:"editor",initialTab:y.Wv.TEAM_LIBRARIES}),c=i.useCallback(()=>{e?.(),l()},[e,l]);return o?i.createElement(R,{onClick:c,width:r,bgTransparent:a,fromActionsModal:!!n}):i.createElement(P,{onClick:c})}function R({onClick:e,width:r,bgTransparent:n=!1,fromActionsModal:l}){let{setKeyboardNavigationElement:c}=(0,m.M3)({path:[v.ON.CONTENTS,v.zr.CTA],disabled:l});return i.createElement("div",{className:d()("empty_states--ui3EmptyState--8bWkh",_.s.if(n,_.s.bgTransparent,_.s.colorBgSecondary).$),style:{width:r},"data-testid":"empty-state-assets-ui3"},i.createElement("div",{className:"empty_states--ui3LibraryIcon--56jRu"},i.createElement(s.l,null)),i.createElement("div",{className:"empty_states--ui3EmptyStateTitle--UwoAZ"},(0,g.tx)("design_systems.assets_panel.empty_state_title_ui3")),i.createElement("div",null,i.createElement("div",{className:"empty_states--ui3EmptyStateSubtitle---Yamk"},(0,g.tx)("design_systems.assets_panel.empty_state_subtitle_ui3")),i.createElement(a.N,{newTab:!0,trusted:!0,href:"https://help.figma.com/hc/articles/360038662654"},(0,g.tx)("design_systems.assets_panel.learn_more"))),i.createElement(o.$n,{onClick:e,recordingKey:u.Pt("assetsEmptyState","exploreLibraries"),ref:c},(0,g.tx)("design_systems.assets_panel.empty_state_cta_ui3")))}function P({onClick:e}){return i.createElement("div",{className:"empty_states--emptyState--ZaBY3 text--fontPos11--2LvXf text--_fontBase--QdLsd","data-testid":"empty-state-assets-ui2"},i.createElement("div",{className:"empty_states--emptyStateTitle--TWkpO text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,g.tx)("design_systems.assets_panel.components")),i.createElement("div",{className:T},i.createElement(h.U,{className:I,svg:A.A},i.createElement("div",{className:S},i.createElement(l.P,null))),i.createElement("div",{className:w},(0,g.tx)("design_systems.assets_panel.create_a_component")," ",i.createElement(a.N,{newTab:!0,trusted:!0,href:"https://help.figma.com/hc/articles/360038662654"},(0,g.tx)("design_systems.assets_panel.learn_more")))),i.createElement("div",{className:T},i.createElement(h.U,{className:I,svg:C.A,fallbackSvg:N.A},i.createElement("div",{className:S},i.createElement(s.l,null))),i.createElement("div",{className:w},i.createElement(p.GG,{className:"empty_states--link--kfp3o blue_link--blueLink--9rlnd",onClick:e,recordingKey:u.Pt("assetsEmptyState","exploreLibraries")},(0,g.tx)("design_systems.assets_panel.explore_libraries")))))}},658067:(e,r,n)=>{n.d(r,{VL:()=>i}),n(425642),n(157907),n(442313),n(668515),n(345146),n(870769),n(881473),n(931516),n(342887);let i="0:1";function a(e,r,n){sortAlphabeticallyOrPrioritizeExamplesByFn(r,{sortFn:e=>e.name,priorityFn:e=>isExampleAsset(e,{isPreset:n?.isPreset??!1})});let i=Object.create(null);for(let n of r){let r=getNameParts(n.name),a="";for(let o=0;o<r.length;o++){let s;let l=r[o],c=a,d=o<r.length-1;if(a+=l+(d?"/":""),s=i[c]?i[c]:e,d&&!i[a]){let e={type:"NAME_GROUP",name:l,key:l,items:[],subtrees:[]};i[a]=e,s.subtrees.push(e)}d||s.items.push(n)}}}let o="template-subtree";var s=(e=>(e[e.COMPONENT=0]="COMPONENT",e[e.TEMPLATE=1]="TEMPLATE",e))(s||{})},636233:(e,r,n)=>{n.d(r,{KO:()=>f});var i=n(848318),a=n(39773),o=n(579020),s=n(427193),l=n(128153),c=n(369600),d=n(792478),u=n(838303);let p="performance.ds_eco.asset_panel_loading",m=new s.jk(p,{}),h=((0,d.rt)(!1),(0,d.rt)(!1)),_=(e,r)=>{let n=(0,c.q5)(),s=(0,u.D)(),[d,_]=(0,a.fp)(h);i.useEffect(()=>{if(!s&&!d&&r){_(!0);let r=m.stop();r&&(0,o.sx)(p,{elapsedMs:r,fileKey:n?.key,teamId:n?.teamId,orgId:n?.parentOrgId,isUi3RedesignedAssetPanel:!1,numLibraries:e.allElementsTree.allElements.length,numComponents:g(e.allElementsTree.allElements),numComponentsShown:e.elementsInView.filter(e=>e.type===l.zq.TILE).length,numSectionsShown:e.elementsInView.filter(e=>e.type===l.zq.ROW).length},{forwardToDatadog:!0})}},[e.isDirty,e.elementsInView,e.allElementsTree,s,d,n,_,r])},g=e=>{let r=0;return e.forEach(e=>{e.type===l.zq.TILE?r+=1:e.type===l.zq.ROW&&(0,l.We)(e)&&(r+=g(e.children))}),r};function f({elementsCache:e,hasRenderedItems:r}){return _(e,r),null}},640021:(e,r,n)=>{n.d(r,{b:()=>d});var i=n(848318),a=n(716544),o=n(111947),s=n(369600),l=n(928001),c=n(919699);let d=function({disabled:e=!1}={}){let r=(0,a.wA)(),n=(0,s.q5)(),d=(0,a.d4)(e=>e.fileVersion),u=(0,a.d4)(e=>e.loadingState),p=i.useRef(0),m=null!=n&&null!=d?(0,c.yD)(n.key):void 0;return i.useEffect(()=>{!e&&null!=m&&(0,l.Sc)(u,m)&&p.current<3&&(p.current+=1,r((0,o.zK)()))},[r,m,u,e]),{isLoaded:(0,l.mC)(m??"")&&!!m}}},783193:(e,r,n)=>{n.d(r,{lX:()=>Y});var i=n(848318),a=n(716544),o=n(513886),s=n(376025);n(741419);var l=n(629829),c=n(536384),d=n.n(c),u=n(961736),p=n.n(u),m=n(543072),h=n(818754);n(730169);var _=n(654104);n(889132);var g=n(701780),f=n(17755),E=n(357287),y=n(442313),b=n(318672),v=n(584305),T=n(145200),I=n(235441),S=n(727341),w=n(574146);n(992444);var A=n(990449),C=n(151489),N=n(918331),L=n(79563),O=n(29025),R=n(747314),P=n(887057),D=n(843200),M=n(931516),k=n(503024),F=n(590018),x=n(38348),U=n(492678),B=n(737859),V=n(342887),G=n(542127),H=n(122424),K=n(475869),W=n(527603);let z=(0,h.hG)(K.QU);function $(e){switch(e){case"list-compact":case"list":case"list-no-padding":return!0;case"grid":case"grid-compact":case void 0:return!1}}function Y(e){var r,n,a;let{item:o}=e,{testId:s,...l}=e,{nameStyle:c,background:d}=(r=e.item,n=e.displayType,a=e.noBackground,i.useMemo(()=>{let e={};if(a)return{nameStyle:e,background:null};let i=(0,w.zR)(r,null);return i&&!$(n)&&(e.background=b.F.format(i),e.color=(0,m.G$)(i)),{nameStyle:e,background:i}},[n,a,r])),u=e.showName;(e.hideNameOverlay||e.shouldShowNamePopout&&!$(e.displayType))&&(u=!1);let h=W.UA,_=p()({},l,{style:{marginLeft:e.gutterWidth}}),g=(0,H.jx)();return i.createElement(j,{..._,testId:s},i.createElement(q,{...l},g?i.createElement(Q,{item:l.item,width:l.width}):i.createElement(X,{...l,backgroundColor:d,className:void 0,style:e.isDragged?void 0:e.style}),u&&i.createElement("div",{className:function(e,r){switch(e){case"grid":case"grid-compact":case void 0:return r;case"list-compact":return W.OD;case"list":case"list-no-padding":return W.vZ}}(e.displayType,h),style:c},(()=>{if($(e.displayType)&&!e.isSearch){let r=(0,L.kH)(o.name);return e.item.type===M.PW.RESPONSIVE_SET?(0,D.NR)(r):r}return o.name})()),e.item.type===M.PW.STATE_GROUP&&!!e.numVariants&&e.numVariants>0&&i.createElement(J,{isList:$(e.displayType),numVariants:e.numVariants})))}(0,h.hG)(K.Us);let j=i.memo(i.forwardRef(function(e,r){let n;let a=$(e.displayType),s=i.useRef(null),l=e.height||120,c=e.width||120;l-=l%2,c-=c%2;let d=e.itemPadding??0;c+=2*d,l+=2*d;let u=(0,H.jx)(),p=a||u?e.style:{...e.style,width:c,height:l},m=(0,G.o)(e.item,{shouldShowName:e.shouldShowNamePopout,isList:a});n="list-compact"===e.displayType?W.nl:"list"===e.displayType?W.yg:"list-no-padding"===e.displayType?W.oV:e.isDragged?W.Vs:e.isFigJam||e.isSlides||e.isCooper?W.bo:e.useBaseTile?W.aS:"grid-compact"===e.displayType?W.Ms:W.fh;let h=(0,M.Do)(e.item)?null:e.item.description,_=e.item.type===M.PW.STATE_GROUP&&!!e.numVariants&&e.numVariants>0,g=e.shouldShowNamePopout&&!a,f=!e.shouldHideDescription&&h,E=(f||g||_)&&!e.shouldHideTooltip,y=i.useMemo(()=>e.isFigJam||e.isSlides||e.isCooper?{"data-tooltip":e.isDragged?void 0:e.tooltipOverride??(0,L.kH)(e.item.name),"data-tooltip-type":e.isDragged?void 0:k.Ib.TEXT,"data-tooltip-timeout-delay":e.isDragged?void 0:500,"data-tooltip-show-above":e.tooltipShownAbove}:m?{"data-tooltip-type":E?k.Ib.SPECIAL:void 0,"data-tooltip":E?B.B:void 0,"data-tooltip-component-name":g?e.tooltipOverride??(0,L.kH)(e.item.name):void 0,"data-tooltip-file-name":e.fileName,"data-tooltip-component-description":f?h:void 0,"data-tooltip-num-variants":_?e.numVariants:void 0,"data-tooltip-show-right":!0,"data-tooltip-max-width":240,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!!e.showTooltipImmediately||void 0,"data-tooltip-hide-immediately":!!e.showTooltipImmediately||void 0}:void 0,[e.isFigJam,e.isSlides,e.isCooper,e.isDragged,e.tooltipOverride,e.item.name,e.tooltipShownAbove,e.fileName,e.numVariants,e.showTooltipImmediately,m,E,g,f,h,_]);return i.createElement("div",{ref:r||s,className:`${n} ${e.className||""}`,style:p,"data-testid":e.testId,...y},i.createElement(o.o,{eventListeners:["onMouseUp"]},e.children))}));function q(e){let r="whiteboard"===(0,I.lg)(),n=$(e.displayType),o=(0,V.cx)(e.item),l=(0,O.H)(),c=(0,a.d4)(e=>e.modalShown?.type),d=i.useCallback(()=>{c===x.V&&l()},[c,l]),{onInsertableResourcePointerDown:u,dragState:p,insertAction:m}=(0,N.j)({resource:e.item,isList:n,sourceForTracking:e.draggable?.sourceForTracking||"",sectionNameForTracking:e.draggable?.sectionNameForTracking,sectionDepth:e.draggable?.sectionDepth,clickToInsert_DEPRECATED:!1,afterSuccessfulInsert:e.draggable?.afterSuccessfulInsert,insertionCallback:e.draggable?.insertionCallback,draggingThumbMaxDimensions:o?void 0:new g.Mi((e.width||0)-z,(e.height||0)-z),sectionPosition:e.sectionPosition,recomputeCancelRectsOnPointerUp:c===x.V,onDragStart:()=>{e.draggable?.onDragStart?.(),d()},onPointerUp:e.draggable?.onPointerUp,useSmartPositioning:e.useSmartPositioning,preloadThumbnail:!!e.ThumbnailOverride}),h=`componentThumb.${e.recordingNodePath}`,y=_.rf(e.buttonProps?.onContextMenu?h:`${h}_UNUSED`,"contextmenu",r=>{e.buttonProps?.onContextMenu?.(r)},{recordMetadata:e=>{let r=e.currentTarget.getBoundingClientRect(),n=new g.Mi(r.left,r.top),i=new g.Mi(e.clientX,e.clientY).subtract(n);return{percentageMousePos:new g.Mi(i.x/r.width,i.y/r.height)}},playbackMetadata:r=>{let n=e.height||0,i=e.width||0;return{currentTarget:{getBoundingClientRect:()=>({top:0,left:0,height:n,width:i})},clientX:0+r.percentageMousePos.x*i,clientY:0+r.percentageMousePos.y*n}}}),b=_.rf(h,"click",r=>{if(e.buttonProps?.onItemClick?.(r,e.item),e.buttonProps?.clickToInsert){let n=new PointerEvent(r.type,{...r,view:window});m({e:n,isClick:!0,dropPosition:(0,C.zR)(void 0)}).then(()=>e.draggable?.afterSuccessfulInsert?.(n))}}),T=r=>{e.buttonProps?.onItemDoubleClick?.(r,e.item)},w=(r||e.isSlides||e.isCooper)&&p?W.Vk:W.GR,R=(0,S.GS)();return i.createElement(i.Fragment,null,i.createElement(E.n.div,{onPointerDown:r=>{e.draggable&&u(r)},style:{padding:e.itemPadding},className:f.s.hFull.borderBox.$,"data-testid":h},e.buttonProps?e.buttonProps?R?i.createElement(s.E,{className:w,htmlAttributes:{onContextMenu:y,onDoubleClick:T,onFocus:e.buttonProps?.onFocus,onBlur:e.buttonProps?.onBlur},onClick:b,"aria-label":(0,L.kH)(e.item.name)},e.children):i.createElement("button",{className:w,onContextMenu:y,onDoubleClick:T,onFocus:e.buttonProps?.onFocus,onBlur:e.buttonProps?.onBlur,onMouseDown:e.buttonProps?.onFocus?void 0:v.wo,onClick:b},e.children):null:i.createElement("div",{className:w},e.children)),i.createElement(A.q,{dragState:p,isList:n}))}function X({displayType:e,item:r,isDragged:n,isFigJam:a,isSlides:o,isCooper:s,backgroundColor:l,shouldShowShadowOnHover:c,height:u=120,width:p=120,noBackground:m,style:h,alwaysShowBorder:_,thumbWrapperClassName:g,thumbPaddingGrid:f,ThumbnailOverride:E,noCenter:y}){let v;let I=i.useContext(P.uW),S=(0,T.X)(),w=u-u%2,A=p-p%2,C=$(e);v=C?m?W.v:W.Tq:m||a?W.Yc:`${W.wi} ${W.wi}`;let N={width:2*A,height:2*w,padding:i.useMemo(()=>a?f??0:C?z:f??z,[a,C,f]),...h};y&&(N.transform="scale(0.5)",N.transformOrigin="top left",N.display="flex",N.alignItems="flex-start",N.justifyContent="center"),m||!l||a||(_||o||s||(N.boxShadow=(0,P.pw)(I,l,S)),N.background=b.F.format(l)),n&&(C?(N.width=void 0,N.height=void 0):N.background=void 0);let L=i.useMemo(()=>r.type===M.PW.RESPONSIVE_SET&&"LIBRARY"===r.subscriptionStatus&&r.fullPage?W.NK:c?W.Ib:a||o||s?W.FF:W.N4,[a,o,s,r,c]);return i.createElement("div",{className:W.Ol,style:n&&C?void 0:{width:A,height:w}},i.createElement("div",{className:d()(v,g,{[W.XK]:_}),style:N,"data-testid":`library-item-tile-thumb-${r.name}`},r.type===M.PW.VARIABLE_SET?i.createElement(Z,{variableSetID:r.node_id}):E?i.createElement(i.Fragment,null,E):i.createElement(F.M,{className:L,item:r,shouldGenerateLocalThumbnail:!0,draggable:!1,style:y?{margin:"0",objectPosition:"top left",objectFit:"contain",maxHeight:"100%",maxWidth:"100%",height:"auto",alignSelf:"flex-start",paddingLeft:"12px"}:{}})))}let Z=i.memo(function({variableSetID:e}){let r=(0,a.d4)(e=>(0,R.a3)(e)),n=i.useMemo(()=>{let n=new Set;for(let i of Object.values(r))if(i.variableSetId===e&&(n.add(i.resolvedType),n.size>=3))break;return[...n.values()]},[r,e]),o=(n.length-1)/2;return i.createElement("div",{className:W.bF},n.map((e,r)=>i.createElement("div",{className:W.aC,key:e,style:{marginTop:(o-r)*20}},i.createElement(U.i,{type:e,showTooltip:!1}))))});function J({isList:e,numVariants:r}){let n=(0,S.GS)();return r<=1?null:i.createElement("div",{className:e?W.hs:W.xC,"data-tooltip":(0,y.t)("design_systems.assets_panel.variant_count",{numVariants:r}),"data-tooltip-type":k.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip-timeout-delay":n?500:void 0,"data-tooltip-show-immediately":!n||void 0,"data-tooltip-hide-immediately":!0},r)}function Q({item:e,width:r=120}){let n=(0,H.jl)();return i.createElement("div",{...l.Ay.props(ee.thumbWrapper,n===H.W7.Block&&ee.thumbClampHeight,ee.thumbWrapperWidth(r)),"data-testid":`library-item-tile-thumb-${e.name}`},i.createElement(F.M,{...l.Ay.props(ee.thumb,n===H.W7.Block&&ee.thumbClampHeight),item:e,shouldGenerateLocalThumbnail:!0,draggable:!1,loading:"eager"}))}let ee={thumb:{maxWidth:"x193iq5w",maxHeight:"xmz0i5r",objectFit:"x8jj4xb",margin:"x1bpp3o7",marginInline:null,marginInlineStart:null,marginLeft:null,marginInlineEnd:null,marginRight:null,marginBlock:null,marginTop:null,marginBottom:null,userSelect:"x87ps6o",$$css:!0},thumbWrapper:{borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,display:"x78zum5",flexDirection:"xdt5ytf",alignContent:"xc26acl",flexShrink:"x2lah0s",backgroundColor:"x1v8gsql",padding:"xe8ttls",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,minHeight:"xu97haq",maxHeight:"x1i69ec5",":focus_boxShadow":"xcyo9kp",$$css:!0},thumbClampHeight:{minHeight:"xu97haq",maxHeight:"x1drivef",$$css:!0},thumbWrapperWidth:e=>[{width:null==e?null:"x1bl4301",$$css:!0},{"--width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e)}]}},882820:(e,r,n)=>{n.d(r,{ON:()=>i,yW:()=>m,zr:()=>p});var i=(e=>(e[e.HEADER=0]="HEADER",e[e.SUGGESTIONS=1]="SUGGESTIONS",e[e.BREADCRUMB=2]="BREADCRUMB",e[e.CONTENTS=3]="CONTENTS",e))(i||{}),a=(e=>(e[e.LIBRARIES=0]="LIBRARIES",e[e.PAGES=1]="PAGES",e[e.ASSETS=2]="ASSETS",e))(a||{}),o=(e=>(e[e.SEARCH_AND_FILTER=0]="SEARCH_AND_FILTER",e[e.LIBRARY_SEARCH_CHIP=1]="LIBRARY_SEARCH_CHIP",e))(o||{}),s=(e=>(e[e.SEARCH=0]="SEARCH",e[e.VISUAL_SEARCH_BUTTON=1]="VISUAL_SEARCH_BUTTON",e[e.SETTINGS=2]="SETTINGS",e))(s||{}),l=(e=>(e[e.BACK=0]="BACK",e[e.LIBRARY=1]="LIBRARY",e[e.ELLIPSIS=2]="ELLIPSIS",e[e.STUBS=3]="STUBS",e))(l||{}),c=(e=>(e[e.SITE_KIT=0]="SITE_KIT",e[e.TEMPLATES=1]="TEMPLATES",e[e.EXAMPLES=2]="EXAMPLES",e[e.COMPONENTS=3]="COMPONENTS",e[e.FOLDERS=4]="FOLDERS",e))(c||{}),d=(e=>(e[e.SITE_KIT=0]="SITE_KIT",e[e.LOCAL_AND_SUBSCRIBED=1]="LOCAL_AND_SUBSCRIBED",e[e.PRESETS=2]="PRESETS",e[e.VISUAL_ASSETS=3]="VISUAL_ASSETS",e))(d||{}),u=(e=>(e[e.LIBRARIES=0]="LIBRARIES",e))(u||{}),p=(e=>(e[e.CTA=0]="CTA",e[e.UI_KITS=1]="UI_KITS",e))(p||{}),m=(e=>(e.DESIGN="design",e.SITE="site",e))(m||{})},186056:(e,r,n)=>{n.d(r,{Nh:()=>f,Qk:()=>E,R2:()=>y,ZV:()=>b,mb:()=>g});var i=n(848318),a=n(425642),o=n(742464),s=n(39773),l=n(579020),c=n(668515);n(544339);var d=n(369600),u=n(240207),p=n(63998);n(277253);var m=n(56325);n(730505);var h=n(473450),_=n(882820);function g(e,r){return function(e,r){let n=[...e];return r&&(0,c.NX)(r)?(0,c.k9)({libraries:n,approvedLibraryKeysByResourceType:r}):(0,a.KQ)(n,"name"),n}(e.map(e=>({...e,library_key:e.libraryKey})),r)}function f(e,{includeEmptyLibraries:r}={}){let n=e.numComponents+e.numStateGroups;return r||n>0?{name:e.name,libraryKey:e.libraryKey,numComponents:n,numTemplates:0,thumbnailUrl:e.thumbnailUrlOverride??e.thumbnailUrl,thumbnailShouldCover:!!e.thumbnailGuid||"community"===e.libraryType,type:_.yW.DESIGN,libraryType:e.libraryType}:null}function E(e){return(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&"application"!==e.role}function y(e,r=8){let[n,a]=i.useState(window.innerHeight);i.useEffect(()=>{let e=()=>{a(window.innerHeight)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let o=i.useMemo(()=>n-(e??0)-r,[r,e,n]);if(e)return o}function b(e){let r=(0,h.Nv)(!0),n=(0,m.k)(),a=(0,d.tS)(),s=(0,u.CK)();return i.useCallback(i=>{let{type:c,sectionPosition:d,searchQuery:u,searchSessionId:m,...h}=e,_={aiResultsEnabled:r,altKey:i.altKey,assetsPanelVersion:n,fileKey:a??void 0};l.az.trackDefinedEvent("assets_panel.keyboard_insert",{...e,..._}),e.source!==p.tM?l.az.trackDefinedEvent("asset_search.result_inserted",{...h,..._,assetType:c,position:d,reciprocalRank:(0,o.Et)(d)?1/(1+d):void 0,query:u,sessionId:m,entryPoint:"assets-panel",componentSuggestionSessionId:s}):(0,p.k1)({assetType:c,assetKey:h.assetKey,libraryKey:h.assetLibraryKey})},[e,r,a,n,s])}n(889386),n(700392),(0,s.eU)(!1)},854043:(e,r,n)=>{n(848318).createContext({getLibrary:()=>void 0,getPage:()=>void 0,getFolder:()=>void 0})},280810:(e,r,n)=>{n.d(r,{MB:()=>a});var i=n(848318);function a({onBoth:e,onClick:r,onKeyDown:n}){return i.useCallback(i=>{e?.(i),0!==i.detail?r?.(i):n?.(i)},[e,r,n])}n(857188),n(792647),n(992444),n(964e3),n(882820),n(186056),n(889386),n(726514),n(547952);let o=i.createContext(null)},111958:(e,r,n)=>{var i=n(848318),a=(e=>(e[e.Mount=0]="Mount",e[e.Back=1]="Back",e[e.Forward=2]="Forward",e[e.ToggleView=3]="ToggleView",e))(a||{});(0,i.createContext)({lastNavAction:0,lastNavDirection:0,setLastNavAction:()=>{},lastActionWasBackSwipe:!1})},869368:(e,r,n)=>{n.d(r,{hK:()=>s});var i=n(848318);n(716544);var a=n(551316);n(629829),n(575492),n(35609),n(442313);var o=n(481540);function s({height:e}){return i.createElement("div",{style:{height:e}})}n(369600),n(921464),(0,a.s)((e,r,n,i)=>{(0,o.uE)("action_left_panel_scroll",{user:e},{assetsPanelVersion:3,tab:"assets",fileKey:r,fileTeamId:n,fileOrgId:i})},500)},889386:(e,r,n)=>{n(848318);var i=n(157907),a=n(39773);n(397579);var o=n(834996),s=n(792478);n(882820),n(854043),n(111958),n(906784),n(730505);var l=n(219205);n(703889);var c=(e=>(e.IconSets="icon_sets",e.Illustrations="illustrations",e))(c||{}),d=(e=>(e.Libraries="All libraries",e.Pages="Library",e.Assets="Page",e.Search="Search",e.Recents="Recents",e.VisualAssets="Visual assets",e))(d||{}),u=(e=>(e.Blocks="Blocks",e.Libraries="Libraries",e))(u||{});(0,s.rt)({}),(0,s.rt)(!1),(0,s.rt)(!1),(0,s.rt)(!1);let p=(0,s.rt)("Blocks");(0,a.eU)(e=>{let r=e(p),n=e(o.OC);return(0,l.Vj)(n)&&(0,i.k)().sts_blocks_redesign?r:"Libraries"},(e,r,n)=>{r(p,n)});(0,s.rt)(void 0)},703889:(e,r,n)=>{n.d(r,{U:()=>c}),n(848318);var i=n(716544);n(369600);var a=n(870769),o=n(928001),s=n(264917),l=n(838303);function c(){let e=(0,s.je)(),r=(0,i.d4)(e=>e.loadingState);return!!(0,l.D)()&&(!e.data||e.data.some(e=>{let n=(0,a.Mb)(e.libraryKey);return!(0,o.D2)(r,n)}))}n(33246),n(700392)},836947:(e,r,n)=>{n.d(r,{N:()=>d});var i=n(848318),a=n(716544),o=n(573446),s=n(239910),l=n.n(s),c=n(264917);function d(){let e=(0,a.d4)(e=>e.hubFiles),r=i.useMemo(()=>l()(Object.values(e),e=>(0,o.l)(e.library_key??"")),[e]),n=(0,c.je)(),s=i.useMemo(()=>{let e={};if(!n.data)return{};for(let r of n.data){if("community"===r.libraryType)continue;let n={key:r.fileKey,name:r.name,library_key:r.libraryKey,thumbnail_guid:r.thumbnailGuid,thumbnail_url:r.thumbnailUrl??"",thumbnail_url_override:r.thumbnailUrlOverride};e[(0,o.l)(r.libraryKey)]=n}return e},[n]);return i.useMemo(()=>({subscribedFileDataByLibraryKey:s,hubFilesByLibraryKey:r,hubFilesById:e}),[e,r,s])}},906784:(e,r,n)=>{n.d(r,{MA:()=>m});var i=n(848318),a=n(157907),o=n(39773),s=n(171659),l=n(303035),c=n(219205),d=(e=>(e.LIST="list",e.GRID="grid",e))(d||{});let u="assets-panel-view-mode-v2",p=(0,o.E3)(u,"grid");function m(){let[e,r]=(0,o.fp)(p),n=i.useCallback(e=>e.key===u&&null!=e.newValue,[]),d=i.useCallback(n=>{if(n)try{let i=JSON.parse(n);("grid"===i||"list"===i)&&e!==i&&r(i)}catch(e){}},[e,r]);(0,s.tl)({onSync:d,shouldSyncValue:n});let m=(0,c.cJ)();return i.useMemo(()=>m&&(0,a.k)().sts_blocks_redesign?["grid",l.lQ]:[e,r],[e,m,r])}(0,o.E3)("asset-panel-show-folders",!1)},726514:(e,r,n)=>{n.d(r,{e:()=>a});var i=n(848318);function a(e){let[r,n]=i.useState(e);return[r,i.useCallback(()=>n(!0),[]),i.useCallback(()=>n(!1),[]),i.useCallback(()=>n(e=>!e),[])]}},122424:(e,r,n)=>{n.d(r,{W7:()=>a,jl:()=>l,jx:()=>s});var i=n(848318),a=(e=>(e[e.Block=0]="Block",e[e.Webpage=1]="Webpage",e[e.Embed=2]="Embed",e))(a||{});let o=(0,i.createContext)(void 0);function s(){return void 0!==(0,i.useContext)(o)}function l(){return(0,i.useContext)(o)}},33246:(e,r,n)=>{n.d(r,{Pv:()=>c,Yl:()=>d});var i=n(988520),a=n(573446),o=n(351766),s=n(734493),l=n(882820);function c(e){let r=(0,o.oA)(e.libraryKeyToFile?.file);if(!r)return null;let n=r.libraryAssetsOfType.map(e=>(0,s.py)((0,a.l)(r.libraryKey),e)).filter(i.Vq);return 0===n.length?null:{library:{name:r.name,libraryKey:(0,a.l)(r.libraryKey),thumbnailUrl:r.thumbnailUrl,thumbnailShouldCover:!1,numResponsiveSets:n.length,type:l.yW.SITE,libraryType:"team"},assets:n}}let d="SITE_KIT_EMBEDS_LIBRARY_KEY"},167711:(e,r,n)=>{n.d(r,{V:()=>u});var i=n(573446),a=n(157907),o=n(379338),s=n(442313),l=n(882820),c=n(33246);let d=[{name:"URL or HTML",type:"embed",initial_url:"",thumbnail_url:(0,o.ck)("a72a511e70f0f3f4d7ce94e3f01b732ee639a997"),preview_url:(0,o.ck)("cb0d72db7dc60561469703a5c536714f0c435da4"),width:600,height:400,thumbnail_padding:8,background_color:"#F5F5FF",feature_flag:"sts_generic_embed",description:["url","html","iframe","embed"]},{name:"YouTube",type:"embed",initial_url:"https://www.youtube.com/",thumbnail_url:(0,o.ck)("da3610678f92b57dea12a1d3fdf5beb420e324ce"),preview_url:(0,o.ck)("18ee4292c3c2b58c0c1f2878a3b151c1dba39b98"),width:600,height:400,thumbnail_padding:8,background_color:"#FFF5F5",feature_flag:"sts_widget_youtube",description:["embed","video"]},{name:"Google Maps",type:"embed",initial_url:"https://maps.google.com/?output=embed&q=San+Francisco+City+Hall",thumbnail_url:(0,o.ck)("4013b546d38e4903dd7cc0a1845b30146e872841"),preview_url:(0,o.ck)("574575e64fb6517dd8d4e44a65c333025c7ed9c5"),width:600,height:400,thumbnail_padding:8,background_color:"#F2F9FF",feature_flag:"sts_widget_google_maps",description:["embed"]}];function u(){return((0,a.k)().ds_sts_kit?d.filter(e=>!e.feature_flag||(0,a.k)()[e.feature_flag]):[]).length>0?{name:(0,s.t)("design_systems.assets_panel.site_embeds"),libraryKey:(0,i.l)(c.Yl),thumbnailUrl:(0,o.ck)("b325c884bd37bf62ccd3776e84158fc1e3bc0def"),thumbnailShouldCover:!1,numResponsiveSets:0,type:l.yW.SITE,libraryType:"team"}:null}},621212:(e,r,n)=>{n(848318),n(741419);var i=n(157907),a=n(39773),o=n(981555);n(351766),n(195507);var s=n(653959),l=n(579463),c=n(149379),d=n(150047),u=n(808471),p=n(878028);n(656610);var m=n(235441);n(338166),n(369600);var h=n(376780),_=n(635547);n(734493);var g=n(241917),f=n(53818);function E(e){return!!((0,u.Lg)()||(0,u.nl)())||e(c.ZJ).status===d.Uv.COMPLETED}let y=[],b=((0,a.eU)(new Map),(0,f.n)(async()=>await (0,l.w0)("code_presets_sts_lib_key"))),v=p.z.object({assetKey:p.z.string(),name:p.z.string(),icon:p.z.string().optional(),nodeTypes:p.z.array(p.z.string()).optional()}),T=p.z.object({libraryKey:p.z.string(),assets:p.z.array(v)}),I=[],S=(0,a.eU)(async e=>{let r=e(m.u8)===g.nT.Sites&&(0,i.k)().prototype_code_presets&&(0,i.k)().code_presets_1p_from_dynamic_config,n=E(e);return r&&n?{libraryConfigs:(await (0,l.w0)("1p_code_presets_sts")).get("libraries",I,e=>Array.isArray(e)&&e.every(e=>T.safeParse(e).success)),enabled:r}:{libraryConfigs:I,enabled:!1}}),w=((0,o.oA)(S,()=>({libraryConfigs:I,enabled:!1})),(0,a.eU)(async e=>{let r=e(m.u8)===g.nT.Sites&&(0,i.k)().prototype_code_presets&&!(0,i.k)().code_presets_1p_from_dynamic_config,n=E(e);if(!r||!n)return{libraryKeys:y,enabled:!1};let a=(await b()).get("libraryKeys",[],e=>Array.isArray(e)&&e.every(e=>"string"==typeof e)),o=a.length>0&&r;return{libraryKeys:o?a:[],enabled:o}})),A=(0,o.oA)(w,()=>({libraryKeys:y,enabled:!1}));(0,f.n)(()=>{let{libraryKeys:e,enabled:r}=(0,a.md)(A),n=e.map(e=>_.Bu2.Query({libraryKey:e,assetType:h.PW.CODE_COMPONENT}));return(0,s.En)(n,{enabled:r})})},700392:(e,r,n)=>{n.d(r,{AS:()=>S,ce:()=>A,dj:()=>C});var i=n(848318),a=n(157907),o=n(39773),s=n(981555);n(351766);var l=n(195507),c=n(653959),d=n(579463),u=n(149379),p=n(150047),m=n(808471),h=n(235441),_=n(376780),g=n(635547);n(746948),n(843200);var f=n(241917),E=n(53818),y=n(33246),b=n(167711);let v=(0,E.n)(async()=>await (0,d.w0)("ds_sts_lib_key")),T=[],I=(0,o.eU)(async e=>{let r=e(h.u8),n=(r===f.nT.Sites||r===f.nT.Figmake)&&(0,a.k)().ds_sts_kit,i=!!((0,m.Lg)()||(0,m.nl)())||e(u.ZJ).status===p.Uv.COMPLETED;if(!n||!i)return{libraryKeys:T,enabled:!1,publishedFromSiteFile:!1,sortedPrefixes:void 0};let o=await v(),s=o.get("libraryKeys",[],e=>Array.isArray(e)&&e.every(e=>"string"==typeof e)),l=o.get("siteFile",!1,e=>"boolean"==typeof e),c=o.get("order",[],e=>Array.isArray(e)&&e.every(e=>"string"==typeof e)),d=s.length>0&&n;return{libraryKeys:d?s:[],enabled:d,publishedFromSiteFile:l,sortedPrefixes:c.map(e=>e.toLocaleLowerCase())}}),S=(0,s.oA)(I,()=>({libraryKeys:T,enabled:!1,publishedFromSiteFile:!1,sortedPrefixes:void 0})),w=(0,E.n)(()=>{let{libraryKeys:e,enabled:r}=(0,o.md)(S),n=e.map(e=>g.Bu2.Query({libraryKey:e,assetType:_.PW.RESPONSIVE_SET}));return(0,c.En)(n,{enabled:r})});function A(){let e=w(),{enabled:r}=(0,o.md)(S),n=i.useMemo(()=>{let n={libraries:[],assetsByLibraryKey:new Map};if(r){for(let r of e){if(r.data){let e=(0,y.Pv)(r.data);if(e){n.libraries.push(e.library);let r=e.library.libraryKey;n.assetsByLibraryKey.set(r,e.assets)}}if("loading"===r.status)return(0,l.Xm)()}let r=(0,b.V)();r&&n.libraries.push(r)}return(0,l.gB)(n)},[e,r]);return i.useMemo(()=>{if("loading"===n.status)return(0,l.Xm)();let e=n.data;return e.libraries.length>0?(0,l.gB)(e):{status:"disabled",data:null,errors:null}},[n])}function C(e){let r=A();return!!e&&r.data?.assetsByLibraryKey.has(e)}},819044:(e,r,n)=>{n.d(r,{T:()=>F});var i=n(848318),a=n(716544),o=n(897378),s=n(425068),l=n(44509),c=n(730169),d=n(397579),u=n(17755),p=n(442313),m=n(449737),h=n(155651),_=n(523495),g=n(369600),f=n(841747),E=n(376780),y=n(572699),b=n(668249),v=n(834111),T=n(263510),I=n(241917),S=n(931516),w=n(464012),A=n(181725),C=n(518287),N=n(784882),L=n(261452),O=n(432676),R=n(813552),P=n(748776),D=n(773679);function M(e){let r=(0,a.d4)(e=>e.selectedView),n=(0,d.ZC)(r),o=(0,a.d4)(e=>e.modalShown?.type),s=(0,a.wA)(),l="fullscreen"!==r.view&&n?.view===r.view,c=!("fullscreen"===r.view&&n?.view==="fullscreen"&&r.fileKey===n.fileKey)&&!l;i.useEffect(()=>{n&&c&&o===e&&s(m.Ce())},[s,e,o,c,n])}let k=i.memo(function({initialTab:e,teamId:r,initialUpdatesModalScope:n,entrypoint:o,sessionId:s,resourceConnection:d}){M(S.cX);let u=(0,a.d4)(e=>e.selectedView),p=(0,a.d4)(e=>(0,v.IE)(e)),m=(0,g.q5)(),f=(0,y.b_)({migrationGroup:b.L.GROUP_6,component:"LibraryPreferencesModal"}),E=new URLSearchParams(l.Ay.location.search).get("teamToMoveFileToOnNavigate"),T=(0,_.R)();(0,c.h)(()=>{T({updateSource:"library_modal_open"})});let w=(0,O.YM)();return i.createElement(h.fu,{name:"Library Preference Modal",properties:{fileKey:m?.key,fileTeamId:m?.teamId,selectedTeamId:"team"===u.view?u.teamId:null,orgId:f,inPublishDraftExp:!!E,entryPoint:o}},d&&r?i.createElement(B,{teamId:r,resourceConnection:d}):p?i.createElement(x,null):"fullscreen"===u.view&&u.editorType!==I.nT.Whiteboard?w?i.createElement(D.b,{entrypoint:o,initialTab:e,initialUpdatesModalScope:n,sessionId:s}):i.createElement(N.B,{entrypoint:o,initialTab:e,initialUpdatesModalScope:n}):"team"===u.view?i.createElement(U,{initialTab:e,teamId:u.teamId}):r?i.createElement(U,{initialTab:e,teamId:r}):void 0)}),F=(0,w.Ju)(k,S.cX,w.ZU.YES);function x(){let e=(0,O._K)();return i.createElement(L.s,{width:e,title:i.createElement(P.c,{availableTabs:[S.Wv.LIBRARIES],selectedTab:S.Wv.LIBRARIES})},i.createElement(R.Z,null,i.createElement(A.s,{showingDefaultSubscriptionsForUser:!0,showingDefaultSubscriptionsForTeamId:null,width:e})))}function U({initialTab:e,teamId:r}){let n=(0,a.wA)(),o=(0,a.d4)(e=>e.sharedFonts),s=(0,a.d4)(e=>(0,T.p)(e)),l=(0,y.Xd)().unwrapOr(null),c=!!(l&&(0,y.A8)(l,E.Xn.ADMIN)),d=(0,f.FC)(),u=i.useMemo(()=>{let e=[S.Wv.LIBRARIES];return s&&e.push(S.Wv.FONTS),e},[s]),{selectedTab:p,setSelectedTab:m}=(0,O.SE)(u,e),h=(0,O._K)(s);return i.createElement(L.s,{width:h,title:i.createElement(P.c,{availableTabs:u,selectedTab:p,setSelectedTab:m})},i.createElement(R.Z,{widerWidth:s},p===S.Wv.LIBRARIES&&i.createElement(A.s,{showingDefaultSubscriptionsForTeamId:r,showingDefaultSubscriptionsForUser:!1,width:h}),p===S.Wv.FONTS&&i.createElement(C.y,{dispatch:n,teamId:r,width:h,resourceType:"team",useModalViewComponent:!0,canAdminOrg:!!c,permissionsState:d,sharedFonts:o})))}function B({teamId:e,resourceConnection:r}){let n=(0,a.wA)(),l=(0,O._K)(!0),c=r.hostPlanType===E.OL.TEAM;return i.createElement(L.s,{width:l,title:i.createElement("div",{className:u.s.pl4.flex.flexRow.justifyBetween.itemsCenter.gap4.$},i.createElement(o.K,{onClick:()=>{n(m.Lo())},"aria-label":(0,p.t)("resource_connection.aria_label.button")},i.createElement(s.C,null)),(0,p.tx)("design_systems.libraries_modal.allow_external_teams_to_use_libraries",{projectName:r.projectName}))},i.createElement(R.Z,{widerWidth:!0},i.createElement(A.s,{showingDefaultSubscriptionsForTeamId:c?e:null,showingDefaultSubscriptionsForUser:!1,width:l,resourceConnectionId:r.id,planType:r.hostPlanType})))}(0,w.Ju)(function({entrypoint:e}){M(S.EJ);let r=(0,a.wA)();return i.useEffect(()=>{C.y.loadSharedFonts(r)},[r]),i.createElement(k,{initialTab:S.Wv.FONTS,entrypoint:e})},S.EJ,w.ZU.YES)},202293:(e,r,n)=>{n.d(r,{i:()=>h});var i=n(848318),a=n(157907),o=n(311160),s=n(195507),l=n(369600),c=n(896870),d=n(931516),u=n(460221),p=n(704110),m=n(286707);function h(){let e=function(){let e=(0,p.$)(),r=(0,u.z)(),n=(0,l._G)(),a=i.useMemo(()=>"loaded"!==e.status?[]:e.data,[e]),c=(0,o.$)(e.status)&&"loaded"===e.status,[d,m]=i.useState(()=>r(a));return(i.useEffect(()=>{c&&m(r(a.filter(e=>e.library_key!==n)))},[c,r,a,n]),"loading"===e.status||c)?(0,s.Xm)():(0,s.gB)(d)}(),r=(0,c.e)(),n=function(e,r){let n=(0,m.Qj)(),o=(0,l._G)(),c=i.useMemo(()=>new Set(e.data?.map(e=>e.library_key)??[]),[e]),u=i.useMemo(()=>n.result.reduce((e,r)=>(r.library_file_key&&e.set(r.library_key,r.library_file_key),e),new Map),[n]),p=i.useMemo(()=>"loaded"===r.status&&((0,a.k)().dse_library_modal_perf||"loaded"===n.status)?r.data.publishedLibraries.map(e=>(0,a.k)().dse_library_modal_perf||(0,d.xA)(e)||e.library_file_key?e:{...e,library_file_key:u.get(e.library_key)}).filter(e=>!c.has(e.library_key)).filter(e=>!!(0,a.k)().dse_library_modal_perf||(0,d.xA)(e)||e.library_file_key).filter(e=>e.library_key!==o):[],[r,n,u,c,o]);return i.useMemo(()=>"loaded"===r.status&&((0,a.k)().dse_library_modal_perf||"loaded"===n.status)&&"loaded"===e.status?(0,s.gB)(p):r.data?.publishedLibraries.length===0?(0,s.gB)([]):(0,s.Xm)(),[r,n,e,p])}(e,r),h=i.useMemo(()=>{if("loading"===r.status||"loading"===n.status)return(0,s.Xm)();let e=r.data?.unpublishedLibraries.map(e=>e.library_key)??[];return(0,s.gB)([...e,...r.data?.missingLibraries??[]])},[r,n]);return i.useMemo(()=>({subscribedLibraries:e,usedInThisFile:n,missingLibraryKeys:h}),[e,n,h])}},498047:(e,r,n)=>{n.d(r,{RV:()=>f});var i=n(848318),a=n(716544),o=n(157907),s=n(473889),l=n(166365),c=n(442313),d=n(950738),u=n(813379),p=n(302839),m=n(32813),h=n(660901);function _({variableSet:e,modeDropdownStyle:r,entity:n,defaultModeId:o,isLibraryFileEnabled:s,libraryKey:l}){let m=(0,a.wA)(),h=(0,d.Um)(),_="auto_inherit_mode_string",f=e.modes?e.modes[0].name:"",E=i.useMemo(()=>({name:(0,c.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:f}),id:_}),[f]),y=o?e.modes?.find(e=>e.id===o):E,[b,v]=(0,i.useState)(y),T=i.useMemo(()=>b?.id===_?E:e.modes?.find(e=>e.id===b?.id),[e,b,E]),I=i.useCallback(r=>{v(r),r.id===_?u.j.deleteDefaultMode({libraryKey:l,entityType:n.entityType,entityId:n.entityId,variableSetKey:e.key}):u.j.setDefaultMode({libraryKey:l,entityType:n.entityType,entityId:n.entityId,variableSetKey:e.key,defaultModeId:r.id}).catch(e=>{v(b)})},[b,l,n.entityType,n.entityId,e.key]);return e.modes&&1!==e.modes.length&&n&&y?i.createElement(p.l6,{className:r,dataTestId:`mode-dropdown-${e.id}`,disabled:!s,dispatch:m,dropdownShown:h,dropdownWidth:150,formatter:g,id:`subscription-dropdown-${e.id}`,onChange:I,property:T},i.createElement(p.c$,{value:E},(0,c.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:f})),i.createElement(p.sK,null),e.modes?.map(e=>i.createElement(p.c$,{key:e.id,value:e},g.format(e)))):i.createElement("div",{className:r})}let g={format:e=>e.name};function f({forBestMatches:e,variableSets:r,shouldDisplayDefaultModeDropdown:n,libraryKey:a,entity:d,isLibraryFileEnabled:p}){let[g,f]=(0,i.useState)({}),[E,y]=(0,i.useState)(!1);if(!r||0===r.length)return null;n&&=r.some(e=>e.modes&&e.modes.length>1);let b=(0,o.k)().ds_workspace_team_default_modes&&!E&&n&&d&&a;return(b&&u.j.getDefaultModes({libraryKey:a,entityType:d.entityType,entityId:d.entityId}).then(e=>{f(e.data.meta),y(!0)}).catch(()=>{y(!0)}),b)?i.createElement(s.qc,null):i.createElement("div",null,!e&&i.createElement("div",{className:m.wx},i.createElement("div",{className:m.Pf},(0,c.tx)("design_systems.libraries_modal.header_variable_collections")),(0,o.k)().ds_workspace_team_default_modes&&n&&i.createElement("div",{className:m.Pf},(0,c.tx)("design_systems.libraries_modal.header_default_mode"))),i.createElement("div",{className:e?m.VN:m.iE},r.map(r=>i.createElement("div",{className:m.nk,key:r.id},e?i.createElement(i.Fragment,null,i.createElement(l.B,{className:m.oS,svg:h.A}),i.createElement("span",{className:m.UU},r.name),r.numVariableMatches&&i.createElement("span",{className:m.K0},(0,c.tx)("design_systems.libraries_modal.plural.num_variable_match",{numVariables:r.numVariableMatches}))):i.createElement("div",{className:m.kW},i.createElement("span",{className:m.UU},r.name),n&&d&&a&&(0,o.k)().ds_workspace_team_default_modes&&i.createElement(_,{variableSet:r,modeDropdownStyle:m.nI,libraryKey:a,entity:d,defaultModeId:g[r.key],isLibraryFileEnabled:p})||i.createElement("div",{className:m.nI}),i.createElement("span",{className:m.K0},(0,c.tx)("design_systems.libraries_modal.plural.num_variables",{numVariables:r.numVariables})))))))}},449476:(e,r,n)=>{n.d(r,{dD:()=>eE});var i=n(848318),a=n(716544),o=n(988520),s=n(776402),l=n(777611),c=n(731755),d=n(468189),u=n(960955),p=n(596616),m=n(792978),h=n(741419),_=n(157907),g=n(39773),f=n(397579),E=n(857188),y=n(493554),b=n(925025),v=n(831932),T=n(896966),I=n(991371),S=n(122905),w=n(128153),A=n(473889),C=n(197945),N=n(442313),L=n(790355),O=n(825619),R=n(449737),P=n(155651),D=n(39386),M=n(727341),k=n(323075),F=n(574146),x=n(200015),U=n(938691),B=n(442767),V=n(914982),G=n(946825),H=n(718451),K=n(773422),W=n(369600),z=n(870769),$=n(376780),Y=n(635547),j=n(572699),q=n(668249),X=n(778727),Z=n(395614),J=n(931516),Q=n(718944),ee=n(464012),et=n(678290),er=n(606261),en=n(849942),ei=n(543955),ea=n(117592),eo=n(193757),es=n(982558),el=n(717112),ec=n(50553),ed=n(640574),eu=n(582917),ep=n(431131),em=n(405699),eh=n(308142),e_=n(300430),eg=n(990121),ef=n(479506);let eE=(0,ee.Ju)(function(e){return i.createElement(P.fu,{name:"Publishing Modal",properties:{entryPoint:e.entrypoint,libraryModalSessionId:e.libraryModalSessionId}},i.createElement(es.fo,null,i.createElement(ey,{...e})))},"PublishingModal");function ey(e){let{timedOut:r,initiallyCheckedItemIDs:n,libraryModalSessionId:m}=e,S=(0,M.GS)(),w=(0,a.wA)(),P=s.hS(e),[H,ee]=(0,g.fp)(er.pz),[en,em]=i.useState(""),e_=(0,a.d4)(e=>e.savedPublishDescription),[eE,ey]=i.useState(e_||""),[ev,eI]=i.useState(!1),[eS,ew]=i.useState(null),eA=(0,W.q5)(),eC=(0,a.d4)(k.d1),eN=(0,a.d4)(e=>e.library),eL=(0,W.Cq)({useSinatraType:!0}),eO=eC?.key,eR=(0,a.d4)(X.cM),eP=(0,a.d4)(X.MH),eD=(0,a.d4)(X.dM),eM=(0,g.md)(eh.t),ek=(0,K.nN)(),eF=i.useMemo(()=>(0,F.Jl)(eP),[eP]),{modeLimit:ex,canShowCTA:eU,showCTA:eB}=(0,ei.z)("publishing"),eV=(0,a.d4)(X.fA),eG=(0,j.yN)({migrationGroup:q.L.GROUP_1,component:"PublishingModalInner",attribute:"currentOrgId",legacy:(e,r)=>r?.id??void 0,migrated:e=>e?.key.type===$.OL.ORG?e.key.parentId??void 0:void 0}),eH=(0,a.d4)(e=>e.orgById),eK=(0,Q.Y)(eL||null),eW=!!eC?.starter_library_src_file_key,ez=i.useMemo(()=>{let e=0;return Object.values(eF).forEach(r=>{eW?(0,z.lg)(r.status)&&e++:(0,z.Hb)(r.status)&&e++}),Object.values(eD).forEach(r=>{eW?(0,z.lg)(r.status)&&e++:(0,z.Hb)(r.status)&&e++}),e},[eW,eD,eF]),e$=i.useMemo(()=>{let e=e=>Object.values(e).some(e=>e.status===J.E8.NEW);return!!(eV&&e(eF)||eV&&e(eD)||e(eR))},[eV,eD,eR,eF]),[eY,ej]=i.useState(!1),eq=eK?$.pk.ORG:$.pk.TEAM,[eX,eZ]=i.useState(eq),eJ=i.useCallback(e=>{eZ(e),w(L.oB())},[w]),eQ=(0,_.k)().wslp_workspace_publish_scope,e0=(0,y.Rs)(Y.FWW,{fileKey:eO},{enabled:!!eO});i.useEffect(()=>{if("loaded"===e0.status){if(!e0.data.file?.lastPublishedAt){ej(!0);return}let e=e0.data.file?.libraryKeyToFile?.libraryPublishScope?.publishScopeType??$.pk.TEAM;eQ||e!==$.pk.WORKSPACE||(e=$.pk.ORG),eZ(e),ej(!0),e!==eq&&(0,T.x1)("designSystems publishing","Potential library publish scope mismatch (monitored by #feat-workspace-library-publishing)",{livegraphPublishScope:e,fileShareSettingPublishScope:eq})}},[eq,e0,eQ]);let[e1,e2]=i.useState(null),e4=i.useContext(es.og),e3=(0,es.UJ)(),e7=(0,es.Xm)();(0,K.SR)();let e5=(0,g.md)((0,X.y6)(e7)),e8=(0,g.md)((0,X.x$)(e7)),e9=(0,f.ZC)(e4);i.useEffect(()=>{e9?.status===b.r.LOADING&&e4.status===b.r.SUCCESS&&(n||tn(new Set(e8)))},[e8,e4,n,e9?.status]);let e6=(0,a.d4)(e=>(0,X.oB)(e,e7)),te=(0,a.d4)(e=>(0,X.JI)(e,e7)),tt=(0,a.d4)(e=>(0,X.Dc)(e,e7)),[tr,tn]=i.useState(()=>new Set(n&&n.size>0?e8.filter(e=>n?.has(e)):e8));i.useEffect(()=>{let e=e=>{"Shift"===e.key&&eI(!0)},r=e=>{"Shift"===e.key&&eI(!1)};return document.addEventListener("keydown",e),document.addEventListener("keyup",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",r)}},[]);let ti=i.useCallback(()=>{eN.publishProgress.state===J.Qx.ASSEMBLING_COMPONENTS&&w(O.TS())},[w,eN.publishProgress.state]),ta=i.useCallback(()=>{ti(),ee(J.o.LIBRARY),w(R.Ce())},[w,ee,ti]);i.useEffect(()=>{eN.publishProgress.state===J.Qx.UPLOADING&&ta()},[ta,eN.publishProgress.state]);let to=(0,f.ZC)(eN),ts=(0,f.ZC)(e8);i.useEffect(()=>{if(to&&ts&&to!==eN){if(ew(null),ts.every(e=>tr.has(e))){tn(new Set(e8));return}tn(new Set(e8.filter(e=>tr.has(e))))}},[e8,tr,eN,eF,e3,eA,ts,to]);let tl=i.useCallback(e=>{let r=[...e5.libraryAssets[J.PW.RESPONSIVE_SET].modified.wellFormed,...e5.libraryAssets[J.PW.CODE_COMPONENT].modified.wellFormed,...e5.variableSets.modified.wellFormed,...e5.styles.modified.wellFormed,...e5.productComponents.modified.wellFormed].map(e=>e.node_id),n=r.indexOf(e);if(null===n)return;let i=new Set(tr),a=!i.has(e);if(ev&&null!==eS){let e=Math.min(n,eS),o=Math.max(n,eS);for(let n=e;n<=o;n++)a?i.add(r[n]):i.delete(r[n])}else a?i.add(e):i.delete(e);tn(i),ew(n)},[tr,eS,e5,ev]),tc=i.useCallback(()=>{e8.length===tr.size?tn(new Set):tn(new Set(e8))},[e8,tr.size]),td=i.useCallback((e,r)=>{e4.status===b.r.SUCCESS&&e4.nodeIdToValidatedMoveInfo[e]&&(e4.nodeIdToValidatedMoveInfo[e].publishType=r)},[e4]),tu=i.useCallback(e=>{ey(e.target.value)},[]),tp=i.useCallback(()=>{let e=eN.used__LIVEGRAPH.localNodeIdToDestinationKey;if(!Object.keys(eN.movedLibraryItems.local).length&&!Object.keys(e).length)return;let r=te.filter(e=>!!eN.movedLibraryItems.local[e.node_id]&&e.status!==J.E8.DELETED&&tr.has(e.node_id)).map(e=>e.node_id),n=new Set(r);for(let i of[...r,...e6.filter(e=>{let r=e.containing_frame?.containingStateGroup?.nodeId,i=r&&eD[r]||null;return!(!eN.movedLibraryItems.local[e.node_id]||e.status===J.E8.DELETED||i&&((0,z.zE)(i)||n.has(i.node_id)))&&tr.has(r||e.node_id)}).map(e=>e.node_id),...tt.filter(r=>!!e[r.node_id]&&r.status!==J.E8.DELETED&&tr.has(r.node_id)).map(e=>e.node_id)]){let e=h.glU.generatePublishableCopy(i);e&&tr.has(i)&&(tr.delete(i),tr.add(e))}},[tr,eD,eN.used__LIVEGRAPH.localNodeIdToDestinationKey,eN.movedLibraryItems.local,e6,te,tt]),tm=(0,B.B)(),th=(0,g.md)((0,X.Iy)(e7)),{currentFileIsFirstDraftKit:t_,currentFileIsDirectGenKit:tg}=(0,V.bj)(),[tf,tE]=i.useState(t_),[ty,tb]=i.useState(!t_||!(0,_.k)().first_draft_legacy_publish_ux||tg);i.useEffect(()=>{(0,_.k)().first_draft_publish_ux?t_&&(tE(!0),tg&&tb(!0)):(tE(!1),tb(!1))},[t_,tg]);let{localKits:tv}=(0,V.Ml)(),{result:tT}=(0,U.C)(tv[0]?.dsKitKey||null,[x.x$.WARNING]),tI=i.useCallback(e=>{let r;if(eC&&th){for(let e of tr){let r=ek[e];if((0,o.Vq)(r)&&r.modes.length>ex){eU(r.modes.length)?eB():(0,T.x1)("designSystems publishing","Blocking publishing of variable collection with too many modes, but upsell is not available",{collectionId:e});return}}if(e4.status===b.r.SUCCESS){let e=Object.keys(e4.nodeIdToValidatedMoveInfo).filter(e=>tr.has(e)&&"MOVE"===e4.nodeIdToValidatedMoveInfo[e].publishType),n=[...Object.values(eP),...Object.values(eD),...Object.values(eR)].reduce((e,r)=>(e4.nodeIdToValidatedMoveInfo[r.node_id]&&r.old_key&&(e[r.node_id]=r.old_key),e),Object.create(null)),i=e6.filter(z.ad);r=(0,z.Cj)(e,n,i)}tp(),w(O.ZS({savepointDescription:eE,itemsToPublish:tr,libraryModalSessionId:m,moveInformation:r,hubFileId:e||void 0,firstDraftVariablesForTheme:tm,publishScope:eX,localAssetsWithDenormalizedPublishInfo:eM.data??{},publishAsFirstDraftKit:tf,isDirectGenCompatible:ty}))}},[eC,th,e4,tp,w,eE,tr,eX,ek,eM.data,ex,eU,eB,eP,eD,eR,e6,tm,m,tf,ty]),tS=i.useCallback(()=>{tf&&w(O.iA({publishAsFirstDraftKit:tf,isDirectGenCompatible:ty,firstDraftVariablesForTheme:tm}))},[w,tm,ty,tf]),tw=(0,D.JT)(),tA=(0,a.d4)(X.Mh),tC=(0,a.d4)(X.Pd),{invalidExampleIds:tN,isPublishingInvalidExamples:tL}=(0,ec.c)({modifiedComponents:e5.productComponents.modified.wellFormed,modifiedStateGroups:e5.stateGroups.modified.wellFormed,publishedHubFileComponents:tA,publishedHubFileStateGroups:tC,itemsToPublish:tr,publishingMode:H}),tO=i.useMemo(()=>"loaded"!==eM.status||tL,[tL,eM.status]),tR=i.useCallback(e=>{if(!eC)return;let r=v.Ay.mac?e.metaKey:e.ctrlKey;e.keyCode===E.Uz.ENTER&&r&&!tO&&(tI(),e.preventDefault(),e.stopPropagation())},[eC,tI,tO]);if(!eC)return null;let tP=H===J.o.HUBFILE?(0,N.tx)("design_systems.publishing_modal.modal_header_community_library"):(0,N.tx)("design_systems.publishing_modal.modal_header");if(e4.status===b.r.LOADING)return i.createElement(i.Fragment,null,(0,_.k)().ds_fpl_publishing_modal?i.createElement(l.bL,{manager:P,width:"lg",height:"fixed"},i.createElement(c.vo,null,i.createElement(c.Y9,null,i.createElement(c.hE,null,tP)),i.createElement(c.nB,null,i.createElement(i.Fragment,null,(0,_.k)().ds_fpl_publishing_modal?i.createElement(d.k,null):i.createElement(A.kt,{className:ef.S}))))):i.createElement(ea.aF,{size:480,title:tP,titleClassName:ef.GK,className:ef.vn,onKeyDown:tR,onHide:ti},(0,_.k)().ds_fpl_publishing_modal?i.createElement(d.k,null):i.createElement(A.kt,{className:ef.S})));let tD=eA?.team,tM=e7&&Object.keys(e7).some(e=>!!tr.has(e)&&!eR[e]&&e7[e]&&"MOVE"===e7[e].publishType),tk=e5.productComponents.modified.wellFormed.length,tF=e5.styles.modified.wellFormed.length,tU=e5.variableSets.modified.wellFormed.length,tB=(0,Z.O)(J.PW.RESPONSIVE_SET)?e5.libraryAssets[J.PW.RESPONSIVE_SET].modified.wellFormed.length:0,tV=(0,Z.O)(J.PW.CODE_COMPONENT)?e5.libraryAssets[J.PW.CODE_COMPONENT].modified.wellFormed.length:0,tG=i.createElement(el.C,{canPublishComponentsAndStateGroups:eV,closeModal:ta,disablePublishButton:tO,editingFile:eC,firstDraftValidationStatus:tf?(0,U.O)(tT):"not_applicable",hasItemsToPublish:0!==tr.size,hasNewLibraryItems:e$,hasWorkspace:e0.data?.file?.workspaceId!==null,isLoadingPublishScope:!eY,numModifiedAssets:tU+tF+tk+tB+tV,org:eG&&eH[eG]?eH[eG]:null,publish:tI,publishProgress:eN.publishProgress,publishScope:eX,publishedHubFile:tw,setPublishScope:eJ,updateFirstDraftMetadata:(0,_.k)().first_draft_api_publish?tS:void 0,workspaceName:e0.data?.file?.computedWorkspace?.workspace?.name}),tH=i.createElement(i.Fragment,null,i.createElement("div",{className:ef.Kl},i.createElement("div",{className:e1?ef.Ye:ef.dJ,style:{display:e1?"none":void 0}},i.createElement("div",{className:ef.YT},i.createElement(eo.l,null),S?i.createElement("div",{className:ef.PP},i.createElement(C.IW,{focusOnMount:!1,query:en,clearSearch:()=>em(""),onChange:em,recordingKey:"publishingModalSearchBar",withUI3Icon:!0,smallFont:!0,hasTransparentBackground:!0})):i.createElement(C.Lp,{className:ef.vD,focusOnMount:!1,query:en,clearSearch:()=>em(""),onChange:em,recordingKey:"publishingModalSearchBar"}),!en&&i.createElement("div",{className:ef.iQ},i.createElement(et.v,{className:ef.Bl,placeholder:(0,N.t)("design_systems.publishing_modal.description_placeholder"),value:eE,onChange:tu,dir:"auto"}))),i.createElement(eb,{itemsToPublish:tr,onLibraryItemRowCheckboxToggle:tl,onTogglePublishAll:tc,setItemsToPublish:tn,onChangeMoveOptionForItem:td,assetQuery:en,showVariableCollectionOverview:e2,invalidAssetIds:tN}),!eG&&!eV&&ez>0&&i.createElement(eT,{numComponentsToUpsell:ez,isStarterLibrary:eW,team:tD}),tM&&i.createElement(ed.F,null),r&&i.createElement(ep.r,null),tL&&i.createElement(eu.K,null),(0,_.k)().first_draft_publish_ux&&i.createElement("div",{className:ef.H_},i.createElement(u.S,{label:i.createElement(p.J,null,"Publish as First Draft kit"),checked:tf,onChange:e=>{tE(e)}}),(0,_.k)().first_draft_legacy_publish_ux&&tf&&i.createElement(u.S,{label:i.createElement(p.J,null,"Publish as a legacy kit (no direct generation)"),checked:!ty,onChange:e=>{tb(!e)}}),i.createElement(G.o,{validationResults:tT})),!(0,_.k)().ds_fpl_publishing_modal&&tG),e1&&i.createElement("div",{className:ef.dJ},i.createElement(eg.Q,{variableCollection:e1.variableCollection,view:e1.view,drillUp:()=>e2(null)}))));return i.createElement(i.Fragment,null,(0,_.k)().ds_fpl_publishing_modal?i.createElement(l.bL,{manager:P,width:"lg",htmlAttributes:{"data-testid":"publishing-modal"}},i.createElement(c.vo,null,i.createElement(c.Y9,null,i.createElement(c.hE,null,tP)),i.createElement(c.nB,{scrolling:"none",padding:0},tH),!e1&&i.createElement(c.wi,null,tG))):i.createElement(ea.aF,{size:480,title:tP,titleClassName:ef.GK,className:ef.vn,onKeyDown:tR,onHide:ti,"data-testid":"publishing-modal"},i.createElement(I.s_,{dispatch:w,onClose:()=>{ee(J.o.LIBRARY)},customStyle:S?{top:8,right:12}:{top:6,right:6}}),tH))}function eb(e){let[r,n]=i.useState(!1),o=()=>{n(!r)},[s,l]=i.useState(!1),c=()=>{l(!s)},[d,u]=i.useState(!1),p=()=>{u(!d)},m=(0,es.Xm)(),h=(0,es.UJ)(),f=(0,g.md)((0,X.y6)(m)),[E,y,b,v,T,I,A,C,L,O,R,P,D,M,k,F,x,U,B,V]=i.useMemo(()=>[f.libraryAssets[J.PW.RESPONSIVE_SET].modified.wellFormed,f.libraryAssets[J.PW.RESPONSIVE_SET].modified.erroneous,f.libraryAssets[J.PW.RESPONSIVE_SET].unmodified.published,f.libraryAssets[J.PW.RESPONSIVE_SET].unmodified.unpublished,f.libraryAssets[J.PW.CODE_COMPONENT].modified.wellFormed,f.libraryAssets[J.PW.CODE_COMPONENT].modified.erroneous,f.libraryAssets[J.PW.CODE_COMPONENT].unmodified.published,f.libraryAssets[J.PW.CODE_COMPONENT].unmodified.unpublished,f.variableSets.modified.wellFormed,f.variableSets.modified.erroneous,f.variableSets.unmodified.published,f.variableSets.unmodified.unpublished,f.variableSetsWithHiddenVariables.modified.wellFormed,f.styles.modified.wellFormed,f.styles.unmodified.published,f.styles.unmodified.unpublished,f.productComponents.modified.wellFormed,f.productComponents.modified.erroneous,f.productComponents.unmodified.published,f.productComponents.unmodified.unpublished].map(r=>e.assetQuery?r.filter(r=>r.name.toLocaleLowerCase().trim().includes(e.assetQuery.toLocaleLowerCase())):r),[f.libraryAssets,f.productComponents.modified.erroneous,f.productComponents.modified.wellFormed,f.productComponents.unmodified.published,f.productComponents.unmodified.unpublished,f.styles.modified.wellFormed,f.styles.unmodified.published,f.styles.unmodified.unpublished,f.variableSets.modified.wellFormed,f.variableSets.modified.erroneous,f.variableSets.unmodified.published,f.variableSets.unmodified.unpublished,f.variableSetsWithHiddenVariables.modified.wellFormed,e.assetQuery]),G=i.useMemo(()=>new Set(M.concat(L).concat(x).concat((0,Z.O)(J.PW.RESPONSIVE_SET)?E:[]).concat((0,Z.O)(J.PW.CODE_COMPONENT)?T:[]).map(e=>e.node_id)),[E,T,L,x,M]),K=L.length>0||P.length>0||D.length>0,W=(0,a.d4)(X.Wz),$=(r,n,a,o)=>{for(let s of r=(0,_.k)().ds_reorder_collections?(0,en.BT)(r):r){let r=m?.[s.node_id],l=!1;if(s.type===J.PW.STATE_GROUP){let e=!r||"FORCED_COPY"===r.publishType,n=(W[s.node_id]??[]).some(e=>h.has(e.node_id));l=e&&n}let c=i.createElement(em.v,{key:s.node_id,hasChangedVariables:K,includeLeftAccessory:a,isChecked:e.itemsToPublish.has(s.node_id),isInvalid:e.invalidAssetIds.has(s.node_id),isUnmovableStateGroupWithMovableState:l,isVariableSetWithPrivateVariables:o,libraryItem:s,moveInfo:(0,z.Hb)(s.status)&&r||null,onChangeMoveOptionForItem:e.onChangeMoveOptionForItem,onCheckBoxToggle:e.onLibraryItemRowCheckboxToggle,showVariableCollectionOverview:e.showVariableCollectionOverview}),d=o?"-hiddenVariables":"";Y(c,`library-item-row-${s.node_id}${d}`,46,n)}},Y=(e,r,n,i)=>{let a=w.oz.getNextRenderedElementTop(i);i.push({parent:null,type:w.zq.ROW,top:a,element:e,key:r,height:n,sectionNameForTracking:void 0})},j=(()=>{let n=[],a=L.length+M.length+x.length+((0,Z.O)(J.PW.RESPONSIVE_SET)?E.length:0)+((0,Z.O)(J.PW.CODE_COMPONENT)?T.length:0),l=R.length+k.length+B.length+((0,Z.O)(J.PW.RESPONSIVE_SET)?b.length:0)+((0,Z.O)(J.PW.CODE_COMPONENT)?A.length:0),u=P.length+V.length+F.length+D.length+((0,Z.O)(J.PW.RESPONSIVE_SET)?v.length:0)+((0,Z.O)(J.PW.CODE_COMPONENT)?C.length:0),m=U.length+O.length+((0,Z.O)(J.PW.RESPONSIVE_SET)?y.length:0)+((0,Z.O)(J.PW.CODE_COMPONENT)?I.length:0);m&&(Y(i.createElement(e_.Zq,{header:(0,N.tx)("design_systems.publishing_modal.invalid_components_with_count",{countString:i.createElement(e_.y_,{count:m})}),caretToggle:{isExpanded:d},onClick:p}),"erroneous",32,n),d&&($(U,n,em.o.TARGET),$(O,n)));let h=e.assetQuery?[...e.itemsToPublish].filter(e=>G.has(e)):[...e.itemsToPublish],g=e.assetQuery?[...e.itemsToPublish].filter(e=>!G.has(e)):[],f=h.length;if(a){let r;if(r=f===a||f>0&&f<a&&H.oV,Y(i.createElement(e_.D3,{header:(0,N.tx)("design_systems.publishing_modal.changes_header_with_count",{countString:i.createElement(e_.y_,{count:f,total:a})}),checkboxValue:r,onClick:()=>{e.assetQuery?a===f?e.setItemsToPublish(new Set(g)):e.setItemsToPublish(new Set([...e.itemsToPublish,...G])):e.onTogglePublishAll()}}),"changed:header",32,n),L.length>0&&Y(i.createElement("div",{className:ef.et},(0,N.tx)("design_systems.publishing_modal.variable_collections")),"variableSet:header",32,n),$(L,n,em.o.CHECKBOX),(0,Z.O)(J.PW.RESPONSIVE_SET)&&(E.length>0&&Y(i.createElement("div",{className:ef.et},"Site blocks"),"responsiveSet:header",32,n),$(E,n,em.o.CHECKBOX)),(0,Z.O)(J.PW.CODE_COMPONENT)&&(T.length>0&&Y(i.createElement("div",{className:ef.et},"Code components"),"codeComponent:header",32,n),$(T,n,em.o.CHECKBOX)),(0,_.k)().dse_templates_proto){let e=x.filter(z.Fl);e.length>0&&(Y(i.createElement("div",{className:ef.et},(0,N.tx)("design_systems.publishing_modal.templates")),"templates:header",32,n),$(e,n,em.o.CHECKBOX))}M.length>0&&Y(i.createElement("div",{className:ef.et},(0,N.tx)("design_systems.publishing_modal.styles")),"styles:header",32,n),$(M,n,em.o.CHECKBOX),x.length>0&&Y(i.createElement("div",{className:ef.et},(0,N.tx)("design_systems.publishing_modal.components")),"components:header",32,n),(0,_.k)().dse_templates_proto?$(x.filter(e=>!(0,z.Fl)(e)),n,em.o.CHECKBOX):$(x,n,em.o.CHECKBOX)}return l&&(Y(i.createElement(e_.Zq,{header:(0,N.tx)("design_systems.publishing_modal.unchanged_header_with_count",{countString:i.createElement(e_.y_,{count:l})}),caretToggle:{isExpanded:r},onClick:o}),"unchanged:header",32,n),r&&($(R,n),$(k,n),$(B,n),(0,Z.O)(J.PW.RESPONSIVE_SET)&&$(b,n),(0,Z.O)(J.PW.CODE_COMPONENT)&&$(A,n))),u&&(Y(i.createElement(e_.Zq,{header:(0,N.tx)("design_systems.publishing_modal.hidden_header_with_count",{countString:i.createElement(e_.y_,{count:u})}),caretToggle:{isExpanded:s},onClick:c}),"private:header",32,n),s&&(Y(i.createElement("div",{className:ef.m_},(0,N.tx)("design_systems.publishing_modal.these_wont_be_published")),"private:subheader",22,n),$(P,n),$(D,n,void 0,!0),$(F,n),$(V,n),(0,Z.O)(J.PW.RESPONSIVE_SET)&&$(v,n),(0,Z.O)(J.PW.CODE_COMPONENT)&&$(C,n))),n})();return i.createElement(S.O,{scrollContent:j,isList:!0,recordingKey:"publishingModalLibraryList",getViewportHeight:e=>e-200,width:(0,_.k)().ds_fpl_publishing_modal?void 0:480,className:(0,_.k)().ds_fpl_publishing_modal?ef.jG:ef.eF,renderEmptyState:!j.length&&e.assetQuery?()=>i.createElement(ev,{assetQuery:e.assetQuery}):void 0})}function ev({assetQuery:e}){return i.createElement("div",{className:ef.VX},(0,N.tx)("design_systems.publishing_modal.empty_search_result",{assetQuery:e}))}function eT({numComponentsToUpsell:e,isStarterLibrary:r,team:n}){let a=n?(0,_.k)().ds_fpl_publishing_modal?i.createElement(m.N,{newTab:!0,trusted:!0,href:`/files/upgrade-team/${n.id}`},(0,N.tx)("design_systems.publishing_modal.upgrade_team")):i.createElement("a",{className:ef.nf,target:"_blank",rel:"noopener",href:`/files/upgrade-team/${n.id}`},(0,N.tx)("design_systems.publishing_modal.upgrade_team")):(0,_.k)().ds_fpl_publishing_modal?i.createElement(m.N,{newTab:!0,trusted:!0,href:"/files/create-team"},(0,N.tx)("design_systems.publishing_modal.create_a_professional_team")):i.createElement("a",{className:ef.nf,target:"_blank",rel:"noopener",href:"/files/create-team"},(0,N.tx)("design_systems.publishing_modal.create_a_professional_team")),o=r?(0,N.tx)("design_systems.publishing_modal.starter_library_upsell",{numComponents:e}):(0,N.tx)("design_systems.publishing_modal.standard_upsell",{numComponents:e,teamUpsellLink:a});return i.createElement("div",{className:ef.UX,"data-testid":"libraryPublishModalUpsell"},o)}},849942:(e,r,n)=>{n.d(r,{BT:()=>c,EH:()=>u,RR:()=>p,cw:()=>d});var i=n(445777),a=n(373112),o=n(442313),s=n(449737),l=n(931516);function c(e){return[...e].sort((e,r)=>{if(!("sortPosition"in e)||null===e.sortPosition)return 1;if(!("sortPosition"in r)||null===r.sortPosition)return -1;let n=-(0,a.Ez)(e.sortPosition,r.sortPosition);return 0!==n?n:e.node_id>r.node_id?1:-1})}function d(e){switch(e){case l.E8.CHANGED:return(0,o.tx)("design_systems.publishing_modal.modified");case l.E8.CURRENT:return(0,o.tx)("design_systems.publishing_modal.no_changes");case l.E8.DELETED:return(0,o.tx)("design_systems.publishing_modal.removed");case l.E8.NEW:return(0,o.tx)("design_systems.publishing_modal.added");case l.E8.NOT_STAGED:return"";default:(0,i.xb)(e)}}function u(e,r){return s.to({type:{type:"PublishingModal"},data:{initiallyCheckedItemIDs:e,timedOut:r}})}var p=(e=>(e.ASSET_PANEL_LIBRARY_CONTEXT_MENU="asset_panel_library_context_menu",e.COMPONENT_PUBLISH_ERROR_NOTIFICATION="component_publish_error_notification",e.FILENAME_VIEW_DROPDOWN="filename_view_dropdown",e.FULLSCREEN_MOVE_COMPONENTS_PROMPT="fullscreen_move_components_prompt",e.FULLSCREEN_OTHER="fullscreen_other",e.LIBRARY_MODAL_OVERVIEW="library_modal_overview",e.LIBRARY_MODAL_FILE_VIEW="library_modal_file_view",e.LIBRARY_MODAL_UPSELL_UI3="library_modal_upsell_ui3",e.PROPERTIES_PANEL="properties_panel",e.PUBLISH_UPSELL_MODAL="publish_upsell_modal",e.UNPUBLISHED_PREFERRED_VALUES_WARNING="unpublished_preferred_values_warning",e.COOPER_PUBLISH_SECTION="cooper_publish_section",e.TEST="test",e))(p||{})},807024:(e,r,n)=>{n.d(r,{KU:()=>g,Md:()=>y,Nr:()=>E,Pc:()=>m,VB:()=>b,dm:()=>_,l0:()=>p,lM:()=>d,wM:()=>u});var i=n(445777),a=n(741419),o=n(579020),s=n(627855),l=n(79563),c=n(931516);function d(e,r){let n={name:"",type:"STYLE_FOLDER",level:0,styles:[],subfolders:[],styleTypeSection:r};return e.forEach(e=>{let i=n,a=(0,l.ke)(e.name);a.pop(),a.forEach(e=>{let n=i.name?i.name+"/"+e:e,a=i.subfolders.find(e=>e.name===n);if(!a){let e={name:n,type:"STYLE_FOLDER",level:i.level+1,styles:[],subfolders:[],styleTypeSection:r};i.subfolders.push(e),a=e}i=a}),i.styles.push(e)}),n}function u(e){if(!e.length)return[];let r=d(e,e[0].style_type),n=[],i=e=>{e.styles.length>0&&n.push(e.name),e.subfolders.forEach(i)};return i(r),n}function p(e){let r=[...e.subfolders].reverse(),n=[...e.styles];for(;r.length>0;){let e=r.pop();e&&(n.push(e),n.push(...e.styles),r.push(...[...e.subfolders].reverse()))}return n}function m(e){return e.split("/").filter(e=>e).map(e=>e.trim()).join("/")}function h(e){return"STYLE_FOLDER"===e.type?e.name:(0,l.In)(e.name)}function _(e){return p(e).filter(e=>e.type===c.PW.STYLE)}function g(e){return p(e).filter(e=>"STYLE_FOLDER"===e.type)}function f(e){return e.type===c.PW.STYLE?(0,l.ke)(e.name).length:e.level}function E(e,r){(0,s.Oo)(e,r)&&(a.glU.deleteNode(e.node_id),(0,o.sx)("Style Deleted",{styleType:e.style_type,from:"styleListContextMenu"}))}function y(e,r,n,i){if(!e&&!n||!r)return!1;let a=!i&&""!==i||"STYLE_FOLDER"===r.type&&n===r&&e?.type===c.PW.STYLE&&f(e)>f(n)&&i!==(0,l.In)(r.name);return!(e===r||n===r&&(r.type===c.PW.STYLE||!a)||"STYLE_FOLDER"===r.type&&(e?.type===c.PW.STYLE&&n?.type===c.PW.STYLE||e?.type==="STYLE_FOLDER"&&n?.type===c.PW.STYLE||e&&(h(e)+"/").startsWith(r.name+"/")||n&&(h(n)+"/").startsWith(r.name+"/")&&!a))}function b(e,r,n,o,s,u,m){if(e.forEach(e=>{(function(e,r){let n=e.filter(e=>e.type===c.PW.STYLE).map(e=>e.node_id),i=[];r.forEach(e=>{n.indexOf(e.node_id)>-1&&i.push(e)});let a=e[0],o=p(d(i,a.type===c.PW.STYLE?a.style_type:a.styleTypeSection)).filter(e=>e.type===c.PW.STYLE);for(let e=0;e<n.length;e++)if(n[e]!==o[e].node_id)return!0;return!1})(s=function(e,r){let n=new Set,i=new Set;for(let r of e)(r.type===c.PW.STYLE?[r]:(function e(r){let n=[];return r.styles.forEach(e=>{n.push(e)}),r.subfolders.forEach(r=>{n.push(r),n.push(...e(r))}),n})(r).concat([r])).forEach(e=>e.type===c.PW.STYLE?i.add(e.node_id):n.add(e.name));return r.filter(e=>"STYLE_FOLDER"===e.type?!n.has(e.name):!i.has(e.node_id))}([e],s),u)&&(u=v(e,s,u))}),!s)return;let h=new Set(e.map(e=>"STYLE_FOLDER"===e.type||m?function(e,r,n,a){if(!e)return a.some(e=>e.type===c.PW.STYLE&&""===(0,l.In)(e.name))?null:-1;if(!r)return n.length-1;let o=n.map(e=>e.node_id);if(e.type===c.PW.STYLE&&r.type===c.PW.STYLE||"STYLE_FOLDER"===e.type&&r.type===c.PW.STYLE)return null;if(e.type===c.PW.STYLE&&"STYLE_FOLDER"===r.type&&f(e)===f(r)){let n=o.indexOf(e.node_id),i=function(e,r){let n=_(e),i=new Set(r.filter(e=>e.type===c.PW.STYLE).map(e=>e.node_id)),a=n[0];return n.forEach(e=>{e.sort_position&&a.sort_position&&e.sort_position<a.sort_position&&i.has(e.node_id)&&(a=e)}),a}(r,a),s=o.indexOf(i.node_id);return n<s?n:s-1}{let s=a.indexOf(r);if(-1!==s){let e=a.slice(s,a.length).find(e=>e.type===c.PW.STYLE);if(!e)return n.length-1;let r=o.indexOf(e.node_id);return(0,i.KF)(-1!==r,"style to insert before does not exist in the stored list"),r-1}{let r=a.indexOf(e),s=a.slice(r+1).reverse().find(e=>e.type===c.PW.STYLE);if(!s)return n.length-1;let l=o.indexOf(s.node_id);return(0,i.KF)(-1!==l,"style to insert after does not exist in the stored list"),l}}}(r,n,u,s):function(e,r,n,a){if(!e)return -1;if(!r)return n.length-1;let o=n.map(e=>e.node_id);if(e.type===c.PW.STYLE&&"STYLE_FOLDER"===r.type)return o.indexOf(e.node_id);{let e=a.indexOf(r),s=a.slice(e,a.length).find(e=>e.type===c.PW.STYLE);if(!s)return n.length-1;let l=o.indexOf(s.node_id);return(0,i.KF)(-1!==l,"style to insert before does not exist in the stored list"),l-1}}(r,n,u,s)));if(h.size>1||h.has(null))return;let g=h.values().next().value,E=u[g],y=u[g+1],b=new Map,T=E;for(let r of e){let e=r=>{r.type===c.PW.STYLE?(a.glU.insertStyleBetween(r.node_id,T?.node_id||"",y?.node_id||""),T=r):(r.styles.forEach(r=>{e(r)}),r.subfolders.forEach(r=>{e(r)}))};e(r);let n=""===o?[]:o.split("/"),i=[...n,(0,l.kH)(r.name)];if(i.join("/")!==r.name){let e=(r,n)=>{if(r.type===c.PW.STYLE){let e=[...n,(0,l.kH)(r.name)].join("/");b.set(r.node_id,e),a.glU.renameNode(r.node_id,e)}else b.set(r.name,n.join("/")),r.styles.forEach(r=>{e(r,n)}),r.subfolders.forEach(r=>{let i=[...n,(0,l.kH)(r.name)];e(r,i)})};e(r,"STYLE_FOLDER"===r.type?i:n)}else b.set("STYLE_FOLDER"===r.type?r.name:r.node_id,r.name)}return b}let v=(e,r,n)=>{let i=(0,l.ke)(e.name);e.type===c.PW.STYLE&&i.pop();let o=r.filter(e=>e.type===c.PW.STYLE),s=[];for(;i.length;){let e=i.join("/");if(0===(s=o.filter(r=>(0,l.In)(r.name).startsWith(e))).length)i.pop();else break}if(s.length){let r,i=s[0];s.forEach(e=>{null!=e.sort_position&&null!=i.sort_position&&e.sort_position<i.sort_position&&(i=e)}),r=e.type===c.PW.STYLE?e:_(e)[0];let o=n.indexOf(r),l=n[o-1],d=n[o+1];a.glU.insertStyleBetween(i.node_id,l?.node_id||"",d?.node_id||"");let u=[...n];return u.splice(u.indexOf(i),1),u.splice(u.indexOf(l)+1,0,i),u}return n}},411302:(e,r,n)=>{n.d(r,{Mz:()=>M,RL:()=>F,TM:()=>B,a7:()=>k,se:()=>U});var i=n(848318),a=n(716544),o=n(992277),s=n(781131),l=n(741419),c=n(157907),d=n(39773),u=n(579020),p=n(541525);n(730169),n(397579);var m=n(427193),h=n(502255),_=n(896966),g=n(442313),f=n(697714),E=n(926252),y=n(255234),b=n(449737),v=n(912712),T=n(773422),I=n(418039),S=n(369600);n(169320),n(661780);var w=n(792478),A=n(870769),C=n(24158),N=n(256054),L=n(264917),O=n(931516),R=n(432676),P=n(815493);function D(){(0,h.$D)(o.e.SCENEGRAPH_AND_SYNC,Error("Query for library consumers aborted during reconnect"))}async function M(e){let r=(0,v.Ak)(),n=(0,v.Ki)(r),{componentKeys:i,localIds:a}=e.reduce((e,r)=>(r.component_key&&e.componentKeys.push(r.component_key),e.componentKeys.push(...r.oldSubscribedKeysToUpdate),e.localIds.push(...r.localIdsToUpdate),e),{componentKeys:[],localIds:[]});l.BXd.downloadAllSubscribedInstancesForUpdate(i,[],a,r);try{await n}catch(e){D()}}async function k(e){let r=(0,v.Ak)(),n=(0,v.Ki)(r),{componentKeys:i,stateGroupKeys:a,localIds:o}=e.reduce((e,r)=>{for(let[n,i]of(e.stateGroupKeys.push(r.key),Object.entries(r.newStateKeyToOutdatedItems)))e.componentKeys.push(n,...i.oldSubscribedKeysToUpdate),e.localIds.push(...i.localIdsToUpdate);return e},{componentKeys:[],stateGroupKeys:[],localIds:[]});l.BXd.downloadAllSubscribedInstancesForUpdate(i,a,o,r);try{await n}catch(e){D()}}async function F(e){let r=(0,v.Ak)(),n=(0,v.Ki)(r),{styleKeys:i,localIds:a}=e.reduce((e,r)=>(e.styleKeys.push(r.key,...r.oldSubscribedKeysToUpdate),e.localIds.push(...r.localIdsToUpdate),e),{styleKeys:[],localIds:[]});l.BXd.downloadAllSubscribedStyleConsumersForUpdate(i,a,r);try{await n}catch(e){D()}}async function x(e){let r={[O.PW.CODE_COMPONENT]:[]};for(let n of e)r[n.type].push(n.key);let n=[];for(let e of Object.keys(r))if(r[e].length&&e===O.PW.CODE_COMPONENT){let i=(0,v.Ak)(),a=(0,v.Ki)(i);n.push(a),l.BXd.downloadAllSubscribedCodeInstancesForUpdate(r[e],i)}try{await Promise.all(n)}catch(e){D()}}function U(e,r=A.aD.ALL,n){let o=(0,a.wA)(),h=(0,N.bA)(r),w=(0,d.md)(S.yV),{scopedComponentUpdates:O,scopedStateGroupUpdates:B,scopedStyleUpdates:V,scopedVariableSetUpdates:G,scopedLibraryAssetUpdates:H}=(0,d.md)(h),K=(0,a.d4)(I.c),W=K.file_key,z=w?.parentOrgId?.toString(),$=K.file_team_id?.toString(),Y=K.productType,{sessionId:j}=(0,P.sz)()??{},q=(0,T.wM)(G.map(e=>e.key)),X=i.useCallback((e,n)=>{if(Object.values(R.AX).includes(e)){let r=e===R.AX.REVIEW_INSTANCE_UPDATES_MODAL_UPDATE_INSTANCE||e===R.AX.DROPDOWN_UPDATE_SELECTED_INSTANCE;return`Instance Actions Menu > ${e} > ${r?"Update instance":"Update all"}`}return Object.values(R.r6).includes(e)?`${e} > Updates Modal > ${r} > ${n?"Update all":"Update"}`:""},[r]),Z=(0,L.He)(),J=(0,C.T)(),Q=i.useCallback(async(r,n)=>{let i=l.BXd.getTimestampForLibraryUpdateStart();(0,v.Ff)()&&await M(r),await o(E.rX({components:r,usedItemsByKey:e,instanceIdsToUpdate:n??[],updateStartTime:i,subscribedLibraryKeys:Z,fileSubscribedLibraryKeys:J}))},[o,e,Z,J]),ee=i.useCallback(async(r,n)=>{let i=l.BXd.getTimestampForLibraryUpdateStart();(0,v.Ff)()&&await k(r),await o(E.As({stateGroups:r,usedItemsByKey:e,instanceIdsToUpdate:n??[],updateStartTime:i,subscribedLibraryKeys:Z,fileSubscribedLibraryKeys:J}))},[o,e,Z,J]),et=i.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();(0,v.Ff)()&&await F(e),await o(E.t5({styles:e,updateStartTime:r,subscribedLibraryKeys:Z,fileSubscribedLibraryKeys:J}))},[o,Z,J]),er=i.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();if((0,v.Ff)()){let r=(0,v.Ak)(),n=(0,v.Ki)(r);l.BXd.downloadAllSubscribedVariableSetConsumersForUpdate(e.map(e=>e.key),r);try{await n}catch(e){D()}for(let r of e){let e=[];if(r.libraryVariableIdsForUpdate){for(let[n,i]of l.CWU.getUsedSubscribedVariablesInSetByVariableKey(r.key)){let r=q[(0,s.ey)(n)];r&&(i.size>0||!i.has(r.version))&&e.push(`VariableID:${n}/${r.version}`)}r.libraryVariableIdsForUpdate=e}else(0,_.x1)("variables","Expected variableSet to be an UpdateRootVariableSet")}}let n=l.CWU?.getSubscribedVariableSetsInfo(),i=new Map(n?.map(e=>[e.id.toString().split("/")[0],e.defaultModeID]));await o(E._K({variableSets:e,updateStartTime:r}));let a=l.CWU?.getSubscribedVariableSetsInfo(),c=!1;if(!a)return!1;for(let e of a)if(i.get(e.id.toString().split("/")[0])!==e.defaultModeID){c=!0;break}return c},[o,q]),en=i.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();(0,v.Ff)()&&await x(e),await o(E.f$({assets:e,updateStartTime:r}))},[o]),ei=i.useCallback(async e=>{await en([e])},[en]),ea=i.useCallback((e,r)=>{Q([e],r),u.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:W,fileParentOrgId:z,fileTeamId:$,productType:Y,libraryModalSessionId:j,components:[e.component_key].toString(),entrypoint:X(n,!1)})},[n,W,z,$,X,Y,Q,j]),eo=i.useCallback((e,r)=>{ee([e],r),u.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:W,fileParentOrgId:z,fileTeamId:$,productType:Y,libraryModalSessionId:j,stateGroups:[e.key].toString(),entrypoint:X(n,!1)})},[n,W,z,$,X,Y,ee,j]),es=i.useCallback(e=>{et([e]),u.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:W,fileParentOrgId:z,fileTeamId:$,productType:Y,libraryModalSessionId:j,styles:[e.key].toString(),entrypoint:X(n,!1)})},[n,W,z,$,X,Y,et,j]),el=i.useCallback(async e=>{let r=await er([e]);u.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:W,fileParentOrgId:z,fileTeamId:$,libraryModalSessionId:j,productType:Y,variableSets:[e.key].toString(),entrypoint:X(n,!1)}),(0,c.k)().ds_reorder_modes&&r&&o(f.F.enqueue({type:"default-mode-changed",message:(0,g.t)("variables.authoring_modal.default_mode_changed")}))},[er,W,z,$,j,Y,X,n,o]),ec=(0,p.U)();return{updateComponent:ea,updateStateGroup:eo,updateStyle:es,updateVariableSet:el,updateLibraryAsset:ei,updateAll:i.useCallback(async()=>{ec("library.update_all.attempt",{},{forwardToDatadog:!0});let e=new m.jk("updateAll",{});e.start();try{let r=O.length+B.length+V.length+G.length;o(y.ni({total:r})),o(b.Ce()),u.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:W,fileParentOrgId:z,fileTeamId:$,productType:Y,libraryModalSessionId:j,components:O.map(e=>e.component_key).toString(),stateGroups:B.map(e=>e.key).toString(),styles:V.map(e=>e.key).toString(),variableSets:G.map(e=>e.key).toString(),entrypoint:X(n,!0)}),await Q(O,void 0),await ee(B,void 0),await et(V);let i=await er(G);await en(H),o(y.kX()),(0,c.k)().ds_reorder_modes&&i&&o(f.F.enqueue({type:"default-mode-changed",message:(0,g.t)("variables.authoring_modal.default_mode_changed")}));let a=e.stop();ec("library.update_all.success",{elapsedMs:a},{forwardToDatadog:!0})}catch(r){throw o(y.V2()),ec("library.update_all.failure",{elapsedMs:e.stop()},{forwardToDatadog:!0}),r}},[Q,O,H,en,ee,B,et,V,er,G,W,z,$,Y,X,n,o,ec,j])}}function B(e,r){let{updateComponent:n,updateStateGroup:o}=U(e,void 0,r),s=(0,a.wA)(),c=i.useCallback((e,r)=>{let n=l.glU.getOutdatedStyleConsumers(r);s(E.Qn({styleUpdateInfo:e,oldStyleGUID:r,consumerGUIDsToUpdate:n}))},[s]);return{updateIndividualInstances:i.useCallback((e,r)=>{for(let r of Object.values(e))n(r.updateAsset,r.instanceIdsToUpdate);for(let e of Object.values(r))o(e.updateAsset,e.instanceIdsToUpdate)},[n,o]),updateAllConsumersOfStyleVersion:c}}(0,w.rt)(!1)},626821:(e,r,n)=>{n.d(r,{$3:()=>x});var i=n(848318),a=n(716544),o=n(776402),s=n(777611),l=n(731755),c=n(493554),d=n(303035),u=n(473889),p=n(882439),m=n(975512),h=n(442313),_=n(186323),g=n(496431),f=n(449737),E=n(180423),y=n(155651),b=n(486934),v=n(976308),T=n(92537),I=n(369600),S=n(841747),w=n(834996),A=n(376780),C=n(635547),N=n(710665),L=n(694253),O=n(920963),R=n(988540),P=n(183905),D=n(464012),M=n(849942),k=n(515071),F=n(449476);let x=(0,D.Ju)(function(e){let r=(0,I.q5)(),{team:n,afterFileMove:o}=e,s=(0,a.wA)(),l=(0,S.FC)(),c=(0,w._6)(),d=()=>{s(f.to({type:F.dD,data:{entrypoint:M.RR.PUBLISH_UPSELL_MODAL}}))},u=(0,N.w5)(n);return r?n&&(0,L.canEditTeam)(n.id,l)&&!u?i.createElement(k.bP,{team:n,resource:R.Bi.TEAM_LIBRARY,action:P.pE.PUBLISH_COMPONENTS,editorType:A._Y.DESIGN,onStarterPlanCtaClick:d,currentPlan:v.F.Plan.STARTER,upsellPlan:v.F.Plan.PRO,onBillingCompleteRedirectInfo:{fileKey:r.key,nodeId:"fullscreen"===c.view&&c.nodeId||""},upsellSource:O.b.LIBRARY_UPSELL_BADGE}):i.createElement(U,{team:n,afterFileMove:o,onStylesClick:d}):i.createElement(i.Fragment,null)},"publish-components-upsell");function U(e){let r=(0,_.R)(),n=o.hS({onClose:d.lQ,open:!0,preventUserClose:!0}),p=(0,a.d4)(e=>e.currentUserOrgId),{onStylesClick:m}=e,h=(0,c.Rs)(C.x8f,{}),g=(0,I.q5)(),f=(0,N.w5)(e.team),E=i.useMemo(()=>h.transform(e=>e.currentUser.teamEditRoles.some(e=>{let n=e.team,i=n?.currentPlanUser,a=r?i?.seatTypeLicenseTypes?.includes(A.G_.DESIGN):i?.designPaidStatus!==A.dQ.RESTRICTED;return n&&[A.Ag.PRO,A.Ag.STUDENT].includes(n.plan.tier)&&!n.deletedAt&&a})).unwrapOr(!1),[h,r]),y=!!p,b=g&&(0,T.jd)(g.project),S=(0,w._6)();if(!g)return i.createElement(i.Fragment,null);if("loaded"!==h.status)return i.createElement(s.bL,{manager:n,width:"sm"},i.createElement(l.vo,null,i.createElement(l.nB,null,i.createElement(u.qc,null))));if(E||y||b)return i.createElement(B,{isFileInTeamWithProFeatures:f,isFileInOrg:y,team:e.team,afterFileMove:e.afterFileMove,onStylesClick:m});let L="fullscreen"===S.view?S.nodeId??"":void 0;return void 0!==L?i.createElement(k.bP,{team:e.team,resource:R.Bi.TEAM_LIBRARY,action:P.pE.PUBLISH_COMPONENTS,editorType:A._Y.DESIGN,onStarterPlanCtaClick:m,currentPlan:v.F.Plan.STARTER,upsellPlan:v.F.Plan.PRO,onBillingCompleteRedirectInfo:{fileKey:g.key,nodeId:L},upsellSource:O.b.LIBRARY_UPSELL_BADGE}):i.createElement(i.Fragment,null)}function B(e){let r=(0,a.wA)(),n=()=>{r(f.Ce())},c=o.hS({onClose:n,open:!0}),d=(0,I.q5)(),u=(0,a.d4)(e=>d?(0,b.up)(d,e.repos):null);if(!d)return i.createElement(i.Fragment,null);let _=(0,h.tx)("upsell.move_file_publish.move_file_to_team_to_publish"),v=(0,h.tx)("upsell.move_file_publish.move_file_to_pro_team_to_publish"),T=(0,h.tx)("upsell.move_file_publish.move_file_to_project_to_publish"),S=(0,h.t)("upsell.move_file_publish.move_to_team_to_publish_library_assets"),w=(0,h.t)("upsell.move_file_publish.move_to_project_to_publish_library_assets"),A=v;e.isFileInOrg?A=_:e.isFileInTeamWithProFeatures&&(A=T);let C=e.isFileInTeamWithProFeatures?(0,h.tx)("upsell.move_file_publish.move_to_project"):(0,h.tx)("upsell.move_file_publish.move_to_team");return i.createElement(y.fu,{name:"MoveFilePublishUpsell"},i.createElement(s.bL,{manager:c,width:"md"},i.createElement(l.vo,null,i.createElement(l.Y9,null,i.createElement(l.hE,null,e.isFileInTeamWithProFeatures?w:S)),i.createElement(l.nB,null,A),i.createElement(l.wi,null,i.createElement(l.jk,null,i.createElement(p.$z,{onClick:n,trackingProperties:{trackingDescriptor:E.c.CANCEL},variant:"secondary"},(0,h.tx)("upsell.shared.cancel")),i.createElement(m.pW,{href:"#",onClick:()=>{let{afterFileMove:n}=e;(0,g.h)({key:d.key,name:d.name,folder_id:d.folderId,team_id:d.teamId,editor_type:d.editorType,parent_org_id:d.parentOrgId},u,r,{handlesVisualBell:!1,callback:n},{isPublishing:!0})}},C))))))}},764016:(e,r,n)=>{n(39773),n(579020),n(379338),n(684525),n(369600),n(661780)},314506:(e,r,n)=>{n.d(r,{RX:()=>u}),n(848318);var i=n(741419),a=n(157907),o=n(39773);n(430285),n(721571),n(575058),n(379338),n(896966),n(369600),n(746948);var s=n(425642),l=n(934589),c=n(940398),d=n(635547);(0,o.Iz)(e=>(0,l.x8)({fileKey:e})),(0,o.Iz)(e=>(0,o.eU)(r=>{let n={};for(let i of e)n[i]=r(d.u6n.Query({fileKey:i}));return n}),s.lu),(0,o.Iz)(e=>(0,o.eU)(r=>{let n={};for(let i of e)n[i]=r(d.zkh.Query({libraryKey:i}));return n}),c._f);function u(e){if(!(0,a.k)().dse_module_publish)return!1;switch(e.moduleSource){case i.QjO.EDITOR_TEMPLATE:return!1;case i.QjO.SLIDES_TEMPLATE:return!0;case i.QjO.SITES_TEMPLATE:return!!(0,a.k)().sites;case i.QjO.LITE_TEMPLATE:return!!(0,a.k)().cooper}}},3418:(e,r,n)=>{n.d(r,{B:()=>d});var i=n(848318),a=n(891627),o=n(716544),s=n(790355),l=n(205397),c=n(161922);function d(e){let r=i.useId(),n=e||r,d=(0,o.wA)(),u=(0,o.d4)(e=>e.dropdownShown?.type===n),p=i.useMemo(()=>document.createElement("div"),[]);i.useEffect(()=>(document.body.appendChild(p),()=>{document.body.removeChild(p)}),[p]);let m=i.useRef(null),h=m.current?.getBoundingClientRect()||null,_=e=>{e.callback&&e.callback("",null,d)};return{toggleDropdown:()=>{u?d(s.oB()):d(s.j7({type:n}))},dropdownTargetRef:m,Dropdown:function(e){let r=(0,l.UV)(e);return i.createElement(i.Fragment,null,u&&h&&a.createPortal(i.createElement(c.j,{parentRect:h,dispatch:d,onSelectItem:_,...e,...r}),p))},isDropdownShown:u}}},350030:(e,r,n)=>{n.d(r,{Nz:()=>X});var i=n(848318),a=n(716544),o=n(445777),s=n(622876),l=n(741419),c=n(39773),d=n(536384),u=n.n(d),p=n(221769),m=n(20149),h=n(579020),_=n(702),g=n(397579),f=n(322627),E=n(831932),y=n(209075),b=n(981798),v=n(889132),T=n(705694),I=n(442313),S=n(859470),w=n(45584),A=n(51910),C=n(369600),N=n(67919),L=n(69647),O=n(834996),R=n(43398);n(731412),n(106487),n(107427),n(825850);var P=n(921598),D=n(308301),M=n(415292),k=n(109879),F=n(968910),x=n(784372),U=(e=>(e[e.Default=0]="Default",e[e.Mobile=1]="Mobile",e[e.Prototype=2]="Prototype",e[e.Slide=3]="Slide",e))(U||{});let B=(e,r)=>{let n=(0,w.ni)(),a=(0,v.Av)(),l=(0,R._)(),c=(0,A.p8)("showUi"),d=(0,O._6)(),u="prototype"===d.view&&"slides"===d.file.editor_type,p=function({isUI3:e,prototypeHeaderHidden:r,showUi:n,style:i,toolbarHeight:a,editorBannerHeight:s}){let l=0;if(e)l=E.Ay.isIpadNative||(0,E.FP)()&&n?(0,P.VA)():0;else switch(i){case 3:case 0:case 1:l=n||E.Ay.isIpadNative?a:0;break;case 2:l=r?0:a;break;default:(0,o.xb)(i)}return 0!==s&&(l+=s),l}({isUI3:"ui3"===(0,s.DP)().version&&!u,prototypeHeaderHidden:r,showUi:c,style:e,toolbarHeight:a,editorBannerHeight:l});return i.useMemo(()=>({left:n.x,top:p,width:n.width}),[n,p])},V=(e,r)=>{let n;let a=function(e){let r;let n=(0,w.ni)(),a=(0,R._)(),o="ui3"===(0,s.DP)().version,l=(0,A.p8)("showUi"),c=0;o?(E.Ay.isIpad||(0,E.FP)())&&(c=(0,P.VA)()):E.Ay.isIpadNative&&(c=l?0:(0,P.VA)());let d=n.y+a+c;switch(e){case 1:r=4;break;case 2:r=d;break;case 3:r=0;break;case 0:r=10}return i.useMemo(()=>({left:n.x,top:d,width:n.width-(0===e?10:0),height:n.height-a-r-c}),[n,e,d,r,a,c])}(r),o=0;switch(r){case 0:n={borderWidth:5},o=5;break;case 1:if((0,E.FP)()&&(0,f.Dz)()){n={};break}n={borderTopWidth:4},o=4;break;case 3:n={borderWidth:5,borderRadius:"0.8rem",boxSizing:"border-box"},o=5;break;case 2:n={}}return i.useMemo(()=>({style:{...a,...n,"--multiplayerBorderColor":e,borderStyle:"solid","--multiplayerBorderWidth":`${o}px`},borderInfo:{width:o,color:e}}),[e,a,n,o])};function G(e){let{children:r,prototypeHeaderHidden:n}=e,a=(0,O.z3)(),o=0;"prototype"===a?o=2:E.Xb&&(o=1);let s=B(o,n||!1),l=2===o?x.Y$:void 0,c=2===o&&n?x.Fd:void 0;return i.createElement("div",{className:u()(x.GE,l,c),style:s,"data-testid":"multiplayer-bell-container"},r)}function H(){let{style:e,borderInfo:r}=i.useContext(k.h);return e={...e,borderColor:r.color},i.createElement("div",{"data-testid":"viewport-frame",className:u()(x.KM),style:e})}function K(){let{style:e,borderInfo:r}=i.useContext(k.h);return e={...e,color:"brand"===r.color?"var(--color-bg-brand)":r.color,"--borderColorTransitionDurationSeconds":`${F.Bn}s`},i.createElement("div",{className:x.KM,style:e})}function W(e){let{children:r,colorOverride:n,overlayStatus:a}=e,o=(0,N.$0)(),s=(0,N.dR)(),l=(0,N.Ww)(),c=(0,O._6)(),d=0;"prototype"===c.view?d=c.isPresenterView?3:2:E.Xb&&(d=1);let u=V((()=>{if(n)return n;if(!a)return s&&l?.sessionID===s?.sessionID?l?.color??"transparent":o?.color??"transparent";{let{self:e,others:r}=a;return"none"!==e?"brand":"following"===r&&"none"===e?o?.color??"transparent":"transparent"}})(),d);return i.createElement(k.h.Provider,{value:u},r)}var z=(e=>(e.PRESENTING="presenting",e.PROMPT_TO_ACCEPT_NOMINATION="prompt_to_accept_nomination",e.SHOWING_EXPLAINER="showing_explainer",e.NONE="none",e))(z||{}),$=(e=>(e.PENDING_AUTO_FOLLOW="pending_auto_follow",e.FOLLOWING="following",e.PROMPT_TO_REJOIN="prompt_to_rejoin",e.NONE="none",e))($||{});function Y(){return"prototype"!==(0,O.z3)()&&!((0,E.FP)()&&(0,f.Dz)())}function j(e,r,n,a){let o=(0,g.ZC)(e),s=(0,g.ZC)(r),l=i.useRef(performance.now());return i.useEffect(()=>{if("presenting"===e){let e=_.sn.tryStop("start_spotlight");e&&(0,h.sx)("start_spotlight",{elapsedMs:e},{forwardToDatadog:!0})}else if("pending_auto_follow"===r){let e=_.sn.tryStop("join_spotlight");e&&(0,h.sx)("join_spotlight",{elapsedMs:e},{forwardToDatadog:!0})}else if("following"===r){let e=_.sn.tryStop("start_following");e&&(0,h.sx)("start_following",{elapsedMs:e},{forwardToDatadog:!0})}},[e,r,n,a]),(e!==o||r!==s)&&(l.current=performance.now()),{statusChangedAt:l.current}}function q(e){let{multiplayer:r,prototypeHeaderHidden:n}=e,a=(0,N.Ww)(),s=(0,N.dR)(),d=(0,N.$0)(),u=(0,N.y)(),h=(0,C.q5)(),_=(0,L.T)(),g=(0,y.y7)(),f=(0,y.oJ)(),v=(0,y.$)(),[w,A]=i.useState(!1);i.useEffect(()=>{A(!1)},[s?.sessionID]),i.useEffect(()=>{d?.sessionID===s?.sessionID&&A(!1)},[d?.sessionID,s?.sessionID]);let{isAutoFollowPending:R,cancelAutoFollowCallback:P,completeAutoFollowCallback:k,observeCurrentPresenter:x,autoFollowType:U,autoFollowDelayMs:B}=(0,N.oW)(e),{isWaitingForFirstFollower:V,stopPresenting:H}=function(e){let[r,n]=i.useState(!1),a=e.followerCount,[o,s]=(0,c.fp)(b.Dv);0===a||r||n(!0);let d=(0,y.jA)(e)||o;(0,y.jA)(e)&&o&&s(!1),!d&&r&&n(!1);let u=d&&0===a&&!r,p=(0,L.T)(),m=(0,O.z3)(),h=i.useCallback(()=>{p(L.N.STOP),"prototype"===m?T.hk()?.stopPresenting():l.h3O.stopPresenting()},[p,m]),_=i.useCallback(()=>!!u&&(h(),!0),[h,u]);return(0,S.O1)(_,S.KD.MULTIPLAYER_SPOTLIGHT),{isWaitingForFirstFollower:u,stopPresenting:h}}(r),z=function(e){let{multiplayer:r,showingExplainer:n,isPendingPresenting:i}=e;return(0,y.jA)(r)||i?"presenting":n?"showing_explainer":(0,y.NB)(r)?"prompt_to_accept_nomination":"none"}({multiplayer:r,showingExplainer:(0,c.md)(b.ah),isPendingPresenting:(0,c.md)(b.Dv)}),$=function(e){let{multiplayer:r,isAutoFollowPending:n,presenterUser:i,suppressRejoinPrompt:a}=e;return n?"pending_auto_follow":(0,y.L3)(r)?"following":i&&!a?"prompt_to_rejoin":"none"}({multiplayer:r,isAutoFollowPending:R,presenterUser:s,suppressRejoinPrompt:w}),q=i.useRef(r.allUsers.length);q.current=r.allUsers.length;let{statusChangedAt:X}=j(z,$,h,q),[Z,J]=function(e,r){switch(e){case"presenting":if("following"===r||"prompt_to_rejoin"===r)return[e,"none"];return[e,r];case"prompt_to_accept_nomination":if("pending_auto_follow"===r)return["none",r];return[e,"none"];case"showing_explainer":case"none":return[e,r];default:(0,o.xb)(e)}}(z,$),Q=i.useCallback(()=>{A(!0),P(),_(L.N.IGNORE)},[P,_]),ee=U===N.D_.INITIAL,et=i.useCallback(()=>"pending_auto_follow"===J&&!!R&&U===N.D_.INITIAL&&(P(),!0),[U,P,R,J]);(0,S.O1)(et,S.KD.MULTIPLAYER_SPOTLIGHT);let er=Y(),en="showing_explainer"===Z,ei="none"!==Z,ea="none"!==J,eo=["presenting","prompt_to_accept_nomination","showing_explainer"].includes(Z)||["following"].includes(J),[es,el]=(0,c.fp)(b.uc);return eo!==es&&el(eo),i.createElement(W,{overlayStatus:{self:Z,others:J}},i.createElement(p.N,null,eo&&i.createElement(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:F.Bn}},i.createElement(K,null))),i.createElement(p.N,null,ei&&i.createElement(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:F.Bn}},i.createElement(G,{prototypeHeaderHidden:n},(()=>{switch(Z){case"presenting":if(null===a)return null;if(V){let e=(0,I.tx)("collaboration.spotlight.bell.presenter.waiting_for_followers"),r=(0,I.t)("collaboration.spotlight.bell.presenter.cancel");return i.createElement(M.Y,{color:"brand",message:{text:e},renderKey:`${a.sessionID}`,progressBar:!0,progressBarDurationMs:N.S$,autoHide:!1,button:{text:r,onClick:H}})}return i.createElement(M.Y,{color:"brand",message:{text:i.createElement(D.s,{count:r.followerCount})},renderKey:`${a.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,I.t)("collaboration.spotlight.bell.presenter.stop"),onClick:H},docked:er});case"prompt_to_accept_nomination":if(!a||!u)return null;return i.createElement(M.Y,{autoHide:!1,button:{text:(0,I.t)("collaboration.spotlight.tooltip.spotlight_me"),onClick:()=>{g(r)}},color:"brand",message:{text:(0,I.tx)("collaboration.spotlight.bell.follower.nominated",{nominatorName:u.name})},onCloseCallback:()=>{f(a.sessionID,r)},progressBar:!1,progressBarDurationMs:0,renderKey:`${a.sessionID}`,showCloseButton:!0,useSecondaryColor:!0});case"showing_explainer":if(null===a)return null;let e=s?(0,I.tx)("collaboration.spotlight.bell.explainer.takeover",{currentPresenter:s?.name}):(0,I.tx)("collaboration.spotlight.bell.explainer");return i.createElement(M.Y,{color:"brand",useSecondaryColor:!0,message:{text:e},renderKey:`${r.sessionID}`,autoHide:!1,progressBar:!1,progressBarDurationMs:0,button:null,docked:!1});case"none":return null;default:(0,o.xb)(Z)}})()))),i.createElement(p.N,null,ea&&i.createElement(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:F.Bn}},i.createElement(G,{prototypeHeaderHidden:n},(()=>{switch(J){case"pending_auto_follow":{if(!s)return null;let e=s.name,r=ee?{text:(0,I.tx)("collaboration.spotlight.bell.follower.spotlighting_presenter_alternate_copy",{presenterName:e}),onClick:k}:{text:(0,I.tx)("collaboration.spotlight.bell.follower.switching_to_new_presenter",{presenterName:e})},n=ee?{text:(0,I.t)("collaboration.spotlight.bell.follower.not_now"),onClick:Q}:null;return i.createElement(M.Y,{color:s?.color,message:r,renderKey:`${s.sessionID}`,progressBar:ee,progressBarDurationMs:B||0,autoHide:!1,button:n,ghost:en})}case"following":{let e=r.observingSessionID===r.presenterSessionID;if(null===d)return null;let n=d?.name||"",a=e?(0,I.tx)("collaboration.spotlight.bell.follower.spotlight_on_presenter",{observedUserName:n}):(0,I.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:n}),o={text:e?(0,I.t)("collaboration.spotlight.bell.stop_following"):(0,I.t)("collaboration.spotlight.bell.stop"),onClick:()=>v(r)};return i.createElement(M.Y,{color:d?.color,message:{text:a},renderKey:`${r.observingSessionID}`,autoHide:!E.Xb,progressBar:!1,progressBarDurationMs:0,button:o,docked:er,ghost:en})}case"prompt_to_rejoin":let e=()=>(0,y.KI)(x,r,"Spotlight Rejoined",X);if(null!==d||null===s)return null;let n=(0,I.tx)("collaboration.spotlight.bell.follower.reprompt_spotlight_on_presenter",{presenterUserName:s.name}),a=(0,I.t)("collaboration.spotlight.bell.follower.follow");return i.createElement(M.Y,{autoHide:!1,button:{text:a,onClick:e},color:s?.color,ghost:en,message:{text:n,onClick:e},onCloseCallback:()=>(0,y.KI)(()=>A(!0),r,"Spotlight Rejoin Dismissed",X),progressBar:!1,progressBarDurationMs:0,renderKey:`${s.sessionID}`,showCloseButton:!0,useSecondaryColor:!0});case"none":return null;default:(0,o.xb)(J)}})()))))}function X(e){let{prototypeHeaderHidden:r}=e,n=(0,a.d4)(({multiplayer:e})=>e),o=(0,N.HG)(),s=(0,N.By)(),l=-1!==n.observingSessionID;return((0,N.VA)({multiplayer:n}),(0,N.Pi)({multiplayer:n}),s)?null:o?i.createElement(q,{multiplayer:n,prototypeHeaderHidden:r}):l?i.createElement(Z,{prototypeHeaderHidden:r}):null}function Z(e){let{prototypeHeaderHidden:r}=e,n=(0,N.$0)(),o=(0,C.q5)(),s=(0,a.d4)(e=>e.multiplayer.allUsers.length),l=i.useRef(s);l.current=s,j("none","following",o,l);let c=`${n?.sessionID}`,d=i.useMemo(()=>{let e=n?.name||"";return{text:(0,I.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:e})}},[n]),u=Y();return null===n?null:i.createElement(W,null,i.createElement(H,null),i.createElement(G,{prototypeHeaderHidden:r},i.createElement(M.Y,{color:n?.color,message:d,renderKey:c,autoHide:!E.Xb,progressBar:!1,progressBarDurationMs:0,button:null,docked:u})))}},731412:(e,r,n)=>{n.d(r,{$i:()=>l,a8:()=>s});var i=n(741419),a=n(39773),o=n(106487);(0,a.eU)(2e3),(0,a.eU)(2e3),(0,a.eU)(""),(0,a.eU)(0),(0,a.eU)(!1),(0,a.eU)(!1),(0,a.eU)(null);let s=(0,a.eU)(o.h0.AWAITING_PLAYBACK);(0,a.eU)(i.z7E.DEFAULT),(0,a.eU)(o.zu.DEFAULT),(0,a.eU)(void 0);let l=(0,a.eU)(o.JJ.CANVAS);(0,a.eU)(0)},106487:(e,r,n)=>{n.d(r,{JJ:()=>a,h0:()=>d,zu:()=>o});var i=(e=>(e.SET_CHAT="setChat",e.CLEAR_CHAT="clearChat",e.TARGET_DOM_NODE="targetDOMNode",e.TARGET_SCENE_NODE="targetSceneNode",e.INSERT_NODE="insertNode",e.ADJUST_ZOOM_LEVEL="adjustZoomLevel",e.MOVE_CURSOR_TO_CENTER_SCREEN="moveCursorToCenterScreen",e.CHANGE_TOOL="changeTool",e.MOVE_VIEWPORT="moveViewport",e.SET_CURSOR_DIRECTION="setCursorDirection",e.SET_PROPERTIES_PANEL_TAB="setPropertiesPanelTab",e.UPDATE_SELECTED_NODE_PROPERTIES="updateSelectedNodeProperties",e.SCROLL_PROPERTIES_PANEL="scrollPropertiesPanel",e.FOCUS_INPUT="focusInput",e.SELECT_SCENE_NODE="selectSceneNode",e.SET_VIEWPORT_FRAME_TYPE="setViewportFrameType",e))(i||{}),a=(e=>(e.CANVAS="canvas",e.PROPERTIES_PANEL="properties-panel",e.TEXT_PANEL="text-panel",e))(a||{}),o=(e=>(e.DEFAULT="left",e.RIGHT="right",e))(o||{}),s=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.INSIDE_SCENE_NODE=1]="INSIDE_SCENE_NODE",e[e.CANVAS_COORDINATE=2]="CANVAS_COORDINATE",e))(s||{}),l=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e))(l||{}),c=(e=>(e.CREATE_FRAME="How to draw a frame",e.FORMAT_FRAME="How to use the design panel",e.CREATE_TEXT="Add words where needed",e.FORMAT_TEXT="How to format text",e))(c||{}),d=(e=>(e.PLAYING="playing",e.AWAITING_PLAYBACK="awaitingPlayback",e))(d||{}),u=(e=>(e.LEFT="left",e.CENTER="center",e.RIGHT="right",e))(u||{}),p=(e=>(e.TOP="top",e.CENTER="center",e.BOTTOM="bottom",e))(p||{}),m=(e=>(e.TEST="test",e.PRODUCT_FRAME="productFrame",e.PRODUCT_FRAME_CHERRIES_FRAME="productFrameCherriesFrame",e.PRODUCT_FRAME_TOMATO_FRAME="productFrameTomatoFrame",e.CHERRIES_FRAME_CHERRIES_IMAGE="cherriesFrameCherriesImage",e.CHERRIES_FRAME_CHERRIES_TEXT="cherriesFrameCherriesText",e.CHERRIES_FRAME_PRICE_TEXT="cherriesFramePriceText",e.CHERRIES_FRAME_GROWN_TEXT="cherriesFrameGrownText",e.NO_BASICS_FILE_FRAME="noBasicsFileFrame",e.NO_BASICS_FILE_TEXT="noBasicsFileText",e))(m||{}),h=(e=>(e.ESC_KEY="esc key",e.STOP_BTN="stop button",e.NEXT_BTN="next tutorial button",e.PREV_BTN="previous tutorial button",e.STATE_MANAGER_ERROR="state manager error",e))(h||{})},107427:(e,r,n)=>{n(673906),n(896966),n(267670),n(639244),n(106487),n(234505)},548876:(e,r,n)=>{n(848318),n(39773),n(543072),n(651386),n(17755),n(849752),n(376780),n(474704),n(731412),n(106487),n(107427),n(938674),n(234505)},529103:(e,r,n)=>{n(848318),n(39773),n(536384),n(145015),n(17755),n(882439),n(442313),n(895104),n(180423),n(155651),n(727341),n(849752),n(312255),n(18262),n(731412),n(106487),n(495052),n(863671),n(404712)},10492:(e,r,n)=>{n.d(r,{q:()=>s});var i=n(6819),a=n(695635);n(493554),n(369600);var o=n(635547);function s(){return new Promise((e,r)=>{let n=i.D.getState().openFile?.key;if(!n)return e(!1);(0,a.Ek)(o.J2w,{fileKey:n}).then(r=>e(!!r.file?.org?.cursorChatDisabledAt))})}},927686:(e,r,n)=>{n(848318),n(716544);var i=n(741419),a=n(818754);n(379338),n(782623),n(442313),n(727341),n(564531),n(599341),n(58767);var o=n(27776),s=(e=>(e[e.NONE=0]="NONE",e[e.EYEDROPPER=1]="EYEDROPPER",e[e.CHAT=2]="CHAT",e[e.HIGH_FIVE=3]="HIGH_FIVE",e))(s||{});let l={[i.NLJ.SELECT]:"f7ae268fa093b5f690abfe5cc56cccfa8c2d4734",[i.NLJ.HAND]:"aebe1073b0b9e7ca3907e21cc08ee416d86520c4",[i.NLJ.DROPPER_COLOR]:"d8d06a74b0182fb6948c55373e8c68d602dd9a78"},c={[i.NLJ.SELECT]:"aed6896e6ad35977610fc23bb6590c1484d3ee01",[i.NLJ.HAND]:"aebe1073b0b9e7ca3907e21cc08ee416d86520c4",[i.NLJ.DROPPER_COLOR]:"3a904092ca690b41c06a24b8e2dddb724a992c94"},d=((0,a.hG)(o.xEX),e=>{switch(e){case Tool.SELECT:return t("fake_cursor.select_cursor");case Tool.HAND:return t("fake_cursor.hand_cursor");case Tool.DROPPER_COLOR:return t("fake_cursor.eyedropper_cursor");default:return t("fake_cursor.cursor")}})},474704:(e,r,n)=>{var i={};n.r(i),n.d(i,{GLARE_ANIMATION:()=>D,GRAY_BACKGROUND:()=>P,NONE:()=>k,ORANGE_GRADIENT:()=>R,PINK_GRADIENT:()=>L,animateBg:()=>O,glareAnimation:()=>M});var a=n(848318);n(716544);var o=n(741419),s=n(157907),l=n(536384),c=n.n(l),d=n(702),u=n(543072);n(651386),n(921494),n(470403),n(235441);var p=n(727341);n(564531),n(766535),n(716181),n(45584),n(480236),n(493871),n(51910),n(67919),n(207715),n(276731),n(629829);var m=n(39773);n(178262),n(8719),n(185371),n(159377);n(764318);var h=n(379338),_=(e=>(e.PINK_GRADIENT="PINK_GRADIENT",e.ORANGE_GRADIENT="ORANGE_GRADIENT",e.GRAY_BACKGROUND="GRAY_BACKGROUND",e.GLARE_ANIMATION="GLARE_ANIMATION",e.NONE="NONE",e))(_||{});let g=new Map([["happy birthday","PINK_GRADIENT"],["bday","PINK_GRADIENT"],["hbd","PINK_GRADIENT"],["fire","ORANGE_GRADIENT"],["fiire","ORANGE_GRADIENT"],["fiiire","ORANGE_GRADIENT"],["fiiiire","ORANGE_GRADIENT"],["lit","ORANGE_GRADIENT"],["heat","ORANGE_GRADIENT"],["hot","ORANGE_GRADIENT"],["spicy","ORANGE_GRADIENT"],["lowkey","GRAY_BACKGROUND"],["slick","GLARE_ANIMATION"],["this is clean","GLARE_ANIMATION"],["this clean","GLARE_ANIMATION"],["cleann","GLARE_ANIMATION"],["sharp","GLARE_ANIMATION"],["immaculate","GLARE_ANIMATION"],["pristine","GLARE_ANIMATION"],["polished","GLARE_ANIMATION"],["spotless","GLARE_ANIMATION"],["shiny","GLARE_ANIMATION"]]);(0,s.k)().figjam_latin_emote_easter_eggs&&(g.set("me encanta","PINK_GRADIENT"),g.set("hola","PINK_GRADIENT"),g.set("bienvenides","PINK_GRADIENT"));let f=new Map([[(0,h.ck)("a83de90bf34495081ce2e8bcaf28d1d2c16e5186"),["lol","lmao","rofl","lmfao","hehe","haha","sksk","cryingg","dyingg","so funny","rotfl"]],[(0,h.ck)("d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2"),["fire","fiire","fiiire","fiiiire","spicy","oh snap","dope","hot","heat","so good","siick","siiick","siiiick","on point","rad","sweeet","sweeeet","wagmi","wgmi","gmi"]],[(0,h.ck)("0606e9d967b5abb6d9a2853c2fff589f2ec2fc05"),["hey","hiya","heyo","hello","howdy","whats up","what's up","good morning","gm","greetings","bye","later","ciao","see ya","cya","wave"]],[(0,h.ck)("ffd0635e8f9322352eff0c15411ac0b536b98d87"),["taking a look","sus","let me look","let me see","lemme see","i see what you did there"]],[(0,h.ck)("ff5be810b821d264cc2c95f665d24a867c34e587"),["gorgeous","stunning","love","loove","looove","loooove","looooove","luv","woww","awww","<3","yass","cute","amazingg","heart eyes","beautiful","my eyeballs are literally two giant hearts right now and i couldn't be happier","beautiful","adorable"]],[(0,h.ck)("78f60a21d2616c2a24c7645d8636dec855e48ffb"),["ngmi","bummer","sad face","uh oh",":(","noo","oh no","sorry to hear that","rip","rats","big sad","tragic","fail","womp","that sucks"]],[(0,h.ck)("1429964104bceac90c5c8e731ce4cc50b27e2797"),["wtf","whoa","no way",":O","woah","whaat","whaaat","shook","shooketh","omg","omfg","speechless","oh snap","surprised"]],[(0,h.ck)("e15fa4fbba4b88b4f1f04ba64bb12abf12bcbc6c"),["gift","hbd","bday","birthday"]],[(0,h.ck)("778eea842ed4020f6209e97c77abcd84984e5c94"),["cool","coool","swag","chill"]],[(0,h.CZ)("emoji/5/noto/medium/1f410.png"),["goat"]]]);(0,s.k)().figjam_latin_emote_easter_eggs&&(f.set((0,h.ck)("62f55b94bf05d9a49731714238dd5e6ce716225d"),["me encanta","ole","vamos"]),f.set((0,h.ck)("88ea7d675b3ebeebbd917bf6857afa502b51d928"),["bienvenidos","bienvenides","bienvenidas"]),f.set((0,h.ck)("89a607910c3edfcaf5efa1e19bc8b646f2e47a6a"),["fuego","picante"]),f.set((0,h.ck)("8b29bcdf89d32bafec42bee873327384b55eb54b"),["hola","brillante","excelente","bien","muy bien","sol"]));var E=(e=>(e[e.Standard=0]="Standard",e))(E||{});let y=new Map;f.forEach((e,r)=>{!function(e,r,n){e.forEach(e=>n.set(e,r))}(e,r,y)});var b=n(264744),v=n(508242);n(141039);var T=n(412108);n(6819),n(125899);var I=n(541525);n(577023),n(599422),(0,m.eU)(!1),(class e extends T.w{constructor({startingRelativePosition:r,startingRotation:n,position:i,viewportZoomScale:a,cursorOnRightForWindup:o,cursorOnRightForCollision:s,sessionId:l,getUserCursorTransform:c}){super(),this.type="AnimatedCursorEntity",this.lifetime=.85,s&&(this.sortOrder=-1),this.position=i,this.viewportZoomScale=a,this.cursorOnRightForWindup=o,this.cursorOnRightForCollision=s;let d={transform:`translate(${r.x}px, ${r.y}px) rotate(${n}rad)`},u={transform:`translate(${(this.cursorOnRightForWindup?1:-1)*90}px, 70px) rotate(${this.cursorOnRightForWindup?1:-1}rad) scale(0.9)`},p={transform:`translate(${(this.cursorOnRightForCollision?1:-1)*10}px, 0px) scale(2)`},m=e.RANDOM_VECTORS.map(e=>({transform:`translate(${10*e.x}px, ${10*e.y}px) ${p.transform}`})),h=1e3/60;this.customData={sessionId:l,animations:[{keyframes:[d,u],timing:{duration:12*h,easing:"cubic-bezier(.26,.32,.12,1)"}},{keyframes:[u,p],timing:{delay:12*h,duration:4*h,easing:"cubic-bezier(.16,.5,.47,1.25)"}},{keyframes:m,timing:{delay:16*h,duration:4*h,easing:`steps(${m.length})`}},{keyframes:[p,p],timing:{delay:20*h,duration:18*h}}],getReturnToCursorTransform:r=>{let n=(this.cursorOnRightForCollision?1:-1)*10,i=c(),o=(i.position.x-this.position.x)*a,s=(i.position.y-this.position.y)*a,l=i.rotation;return`translate(${e.lerp(n,o,r)}px,${e.lerp(0,s,r)}px) rotate(${e.lerp(0,l,r)}rad) scale(${e.lerp(2,1,r)})`}}}static lerp(e,r,n){return e*(1-n)+r*n}}).RANDOM_VECTORS=[{x:.626086772987037,y:-.24715772511262912},{x:.16558013014491735,y:-.4962441097195551}];let S=class e{constructor(){this.wiggleMeter=0,this.wiggleMode=!1,this.lastUpdateTime=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.speedFactor=0,this.mouseX=0,this.mouseY=0,this.hasLastMousePosition=!1,this.lastMouseX=0,this.lastMouseY=0,this.lastDirectionX=0,this.lastDirectionY=0,this.subscriptions=[],this.mouseLeftCanvas=!1,this.highFiveKeyPressed=!1,this.mouseButtonHeld=!1}getWiggleMode(){return this.wiggleMode}getShakeFactor(){return this.shakeFactor}getAboutToHide(){return this.getWiggleMode()&&this.wiggleMeter<e.WIGGLE_MODE_ABOUT_TO_HIDE_TIME/e.WIGGLE_MODE_DEACTIVATION_TIME}onWiggleModeChange(e){return this.subscriptions.push(e),()=>{let r=this.subscriptions.indexOf(e);r>=0&&this.subscriptions.splice(r,1)}}setWiggleMode(e){if(e!==this.wiggleMode)for(let r of(this.wiggleMode=e,this.subscriptions))r(this.wiggleMode)}setMouseLeftCanvas(e){this.mouseLeftCanvas=e}getMouseLeftCanvas(){return this.mouseLeftCanvas}setHighFiveKeyPressed(e){this.highFiveKeyPressed=e}getHighFiveKeyPressed(){return this.highFiveKeyPressed}setMouseButtonHeld(e){this.mouseButtonHeld=e,this.update()}getMousePosition(){return{x:this.mouseX,y:this.mouseY,overCanvas:!this.mouseLeftCanvas}}stopWigglingNow(){this.speedFactor=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.wiggleMeter=0,this.hasLastMousePosition=!1,this.lastDirectionX=0,this.lastDirectionY=0,this.setWiggleMode(!1),this.update()}startOrRefreshWiggle(){this.setWiggleMode(!0),this.wiggleMeter=1}getDeltaTime(){let e=performance.now(),r=e-this.lastUpdateTime;return this.lastUpdateTime=e,r/1e3}update(e,r){e?this.setMousePositionAndUpdate(e,r):this.updateWiggleMeter(r)}setMousePositionAndUpdate(r,n){if(this.mouseLeftCanvas||this.mouseButtonHeld)return;let i="number"==typeof n?n:this.getDeltaTime();if(i<=0)return;this.mouseX=r.x,this.mouseY=r.y;let a=1,o=(this.mouseX-this.lastMouseX)/i,s=(this.mouseY-this.lastMouseY)/i;if(this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,!this.hasLastMousePosition){this.hasLastMousePosition=!0;return}let l=Math.sqrt(o*o+s*s);if(l>0){let e=o/l,r=s/l;a=e*this.lastDirectionX+r*this.lastDirectionY,this.lastDirectionX=e,this.lastDirectionY=r}let c=i/e.WIGGLE_MODE_MOVEMENT_DECAY_TIME,d=i/e.WIGGLE_MODE_MOVEMENT_MIN_TIME+c;this.speedFactor+=Math.min(l*e.WIGGLE_MODE_MOVEMENT_SENSITIVITY,d),this.speedFactor=Math.max(0,this.speedFactor-c),this.speedFactor=Math.min(1,this.speedFactor);let u=this.speedFactor>=.8,p=u&&a<0,m=Math.abs(this.lastDirectionX)>Math.abs(this.lastDirectionY);u&&p&&m&&(this.shakeFactor+=1/(this.wiggleMode?e.WIGGLE_MODE_REPLENISH_SHAKES:e.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER),this.shakeGracePeriod=1),this.shakeGracePeriod>0?this.shakeGracePeriod=Math.max(this.shakeGracePeriod-i/e.WIGGLE_MODE_SHAKE_GRACE_PERIOD,0):this.shakeFactor-=i/e.WIGGLE_MODE_SHAKE_RESET_TIME,this.shakeFactor=Math.min(Math.max(this.shakeFactor,0),1),u&&(Math.abs(this.shakeFactor)>=.8?this.wiggleMeter=1:this.wiggleMode&&Math.abs(this.shakeFactor)>=.3&&(this.wiggleMeter=Math.max(this.wiggleMeter,Math.abs(this.shakeFactor)))),this.updateWiggleMeter(i)}updateWiggleMeter(r){if((r="number"==typeof r?r:this.getDeltaTime())<=0)return;this.wiggleMeter<=0?this.setWiggleMode(!1):this.wiggleMeter>=1&&this.setWiggleMode(!0);let n=0;n=this.mouseLeftCanvas?-e.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD:this.highFiveKeyPressed?e.WIGGLE_MODE_HIGH_FIVE_KEY_TIME:this.wiggleMode?-e.WIGGLE_MODE_DEACTIVATION_TIME:-e.WIGGLE_MODE_MOUSE_RESET_TIME,this.wiggleMeter+=r/n,this.wiggleMeter=Math.min(Math.max(this.wiggleMeter,0),1)}};function w(e,r){let n=3*e,i=3*e,a=1.7999999999999998*e,o=[];for(let e=0;e<=100;e+=2){if(0===e||100===e){o.push(A(0,0,0));continue}let r=Math.floor(Math.random()*n)-n/2,s=Math.floor(Math.random()*i)-i/2,l=Math.floor(Math.random()*a)-a/2;o.push(A(r,s,l))}return new Animation(new KeyframeEffect(r,o,{duration:100,easing:"ease-in-out",iterations:1/0}),document.timeline)}function A(e,r,n){return{transform:`translate(${e}px, ${r}px) rotate(${n}deg)`}}function C(e){return!!e.length&&e.some(e=>"running"===e.playState)}function N(e){let{content:r,children:n}=e,[i,o]=(0,a.useState)(0),s=(0,a.useRef)(0),l=(0,a.useRef)([]),c=a.useRef(null),[d,u]=(0,a.useState)([]),p=(0,I.am)(),m=(0,a.useMemo)(()=>0===r.length?0:((r.match(/\!+$/g)||[])[0]||"").length,[r]),h=(0,a.useCallback)(e=>{clearTimeout(s.current),s.current=setTimeout(()=>{o(e=>(e>0&&h(250),Math.max(e-1,0)))},e)},[]);return(0,a.useEffect)(()=>{o(m),h(1e3)},[m,h]),(0,a.useEffect)(()=>{if(!c.current)return;i>1&&!l.current.length&&(l.current=[w(1,c.current),w(1.5,c.current),w(2,c.current),w(2.5,c.current),w(3,c.current)]);let e=C(l.current);if(i>1){let e=Math.min(i-1-1,l.current.length-1);l.current.forEach((r,n)=>{n===e?r.play():r.cancel()})}else l.current.forEach(e=>e?.cancel());let r=C(l.current);!e&&r&&p("cursor_chat_rumble_triggered"),u(l.current.map(e=>e?.playState))},[i,p]),a.createElement("div",{"data-testid":"chat-animation-wrapper","data-test-animation-state":d,ref:c},n)}S.WIGGLE_MODE_DEACTIVATION_TIME=6,S.WIGGLE_MODE_ABOUT_TO_HIDE_TIME=3,S.WIGGLE_MODE_HIGH_FIVE_KEY_TIME=.5,S.WIGGLE_MODE_MOUSE_RESET_TIME=.6,S.WIGGLE_MODE_MOVEMENT_SENSITIVITY=4e-5,S.WIGGLE_MODE_MOVEMENT_MIN_TIME=.1,S.WIGGLE_MODE_MOVEMENT_DECAY_TIME=1.5,S.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER=6.5,S.WIGGLE_MODE_REPLENISH_SHAKES=3.5,S.WIGGLE_MODE_SHAKE_GRACE_PERIOD=.3,S.WIGGLE_MODE_SHAKE_RESET_TIME=.5,S.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD=.3,(0,v.xx)(function(e){return e.reduce((e,r)=>(e[r.sessionID]=r,e),{})}),n(814293),_.NONE;n(599341),n(442313),n(333633),n(795019);let L="cursor_chat_emotes--PINK_GRADIENT--1KQ3C",O="cursor_chat_emotes--animateBg---meP2",R="cursor_chat_emotes--ORANGE_GRADIENT--cC1fw",P="cursor_chat_emotes--GRAY_BACKGROUND--DAHAE",D="cursor_chat_emotes--GLARE_ANIMATION--SuTBw",M="cursor_chat_emotes--glareAnimation--x1WJw",k="cursor_chat_emotes--NONE---FYHz";n(728075);var F=n(938674);n(10492);var x=n(445777);n(831932),n(927686);var U=n(917383);function B(e,r,n){let i=o.z7E[r];return n?(0,h.CZ)(`multiplayer_cursors/ui3/${i}/${e.substring(1)}.png`):(0,h.CZ)(`multiplayer_cursors/v1/${i}/${e.substring(1)}.png`)}function V(e,r){if(r){let r=U.JR[e.substring(1)]??U.JR[U.p4];return`data:image/png;base64, ${r}`}let n=U.De[e.substring(1)]??U.De[U.p4];return`data:image/png;base64, ${n}`}function G({color:e,isHighFiveHandOut:r,temporarilyHide:n,isCursorHandOnRight:i,aboutToHide:o=!1}){return a.createElement("div",{className:c()({"cursor_high_five--highFiveAnimationContainer--jWFVT":!0,"cursor_high_five--highFiveAnimHighFiveHandOut--6q5Bu":r,"cursor_high_five--highFiveAnimHighFiveHandAboutToHide--tFRSO":o})},a.createElement("div",{style:{opacity:n?"0":"1"},className:c()({"cursor_high_five--highFiveWaveContainer--M1fBF":!0,"cursor_high_five--cursorHandOnRight--wSZLI":i})},a.createElement(z,{color:e})))}let H="#FFFFFF",K=new Set([H,"#0FA958","#5551FF","#9747FF","#848484","#D27C2C","#F24E1E","#FFC700","#667799","#9747FF","#007BE5","#FF24BD","#F24822","#FFCD29","#14AE5C"]);function W({color:e}){let[r,n]=a.useState(!1);if(!K.has(e))return(0,x.KF)(!!e,`Unknown color ${e} for Cursor High Fives`),a.createElement(a.Fragment,null);let i=B(r?H:e,o.z7E.HIGH_FIVE,!1);return a.createElement("img",{className:"cursor_high_five--handImage--mJVid",src:i,alt:"",onError:()=>n(!0)})}function z({color:e}){return a.createElement(W,{key:e,color:e})}n(709291);let $=(0,a.memo)(function({name:e,color:r,cursorType:n,chatMessage:l,isHighFiving:m,focusOnTextCursor:h,temporarilyHide:f,isCursorHandOnRight:E,isCursorPointingRight:y,editorType:v,isCursorAndChatAreaOffscreen:T,sessionId:I,prefersReducedMotion:S,isHighFivingSupported:w,useChatAnimation:A,disableMessageFade:C,isStaticView:L,isHoveringWidgetWithHiddenCursors:O}){let R=(0,p.GS)(),[P,D]=(0,a.useState)(1),M=(0,a.useMemo)(()=>(0,u.GL)(r),[r]),[k,x]=(0,a.useState)(_.NONE),U=()=>x(_.NONE),[H,K]=(0,a.useState)(L),[W,z]=l||[];(0,a.useEffect)(()=>{let e,r;return W||z?(K(!0),D(1)):(K(!1),U()),C||(e=setTimeout(()=>{D(0)},5e3),r=setTimeout(()=>{K(!1),U()},8e3)),()=>{D(0),K(!1),U(),clearTimeout(e),clearTimeout(r)}},[W,z,C]);let $="whiteboard"===v;(0,a.useEffect)(()=>{if($&&W&&!T)for(let e of g.keys()){let r=g.get(e);r&&function(e,r){var n;let i=e.toLocaleLowerCase(),a=!(1===(n=i.charAt(i.length-r.length-1)).length&&/[A-Za-z]/.test(n));return i.endsWith(r)&&a}(W,e)&&x(r)}},[W,T,$]);let Y=a.useRef(null);(0,a.useEffect)(()=>{if(Y.current&&Y.current.innerText===W){let e=d.sn.tryStop(`view_cursor_chat_message_${I}_${W}`);e&&d.Vq.add("view_cursor_chat_message",e)}},[W,Y,I]);let j=(0,s.k)().cursor_bot&&y&&n===o.z7E.DEFAULT,q=n===o.z7E.PEN,X=a.createElement("div",{className:c()({[F.iU]:H,[F.VW]:!H,[F.S8]:R&&!q,[F.z8]:j}),style:{color:M}},a.createElement("div",{className:H?F.bu:F.iY,style:{opacity:H?M===u.e3?.8:.5:1},dir:"auto"},e),H&&a.createElement("div",{className:F.Lo,style:{opacity:M===u.YN?.8*P:P,boxShadow:$?void 0:`2px 4px 8px ${r}40`},dir:"auto"},z&&a.createElement("div",{className:z.length>0&&(W?.length??0)>0?F.vD:""},z),W&&a.createElement("div",{ref:Y},W)),a.createElement("div",{className:`${F.hD} ${i[k]}`,style:"NONE"!==k?{background:r,overflow:"hidden",borderRadius:"2px 20px 20px 20px"}:{background:r},onAnimationEnd:()=>U()}));return h?null:a.createElement("div",{className:F.Dy,style:{opacity:O?0:1},"data-testid":`multiplayer-cursor-${I}`},a.createElement("div",{className:F.or},w?a.createElement(a.Fragment,null,a.createElement("div",{className:F.p},a.createElement(G,{color:r,isHighFiveHandOut:m,temporarilyHide:f,isCursorHandOnRight:E})),a.createElement("img",{className:c()({[F.u0]:!0,[F.Bj]:!0,[F.DE]:m,[F.z8]:j}),src:B(r,m?o.z7E.DEFAULT:n,R),alt:`${m?"highfive cursor":"hand cursor"}`,onError:({currentTarget:e})=>{e.onerror=null,e.src=V(r,R)}})):a.createElement("img",{className:c()({[F.u0]:!0,[F.z8]:j}),src:B(r,n,R),alt:"cursor",onError:({currentTarget:e})=>{e.onerror=null,e.src=V(r,R)}}),I&&a.createElement(b.o,{sessionId:I})),(A||$)&&!S?a.createElement(N,{content:W||""},X):X)}),Y=a.memo(function({isCursorAndChatAreaOffscreen:e,x:r,y:n,children:i}){let o={display:e?"none":"block",willChange:"transform",transform:e?"translate3D(-10000px, -10000px, 0)":`translate3D(${r}px, ${n}px, 0)`};return a.createElement("div",{style:o},i)}),j=(e,r,n)=>{let i=React.useRef(null);i.current=e?.sessionId??i.current,useEffect(()=>{i.current&&n&&cursorChatTracker?.setOtherUserChattingState(i.current,r)},[n,r]),useEffect(()=>(i.current&&cursorChatTracker?.setOtherUserChattingState(i.current,!1),()=>{i.current&&cursorChatTracker?.setOtherUserChattingState(i.current,!1)}),[])}},709291:(e,r,n)=>{n.d(r,{Y_:()=>u});var i=n(848318);n(716544),n(741419),n(629829);var a=n(39773),o=n(818754);n(125899),n(333633),n(584305),n(727341),n(564531),n(45584),n(480236),n(67919),n(501736),n(166917);var s=n(8719),l=n(185371);n(210724);var c=n(27776);function d({reactionUrl:e,key:r}){let[n]=(0,i.useState)(.5*Math.random()+2),[a]=(0,i.useState)(.4*Math.random()+.3),o={animationDuration:`${n.toFixed(1)}s`},s={animationDuration:`${a.toFixed(1)}s`},[l]=(0,i.useState)(1*Math.random()+.5),c={willChange:"transform",transform:`translate3D(-5px, -10px, 0) scale(${l})`},[d]=(0,i.useState)(Math.random()>.5?"reactions--forward--8SV6f":"reactions--backward--ZCNdY");return i.createElement("div",{key:r,className:"reactions--translationContainer--G9Mik",style:c,"data-testid":"reaction"},i.createElement("div",{className:"reactions--floatingEmojiContainer--olUKm",style:o},i.createElement("img",{src:e,className:`reactions--floatingEmoji--IKqDo ${d}`,style:s,alt:""})))}function u(){let e=(0,a.md)(l.O9),r=Object.keys(e);return i.createElement("div",{className:"xag2p14"},r.map(r=>{let n=(0,s.WK)(e[r]);return n&&i.createElement(i.Fragment,null,i.createElement(d,{key:r+"0",reactionUrl:n}),i.createElement(d,{key:r+"1",reactionUrl:n}),i.createElement(d,{key:r+"2",reactionUrl:n}),i.createElement(d,{key:r+"3",reactionUrl:n}),i.createElement(d,{key:r+"4",reactionUrl:n}))}))}(0,o.hG)(c.tui)},590885:(e,r,n)=>{n.d(r,{O:()=>o}),n(848318),n(716544);var i=n(818754),a=(n(857188),n(654104),n(701780),n(442313),n(667323),n(552032),n(360399),n(727341),n(577023),n(189317),n(256429),n(545071),n(6760),n(27776));n(916167);let o="nudge-amount";(0,i.hG)(a.md8)},545289:(e,r,n)=>{n.d(r,{Bf:()=>tg,UB:()=>tE,xH:()=>tf});var i,a=n(848318),o=n(716544),s=n(445777),l=n(701964),c=n(175028),d=n(146311),u=n(140726),p=n(89484),m=n(733130),h=n(959154),_=n(206490),g=n(512277),f=n(698357),E=n(245794),y=n(770832),b=n(134681),v=n(480403),T=n(694351),I=n(225582),S=n(612824),w=n(289102),A=n(358381),C=n(841094),N=n(134685),L=n(340286),O=n(487711),R=n(453843),P=n(491255),D=n(595429),M=n(872573),k=n(303250),F=n(838751),x=n(881307),U=n(619671),B=n(622863),V=n(882661),G=n(514153),H=n(36145),K=n(593881),W=n(572115),z=n(900879),$=n(320087),Y=n(572253),j=n(163814),q=n(556120),X=n(103738),Z=n(463200),J=n(760717),Q=n(597414),ee=n(798391),et=n(569073),er=n(543913),en=n(763328),ei=n(240721),ea=n(741419),eo=n(952423),es=n(179703),el=n(157907),ec=n(611506),ed=n(508242),eu=n(536384),ep=n.n(eu),em=n(166365),eh=n(291499),e_=n(442313),eg=n(610023),ef=n(676441),eE=n(104720),ey=n(503024),eb=n(771430),ev=n(492678),eT=n(190421),eI=n(219205),eS=n(965550),ew=n(622978),eA=n(587919),eC=n(215707),eN=n(686891),eL=n(415893),eO=n(159584),eR=n(397501),eP=n(575425),eD=n(9818),eM=n(91747),ek=n(559481),eF=n(942826),ex=n(108557),eU=n(6756),eB=n(868552),eV=n(253654),eG=n(839808),eH=n(338929),eK=n(564837),eW=n(41859),ez=n(678540),e$=n(653624),eY=n(495576),ej=n(973603),eq=n(204081),eX=n(60943),eZ=n(509426),eJ=n(914019),eQ=n(248016),e0=n(785289),e1=n(711700),e2=n(23832),e4=n(98246),e3=n(492610),e7=n(594352),e5=n(592428),e8=n(274771),e9=n(287502),e6=n(127122),te=n(448969),tt=n(734454),tr=n(559949),tn=n(270844),ti=n(51159),ta=n(372209),to=n(253373),ts=n(704796),tl=n(857247),tc=n(160761),td=n(636462),tu=n(939968),tp=n(586337),tm=n(660901);let th=new ec.q(750);function t_(e){switch(e.stackMode){case"HORIZONTAL":if("WRAP"===e.stackWrap)switch(e.stackPrimaryAlignItems){case"MIN":case"SPACE_EVENLY":case"SPACE_BETWEEN":case void 0:return e6.A;case"CENTER":return e9.A;case"MAX":return te.A;default:(0,s.xb)(e.stackPrimaryAlignItems)}else switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return e3.A;case"CENTER":return e4.A;case"MAX":return e2.A;default:(0,s.xb)(e.stackCounterAlignItems)}case"VERTICAL":switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return e5.A;case"CENTER":return e7.A;case"MAX":return e8.A;default:(0,s.xb)(e.stackCounterAlignItems)}}return eB.A}(e=>{function r(e){return void 0!==e.objectsPanelThumbnailId}function n(e,n,i,o){let J={src:eX.A,tooltip:""};if(!e)return J;let Q=e.type;switch((0,eo.GI)(e)&&(Q="STAMP"),Q){case"BOOLEAN_OPERATION":switch(e.booleanOperation){case"UNION":return{src:i?a.createElement(E.C,null):eM.A,tooltip:(0,e_.t)("layer_icon.tooltip.union")};case"INTERSECT":return{src:i?a.createElement(y.q,null):eP.A,tooltip:(0,e_.t)("layer_icon.tooltip.intersect")};case"SUBTRACT":return{src:i?a.createElement(b.j,null):eD.A,tooltip:(0,e_.t)("layer_icon.tooltip.subtract")};case"XOR":return{src:i?a.createElement(v.p,null):ek.A,tooltip:(0,e_.t)("layer_icon.tooltip.exclude")};default:return J}case"VECTOR":return{src:i?a.createElement(T.g,null):tu.A,tooltip:(0,e_.t)("layer_icon.tooltip.vector")};case"STAR":return{src:i?a.createElement(I.j,null):tr.A,tooltip:(0,e_.t)("layer_icon.tooltip.star")};case"LINE":return{src:i?a.createElement(S.z,null):eW.A,tooltip:(0,e_.t)("layer_icon.tooltip.line")};case"ELLIPSE":return{src:i?a.createElement(w.H,null):ex.A,tooltip:(0,e_.t)("layer_icon.tooltip.ellipse")};case"RECTANGLE":case"ROUNDED_RECTANGLE":return{src:i?a.createElement(A.M,null):eX.A,tooltip:(0,e_.t)("layer_icon.tooltip.rectangle")};case"REGULAR_POLYGON":return{src:i?a.createElement(C.X,null):eq.A,tooltip:(0,e_.t)("layer_icon.tooltip.polygon")};case"TEXT":return{src:i?a.createElement(N.I,null):tc.A,tooltip:(0,e_.t)("layer_icon.tooltip.text")};case"SLICE":return{src:i?a.createElement(L.z,null):e0.A,tooltip:(0,e_.t)("layer_icon.tooltip.slice")};case"TRANSFORM":return{src:i?a.createElement(O.$,null):eV.A,tooltip:(0,e_.t)("layer_icon.tooltip.transform")};case"GROUP":case"FRAME":if((0,eI.oz)()&&r(e)&&e.parentNode?.isResponsiveSet)return{src:(0,eT.l)(e.size.x),tooltip:(0,e_.t)("layer_icon.tooltip.layout")};if(e.isStateGroup)return{src:i?a.createElement(R.k,null):ta.A,tooltip:(0,e_.t)("layer_icon.tooltip.component")};if((0,eS.R)(e))return{src:i?function(e){switch(e.stackMode){case"HORIZONTAL":if("WRAP"===e.stackWrap)switch(e.stackPrimaryAlignItems){case"MIN":case"SPACE_EVENLY":case"SPACE_BETWEEN":case void 0:return a.createElement(l.d,null);case"CENTER":return a.createElement(c.B,null);case"MAX":return a.createElement(d.E,null);default:(0,s.xb)(e.stackPrimaryAlignItems)}else switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return a.createElement(u.J,null);case"CENTER":return a.createElement(p.P,null);case"MAX":return a.createElement(m.n,null);default:(0,s.xb)(e.stackCounterAlignItems)}case"VERTICAL":switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return a.createElement(h.D,null);case"CENTER":return a.createElement(_.h,null);case"MAX":return a.createElement(g.A,null);default:(0,s.xb)(e.stackCounterAlignItems)}}return a.createElement(f.q,null)}(e):t_(e),tooltip:(0,e_.t)("layer_icon.tooltip.auto_layout")};if(e.resizeToFit)return{src:i?a.createElement(P.g,null):eV.A,tooltip:(0,e_.t)("layer_icon.tooltip.group")};else return{src:i?a.createElement(f.q,null):eB.A,tooltip:(0,e_.t)("layer_icon.tooltip.frame")};case"RESPONSIVE_SET":if((0,eI.oz)())return{src:o===eb.g$.Webpage?a.createElement(D.A,null):a.createElement(M.t,null),tooltip:(0,e_.t)("layer_icon.tooltip.webpage")};return{src:i?a.createElement(f.q,null):eB.A,tooltip:(0,e_.t)("layer_icon.tooltip.frame")};case"REPEATER":if((0,eI.oz)()&&(0,eg.U9)())return{src:a.createElement(k.u,null),tooltip:(0,e_.t)("layer_icon.tooltip.repeater")};return{src:eB.A,tooltip:(0,e_.t)("layer_icon.tooltip.frame")};case"CODE_COMPONENT":if((0,eI.oz)())return{src:a.createElement(R.k,null),tooltip:(0,e_.t)("layer_icon.tooltip.code_component")};return{src:eB.A,tooltip:(0,e_.t)("layer_icon.tooltip.component")};case"CODE_INSTANCE":if((0,eI.oz)())return{src:e.autoForkCode?a.createElement(F.l,null):a.createElement(x.$,null),tooltip:(0,e_.t)("layer_icon.tooltip.code_instance")};return{src:eB.A,tooltip:(0,e_.t)("layer_icon.tooltip.component")};case"CODE_LAYER":if((0,eI.oz)())return{src:a.createElement(F.l,null),tooltip:(0,e_.t)("layer_icon.tooltip.code_layer")};return{src:eB.A,tooltip:(0,e_.t)("layer_icon.tooltip.component")};case"CODE_LIBRARY":if((0,eI.oz)())return{src:a.createElement(U.O,null),tooltip:(0,e_.t)("layer_icon.tooltip.code_library")};return{src:eB.A,tooltip:(0,e_.t)("layer_icon.tooltip.component")};case"CODE_FILE":if((0,eI.oz)())return{src:a.createElement(F.l,null),tooltip:(0,e_.t)("layer_icon.tooltip.code_file")};return{src:eB.A,tooltip:(0,e_.t)("layer_icon.tooltip.component")};case"MODULE":return{src:ts.A,tooltip:(0,e_.t)("layer_icon.tooltip.module")};case"CODE_BLOCK":return{src:a.createElement(B.n,null),tooltip:(0,e_.t)("layer_icon.tooltip.code_block")};case"SYMBOL":if((0,el.k)().dse_templates_proto&&r(e)&&e.isTemplate)return{src:ts.A,tooltip:(0,e_.t)("layer_icon.tooltip.template")};if(r(e)&&e.isState||n?.isStateGroup)return{src:i?a.createElement(V.y,null):to.A,tooltip:(0,e_.t)("layer_icon.tooltip.variant")};return{src:i?a.createElement(R.k,null):ta.A,tooltip:(0,e_.t)("layer_icon.tooltip.component")};case"INSTANCE":return{src:i?a.createElement(G.m,null):eG.A,tooltip:(0,e_.t)("layer_icon.tooltip.instance")};case"STICKY":return{src:i?a.createElement(H.a,null):tn.A,tooltip:(0,e_.t)("layer_icon.tooltip.sticky")};case"SHAPE_WITH_TEXT":return{src:i?a.createElement(K.T,null):eJ.A,tooltip:(0,e_.t)("layer_icon.tooltip.shape_with_text")};case"CONNECTOR":return{src:i?a.createElement(W.y,null):eF.A,tooltip:(0,e_.t)("layer_icon.tooltip.connector")};case"STAMP":return{src:i?a.createElement(z.w,null):tt.A,tooltip:(0,e_.t)("layer_icon.tooltip.stamp")};case"SECTION":return{src:i?a.createElement($.e,null):eZ.A,tooltip:(0,e_.t)("layer_icon.tooltip.section")};case"WIDGET":{let r=e.guid?(0,es.UN)().get(e.guid.toString()):null;if(r&&"EMBED_WIDGET"===r.widgetId)return{src:i?a.createElement(Y.G,null):eU.A,tooltip:(0,e_.t)("layer_icon.tooltip.embed")};if(r&&"LINK_PREVIEW_WIDGET"===r.widgetId)return{src:i?a.createElement(j.N,null):ez.A,tooltip:(0,e_.t)("layer_icon.tooltip.link_preview")};if(r&&"HTML_WIDGET"===r.widgetId)return{src:a.createElement(q.V,null),tooltip:(0,e_.t)("layer_icon.tooltip.embed")};return{src:i?a.createElement(X.h,null):tp.A,tooltip:(0,e_.t)("layer_icon.tooltip.widget")}}case"CANVAS":return{src:eY.A,tooltip:(0,e_.t)("layer_icon.tooltip.canvas")};case"TABLE":return{src:i?a.createElement(Z.r,null):tl.A,tooltip:(0,e_.t)("layer_icon.tooltip.table")};case"SLIDE":return{src:e1.A,tooltip:(0,e_.t)("layer_icon.tooltip.slide")}}return J}function i(e){let r=(0,ed.xx)((e,r)=>{let n;return(n=th.get(e))&&n.thumbnailId===r||(n={thumbnailId:r,svg:eE.NO(e)},th.set(e,n)),n.svg}),{guid:n,node:i,isMenuIcon:o,isMenuIconPurple:s,className:l,editModeType:c,detachedInfo:d,disabled:u,locked:p,hovered:m,outOfView:h,scrollLeft:_,horizontalScrollEnabled:g,useUI3Icon:f,panelType:E,isCodeConnected:y,isPatternSourceIcon:b}=e,v=i?r(n,i.objectsPanelThumbnailId):"",T=i?.hasEnabledAnimatedPaint,I=i?.hasEnabledVideoPaint;return a.createElement(e2,{animated:T||I,className:l,detachedInfo:d,disabled:u,editModeType:c,horizontalScrollEnabled:g,hovered:m,isCodeConnected:y,isDefaultResponsiveSet:e.isDefaultResponsiveSet,isMenuIcon:o,isMenuIconPurple:s,isPatternSourceIcon:b,locked:p,node:i,onDoubleClick:()=>{e.node&&(e.navigateAndPanTo?e.navigateAndPanTo(e.node.guid):ea.glU.panToNode(e.node.guid,!1))},outOfView:h,panelType:E,scrollLeft:_,staticImage:i?.hasEnabledStaticImagePaint,thumbnailSrc:v,useUI3Icon:f})}e.LayerIcon=i,i.displayName="LayerIcon";let ec=e=>e.mirror.sceneGraph;e.ConnectedLayerIcon=function(e){let r=(0,o.d4)(ec);return a.createElement(i,{...e,node:r.get(e.guid)||null})};class eu extends a.PureComponent{getAllPaints(e){return[...e.fillPaints||[],...e.strokePaints||[],...e.backgroundPaints||[]]}renderBaseIcon(){let{node:e,parentNode:r,isMenuIcon:n,isMenuIconPurple:i,className:o,disabled:s,locked:l,hovered:c,outOfView:d,scrollLeft:u,horizontalScrollEnabled:p,useUI3Icon:m,isPatternSourceIcon:h}=this.props;return a.createElement(e2,{animated:this.hasEnabledAnimatedPaintNodeChange(e),className:o,disabled:s,horizontalScrollEnabled:p,hovered:c,isMenuIcon:n,isMenuIconPurple:i,isPatternSourceIcon:h,locked:l,node:e,outOfView:d,parentNode:r,scrollLeft:u,staticImage:this.hasEnabledStaticPaintNodeChange(e),useUI3Icon:m})}renderVariableIcon(){let{variableResolvedType:e}=this.props.node;return null==e?this.renderBaseIcon():a.createElement(ev.i,{type:e})}renderVariableCollectionIcon(){return a.createElement(em.B,{svg:tm.A,className:this.props.className,autosize:!0})}renderStyleIcon(){let{node:e,className:r}=this.props;switch(e.styleType){case"GRID":let n=(0,ef.s$)(e);return a.createElement(em.B,{svg:n,className:r,autosize:!0,width:"10px"});case"FILL":return a.createElement(em.B,{svg:eN.A,className:r});case"EFFECT":return a.createElement(em.B,{svg:eC.A,className:r});case"TEXT":return a.createElement(em.B,{svg:eL.A,className:r});default:return this.renderBaseIcon()}}hasEnabledAnimatedPaintNodeChange(e){for(let r of this.getAllPaints(e))if(r.animatedImage)return!0;return!1}hasEnabledStaticPaintNodeChange(e){for(let r of this.getAllPaints(e))if(r.image)return!0;return!1}render(){let{node:e,className:r}=this.props;return e.styleType?this.renderStyleIcon():"VARIABLE"===e.type?this.renderVariableIcon():"VARIABLE_SET"===e.type?this.renderVariableCollectionIcon():"CANVAS"===e.type?a.createElement(em.B,{svg:eO.A,className:r}):this.renderBaseIcon()}}e.NodeChangeIcon=eu;class e2 extends a.PureComponent{render(){let e,r;let{node:i,parentNode:o,animated:s,staticImage:l,thumbnailSrc:c,isMenuIcon:d,isMenuIconPurple:u,onDoubleClick:p,editModeType:m,detachedInfo:h,outOfView:_,horizontalScrollEnabled:g,panelType:f,isPatternSourceIcon:E}=this.props;if(!i)return null;let y=ew.V3;c&&(y=ew.W5),d&&(y=u?ew.aN:ew.TK);let b=!1,v="";this.props.isDefaultResponsiveSet?(e=f===eb.g$.Webpage?a.createElement(J.Q,null):a.createElement(M.t,null),v=(0,e_.t)("layer_icon.tooltip.home")):i.mask?(e=this.props.useUI3Icon?a.createElement(Q.d,null):e$.A,v=(0,e_.t)("layer_icon.tooltip.mask")):(s||l)&&(0,eo.oY)(i.type)&&!(0,eo.GI)(i)?s?(e=this.props.useUI3Icon?a.createElement(ee._,null):eH.A,v=(0,e_.t)("layer_icon.tooltip.video")):(e=this.props.useUI3Icon?a.createElement(et._,null):eK.A,v=(0,e_.t)("layer_icon.tooltip.image")):c?(e=(0,em.V)(c),v=n(i,o).tooltip):m===ea.m1T.DEV_HANDOFF&&h?.status==="loaded"&&"SYMBOL"!==i.type&&"INSTANCE"!==i.type?(e=this.props.useUI3Icon?a.createElement(er.o,null):eA.A,b=!0):this.props.isCodeConnected?(e=a.createElement(en.s,null),v=(0,e_.t)("layer_icon.tooltip.code_connect")):({src:e,tooltip:v}=n(i,o,this.props.useUI3Icon,f),r=function(e){if(e)switch(e.type){case"TEXT":return td.A;case"STICKY":return ti.A;case"SHAPE_WITH_TEXT":return eQ.A;case"FRAME":if((0,eS.R)(e))return t_(e);break;case"CANVAS":return ej.A}}(i));let T=!b&&"ABSOLUTE"===i.stackPositioning&&(this.props.useUI3Icon?a.createElement(ei.I,{className:ew.E7}):a.createElement(em.B,{className:ew.E7,svg:eR.A}));return a.createElement("span",{className:ep()(this.props.className||y,ew.P0,{[ew.EA]:g,[ew.EU]:g&&_}),onDoubleClick:E?void 0:p,"data-tooltip":E?null:v||null,"data-tooltip-show-above":!0,"data-tooltip-type":ey.Ib.TEXT},"string"==typeof e?a.createElement(eh.t,{svg:e,fallbackSvg:r}):a.createElement("span",{style:{stroke:"none",fill:"none"}},e),T)}}})(i||(i={}));let tg=i.ConnectedLayerIcon,tf=i.LayerIcon,tE=i.NodeChangeIcon},965550:(e,r,n)=>{function i(e){let r=e.stackMode;return"HORIZONTAL"===r||"VERTICAL"===r}n.d(r,{R:()=>i}),n(848318)},771430:(e,r,n)=>{n.d(r,{g$:()=>s}),n(848318),n(716544),n(403054),n(741419);var i=n(952423);n(179703),n(157907),n(39773);var a=n(508242);n(162951);var o=n(262032);n(156843);var s=(e=>(e.Object="OBJECT",e.Webpage="WEBPAGE",e.CodeComponent="CODE_COMPONENT",e))(s||{});(0,a.xx)((e,r)=>{let n=1/0;return(0,o.YI)(e,r,r=>{r&&(n=Math.min(n,(0,i.F0)(e,r.guid)))}),n===1/0&&(n=0),n})},98582:(e,r,n)=>{n(403054),n(741419),n(952423),n(157907),n(654104),n(127752),n(262032),n(353304),n(786175)},156843:(e,r,n)=>{(0,n(848318).createContext)(null)},878328:(e,r,n)=>{n.d(r,{N:()=>g});var i=n(848318),a=n(356505),o=n(818754),s=n(918852),l=n(851112),c=n(145015),d=n(442313),u=n(667323);n(22647);var p=n(366236),m=n(6760),h=n(27776),_=n(542574);(0,o.hG)(h.oVP);class g extends i.PureComponent{constructor(e){super(e),this.onClose=()=>{this.props.dispatch(u.Z1()),(0,l.hW)(p.vA.NEVER)},this.onClickOpenInApp=()=>{this.props.dispatch(u.Z1()),(0,l.hW)(this.state.alwaysChecked?p.vA.ALWAYS:p.vA.NEVER),(0,s.Sr)(location.href,s.B3.OPEN_IN_DESKTOP_MODAL)},this.onClickAlwaysOpenDesktopApp=()=>{this.setState({alwaysChecked:!this.state.alwaysChecked})},this.state={alwaysChecked:(0,l.vn)()!==p.vA.NEVER}}static shouldShowOnce(){return(0,l._p)()&&void 0===(0,l.vn)()}static shouldAutoOpen(){return(0,l._p)()&&(0,l.vn)()===p.vA.ALWAYS}static toggleAutoOpen(){let e=(0,l.vn)()===p.vA.ALWAYS;(0,l.hW)(e?p.vA.NEVER:p.vA.ALWAYS)}static isAutoOpenEnabled(){return(0,l.vn)()===p.vA.ALWAYS}static enableAutoOpen(){(0,l.hW)(p.vA.ALWAYS)}static disableAutoOpenIfUnset(){void 0===(0,l.vn)()&&(0,l.hW)(p.vA.NEVER)}render(){return i.createElement(m.vx,{initialPosition:this.props.initialPosition,title:(0,d.t)("desktop_open_views.open_in_desktop_modal.title"),headerSize:"small",dragHeaderOnly:!0,onClose:this.onClose},i.createElement("div",{className:_.k},i.createElement("div",{className:_.K},i.createElement(c.tB,{id:"always-open-desktop-app",checked:this.state.alwaysChecked,onClick:this.onClickAlwaysOpenDesktopApp}),i.createElement(c.JU,{htmlFor:"always-open-desktop-app"},(0,d.tx)("desktop_open_views.open_in_desktop_modal.always_open_in_app_checkbox"))),i.createElement("div",{className:_.K},i.createElement(a.$n,{variant:"secondary",onClick:this.onClose},(0,d.tx)("desktop_open_views.modal.dismiss_button")),i.createElement(a.$n,{variant:"primary",onClick:this.onClickOpenInApp},(0,d.tx)("desktop_open_views.open_in_desktop_modal.open_in_app_button")))))}}g.displayName="OpenDesktopAppModal"},872055:(e,r,n)=>{n.d(r,{VS:()=>_});var i=n(848318),a=n(716544),o=n(741419);n(39773),n(536384);var s=n(541525);n(125055),n(397579),n(925025),n(602836),n(119699),n(881393),n(727341),n(416105),n(577023);var l=n(601412),c=n(139736),d=n(326971),u=n(439984);n(369600);var p=n(834996);n(376780),n(207715),n(992277),n(430285);var m=n(878028);n(493554),n(195507),n(502255),n(473889),n(97607),n(390709),n(442313),n(635547),n(50258),n(158845),m.z.record(m.z.object({thumbnail_url:m.z.string(),thumbnail_meta:m.z.object({}).passthrough().transform(e=>JSON.stringify(e)),created_at:m.z.string().optional()})),n(808885),n(857188),n(992444),n(449977),n(252244);var h=(e=>(e.RANGE="range",e.INDIVIDUAL="individual",e))(h||{});function _({pagesList:e,isComparingChanges:r,enabled:n=!0}){let m=(0,c.Z)("page_change_navigator_navigate"),h=(0,l.E)(),_=(0,s.U)(),g=(0,a.wA)(),f=(0,p._6)(),E=(0,d.dh)(n),y=(0,a.d4)(e=>e.versionHistory);return(0,i.useCallback)(async i=>{n&&await (0,d.$P)(i,E,y,g,(0,u.Fy)(e,i)===o.xal.LOADED,_,m,h,r,f)},[e,m,h,_,g,f,E,y,r,n])}n(104896),n(673906)},158845:(e,r,n)=>{n.d(r,{l7:()=>d});var i=n(179703),a=n(39773),o=n(925025),s=n(792478);(0,s.Wh)(()=>(0,a.eU)([]));let l=(0,s.Wh)(()=>(0,a.eU)(null));(0,s.Wh)(()=>(0,a.eU)(o.r.INIT));let c=(0,s.Wh)(()=>(0,a.eU)(null)),d=(0,a.eU)(e=>e(c),(e,r,n)=>{let a=e(c),o="function"==typeof n?n(a):n;if(a!==o){if(r(c,o),o){let e=(0,i.UN)().get(o);r(l,e?.name||"")}else r(l,null)}})},808885:(e,r,n)=>{n(848318),n(716544),n(741419),n(157907),n(39773),n(536384),n(379338),n(654104),n(166365),n(442313),n(697714),n(58802),n(640533),n(235441),n(727341),n(326971),n(776618),n(439984),n(207715),n(166917),n(503024),n(783432),n(857188),n(964e3),n(256429),n(214758)},948550:(e,r,n)=>{n(848318),n(716544),n(741419),n(579020),n(667323),n(369600),n(636233)},104896:(e,r,n)=>{n(848318),n(716544),n(741419),n(179703),n(39773),n(541525),n(963376),n(58802),n(416105),n(326971),n(439984),n(369600),n(764016),n(158845)},79400:(e,r,n)=>{n.d(r,{v:()=>b});var i=n(848318),a=n(891627),o=n(693220),s=n(741419),l=n(702),c=n(889132),d=n(570958),u=n(500276),p=n(392997),m=n(27776),h=n(457102);let _=[{label:"Time between frames (ms)",id:"inter-frame-time",max:100,barWidth:1},{label:"React work (ms)",id:"react",max:100,barWidth:1},{label:"Frame handler (ms)",id:"frame",max:100,barWidth:1,children:[{label:"Scene render (ms)",id:"scene-render",max:100,barWidth:1,children:[{label:"Render tree creation (ms)",id:"render-tree-generation",max:100,barWidth:1}]},{label:"React + redux (ms)",id:"react-render",max:100,barWidth:1},{label:"Symbol updater (ms)",id:"symbol-updater",max:100,barWidth:1},{label:"Style updater (ms)",id:"style-updater",max:100,barWidth:1},{label:"Comments renderer (ms)",id:"comments-render",max:100,barWidth:1}]},{label:"C++ event handling (ms)",id:"fullscreen-handle-event",max:100,barWidth:1},{label:"malloc call count (#)",id:"cpp-malloc-call-count",autoResize:!0,max:100,barWidth:1},{label:"malloc size totals (KB)",id:"cpp-malloc-size-totals",autoResize:!0,max:1,barWidth:1},{label:"Used JS memory (MB)",id:"total-memory",max:10,autoResize:!0,barWidth:1},{label:"Used c++ heap memory (MB)",id:"cpp-heap-memory",max:10,autoResize:!0,barWidth:1},{label:"Render job queue length",id:"render-job-queue-length",max:4,autoResize:!0,barWidth:1},{label:"Time between render tree swaps (ms)",id:"render-tree-swap-time",max:300,autoResize:!0,barWidth:1},{label:"Stale content time (ms)",id:"render-tree-stale-time",max:500,autoResize:!0,barWidth:1},{label:"Est viewport coverage (ms)",id:"estimated-viewport-coverage",max:1,autoResize:!0,barWidth:1},{label:"Min viewport sharpness",id:"min-sharpness",max:1,autoResize:!0,barWidth:1},{label:"Avg viewport sharpness",id:"avg-sharpness",max:1,autoResize:!0,barWidth:1}];function g(e,r){var n=e.getBoundingClientRect();e.width=n.width*r,e.height=n.height*r,e.style.width=`${n.width}px`,e.style.height=`${n.height}px`;let i=e.getContext("2d");i&&(i.scale(r,r),i.imageSmoothingEnabled=!1)}class f extends i.PureComponent{constructor(e){super(e),this.ctx=null,this.lastDisplayedUpdateTime=0,this.displayedNumber=null,this.buffer=[],this.dpr=1,this.canvasRef=i.createRef(),this.lastRenderedHitCount=0,this.updateFromTimer=e=>{let r=e.hitCount-this.lastRenderedHitCount,n=0;for(let i=Math.max(0,e.elapsedTimes.length-r);i<e.elapsedTimes.length;i++)n+=e.elapsedTimes[i];this.append(n),this.lastRenderedHitCount=e.hitCount},this.yAxisMaxValue=e.max,this.bufferCapacity=Math.ceil(e.width/e.barWidth)}componentDidMount(){if(this.canvasRef.current){this.dpr=window.devicePixelRatio;let e=this.canvasRef.current;this.ctx=e.getContext("2d"),g(e,this.dpr)}}append(e){if(!this.ctx)return;let r=this.ctx.canvas,n=this.ctx;for(this.dpr!==window.devicePixelRatio&&(this.dpr=window.devicePixelRatio,g(r,this.dpr)),this.buffer.push(e);this.buffer.length>=this.bufferCapacity;)this.buffer.shift();let i=1/0,a=-1/0;for(let e of this.buffer)i=Math.min(i,e),a=Math.max(a,e);let o=this.props.width,s=this.props.height,l=this.props.barWidth,c=s-20;n.font="9px monospace",n.fillStyle=this.props.bg,n.textBaseline="top",n.fillRect(0,0,o,20),n.fillStyle=this.props.fg;let d=performance.now();if((null===this.displayedNumber||d-this.lastDisplayedUpdateTime>150)&&(this.displayedNumber=e,this.lastDisplayedUpdateTime=d),n.fillText(`sample: ${this.displayedNumber.toFixed(1)}`,0,0),n.fillText(`${i.toFixed(1)} - ${a.toFixed(1)}`,0,10),n.fillStyle=this.props.bg,this.props.autoResize){if(e>this.yAxisMaxValue){let i=Math.pow(2,Math.ceil(Math.log2(e/this.yAxisMaxValue)));this.yAxisMaxValue*=i,n.fillRect(0,s-c,o,(i-1)*c/i),n.drawImage(r,0,(s-c)*this.dpr,o*this.dpr,c*this.dpr,0,s-c/i,o,c/i)}else if(this.yAxisMaxValue>2*Math.max(this.props.max,a)){let e=Math.pow(2,Math.ceil(Math.log2(this.yAxisMaxValue/Math.max(this.props.max,a))));this.yAxisMaxValue/=e,n.drawImage(r,0,(s-c/e)*this.dpr,o*this.dpr,c/e*this.dpr,0,s-c,o,c)}}n.drawImage(r,l*this.dpr,(s-c)*this.dpr,(o-l)*this.dpr,c*this.dpr,0,s-c,o-l,c);let u=Math.floor(c*Math.min(1,e/this.yAxisMaxValue));n.fillRect(o-l,s-c,l,c),n.fillStyle=this.props.fg,n.fillRect(o-l,s-u,l,u)}render(){return i.createElement("canvas",{className:h.wP,ref:this.canvasRef,width:this.props.width,height:this.props.height})}}f.displayName="Sparkline";class E extends i.PureComponent{constructor(e){super(e),this.sparklines=new Map,this.lastFrameTime=null,this.tsmerMetrics=new d.s,this.updateTimers=()=>{if(this.tsmerMetrics.onFrame(),null==this.lastFrameTime)this.lastFrameTime=performance.now();else{let e=performance.now(),r=this.sparklines.get("inter-frame-time");r&&(r.append(e-this.lastFrameTime),this.lastFrameTime=e)}let e=this.sparklines.get("total-memory");e&&e.append(((0,p.aW)()??0)/1048576);let r=this.sparklines.get("cpp-heap-memory");r&&r.append(s.hMR.getTotalUsedHeapMemory()/1048576);let n=this.sparklines.get("cpp-malloc-call-count");n&&n.append(s.hMR.getAllocCallCount());let i=this.sparklines.get("cpp-malloc-size-totals");i&&i.append(s.hMR.getAllocTotal()/1024),s.hMR.resetAllocCountsAndTotal();let a=this.sparklines.get("render-job-queue-length");a&&a.append(s.CeL.getRendererJobQueueLength());let o=this.sparklines.get("render-tree-swap-time");o&&o.append(this.tsmerMetrics.lastEditFrameTime());let c=this.sparklines.get("render-tree-stale-time");c&&c.append(this.tsmerMetrics.lastFrameStaleness());let d=this.sparklines.get("estimated-viewport-coverage");d&&d.append(s.glU.estimatedViewportRenderCoverage(s.pWM.DEFINITELY_COVERED_ONLY));let u=this.sparklines.get("min-sharpness");u&&u.append(s.glU.minViewportSharpness());let m=this.sparklines.get("avg-sharpness");m&&m.append(s.glU.avgViewportSharpness());let h=l.rH.report(),_=[],g=e=>{_.push(e.name);let r=this.sparklines.get(_.join(","));for(let n of(r&&r.updateFromTimer(e),e.children))g(n);_.pop()};for(let e of h)g(e);requestAnimationFrame(this.updateTimers)},this.sparklineRef=e=>r=>{r&&this.sparklines.set(e.join(","),r)},this.frameRequest=null,this.renderHUDNode=(e,r=[])=>{let n=r.concat([e.id]),a=150-10*r.length,o=u.sx.add({color:"black"}).$.color,s=u.sx.add({backgroundColor:"white"}).$.backgroundColor,l=!!(this.state?.nodesHiddenState??{})[e.id];return i.createElement("div",{key:e.id},i.createElement("div",{className:h.n5},i.createElement("div",null,i.createElement("div",null,i.createElement("button",{style:{backgroundColor:"gray",display:"inline-block",marginRight:"2px"},onClick:()=>{this.toggleNodeHidden(e.id)}},l?"(+)":"(-)"),e.label),!l&&i.createElement(f,{ref:this.sparklineRef(n),fg:o,bg:s,barWidth:e.barWidth,max:e.max,height:40,autoResize:!!e.autoResize,width:a}))),e.children&&!l&&i.createElement("div",{className:h.Q3},e.children.map(e=>this.renderHUDNode(e,n))))},this.state={nodesHiddenState:{react:!0,frame:!0,"fullscreen-handle-event":!0,"cpp-malloc-call-count":!0,"cpp-malloc-size-totals":!0,"total-memory":!0,"cpp-heap-memory":!0,"render-job-queue-length":!0,"render-tree-swap-time":!0,"render-tree-stale-time":!0,"estimated-viewport-coverage":!0,"min-sharpness":!0,"avg-sharpness":!0}}}componentDidMount(){this.frameRequest=requestAnimationFrame(this.updateTimers)}componentWillUnmount(){this.frameRequest&&cancelAnimationFrame(this.frameRequest)}toggleNodeHidden(e){let r=this.state?.nodesHiddenState??{},n=!!r[e];this.setState({nodesHiddenState:{...r,[e]:!n}})}render(){let e=this.props.isFigjamFile?0:parseInt(m.uj0,10)+5,r=(0,c.bG)()+5;return i.createElement("div",{className:h.vY,style:{right:e,top:r}},_.map(e=>this.renderHUDNode(e)))}}E.displayName="PerfHUD";let y=null;function b(e){y?(a.unmountComponentAtNode(y),document.body.removeChild(y),y=null):(y=document.createElement("div"),document.body.appendChild(y),(0,o.H)(y).render(i.createElement(E,{isFigjamFile:e})))}},409802:(e,r,n)=>{n.d(r,{qg:()=>a,r5:()=>i}),n(848318),n(697751),n(992444),n(52004),n(501736),n(483372);let i=["NORMAL","SELECT_DIVIDER","DARKEN","MULTIPLY","LINEAR_BURN","COLOR_BURN","SELECT_DIVIDER","LIGHTEN","SCREEN","LINEAR_DODGE","COLOR_DODGE","SELECT_DIVIDER","OVERLAY","SOFT_LIGHT","HARD_LIGHT","SELECT_DIVIDER","DIFFERENCE","EXCLUSION","SELECT_DIVIDER","HUE","SATURATION","COLOR","LUMINOSITY"];function a(e,r){return e===r}["PASS_THROUGH"].concat(i)},274831:(e,r,n)=>{n.d(r,{U:()=>d});var i=n(848318),a=n(857188),o=n(366651),s=n(51910),l=n(545983),c=n(91877);function d(e){let r=i.useRef(null);(0,s.f4)(()=>{let e=window.getSelection();if(!e)return;let n=e.focusNode;for(;n;){if(n===r.current){e.removeAllRanges();break}n=n.parentNode}});let n=(0,o.k5)(),d=e.flowPanel??null,u=e.localStylesPanel??null;return n?null:i.createElement("div",{ref:r,onKeyDown:e=>{if((0,a.Fo)(e)&&e.keyCode===a.Uz.A){let r=window.getSelection();if(r){let n=document.createRange();n.selectNodeContents(e.currentTarget),r.removeAllRanges(),r.addRange(n),e.preventDefault()}}},className:c.z},d,u,i.createElement(l.m,null))}},356408:(e,r,n)=>{n.d(r,{Af:()=>eb,DP:()=>ec,On:()=>en,Qn:()=>eI,ZN:()=>eg,_z:()=>ee,aj:()=>Q,bm:()=>ed,nu:()=>e_,x5:()=>ef});var i=n(848318),a=n(716544),o=n(551316),s=n(992277),l=n(376025),c=n(679334),d=n(596616),u=n(741419),p=n(536384),m=n.n(p),h=n(534355),_=n(502255),g=n(166365),f=n(442313),E=n(464079),y=n(547449),b=n(926567),v=n(955529),T=n(717587);n(246972);var I=n(144072),S=n(136031),w=n(577023),A=n(718451),C=n(51910),N=n(870769),L=n(561162),O=n(166917),R=n(778727),P=n(153059),D=n(931516),M=n(503024),k=n(60546),F=n(176386),x=n(70529),U=n(102494),B=n(509195),V=n(654445),G=n(967003),H=n(961662),K=n(541910);n(318100);var W=n(243315),z=n(487497),$=n(163566),Y=n(188060),j=n(319640),q=n(651425),X=n(991344);let Z=new Set(["SOLID","GRADIENT_ANGULAR","GRADIENT_DIAMOND","GRADIENT_LINEAR","GRADIENT_RADIAL"]),J=new S.ro;function Q(e){let r=eI(),{blendMode:n,onError:a}=e,o=(0,A.gl)(n)||"string"==typeof n;return(n&&!o&&(console.error(TypeError(`Expected mixed | string | undefined, got ${typeof n}`)),a&&a(n),n=void 0),!n||["NORMAL","PASS_THROUGH"].includes(n))?null:r&&!e.layout?i.createElement($._p,{className:q.Om,copyValue:n.toLowerCase(),copyName:"mix-blend-mode",disableDetailModalEntry:!0},i.createElement("span",{className:q.mL},(0,f.tx)("inspect_panel.colors.blend_mode",{blendMode:J.format(n)}))):i.createElement($._p,{indent:e.indent,className:e.className,name:(0,f.t)("inspect_panel.colors.blend"),value:J.format(n),copyName:"mix-blend-mode"})}function ee({onClick:e,color:r,value:n,labelRef:a,pillClassName:o,htmlAttributes:s,disableHover:c}){let d=i.createElement(i.Fragment,null,i.createElement(F.J,{color:r,forceNonInteractive:!0}),i.createElement("div",{ref:a,className:q.LK},n)),u=m()(q.bE,!c&&q.DQ,o);return e?i.createElement(l.E,{className:u,onClick:e,htmlAttributes:s},d):i.createElement("div",{className:u},d)}function et({paint:e,color:r,valueFormatter:n,matchingVars:a,indent:o,hideBlendMode:l,disableDetailModalEntry:c,onMouseEnter:d,onMouseLeave:u}){let p=(0,w.Ku)(),h={...r,a:r?.a??e.opacity??1},{value:g,copyValue:f}=(0,b.G)(h,p,n),E=(0,$.Cm)(f,"color"),y=i.useCallback(()=>{E?.()},[E]),{ref:v,...T}=(0,x.X)(g),I={...T,onMouseEnter:d,onMouseLeave:u};return i.createElement("div",{className:q.ab,"data-testid":"inspectMultilineColorRow"},i.createElement($._p,{className:m()(q.$f,o&&q.zz),disableDetailModalEntry:c,matchingVars:a,copyValue:null},i.createElement(ee,{color:h,value:g,onClick:y,labelRef:v,htmlAttributes:I})),!l&&i.createElement(Q,{className:ev(),blendMode:e.blendMode,onError:r=>{let n=TypeError(`Expected string | undefined, got ${typeof r}`);console.error(n),(0,_.$D)(s.e.DEVELOPER_TOOLS,n,{extra:{type:typeof r,value:r,source:"RawColorUI3",props:{paint:e}}})}}))}function er({variable:e,color:r}){return e?.subscriptionStatus==="LOCAL"&&e?.isSoftDeleted?i.createElement("div",{"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,f.t)("variables.variable_was_deleted")},i.createElement(g.B,{className:q.Bx,svg:X.A})):i.createElement(G.P$,null,i.createElement(F.J,{color:r,forceNonInteractive:!0}))}function en({color:e,variable:r,label:n,onClick:a,shouldStretch:o,selected:s}){let l=!1===s;return i.createElement(G.ss,{styleIcon:i.createElement(er,{color:e,variable:r}),styleName:n,styleDescription:r?.description,onClick:a,disableHover:l,shouldStretch:o,selected:s,hasFocus:s})}function ei({id:e,variable:r,color:n,paint:a,indent:o,hideBlendMode:l,disableDetailModalEntry:c,onMouseEnter:d,onMouseLeave:u}){let p=(0,z.uV)(r)??"",h=(0,$.Cm)(p,"color-variable"),g=i.useCallback(()=>{h?.()},[h]),f={...n,a:n?.a??a.opacity??1};return i.createElement("div",{className:q.ab,"data-testid":"inspectMultilineColorRow",onMouseEnter:d,onMouseLeave:u},i.createElement($._p,{className:m()(q.vQ,o&&q.it),variableId:e,disableDetailModalEntry:c,copyValue:null},i.createElement(en,{color:f,variable:r,label:p,onClick:g})),!l&&i.createElement(Q,{className:ev(),blendMode:a.blendMode,onError:e=>{let n=TypeError(`Expected string | undefined, got ${typeof e}`);console.error(n),(0,_.$D)(s.e.DEVELOPER_TOOLS,n,{extra:{type:typeof e,value:e,source:"VariableValueUI3",props:{paint:a,variable:r}}})}}))}function ea(e){let{isInStyle:r,rows:n}=e;return i.createElement("div",{className:q.n,"data-testid":"inspectMultilineColorRow",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},i.createElement($.d1,{className:m()({[q.UU]:r},q.y4),label:e.styleName,defaultLabel:e.defaultStyleName,isVariable:e.isVariable,variableId:e.variableId,disableDetailModalEntry:e.disableDetailModalEntry},i.createElement(F.J,{className:q.Gz,paint:e.paint,tooltip:e.description})),i.createElement(Q,{className:ev({isInStyle:r}),indent:!0,blendMode:e.paint.blendMode,onError:r=>{let n=TypeError(`Expected string | undefined, got ${typeof r}`);console.error(n),(0,_.$D)(s.e.DEVELOPER_TOOLS,n,{extra:{type:typeof r,value:r,source:"MultiLinePaintValue",props:e}})}}),n)}function eo(e){let r=eI(),{format:n}=e,{paint:a,valueFormatter:o}=e.formattableColor,s=(0,K._B)(a),{variable:l,variableDisplayName:c,matchingVars:d}=e.formattableColor.variable??s;if(!a.color)return null;let u={...a.color,a:a.opacity??1},p=l?.id??l?.node_id;if(r)return l?i.createElement(ei,{id:p,variable:l,color:u,paint:a,indent:e.isInStyle,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave}):i.createElement(et,{paint:e.formattableColor.paint,color:u,valueFormatter:e.formattableColor.valueFormatter,indent:e.isInStyle,disableDetailModalEntry:e.disableDetailModalEntry,matchingVars:d,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave});if(l){let n=i.createElement(es,{format:e.format,valueFormatter:o,color:u,isInStyle:e.isInStyle});return i.createElement(ea,{paint:a,styleName:c,isVariable:!0,variableId:p,isInStyle:e.isInStyle,rows:r?void 0:n,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave})}let m=(0,j.q)(u,n,o);return i.createElement($._p,{className:ev({format:n,isInStyle:e.isInStyle}),copyValue:m.copyValue,matchingVars:d,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},i.createElement(F.J,{className:q.Gz,paint:a}),i.createElement("span",{className:q.As,"data-testid":"inspectColorRow"},m.value),j.x.has(e.format)&&i.createElement(Y.J,{value:u.a}))}function es(e){let r=(0,j.q)(e.color,e.format,e.valueFormatter);return i.createElement($._p,{className:ev({format:e.format,isInGradient:e.isInGradient,isInStyle:e.isInStyle}),copyValue:r.copyValue,variableId:e.variableId,matchingVars:e.matchingVars,disableDetailModalEntry:e.disableDetailModalEntry},i.createElement("div",null),i.createElement("span",{className:q.As},r.value),j.x.has(e.format)&&i.createElement(Y.J,{value:e.color.a,showOpaque:e.alwaysShowOpacity||!1}))}function el(e){let r=eI(),{encodedPaint:n,paint:a,valueFormatter:o,typeFormatter:s}=e.formattableColor,l=a.stopsVar?.length?a.stopsVar:a.stops,c=i.createElement(i.Fragment,null,l?.map((r,s)=>i.createElement(eT,{paint:a,encodedPaint:n,format:e.format,gradientStop:r,isInStyle:e.isInStyle,key:s,opacity:a.opacity??1,valueFormatter:o,disableDetailModalEntry:e.disableDetailModalEntry})));if(r){let r=a.opacity&&1!==a.opacity?` \xb7 ${(100*a.opacity).toLocaleString("en",{maximumFractionDigits:2})}%`:null;return i.createElement("div",{className:q.ab,"data-testid":"inspectMultilineColorRow"},i.createElement($._p,{className:m()(q.$f,q.bE,q.Ul),disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},i.createElement(F.J,{paint:a}),(0,f.tx)("inspect_panel.colors.gradient",{gradientType:s(a.type)}),r),i.createElement(Q,{className:ev(),indent:!0,blendMode:a.blendMode}),c)}return i.createElement(ea,{paint:a,defaultStyleName:(0,f.t)("inspect_panel.colors.gradient",{gradientType:s(a.type)}),isInStyle:e.isInStyle,rows:c,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave})}function ec(e){let{formattableColor:r}=e;switch(r.paint.type){case"SOLID":return i.createElement(eo,{...e});case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return i.createElement(el,{...e});default:return null}}function ed(e){return e.visible&&e.type&&Z.has(e.type)}let eu=()=>{let e=(0,z.jY)(),r=(0,z.uQ)(),n=(0,T.Q)(),o=(0,E.v4)(),s=(0,k.ks)(),l=(0,a.d4)(e=>(0,P.$u)(e)>1?e.mirror.selectionPaints.paints:e.mirror.selectionPaints.paintsDirectlyOnSingleNode),c=(0,B.Ig)(),d=i.useMemo(()=>l.filter(e=>ed(e.paint)).map(e=>(0,B.dc)(e.paint,c)),[l,c]),u=(0,a.d4)(e=>(0,P.$u)(e)>1?e.mirror.selectionPaints.styles:e.mirror.selectionPaints.stylesDirectlyOnSingleNode),p=(0,a.d4)(R.e_),m=i.useMemo(()=>{let r=u.map(e=>({ds:(0,N.Gp)(e.styleKey,e.styleGUIDs,p),name:e.styleName})),n=[];return r.forEach(({ds:r,name:i})=>{if(!r)return;let a=r.kind===D.AT.DANGLING?{...r.value,style_type:"FILL"}:r.value,o=e=>e.filter(ed).map(e=>(0,B.dc)(e,c)),s=(0,L.QH)(a);if(s&&"FILL"===s.type)n.push((0,B.rP)(i,r,o(s.fillPaints)));else{let a=e.get(r.value.node_id);a&&n.push((0,B.rP)(i,r,o(a.fills)))}}),n},[u,p,e,c]);return i.useMemo(()=>{let e=[...m,...d];return(0,K.QT)(e,r,n.inspectionMode,o,s)},[m,d,r,n.inspectionMode,o,s])},ep=(e,r)=>e.type===V.q.STYLE?i.createElement(eh,{color:e,format:r.format}):i.createElement(em,{color:e,format:r.format});function em(e){return i.createElement(ec,{format:e.format,formattableColor:e.color,disableDetailModalEntry:e.disableDetailModalEntry})}function eh(e){let r=(0,a.wA)(),n=eI(),s=(0,v.Fj)(e.color.dsStyle.value.key),l=e.color.dsStyle.kind,c=e.color.dsStyle.value.node_id,d=i.useMemo(()=>(0,o.s)(()=>{c&&r(I.rb({styleNodeId:c,styleKind:l}))}),[r,l,c]);i.useEffect(d,[d]);let u=e.color.name,p=(0,$.Cm)(u,"color style"),h=i.useCallback(()=>{p?.()},[p]),_=e.color.dsStyle.value;return(l===D.AT.DANGLING&&(_.style_type="FILL",_.node_id=c),n)?i.createElement($._p,{className:m()(q.VB,q.vQ),styleId:e.color.dsStyle.value.key,styleNodeId:e.color.dsStyle.value.node_id,styleType:_.style_type,disableDetailModalEntry:e.disableDetailModalEntry,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},i.createElement(G.ss,{styleIcon:i.createElement(H.zi,{dsStyle:_,disableTooltip:!0}),styleName:e.color.name,styleDescription:s?.description,onClick:h})):i.createElement(i.Fragment,null,i.createElement($._p,{className:q.VB,copyValue:e.color.name,dataTestId:"styleNameRow",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},i.createElement(H.zi,{dsStyle:_,hideNameInTooltip:!0}),i.createElement($._p,{className:q.yW,value:e.color.name})),!n&&e.color.paints.map(r=>i.createElement("div",{key:r.encodedPaint,"data-testid":"stylePaintRow"},i.createElement(ec,{format:e.format,formattableColor:r,isInStyle:!0}))))}function e_(e){let r=(0,w.Ku)(),n=e.formattableColors,a=i.useMemo(()=>({format:r}),[r]);return i.createElement($.x0,{limit:5,data:n,renderElement:ep,extras:a})}function eg({hideBorder:e,noPadding:r,isSubsection:n}){let o=eI(),s=(0,k.ks)(),l=(0,z.uQ)(),c=C.eY().get(l??"")?.type,d=function(){let e=(0,a.d4)(e=>e.mirror.selectionProperties.fillPaints),r=(0,z.rb)(),n=i.useMemo(()=>!e||(0,A.gl)(e)?[]:e,[e]),o=(0,z.pF)(e=>(0,h.b)(e.mirror.selectionProperties,"inheritFillStyleKey")),s=(0,a.d4)(R.e_),l=(0,a.d4)(e=>e.mirror.selectionProperties.inheritFillStyleKey),c=(0,a.d4)(e=>e.mirror.selectionProperties.styleIdForFill),d=(0,O.Fk)((e,r)=>r?e.getStyleNodeByRef(r)?.guid:void 0,c?.assetRef),p=r&&(0,W.Ku)(r),m=(0,B.Ig)(),_=l?(0,N.Gp)(l,d?[d]:[],s):void 0,g=n.filter(ed).map(e=>(0,B.dc)(e,m,p||u.j0r.ALL_FILLS));return _&&o?[(0,B.rP)(o,_,g)]:g}(),p=function(){let e=(0,a.d4)(e=>e.mirror.selectionProperties.textDecorationFillPaints),r=(0,a.d4)(e=>e.mirror.selectionProperties.textDecoration),n=i.useMemo(()=>"UNDERLINE"!==r||!e||(0,A.gl)(e)?[]:e,[r,e]),o=(0,B.Ig)();return n.filter(ed).map(e=>(0,B.dc)(e,o,u.j0r.TEXT_FILL))}(),m=(0,T.Q)(),_=(0,E.v4)(),g=(0,k.ks)(),y="TEXT"===c?[...d,...p]:d,b=(0,K.QT)(y,l,m.inspectionMode,_,g),v=(0,w.Ku)(),I=z.T4.useCopyAllColors(b,v);return b.length<1?null:i.createElement($.VZ,{title:s?"TEXT"===c?(0,f.t)("dev_handoff.inspect_panel.fills.text"):(0,f.t)("dev_handoff.inspect_panel.fills.background"):(0,f.t)("inspect_panel.colors.title"),additionalHeaders:o?void 0:i.createElement(eb,null),copyAllValue:o?void 0:I,recordingKey:"colors",noBorder:e,fadedTitle:o,snugTitle:o,noPadding:r,isSubsection:n},i.createElement(e_,{formattableColors:b}))}function ef(){let e=eu(),r=(0,w.Ku)(),n=z.T4.useCopyAllColors(e,r);return e.length<1?null:i.createElement($.VZ,{title:(0,f.t)("inspect_panel.colors.title"),additionalHeaders:i.createElement(eb,null),copyAllValue:n,recordingKey:"colors"},i.createElement(e_,{formattableColors:e}))}let eE=[u.NVY.HEX,u.NVY.RGB,u.NVY.HSL,u.NVY.HSB,u.NVY.UIColor],ey=[u.NVY.HEX,u.NVY.RGB,u.NVY.CSS,u.NVY.HSL,u.NVY.HSB];function eb(){let e=(0,w.Ku)(),r=(0,k.ks)(),n=(0,$.SV)("inspection_panel_color_format_change"),a=i.useCallback(e=>{(0,w.UK)().colorFormat.set(+e),n({value:U.Fr.format(+e)})},[n]);return i.createElement(c.bL,{value:e.toString(),onChange:a},i.createElement(c.l9,{width:"fill",label:i.createElement(d.h,null,U.Fr.format(e))}),i.createElement(c.mc,null,(r?eE:ey).map(e=>i.createElement(c.c$,{key:e,value:e.toString()},U.Fr.format(e)))))}function ev(e={}){let{format:r=u.NVY.HEX,isInGradient:n,isInStyle:i}=e,a=q.K5,o=r===u.NVY.HEX?"":q.cZ,s=i?q.UU:void 0,l=n?q.fz:void 0;return m()(a,o,l,s)}function eT(e){let r=eI(),{gradientStop:n,paint:a,encodedPaint:o,format:s,isInStyle:l,opacity:c,valueFormatter:d}=e,{color:u}=n,{copyValue:p,isVariableRow:h,valueWithoutOpacity:_,variable:g,variableDisplayName:f}=(0,b.X)({...e.gradientStop,encodedPaint:o,valueFormatter:d}),E=m()({[q.lF]:!0,[q.$]:h,[q.ZM]:l}),y=i.createElement(F.J,{className:q.Gz,color:u,opacity:c});return r?g?i.createElement(ei,{id:g.node_id,variable:g,color:u,paint:a,disableDetailModalEntry:e.disableDetailModalEntry,indent:!0,hideBlendMode:!0}):i.createElement(et,{paint:a,color:u,valueFormatter:d,indent:!0,hideBlendMode:!0}):h?i.createElement("div",{className:q.n},i.createElement($.d1,{className:m()(E,q.y4),isVariable:!0,variableId:g.node_id,label:f,disableDetailModalEntry:e.disableDetailModalEntry},y),(!r||!e.isInStyle)&&i.createElement(es,{alwaysShowOpacity:!0,format:e.format,valueFormatter:d,color:u,isInGradient:!0,isInStyle:e.isInStyle,disableDetailModalEntry:e.disableDetailModalEntry})):i.createElement($._p,{className:m()(ev({format:s}),E),copyValue:p},y,i.createElement("span",{className:q.As,"data-testid":"inspectColorRow"},_),j.x.has(e.format)&&i.createElement(Y.J,{value:u.a}))}function eI(){return(0,y.UP)()}},487497:(e,r,n)=>{n.d(r,{As:()=>x,Cj:()=>F,I9:()=>D,T4:()=>i,Tv:()=>L,Vr:()=>P,Wf:()=>R,jY:()=>M,n4:()=>V,pF:()=>k,rb:()=>O,uQ:()=>N,uV:()=>U});var i,a=n(848318),o=n(716544);n(425642);var s=n(741419),l=n(1329),c=n(157907),d=n(39773),u=n(442313),p=n(464079),m=n(547449),h=n(358567),_=n(771313),g=n(203839),f=n(311967),E=n(481037),y=n(85442),b=n(577023),v=n(718451);n(52004);var T=n(773422),I=n(166917),S=n(60546),w=n(509195),A=n(654445),C=n(949651);function N(){let e=(0,o.d4)(e=>e.mirror.selectionProperties?.numSelected===1),r=(0,o.d4)(e=>e.mirror.sceneGraphSelection);return e&&Object.keys(r).find(e=>e)||null}function L(){let e=(0,o.d4)(e=>e.mirror.sceneGraphSelection);return a.useMemo(()=>{let r=Object.keys(e);return 0===r.length?null:r},[e])}function O(){let e=N();return(0,I.Fk)((e,r)=>r?e.get(r)?.type:void 0,e)}function R(e=0){return Number(e).toLocaleString("en",{maximumFractionDigits:2,useGrouping:!1})}function P(){let e=N(),r=(0,I.g0)(e);if(null!=e&&null!=r)return r}function D(){let e=L(),r=(0,I.dB)(e??[]);if(e)return r}function M(){let e=(0,o.d4)(e=>e.mirror.objectsPanelRowRebuildCounter);return(0,I.hr)((e,r)=>e,e)}function k(e){return(0,o.d4)(r=>{let n=e(r);if(null!=n&&(0,v.hS)(n))return n})}function F(e,r){let n=(0,o.wA)(),i=a.useCallback(()=>{if(!e)return null;n(y.lW({stringToCopy:e.toString(),ignoreLineBreaks:!1})),r&&r()},[r,e,n]);return e?i:void 0}function x(e){let r=(0,S.ks)(),n=(0,p.v4)(),i=(0,T.u)(e??void 0),a=(0,m.lv)(),o=(0,d.md)(f.v);if(!i)return;if(!a||!(0,c.k)().dt_insp_impr_fast_follows||!o)return i.name;let s=r&&"first-party"===n.type?n.id:p.uz;return(0,p.xv)(i,s)??i.name}function U(e){let r=(0,m.TM)(),n=(0,p.v4)(),i=(0,_.sQ)(),a=(0,d.md)(f.v);if(e){let o=(0,c.k)().dt_insp_impr_fast_follows&&(a||i);return r&&o?(0,p.xv)(e,n.id)??e.name??(0,u.t)("variables.missing_name"):e.name}}(e=>{let r={prefix:"",suffix:"",delimiter:": ",quoted:!1};function n(e,n){let i="",a={...r,...n};return e.forEach(e=>{if(e[1]){let{prefix:r,suffix:n,delimiter:o,quoted:s}=e.length>2?{...a,...e[2]}:a,l=s?`"${e[1]}"`:e[1];i+=`${r}${e[0]}${o}${l}${n}
`}}),i}e.copyPairs=n;let i=["true","false","nil","null"];function c(e,r){return`var(--${(0,E.OX)(r)}, ${e})`}e.unquoteEnumerableValues=function(e){return e.map(e=>{let[r,n]=e;return"string"==typeof n&&i.includes(n.toLowerCase())?[r,n,{quoted:!1}]:e})};let d=(e,r,n)=>{let{paint:i}=e,{variable:a}=e.variable??{};switch(i.type){case"SOLID":if(1===n){let r=e.valueFormatter(e.colors[0],{hexCSSValue:!0});return a?c(r,a.name):r}return function(e,r){let n=s.phr.convertGradientPaintToCSS(e.encodedPaint);return(r?n.replace(/(#[a-f0-9]{6})|(rgba\(\d{1,3}, \d{1,3}, \d{1,3}, \d\.\d{1,2})/gi,e=>c(e,r.name)):null)??n}(e,a);case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return s.phr.convertGradientPaintToCSS(e.encodedPaint)}};function u(e,r){return e?.map(n=>d(n,r,e?.length||0))?.join(",\n")}e.copyColors=u;let p={MULTIPLY:"multiply",SCREEN:"screen",OVERLAY:"overlay",DARKEN:"darken",LIGHTEN:"lighten",COLOR_DODGE:"color-dodge",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity"},m=(e=[])=>e.flatMap(e=>e.type===A.q.STYLE?e.paints:e),_="background";e.useCopyAllColors=function(e,r){let i=(0,o.d4)(e=>e.mirror.selectionProperties.numSelected)||0,s=m(e),l=a.useCallback(()=>{if(1===i&&s){let e=new Set;if(s.forEach(r=>{r.paint.blendMode&&e.add(r.paint.blendMode)}),e.size<=1){let i=u(s,r),a=[];i&&a.push([_,i]);let o=[...e],l=o[0]?p[o[0]]:void 0;return l&&a.push(["background-blend-mode",l]),n(a,{suffix:";"})}}return n(s.reduce((e,n)=>{let i=n.paint.blendMode,a=i?p[i]:void 0;a&&e.push(["background-blend-mode",a]);let o=d(n,r,1),s=o?[_,o]:void 0;return s&&e.push(s),e},[]).filter(e=>e).map(e=>e),{suffix:";"})},[s,i,r]);return s?l:void 0};let g=(r,i,a,o)=>{let s=i.includes(" "),l=m(a),c=l.length>1||1===l.length&&"SOLID"!==l[0].paint.type,d=e.copyColors(l,r);if(!c&&!s)return`${o??"border"}: ${i} solid ${d}`;let u=s?[["border-width",i],["border-style","solid"]]:[[`${o??"border"}`,`${i} solid`]];return d&&u.push(c?["border-image-source",d]:["border-color",d]),n(u,{suffix:";\n"})};function f(e){return e.map(e=>void 0===e?"":"string"==typeof e?e:`${R(e)}px`)}e.useStrokeCopyValue=function(e,r,n){let i=(0,b.Ku)(),o=m(r);return a.useMemo(()=>g(i,e,o,n),[i,e,o,n])},e.useCopyAllStrokes=function(e){let r=(0,b.Ku)();return a.useMemo(()=>e.map(e=>g(r,e.strokeWeight,e.strokeColors,e.borderCSSKey)).join("\n"),[r,e])},e.withPixels=f;let y=(r,i,a,o)=>{if("FOREGROUND_BLUR"===r.type||"BACKGROUND_BLUR"===r.type)return n([["backdrop-filter",`blur(${r.radius}px)`]]);let s=e.copyColors(i,a);if(!r.offset)return;let[l,c,d,u,p]=o&&5===o.length?o:[null,null,null,null,null];return n([["box-shadow",[f([(0,C.NX)({variable:l})||r.offset?.x,(0,C.NX)({variable:c})||r.offset?.y,(0,C.NX)({variable:d})||r.radius,(0,C.NX)({variable:u})||r.spread]).join(" "),(0,C.NX)({variable:p})||s,"INNER_SHADOW"===r.type?"inset":void 0].filter(h.t).join(" ")]],{suffix:";"})};e.useCopyShadow=function(e,r){let n=(0,b.Ku)(),i=function(e,r){let n=a.useMemo(()=>e?[{color:e,colorVar:void 0}]:[],[void 0,e]);return(0,w.y6)(n)}(e.color);return a.useMemo(()=>y(e,i,n,r),[e,i,n,r])},e.useCopyAllShadows=function(e){let r=(0,b.Ku)(),n=(0,w.OE)(e,e=>e.color),i=e.flatMap(e=>[e.xVar,e.yVar,e.radiusVar,e.spreadVar,e.colorVar]).map(e=>e?.value?.alias?l.dI(e.value.alias):void 0),o=(0,T.hg)(i??[]);return a.useCallback(()=>n.filter(e=>e.color).map((e,n)=>y(e.value,[e.color],r,[o?.[5*n],o?.[5*n+1],o?.[5*n+2],o?.[5*n+3],o?.[5*n+4]])).join("\n"),[n,r,o])};let v=(e,r,n)=>{switch(e){case"Linear":return"linear";case"Ease in":return"ease-in";case"Ease out":return"ease-out";case"Ease in and out":return"ease-in-out";case"Ease in back":return"cubic-bezier(0.3, -0.05, 0.7, -0.5)";case"Ease out back":return"cubic-bezier(0.45, 1.45, 0.8, 1)";case"Ease in and out back":return"cubic-bezier(0.7, -0.4, 0.4, 1.4)";default:if(void 0==e)return;if(r){if(n)return`{ mass: ${n[0]}, stiffness: ${n[1]}, damping: ${n[2]} }`;return e}return`cubic-bezier(${e})`}},I=e=>`${function(e,r){return e&&Number(e).toLocaleString("en",{maximumFractionDigits:2,useGrouping:!1})}(1e3*e,0)}ms`,S=r=>{let n=`// ${r.event}
`,i=r.action,a=[];return r.delay&&a.push(["animation-delay",I(r.delay)]),r.action&&(a.push([`// ${i?.action}`,`"${i?.value??""}"`]),i?.hasAnimation&&(a.push(["// Animate",i?.animation??""]),i?.isSpringTransition?a.push(["// Spring",v(i?.curve,i?.isSpringTransition,i?.curveFunction)]):(a.push(["animation-timing-function",v(i?.curve)]),a.push(["animation-duration",I(i.duration??0)])))),n+e.copyPairs(a,{suffix:";"})};e.useCopyAllInteractions=function(e){return a.useCallback(()=>e.map(e=>S(e)).join("\n"),[e])};let N=e=>{let r=e.image?.name??"Image",i=`${r}.${e.animatedImage?"gif":"png"}`;return n([[`// ${e.animatedImage?"GIF":"Image"}`,r],["background",`url("${i}")`],["background-size",(e=>"FILL"==e?"cover":"FIT"==e?"contain":void 0)(e.imageScaleMode)],["opacity",e.opacity<1?e.opacity.toFixed(2):void 0],["background-blend-mode",p[e.blendMode]]],{suffix:";"})};e.useCopyImages=function(e){return a.useCallback(()=>e.map(e=>N(e)).join("\n"),[e])}})(i||(i={}));let B=e=>e.toLocaleString("en",{maximumFractionDigits:4,useGrouping:!1});function V({value:e,isTextProperty:r}){let n=(0,m.TM)(),i=(0,p.v4)(),a=(0,g.Em)(),o="number"==typeof e?e:0,s=(0,g.qM)(i,o,B,{isTextProperty:r});return n&&a&&(0,c.k)().dt_insp_impr_fast_follows&&0!==o?s:void 0}},163566:(e,r,n)=>{n.d(r,{Cm:()=>e_,HF:()=>eb,I7:()=>eu,M6:()=>em,QZ:()=>Q,SH:()=>X,SV:()=>q,VZ:()=>et,YE:()=>ef,ZQ:()=>Y,_p:()=>eg,d1:()=>el,di:()=>ey,ln:()=>ee,lz:()=>ev,nd:()=>eo,r4:()=>eE,sD:()=>ed,x0:()=>ew});var i=n(848318),a=n(716544),o=n(376025),s=n(859989),l=n(952423),c=n(39773),d=n(536384),u=n.n(d),p=n(547481),m=n(579020),h=n(220324),_=n(921494),g=n(857188),f=n(303035),E=n(831932),y=n(654104),b=n(919414),v=n(433074),T=n(35609),I=n(882439),S=n(442313),w=n(547449),A=n(246972),C=n(119699),N=n(85442),L=n(360399),O=n(992444),R=n(718451),P=n(773422),D=n(369600),M=n(792478),k=n(241917),F=n(503024),x=n(60546),U=n(256429),B=n(318100),V=n(736269),G=n(487497),H=n(70529),K=n(702493);function W({name:e,fileKey:r,border:n,children:a,hideHeader:o,noPadding:s,noBorder:c,isSubsection:d,fadedTitle:p,recordingKey:h,dataTestId:f,onClick:y}){let{selectedNodeId:b,selectedPageId:v,isMultiSelect:T,sceneGraph:I,editorType:S}=(0,_.R)(e=>{let r=Object.keys(e.mirror.sceneGraphSelection);return{selectedPageId:e.mirror.appModel.currentPage,selectedNodeId:r[0],isMultiSelect:r.length>1,sceneGraph:e.mirror.sceneGraph,editorType:"fullscreen"!==e.selectedView.view?k.nT.Design:e.selectedView.editorType}}),A=!!(0,C.hA)(),N=n=>{e&&(0,m.sx)("inspection_panel_shortcut",{...n,file_key:r,name:e,editor_type:S})},L=(0,w.lv)(),R=n?K.F7:K.YK;return o&&(R=n?K.S4:K.Tq),d&&!p?R=u()(R,K.WD):s&&(R=K.JY),c&&(R=u()(R,K.mD)),i.createElement(U.zi,{className:R,tabIndex:-1,onKeyDown:e=>{let r=!1;if((0,g.Fo)(e)&&e.keyCode===g.Uz.C?(r=!0,N({action:"copy"})):(0,g.Fo)(e)&&e.keyCode===g.Uz.A?(r=!0,N({action:"select_all"})):E.Ay.mac?"Meta"===e.key&&(r=!0):"Control"===e.key&&(r=!0),(e.target?.type==="text"||e.target?.type==="textarea"||e.target?.tabIndex===0)&&(r=!0),r);else{let r=window.getSelection();if(!r)return;let n=0===r.toString().length;r.removeAllRanges(),(n||e.keyCode!==g.Uz.ESCAPE)&&!L&&O.Y5.forwardKeyboardEvent(e.nativeEvent)}},onDoubleClick:n=>{if(e)return(0,m.sx)("inspection_panel_dbl_clicked",{name:e,x:n.clientX,y:n.clientY,modifiers:(0,g.sN)(n),fileKey:r,editor_type:S}),!1},onClick:n=>{let i,a;if(e){if(y?.(n),b&&I)try{let e=(0,l.Ql)(I,b);i=e?.guid,a=e?.type}catch{}return(0,m.sx)("inspection_panel_clicked",{name:e,x:n.clientX,y:n.clientY,modifiers:(0,g.sN)(n),fileKey:r,selectedPageId:v,selectedNodeId:b,topLevelFrameId:i,topLevelNodeType:a,isMultiSelect:T,editor_type:S,isDevModeFocusView:A}),!1}},recordingKey:h,"data-testid":f,id:f},a)}let z=(e,r)=>{let[n,a]=i.useState(!1),o=i.useCallback(()=>a(!0),[a]),s=i.useCallback(()=>a(!1),[a]);return i.useMemo(()=>({value:n?e:r,eventHandlers:{onMouseOver:o,onMouseOut:s},isHovered:n}),[n,e,r,o,s])},$=(e,r)=>{let[n,a]=i.useState(!1),o=i.useCallback(()=>a(!0),[a]),s=i.useCallback(()=>a(!1),[a]);return i.useMemo(()=>[n?e:r,{onMouseDown:o,onMouseUp:s}],[n,e,r,o,s])};function Y(e,r){let{value:n,eventHandlers:a,isHovered:o}=z(r),[s,l]=$(e);return i.useMemo(()=>({value:s||n,eventHandlers:{...a,...l},isHovered:o}),[s,l,n,a,o])}let j=i.createContext({});function q(e,r){let n=i.useContext(j),a=i.useMemo(()=>({name:(r||n).recordingKey}),[r,n]),o=(0,h.j)(e,a);return(r||n).recordingKey?o:f.lQ}function X(e){let{title:r,copyAllValue:n,additionalHeaders:o,collapsedHeaders:l,eventHandlers:d,isHovered:p,recordingKey:m,isCollapsedAtom:h=J,collapseEnabled:_=!1,hasCollapsibleContent:g=!0,titleAccessory:f,isSubsection:E}=e,b=q("inspection_panel_copy_all_click",i.useContext(j)),v=(0,a.wA)(),T=(0,w.lv)(),A=(0,y.rf)(m,"click",i.useCallback(()=>{if(!n)return;let e="string"==typeof n?n:n();e&&(v(N.lW({stringToCopy:e,ignoreLineBreaks:!1})),b({value:e}))},[b,v,n])),{ref:C,...L}=(0,H.X)(r,p),O=i.useRef(null),R=(0,x.ks)(),P=(0,i.useMemo)(()=>({name:"Copy properties button",selectedAll:!1,source:"properties",title:r,isDevMode:R}),[R,r]),[D,M]=(0,c.fp)(h),k=i.useCallback(()=>{g&&_&&M?.(!D)},[M,D,g,_]),B=e.faded||!!M&&!g,V=!_,G=_&&(D||!g)&&!!l,W=!_||!D,{onMouseDown:z,onMouseUp:$}=function(){let e=i.useRef(-1);return{onMouseDown:i.useCallback(r=>{r.timeStamp-e.current<350&&r.stopPropagation()},[]),onMouseUp:i.useCallback(r=>{e.current=r.timeStamp},[])}}();return r?i.createElement("div",{className:u()(K.Dn,{[K._]:e.snug||e.isSubsection,[K.iY]:e.noPadding,[K.lE]:T}),ref:O,onMouseDownCapture:_?z:void 0,onMouseUpCapture:_?$:void 0},i.createElement(U.xZ,{faded:B,innerRef:C,...L,className:u()(K.yr,{[K.Xx]:e.thin||e.isSubsection,[K.ty]:G}),"data-onboarding-key":e.onboardingKey,"data-testid":"inspectPanelTitle",doNotReserveSpaceForChevron:e.doNotReserveSpaceForChevron,forceNoChevron:e.doNotReserveSpaceForChevron,highlightOnHover:!!M&&g&&!e.faded,isPanelBodyCollapsedAtom:g&&_?h:null,onClick:k},i.createElement("span",null,r),f,G&&i.createElement(i.Fragment,null,i.createElement("div",{className:K.Pm}),i.createElement("div",{className:K.UE},l))),!G&&i.createElement("div",{className:u()(K.W0,E&&K.z5)},!G&&o,W&&n&&!T&&i.createElement(I.Me,{htmlAttributes:{...d,"data-tooltip":(0,S.t)("inspect_panel.copy"),"data-tooltip-type":F.Ib.TEXT},onClick:A,trackingProperties:P,"aria-label":(0,S.t)("inspect_panel.copy"),disabled:e.disableCopyAll},i.createElement(s.X,null))),V&&e.children):null}let Z=(0,M.Wh)(()=>(0,c.eU)({})),J=(0,c.eU)(()=>!1,()=>{});function Q(e){let r=function(e){let r=(0,i.useMemo)(()=>e?(0,p.n)(300,!0,(r,n)=>{r(Z,r=>(m.az.trackDefinedEvent("dev_mode.inspect_panel.collapse",{panelKey:e,expanded:!n}),{...r,[e]:n}))}):f.lQ,[e]);return(0,i.useMemo)(()=>e?(0,c.eU)(r=>r(Z)[e]??!1,(e,n,i)=>{r(n,i)}):null,[e,r])}((0,w.lv)()?e:void 0),n=!!r;return{collapsedInspectionPanelAtom:n?r:J,collapseEnabled:n}}function ee({isCollapsed:e,children:r,childrenWrapperClassname:n,bodyIsEmpty:a,ref:o}){return i.createElement("div",{className:u()(K.HH,e?void 0:n),ref:o},!e&&!a&&r)}function et(e){let{bodyIsEmpty:r,children:n,title:o="",copyAllValue:s,recordingKey:l,panelKey:d}=e,u=(0,a.d4)(D.sS),p=i.useMemo(()=>`inspect:${l.toLowerCase()}`,[l]),m=i.useMemo(()=>({recordingKey:`inspect:${l}`}),[l]),{value:h,eventHandlers:_,isHovered:g}=Y(K.Rp,K.fF),{collapsedInspectionPanelAtom:f,collapseEnabled:E}=Q(d),[b]=(0,c.fp)(f);return i.createElement(W,{border:!0,dataTestId:`${l}-inspection-panel`,fadedTitle:e.fadedTitle,fileKey:u,hideHeader:e.hideHeader,isSubsection:e.isSubsection,name:p,noBorder:e.noBorder,noPadding:e.noPadding,onClick:e.onClick,recordingKey:(0,y.Pt)(l,"panel")},i.createElement(j.Provider,{value:m},e.formattedHeader??(!0!==e.hideHeader&&i.createElement(X,{additionalHeaders:e.additionalHeaders,collapseEnabled:E,collapsedHeaders:e.collapsedHeaders,copyAllValue:s,disableCopyAll:e.disableCopyAll,doNotReserveSpaceForChevron:e.doNotReserveSpaceForChevronInTitle,eventHandlers:_,faded:e.fadedTitle,hasCollapsibleContent:!r,isCollapsedAtom:f,isHovered:g,isSubsection:e.isSubsection,noPadding:e.noPadding,onboardingKey:e.headerOnboardingKey,recordingKey:(0,y.Pt)(l,"header"),snug:e.snugTitle,thin:e.thinTitle||e.isSubsection,title:o,titleAccessory:e.titleAccessory},e.headerChildren)),i.createElement(ee,{isCollapsed:b,bodyIsEmpty:r,childrenWrapperClassname:h},n)))}let er={maximumFractionDigits:2,useGrouping:!1},en={maximumFractionDigits:2},ei={maximumFractionDigits:2,useGrouping:!1,style:"unit",unit:"degree",unitDisplay:"narrow"},ea={...ei,unitDisplay:"short"};function eo(e,r){let n=e.toLocaleString("en",er);return`${n}${r}`}function es(e){switch(e.format){case"pixels":if(!e.value)return;if("number"==typeof e.value)return eo(e.value,"px");if(Array.isArray(e.value)){let r=e.value.map(e=>e.toLocaleString("en",en)).join("px, ");return`${r}px`}return`${e.value}`;case"percent":if(!e.value)return;return Number(e.value).toLocaleString("en",{...er,style:"percent"});case"fig_number":return e.value?L.wf.format(e.value):void 0;case"millis":return e.value&&eo(1e3*e.value,"ms");case"degrees":return e.value&&e.value.toLocaleString("en",ei);case"mixed":return e.value.map(es).join(", ");default:return e.value?.toString()}}function el(e){let[r,n]=i.useState(!1),a=e.label||e.defaultLabel,o=(0,w.lv)(),s=u()({[K.Nw]:!!e.label,[K.G1]:!e.label,[K.wt]:!e.label&&!o},e.labelClassName),l=ed(a),c=(0,P.u)(e.variableId);return i.createElement(eg,{className:e.className,copyValue:e.label,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),isHovered:r,variableId:e.variableId,disableDetailModalEntry:e.disableDetailModalEntry},e.children&&i.createElement("div",null,e.children),a&&i.createElement("div",{className:K.Pq},e.isVariable?i.createElement(B.wG,{text:a,isDeleted:c?.subscriptionStatus==="LOCAL"&&c?.isSoftDeleted,containerClassName:K.gO,disableHover:!0,isHovered:r,isNonInteractive:!0,ui3Height:o}):i.createElement("span",{ref:l,className:s,dir:"auto"},a)))}function ec(){return i.createElement("span",{className:K.jg})}function ed(e){let r=i.useRef(null),n=r.current,a=n&&(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth);return i.useEffect(()=>{n&&a&&e&&(n.setAttribute("data-tooltip",e.toString()),n.setAttribute("data-tooltip-type",F.Ib.TEXT))},[e,n,a]),r}function eu({title:e}){return i.createElement("div",{className:K.Dn},i.createElement(U.xw,{className:K.yr},e))}let ep=e=>e?.valueOf()===(0,S.t)("collaboration.branching_node_treatments.value.empty_dash");function em({basis:e,change:r,name:n}){return i.createElement("div",{className:K.zy},i.createElement("span",{className:K.rG},n),i.createElement("div",{className:K.vd},i.createElement(o.E,{onClick:e.onClick,className:u()(K.Hz,K.ij,ep(e.value)&&K.T7)},e.value),i.createElement(o.E,{onClick:r.onClick,className:u()(K.Zg,K.ij,ep(r.value)&&K.T7)},r.value)))}function eh({valueProps:e,isHovered:r,variableContainerClassName:n,rowRef:a,truncateStart:o}){let{variableId:s}=e,l=(0,P.u)(s),c=(0,G.uV)(l)??"",d=(0,P.t8)(s),p=(0,w.lv)();if("mixed"===e.format){let o=e.value.some(e=>!!e.variable);return i.createElement("div",{className:u()(K.M3,o&&K.Vd)},e.value.map((s,l)=>i.createElement("div",{key:l},i.createElement(eh,{valueProps:s,isHovered:r,variableContainerClassName:n,rowRef:a}),l<e.value.length-1&&!o&&i.createElement("span",null,", "))))}let m=`${es(e)}`;if(c){let e=l?.subscriptionStatus==="LOCAL"&&l.isSoftDeleted;return i.createElement(B.wG,{containerClassName:u()(K.gO,n),dataTestId:"styledValueVariable",disableHover:!0,fullWidth:p,isDeleted:e,isHovered:r,isNonInteractive:!0,text:c,thumbnailValue:p?d:void 0,tooltip:p?void 0:m,ui3Height:p,endTruncate:!o})}return i.createElement(T.G,{text:m,truncate:o?"start":"end"})}function e_(e,r,n){let i=q("inspection_property_copy_click");return(0,V.g7)(e,r,n),(0,G.Cj)(e,()=>{i({property:r,value:e})})}function eg(e){let r="value"in e?es(e):void 0,n=(0,G.As)(e.variableId),a=!!r||!!e.variableId||!!e.copyValue,s=null===e.copyValue?void 0:a?e.copyValue||n||r:void 0,l=e_(s,e.name,e.copyName),[c,d]=i.useState(!1),p=(0,H.X)(e.name),m=(0,H.X)(r),h=i.useRef(null),_=(0,w.lv)(),g=(0,A.i2)()&&!e.disableDetailModalEntry,f=(0,A.Yq)(h),E=e.accessoryButton||g,y=g&&(c||f),b="redact"in e?e.redact:void 0,T=i.useMemo(()=>void 0===b?new Set:new Set(Array.isArray(b)?b:[b]),[b]),I={subRowClassName:_?K.T:K.Mn,rowClassName:_?K.BJ:K.k$},S=e.className||(e.subPropertyRow?I.subRowClassName:I.rowClassName),C=K.Nw,N=K.Bz,L=_?K.$c:K.A9,O=()=>{d(!0),e.onMouseEnter?.()},P=()=>{d(!1),e.onMouseLeave?.()},{onCopy:D}=e,M=l||D?()=>{l&&s&&l?.(),D?.()}:void 0,k="truncateStart"in e?e.truncateStart:void 0;if(!("value"in e)){let r=i.createElement("div",{className:S},e.name&&e.showName&&i.createElement("span",{className:N,...p,"data-tooltip-tip-align-left":!0},e.name),e.children);return M?i.createElement("div",{className:u()(L,{[K.ri]:E,[K.e8]:_&&E,[K.KP]:_&&!E}),onMouseEnter:O,onMouseLeave:P,"data-testid":e.dataTestId,ref:h},i.createElement(o.E,{className:K.Uh,onClick:M},r),e.accessoryButton?e.accessoryButton:g?i.createElement(A.J3,{variableId:e.variableId,matchingVars:e.matchingVars,styleId:e.styleId,styleNodeId:e.styleNodeId,styleType:e.styleType,rowRef:h,isHovered:e.isHovered??c,recordingKey:"inspection_property"}):null):i.createElement("div",{className:u()({[K.ri]:E,[K.zs]:e.forceCopyableStyling,[K.mt]:_&&e.forceCopyableStyling,[K.e8]:_&&E,[K.KP]:_&&!E}),onMouseEnter:O,onMouseLeave:P,"data-testid":e.dataTestId,ref:h},r,e.accessoryButton?e.accessoryButton:g?i.createElement(A.J3,{variableId:e.variableId,matchingVars:e.matchingVars,styleId:e.styleId,styleNodeId:e.styleNodeId,styleType:e.styleType,rowRef:h,isHovered:e.isHovered??c,recordingKey:"inspection_property"}):null)}return!e.variableId&&(!e.value||T.has(e.value))||e.value&&(0,R.gl)(e.value)?null:i.createElement("div",{className:u()(s?L:_?K.AL:K.HD,{[K.ri]:E,[K.KP]:_,[K.z7]:y}),onMouseEnter:O,onMouseLeave:P,"data-testid":e.dataTestId,ref:h},i.createElement("div",{className:S,onClick:M,"data-testid":"inspectionPropertyRow"},e.indent&&i.createElement("div",null),e.name?i.createElement("span",{className:N,"data-testid":"inspectionPropertyName",...p,"data-tooltip-tip-align-left":!0,"data-tooltip-show-above":e.showTooltipAbove},i.createElement(v.o,{text:e.name,className:K.qX})):i.createElement(ec,null),i.createElement("span",{className:C,"data-testid":"inspectionPropertyValue",...m,"data-tooltip-tip-align-left":!0,"data-tooltip-show-above":e.showTooltipAbove},i.createElement(eh,{valueProps:e,isHovered:c,rowRef:h,truncateStart:k}))),e.accessoryButton?e.accessoryButton:g?i.createElement(A.$Q,{variableId:e.variableId,matchingVars:e.matchingVars,rowRef:h,isHovered:c,recordingKey:`inspection_property_${e.name}`}):null)}function ef(e){let{value:r,copyValue:n,isTextProperty:a}=e,o=(0,G.n4)({value:r,isTextProperty:a}),s=(0,G.n4)({value:e.variableId||"number"!=typeof n?void 0:n,isTextProperty:a});return i.createElement(eg,{...e,value:o??e.value,copyValue:s??n,format:"pixels"})}function eE(e){return i.createElement(eg,{...e,format:"percent",copyValue:void 0===e.value||e.variableId?e.copyValue:Number(e.value).toLocaleString("en",{maximumFractionDigits:2})})}function ey(e){let{value:r,copyValue:n,isTextProperty:a}=e,o=(0,G.n4)({value:r?.units==="PIXELS"?r.value:void 0,isTextProperty:a}),s=(0,G.n4)({value:e.variableId||r?.units!=="PIXELS"||"number"!=typeof n?void 0:n,isTextProperty:a});if(o){let{value:r,...a}=e;return i.createElement(eg,{...a,value:o,copyValue:s??n,name:e.name,className:e.className,indent:e.indent})}return i.createElement(eg,{...e,format:"fig_number"})}function eb(e){let r={...e,copyValue:e.value?e.value.toLocaleString("en",ea):void 0};return i.createElement(eg,{...r,format:"degrees"})}function ev(e){return i.createElement(eg,{...e,format:"millis"})}function eT({value:e,extras:r,index:n,renderElement:i,isLast:a}){return i(e,r,n,a)}function eI(e){let{data:r}=e,n=e.showMoreAmount||100,[a,s]=i.useState(e.limit),l=i.useCallback(()=>{s(Math.min(r.length,a+n))},[r,a,n,s]),c=Math.max(e.data.length-a,0),d="extras"in e?e.extras:{};return i.createElement(i.Fragment,null,e.data?.slice(0,a).map((r,n)=>i.createElement(eT,{value:r,extras:d,renderElement:e.renderElement,key:n,index:n,isLast:n===a-1})),0!==c&&i.createElement(o.E,{onClick:l,className:K.jP,key:"show-more"},(0,S.tx)("inspect_panel.property.remaining_more",{remaining:c})))}function eS({limit:e,data:r,renderElement:n,extras:a}){let{visibleItems:o,showMoreButton:s}=(0,b.y)({items:r,getShowMoreLabel:e=>(0,S.t)("inspect_panel.property.remaining_more",{remaining:e}),pageSize:e,shouldResetOnSelectionChange:!0,ui3Version:!0});return i.createElement(i.Fragment,null,o.map((e,r)=>i.createElement(eT,{value:e,extras:a,renderElement:n,key:r,index:r,isLast:r===o.length-1})),s)}function ew(e){return(0,w.lv)()?i.createElement(eS,{...e}):i.createElement(eI,{...e})}},501609:(e,r,n)=>{n.d(r,{yg:()=>H});var i=n(848318),a=n(716544),o=n(376025),s=n(741419),l=n(1329),c=n(536384),d=n.n(c),u=n(166365),p=n(442313),m=n(464079),h=n(955529),_=n(717587),g=n(246972),f=n(727341),E=n(577023),y=n(773422),b=n(369600),v=n(68634),T=n(60546),I=n(356408),S=n(487497),w=n(163566),A=n(803243),C=n(839560),N=n(39194),L=n(509195),O=n(541910),R=n(949651),P=n(892296),D=n(811711),M=n(731650);let k=new A.ck;function F(e){return e?.value?.alias?l.dI(e.value.alias):void 0}function x(e,r,n){return(0,w.Cm)(S.T4.withPixels([(0,R.NX)({variable:r})||e]).join(""),n)}function U({styleKey:e,styleType:r,rowWithAccessoryButton:n,itemIndex:a,itemType:o}){let s=(0,b.tS)(),l=(0,h.Fj)(e),c=(0,S.Cj)(l?.name);return i.createElement("div",{className:d()(D.yY,n?D.Ln:D.ix)},i.createElement(C.g,{fileKey:s,dsStyle:l,styleType:r,onClick:c,itemIndex:a,elementType:k.format(o)}))}function B({effect:e,styleKey:r,itemIndex:n}){let a=k.format(e.type);return r?i.createElement(U,{styleKey:r,styleType:"EFFECT",itemIndex:n,itemType:e.type}):a?i.createElement("div",{className:D.yY},(0,N.vG)(e),a):null}function V({effect:e,styleName:r}){let n=(0,f.GS)(),a=k.format(e.type);return i.createElement(w.d1,{className:D.n1,labelClassName:D.Q5,label:r,defaultLabel:a},n?(0,N.vG)(e):i.createElement(u.B,{className:D.$x,svg:M.A}))}function G(e){let r=(0,I.Qn)(),n=(0,g.i2)()&&!e.disableDetailModalEntry,a=i.useRef(null),s=i.useRef(null),c=i.useRef(null),u=i.useRef(null),m=i.useRef(null),h=(0,E.Ku)(),[_,f]=i.useState(!1),[b,v]=i.useState(!1),{spread:T,radius:A,offset:C,blendMode:N,showShadowBehindNode:L,visible:R,radiusVar:M,spreadVar:k,xVar:U,yVar:G,colorVar:H,itemIndex:K}=e,[W,z,$,Y]=(0,y.hg)([U,G,M,k,H].map(e=>e?.value?.alias?l.dI(e.value.alias):void 0)),j=x(C?.x,W,(0,p.t)("inspect_panel.shadows.x")),q=x(C?.y,z,(0,p.t)("inspect_panel.shadows.y")),X=x(A,$,(0,p.t)("inspect_panel.shadows.blur")),Z=x(T,Y,(0,p.t)("inspect_panel.shadows.spread_tooltip")),J=(0,O.pc)("MISSING",C?.x??0,void 0,!0),Q=(0,O.pc)("MISSING",C?.y??0,void 0,!0),ee=(0,O.pc)("MISSING",A??0,void 0,!0),et=(0,O.pc)("MISSING",T??0,void 0,!0),er=(0,w.sD)((0,p.t)("inspect_panel.shadows.x")),en=(0,w.sD)((0,p.t)("inspect_panel.shadows.y")),ei=(0,w.sD)((0,p.t)("inspect_panel.shadows.blur")),ea=(0,w.sD)((0,p.t)("inspect_panel.shadows.spread_tooltip"));if(!R)return null;let eo="DROP_SHADOW"===e.type||"INNER_SHADOW"===e.type,es="DROP_SHADOW"===e.type&&L,el=d()(n&&D.DW,D.qR,r&&D.bN);return i.createElement("div",{ref:a,className:D.cx},r?i.createElement(B,{effect:e,styleKey:e.styleKey,itemIndex:K}):i.createElement(V,{effect:e,styleName:e.styleName}),eo&&i.createElement(w._p,{className:el,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),isHovered:_,disableDetailModalEntry:!0,forceCopyableStyling:!0},i.createElement("div",{className:D.hq},i.createElement("div",{className:D.i5,ref:er},(0,p.tx)("inspect_panel.shadows.x"))),i.createElement(o.E,{className:D.cu,ref:s,onClick:j},i.createElement(P.S,{value:(0,S.Wf)(C?.x),varData:U})),n&&i.createElement(i.Fragment,null,i.createElement(g.$Q,{variableId:F(U),matchingVars:J?.matchingVars,rowRef:a,rowRefForModalId:s,isHovered:_,recordingKey:"shadows_panel_x"}),i.createElement("div",null)),i.createElement("div",{className:D.hq},i.createElement("div",{className:D.i5,ref:en},(0,p.tx)("inspect_panel.shadows.y"))),i.createElement(o.E,{className:D.cu,ref:c,onClick:q},i.createElement(P.S,{value:(0,S.Wf)(C?.y),varData:G})),n&&i.createElement(g.$Q,{variableId:F(G),matchingVars:Q?.matchingVars,rowRef:a,rowRefForModalId:c,isHovered:_,recordingKey:"shadows_panel_y"})),i.createElement(w._p,{className:el,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),isHovered:b,disableDetailModalEntry:!0,forceCopyableStyling:!0},i.createElement("div",{className:D.hq},i.createElement("div",{className:D.i5,ref:ei},(0,p.tx)("inspect_panel.shadows.blur"))),i.createElement(o.E,{className:D.cu,ref:u,onClick:X},i.createElement(P.S,{value:(0,S.Wf)(A),varData:M})),n&&i.createElement(i.Fragment,null,i.createElement(g.$Q,{variableId:F(M),matchingVars:ee?.matchingVars,rowRef:a,rowRefForModalId:u,isHovered:b,recordingKey:"shadows_panel_blur"}),i.createElement("div",null)),eo&&i.createElement(i.Fragment,null,i.createElement("div",{className:D.hq},i.createElement("div",{className:D.i5,ref:ea},(0,p.tx)("inspect_panel.shadows.spread_tooltip"))),i.createElement(o.E,{className:D.cu,ref:m,onClick:Z},i.createElement(P.S,{value:(0,S.Wf)(T),varData:k})),n&&i.createElement(g.$Q,{variableId:F(k),matchingVars:et?.matchingVars,rowRef:a,rowRefForModalId:m,isHovered:b,recordingKey:"shadows_panel_spread"}))),eo&&i.createElement(i.Fragment,null,i.createElement(I.aj,{blendMode:N,className:es?r?D.TX:D.RI:D.W0}),es&&i.createElement(w._p,{name:(0,p.t)("inspect_panel.shadows.behind_transparent_areas"),value:(0,p.t)("inspect_panel.shadows.behind_transparent_areas_true"),className:d()(r?D.TX:D.RI)}),!!e.formattableColor&&i.createElement(I.DP,{formattableColor:e.formattableColor,format:h,isInStyle:!0,disableDetailModalEntry:e.disableDetailModalEntry})))}function H({hideBorder:e,noPadding:r,isSubsection:n}){let o=(0,a.d4)(e=>e.mirror.selectionProperties.numSelected)||0,l=(0,v.Z)(),c=l[0],d=S.T4.useCopyAllShadows(c?.effects??[]),u=function(e,r,n){let i=(0,S.uQ)(),a=(0,_.Q)(),o=(0,m.v4)(),l=(0,T.ks)(),c=(0,L.Ig)();return e.map(e=>{if(!e.color)return{...e,styleName:r,styleKey:n};let d=(0,L.oI)({color:e.color,colorVar:e.colorVar,variableScope:s.j0r.EFFECT_COLOR,displayValue:c}),u=(0,O.uA)(d,i,o.id,l,a.inspectionMode);return{...e,styleName:r,styleKey:n,formattableColor:u}}).filter(e=>!!e)}(c?.effects??[],c?.styleName,c?.styleKey),h=i.useCallback((e,r,n)=>i.createElement(G,{key:e.id,blendMode:e.blendMode,colorVar:e.colorVar,formattableColor:e.formattableColor,id:e.id,itemIndex:n,offset:e.offset,radius:e.radius,radiusVar:e.radiusVar,showShadowBehindNode:e.showShadowBehindNode,spread:e.spread,spreadVar:e.spreadVar,styleKey:e.styleKey,styleName:e.styleName,type:e.type,visible:e.visible,xVar:e.xVar,yVar:e.yVar}),[]);return 1!==o||!l||l.length<1||c.effects.length<1?null:i.createElement(w.VZ,{title:(0,p.t)("inspect_panel.shadows.title"),recordingKey:"shadows",copyAllValue:d,additionalHeaders:i.createElement(I.Af,null),noBorder:e,noPadding:r,isSubsection:n},i.createElement(w.x0,{limit:2,data:u,renderElement:h}))}},360189:(e,r,n)=>{n.d(r,{o:()=>D});var i=n(848318),a=n(716544),o=n(988520),s=n(741419),l=n(921494),c=n(534355),d=n(442313),u=n(464079),p=n(717587),m=n(246972),h=n(718451),_=n(52004),g=n(870769),f=n(166917),E=n(778727),y=n(60546),b=n(509195),v=n(882880),T=n(541910),I=n(356408),S=n(487497),w=n(70529),A=n(163566),C=n(338519);let N=e=>{let r=e.mirror.selectionProperties;if(!(0,h.gl)(r.borderSharedWeight)){if(!r.borderStrokeWeightsIndependent)return"border";if(r.borderTopVisible)return"border-top";if(r.borderBottomVisible)return"border-bottom";if(r.borderLeftVisible)return"border-left";if(r.borderRightVisible)return"border-right"}},L=e=>{switch(e){case"border":return(0,d.t)("inspect_panel.strokes.all_sides");case"border-top":return(0,d.t)("inspect_panel.strokes.top_side");case"border-bottom":return(0,d.t)("inspect_panel.strokes.bottom_side");case"border-left":return(0,d.t)("inspect_panel.strokes.left_side");case"border-right":return(0,d.t)("inspect_panel.strokes.right_side");default:return}},O=(e,r)=>(0,h.gl)(e)?r.some(e=>(0,h.gl)(e))?(0,d.t)("fullscreen.mixed"):r.map(e=>(0,A.nd)(e,"px")).join(", "):`${(0,A.nd)(e,"px")}`,R=e=>{switch(e){case"OUTSIDE":return(0,d.t)("inspect_panel.strokes.outer_border");case"INSIDE":return(0,d.t)("inspect_panel.strokes.inner_border");case"CENTER":return(0,d.t)("inspect_panel.strokes.center_border");default:return}};function P(e,r){let n=(0,w.X)(e.strokeAlign),a=e.strokeWeight.split(",").join(""),o=S.T4.useStrokeCopyValue(a,e.strokeColors,e.borderCSSKey);return i.createElement("div",null,!r.onlyShowStrokeColor&&i.createElement(A._p,{copyValue:o,className:C.ht},i.createElement("div",{className:C.wz},i.createElement(v.Cq,{iconState:"ACTIVE"})),i.createElement("span",null,e.strokeWeight),e.borderCSSKey&&i.createElement("span",{className:C.I0,...n},L(e.borderCSSKey))),i.createElement(I.nu,{formattableColors:e.strokeColors}),e.strokeAlign&&!r.onlyShowStrokeColor&&i.createElement(A._p,{className:C.Gr},i.createElement("span",{className:C.ki,...n},e.strokeAlign)))}function D({hideBorder:e,noPadding:r,isSubsection:n}){let v=(0,I.Qn)(),w=(0,a.d4)(e=>e.mirror.selectionProperties.numSelected)||0,C=function(){let e=(0,a.d4)(e=>e.mirror.selectionProperties.strokePaints),r=!e||(0,h.gl)(e)?[]:e.filter(e=>e.visible),n=(0,S.uQ)(),d=(0,p.Q)(),m=(0,u.v4)(),v=(0,y.ks)(),w=(0,S.pF)(e=>(0,c.b)(e.mirror.selectionProperties,"inheritFillStyleKeyForStroke")),A=(0,a.d4)(e=>e.mirror.selectionProperties.styleIdForStrokeFill),C=(0,f.Fk)((e,r)=>r?e.getStyleNodeByRef(r)?.guid:void 0,A?.assetRef),L=(0,a.d4)(E.e_),P=(0,_.kl)("inheritFillStyleKeyForStroke"),D=P&&(0,h.hS)(P)?(0,g.Gp)(P,C?[C]:[],L):void 0,M=(0,a.d4)(e=>e.mirror.selectionProperties.borderSharedWeight||e.mirror.selectionProperties.strokeWeight)||1,k=(0,l.R)(e=>({borderTopWeight:e.mirror.selectionProperties.borderTopWeight,borderRightWeight:e.mirror.selectionProperties.borderRightWeight,borderBottomWeight:e.mirror.selectionProperties.borderBottomWeight,borderLeftWeight:e.mirror.selectionProperties.borderLeftWeight})),F=(0,a.d4)(e=>e.mirror.selectionProperties.strokeAlign)||"OUTSIDE",x=(0,S.uQ)(),U=(0,b.Ig)(),B=r.filter(I.bm).map(e=>(0,b.dc)(e,U,s.j0r.STROKE)),V=i.useMemo(()=>{let e=D&&w?[(0,b.rP)(w,D,B)]:B;return(0,T.QT)(e,n,d.inspectionMode,m,v)},[D,w,B,n,d.inspectionMode,m,v]),G=(0,a.d4)(N);return i.useMemo(()=>{if(!x||V.length<1||!M)return[];let e=O(M,[k.borderTopWeight,k.borderRightWeight,k.borderBottomWeight,k.borderLeftWeight].filter(o.Vq));return e?[{id:x,strokeWeight:e,strokeColors:V,strokeAlign:R(F),borderCSSKey:G}]:[]},[x,F,M,V,G,k])}(),L=(0,m.i2)(),D=S.T4.useCopyAllStrokes(C);return 1!==w||C.length<1?null:i.createElement(A.VZ,{title:L?(0,d.t)("inspect_panel.strokes.colors.title"):(0,d.t)("inspect_panel.strokes.title"),recordingKey:"borders",additionalHeaders:v?void 0:i.createElement(I.Af,null),copyAllValue:v?void 0:D,noBorder:e,snugTitle:v,fadedTitle:v,noPadding:r,isSubsection:n},i.createElement(A.x0,{limit:2,data:C,renderElement:P,extras:{onlyShowStrokeColor:L}}))}},982694:(e,r,n)=>{n.d(r,{U:()=>W});var i=n(848318),a=n(716544),o=n(741419),s=n(536384),l=n.n(s),c=n(442313),d=n(547449),u=n(185067),p=n(166917),m=n(541910),h=n(736269),_=n(163566),g=n(702493);let f=e=>{if("CAP_HEIGHT"===e)return(0,c.t)("inspect_panel.typography.cap_height")},E=e=>{if(e)return(0,c.t)("inspect_panel.typography.hanging_punctuation")},y=e=>{switch(e){case"RIGHT":return(0,c.t)("inspect_panel.typography.align_right");case"CENTER":return(0,c.t)("inspect_panel.typography.align_center");case"JUSTIFIED":return(0,c.t)("inspect_panel.typography.align_justified");default:return}},b=e=>{switch(e){case"RIGHT":return"right";case"CENTER":return"center";case"JUSTIFIED":return"justify";default:return}},v=e=>{switch(e){case"CENTER":return(0,c.t)("inspect_panel.typography.align_middle");case"BOTTOM":return(0,c.t)("inspect_panel.typography.align_bottom");default:return}},T=e=>{switch(e){case"CENTER":return"middle";case"BOTTOM":return"bottom";default:return}},I=e=>{switch(e){case"SUPER":return(0,c.t)("inspect_panel.typography.position_super");case"SUB":return(0,c.t)("inspect_panel.typography.position_sub");default:return}},S=e=>{switch(e){case"SUPER":return"super";case"SUB":return"sub";default:return}},w=e=>{switch(e){case"LINING":return(0,c.t)("inspect_panel.typography.numeric.figure_lining");case"OLDSTYLE":return(0,c.t)("inspect_panel.typography.numeric.figure_oldstyle");default:return}},A=e=>{switch(e){case"LINING":return"lining-nums";case"OLDSTYLE":return"oldstyle-nums";default:return}},C=e=>{switch(e){case"PROPORTIONAL":return(0,c.t)("inspect_panel.typography.numeric.spacing_proportional");case"TABULAR":return(0,c.t)("inspect_panel.typography.numeric.spacing_tabular");default:return}},N=e=>{switch(e){case"PROPORTIONAL":return"proportional-nums";case"TABULAR":return"tabular-nums";default:return}},L=e=>{switch(e){case"DIAGONAL":return(0,c.t)("inspect_panel.typography.numeric.fraction_diagonal");case"STACKED":return(0,c.t)("inspect_panel.typography.numeric.fraction_stacked");default:return}},O=e=>{switch(e){case"DIAGONAL":return"diagonal-fractions";case"STACKED":return"stacked-fractions";default:return}},R=(e=[],r=[])=>{if(e.includes("ZERO")&&!r.includes("ZERO"))return(0,c.t)("inspect_panel.typography.numeric.zero_slashed")},P=(e=[],r=[])=>{if(e.includes("ZERO")&&!r.includes("ZERO"))return"slashed-zero"},D=(e,r)=>{if(e&&"ORIGINAL"!==e)switch(e){case"UPPER":return(0,c.t)("inspect_panel.typography.type_settings.case_upper");case"LOWER":return(0,c.t)("inspect_panel.typography.type_settings.case_lower");case"TITLE":return(0,c.t)("inspect_panel.typography.type_settings.case_title");case"SMALL_CAPS":return(0,c.t)("inspect_panel.typography.type_settings.case_small");case"SMALL_CAPS_FORCED":return(0,c.t)("inspect_panel.typography.type_settings.case_small_forced");default:return}return"SMALL"===r?(0,c.t)("inspect_panel.typography.type_settings.case_small"):"ALL_SMALL"===r?(0,c.t)("inspect_panel.typography.type_settings.case_small_forced"):void 0},M=(e,r)=>{if("SMALL"===r||"ALL_SMALL"===r)return"font-variant";switch(e){case"UPPER":case"LOWER":case"TITLE":return"text-transform";case"SMALL_CAPS":case"SMALL_CAPS_FORCED":return"font-variant";default:return}},k=(e,r)=>{if("SMALL"===r||"ALL_SMALL"===r)return"small-caps";switch(e){case"UPPER":return"uppercase";case"LOWER":return"lowercase";case"TITLE":return"capitalize";case"SMALL_CAPS":case"SMALL_CAPS_FORCED":return"small-caps";default:return}},F=e=>{switch(e){case"STRIKETHROUGH":return(0,c.t)("inspect_panel.typography.strikethrough");case"UNDERLINE":return(0,c.t)("inspect_panel.typography.underline");default:return}},x=e=>{if(!e)return"";switch(e){case"STRIKETHROUGH":return"line-through";case"UNDERLINE":return"underline";default:return""}},U=e=>{switch(e){case"SOLID":return(0,c.t)("inspect_panel.typography.solid");case"DOTTED":return(0,c.t)("inspect_panel.typography.dotted");case"WAVY":return(0,c.t)("inspect_panel.typography.wavy");default:return}},B=e=>{if(!e)return"";switch(e){case"SOLID":return"solid";case"DOTTED":return"dotted";case"WAVY":return"wavy";default:return""}},V=e=>{if(e)return(0,c.t)("variables.values.boolean.true")};function G({name:e,maybeVariable:r,disableDetailModalEntry:n,...a}){return"pixels"===a.format?i.createElement(_.YE,{name:e,variable:r?.variableDisplayName,variableId:r?.variable?.node_id,matchingVars:r?.matchingVars,copyValue:r?.variableDisplayName,isTextProperty:!0,disableDetailModalEntry:n,...a}):"fig_number"===a.format?i.createElement(_.di,{name:e,variable:r?.variableDisplayName,variableId:r?.variable?.node_id,matchingVars:r?.matchingVars,copyValue:r?.variableDisplayName,isTextProperty:!0,disableDetailModalEntry:n,...a}):i.createElement(_._p,{name:e,variable:r?.variableDisplayName,variableId:r?.variable?.node_id,matchingVars:r?.matchingVars,copyValue:r?.variableDisplayName,...a,disableDetailModalEntry:n})}function H({fontFamily:e,fontFamilyConsumedOrSuggestedVariable:r,fontWeight:n,fontWeightConsumedOrSuggestedVariable:a,fontStyle:o,fontSize:s,fontSizeConsumedOrSuggestedVariable:l,leadingTrim:d,lineHeight:u,lineHeightConsumedOrSuggestedVariable:p,letterSpacing:m,letterSpacingConsumedOrSuggestedVariable:h,textAlignHorizontal:H,textAlignVertical:K,textCase:W,fontVariantCaps:z,fontVariantPosition:$,fontVariantNumericFigure:Y,fontVariantNumericSpacing:j,fontVariantNumericFraction:q,toggledOnOTFeatures:X,toggledOffOTFeatures:Z,textDecoration:J,textDecorationStyle:Q,textDecorationOffset:ee,textDecorationThickness:et,textDecorationSkipInk:er,opticalSize:en,fontVariationsDescription:ei,hangingPunctuation:ea,hangingList:eo,paragraphSpacing:es,paragraphSpacingConsumedOrSuggestedVariable:el,paragraphIndent:ec,paragraphIndentConsumedOrSuggestedVariable:ed,listSpacing:eu,disableDetailModalEntry:ep}){return i.createElement(i.Fragment,null,i.createElement(G,{name:(0,c.t)("inspect_panel.typography.font"),copyName:"font-family",maybeVariable:r,value:e,disableDetailModalEntry:ep}),i.createElement(G,{name:(0,c.t)("inspect_panel.typography.weight"),copyName:"font-weight",maybeVariable:a,value:n,disableDetailModalEntry:ep}),i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.style"),copyName:"font-style",value:o}),i.createElement(G,{name:(0,c.t)("inspect_panel.typography.size"),copyName:"font-size",maybeVariable:l,value:s,format:"pixels",disableDetailModalEntry:ep}),i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.leading_trim"),copyName:"leading-trim",value:f(d)}),i.createElement(G,{name:(0,c.t)("inspect_panel.typography.line_height"),copyName:"line-height",maybeVariable:p,value:u,format:"fig_number",disableDetailModalEntry:ep}),i.createElement(G,{name:(0,c.t)("inspect_panel.typography.paragraph_spacing"),maybeVariable:el,value:es,format:"pixels",disableDetailModalEntry:ep}),i.createElement(G,{name:(0,c.t)("inspect_panel.typography.paragraph_indent"),copyName:"text-indent",maybeVariable:ed,value:ec,format:"pixels",disableDetailModalEntry:ep}),i.createElement(_.YE,{name:(0,c.t)("inspect_panel.typography.list_spacing"),value:eu,isTextProperty:!0}),i.createElement(G,{name:(0,c.t)("inspect_panel.typography.letter"),copyName:"letter-spacing",maybeVariable:h,value:m,format:"fig_number",disableDetailModalEntry:ep}),i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.align"),copyName:"text-align",value:y(H),copyValue:b(H)}),i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.align_vertical"),copyName:"vertical-align",value:v(K),copyValue:T(K)}),i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.type_settings.case"),copyName:M(W,z),value:D(W,z),copyValue:k(W,z)}),i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.position"),copyName:"position",value:I($),copyValue:S($)}),i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.numeric.figure"),copyName:"font-variant-numeric-figure",value:w(Y),copyValue:A(Y)}),i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.numeric.spacing"),copyName:"font-variant-numeric-spacing",value:C(j),copyValue:N(j)}),i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.numeric.fraction"),copyName:"font-variant-numeric-fraction",value:L(q),copyValue:O(q)}),i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.numeric.zero"),copyName:"font-variant-numeric-zero",value:R(X,Z),copyValue:P(X,Z)}),!!J&&"NONE"!==J&&i.createElement(i.Fragment,null,"UNDERLINE"===J&&i.createElement(_._p,{className:g.k$},i.createElement("div",{className:g.Bz},(0,c.t)("inspect_panel.typography.text_decoration"))),i.createElement(_._p,{subPropertyRow:"UNDERLINE"===J,name:"UNDERLINE"===J?(0,c.t)("inspect_panel.typography.decoration"):(0,c.t)("inspect_panel.typography.text_decoration"),copyName:"text-decoration",value:F(J),copyValue:x(J)}),"UNDERLINE"===J&&i.createElement(i.Fragment,null,i.createElement(_._p,{subPropertyRow:!0,name:(0,c.t)("inspect_panel.typography_text_decoration_style"),copyName:"text-decoration-style",value:U(Q),copyValue:B(Q)}),i.createElement(_.di,{subPropertyRow:!0,name:(0,c.t)("inspect_panel.typography.text_decoration_offset"),copyName:"text-decoration-offset",value:ee,isTextProperty:!0}),i.createElement(_.di,{subPropertyRow:!0,name:(0,c.t)("inspect_panel.typography.text_decoration_thickness"),copyName:"text-decoration-thickness",value:et,isTextProperty:!0}),i.createElement(_._p,{subPropertyRow:!0,name:(0,c.t)("inspect_panel.typography.text_decoration_skip_ink"),copyName:"text-decoration-skip-ink",value:V(er),copyValue:er?"auto":void 0}))),i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.punctuation"),value:E(ea)}),i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.hanging_list"),value:E(eo)}),i.createElement(_.YE,{name:(0,c.t)("inspect_panel.typography.optical_size"),value:en,isTextProperty:!0}),i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.variation"),value:ei}))}function K(e,{numFonts:r,extraHeader:n,noPadding:s,isSubsection:l}){let{copyAll:g,setCopyValue:f,hasCopyAllContent:E}=(0,h.We)(),y=function(e){let r=(0,m.e4)("FONT_FAMILY",e.fontFamily,e.variableConsumptionMap),n=(0,m.pc)("FONT_SIZE",e.fontSize,e.variableConsumptionMap),i=(0,m.pc)("FONT_STYLE",e.fontWeight,e.variableConsumptionMap),s=i.variable?.resolvedType===o.rXF.FLOAT?i:{},l=(0,m.pc)("LINE_HEIGHT",e.lineHeight,e.variableConsumptionMap),c=(0,m.pc)("LETTER_SPACING",e.letterSpacing?.units!=="PERCENT"?e.letterSpacing?.value:void 0,e.variableConsumptionMap),d=(0,a.d4)(e=>e.mirror.selectionProperties.paragraphSpacing),u=(0,m.pc)("PARAGRAPH_SPACING",d,e.variableConsumptionMap),p=(0,a.d4)(e=>e.mirror.selectionProperties.paragraphIndent);return{fontFamilyVariable:r,fontWeightVariable:s,fontSizeVariable:n,lineHeightVariable:l,letterSpacingVariable:c,paragraphSpacingVariable:u,paragraphIndentVariable:(0,m.pc)("PARAGRAPH_INDENT",p,e.variableConsumptionMap)}}(e),b=(0,d.lv)(),{fontFamily:v,fontStyle:T,styleName:I,leadingTrim:S,textAlignHorizontal:w,textAlignVertical:A,opticalSize:C,fontVariationsDescription:N,isStyleSoftDeleted:L,hangingPunctuation:O,hangingList:R,substring:P}=e,D=(0,u.uQ)(),{fontWeight:M,fontSize:k,paragraphSpacing:F,paragraphIndent:x,listSpacing:U,lineHeight:B,letterSpacing:V,textDecoration:G,textDecorationStyle:K,textDecorationOffset:W,textDecorationThickness:z,textDecorationSkipInk:$,textCase:Y,fontVariantCaps:j,fontVariantPosition:q,fontVariantNumericFigure:X,fontVariantNumericSpacing:Z,fontVariantNumericFraction:J,toggledOnOTFeatures:Q,toggledOffOTFeatures:ee}=(0,p.Fk)((e,r,n,i)=>{if(!r)return{};let a=e.get(r);if(!a)return{};let o=a.getStyledTextSegments(["fontSize","fontWeight","paragraphSpacing","paragraphIndent","listSpacing","lineHeight","letterSpacing","textDecoration","textDecorationStyle","textDecorationOffset","textDecorationThickness","textDecorationSkipInk","textCase","fontVariantCaps","fontVariantPosition","fontVariantNumericFigure","fontVariantNumericSpacing","fontVariantNumericFraction","toggledOnOTFeatures","toggledOffOTFeatures"],n,i);return o?.[0]??{}},D,e.startPos,e.endPos),et=0===e.index,er=e.index===r-1,en=P?.trim()||(0,c.t)("inspect_panel.typography.span_whitespace");return i.createElement(_.VZ,{copyAllValue:g,disableCopyAll:!E,doNotReserveSpaceForChevronInTitle:!et,isSubsection:er&&l,noBorder:!0,noPadding:!er||s,recordingKey:et?"typography":`typography${e.index}`,snugTitle:b,thinTitle:!!b||!et,title:et?(0,c.t)("inspect_panel.typography.title"):P?(0,c.t)("inspect_panel.typography.span_contents",{contents:en}):(0,c.t)("inspect_panel.typography.span")},i.createElement(h.xe.Provider,{value:{setCopyValue:f}},et&&n,i.createElement(_._p,{name:(0,c.t)("inspect_panel.typography.name"),value:L?void 0:I,disableDetailModalEntry:!0}),i.createElement(H,{fontFamily:v,fontFamilyConsumedOrSuggestedVariable:y.fontFamilyVariable,fontSize:k,fontSizeConsumedOrSuggestedVariable:y.fontSizeVariable,fontStyle:T,fontVariantCaps:j,fontVariantNumericFigure:X,fontVariantNumericFraction:J,fontVariantNumericSpacing:Z,fontVariantPosition:q,fontVariationsDescription:N,fontWeight:M,fontWeightConsumedOrSuggestedVariable:y.fontWeightVariable,hangingList:R,hangingPunctuation:O,leadingTrim:S,letterSpacing:V,letterSpacingConsumedOrSuggestedVariable:y.letterSpacingVariable,lineHeight:B,lineHeightConsumedOrSuggestedVariable:y.lineHeightVariable,listSpacing:U,opticalSize:C,paragraphIndent:x,paragraphIndentConsumedOrSuggestedVariable:y.paragraphIndentVariable,paragraphSpacing:F,paragraphSpacingConsumedOrSuggestedVariable:y.paragraphSpacingVariable,textAlignHorizontal:w,textAlignVertical:A,textCase:Y,textDecoration:G,textDecorationOffset:W,textDecorationSkipInk:$,textDecorationStyle:K,textDecorationThickness:z,toggledOffOTFeatures:ee,toggledOnOTFeatures:Q})))}function W({hideBorder:e,noPadding:r,isSubsection:n}){let o=(0,a.d4)(e=>e.mirror.selectionProperties.numSelected)||0,s=function(){let e=(0,a.d4)(e=>e.mirror.selectionProperties.selectedFonts),r=i.useMemo(()=>{if(!e||!e.fonts)return;let r=new Set;return e.fonts.filter(e=>!!e.substring&&(!e.parentStyleId||!r.has(e.parentStyleId)&&(r.add(e.parentStyleId),!0))).sort((e,r)=>(e.startPos??0)-(r.startPos??0)).map((e,r)=>({...e,index:r}))},[e]);if(e&&r)return{fonts:r,incompleteResults:e.incompleteResults}}();return!s||s?.fonts.length<1?null:i.createElement("div",{className:l()(g.sk,e&&g.th,r&&g.pN)},i.createElement(_.x0,{limit:2,data:s.fonts,renderElement:K,extras:{numFonts:s.fonts.length,extraHeader:s.incompleteResults?i.createElement("div",{className:g.VC},(0,c.tx)("inspect_panel.typography.too_many_selected",{numSelected:o})):null,noPadding:r,isSubsection:n}}))}},786652:(e,r,n)=>{n.d(r,{u:()=>C});var i=n(848318),a=n(897378),o=n(124895),s=n(917906),l=n(654104),c=n(566699),d=n(442313),u=n(136031),p=n(584305),m=n(718451),h=n(503024),_=n(409802),g=n(977219),f=n(246633),E=n(302839),y=n(219205),b=n(567570),v=n(264953),T=n(973399);let I=E.c$;function S(e){let r=(0,g.X7)(),n=i.createElement(w,{value:(0,m.E7)(e.property),defaultBlendMode:"NORMAL"});return i.createElement(E.l6,{...e,renderInput:({onMouseDown:e,props:o})=>{let s=b.p6;return"NORMAL"!==(0,m.E7)(o.property)&&(s=b.DU),r?i.createElement(a.K,{onClick:e,"aria-label":(0,d.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode"),htmlAttributes:{"data-tooltip-type":h.Ib.TEXT,"data-tooltip":(0,d.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode")},disabled:o.disabled},n):i.createElement(f.K0,{className:s,tabIndex:-1,onPointerDown:p.dG,onMouseDown:e,"data-tooltip-type":h.Ib.TEXT,"data-tooltip":(0,d.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode")},n)}})}function w({value:e,defaultBlendMode:r}){return(0,_.qg)(e,r)?i.createElement(c.U,{svg:T.A},i.createElement(o.N,null)):i.createElement(c.U,{svg:v.A},i.createElement(s.l,null))}let A=new u.ro,C=i.memo(function(e){let r=(0,y.cJ)(),n=_.r5.map((n,a)=>{let o="LINEAR_BURN"===n&&r;return"SELECT_DIVIDER"===n?i.createElement(E.sK,{key:a}):i.createElement(I,{key:a,value:n,disabled:o,recordingKey:l.Pt(e,n)})});return i.createElement(S,{className:b.rO,disabled:e.disabled,dispatch:e.dispatch,dropdownClassName:b.Qg,dropdownShown:e.dropdownShown,enablePreview:!0,formatter:A,id:"color-picker-blend-mode-select",inputClassName:b.p6,minTop:6,onChange:e.onBlendModeChange,onMouseDown:p.dG,property:e.blendMode,recordingKey:e.recordingKey},n)})},102494:(e,r,n)=>{n.d(r,{Fr:()=>ei,Rh:()=>ee,S7:()=>ec,mu:()=>eg,qi:()=>ef,qo:()=>Q,sX:()=>ea});var i=n(848318),a=n(716544),o=n(464437),s=n(475020),l=n(961072),c=n(208720),d=n(741419),u=n(157907),p=n(536384),m=n.n(p),h=n(818754),_=n(541525),g=n(857188),f=n(831932),E=n(654104),y=n(983229),b=n(566699),v=n(442313),T=n(667323),I=n(318672),S=n(129102),w=n(360399),A=n(992444),C=n(577023),N=n(773422),L=n(87089),O=n(705363),R=n(501736),P=n(922030),D=n(483372),M=n(503024),k=n(614671),F=n(237873),x=n(176386),U=n(782800),B=n(977219),V=n(189317),G=n(246633),H=n(256429),K=n(302839),W=n(949651),z=n(318100),$=n(901246),Y=n(152379),j=n(35533),q=n(228217),X=n(27776),Z=n(698732),J=n(666676);let Q=(0,h.jz)(X.uj0),ee=(0,h.jz)(X.jzw);function et(e,r){return Object.keys(e).every(n=>e[n]===r[n])}let er=K.l6,en=K.c$,ei={format:e=>e===d.NVY.HEX?"Hex":d.NVY[e]};var ea=(e=>(e.FULL="full",e.WHITEBOARD="whiteboard",e))(ea||{});let eo=(e,r)=>({hslva:r===d.NVY.HSL?(0,c.oB)(e):(0,c.qN)(e),rgba:e}),es=e=>{let r="",n="";switch(e){case"SOLID":case"IMAGE":case"EMOJI":case"VIDEO":r=e;break;case"GRADIENT_LINEAR":r="GRADIENT",n="LINEAR";break;case"GRADIENT_RADIAL":r="GRADIENT",n="RADIAL";break;case"GRADIENT_ANGULAR":r="GRADIENT";break;case"GRADIENT_DIAMOND":r="GRADIENT",n="DIAMOND"}return{paintPickerTab:r,paintPickerFilter:n}};function el(e){return parseFloat(e.toFixed(4))}function ec({recordingKey:e,...r}){let n=(0,i.useId)(),[p,h]=(0,i.useState)(eo(r.color,r.colorFormat)),g=i.useContext(U.nZ),{setFgHue:f,setFgAlpha:y,standardMet:T}=g.colorContrastInfo,{contrastLevelForCategory:I}=g.settings,w=i.useRef(T),N=(0,i.useRef)(r.color),k=(0,i.useRef)(r.colorFormat),x=(0,O.Xo)(),V=(0,B.X7)(),K=(0,_.hC)(),W=(0,L.dq)(),z=P.ol()?.id,q=(0,a.d4)(e=>!!e.eyedropper)||r.preventAutoFocus,X={...r,preventAutoFocus:q};(0,i.useEffect)(()=>{f(el(p.hslva.h)),y(el(p.hslva.a))},[f,y,p.hslva.h,p.hslva.a]),(0,i.useEffect)(()=>{if((et(r.color,N.current)||et(r.color,p.rgba))&&k.current===r.colorFormat)return;let e=eo(r.color,r.colorFormat);e.hslva=function(e,r,n){("l"in r&&(0===r.l||1===r.l)||"v"in r&&0===r.v)&&(r={...r,s:e.s});let i=(0,o.xN)(e.h,0)&&(0,o.xN)(r.h,1),a=(0,o.xN)(e.h,1)&&(0,o.xN)(r.h,0);return((0,o.xN)(n.r,n.g)&&(0,o.xN)(n.r,n.b)||i||a)&&(r={...r,h:e.h}),r}(p.hslva,e.hslva,r.color),N.current=r.color,k.current=r.colorFormat,h(e)},[p,r.color,r.colorFormat]);let Q=(e,n)=>{let i=(0,c.w_)(e);h({hslva:e,rgba:i}),r.onColorChange(i,n?D.zk.YES:D.zk.NO_BUT_TRACK_AS_EDIT),n&&r.analytics&&R.F.trackFromFullscreen(r.analytics.name,{source:"slider",color:S.z5.format(i),...r.analytics.properties}),g.showColorContrast&&void 0===w.current&&(w.current=T),n&&g.showColorContrast&&(!1===w.current&&K("color_contrast.pick_new_color_when_not_compliant",{conformance:I,compliance:T,orgId:W,teamId:z}),w.current=void 0)},ee=(e,n)=>{if(!r.onOpacityChange){Q(e,n);return}let i=(0,c.w_)(e);h({hslva:e,rgba:i}),r.onOpacityChange(i.a,n?D.zk.YES:D.zk.NO_BUT_TRACK_AS_EDIT),n&&r.analytics&&R.F.trackFromFullscreen(r.analytics.name,{source:"slider",color:S.z5.format(i),...r.analytics.properties})},ea=(e,n)=>{r.onColorChange(e,n),r.analytics&&R.F.trackFromFullscreen(r.analytics.name,{source:"hex",color:S.z5.format(e),...r.analytics.properties})},ec=e=>{V&&(0,u.k)().fpl_window&&(0,F.$z)(),e.stopPropagation();let{paintPickerTab:n,paintPickerFilter:i}=es(r.paintPickerAnalytics?.paintType);A.Y5.triggerAction("toggle-dropper",{canAcceptStyles:r.canAcceptStyles,canAcceptVariables:r.canAcceptVariables,pickerShown:x?.id,paintPickerTab:n,paintPickerFilter:i,paintPickerSessionId:r.paintPickerSessionId})};if("whiteboard"===r.displayType)return(()=>{let n=r.currentTool===d.NLJ.DROPPER_COLOR;return i.createElement("div",{className:Z.BA},i.createElement("div",{className:Z.s1},!r.dropperDisabled&&i.createElement("div",{className:Z.go},i.createElement(G.YW,{svg:J.A,fill:"dark"===r.theme?"white":"black",selected:n,onPointerDown:ec,recordingKey:E.Pt(e,"dropperButton"),"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.color_controls.eyedropper"),tooltipForScreenReadersOnly:!0,className:m()({[Z.fG]:!n&&"dark"===r.theme})})),i.createElement(ep,{recordingKey:E.Pt(e,"hexInput"),...X,onColorChange:ea})),i.createElement("div",{className:m()(Z.MX,{[Z.zB]:!r.hideOpacity})},i.createElement($.e,{width:140,color:p.hslva,changeCallback:Q,containerClass:Z.aw,recordingKey:E.Pt(e,"hueControl")}),!r.hideOpacity&&i.createElement(Y.xp,{width:140,color:p.hslva,changeCallback:ee,containerClass:Z.aw,recordingKey:E.Pt(e,"opacityControl")})),i.createElement(j.T,{size:184,color:p.hslva,changeCallback:Q,ignoreWheelCallback:!0,recordingKey:E.Pt(e,"slvControl")}))})();let eu=i.createElement(i.Fragment,null,i.createElement(er,{className:m()(Z.NC,{[Z.DW]:V}),dispatch:r.dispatch,dropdownClassName:Z.O4,dropdownShown:r.dropdownShown,formatter:ei,id:n,inputClassName:Z.Hi,onChange:e=>{(0,C.UK)().colorFormat.set(e)},property:r.colorFormat,recordingKey:E.Pt(e,"colorFormatSelect")},i.createElement(en,{value:d.NVY.HEX,recordingKey:E.Pt(e,"hexOption")}),i.createElement(en,{value:d.NVY.RGB,recordingKey:E.Pt(e,"rgbOption")}),i.createElement(en,{value:d.NVY.CSS,recordingKey:E.Pt(e,"cssOption")}),i.createElement(en,{value:d.NVY.HSL,recordingKey:E.Pt(e,"hslOption")}),i.createElement(en,{value:d.NVY.HSB,recordingKey:E.Pt(e,"hsvOption")})),r.colorFormat===d.NVY.HEX&&i.createElement(ep,{recordingKey:E.Pt(e,"hexInput"),...X}),r.colorFormat===d.NVY.RGB&&i.createElement(em,{recordingKey:E.Pt(e,"rgbInput"),...X}),r.colorFormat===d.NVY.CSS&&i.createElement(eh,{recordingKey:E.Pt(e,"cssInput"),...X}),(r.colorFormat===d.NVY.HSL||r.colorFormat===d.NVY.HSB)&&i.createElement(e_,{key:r.colorFormat,value:p.hslva,changeCallback:Q,recordingKey:E.Pt(e,"hslvInput"),...X}));return i.createElement("div",null,i.createElement(ed,{color:p.hslva,onChange:Q,recordingKey:E.Pt(e,"slvControl")}),i.createElement(H.Id,null,r.additionalControls&&i.createElement("div",{className:Z.CX},r.additionalControls),i.createElement("div",{className:m()(Z.ne,{[Z.Ep]:V})},i.createElement("div",{className:m()(Z.go,{[Z.TD]:V})},V?i.createElement(s.d,{"aria-expanded":r.currentTool===d.NLJ.DROPPER_COLOR,"aria-label":(0,v.t)("fullscreen.properties_panel.color_picker.sample_color"),htmlAttributes:{"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.properties_panel.color_picker.sample_color")},recordingKey:E.Pt(e,"dropperButton"),onClick:ec},i.createElement(b.U,{svg:J.A},i.createElement(l.G,null))):i.createElement(G.YW,{selected:r.currentTool===d.NLJ.DROPPER_COLOR,onMouseDown:ec,recordingKey:E.Pt(e,"dropperButton"),"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.properties_panel.color_picker.eyedropper"),tooltipForScreenReadersOnly:!0},i.createElement(b.U,{svg:J.A},i.createElement(l.G,null)))),i.createElement("div",{className:m()(Z.xJ,{[Z.Q0]:V})},i.createElement($.e,{width:156,color:p.hslva,changeCallback:Q,containerClass:Z.aw,recordingKey:E.Pt(e,"hueControl")}),i.createElement(Y.xp,{width:156,color:p.hslva,changeCallback:ee,containerClass:Z.aw,recordingKey:E.Pt(e,"opacityControl")}))),V?i.createElement("div",{className:Z.Px},eu):i.createElement(H.fI,null,eu)))}function ed({color:e,onChange:r,recordingKey:n}){return(0,B.X7)()?i.createElement("div",{className:Z.YC},i.createElement(j.T,{size:ee,color:e,changeCallback:r,recordingKey:n,canvasWrapperStyles:{borderRadius:"5px"},overlay:i.createElement(U.Mu,null)})):i.createElement(j.T,{size:Q,color:e,changeCallback:r,recordingKey:n,containerClass:Z.pZ})}ec.displayName="ColorControls";let eu=i.forwardRef((e,r)=>{let n=(0,B.X7)();return i.createElement("div",{ref:r,className:m()({[Z.x4]:!e.isWhiteboard,[Z.mP]:e.isWhiteboard,[Z.zI]:n})},e.children)});function ep(e){let r=(0,a.wA)(),n=(0,i.useRef)(null),o="whiteboard"===e.displayType;(0,i.useEffect)(()=>{o&&n.current&&(n.current.dataset.preferredTheme=e.theme)},[o,e.theme]);let s=(0,i.useMemo)(()=>o?S.z5:new S.rC({parseAlpha:!0}),[o]),l=e=>{e.keyCode!==g.Uz.ESCAPE||(0,u.k)().fpl_window||r(T.XE())},c=!(o||e.hideOpacity);return i.createElement(eu,{ref:n,isWhiteboard:o},i.createElement(V.AN,{autoFocus:!f.Ay.isIpad&&!e.preventAutoFocus,className:m()({[Z.uh]:!o,[Z.vh]:o}),formatter:s,forwardedRef:e.hexInputRef,noBorderOnFocus:!0,onChange:e.onColorChange,onKeyDown:l,property:e.color,recordingKey:E.Pt(e,"color"),squareRightBorder:!0}),c&&i.createElement(k.Pd,{className:Z.ke,value:e.color.a,onValueChange:(r,n)=>{e.onColorChange({...e.color,a:r},n)},noLeftBorder:!0,noBorderOnFocus:!0,dispatch:r,onKeyDown:l,recordingKey:E.Pt(e,"opacity")}))}class em extends E.o6{constructor(){super(...arguments),this.formatter=new w.o1({normalizeFactor:255,min:0,max:1}),this.onRChange=e=>this.props.onColorChange({...this.props.color,r:e}),this.onGChange=e=>this.props.onColorChange({...this.props.color,g:e}),this.onBChange=e=>this.props.onColorChange({...this.props.color,b:e}),this.onAChange=(e,r)=>{this.props.onColorChange({...this.props.color,a:e},r)},this.onKeyDown=e=>{e.keyCode!==g.Uz.ESCAPE||(0,u.k)().fpl_window||this.props.dispatch(T.XE())}}render(){return i.createElement(eu,null,i.createElement(k.j5,{autoFocus:!this.props.preventAutoFocus,className:Z.Qh,"data-tooltip":(0,v.t)("fullscreen.color_controls.red"),"data-tooltip-type":M.Ib.TEXT,dispatch:this.props.dispatch,formatter:this.formatter,minimizeScrubTargetWidth:!0,noBorderOnFocus:!0,onKeyDown:this.onKeyDown,onValueChange:this.onRChange,recordingKey:E.Pt(this.props,"red"),scrubMultiplier:1/255,squareRightBorder:!0,value:this.props.color.r}),i.createElement(k.j5,{className:Z.Qh,"data-tooltip":(0,v.t)("fullscreen.color_controls.green"),"data-tooltip-type":M.Ib.TEXT,dispatch:this.props.dispatch,formatter:this.formatter,minimizeScrubTargetWidth:!0,noBorderOnFocus:!0,noLeftBorder:!0,onKeyDown:this.onKeyDown,onValueChange:this.onGChange,recordingKey:E.Pt(this.props,"green"),scrubMultiplier:1/255,squareRightBorder:!0,value:this.props.color.g}),i.createElement(k.j5,{className:Z.Qh,"data-tooltip":(0,v.t)("fullscreen.color_controls.blue"),"data-tooltip-type":M.Ib.TEXT,dispatch:this.props.dispatch,formatter:this.formatter,minimizeScrubTargetWidth:!0,noBorderOnFocus:!0,noLeftBorder:!0,onKeyDown:this.onKeyDown,onValueChange:this.onBChange,recordingKey:E.Pt(this.props,"blue"),scrubMultiplier:1/255,squareRightBorder:!0,value:this.props.color.b}),!this.props.hideOpacity&&i.createElement(k.Pd,{className:Z.ke,dispatch:this.props.dispatch,value:this.props.color.a,onValueChange:this.onAChange,onKeyDown:this.onKeyDown,noLeftBorder:!0,noBorderOnFocus:!0,recordingKey:E.Pt(this.props,"opacity")}))}}em.displayName="RgbInputs";class eh extends E.o6{constructor(){super(...arguments),this.formatter=I.F,this.onKeyDown=e=>{e.keyCode!==g.Uz.ESCAPE||(0,u.k)().fpl_window||this.props.dispatch(T.XE())}}render(){return i.createElement(eu,null,i.createElement(V.AN,{className:Z.AH,formatter:this.formatter,property:this.props.color,onChange:this.props.onColorChange,recordingKey:E.Pt(this.props,"color"),autoFocus:!this.props.preventAutoFocus,noBorderOnFocus:!0,onKeyDown:this.onKeyDown}))}}eh.displayName="CssInputs";class e_ extends E.o6{constructor(){super(...arguments),this.formatter360=new w.o1({normalizeFactor:360,min:0,max:1}),this.formatter100=new w.o1({normalizeFactor:100,min:0,max:1}),this.onHChange=e=>this.props.changeCallback({...this.props.value,h:e},!0),this.onSChange=e=>this.props.changeCallback({...this.props.value,s:e},!0),this.onLChange=e=>this.props.changeCallback({...this.props.value,l:e},!0),this.onVChange=e=>this.props.changeCallback({...this.props.value,v:e},!0),this.onAChange=(e,r)=>{this.props.onColorChange({...this.props.color,a:e},r)},this.onKeyDown=e=>{e.keyCode!==g.Uz.ESCAPE||(0,u.k)().fpl_window||this.props.dispatch(T.XE())}}render(){return i.createElement(eu,null,i.createElement(k.j5,{autoFocus:!this.props.preventAutoFocus,className:Z.Qh,"data-tooltip":(0,v.t)("fullscreen.color_controls.hue"),"data-tooltip-type":M.Ib.TEXT,dispatch:this.props.dispatch,formatter:this.formatter360,minimizeScrubTargetWidth:!0,noBorderOnFocus:!0,onKeyDown:this.onKeyDown,onValueChange:this.onHChange,recordingKey:E.Pt(this.props,"hue"),scrubMultiplier:1/360,squareRightBorder:!0,value:this.props.value.h}),i.createElement(k.j5,{className:Z.Qh,"data-tooltip":(0,v.t)("fullscreen.color_controls.saturation"),"data-tooltip-type":M.Ib.TEXT,dispatch:this.props.dispatch,formatter:this.formatter100,minimizeScrubTargetWidth:!0,noBorderOnFocus:!0,noLeftBorder:!0,onKeyDown:this.onKeyDown,onValueChange:this.onSChange,recordingKey:E.Pt(this.props,"saturation"),scrubMultiplier:.01,squareRightBorder:!0,value:this.props.value.s}),i.createElement(k.j5,{className:Z.Qh,"data-tooltip":"l"in this.props.value?(0,v.t)("fullscreen.color_controls.lightness"):(0,v.t)("fullscreen.color_controls.brightness"),"data-tooltip-type":M.Ib.TEXT,dispatch:this.props.dispatch,formatter:this.formatter100,minimizeScrubTargetWidth:!0,noBorderOnFocus:!0,noLeftBorder:!0,onKeyDown:this.onKeyDown,onValueChange:"l"in this.props.value?this.onLChange:this.onVChange,recordingKey:E.Pt(this.props,"value"),scrubMultiplier:.01,squareRightBorder:!0,value:"l"in this.props.value?this.props.value.l:this.props.value.v}),!this.props.hideOpacity&&i.createElement(k.Pd,{className:Z.ke,dispatch:this.props.dispatch,value:this.props.color.a,onValueChange:this.onAChange,noLeftBorder:!0,noBorderOnFocus:!0,recordingKey:E.Pt(this.props,"opacity"),onKeyDown:this.onKeyDown}))}}function eg(e){let r=(0,a.wA)(),n=(0,i.useRef)(null),o=(0,B.X7)();(0,i.useEffect)(()=>{n.current&&(n.current.dataset.preferredTheme=e.theme)},[e.theme]);let s=(0,i.useMemo)(()=>new S.rC({parseAlpha:!0}),[]),l=e=>{e.keyCode!==g.Uz.ESCAPE||(0,u.k)().fpl_window||r(T.XE())};return i.createElement(eu,{ref:n,isWhiteboard:!1},i.createElement("div",{className:Z.Q6},i.createElement(x.J,{color:e.color,onMouseDown:e.onChitMouseDown,recordingKey:E.Pt(e.recordingKey,"chit")}),i.createElement(V.AN,{className:m()(Z.uh,{[Z.ym]:o}),squareRightBorder:!0,noBorderOnFocus:!0,formatter:s,property:e.color,onChange:e.onColorChange,onKeyDown:l,recordingKey:E.Pt(e,"color")})),i.createElement(k.Pd,{decimals:e.opacityDecimals,className:Z.ke,value:e.color.a,onValueChange:(r,n)=>{e.onColorChange({...e.color,a:r},n)},noLeftBorder:!0,noBorderOnFocus:!0,dispatch:r,onKeyDown:l,recordingKey:E.Pt(e,"opacity")}))}function ef({variableId:e,color:r,opacity:n,onMouseDown:a,recordingKey:o}){let s=(0,N.u)(e),l=s?.name??"",c=!!s&&(0,W.eF)(s);return i.createElement(i.Fragment,null,c?null:i.createElement("div",{onFocus:e=>e.stopPropagation()},i.createElement(x.J,{color:r,opacity:n,onMouseDown:a,recordingKey:E.Pt(o,"chit"),className:q.x7})),(0,u.k)().eu_fpl_migration_button?i.createElement("div",{className:q.eV},i.createElement(z.wG,{isDeleted:c,text:l,tooltip:l,onClick:a,actionOnMouseDown:!0})):i.createElement(y.D8,{role:"button",tabIndex:0,className:q.eV,onMouseDown:a,recordingKey:E.Pt(o,"pill")},i.createElement(z.wG,{isDeleted:c,text:l,tooltip:l})))}e_.displayName="HslvInputs"},414176:(e,r,n)=>{n.d(r,{SY:()=>eS});var i=n(848318),a=n(992277),o=n(356505),s=n(897378),l=n(437594),c=n(494419),d=n(614064),u=n(86778),p=n(741419),m=n(673906);n(629829);var h=n(157907),_=n(39773),g=n(536384),f=n.n(g),E=n(579020),y=n(6819),b=n(654104),v=n(502255),T=n(252292),I=n(63571),S=n(566699),w=n(963376),A=n(442313),C=n(155651),N=n(360399),L=n(136031),O=n(584305),R=n(727341),P=n(919546),D=n(481540),M=n(992444),k=n(964e3),F=n(789269),x=n(207694),U=n(104720),B=n(943249),V=n(694253),G=n(483372),H=n(503024),K=n(651620),W=n(977219),z=n(663616),$=n(741924),Y=n(780804),j=n(724771),q=n(189317),X=n(106579),Z=n(565700),J=n(256429),Q=n(302839),ee=n(920536),et=n(542143),er=n(468410),en=n(257628),ei=n(199445),ea=n(677657),eo=n(449345),es=n(257024),el=n(183787),ec=n(212532),ed=n(881069),eu=n(281463),ep=n(325421),em=n(119782),eh=n(338929),e_=n(689063),eg=n(578434);let ef="image-scale-mode-select",eE=Q.l6,ey=Q.c$,eb=(0,_.eU)(!1),ev=K.qo,eT=(e,r)=>e.every((e,n)=>e===r[n]);async function eI(e){let r=Array.from(e.animatedImage.hash).map(e=>e.toString(16).padStart(2,"0")).join("");await (0,F.Jr)().loadImageByHash(r);let n=(0,U.Sl)(e);return p.CUU.requestGIFData(n)}function eS(e){let r=(0,R.GS)(),[,n]=(0,_.fp)(eb);(0,i.useEffect)(()=>(n(!0),()=>n(!1)),[n]);let a=(0,et.PE)(),{withinMeter:o}=(0,ee.X)(en.JT.REMOVE_BACKGROUND),s=(0,el.Os)(),l=a&&o&&!s,c=a&&!s,d=(0,W.X7)();return i.createElement(C.fu,{name:"Image Settings Modal"},i.createElement(ew,{...e,isUI3:r,canUseRemoveBackground:l,isAiEnabled:c,insetImageSettings:d}))}class ew extends i.Component{constructor(e){super(e),this.onRotateClockwiseClick=()=>{this.props.onChange((0,x.Lt)(this.props.paint,90),G.zk.YES),m.l7.user("image-rotate-clockwise",()=>{p.glU.repairThumbnails()})},this.onScalingFactorChange=e=>{this.props.onChange({...this.props.paint,scale:e})},this.onPaintColorAdjustChange=(e,r,n)=>{let i={...this.props.paint.paintFilter,[e]:r};this.props.onChange({...this.props.paint,paintFilter:i},n?G.zk.YES:G.zk.NO),this.setState({forceThumbnailUpdate:n}),n&&E.az.trackDefinedEvent("ai_productivity.fills_panel_image_adjust_slider_updated",{sliderName:e,sliderValue:r?.toString()})},this.onGIFFrameChange=e=>{let r=Math.round(e);this.setState({animationFrameForScrubber:r,playing:!1})},this.onVideoTimeChange=e=>{this.setState({currentTimeForScrubber:e,playing:!1})},this.setGIFCoverFrame=e=>{if(!this.state.animatedFrameData){console.warn("No frame stored in state to update");return}let r=e??this.state.animationFrameForScrubber;if((null!=e||r!==this.props.paint.animationFrame)&&!this.props.updateStillImageAndSelectionPropertiesForGIF({...this.props.paint,animationFrame:r},this.state.animatedFrameData.data)){console.warn("Failed to update image");return}},this.setGIFPlaying=e=>{this.setState({playing:e})},this.setVideoPlaying=e=>{this.setState({playing:e})},this.onUpdateAnimatedFrameData=e=>{this.setState({animatedFrameData:e})},this.onUpdateCurrentTime=e=>{this.setState({currentTimeForScrubber:e})},this.setVideoDuration=e=>{this.setState({videoDuration:e})},this.uploadImagePaint=()=>{let e=this.props.paint.blendMode,r=this.props.paint.opacity;p.glU.uploadPaintImage(e,r)},this.uploadMediaPaint=()=>{let e=this.props.paint.blendMode,r=this.props.paint.opacity;p.glU.uploadPaintMedia(e,r)},this.waitingForGIF=!1,this.clearGIFContentRequest=()=>{this.waitingForGIF=!1},this.setupGIF=()=>{this.setState({animatedImage:null,animationFrameForScrubber:this.props.paint.animationFrame,playing:!1}),this.waitingForGIF=!0,eI(this.props.paint).then(e=>{this.waitingForGIF&&this.setState({animatedImage:(0,B.J)(e)})}).catch(e=>(0,v.$D)(a.e.FIGJAM,e))},this.loadVideoJs=async()=>{if(!this.state.videoJsLib){let e=await (0,T.Fe)();this.setState({videoJsLib:e})}},this.setupVideoJs=()=>{this.setState({currentTimeForScrubber:0,videoDuration:0,playing:!1,videoJsLib:null,isVideoLoaded:!1}),this.loadVideoJs()},this.setIsVideoLoaded=e=>{this.setState({isVideoLoaded:e})},this.setUserClickedVideoControls=e=>{this.setState({userClickedVideoControls:e})},this.imageButtonRef=i.createRef(),this.isAnimatedImage=()=>!!this.props.paint.animatedImage,this.isVideo=()=>!!this.props.paint.video||"VIDEO"===this.props.paint.type,this.isDragTarget=()=>!0,this.onDragEnter=()=>{this.setState({isDragHover:!0})},this.onDragLeave=()=>{this.setState({isDragHover:!1})},this.onDrop=e=>{this.setState({isDragHover:!1});let r=this.props.paint.blendMode,n=this.props.paint.opacity;this.props.dropImageOnPaintThumbnail(r,n,e)},this.onImageButtonCointainerMouseOver=()=>{this.setState({isPreviewHover:!0})},this.onImageButtonCointainerMouseOut=()=>{this.setState({isPreviewHover:!1})},this.onImageButtonFocus=()=>{this.setState({isImageButtonFocused:!0})},this.onImageButtonBlur=()=>{this.setState({isImageButtonFocused:!1})},this.onEditImageClick=()=>{(0,ei.B3)(en.JT.EDIT_IMAGE),scheduler.postTask(()=>{(0,eo.$I)({moduleToOpen:{type:"custom",module:i.createElement(es.T,null),name:ea.Sn.EDIT_IMAGE},trackingData:{source:"image_settings"}})})},this.state={isDragHover:!1,isPreviewHover:!1,isImageButtonFocused:!1,forceThumbnailUpdate:!1,animatedImage:null,animatedFrameData:null,animationFrameForScrubber:e.paint.animationFrame||0,currentTimeForScrubber:0,videoDuration:0,playing:!1,videoJsLib:null,isVideoLoaded:!1,userClickedVideoControls:!1}}componentDidMount(){if(this.isAnimatedImage()?this.setupGIF():this.isVideo()&&this.setupVideoJs(),(0,er.qF)()&&!this.isAnimatedImage()&&!this.isVideo()){let e=y.D.getState();(0,D.ds)("bg_removal_available",e.openFile?.key,e,{source:"image_settings_panel"})}(0,h.k)().accessible_chits&&this.imageButtonRef?.current?.focus()}UNSAFE_componentWillReceiveProps(e){this.props.paint.animationFrame!==e.paint.animationFrame&&this.setState({animationFrameForScrubber:e.paint.animationFrame})}componentDidUpdate(e){let r=null!=e.paint.animatedImage,n=null!=this.props.paint.animatedImage;!r&&n?this.setupGIF():r&&n?eT(e.paint.animatedImage.hash,this.props.paint.animatedImage.hash)||this.setupGIF():r&&!n&&this.clearGIFContentRequest(),"STRETCH"===this.props.paint.imageScaleMode&&(0,w.YQ)({id:"Image panel has cropped image"})}componentWillUnmount(){this.setVideoPlaying(!1),this.clearGIFContentRequest()}renderInlinePreview(){let e=this.props.insetImageSettings?208:ev,r=this.props.insetImageSettings?208:152;return this.isVideo()?i.createElement(Y.A,{className:em.IP,currentTime:this.state.currentTimeForScrubber,height:r,imagePaint:this.props.paint,isVideoLoaded:this.state.isVideoLoaded,onUpdateCurrentTime:this.onUpdateCurrentTime,openFileKey:this.props.openFileKey,playing:this.state.playing,setDuration:this.setVideoDuration,setIsVideoLoaded:this.setIsVideoLoaded,setPlaying:this.setVideoPlaying,setUserClickedControls:this.setUserClickedVideoControls,userClickedControls:this.state.userClickedVideoControls,videoJsLib:this.state.videoJsLib,width:e}):this.isAnimatedImage()?i.createElement(z.Y,{imagePaint:this.props.paint,width:e,height:r,className:em.km,animatedImage:this.state.animatedImage,animationFrame:this.state.animationFrameForScrubber,onUpdateFrameData:this.onUpdateAnimatedFrameData,playing:this.state.playing}):i.createElement($.K,{imagePaint:this.props.paint,width:e,height:r,className:em.km,forceUpdate:this.state.forceThumbnailUpdate})}renderMediaControls(){if(this.isVideo()){if(!(0,V.canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED)())return i.createElement(Z.c,null);if(this.props.paint.video)return i.createElement(ep.P,{paint:this.props.paint,currentTime:this.state.currentTimeForScrubber||0,duration:this.state.videoDuration,onVideoTimeChange:this.onVideoTimeChange,disabled:null==this.props.paint.video,isVideoLoaded:this.state.isVideoLoaded,setPlaying:this.setVideoPlaying,playing:null!=this.props.paint.video&&this.state.playing,setUserClickedControls:this.setUserClickedVideoControls})}else if(this.isAnimatedImage())return i.createElement(ec.F,{paint:this.props.paint,animationFrame:this.state.animationFrameForScrubber||0,numFrames:this.state.animatedImage?this.state.animatedImage.numFrames():null,onGIFFrameChange:this.onGIFFrameChange,disabled:null==this.state.animatedImage,setPlaying:this.setGIFPlaying,playing:null!=this.state.animatedImage&&this.state.playing,setGIFCoverFrame:this.setGIFCoverFrame});else return i.createElement(i.Fragment,null,this.props.isAiEnabled&&(0,h.k)().aip_edit_image&&i.createElement("div",{className:"x1xk1jr8"},i.createElement(o.IK,{onClick:this.onEditImageClick,variant:"secondary"},i.createElement("div",{className:"x78zum5 x6s0dn4 xl56j7k"},i.createElement(c.T,null),(0,A.tx)("fullscreen_actions.edit_image")))),i.createElement(C.fu,{name:"Color Adjust Sliders"},i.createElement("div",{className:f()(em.Vq,{[em.oc]:this.props.insetImageSettings})},["exposure","contrast","vibrance","temperature","tint","highlights","shadows"].map(e=>i.createElement(eL,{key:e,propertyName:e,onChange:this.onPaintColorAdjustChange,filterColorAdjust:this.props.paint.paintFilter,min:"contrast"===e?-.3:-1,max:"contrast"===e?.3:1,recordingKey:b.Pt(this.props,e)})))))}render(){let e=this.isVideo(),r=(0,V.canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED)(),n=(0,er.qF)()&&!this.isVideo()&&!this.isAnimatedImage()&&this.props.isUI3&&this.props.canUseRemoveBackground&&!this.props.paint.image?.name.includes(eu.LO),a=(0,h.k)().aip_buttercup&&(0,er.qF)()&&!this.isVideo()&&!this.isAnimatedImage()&&this.props.isUI3&&this.props.isAiEnabled,l=this.props.insetImageSettings?208:ev,c=this.props.insetImageSettings?208:152,p=(m=this.props.paint,!!(0,x.y7)(m)&&m.image&&"Checker"===m.image.name);var m,_=(this.state.isPreviewHover||this.state.isImageButtonFocused||p?em.rv:em.ZS)+(this.state.isDragHover?" "+em.mw:"");e&&!r&&(_=em.ZS);let g=i.createElement(i.Fragment,null,i.createElement(eC,{...this.props,recordingKey:b.Pt(this.props,"imageScale")}),"TILE"===this.props.paint.imageScaleMode&&i.createElement(eN,{className:f()({[em.GA]:!this.props.insetImageSettings,[em.b_]:this.props.insetImageSettings}),value:"TILE"!==this.props.paint.imageScaleMode?1:this.props.paint.scale,onChange:this.onScalingFactorChange,recordingKey:b.Pt(this.props,"scalingFactor")})),E=i.createElement("span",{className:f()({[em.ZM]:!this.props.insetImageSettings})},i.createElement(j.$O,{paint:this.props.paint,showRemoveBackground:n})),y=i.createElement(s.K,{onClick:()=>(0,j.I3)(this.props.paint),"aria-label":(0,A.t)("fullscreen.properties_panel.remove_background"),recordingKey:b.Pt(this.props,"removeBackground"),htmlAttributes:{"data-tooltip":(0,A.t)("fullscreen.properties_panel.remove_background"),"data-tooltip-type":H.Ib.TEXT,"data-tooltip-show-above":!0}},i.createElement(S.U,{svg:e_.A},i.createElement(d.$,null))),v=i.createElement("span",{className:f()({[em.Ts]:!this.props.insetImageSettings})},i.createElement(s.K,{onClick:this.onRotateClockwiseClick,"aria-label":(0,A.t)("fullscreen.properties_panel.rotate_90"),recordingKey:b.Pt(this.props,"rotateClockwise"),htmlAttributes:{"data-tooltip":(0,A.t)("fullscreen.properties_panel.rotate_90"),"data-tooltip-type":H.Ib.TEXT}},i.createElement(S.U,{svg:eg.A},i.createElement(u.R,null))));return i.createElement(J.Id,{className:f()({[em.G3]:this.props.insetImageSettings})},this.props.insetImageSettings?i.createElement("div",{className:em.C0,"data-onboarding-key":ef},i.createElement("div",{className:em.Fu},g),i.createElement("div",{className:em.D3},a&&E,!(0,h.k)().aip_buttercup&&n&&y,v)):i.createElement(J.fI,{"data-onboarding-key":ef},g,a&&E,!(0,h.k)().aip_buttercup&&n&&i.createElement("span",{className:em.Yw},y),v),i.createElement(I.Y,{className:f()(_,{[em.ho]:this.props.insetImageSettings}),style:{backgroundImage:`url('${(0,P.A)()}')`},isDragTarget:this.isDragTarget,onMouseOver:this.onImageButtonCointainerMouseOver,onMouseOut:this.onImageButtonCointainerMouseOut,onTargetDragEnter:this.onDragEnter,onTargetDragLeave:this.onDragLeave,onTargetDrop:this.onDrop,recordingKey:b.Pt(this.props,"dropTarget")},i.createElement("div",{className:f()({[em.mQ]:!this.props.insetImageSettings||this.props.insetImageSettings&&p})},this.renderInlinePreview(),i.createElement("div",{className:em.dW,style:{width:l,height:c}},e&&r&&i.createElement("span",{className:em.QY},i.createElement(o.$n,{onClick:this.uploadMediaPaint,htmlAttributes:{onFocus:this.onImageButtonFocus,onBlur:this.onImageButtonBlur},variant:"secondary",ref:this.imageButtonRef},(0,A.tx)("fullscreen.properties_panel.choose_video"))),!e&&i.createElement(ed.A,{onImageButtonBlur:this.onImageButtonBlur,onImageButtonFocus:this.onImageButtonFocus,uploadImagePaint:this.uploadImagePaint,isInset:this.props.insetImageSettings,imageButtonRef:this.imageButtonRef})))),this.renderMediaControls(),this.isAnimatedImage()&&i.createElement(X.u,{title:(0,A.t)("fullscreen.properties_panel.gifs_in_figma_prototypes"),icon_DEPRECATED:eh.A,userFlag:"dismissed_gifs_cover_frame_hint",hintText:(0,A.t)("fullscreen.properties_panel.choose_which_frame_displayed")}))}}ew.displayName="ImageSettingsModal";let eA=["FILL","FIT","STRETCH","TILE"];class eC extends i.PureComponent{constructor(){super(...arguments),this.imageScaleModeFormatter=new L.D,this.onImageScaleModeChange=e=>{"STRETCH"===e?M.Y5.triggerActionInUserEditScope("crop-image"):this.props.onChange({...this.props.paint,imageScaleMode:e})}}render(){let e=eA.map((e,r)=>i.createElement(ey,{key:r,value:e,recordingKey:b.Pt(this.props,e)}));return i.createElement(eE,{id:"image-scale-mode-select",className:f()({[em.Nd]:!this.props.insetImageSettings,[em.ak]:this.props.insetImageSettings}),property:this.props.paint.imageScaleMode,onChange:this.onImageScaleModeChange,formatter:this.imageScaleModeFormatter,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,onMouseDown:O.dG,recordingKey:this.props.recordingKey},e)}}eC.displayName="ImageScaleSelection";class eN extends i.PureComponent{constructor(){super(...arguments),this.formatter=new N.LN({min:.01,max:100})}render(){return i.createElement(q.Q7,{className:this.props.className,formatter:this.formatter,property:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange,recordingKey:this.props.recordingKey})}}function eL({min:e=-1,max:r=1,propertyName:n,...a}){let o=(0,i.useId)(),s=(0,W.X7)();return i.createElement(J.fI,null,i.createElement("div",{id:o,className:em.tx},function(e){switch(e){case"exposure":return(0,A.t)("fullscreen.properties_panel.exposure");case"contrast":return(0,A.t)("fullscreen.properties_panel.contrast");case"vibrance":return(0,A.t)("fullscreen.properties_panel.saturation");case"temperature":return(0,A.t)("fullscreen.properties_panel.temperature");case"tint":return(0,A.t)("fullscreen.properties_panel.tint");case"highlights":return(0,A.t)("fullscreen.properties_panel.highlights");case"shadows":return(0,A.t)("fullscreen.properties_panel.shadows")}}(n)),i.createElement("div",{className:f()(em.CD,{[em.Wf]:s})},i.createElement(l.A,{"aria-labelledby":o,bigStep:.1,defaultValue:0,hints:[0],htmlAttributes:{onKeyDownCapture:e=>{M.Y5.isReady()&&(0,k.f7)(e)}},max:r,min:e,onChange:(e,{commit:r})=>{a.onChange(n,e,r)},rangeAnchor:0,recordingKey:a.recordingKey,step:.01,value:a.filterColorAdjust?.[n]||0})))}eN.displayName="ScalingFactorInputs"},881069:(e,r,n)=>{n.d(r,{A:()=>w});var i=n(848318),a=n(716544),o=n(356505),s=n(546540),l=n(157907),c=n(536384),d=n.n(c),u=n(266163),p=n(442313),m=n(449737),h=n(268904),_=n(542143),g=n(257628),f=n(199445),E=n(386502),y=n(677657),b=n(449345),v=n(257024),T=n(468425),I=n(119782);function S({uploadImagePaint:e,recordingKey:r,isInset:n,imageButtonRef:c,disableAi:u=!1}){let{close:h}=(0,E.cq)(),S=(0,T.sO)(),w=(0,a.wA)(),A=(0,_.PE)();return i.createElement("div",{className:d()(I.sn,{[I.Xb]:n})},i.createElement(o.IK,{onClick:e,recordingKey:r,ref:c},S?(0,p.tx)("slides.properties_panel.replace_media"):(0,p.tx)("fullscreen.properties_panel.image_settings.upload_new")),A&&!(0,l.k)().aip_disable_ai_make_images&&!u&&i.createElement("div",{className:I.zr},i.createElement(o.IK,{onClick:()=>{h(),(0,f.B3)(g.JT.GENERATE_IMAGE),scheduler.postTask(()=>{(0,b.$I)({moduleToOpen:{type:"custom",module:i.createElement(v.A,null),name:y.Sn.GENERATE_IMAGE},trackingData:{source:"image_settings_swap_image_generate_new"}}),w(m.Ce())})},iconPrefix:i.createElement(s.T,null),variant:"secondary"},(0,p.tx)("fullscreen.properties_panel.image_settings.generate_new"))))}function w({uploadImagePaint:e,imageButtonRef:r,isInset:n,onImageButtonBlur:a,onImageButtonFocus:o,disableAi:s=!1}){return(0,h.R)()?i.createElement(S,{uploadImagePaint:e,isInset:n,imageButtonRef:r,disableAi:s}):i.createElement(u.nR,{className:I.QY,onFocus:o,onBlur:a,onClick:e},(0,p.tx)("fullscreen.properties_panel.choose_image"))}},461758:(e,r,n)=>{n.d(r,{bU:()=>s});var i=n(848318),a=n(716544),o=n(487497);function s(){let[e,r]=function(){let e=(0,a.d4)(e=>e.mirror.sceneGraph),r=(0,o.Vr)(),n=(0,a.d4)(e=>e.mirror.selectionProperties.masterSymbolGUID);if(!r||!r.isAlive)return[null,null];if(r?.isStateGroup)return[null,r??null];if(r?.type==="SYMBOL"||r?.type==="INSTANCE"){let i=r??null;if(r?.type==="INSTANCE"&&(i=n?e.get(n):null),!i)return[null,null];if(!i?.isState)return[i??null,null];let a=i?.parentGuid?e.get(i?.parentGuid):null;return[i??null,a?.isStateGroup?a:null]}return[null,null]}(),n=i.useMemo(()=>{let n=e?.symbolLinks?.filter(e=>e.uri).map(e=>e)||[];if(n.length>0)return n;let i=r?.symbolLinks?.filter(e=>e.uri).map(e=>e)||[];if(i.length>0)return i},[e,r]),s=e?.description,l=r?.description,c=s&&l?l+"\n\n"+s:s||l;return i.useMemo(()=>({links:n,description:c}),[n,c])}},812626:(e,r,n)=>{n(921494)},405817:(e,r,n)=>{n.d(r,{A3:()=>ex,LI:()=>eN,N5:()=>eM,SV:()=>eD,hD:()=>eA});var i=n(848318),a=n(716544),o=n(551316),s=n(133696),l=n(960955),c=n(596616),d=n(679334),u=n(475020),p=n(897378),m=n(565460),h=n(792760),_=n(970905),g=n(411132),f=n(649372),E=n(622876),y=n(741419),b=n(157907),v=n(39773),T=n(508242),I=n(536384),S=n.n(I),w=n(579020),A=n(303035),C=n(654104),N=n(63370),L=n(687012),O=n(701780),R=n(55084),P=n(566699),D=n(442313),M=n(712041),k=n(667323),F=n(947625),x=n(604613),U=n(360399),B=n(584305),V=n(727341),G=n(992444),H=n(972350),K=n(933270),W=n(655293),z=n(517546),$=n(576602),Y=n(789269),j=n(718451),q=n(104720),X=n(24096),Z=n(279531),J=n(661458),Q=n(483372),ee=n(503024),et=n(651620),er=n(979855),en=n(147147),ei=n(665665),ea=n(924283),eo=n(208891),es=n(965756),el=n(931077),ec=n(130309),ed=n(256429),eu=n(302839),ep=n(786825),em=n(416445),eh=n(678517),e_=n(257628),eg=n(199445),ef=n(217682),eE=n(233758),ey=n(611808),eb=n(843487),ev=n(684927),eT=n(85206),eI=n(580012),eS=n(415431);function ew(e){let r=!1,n=!1,i=!1;for(let a of e)(0,eb.O)(a)&&"CONTENT_SCALE"===a.constraint.type?(1===a.constraint.value&&(r=!0),2===a.constraint.value&&(n=!0),3===a.constraint.value&&(i=!0)):r=!0;let a={contentsOnly:!0,imageType:"PNG",constraint:{type:"CONTENT_SCALE",value:1},suffix:"",useAbsoluteBounds:!1,useBicubicSampler:!!(0,b.k)().bicubic_image_sampler&&!(0,b.k)().swap_image_sampling_default_export_setting,colorProfile:"DOCUMENT"};return r&&(n?i||(a.constraint.value=3,a.suffix="@3x"):(a.constraint.value=2,a.suffix="@2x")),a}function eA(){return(0,a.d4)(e=>{let r=e.mirror.selectionProperties.numSelected,n=e.mirror.selectionProperties.exportSettings,i=e.mirror.selectionProperties.name;return 1===r&&n&&(0,j.hS)(n)&&n.length>0&&null!=i?i.slice(0,64):""})}let eC=class e extends i.PureComponent{constructor(e){super(e),this.exportList=(0,T.xx)(e=>(0,j._W)(e,[]).map(eb.m)),this.onExportChange=(e,r)=>{let n=0===e.length,i=n?Q.zk.NO:r;G.Y5.updateSelectionProperties({exportSettings:e},{shouldCommit:i}),n&&(G.Y5.updateSelectionProperties({exportBackgroundDisabled:!1},{shouldCommit:r}),this.setState({isRenameLayersEnabled:!1}))},this.addProperty=e=>{let r=this.exportList(this.props.exportSettings),n=ew(r);this.onExportChange(r.concat([n])),this.props.onAddClick?.()&&e.stopPropagation(),(0,w.sx)("editor-export-panel-add",{selectionIsCanvas:0===this.props.numSelected})},this.addExportOfType=e=>{let r=this.exportList(this.props.exportSettings),n=ew(r);if("PNG"===e){this.onExportChange(r.concat([n]));return}let i=this.onExportChange.bind(this);eB(n,e,function(e){i(r.concat([e]))})},this.onClickExport=async()=>{if((0,w.sx)("Export Panel Export Clicked"),0===this.props.numSelected)(0,w.sx)("Export Picker Opened",{from:"export-panel"}),this.props.dispatch(k.u1({id:x.C9}));else{this.state.isRenameLayersEnabled&&await this.autoRenameFrameOnExport();let e=(0,j._W)(this.props.exportSettings,[]),r=e.filter(e=>!0===e.useBicubicSampler),n=e.filter(e=>!1===e.useBicubicSampler);w.az.trackDefinedEvent("rendering_and_animation.exported_export_setting_bicubic",{bicubicCount:r.length,nearestNeighborCount:n.length});let i=[this.props.currentPage];Y.xY.includeOutsideContents(e)||(i=Object.keys(this.props.sceneGraphSelection)),(0,J.Dc)(J.hV.Export,this.props.saveAsState,this.props.dispatch,"export-selected-exportables-direct",i,"export-selected-exportables-direct"),this.props.dispatch(M.rg())}},this.shouldShowAIRenameLayersCheckbox=e=>(0,$.A0)(y.uQ6.EXPORT_FRAME)&&(e>0||(0,j.gl)(this.props.exportSettings))&&(this.props.isSelectionRenamable||this.state.isRenameLayersRunning),this.autoRenameFrameOnExport=async()=>{this.props.isSelectionRenamable&&(this.setState({isRenameLayersRunning:!0}),v.zl.set(ef.zF,(0,z.Tr)(y.uQ6.EXPORT_FRAME)),(0,eg.B3)(e_.JT.AUTO_RENAME_LAYERS),await (0,eg.Ag)(e_.JT.AUTO_RENAME_LAYERS,z.Ay,{source:y.uQ6.EXPORT_FRAME,overwriteNames:!1,ignoreDescendants:!0}),this.setState({isRenameLayersRunning:!1,isRenameLayersEnabled:!1}))},this._checkboxAndButtonRow=new Z.H4(()=>{let e="";if(0===this.props.numSelected||null==this.props.numSelected){let{title:r}=(0,W.vk)("CANVAS","",this.props.openFile?.name||(0,D.t)("fullscreen.fullscreen_view_selector.untitled"),[]);e=(0,D.t)("fullscreen.properties_panel.export_title",{title:r})}else if(1===this.props.numSelected){let{title:r}=(0,W.vk)("RECTANGLE",this.props.singleNodeName,"",[]);e=this.props.standalone?(0,D.t)("fullscreen.properties_panel.export"):(0,D.t)("fullscreen.properties_panel.export_title",{title:r})}else e=(0,D.t)("fullscreen.properties_panel.export_this_props_num_selected_layers",{numSelected:this.props.numSelected});return i.createElement(ec.z,{onClick:this.onClickExport,key:"export-button",recordingKey:C.Pt(this.props,"export"),disabled:!!this.state.isRenameLayersRunning},i.createElement(R.ph,{text:this.state.isRenameLayersRunning?(0,D.t)("fullscreen.properties_panel.export_generating_name"):e,tooltipPropsWhenTruncated:{"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":e}}))}),this._shouldRenderPreviewThumbnail=()=>(0,j._W)(this.props.exportSettings,[]).length>0,this._previewThumbnail=new Z.H4(()=>{let e=this.props.exportSettings,r=e[0].useAbsoluteBounds||!1,n=e[0].useBicubicSampler||!1;return i.createElement(K.ZH,null,({documentExportColorProfile:e})=>i.createElement(eH,{key:"preview",colorProfile:this.props.exportSettings&&!(0,j.gl)(this.props.exportSettings)?(0,H.A)(this.props.exportSettings,e):e,currentPage:this.props.currentPage,numSelected:this.props.numSelected,panelWidth:this.props.panelWidth,recordingKey:C.Pt(this.props,"previewThumbnail"),sceneGraphSelection:this.props.sceneGraphSelection,shouldComputeThumbnails:this._shouldRenderPreviewThumbnail,useAbsoluteBounds:r,useBicubicSampler:n}))}),this.state={isRenameLayersRunning:!1,isRenameLayersEnabled:this.getRenameLayersCheckboxStatusForSelection(e.sceneGraphSelection)}}singleNodeIdFrom(e){let r=Object.keys(e);if(1===r.length)return r[0]}getRenameLayersCheckboxStatusForSelection(r){let n=this.singleNodeIdFrom(r);return!!n&&e.renameLayersCheckedForNode.has(n)}componentDidUpdate(r,n){if(this.props.sceneGraphSelection===r.sceneGraphSelection)return;let i=this.singleNodeIdFrom(r.sceneGraphSelection);i&&(n.isRenameLayersEnabled?e.renameLayersCheckedForNode.add(i):e.renameLayersCheckedForNode.delete(i)),this.setState({isRenameLayersEnabled:this.getRenameLayersCheckboxStatusForSelection(this.props.sceneGraphSelection)})}render(){let e=this.props.openFile&&(0,X.Pe)(this.props.openFile),r=this.exportList(this.props.exportSettings);return i.createElement(L.k,{name:"export_panel"},i.createElement(ed.Zk,{className:S()({[ev.IN]:this.props.standalone,[ev.hi]:this.props.standalone&&0===r.length})},e?i.createElement("div",{className:ev.r9},i.createElement(ed.xw,{doNotReserveSpaceForChevron:!0,className:ev.dK},i.createElement(m.s,{className:ev.WO}),(0,D.tx)("fullscreen.properties_panel.export_disabled")),i.createElement(ed.JU,{className:ev.SO},i.createElement("span",null,(0,D.tx)("fullscreen.properties_panel.this_file_s_editor_has_disabled_exporting_copying_and_sharing.seat_rename")))):i.createElement(i.Fragment,null,i.createElement(eO,{addProperty:this.addProperty,currentSelectedProperty:this.props.currentSelectedProperty,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,entrypointMenu:i.createElement(ey.n3,{addExportOfType:this.addExportOfType}),headerClickTriggersAddProperty:this.props.headerClickTriggersAddProperty,isMixed:(0,j.gl)(this.props.exportSettings),isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom,onChange:this.onExportChange,onHeaderClick:r.length>0?this.props.onHeaderClick:A.lQ,openFile:this.props.openFile,pickerShown:this.props.pickerShown,propertyList:r,recordingKey:C.Pt(this.props,"exportList"),selectedPropertyType:y.rrT.EXPORT,standalone:this.props.standalone,title:this.props.title}),i.createElement(en.JH,{isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom||null},this._checkboxAndButtonRow.render({isVisible:r.length>0||(0,j.gl)(this.props.exportSettings)}),this.shouldShowAIRenameLayersCheckbox(r.length)&&i.createElement(eh.Ad,{label:null,input:i.createElement(l.S,{muted:!0,checked:this.state.isRenameLayersEnabled,onChange:()=>{this.setState({isRenameLayersEnabled:!this.state.isRenameLayersEnabled})},label:i.createElement(c.J,null,i.createElement("div",{className:ev.oB},(0,D.tx)("auto_rename_layers.rename_layers",{numLayers:this.props.numSelected}),i.createElement(eE.y,{helpUrlVariant:e_.JT.AUTO_RENAME_LAYERS})))})}),this._previewThumbnail.render({isVisible:this._shouldRenderPreviewThumbnail()})))))}};eC.notifierName="ExportNotifier",eC.renameLayersCheckedForNode=new Set,eC.isSelectionRenamable=e=>{let{detectedUnnamedLayers:r,exceedingLayerLimit:n}=(0,$.Mc)(e,!0);return r&&!n};let eN=eC;function eL(e){let{selectionHandler:r}=e,n=i.useRef(null),a=(0,V.GS)();return i.createElement("div",{className:ev.fj},i.createElement(eo.MX,{selection:r,onChange:e.onChange,addProperty:e.addProperty,overrideAddPropertyTooltip:a?(0,D.t)("fullscreen.properties_panel.section_exports.tooltip_addExportSettings"):void 0,isStylesPickerShown:!!e.pickerShown,showRemoveButton:!a,recordingKey:e.recordingKey,parent:n},i.createElement(er.a,{title:e.title,ref:n})))}function eO(e){let r=(0,a.wA)(),{selectedPropertyType:n,dropdownShown:o,pickerShown:s,onChange:l,propertyList:c}=e,d=C.c1(e),u=(0,j._W)(e.propertyList,[]).length<=1,p=(0,V.GS)(),m=i.useCallback(e=>{r(k.XE()),l((0,j._W)(c,[]).filter((r,n)=>n!==e)),G.Y5.deselectProperty()},[r,l,c]),h=i.useCallback((e,a,l,c,p,h,_,g,f)=>i.createElement(eV,{key:`export-${a}`,dispatch:r,dropdownShown:o,exportSetting:e,hasFocus:p,id:`${n}-${a}`,index:a,isDragging:c,onChange:h,onMouseDown:_,onMouseMove:g,onMouseUp:f,onRemoveExport:()=>m(a),pickerShown:s,recordingKey:d(a),selected:l,selectedPropertyType:n,singletonRow:u}),[n,u,r,o,s,d,m]),_=e.standalone?i.memo(r=>i.createElement(eL,{...e,...r})):void 0;return i.createElement(eo.h6,{addProperty:e.addProperty,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,entrypointMenu:e.entrypointMenu,headerClickTriggersAddProperty:e.headerClickTriggersAddProperty,isMixed:e.isMixed,isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom,onChange:e.onChange,onHeaderClick:e.onHeaderClick,openFile:e.openFile,overrideAddPropertyTooltip:p?(0,D.t)("fullscreen.properties_panel.section_exports.tooltip_addExportSettings"):void 0,pickerShown:e.pickerShown,propertyList:e.propertyList,recordingKey:e.recordingKey,renderHeader:e.standalone?_:void 0,renderProperty:h,selectedPropertyType:e.selectedPropertyType,showRemoveButton:!p,stylePickerShown:{isShown:!1},title:e.title||(0,D.t)("fullscreen.properties_panel.export")})}eO.displayName="ExportList";class eR extends ei.a3{}class eP extends eu.c${}let eD=eu.l6,eM=eu.c$,ek=[{type:"CONTENT_SCALE",value:.5},{type:"CONTENT_SCALE",value:.75},{type:"CONTENT_SCALE",value:1},{type:"CONTENT_SCALE",value:1.5},{type:"CONTENT_SCALE",value:2},{type:"CONTENT_SCALE",value:3},{type:"CONTENT_SCALE",value:4},{type:"CONTENT_WIDTH",value:512},{type:"CONTENT_HEIGHT",value:512}],eF=new U.mz,ex={format:e=>{switch(e){case"PNG":return"PNG";case"JPEG":return"JPG";case"SVG":return"SVG";case"PDF":return"PDF"}}};function eU({id:e,recordingKey:r,exportSetting:n,pickerShown:o,dropdownShown:s,onConstraintChange:l,onImageTypeChange:m,onSuffixChange:g,onToggleModal:f,onRemoveExport:E}){let y=C.c1(r),v=(0,a.wA)(),T=(0,V.GS)(),I=(0,b.k)().fpl_select_migration,w=ek.map((e,r)=>i.createElement(eP,{key:r,value:e,recordingKey:y("constraints",e.value)})),{recordingKey:A,...L}={onClick:f,onMouseDown:B.dG,recordingKey:y("settings"),"data-tooltip":(0,D.t)("fullscreen.export_panel.export_settings"),"data-tooltip-type":ee.Ib.TEXT};return i.createElement(i.Fragment,null,i.createElement(N.E,{name:"export_constraint_combo_box"},i.createElement(ei.ow,{value:{select:T?ep.pW:void 0,inputComponent:T?ep.gm:void 0}},i.createElement(eu.tV,{value:{chevron:T?em.t:void 0}},i.createElement(eR,{className:S()(ev.QU,T?ev.AL:void 0),disabled:"SVG"===n.imageType||"PDF"===n.imageType,dispatch:v,dropdownClassName:ev.J9,dropdownShown:s,formatter:eF,id:`export-constraint-${e}`,inputClassName:T?ev.Ez:void 0,isTokenizable:T,onChange:l,onMouseDown:B.dG,property:n.constraint,recordingKey:y("contraints")},w)))),!T&&i.createElement(el.lq,{value:n.suffix,suffixClassName:ev.ei,onSuffixChange:g,recordingKey:y("suffix")}),i.createElement(N.E,{name:"export_image_type_select"},I?i.createElement(d.bL,{value:n.imageType,onChange:m,recordingKey:y("imageType")},i.createElement(d.l9,{width:"fill",label:i.createElement(c.h,null,(0,D.t)("fullscreen.properties_panel.export_settings_image_file_type"))}),i.createElement(d.mc,null,i.createElement(d.c$,{value:"PNG"},"PNG"),i.createElement(d.c$,{value:"JPEG"},"JPEG"),i.createElement(d.c$,{value:"SVG"},"SVG"),i.createElement(d.c$,{value:"PDF"},"PDF"))):i.createElement(eD,{chevronClassName:ev.tc,className:ev.wm,dispatch:v,dropdownClassName:ev.PK,dropdownShown:s,formatter:ex,id:`export-image-type-${e}`,inputClassName:ev.SL,onChange:m,onMouseDown:B.dG,property:n.imageType,recordingKey:y("imageType")},i.createElement(eM,{value:"PNG",recordingKey:y("imageType","png")}),i.createElement(eM,{value:"JPEG",recordingKey:y("imageType","jpeg")}),i.createElement(eM,{value:"SVG",recordingKey:y("imageType","svg")}),i.createElement(eM,{value:"PDF",recordingKey:y("imageType","pdf")}))),i.createElement(N.E,{name:"toggle_export_settings_modal_button"},i.createElement("span",{className:ev.uX},i.createElement(u.d,{"aria-expanded":!!o,"aria-label":(0,D.t)("fullscreen.export_panel.export_settings"),recordingKey:A,htmlAttributes:{...L,"data-test-id":"toggle-export-settings-modal-button"}},i.createElement(P.U,{svg:eI.A,fallbackSvg:eS.A},i.createElement(h.J,null))))),T&&!!E&&i.createElement(N.E,{name:"remove_export_button"},i.createElement(p.K,{onClick:E,"aria-label":(0,D.t)("fullscreen.properties_panel.tooltip_remove"),recordingKey:y("removeButton"),htmlAttributes:{onMouseDown:B.dG,"data-tooltip":(0,D.t)("fullscreen.properties_panel.tooltip_remove"),"data-tooltip-type":ee.Ib.TEXT}},i.createElement(_.O,null))))}function eB(e,r,n){r!==e.imageType&&("PNG"===r?n({imageType:r,contentsOnly:e.contentsOnly,colorProfile:e.colorProfile,useAbsoluteBounds:e.useAbsoluteBounds,useBicubicSampler:e.useBicubicSampler,suffix:e.suffix,constraint:e.constraint}):"JPEG"===r||"PDF"===r?n({imageType:r,contentsOnly:e.contentsOnly,colorProfile:e.colorProfile,useAbsoluteBounds:e.useAbsoluteBounds,useBicubicSampler:e.useBicubicSampler,suffix:e.suffix,constraint:"PDF"===r?{type:"CONTENT_SCALE",value:1}:e.constraint,quality:"PDF"===r?es.JI:es.Ho}):"SVG"===r&&n({imageType:r,contentsOnly:e.contentsOnly,colorProfile:e.colorProfile,useBicubicSampler:e.useBicubicSampler,suffix:e.suffix,constraint:{type:"CONTENT_SCALE",value:1},svgIDMode:"IF_NEEDED",svgOutlineText:!0,svgForceStrokeMasks:!1,useAbsoluteBounds:e.useAbsoluteBounds}))}function eV(e){let r=i.useRef(null),n=r=>{e.onChange({...e.exportSetting,suffix:r})},a=()=>e.pickerShown&&e.pickerShown.id===e.id?e.pickerShown:null,o=a(),{version:s}=(0,E.DP)(),l="ui3"===s,c=l?i.Fragment:"div",d=l?ev.v_:void 0;return i.createElement(c,null,i.createElement(ea.e,{ref:r,className:d,dragging:e.isDragging,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,recordingKey:e.recordingKey,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,singletonRow:e.singletonRow},i.createElement(eU,{dropdownShown:e.dropdownShown,exportSetting:e.exportSetting,id:e.id,onConstraintChange:r=>{e.onChange({...e.exportSetting,constraint:r})},onImageTypeChange:r=>{eB(e.exportSetting,r,e.onChange)},onRemoveExport:e.onRemoveExport,onSuffixChange:n,onToggleModal:n=>{if(n.stopPropagation(),a())e.dispatch(k.XE()),G.Y5.deselectProperty();else{let n=(0,et.cn)(r.current,el.zk);G.Y5.updateAppModel({currentSelectedProperty:{type:e.selectedPropertyType,indices:[e.index]}}),e.dispatch(k.u1({id:e.id,initialX:n.x,initialY:n.y})),e.dispatch(F.sw())}},pickerShown:o,recordingKey:e.recordingKey})),o&&i.createElement(el.Tq,{exportSettings:e.exportSetting,onChange:e.onChange,pickerShown:o,dispatch:e.dispatch,recordingKey:C.Pt(e,"settings"),dropdownShown:e.dropdownShown,onSuffixChange:n,suffixClassName:ev.ei,isUI3:l}))}function eG(e){return i.createElement("div",{className:e.className||ev.cT},i.createElement("img",{src:e.thumbnail.src,width:e.thumbnail.displaySize.x,height:e.thumbnail.displaySize.y,alt:"preview of layer to be exported"}))}class eH extends i.PureComponent{constructor(e){super(e),this.toggleShown=()=>{this.setState({previewShown:!this.state.previewShown})},this.updateThumbnail=()=>{if(!this.state.previewShown||!this.props.shouldComputeThumbnails())return;let e=new O.Mi(this.props.panelWidth-30,this.props.panelWidth-30),r=q.WQ(e,this.props.useAbsoluteBounds,!!this.props.useBicubicSampler),n=null;r&&r.pixels&&r.pixelSize&&r.displaySize&&(n={src:q.Pv(r.pixels,r.pixelSize,this.props.colorProfile),displaySize:r.displaySize}),this.setState({thumbnail:n})},this.updateThumbnailAfterDelay=(0,o.s)(()=>this.updateThumbnail(),1e3),this.onSceneGraphChange=()=>{null!=this.state.previewGUID&&this.updateThumbnailAfterDelay()},this.state={previewIsCanvas:!0,previewGUID:null,previewShown:!1,thumbnail:null}}componentDidUpdate(e,r){e.colorProfile!==this.props.colorProfile&&(this.setState({thumbnail:null}),this.updateThumbnailAfterDelay.cancel(),this.updateThumbnail());let n=!r.previewShown&&this.state.previewShown,i=e.panelWidth!==this.props.panelWidth;if(this.props.sceneGraphSelection===e.sceneGraphSelection&&!n&&!i)return;let a=this.props.sceneGraphSelection,o=this.props.numSelected;if((o>1||!this.state.previewShown)&&!i){this.setState({thumbnail:null,previewGUID:null});return}let l=0===o,c=l?this.props.currentPage:(0,s.o)(a);(c!==this.state.previewGUID||i)&&(this.setState({thumbnail:null,previewGUID:c,previewIsCanvas:l}),this.updateThumbnailAfterDelay.cancel(),this.updateThumbnail())}componentDidMount(){G.Y5.fromFullscreen.on("pingSceneGraphEvent",this.onSceneGraphChange)}componentWillUnmount(){G.Y5.fromFullscreen.removeListener("pingSceneGraphEvent",this.onSceneGraphChange),this.updateThumbnailAfterDelay.cancel()}render(){return this.props.numSelected>1?null:i.createElement("div",null,i.createElement(N.E,{name:"toggle_export_preview_visibility_button"},i.createElement(ed.fI,{onClick:this.toggleShown,recordingKey:this.props.recordingKey,className:ev.q4},i.createElement(P.U,{svg:eT.A,className:this.state.previewShown?ev.ai:ev.hC},this.state.previewShown?i.createElement(g.O,null):i.createElement(f.k,null)),i.createElement(ed.JU,{className:ev.Pf},(0,D.tx)("fullscreen.properties_panel.preview")))),this.state.previewShown&&this.state.thumbnail&&i.createElement(eG,{thumbnail:this.state.thumbnail}))}}eH.displayName="PreviewThumbnail"},588620:(e,r,n)=>{n(848318),n(741419),n(39773),n(449977),n(718451),n(52004),n(51910),n(661780),n(207715),n(166917),n(28807),n(639244)},246633:(e,r,n)=>{n.d(r,{DK:()=>f,K0:()=>E,Me:()=>y,YW:()=>b});var i=n(848318),a=n(536384),o=n.n(a),s=n(510165),l=n(857188),c=n(983229),d=n(166365),u=n(291499),p=n(155651),m=n(601143),h=n(223645),_=n(973219),g=n(364616);let f=i.forwardRef(function(e,r){let n=o()(e.className,e.containerClassName,_.U,e.disabled?_.Ah:_.pq,{[_.vR]:e.selected,[e.selectedClassName??""]:e.selected,[_.No]:e.isBackgroundTransparent});return i.createElement(E,{...e,className:n,ref:r},i.createElement(i.Fragment,null,i.createElement(u.t,{svg:e.svg,fallbackSvg:e.fallbackSvg,useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,style:{fill:e.fill}}),i.createElement(d.B,{className:_.ai,svg:g.A})))}),E=i.forwardRef(function(e,r){let{useGrid:n}=i.useContext(m.dD),a=(0,s.M)(r);function d(){a.current.blur()}let p=o()(e.className,{[_.vR]:e.selected,[e.selectedClassName??""]:e.selected,[_.Ah]:!e.selected&&e.disabled,[_.pq]:!e.selected&&!e.disabled,[_.No]:e.isBackgroundTransparent}),g=e.tooltipForScreenReadersOnly||!e.showTooltipWhenSelectedIsTrue&&e.selected,f=e.href?c.lt:c.GG;return i.createElement(f,{"aria-disabled":e.disabled,"aria-expanded":e["aria-expanded"],"aria-haspopup":e["aria-haspopup"],"aria-label":e["aria-label"]??(0,h.En)(e),"aria-owns":e["aria-owns"],"aria-pressed":e["aria-pressed"],className:p,"data-fullscreen-intercept":e["data-fullscreen-intercept"],"data-onboarding-key":e["data-onboarding-key"],"data-testid":e.dataTestId,"data-tooltip":g?null:e["data-tooltip"],"data-tooltip-max-width":g?null:e["data-tooltip-max-width"],"data-tooltip-offset-x":g?null:e["data-tooltip-offset-x"],"data-tooltip-offset-y":g?null:e["data-tooltip-offset-y"],"data-tooltip-shortcut-key":g?null:e["data-tooltip-shortcut-key"],"data-tooltip-show-above":g?null:e["data-tooltip-show-above"],"data-tooltip-show-immediately":g?null:e["data-tooltip-show-immediately"],"data-tooltip-type":g?null:e["data-tooltip-type"],disabled:e.disabled,forwardedRef:a,href:e.disabled?void 0:e.href,onClick:e.disabled?void 0:e.onClick,onContextMenu:e.disabled?void 0:e.onContextMenu,onDoubleClick:e.disabled?void 0:e.onDoubleClick,onKeyDown:e.disabled?void 0:r=>{if(!n||" "!==r.key||!r.shiftKey)switch(r.keyCode){case l.Uz.ENTER:case l.Uz.SPACE:(e.onMouseDown||e.onClick||e.onKeyDown)&&r.preventDefault(),e.onMouseDown?.(r),e.onKeyDown?e.onKeyDown(r):e.onClick?.(r);break;case l.Uz.ESCAPE:d()}},onMouseDown:e.disabled?void 0:e.onMouseDown,onMouseEnter:e.disabled?void 0:e.onMouseEnter,onMouseLeave:e.disabled?void 0:e.onMouseLeave,onMouseMove:e.disabled?void 0:e.onMouseMove,onMouseUp:e.disabled?void 0:d,onPointerDown:e.disabled?void 0:e.onPointerDown,recordingKey:e.recordingKey,style:e.style,tabIndex:null!=e.tabIndex?e.tabIndex:e.disabled?-1:0,target:e.target,type:e.type},e.children||i.createElement(u.t,{svg:e.svg,fallbackSvg:e.fallbackSvg,useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,style:{fill:e.fill}}))}),y=(0,p.tf)(E),b=E;(0,p.tf)(b)},914198:(e,r,n)=>{n.d(r,{LB:()=>_,T7:()=>h,TF:()=>f,V9:()=>p,aK:()=>c,cB:()=>u,jO:()=>g,v2:()=>m});var i=n(781131),a=n(741419),o=n(179703),s=n(870769),l=n(931516);function c(e,r){let n=r.get(e)?.symbolId;if(n){let i,a;let o=r.get(n),s=o?.containingStateGroupId;if(o?.isState&&s){let e=r.get(s);e?.isStateGroup&&(i=e?.stateGroupKey,a=e?.sharedStateGroupVersion)}let{componentKey:l,sharedSymbolVersion:c}=o??{};return{instanceGUID:e,backingGUID:n,componentKey:l??void 0,stateGroupKey:i??void 0,symbolVersion:c??void 0,stateGroupVersion:a??void 0}}return null}function d(e,r,n){let i=(0,s.Av)(r);if(!i)return;let a=(0,o.UN)().developerFriendlyIdFromGuid(e.instanceGUID);n[i]?n[i].instanceIdsToUpdate.push(a):n[i]={updateAsset:r,instanceIdsToUpdate:[a]}}function u(e,r,n){let a={},o={};for(let r of n)for(let n of e)n.component_key&&(r.componentKey&&r.componentKey===n.component_key?r.symbolVersion&&r.symbolVersion!==n.content_hash&&d(r,n,a):r.componentKey&&n.oldSubscribedKeysToUpdate.includes(r.componentKey)?d(r,n,a):n.localIdsToUpdate.includes(r.backingGUID)&&d(r,n,a));for(let e of n)for(let n of r)if(n.key){if(e.componentKey&&e.stateGroupKey&&e.stateGroupKey===n.key)e.stateGroupVersion&&e.stateGroupVersion!==n.version&&Object.keys(n.newStateKeyToOutdatedItems).includes(e.componentKey)&&d(e,n,o);else for(let r of Object.keys(n.newStateKeyToOutdatedItems))e.componentKey&&n.newStateKeyToOutdatedItems[(0,i.ii)(r)].oldSubscribedKeysToUpdate.includes(e.componentKey)?d(e,n,o):n.newStateKeyToOutdatedItems[(0,i.ii)(r)].localIdsToUpdate.includes(e.backingGUID)?d(e,n,o):e.componentKey&&e.componentKey===r&&d(e,n,o)}return{componentInstanceUpdateInfo:a,stateInstanceUpdateInfo:o}}function p(e,r,n){return r&&n?{updateAsset:r,styleGUIDs:[...new Set([n,...e])]}:r?{updateAsset:r,styleGUIDs:e}:null}function m(e,r){return e.find(e=>r?.isLocalStyle?-1!==e.localIdsToUpdate.indexOf(r.GUID):!!r?.key&&-1!==e.oldSubscribedKeysToUpdate.indexOf(r.key)||e.key===r?.key&&r.version&&e.content_hash!==r.version)??null}function h(e,r){return e?r.filter(({key:r,version:n})=>e.oldSubscribedKeysToUpdate.includes(r)||r===e.key&&n!==e.content_hash).map(e=>e.nodeId).concat(e.localIdsToUpdate):[]}function _(e,r){return e.component_key&&e.content_hash?a.glU.getOutdatedComponentInstanceDevIds(e.component_key,e.content_hash,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,r||""):[]}function g(e,r){return a.glU.getOutdatedStateInstanceDevIds(e.version,e.newStateKeyToOutdatedItems,r||"")}function f(e){return e.type===l.PW.COMPONENT?_(e,void 0).length:g(e,void 0).length}},884947:(e,r,n)=>{n.d(r,{$:()=>_});var i=n(848318),a=n(716544),o=n(741419),s=n(39773),l=n(575058),c=n(718451),d=n(51910),u=n(369600),p=n(256054),m=n(355323),h=n(919699);function _(e){let r=(0,m.Rn)("restore-symbol-or-state-group"),n=(0,a.d4)(e=>e.mirror.appModel[r]),_=(0,d.B9)(),g=(0,s.md)(u._S),f=(0,l.k9)(()=>{let r=new Set;for(let n of e){let e=_.get(n);if(e?.type!=="INSTANCE")continue;let i=e.symbolId;i&&r.add(i)}return r},[e,_]),{backingSymbolGUID:E,backingStateGroupGUID:y}=(0,h.nD)(f,_),b=i.useMemo(()=>(0,c.gl)(E)||null===E?null:_.get(E),[E,_]),v=i.useMemo(()=>(0,c.gl)(y)||null===y?null:_.get(y),[y,_]),T=i.useMemo(()=>!!b&&b.isSubscribedAsset&&b.sourceLibraryKey!==g,[b,g]),I=i.useMemo(()=>!!(b&&o.Egt.nodeIsSoftDeleted(b.guid)),[b]),S=i.useMemo(()=>!!(v&&o.Egt.nodeIsSoftDeleted(v.guid)),[v]),w=i.useMemo(()=>{if(v)return v;if(!b)return null;if(I){let e=o.Egt.findBestAncestorInRestorePath(b.guid),r=""===e?null:_.get(e);if(r?.isStateGroup)return r}return null},[b,v,I,_]),A=(0,a.d4)(p.lm),C=i.useMemo(()=>v&&S?v:b&&I?b:null,[b,I,S,v]),N=i.useMemo(()=>{let e;return e=C?C.isStateGroup?"STATE_GROUP":w?"SYMBOL_AS_STATE":"SYMBOL_AS_NON_STATE":null,n||(e=null),e},[n,C,w]),L=i.useMemo(()=>b?.componentKey&&A.get(b.componentKey)?"DELETED_SUBSCRIBED_STATE":"SYMBOL_AS_STATE"===N?"DELETED_LOCAL_STATE":null,[A,b,N]);return i.useMemo(()=>({backingSymbolGUID:E,backingStateGroupGUID:y,singleBackingSymbol:b,singleBackingStateGroup:v,isBackingSymbolShared:T,isBackingSymbolSoftDeleted:I,isBackingStateGroupSoftDeleted:S,affiliatedStateGroup:w,affiliatedStateGroupId:w?.guid,symbolOrStateGroupToRestore:C,restoreType:N,stateResetType:L}),[E,y,b,v,T,I,S,w,C,N,L])}},867415:(e,r,n)=>{n.d(r,{Cc:()=>eZ,T:()=>eX,lL:()=>ez});var i=n(848318),a=n(716544),o=n(551316),s=n(988520),l=n(742464),c=n(468189),d=n(356505),u=n(897378),p=n(423526),m=n(8015),h=n(950947),_=n(573446),g=n(157907),f=n(39773),E=n(536384),y=n.n(E),b=n(579020),v=n(818754),T=n(575058),I=n(311160),S=n(921494),w=n(857188),A=n(31661),C=n(654104),N=n(507152),L=n(701780),O=n(757375),R=n(26257),P=n(145015),D=n(566699),M=n(17755),k=n(442313),F=n(790355),x=n(667323),U=n(742784),B=n(111947),V=n(341550),G=n(449737),H=n(557675),K=n(405866),W=n(584305),z=n(665549),$=n(481540),Y=n(627855),j=n(574146),q=n(559334),X=n(10415),Z=n(668515),J=n(342431),Q=n(161452),ee=n(45465),et=n(665971),er=n(843156),en=n(369600),ei=n(87089),ea=n(870769),eo=n(114912),es=n(482821),el=n(405888),ec=n(790790),ed=n(928001),eu=n(154209),ep=n(264917),em=n(931516),eh=n(492119),e_=n(503024),eg=n(342874),ef=n(240207),eE=n(542468),ey=n(590018),eb=n(259424),ev=n(277253),eT=n(783193),eI=n(810010),eS=n(703889),ew=n(432676),eA=n(819044),eC=n(302839),eN=n(473450),eL=n(831060),eO=n(797323),eR=n(6760),eP=n(251013),eD=n(271796),eM=n(878641),ek=n(259726),eF=n(365950),ex=n(919699),eU=n(27776),eB=n(559105),eV=n(346480),eG=n(951032);let eH=(0,v.hG)(eU.jkd),eK=e=>{switch(e){case eb.rp.SMALL:return{height:22,width:22,gridClassName:""};case eb.rp.NORMAL:return{height:72,width:72,gridClassName:""};case eb.rp.WIDE:return{height:52,width:256,gridClassName:""};case eb.rp.THIN:return{height:22,width:22,gridClassName:""}}},eW=(e,r)=>{let n=eK(r),a=(0,ea.Gj)(e);return i.createElement(eT.lX,{key:a,className:null===r?eB.Tv:eB.B_,displayType:null===r?"list-compact":"grid",height:n?.height,isFigJam:!0,isSearch:!1,item:e,noBackground:!1,shouldHideDescription:!0,shouldShowNamePopout:!0,showName:!1,width:n?.width})};function ez(e,r){return i.createElement(ey.M,{item:e,shouldGenerateLocalThumbnail:!0,className:null===r?eB.Tv:eB.B_,draggable:!1})}let e$=e=>["drilldownItem-productComponent",e.node_id],eY=e=>e.length>1;function ej(e){let{openFile:r,onSwapCallback:n,instanceSwapPickerShown:o,multiselect:u,onMultiselectCallback:m,selectedItems:h,scrollContainerHeight:E,isLoadingSubscribedLibraries:v,shouldPerformSwapOnClick:C,itemsToSwap:N,incrementNumSearchesForTracking:L,dropdownAccessory:P,pickerType:D,pickerToggleRef:x,preferredItems:W,overrideDefaultItem:e_,showPreferredSectionByDefault:ey,preferredValuesErrorComponent:eT,sessionId:eS,isSearching:eR,setIsSearching:eU,entrypointForLogging:eV}=e,eG=D===R.Zl.INSTANCE_SWAP_PICKER||D===R.Zl.PREFERRED_VALUES_PICKER,eK=(0,R.qc)(),[eY]=(0,ek.Pk)(),ej=eK&&!eY,{library:eq,dropdownShown:eX,sceneGraphSelection:eZ,isListView:eQ,loadingState:e0}=(0,S.R)(e=>({library:e.library,dropdownShown:e.dropdownShown,sceneGraphSelection:e.mirror.sceneGraphSelection,isListView:e.instanceSwapPickerListLayout,loadingState:e.loadingState})),e1=(0,f.md)(J.qp),e2=(0,a.d4)(e=>e.universalInsertModal.showing),e4=r.key,e3=(0,en._G)(),e7=(0,a.wA)(),e5=u?null:h[0]??null,e8=i.useMemo(()=>e_?e_.library_key:null,[e_]),e9=i.useMemo(()=>e8??j.uj(h),[e8,h]),e6=i.useMemo(()=>(0,eD.Dr)(eq,eK?eD.Wx.COMPONENTS_FIRST:eD.Wx.SUBPATHS_FIRST,ej),[ej,eK,eq]),{libraryMetadataMap:te,libraryMetadataLoading:tt}=(0,eD.jB)(e9),{publishedLibraryItemsByLibraryKey:tr,rootDrilldownItemsByLibraryKey:tn}=(0,eD.Xx)({libraryKeyBackingSelectedItems:e9,order:eK?eD.Wx.COMPONENTS_FIRST:eD.Wx.SUBPATHS_FIRST,libraryMetadataMap:te,flattenSubpaths:ej}),ti=(0,er.g5)(eh.$A.Design).productComponents.map(eD.Kk),ta=i.useMemo(()=>W?W.map(eD.Kk):[],[W]),[to,ts,tl]=i.useMemo(()=>{if(e9&&(tn[e9]?.length??0)>0)return[e9,tn[e9],tr[e9]];if(e6.length>0)return[(0,_.l)(r.libraryKey),e6,(0,ea.X0)(j.Qx(eq))];if(eG){let e=Object.entries(tn).find(([e,r])=>r.length>0);if(e){let[r,n]=e;return[r,n,void 0]}}return[null,[],void 0]},[e9,tn,e6,eG,tr,r.libraryKey,eq]),[tc,td]=i.useState(()=>ey?{type:R.iN.PREFERRED}:to&&(eG||to!==e3)?{type:R.iN.FILE,libraryKey:to}:{type:R.iN.RECENT});eM.S.useLaunchedEvent({pickerType:D,sessionId:eS,dropdownSelection:tc,entrypoint:eV});let[tu,tp]=i.useState(null),tm=(0,a.Pj)(),th=(0,eN.Nv)(!0),t_=eM.S.useOpenFileProperties(),tg=i.useCallback(e=>tc.type===R.iN.FILE?tc.libraryKey===e3?e.filter(e=>"LEAF"===e.type&&e.item.isLocal):e.filter(e=>"LEAF"===e.type&&(0,Y.Ui)(e.item,tc.libraryKey)&&(0,ea.Av)(e.item)):tc.type===R.iN.PREFERRED?e.filter(e=>"LEAF"===e.type&&W&&!!W.find(r=>r.node_id===e.item.node_id)):e,[tc,e3,W]),tf=i.useMemo(()=>tc.type===R.iN.FILE?tc.libraryKey===e3?{type:ev.I.LOCAL}:{type:ev.I.FILE,libraryKey:tc.libraryKey}:{type:ev.I.ALL},[tc,e3]),tE=i.useCallback(async(e,r,n)=>{if(v)return[];el.YG.refreshSourcesIfNeeded(tm);let i=h.map(e=>{let{type:r}=e,n=r===em.PW.COMPONENT?e.component_key:e.key;if(n)return{type:r,key:n}}).filter(e=>void 0!==e),a=(await (0,eo.V)(e,tf,es.Cn.InstanceSwapper,{preferLocal:!0,includeOnlySubscribed:!0,libraryKeyBackingSelectedItems:e9??void 0,selectedItems:i,queryId:n,sessionId:r})).normalizedSearchResults.filter(e=>e.type!==em.PW.MODULE).map(e=>({item:e,score:e.score})),o=(0,O.xd)(a.map(e=>e.item),e=>e.name,e=>e.library_key+e.node_id);if(eG){let i=tg(o).length;b.az.trackDefinedEvent("instance_swap_picker.search",{...t_,sessionId:eS,searchSessionId:r,query:e,queryId:n,numResults:o.length,numFilteredResults:i,aiResultsEnabled:th,dropdownType:(0,R.Z4)(tc,e3),libraryKey:tc.type===R.iN.FILE?tc.libraryKey:void 0,isPreferredValues:D===R.Zl.PREFERRED_VALUES_PICKER})}else(0,b.sx)("Component Insert Search",{searchSessionId:r,query:e,queryId:n,numResults:o.length,aiResultsEnabled:th});return L(),o},[v,tm,h,tf,e9,th,eG,L,tg,t_,eS,tc,e3,D]),ty=i.useCallback((e,r)=>{e.preventDefault(),e.stopPropagation(),e7(F.j7({type:eE.j,data:{component:r.item,position:{top:e.clientY,left:e.clientX}}}))},[e7]),{validDropdownSelection:tb,validRootDrilldownItems:tv}=i.useMemo(()=>{if(tc.type===R.iN.RECENT&&eR)return{validDropdownSelection:tc,validRootDrilldownItems:ti};let e=[];if(tc.type===R.iN.PREFERRED&&ta.length>0?e=ta:tc.type===R.iN.RECENT&&ti.length>0?e=ti:tc.type===R.iN.FILE&&tn[tc.libraryKey]?e=tn[tc.libraryKey]:tc.type===R.iN.FILE&&e3===tc.libraryKey&&(e=e6),0===e.length){let e,r;if(to)e={type:R.iN.FILE,libraryKey:to},r=ts;else if(ta.length>0)e={type:R.iN.PREFERRED},r=ta;else if(ti.length>0)e={type:R.iN.RECENT},r=ti;else if(Object.keys(tn).length>0){let n=Object.keys(tn)[0];e={type:R.iN.FILE,libraryKey:n},r=tn[n]}else e={type:R.iN.RECENT},r=ti;return{validDropdownSelection:e,validRootDrilldownItems:r}}return{validDropdownSelection:tc,validRootDrilldownItems:e}},[tc,eR,ta,ti,tn,e3,e6,to,ts]),tT=i.useMemo(()=>{if(u){if(e9&&tl)return e_?{[e_.library_key]:j.O9(e_,tl)}:{[e9]:(0,eD.OK)(h,tl)}}else{let e=e_||e5;if(e&&tl){let r=j.O9(e,tl);return{[e.library_key]:r}}}return{}},[u,e9,tl,e_,h,e5]),[tI,tS]=i.useState({}),tw=i.useMemo(()=>({...tT,...tI}),[tT,tI]),[tA,tC]=i.useState({index:-1,parentId:null}),tN=i.useCallback(()=>tC({index:-1,parentId:null}),[]),tL=i.useCallback((e,r)=>{tN(),tb&&tb.type===R.iN.FILE&&(tS({[tb.libraryKey]:e}),tS({[tb.libraryKey]:e}),eG&&b.az.trackDefinedEvent("instance_swap_picker.navigate",{...t_,sessionId:eS,direction:r,path:e.join(" / "),libraryKey:tb.libraryKey,viewMode:eQ?"list":"grid",isPreferredValues:D===R.Zl.PREFERRED_VALUES_PICKER}))},[tN,eQ,eG,t_,D,eS,tS,tb]),tO=i.useMemo(()=>tb.type===R.iN.FILE&&tw[tb.libraryKey]||[],[tb,tw]),tR=(0,eL.b)({hideTooltips:!0}),tP=(0,z.n1)(),tD=i.useCallback(()=>{D!==R.Zl.PREFERRED_VALUES_PICKER&&(o.isShown&&o.modal?(o.returnFocusToToggle&&x?.current&&x.current.focus(),e7(H.jD()),e7((0,U.vq)())):D===R.Zl.RESOURCE_INSERT_MODAL&&e2&&(e7(K.b({seen_component_onboarding_modal:!0})),tR()))},[o,x,e7,D,tR,e2]),tM=i.useCallback(e=>{if(eQ)return null;let r=e.filter(e=>"LEAF"===e.type).map(e=>e.item);return(0,eb.PI)(r)},[eQ]),tk=i.useCallback(r=>{let n;n=r.type===R.iN.PREFERRED?{type:R.iN.PREFERRED}:r.type===R.iN.RECENT?{type:R.iN.RECENT}:{type:R.iN.FILE,libraryKey:r.libraryKey},b.az.trackDefinedEvent("asset_search.misc_feature_usage",{aiResultsEnabled:th,entryPoint:"instance-swap",featureSlug:"library-filter-usage"}),td(n),e.searchBarRef?.current&&e.searchBarRef.current.focus(),eG?b.az.trackDefinedEvent("instance_swap_picker.library_switch",{...t_,sessionId:eS,dropdownType:(0,R.Z4)(n,e3),libraryKey:n.type===R.iN.FILE?n.libraryKey:void 0,isPreferredValues:D===R.Zl.PREFERRED_VALUES_PICKER}):(0,b.sx)("Component Insert Library Switch",{isSearching:eR})},[th,e.searchBarRef,eG,t_,eS,e3,D,eR]),tF=(0,ei.sZ)(),tU=(0,eu.Oe)(tF),tB=tc.type===R.iN.FILE?tc.libraryKey:void 0,tV=(0,q.Fl)(),tG=i.useMemo(()=>({format:r=>r.type===R.iN.RECENT?eR?(0,k.t)("design_systems.instance_swap_picker.all_libraries"):e.pickerType===R.Zl.RESOURCE_INSERT_MODAL?(0,k.t)("universal_insert.recents"):(0,k.t)("design_systems.instance_swap_picker.recently_used"):r.type===R.iN.PREFERRED?(0,k.t)("design_systems.instance_swap_picker.preferred"):r.type===R.iN.FILE?r.libraryKey===e3?(0,k.t)("design_systems.instance_swap_picker.created_in_this_file"):te[r.libraryKey]?.name??"":"",isEqual:(e,r)=>e.type===r.type&&(e.type!==R.iN.FILE||r.type!==R.iN.FILE||e.libraryKey===r.libraryKey)}),[eR,e.pickerType,e3,te]),tH=i.useMemo(()=>{switch(tc.type){case R.iN.FILE:if(tc.libraryKey===e3)return"Local components";return"Subscribed libraries";case R.iN.RECENT:return"Recently used";case R.iN.PREFERRED:return"Preferred values"}},[tc,e3]),tK=i.useCallback(()=>{e7(G.to({type:eA.T,data:{initialTab:em.Wv.LIBRARIES,entrypoint:ew.r6.INSTANCE_SWAP_BROWSE_LIBRARIES_LINK}}))},[e7]),tW=i.useCallback(e=>{if("LEAF"!==e.type||0===h.length)return!1;let{item:r}=e;if(tu&&!u){let e=(0,ex.Ml)(tu,Object.keys(eZ));if(ed.VP(e0,e))return r.node_id===tu.node_id&&(0,Y.EF)(r,tu)}return h.some(e=>r.type===em.PW.COMPONENT&&e.type===em.PW.COMPONENT?!!r.component_key&&r.component_key===e.component_key||!r.component_key&&!e.component_key&&r.node_id===e.node_id:r.type===em.PW.STATE_GROUP&&e.type===em.PW.STATE_GROUP&&(!!r.key&&r.key===e.key||!r.key&&!e.key&&r.node_id===e.node_id))},[tu,eZ,e0,u,h]),tz=i.useCallback(e=>{let{currentDrilldownItems:r,index:n,parentId:i}=e,a=Math.max(Math.min(tA.index,n),0),o=Math.min(Math.max(tA.index,n),r.length-1),s=r.slice(a,o+1).filter(e=>"LEAF"===e.type);m?.(s.map(e=>e.item),tW(r[n])?eD.Wu.DESELECT:eD.Wu.SELECT),tC({index:n,parentId:i})},[tW,m,tA.index]),t$=(0,et.u)({alwaysSwap:eG,canSwap:C,itemsToSwap:N,openFileKey:e4,onSwap:n,sourceForTracking:"Instance Swap Picker"}),tY=(0,ep.He)(),tj=(0,ef.CK)(),tq=i.useCallback((e,n,i,a,o)=>{if(!e4)return;if(u&&a){if(e.shiftKey&&-1!==tA.index&&tA.parentId===a.parentId){tz(a);return}tC({index:a.index,parentId:a.parentId})}let s=e.altKey;tu&&e7(V.yH({key:(0,ex.Ml)(tu,Object.keys(eZ))})),tp(n.item),t$({altKey:s},n.item,o?.queryId),tD();let c=n.item.library_key,d=(0,ec.ko)(c,e3??(0,_.l)(""),tY),p={aiResultsEnabled:th,assetKey:(0,ea.Av)(n.item),position:a?.index,reciprocalRank:(0,l.Et)(a?.index)?1/(1+a?.index):void 0,query:o?.query,queryId:o?.queryId,scoreAi:n.item.ai_score??void 0,scoreLexical:n.item.lexical_score??void 0,sessionId:eS,dropdownType:(0,R.Z4)(tc,e3),fromSearch:i,libraryKey:c,libraryType:d,viewMode:eQ?"list":"grid",productType:(0,$.pi)({editorType:r?.editorType})},m={...t_,...p,type:n.item.type===em.PW.COMPONENT?"component":"state_group",searchSessionId:eS};if(D===R.Zl.INSTANCE_SWAP_PICKER){let e=function(e){return e?e.type===em.PW.COMPONENT?e.component_key:e.type===em.PW.STATE_GROUP?e.key:void 0:void 0},r=h[0],i={prevInstanceType:r?.type,prevInstanceNodeId:r?.node_id,prevInstanceComponentKey:e(r)},a=n.item,o={newInstanceItemType:a.type,newInstanceNodeId:a.node_id,newInstanceComponentKey:e(a)};b.az.trackDefinedEvent("instance_swap_picker.insert_instance",{...m,...i,...o}),b.az.trackDefinedEvent("asset_search.result_inserted",{...p,assetType:m.type,entryPoint:"instance-swap",fileKey:t_.fileKey,fileOrgId:t_.orgId,fileTeamId:t_.teamId,userId:t_.userId,componentSuggestionSessionId:tj})}else if(D===R.Zl.PREFERRED_VALUES_PICKER){let e=tW(n);(0,b.sx)("Preferred Values Picker Toggle Component",{...m,action:e?"deselect":"select"})}else(0,b.sx)("Component Insert Panel Insert Instance",{type:n.item.type===em.PW.COMPONENT?"component":"state_group",fromSearch:i,altKey:s,viewMode:eQ?"list":"grid",dropdownType:(0,R.Z4)(tc,e3)})},[e4,u,tu,t$,tD,e3,tY,th,eS,tc,eQ,r?.editorType,t_,D,tA.index,tA.parentId,tz,e7,eZ,h,tW,tj]),tX=i.useRef(null),tZ=i.useCallback(e=>{e&&setTimeout(()=>tX.current?.focus(),0)},[]),tJ=(0,ea.fc)(),tQ=i.createElement(i.Fragment,null,i.createElement(eF.p,{className:D===R.Zl.RESOURCE_INSERT_MODAL?eB.kc:eB.Kv,dataTestId:"instance-swap-picker-library-select",dispatch:e7,dropdownAlignment:"left",dropdownShown:eX,dropdownWidth:230,formatter:tG,id:(0,R.YU)(D),inputClassName:D===R.Zl.RESOURCE_INSERT_MODAL?eB.je:void 0,inputRef:tX,onChange:tk,onDropdownHidden:tZ,openOnKeyPressed:[w.Uz.SPACE,w.Uz.ENTER],property:tb,rightIcon:i.createElement(ee.P,{libraryKey:tB}),role:"combobox"},(()=>{function e(e){return i.createElement(eF.c,{key:(0,R.ez)(e),value:e})}function n(e){return i.createElement(eF.c,{key:(0,R.ez)(e),value:e,removeTextRightPadding:!0,rightSettingsIcon:i.createElement(Q.t,null)})}function a(e){return i.createElement(eF.c,{key:(0,R.ez)(e),value:e,removeTextRightPadding:!0,rightSettingsIcon:i.createElement(X.FX,null)})}if(v&&(0,g.k)().dse_instance_swap_perf)return i.createElement(eF.c,{key:"loading",value:{type:R.iN.FILE,libraryKey:(0,_.l)("loading")},disabled:!0},i.createElement("div",{className:M.s.w150.mx12.flex.justifyCenter.$},i.createElement(c.k,null)));let{pass:o,fail:l}=(0,A.j)(Object.keys(tn),e=>{let r=te[e];return!!r?.isHubFile}),d=[];if(ta.length&&d.push(e({type:R.iN.PREFERRED})),e9&&e9!==e3&&!ey&&!tJ(e9)&&e1[e9]&&(d.length>0&&d.push(i.createElement(eC.sK,{key:"non-subscribed-divider"})),d.push(e({type:R.iN.FILE,libraryKey:e9})),l=l.filter(e=>e!==e9)),tU&&(0,Z.NX)(tV)){let e=l.map(e=>te[e]||null).filter(s.Vq).map(({name:e,libraryKey:r})=>({name:e,library_key:r}));(0,Z.k9)({libraries:e,approvedLibraryKeysByResourceType:tV}),l=e.map(({library_key:e})=>e)}if((eR||ti.length>0)&&(d.length>0&&d.push(i.createElement(eC.sK,{key:"recent-divider"})),d.push(e({type:R.iN.RECENT}))),eG){for(let n of(e6.length>0&&(d.length>0&&d.push(i.createElement(eC.sK,{key:"local-divider"})),d.push(e({type:R.iN.FILE,libraryKey:(0,_.l)(r.libraryKey)}))),l.length>0&&d.length>0&&d.push(i.createElement(eC.sK,{key:"subscribed-divider"})),l))tU&&(0,Z.sF)(n)?d.push(a({type:R.iN.FILE,libraryKey:n})):d.push(e({type:R.iN.FILE,libraryKey:n}));if(tP)for(let e of o)d.push(n({type:R.iN.FILE,libraryKey:e}));return d}for(let n of(e6.length>0&&d.push(e({type:R.iN.FILE,libraryKey:(0,_.l)(r.libraryKey)})),l.length>0&&d.push(i.createElement(eC.sK,{key:"subscribed-divider"})),l))tU&&(0,Z.sF)(n)?d.push(a({type:R.iN.FILE,libraryKey:n})):d.push(e({type:R.iN.FILE,libraryKey:n}));if(tP)for(let e of o)d.push(n({type:R.iN.FILE,libraryKey:e}));return d})()),P),t0=i.useRef(null),t1=i.createElement("div",{className:D===R.Zl.RESOURCE_INSERT_MODAL?y()(eB.FK,eB.k2):eB._M},eK?i.createElement(i.Fragment,null,tQ,i.createElement("div",{className:M.s.ml4.$},i.createElement(ek.sX,{pickerType:D,includeFolderSetting:tb.type===R.iN.FILE&&!eR,ref:t0,sessionId:eS,queryId:eR?e.queryId:void 0}))):tQ),t2=i.useCallback(()=>{td({type:R.iN.RECENT}),eG&&b.az.trackDefinedEvent("instance_swap_picker.search_all_libraries_from_empty",{...t_,sessionId:eS,query:e.query,queryId:e.queryId,isPreferredValues:D===R.Zl.PREFERRED_VALUES_PICKER})},[eG,t_,D,e.query,e.queryId,eS]),t4=i.createElement(eJ,{onClick:t2,type:tc.type}),t3=i.createElement("div",{className:eG?eB.y7:eB.uR,style:{height:E+(e.pickerType===R.Zl.RESOURCE_INSERT_MODAL?eO.Kr:0)}},i.createElement("div",{className:eG?eB.qv:void 0},(0,k.tx)("design_systems.instance_swap_picker.no_components")),i.createElement("div",{className:M.s.mt8.if(!eG,M.s.flex.itemsCenter.justifyCenter.mt12).$},i.createElement(d.$n,{onClick:tK,variant:"secondary",iconPrefix:i.createElement(p.l,{className:M.s.mr2.$})},(0,k.tx)("design_systems.instance_swap_picker.browse_libraries")))),t7=i.useMemo(()=>e9?tr[e9]??null:null,[e9,tr]),t5=function(e,r,n,i){let a=(0,f.md)(J.qp),o=(0,T.k9)(()=>r?new Set(r.map(e=>(0,ea.Av)(e))):[],[r]),s=(0,T.k9)(()=>{Object.keys(a)},[a]),l=(0,I.h)(e),c=(0,I.h)(s),d=(0,I.h)(o),u=(0,I.h)(n)&&!n,p=(0,I.h)(i);return l||c||d||u||p}(e9,t7,v,h),t8=i.useMemo(()=>h.map(e=>e.library_key).filter(e=>e!==e3),[e3,h]);(0,eI.K)({otherLibraryKeys:t8,disabled:!(0,g.k)().dse_instance_swap_perf});let t9=i.useMemo(()=>{if(tt)return!0;if((0,g.k)().dse_instance_swap_perf){if(tb.type===R.iN.FILE)return tb.libraryKey!==e3&&!(0,ea.El)("INVALID-FILE-KEY-SHOULD-BE-REMOVED",tb.libraryKey);if(tb.type===R.iN.RECENT)return(0,ed.VP)(e0,B.fi);if(tb.type===R.iN.PREFERRED)return ed.VP(e0,(0,eg._A)(e4))}return v||(0,ed.VP)(e0,B.fi)},[tt,v,e0,tb,e4,e3]);(0,eP.x)(t9);let t6=Object.keys(tn).length>0;return i.createElement(O.uO,{additionalRowBottomMargin:eG?O.qy:0,beforeItems:t1,beforeItemsRefs:[tX,t0],contextValue:e.drilldownPickerContextValue,drilldownItemsKeySupplement:tc.type===R.iN.FILE?tc.libraryKey:tc.type,drilldownItemsRecordingKey:"instanceSwapDrilldownItems",emptyState:t3,errorComponent:tc.type===R.iN.PREFERRED?eT:void 0,extraHeightOnSearch:eG||e.pickerType===R.Zl.RESOURCE_INSERT_MODAL?0:eH,focusBeforeItems_DEPRECATED_UI2:()=>tX.current?.focus(),getBackgroundColorForLeafItemThumbnail:j.zR,getLeafItemRecordingKey:e$,getLeafItemThumbnail:eG||eQ?ez:eW,getLeafItemTooltip:eG?eD.pf:void 0,getThumbnailGridLayoutForItems:tM,initialPath:tO,isLoading:t9,isSelectedItem:tW,multiselect:u,onDrilldownPathChange:tL,onLeafItemContextMenu:ty,onLeafItemDraggable:eG?void 0:{sourceForTracking:"component-insert-modal",afterSuccessfulInsert:tD,sectionNameForTracking:tH},onLeafItemDrilldown:tq,onMultiselectCallback:m,onSearch:tE,pickerToggleRef:x,pickerType:e.pickerType,query:e.query,recordingKey:e.recordingKey,renderLeafItemNames:!!eG||eQ,rootDrilldownItems:tv,scrollContainerHeight:E,searchBarPlaceholderText:(()=>{if(tc.type===R.iN.PREFERRED)return(0,k.t)("design_systems.instance_swap_picker.search_preferred");if(tc.type===R.iN.RECENT)return(0,k.t)("design_systems.instance_swap_picker.search_all_libraries");if(null!=tc.libraryKey&&te[tc.libraryKey]){let e=te[tc.libraryKey]?.name??"";return(0,k.t)("design_systems.instance_swap_picker.search_filename",{filename:e})}return(0,k.t)("design_systems.instance_swap_picker.search")})(),searchBarRef:e.searchBarRef,searchDebounceTime:e.searchDebounceTime,searchEmptyStateCTA:t4,searchFilter:tg,searchTypeOption:tf,sessionId:eS,setIsSearching:eU,setQuery:e.setQuery,shouldUpdateServerResults:t5,validLibrariesArePresent:t6})}function eq(e){let{multiselect:r,onMultiselectCallback:n,selectedItems:o,searchDebounceTime:s,shouldPerformSwapOnClick:l=!0,itemsToSwap:c,onSwapCallback:d,searchBarRef:u,setNumSearchesForTracking:p,scrollContainerHeight:m,pickerToggleRef:h,toggleGridViewButton:_,preferredItems:f,overrideDefaultItem:E,preferredValuesErrorComponent:y,sessionId:b,entrypointForLogging:v}=e,T=i.useRef(E).current,{instanceSwapPickerShown:I,loadingState:w}=(0,S.R)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,loadingState:e.loadingState})),A=(0,a.d4)(en.tB),C=(0,en._G)(),N=i.useMemo(()=>!!f&&eY(f),[f]),L=A?.key||null,O=i.useMemo(()=>T?T.library_key:null,[T]),P=i.useMemo(()=>O??j.uj(o),[O,o]),D=(0,eS.U)(),M=(0,ea.fc)(),k=i.useMemo(()=>{if(null==A||null==L)return!0;if(P&&A&&M(P)&&!(0,ea.El)("INVALID-FILE-KEY-SHOULD-BE-REMOVED",P)){let e=(0,ea.Mb)(P);return!ed.D2(w,e)}if(N&&P&&P!==C)return ed.VP(w,(0,eg._A)(L));if((0,g.k)().dse_instance_swap_perf)return D;let e=(0,ex.yD)(L);return!ed.D2(w,e)},[A,L,P,M,N,C,w,D]),F=i.useCallback(()=>p?.(e=>e+1),[p]);return(I.isShown||e.pickerType!==R.Zl.INSTANCE_SWAP_PICKER)&&L&&A?i.createElement(ej,{drilldownPickerContextValue:e.drilldownPickerContextValue,dropdownAccessory:e.pickerType===R.Zl.RESOURCE_INSERT_MODAL?_:null,entrypointForLogging:v,incrementNumSearchesForTracking:F,instanceSwapPickerShown:I,isLoadingSubscribedLibraries:k,isSearching:e.isSearching,itemsToSwap:c,multiselect:r,onMultiselectCallback:n,onSwapCallback:d,openFile:A,overrideDefaultItem:T,pickerToggleRef:h,pickerType:e.pickerType,preferredItems:f,preferredValuesErrorComponent:y,query:e.query,queryId:e.queryId,recordingKey:e.recordingKey,scrollContainerHeight:m,searchBarRef:u,searchDebounceTime:s,selectedItems:o,sessionId:b,setIsSearching:e.setIsSearching,setQuery:e.setQuery,shouldPerformSwapOnClick:l,showPreferredSectionByDefault:N}):null}function eX(e){let{pickerType:r,initialWidth:n,initialHeight:s,title:l,pickerToggleRef:c}=e,d=r===R.Zl.INSTANCE_SWAP_PICKER||r===R.Zl.PREFERRED_VALUES_PICKER,{instanceSwapPickerShown:u,dropdownShown:p}=(0,S.R)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,dropdownShown:e.dropdownShown})),m=(0,a.wA)(),h=i.useRef(null),[_,g]=i.useState((0,N.g)()),f=u.isShown?new L.Mi(u.initialX,u.initialY):new L.Mi(0,0),E=i.useCallback(()=>{p?.type===(0,R.YU)(r)&&m(F.oB())},[m,p,r]),y=i.useCallback(()=>{u.isShown&&u.modal&&m((0,U.qX)({...u,modal:!1,returnFocusToToggle:!1})),h.current?.focus()},[m,u]),[v,T]=i.useState(0),I=i.useCallback(()=>{(0,b.sx)(`${d?"Instance Swap Picker":"Component Insert"} Total Searches`,{numSearches:v}),m((0,U.vq)())},[m,v,d]),w=i.useRef(null),A=d?320:428,{modalWidth:O}=(0,R.TQ)(r),P=(0,R.qc)(),D=i.useCallback(()=>u.isShown&&s?s:A,[A,s,u]),[M,k]=i.useState(D),x=w.current?.getEl();i.useLayoutEffect(()=>{let e=(0,o.s)(()=>{if(!x)return;let e=x.getBoundingClientRect();e.bottom>window.innerHeight&&k(M-(e.bottom-window.innerHeight)-20)},200);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[M,k,x]);let B=i.useRef(void 0),[V,G]=i.useState(""),[H,K]=i.useState(!1),W=i.createElement(eZ,{isSwapPicker:d,searchBarRef:h,sessionId:_,queryId:H?B.current:void 0}),z=i.createElement("div",{className:eB.Hn},i.createElement("div",{className:eB.D0},l),!P&&W),$=i.useCallback(()=>{p?.type.includes(ek.fn)&&m(F.oB())},[m,p?.type]);return i.createElement(eR.vx,{ref:w,autoflowHeight:!0,disableHeaderBottomBorder:P,dragHeaderOnly:!0,initialHeight:M,initialPosition:f,initialWidth:n??O,isCloseHidden:d&&!P,onClick:$,onClose:I,onDragEnd:y,onDragStart:E,recordingKey:C.Pt(e.recordingKey,"modal"),title:d?z:l},i.createElement(eq,{...e,drilldownPickerContextValue:{queryId:B},isSearching:H,pickerToggleRef:c,query:V,queryId:B.current,scrollContainerHeight:M,searchBarRef:h,sessionId:_,setIsSearching:K,setNumSearchesForTracking:T,setQuery:G,toggleGridViewButton:W}))}function eZ({isSwapPicker:e,isPreferredValues:r,searchBarRef:n,sessionId:o,queryId:s}){let l=(0,a.wA)(),c=eM.S.useTrackViewToggle({sessionId:o,queryId:s,isPreferredValues:!!r}),d=(0,a.d4)(e=>r?e.preferredValuesPickerListLayout:e.instanceSwapPickerListLayout),p=r?x.U8:x.fG,_=i.useCallback(i=>{i.stopPropagation(),l(p({isListLayout:!d})),n?.current&&n.current.focus(),e?c(!d):(0,b.sx)(`${r?"Preferred Values Picker":"Component Insert"} View Toggle`,{viewMode:d?"grid":"list"})},[l,p,d,n,e,c,r]);return i.createElement(u.K,{"aria-label":d?(0,k.t)("design_systems.instance_swap_picker.show_as_grid"):(0,k.t)("design_systems.instance_swap_picker.show_as_list"),onClick:_,recordingKey:C.Pt("toggleGridViewButton",r?"preferredValues":"instanceSwapPicker"),htmlAttributes:{onMouseDown:W.dG,"data-tooltip":d?(0,k.t)("design_systems.instance_swap_picker.show_as_grid"):(0,k.t)("design_systems.instance_swap_picker.show_as_list"),"data-tooltip-type":e_.Ib.TEXT}},i.createElement(D.U,{svg:d?eV.A:eG.A},d?i.createElement(m.t,null):i.createElement(h.Z,null)))}function eJ({onClick:e,type:r}){let n=(0,R.qc)();if(r===R.iN.RECENT)return null;let a=(0,k.tx)("design_systems.instance_swap_picker.search_all_libraries");return n?i.createElement(d.$n,{onClick:e,variant:"secondary"},a):i.createElement(P.N_,{onClick:e,className:eB.nf,canFocus:!0,trusted:!0},a)}},843880:(e,r,n)=>{n.d(r,{g:()=>u});var i=n(925040),a=n(718451),o=n(133016),s=n(153059),l=n(778094),c=n(919699);let d=e=>e.library;function u(){return(0,i.Mz)([(e,r,n)=>r,(e,r,n)=>n,d],(e,r,n)=>{if(!r.get(e))return null;let{selectedItem:i}=(0,o.XV)(e,n,r);return i})}(0,i.Mz)([d,s.dK,l.i2],(e,r,n)=>{let i=null,{backingSymbolGUID:s,backingStateGroupGUID:l}=(0,c.nD)(new Set(n),r);if(l&&(0,a.hS)(l)?i=l:s&&(0,a.hS)(s)&&(i=s),!i)return null;let{selectedItem:d}=(0,o.XV)(i,e,r);return d})},353515:(e,r,n)=>{n.d(r,{AP:()=>o}),n(848318);var i=n(716544);n(256543);var a=n(741419);function o(){return(0,i.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===a.m1T.VECTOR)}n(673906),n(921494),n(718451),n(773422),n(207715),n(153059),n(338065),n(482710),n(139476),n(316174),n(52953),n(541910),n(949651)},509195:(e,r,n)=>{n.d(r,{Ig:()=>h,OE:()=>f,dc:()=>_,oI:()=>y,rP:()=>g,y6:()=>b});var i=n(848318),a=n(208720),o=n(741419),s=n(4340),l=n(318672),c=n(129102),d=n(360399),u=n(136031),p=n(577023);n(207694);var m=n(654445);let h=(()=>{let e=new d.o1({normalizeFactor:360,min:0,max:1}),r=new d.o1({normalizeFactor:100,min:0,max:1}),n=new d.t6({min:0,max:1}),s=new d.o1({normalizeFactor:255,min:0,max:1}),u={hsla:(n,i,a)=>a?`HSL ${e.format(n.h)}\xb0 ${r.format(n.s)} ${r.format(n.l)}`:`hsla(${e.format(n.h)}, ${r.format(n.s)}%, ${r.format(n.l)}%, ${i})`,hsba:(n,i,a)=>a?`HSB ${e.format(n.h)}\xb0 ${r.format(n.s)} ${r.format(n.v)}`:`hsba(${e.format(n.h)}, ${r.format(n.s)}%, ${r.format(n.v)}%, ${i})`,rgba:(e,r,n)=>n?`RGB ${s.format(e.r)} ${s.format(e.g)} ${s.format(e.b)}`:`rgba(${s.format(e.r)}, ${s.format(e.g)}, ${s.format(e.b)}, ${r})`,uicolor:(e,r,i)=>i?`UIColor(${n.format(e.r)}, ${n.format(e.g)}, ${n.format(e.b)}, ${r})`:`UIColor(red: ${n.format(e.r)}, green: ${n.format(e.g)}, blue: ${n.format(e.b)}, alpha: ${r})`};return()=>{let e=(0,p.Ku)();return i.useCallback((r,n)=>{let i=Number(r.a).toLocaleString("en",{maximumFractionDigits:2});switch(e){case o.NVY.HEX:let s=c.TI.format(r,n?.hexCSSValue?{withAlpha:1!==r.a}:n?.alphaInPercent?{withAlpha:1!==r.a,showDot:!0}:void 0);return`#${s}`;case o.NVY.RGB:return u.rgba(r,i,n?.eyedropperFormat);case o.NVY.CSS:if(n?.eyedropperFormat)return u.rgba(r,i,n?.eyedropperFormat);return l.F.format(r);case o.NVY.HSB:let d=(0,a.qN)(r);return u.hsba(d,i,n?.eyedropperFormat);case o.NVY.HSL:let p=(0,a.oB)(r);return u.hsla(p,i,n?.eyedropperFormat);case o.NVY.UIColor:return u.uicolor(r,i,n?.shortform??!1)}},[e])}})();function _(e,r,n){let i=new u.ZB(()=>e),a=e.opacity||1,o=[...e.color?[{...e.color,a:a*e.color.a}]:[],...e.stops?e.stops.map(e=>({...e.color,a:a*e.color.a})):[]];return{type:m.q.RAW,paint:e,colors:o,typeFormatter:i.format,valueFormatter:r,variableScope:n,encodedPaint:(0,s.GP)(e)}}function g(e,r,n,i=[]){return{type:m.q.STYLE,name:e,dsStyle:r,paints:n,styleGUIDs:i}}function f(e,r){let n=h();return i.useMemo(()=>e.map(e=>{let i=r(e);if(!i)return{value:e,color:void 0};let a=[i],o={color:i,opacity:i.a,type:"SOLID"};return{value:e,color:{type:m.q.RAW,encodedPaint:(0,s.GP)(o),paint:o,colors:a,typeFormatter:E,valueFormatter:n}}}),[r,e,n])}let E=()=>"SOLID";function y({color:e,colorVar:r,variableScope:n,displayValue:i}){let a=[e],o={color:e,opacity:e.a,type:"SOLID"};return r&&(o.colorVar=r),{type:m.q.RAW,encodedPaint:(0,s.GP)(o),paint:o,colors:a,typeFormatter:E,valueFormatter:i,variableScope:n}}function b(e,r){let n=h();return i.useMemo(()=>e.map(({color:e,colorVar:i})=>y({color:e,colorVar:i,variableScope:r,displayValue:n})),[e,n,r])}},967003:(e,r,n)=>{n.d(r,{P$:()=>th,Pi:()=>t_,So:()=>tE,eT:()=>to,rM:()=>tb,ss:()=>tT});var i,a=n(848318),o=n(716544),s=n(551316),l=n(464437),c=n(960955),d=n(596616),u=n(870685),p=n(897378),m=n(513886),h=n(376025),_=n(605988),g=n(970905),f=n(302731),E=n(754861);n(781131);var y=n(741419),b=n(673906),v=n(4340),T=n(1329),I=n(157907),S=n(39773),w=n(536384),A=n.n(w),C=n(980399),N=n(267760),L=n(579020);n(510165),n(921494);var O=n(493554),R=n(654104),P=n(983229);n(431118);var D=n(687012),M=n(63571),k=n(470403),F=n(166365),x=n(566699),U=n(35609),B=n(862713),V=n(442313),G=n(610023),H=n(667323),K=n(926252),W=n(449737),z=n(802636),$=n(545801),Y=n(947625),j=n(604613),q=n(686500),X=n(129102),Z=n(136031),J=n(584305),Q=n(727341),ee=n(992444);n(577023);var et=n(718451),er=n(207694),en=n(104720),ei=n(908813),ea=n(52004),eo=n(773422),es=n(950738);n(51910),n(369600);var el=n(705363),ec=n(747863);n(870769);var ed=n(635547),eu=n(312255),ep=n(159734);n(298473),n(931516);var em=n(483372),eh=n(576046),e_=n(503024),eg=n(651620),ef=n(614671),eE=n(245322),ey=n(555841),eb=n(153986),ev=n(936202),eT=n(176386),eI=n(147147),eS=n(754737),ew=n(763027),eA=n(784762),eC=n(924283),eN=n(208891),eL=n(189317),eO=n(501514),eR=n(256429);n(961662);var eP=n(251315),eD=n(626523),eM=n(554386),ek=n(569571),eF=n(268904),ex=n(601143);n(634649);var eU=n(678517),eB=n(696137),eV=n(23081),eG=n(429206),eH=n(191457),eK=n(949651),eW=n(538688),ez=n(318100),e$=n(243315),eY=n(885304),ej=n(708634),eq=n(558207),eX=n(931949),eZ=n(611808),eJ=n(319523),eQ=n(219205);n(468425);var e0=n(304713),e1=n(43935),e2=n(61992),e4=n(433906),e3=n(973219),e7=n(228217),e5=n(435789),e8=n(952200),e9=n(389075),e6=n(511134),te=n(470689),tt=n(985908),tr=n(991344);let tn=new Set([y.j0r.STROKE]),ti=e=>{ee.Y5.updateSelectionProperties({exportBackgroundDisabled:!e})},ta=(e,r,n,i)=>{(0,I.k)().ce_properties_panel_tracking&&(0,L.sx)("editor-paints-panel-fill-change"),ee.Y5.updateSelectionProperties({fillPaints:e},{shouldCommit:r,overwrite:i??y.WXh.ONLY_WHEN_NOT_EMPTY}),(0,eE.a2)("fillPaints")},to=a.memo(function(e){let{dispatch:r}=e,n=(0,eQ.cJ)(),i=(0,Q.GS)(),s=(0,o.d4)(e=>{let r=e.mirror.selectionProperties.fillPaints;return!r||(0,et.hS)(r)&&0===r.length}),l=(0,eq.F)("FILL"),u=a.useCallback((e,{fromSearch:n}={})=>{r(K.AV({style:e,inheritStyleKeyField:"inheritFillStyleKey",fromSearch:n}))},[r]),p=(0,et.E7)((0,ei.b)("guid")),m=(0,ek.yT)({...e,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKey",selectedStyleGuid:p}),h=(0,ew.xm)(e),_=(0,a.useCallback)(()=>{(0,I.k)().ce_properties_panel_tracking&&(0,L.sx)("editor-paints-panel-fill-color-picker-show")},[]),g=(0,ec.o3)(ec.nt.useGrid);return a.createElement(k.tH,{boundaryKey:"FillPanel",fallback:k.H4.NONE_I_KNOW_WHAT_IM_DOING},a.createElement(D.k,{name:"fill_panel"},a.createElement("div",{className:"displayContents","data-test-id":"fill_panel"},a.createElement(eR.Zk,null,a.createElement(ex.dD.Provider,{value:{useGrid:i&&g}},a.createElement(ej.d2.Provider,{value:l},a.createElement(tp,{currentSelectedProperty:e.currentSelectedProperty,isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom,onApplyStyle:u,onChange:ta,onPickerShown:_,pickerInStyleCreationShown:e.pickerInStyleCreationShown,recordingKey:R.Pt(e,"paintList"),selectedPropertyType:y.rrT.FILL,shouldUseSelectedStyleProperties:e.shouldUseSelectedStyleProperties,variableScopes:e.variableScopes,...h,...m}))),a.createElement(eI.JH,{isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom},(()=>{if(e.selectionContainsFrames&&e.hasExports&&!n){if(i){if(s)return;return a.createElement(eU.Ad,{label:a.createElement(a.Fragment,null),input:a.createElement(c.S,{muted:!0,mixed:e.exportBackgroundDisabled===et.oV,checked:!1===e.exportBackgroundDisabled,onChange:ti,recordingKey:R.Pt(e,"exportDisableCheckbox"),label:a.createElement(d.J,{htmlAttributes:{"data-tooltip":(0,V.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":e_.Ib.TEXT}},(0,V.tx)("fullscreen.properties_panel.fill.show_in_exports")),htmlAttributes:{"data-tooltip":(0,V.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":e_.Ib.TEXT}})})}return a.createElement(eR.fI,{className:e7.Kx},a.createElement(ev.t,{className:e7.kv,id:"frame-background-export-background-disabled",property:e.exportBackgroundDisabled===et.oV?et.oV:!e.exportBackgroundDisabled,onChange:ti,recordingKey:R.Pt(e,"exportDisableCheckbox")}),a.createElement(eR.JU,{className:e7.mH,htmlFor:"frame-background-export-background-disabled","data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,V.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports")},(0,V.tx)("fullscreen.properties_panel.fill.show_in_exports")))}})())))))});function ts(){(0,I.k)().ce_properties_panel_tracking&&(0,L.sx)("editor-paints-panel-stroke-color-picker-show")}class tl extends a.PureComponent{constructor(){super(...arguments),this.settingsId="stroke-settings",this.state={showSwapButton:!1,syncState:"NONE",individualBorderOption:eb.om.ALL},this.stopPropagation=e=>e.stopPropagation(),this.onPaintsChange=(e,r,n,i)=>{(0,I.k)().ce_properties_panel_tracking&&(0,L.sx)("editor-paints-panel-stroke-change",{key:"color"}),ee.Y5.updateSelectionProperties({strokePaints:e},{shouldCommit:r,overwrite:i??y.WXh.ONLY_WHEN_NOT_EMPTY}),(0,eE.a2)("strokePaints")},this.onNonPaintsChange=(e,r=em.zk.YES)=>(0,e2.w8)(this.props.strokePaints,e,r),this.onApplyStyle=(e,{fromSearch:r}={})=>{this.props.dispatch(K.AV({style:e,inheritStyleKeyField:"inheritFillStyleKeyForStroke",fromSearch:r}))},this.bordersAlignmentOnChange=(e,r=em.zk.YES)=>{if(this.state.individualBorderOption!==eb.om.ALL){let{strokeAlign:r}=e;(0,L.sx)("Individual Border Alignment Changed",{position:(0,et.hS)(r)?r:"__mixed__"})}this.onNonPaintsChange(e,r)},this.forwardedRef=a.createRef(),this.toggleSettings=()=>{if(this.props.pickerShown?.id===this.settingsId)this.props.dispatch(H.XE());else{if(!this.forwardedRef||!this.forwardedRef.current)return;(0,L.sx)("editor-paints-panel-advanced-stroke-show");let e=(0,eg.cn)(this.forwardedRef.current);this.props.dispatch(H.u1({id:this.settingsId,initialX:e.x,initialY:e.y})),this.props.dispatch(H.Uv()),this.props.dispatch(Y.sw())}},this.setIndividualBorderOption=e=>{this.setState({individualBorderOption:e})},this.onBidirectionalEndpointRowMouseEnter=e=>{this.stopPropagation(e),this.props.leftEndCap&&this.props.rightEndCap&&(0,et.hS)(this.props.leftEndCap)&&(0,et.hS)(this.props.rightEndCap)&&this.props.leftEndCap!==this.props.rightEndCap&&this.setState({showSwapButton:!0})},this.onBidirectionalEndpointRowMouseLeave=e=>{this.stopPropagation(e),this.hideSwapButton()},this.hideSwapButton=()=>{this.setState({showSwapButton:!1})},this.updateSyncState=e=>{if("reset"===e){this.setState({syncState:"NONE"});return}switch(this.state.syncState){case"NONE":"changed start"===e?this.setState({syncState:"CHANGED_START"}):"changed end"===e&&this.setState({syncState:"CHANGED_END"});break;case"CHANGED_START":"changed end"===e&&this.setState({syncState:"CHANGED_BOTH"});break;case"CHANGED_END":"changed start"===e&&this.setState({syncState:"CHANGED_BOTH"})}},this.componentDidUpdate=e=>{e.sceneGraphSelection!==this.props.sceneGraphSelection&&this.setState({syncState:"NONE",individualBorderOption:eb.om.ALL})}}render(){let e=(0,ek.yT)({...this.props,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKeyForStroke"}),r=(0,e2.Fc)(this.props.numSelectedByType,this.props.strokePaints,e.inheritStyleKey),n=this.props.pickerShown?.id===this.settingsId,i=this.props.strokePanelMode!==y.yTM.WASHI_TAPE;return a.createElement(D.k,{name:"stroke_panel"},a.createElement(eR.Zk,{"data-testid":"stroke-panel-id"},a.createElement(tp,{currentSelectedProperty:this.props.currentSelectedProperty,onApplyStyle:this.onApplyStyle,onChange:this.onPaintsChange,onPickerShown:ts,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,recordingKey:R.Pt(this.props,"paintList"),selectedPropertyType:y.rrT.STROKE,variableScopes:tn,...(0,ew.Rz)(this.props),...e,advancedSettingsTooltip:(0,V.t)("fullscreen.properties_panel.fill.advanced_stroke_settings"),isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom,onToggleAdvancedSettings:r&&i?this.toggleSettings:void 0,onToggleListLayout:this.toggleSettings}),r&&a.createElement(e1.t,{arcRadius:this.props.arcRadius,borderSharedWeight:this.props.borderSharedWeight,connectorLineStyle:this.props.connectorLineStyle,dashCap:this.props.dashCap,dashPattern:this.props.dashPattern,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,forwardedRef:this.forwardedRef,hideSwapButton:this.hideSwapButton,individualBorderOption:this.state.individualBorderOption,leftEndCap:this.props.leftEndCap,maxStrokeWeight:this.props.maxStrokeWeight,miterLimitAngle:this.props.miterLimitAngle,numSelectedByType:this.props.numSelectedByType,onBidirectionalEndpointRowMouseEnter:this.onBidirectionalEndpointRowMouseEnter,onBidirectionalEndpointRowMouseLeave:this.onBidirectionalEndpointRowMouseLeave,onBordersAlignmentChange:this.bordersAlignmentOnChange,onNonPaintsChange:this.onNonPaintsChange,pickerShown:this.props.pickerShown,recordingKey:this.props.recordingKey,rightEndCap:this.props.rightEndCap,setIndividualBorderOption:this.setIndividualBorderOption,showAdvancedStrokeSettings:i,showStrokePicker:n,showSwapButton:this.state.showSwapButton,stopPropagation:this.stopPropagation,strokeAlign:this.props.strokeAlign,strokeCap:this.props.strokeCap,strokeJoin:this.props.strokeJoin,syncState:this.state.syncState,terminalCap:this.props.terminalCap,toggleSettings:this.toggleSettings,updateSyncState:this.updateSyncState})))}}tl.displayName="StrokePanel";let tc=(0,eO.b)(),td=(0,eO.b)(),tu=a.memo(function({title:e,propertyList:r,onChange:n,onApplyStyle:i,addProperty:s,overrideAddPropertyTooltip:l,onReorder:c,renderProperty:d,onDeleteProperty:u,onToggleListLayout:p,styleType:m,inheritStyleKey:h,inheritStyleKeyField:_,inheritStyleID:g,stylePickerListLayout:f,removeAllProperties:E,library:b,defaultColor:v,openFile:T,stylePickerShown:I,currentSelectedProperty:S,selectedPropertyType:w,modalShown:A,sceneGraphSelection:C,recordingKey:N,onToggleAdvancedSettings:L,advancedSettingsTooltip:O,isPanelBodyCollapsedAtom:P,selectedStyleGuid:D,entrypointMenu:M}){let k=(0,o.wA)(),F=(0,el.Xo)(),x=(0,es.Um)(),U=!!a.useContext(eS.zK),B=U?`style-modal-${(0,eW.qj)(_)}`:(0,eW.qj)(_),V=(0,ek.WH)(h,g,m),G=(0,eM.AH)(V?.key??null,(0,et.E7)(g)),K=V?.isLocal?V:G?.status==="loaded"?G.data:null,W=function(){let e=(0,eo.Rb)(),r=(0,eo.Pt)(),n=e.length>0,i=Object.keys(r).length>0;return n||i}(),z=r&&(0,et.hS)(r)&&(r.length>1||r.some(e=>!(0,er.sb)(e.type)))?"createStyle":W?"createVariable":"createStyle",$=a.useCallback(()=>F&&F.id===B?F:null,[F,B]),Y=a.useCallback(({initialX:e,initialY:r})=>{$()?k(H.XE()):k(H.u1({id:B,initialX:e,initialY:r}))},[k,B,$]),j=a.useCallback(e=>{Y(e)},[Y]),q=a.useCallback((e,r)=>{n([e],r,void 0,y.WXh.ONLY_WHEN_NOT_DISABLED)},[n]),X=(0,ea.kl)("numSelectedByType"),Z=(0,eI.y5)(P||null),J=a.useCallback(()=>{s(),Z()},[s,Z]),Q=a.useMemo(()=>{if(X)return(0,e$.aZ)(w,X)},[w,X]);return a.createElement(a.Fragment,null,a.createElement(eN.Kx,{addProperty:J,advancedSettingsTooltip:O,currentSelectedProperty:S,dispatch:k,dropdownShown:x,entrypointMenu:M,inheritStyleID:g,inheritStyleKey:h,inheritStyleKeyField:_,isPanelBodyCollapsedAtom:P,library:b,modalShown:A,onChange:n,onDeleteProperty:u,onPickerIconClick:j,onReorder:c,onToggleAdvancedSettings:L,onToggleListLayout:p,openFile:T,overrideAddPropertyTooltip:l,pickerShown:F,propertyList:r,recordingKey:N,removeAllProperties:E,renderProperty:d,sceneGraphSelection:C,selectedPropertyType:w,selectedStyleGuid:D,stylePickerListLayout:f,stylePickerShown:I,styleType:m,title:e}),(()=>{let e=$();if(!e)return;let n=r&&(0,et.hS)(r)&&1===r.length?r[0]:{type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1};return a.createElement(ew.ku,{canPickerShowColorContrast:!U,defaultColor:v,dropdownShown:x,hasVisiblePaintBelow:!1,inheritStyleKeyField:_,initialCreationModalView:z,initialView:"library",isInStyleModal:U,onApplyStyle:U?void 0:i,onChange:q,paint:n,paintId:(0,ek.OS)(_),pickerShown:e,recordingKey:R.Pt(N,"paintPicker"),selectedStyle:K,supportedViews:["library"],variableScopes:Q})})())});function tp(e){let r=(0,a.useContext)(eS.zK),n=(0,o.wA)(),i=null!=r,s=(0,a.useCallback)(()=>i,[i]),l=(0,ea.ER)(),c=(0,et.E7)((0,ei.b)("guid")),d=(0,o.d4)(r=>{let n=e.selectedPropertyType===y.rrT.STROKE?"strokePaints":"fillPaints";return e.shouldUseSelectedStyleProperties?r.mirror.selectedStyleProperties[n]:r.mirror.selectionProperties[n]}),u=(0,a.useCallback)(r=>{switch(e.selectedPropertyType){case y.rrT.STROKE:if(!l){(0,eE.a2)("strokePaints"),ee.Y5.triggerActionInUserEditScope("add-stroke-to-selection");let e=(0,et._W)(d,[]);S.zl.set(td,e.length)}break;case y.rrT.FILL:if(l)ee.Y5.triggerActionInUserEditScope("add-fill-to-style-selection");else{ee.Y5.triggerActionInUserEditScope("add-fill-to-selection",{paintType:r});let e=(0,et._W)(d,[]);S.zl.set(tc,e.length)}(0,eE.a2)("fillPaints")}},[l,d,e.selectedPropertyType]),{onChange:p,stylePickerShown:m,inheritStyleKeyField:h,selectedPropertyType:_,pickerInStyleCreationShown:g,variableScopes:f,pickerShown:E,onApplyStyle:b,onPickerShown:v,recordingKey:T}=e,I=(0,a.useCallback)(e=>{s()||n(H.XE()),n(H.Uv());let r=(0,et._W)(d,[]).filter((r,n)=>n!==e);(0,ey.f)(y.VD3.IGNORE,y.e0R.UNKNOWN,()=>{p(r)}),ee.Y5.deselectProperty()},[s,p,n,d]),w=(0,Q.GS)(),A=(0,a.useCallback)((e,r,n,i)=>{p(e,r,void 0,i),(0,et._W)(d,[]).length!==e.length&&er.Tm.clearCache()},[p,d]),C=(0,a.useCallback)(()=>{er.Tm.clearCache()},[]),N=(0,a.useCallback)(()=>{n(H.Y({isListLayout:!e.stylePickerListLayout})),n(Y.sw())},[n,e.stylePickerListLayout]),L=(0,ew.xm)(e),{useGrid:O}=a.useContext(ex.dD),P=(0,a.useCallback)((e,r,n,i,o,l,c,u,p)=>{let y=s()?"preview-paint":"paint",S=er.Tm.getId(r,_,y),A=(0,et._W)(d,[]).slice(0,r).some(e=>e.visible);return a.createElement(tm,{key:O?void 0:`paint-${r}`,hasFocus:o,hasVisiblePaintBelow:A,id:S,index:r,inheritStyleKeyField:h,isDragging:i,isUI3:w,onApplyStyle:b,onChange:l,onMouseDown:c,onMouseMove:u,onMouseUp:p,onPickerShown:v,onRemovePaint:()=>I(r),paint:e,pickerInStyleCreationShown:g,recordingKey:R.Pt(T,r),selected:m.isShown?E?.id===S:n,selectedPropertyType:_,singletonRow:(0,et._W)(d,[]).length<=1,stylePickerShown:m,variableScopes:f,...L})},[s,_,d,O,h,m,E?.id,v,g,b,T,f,w,L,I]),D=(()=>{if(!w)return;let r=(0,et._W)(d,[]);switch(e.selectedPropertyType){case y.rrT.STROKE:return 0===r.length?(0,V.t)("fullscreen.properties_panel.section_stroke.tooltip_addStroke"):(0,V.t)("fullscreen.properties_panel.section_stroke.tooltip_addStrokeFill");case y.rrT.FILL:return(0,V.t)("fullscreen.properties_panel.section_fill.tooltip_addFill");default:return}})();return a.createElement(tu,{addProperty:u,currentSelectedProperty:e.currentSelectedProperty,onChange:A,onReorder:C,overrideAddPropertyTooltip:D,pickerShown:e.pickerShown,propertyList:d,recordingKey:e.recordingKey,renderProperty:P,selectedPropertyType:e.selectedPropertyType,title:(()=>{switch(e.selectedPropertyType){case y.rrT.STROKE:return(0,V.t)("fullscreen.properties_panel.fill.stroke");case y.rrT.FILL:return(0,V.t)("fullscreen.properties_panel.fill.fill");default:return""}})(),...(0,ek.yT)(e),advancedSettingsTooltip:w?e.advancedSettingsTooltip:void 0,defaultColor:e.defaultColor,entrypointMenu:e.selectedPropertyType===y.rrT.FILL&&a.createElement(eZ.ZQ,{addPaintOfType:u}),isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom,library:e.library,onApplyStyle:e.onApplyStyle,onToggleAdvancedSettings:w?e.onToggleAdvancedSettings:void 0,onToggleListLayout:N,selectedStyleGuid:c??null})}class tm extends a.PureComponent{constructor(){super(...arguments),this.state={isDragHover:!1},this.context=null,this.row=a.createRef(),this.pickerShownInStyleModal=()=>!this.isInStyleModal()&&!!this.props.pickerInStyleCreationShown,this.handleOpenImagePicker=e=>{this.props.selectedPropertyType!==e.propertyType||this.props.index!==e.index||this.pickerShown()||this.pickerShownInStyleModal()||this.showPicker()},this.handleCloseImagePicker=e=>{this.props.selectedPropertyType===e.propertyType&&this.props.index===e.index&&this.pickerShown()&&this.hidePicker()},this.onPaintPickerChange=(e,r)=>{e.visible=!0,this.props.onChange(e,r)},this.onVisibleChange=e=>{this.props.onChange({...this.props.paint,visible:e})},this.pickerShown=()=>this.isInStyleModal()?this.props.pickerInStyleCreationShown?.id===this.props.id?this.props.pickerInStyleCreationShown:null:this.props.pickerShown?.id===this.props.id?this.props.pickerShown:null,this.showPicker=()=>{if(!this.row.current)return;let e=(0,eg.cn)(this.row.current);this.props.onPickerShown?.(),ee.Y5.updateAppModel({currentSelectedProperty:{type:this.props.selectedPropertyType,indices:[this.props.index]}}),this.isInStyleModal()?this.props.dispatch((0,z.D)({id:this.props.id,initialX:e.x,initialY:e.y})):this.props.dispatch(H.u1({id:this.props.id,initialX:e.x,initialY:e.y,data:{isInStyleModal:this.isInStyleModal()}})),this.isInStyleModal()||(this.props.dispatch(Y.sw()),this.props.dispatch(H.Uv()))},this.hidePicker=()=>{this.isInStyleModal()?this.props.dispatch((0,z.w)()):this.props.dispatch(H.XE()),ee.Y5.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.isDragTarget=()=>!!(0,et.E7)(this.props.paint),this.onDragEnter=()=>{this.setState({isDragHover:!0})},this.onDragLeave=()=>{this.setState({isDragHover:!1})},this.onDrop=e=>{this.setState({...this.state,isDragHover:!1});let r=(0,et.E7)(this.props.paint);if(!r)return;let n=ee.Y5.fileArrayToString;if(n){let i=n(Array.from(e.files));y.glU.dropImageOnPaintThumbnail(r.blendMode||"NORMAL",r.opacity||1,i,this.props.index,this.props.selectedPropertyType)}},this.dropImageOnPaintThumbnail=(e,r,n)=>{let i=ee.Y5.fileArrayToString;if(i){let a=i(Array.from(n.files));y.glU.dropImageOnPaintThumbnail(e,r,a,this.props.index,this.props.selectedPropertyType)}},this.updateStillImageAndSelectionPropertiesForGIF=(e,r)=>b.l7.user("update-gif-image",()=>(0,en.SK)(e,r,this.props.selectedPropertyType)),this.onDetachVariableClick=()=>{(0,ey.f)(y.VD3.VARIABLE_DETACH,y.e0R.DIRECT,()=>{let e=(0,eG.$)(this.props.paint);this.onPaintPickerChange(e,em.zk.YES)})}}isInStyleModal(){return null!=this.context}componentDidMount(){this.isInStyleModal()||(ee.Y5.fromFullscreen.on("openImagePicker",this.handleOpenImagePicker),ee.Y5.fromFullscreen.on("closeImagePicker",this.handleCloseImagePicker))}componentWillUnmount(){this.isInStyleModal()||(ee.Y5.fromFullscreen.removeListener("openImagePicker",this.handleOpenImagePicker),ee.Y5.fromFullscreen.removeListener("closeImagePicker",this.handleCloseImagePicker)),this.isInStyleModal()&&this.pickerShown()&&this.hidePicker()}hasBoundPaintVariable(){return(0,G.U9)()?!!this.props.paint.colorVar||!!this.props.paint.imageVar:!!this.props.paint.colorVar}get lastAddedItemIndexAtom(){if(this.isInStyleModal())return null;switch(this.props.selectedPropertyType){case y.rrT.FILL:return tc;case y.rrT.STROKE:return td;default:return null}}render(){let e=this.renderButtons();return a.createElement("div",null,(0,I.k)().ce_tv_new_row_open_modal&&this.lastAddedItemIndexAtom&&a.createElement(eO.O,{lastAddedItemIndexAtom:this.lastAddedItemIndexAtom,index:this.props.index,callback:()=>this.showPicker()}),a.createElement(M.Y,{isDragTarget:this.isDragTarget,onTargetDragEnter:this.onDragEnter,onTargetDragLeave:this.onDragLeave,onTargetDrop:this.onDrop,recordingKey:R.Pt(this.props,"dropTarget")},a.createElement("div",null,a.createElement(t_,{ref:this.row,enableVariableDetach:!0,firstIconButton:e.length>0?e[0]:null,hasFocus:this.props.hasFocus,id:this.props.id,isDragHover:this.state.isDragHover,isDragging:this.props.isDragging,isUI3:this.props.isUI3,noBorderOnFocus:this.props.noBorderOnFocus,onChange:this.props.onChange,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,paint:this.props.paint,recordingKey:this.props.recordingKey,secondIconButton:e.length>1?e[1]:null,selected:this.props.selected,shownPickerMatchesThisPaint:!!this.pickerShown(),singletonRow:this.props.singletonRow,togglePicker:this.togglePicker,...(0,ew.Rz)(this.props)}))),this.pickerShown()&&a.createElement(ew.ku,{canPickerShowColorContrast:!this.isInStyleModal(),defaultColor:this.props.defaultColor,disablePatternPaints:this.props.selectedPropertyType!==y.rrT.FILL&&this.props.selectedPropertyType!==y.rrT.STROKE||this.isInStyleModal(),dropImageOnPaintThumbnail:this.dropImageOnPaintThumbnail,dropdownShown:this.props.dropdownShown,hasVisiblePaintBelow:this.props.hasVisiblePaintBelow,inheritStyleKeyField:this.props.inheritStyleKeyField,isInStyleModal:this.isInStyleModal(),onApplyStyle:this.isInStyleModal()?void 0:this.props.onApplyStyle,onChange:this.onPaintPickerChange,onClose:this.hidePicker,paint:this.props.paint,paintId:this.props.id,pickerShown:this.pickerShown(),recordingKey:R.Pt(this.props,"paintPicker"),selectedStyle:null,updateStillImageAndSelectionPropertiesForGIF:this.updateStillImageAndSelectionPropertiesForGIF,variableScopes:this.props.variableScopes}))}renderButtons(){let e=[],r=this.props.isUI3?this.props.selected&&this.props.hasFocus:void 0;if(this.props.hideVisibilityToggle||!(0,I.k)().ds_qw_variable_and_style_visibility&&this.hasBoundPaintVariable()||e.push({button:a.createElement(eV.B,{visible:this.props.paint.visible,onChange:this.onVisibleChange,recordingKey:R.Pt(this.props,"visibleToggle"),selected:r}),opensPicker:!1,key:"visibleToggle"}),!(0,I.k)().ds_qw_variable_and_style_visibility&&this.hasBoundPaintVariable()&&e.push({button:a.createElement("span",{className:e7.zm},a.createElement(u.T,{selected:r},a.createElement(p.K,{"aria-label":(0,V.t)("fullscreen.properties_panel.fill.detach_variable"),onClick:this.onDetachVariableClick,recordingKey:R.Pt(this.props,"paint","detachVariableButton"),htmlAttributes:{onMouseDown:J.dG,"data-tooltip":(0,V.t)("fullscreen.properties_panel.fill.detach_variable"),"data-tooltip-type":e_.Ib.TEXT}},a.createElement(x.U,{svg:e5.A},a.createElement(_.U,null))))),opensPicker:!1,key:"detatchVariableButton"}),this.props.onRemovePaint){let n=this.props.isUI3?{"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,V.t)("fullscreen.properties_panel.fill.remove")}:{};e.push({button:a.createElement(u.T,{selected:r},a.createElement(p.K,{recordingKey:R.Pt(this.props,"removeButton"),onClick:this.props.onRemovePaint,"aria-label":(0,V.t)("fullscreen.properties_panel.fill.remove"),htmlAttributes:{...n,onMouseDown:J.dG}},a.createElement(x.U,{svg:e8.A,fallbackSvg:e9.A},a.createElement(g.O,null)))),opensPicker:!1,key:"removeButton"})}return e}}function th({children:e}){return a.createElement(m.o,{eventListeners:["onFocus"],display:"contents"},e)}tm.displayName="PaintListItem",tm.contextType=eS.zK;let t_=a.forwardRef((e,r)=>{let n;let i=r=>{(r.shiftKey||2&r.buttons)&&r.preventDefault(),r.stopPropagation(),e.togglePicker()},o=()=>{e.onFocus?.(),e.shownPickerMatchesThisPaint&&!s()&&e.togglePicker()},s=()=>{let r;return(r=(0,G.U9)()?e.paint.colorVar||e.paint.imageVar:e.paint.colorVar)&&("ALIAS"===r.dataType||"CMS_ALIAS"===r.dataType)?r:null},l=()=>{(0,ey.f)(y.VD3.VARIABLE_DETACH,y.e0R.DIRECT,()=>{let r=(0,eG.$)(e.paint);r.visible=!0,e.onChange(r,em.zk.YES)})};function c({boundVariableData:r}){let n={onDetachClick:l,enableDetach:e.enableVariableDetach},o="ALIAS"===r.dataType?r.value?.alias:void 0;return a.createElement(a.Fragment,null,"CMS_ALIAS"===r.dataType&&a.createElement(eY.y,{isSelected:e.selected&&e.hasFocus},a.createElement(tv,{selected:e.selected,boundPaintVariable:r,hasFocus:e.hasFocus,paint:e.paint,onClick:i,recordingKey:e.recordingKey,...n})),"ALIAS"===r.dataType&&o&&a.createElement(eY.y,{isSelected:e.selected&&e.hasFocus},a.createElement(tb,{selected:e.selected,variableId:o,hasFocus:e.hasFocus,paint:e.paint,onClick:i,recordingKey:e.recordingKey,...n})))}(0,a.useEffect)(()=>()=>{e.onInputBlur&&e.onInputBlur()},[]);let{useGrid:d}=(0,a.useContext)(ex.dD),{useLargePreviewRows:u}=(0,a.useContext)(ep.Q),p=s(),m=e.firstIconButton?a.createElement(tf,{opensPicker:e.firstIconButton.opensPicker,componentKey:e.firstIconButton.key},e.firstIconButton.button):null,h=e.secondIconButton?a.createElement(tf,{opensPicker:e.secondIconButton.opensPicker,componentKey:e.secondIconButton.key},e.secondIconButton.button):null,_=e.selected&&!e.hasFocus,g=e.fitToSize?e7.Cv:e7.BT,f=e.fitToSize?e7.np:e7.wM,E=(0,ex.Qu)();n=(0,I.k)().eu_fpl_migration_button&&e.isUI3?a.createElement("div",{onKeyDown:E,className:A()(p?g:f,{[e7.NI]:e.selected,[e7.L3]:_,[e7.mK]:d}),"data-onboarding-key":(0,eu.Lh)(eu.D8.PAINT_PANEL_ROW,e.id)},p?c({boundVariableData:p}):a.createElement(tg,{allowAutoAndMixed:e.allowAutoAndMixed,chitOverride:e.chitOverride,clearPaintFromCache:()=>er.Tm.clearCache(e.id),disableOpacity:e.disableOpacity,onChange:e.onChange,onInputBlur:e.onInputBlur,onInputFocus:e.onInputFocus,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,paint:e.paint,recordingKey:e.recordingKey,togglePicker:e.togglePicker})):a.createElement("div",{className:A()(p?g:f,{[e7.NI]:e.selected,[e7.L3]:_,[e7.mK]:d}),onMouseDown:i,onMouseDownCapture:r=>{if(r.shiftKey||2&r.buttons){e.togglePicker(),r.preventDefault(),r.stopPropagation();return}},onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},"data-onboarding-key":(0,eu.Lh)(eu.D8.PAINT_PANEL_ROW,e.id)},p?c({boundVariableData:p}):a.createElement(tg,{allowAutoAndMixed:e.allowAutoAndMixed,chitOverride:e.chitOverride,clearPaintFromCache:()=>er.Tm.clearCache(e.id),disableOpacity:e.disableOpacity,onChange:e.onChange,onInputBlur:e.onInputBlur,onInputFocus:e.onInputFocus,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,paint:e.paint,recordingKey:e.recordingKey,togglePicker:e.togglePicker}));let b=a.createElement("div",{className:e7.RK,"data-onboarding-key":(0,eu.Lh)(eu.D8.PAINT_PANEL_ROW,e.id)},n,a.createElement("div",{className:e7.$r},m,h));if(e.preventDragging){if(e.isUI3){let i=(0,I.k)().eu_fpl_migration_ui3_one_input_two_icon_row?eU.pG:eB.JJ;return a.createElement(i,{ref:r,appendedClassName:A()(e7.p,{[e7.Tp]:e.isDragHover,[e3.CZ]:e.selected,[e3.kR]:_}),input:n,leftIcon:m,onFocus:o,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,recordingKey:e.recordingKey,rightIcon:h})}return a.createElement(eR.fI,{ref:r,className:e.isDragHover?`${e7.Tp} ${e7.p}`:e7.p,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,onFocus:o,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp},b)}if(e.isUI3){let s=A()(e7.p,{[e7.Tp]:e.isDragHover,[e3.CZ]:e.selected,[e3.kR]:e.selected&&!e.hasFocus});return u?a.createElement(eJ.zY,{ref:r,dragging:e.isDragging,firstIconButton:m||void 0,hasFocus:e.hasFocus,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,onPreviewClick:i,onRowFocus:o,paint:e.paint,previewActive:e.shownPickerMatchesThisPaint,recordingKey:e.recordingKey,secondIconButton:h||void 0,selected:!!e.selected,singletonRow:e.singletonRow,variableId:p?.value?.alias}):d?null===m||null===h?a.createElement(ex.lt,{appendedClassName:s,singletonRow:e.singletonRow,input:n,icon:m||h,ref:r,onFocus:o,selected:e.selected,hasFocus:e.hasFocus}):a.createElement(ex.z$,{appendedClassName:s,singletonRow:e.singletonRow,input:n,leftIcon:m,rightIcon:h,ref:r,onFocus:o,selected:e.selected,hasFocus:e.hasFocus}):a.createElement(eU.Y9,{ref:r,dragging:e.isDragging,onFocus:o,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,recordingKey:e.recordingKey,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,singletonRow:e.singletonRow},null===m||null===h?a.createElement(eU.DE,{appendedClassName:s,input:n,icon:m||h,label:null}):a.createElement(eU.pG,{appendedClassName:s,input:n,leftIcon:m,rightIcon:h}))}return a.createElement(eC.e,{ref:r,className:e.isDragHover?`${e7.Tp} ${e7.p}`:e7.p,dragging:e.isDragging,onFocus:o,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,recordingKey:e.recordingKey,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,shiftGrabberOnInputFocus:!0,singletonRow:e.singletonRow},b)});function tg(e){let r=(0,eF.R)(),n=r=>{r.stopPropagation(),e.togglePicker()},i=(r,n=!0)=>{r.visible=!0,e.onChange(r),n&&e.clearPaintFromCache?.()},s=A()({[e7.EC]:!e.paint.visible||e.disableOpacity}),c=(0,o.wA)(),d=e.chitOverride?e.chitOverride:{paint:e.paint},{useGrid:u}=(0,a.useContext)(ex.dD);return a.createElement(a.Fragment,null,a.createElement(th,null,a.createElement(eT.J,{...d,onMouseDown:n,recordingKey:R.Pt(e,"chit"),className:e7.x7,isInFPLGrid:u})),a.createElement(tE,{...e,isUI3:r,onFocus:e.onInputFocus,onBlur:e.onInputBlur,visible:e.paint.visible,onTypeMouseDown:n,onMouseDown:J.dG,onColorChange:r=>{let n={...e.paint,color:r};(0,l.xN)(r.a,e.paint.opacity??1)||(n.opacity=r.a,n.visible=!0),i(n)},recordingKey:R.Pt(e,"value"),noBorderOnFocus:!0}),(!e.allowAutoAndMixed||!(0,et.SX)(e.paint.color)&&!(0,et.gl)(e.paint.color))&&a.createElement(ef.Pd,{className:e7.n1,dispatch:c,inputClassName:s,noBorderOnFocus:!0,noLeftBorder:!0,onBlur:e.onInputBlur,onFocus:e.onInputFocus,onMouseDown:J.dG,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,onValueChange:(r,n)=>{e.onChange({...e.paint,opacity:r,visible:!0},n)},recordingKey:R.Pt(e,"opacity"),value:e.paint.opacity}))}function tf(e){return e.opensPicker?a.createElement(th,{key:e.componentKey},e.children):a.createElement(a.Fragment,{key:e.componentKey},e.children)}function tE(e){let r=(0,a.useMemo)(()=>e.allowAutoAndMixed?new X.C1({parseAlpha:!0}):new X.rC({parseAlpha:!0}),[e.allowAutoAndMixed]),n=(0,a.useMemo)(()=>new Z.ZB(()=>e.paint),[e.paint]),i=(0,a.useMemo)(()=>e.allowAutoAndMixed&&((0,et.SX)(e.paint.color)||(0,et.gl)(e.paint.color))?e.paint.color:e.paint.color&&{...e.paint.color,a:e.paint.opacity??1},[e.allowAutoAndMixed,e.paint]),o=R.rf(e.recordingKey,"mousedown",r=>{e.onMouseDown?.(r),e.onTypeMouseDown?.(r)}),s=(0,ex.Qu)();return"SOLID"===e.paint.type?a.createElement(eL.AN,{ariaLabel:(0,V.t)("fullscreen.color"),className:A()(e.visible?e7.EX:e7.wh,e.appendedColorInputClassname),formatter:r,forwardedRef:e.focusableRef,noBorderOnFocus:e.noBorderOnFocus,noLeftBorder:!1,onBlur:e.onBlur,onChange:e.onColorChange,onFocus:e.onFocus,onKeyDown:s,onMouseDown:e.onMouseDown,property:i,recordingKey:R.Pt(e,"colorInput"),squareRightBorder:!1}):(0,I.k)().eu_fpl_migration_button?a.createElement(h.E,{className:e.visible?e7.cD:e7.GI,onClick:o,actionOnPointerDown:!0},n.format(e.paint.type)):a.createElement("div",{className:e.visible?e7.cD:e7.GI,onMouseDown:o},n.format(e.paint.type))}function ty({variableName:e,variableDescription:r,variableValue:n,isVariableDeleted:i,paint:o,onClick:s,recordingKey:l,selected:c,hasFocus:d,onDetachClick:u,enableDetach:m}){let h=(0,eF.R)(),g=null;i||(g=(0,I.k)().eu_fpl_migration_button&&h?a.createElement(eT.J,{paint:o,className:h?"":e7.x7}):a.createElement(th,null,a.createElement(eT.J,{paint:o,onMouseDown:s,className:h?"":e7.x7,recordingKey:R.Pt(l,"chit")})));let f=(0,I.k)().ds_qw_variable_and_style_visibility&&m?a.createElement("span",{className:e7.zm},a.createElement(p.K,{"aria-label":(0,V.t)("fullscreen.properties_panel.fill.detach_variable"),onClick:u,recordingKey:R.Pt(l,"paint","detachVariableButton"),htmlAttributes:{onMouseDown:J.dG,"data-tooltip":(0,V.t)("fullscreen.properties_panel.fill.detach_variable"),"data-tooltip-type":e_.Ib.TEXT}},a.createElement(x.U,{svg:e5.A},a.createElement(_.U,null)))):a.createElement(a.Fragment,null);return h?a.createElement(a.Fragment,null,a.createElement(tT,{selected:c,hasFocus:d,styleIcon:g||a.createElement("div",{"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,V.t)("variables.variable_was_deleted")},a.createElement(F.B,{className:e7.Bx,svg:tr.A})),styleName:e,styleDescription:r,styleValue:n,onClick:s,shouldStretch:(0,I.k)().ds_qw_variable_and_style_visibility,recordingKey:R.Pt(l,"styleButton")}),f):a.createElement(a.Fragment,null,g,a.createElement("div",{className:e7.eV},a.createElement(ez.wG,{isDeleted:i,text:e,variableDescription:r,variableValue:n})),f)}function tb({variableId:e,...r}){let n=(0,eo.u)(T.dI(e)),i=n?.name??"",o=n?.description,s=!!n&&(0,eK.eF)(n),l=r.paint,c=l.color&&l.opacity?`${(0,C.colorToHex)(l.color)}, ${(100*l.opacity).toLocaleString("en",{maximumFractionDigits:2})}%`:void 0;return a.createElement(ty,{...r,variableName:i,variableDescription:o,variableValue:c,isVariableDeleted:s})}function tv({boundPaintVariable:e,...r}){let n=e?.value?.cmsAliasValue?.fieldId,i=(0,O.Rs)(ed.xSN,{id:n??""},{enabled:!!n});if(e?.dataType==="CMS_ALIAS"&&"loaded"!==i.status||!i.data?.collectionFieldSchema)return null;let o=N.oA(i.data?.collectionFieldSchema)?.name??"";return a.createElement(ty,{...r,variableName:o,variableDescription:void 0,variableValue:void 0,isVariableDeleted:!1})}function tT(e){let{styleIcon:r,styleName:n,styleDescription:i,styleValue:o,selected:s,hasFocus:l,disableHover:c,shouldStretch:d,recordingKey:u,onClick:p,...m}=e,_=(0,eH.Y)(n,i,o),g=A()(e4.W1,{[e4.BI]:!c,[e4.C_]:s&&!l,[e4.wH]:s&&l,[e4.t7]:d}),f=A()({[e4.Hs]:(0,I.k)().eu_fpl_migration_button}),E=a.createElement(a.Fragment,null,a.createElement("div",{className:e4.hg},r),a.createElement("div",{className:e4.p3},a.createElement(U.G,{className:f,text:n,showTooltip:B.i.ALWAYS,getTooltipText:_})));return(0,I.k)().eu_fpl_migration_button?p?a.createElement(h.E,{className:g,recordingKey:u,actionOnPointerDown:!0,onClick:p,htmlAttributes:{onContextMenu:p}},E):a.createElement("div",{className:g},E):a.createElement(P.GG,{recordingKey:u,onMouseDown:p,...m,className:g},E)}t_.displayName="Paint",(e=>{class r extends a.PureComponent{constructor(){super(...arguments),this.state={hasEverHovered:!1},this.row=a.createRef(),this.paintPickerInitialView=void 0,this.componentWillUnmount=()=>{this.props.dispatch($.oI({paintId:void 0,originalPaint:void 0,updatedPaintFromDropper:void 0}))},this.pickerShownIsStylePicker=()=>this.props.stylePickerShown.isShown&&this.props.stylePickerShown.id===this.stylePickerID(),this.pickerShown=()=>this.props.pickerShown?.id===this.pickerID(),this.showPicker=()=>{if(!this.row.current)return;let e=(0,eg.cn)(this.row.current);this.props.dispatch(H.u1({id:this.pickerID(),initialX:e.x,initialY:e.y})),this.props.dispatch(Y.sw()),this.props.dispatch(H.Uv()),this.props.dispatch($.oI({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.hidePicker=()=>{this.props.dispatch(H.XE()),ee.Y5.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.toggleStylePicker=()=>{this.pickerShownIsStylePicker()?this.hidePicker():this.row.current&&this.props.showPicker(this.stylePickerID(),this.row.current)},this.toggleListLayout=()=>{this.props.setPickerListLayout(!this.props.stylePickerListLayout)},this.onCreateStyle=()=>{let e=(0,v.GP)(this.props.paint),r=y.Osy.paintDataNodesInPaint(e);this.props.dispatch(W.to({type:eX.t,data:{originalPaint:this.props.paint,paintDataNodesInPaint:r,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"create"}}})),this.hidePicker()},this.onApplyStyle=e=>{let r=y.Osy.paintDataNodesInPaint((0,v.GP)(this.props.paint));this.props.dispatch(K.nh({style:e,callback:e=>{if(r.length>1)this.props.dispatch(W.to({type:eX.t,data:{originalPaint:this.props.paint,paintDataNodesInPaint:r,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"apply",styleGuid:e}}}));else{let r=(0,v.GP)(this.props.paint);b.l7.user("apply-style",()=>y.Osy.applyStyleToPaintDatas(r,e)),(0,L.sx)("Apply Style to Selection Paint ",{count:this.props.uniqueNodesCount})}}})),this.hidePicker()},this.debouncedTrackPaintChangeFromPicker=(0,s.s)(e=>{(0,L.sx)("Edit Selection Paint",{fileKey:this.props.openFile?.key||"",count:this.props.count})}),this.onChangeForPaint=(e,r)=>{let n=r==em.zk.YES,i=(0,eA.U2)(e)||e.colorVar?y.Osy.resolvePaintWithVariable((0,v.GP)(this.props.paint),(0,v.GP)(e)):"",a=e;if(i){let r=(0,eh.K)(i);a=r?.paint||e}b.l7.user("change-paint",()=>y.Osy.updatePaint((0,v.GP)(this.props.paint),(0,v.GP)(a),n,(0,v.GP)(this.currentPaintValue()))),this.setState({paintValueInPicker:a}),this.props.dispatch($.oI({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.onChangeForPaintPicker=(e,r)=>{this.onChangeForPaint(e,r),this.debouncedTrackPaintChangeFromPicker(e)},this.debouncedOnChangeForPaintPicker=(0,s.s)(this.onChangeForPaintPicker),this.onDetachVariableClick=()=>{(0,ey.f)(y.VD3.VARIABLE_DETACH,y.e0R.DIRECT,()=>{let e=(0,eG.$)(this.props.paint);this.onChangeForPaint(e,em.zk.YES)})},this.currentPaintValue=()=>this.props.paintValueFromEyeDropper?this.props.paintValueFromEyeDropper:this.state.paintValueInPicker?this.state.paintValueInPicker:this.props.paint,this.onMouseOver=()=>{this.setState({hasEverHovered:!0})},this.onPaintClick=()=>{this.paintPickerInitialView=void 0,this.togglePicker()},this.onStyleClick=e=>{e.stopPropagation(),this.paintPickerInitialView="library",this.togglePicker()},this.onSelectSamePaintMouseDown=()=>{let e=(0,v.GP)(this.props.paint);y.Osy.selectOnlySamePaint(e),(0,L.sx)("Select Selection Paint",{count:this.props.uniqueNodesCount})},this.onFocus=()=>{this.pickerShownIsStylePicker()&&this.toggleStylePicker()},this.boundColorVariableId=()=>{let e=this.props.paint.colorVar?.value?.alias;return e?T.dI(e):null}}pickerID(){return`${j.F7}-${this.props.id}`}stylePickerID(){return`${j.yJ}-${this.props.id}`}componentDidMount(){this.props.openPickerOnInitialRender&&this.showPicker()}componentDidUpdate(e){this.props.paintValueFromEyeDropper&&e.paintValueFromEyeDropper!==this.props.paintValueFromEyeDropper&&this.setState({paintValueInPicker:this.props.paintValueFromEyeDropper})}render(){let e=null;this.pickerShownIsStylePicker()&&this.props.stylePickerShown.isShown&&(e=this.props.stylePickerShown);let r=this.props.debounce?this.debouncedOnChangeForPaintPicker:this.onChangeForPaintPicker,n=this.renderButtons();return a.createElement("div",{onMouseOver:this.onMouseOver},a.createElement(t_,{ref:this.row,count:this.props.count,firstIconButton:n.length>0?n[0]:null,focusableRef:this.props.focusableRef,hasFocus:!1,id:this.props.id,isDragHover:!1,isDragging:!1,isUI3:this.props.isUI3,onChange:this.onChangeForPaint,onFocus:this.onFocus,onInputBlur:this.props.onInputBlur,onInputFocus:this.props.onInputFocus,onScrubBegin:this.props.onScrubBegin,onScrubEnd:this.props.onScrubEnd,paint:this.currentPaintValue(),preventDragging:!0,recordingKey:R.Pt(this.props,"paint"),secondIconButton:n.length>1?n[1]:null,selected:this.pickerShown()||this.pickerShownIsStylePicker(),shownPickerMatchesThisPaint:this.pickerShown(),singletonRow:!1,togglePicker:this.onPaintClick,uniqueNodesCount:this.props.uniqueNodesCount,...(0,ew.Rz)(this.props)}),this.pickerShown()&&this.props.pickerShown&&(this.props.customColorPicker?a.createElement(this.props.customColorPicker,{paint:this.currentPaintValue(),onChange:r,onClose:this.hidePicker,pickerShown:this.props.pickerShown,hideCustomColorPickerFillTypeToggle:this.props.hideCustomColorPickerFillTypeToggle??!1}):a.createElement(ew.ku,{defaultColor:this.props.defaultColor,disableImagePaints:!0,disablePatternPaints:!0,dropdownShown:this.props.dropdownShown,hasVisiblePaintBelow:!1,inheritStyleKeyField:"inheritFillStyleKey",initialStyleCreationPaint:this.currentPaintValue(),initialView:this.paintPickerInitialView,isInStyleModal:!1,keepOpenOnItemSelect:!0,onApplyStyle:this.onApplyStyle,onChange:r,paint:this.currentPaintValue(),paintId:this.props.id,pickerShown:this.props.pickerShown,recordingKey:R.Pt(this.props,"paintPicker"),selectedStyle:null,variableScopes:this.props.variableScopes,canPickerShowColorContrast:!!(0,I.k)().dt_a11y_fast_follows,paintNodeIds:(0,I.k)().dt_a11y_fast_follows?this.props.uniqueNodeIds:void 0})),this.state.hasEverHovered&&a.createElement(eP.MM,{inheritStyleKey:null,inheritStyleID:null,styleType:"FILL"}),e&&a.createElement(eP.UP,{picker:e,onCreateStyle:this.onCreateStyle,onApplyStyle:this.onApplyStyle,recordingKey:R.Pt(this.props,"stylePicker"),styleType:"FILL",onToggleListLayout:this.toggleListLayout,stylePickerListLayout:this.props.stylePickerListLayout,inheritStyleKey:null,inheritStyleID:null}))}renderButtons(){let e=[];if(this.boundColorVariableId())e.push({button:a.createElement("span",{className:e7.zm},a.createElement(p.K,{"aria-label":(0,V.t)("fullscreen.properties_panel.fill.detach_variable"),onClick:this.onDetachVariableClick,recordingKey:R.Pt(this.props,"paint","detachVariableButton"),htmlAttributes:{onMouseDown:J.dG,"data-tooltip":(0,V.t)("fullscreen.properties_panel.fill.detach_variable"),"data-tooltip-type":e_.Ib.TEXT}},a.createElement(x.U,{svg:e5.A},a.createElement(_.U,null)))),opensPicker:!1,key:"detatchVariableButton"});else{let r=(0,e0.f)(this.props.openFile?.editorType??null);e.push({button:a.createElement("span",{className:e7.zm},a.createElement(p.K,{"aria-label":r?(0,V.t)("slides.properties_panel.color_picker.theme_colors"):(0,q.A)("style"),onClick:this.onStyleClick,recordingKey:R.Pt(this.props,"paint","styleButton"),htmlAttributes:{"data-tooltip":r?(0,V.t)("slides.properties_panel.color_picker.theme_colors"):"style","data-tooltip-type":r?e_.Ib.TEXT:e_.Ib.LOOKUP}},a.createElement(x.U,{svg:e6.A,fallbackSvg:te.A},a.createElement(f.y,null)))),opensPicker:!0,key:"styleButton"})}return null==this.props.uniqueNodesCount||this.props.hideSelectSamePaintButton||e.push({button:a.createElement("span",{className:e7.zm},a.createElement(p.K,{onClick:this.onSelectSamePaintMouseDown,"aria-label":(0,V.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),recordingKey:R.Pt(this.props,"paint","selectSamePaintButton"),htmlAttributes:{"data-tooltip":(0,V.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),"data-tooltip-type":e_.Ib.TEXT}},a.createElement(x.U,{svg:tt.A},a.createElement(E.A,null)))),opensPicker:!0,key:"selectSamePaintButton"}),e}}r.displayName="SelectionPaintItem",e.SelectionPaintItem=r,e.ConnectedSelectionPaintItem=(0,o.Ng)((e,r)=>({pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,paintValueFromEyeDropper:e.currentSelectionPaintInPicker.paintId===r.id?e.currentSelectionPaintInPicker.updatedPaintFromDropper:void 0,stylePickerListLayout:e.stylePickerListLayout}),e=>({showPicker:(r,n)=>{let{top:i,left:a}=n.getBoundingClientRect(),[o,s]=[a-eD.N2,i];e(H.bS({id:r,initialX:o,initialY:s,modal:!0})),e(Y.sw()),e(H.XE())},setPickerListLayout:r=>{e(H.Y({isListLayout:r}))}}))(r)})(i||(i={})),i.ConnectedSelectionPaintItem},61992:(e,r,n)=>{n.d(r,{Fc:()=>E,Hd:()=>w,Jt:()=>f,Pc:()=>N,R8:()=>b,V0:()=>g,e6:()=>v,fE:()=>T,kC:()=>S,kW:()=>I,nq:()=>L,qJ:()=>A,w8:()=>y,x4:()=>C}),n(848318);var i=n(741419),a=n(179703),o=n(894574),s=n(992444),l=n(718451),c=n(52004),d=n(51910),u=n(207715),p=n(483372),m=n(245322),h=n(153986),_=n(569571);function g(){return(0,u.ut)(i.Ez5?.propertiesPanelState().strokePanelMode,i.yTM.NONE)}function f(){return(0,u.ut)(i.Ez5?.propertiesPanelState().strokePanelTerminalPointCount,0)}function E(e,r,n){let i=(0,_.A8)(n);return!(e&&(0,o.vx)(e,"TABLE"))&&(i||(0,l._W)(r,[]).length>0||r===l.oV)}function y(e,r,n=p.zk.YES){let a=(0,l._W)(e,[]);if(a.length>0&&!a.find(e=>e.visible)){let e=a.map(e=>({...e,visible:!0}));s.Y5.updateSelectionProperties({strokePaints:e},{shouldCommit:p.zk.NO,overwrite:i.WXh.ONLY_WHEN_NOT_EMPTY})}s.Y5.updateSelectionProperties(r,{shouldCommit:n}),(0,m.a2)("strokePaints")}function b(){let{numSelectedByType:e}=function(){let{strokeAlign:e,strokeCap:r,terminalCap:n,strokeJoin:i,arcRadius:a,arcSweep:o,connectorLineStyle:s,miterLimitAngle:l,leftEndCap:d,rightEndCap:u,dashPattern:p,dashCap:m,strokePaints:h,strokeWeight:_,borderSharedWeight:g,styleIdForStrokeFill:f,inheritFillStyleKeyForStroke:E}=(0,c.zj)("strokeAlign","strokeCap","terminalCap","strokeJoin","arcRadius","arcSweep","connectorLineStyle","miterLimitAngle","leftEndCap","rightEndCap","dashPattern","dashCap","strokePaints","strokeWeight","borderSharedWeight","styleIdForStrokeFill","inheritFillStyleKeyForStroke"),y=(0,c.Gt)("maxStrokeWeight");return{strokeAlign:e,strokeCap:r,terminalCap:n,strokeJoin:i,arcRadius:a,arcSweep:o,numSelectedByType:(0,c.Gt)("numSelectedByType"),connectorLineStyle:s,miterLimitAngle:l,leftEndCap:d,rightEndCap:u,dashPattern:p,dashCap:m,maxStrokeWeight:y,strokePaints:h,strokeWeight:_,borderSharedWeight:g,inheritStyleID:f??null,inheritStyleKey:E??null}}(),r=(0,d.KH)();return!!e&&(!!((0,o.vx)(e,"RECTANGLE")||(0,o.vx)(e,"ROUNDED_RECTANGLE")||(0,o.vx)(e,"SYMBOL")||(0,o.vx)(e,"INSTANCE"))||!!(0,o.vx)(e,"FRAME")&&function e(r,n){let i=new Set(["RECTANGLE","ROUNDED_RECTANGLE","SYMBOL","INSTANCE"]);for(let a of r)if(i.has(a.type)||"FRAME"===a.type&&!a.resizeToFit||"FRAME"===a.type&&n<2&&e(a.childrenNodes,n+1))return!0;return!1}(Object.keys(r).map((0,a.UN)().get).filter(e=>!!e),0))}function v(e){let r=e===h.om.ALL;return{borderTopVisible:r||e===h.om.TOP,borderRightVisible:r||e===h.om.RIGHT,borderBottomVisible:r||e===h.om.BOTTOM,borderLeftVisible:r||e===h.om.LEFT}}let T=1e3;function I(e){return e!==i.yTM.WASHI_TAPE}function S(){let e=g();return 2===f()&&e!==i.yTM.WASHI_TAPE}function w(e){if((0,l.gl)(e))return l.oV;switch(e){case"NONE":case"ROUND":case"SQUARE":return e;default:return}}function A(e){return e?(0,l.gl)(e)?l.oV:0===e.length?"LINE":2!==e.length?"CUSTOM_DASH":0===e[0]&&0===e[1]?"LINE":"SIMPLE_DASH":"LINE"}function C(e,r,n,a){return r&&e===i.yTM.VECTOR&&"LINE"!==A(a)?r:n}function N(e){return e===i.yTM.VECTOR||e===i.yTM.VERTEX}function L(e){return!(e===i.yTM.WASHI_TAPE||e===i.yTM.CONNECTOR)}},28807:(e,r,n)=>{var i=n(39773),a=n(639244);(0,i.eU)(null),(0,i.eU)(a.GR.DEFAULT_EXPANDED)},639244:(e,r,n)=>{n.d(r,{w5:()=>ec,B8:()=>el,tC:()=>ed,gc:()=>eu,GR:()=>es});var i,a,o,s,l,c=n(848318),d=n(716544),u=n(445777),p=n(622876),m=n(256543),h=n(741419);n(157907);var _=n(39773),g=n(818754),f=n(921494),E=n(654104),y=n(577023),b=n(286691),v=n(718451),T=n(207694),I=n(52004),S=n(773422),w=n(207715);n(279531),n(778727);var A=n(153059),C=n(366796),N=n(731412),L=n(106487),O=n(569571),R=n(868242),P=n(541910),D=n(754737),M=n(266175),k=n(786937),F=n(967003);n(891627);var x=n(673906),U=n(397579),B=n(566699),V=n(442313),G=n(727341),H=n(992444),K=n(264148),W=n(51910),z=n(256429),$=n(634649),Y=n(678517),j=n(280818);n(785556),n(896966);var q=n(961101);n(503024),n(614671),n(927799),n(100987),n(282554);let X={smallNudgeAmount:.01,bigNudgeAmount:.1,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01};n(805353),n(541525);var Z=n(713371),J=n(897378),Q=n(846153),ee=n(108921);let et=n(821527);function er(){H.Y5.triggerAction("set-tool-default")}c.memo(function({recordingKey:e}){let r=(0,G.GS)(),n=(0,w.J2)(h.yFm.state().scale),i=(0,w.J2)(h.yFm.state().disabled),a=x.nc.user("change-scale",e=>{h.yFm.setScale(e)}),o=(0,w.J2)(h.yFm.state().width);o="number"==typeof o?o:v.oV;let s=x.nc.user("change-scale-width",e=>{h.yFm.setWidth(e)}),l=(0,w.J2)(h.yFm.state().height);l="number"==typeof l?l:v.oV;let u=x.nc.user("change-scale-height",e=>{h.yFm.setHeight(e)}),p=(0,w.J2)(h.yFm.state().anchorPoint),m=x.nc.user("change-anchor-point",e=>{h.yFm.setAnchorPoint(e)}),_=E.qP(e??"","anchorPointChange",e=>{m(e)}),{handleKeyDown:g,heightInputRef:f,scaleInputRef:y,widthInputRef:b}=function(){let e=(0,d.d4)(e=>e.mirror.sceneGraphSelection),[r,n]=c.useState(!1),i=c.useRef(null),a=c.useRef(null),o=c.useRef(null),s=(0,W.p8)("currentTool"),l=(0,U.ZC)(s),u=(0,W.p8)("activeUserAction"),[p,m]=c.useState(!1);c.useEffect(()=>{let r=s===h.NLJ.SCALE&&l!==h.NLJ.SCALE;Object.keys(e).length>0&&r&&[h.QOV.DEFAULT,h.QOV.SELECTING_TEXT].includes(u)&&i.current&&(i.current.focus(),i.current.select())},[u,s,l,e]),c.useEffect(()=>{let e=()=>{i.current&&(n(!1),m(!1),i.current.focus(),i.current.select())};return K.h.subscribeScaleToolActivated(e),()=>{K.h.unsubscribeScaleToolActivated(e)}},[]),c.useEffect(()=>{let e=e=>{e.target!==i.current&&e.target!==a.current&&e.target!==o.current&&n(!0)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]);let _=c.useCallback(e=>{let n="Escape"===e.key,i="Enter"===e.key;!r&&(i||n)&&m(!0)},[r]);return c.useEffect(()=>{p&&er()},[p]),{handleKeyDown:_,scaleInputRef:i,widthInputRef:a,heightInputRef:o}}(),T=c.createElement(z.$4,null,c.createElement(J.K,{onClick:()=>{er()},"aria-label":(0,V.t)("fullscreen.scale_panel.close")},c.createElement(B.U,{svg:et,fallbackSvg:et},c.createElement(Q.A,null)))),I=c.createElement(j.V,{restoreFocusElements:[y.current,b.current,f.current].filter(Boolean),anchorPoint:p,onAnchorPointChange:_,disabled:i}),S=r?ee.f4:ee.G4,A=c.createElement(S,{disabled:i,height:l,heightInputRef:f,onHeightChange:u,onKeyDown:g,onScaleChange:a,onWidthChange:s,recordingKey:e,scale:n,width:o,widthInputRef:b}),C=c.createElement(q.g,{scale:n,onScaleChange:a,disabled:i,onInputKeyDown:g,recordingKey:e,ref:y});return r?c.createElement(z.Zk,{"data-testid":`scale_panel.state.${i?"disabled":"enabled"}`,className:Z.$1},c.createElement($.r,{titleTx:(0,V.tx)("fullscreen.scale_panel.scale"),icon:T}),A,c.createElement(Y.sY,{leftLabel:(0,V.t)("fullscreen.scale_panel.scale"),rightLabel:(0,V.t)("fullscreen.scale_panel.anchor_point"),topLeftInput:C,bottomLeftInput:null,rightInput:I,topIcon:null,bottomIcon:null})):c.createElement(z.Zk,{"data-testid":`scale_panel.state.${i?"disabled":"enabled"}`},c.createElement(z.fI,{className:Z.ZF},c.createElement(z.xw,null,(0,V.tx)("fullscreen.scale_panel.scale")),T,I),c.createElement(z.fI,null,C),A)});var en=n(383975),ei=n(481554),ea=n(27776);(0,g.hG)(ea.wQn);let eo=(e,r)=>e?E.Pt(e,r):r;var es=(e=>(e[e.DEFAULT_EXPANDED=0]="DEFAULT_EXPANDED",e[e.DEFAULT_SIMPLIFIED=1]="DEFAULT_SIMPLIFIED",e[e.OVERRIDDEN_EXPANDED=2]="OVERRIDDEN_EXPANDED",e))(es||{});(i||(i={})).ConnectedFillPanel=(0,d.Ng)(e=>({library:e.library,currentTool:e.mirror.appModel.currentTool,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,currentSelectedGradientStop:e.mirror.appModel.currentSelectedGradientStop,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,stylePickerListLayout:e.stylePickerListLayout,openFile:e.openFile}))(function(e){let r=(0,y.Ku)(),{version:n}=(0,p.DP)(),{inheritFillStyleKey:i,exportSettings:a,exportBackgroundDisabled:o,styleIdForFill:s}=(e.shouldUseSelectedStyleProperties?I.pw:I.zj)("inheritFillStyleKey","exportSettings","exportBackgroundDisabled","styleIdForFill"),l=(0,b.m)();return c.createElement(F.eT,{key:e.key,colorFormat:r,currentSelectedGradientStop:e.currentSelectedGradientStop,currentSelectedProperty:e.currentSelectedProperty,currentTool:e.currentTool,defaultColor:T.rC,dispatch:e.dispatch,dropdownShown:e.dropdownShown,editModeType:e.activeCanvasEditModeType,exportBackgroundDisabled:o,hasExports:!!a&&(0,v._W)(a,[]).length>0,inheritStyleID:s||null,inheritStyleKey:i||null,isPanelBodyCollapsedAtom:null,isUI3:"ui3"===n,library:e.library,modalShown:e.modalShown,openFile:e.openFile,pickerInStyleCreationShown:e.pickerInStyleCreationShown,pickerShown:e.pickerShown,recordingKey:eo(e.recordingKey,"fillPanel"),sceneGraphSelection:e.sceneGraphSelection,selectionContainsFrames:l,shouldUseSelectedStyleProperties:e.shouldUseSelectedStyleProperties,stylePickerListLayout:e.stylePickerListLayout,stylePickerShown:e.stylePickerShown,variableScopes:e.variableScopes})});let el=i.ConnectedFillPanel;(a||(a={})).ConnectedEffectsPanel=(0,d.Ng)(e=>({library:e.library,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,sceneGraphSelection:e.mirror.sceneGraphSelection,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let r=(0,I.ER)(),{smallNudgeAmount:n,bigNudgeAmount:i}=(0,y.sT)(),{version:a}=(0,p.DP)(),{effects:o,inheritEffectStyleKey:s,containsOnlySpreadEligibleNodes:l,containsAnyKnockoutShadowEligibleNodes:d,framelikeWithoutFills:u,framelikeWithoutClipping:m,styleIdForEffect:h}=(e.shouldUseSelectedStyleProperties?I.pw:I.zj)("effects","inheritEffectStyleKey","containsAnyKnockoutShadowEligibleNodes","framelikeWithoutFills","framelikeWithoutClipping","containsOnlySpreadEligibleNodes","styleIdForEffect"),_=(0,I.wR)("guid")??null;return c.createElement(M.F,{key:"effects",bigNudgeAmount:i,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,dropdownShown:e.dropdownShown,effects:o||[],framelikeWithoutClipping:!!m,framelikeWithoutFills:!!u,inheritStyleID:h||null,inheritStyleKey:s||null,isUI3:"ui3"===a,library:e.library,modalShown:e.modalShown,openFile:e.openFile,pickerShown:e.pickerShown,recordingKey:eo(e.recordingKey,"effectsPanel"),sceneGraphSelection:e.sceneGraphSelection,selectedStyleGuid:_,selectionContainsAnyKnockoutShadowEligibleNodes:!!d||r,selectionContainsOnlySpreadEligibleNodes:!!l||r,smallNudgeAmount:n,stylePickerShown:e.stylePickerShown})});let ec=a.ConnectedEffectsPanel;(o||(o={})).ConnectedTransformModifiersPanel=(0,d.Ng)(e=>({currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,sceneGraphSelection:e.mirror.sceneGraphSelection,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,openFile:e.openFile}))(function(e){let{smallNudgeAmount:r,bigNudgeAmount:n}=(0,y.sT)(),{version:i}=(0,p.DP)(),{transformModifiers:a}=(0,I.zj)("transformModifiers");return c.createElement(en.H,{key:"transformModifiers",bigNudgeAmount:n,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,dropdownShown:e.dropdownShown,isUI3:"ui3"===i,modalShown:e.modalShown,openFile:e.openFile,pickerShown:e.pickerShown,recordingKey:eo(e.recordingKey,"transformModifiersPanel"),sceneGraphSelection:e.sceneGraphSelection,smallNudgeAmount:r,transformModifiers:a||[]})}),o.ConnectedTransformModifiersPanel,(s||(s={})).ConnectedGridsPanel=(0,d.Ng)(e=>({library:e.library,currentTool:e.mirror.appModel.currentTool,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,sceneGraphSelection:e.mirror.sceneGraphSelection,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let{version:r}=(0,p.DP)(),n=(0,y.Ku)(),{smallNudgeAmount:i,bigNudgeAmount:a}=(0,y.sT)(),o=(0,w.J2)(h.Ez5.editorPreferences().showFrameGrids),{layoutGrids:s,inheritGridStyleKey:l,styleIdForGrid:d}=(e.shouldUseSelectedStyleProperties?I.pw:I.zj)("styleIdForGrid","layoutGrids","inheritGridStyleKey"),u=(0,I.wR)("guid")??null;return c.createElement(k.S,{key:"grids",bigNudgeAmount:a,colorFormat:n,currentSelectedProperty:e.currentSelectedProperty,currentTool:e.currentTool,dispatch:e.dispatch,dropdownShown:e.dropdownShown,editModeType:e.activeCanvasEditModeType,inheritStyleID:d||null,inheritStyleKey:l||null,layoutGrids:s,library:e.library,modalShown:e.modalShown,openFile:e.openFile,pickerShown:e.pickerShown,recordingKey:eo(e.recordingKey,"gridsPanel"),sceneGraphSelection:e.sceneGraphSelection,selectedStyleGuid:u,showFrameGrids:o,smallNudgeAmount:i,stylePickerShown:e.stylePickerShown,version:r})});let ed=s.ConnectedGridsPanel;(e=>{let r=(0,C.Tn)();e.ConnectedTypePanel=(0,d.Ng)(e=>({library:e.library,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,openFile:e.openFile,userFavoriteFonts:e.userFavoriteFonts,userFlags:e.userFlags,orgById:e.orgById,fonts:e.fonts,localFontAgentVersion:e.localFontAgentVersion}),null,(e,r,n)=>({...e,...n,...r}))(function(e){let n=c.useContext(D.zK),i=(0,w.J2)(h.Ez5.propertiesPanelState().enabledTypePanelControls),a=e.shouldUseSelectedStyleProperties?I.pw:I.zj,o=e.shouldUseSelectedStyleProperties?I.DQ:I.fC,{fontFamily:s,fontStyle:l,fontSize:d,lineHeight:g,intrinsicLineHeight:E,letterSpacing:b,paragraphSpacing:v,paragraphIndent:T,listSpacing:C,textLineType:M,textDirectionality:k,wholeNodeTextLineType:F,isHangingPunctuationApplicableToSelection:x,textCase:U,textDecoration:B,textDecorationSkipInk:V,textUnderlineOffset:G,textDecorationThickness:H,textDecorationStyle:K,inheritTextStyleKey:W,textAutoResize:z,missingFont:$,textTruncation:Y,leadingTrim:j,leadingTrimEnabled:q,hangingPunctuation:X,hangingList:Z,fontVariantDiscretionaryLigatures:J,fontVariantHistoricalLigatures:Q,fontVariantNumericFigure:ee,fontVariantNumericSpacing:et,fontVariantNumericFraction:er,fontVariantCaps:en,fontVariantPosition:ea,detachOpticalSizeFromFontSize:es,maxLines:el,textAlignHorizontal:ec,textAlignVertical:ed,areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides:eu,validMixedPropertiesForResponsiveTextStyle:ep,styleIdForText:em}=a("fontFamily","fontStyle","fontSize","lineHeight","intrinsicLineHeight","letterSpacing","paragraphSpacing","paragraphIndent","listSpacing","textLineType","textDirectionality","wholeNodeTextLineType","isHangingPunctuationApplicableToSelection","textCase","textDecoration","textDecorationSkipInk","textUnderlineOffset","textDecorationThickness","textDecorationStyle","inheritTextStyleKey","textAutoResize","missingFont","textTruncation","leadingTrim","leadingTrimEnabled","hangingPunctuation","hangingList","fontVariantDiscretionaryLigatures","fontVariantHistoricalLigatures","fontVariantNumericFigure","fontVariantNumericSpacing","fontVariantNumericFraction","fontVariantCaps","fontVariantPosition","detachOpticalSizeFromFontSize","maxLines","textAlignHorizontal","textAlignVertical","areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides","validMixedPropertiesForResponsiveTextStyle","styleIdForText"),{hasHadRTLText:eh,textUserLayoutVersion:e_,textExplicitLayoutVersion:eg,textBidiVersion:ef,fontVariations:eE}=o("hasHadRTLText","textUserLayoutVersion","textExplicitLayoutVersion","textBidiVersion","fontVariations"),ey=(0,I.wR)("guid")??null;(0|i)&1<<h.mrc.TEXT_TRUNCATION&&(0,u.KF)(null!=el,"TypePanel missing maxLines");let{smallNudgeAmount:eb,bigNudgeAmount:ev}=(0,y.sT)(),eT=(0,O.WH)(W??null,em??null,"TEXT"),eI=(0,R.L)(),eS=(0,f.R)(e=>r(e,(0,A.Sh)(e),m.RR.TEXT)),ew=(0,S.SG)(["TEXT_DATA"]).data??[],eA=(0,P.R1)().variableConsumptionMap,eC=(0,P.JG)(),{version:eN}=(0,p.DP)(),eL=(0,_.md)(N.$i)===L.JJ.TEXT_PANEL;return s&&l?c.createElement(ei.J,{key:"type",areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides:eu,bigNudgeAmount:ev,detachOpticalSize:es||!1,dispatch:e.dispatch,dropdownShown:e.dropdownShown,editModeType:e.activeCanvasEditModeType,enabledTypePanelControls:i,fontFamily:s,fontSize:d,fontStyle:l,fontVariantCaps:en||"NORMAL",fontVariantDiscretionaryLigatures:J||!1,fontVariantHistoricalLigatures:Q||!1,fontVariantNumericFigure:ee||"NORMAL",fontVariantNumericFraction:er||"NORMAL",fontVariantNumericSpacing:et||"NORMAL",fontVariantPosition:ea||"NORMAL",fontVariations:eE||[],fonts:e.fonts,hangingList:Z,hangingPunctuation:X,hasHadRTLText:eh,inheritStyleID:em||null,inheritStyleKey:W||null,intrinsicLineHeight:E,isHangingPunctuationApplicableToSelection:x,isSlides:e.isSlides,isTextPropReferencedByAnyNodeInSelection:eS,leadingTrim:j,leadingTrimEnabled:q,letterSpacing:b,library:e.library,lineHeight:g,listSpacing:C,localFontAgentVersion:e.localFontAgentVersion,mainStyle:eT,missingFont:$,modalShown:e.modalShown,openFile:e.openFile,orgById:e.orgById,paragraphIndent:T,paragraphSpacing:v,pickerShown:e.pickerShown,recordingKey:eo(e.recordingKey,"typePanel"),sceneGraph:e.sceneGraph,sceneGraphSelection:e.sceneGraphSelection,selectedStyleGuid:ey,selectedStyleProperties:e.selectedStyleProperties,shouldUseSelectedStyleProperties:e.shouldUseSelectedStyleProperties,showBlueBorder:eL,smallNudgeAmount:eb,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,textAlignHorizontal:ec,textAlignVertical:ed,textAutoResize:z,textBidiVersion:ef,textCase:U,textContentBoundAsset:eI,textDecoration:B,textDecorationSkipInk:V,textDecorationStyle:K,textDecorationThickness:H,textDirectionality:k,textExplicitLayoutVersion:eg,textLineType:M,textTruncation:Y,textUnderlineOffset:G,textUserLayoutVersion:e_,textVariablesExist:ew.length>0,userFavoriteFonts:e.userFavoriteFonts,validMixedPropertiesForResponsiveTextStyle:ep,variableConsumptionMap:null!=n?eC:eA,version:eN,wholeNodeTextLineType:F}):null})})(l||(l={}));let eu=l.ConnectedTypePanel},825850:(e,r,n)=>{n(716544),n(741419),n(157907);var i=n(818754);n(894574),n(474880),n(718451),n(52004),n(51910),n(207715),n(24096),n(468425),n(588620);var a=n(27776);(0,i.jz)(a.uj0)},217925:(e,r,n)=>{n.d(r,{LI:()=>M,Pe:()=>R,Yg:()=>function e(r){let n=0;for(let i of(r.prototypeInteractions.length>0&&(n+=1),r.childrenNodes))n+=e(i);return n},_U:()=>A,bA:()=>B,dT:()=>C,ft:()=>S,k9:()=>N,kC:()=>V,sT:()=>w});var i=n(62249),a=n(216582),o=n(989316),s=n(489126),l=n(886082),c=n(741419),d=n(673906),u=n(897392),p=n(179703),m=n(39773),h=n(579020),_=n(967286),g=n(431118),f=n(442313),E=n(185067),y=n(665471),b=n(947934),v=n(216986),T=n(454869),I=n(710628);n(468410);class S extends Error{constructor(){super(),this.name="InvalidSelectionFromGenericLayers"}}class w extends Error{constructor(){super(),this.name="NoInteractionsGenerated"}}class A extends Error{constructor(){super(),this.name="NoInteractionsGeneratedExistingInteractions"}}function C(e,r,n,a){let s=function(e,r){let n={name:"Dummy Page just to satisfy typescript so they have a parent",id:"0:1",type:"CANVAS",children:[]};return n.children=L(e,r,n),n}(e,r).children,l=(0,i._q)(s);return(0,o.sS)(s,n,l,a)}function N(e,r){let n=r.get(e),i={name:n.name,id:n.guid,type:"CANVAS",children:[]};return i.children=L(n.childrenGuids,r,i),i}function L(e,r,n){let i=[];for(let a of e){let e=(0,E.Zl)(r,a);if(null!==e){let a={id:e.guid,name:e.name,type:e.type,visible:e.visible,x:e.absoluteBoundingBox.x,y:e.absoluteBoundingBox.y,w:e.absoluteBoundingBox.w,h:e.absoluteBoundingBox.h,parentNode:n,clipsContent:!e.frameMaskDisabled,fontSize:e.fontSize,textAlignHorizontal:e.textAlignHorizontal,layoutMode:e.stackMode,cornerRadius:e.cornerRadius};a.opacity=e.opacity,a.characters=e.characters,e.fills&&(a.fills=e.fills.map(O).filter(e=>!!e)),e.prototypeInteractions&&e.prototypeInteractions.length>0&&(a.interactions=e.prototypeInteractions);let o=L(e.childrenGuids,r,a);o.length>0&&(a.children=o),i.push(a)}}return i}function O(e){switch(e.type){case"GRADIENT_ANGULAR":case"GRADIENT_DIAMOND":case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":return{type:"GRADIENT",visible:e.visible};case"IMAGE":let r=e.image?.hash,n=r?(0,g.Rw)(r):"",i=e.imageThumbnail?.hash;return{type:"IMAGE",hash:n,thumbnailHash:i?(0,g.Rw)(i):"",visible:e.visible};case"SOLID":return{type:"SOLID",color:e.color??{r:0,g:0,b:0},visible:e.visible}}}function R(e){return null!==e}let P=(e,r)=>"BACK"===r?"BACK":"CLOSE"===r?"CLOSE":"OPEN_POPUP"===e?"OVERLAY":e,D=d.nc.ai("link-new-interaction",e=>{let r=P(e.navigationType,""),n=e.buttonID,i=u.sH(n);if(null===i||i===u.Hr){(0,h.sx)("prototype_interaction_added",{magicLinkGenerated:!0,magicLinkInteractionRemoved:!0,magicLinkInvalidSourceNode:!0,action_type:r});return}let a=(0,p.UN)().get(n);if(null==a){(0,h.sx)("prototype_interaction_added",{magicLinkGenerated:!0,magicLinkInteractionRemoved:!0,magicLinkInvalidSourceNode:!0,action_type:r});return}let o=function(e){let r=e;for(;r.parentNode?.type!=="CANVAS"&&r.parentNode?.type!=="SECTION"&&null!==r.parentNode;)r=r.parentNode;return r}(a),s=e.destinationScreenID,l=a?.prototypeInteractions;if(l){for(let e of l)if(e.event?.interactionType==="ON_CLICK"&&e.actions&&e.actions.length>0&&!(1===e.actions.length&&"NONE"===e.actions[0].connectionType))return(0,h.sx)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkExistingInteractionOnSourceNode:!0,action_type:r}),{noInteractionGeneratedReason:"EXISTING_INTERACTION"}}let d=u.sH(s),m={},g=e.navigationType;if("BACK"===g)m.connectionType="BACK";else if("CLOSE"===g)m.connectionType="CLOSE";else{if(null===d||d===u.Hr||null===s){(0,h.sx)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkInvalidDestinationNode:!0,action_type:r});return}let e=(0,p.UN)().get(s);if(!e){(0,h.sx)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkInvalidDestinationNode:!0,action_type:r});return}m.transitionNodeID=d,m.transitionType="INSTANT_TRANSITION","NAVIGATE"===g?(m.connectionType="INTERNAL_NODE",(a?.type==="SYMBOL"||a?.type==="INSTANCE")&&(e?.type==="SYMBOL"||e?.type==="INSTANCE")?m.navigationType="SWAP_STATE":m.navigationType="NAVIGATE",o?.overlayBackground.type!=="NONE"&&(m.navigationType="SWAP")):"OPEN_POPUP"===g&&(m.connectionType="INTERNAL_NODE",m.navigationType="OVERLAY")}let f=c.glU.generateUniqueID();if(!f)return;let E=u.sH(f);if(!E)return;let y={id:E,stateManagementVersion:1};y.event={interactionType:"ON_CLICK"},y.actions=[m];try{a.prototypeInteractions=[y]}catch(e){return}let b=_.d({nodeID:i,interactionID:E});return(0,h.sx)("prototype_interaction_added",{interactionCount:a?.prototypeInteractions.length??0,magicLinkGenerated:!0,interactionID:b,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),action_type:P(m.navigationType??"",m.connectionType??"")}),{noodleID:b}});async function M(e,r,n,i){let a,l;if("TOPLEVEL"===e.type&&function(e,r){let n=(0,o.i9)(e.unfilteredScene.children);r((0,v.Zh)({name:"prototype.ai_magic_link_input_existing_interactions",params:{existingInteractions:JSON.stringify(n.interactionIds)}}))}(e,i),"TOPLEVEL"===e.type&&0===e.topLevelFrames.length)throw new S;try{let n=await F(e,r);a=k(n)}catch(e){if(e instanceof s.gS){let r={generatedInteractions:[]};return r.errorMessage=e.message,r}throw e}let c=[],d=!1,u=[],p=[];try{for await(let e of a){if(n.signal.aborted)return{generatedInteractions:[],errorMessage:"aborted"};U("NAVIGATE"),"OPEN_POPUP"===e.navigationType||"CLOSE"===e.navigationType?p.push(e):"BACK"===e.navigationType?u.push(e):d=x(e,c)}}catch(e){l=e.message}for(let e of p)U("OPEN_POPUP"),await new Promise(e=>setTimeout(e,200)),d=x(e,c);for(let e of u)U("BACK"),await new Promise(e=>setTimeout(e,200)),d=x(e,c);if(!l&&0===c.length){if(d)throw new A;throw new w}return{generatedInteractions:c,errorMessage:l}}async function*k(e){for await(let r of e)yield(0,a.HP)(r)}async function F(e,r){let n=(0,l.w)(e),i=new Promise((e,r)=>{setTimeout(()=>{r(Error("Cortex timed out"))},6e4)});if("EMPTY"===n.type)throw new s.gS("Empty selection");let a=y.Ay.design.generateMagicLinkV2(n,{...(0,b.Ay)(),clientLifecycleId:r}),o=await Promise.race([a,i]);return new y.hI(o,6e4)}function x(e,r){let n=D(e);if(n?.noodleID)r.push({id:n.noodleID,mapping:e});else if(n?.noInteractionGeneratedReason==="EXISTING_INTERACTION")return!0;return!1}function U(e){"BACK"===e?m.zl.set(I.pD,(0,f.tx)("magic_link.running_and_adding_back_interactions")):"OPEN_POPUP"===e?m.zl.set(I.pD,(0,f.tx)("magic_link.running_and_adding_overlay_interactions")):m.zl.set(I.pD,(0,f.tx)("magic_link.running_and_adding_navigate_interactions"))}function B(){m.zl.set(I.pD,(0,f.tx)("magic_link.running"))}function V(e,r,n){let i=Object.fromEntries(n.map(e=>[e,[]]));return r.forEach(r=>{n.forEach(n=>{i[n]?.push(...function e(r,n,i){let a=r.get(n);return a?"ICON"===i&&a.isIconLike||a.type===i||"IMAGE"===i&&(0,T.A)(a)?[n]:a.childrenNodes.flatMap(n=>e(r,n.guid,i)):[]}(e,r,n))})}),i}},542357:(e,r,n)=>{n.d(r,{KN:()=>W,y3:()=>$});var i=n(848318);n(716544);var a=n(988520),o=n(741419),s=n(1329),l=n(157907),c=n(536384),d=n.n(c),u=n(737647),p=n.n(u),m=n(41015),h=n(654104),_=n(983229),g=n(701780),f=n(792647),E=n(17755),y=n(442313);n(930969);var b=n(727341),v=n(76621),T=n(419604),I=n(138337),S=n(124174),w=n(639155),A=n(718451),C=n(773422),N=n(360093),L=n(176386),O=n(153442),R=n(251240);n(541910);var P=n(949651),D=n(318100),M=n(725608),k=n(6760),F=n(73484),x=n(60987),U=n(794523),B=n(549307),V=n(969560),G=n(556822);let H=i.createContext({autoCloseOnScroll:!0}),K=(0,m.kf)("lazy_search_expression_builder",{isCodesplit:!0,ComponentFactory:async()=>({default:(await n.e(4927).then(n.bind(n,294927))).ExpressionBuilderSearch})});function W({resolvedType:e,targetVariableData:r,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:s,updateSelectionProperties:l,recordingKey:c,updateConditionInConditionalAction:d,isNarrowPanel:u,showVariableThumbnails:p,setVariableValue:m,onClose:_,requestedTypes:f,initialPosition:E,variantProperty:y}){let b=!1;(0,A.gl)(r)&&(r=void 0,b=!0),r=(0,x.IQ)(r,y),r?.type===o.Z_n.EXPRESSION&&r?.value.expressionFunction===o.JTp.STRINGIFY&&(r=r.value.expressionArguments[0]);let[T,S]=i.useState(null),C=i.useCallback(e=>{null!==e&&S(e)},[]),[N,L]=i.useState(E??null),{shouldShowAdvancedPrototypingPaywall:O,showAdvancedPrototypingVariablesModal:P}=(0,R.zt)(),D=i.useCallback(()=>{if(O)P();else if(!N&&T){let e=T.getBoundingClientRect();L(new g.Mi(e.left-34,e.top-6))}},[T,N,O,P]);i.useEffect(()=>{!0===n&&s&&T&&(D(),s(!1))},[n,T,D,s]);let M=i.useCallback(()=>{N&&(L(null),_&&_())},[N,_]),k=i.useCallback(e=>{if(void 0!==d)d(e);else if((0,a.Vq)(m)){if(!m(e))return!1}else void 0!==l&&l({targetVariableData:e});return M(),!0},[M,d,l,m]),F=i.createElement(i.Fragment,null,N&&i.createElement(z,{initialTokens:r?(0,v.q)((0,I.A)(r,new w.o(!0))):[],initialPosition:N,resolvedType:e,onCloseExpressionBuilder:M,onInputSubmitted:k,icon:d?V.A:G.A,isInConditional:void 0!==d,recordingKey:h.Pt(c,"expressionBuilder"),requestedTypes:f})),U=i.createElement($,{targetVariableData:r,forwardRef:C,onClick:D,recordingKey:c,isNarrowPanel:u,isInCell:!!m,showVariableThumbnails:p,isInConditional:void 0!==d,isMixed:b});return i.createElement(i.Fragment,null,F," ",U)}function z({initialTokens:e,initialPosition:r,resolvedType:n,onCloseExpressionBuilder:a,onInputSubmitted:o,icon:s,isInConditional:l,recordingKey:c,requestedTypes:d}){let{autoCloseOnScroll:u}=i.useContext(H),m=i.useMemo(()=>e.reduce((e,r)=>e+=r.stringValue,""),[e]),g=i.useRef(m),E=i.useRef(!1),[b,v]=i.useState(0),I=i.useCallback((e,r)=>{v(e),e>0&&!E.current&&(E.current=!0),r&&(0,x.EQ)(g.current,r,n,l?"conditional":"set_variable")},[l,n]),[A,C]=i.useState((0,S.d)(g.current,n,d)),L=i.useCallback(()=>{if(g.current.trim().length>0){(0,x.EQ)(g.current,"success",n,l?"conditional":"set_variable");let e=o((0,T.q)(g.current,new w.o));if(!e)return C(!e),e}else(0,x.EQ)(g.current,"submit_empty",n,l?"conditional":"set_variable"),a();return!0},[l,a,o,n]),O=i.useMemo(()=>p()(e=>{(0,x.EQ)(g.current,e,n,l?"conditional":"set_variable"),a()}),[l,a,n]),R=i.useCallback(()=>l?(0,y.t)("proto.expression_builder_entry.placeholder"):(0,y.t)("proto.expression_builder.placeholder"),[l]);return i.createElement("div",{className:B.Zh},i.createElement(k.vx,{container:N.c,containerProps:{wiggleCount:b},title:"",headerSize:"hidden",initialPosition:r,onClose:a,dragHeaderOnly:!1,initialWidth:258,canRenderBelowViewport:!0},i.createElement(f.dP,{recordingKey:c},i.createElement("div",null,i.createElement(K,{error:A,errorFallback:null,expressionText:g,fallback:i.createElement("div",{className:B.D9}," Loading... "),hasWiggled:E.current,icon:s,initialTokens:e,isInConditional:l,onClose:O,onSubmit:L,placeholderText:R(),recordingKey:h.Pt(c,"search"),requestedTypes:d,resolvedType:n,setError:C,setWiggleCount:I,wiggleCount:b})))),i.createElement(_.D8,{className:U.ZA,onMouseDown:e=>{!A&&L()||(b>=1?O("click_out_cancel"):0===b&&I(1,"click_out_error")),e.stopPropagation()},onWheel:()=>{u&&g.current.trim()===m.trim()&&O("scroll_cancel")},recordingKey:h.Pt(c,"closeBuilder")}))}function $({targetVariableData:e,forwardRef:r,onClick:n,recordingKey:a,showVariableThumbnails:c,isNarrowPanel:u,isInCell:p,isInConditional:m,isMixed:g,variantProperty:f}){e=(0,x.IQ)(e,f);let v=(0,b.GS)(),T=(0,R.YT)(),S=i.useContext(O.c),C=T===R.Oz.TWO_COL,N=C&&S===O.P.LEFT,P=C&&S===O.P.RIGHT,D=i.useMemo(()=>e?(0,I.A)(e,new w.o(!0,!0)).replace(/\(/g," ( ").replace(/\)/g," ) ").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)(?![^{]*})(?![^[]*])/):[],[e]);if(e&&(0,A.hS)(e)&&e?.resolvedType===o.rXF.COLOR)return i.createElement(L.J,{color:e.value});let M=0===D.length,k=d()({[B.WR]:!p&&u,[B.NQ]:p,[B.D9]:!p&&!u,[B.pC]:C,[B.g6]:N,[B._i]:v}),U=N?(0,y.t)("proto.expression_builder_entry.placeholder_ui3_lhs"):P?(0,y.t)("proto.expression_builder_entry.placeholder_ui3_rhs"):(0,y.t)("proto.expression_builder_entry.placeholder");return i.createElement(_.D8,{onClick:n,recordingKey:h.Pt(a,"openExpressionBuilder"),className:v?B.tY:E.s.minW0.$},i.createElement("div",{className:k,ref:r},D.filter(e=>e.length>0).map((e,r)=>{if(e.startsWith("{")&&e.endsWith("}")){let n=e.replace(/[{}]/g,""),{variableId:a,modeId:o}=(0,x.Y_)(n);return i.createElement(Y,{variableId:a,modeId:o,showVariableThumbnails:c,key:r,disableHover:N})}if(s.sH(e))return i.createElement(Y,{variableId:e,showVariableThumbnails:c,key:r,disableHover:N});if((0,l.k)().ds_variable_props_proto&&e.startsWith("[")&&e.endsWith("]")){let n=e.replace(/[[]]/g,""),[a,o,s]=(0,x.Q6)(n);return i.createElement(j,{stablePathToNode:a,componentPropId:s,showVariableThumbnails:c,key:r})}if((0,l.k)().ds_variable_props_proto&&(0,x.Q6)(e)[0].length&&""!==(0,x.Q6)(e)[1]&&""!==(0,x.Q6)(e)[2]){let[n,a,o]=(0,x.Q6)(e);return i.createElement(j,{stablePathToNode:n,componentPropId:o,showVariableThumbnails:c,key:r,disableHover:N})}return x.dX.test(e)?i.createElement("span",{key:r},e):x.yZ.test(e)||x.er.test(e)?i.createElement("span",{key:r},e):i.createElement(F.X,{isLeftColInteractionsPanel:N,text:e,key:r})}),M&&i.createElement("span",{className:B.a7},g?(0,y.t)("fullscreen.mixed"):m?U:(0,y.t)("proto.expression_builder.placeholder"))))}function Y({variableId:e,modeId:r,showVariableThumbnails:n,disableHover:a}){let o=(0,C.u)(e),s=o?(0,M.B9)(o.name):(0,y.t)("proto.expression_builder_entry.missing"),l=(0,C.G6)(o?.variableSetId),c=l&&r?l.modes.find(e=>e.id===r):null,d=c?.name,u=o&&n?(0,x.Xx)(o.resolvedType):null,p=d?`${s}: ${d}`:`${s}`;return i.createElement(D.wG,{text:p,thumbnailValue:u,isDeleted:!!o&&(0,P.eF)(o),disableHover:a})}function j({stablePathToNode:e,componentPropId:r,showVariableThumbnails:n,disableHover:a}){let o=(0,x.aA)(e,r),s=o&&n?(0,x.Xx)(o.varValue.resolvedType):null;return i.createElement(D.wG,{text:o?o.name:(0,y.t)("proto.expression_builder_entry.missing"),colorTheme:D.J2.COMPONENT,thumbnailValue:s,isDeleted:!1,disableHover:a})}},60987:(e,r,n)=>{n.d(r,{Cq:()=>function e(r){if(r&&r.varValue.type===a.Z_n.ALIAS)return a.CWU.getVariableResolvedValue(r.varValue.value,new Map);if(r&&r.varValue.type===a.Z_n.NODE_FIELD_ALIAS){let{stablePathToNode:n,indexOrKey:i}=r.varValue.value,o=x(n,i);return o?e(o):function(e){switch(e.varValue.resolvedType){case a.rXF.STRING:case a.rXF.TEXT_DATA:return{type:a.Z_n.STRING,resolvedType:a.rXF.STRING,value:""};case a.rXF.BOOLEAN:return{type:a.Z_n.BOOLEAN,resolvedType:a.rXF.BOOLEAN,value:!1};case a.rXF.FLOAT:return{type:a.Z_n.FLOAT,resolvedType:a.rXF.FLOAT,value:0}}}(r)}let n=(0,_.sr)(r);switch(typeof n){case"string":return{type:a.Z_n.STRING,resolvedType:a.rXF.STRING,value:n};case"boolean":return{type:a.Z_n.BOOLEAN,resolvedType:a.rXF.BOOLEAN,value:n};case"number":return{type:a.Z_n.FLOAT,resolvedType:a.rXF.FLOAT,value:n}}},DE:()=>T,EQ:()=>q,HC:()=>G,Hq:()=>F,I0:()=>y,IQ:()=>$,J4:()=>V,N_:()=>W,Q6:()=>U,TL:()=>H,Ub:()=>M,Xx:()=>Y,Y_:()=>z,ZX:()=>E,_z:()=>k,a1:()=>v,aA:()=>x,bU:()=>B,d9:()=>P,dX:()=>N,er:()=>O,he:()=>D,if:()=>I,kl:()=>S,q2:()=>w,sO:()=>A,tJ:()=>R,tz:()=>j,uX:()=>L,wL:()=>K,yZ:()=>C,yy:()=>b});var i=n(848318),a=n(741419),o=n(897392),s=n(579020),l=n(896966),c=n(926252),d=n(76621),u=n(639155),p=n(773422),m=n(369600),h=n(199954),_=n(138709),g=n(336093),f=n(207669);function E({highlightedItemID:e,variables:r,expressionItems:n,componentPropItems:i}){return e?r.find(r=>r.node_id===e)??i.find(r=>(0,_.lC)(r)===e)??n.find(r=>r.name===e)??null:null}let y=new RegExp(/\+|-|\*|!|=|\/|&|\||>|<| /g),b=new RegExp(/\+|-|\*|!|=|\/|&&|\|\||>|</g),v=new RegExp(/\+|-|\*|\//g),T=new RegExp(/\+/g),I=new RegExp(/>|<|!/g),S=new RegExp(/>=|<=/g),w=new RegExp(/!=|==|(OR|or|Or)|>=|<=|&&|\|\|/g),A=new RegExp(/(AND|and|And)|(NOT|not|Not)/g),C=new RegExp(/"([^"]*)"/),N=new RegExp(/^[0-9.]*$/),L=new RegExp(/(AND|and|And)|(NOT|not|Not)|(OR|or|Or)|!=|==|&&|\|\|/),O=new RegExp(/\s*(true|false)\s*/i),R=new RegExp(/\(|\)/g);function P(e){return!!e&&(!N.test(e)||isNaN(Number(e)))}function D(e,r){return e?.modes.find(e=>e.id===r)?.name??""}function M(e){let[r,n]=e.split("$$$");return[r,n]}function k(e,r,n){if(n.keepAliasId)return`${e}$$$${r}`;let i=n.variableIdToVariable(e);if(!i)return"{}";let a=n.variableCollectionIdToVariableCollection(i.variableSetId);if(!a)return"{}";let o=D(a,r);return`{${i.name}$$$${o}}`}function F(e){let[r,n,i]=U(e);if(!r||!n||!i)return[];if("COMPONENT_PROP_ASSIGNMENTS"===n){let e=x(r,i);return e?[r,n,i,e.varValue.resolvedType]:[]}return(0,l.xi)("Invalid node field when parsing node field alias expression text",n),[]}function x(e,r){if(!e||0===e.length||!r)return;let n=a.CWU.getComponentPropForVariableAlias(e,r);if(0!==Object.keys(n).length)return n}function U(e){let[r,n,i]=e.split("$$$");if(!r||!n||!i)return[[],"",""];let[,a]=r.split("StablePathToNode:"),[,o]=n.split("NodeField:"),[,s]=i.split("IndexOrKey:");return a&&o&&s?[JSON.parse(a),o,s]:[[],"",""]}function B(e,r,n){return"COMPONENT_PROP_ASSIGNMENTS"===r?`StablePathToNode:${JSON.stringify(e)}$$$NodeField:${r}$$$IndexOrKey:${n}`:((0,l.xi)("Invalid node field when parsing for node field alias",r),"")}function V(e){for(let r of e){if(r.type===_.Yc.COMPONENT_PROPS)return(0,_.lC)(r.items[0]);if("items"in r)return r.items[0].node_id;if("expressionItem"in r)return r.expressionItem.name}return null}function G(e){for(let r of e)if(r.type===_.Yc.COMPONENT_PROPS)return(0,_.lC)(r.items[0]);for(let r of e)if(r.type===_.Yc.VARIABLES)return r.items[0].node_id;for(let r of e)if(r.type===_.Yc.EXPRESSION&&"LITERAL"===r.expressionItem.type)return r.expressionItem.name;return null}function H(e){return i.useMemo(()=>e===a.rXF.BOOLEAN?[a.rXF.BOOLEAN,a.rXF.STRING,a.rXF.FLOAT]:e===a.rXF.STRING?[a.rXF.STRING,a.rXF.FLOAT]:[e],[e])}function K(e,r,n,a){let o=(0,p.Rb)(),s=(0,p.yp)(),l=(0,p.pN)(),c=l.data?.libraryVariables,d=l.data?.libraryVariableSets,[u,E]=(0,i.useMemo)(()=>"ALL_LIBRARIES"===n.type?[[...o,...c??[]],[...s,...d??[]]]:"LOCAL_VARIABLES"===n.type?[o,s]:[c??[],d??[]],[n.type,o,c,s,d]),y=(0,f.s1)(),b=(0,m._G)(),v=(0,h.A)(null,null),T=i.useMemo(()=>{let e={};return v.forEach(r=>{e[r.libraryKey]=r.fileName}),e},[v]),I=H(r),S=i.useMemo(()=>u.filter(e=>a?.includes(e.resolvedType)??I.includes(e.resolvedType)),[u,a,I]),w=(0,g.qF)(S,e??"");return i.useMemo(()=>null===e?[]:e.length>0?(0,_.dC)({variables:w,variableSets:E,styles:[],componentProps:[],layout:"list",fileNamesByLibraryKey:T,openFileLibraryKey:b,slideThemeId:y}):(0,_.HK)({variables:w,variableSets:E,layout:n.layout}),[e,w,E,T,b,n.layout,y])}async function W(e,r){let n=r.find(r=>r.node_id===e.node_id);n&&await (0,c.ff)(n)}function z(e){let[r,n]=e.split(" %%% "),[i,a]=r.split("$$$");return{variableId:i,modeId:a,resolvedType:n?+n:null}}function $(e,r){return e?.type===a.Z_n.EXPRESSION&&e?.value.expressionFunction===a.JTp.IS_TRUTHY&&e.value.expressionArguments[0]&&(e=e.value.expressionArguments[0]),e?.type===a.Z_n.EXPRESSION&&e?.value.expressionFunction===a.JTp.RESOLVE_VARIANT&&e?.value.expressionArguments[0]?.type===a.Z_n.MAP&&r&&e.value.expressionArguments[0].value[r]&&(e=e.value.expressionArguments[0].value[r]),e?.type===a.Z_n.EXPRESSION&&e?.value.expressionFunction===a.JTp.STRINGIFY&&(e=e.value.expressionArguments[0]),e}function Y(e){return j(e)?{type:a.Z_n.STRING,resolvedType:a.rXF.STRING,value:o.AD}:e===a.rXF.BOOLEAN?{type:a.Z_n.BOOLEAN,resolvedType:a.rXF.BOOLEAN,value:!0}:e===a.rXF.FLOAT?{type:a.Z_n.FLOAT,resolvedType:a.rXF.FLOAT,value:0}:null}function j(e){return e===a.rXF.STRING||e===a.rXF.TEXT_DATA}function q(e,r,n,i){let o=new u.o(!0),c=[];try{c=(0,d.q)(e)}catch{(0,l.xi)("could not tokenize expression for logging:",e)}let p=c.filter(e=>"TOKEN_VARIABLE"===e.type||"TOKEN_VARIABLE_WITH_MODE"===e.type).map(e=>{let[r,n]=M(e.stringValue),i=o.variableIdToVariable(r);return{collection_id:i?.variableSetId,variable_id:r,variable_type:i?.resolvedType,mode_id:n}}),m=Object.keys(a.rXF)[Object.values(a.rXF).indexOf(n)].toLowerCase();"float"!==m&&"string"!==m&&"boolean"!==m&&(m="invalid");let h={status:r,resolved_type:m,variable_data:JSON.stringify(p),entry:i};s.az.trackDefinedEvent("prototype.expression_submit",h)}},674293:(e,r,n)=>{n.d(r,{m5:()=>function e(r){var n=[];for(var a of r){if("SET_VARIABLE"===a.connectionType){if(a.targetVariable&&"id"in a.targetVariable){let e=s.sH(a.targetVariable.id);a.targetVariable.id={guid:{sessionID:e?.guid?.sessionID,localID:e?.guid?.localID}}}a.targetVariableData&&(a.targetVariableData=c(a.targetVariableData.type,a.targetVariableData.resolvedType,a.targetVariableData.value))}else if("SET_VARIABLE_MODE"===a.connectionType)(0,i.B1)(a.targetVariableModeID,"targetVariableModeID"),a.targetVariableModeID=(0,o.sH)(a.targetVariableModeID)||void 0;else if("CONDITIONAL"===a.connectionType&&a.conditionalActions){var l=[];for(var d of a.conditionalActions){var u=[],p=null;d&&(d.condition&&(p=c(d.condition.type,d.condition.resolvedType,d.condition.value)),d.actions&&(u=e(d.actions))),l.push({condition:p,actions:u})}a.conditionalActions=l}n.push(a)}return n}}),n(848318);var i=n(445777),a=n(741419),o=n(897392),s=n(1329),l=n(353788);function c(e,r,n){let i=(0,l.WI)(r,n),d=function(e){switch(e){case a.rXF.BOOLEAN:return"BOOLEAN";case a.rXF.FLOAT:return"FLOAT";case a.rXF.STRING:return"STRING";case a.rXF.COLOR:return"COLOR";case a.rXF.MAP:return"MAP";case a.rXF.SYMBOL_ID:return"SYMBOL_ID";case a.rXF.TEXT_DATA:return"TEXT_DATA";default:throw Error(`Unexpected resolved type: ${e}`)}}(r);if(e===a.Z_n.BOOLEAN)return{dataType:"BOOLEAN",resolvedDataType:d,value:{boolValue:i.value}};if(e===a.Z_n.FLOAT)return{dataType:"FLOAT",resolvedDataType:d,value:{floatValue:i.value}};if(e===a.Z_n.STRING)return{dataType:"STRING",resolvedDataType:d,value:{textValue:i.value}};if(e===a.Z_n.ALIAS){var u,p=null;if("string"==typeof n){let e=s.sH(n);e&&(p={guid:{sessionID:e?.guid?.sessionID,localID:e?.guid?.localID}})}return{dataType:"ALIAS",resolvedDataType:d,value:{alias:p||i.value}}}if(e===a.Z_n.NODE_FIELD_ALIAS)return{dataType:"NODE_FIELD_ALIAS",resolvedDataType:d,value:{nodeFieldAliasValue:"stablePathToNode"in(u=i.value)&&"nodeField"in u&&"indexOrKey"in u?{stablePathToNode:{guids:u.stablePathToNode.map(e=>(0,o.sH)(e))},nodeField:u.nodeField,indexOrKey:u.indexOrKey}:{}}};if(e===a.Z_n.COLOR)return{dataType:"COLOR",resolvedDataType:d,value:{colorValue:i.value}};if(e===a.Z_n.EXPRESSION)return{dataType:"EXPRESSION",resolvedDataType:d,value:{expressionValue:function e(r){for(var n=r.expressionArguments,i=[],o=0;o<n.length;o++){var s=n[o],l=c(s.type,s.resolvedType,s.value);s.type===a.Z_n.EXPRESSION&&(l.value={expressionValue:e(s.value)}),i.push(l)}return{expressionArguments:i,expressionFunction:a.JTp[r.expressionFunction]}}(n)}};else if(e===a.Z_n.MAP)return{dataType:"MAP",resolvedDataType:d,value:{mapValue:i.value}};else if(e===a.Z_n.SYMBOL_ID)return{dataType:"SYMBOL_ID",resolvedDataType:d,value:{symbolIdValue:i.value}}}},268354:(e,r,n)=>{n(766692),n(718451)},251240:(e,r,n)=>{n.d(r,{Oz:()=>P,YT:()=>M,hU:()=>T,x6:()=>w,zt:()=>R});var i=n(848318),a=n(716544);n(741419),n(897392);var o=n(157907),s=n(39773),l=n(579020);n(921494);var c=n(449737),d=n(235441),u=n(727341),p=n(976308),m=n(718451);n(95432);var h=n(369600),_=n(376780),g=n(920963),f=n(988540);n(487497),n(780463);var E=n(543955),y=n(515071),b=n(468425),v=n(170042);function T(e,r,n,i,a,o,s,l,c,d){return{behavior:function(e){if(e){if(!(0,m.hS)(e))return m.oV;if("INSTANT_TRANSITION"===e);else if("DISSOLVE"===e)return"DISSOLVE";else if("FADE"===e)return"FADE";else if(e.startsWith("SLIDE_OUT"))return"SLIDE_OUT";else if(e.startsWith("SLIDE"))return"SLIDE";else if(e.startsWith("PUSH"))return"PUSH";else if(e.startsWith("MOVE_OUT"))return"MOVE_OUT";else if(e.startsWith("MOVE"))return"MOVE";else if("SMART_ANIMATE"===e||"MAGIC_MOVE"===e)return"SMART_ANIMATE";else if("SCROLL_ANIMATE"===e)return"SCROLL_ANIMATE"}return"INSTANT"}(e),direction:function(e){if(e&&(0,m.hS)(e)){for(let r of S)if(e.indexOf(r)>=0)return r}return null}(e),easing:function(e){if(e){if(!(0,m.hS)(e))return m.oV;if("IN_CUBIC"===e)return"EASE_IN";if("OUT_CUBIC"===e);else if("INOUT_CUBIC"===e)return"EASE_IN_AND_OUT";else if("LINEAR"===e)return"LINEAR";else if("IN_BACK_CUBIC"===e)return"EASE_IN_BACK";else if("OUT_BACK_CUBIC"===e)return"EASE_OUT_BACK";else if("INOUT_BACK_CUBIC"===e)return"EASE_IN_AND_OUT_BACK";else if("CUSTOM_CUBIC"===e)return"CUSTOM_BEZIER";else if("GENTLE_SPRING"===e)return"GENTLE";else if("SPRING_PRESET_ONE"===e)return"QUICK";else if("SPRING_PRESET_TWO"===e)return"BOUNCY";else if("SPRING_PRESET_THREE"===e)return"SLOW";else if("CUSTOM_SPRING"===e)return"CUSTOM_SPRING"}return"EASE_OUT"}(r),isSpringTransition:w(r),easingFunction:n?(0,m.hS)(n)?n:m.oV:I,duration:i?(0,m.hS)(i)?i:m.oV:.3,shouldSmartAnimate:A(a,!1),preserveScroll:A(o,!1),resetVideoPosition:A(s,!1),openUrlInNewTab:A(l,!1),resetScrollPosition:A(c,!1),resetInteractiveComponents:A(d,!1)}}(0,s.eU)(!0);let I=[0,0,.58,1],S=["LEFT","RIGHT","TOP","BOTTOM"];function w(e){return!!e&&("GENTLE_SPRING"===e||"SPRING_PRESET_ONE"===e||"SPRING_PRESET_TWO"===e||"SPRING_PRESET_THREE"===e||"CUSTOM_SPRING"===e)}function A(e,r){return e?(0,m.hS)(e)?e:m.oV:r}let C=["OPEN_OVERLAY","SWAP_WITH","CLOSE_OVERLAY"],N=["SET_VARIABLE","SET_VARIABLE_MODE","CONDITIONAL"],L=["UPDATE_MEDIA_PLAY_PAUSE_OPTIONS","UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS","UPDATE_MEDIA_SKIP_TO","UPDATE_MEDIA_SKIP_BY_OPTIONS"];function O(e,r){let n;let o=(0,a.wA)();switch(e){case f.Bi.PROTOTYPING_MULTIPLE_ACTIONS:n=g.b.PROTOTYPING_MULTIPLE_ACTIONS;break;case f.Bi.PROTOTYPING_CONDITIONAL_ACTIONS:n=g.b.PROTOTYPING_CONDITIONAL_ACTIONS;break;case f.Bi.PROTOTYPING_VARIABLES:n=g.b.PROTOTYPING_VARIABLES;break;case f.Bi.VIDEOS_IN_PROTOTYPES:n=g.b.ADD_VIDEO;break;default:n=void 0}return(0,i.useCallback)(()=>{o(c.to({type:y.DV,data:{team:r,resource:e,editorType:_._Y.DESIGN,currentPlan:p.F.Plan.STARTER,upsellPlan:p.F.Plan.PRO,upsellSource:n}})),(0,l.sx)("prototype.payment_upsell_modal_shown",{paywallFeature:e})},[o,e,r,n])}function R(){let{canUseAdvancedPrototyping:e,canMoveFileToProPlus:r,showMoveToProTeam:n}=(0,E.R)(),i=(0,o.k)().prototype_multi_path_paywall&&!e,l=(0,h.q5)(),c=(0,a.d4)(e=>l&&l.teamId?e.teams[l.teamId]:null),u=(0,s.md)(h.Hu),p=(0,b.sO)(),m=(0,d.ow)(),_=O(f.Bi.PROTOTYPING_MULTIPLE_ACTIONS,c),g=O(f.Bi.PROTOTYPING_CONDITIONAL_ACTIONS,c),y=O(f.Bi.PROTOTYPING_VARIABLES,c),v=O(p?f.Bi.VIDEOS_IN_SLIDES:m?f.Bi.VIDEOS_IN_WHITEBOARD:f.Bi.VIDEOS_IN_PROTOTYPES,c);return{shouldShowAdvancedPrototypingPaywall:i,showAdvancedPrototypinglMultipleActionsModal:r?n:_,showAdvancedPrototypingConditionalActionsModal:r?n:g,showAdvancedPrototypingVariablesModal:r?n:y,showVideosModal:r&&!u?n:v}}[...N,...C,...L],[...C,...N,...L];var P=(e=>(e[e.SINGLE_COL=0]="SINGLE_COL",e[e.TWO_COL=1]="TWO_COL",e[e.NONE=2]="NONE",e))(P||{});function D(e){return e.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType))}function M(){let e=(0,v.HS)(),{selectedInteractions:r,differentLengthActions:n}=(0,v.Ay)(e);if(!(0,u.GS)())return 2;let i=D(r)||r.some(e=>void 0!==e.actions&&e.actions?.length>1),a=r.length>1&&!n&&r[0].actions?.length===1&&D(r)&&!r.every(e=>e.actions?.every(e=>"CONDITIONAL"===e.connectionType));return!i||n||a?0:1}},172251:(e,r,n)=>{n.d(r,{E8:()=>l,U8:()=>o,_i:()=>s});var i=n(201261),a=n(243973);function o(e){let r=[],n=a.y.isApple();return n&&e.metaKey&&r.push("\u2318"),!n&&e.metaKey&&r.push(e.ctrlKey?"\u2318":"Ctrl"),e.ctrlKey&&r.push(n?"\u2303":"Ctrl"),e.shiftKey&&r.push(n?"\u21E7":"Shift"),e.altKey&&r.push(n?"\u2325":"Alt"),r.push(c[e.keyCode]||String.fromCharCode(e.keyCode)),r.join(n?"":"+")}function s(e){if(!e)return null;let r={metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1,keyCode:0};for(let n of e)switch(n){case 16:r.shiftKey=!0;break;case 17:r.ctrlKey=!0;break;case 18:r.altKey=!0;break;case 91:case 92:case 93:case 224:r.metaKey=!0;break;default:r.keyCode=n}return r.keyCode?r:null}function l(e,r=!1){if(!e||e?.triggerDevice==="KEYBOARD")return null;let n=d.get(e?.triggerDevice),a=e?.keyCodes?.[0]??0,o=n?.get(a)??function(e){if(e>=i.c){let r=Math.floor((e-i.c)/2);return`Axis ${r} ${e%2==0?"-":"+"}`}return`Button ${e}`}(a);return o.length<=1&&!r&&(o+=" (Gamepad)"),o}let c={3:"Break",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Caps Lock",27:"Esc",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",41:"Select",42:"Print",43:"Execute",44:"Print Screen",45:"Ins",46:"Del",47:"Help",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:"=",60:"<",61:"=",63:"\xdf",64:"@",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",95:"Sleep",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"*",107:"+",108:".",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"Num Lock",145:"Scroll Lock",151:"Airplane Mode",160:"^",161:"!",163:"#",164:"$",166:"Page Backward",167:"Page Forward",168:"Refresh",170:"*",172:"Home",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",193:"?",194:".",219:"[",220:"\\",221:"]",222:"'",223:"`"},d=new Map([["SWITCH_PRO",new Map([[0,"B"],[1,"A"],[2,"Y"],[3,"X"],[4,"L"],[5,"R"],[6,"ZL"],[7,"ZR"],[8,"-"],[9,"+"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Capture"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])],["PS4",new Map([[0,"X"],[1,"\u25CB"],[2,"\u25A1"],[3,"\u25B3"],[4,"L1"],[5,"R1"],[6,"L2"],[7,"R2"],[8,"Share"],[9,"Options"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Touch Pad"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])],["XBOX_ONE",new Map([[0,"A"],[1,"B"],[2,"X"],[3,"Y"],[4,"LB"],[5,"RB"],[6,"LT"],[7,"RT"],[8,"View"],[9,"Menu"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Xbox Button"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])]])},170042:(e,r,n)=>{n.d(r,{Ay:()=>y,HS:()=>E});var i=n(716544),a=n(425642),o=n(719670),s=n(741419),l=n(897392),c=n(579020),d=n(967286),u=n(992444),p=n(718451),m=n(51910),h=n(153059),_=n(483372),g=n(523194);function f(e){if(!e||!e.interactionType)return"NONE";switch(e.interactionType){case"MOUSE_IN":case"MOUSE_OUT":case"MOUSE_ENTER":case"MOUSE_LEAVE":case"MOUSE_DOWN":case"MOUSE_UP":return e.interactionType+(e.interactionMaintained?.toString()??"0");case"ON_KEY_DOWN":return e.interactionType+(e.keyTrigger?.triggerDevice??"")+(e.keyTrigger?.keyCodes?.sort().toString()??"");case"AFTER_TIMEOUT":return e.interactionType+(e.transitionTimeout?.toString()??"0");case"ON_MEDIA_HIT":return e.interactionType+(e.mediaHitTime?.toString()??"0");default:return e.interactionType}}function E(){let e=(0,i.d4)(A),r=new Set((0,i.d4)(N));return e.some(e=>{let n=e.id&&e.sourceNodeID?d.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;return n&&r.has(n)})?g.J.NORMAL:g.J.INHERITED_INTERNAL}function y(e){let r=(0,i.d4)(A),n=(0,i.d4)(C),a=e===g.J.INHERITED_INTERNAL?n:r,o=(0,i.d4)(N),s=new Set(o),E=new Set,y=[];a.forEach((e,r)=>{let n=e.id&&e.sourceNodeID?d.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;n&&s.has(n)&&(E.add(r),y.push(e))});let T=y.map(e=>e.actions?.length).some(e=>e!==y[0].actions?.length),L=(0===y.length?[]:y[0].actions||[]).map(e=>({...e})),O=(0,m.eY)();if(!T)for(var R=0;R<y.length;R++){let e=y[R].actions||[];for(var P=0;P<e.length;P++){let r=L[P],n=e[P];for(let e in n)r[e]?v(n,r,e,O)||(r[e]=p.oV):r[e]=n[e]}}let D=i=>(function o(s){let l=function(...o){let[l,d]=o,m=!1,h=[],f=[];for(let e in l)(0,p.gl)(U[e])?(m=!0,h.push(e)):f.push(e);let{changes:y,eventChanges:b,actionChanges:v,interactionChanges:T}=function(e){let r={},n={},i={},a={};for(let o in e)S.has(o)?i[o]=e[o]:I.has(o)?n[o]=e[o]:w.has(o)?a[o]=e[o]:r[o]=e[o];return{changes:r,eventChanges:n,actionChanges:i,interactionChanges:a}}(l),A=[];a.forEach((e,r)=>{if(E.has(r)){let r={...e.event,...b},n=[],a=e.actions||[];for(let e=0;e<a.length;e++)if(e===i){if(s.length>1){let{newPrototypeAction:r}=function(e,r,n){if(r.length>2&&e.conditionalActions){let o=e.conditionalActions,s=e.conditionalActions,l=r[1],c=s[l];var i={condition:c.condition,actions:[]},a=[];let d=c.actions?c.actions:[];for(let e=0;e<d.length;e++)e===r[2]?a.push({...d[e],...n}):a.push({...d[e]});i.actions=a,o[l]=i,e.conditionalActions=o}return{newPrototypeAction:e}}(a[e],s,v);n[e]=r}else n.push({...a[e],...v})}else n.push({...a[e]});i>=n.length&&n.push({...v}),A.push({...e,...T,event:r,actions:n})}else A.push(e)}),(0,c.sx)("prototype_update_selection_properties",{mixedUpdate:m,mixedUpdatedProperties:h,nonMixedUpdatedProperties:f,num_connector:E.size,category:e}),e===g.J.NORMAL?A=[...A,...n]:e===g.J.INHERITED_INTERNAL&&(A=[...r,...A]),y.prototypeInteractions=A,u.Y5.updateSelectionProperties(y,{shouldCommit:d?.shouldCommit||_.zk.YES,overwrite:d?.overwrite})};return l.appendActionIndex=function(e){return o([...s,e])},l})([i]),M=e=>e&&null!=e.actions?e.actions[0]:null,k=e=>{let r=M(e);if(null==r)return l.dI(e.sourceNodeID);let n=l.dI(r.transitionNodeID);return n===l.AD||null===n?l.dI(e.sourceNodeID):n},F=(e,r)=>{if(!e.actions||e.actions?.length===0||0===r.length)return null;if(!(r.length>2))return e.actions[r[0]];{let n=e.actions.length>r[0]?e.actions[r[0]]:null;if(n&&n.conditionalActions){let e=n.conditionalActions.length>r[1]?n.conditionalActions[r[1]]:null;if(e&&e.actions)return e.actions.length>r[2]?e.actions[r[2]]:null}}},x=(e,r)=>{if(null==r||void 0===r)return l.dI(e.sourceNodeID);let n=l.dI(r.transitionNodeID);return n===l.AD||null===n?l.dI(e.sourceNodeID):n},U=function(e,r){let n={},i={};for(let a of e){if(!a||!a.event)continue;for(let e in a.event)n[e]?b(a.event,n,e)||(n[e]=p.oV):n[e]=a.event[e];let e=a.actions&&{...a.actions[0]};if(e)for(let n in e)i[n]?v(e,i,n,r)||(i[n]=p.oV):i[n]=e[n]}return{...n,...i}}(y,O),B=function(e,r){let n={},i=[{}];for(let o of e){if(!o||!o.event)continue;for(let e in o.event)n[e]?b(o.event,n,e)||(n[e]=p.oV):n[e]=o.event[e];if(!o.actions)continue;let e=o.actions;var a=0;for(let n of e){for(let e in n){a>i.length-1&&i.push({});let o=i[a];o[e]?v(n,o,e,r)||(o[e]=p.oV):o[e]=n[e]}a++}}return{interactionEvent:n,interactionActions:i}}(y,O),V=new Set(o.map(e=>{let r=d.s(e);return r?l.dI(r.nodeID):""}).filter(e=>""!==e)),G=a.filter(e=>e.sourceNodeID&&V.has(l.dI(e.sourceNodeID)));var H=[...G];let K=function(){let e=(0,i.d4)(C);return Object.keys((0,i.d4)(h.Xt)).length>1?function(e){let r=[],n=new Map;for(let r of e){let e=f(r.event);n.has(e)||n.set(e,[]);let i=n.get(e);i&&i.push(r)}for(let[e,i]of n)i&&i.length>0&&i[0].event&&r.push({key:e,event:i[0].event,interactions:i});return r}(e):function(e){let r=[];if(e.length>0&&e[0].event)for(let n of e)n.event&&r.push({key:f(n.event),event:n.event,interactions:[n]});return r}(e)}();if(K.length>0)for(var R=0;R<K.length;R++){let e=K[R];for(var W=0;W<e.interactions.length;W++){let r=e.interactions[W];H.find(e=>e.id===r.id)||H.push(r)}}return{makeUpdateSelectionPropertiesForActionIndex:D,updateSelectionProperties:D(0),makeUpdateMultipleDestinationNodesForActionIndex:i=>(function i(o){let s=function(i,s,c){let d={},p=[];a.forEach(e=>{let r=F(e,o),n=x(e,r);if(r&&n&&-1!==Object.keys(i).indexOf(n)&&l.sH(i[n])){let d=l.sH(i[n]);if(d){if(!e.actions)return;var a=[];let n=o[0];if(r){if(o.length>2){let r=e.actions[n],i=o[1];if(r.conditionalActions){let n=r.conditionalActions[i],l=o[2],u=r.conditionalActions;var s={condition:r.conditionalActions[i].condition,actions:[]};if(n.actions){let p={...n.actions[l],transitionNodeID:d};var c=[...n.actions];c.splice(l,1,p),s.actions=c,u[i]=s,r.conditionalActions=u,(a=[...e.actions]).splice(o[0],1,r)}}}else{let r={...e.actions[o[0]],transitionNodeID:d};(a=[...e.actions]).splice(o[0],1,r)}p.push({...e,actions:a})}}}else p.push(e)}),e===g.J.NORMAL?p=[...p,...n]:e===g.J.INHERITED_INTERNAL&&(p=[...r,...p]),d.prototypeInteractions=p,u.Y5.updateSelectionProperties(d,{shouldCommit:s,overwrite:c})};return s.appendActionIndex=function(e){return i([...o,e])},s.updateMultipleDestinationNodes=function(e,r,n){return s},s})([i]),updateMultipleDestinationNodes:(i,o,s)=>{let c={},d=[];a.forEach(e=>{let r=k(e);if(r&&-1!==Object.keys(i).indexOf(r)&&l.sH(i[r])){let n=l.sH(i[r]);if(n){if(!e.actions)return;let r=e.actions.findIndex(e=>"INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType);if(-1!==r){let i={...e.actions[r],transitionNodeID:n},a=[...e.actions];a.splice(r,1,i),d.push({...e,actions:a})}}}else d.push(e)}),e===g.J.NORMAL?d=[...d,...n]:e===g.J.INHERITED_INTERNAL&&(d=[...r,...d]),c.prototypeInteractions=d,u.Y5.updateSelectionProperties(c,{shouldCommit:o,overwrite:s})},detailPropsMultipleActions:B,detailProps:U,interactionsOnSelectedNode:G,interactionsOnSelectedNodesAndComponents:H,selectedInteractions:y,mergedActions:L,differentLengthActions:T,selectedNoodleIds:o}}function b(e,r,n){if("keyTrigger"===n){let i=e[n],o=(0,p._W)(r[n],void 0);return(0,a.lu)(i?.keyCodes||[],o?.keyCodes||[])&&i?.triggerDevice===o?.triggerDevice}return e[n]===r[n]}function v(e,r,n,i){switch(n){case"transitionNodeID":let a=e[n],c=(0,p._W)(r[n],void 0);return l.aI(a,c);case"targetVariable":let d=e[n],u=r[n];if(!d&&!u)return!0;if(d&&u){if("id"in d&&"id"in u)return d.id===u.id;if("nodeFieldAlias"in d&&"nodeFieldAlias"in u){let e=d.nodeFieldAlias.stablePathToNode,r=u.nodeFieldAlias.stablePathToNode,n=e&&1===e.length?i.get(e[0]):null,a=r&&1===r.length?i.get(r[0]):null;if(n&&a&&n.isState&&a.isState&&n.containingStateGroupId===a.containingStateGroupId)return s.Egt.getExplicitPropDefIDBinding(n.guid,d.nodeFieldAlias.indexOrKey)===s.Egt.getExplicitPropDefIDBinding(a.guid,u.nodeFieldAlias.indexOrKey);return(0,o.c2)(d.nodeFieldAlias,u.nodeFieldAlias)}}return!1;case"overlayRelativePosition":let m=e[n],h=(0,p._W)(r[n],void 0);return m?.x===h?.x&&m?.y===h?.y;case"easingType":let _=e[n],f=(0,p._W)(r[n],void 0);if("CUSTOM_CUBIC"!==_||"CUSTOM_CUBIC"!==f)return _===f;return T((0,p._W)(e.easingFunction,void 0),(0,p._W)(r.easingFunction,void 0));case"easingFunction":return T(e[n],(0,p._W)(r[n],void 0));case"extraScrollOffset":let E=e[n],y=(0,p._W)(r[n],void 0);return E?.x===y?.x&&E?.y===y?.y;case"targetVariableData":return(0,g.j)(e[n],r[n],i);case"conditionalActions":let b=e[n],I=r[n];if(!(0,p.hS)(I))return!1;if(!(b&&I&&2===b.length&&2===I.length&&b[0]?.condition&&I[0]?.condition&&b[0]?.actions&&I[0]?.actions&&b[1]?.actions&&I[1]?.actions))return(0,o.c2)(e[n],r[n]);{let e=(0,g.j)(b[0].condition,I[0].condition,i),r=(e,r)=>{if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)for(let a in e[n])if(!v(e[n],r[n],a,i))return!1;return!0},n=b[0].actions,a=I[0].actions,o=n&&a&&r(n,a),s=b[1].actions,l=I[1].actions,c=s&&l&&r(s,l);return e&&o&&c}default:return e[n]===r[n]}}function T(e,r){if(e===r)return!0;if(void 0===e||void 0===r||e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}let I=new Set(["interactionType","interactionMaintained","interactionDuration","keyTrigger","transitionTimeout","mediaHitTime"]),S=new Set(["transitionNodeID","transitionType","transitionDuration","easingType","easingFunction","transitionShouldSmartAnimate","connectionType","connectionURL","targetVariable","targetVariableData","navigationType","transitionPreserveScroll","transitionResetVideoPosition","openUrlInNewTab","extraScrollOffset","mediaAction","mediaSkipToTime","mediaSkipByAmount","conditions","conditionalActions","transitionResetScrollPosition","transitionResetInteractiveComponents","targetVariableSetID","targetVariableModeID","targetVariableSetKey"]),w=new Set(["stateManagementVersion"]);function A(e){return e.mirror.selectionProperties.prototypeInteractions||[]}function C(e){return e.mirror.selectionProperties.prototypeInheritedInternalInteractions||[]}function N(e){return e.mirror.appModel.selectedInteractions}},780463:(e,r,n)=>{n.d(r,{PR:()=>s});var i=n(897392);let a=new class{constructor(){this.upgradedInteractions=new Set}getGUIDString(e){return i.dI(e)??i.dI(i.Hr)}recordInteractionUpgraded(e,r){return this.upgradedInteractions.add(`${this.getGUIDString(e)},${this.getGUIDString(r)}`)}hasInteractionBeenUpgraded(e,r){return this.upgradedInteractions.has(`${this.getGUIDString(e)},${this.getGUIDString(r)}`)}haveInteractionsBeenUpgraded(e){for(let r of e)if(!this.hasInteractionBeenUpgraded(r.id,r.sourceNodeID))return!1;return!0}haveAnyInteractionsBeenUpgraded(e){for(let r of e)if(1===r.stateManagementVersion&&this.hasInteractionBeenUpgraded(r.id,r.sourceNodeID))return!0;return!1}clearData(){this.upgradedInteractions=new Set}};class o{recordInteractionUpgraded(e,r){a.recordInteractionUpgraded(i.sH(e),i.sH(r))}}function s(){new o}},256429:(e,r,n)=>{n.d(r,{$4:()=>S,Id:()=>g,JU:()=>N,K0:()=>m.K0,UZ:()=>L,YW:()=>m.YW,Zk:()=>f,fI:()=>y,hl:()=>b,jT:()=>A,ks:()=>C,xZ:()=>I,xw:()=>T,zi:()=>E});var i=n(848318),a=n(536384),o=n.n(a),s=n(983229),l=n(282424);n(166365);var c=n(964e3);n(503024);var d=n(147147),u=n(447883),p=n(973219),m=n(246633);let h=(e,r)=>({...e,className:`${r} ${e.className||""}`});function _(e){let r=i.useMemo(()=>(0,u.v)(e,"ModalPanel"),[e]);return i.createElement(s.D8,{...h(r,p.a2),"data-non-interactive":!0})}function g(e){return i.createElement(_,{...e})}let f=i.forwardRef(function(e,r){return i.createElement(s.D8,{...(0,u.v)(h(e,"propertiesPanel"),"Panel"),forwardedRef:r,"data-non-interactive":!0})}),E=(0,i.forwardRef)((e,r)=>i.createElement(s.D8,{...(0,u.v)(h(e,"propertiesPanel"),"Panel"),forwardedRef:r,"data-non-interactive":!0})),y=(0,i.forwardRef)(function({selected:e,selectedSecondary:r,heightMultiplier:n,...a},o){let l;let c=r?p.kR:e?p.CZ:null;return l=2===n?p.X0:1.25===n?p.ht:1.5===n?p.LE:p.l$,c&&(l+=" "+c),i.createElement(s.D8,{...h(a,l),"data-non-interactive":!0,forwardedRef:o})});function b(e){return i.createElement(s.D8,{...h(e,p.Zz),"data-non-interactive":!0})}function v(e){let{doNotReserveSpaceForChevron:r,faded:n,extended:a,innerRef:o,isPanelBodyCollapsedAtom:l,forceNoChevron:c,highlightOnHover:u,...m}=e,_=p.Dn;e.faded&&(_=p.Tz),e.extended&&(_=p.iY),l&&(_=_+" "+p.bW),c&&(_+=` ${p.sI}`),u&&(_+=` ${p.BI}`);let g=h(m,_);return i.createElement(s.D8,{...g,forwardedRef:o,tabIndex:-1},!r&&i.createElement(d.r2,{isPanelBodyCollapsedAtom:l||null}),e.children)}function T(e){return i.createElement(v,{...e})}function I(e){return i.createElement(v,{...e})}function S({...e}){return i.createElement("div",{...h(e,p.DS),dir:"auto"})}function w({noLeftBorder:e,squareRightBorder:r,noBorderOnFocus:n,noPlaceholderLine:i,softDisabled:a,className:s,...l}){return e&&(s+=` ${p.Z4}`),r&&(s+=` ${p.O1}`),n||(s+=` ${p.PQ}`),i&&(s+=` ${p.LJ}`),a&&(s+=` ${p.EA}`),Object.assign(l,{className:o()(p._Z,s)})}let A=i.forwardRef(function(e,r){let n=w(e);return i.createElement(s.u2,{autoComplete:"false",spellCheck:!1,forwardedRef:r,...n})});class C extends i.PureComponent{constructor(){super(...arguments),this.onKeyDown=e=>{!(0,c.jr)(e,c.W0.NO)&&this.props.onKeyDown&&this.props.onKeyDown(e)}}render(){let e=w(this.props);return i.createElement(l.L,{"data-testid":this.props.dataTestId,type:"text",spellCheck:!1,...e,onKeyDown:this.onKeyDown,ref:e.innerRef})}}function N({disabled:e,...r}){return i.createElement("label",{...h(r,e?p.wh:p.Pf),dir:"auto"})}function L(e){return i.createElement("label",{...h(e,p.wh)})}C.displayName="TextInput",i.forwardRef((e,r)=>{let{className:n,...a}=w(e);return i.createElement(s.D8,{...a,className:o()(n,p.PB),forwardedRef:r,tabIndex:0})})},362201:(e,r,n)=>{var i=n(848318),a=n(448182),o=n(622876),s=n(536384),l=n.n(s),c=n(20149),d=n(510165),u=n(303035),p=n(654104),m=n(841479);let h=(0,i.createContext)(()=>null),_=(0,i.forwardRef)(function({size:e,defaultSize:r,animation:n,disableResizing:a,unsetSizeWhenDisabled:o,onResize:s,side:l,children:u,recordingKey:p,style:m,..._},f){let E=(0,d.M)(f),y=(0,i.useCallback)(()=>E.current,[E]),b=(0,i.useRef)(0),v=(0,i.useRef)(0),T="left"===l||"top"===l?-1:1,I=i.createElement(h.Provider,{value:y},u,a?null:i.createElement(g,{recordingKey:p,side:l,onDragStart:()=>{void 0===e||(v.current=e,b.current||(b.current=e))},onDrag:e=>{let r="bottom"===l||"top"===l?e.delta.y:e.delta.x;s(v.current+r*T)},onDoubleClick:()=>{s(r??b.current)}})),S=a&&o?void 0:e,w="left"===l||"right"===l?S:void 0,A="bottom"===l||"top"===l?S:void 0,C=m?{...m,width:w,height:A}:{width:w,height:A};return n?i.createElement(c.P.div,{style:C,..._,ref:E,...n},I):i.createElement("div",{style:C,..._,ref:E},I)});function g({side:e,onDoubleClick:r,onDragStart:n,onDrag:o,recordingKey:s}){let[,c]=(0,a.i)({onDragStart:n,onDrag:o}),d=c({className:l()({[m.horizontalHandle]:"left"===e||"right"===e,[m.verticalHandle]:"bottom"===e||"top"===e,[m[e]]:!0}),onDoubleClick:r}),h={includeTarget:!0,recordMetadata:e=>({clientX:e.clientX,clientY:e.clientY}),playbackMetadata:e=>({clientX:e.clientX,clientY:e.clientY})},_={onPointerDown:(0,p.BV)(s,"pointerdown",d.onPointerDown??u.lQ,h),onPointerMove:(0,p.BV)(s,"pointermove",d.onPointerMove??u.lQ,h),onPointerUp:(0,p.BV)(s,"pointerup",d.onPointerUp??u.lQ,h)};return i.createElement("div",{"data-testid":s,role:"separator","aria-hidden":!0,...d,..._})}(0,i.forwardRef)(function(e,r){let{version:n}=(0,o.DP)(),{size:a,defaultSize:s,animation:l,disableResizing:c,onResize:d,side:u,recordingKey:p,children:m,...h}=e;return"ui2"===n?i.createElement("div",{...h,ref:r},m):i.createElement(_,{...e,ref:r})})},785556:(e,r,n)=>{n.d(r,{Yq:()=>s,sH:()=>a,sI:()=>i}),n(741419).eVK.MIDDLE_CENTER;let i=.01,a=100;var o=(e=>(e.TextInput="text-input",e.Selector="selector",e))(o||{}),s=(e=>(e.Select="select",e.Input="input",e.Scrub="scrub",e.Width="width",e.Height="height",e))(s||{})},452926:(e,r,n)=>{n(848318),n(716544),n(741419),n(536384),n(510165),n(654104),n(577023),n(52004),n(773422),n(950738),n(483372),n(503024),n(614671),n(52953),n(163677),n(541910),n(949651),n(166365),n(302839),n(257459),n(100987)},429416:(e,r,n)=>{n(848318),n(716544),n(157907),n(541525),n(311160),n(718451),n(52004),n(51910),n(834996),n(166917),n(153059),n(483372),n(487497),n(257459)},257459:(e,r,n)=>{n.d(r,{rO:()=>M}),n(848318),n(716544),n(445777);var i=n(188682),a=n(535555),o=n(718750),s=n(409984),l=n(381819),c=n(872813),d=n(881318),u=(n(741419),n(673906));n(179703),n(157907);var p=n(39773);n(541525),n(575058),n(921494),n(442313);var m=n(360399),h=n(697751);n(992444),n(577023),n(718451);var _=n(48456);n(52004),n(501736),n(166917),n(153059),n(483372),n(812626);var g=n(975852),f=n(549639),E=n(181039),y=n(358268),b=n(873514),v=n(402269),T=n(831825),I=n(877366),S=n(772622),w=n(968945),A=n(198130),C=n(926340),N=n(643393),L=n(723790),O=n(475245),R=n(397854),P=n(288327),D=(e=>(e[e.TOP=0]="TOP",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT",e[e.HORIZONTAL=4]="HORIZONTAL",e[e.VERTICAL=5]="VERTICAL",e[e.ALL=6]="ALL",e))(D||{});function M(e){return"SPACE_EVENLY"===e||"SPACE_BETWEEN"===e}function k(e,r,n){return e!==r&&(h.wt.reportAnyPropertyChange([n]),!0)}R.A,O.A,C.A,L.A,P.A,N.A,A.A,i.z,a.M,o.v,s.R,l.K,c.y,d.z,T.A,I.A,E.A,y.A,b.A,v.A,g.A,f.A,w.A,w.A,S.A,S.A;class F extends _.M{getValueForNode(e){return M(e.stackPrimaryAlignItems)?null:e.stackSpacing}setValueForNode(e,r){!M(e.stackPrimaryAlignItems)&&k(e.stackSpacing,r,"stackSpacing")&&u.l7.user("set-stack-spacing",()=>{e.stackSpacing=r})}}new F;class x extends _.M{getValueForNode(e){return e.stackCounterSpacing}setValueForNode(e,r){k(e.stackCounterSpacing,r,"stackCounterSizing")&&u.l7.user("set-stack-counter-spacing",()=>{e.stackSpacing=r})}}new x,m.Lk,m.Lk,(0,p.M2)((0,p.eU)({width:{min:!1,max:!1},height:{min:!1,max:!1}})),(0,p.M2)((0,p.eU)(null)),(0,p.M2)((0,p.eU)(null));var U=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.YES_ONLY_MIN_MAX=2]="YES_ONLY_MIN_MAX",e))(U||{})},786825:(e,r,n)=>{n.d(r,{gm:()=>s,pW:()=>o});var i=n(848318);n(716544),n(741419),n(673906),n(157907),n(536384),n(166365),n(566699),n(442313),n(992444),n(577023),n(718451),n(52004),n(501736),n(483372),n(503024),n(614671),n(25904),n(665665),n(302839),n(416445),n(268904),n(452926),n(429416),n(257459);var a=n(960598);function o({OriginalComponent:e,...r}){return i.createElement(e,{...r,inputClassName:a.be,iconClassName:a.Kk})}function s({OriginalComponent:e,...r}){return i.createElement(e,{...r,outerClassName:a.kk,pillsContainerClassName:a.j1})}},966038:(e,r,n)=>{n.d(r,{aV:()=>p,oE:()=>m});var i=n(848318),a=n(885265);n(741419);var o=n(536384),s=n.n(o);n(921494);var l=n(566699);n(442313),n(449977);var c=n(268904);n(533168),n(139476);var d=n(689119),u=n(316388);function p({title:e,children:r,flushWithContainer:n,appendedClassName:o}){let p=(0,c.R)();return i.createElement("div",{className:s()(n?d.jO:d.lG,o)},i.createElement("div",{className:d.Z7},i.createElement(l.U,{className:d.Ev,svg:u.A},i.createElement(a.r,null)),!p&&e),i.createElement("div",{className:d.t},p&&!!e&&i.createElement("div",{className:d.Qb},e),r))}function m({title:e,children:r,closeButton:n}){let o=(0,c.R)();return i.createElement("div",{className:d.Vf},i.createElement("div",{className:d.Ii},i.createElement("div",{className:d.Z7},i.createElement(l.U,{className:d.Ev,svg:u.A},i.createElement(a.r,null)),!o&&e),n),i.createElement("div",{className:d.t},o&&!!e&&i.createElement("div",{className:d.Qb},e),r))}},533168:(e,r,n)=>{n.d(r,{NA:()=>d,OC:()=>u,ow:()=>p});var i=n(741419),a=n(71313),o=n(369600),s=n(139476);function l(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function c(e){let r=l(e);return r&&r.mode!==i.iCO.NONE&&r.mode!==i.iCO.NON_STATE_COMPONENTS?r.stateGroupModel:null}function d(e){let r=l(e);return r&&r.mode!==i.iCO.NONE&&r.mode!==i.iCO.NON_STATE_COMPONENTS?r.stateGroup:null}(0,a.Zm)(function(e){return c(e)?.stateGroupError});let u=(0,a.Zm)(function(e){return c(e)?.propertySortOrder}),p=(0,a.P8)([l,o.sS,o.XJ],(e,r,n)=>e&&e.mode!==i.iCO.NONE&&e.mode!==i.iCO.NON_STATE_COMPONENTS?e.allStates.map(e=>(0,s.dq)(e,r,n)):null),m=(0,a.P8)([l,o.sS,o.XJ],(e,r,n)=>e&&(e.mode===i.iCO.STATE||e.mode===i.iCO.STATE_INSTANCE||e.mode===i.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)?e.selectedStates.map(e=>(0,s.dq)(e,r,n)):null);(0,a.P8)([m,function(e){return l(e)?.mode},c],(e,r,n)=>e&&n&&(r===i.iCO.STATE||r===i.iCO.STATE_INSTANCE||r===i.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)?(0,s.m4)(e,n.propertySortOrder||[]):null)},139476:(e,r,n)=>{n.d(r,{NE:()=>y,O4:()=>b,QV:()=>_,dq:()=>f,m4:()=>h,uL:()=>E,xJ:()=>p,zb:()=>g,zh:()=>m});var i=n(848318);n(716544);var a=n(741419),o=n(573446),s=n(925040),l=n(579020);n(697751),n(992444),n(449977);var c=n(718451),d=n(369600),u=n(870769);let p="\u2014";function m(e,r){return Object.keys(e).sort((e,n)=>r.indexOf(e)-r.indexOf(n)).map(r=>`${r}=${e[r]}`).join(", ")}function h(e,r,n){let i={};for(let a of e){if(void 0!==a.actionIndexPath&&void 0!==n&&a.actionIndexPath.some((e,r)=>e!==n[r]))continue;let{propertyValues:e}=a.stateInfo;if(e)for(let n of r)n in i&&i[n]!==e[n]?i[n]=i[n]&&e[n]?c.oV:"":i[n]=e[n]||""}return i}function _(e){return e.replace(/[,=]/g,"").trim()}function g(e,r,n){let i=a.glU.getStateGroupAnalyticsInfo(r);(0,l.sx)(e,{...i,...n||{}})}function f(e,r,n){return{stateInfo:e.stateInfo,symbol:(0,u.i_)(null,null,e.symbol,r||"",n||(0,o.l)("")),actionIndexPath:function(e){if(!e)return[];let r=e.match(/\{(.*?)\}/);return!r||r.length<2?[]:r[1].trim().split(",").map(e=>parseFloat(e.trim()))}(e.actionIndexPath)}}i.createContext(null);let E=(0,s.Mz)([e=>e.mirror.selectionProperties.stateGroupSelectionInfo,d.sS,d.XJ],function(e,r,n,i){if(!e)return null;let o=e.mode;if(o===a.iCO.NONE)return null;if(o===a.iCO.NON_STATE_COMPONENTS)return{mode:o,numSelectedNonStateComponents:e.numSelectedNonStateComponents};let s=e.stateGroup,l=e.stateGroupModel,c=l?.propertySortOrder?.length===1,d=e.allStates.map(e=>f(e,r,n));if(o===a.iCO.STATE_GROUP)return{mode:o,stateGroup:s,stateGroupModel:l,allStates:d,modelIsOneDimensional:c};let u=e.selectedStates.map(e=>f(e,r,n)),p=h(u,l.propertySortOrder||[],i);return a.iCO.STATE,{mode:o,stateGroup:s,stateGroupModel:l,allStates:d,modelIsOneDimensional:c,selectedStates:u,selectedStatesPropertyValues:p}}),y=[["yes","no"],["true","false"],["on","off"]],b=y.reduce((e,r)=>e.concat(r),[])},253807:(e,r,n)=>{n.d(r,{U:()=>_});var i=n(848318),a=n(716544),o=n(356505),s=n(673906),l=n(206651),c=n(157907),d=n(654104),u=n(442313),p=n(992444),m=n(256429),h=n(115073);function _({inheritStyleField:e,recordingKey:r}){let n=(0,a.d4)(r=>{let n=l.UC[e];return n?r.mirror.selectionProperties[n]??null:null}),_=d.Pt(r,"restoreStyleButton"),g=d.rf(_,"click",()=>{n&&s.l7.user("restore-style",()=>p.Y5.restoreSoftDeletedNode(n))});return(0,c.k)().ds_zombie_styles_fixes&&n?i.createElement(m.fI,{className:h._f},i.createElement(o.$n,{onClick:g,variant:"link",children:(0,u.tx)("fullscreen.properties_panel.restore_local_style")})):null}},701476:(e,r,n)=>{n.d(r,{G:()=>a,h:()=>o});var i=n(848318);let a=i.createContext(null),o=i.createContext(!1)},569571:(e,r,n)=>{n.d(r,{A8:()=>E,OS:()=>_,WH:()=>v,bi:()=>b,dd:()=>f,yT:()=>T,zb:()=>g});var i=n(848318),a=n(716544),o=n(781131);n(741419);var s=n(897392),l=n(157907),c=n(718451),d=n(51910),u=n(369600),p=n(926010),m=n(298473),h=n(931516);function _(e){return`styles-picker-${e}`}function g(e){return e.stylePickerShown.isShown&&e.stylePickerShown.id===_(e.inheritStyleKeyField)?e.stylePickerShown:null}function f(e){return e&&(0,s.fn)(e.guid)}function E(e){let r=(0,c.E7)(e);return r&&r!==o.n3.INVALID}function y({library:e,sceneGraph:r,inheritStyleKey:n,inheritStyleID:i}){let a=(0,c.E7)(n);if(!a)return null;let l=(0,c.E7)(i);if(!l)return null;let d=(0,s.dI)(l.guid),u=Object.values(e.local.styles).find(e=>e.node_id===d);if(u)return u.is_soft_deleted?null:u;let p=r.get(d);return p?{key:a,style_type:p.styleType,type:h.PW.STYLE,node_id:d,name:p.name,isLocal:!1,content_hash:p.styleVersionHash??void 0,userFacingVersion:(0,o.IA)(p.userFacingVersion),library_key:p.sourceLibraryKey}:null}function b({library:e,sceneGraph:r,inheritStyleKey:n,inheritStyleID:i}){if((0,l.k)().ds_zombie_styles_fixes)return y({library:e,sceneGraph:r,inheritStyleID:i,inheritStyleKey:n});if(!E(n))return null;let a=(0,c.E7)(n);if(!a)return null;let o=Object.values(e.local.styles).find(e=>e.key===a);if(o&&!o.is_soft_deleted)return o;let s=(0,m.b)({library:e},a,(0,c.E7)(i));return s?.status==="loaded"?s.data:null}function v(e,r,n){let o=(0,a.d4)(e=>e.library),s=(0,d.eY)(),c=(0,p.bO)(),m=(0,u.tS)(),h=y({library:o,sceneGraph:s,inheritStyleKey:e,inheritStyleID:r}),_=i.useMemo(()=>{if(!e)return null;let i=b({library:o,inheritStyleKey:e,inheritStyleID:r,sceneGraph:s});if(i)return i;for(let r of Object.values(c))if(r?.status==="loaded"&&r.data.fileKey!==m){for(let i of(0,p.z5)(r,n))if(i.key===e)return i}return null},[r,e,c,o,m,s,n]);return(0,l.k)().ds_zombie_styles_fixes?h:_}function T(e){return{dropdownShown:e.dropdownShown,openFile:e.openFile,library:e.library,modalShown:e.modalShown,pickerShown:e.pickerShown,sceneGraphSelection:e.sceneGraphSelection,stylePickerShown:e.stylePickerShown,hasMissingFont:e.hasMissingFont,hasMixedProperties:e.hasMixedProperties||!1,inheritStyleKey:e.inheritStyleKey,inheritStyleKeyField:e.inheritStyleKeyField,inheritStyleID:e.inheritStyleID,stylePickerListLayout:e.stylePickerListLayout,styleType:e.styleType,onToggleListLayout:e.onToggleListLayout,selectedStyleGuid:e.selectedStyleGuid,dispatch:e.dispatch}}},781058:(e,r,n)=>{n.d(r,{GC:()=>p,bf:()=>m,hg:()=>u});var i=n(848318),a=n(716544),o=n(551316),s=n(144072),l=n(627855),c=n(950738),d=n(626523);function u(e,r){let n=(0,a.wA)(),l=i.useMemo(()=>(0,o.s)(n,200),[n]);i.useEffect(()=>{r?.skip||l(s.GT({styleType:e}))})}function p(e){let r=(0,c.Um)();return i.useMemo(()=>r&&r.type===d.vG&&r.data.style.style_type===e?r:null,[r,e])}function m(e){let r=(0,a.d4)(e=>e.stylePreviewShown);return i.useMemo(()=>r.isShown&&!r.isCreating&&r.style.node_id===e.node_id&&(0,l.EF)(r.style,e),[r,e])}},688605:(e,r,n)=>{n.d(r,{m3:()=>m,mY:()=>p});var i=n(848318),a=n(551316),o=n(157907),s=n(730169),l=n(68134),c=n(303035),d=n(870769);let u=i.createContext({registerStyle:c.lQ,unregisterStyle:c.lQ});function p({children:e}){let[r,n]=i.useState(new Set),o=i.useCallback(e=>{n(r=>{let n=new Set(r);return n.add(e),n})},[]),s=i.useCallback(e=>{n(r=>{let n=new Set(r);return n.delete(e),n})},[]),l=i.useMemo(()=>(0,a.s)(e=>{(0,d.rt)(e)},300),[]);i.useEffect(()=>{r.size>0&&l(Array.from(r))},[l,r]);let c=i.useMemo(()=>({registerStyle:o,unregisterStyle:s}),[o,s]);return i.createElement(u.Provider,{value:c},e)}function m({dsStyle:e,children:r,additionalClassName:n}){return(0,o.k)().ds_style_prefetch_on_hover?i.createElement(_,{dsStyle:e,children:r,additionalClassName:n}):i.createElement(h,{dsStyle:e,children:r})}function h({dsStyle:e,children:r}){return!function({dsStyle:e}){let{registerStyle:r,unregisterStyle:n}=i.useContext(u);(0,s.h)(()=>(r(e),()=>{n(e)}))}({dsStyle:e}),i.createElement(i.Fragment,null,r)}function _({dsStyle:e,children:r,additionalClassName:n}){let{registerStyle:a,unregisterStyle:o}=i.useContext(u),[s,c]=(0,l.M)(),[d,p]=(0,i.useState)(!1),m=c||d;return(0,i.useEffect)(()=>{m?a(e):o(e)},[m,a,o,e]),i.createElement("div",{className:n,ref:s,onFocus:()=>p(!0),onBlur:()=>p(!1)},r)}},60380:(e,r,n)=>{n.d(r,{L:()=>G});var i=n(848318),a=n(716544),o=n(445777),s=n(988520),l=n(741419),c=n(536384),d=n.n(c),u=n(654104),p=n(792647),m=n(17755),h=n(442313),_=n(790355),g=n(881393),f=n(574146),E=n(559334),y=n(10415),b=n(718451),v=n(52004),T=n(950738),I=n(87089),S=n(79563),w=n(154209),A=n(501736),C=n(153059),N=n(503024),L=n(246633),O=n(961662),R=n(768150),P=n(688605),D=n(92171),M=n(701476),k=n(554386),F=n(781058),x=n(334362),U=n(821561),B=n(476909);let V=i.memo(function({dsStyle:e,recordingKey:r,fileIndex:n,hierarchyPathIndex:c,styleIndex:d,column:m,searchQuery:E,isSelected:y,initialFocusRef:I,isEditable:w=!0}){let P=(0,T.Um)(),D=(0,a.wA)(),{setKeyboardNavigationElement:k,keyboardNavigationItem:V,isFauxFocused:G}=(0,p.M3)({path:null===m?[1,n,c,d]:[1,n,c,Math.floor(d/6)],column:m,id:e.isLocal?e.node_id:e.key}),H=i.useRef(null),K=e=>{H.current=e,k(e)},W=(0,v.kl)("numTextStyleOverrides");i.useEffect(()=>{V&&I.current&&y&&!E&&(window.requestAnimationFrame(()=>{V.fauxFocus()}),I.current=!1)},[I,y,V,E]);let{selectStyle:z,showStyleContextMenu:$,showStyleDetails:Y}=(0,s.sR)(i.useContext(M.G),"Must be inside <StylePickerActionsContext>"),j=(0,F.bf)(e),q=i.useCallback(r=>{P&&D(_.oB()),r.stopPropagation(),0!==r.button||(0,g.i)(r)||z(e)},[e,z,P,D]),X=i.useCallback(r=>{$(e,{x:r.clientX,y:r.clientY})},[e,$]),Z=i.useCallback(()=>{let r=H.current?.getBoundingClientRect();r&&Y(e,r,"styleListDoubleClick")},[e,Y]),J=i.useCallback(r=>{r.stopPropagation();let n=H.current?.getBoundingClientRect();n&&Y(e,n,"styleListClick")},[e,Y]),Q=(0,a.d4)(C.Sh),ee=i.useCallback(r=>{r.stopPropagation(),(0,o.KF)(null!=e.content_hash,"style does not have a hash");let n=e.isLocal?e.node_id:l.Pt4.getStyleNodeId(e.key,e.content_hash);A.F.trackFromFullscreen("text_style_override_reverted",{node_ids:Q}),l.Krs.clearOverridesOverTextStyleInSelection(n)},[e,Q]),et=i.useContext(M.h),er=i.useCallback(()=>{!et&&V&&V.fauxFocus({preventScroll:!0})},[et,V]),en=i.useCallback(()=>{V&&V.fauxBlur()},[V]),ei=i.useRef(null),ea=ei?ei.current:null,eo=!!ea&&ea.offsetWidth<ea.scrollWidth,es="TEXT"===e.style_type&&void 0!==W&&((0,b.gl)(W)||W>0)&&y,el=y&&!j?x.zm:x.Se,ec=es?x.x9:"";return null===m?i.createElement(R.A,{ref:K,dsStyle:e,isFauxFocused:G,isSelected:y,onClick:q,onContextMenu:X,onDoubleClick:Z,onMouseEnter:er,onMouseLeave:en,recordingKey:r,shouldShowTooltip:!!e.description||eo},i.createElement("div",{ref:ei,className:x.UU},(0,S.kH)(e.name)),"TEXT"===e.style_type&&e.meta?.style_thumbnail?.type==="TEXT"&&i.createElement("div",{className:x.XC},(0,f.P$)(e.meta?.style_thumbnail)),es&&i.createElement(L.K0,{className:x.zm,recordingKey:u.Pt(r,"clearTextStyleOverridesButton"),"data-tooltip":(0,h.t)("design_systems.styles.clear_overrides_over_text_style"),"data-tooltip-type":N.Ib.TEXT,svg:B.A,onClick:ee,onMouseDown:e=>e.stopPropagation()}),w&&i.createElement(L.YW,{className:`${el} ${ec}`,recordingKey:u.Pt(r,"editStyleButton"),"data-tooltip":(0,h.t)("design_systems.styles.edit_style"),"data-tooltip-type":N.Ib.TEXT,svg:U.A,selected:j,onClick:J,onMouseDown:e=>e.stopPropagation()})):i.createElement(R.h,{ref:K,dsStyle:e,isFauxFocused:G,isSelected:y,onClick:q,onContextMenu:X,onDoubleClick:Z,onMouseEnter:er,onMouseLeave:en,recordingKey:r,size:O.iL.Large})});function G({style:e,data:{stylePickerListLayout:r,searchQuery:n,recordingKey:a,selectedStyleKey:s,items:l,initialFocusRef:c,isEditable:p},index:h}){let _=l[h],g=(0,I.sZ)(),f=(0,w.Oe)(g),b=(0,E.fV)(_?.type===D.b.LibraryName?_.libraryKey:void 0);if(_.type===D.b.LibraryName){let r=f&&b;return i.createElement("div",{className:d()(x.IZ,r?x.VK:void 0),style:(0,k._l)(e,l,h)},_.name,r&&i.createElement("div",{className:m.s.inlineBlock.alignTop.pl4.$},i.createElement(y.KP,{libraryKey:_?.libraryKey})))}return _.type===D.b.HierarchyPathName?i.createElement("div",{className:x.D$,style:(0,k._l)(e,l,h)},_.name):_.type===D.b.SlideThemeName?i.createElement("div",{className:x.rP,style:(0,k._l)(e,l,h)},i.createElement("div",{className:x.C3},_.name),_.secondaryText&&i.createElement("div",{className:x.Wn},_.secondaryText)):_.type===D.b.StylesRow?i.createElement("div",{className:r?void 0:x.qV,style:(0,k._l)(e,l,h)},_.styles.map((e,o)=>{let l=!!s&&s===e.key,d=_.rowIndex*_.rowSize+o,h=`section.${e.library_key}`;return i.createElement(P.m3,{key:d,dsStyle:e,additionalClassName:m.s.flex.wFull.$},i.createElement(V,{column:r?null:d%_.rowSize,dsStyle:e,fileIndex:_.fileIndex,hierarchyPathIndex:_.hierarchyPathIndex,initialFocusRef:c,isEditable:p,isSelected:l,recordingKey:u.Pt(a,"styleGrid",e.isLocal?"localStyleSection":h,e.name),searchQuery:n,styleIndex:d}))})):_.type===D.b.Separator?i.createElement("div",{className:m.s.h16.flex.itemsCenter.$,style:(0,k._l)(e,l,h)},i.createElement("div",{className:x.me})):void(0,o.xb)(_)}},316174:(e,r,n)=>{n(741419)},927799:(e,r,n)=>{n.d(r,{Xs:()=>a}),n(848318),n(716544),n(741419),n(673906),n(157907),n(579020),n(857188),n(557675),n(584305),n(894574);var i=n(577023);function a(){let{smallNudgeAmount:e,bigNudgeAmount:r}=(0,i.sT)();return{smallNudgeAmount:e,bigNudgeAmount:r,wheelMultiplier:e,scrubMultiplier:e}}n(718451),n(48456),n(52004),n(207715),n(503024),n(245322),n(316174)},46171:(e,r,n)=>{n.d(r,{AF:()=>h}),n(848318);var i=n(541563),a=n(453282),o=n(262713),s=n(137728);n(921494);var l=n(442313);n(992444),n(718451),n(483372);var c=n(122662),d=n(97477),u=n(782856),p=n(553047),m=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.TOP_RIGHT=2]="TOP_RIGHT",e[e.BOTTOM_RIGHT=3]="BOTTOM_RIGHT",e))(m||{});function h(e){return e.rectangleCornerRadiiIndependent?{topLeft:e.rectangleTopLeftCornerRadius,topRight:e.rectangleTopRightCornerRadius,bottomRight:e.rectangleBottomRightCornerRadius,bottomLeft:e.rectangleBottomLeftCornerRadius}:{topLeft:e.cornerRadius??e.rectangleTopLeftCornerRadius,topRight:e.cornerRadius??e.rectangleTopRightCornerRadius,bottomRight:e.cornerRadius??e.rectangleBottomRightCornerRadius,bottomLeft:e.cornerRadius??e.rectangleBottomLeftCornerRadius}}u.A,i.a,p.A,a.$,c.A,o.w,d.A,s.t},863054:(e,r,n)=>{n.d(r,{DJ:()=>L,XL:()=>O});var i=n(848318),a=n(445777),o=n(834692),s=n(311037),l=n(350438),c=n(124510),d=n(659793),u=n(399022),p=n(639708),m=n(398322),h=n(196548),_=n(741419),g=n(157907),f=n(579020),E=n(654104),y=n(63370),b=n(442313),v=n(992444),T=n(718451),I=n(52004),S=n(207715),w=n(256429);n(864230);var A=n(158685),C=n(678517),N=n(71683);function L(e){let r=i.createElement(y.E,{name:"text_align_horizontal"},i.createElement(R,{recordingKey:E.Pt(e.recordingKey,"textAlignHorizontal")})),n=i.createElement(y.E,{name:"text_align_vertical"},i.createElement(P,{textAlignVertical:e.textAlignVertical||T.oV,recordingKey:E.Pt(e.recordingKey,"textAlignVertical")})),a=(0,A.vK)();return e.isUI3?a?i.createElement(i.Fragment,null,i.createElement(C.DE,{ref:e.alignmentRowRef,label:(0,b.tx)("properties.label.alignment"),input:r,icon:null}),i.createElement(C.DE,{ref:e.alignmentRowRef,label:(0,b.tx)("properties.label.alignment"),input:n,icon:!e.isStyleConsumer&&e.iconButton})):i.createElement(C.fn,{ref:e.alignmentRowRef,leftLabel:(0,b.tx)("properties.label.alignment"),leftInput:r,rightLabel:null,rightInput:n,icon:e.iconButton}):i.createElement(w.fI,{className:N.lY,ref:e.alignmentRowRef,"data-onboarding-key":"type-panel-alignment-row"},i.createElement("div",{className:N.Xh},r),i.createElement("div",{className:N.qf},n),e.iconButton)}var O=(e=>(e.LEFT="text-align-left",e.CENTER="text-align-center",e.RIGHT="text-align-right",e.JUSTIFIED="text-align-justified",e))(O||{});function R({recordingKey:e,loggingCallback:r}){let n=(0,I.kl)("textAlignHorizontal")||T.oV,p=(0,T._W)((0,I.kl)("missingFont"),!1),m=!((0|(0,S.J2)(_.Ez5.propertiesPanelState().enabledTypePanelControls))&1<<_.mrc.TEXT_ALIGN_HORIZONTAL),h=(0,A.vK)();return(0,a.KF)(!!(n||m),"TypePanel missing textAlignHorizontal"),i.createElement(o.bL,{legend:i.createElement(s.q,null,(0,b.t)("fullscreen.type_panel.align_horizontal")),value:n,onChange:e=>{r&&r(),v.Y5.updateSelectionProperties({textAlignHorizontal:e})},readonly:m||p,recordingKey:e},i.createElement(o.c$,{value:"LEFT","aria-label":(0,b.t)("fullscreen.type_panel.align_left"),icon:i.createElement(l.h,null)}),i.createElement(o.c$,{value:"CENTER","aria-label":(0,b.t)("fullscreen.type_panel.align_center"),icon:i.createElement(c.N,null)}),i.createElement(o.c$,{value:"RIGHT","aria-label":(0,b.t)("fullscreen.type_panel.align_right"),icon:i.createElement(d.K,null)}),h&&i.createElement(o.c$,{value:"JUSTIFIED","aria-label":(0,b.t)("fullscreen.type_panel.justify"),icon:i.createElement(u.h,null)}))}function P(e){let r=(0,T._W)((0,I.kl)("missingFont"),!1),n=!((0|(0,S.J2)(_.Ez5.propertiesPanelState().enabledTypePanelControls))&1<<_.mrc.TEXT_ALIGN_VERTICAL);return i.createElement(o.bL,{value:e.textAlignVertical,onChange:e=>((0,g.k)().ce_properties_panel_tracking&&(0,f.sx)("editor_type_panel_change",{key:"textAlignVertical",value:e}),v.Y5.updateSelectionProperties({textAlignVertical:e})),readonly:r||n,recordingKey:e.recordingKey,legend:i.createElement(s.q,null,(0,b.t)("fullscreen.type_panel.align_vertical"))},i.createElement(o.c$,{value:"TOP","aria-label":(0,b.t)("fullscreen.type_panel.align_top"),icon:i.createElement(p.b,null)}),i.createElement(o.c$,{value:"CENTER","aria-label":(0,b.t)("fullscreen.type_panel.align_middle"),icon:i.createElement(m.X,null)}),i.createElement(o.c$,{value:"BOTTOM","aria-label":(0,b.t)("fullscreen.type_panel.align_bottom"),icon:i.createElement(h.z,null)}))}},865785:(e,r,n)=>{n.d(r,{f:()=>v});var i=n(848318),a=n(445777),o=n(834692),s=n(311037),l=n(363750),c=n(964427),d=n(217772),u=n(741419);n(921494);var p=n(654104),m=n(566699),h=n(442313);n(894574);var _=n(727341);n(992444),n(52004),n(207715);var g=n(158685),f=n(678517),E=n(503131),y=n(958329),b=n(320226);function v({disabled:e,enabledTypePanelControls:r,textAutoResize:n,recordingKey:o}){e=e||!((0|r)&1<<u.mrc.TEXT_AUTO_RESIZE);let s=(0,_.GS)();e||(0,a.KF)(null!=n,"TypePanel missing textAutoResize");let l=i.createElement(T,{disabled:e,textAutoResize:n,recordingKey:o});return s?i.createElement(f.DE,{input:l,icon:null,label:(0,h.t)("fullscreeen.type_panel.resizing")}):l}function T(e){let r=(0,g.ae)();return i.createElement(o.bL,{value:e.textAutoResize,onChange:e=>r(e,"panel"),readonly:e.disabled,recordingKey:p.Pt(e,"autoResize"),legend:i.createElement(s.q,null,(0,h.t)("fullscreeen.type_panel.resizing"))},i.createElement(o.c$,{value:"WIDTH_AND_HEIGHT","aria-label":(0,h.t)("fullscreen.type_panel.auto_width"),icon:i.createElement(m.U,{svg:b.A},i.createElement(l.$,null))}),i.createElement(o.c$,{value:"HEIGHT","aria-label":(0,h.t)("fullscreen.type_panel.auto_height"),icon:i.createElement(m.U,{svg:y.A},i.createElement(c.m,null))}),i.createElement(o.c$,{value:"NONE","aria-label":(0,h.t)("fullscreen.type_panel.fixed_size"),icon:i.createElement(m.U,{svg:E.A},i.createElement(d.V,null))}))}},487061:(e,r,n)=>{n.d(r,{FX:()=>i}),n(848318),n(39773),n(730169),n(442313),n(176629),n(670673),n(270070),n(35315),n(680632),n(268904),n(151144);let i="new_text_row_location_callout"},545071:(e,r,n)=>{n.d(r,{Cm:()=>u,Zo:()=>d,cS:()=>c,dx:()=>l});var i=n(848318),a=n(536384),o=n.n(a),s=n(483189);let l=(0,i.forwardRef)(function({left:e,right:r,appendedClassName:n},a){let l=o()(s.RF,n);return i.createElement("div",{className:l,ref:a},e?i.createElement("div",{className:s.kb},e):null,r?i.createElement("div",{className:s.pG},r):null)});(0,i.forwardRef)(function({children:e,appendedClassName:r},n){let a=o()(s.Pv,r);return i.createElement("div",{className:a,ref:n},e)});let c=(0,i.forwardRef)(function({label:e,input:r,appendedClassName:n},a){let l=o()(s.Od,n);return i.createElement("div",{className:l,ref:a},null!=e?i.createElement(p,null,e):null,i.createElement("div",{className:s.hF},r))}),d=(0,i.forwardRef)(function({label:e,input:r,appendedClassName:n},a){let l=o()(s.H5,n);return i.createElement("div",{className:l,ref:a},null!=e?i.createElement(p,null,e):null,i.createElement("div",{className:s.hF},r))}),u=(0,i.forwardRef)(function({label:e,leftInput:r,rightInput:n,appendedClassName:a},l){let c=o()(s.Y7,a);return i.createElement("div",{className:c,ref:l},i.createElement(p,null,e),i.createElement("div",{className:s.ig},r),i.createElement("div",{className:s.by},n))});function p(e){return i.createElement("span",{"aria-hidden":"true",className:s.Pf,"data-non-interactive":!0},e.children)}},634649:(e,r,n)=>{n.d(r,{Wv:()=>u,r:()=>d});var i=n(848318),a=n(536384),o=n.n(a),s=n(147147),l=n(678517),c=n(42379);i.forwardRef(function({titleTx:e,faded:r,isEmpty:n,appendedClassName:a},s){return i.createElement(l.Ad,{ref:s,appendedClassName:o()(c.En,{[c.yf]:r,[c.ry]:n},a),input:i.createElement(l.Mw,null,e),label:null})});let d=i.forwardRef(function({titleTx:e,icon:r,faded:n,isEmpty:a,appendedClassName:s},d){return i.createElement(l.DE,{ref:d,appendedClassName:o()(c.En,c.VJ,{[c.yf]:n,[c.ry]:a},s),input:i.createElement(l.Mw,null,e),label:null,icon:r})});i.forwardRef(function({titleTx:e,input:r,faded:n,isEmpty:a,isPanelBodyCollapsedAtom:d,appendedClassName:u,dataTestId:p},m){let h=o()(c.e4,{[c.yf]:n,[c.ry]:a},u);return i.createElement("div",{className:h,ref:m,"data-testid":p,"data-non-interactive":!0},i.createElement("div",{className:c.Dn},i.createElement(s.r2,{isPanelBodyCollapsedAtom:d||null}),i.createElement(l.Mw,null,e)),i.createElement("div",{className:c.Ix,"data-non-interactive":!0},r))});let u=i.forwardRef(function({titleTx:e,faded:r,isEmpty:n,children:a},s){return i.createElement(l.oO,{ref:s,appendedClassName:o()(c.En,{[c.yf]:r,[c.ry]:n}),input:i.createElement(l.Mw,null,e)},a)});i.forwardRef(function({titleTx:e,input:r},n){return i.createElement("div",{className:c.Ii,ref:n,"data-non-interactive":!0},i.createElement("div",{className:c.DD},i.createElement(l.Mw,null,e)),i.createElement("div",{className:c.hF,"data-non-interactive":!0},r))})},678517:(e,r,n)=>{n.d(r,{Ad:()=>f,DE:()=>g,Kg:()=>w,Mw:()=>T,Oe:()=>_,Y9:()=>S,fn:()=>h,my:()=>v,oO:()=>y,pG:()=>E,rH:()=>I,sY:()=>b,u9:()=>A});var i=n(848318),a=n(536384),o=n.n(a),s=n(983229),l=n(166365),c=n(685567),d=n(384561),u=n(459377),p=n(235035),m=n(713301);let h=(0,i.forwardRef)(function({leftLabel:e,leftInput:r,rightLabel:n,rightInput:a,appendedClassName:s,icon:l,dataTestId:c},d){return i.createElement("div",{ref:d},i.createElement("fieldset",{className:o()(p.$f,s),"data-non-interactive":!0,"data-testid":c},null!=e?i.createElement(w,{useAsLegend:null!==e&&null==n},e):null,i.createElement("div",{className:p.Vp,"data-non-interactive":!0},r),null!=n?i.createElement(A,null,n):null,i.createElement("div",{className:p.ON,"data-non-interactive":!0},a),i.createElement(I,null,l)))});(0,i.forwardRef)(function({label:e,leftIcon:r,input:n,rightIcon:a},o){return i.createElement("div",{className:p.iv,ref:o,"data-non-interactive":!0},null!=e?i.createElement(w,null,e):null,i.createElement("div",{className:p.dk,"data-non-interactive":!0},r),i.createElement("div",{className:p.Wy,"data-non-interactive":!0},n),i.createElement("div",{className:p.pK,"data-non-interactive":!0},a))});let _=(0,i.forwardRef)(function({label:e,leftIcon:r,input:n,firstRightIcon:a,secondRightIcon:o,...s},l){return i.createElement("div",{className:p.o7,ref:l,...s,"data-non-interactive":!0},null!=e?i.createElement(w,null,e):null,i.createElement("div",{className:p.dk,"data-non-interactive":!0},r),i.createElement("div",{className:p.Wy,"data-non-interactive":!0},n),i.createElement("div",{className:p.pK,"data-non-interactive":!0},a),i.createElement("div",{className:p.wm,"data-non-interactive":!0},o))}),g=(0,i.forwardRef)(function({label:e,input:r,icon:n,appendedClassName:a,dataTestId:s,dataOnboardingKey:l},c){let d=o()(p.xx,a);return i.createElement("div",{className:d,ref:c,"data-testid":s,"data-onboarding-key":l},null!=e?i.createElement(w,null,e):null,i.createElement("div",{className:p.Vp,"data-non-interactive":!0},r),i.createElement(I,null,n))}),f=(0,i.forwardRef)(function({input:e,label:r,appendedClassName:n,alwaysShowLabel:a},s){return i.createElement("div",{className:o()(p.cN,n),ref:s},r?i.createElement(w,{alwaysShowLabel:a},r):null,i.createElement("div",{className:p.Vp,"data-non-interactive":!0},e))}),E=(0,i.forwardRef)(function({input:e,leftIcon:r,rightIcon:n,appendedClassName:a,dataTestId:s},l){let c=o()(p.jz,a);return i.createElement("div",{className:c,ref:l,"data-testid":s},i.createElement("div",{className:p.q1,"data-non-interactive":!0}," ",e," "),i.createElement("div",{className:p.eK,"data-non-interactive":!0}," ",r," "),i.createElement("div",{className:p.H_,"data-non-interactive":!0}," ",n," "))}),y=(0,i.forwardRef)(function({input:e,children:r,appendedClassName:n,dataOnboardingKey:a},s){let l=o()(p.qv,n);return i.createElement("div",{className:l,ref:s,"data-onboarding-key":a},i.createElement("div",{className:p.q1},e),i.createElement("div",{className:p.wH},r))}),b=(0,i.forwardRef)(function({leftLabel:e,rightLabel:r,topIcon:n,bottomIcon:a,appendedClassName:s,topLeftInput:l,bottomLeftInput:c,topRightInput:d,bottomRightInput:u,leftInput:m,rightInput:h},_){let g=o()(p.d1,s),f=null!=m?i.createElement("div",{className:p.kW},m):l,E=null!=h?i.createElement("div",{className:p.kW},h):d,y=null!=m?null:i.createElement("div",null,c),b=null!=h?null:i.createElement("div",null,u);return i.createElement("div",{className:g,ref:_,"data-non-interactive":!0},i.createElement(w,null,e),i.createElement(A,null,r),i.createElement(v,null),f,E,i.createElement("div",null,n),y,b,i.createElement("div",null,a))});function v({}){return i.createElement("div",{"data-non-interactive":!0})}function T({children:e}){return i.createElement("span",{"aria-hidden":"true"},e)}function I({children:e}){return e?i.createElement("div",{className:p.to,"data-non-interactive":!0},e):null}let S=(0,i.forwardRef)(function({selected:e,grabberClassName:r,hideGrabber:n,showGrabberOnRowHover:a=!1,singletonRow:c,dragging:d,children:h,selectedSecondary:_,containerClassName:g,...f},E){let y=!n&&(!c||d),b=e&&d?u.Aw:p.gB,v=_?p.kR:e?p.CZ:"";return i.createElement(s.D8,{...f,forwardedRef:E,className:o()(a?d?p.r_:p.kc:p.P6,v,g)},y&&i.createElement("div",{className:o()(r,{[p.tp]:d,[p.kI]:!d})},(!d||e)&&i.createElement(l.B,{className:b,svg:m.A})),h)});function w({children:e,alwaysShowLabel:r,useAsLegend:n}){return(0,d.V)()||r?i.createElement(c.e,{condition:!!n,wrapper:e=>i.createElement("legend",null,e)},i.createElement("span",{"aria-hidden":!n,className:p.Qb,"data-non-interactive":!0},e)):i.createElement(v,null)}function A({children:e}){return(0,d.V)()?i.createElement("span",{"aria-hidden":"true",className:p.iV,"data-non-interactive":!0},e):i.createElement(v,null)}},696137:(e,r,n)=>{n.d(r,{JJ:()=>d});var i=n(848318),a=n(536384),o=n.n(a),s=n(983229),l=n(678517),c=n(235035);(0,i.forwardRef)(function({leftLabel:e,leftInput:r,rightLabel:n,rightInput:a,appendedClassName:d,icon:u,...p},m){return i.createElement(s.D8,{className:o()(c.$f,d),forwardedRef:m,...p,"data-non-interactive":!0},null!=e?i.createElement(l.Kg,null,e):null,i.createElement("div",{className:c.Vp,"data-non-interactive":!0},r),null!=n?i.createElement(l.u9,null,n):null,i.createElement("div",{className:c.ON,"data-non-interactive":!0},a),i.createElement(l.rH,null,u))}),(0,i.forwardRef)(function({input:e,children:r,appendedClassName:n,onMouseDown:a,onClick:l,dataOnboardingKey:d},u){let p=o()(c.qv,n);return i.createElement(s.D8,{onClick:l,dataOnboardingKey:d,className:p,forwardedRef:u,onMouseDown:a,"data-non-interactive":!0},i.createElement("div",{className:c.q1,"data-non-interactive":!0},e),i.createElement("div",{className:c.wH},r))});let d=(0,i.forwardRef)(function({input:e,leftIcon:r,rightIcon:n,appendedClassName:a,onFocus:l,onMouseDown:d,onMouseMove:u,onMouseUp:p,recordingKey:m},h){let _=o()(c.jz,a);return i.createElement(s.D8,{className:_,forwardedRef:h,onFocus:l,onMouseDown:d,onMouseMove:u,onMouseUp:p,recordingKey:m,"data-non-interactive":!0},i.createElement("div",{className:c.q1,"data-non-interactive":!0}," ",e," "),i.createElement("div",{className:c.eK,"data-non-interactive":!0}," ",r," "),i.createElement("div",{className:c.H_,"data-non-interactive":!0}," ",n," "))});(0,i.forwardRef)(function({input:e,label:r,appendedClassName:n,alwaysShowLabel:a,onFocus:d,onBlur:u,dataTestId:p},m){return i.createElement(s.D8,{className:o()(c.cN,n),forwardedRef:m,onFocus:d,onBlur:u,"data-non-interactive":!0,"data-testid":p},r?i.createElement(l.Kg,{alwaysShowLabel:a},r):null,i.createElement("div",{className:c.Vp,"data-non-interactive":!0},e))}),(0,i.forwardRef)(function({label:e,input:r,icon:n,dataTestId:a,recordingKey:d,onContextMenu:u,onClick:p,onMouseDown:m,appendedClassName:h},_){let g=o()(c.xx,h);return i.createElement(s.D8,{className:g,forwardedRef:_,onContextMenu:u,onClick:p,onMouseDown:m,recordingKey:d,"data-testid":a,"data-non-interactive":!0},null!=e?i.createElement(l.Kg,null,e):null,i.createElement("div",{className:c.Vp,"data-non-interactive":!0},r),i.createElement(l.rH,null,n))})},588974:(e,r,n)=>{n.d(r,{d:()=>d});var i=n(848318),a=n(536384),o=n.n(a),s=n(983229),l=n(678517),c=n(235035);let d=(0,i.forwardRef)(function({leftInput:e,rightInput:r,leftLabel:n,rightLabel:a,leftIcon:d,rightIcon:u,appendedClassName:p,...m},h){let _=o()(c.ZD,p);return i.createElement(s.D8,{className:_,forwardedRef:h,...m,"data-non-interactive":!0},null!=n?i.createElement(l.Kg,null,n):null,i.createElement("div",{className:c.Vp,"data-non-interactive":!0},e),null!=a?i.createElement(l.u9,null,a):null,i.createElement("div",{className:c.ON,"data-non-interactive":!0},r),i.createElement("div",{className:c.dk,"data-non-interactive":!0},d),i.createElement("div",{className:c.pK,"data-non-interactive":!0},u))});(0,i.forwardRef)(function({leftLabel:e,rightLabel:r,topIcon:n,bottomIcon:a,appendedClassName:d,collapsedLeftInput:u,collapsedRightInput:p,expandedTopLeftInput:m,expandedTopRightInput:h,expandedBottomLeftInput:_,expandedBottomRightInput:g,singleInput:f,showAllPaddingControls:E,showSinglePaddingControl:y,...b},v){let T=o()(c.KP,d),I=i.createElement("div",{className:c.Xv},f),S=i.createElement(i.Fragment,null,i.createElement("div",{className:c.Vp},u),i.createElement("div",{className:c.H$},p)),w=i.createElement(i.Fragment,null,i.createElement("div",{className:c.Vp},m),i.createElement("div",{className:c.ON},_),i.createElement("div",{className:c.H$},h),i.createElement("div",{className:c.Os},g));return i.createElement(s.D8,{className:T,forwardedRef:v,...b,"data-non-interactive":!0},i.createElement(l.Kg,null,e),i.createElement(l.u9,null,r),i.createElement(l.my,null),y?I:E?w:S,i.createElement("div",{className:c.dk},n),E&&a&&i.createElement("div",{className:c.pK},a))})},737808:(e,r,n)=>{n.d(r,{EG:()=>o}),n(848318),n(442313);var i=n(817519),a=n(686500);function o(e){if(e.extensionSearchString)return e.extensionSearchString;let r=e.displayForQuickCommand?e.displayForQuickCommand:(0,i.Dz)(e);return(0,a.A)(r,e.args)}n(257628)},771622:(e,r,n)=>{n.d(r,{BB:()=>b,XG:()=>E,wI:()=>f}),n(848318);var i=n(992277),a=n(39773),o=n(6819),s=n(502255),l=n(103841),c=n(481540),d=n(454869),u=n(542143),p=n(60614),m=n(318167),h=n(217682),_=n(677657),g=n(4434);function f({searchQuery:e,extensionId:r,moduleFilters:n,searchPosition:i,numSearchResults:a}){y({action:r,searchQuery:e,numSearchResults:a,rankingAlgorithm:(0,h.eg)(_.Jc.EXTENSIONS),searchPosition:i,module:_.Jc.EXTENSIONS,qaVersion:p.$L,isAi:!1,isPlugin:!0,moduleFilters:n})}function E({action:e,numSearchResults:r,searchPosition:n,rankingAlgorithm:i,isSearchResult:o,moduleFilters:s}){y({action:e,searchQuery:a.zl.get(g.Q8),numSearchResults:r,rankingAlgorithm:i,searchPosition:n,qaVersion:p.$L,isAi:!0,isPlugin:!1,moduleFilters:s,isSearchResult:o,module:(0,m.x)()})}function y(e){let{quickActionsSessionId:r,quickActionsQueryId:n,currentSelection:l,fileKey:m,productType:_,source:f,role:E,hasAiFeatureAccess:y}=function(){let e=o.D.getState(),r=(0,d.l)(e),n=e.openFile?.key??"",l=(0,c.v5)(e.selectedView,null),m=a.zl.get(g.dd)??"";m||(0,s.$D)(i.e.EXTENSIBILITY,Error(`No quick actions session ID found when logging ${p.OW}`));let _=a.zl.get(g.Rt);return{currentSelection:r,fileKey:n,productType:l,source:a.zl.get(g.rE)?.source??"",quickActionsSessionId:m,quickActionsQueryId:_,role:(0,h.WZ)(),hasAiFeatureAccess:(0,u.W7)()}}(),b={...e,quickActionsSessionId:r,currentSelection:l,fileKey:m,productType:_,quickActionsQueryId:n,source:f,role:E,hasAiFeatureAccess:y};(0,h.mi)(b)}function b(e){return!!e.tags?.includes(l.$.AI)}n(737808)},920536:(e,r,n)=>{n.d(r,{X:()=>p});var i=n(157907),a=n(39773),o=n(579020),s=n(6819),l=n(379338);n(493554),n(195507),n(635547),n(542143);var c=n(17025),d=n(257628);let u=(0,a.eU)(null);function p(e){let r=a.zl.get(u);if(!(0,i.k)().qa_ai_metering||e===d.JT.ASSISTANT_CHAT||e===d.JT.FIND_INSPIRATION)return{withinMeter:!0};let n=a.zl.get(c.Ac),p=a.zl.get(c.ag),m=a.zl.get(c.u6),h=p||m;if("unchecked"===n||"null_grantlist"===n&&h){let r=s.D&&s.D.getState().selectedView,n=r?.view==="fullscreen"&&r.fileKey;o.az.trackDefinedEvent("search_experience.ai_eligibility.meter_checked",{newGrantlistPlanValue:null!==p?p.toString():"null",newGrantlistUserValue:null!==m?m.toString():"null",userId:l.Ay().user_data?.id,fileKey:n||"missing",action:e}),a.zl.set(c.Ac,h?"with_grantlist":"null_grantlist")}if(!r)return{withinMeter:!1,noDataLoaded:!0};let _=r.find(r=>r.userActions.includes(e));if(!_)return{withinMeter:!1};let g=parseInt(_.remaining);return isNaN(g)?{withinMeter:!1}:{withinMeter:g>0,meterResetDate:_.resetsAt}}},542143:(e,r,n)=>{n.d(r,{PE:()=>E,W7:()=>y}),n(848318);var i=n(157907),a=n(39773),o=n(6819),s=n(379338);n(493554),n(195507);var l=n(579463);n(808471);var c=n(871430),d=n(235441),u=n(393246);n(87089);var p=n(376780);n(635547);var m=n(922030),h=n(241917),_=n(53818),g=n(17025);let f=(0,a.eU)(s.tl().editing_file?.can_use_jubilee??!1),E=((0,a.eU)(!1),(0,_.n)(async()=>await (0,l.w0)("ai_org_use_llama")),(0,_.n)(()=>{let e=(0,c.q8)(),r=(0,a.md)(f);return!!(((0,d.lg)()!==p._Y.SITES||(0,i.k)().sts_ai_enabled)&&(0,g.$7)("useHasPermission"))&&((0,i.k)().qa_ai_metering?r:!e)})),y=(0,_.n)(()=>{if(a.zl.get(d.u8)===h.nT.Sites&&!(0,i.k)().sts_ai_enabled||!(0,g.$7)("getHasPermission"))return!1;let e=a.zl.get(f);if((0,i.k)().qa_ai_metering)return e;let r=a.zl.get(u.Z),n=a.zl.get(m.Me),s=o.D.getState().openFile,l=!s||!s.canEdit;return!(0,c.lt)({currentOrg:r,currentTeam:n,isViewer:l})})},473450:(e,r,n)=>{n.d(r,{Ci:()=>S,Ko:()=>I,LC:()=>A,Lh:()=>N,Nv:()=>w,P5:()=>O,_d:()=>C,eH:()=>L});var i=n(157907),a=n(39773),o=n(6819);n(493554),n(195507);var s=n(579463),l=n(871430),c=n(235441),d=n(393246),u=n(747863);n(635547);var p=n(922030),m=n(241917),h=n(36789),_=n(101573),g=n(53818),f=n(542143),E=n(468410),y=n(17025);let b=(0,a.eU)(!1),v=(0,a.eU)(null),T=(0,g.n)(()=>!!(0,a.md)(y.p9));function I(){if(!(0,y.$7)("getHasAssetVisualSearchPermission")||!(0,i.k)().api_asset_search)return!1;let e=a.zl.get(b);if((0,i.k)().qa_ai_metering)return e;let r=a.zl.get(d.Z),n=a.zl.get(p.Me),s=o.D.getState().openFile,c=!s||!s.canEdit;return!(0,l.lt)({currentOrg:r,currentTeam:n,isViewer:c})}function S(e){return(0,i.k)().api_asset_search?(function(e){if(!e||!u.nt.ui3.getValue())return Promise.resolve(!1);let r=a.zl.get(v);return null!==r?Promise.resolve(r):(0,s.vs)("exp_search_ai_assets").then(e=>{let r=e.getValue("allow_ai_results",null);return null!==r&&a.zl.set(v,!!r),!!r})})(e).then(e=>{if(!e&&!(0,y.$7)("getHasAssetSearchPermission"))return!1;let r=a.zl.get(b);if((0,i.k)().qa_ai_metering)return r;let n=a.zl.get(d.Z),s=a.zl.get(p.Me),c=o.D.getState().openFile,u=!c||!c.canEdit;return!(0,l.lt)({currentOrg:n,currentTeam:s,isViewer:u})}):Promise.resolve(!1)}let w=(0,g.n)(e=>{let r=(0,l.q8)(),n=(0,a.md)(b);return!!((0,i.k)().api_asset_search&&(function(e){let{getConfig:r}=(0,s.I7)("exp_search_ai_assets",void 0,!0);return!!r().getValue("allow_ai_results",!1)&&e&&u.nt.ui3.getValue()}(e)||(0,y.$7)("useHasAssetSearchPermission")))&&((0,i.k)().qa_ai_metering?n:!r)}),A=(0,g.n)(()=>{let e=(0,l.q8)(),r=(0,a.md)(b),n=T();return!!(0,y.$7)("useHasFragmentSearchPermission")&&(!(0,i.k)().asset_suggestions_require_completed_backfill||!!n)&&((0,i.k)().qa_ai_metering?r:!e)});function C(){let e=function(){let e=a.zl.get(b),r=a.zl.get(y.p9);if(!(0,y.$7)("useHasFragmentSearchPermission")||(0,i.k)().asset_suggestions_require_completed_backfill&&!r)return!1;if((0,i.k)().qa_ai_metering)return e;let n=a.zl.get(d.Z),s=a.zl.get(p.Me),c=o.D.getState().openFile,u=!c||!c.canEdit;return!(0,l.lt)({currentOrg:n,currentTeam:s,isViewer:u})}();return N()&&e&&(0,E.C7)()}function N(){let e=o.D.getState().selectedView,r=(0,_.P)(e),n=(0,h.Jh)(e);return(0,c.JV)(e)===m.nT.Design||r||n}function L(){let e=(0,f.PE)();return N()&&!!(0,i.k)().hub_file_fragments&&e}function O(){return N()&&!!(0,i.k)().hub_file_fragments&&(0,f.W7)()}},468410:(e,r,n)=>{n.d(r,{C7:()=>s,Ll:()=>d,h8:()=>o,kK:()=>l,qF:()=>c});var i=n(157907),a=n(17025);function o(){return!!(0,i.k)().qa_search_frecency}function s(){return!!(0,i.k)().asset_suggestions&&(0,a.$7)("isFragmentSearchEnabled")}function l(){return!!(0,i.k)().actions_hide_recents&&(0,a.$7)("shouldHideRecents")}function c(){return!!(0,i.k)().eai_image_tools&&(0,a.$7)("isImageToolsEnabled")}function d(){return!!(0,i.k)().prototype_ai_magic_link&&(0,a.$7)("isMagicLinkEnabled")}},257628:(e,r,n)=>{n.d(r,{GI:()=>g,HW:()=>a,IA:()=>f,JT:()=>o,KL:()=>m,LC:()=>l,TJ:()=>p,Xy:()=>_,d7:()=>s,gj:()=>u,pY:()=>c,rr:()=>d,wC:()=>i,zw:()=>h});let i=354,a=600;var o=(e=>(e.TRANSLATE_TEXT="translate-text",e.REWRITE_TEXT="rewrite-text",e.SHORTEN_TEXT="shorten-text",e.FIRST_DRAFT="first-draft",e.FIRST_DRAFT_MAKE_CHANGES="first-draft-make-changes",e.FIRST_DRAFT_MAKE_KIT="first-draft-make-kit",e.FIRST_DRAFT_COMPONENTIZE="first-draft-componentize",e.FIRST_DRAFT_SUGGEST_PROPS="first-draft-suggest-props",e.FIRST_DRAFT_LINTING="first-draft-linting",e.FIRST_DRAFT_DEBUG="first-draft-debug",e.FIND_INSPIRATION="find-inspiration",e.IMAGE_TO_DESIGN="image-to-design",e.IMAGE_TO_DESIGN_ORACLE="image-to-design-oracle",e.REMOVE_BACKGROUND="remove-background",e.AUTO_RENAME_LAYERS="auto-rename-layers",e.GENERATE_IMAGE="generate-image",e.EDIT_IMAGE="edit-image",e.MAGIC_LINK="magic-link",e.MAKE_EDITS="make-edits",e.FIRST_DRAFT_FINE_TUNE="first-draft-fine-tune",e.CONTENT_FILL="content-fill",e.SLIDES_GENERATE_SPEAKER_NOTES="slides-generate-speaker-notes",e.SLIDES_REWRITE_TEXT="slides-rewrite-text",e.ASSISTANT_CHAT="assistant-chat",e.BOARD_TO_DECK="board-to-deck",e.DETECT_VIOLATIONS="detect-violations",e.FIRST_DRAFT_MAKE_KIT_DEBUG="first-draft-make-kit-debug",e.UPSCALE_IMAGE="upscale-image",e.TEXT_SEARCH="text_search",e.CODE_CHAT="code-chat",e.FIGMAKE="figmake",e))(o||{});let s="https://help.figma.com/hc/articles/23870272542231",l="https://help.figma.com/hc/articles/24004542669463",c="https://help.figma.com/hc/articles/24004868368919",d="https://help.figma.com/hc/articles/24244814883735",u="https://help.figma.com/hc/articles/24004711129879",p="https://help.figma.com/hc/articles/25968453273495",m="https://help.figma.com/hc/articles/23796390206743",h="https://help.figma.com/hc/articles/23955143044247",_="https://help.figma.com/hc/articles/24004778051479",g="https://help.figma.com/hc/articles/24245848829847#h_01JBF670XY6WGXKE8F76112N9W",f="https://help.figma.com/hc/articles/24037716110615"},73934:(e,r,n)=>{n.d(r,{C:()=>s});var i=n(848318),a=n(730169);let o=(0,i.createContext)((0,i.createRef)());function s(e){let r=(0,i.useContext)(o);(0,a.h)(()=>{e.current&&""!==e.current.value&&!1===r.current&&e.current.select(),r.current=!0})}},392878:(e,r,n)=>{n.d(r,{N:()=>o});var i=n(39773),a=n(4434);function o(){let e=(0,i.md)(a.fq);return e>0?e+8:0}},604936:(e,r,n)=>{n.d(r,{t:()=>a});var i=n(848318);function a(e,r){return(0,i.useCallback)(()=>!(e.manifest.parameters&&!1!==e.manifest.parameterOnly)&&!r,[e.manifest.parameters,e.manifest.parameterOnly,r])}},199445:(e,r,n)=>{n.d(r,{Ag:()=>I,B3:()=>S,RL:()=>N,cT:()=>C,pP:()=>w,qy:()=>f,wj:()=>A,z8:()=>E});var i=n(848318),a=n(992277),o=n(39773),s=n(502255),l=n(896966),c=n(645221),d=n(947934),u=n(725765),p=n(257628),m=n(194719),h=n(786327),_=n(539728),g=n(850289),f=(e=>(e.INITIAL="initial",e.RUNNING="running",e.CANCELLED="cancelled",e.ERROR="error",e.DONE="done",e))(f||{}),E=(e=>(e.INCOMPLETE="incomplete",e.SUCCEEDED="succeeded",e.FAILED="failed",e))(E||{});let y={action:"invalid",source:"invalid",clientLifecycleId:"invalid",quick_actions_session_id:"invalid",file_key:"invalid",product_type:"invalid"},b=(0,o.Iz)(()=>(0,o.eU)({state:"initial",aiTrackingContext:y,tasks:[]})),v={[p.JT.FIRST_DRAFT_MAKE_CHANGES]:a.e.AI_GENERATION,[p.JT.FIRST_DRAFT_MAKE_KIT]:a.e.AI_GENERATION,[p.JT.FIRST_DRAFT_COMPONENTIZE]:a.e.AI_GENERATION,[p.JT.FIRST_DRAFT_SUGGEST_PROPS]:a.e.AI_GENERATION,[p.JT.MAKE_EDITS]:a.e.AI_GENERATION,[p.JT.FIRST_DRAFT]:a.e.AI_GENERATION,[p.JT.IMAGE_TO_DESIGN]:a.e.AI_GENERATION},T="__ABORTED__";async function I(e,r,n,i){let c=b(e),{state:p,aiTrackingContext:_}=o.zl.get(c);if("running"===p){(0,l.xi)("quick-actions","Can't start action while another invocation of the same action is running");return}let f=new AbortController;o.zl.set(c,{state:"running",abortController:f,aiTrackingContext:_,tasks:[]}),(0,m.Dl)({..._,...i});try{let e=new Promise(e=>{f.signal.addEventListener("abort",()=>{e(T)})}),a=r({params:n,abortController:f,onTasksUpdate:e=>{o.zl.set(c,r=>({...r,tasks:e}))},clientLifecycleId:_.clientLifecycleId}),s=await Promise.race([a,e]);if(s!==T)return o.zl.set(c,e=>({state:"done",result:s,aiTrackingContext:_,tasks:e.tasks})),(0,g.k)(),(0,m.as)({..._,...i,status:h.dM.COMPLETED,reason:h.F9.SUCCESS}),s;o.zl.set(c,e=>({state:"cancelled",aiTrackingContext:_,tasks:e.tasks})),(0,m.as)({..._,...i,status:h.dM.FAILED,reason:h.F9.STOPPED});return}catch(r){f.abort(),(0,l.x1)("quick-actions","Error encountered running action",{error:r}),r instanceof u.JB&&!1===r.reportToSentry||(0,s.$D)(v[e]??a.e.UNOWNED,r),o.zl.set(c,e=>({state:"error",error:r,originalParams:n,aiTrackingContext:_,tasks:e.tasks})),(0,m.as)({..._,...i,status:h.dM.FAILED,reason:h.F9.ERROR,errorReason:(0,d.sZ)(r)})}}function S(e){let r=b(e);if("running"===o.zl.get(r).state)return;let n=(0,m.Uu)(e);o.zl.set(r,{state:"initial",aiTrackingContext:n,tasks:[]})}function w(e){let r=b(e);return o.zl.get(r)}function A(e){let r=b(e),n=(0,o.md)(r),{Sprig:a}=(0,c.A)();return(0,i.useEffect)(()=>{if(n){let{state:r,aiTrackingContext:i}=n,{ended:o,status:s,reason:l}=function(e){switch(e){case"cancelled":return{ended:!0,status:h.dM.FAILED,reason:h.F9.STOPPED};case"error":return{ended:!0,status:h.dM.FAILED,reason:h.F9.ERROR};case"done":return{ended:!0,status:h.dM.COMPLETED,reason:h.F9.SUCCESS};default:return{ended:!1,status:h.dM.FAILED,reason:h.F9.ERROR}}}(r);o&&(0,_.k)(a,e,i,s,l)}},[n,a,e]),n}function C(e){let r=b(e),n=o.zl.get(r);"running"===n.state&&n.abortController.abort()}function N(e,r,n){let i=A(e),a=async i=>await I(e,r,i,n);return{...i,start:a,stop:()=>{C(e)}}}},89117:(e,r,n)=>{n.d(r,{m:()=>N});var i=n(848318),a=n(716544),o=n(673906),s=n(442313),l=n(157410),c=n(364370),d=n(566259),u=n(449737),p=n(793727),m=n(2626),h=n(105073),_=n(705724),g=n(911456),f=n(369600),E=n(87089),y=n(661780),b=n(526830),v=n(241917),T=n(677251),I=n(100714),S=n(965436),w=n(789605),A=n(604936),C=n(386502);function N({augmentedExtension:e,submenuRef:r,displayAboveTarget:n}){let{extension:g,publishedExtension:N,canRun:O,canRequest:R}=e,P=(0,a.wA)(),{close:D}=(0,C.cq)(),M=h.EO(N),k=h.OY(N),F=k&&h.gn(N),x=(0,I.Kp)(e),U=function(e){let r=(0,y.TA)(),n=(0,a.d4)(e=>e.authedActiveCommunityProfile),o=h.ej(e);return i.useCallback(()=>{if(!e)return;let i=b.aL.QUICK_ACTIONS;(0,l.mG)(e,i,r,n?.id),o()},[e,r,n,o])}(N),B=i.useCallback(()=>{P(d.v({}))},[P]),V=(0,m.Gt)(g.plugin_id,"quick-actions"),G=(0,S.q8)(g),H=(0,S.U4)(g),K=(0,S.S3)({submenuIsShown:H,extension:g,displayAboveTarget:n}),W=(0,A.t)(g,G),z=i.useCallback(()=>{(0,T.k0)(g)?o.l7.user("insert-widget",()=>L(g)):G&&r?K(r.current):V(),G||x(),W()&&D()},[g,G,r,x,W,K,V,D]),$=(0,f.q5)(),Y=(0,_.RW)(),j=i.useCallback(()=>{if(!$||!$.parentOrgId)return;let e={extension:{pluginId:g.plugin_id,iconUrl:g.redirect_icon_url,name:g.name},isWidget:(0,T.k0)(g),orgId:$.parentOrgId,workspaceDetails:Y.loaded?Y.data:void 0,openedFrom:"editor",fullscreenEditorType:(0,v.wN)($.editorType)};P((0,u.to)({type:w.S,data:e}))},[P,g,$,Y]),q=(0,E.sZ)(),X=(0,p.a)(q?.id,g.plugin_id,Y.loaded?Y.data?.workspaceId:void 0);return i.useMemo(()=>{let e=N?.monetized_resource_metadata;return M&&!k&&e?{onAction:U,actionText:(0,c.XR)(e)}:M&&F?{onAction:B,actionText:(0,s.t)("qa.extensions.update_payment")}:O?{onAction:z,actionText:(0,s.t)("qa.extensions.run")}:X?{onAction:()=>{},actionText:(0,s.t)("qa.extensions.approval_pending")}:R?{onAction:j,actionText:(0,s.t)("qa.extensions.request_approval")}:{onAction:()=>{},actionText:""}},[M,k,N,U,F,B,O,R,X,j,z])}let L=e=>{(0,g.j)({pluginID:e.plugin_id,widgetName:e.name,pluginVersionID:e.id,triggeredFrom:"quick-actions"})}},60614:(e,r,n)=>{n.d(r,{$L:()=>m,Be:()=>u,NP:()=>_,Nv:()=>h,OW:()=>d,RA:()=>s,U3:()=>p,W3:()=>a,gc:()=>l,mP:()=>o,qE:()=>i,tq:()=>f,uP:()=>g});var i=(e=>(e.VIEWER="viewer",e.EDITOR="editor",e))(i||{});let a="Quick Actions Search",o="open-quick-actions",s="Quick Actions Search Query Result",l="search-quick-actions";var c=(e=>(e.EXTENSION="extension",e.ACTION="action",e))(c||{});let d="Quick Actions Action",u="Quick Actions Panel Button",p="quick_actions_v1",m="quick_actions_v2",h="frecency",_="string-match",g="extensions",f="assets"},217682:(e,r,n)=>{n.d(r,{Ev:()=>b,Fi:()=>I,M$:()=>A,Mq:()=>S,WZ:()=>N,eg:()=>v,mi:()=>w,qM:()=>C,qz:()=>O,zF:()=>L});var i=n(848318),a=n(716544),o=n(445777),s=n(39773),l=n(878028),c=n(579020),d=n(702),u=n(481540),p=n(164936),m=n(369600),h=n(542143),_=n(468410),g=n(677657),f=n(4434),E=n(597983),y=n(60614);function b(){let e=(0,s.md)(m.ze)||"",r=(0,a.d4)(e=>e.selectedView),n=(0,s.md)(f.rE),o=n?.source||"",l=(0,s.md)(p.wg)?y.qE.EDITOR:y.qE.VIEWER,_=(0,h.PE)();return(0,i.useCallback)(({quickActionsSessionId:n,quickActionsQueryId:i,searchQuery:a,numSearchResults:s,currentSelection:p,module:m,moduleFilters:h,qaVersion:g,searchQueryResults:f})=>{var E;E={quickActionsSessionId:n,quickActionsQueryId:i,searchQuery:a,numSearchResults:s,currentSelection:p,module:m,moduleFilters:h,qaVersion:g,fileKey:e,searchLatencyMs:d.sn.tryStop(y.gc),searchQueryResults:f,source:o,rankingAlgorithm:v(m),productType:(0,u.v5)(r,null),role:l,hasAiFeatureAccess:_},(0,c.sx)(y.RA,E,{forwardToDatadog:!0})},[e,_,l,r,o])}function v(e){switch(e){case g.Jc.ALL:return(0,_.h8)()?y.Nv:y.NP;case g.Jc.EXTENSIONS:return y.uP;case g.Jc.ASSETS:case g.Sn.ASSETS_TAB_DETAIL_VIEW:return y.tq;default:(0,o.xb)(e)}}function T(e){if(!e)return!1;if(e===g.Jc.ALL||e===g.Jc.ASSETS||e===g.Jc.EXTENSIONS)return!0;switch(e){case g.Sn.ASSETS_TAB_DETAIL_VIEW:case g.Sn.VISUAL_SEARCH:return!0;case g.Sn.EXTENSION_DETAILS:case g.Sn.REGENERATE_TEXT_TOAST:case g.Sn.MAGIC_LINK_DONE_TOAST:case g.Sn.BACKGROUND_REMOVE_TOAST:case g.Sn.UPSCALE_IMAGE_TOAST:case g.Sn.RENAME_LAYERS_TOAST:case g.Sn.GENERATE_IMAGE:case g.Sn.EDIT_IMAGE:case g.Sn.IMAGE_TO_DESIGN:case g.Sn.IMAGE_TO_DESIGN_ORACLE:case g.Sn.MAGIC_LINK:case g.Sn.PLUGIN_PARAMETER_ENTRY:case g.Sn.PLUGIN_SUBMENU_ENTRY:case g.Sn.TRANSLATE:case g.Sn.REWRITE:case g.Sn.SHORTEN:case g.Sn.FIRST_DRAFT:case g.Sn.FIRST_DRAFT_KIT_PICKER:case g.Sn.FIRST_DRAFT_MAKE_CHANGES:case g.Sn.FIRST_DRAFT_LINT:case g.Sn.FIRST_DRAFT_DEBUG:case g.Sn.FIRST_DRAFT_MAKE_KIT_DEBUG:case g.Sn.FIRST_DRAFT_MAKE_KIT:case g.Sn.MAKE_EDITS:case g.Sn.FIRST_DRAFT_FINE_TUNE:case g.Sn.ASSISTANT_CHAT:case g.Sn.LINK_TO_COMPONENT:case g.Sn.DETECT_VIOLATIONS:case g.Sn.FOR_TESTING:return!1;default:(0,o.xb)(e)}}function I({isQAV2:e,moduleToOpen:r}){return!e||!r||("tab"===r.type?T(r.module):"custom"===r.type?T(r.name):void(0,o.xb)(r))}function S(e){(0,c.sx)(y.W3,e,{forwardToDatadog:!0})}function w(e){(0,c.sx)(y.OW,e,{forwardToDatadog:!0})}function A(e,r){return{...e,onAction:n=>{var i;let a=n.shortcut;i={source:r,shortcutText:a?(0,E.OZ)(a):"",actionText:e.text||""},(0,c.sx)(y.Be,i),e.onAction&&e.onAction(n)}}}function C(e){let r=s.zl.get(O);return!r.has(e)&&(r.add(e),s.zl.set(O,r),!0)}function N(){return s.zl.get(p.wg)?y.qE.EDITOR:y.qE.VIEWER}let L=(0,s.eU)(null),O=(0,s.E2)("ai_actions_used",new Set,l.z.set(l.z.string()))},449345:(e,r,n)=>{n.d(r,{$I:()=>M,Jf:()=>F,KY:()=>B,RM:()=>G,gn:()=>V,h$:()=>K,iP:()=>U,jD:()=>k});var i=n(741419),a=n(179703),o=n(157907),s=n(39773),l=n(579020),c=n(702),d=n(6819),u=n(507152),p=n(697714),m=n(223161),h=n(790355),_=n(235441),g=n(481540),f=n(690391),E=n(454869),y=n(241917),b=n(355323);n(268904);var v=n(920536),T=n(542143),I=n(53818),S=n(257628),w=n(60614),A=n(217682),C=n(677657),N=n(4434),L=n(561292),O=n(856260),R=n(632626);let P=(0,s.eU)(null),D=(0,s.eU)(new Set);function M({trackingData:e,moduleToOpen:r}){let n=d.D.dispatch;if((0,f.T)(d.D.getState().progressBarState.mode)||"fullscreen"!==d.D.getState().selectedView.view)return;let o=V(r);(0,A.Fi)({isQAV2:o,moduleToOpen:r})&&c.sn.start(w.mP);let l=d.D.getState(),_={keyboardShortcut:"",currentSelection:(0,E.l)(l),fileKey:l.openFile?.key??"",productType:(0,g.v5)(l.selectedView,null),role:(0,A.WZ)(),hasAiFeatureAccess:(0,T.W7)(),...e};if(s.zl.set(A.zF,e.source),s.zl.set(N.rE,_),o){if(s.zl.set(N.Bu,!0),s.zl.get(N.dd)||(s.zl.set(N.dd,(0,u.g)()),s.zl.set(m.q4)),s.zl.set(P,null),r){if(r.beforeModuleOpen){let e=function(){let e=s.zl.get(N.dd);if(!e)throw Error("Session ID is missing when opening a module in Quick Actions V2.");return{sessionId:e,canvasSelection:a.UN().getCurrentPage()?.directlySelectedNodes,searchQuery:s.zl.get(N.Q8)}}();r.beforeModuleOpen(e)}"tab"===r.type?(s.zl.set(N.Lk,r.module),r.filter&&s.zl.set(O.t,r.filter)):s.zl.set(N.YH,e=>[{module:r.module,name:r.name},...e])}i.qmM.setDefaultTool(),n(p.F.dequeue({matchTimeout:"ephemeral"}))}else n(h.j7({type:b.jv,hasOwnEscKeyHandler:!0,data:{fireQuickActionsTrackingEvent:e=>{(0,A.Mq)({..._,qaVersion:w.U3,quickActionsSessionId:e,timeToShowModal:c.sn.tryStop(w.mP)||0,module:C.Jc.ALL})}}}))}function k(e,r,n){if(s.zl.get(N.Bu)){if(!n.forceClose&&s.zl.get(N.ZG))return!1;s.zl.set(N.Bu,!1),s.zl.set(N.dd,null),(0,R.R)(),(0,L.b)()}else r?.type===b.jv&&e(h.oB());return!0}function F(e){return s.zl.get(N.Bu)||e?.type===b.jv}function x(e){for(let r of Object.values(S.JT))if(e===r)return r;return null}function U(e,r={},n){!s.zl.get(N.Bu)&&(!(!x(e)||(0,T.W7)())||!function(e){let r=x(e);if(!r)return!0;let{withinMeter:n}=(0,v.X)(r);return n}(e)||s.zl.get(D).has(e)||(s.zl.get(N.dd)||s.zl.set(N.dd,(0,u.g)()),s.zl.set(P,{action:e,payload:r,guid:n})))}function B(e={}){let{dismissedAction:r,actionToClear:n}=e;if(s.zl.get(P)){if(n&&n!==s.zl.get(P)?.action)return;if(s.zl.set(P,null),r){let e=s.zl.get(D);s.zl.get(D).has(r)||s.zl.set(D,new Set([...e,r])),l.az.trackDefinedEvent("ai_productivity.actions_suggestion_dismissed",{action:r})}}}function V(e){let r=i.Ez5.uiState().isUI3.getCopy(),n=d.D.getState().selectedView,a=(0,_.JV)(n),s=[y.nT.Figmake];return(0,o.k)().figjam_quick_actions_v2||s.push(y.nT.Whiteboard),!!(a&&!s.includes(a)&&(r||e))}let G=(0,I.n)((e,r)=>{let n=r?.isUI3??i.Ez5.uiState().isUI3.getCopy(),a=d.D.getState().selectedView,o=r?.editorType??(0,_.JV)(a);return!!(o&&(o===y.nT.Design||o===y.nT.Slides)&&(n||e))});class H{isQuickActionsShown(){return F(d.D.getState().dropdownShown)}}function K(){new H}},4434:(e,r,n)=>{n.d(r,{Bu:()=>_,Bw:()=>l,JB:()=>y,Lk:()=>p,Q8:()=>d,Rt:()=>u,TT:()=>c,YH:()=>h,ZG:()=>E,dd:()=>m,fq:()=>f,hw:()=>v,jh:()=>b,rE:()=>g});var i=n(848318),a=n(39773),o=n(507152),s=n(677657);let l=(0,a.tx)({}),c=(0,a.tx)(null),d=(0,a.tx)(""),u=(0,a.eU)((0,o.g)());(0,a.eU)({loaded:!1,extensions:[]});let p=(0,a.tx)(s.Jc.ALL),m=(0,a.tx)(null);(0,a.eU)(null);let h=(0,a.tx)([]);(0,a.Iz)(e=>(0,a.eU)(r=>{let[n]=r(h);return n?.name===e}));let _=(0,a.eU)(!1),g=(0,a.eU)(null),f=(0,a.eU)(0),E=(0,a.eU)(!1);function y(){let e=(0,a.AY)(c);return(0,i.useCallback)(()=>{e()},[e])}function b(){let e=(0,a.AY)(c),r=(0,a.AY)(d),n=(0,a.AY)(h),o=(0,a.AY)(p);return(0,i.useCallback)(()=>{e(),r(),n(),o()},[n,r,e,o])}function v(){let e=(0,a.AY)(d);return(0,i.useCallback)(()=>{e()},[e])}(0,a.eU)(null),(0,a.eU)(null)},284997:(e,r,n)=>{n.d(r,{P:()=>l});var i=n(848318),a=n(596616),o=n(960955);n(166365);var s=n(708115);function l(e){let r=i.createElement(a.h,null,e.label);return i.createElement("div",{className:s.kv},i.createElement(o.S,{checked:e.checked,disabled:e.disabled,label:r}))}},233758:(e,r,n)=>{n.d(r,{y:()=>u});var i=n(848318),a=n(145015),o=n(17755),s=n(442313),l=n(503024),c=n(257628),d=n(396609);function u({variant:e,helpUrlVariant:r}){let[n,u]=i.useState(!1);return i.createElement(a.N_,{className:o.s.hAuto.flexShrink0.$,"data-tooltip":(0,s.t)("qa.learn_more"),"data-tooltip-show-above":!0,"data-tooltip-type":l.Ib.TEXT,href:function(e){switch(e){case c.JT.TRANSLATE_TEXT:case c.JT.REWRITE_TEXT:case c.JT.SHORTEN_TEXT:return c.pY;case c.JT.SLIDES_REWRITE_TEXT:return c.rr;case c.JT.FIRST_DRAFT:case c.JT.FIRST_DRAFT_MAKE_CHANGES:case c.JT.FIRST_DRAFT_MAKE_KIT:case c.JT.FIRST_DRAFT_MAKE_KIT_DEBUG:case c.JT.FIRST_DRAFT_COMPONENTIZE:case c.JT.FIRST_DRAFT_SUGGEST_PROPS:case c.JT.FIRST_DRAFT_LINTING:case c.JT.FIRST_DRAFT_DEBUG:case c.JT.FIRST_DRAFT_FINE_TUNE:return c.zw;case c.JT.GENERATE_IMAGE:case c.JT.EDIT_IMAGE:case c.JT.REMOVE_BACKGROUND:case c.JT.UPSCALE_IMAGE:return c.LC;case c.JT.AUTO_RENAME_LAYERS:return c.gj;case c.JT.MAGIC_LINK:return c.Xy;case c.JT.CONTENT_FILL:return c.KL;case c.JT.BOARD_TO_DECK:return c.TJ;case c.JT.SLIDES_GENERATE_SPEAKER_NOTES:return c.GI;case c.JT.FIND_INSPIRATION:case c.JT.TEXT_SEARCH:return c.IA;case c.JT.IMAGE_TO_DESIGN:case c.JT.IMAGE_TO_DESIGN_ORACLE:case c.JT.MAKE_EDITS:case c.JT.ASSISTANT_CHAT:case c.JT.DETECT_VIOLATIONS:case c.JT.CODE_CHAT:case c.JT.FIGMAKE:case"default":return c.d7}}(r),onBlur:()=>{u(!1)},onClick:e=>e.stopPropagation(),onFocus:()=>{u(!0)},target:"_blank",trusted:!0},i.createElement(d.E,{variant:e,focused:n},(0,s.tx)("qa.ai_beta")))}},279541:(e,r,n)=>{n.d(r,{F1:()=>w,TH:()=>T,kz:()=>v,qI:()=>h,s3:()=>f});var i=n(848318),a=n(445777),o=n(157907),s=n(857188),l=n(831932),c=n(654104),d=n(964e3),u=n(781806),p=n(318167),m=n(677657);function h(){let[e,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=e=>{"Tab"===e.key&&g((0,p.x)())&&r(document.activeElement!==document.body)},n=()=>{r(!1)};return document.addEventListener("keydown",e,!0),document.addEventListener("mousedown",n,!0),()=>{document.removeEventListener("keydown",e,!0),document.removeEventListener("mousedown",n,!0)}},[]),e}let _=i.createContext({registerKeyDownHandler:(e,r,n,i)=>{},removeKeyDownHandler:(e,r,n)=>{},setAllowDefaultTabOverride:e=>{}}),g=(e,r)=>{if(!(0,o.k)().qa_allow_default_tab||!e)return!1;if(void 0!==r)return r;switch(e){case m.Jc.ALL:case m.Jc.EXTENSIONS:case m.Sn.PLUGIN_PARAMETER_ENTRY:case m.Sn.PLUGIN_SUBMENU_ENTRY:case m.Jc.ASSETS:case m.Sn.ASSETS_TAB_DETAIL_VIEW:case m.Sn.ASSISTANT_CHAT:case m.Sn.FIRST_DRAFT_MAKE_KIT:case m.Sn.FIRST_DRAFT_LINT:case m.Sn.FIRST_DRAFT_DEBUG:case m.Sn.FIRST_DRAFT_MAKE_KIT_DEBUG:case m.Sn.LINK_TO_COMPONENT:case m.Sn.IMAGE_TO_DESIGN:case m.Sn.IMAGE_TO_DESIGN_ORACLE:case m.Sn.FIRST_DRAFT_KIT_PICKER:return!1;case m.Sn.BACKGROUND_REMOVE_TOAST:case m.Sn.UPSCALE_IMAGE_TOAST:case m.Sn.FIRST_DRAFT_MAKE_CHANGES:case m.Sn.MAKE_EDITS:case m.Sn.FIRST_DRAFT_FINE_TUNE:case m.Sn.MAGIC_LINK:case m.Sn.MAGIC_LINK_DONE_TOAST:case m.Sn.REGENERATE_TEXT_TOAST:case m.Sn.RENAME_LAYERS_TOAST:case m.Sn.SHORTEN:case m.Sn.EXTENSION_DETAILS:case m.Sn.TRANSLATE:case m.Sn.VISUAL_SEARCH:case m.Sn.DETECT_VIOLATIONS:case m.Sn.REWRITE:case m.Sn.FIRST_DRAFT:case m.Sn.GENERATE_IMAGE:case m.Sn.EDIT_IMAGE:case m.Sn.FOR_TESTING:return!0;default:(0,a.xb)(e)}};function f({name:e,recordingKey:r,children:n,forwardUnhandledEventsToFullscreen:a=!0}){let o=i.useRef(new Map),l=i.useRef(null),[m,h]=i.useState(void 0),f=(0,p.x)(),E=i.useCallback(e=>{"Tab"!==e.key||g(f,m)||e.preventDefault();let r=S({key:e.keyCode,modifier:[e.metaKey?s.xH.META:void 0,e.ctrlKey?s.xH.CONTROL:void 0,e.altKey?s.xH.ALT:void 0,e.shiftKey?s.xH.SHIFT:void 0].filter(e=>!!e)}),n=!1;for(let[i,a]of o.current)i.endsWith(r)&&(a(e),n=!0);return!n&&a&&(n=(0,d.jr)(e)),n},[f,m,a]),y=(0,c.v_)(r,"keydown",e=>{E(e)}),b=(0,c.fo)((0,c.Pt)(r,"fullscreen"),"keydown",e=>{E(e.event)&&e.accept()});return i.useEffect(()=>{let e=l.current;if(e)return e.addEventListener("keydown",y),()=>{e.removeEventListener("keydown",y)}},[y]),i.createElement(_.Provider,{value:{registerKeyDownHandler:(e,r,n,i)=>{let a=I({id:e,key:r,modifier:n});o.current.set(a,i)},removeKeyDownHandler:(e,r,n)=>{let i=I({id:e,key:r,modifier:n});o.current.delete(i)},setAllowDefaultTabOverride:h}},i.createElement(u.vL,{name:e,handleKeyDown:b,focusOnMount:!0},i.createElement("div",{ref:l},n)))}function E(e){return e!==s.xH.META||l.Ay.mac?e:s.xH.CONTROL}function y({key:e,modifier:r}){return r?{key:e,modifier:r.map(E)}:{key:e}}function b(e,r,n,o){let l=i.useMemo(()=>r.map(y),[r]),c=i.useId(),{registerKeyDownHandler:d,removeKeyDownHandler:u}=i.useContext(_),p=i.useCallback(e=>{for(let{key:r,modifier:i}of l)if(e.keyCode===r&&(!i||i.every(r=>(function(e,r){switch(e){case s.xH.META:return r.metaKey;case s.xH.CONTROL:return r.ctrlKey;case s.xH.ALT:return r.altKey;case s.xH.SHIFT:return r.shiftKey;default:(0,a.xb)(e)}})(r,e)))){n(e,{key:r,modifier:i});return}},[n,l]);i.useEffect(()=>(o?l.forEach(({key:e,modifier:r})=>{d(c,e,r??[],p)}):l.forEach(({key:e,modifier:r})=>{u(c,e,r??[])}),()=>{l.forEach(({key:e,modifier:r})=>{u(c,e,r??[])})}),[o,l,p,d,u,c])}function v(e,r,n=!0){b("keydown",[{key:e}],r,n)}function T(e,r,n=!0){b("keydown",e,r,n)}function I({id:e,key:r,modifier:n}){return`${e}-${S({key:r,modifier:n})}`}function S(e){return`${e.key}-${e.modifier?.join("-")??""}`}function w(e){return S(e)}},684596:(e,r,n)=>{n.d(r,{XG:()=>x,aU:()=>B});var i=n(848318),a=n(716544),o=n(897378),s=n(356505),l=n(80711),c=n(425068),d=n(157907),u=n(536384),p=n.n(u),m=n(730169),h=n(857188),_=n(654104),g=n(575492),f=n(17755),E=n(442313),y=n(500276),b=n(604613),v=n(481540),T=n(73934),I=n(684552),S=n(61097),w=n(386502),A=n(194719),C=n(786327),N=n(227109),L=n(894436),O=n(233758),R=n(279541),P=n(183956),D=n(685098);function M(){return i.createElement("div",{className:f.s.colorBgTertiary.bRadius5.font11.h16.fontMedium.flex.itemsCenter.px4.$},(0,E.tx)("whiteboard.ai_modal.hint_tab"))}function k({promptHistory:e,onChange:r,textAreaRef:n}){let a=(0,i.useMemo)(()=>{let r=[];return e.length>0&&(r.push({type:"header",text:(0,E.t)("first_draft.prompt_history_header")}),r.push(...e.map(e=>({type:"option",value:e,text:e})))),r},[e]);return i.createElement(L.r,{displayAboveTarget:!0,focusContainerOnMount:!0,iconAriaLabel:(0,E.t)("first_draft.prompt_history_label"),iconSvg:i.createElement(l.A,{style:{marginLeft:-8,marginRight:-8}}),items:a,lean:"right",maxWidth:320,onSelectedChange:e=>{r(e),n.current?.focus()},onVisibleChange:e=>{e||n.current?.focus()},selected:null})}let F=(0,i.forwardRef)(({value:e,onChange:r,recordingKey:n,minLength:a,maxLength:o,verticalPromptLayout:s,height:l,maxHeight:c,onFocus:d,placeholder:u},p)=>{let E=(0,i.useRef)(null);(0,m.h)(()=>{let e=p?.current;e&&!d&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length),e.addEventListener("keydown",e=>{e.keyCode===h.Uz.ENTER&&0===(0,h.sN)(e)&&e.stopPropagation()}));let r=E.current;r&&r.scrollToBottom()}),(0,T.C)(p);let y=_.AF(_.Pt(n,"textArea"),"change",e=>{r(e.currentTarget.value)}),b=U(s);return i.createElement(g.P,{height:l,maxHeight:c,ref:E},i.createElement("div",{className:f.s.grid.borderBox.overflowWrapAnywhere.$,style:b},i.createElement("textarea",{ref:p,className:f.s.resizeNone.borderBox.bgTransparent.overflowHidden.zIndex1.$,"data-testid":"textArea",maxLength:o,minLength:a,onChange:y,onFocus:d,placeholder:u,rows:1,style:{gridArea:"1 / 1 / 2 / 2"},value:e}),i.createElement("div",{className:f.s.preWrap.invisible.borderBox.$,style:{gridArea:"1 / 1 / 2 / 2"}},function(e){return e.endsWith("\n")?e+"\u200B":e}(e))))});function x({action:e,value:r,onChange:n,suggestion:l,suggestionPills:u=[],promptHistory:m=[],disableAutoComplete:g=!1,recordingKey:T,onBack:A,featureNameForInstrumentation:C,refocusToInput:N=!1,minLength:L,maxLength:P,topNavContent:x,bottomContent:B,growVertically:V,width:G,textAreaRef:H}){let K=(0,i.useRef)(null),W=H||K,z=l&&r!==l&&l.startsWith(r),$=!g&&z,Y=l?.slice(r.length)||"",{isRoot:j,pop:q}=(0,w.cq)(),X=!(r.length>0||B),Z=X&&u.length>0,J=(0,d.k)().first_draft_prompt_history&&m.length>0&&X,Q=(0,a.Pj)().getState(),ee=(0,R.qI)(),et=document.activeElement?.tagName==="TEXTAREA";(0,R.kz)(h.Uz.TAB,e=>{$&&(!ee||et)&&(e.preventDefault(),n(l),(0,v.ds)("actions_prompt_tab_completed",Q.openFile?.key,Q,{feature:C,suggestion:l}))}),(0,S.y)(r,W),(0,I.z)();let er=!!(A||!j),en=!x,ei=!en;N&&W.current?.focus();let ea=U(en);return i.createElement("div",{className:p()(f.s.borderBox.p4.mb8.colorBgSecondary.wFull.flex.flexColumn.bRadius5.relative.$),style:y.sx.if(ei,y.sx.add(y.sx.if(V,{minHeight:"128px"},{height:"128px"}))).add(y.sx.if(V,{width:`${G}px`})).$},i.createElement("div",{className:p()(f.s.flex.relative.overflowHidden.if(ei,f.s.flexColumn,f.s.gap8).$,b.Dm),style:ei&&!V?{height:128}:{}},(er||ei)&&i.createElement("div",{className:f.s.h24.flex.flexRow.relative.justifyBetween.$},i.createElement("div",{className:f.s.flex.flexRow.gap4.$},er&&i.createElement(o.K,{recordingKey:_.Pt(T,"backButton"),onClick:A||q,"aria-label":(0,E.t)("qa.go_back")},i.createElement(c.C,null))),ei&&i.createElement(i.Fragment,null,i.createElement("div",{className:f.s.flex.flexGrow1.$},x),i.createElement("div",{className:f.s.flex.pr4.$},i.createElement(O.y,{helpUrlVariant:e})))),i.createElement("div",{className:f.s.flex1.relative.font13.$,style:y.sx.add({lineHeight:"24px"}).if(!V,{height:"96px"}).$},i.createElement("div",{className:f.s.if(!V,f.s.absolute.top0.left0.right0).$},i.createElement(F,{value:r,onChange:n,recordingKey:T,ref:W,minLength:L,maxLength:P,verticalPromptLayout:en,height:V?void 0:128,maxHeight:128})),z&&i.createElement("div",{className:p()(f.s.absolute.top0.wFull.selectNone.eventsNone.colorTextTertiary.overflowWrapAnywhere.$,$?D.m:""),style:ea},i.createElement("span",{className:f.s.invisible.$},r),i.createElement("span",{className:f.s.$},Y),$&&i.createElement("span",{className:f.s.inlineFlex.itemsCenter.ml4.$},i.createElement(M,null))),en&&i.createElement("div",{className:f.s.absolute.$,style:{top:4,right:4}},i.createElement(O.y,{helpUrlVariant:e})))),(Z||J)&&i.createElement("div",{className:p()(f.s.wFull.flex.flexWrap.pre.pr16.gap8.$,f.s.absolute.zIndex1.$,f.s.overflowHidden.$),style:{bottom:8,left:8,height:24}},J&&i.createElement(k,{promptHistory:m,onChange:n,textAreaRef:W}),Z&&u.map((e,r)=>i.createElement(s.$n,{key:r,variant:"secondary",onClick:()=>{n(e.prompt),W.current?.focus(),C&&(0,v.ds)("actions_prompt_suggestion_clicked",Q.openFile?.key,Q,{feature:C,suggestion:e.prompt})}},e.label))),B&&i.createElement("div",{className:p()(f.s.wFull.$)},B))}function U(e){return e?{paddingRight:58}:{paddingLeft:8,paddingRight:8,paddingTop:4}}function B({value:e,onChange:r,recordingKey:n,minLength:a=1,maxLength:o,aiTrackingContext:s,onRun:l}){let c=(0,i.useRef)(null);(0,S.y)(e,c),(0,I.z)();let[d,u]=(0,i.useState)(!1),m=(0,i.useCallback)(()=>{u(!0)},[]);return i.createElement("div",{className:f.s.wFull.$},i.createElement("div",{className:p()(f.s.borderBox.p4.mb8.colorBgSecondary.wFull.flex.flexColumn.bRadius5.relative.$)},i.createElement("div",{className:p()(f.s.flex.relative.overflowHidden.$,b.Dm)},i.createElement("div",{className:f.s.flex1.relative.font13.$,style:y.sx.add({lineHeight:"24px",height:"32px"}).$},i.createElement("div",{className:f.s.absolute.top0.left0.right0.$},i.createElement(F,{ref:c,height:32,maxHeight:32,maxLength:o,minLength:a,onChange:r,onFocus:m,placeholder:(0,E.t)("fullscreen_actions.edit_image.placeholder"),recordingKey:n,value:e,verticalPromptLayout:!1}))))),d&&i.createElement(P.B,{fullWidth:!0,justify:"end"},i.createElement(N.r,{shortcuts:[{key:h.Uz.ENTER,modifier:[h.xH.META]}],onAction:e=>{s&&(0,A.SX)({...s,...(0,A.Q0)(e),interaction:C.NI.GENERATE}),l()},disabled:e.trim().length<a,recordingKey:(0,_.Pt)(n,"enter")},(0,E.tx)("fullscreen_actions.edit_image"))))}},873506:(e,r,n)=>{n.d(r,{v:()=>N});var i=n(848318),a=n(897378),o=n(151006),s=n(536384),l=n.n(s),c=n(654104),d=n(166365),u=n(17755),p=n(442313),m=n(604613),h=n(686500),_=n(503024),g=n(73934),f=n(684552),E=n(61097),y=n(386502),b=n(859261),v=n(134008),T=n(183956),I=n(590676),S=n(377036);let w="search";function A({onClear:e,focus:r}){return i.createElement(a.K,{"aria-label":(0,p.t)("search.search_bar.clear"),onClick:n=>{n.stopPropagation(),e(),r()},htmlAttributes:{"data-tooltip":(0,p.t)("search.search_bar.clear"),"data-tooltip-type":_.Ib.TEXT}},i.createElement(o.C,{style:{"--color-icon":"var(--color-icon-secondary)"}}))}let C=(0,i.forwardRef)(({searchQuery:e,onSearchChange:r,placeholder:n,onPaste:a},o)=>i.createElement("input",{ref:o,"aria-autocomplete":"list",className:l()(I.Rt,m.Dm),"data-component":"QuickActionsV2SearchInput",dir:"auto",maxLength:150,onChange:r,onPaste:a,placeholder:n??(0,h.A)("quick-actions-with-wand-modal-placeholder"),spellCheck:!1,type:"search",value:e})),N=(0,i.forwardRef)(({searchQuery:e,onSearchChange:r,onClear:n,endEnhancer:a,placeholder:o,forceRoot:s,searchTag:p,onPaste:m},h)=>{let _=i.useRef(null),{isRoot:N}=(0,y.cq)(),{focus:L}=(0,b.Y)(_);(0,i.useImperativeHandle)(h,()=>({focus:L}),[L]),(0,g.C)(_);let O=c.AF(w,"change",e=>{r(e.currentTarget.value)});return(0,f.z)(s),(0,E.y)(e,_),i.createElement("div",{className:l()(I.$P)},N||s?i.createElement(d.B,{svg:S.A,className:I.qc}):i.createElement("div",{className:u.s.pl4.pr4.$},i.createElement(v.o,{recordingKey:(0,c.Pt)(w,"back-button")})),p,i.createElement(C,{onSearchChange:O,placeholder:o,searchQuery:e,onPaste:m,ref:_}),n&&e?i.createElement("div",{className:u.s.flex.mr6.$},i.createElement(A,{onClear:n,focus:L})):a?i.createElement("div",{className:u.s.mr6.$},i.createElement(T.b,null,a)):null)})},100714:(e,r,n)=>{n.d(r,{Kp:()=>m,w0:()=>h});var i=n(848318),a=n(716544),o=n(157907),s=n(667323),l=n(763905),c=n(740121),d=n(51910),u=n(737808),p=n(456751);function m(e){let r=h();return(0,i.useCallback)(()=>{r((0,l.NG)(e))},[r,e])}function h(){let e=function(){let e=(0,a.d4)(e=>e.recentlyUsedQuickCommands),r=(0,a.wA)();return(0,i.useCallback)(n=>{let i=(0,u.EG)(n),a=n.runPluginArgs,l=e.filter(e=>e.displayName!==i);l.unshift({displayName:i,runPluginArgs:a}),r(s.PQ(l)),(0,o.k)().qa_frecency_recents_sync&&(0,p.s)({displayText:i,runPluginArgs:a,localFileIdOrPluginId:n.pluginLocalFileId??n.pluginId})},[r,e])}(),r=(0,c.c)(),n=(0,d.p8)("isReadOnly");return(0,i.useCallback)((i,a)=>{let o=(0,l.UK)({item:i,isReadOnly:n,extensionMenuProps:r,includeDisabled:!0,isSubmenuChild:a});o.length>1||e(o[0])},[e,r,n])}},765577:(e,r,n)=>{n.d(r,{JL:()=>o,Z9:()=>c,fX:()=>l}),n(848318);var i=n(179703),a=n(45584);let o="1.2",s={noPanningZoomingMs:300,screenAreaThresholdPercentage:.12,frameVisiblePercentage:.9,frameNotVisiblePercentage:.25,largestFrameWeight:.3,mostCentralFrameWeight:.7,maxDepth:6};function l(e,r){let n=(0,i.UN)().getCurrentPage();if(!n)return;let o=function(e,r,n){let i=function(e){let r=[];for(let n of e.childrenNodes)if("FRAME"===n.type||"SECTION"===n.type){if("SECTION"===n.type)for(let e of n.childrenNodes)"FRAME"===e.type&&r.push(e);else r.push(n)}return r}(e),a=[],o=[];for(let e of i){let i=d(e,r);i>=n.frameVisiblePercentage?a.push(e):i<n.frameNotVisiblePercentage&&o.push(e)}if(1===a.length&&o.length===i.length-1)return a[0]}(n,e,r);if(o)return o.guid;let s=function(e,r,n){let{width:i,height:o}=(0,a.qc)(r),s=i*o,l=[],c=[{node:e,depth:0}];for(;c.length;){let{node:e,depth:i}=c.pop();if(!(i>=n.maxDepth)&&e.visible&&!e.isInternalOnlyNode&&!(e.opacity<=0)&&("CANVAS"===e.type||"DOCUMENT"===e.type||("FRAME"===e.type||"GROUP"===e.type||"SECTION"===e.type||"SLIDE_GRID"===e.type||"SLIDE_ROW"===e.type||"RESPONSIVE_SET"===e.type||"SLIDE"===e.type||"SECTION_OVERLAY"===e.type)&&u(e,r)/s>=n.screenAreaThresholdPercentage))for(let r of("FRAME"===e.type&&l.push(e),e.childrenNodes))c.push({node:r,depth:i+1})}return l}(n,e,r);if(!s.length)return;let l=s.filter(n=>{var i;return i=r.frameVisiblePercentage,d(n,e)>=i});l.length||l.push(...s);let c=function(e,r,n){let i=e.map(e=>(function(e,r){let{x:n,y:i,width:o,height:s}=(0,a.qc)(r);return Math.sqrt(Math.pow(n+o/2-(e.absoluteBoundingBox.x+e.absoluteBoundingBox.w/2),2)+Math.pow(i+s/2-(e.absoluteBoundingBox.y+e.absoluteBoundingBox.h/2),2))})(e,r)),o=e.map(e=>u(e,r)),s=Math.max(...i),l=Math.max(...o),c=i.map(e=>e/s),d=o.map(e=>e/l),p=c.map((e,r)=>n.largestFrameWeight*d[r]-n.mostCentralFrameWeight*e);return e[p.indexOf(Math.max(...p))]}(l,e,r);if(c)return function(e,r,n){var i,a,o;let s=e;for(;s.parentNode&&"FRAME"===s.parentNode.type&&(i=s.parentNode,a=r,o=n.frameVisiblePercentage,d(i,a)>=o);)s=s.parentNode;return s}(c,e,r).guid}function c(e={}){return{...s,...e}}function d(e,r){return u(e,r)/(e.absoluteBoundingBox.w*e.absoluteBoundingBox.h)}function u(e,r){let{offsetX:n,offsetY:i,zoomScale:a,width:o,height:s}=r,l=Math.max(e.absoluteBoundingBox.x,n-o/2/a),c=Math.min(e.absoluteBoundingBox.x+e.absoluteBoundingBox.w,n+o/2/a),d=Math.max(e.absoluteBoundingBox.y,i-s/2/a);return Math.max(0,c-l)*Math.max(0,Math.min(e.absoluteBoundingBox.y+e.absoluteBoundingBox.h,i+s/2/a)-d)}},626571:(e,r,n)=>{n.d(r,{wO:()=>D});var i=n(848318),a=n(445777),o=n(198375),s=n(741419),l=n(157907),c=n(442313);n(665471);var d=n(969405),u=n(947934),p=n(725765),m=n(456894),h=n(257628),_=n(74396),g=n(199445),f=n(386502),E=n(34047),y=n(851771),b=n(309466),v=n(322386),T=n(622733),I=n(352483),S=n(39773),w=n(654104),A=n(786327),C=n(670568);let N=(0,S.E3)("content_fill_prompt_history",[]);function L({action:e,regenerateWithPrompt:r,recordingKey:n,aiTrackingContext:a,targets:o}){let[s,l]=i.useState(!1),[d,u]=i.useState(""),{promptHistory:p,addPromptToHistory:m}=(0,E.a)(N,e=>e);return s?i.createElement(v.A,{action:e,prompt:d,onChangePrompt:u,onRun:()=>{r(d),m(d)},suggestion:(0,c.t)("fullscreen_actions.ai_content_fill.prompt_suggestion"),submitLabel:(0,c.tx)("fullscreen_actions.ai_content_fill.update_content"),disableAutoComplete:!0,recordingKey:(0,w.Pt)(n,"prompt"),aiTrackingContext:a,promptHistory:p}):i.createElement(C.Oq,{iterateOptions:[{type:C.is.MAKE_CHANGES,callback:()=>{l(!0),a.clientLifecycleId=(0,I.eJ)()}}],recordingKey:(0,w.Pt)(n,"iterate"),targets:o,aiTrackingContext:{...a,iteration_view_type:A.$J.SUCCESS_WITH_ITERATION}})}var O=n(65372);function R({state:e,onRun:r,aiTrackingContext:n,targets:i,onMakeChanges:a,stop:o}){let[s,l]=React.useState(""),c={content:t("fullscreen_actions.ai_content_fill.placeholder_fill_realistic_content")},{promptHistory:d,addPromptToHistory:u}=usePromptHistory(promptHistoryAtom,e=>e),{close:p}=useNavigation(),m=()=>{u(s),r({prompt:s})};switch(e){case ActionState.INITIAL:return React.createElement(PromptView,{action:AI_ACTIONS.CONTENT_FILL,prompt:s,onChangePrompt:l,onRun:m,suggestion:c.content,submitLabel:tx("fullscreen_actions.ai_content_fill.replace_content"),promptHistory:d,recordingKey:"contentFill.prompt",aiTrackingContext:n,featureNameForInstrumentation:"content_fill"});case ActionState.RUNNING:return React.createElement(RunningView,{onCancel:()=>{o(),p()},aiTrackingContext:n},tx("ai.replacing"));case ActionState.DONE:return React.createElement(RegenerateTextDoneView,{action:AI_ACTIONS.CONTENT_FILL,recordingKey:"regenerateText.done",targets:i,regenerateWithPrompt:e=>{a(),l(""),r({prompt:e})},aiTrackingContext:n});case ActionState.ERROR:return React.createElement(P,{onSubmit:m});case ActionState.CANCELLED:return null}}function P(e){let r;let n=(0,g.RL)(h.JT.CONTENT_FILL,m.c),a=null;if(n.state!==g.qy.ERROR)return null;let{error:o,tasks:s,aiTrackingContext:_}=n,f=s.length,E=s.filter(e=>e.state===g.z8.FAILED).length;if(o instanceof O.Vz||(0,u.sZ)(o)===d.B.CONTENT_LENGTH_LIMIT)r=(0,c.tx)("ai_text_tools.content_length_exceeded");else if(o instanceof O.Jd)r=(0,c.tx)("fullscreen_actions.ai_content_fill.missing_font");else if(o instanceof p.Lg)return i.createElement(y.E,{error:o,aiTrackingContext:n.aiTrackingContext,customMessage:(0,c.tx)("ai.error.content_length_limit")});return(0,l.k)().aip_content_fill_duplicate_trigger&&o instanceof p.Aq?i.createElement(y.E,{error:o,aiTrackingContext:n.aiTrackingContext,customMessage:(0,c.tx)("fullscreen_actions.ai_content_fill.no_duplicates_to_replace_error")}):(f>0&&E>0&&E<f&&(a=(0,c.tx)("fullscreen_actions.ai_content_fill.couldnt_count",{failed:E,total:f})),r)?i.createElement(y.E,{error:o,aiTrackingContext:_,customMessage:r,secondaryMessage:a}):i.createElement(y.E,{error:n.error,buttons:[{type:y.f.TRY_AGAIN,callback:()=>{e.onSubmit()}}],secondaryMessage:a,aiTrackingContext:_})}function D(){let e=(0,g.RL)(h.JT.CONTENT_FILL,m.c),r=(0,_.s)(h.JT.CONTENT_FILL),{start:n,stop:d,state:u,aiTrackingContext:p}=e,{close:E}=(0,f.cq)();switch((0,i.useEffect)(()=>{r.state===_.w.SELECTION_OK&&u===g.qy.INITIAL&&n({guids:[],numExampleRows:1,source:"ACTIONS_MENU"})},[r.state,n,u]),u){case g.qy.INITIAL:return i.createElement(b.A,{action:h.JT.CONTENT_FILL,actionIcon:i.createElement(o.c,null),actionLabel:(0,c.tx)("fullscreen_actions.ai_content_fill.replace_content"),onPerform:()=>{(!(0,l.k)().aip_content_fill_single||s.biQ&&s.biQ.repeatedContentFillAvailableBindings())&&n({guids:[],numExampleRows:1,source:"ACTIONS_MENU"})},aiTrackingContext:p,instructionAction:{type:"learn_more",url:h.KL}},(0,c.tx)("fullscreen_actions.ai_content_fill.select_a_stack_of_repeating_frames"));case g.qy.RUNNING:return i.createElement(T.F,{onCancel:()=>{d(),E()},aiTrackingContext:p},(0,c.tx)("ai.replacing"));case g.qy.DONE:{let r=e.result.iterationParams;return i.createElement(L,{action:h.JT.CONTENT_FILL,regenerateWithPrompt:e=>{n({...r,userPrompt:e})},recordingKey:"regenerateText.done",aiTrackingContext:p,targets:r.guids})}case g.qy.ERROR:{let r=e.originalParams;return i.createElement(P,{onSubmit:()=>n(r)})}case g.qy.CANCELLED:return null;default:(0,a.xb)(u)}}},65372:(e,r,n)=>{n.d(r,{Jd:()=>u,Vz:()=>c,k4:()=>m}),n(848318),n(741789),n(992277),n(741419),n(673906);var i=n(179703);n(157907),n(39773);var a=n(431035);n(6819),n(427193),n(502255),n(579463),n(17755),n(442313),n(232843),n(481540),n(665471),n(947934),n(992444),n(299339);var o=n(257628);n(199445),n(4434),n(183956),n(952423),n(633457);class s extends Error{constructor(e){super(),this.message=e}}let l=[o.JT.TRANSLATE_TEXT,o.JT.REWRITE_TEXT,o.JT.SHORTEN_TEXT];class c extends Error{constructor(){super(),this.reportToSentry=!1,this.name="TooManyTextLayersError",this.message="Too many text layers"}}class d extends Error{constructor(){super(),this.reportToSentry=!1,this.name="NoTextCharactersFoundError",this.type="no_text_characters_found"}}class u extends Error{constructor(){super(),this.reportToSentry=!1,this.name="MissingFontsError",this.message="Missing Fonts"}}async function p(e){if(0!==e.length&&e[0]){let r=await h(e[0]),n=e.map(e=>e.guid);if(n)for(let e of n){let n=RegExp(`<Text id="${e}">[^<]*</Text>`,"g");r=r.replace(n,`<Text id="${e}"></Text>`)}return r}}async function m(e,r=100){let n=(0,i.UN)().get(e.findContainingTopLevelFrameOrSelf());return n?(await (0,a.oy)(n,{includeIDs:!0,excludeImageData:!0,excludeVectorData:!0,includeNames:!0,ignoreFetchingComponentData:!0,includeNodeTypes:["RECTANGLE","ROUNDED_RECTANGLE","TEXT","FRAME","GROUP","INSTANCE"],fieldGroups:[],strict:!1,includeInstanceSublayers:!0,ignoreDeveloperFriendlyIds:!0,focusNodeId:e.guid,maxSerializeNodes:r})).jsxStr:Promise.resolve("")}async function h(e){let r=getActiveTSSceneGraph().get(e.findContainingTopLevelFrameOrSelf());return r?(await serializeJSX(r,{includeIDs:!0,excludeImageData:!0,excludeVectorData:!0,includeNames:!0,ignoreFetchingComponentData:!0,includeNodeTypes:["RECTANGLE","ROUNDED_RECTANGLE","TEXT","FRAME","GROUP","INSTANCE"],fieldGroups:[],strict:!1,includeInstanceSublayers:!0,ignoreDeveloperFriendlyIds:!0})).jsxStr:Promise.resolve("")}},633457:(e,r,n)=>{n.d(r,{X:()=>o});var i=n(741419);n(952423),n(579020);var a=n(299339);function o(e,r){let n=new Map;return e.forEach(e=>{e&&e.isAlive&&n.set(e.guid,[e])}),r&&e.forEach(e=>{if(!e||!e.isAlive)return;let r=(0,a.zM)(e);n.set(e.guid,r)}),{setLoadingStateMatchingNode:e=>(function(e){e.forEach(e=>{e&&e.isAlive&&i.biQ?.setLoadingStateForTextInSubtree(e.guid)})})(n.get(e)??[]),clearLoadingStateMatchingNode:e=>s(n.get(e)??[]),clearAllLoadingStates:()=>{n.forEach(e=>{s(e)})}}}function s(e){e.forEach(e=>{e&&e.isAlive&&i.biQ?.unsetLoadingStateForTextInSubtree(e.guid)})}},867213:(e,r,n)=>{n.d(r,{Km:()=>eR,hc:()=>eF,jk:()=>ex,mX:()=>eM,wU:()=>eP,z6:()=>eD});var i=n(848318),a=n(445777),o=n(707005),s=n(376025),l=n(453843),c=n(698357),d=n(629612),u=n(727204),p=n(74502),m=n(179703),h=n(157907),_=n(39773),g=n(536384),f=n.n(g),E=n(579020),y=n(818754),b=n(730169),v=n(303035),T=n(654104),I=n(431118),S=n(507152),w=n(17755),A=n(442313),C=n(500276),N=n(775038),L=n(223161),O=n(948895),R=n(111947),P=n(727341),D=n(797952),M=n(950738),k=n(843156),F=n(369600),x=n(928001),U=n(778727),B=n(311055),V=n(931516),G=n(492119),H=n(503024),K=n(277253),W=n(643231),z=n(640021),$=n(836769),Y=n(771622),j=n(473450),q=n(468410),X=n(257628),Z=n(205595),J=n(684552),Q=n(386502),ee=n(87417),et=n(194719),er=n(677657),en=n(449345),ei=n(4434),ea=n(134008),eo=n(694747),es=n(183956),el=n(234230),ec=n(136323),ed=n(873506),eu=n(1615),ep=n(586888),em=n(917665),eh=n(330420),e_=n(828446),eg=n(632626),ef=n(952756),eE=n(850289),ey=n(4629),eb=n(503857),ev=n(6354),eT=n(504100),eI=n(220056),eS=n(683091),ew=n(153330),eA=n(81552),eC=n(667342),eN=n(665942),eL=n(846650),eO=n(832218);let eR="actions-asset-tab-library-filter",eP=300;function eD({isVisualSearch:e=!1,isFigmake:r=!1,initialTab:n=eb.Qx.PLAN_FILE_ASSETS,initialSearchTagType:u,closeOnEscape:p=!1,assetInsertionCallback:m}){let{currentSearch:h}=(0,_.md)(Z.WP),g=(0,_.md)(O.hO.currentSearchAtom),N=(0,_.md)(O.hO.currentCommunitySearchAtom);e=e||r&&N?.input.type==="input-image";let Y=(0,e_.V)(),ee=(0,j.Ko)(),[er,en]=(0,_.fp)(ei.Q8),ea=(0,_.Xr)(ei.Rt),{recentFragments:ep}=(0,O.cN)(!Y),ey=(0,eI.U)(!0);(0,z.b)();let eO=i.useRef(null),eD=i.useRef(null),eU=i.useRef(null),eB=(0,ef.w5)(N),eV=(0,et._M)({action:e?X.JT.FIND_INSPIRATION:X.JT.TEXT_SEARCH,clientLifecycleId:void 0});(0,B.C)(),(0,J.z)(),i.useEffect(()=>{if(e)return()=>{(0,eg.R)(),_.zl.set(Z.WP,{currentSearch:null})}},[e]);let[eG,eH]=i.useState(!1),eK=i.useCallback(e=>{eH(e)},[]),eW=r?O.G4.FIGMAKE:e?O.G4.ACTIONS_VISUAL_SEARCH_VIEW:O.G4.ACTIONS_ASSETS_TAB_DETAIL,{close:ez}=(0,Q.cq)(),{libraries:e$,presets:eY,librariesForConnectedProject:ej}=(0,$.g)(),eq=(0,_.md)(U.Sh),eX=e?0===e$.length&&0===ej.length:!eq&&0===e$.length&&0===eY.length&&0===ej.length,eZ=(0,P.GS)(),eJ=i.useMemo(()=>(0,W.N2)(eZ,!0),[eZ]),{onToggleLibraryModal:eQ}=(0,D.u)({entrypoint:eJ,modalType:"editor",initialTab:V.Wv.TEAM_LIBRARIES}),e0=i.useCallback(()=>{ez(),eQ()},[ez,eQ]),e1={title:(0,A.t)("assets_in_actions.browse_libraries_button"),onAction:()=>{e0()},recordingKey:"assetsTab.assetsBrowseLibraries"},e2=i.useCallback(()=>{(0,eE.k)()},[]),{debouncedAssetSearch:e4,clearAssetSearchAndCancelDebounce:e3,cancelDebouncedAssetSearch:e7,flushDebouncedAssetSearch:e5}=(0,Z.TC)({debounceWait:eP,onSearchSuccess:e2}),{debouncedFragmentTextSearch:e8,clearFragmentSearchAndCancelDebounce:e9,cancelDebouncedFragmentTextSearch:e6,flushDebouncedFragmentTextSearch:te}=(0,eh.S)({debounceWait:eP,entryPoint:eW,onSearchSuccess:e2}),{debouncedFragmentTextSearch:tt,cancelDebouncedFragmentTextSearch:tr,clearFragmentSearchAndCancelDebounce:tn,flushDebouncedFragmentTextSearch:ti}=(0,eh.S)({debounceWait:eP,entryPoint:eW,isCommunity:!0,onSearchSuccess:e2}),[ta,to]=(0,_.fp)(Z.B1),ts=e?"actions-visual-search-library-filter":eR,tl=(0,M.Um)(),tc=!e||ee,[td,tu,tp]=o.t.useTabs({[eb.Qx.PLAN_FILE_ASSETS]:tc,[eb.Qx.COMMUNITY]:!0},{defaultActive:n}),[tm,th]=(0,_.fp)(O.hO.sortByAtom),t_=(0,_.md)(L.CZ),[tg,tf]=(0,i.useState)(u),tE=tg&&tp.activeTab===eb.Qx.PLAN_FILE_ASSETS;function ty(r){let n,o,u;switch(r){case eb.qG.COMPONENTS:n=w.s.flex.px4.itemsCenter.gap4.b1.radiusMedium.maxW150.colorBgComponentTertiary.colorTextComponent.colorBorderComponent.$,o={"--color-icon":"var(--color-icon-component)"},u=i.createElement(l.k,{style:o});break;case eb.qG.DESIGNS:n=w.s.flex.px4.itemsCenter.gap4.b1.radiusMedium.maxW150.colorBgBrandTertiary.colorTextBrand.colorBorderBrand.$,o={"--color-icon":"var(--color-icon-brand)"},u=i.createElement(c.q,{style:o});break;default:(0,a.xb)(r)}return i.createElement("div",{className:n,style:C.sx.add({paddingTop:"3px",paddingBottom:"3px",marginRight:"8px"}).$},i.createElement("div",{className:w.s.flex.itemsCenter.justifyCenter.w16.h16.flexShrink0.$},u),i.createElement("span",{className:w.s.truncate.$},r),i.createElement(s.E,{recordingKey:(0,T.Pt)(t0,"dismiss"),onClick:()=>{if(!e)switch(r){case eb.qG.COMPONENTS:(0,O.G1)(er)&&e8(er);break;case eb.qG.DESIGNS:(0,Z.kN)(er)&&e4(er,{type:K.I.ALL})}ta.type!==K.I.ALL&&(to({type:K.I.ALL}),h&&(0,Z.ES)({...h.input,assetTypeOption:{type:K.I.ALL}})),"percent_match"!==tm&&th("percent_match"),t_&&(_.zl.set(L.q4),g&&(0,O.Hl)(g?.input,eW)),E.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...tT,assets_tab_type:(0,eC.D)(eb.Qx.PLAN_FILE_ASSETS,void 0)}),tf(void 0)},className:w.s.bgTransparent.$},i.createElement(d.f,{style:o})))}let tb=_.zl.get(ei.dd),tv=i.useMemo(()=>(0,eC.D)(tp.activeTab,tg),[tg,tp.activeTab]),tT=i.useMemo(()=>{let e={entryPoint:eW,session_id:tb||"",assets_tab_type:tv};return tp.activeTab===eb.Qx.COMMUNITY?{search_id:N?.searchId||"",query_type:N?.input.type,query_text:N?.input.type==="input-text"?N?.input.value:void 0,query_node_id:N?.input.type==="input-selection"?N?.input.node.guid:void 0,...e}:tg===eb.qG.DESIGNS?{search_id:g?.searchId||"",query_type:g?.input.type,query_text:g?.input.type==="input-text"?g?.input.value:void 0,query_node_id:g?.input.type==="input-selection"?g?.input.node.guid:void 0,...e}:{search_id:h?.queryId||"",query_type:h?.input.type,query_text:h?.input.type==="input-text"?h.input.query:"",query_node_id:h?.input.type==="input-selection"?h.input.node.guid:"",...e}},[eW,tb,tv,tp.activeTab,tg,h,N,g]),tI=i.useCallback(e=>{let[r]=e;r.isIntersecting&&E.az.trackDefinedEvent("fragment_search.assets_details_panel_reached_bottom_of_scroll",{...tT,is_community_fragment_search:tp.activeTab===eb.Qx.COMMUNITY})},[tT,tp.activeTab]),tS=i.useCallback(e=>{let r=new IntersectionObserver(tI,{threshold:1});return e&&r.observe(e),()=>{r.disconnect()}},[tI]),tw=i.useCallback(r=>{if(!e)switch(r){case eb.Qx.PLAN_FILE_ASSETS:tr(),(0,Z.kN)(er)&&(e4(er,ta),e5()),Y&&(0,O.G1)(er)&&(e8(er),te());break;case eb.Qx.COMMUNITY:Y&&e6(),e7(),(0,O.G1)(er,!0)&&(tt(er),ti());break;default:(0,a.xb)(r)}tp.setActiveTab(td[r].id),E.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...tT,assets_tab_type:(0,eC.D)(r,tg)}),eD.current?.focus(),(0,eE.k)()},[ta,e,tp,td,tT,tg,tr,er,Y,e4,e5,e8,te,e6,e7,tt,ti]),tA=(0,eS.A)(),tC=(0,F.q5)(),tN=tA||tC?.name,tL=tN&&tN.length>20,tO=i.createElement(eu.fu,{value:tp.activeTab,onChange:v.lQ,numItems:tc?2:1},i.createElement(eu.oz,{tabId:eb.Qx.PLAN_FILE_ASSETS,onAction:()=>tw(eb.Qx.PLAN_FILE_ASSETS),htmlAttributes:tL?{"data-tooltip":tN,"data-tooltip-type":H.Ib.TEXT}:void 0},tN&&(0,I.EJ)(tN,20)),i.createElement(eu.oz,{tabId:eb.Qx.COMMUNITY,onAction:()=>tw(eb.Qx.COMMUNITY)},(0,A.tx)("assets_in_actions.detail_view.community_tab.title"))),tR=(0,x.oh)(R.fi),tP=(0,k.g5)(G.$A.Design).productComponents,tD=!h&&!tR&&(!tP.length||(0,q.kK)()),tM=!Y||tD,tk=ep?ep.length:0,tF=!tg||tg===eb.qG.COMPONENTS,tU=!tg&&!tM&&(!!g||tk>0)||tg===eb.qG.DESIGNS,tB=Y&&(!tg||tg===eb.qG.DESIGNS),tV=tM||!!tg,tG=tp.activeTab===eb.Qx.PLAN_FILE_ASSETS,tH=tp.activeTab===eb.Qx.COMMUNITY,tK=i.useCallback(e=>{en(e),ea((0,S.g)()),tF&&(tG||0===e.length)&&e4(e,ta),tB&&(tG||0===e.length)&&e8(e),(tH||0===e.length)&&tt(e)},[ta,en,ea,tG,tH,e4,e8,tt,tF,tB]),tW=h?.queryId,tz=g?.searchId,t$=N?.searchId,tY=i.useCallback(()=>tG&&tB?tz:tH?t$:void 0,[tz,t$,tB,tG,tH]),tj=i.useCallback(()=>{if(tG&&tF)return tW},[tW,tG,tF]),tq=i.useCallback((e,r,n,i,a,o)=>{let s;let l=tH?N:tF?h:g;tH&&N?.input.type==="input-text"?s=N?.input.value:tF&&h?.input.type==="input-text"?s=h?.input.query:g?.input.type==="input-text"&&(s=g?.input.value),(0,E.sx)("Search Feedback",{feedbackType:e,feedback:r,activeTab:tv,clientLifecycleId:n,entryPoint:i,fileKey:a,inputText:s,inputType:l?.input.type,queryId:tj(),searchId:tY(),sessionId:o})},[g,h,N,tj,tY,tH,tF,tv]),tX=i.useCallback((e,r)=>{tq(e.toString(),r,eV.clientLifecycleId,eW,eV.file_key,eV.quick_actions_session_id)},[tq,eV,eW]),tZ=i.useCallback((e,r)=>{tq(e.toString(),r,eV.clientLifecycleId,eW,eV.file_key,eV.quick_actions_session_id)},[tq,eV,eW]),tJ=(0,eN.s)();(0,b.h)(()=>(E.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...tT}),()=>{eM(_.zl.get(ei.Q8),v.lQ,Y,!0,tJ,O.G4.ACTIONS_ASSETS_TAB_DETAIL),_.zl.set(L.q4),to({type:K.I.ALL})}));let tQ=(()=>{switch(tp.activeTab){case eb.Qx.PLAN_FILE_ASSETS:return tW;case eb.Qx.COMMUNITY:return t$;default:(0,a.xb)(tp.activeTab)}})(),t0=e?"visualSearchView":"assetsDetailView",t1=!N||"disabled"===N.result.status;if(e&&t1)return i.createElement(ef.o1,{aiTrackingContext:eV});let t2=eX&&(er.length>0||e),t4=!t2&&(tg===eb.qG.COMPONENTS||!Y)&&er.length>0,t3=tg===eb.qG.DESIGNS&&!!g;return i.createElement(el.n,{additionalFeedbackCallback:tZ,aiTrackingContext:eV,bodyFontMedium:!0,dataTestId:t0,gatherFeedback:!0,height:480,rateOutputStrOverride:(0,A.t)("qa.rate_output_helpful"),recordingKey:t0,sentimentFeedbackCallback:tX,width:(0,y.jz)(eL.X)},e&&i.createElement(eo.t,{ref:eO,key:tQ}),i.createElement(el.n.Header,null,i.createElement("div",{className:w.s.flex.flexColumn.$,ref:eU},e?i.createElement(ek,{searchTag:tE?ty(tg):void 0,closeOnEscape:p}):i.createElement(ed.v,{ref:eD,searchQuery:er,onSearchChange:tK,forceRoot:p,onClear:()=>{tf(void 0),en(""),e3(),Y&&e9(),tn()},onPaste:e=>ex(e),endEnhancer:i.createElement(eF,{entryPoint:eW,aiTrackingContext:eV,activeTab:tp.activeTab===eb.Qx.PLAN_FILE_ASSETS&&ee?eb.xA.COMPONENTS:eb.xA.COMMUNITY}),placeholder:ey,searchTag:tE?ty(tg):void 0}),tc&&i.createElement("div",{className:w.s.if(e,w.s.py4).px8.if(!e,w.s.pb8).$},i.createElement(es.b,{primary:!1,gap:8,align:"center",justify:"space-between"},tO,i.createElement(o.t.TabPanel,{...tu[eb.Qx.PLAN_FILE_ASSETS]},i.createElement("div",{className:w.s.if(!e,w.s.h24).if(e,w.s.h32).flex.itemsCenter.$},t4&&i.createElement(ew.i,{onSetAssetType:r=>{if(h)switch(h.input.type){case"input-image":case"input-selection":if(!e)throw Error("Cannot run text search on visual input");to(r),(0,Z.ES)({...h.input,assetTypeOption:r});return;case"input-text":if(e)throw Error("Cannot run visual search on text input");to(r),e4(er,r),e5();return;default:(0,a.xb)(h.input)}},value:ta,id:ts,dataTestId:ts,recordingKey:ts,role:"button",showTooltipOnEllipsis:!0,dropdownShown:tl}),t3&&i.createElement(em.s,{containerRef:eU,entryPoint:eW}))),i.createElement(o.t.TabPanel,{...tu[eb.Qx.COMMUNITY]},i.createElement("div",{className:w.s.if(!e,w.s.h24).if(e,w.s.h32).flex.itemsCenter.$})))))),i.createElement(el.n.Body,{key:eB},i.createElement(eb.wg.Provider,{value:{activeTabId:tp.activeTab}},tc&&i.createElement(o.t.TabPanel,{...tu[eb.Qx.PLAN_FILE_ASSETS]},i.createElement(eb.ZD.Provider,{value:{activeSearchTag:tg}},i.createElement(ec.q,{key:tW},eX&&!Y?i.createElement(eA.S,{fillHeight:!0},i.createElement(W.Ee,{onClickExplore:ez,fromActionsModal:!0,width_ui3:264,bgTransparentUI3:!0})):i.createElement("div",{className:f()(w.s.gap6.if(tV,w.s.hFull).$)},tF&&i.createElement(ev.O,{onLoadStateChange:eK,header:!tg&&Y?{title:(0,A.t)("assets_in_actions.assets_section.title"),icon:i.createElement(l.k,null),seeMore:t2?e1:{title:(0,A.t)("assets_in_actions.see_more_button"),onAction:()=>{E.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...tT,assets_tab_type:(0,eC.D)(eb.Qx.PLAN_FILE_ASSETS,eb.qG.COMPONENTS)}),E.az.trackDefinedEvent("asset_search.see_more",{...tT}),tf(eb.qG.COMPONENTS)},recordingKey:t0+".assetsSeeMore"}}:void 0,numberOfGridColumns:5,maxResults:!tg&&Y?5:void 0,stretchEmptyStates:tV,noLibraries:t2,assetInsertionCallback:m}),tU&&i.createElement(eT.M,{entryPoint:eW,focusHandle:e?eO:eD,forceLoadingState:eG,header:tg?void 0:{title:(0,A.t)("assets_in_actions.fragments_section.title"),icon:i.createElement(c.q,null),seeMore:{title:(0,A.t)("assets_in_actions.see_more_button"),onAction:()=>{E.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...tT,assets_tab_type:(0,eC.D)(eb.Qx.PLAN_FILE_ASSETS,eb.qG.DESIGNS)}),(0,E.sx)("Fragment search see more",{...(0,O.d3)(eW,tb,g?g.searchId:"",g?g.input:null,!1,void 0,!1)}),tf(eb.qG.DESIGNS)},recordingKey:t0+".fragmentsSeeMore"}},initialState:e?void 0:{type:"recents",recents:ep},isCommunity:!1,lastSearchResultRef:tS,maxResults:tg?void 0:3,numberOfGridColumns:3,stretchEmptyStates:tV}))))),i.createElement(o.t.TabPanel,{...tu[eb.Qx.COMMUNITY]},i.createElement(ec.q,{key:t$},i.createElement(eT.M,{focusHandle:eO,numberOfGridColumns:3,stretchEmptyStates:!0,isCommunity:!0,initialState:e?void 0:{type:"recents",recents:[]},entryPoint:eW,lastSearchResultRef:tS}))))))}function eM(e,r,n,i,a,o){let s=_.zl.get(ei.dd),l=_.zl.get(F.ze);if(!s||!l)return;let{currentSearch:c}=_.zl.get(Z.WP),d=c?.input.assetTypeOption,u=_.zl.get(L.CZ),p=_.zl.get(O.hO.sortByAtom),m=d?.type!==K.I.ALL;e&&(n&&((0,O.G1)(e)||u||"percent_match"!==p)&&(0,O.Hl)({type:"input-text",value:e,file_key:l},o),((0,Z.kN)(e)||m)&&(0,Z.ES)({type:"input-text",query:e,assetTypeOption:{type:K.I.ALL},isKnownLibrary:a}),i&&(0,O.G1)(e,!0)&&(0,O.Hl)({type:"input-text",value:e,file_key:l},o,void 0,void 0,void 0,!0)),r()}function ek({searchTag:e,closeOnEscape:r=!1}){let n;let a=(0,_.md)(O.hO.currentCommunitySearchAtom),o=(0,j.Ko)(),s=i.useRef(null),l=(0,ep.U)();switch(a?.input.type){case"input-image":n=a.input.imageFile.name;break;case"input-selection":n=a.input.name;break;default:n=void 0}return(0,J.z)(r),i.createElement("div",{className:w.s.flex.itemsCenter.justifyBetween.py12.if(o,w.s.bSolid.bb1.colorBorder).if(r,w.s.px12,w.s.px8).$,ref:s},i.createElement("div",{className:w.s.flex.gap6.itemsCenter.$},!r&&i.createElement(ea.o,{recordingKey:(0,T.Pt)(l,"backButton")}),i.createElement(N.E,{fontSize:13},(0,A.tx)("asset_suggestions.visual_search_results_title")),i.createElement(N.E,{fontSize:13,color:"secondary"},n),e))}function eF({entryPoint:e,aiTrackingContext:r,activeTab:n,recordingKey:a}){let o=i.useRef(null),{active:l}=(0,ee.H)({ref:o,focusOptions:{enableAutoFocus:!1}}),c=i.useRef(null),d=i.useCallback(()=>{e===O.G4.FIGMAKE?((0,E.sx)("Visual search in search bar clicked",{has_selection:m.UN().getCurrentPage()?.directlySelectedNodes?.length===1,session_id:_.zl.get(ei.dd),entry_point:e}),c.current?.click()):function(e){(0,E.sx)("Visual search in search bar clicked",{has_selection:m.UN().getCurrentPage()?.directlySelectedNodes?.length===1,session_id:_.zl.get(ei.dd)}),(0,Y.XG)({action:"find-inspiration",isSearchResult:!1,searchPosition:null,numSearchResults:null,rankingAlgorithm:null,moduleFilters:null});let r=e===eb.xA.COMMUNITY?eb.Qx.COMMUNITY:eb.Qx.PLAN_FILE_ASSETS;(0,en.$I)({moduleToOpen:{type:"custom",module:(0,j.P5)()?i.createElement(eD,{initialTab:r,isVisualSearch:!0}):i.createElement(ef.WS,{initialTab:e}),beforeModuleOpen:()=>(0,ef.jp)(O.G4.ACTIONS_SEARCH_BAR_ICON),name:er.Sn.VISUAL_SEARCH},trackingData:{source:"search_bar_visual_search_button"}})}(n)},[e,n]);return i.createElement(i.Fragment,null,i.createElement(ef.xC,{aiTrackingContext:r,ref:c}),i.createElement(s.E,{ref:o,"aria-label":(0,A.t)("asset_suggestions.visual_search_icon_button_tooltip"),onClick:d,htmlAttributes:(0,h.k)().fragment_search_tweaks?{"data-tooltip-type":H.Ib.SPECIAL,"data-tooltip-show-above":!0,"data-tooltip":ey.S,"data-tooltip-ai-beta-text":(0,A.t)("asset_suggestions.visual_search_icon_button_tooltip_with_beta_tag"),"data-tooltip-ai-beta-action":X.JT.FIND_INSPIRATION}:{"data-tooltip":(0,A.t)("asset_suggestions.visual_search_icon_button_tooltip"),"data-tooltip-type":H.Ib.TEXT,"data-tooltip-show-above":!0},recordingKey:a,className:f()(eO.g,{[eO.H]:l})},(0,h.k)().fragment_search_tweaks?i.createElement(u.T,null):i.createElement(p.A,null)))}function ex(e){if(!(0,h.k)().visual_search_on_paste)return;let r=e.clipboardData.files;if(1===r.length&&r[0]?.type.startsWith("image/")){let n=r[0];e.preventDefault(),(0,en.$I)({moduleToOpen:{type:"custom",module:(0,h.k)().hub_file_fragments?i.createElement(eD,{isVisualSearch:!0,closeOnEscape:!0}):i.createElement(ef.WS,null),beforeModuleOpen:()=>(0,ef.qF)(O.G4.ACTIONS_SEARCH_BAR_PASTED_IMAGE,n),name:er.Sn.VISUAL_SEARCH},trackingData:{source:O.G4.ACTIONS_SEARCH_BAR_PASTED_IMAGE}})}}},6354:(e,r,n)=>{n.d(r,{O:()=>z});var i=n(848318),a=n(716544),o=n(120437),s=n(885265),l=n(39773),c=n(524488),d=n.n(c),u=n(575058),p=n(691191),m=n(857188),h=n(792647),_=n(17755),g=n(442313),f=n(500276),E=n(111947),y=n(843156),b=n(369600),v=n(691232),T=n(79563),I=n(928001),S=n(492119),w=n(277253),A=n(631274),C=n(417345),N=n(783193),L=n(186759),O=n(468410),R=n(205595),P=n(423181),D=n(4434),M=n(519614),k=n(674061),F=n(887953),x=n(334486),U=n(891595),B=n(917947),V=n(81552),G=n(844013),H=n(276678),K=n(200974),W=n(481035);function z({numberOfGridColumns:e=4,maxResults:r,stretchEmptyStates:n=!1,header:c,suggestion:p,onClickSuggestion:f,largeSpacing:T,noLibraries:A,onLoadStateChange:C,assetInsertionCallback:N}){let{currentSearch:L}=(0,l.md)(R.WP),G=(0,a.d4)(b.tB),H=(0,y.g5)(S.$A.Design).productComponents,K=(0,u.k9)(()=>H.map(e=>e.library_key),[H]),W=(0,v.U)(K),z=(0,I.oh)(E.fi)||"loading"===W.status,j=(0,u.k9)(()=>L?.result.data?.map(e=>e.library_key),[L]),q=(0,v.U)(j||[]),X=(0,h.z3)("faux"),Z=(0,P.s)(L),J="";L&&"input-text"===L.input.type?J=L.input.query:Z&&(J=Z.name);let Q=T?12:8,ee=!z&&!!c,et=!L&&!(0,O.kK)()&&z||L?.result.status==="loading"||"loading"===q.status;if(i.useEffect(()=>{C?.(et)},[et,C]),et)return i.createElement("div",null,ee&&i.createElement($,{title:c.title,icon:c.icon}),i.createElement(x.V,{columns:e,padding:Q,gap:12},Array.from({length:r??3*e}).map((e,r)=>i.createElement(x.V.Item,{key:r},i.createElement("div",{className:_.s.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},i.createElement(U.Y,{animationDelay:150*r})),i.createElement("div",{className:_.s.wFull.pt8.$},i.createElement(F.O.Container,null,i.createElement(F.O.SkeletonLine,{index:r}),i.createElement(F.O.SkeletonLine,{index:r,bottom:!0})))))));if(!L||"disabled"===L.result.status){if(0===H.length||(0,O.kK)())return i.createElement("div",{className:_.s.if(n,_.s.hFull).$},i.createElement(V.S,{fillHeight:n},i.createElement(k.N,null,i.createElement(k.N.ArtworkIcon,null,i.createElement(o.W,null)),i.createElement(k.N.Text,{title:(0,g.t)("assets_in_actions.assets_section.initial_state.title"),dataTestId:"assets-grid-initial-state"}))));let a=H.slice(0,r??H.length).map((e,r)=>i.createElement(Y,{key:e.node_id,asset:e,assetTypeDropdownSelection:w.I.ALL,libraryNameByLibraryKeyFromLG:W.data||{},onDragStart:X,openFileKey:G?.key??"",queryId:L?L.queryId:"",searchQuery:J,searchSessionId:l.zl.get(D.dd)??"",sectionPosition:r,assetInsertionCallback:N}));return i.createElement("div",{"data-testid":"recents-assets-grid"},c&&i.createElement($,{title:c.title,icon:c.icon,seeMore:c.seeMore}),i.createElement(B.a,null),i.createElement(M.x,{primary:!0,columns:e,padding:Q,gap:12},a))}if("errors"===L.result.status)return i.createElement("div",{className:_.s.if(n,_.s.hFull).$},c&&i.createElement($,{title:c.title,icon:c.icon,seeMore:c.seeMore}),i.createElement(V.S,{fillHeight:n},i.createElement(k.N,null,i.createElement(k.N.ArtworkIcon,{variant:"danger"},i.createElement(s.r,null)),i.createElement(k.N.Text,{title:(0,g.t)("assets_in_actions.assets_section.error.title"),subtitle:(0,g.t)("assets_in_actions.assets_section.error.description")}))));if(A)return i.createElement("div",{className:_.s.if(n,_.s.hFull).$},c&&i.createElement($,{title:c.title,icon:c.icon,seeMore:c.seeMore}),i.createElement(V.S,{fillHeight:n},i.createElement("span",{className:_.s.textBodyMedium.colorTextSecondary.$,"data-testid":"assets-grid-no-results"},(0,g.tx)("assets_in_actions.no_results_no_libraries.title"))));let er=L.result.data;if(!er||0===er.length)return i.createElement("div",{className:_.s.if(n,_.s.hFull).$},c&&i.createElement($,{title:c.title,icon:c.icon}),i.createElement(V.S,{fillHeight:n},i.createElement("span",{className:_.s.textBodyMedium.colorTextSecondary.$,"data-testid":"assets-grid-no-results"},(0,g.tx)("assets_in_actions.assets_section.no_results.title",{query:d()(J,{length:24})}))));let en=er.slice(0,r??L.result.data.length).map((e,r)=>i.createElement(Y,{key:e.node_id,asset:e,assetTypeDropdownSelection:w.I.ALL,libraryNameByLibraryKeyFromLG:q.data||{},onDragStart:X,openFileKey:G?.key??"",queryId:L?L.queryId:"",searchQuery:J,searchSessionId:l.zl.get(D.dd)??"",sectionPosition:r,assetInsertionCallback:N}));return p&&en.push(i.createElement(M.x.Item,{key:"suggestion",fullWidth:!0,primaryAction:{text:"Search designs",shortcuts:[{key:m.Uz.ENTER}],onAction:f},singleClick:!0,defaultFocusOptions:{block:"center",inline:"nearest"}},i.createElement(M.x.GridItemHighlight,null,p))),i.createElement("div",null,c&&i.createElement($,{title:c.title,icon:c.icon,seeMore:c.seeMore}),i.createElement(B.a,null),i.createElement(M.x,{primary:!0,columns:e,padding:Q,gap:12},en))}function $({title:e,icon:r,seeMore:n}){let a=n?i.createElement(G.p,{onAction:n.onAction,recordingKey:n.recordingKey},n.title):i.createElement("div",{className:_.s.h24.$});return i.createElement(H.X,null,r&&i.createElement(H.X.Icon,null,r),i.createElement(H.X.Title,{endEnhancer:a},e))}function Y({asset:e,libraryNameByLibraryKeyFromLG:r,assetTypeDropdownSelection:n,searchQuery:a,openFileKey:o,sectionPosition:s,onDragStart:l,disableActionShortcuts:c,assetInsertionCallback:d}){let u=r[e.library_key],{afterSuccessfulInsert:p,componentInsertSwapCallback:m}=(0,K.H$)({asset:e,assetTypeDropdownSelection:n,sectionPosition:s,openFileKey:o,assetInsertionCallback:d}),{primaryAction:h,secondaryAction:g,tertiaryAction:f}=(0,W.b)({asset:e,afterSuccessfulInsert:p,componentInsertSwapCallback:m,source:"assets_grid",disableActionShortcuts:c});return i.createElement(M.x.Item,{primaryAction:h,secondaryAction:g,tertiaryAction:f,defaultFocusOptions:{block:"center",inline:"nearest"}},i.createElement(M.x.GridItemHighlight,null,i.createElement(j,{asset:e,sectionPosition:s,fileName:u,isSearch:!!a,onDragStart:l,afterSuccessfulInsert:p})),i.createElement(M.x.ItemFooter,null,i.createElement("div",{className:_.s.pt8.flex.flexColumn.gap2.alignLeft.$},i.createElement("span",{className:_.s.textBodyMedium.colorText.truncate.$},(0,T.kH)(e.name)),i.createElement("span",{className:_.s.textBodyMedium.colorTextSecondary.truncate.$},u))))}function j({asset:e,sectionPosition:r,isSearch:n,afterSuccessfulInsert:a,fileName:o,onDragStart:s}){let l=(0,C.Y)(e),c=(0,i.useRef)(null),[d,u]=i.useState({width:0,height:0});(0,p.wY)(c,()=>{u({width:c.current?.clientWidth??0,height:c.current?.clientHeight??0})});let m=(0,A.F)(e,L.K.ACTIONS_ASSETS,r,"Actions Component Search");return i.createElement("div",{className:_.s.wFull.$,style:f.sx.add({aspectRatio:"1/1"}).$},i.createElement("div",{ref:c,className:_.s.wFull.hFull.$},i.createElement(N.lX,{alwaysShowBorder:!1,buttonProps:{onContextMenu:m},displayType:"grid",draggable:{sourceForTracking:"actions_assets_tab",afterSuccessfulInsert:a,sectionNameForTracking:K.Bd,onDragStart:s},fileName:o,height:d.height,hideNameOverlay:!1,isSearch:n,item:e,numVariants:l,sectionPosition:r,shouldHideTooltip:!0,showName:!1,showTooltipImmediately:!1,useBaseTile:!0,width:d.width})))}},240261:(e,r,n)=>{n.d(r,{B:()=>er});var i=n(848318),a=n(716544),o=n(445777),s=n(707005),l=n(641264),c=n(39773);n(536384),n(524488);var d=n(579020),u=n(818754),p=n(730169),m=n(303035),h=n(431118),_=n(507152),g=n(17755),f=n(442313),E=n(223161),y=n(948895);n(111947),n(797952);var b=n(950738),v=n(843156);n(369600),n(928001);var T=n(778727),I=n(454869);n(931516);var S=n(492119),w=n(277253),A=n(643231),C=n(640021),N=n(836769),L=n(473450);n(468410);var O=n(257628),R=n(205595),P=n(386502),D=n(194719),M=n(60614),k=n(217682),F=n(677657),x=n(4434),U=n(183956),B=n(234230),V=n(136323),G=n(873506),H=n(1615),K=n(917665),W=n(330420),z=n(828446);n(674061);var $=n(867213),Y=n(503857),j=n(6354),q=n(504100),X=n(220056),Z=n(683091),J=n(153330),Q=n(81552),ee=n(665942),et=n(846650);function er({initAssetSearch:e=!1,closeOnEscape:r=!1,initialTab:n=Y.xA.COMPONENTS}){let er=(0,z.V)(),en=(0,L.eH)(),ei=(0,Z.A)(),ea=i.useRef(null),{currentSearch:eo}=(0,c.md)(R.WP),es=(0,c.md)(y.hO.currentSearchAtom),el=(0,c.md)(y.hO.currentCommunitySearchAtom),[ec,ed]=(0,c.fp)(x.Q8),eu=(0,c.Xr)(x.Rt),{recentFragments:ep}=(0,y.cN)(!er),em=(0,X.U)(er);(0,C.b)({disabled:!e});let{close:eh}=(0,P.cq)(),{libraries:e_,presets:eg,librariesForConnectedProject:ef}=(0,N.g)(),eE=!(0,c.md)(T.Sh)&&0===e_.length&&0===eg.length&&0===ef.length,{debouncedAssetSearch:ey,clearAssetSearchAndCancelDebounce:eb,cancelDebouncedAssetSearch:ev,flushDebouncedAssetSearch:eT}=(0,R.TC)({debounceWait:$.wU}),{debouncedFragmentTextSearch:eI,clearFragmentSearchAndCancelDebounce:eS,cancelDebouncedFragmentTextSearch:ew,flushDebouncedFragmentTextSearch:eA}=(0,W.S)({debounceWait:$.wU,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}),{debouncedFragmentTextSearch:eC,cancelDebouncedFragmentTextSearch:eN,clearFragmentSearchAndCancelDebounce:eL,flushDebouncedFragmentTextSearch:eO}=(0,W.S)({debounceWait:$.wU,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL,isCommunity:!0}),[eR,eP]=(0,c.fp)(R.B1),eD=(0,L.Nv)(eo?.input.type==="input-text"),eM=i.useCallback(e=>{d.az.trackDefinedEvent("asset_search.misc_feature_usage",{aiResultsEnabled:eD,entryPoint:"actions-assets-tab",featureSlug:"library-filter-usage"}),eP(e),ey(ec,e),eT()},[ey,eT,ec,eD,eP]),ek=(0,ee.s)(),eF=i.useRef(null),[ex,eU,eB]=s.t.useTabs({[Y.xA.COMPONENTS]:!0,[Y.xA.FRAGMENTS]:er,[Y.xA.COMMUNITY]:en},{defaultActive:n});(0,p.h)(()=>()=>{c.zl.set(E.q4),eP({type:w.I.ALL}),(0,$.mX)(c.zl.get(x.Q8),m.lQ,er,en,ek,y.G4.ACTIONS_ASSETS_TAB_DETAIL)});let eV=(0,v.g5)(S.$A.Design).productComponents.length,eG=ep?ep.length:0,eH=(0,i.useMemo)(()=>eB.activeTab===Y.xA.COMPONENTS?eV:eB.activeTab===Y.xA.FRAGMENTS?eG:(eB.activeTab,Y.xA.COMMUNITY,0),[eV,eG,eB.activeTab]);!function({activeTab:e,numRecentItems:r,isEmptySearchQuery:n}){let o=(0,c.md)(x.dd),s=(0,c.md)(x.Rt),l=(0,a.d4)(I.l),{query:d,queryId:u,results:p,loaded:m}=function(e){let{currentSearch:r}=(0,c.md)(R.WP),n=(0,c.md)(y.hO.currentSearchAtom);return e===Y.xA.COMPONENTS?{query:r?.input.type==="input-text"?r.input.query:"",queryId:r?.queryId,results:r?.result.data||[],loaded:r?.result.status==="loaded"}:e===Y.xA.FRAGMENTS?{query:n?.input.type==="input-text"?n.input.value:"",queryId:n?.searchId,results:n?.result.data||[],loaded:n?.result.status==="loaded"}:{query:"",queryId:"",results:[],loaded:!1}}(e),h=(0,k.Ev)(),_=(0,i.useRef)(new Set),g=`${e}-${u}`;(0,i.useEffect)(()=>{(m||r>0&&n)&&!_.current.has(g)&&(h({quickActionsSessionId:o||"invalid-for-assets-tab",quickActionsQueryId:s,searchQuery:d,numSearchResults:m?p.length:r,currentSelection:l,module:F.Sn.ASSETS_TAB_DETAIL_VIEW,moduleFilters:e,qaVersion:M.$L,searchQueryResults:""}),_.current.add(g))},[h,o,s,l,g,e,d,p.length,m,r,n])}({activeTab:eB.activeTab,numRecentItems:eH,isEmptySearchQuery:0===ec.length});let eK=i.useCallback(e=>{switch(e){case Y.xA.COMPONENTS:er&&ew(),en&&eN(),(0,R.kN)(ec)&&(ey(ec,eR),eT());break;case Y.xA.FRAGMENTS:ev(),en&&eN(),(0,y.G1)(ec)&&(eI(ec),eA());break;case Y.xA.COMMUNITY:er&&ew(),ev(),(0,y.G1)(ec,!0)&&(eC(ec),eO());break;default:(0,o.xb)(e)}eB.setActiveTab(ex[e].id),ea.current?.focus()},[ew,ey,eR,eT,ev,eI,eA,ec,eB,ex,er,en,eN,eC,eO]),eW=i.useCallback(e=>{ed(e),eu((0,_.g)()),(eB.activeTab===Y.xA.COMPONENTS||0===e.length)&&ey(e,eR),er&&(eB.activeTab===Y.xA.FRAGMENTS||0===e.length)&&eI(e),en&&(eB.activeTab===Y.xA.COMMUNITY||0===e.length)&&eC(e)},[ed,eu,eB.activeTab,er,en,ey,eR,eI,eC]),ez=i.createElement(H.fu,{value:eB.activeTab,onChange:m.lQ,numItems:en?3:2},i.createElement(H.oz,{tabId:Y.xA.COMPONENTS,onAction:()=>eK(Y.xA.COMPONENTS)},(0,f.tx)("assets_in_actions.detail_view.components_tab.title")),er&&i.createElement(H.oz,{tabId:Y.xA.FRAGMENTS,onAction:()=>eK(Y.xA.FRAGMENTS)},(0,f.tx)("assets_in_actions.detail_view.fragments_tab.title")),en&&i.createElement(H.oz,{tabId:Y.xA.COMMUNITY,onAction:()=>eK(Y.xA.COMMUNITY)},(0,f.tx)("assets_in_actions.detail_view.community_tab.title"))),e$=eo?.queryId,eY=es?.searchId,ej=el?.searchId,eq=er&&eo&&"loaded"===eo.result.status?i.createElement("div",{className:g.s.flex.wFull.colorBgSecondary.itemsCenter.px8.py6.radiusMedium.$},i.createElement(l.N,{style:{"--color-icon":"var(--color-icon-brand)"}}),i.createElement("span",{className:g.s.ml8.textBodyMedium.$},ei?(0,f.tx)("assets_in_actions.fragments.fragment_search_sugggestion",{boldText:i.createElement("span",{className:g.s.textBodyMediumStrong.$},(0,f.tx)("assets_in_actions.fragments.fragment_search_sugggestion_bold_text")),orgText:(0,h.EJ)(ei,20)}):(0,f.tx)("assets_in_actions.fragments_section.empty_state.text")),i.createElement("span",{className:g.s.mlAuto.textBodyMediumStrong.colorTextBrand.$},(0,f.tx)("assets_in_actions.fragments.fragment_search_sugggestion_hint"))):void 0,eX=eo&&!eE,eZ=(0,b.Um)(),eJ=i.useCallback(e=>{er&&(0,$.jk)(e)},[er]),eQ=(0,D._M)({action:O.JT.FIND_INSPIRATION,clientLifecycleId:void 0});return i.createElement(B.n,{width:(0,u.jz)(et.X),height:480,bodyFontMedium:!0,dataTestId:"assetsDetailView"},i.createElement(B.n.Header,null,i.createElement("div",{ref:eF,className:g.s.flex.flexColumn.$},i.createElement(G.v,{ref:ea,searchQuery:ec,onSearchChange:eW,forceRoot:r,onClear:()=>{ed(""),eb(),er&&eS(),en&&eL()},onPaste:eJ,endEnhancer:er&&i.createElement($.hc,{entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL,aiTrackingContext:eQ,activeTab:eB.activeTab}),placeholder:em}),(er||en||eX)&&i.createElement("div",{className:g.s.px8.pb8.$},i.createElement(U.b,{primary:!1,gap:8,align:"center",fullWidth:!0,justify:"space-between"},i.createElement("div",null,(er||en)&&ez),i.createElement("div",null,eX&&i.createElement(s.t.TabPanel,{...eU[Y.xA.COMPONENTS]},i.createElement("div",{className:g.s.h24.flex.itemsCenter.$},i.createElement(J.i,{onSetAssetType:eM,value:eR,id:$.Km,dataTestId:$.Km,recordingKey:$.Km,role:"button",showTooltipOnEllipsis:!0,dropdownShown:eZ}))),er&&i.createElement(s.t.TabPanel,{...eU[Y.xA.FRAGMENTS]},i.createElement("div",{className:g.s.h24.flex.itemsCenter.$},es&&i.createElement(K.s,{containerRef:eF,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}))),en&&i.createElement(s.t.TabPanel,{...eU[Y.xA.COMMUNITY]},i.createElement("div",{className:g.s.h24.$}))))))),i.createElement(B.n.Body,null,i.createElement(Y.fJ.Provider,{value:{activeTabId:eB.activeTab}},i.createElement(s.t.TabPanel,{...eU[Y.xA.COMPONENTS]},i.createElement(V.q,{key:e$},eE?i.createElement(Q.S,{fillHeight:!0},i.createElement(A.Ee,{onClickExplore:eh,fromActionsModal:!0,width_ui3:264,bgTransparentUI3:!0})):i.createElement(j.O,{numberOfGridColumns:6,stretchEmptyStates:!0,suggestion:er&&eq,onClickSuggestion:()=>{eK(Y.xA.FRAGMENTS)}}))),er&&i.createElement(s.t.TabPanel,{...eU[Y.xA.FRAGMENTS]},i.createElement(V.q,{key:eY},i.createElement(q.M,{focusHandle:ea,initialState:{type:"recents",recents:ep},stretchEmptyStates:!0,entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}))),en&&i.createElement(s.t.TabPanel,{...eU[Y.xA.COMMUNITY]},i.createElement(V.q,{key:ej},i.createElement(q.M,{focusHandle:ea,stretchEmptyStates:!0,isCommunity:!0,initialState:{type:"recents",recents:[]},entryPoint:y.G4.ACTIONS_ASSETS_TAB_DETAIL}))))))}},504100:(e,r,n)=>{n.d(r,{M:()=>O});var i=n(848318),a=n(445777),o=n(885265),s=n(39773),l=n(524488),c=n.n(l),d=n(792647),u=n(17755),p=n(442313),m=n(948895),h=n(468410),_=n(423181),g=n(519614),f=n(43006),E=n(674061),y=n(177395),b=n(943246),v=n(942620),T=n(887953),I=n(334486),S=n(891595),w=n(980726),A=n(683091),C=n(81552),N=n(844013),L=n(276678);function O({focusHandle:e,entryPoint:r,initialState:n,numberOfGridColumns:a=3,maxResults:l,stretchEmptyStates:d=!1,header:g,isFigmake:f=!1,forceLoadingState:y,hideEditorNames:N,isCommunity:L,largeSpacing:O,searchResultRef:D,lastSearchResultRef:M}){let k=(0,s.md)(L?m.hO.currentCommunitySearchAtom:m.hO.currentSearchAtom),F=(0,s.md)(m.hO.sortByAtom),x=(0,_.s)(k),U=(0,A.A)(),B=O?12:8,V=(0,h.kK)()||!U;if(n?.type==="recents"&&null===n.recents||k?.result.status==="loading"||y)return i.createElement("div",null,g&&i.createElement(P,{title:g.title,icon:g.icon}),i.createElement(I.V,{columns:a,padding:B,gap:12},Array.from({length:l??3*a}).map((e,r)=>i.createElement(I.V.Item,{key:r},i.createElement("div",{className:u.s.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},i.createElement(S.Y,{animationDelay:150*r})),i.createElement("div",{className:u.s.wFull.pt8.$},i.createElement(T.O.Container,null,i.createElement(T.O.SkeletonLine,{index:r}),i.createElement(T.O.SkeletonLine,{index:r,bottom:!0})))))));if(!k||"disabled"===k.result.status){if(!n)return null;let o=L?(0,p.t)("assets_in_actions.fragments_section.empty_state.header_community"):V?(0,p.t)("assets_in_actions.fragments_section.empty_state.header_generic"):(0,p.t)("assets_in_actions.fragments_section.empty_state.header",{orgText:U}),s=L?(0,p.t)("assets_in_actions.fragments_section.empty_state.text_community"):(0,p.t)("assets_in_actions.fragments_section.empty_state.text"),c=L?"community-fragments-grid-initial-state":"fragments-grid-initial-state";return n.recents?.length?i.createElement("div",null,g&&i.createElement(P,{title:g.title,icon:g.icon,seeMore:g.seeMore}),i.createElement(R,{fragments:n.recents,focusHandle:e,numberOfGridColumns:a,entryPoint:r,maxResults:l,hideEditorNames:N,isCommunity:L,largeSpacing:O})):i.createElement("div",{className:u.s.if(d,u.s.hFull).$},i.createElement(C.S,{fillHeight:d},i.createElement(E.N,null,i.createElement(E.N.ArtworkIllustration,{light:i.createElement(v.A,null),dark:i.createElement(b.A,null)}),i.createElement(E.N.Text,{title:o,subtitle:s,dataTestId:c}))))}if("errors"===k.result.status)return i.createElement("div",{className:u.s.if(d,u.s.hFull).$},g&&i.createElement(P,{title:g.title,icon:g.icon}),i.createElement(C.S,{fillHeight:d},i.createElement(E.N,null,i.createElement(E.N.ArtworkIcon,{variant:"danger"},i.createElement(o.r,null)),i.createElement(E.N.Text,{title:(0,p.t)("assets_in_actions.fragments_section.error.title"),subtitle:(0,p.t)("assets_in_actions.fragments_section.error.description")}))));if(0===k.result.data.length){let e="";return"input-text"===k.input.type?e=k.input.value:x&&(e=x.name),i.createElement("div",{className:u.s.if(d,u.s.hFull).$},g&&i.createElement(P,{title:g.title,icon:g.icon}),i.createElement(C.S,{fillHeight:d},i.createElement("span",{className:u.s.textBodyMedium.colorTextSecondary.$},(0,p.tx)("assets_in_actions.fragments_section.no_results.title",{query:c()(e,{length:24})}))))}let G=(0,w.t)(k.result.data,F);return i.createElement("div",null,g&&i.createElement(P,{title:g.title,icon:g.icon,seeMore:g.seeMore}),i.createElement(R,{disableDragging:f,entryPoint:r,focusHandle:e,fragments:G,hideEditorNames:N,isCommunity:L,largeSpacing:O,lastSearchResultRef:M,maxResults:l,numberOfGridColumns:a,searchResultRef:D}))}function R({fragments:e,focusHandle:r,numberOfGridColumns:n,entryPoint:o,maxResults:s,hideEditorNames:l,isCommunity:c,largeSpacing:p,searchResultRef:m,lastSearchResultRef:h,disableActionShortcuts:_,disableDragging:E}){let b=(0,f.r)("fragments_grid",r,o,_),v=(0,d.z3)("faux");return i.createElement(g.x,{primary:!0,columns:n,padding:p?12:8,gap:12},e.slice(0,s??e.length).map((r,n)=>{let d=i.createElement(T.O.Container,null,i.createElement(T.O.Title,null,r.file_name),c?i.createElement(T.O.CommunityMetadata,{name:r.editor_name}):i.createElement(T.O.EditInfo,{editor:{name:r.editor_name,imageUrl:r.editor_img_url},lastEditedAt:r.last_edited_at,hideEditorName:l})),{primaryAction:p,secondaryAction:_,tertiaryAction:f}=b(r,n,null,e),I="";switch(r.type){case"fig-file-fragment":I=`${r.file_key}-${r.node_id}`;break;case"hub-file-fragment":I=`${r.hub_file_id}-${r.node_id}`;break;default:(0,a.xb)(r)}let S=s?s-1:e.length-1;return i.createElement(g.x.Item,{key:I,primaryAction:p,secondaryAction:_,tertiaryAction:f},i.createElement(g.x.GridItemHighlight,null,i.createElement(y.a,{entryPoint:o,fragment:r,fragmentPosition:n,onDragStart:v,disabled:E,ref:0===n?m:n===S?h:null})),i.createElement(g.x.ItemFooter,null,i.createElement("div",{className:u.s.pt8.$},d)))}))}function P({title:e,icon:r,seeMore:n}){let a=n?i.createElement(N.p,{onAction:n.onAction,recordingKey:n.recordingKey},n.title):i.createElement("div",{className:u.s.h24.$});return i.createElement(L.X,null,i.createElement(L.X.Icon,null,r),i.createElement(L.X.Title,{endEnhancer:a},e))}},539965:(e,r,n)=>{n.d(r,{C:()=>en});var i=n(848318),a=n(716544);n(992277);var o=n(897378),s=n(425068),l=n(384412),c=n(826941),d=n(39773),u=n(633017),p=n(178169);n(502255);var m=n(431118),h=n(575492),_=n(166365),g=n(958974),f=n(17755),E=n(442313),y=n(500276),b=n(576220),v=n(803448),T=n(85442),I=n(449502),S=n(96447),w=n(677251),A=n(503024),C=n(561431),N=n(257628),L=n(684552),O=n(386502),R=n(89117),P=n(217682);n(677657);var D=n(694747),M=n(401704),k=n(234230),F=n(371825),x=n(856260),U=n(797323),B=n(22670),V=n(457573),G=n(634664),H=n(233001),K=n(965436),W=n(800831),z=n(343802),$=n(481563),Y=n(6507),j=n(693499);function q({augmentedExtension:e}){let{extension:r,publishedExtension:n}=e,{pop:a}=(0,O.cq)();(0,L.z)();let o=i.useRef(null),{onAction:s,actionText:l}=(0,R.m)({augmentedExtension:e,submenuRef:o,displayAboveTarget:!0}),c=B.H5.DETAILS,d=(0,V.D)({source:c,text:l,onAction:s,augmentedExtension:e,submenuRef:o,hideShortcutOnKeyboardFocus:!0}),u=(0,H.DS)(e);u&&(u=(0,P.M$)(u,c)),(0,F.k)({primaryAction:d,tertiaryAction:u,actionLabel:!0,active:!0,target:null});let p=(0,g.x)(),m=N.HW-48-41,_=n.unique_run_count,E=n.like_count;return i.createElement(k.n,{height:N.HW,width:p,dataTestId:"extension-details-view"},i.createElement(D.t,null),i.createElement(Z,{extension:r,onGoBack:a}),i.createElement(h.P,{height:m,className:f.s.px16.$},i.createElement(J,{imgUrl:r.redirect_cover_image_url,extensionName:r.name}),i.createElement(Q,{name:r.name,numLikes:E,numRuns:_}),i.createElement(ee,{publishedExtension:n}),i.createElement(et,{description:r.description})),i.createElement(K.Xq,{augmentedExtension:e}))}function X({augmentedExtension:e}){let r=(0,d.md)(x.t);return i.createElement(G.M6,{numResults:1,moduleFilters:r},i.createElement(q,{augmentedExtension:e}))}function Z({extension:e,onGoBack:r}){let n=(0,w.k0)(e),d=n?(0,E.t)("qa.extensions.widget"):(0,E.t)("qa.extensions.plugin"),p=e.plugin_id,m=function(e){let r=(0,a.wA)(),n=(0,w.k0)(e)?(0,C.ox)(e.plugin_id):(0,C.ab)(e.plugin_id);return(0,i.useCallback)(()=>{(0,u.e)(n)||r((0,I.RK)({rawInput:n}))},[r,n])}(e),h=(0,a.wA)(),_=i.useCallback(()=>{h(T.Pv({url:n?(0,C.ox)(p):(0,C.ab)(p),extensionType:n?"widget":"plugin"}))},[h,n,p]);return i.createElement("div",{className:f.s.p8.$,style:y.sx.add({height:"48 px"}).$},i.createElement("div",{className:f.s.flex.h32.px4.itemsCenter.justifyBetween.$},i.createElement("div",{className:f.s.flex.flexRow.$},i.createElement(o.K,{onClick:r,"aria-label":(0,E.t)("qa.go_back")},i.createElement(s.C,null)),i.createElement("div",{className:f.s.pl8.colorText.textBodyLarge.$},d)),i.createElement("div",{className:f.s.flex.flexRow.itemsCenter.gap8.$},i.createElement(o.K,{onClick:m,"aria-label":(0,E.t)("qa.extensions.open_in_community"),htmlAttributes:{"data-tooltip":(0,E.t)("qa.extensions.open_in_community"),"data-tooltip-type":A.Ib.TEXT}},i.createElement(l.N,null)),i.createElement(o.K,{onClick:_,"aria-label":(0,E.t)("qa.copy_link"),htmlAttributes:{"data-tooltip":(0,E.t)("qa.copy_link"),"data-tooltip-type":A.Ib.TEXT}},i.createElement(c.W,null)))))}function J({imgUrl:e,extensionName:r}){let n=(0,v.X)(e);return i.createElement("div",{className:f.s.overflowHidden.bRadius5.mb12.$,style:y.sx.add({aspectRatio:n?"16/9":"2/1",background:"var(--color-loading)"}).$},i.createElement("img",{src:e,className:f.s.hFull.wFull.eventsNone.$,style:y.sx.add({objectFit:"cover"}).$,alt:`Thumbnail for ${r}`}))}function Q({name:e,numLikes:r,numRuns:n}){return i.createElement("div",{className:f.s.flex.flexRow.justifyBetween.$},i.createElement("div",{className:f.s.colorText.textHeadingMedium.$},e),i.createElement("div",{className:f.s.flex.flexRow.itemsCenter.gap8.colorTextSecondary.textBodyMedium.$},i.createElement("div",{className:f.s.flex.flexRow.gap2.$},i.createElement(_.B,{svg:j.A,className:f.s.colorIconSecondary.$,style:y.sx.add({margin:"3px"}).$}),i.createElement("div",null,(0,m.$M)(r))),i.createElement("div",{className:f.s.flex.flexRow.gap2.$},i.createElement(_.B,{svg:Y.A,className:f.s.mx2.colorIconSecondary.$}),i.createElement("div",null,(0,m.$M)(n)))))}function ee({publishedExtension:e}){if(!e)return null;let r=e.community_publishers?.accepted[0];if(!r)return null;let{img_url:n,name:a}=r;return i.createElement("div",{className:f.s.pt4.flex.flexRow.itemsCenter.justifyBetween.colorTextSecondary.textBodyMedium.$},i.createElement("div",{className:f.s.flex.$},i.createElement(b.H8,{user:{img_url:n,name:a},size:b.Pf.SMALL16}),i.createElement("div",{className:f.s.pl8.$},(0,U.kB)(e))),i.createElement("div",null,i.createElement(W.o,{publishedExtension:e,showTooltip:!0})))}function et({description:e}){return i.createElement("div",{className:f.s.pt16.pb8.$},i.createElement(p.R,{value:e,quillClassName:$.C,fallback:null,errorFallback:null}))}function er(){let{pop:e}=(0,O.cq)();return(0,i.useEffect)(()=>{e()},[e]),null}function en({extensionId:e,extensionType:r}){let n=(0,S._P)(e,!0),a=(0,z.Oy)();if(!n.loaded)return i.createElement(M.R,null);let o=n.plugin;if(!o)return i.createElement(er,null);let s=a(o,r);return(0,z.JT)(s)?i.createElement(er,null):s.publishedExtension?i.createElement(X,{augmentedExtension:{...s,publishedExtension:s.publishedExtension}}):i.createElement(M.R,null)}},457573:(e,r,n)=>{n.d(r,{D:()=>d});var i=n(848318),a=n(771622),o=n(217682),s=n(279541);n(546542);var l=n(22670),c=n(634664);function d({source:e,text:r,onAction:n,augmentedExtension:d,submenuRef:u,hideShortcutOnKeyboardFocus:p=!1}){let m=(0,c.OX)(),h=(0,s.qI)();return i.useMemo(()=>{let i={text:r,shortcuts:p&&h?[]:[l.Hz],onAction:e=>{d&&(0,a.wI)({extensionId:d.extension.plugin_id,searchPosition:e.target?.index??0,numSearchResults:m.numResults,searchQuery:m.searchQuery,moduleFilters:m.moduleFilters}),n(e)},submenuRef:u};return(0,o.M$)(i,e)},[h,d,m.moduleFilters,m.numResults,m.searchQuery,p,n,e,u,r])}},634664:(e,r,n)=>{n.d(r,{M6:()=>l,OX:()=>c});var i=n(848318),a=n(39773),o=n(4434);let s=i.createContext(null);function l({numResults:e,moduleFilters:r,children:n}){return i.createElement(s.Provider,{value:{numResults:e,moduleFilters:r}},n)}function c(){let e=i.useContext(s),r=(0,a.md)(o.Q8);if(!e)throw Error("useExtensionMetrics must be used within a ExtensionMetricsProvider");return{...e,searchQuery:r}}},233001:(e,r,n)=>{n.d(r,{DS:()=>f});var i=n(716544),a=n(442313),o=n(211591),s=n(93724),l=n(973182),c=n(661780),d=n(994768),u=n(526830),p=n(677251),m=n(386502),h=n(594656),_=n(22670),g=n(343802);function f(e){let r=function(e){let r=(0,i.wA)(),n=(0,d.U_)(),{extension:l,types:c}=e,{unsave:u}=E(e);if(!(e.types.has(_.Ag.RECENT)||e.types.has(_.Ag.USER_SAVED)||e.types.has(_.Ag.LOCAL)))return;let m=!!((0,p.ZQ)(l)&&e.publishedExtension);return{displayText:m?(0,a.t)("universal_insert.remove_local_version"):(0,a.t)("universal_insert.remove"),callback:()=>{!(c.has(_.Ag.LOCAL)&&(0,p.ZQ)(l)&&(r(o.qR(l.localFileId)),m))&&(c.has(_.Ag.RECENT)&&n&&r(((0,p.k0)(l)?s.Kq:s.lD)({storeInRecentsKey:n,resourceId:l.plugin_id})),c.has(_.Ag.USER_SAVED)&&u())}}}(e),n=function(e){let{save:r}=E(e),n=(0,i.wA)(),o=(0,d.U_)(),l=(0,c.TA)();if(!e.types.has(_.Ag.USER_SAVED)&&!(0,g.JT)(e))return{displayText:(0,a.t)("community.saves.save"),callback:()=>{if(r(),o&&l){let{extension:r}=e;n(((0,p.k0)(r)?s.RH:s.gU)({storeInRecentsKey:o,id:r.plugin_id,version:e.extension.id,currentUserId:l,skipPluginRun:!0}))}}}}(e),l=r||n,{pop:u}=(0,m.cq)();if(l)return{shortcuts:[_.r7],onAction:()=>{l.callback(),u()},text:l.displayText}}function E(e){let{extension:r}=e,n=(0,h.zX)({extensionId:r.plugin_id});return(0,l._i)(r.plugin_id,(0,p.k0)(r)?u.vt.WIDGET:u.vt.PLUGIN,e.publishedExtension,n)}},965436:(e,r,n)=>{n.d(r,{S3:()=>v,U4:()=>b,Xq:()=>y,q8:()=>E});var i=n(848318),a=n(716544),o=n(992277),s=n(502255);n(17755),n(500276);var l=n(790355),c=n(608282),d=n(521325),u=n(740121),p=n(950738),m=n(677251),h=n(386502),_=n(100714),g=n(385754);let f="EXTENSION_SUBMENU_DROPDOWN";function E(e){return!!(e.manifest.menu&&e.manifest.menu.length>0)}function y({augmentedExtension:e}){let{extension:r}=e,n=(0,p.Um)(),a=b(r),l=(0,u.c)(),{close:m}=(0,h.cq)(),f=(0,_.w0)();if(!a||!r||!r.manifest||!r.manifest.menu)return null;let E=(0,c.z)(r.manifest.menu,r).map(e=>(0,d.aS)(e,e=>()=>{var r;(0,d.Im)(l,"quick-actions",e.menuAction),f(e,!0),("run-installed-plugin"!==(r=e.menuAction).type&&"run-local-plugin"!==r.type?((0,s.$D)(o.e.AI_FOR_PRODUCTION,Error("shouldSubmenuCloseQuickActions expected 'run-installed-plugin' or 'run-local-plugin'")),1):r.parameterOnly&&r.parameterEntry)||m()}));return i.createElement(g.ms,{parentRect:n?.data.targetRect,displayAboveTarget:n?.data.displayAboveTarget,lean:"left",minWidth:64,items:E})}function b(e){let r=(0,p.Um)();return(0,m.ZQ)(e)?r?.type===f&&r?.data.extensionId===e.plugin_id&&r?.data.localFileId===e.localFileId:r?.type===f&&r?.data.extensionId===e.plugin_id&&r?.data.localFileId===null}function v({submenuIsShown:e,extension:r,displayAboveTarget:n}){let o=(0,a.wA)();return i.useCallback(i=>{if(e)o(l.oB());else if(i){let e=i.getBoundingClientRect();o(l.j7({type:f,data:{extensionId:r.plugin_id,localFileId:(0,m.ZQ)(r)?r.localFileId:null,targetRect:e,displayAboveTarget:n}}))}},[o,e,r,n])}},800831:(e,r,n)=>{n.d(r,{o:()=>g});var i=n(848318),a=n(166365),o=n(17755),s=n(442313),l=n(775038),c=n(364370),d=n(526830),u=n(503024),p=n(154709);function m({publishedExtension:e,showTooltip:r}){if(!e.monetized_resource_metadata)return null;let n=(0,c.X2)(e.monetized_resource_metadata);return r?i.createElement("div",{"data-testid":"freemium-text",className:o.s.flex.itemsCenter.gap4.$,"data-tooltip":n,"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-below":!0,"data-tooltip-show-immediately":!0},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.buyer.in_app_purchases")),i.createElement(a.B,{svg:p.A,className:o.s.colorIconSecondary.$})):i.createElement("div",{"data-testid":"freemium-text"},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.buyer.in_app_purchases")))}function h({publishedExtension:e}){return e.monetized_resource_metadata?i.createElement("div",{"data-testid":"free-trial-text"},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.resource.free_trial_days",{days:e.monetized_resource_metadata.trial_length_in_days}))):null}function _({showTooltip:e}){return e?i.createElement("div",{"data-testid":"off-platform-text",className:o.s.flex.itemsCenter.gap4.$,"data-tooltip":(0,s.t)("community.detail_view.resource_outside_of_figma"),"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-below":!0,"data-tooltip-show-immediately":!0},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.detail_view.third_party_badge.off_platform")),i.createElement(a.B,{svg:p.A,className:o.s.colorIconSecondary.$})):i.createElement("div",{"data-testid":"off-platform-text"},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.detail_view.third_party_badge.off_platform")))}function g({publishedExtension:e,showTooltip:r}){return(0,d.PM)(e)?i.createElement(m,{publishedExtension:e,showTooltip:r}):(0,c.Lt)({resource:e,payment:e.community_resource_payment})?i.createElement(h,{publishedExtension:e}):(0,d.zF)(e)?i.createElement(_,{showTooltip:r}):null}},343802:(e,r,n)=>{n.d(r,{JT:()=>u,Oy:()=>d});var i=n(848318),a=n(96447);n(914443),n(285647);var o=n(105073),s=n(87089);n(661780);var l=n(402840),c=n(677251);function d(){let e=(0,a.tB)(),r=(0,a.ll)(),n=(0,a.U6)(),d=(0,a.cW)(),u=(0,a.ZT)(),p=(0,o.FP)(),m=(0,a.$1)(),h=(0,s.sZ)();return i.useCallback((i,a)=>(function({extension:e,org:r,allowlistPlugins:n,allowlistWidgets:i,publishedPlugins:a,publishedWidgets:s,localExtensions:d,communityPaymentsState:u,lastUsedTimestampById:p,type:m}){let h;let _=(0,o.Y8)({extension:e,publishedPlugins:a,publishedWidgets:s,communityPaymentsState:u});_&&(h=Object.values(d).find(e=>e.plugin_id===_.id));let g={types:new Set([m]),publishedExtension:_,key:function(e){let r=e.plugin_id;return(0,c.ZQ)(e)?`${r}-${e.localFileId}`:r}(e),lastUsedTimestamp:p[(0,c.ZQ)(e)?e.localFileId:e.plugin_id],localPublishedExtension:h};if((0,c.ZQ)(e))return _&&!(0,l.nf)(_)&&(g.publishedExtension=void 0),{...g,extension:e,canRun:!0,canRequest:!1};if((0,c.bH)(e)||!r)return{...g,extension:e,canRun:!0,canRequest:!1};let f=r.public_plugins_allowed,E=r.plugins_whitelist_enforced,y=r.widgets_whitelist_enforced,b=r.plugin_requests_allowed,v=r.widget_requests_allowed,T=(0,c.k0)(e);if(!f)return{...g,extension:e,canRun:!1,canRequest:!1};if(!(T?y:E))return{...g,extension:e,canRun:!0,canRequest:!1};let I=!!(T?i:n)[e.plugin_id];return{...g,extension:e,canRun:I,canRequest:!I&&(T?v:b)}})({extension:i,org:h,allowlistPlugins:r,allowlistWidgets:n,publishedPlugins:d,publishedWidgets:u,localExtensions:m,communityPaymentsState:p,lastUsedTimestampById:e,type:a}),[h,r,n,d,u,m,p,e])}function u(e){let{extension:r}=e;return(0,c.ZQ)(r)}n(677657),n(22670)},776110:(e,r,n)=>{n.d(r,{d$:()=>y});var i=n(848318);n(992277);var a=n(356505),o=n(376025),s=n(411132),l=n(649372),c=n(741419),d=n(179703),u=n(960139),p=n(730169);n(857188),n(654104),n(470403),n(958974);var m=n(17755);n(442313);var h=n(775038),_=n(200015);n(938691),n(914982);var g=n(992444);n(326971),n(369600),n(503024);var f=n(545289);n(386502),n(227109),n(894436);var E=n(183956);function y({validationFailures:e,category:r,supportedKitType:n,selectedKit:a,shouldAutoFix:o}){return i.createElement(i.Fragment,null,[...e.system.filter(e=>e.rule.category===r).filter(e=>!n||e.rule.supportedKitTypes.includes(n)).map(e=>i.createElement(v,{key:e.rule.key,rule:e.rule,output:e.output,dsKitKey:a.dsKitKey,shouldAutoFix:o})),...e.component.filter(e=>e.rule.category===r).map(e=>i.createElement(b,{key:e.rule.key,rule:e.rule,output:e.output,shouldAutoFix:o}))])}function b({rule:e,output:r,shouldAutoFix:n}){let a=i.useCallback(n=>{if(n?.stopPropagation(),!e.fix)return!1;{let n=!0,i=(0,d.UN)();for(let a in r){let o=i.get(a);o&&!e.fix(o,r[o.guid]?.meta)&&(n=!1)}return g.Y5.triggerAction("commit"),n}},[e,r]),o=i.useMemo(()=>Object.values(r).flatMap(e=>e.guids),[r]);return 0===Object.keys(r).length?null:i.createElement(T,{rule:e,guids:o,meta:null,autofix:a,shouldAutoFix:n})}function v({dsKitKey:e,rule:r,output:n,shouldAutoFix:a}){let o=i.useCallback(i=>(i?.stopPropagation(),!!r.fix&&r.fix(e,n.meta)),[r,e,n]);return 0===n.guids.length?null:i.createElement(T,{rule:r,guids:n.guids,meta:n.meta,autofix:o,shouldAutoFix:a})}function T({rule:e,guids:r,meta:n,autofix:o,shouldAutoFix:_}){let[g,f]=i.useState(!1),[y,b]=i.useState(!1),[v,T]=i.useState(!1),w=e=>{T(o(e))},A=i.useCallback(e=>{c.Egt.clearSelection(),c.Egt.addToSelection(e)},[]),C=i.useMemo(()=>r.map(e=>(0,d.UN)().get(e)).filter(Boolean),[r]);return((0,p.h)(()=>{_&&w()}),0===r.length)?null:i.createElement(i.Fragment,null,i.createElement(E.B,{fullWidth:!0,justify:"space-between",align:"center"},i.createElement("button",{onClick:()=>b(!y),className:m.s.cursorPointer.flex.itemsCenter.$},y?i.createElement(s.O,null):i.createElement(l.k,null),i.createElement(S,{severity:e.severity}),i.createElement(h.E,{fontSize:11,fontWeight:"medium"},e.name)),e.fix&&i.createElement(a.$n,{variant:"secondary",onClick:w},v?"Fixed":"Autofix")),y&&i.createElement(u.Y1,{padding:{horizontal:12},direction:"vertical"},i.createElement(h.E,{fontSize:11,fontWeight:"regular",color:"secondary"},e.warning),A&&i.createElement(a.$n,{variant:"link",onClick:()=>A(r)},"Select offending layers"),i.createElement("button",{onClick:()=>f(!g),className:m.s.cursorPointer.flex.itemsCenter.$},g?i.createElement(s.O,null):i.createElement(l.k,null),i.createElement(h.E,{fontSize:11,fontWeight:"medium"},"Show metadata")),g&&i.createElement("div",{className:m.s.flex.flexColumn.wFull.maxH100.px12.overflowYScroll.$},n?i.createElement(h.E,{fontSize:11,fontWeight:"regular",color:"secondary"},JSON.stringify(n)):i.createElement("div",{className:m.s.wFull.flex.flexWrap.gap4.$},C.map(e=>i.createElement(I,{key:e.guid,node:e}))))))}function I({node:e}){let r=i.useMemo(()=>i.createElement(f.xH,{guid:e.guid,node:e,useUI3Icon:!0}),[e]);return i.createElement(o.E,{className:m.s.borderBox.h24.flex.px8.gap4.itemsCenter.b1.radiusMedium.maxW150.font11.colorBorder.$,onClick:()=>{c.glU.panToNode(e.guid,!1);let r=(0,d.UN)().getCurrentPage();r&&(r.directlySelectedNodes=[e])},recordingKey:"nodeButton"},r,i.createElement("span",{className:m.s.truncate.$},e.name))}function S({severity:e}){switch(e){case _.x$.ERROR:return i.createElement("div",{className:m.s.p2.font11.colorTextDanger.justifyCenter.fontSemiBold.$},"[Error]");case _.x$.WARNING:return i.createElement("div",{className:m.s.p2.font11.colorTextWarning.justifyCenter.fontSemiBold.$},"[Warning]");default:return null}}n(234230),n(81552)},139208:(e,r,n)=>{n.d(r,{Ne:()=>Y,Xy:()=>$});var i=n(60324),a=n.n(i),o=n(81587),s=n(339549),l=n(167057),c=n(155209),d=n(405624),u=n(62648),p=n(461868),m=n(477676),h=n(929977),_=n(472297),g=n(877034),f=n(144602),E=n(622922),y=n(10060),b=n(563093),v=n(307759),T=n(235695),I=n(231541),S=n(255772),w=n(435312),A=n(905795),C=n(588045),N=n(746753),L=n(244697),O=n(450216),R=n(23048),P=n(480956),D=n(828508),M=n(233353),k=n(594713),F=n(645279),x=n(373580),U=n(453293),B=n(894978),V=n(857619),G=n(331142),H=n(662917),K=n(165668),W=n(333259),z=n(455738);let $=0,Y=2;new Map().set(0,F.A).set(a()(.25*Y,2),x.A).set(a()(Y/2,2),U.A).set(a()(.75*Y,2),B.A).set(Y,V.A),new Map().set(0,G.A).set(a()(.25*Y,2),H.A).set(a()(Y/2,2),K.A).set(a()(.75*Y,2),W.A).set(Y,z.A),new Map().set("Plus Jakarta Sans",N.A).set("Outfit",O.A).set("Inter",C.A).set("Public Sans",R.A).set("Domine",A.A).set("Source Serif 4",M.A).set("Roboto Serif",D.A).set("Roboto Mono",P.A).set("JetBrains Mono",L.A).set("Space Mono",k.A),new Map().set("Plus Jakarta Sans",l.A).set("Outfit",d.A).set("Inter",s.A).set("Public Sans",u.A).set("Domine",o.A).set("Source Serif 4",h.A).set("Roboto Serif",m.A).set("Roboto Mono",p.A).set("Space Mono",_.A).set("JetBrains Mono",c.A),new Map().set("Plus Jakarta Sans",E.A).set("Outfit",b.A).set("Inter",f.A).set("Public Sans",v.A).set("Domine",g.A).set("Source Serif 4",S.A).set("Roboto Serif",I.A).set("Roboto Mono",T.A).set("Space Mono",w.A).set("JetBrains Mono",y.A)},822441:(e,r,n)=>{n.d(r,{qq:()=>c});var i=n(741419),a=n(673906),o=n(179703),s=n(992444);let l=e=>Uint8Array.from(e.match(/.{1,2}/g).map(e=>parseInt(e,16)));function c({create:e,canvasGrid:r}){let n,c;let d=r&&r.length>0,u=(0,o.UN)(),p=u.getCurrentPage();if(!p)throw Error("Something went wrong");if(1===p.directlySelectedNodes.length){var m;if(!function(e){let r=s.Y5.getViewportInfo(),n=r.width/r.zoomScale,i=r.height/r.zoomScale,a=r.offsetX-n/2,o=r.offsetX+n/2,l=r.offsetY-i/2,c=r.offsetY+i/2,d=e.absoluteBoundingBox,u=d.x+d.w,p=d.y+d.h;return!(u>o)&&!(p>c)&&!(d.x<a)&&!(d.y<l)}(n=p.directlySelectedNodes[0])&&(n=void 0),d&&(n?.isOrInSlide()||n?.containingCooperFrame())){let e=n.containingSlideId;c=u.get(e)}(m=n)&&["FRAME","RECTANGLE","ROUNDED_RECTANGLE","ELLIPSE","STAR","INSTANCE","SYMBOL"].includes(m.type)||(n=void 0)}return a.l7.user("generate image",()=>{if(!n&&e){let e=s.Y5.getViewportInfo();if((n=u.createNode("RECTANGLE")).size={x:1024,y:1024},n.x=e.offsetX-n.size.x/2,n.y=e.offsetY-n.size.y/2,d){if(!c){let e=i.Ez5.canvasGrid().getClosestGridCoord({x:n.x,y:n.y},null),a=e.row>=0?e.row:0,o=e.col>=0?e.col:0,s=r[a]?.[o];if(s){let e=u.get(s);e?.isInstance||(c=e)}}if(c){let e=function(e){let r=e.absoluteBoundingBox;return{x:r.x+r.w/2,y:r.y+r.h/2}}(c);n.x=e.x-n.size.x/2,n.y=e.y-n.size.y/2}}u.getCurrentPage()?.appendChild(n),n.fills=[{type:"IMAGE",image:{hash:l("7f12ea1300756f144a0fb5daaf68dbfc01103a46"),name:"Checker"},imageScaleMode:"FILL"}],p.setSelectionToSingleNode(n.guid),i.glU.showSelectionOverlayImmediately()}}),n??null}},777175:(e,r,n)=>{n.d(r,{g:()=>V});var i=n(848318),a=n(716544),o=n(445777),s=n(275570),l=n(312947),c=n(741419),d=n(39773),u=n(6819),p=n(857188),m=n(442313),h=n(185067),_=n(992444),g=n(517546),f=n(449977),E=n(207715),y=n(216986),b=n(355323),v=n(5573),T=n(217925),I=n(710628),S=n(91878),w=n(257628),A=n(199445),C=n(386502),N=n(677657),L=n(449345),O=n(987709),R=n(851771),P=n(98628),D=n(309466),M=n(622733),k=n(125498);function F(){return i.createElement(v.d,null,i.createElement(U,null))}function x(e){return c.X3B.getMagicLinkSelectionInfo().selectedDisplayAmount}function U(){let e=(0,a.wA)(),r=(0,A.RL)(w.JT.MAGIC_LINK,S.e),{start:n,stop:l,state:u,aiTrackingContext:p}=r,{close:h}=(0,C.cq)(),g=(0,i.useRef)(null),b=(0,E.ut)((0,f.aY)(),c.FAf.DESIGN);(0,i.useEffect)(()=>{u===A.qy.INITIAL&&null===g.current&&(g.current=b,(0,f.NT)(c.FAf.PROTOTYPE))},[u,b]),(0,i.useEffect)(()=>()=>{u===A.qy.INITIAL&&null!==g.current&&(0,f.NT)(g.current)},[u]);let v=(0,d.Xr)(I.d_),N=(0,d.Xr)(I.pD),L=(0,d.md)(I.pD),{selectedDisplayAmount:O,tlfAmount:F,onlyTopLevelNodesSelected:U,topLevelFrameIds:V}=c.X3B.getMagicLinkSelectionInfo(),G=!U;switch((0,i.useEffect)(()=>{if(u===A.qy.RUNNING&&G){f.tJ(V),N((0,m.tx)("magic_link.running_and_selecting_top_level_frames"));let e=setTimeout(()=>{N((0,m.tx)("magic_link.running"))},1e3);return()=>clearTimeout(e)}},[N,G,u,V]),u){case A.qy.INITIAL:return i.createElement(D.A,{action:w.JT.MAGIC_LINK,actionIcon:i.createElement(s.B,null),actionLabel:(0,m.tx)("fullscreen_actions.quick_actions.add-interactions-v2"),onPerform:()=>{g.current=null,n({})},getCustomDisabledTextFromSelectedNodes:r=>{let n,i;return F>10&&(n=(0,m.tx)("magic_link.tlf_selection_too_large"),i="Select 10 or fewer frames"),i&&e((0,y.Zh)({name:"prototype.ai_magic_link_action_instruction",params:{instruction:i,numSelectedNodes:O,numSelectedTlfs:F}})),n},getCustomSelectedNodesAmount:x,aiTrackingContext:p,instructionAction:{type:"learn_more",url:w.Xy}},(0,m.tx)("magic_link.select_a_few_top_level_frames"));case A.qy.RUNNING:return v(!1),_.Y5.triggerAction("start-magic-link"),i.createElement(M.F,{onCancel:()=>{l(),h()},aiTrackingContext:p},L);case A.qy.DONE:return i.createElement(k.h,{magicLinkOutput:r.result,aiTrackingContext:p});case A.qy.ERROR:if(_.Y5.triggerAction("end-magic-link"),r.error instanceof T.ft)return e((0,y.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"invalid_selection_from_generic_layers"}})),i.createElement(B,null);if(r.error instanceof T.sT)return e((0,y.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"no_interactions_generated"}})),i.createElement(P.u,null,(0,m.tx)("magic_link.no_interactions_generated_general"));if(r.error instanceof T._U)return e((0,y.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"no_interactions_generated_existing_interactions"}})),i.createElement(P.u,null,(0,m.tx)("magic_link.no_interactions_generated_existing_interactions"));return i.createElement(R.E,{error:r.error,aiTrackingContext:p});case A.qy.CANCELLED:return _.Y5.triggerAction("end-magic-link"),null;default:(0,o.xb)(u)}}function B(){let e=(0,h.Tv)();return i.createElement(P.u,{buttons:[{label:(0,m.t)("fullscreen.context_menu.auto_rename_layers"),onClick:()=>{(0,L.$I)({moduleToOpen:{type:"custom",module:i.createElement(O.A,{source:c.uQ6.MAGIC_LINK}),name:N.Sn.RENAME_LAYERS_TOAST,beforeModuleOpen:()=>{(0,A.cT)(w.JT.MAGIC_LINK),(0,b.Yh)(u.D.getState().mirror.appModel,w.JT.AUTO_RENAME_LAYERS)&&(0,A.Ag)(w.JT.AUTO_RENAME_LAYERS,g.Ay,{source:c.uQ6.MAGIC_LINK,overwriteNames:!1})}},trackingData:{source:"magic_link_rename_layers_suggestion_toast"}})},variant:"secondary",iconPrefix:i.createElement(l._,null),shortcuts:[{key:p.Uz.ENTER,modifier:[p.xH.META]}]}]},(0,m.tx)(1===e.length?"magic_link.rename_layer_suggestion":"magic_link.rename_layers_suggestion"))}function V(e){let r=u.D.dispatch,n=(0,b.Yh)(u.D.getState().mirror.appModel,w.JT.MAGIC_LINK);(0,L.$I)({moduleToOpen:{type:"custom",module:i.createElement(F,null),name:N.Sn.MAGIC_LINK,beforeModuleOpen:()=>{r((0,y.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"quick_actions_suggestion"}})),(0,A.B3)(w.JT.MAGIC_LINK),n&&(0,A.Ag)(w.JT.MAGIC_LINK,S.e,e)}},trackingData:{source:"prototype_magic_link_triggered"}})}},946795:(e,r,n)=>{n.d(r,{Vm:()=>d,ks:()=>u}),n(848318);var i=n(39773),a=n(896966);n(45584),n(166917);let o=(0,i.eU)({}),s=(0,i.eU)(null,(e,r,n)=>{let i=e(o);if(n.parentNodeId&&!i[n.parentNodeId]){(0,a.xi)("scene node overlay",`trying to add child overlay to ${n.parentNodeId} but parent overlay does not exist`);return}r(o,e=>({...e,[n.nodeId]:n}))}),l=(0,i.eU)(null,(e,r,n)=>{let i=e(c(n)).map(e=>e.nodeId),a=new Set([n,...i]);r(o,e=>Object.fromEntries(Object.entries(e).filter(([e])=>!a.has(e))))}),c=((0,i.eU)(e=>Object.keys(e(o)).length>0),(0,i.Iz)(e=>(0,i.eU)(r=>Object.values(r(o)).filter(({parentNodeId:r})=>r===e))));function d(e,r,n){i.zl.set(s,{nodeId:e,component:r,...n})}function u(e){i.zl.set(l,e)}function p({viewportInfo:e,overlay:r,offset:n={x:0,y:0}}){let i=useSceneSelectorDangerouslyReturningNodeObjects((e,r)=>e.get(r),r.nodeId),a=useAtomValue(c(r.nodeId));if(!i)return null;let o=i.absoluteBoundingBox,s=canvasRectToViewport(e,{x:o.x,y:o.y,width:o.w,height:o.h}),l={x:s.x+e.x+n.x,y:s.y+e.y+n.y};return React.createElement("div",{style:{position:"fixed",width:s.width,height:s.height,top:0,left:0,transform:`translate(${l.x}px, ${l.y}px)`,pointerEvents:"none",...r.overflowHidden?{overflow:"hidden"}:{}}},r.component,a.map(r=>React.createElement(p,{key:r.nodeId,viewportInfo:e,overlay:r,offset:{x:-1*l.x,y:-1*l.y}})))}(0,i.eU)(e=>Object.values(e(o)).filter(({parentNodeId:e})=>!e))},301744:(e,r,n)=>{n.d(r,{$7:()=>v,Kf:()=>w,MX:()=>E,ZT:()=>b});var i=n(848318),a=n(622876),o=n(741419),s=n(157907),l=n(654104),c=n(701780),d=n(318672),u=n(584305),p=n(455748),m=n(927813),h=n(611237),_=n(855878);function g(e){let{version:r}=(0,a.DP)();return i.createElement(f,{...e,uiVersion:r})}class f extends l.o6{constructor(){super(...arguments),this.dragging=!1,this.srgbCanvasElement=null,this.srgbCanvasRef=e=>{this.srgbCanvasElement=e,this.srgbCanvasElement&&((0,s.k)().ee_color_management_force_canvas?(0,p.dM)({canvas:this.srgbCanvasElement,canvasWidth:this.canvasWidth(),canvasHeight:this.canvasHeight(),renderCanvas:this.props.renderCanvas,value:this.props.value,colorSpace:"srgb"}):this.props.renderCanvas(this.srgbCanvasElement,this.props.value))},this.displayP3CanvasElement=null,this.displayP3CanvasRef=e=>{let r=!!(null===this.displayP3CanvasElement&&e);this.displayP3CanvasElement=e,this.displayP3CanvasElement&&(0,p.dM)({canvas:this.displayP3CanvasElement,canvasWidth:this.canvasWidth(),canvasHeight:this.canvasHeight(),renderCanvas:this.props.renderCanvas,value:this.props.value,colorSpace:"display-p3",initializeCanvasColorSpace:r})},this.barElement=null,this.barRef=e=>{this.barElement=e,e&&this.disableWeirdHorizontalScrollingPageNavigation(e)},this.handleElement=null,this.handleRef=e=>{this.handleElement=e,this.handleElement&&(this.props.renderHandle(this.props.value,this.handleElement),this.disableWeirdHorizontalScrollingPageNavigation(this.handleElement))},this.offset=new c.Mi(0,0),this.setOffset=e=>{if(null!=e){let r=e.target.getBoundingClientRect(),n=new c.Mi(r.left+r.width/2,r.top+r.height/2);this.offset=n.subtract(new c.Mi(e.clientX,e.clientY))}else null!=this.props.offset?this.offset=this.props.offset:this.offset=new c.Mi(0,0)},this.ensureInitialized=()=>{if(!this.barElement)throw Error("callback called before rendering barElement")},this.mouseToValue=e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect(),n=e.x+this.offset.x,i=e.y+this.offset.y;return n-=r.left+(this.props.handlePadding?this.props.handle/2:0),i-=r.top+(this.props.handlePadding?this.props.handle/2:0),n/=this.props.width,i/=this.props.height,n=Math.max(Math.min(n,1),0),i=Math.max(Math.min(i,1),0),new c.Mi(n,i)},this.valueToPosition=e=>{let r=e.x,n=e.y;return r*=this.props.width,n*=this.props.height,r-=this.props.handlePadding?0:this.props.handle/2,n-=this.props.handlePadding?0:this.props.handle/2,new c.Mi(r,n)},this.onPointerDown=l.Am(this,"pointerdown",e=>{e.stopPropagation(),this.dragging=!0,e.currentTarget.setPointerCapture(e.pointerId),e.currentTarget===this.handleElement?this.setOffset(e):(this.setOffset(),this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!1))},{recordMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{left:(e.clientX-r.left)/r.width,top:(e.clientY-r.top)/r.height}},playbackMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{clientX:e.left*r.width+r.left,clientY:e.top*r.height+r.top}}}),this.onPointerUp=l.Am(this,"pointerup",e=>{if(!this.dragging)return l.aH;this.dragging=!1,this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!0)},{recordMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{left:(e.clientX-r.left)/r.width,top:(e.clientY-r.top)/r.height}},playbackMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{clientX:e.left*r.width+r.left,clientY:e.top*r.height+r.top}}}),this.onPointerMove=e=>{this.dragging&&(e.stopPropagation(),this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!1))},this.onWheel=l.M5(this,"wheel",e=>{e.stopPropagation();let r=e.ctrlKey;this.props.wheelCallback?.(new c.Mi(e.deltaX,e.deltaY),e.altKey,r)},{recordMetadata:e=>({deltaX:e.deltaX,deltaY:e.deltaY,deltaMode:e.deltaMode,ctrlKey:e.ctrlKey}),playbackMetadata:e=>({deltaX:e.deltaX,deltaY:e.deltaY,deltaMode:e.deltaMode,ctrlKey:e.ctrlKey})}),this.onKeyDown=l.C0(this,"keydown",e=>{e.stopPropagation(),this.props.keyDownCallback(e)})}componentDidUpdate(e,r){super.componentDidUpdate(e,r),e.value!==this.props.value&&(this.srgbCanvasRef(this.srgbCanvasElement),this.displayP3CanvasRef(this.displayP3CanvasElement),this.handleRef(this.handleElement))}componentWillUnmount(){super.componentWillUnmount(),this.dragging=!1}disableWeirdHorizontalScrollingPageNavigation(e){e.addEventListener("wheel",e=>e.preventDefault(),{passive:!1})}canvasWidth(){return this.props.width+(this.props.handlePadding?this.props.handle:0)}canvasHeight(){return this.props.height+(this.props.handlePadding?this.props.handle:0)}render(){let e={position:"relative",boxSizing:"border-box",overflow:"hidden",width:this.props.width+(this.props.handlePadding?this.props.handle:0),height:this.props.height+(this.props.handlePadding?this.props.handle:0),borderRadius:this.props.handlePadding?.5*this.props.handle:0,...this.props.canvasWrapperStyles},r="ui3"===this.props.uiVersion?I:T,n={position:"absolute",boxShadow:`inset ${r}`,left:0,top:0,width:this.props.width+(this.props.handlePadding?this.props.handle:0),height:this.props.height?1:this.props.height+(this.props.handlePadding?this.props.handle:0),borderRadius:this.props.handlePadding?.5*this.props.handle:0,...this.props.ghostStyles},a=this.valueToPosition(this.props.value),s={position:"absolute",boxSizing:"border-box",boxShadow:r,left:a.x,top:a.y,width:this.props.handle,height:this.props.handle,borderRadius:.5*this.props.handle},l=this.props.hitBoxMargin;return i.createElement("div",{className:this.props.containerClass,style:{position:"relative"}},i.createElement("div",{ref:this.barRef,style:e},this.props.colorProfile===o.RYP.SRGB?i.createElement("canvas",{ref:this.srgbCanvasRef,width:`${this.canvasWidth()}px`,height:`${this.canvasHeight()}px`}):void 0,this.props.colorProfile===o.RYP.DISPLAY_P3?i.createElement("canvas",{ref:this.displayP3CanvasRef,width:`${this.canvasWidth()}px`,height:`${this.canvasHeight()}px`}):void 0,i.createElement("div",{style:n})),this.props.children,i.createElement("div",{ref:this.handleRef,className:_.p,onKeyDown:this.onKeyDown,onLostPointerCapture:this.onPointerUp,onMouseDown:u.dG,onPointerDown:this.onPointerDown,onPointerMove:this.onPointerMove,onPointerUp:this.onPointerUp,onWheel:this.onWheel,style:s,tabIndex:0}),i.createElement("div",{onMouseDown:u.dG,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onLostPointerCapture:this.onPointerUp,onPointerMove:this.onPointerMove,onWheel:this.onWheel,style:{position:"absolute",left:-l,top:-l,right:-l,bottom:-l}}))}}function E(e){return"ui3"===e?b:y}f.displayName="SliderControlInner";let y=12,b=16,v=4,T="0 0 0 .6px rgba(0, 0, 0, 0.2)",I="var(--elevation-200-canvas)",S=d.F;function w({hitBoxMargin:e,width:r,height:n,handlePadding:s,value:l,offset:c,mouseCallback:d,wheelCallback:u,keyDownCallback:p,renderCanvas:_,containerClass:f,recordingKey:y,canvasWrapperStyles:b,ghostStyles:T,colorProfile:I,colorHandle:w,children:A}){let{version:C}=(0,a.DP)(),N=(0,i.useCallback)((e,r)=>{let n=E(C);if(r.style.borderRadius=`${n/2}px`,r.style.borderStyle="solid",r.style.borderWidth="0.5px",r.style.borderColor="var(--color-icon-tertiary, white)",r.style.background="var(--color-bg, white)",w){r.style.borderColor="white",r.style.borderWidth=`${"ui3"===C?v:2}px`;let n=w(e);I===o.RYP.DISPLAY_P3&&(0,h.p3)()?r.style.backgroundImage=`url(${(0,m.rl)(n,I||o.RYP.SRGB)})`:r.style.background=S.format(n,(0,h.VG)(I||o.RYP.SRGB))}},[w,I,C]),L=E(C),O="ui3"===C?{outlineWidth:"1px",outlineStyle:"solid",outlineColor:"var(--color-bordertranslucent)",outlineOffset:"-1px"}:{};return i.createElement(g,{canvasWrapperStyles:{...O,...b},colorProfile:I,containerClass:f,ghostStyles:T,handle:L,handlePadding:s,height:n,hitBoxMargin:e,keyDownCallback:p,mouseCallback:d,offset:c,recordingKey:y,renderCanvas:_,renderHandle:N,value:l,wheelCallback:u,width:r},A)}},282930:(e,r,n)=>{n.d(r,{TT:()=>m,go:()=>_,oo:()=>p,ul:()=>h});var i=n(157907),a=n(6819),o=n(379338),s=n(442313),l=n(405866),c=n(503024);let d=(0,o.ck)("6a475d98f86a36f65dcb117d395ba97299936193"),u="#FADCA2",p={"set-tool-default":{assetUrl:(0,o.ck)("9b325bed1ac3574234e9c70763ecdd885da55cb7"),assetBgColor:"#FFC470",getDescription:()=>(0,s.t)("help_on_hover.select_and_move_objects")},"set-tool-scale":{assetUrl:(0,o.ck)("695d3c7532184cf5a8ef6747952a8364630231f8"),assetBgColor:"#FFC470",getDescription:()=>(0,s.t)("help_on_hover.proportionally_resize_objects")},"set-tool-frame":{assetUrl:(0,o.ck)("3c6700181ba85f0d0e79c98d4261bdaded9a10bd"),assetBgColor:"#AFBCCF",getDescription:()=>(0,s.t)("help_on_hover.draw_containers_to_hold_designs")},"set-tool-section":{assetUrl:(0,o.ck)("bda225edcdd987d7031e762b1b4d50dff769c6b0"),assetBgColor:"#AFBCCF",getDescription:()=>(0,s.t)("help_on_hover.group_related_designs_to_organize_your_canvas_for_collaborators")},"set-tool-slice":{assetUrl:(0,o.ck)("6cd822eb7d3f0ddf161a5df473f6500e08658364"),assetBgColor:"#AFBCCF",getDescription:()=>(0,s.t)("help_on_hover.export_a_specific_part_of_your_design")},"set-tool-rectangle":{assetUrl:d,assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.draw_vector_shapes_like_rectangles_circles_and_more")},"set-tool-line":{assetUrl:(0,o.ck)("8d7c470e7cfc3ad3b163d549df7119ff6e611aee"),assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.draw_lines_between_two_points")},"set-tool-arrow":{assetUrl:(0,o.ck)("1ab8ad201e6b384e4e0e1aa22c101f9eeabe369f"),assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.draw_arrows_between_two_points")},"set-tool-ellipse":{assetUrl:d,assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.draw_vector_shapes_like_rectangles_circles_and_more")},"set-tool-regular-polygon":{assetUrl:d,assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.draw_vector_shapes_like_rectangles_circles_and_more")},"set-tool-star":{assetUrl:d,assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.draw_vector_shapes_like_rectangles_circles_and_more")},place:{assetUrl:(0,o.ck)("367bd03bfb73337091cc9a6f78a192d021d666e9"),assetBgColor:u,getDescription:()=>(0,s.t)("help_on_hover.add_images_or_video_to_your_design")},"set-tool-pen":{assetUrl:(0,o.ck)("953fba23ddb40a712dc12ddef0c774814c761053"),assetBgColor:"#FFC6F2",getDescription:()=>(0,s.t)("help_on_hover.draw_vector_shapes_and_paths")},"set-tool-pencil":{assetUrl:(0,o.ck)("7788b8b59b8aac4b6e40bd999aa24fda8b9c0ce9"),assetBgColor:"#FFC6F2",getDescription:()=>(0,s.t)("help_on_hover.draw_freehand_sketches")},"set-tool-type":{assetUrl:(0,o.ck)("81cb004fdcc52a09b70f279dfecd345809b890d5"),assetBgColor:"#D5EB97",getDescription:()=>(0,s.t)("help_on_hover.add_a_text_box")},"component-insert":{assetUrl:(0,o.ck)("a013b57cf8f53dce708621e1055ba2ba05e80067"),assetBgColor:"#E9FDEF",getDescription:()=>(0,s.t)("help_on_hover.run_plugins_and_widgets_or_add_components_from_libraries")},"set-tool-hand":{assetUrl:(0,o.ck)("47b9fd427186f071f21f2c5fde49f235a255377a"),assetBgColor:"#80CAFF",getDescription:()=>(0,s.t)("help_on_hover.navigate_the_canvas")},"set-tool-comments":{assetUrl:(0,o.ck)("e5fa78c66fa8ba1a544d2b511df5dac34722a443"),assetBgColor:"#C7B9FF",getDescription:()=>(0,s.t)("help_on_hover.leave_notes_or_tag_collaborators")}},m=Object.keys(p);function h(e){return e?.kind===c.Ui.KEY&&m.includes(e.key)}function _(){return(0,i.k)().exp_help_on_hover_ff&&a.D&&a.D.getState().userFlags.in_help_on_hover_exp_treatment?[{name:"show-ui-hints-in-toolbar",get checked(){return!a.D.getState().userFlags.disabled_help_on_hover_ui_hints},callback:(e,r,n)=>{n(l.b({disabled_help_on_hover_ui_hints:!a.D.getState().userFlags.disabled_help_on_hover_ui_hints}))},flags:["design"]}]:[]}},678654:(e,r,n)=>{n.d(r,{T:()=>y});var i=n(848318),a=n(320583),o=n(376025),s=n(493554),l=n(17755),c=n(442313),d=n(775038),u=n(425966),p=n(155651),m=n(727341),h=n(179639),_=n(369600),g=n(635547),f=n(503024),E=n(551229);function y(){let e=function(e){let r=(0,s.Rs)(g.oBY,{key:e}),n=(0,u.J)();return r?.data?.file?.hasPermission&&n}((0,_.tS)()??""),r=(0,h.M)(),n=(0,m.GS)(),y=r?r.remainingGraceDays:a.Hw9,b=(0,c.t)("fullscreen.toolbar.request_sent.dev_mode_grace_period_tooltip",{numDays:y});return e?i.createElement(p.fu,{name:"Dev Mode Request Badge"},i.createElement("div",{className:l.s.ml4.h32.flex.itemsCenter.$},i.createElement(o.E,{className:l.s.minW100.if(n,l.s.py4.px8.colorBgSecondary,l.s.py8.px12.colorBgToolbarSecondary).bRadius6.itemsCenter.justifyCenter.h24.noWrap.$,htmlAttributes:{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":b,"data-tooltip-show-immediately":!0,"data-tooltip-hide-immediately":!0,"data-tooltip-show-above":!!n||void 0,"data-tooltip-show-below":!n||void 0,"data-testid":"dev_mode_request_pending_tooltip"}},i.createElement(d.E,{fontSize:11,fontWeight:"medium"},(0,c.tx)("fullscreen.toolbar.request.request_sent"))))):n?null:i.createElement(E.g,{variant:"toolbar-secondary",text:(0,c.t)("general.dev_mode")})}},164278:(e,r,n)=>{let i;var a=n(848318),o=n(716544),s=n(992277),l=n(376025),c=n(67074),d=n(157907),u=n(39773),p=n(508242),m=n(536384),h=n.n(m),_=n(20149),g=n(556079),f=n(493554),E=n(653959),y=n(654104),b=n(502255),v=n(453822),T=n(55084),I=n(166365),S=n(93600),w=n(17755),A=n(442313),C=n(594216),N=n(827971),L=n(935529);n(117652);var O=n(119699),R=n(884060),P=n(41273),D=n(667323),M=n(298934),k=n(170513),F=n(155651),x=n(727341),U=n(96321),B=n(486934),V=n(526999),G=n(776130),H=n(777288),K=n(690391),W=n(834697),z=n(474880);n(208649);var $=n(517989),Y=n(190856),j=n(369600);n(841747);var q=n(661780),X=n(635547),Z=n(24096),J=n(694253),Q=n(241917),ee=n(40754),et=n(503024),er=n(229424),en=n(60546),ei=n(21508),ea=n(173661),eo=n(723744),es=n(39191),el=n(576267),ec=n(551229),ed=n(8520),eu=n(345908),ep=n(207927),em=n(742496),eh=n(121284),e_=n(477080),eg=n(507092),ef=n(727337),eE=n(294192),ey=n(487624),eb=n(583053);let ev=(0,W.ck)(),eT="FULLSCREEN_FILENAME_CHEVRON",eI="FULLSCREEN_FILENAME_DROPDOWN",eS=(0,d.k)().eu_fpl_migration_button;class ew extends y.o6{constructor(e){super(e),this.startRenaming=y.cZ(this,"click",()=>{this.props.canRename&&this.props.user&&this.props.dispatch(D.vg())}),this.submitFileName=e=>{this.props.dispatch(D.Wk()),this.props.onRename(e)},this.cancelFileName=()=>{this.props.dispatch(D.Wk())},this.nameRef=a.createRef()}render(){let e=(0,T._C)({textRef:this.nameRef,text:this.props.name});return this.props.isRenaming?a.createElement(es.A,{className:h()(ey.a6),placeholderValue:this.props.name,submit:this.submitFileName,cancel:this.cancelFileName,recordingKey:y.Pt(this.props,"input"),maxLength:this.props.maxLength}):eS?a.createElement(l.E,{className:h()(ey.DD,{[ey.il]:!!this.props.user}),onClick:this.startRenaming,ref:this.nameRef,"aria-label":(0,A.t)("fullscreen.filename_view.file_input_title"),htmlAttributes:{"data-tooltip":e?this.props.name:void 0,"data-tooltip-type":et.Ib.TEXT,"data-testid":this.props.dataTestId||"filename"}},this.props.name):a.createElement("span",{ref:this.nameRef,"aria-label":(0,A.t)("fullscreen.filename_view.file_input_title"),className:h()(ey.DD,{[ey.il]:!!this.props.user}),"data-testid":this.props.dataTestId||"filename","data-tooltip":e?this.props.name:void 0,"data-tooltip-type":et.Ib.TEXT,dir:"auto",onClick:this.startRenaming,onKeyDown:e=>(0,H.hx)({e,onClickHandler:this.startRenaming}),role:"textbox",tabIndex:0},this.props.name)}}function eA(e){let r=(0,x.GS)();return a.createElement(ew,{...e,name:(0,B.oj)(e.repo),onRename:r=>{e.dispatch(M.NN({repo:e.repo,name:r}))},isUI3:r})}function eC(e){let r=(0,o.wA)(),n=(0,q.iZ)(),i=(0,j.q5)(),s=(0,o.d4)(e=>e.isRenaming),l=(0,u.md)(U.lu),c=!!i&&(0,eh.DF)(i,n),d=null==i&&null!=l?{type:"new-autosave-file",newAutosaveFile:l}:{type:"open-file",openFile:i,canRename:c};return a.createElement(eN,{dispatch:r,user:n,renamableFile:d,isRenaming:s,recordingKey:e.recordingKey})}function eN(e){let r,n,i;let o=(0,E.n_)(U.b_),l=(0,x.GS)(),{renamableFile:c}=e;"open-file"===c.type?(r=c.canRename,n=c.openFile?.name):(r=!0,n=c.newAutosaveFile.name,i=c.newAutosaveFile.editorType);let d="new-autosave-file"===c.type;return a.useEffect(()=>{d&&n&&i&&(0,V.hL)(n,(0,Q.wN)(i))},[d,n,i]),a.createElement(ew,{...e,name:n||(0,A.t)("fullscreen.filename_view.title_placeholder"),canRename:r,onRename:r=>{"new-autosave-file"===c.type?o({fileKey:c.newAutosaveFile.fileKey,name:r,source:U.oE.EDITOR}):c.openFile?e.dispatch(R.Nw({file:c.openFile,name:r})):(0,b.$D)(s.e.UNOWNED,Error("Tried renaming but file does not exist"))},isUI3:l,maxLength:100})}function eL({file:e}){let r=(0,o.wA)(),n=(0,k.n6)();if(!e||!(0,B.Kz)(e))return null;let i=er.e0.EDITOR_TOOLBAR_ACTION;return a.createElement("div",{className:ey._H},a.createElement(ea.a$,{branchFileKey:e.key,size:v.vj.LARGE,onClick:e=>{r(P.hx({direction:ee.Kn.TO_SOURCE,trackingContextName:i,unreadCommentCount:n}))},convertsToDotWithSmallScreen:!0,isToolbar:!0}))}ew.displayName="EditableName";let eO=e=>{let r=(0,f.Rs)(X.GgD,{repoId:e});if("loaded"!==r.status)return;let n=r.data.repo?.files;return!!n&&n.map(e=>(0,ea.AM)(e)).some(e=>e===ea.pT.IN_REVIEW||e===ea.pT.CHANGES_REQUESTED||e===ea.pT.APPROVED)};function eR({file:e,viewOnly:r}){let n=(0,f.Rs)(X.Std,{orgId:e.parentOrgId}),i=(0,f.Rs)(X.nn0,{fileKey:e.key}),s=(0,en.ks)(),l=(0,L._I)(),c=(0,O.l7)(),d="loading"===n.status||e.parentOrgId&&!e.org,u=(0,ei.Yj)(e.fileRepoId),p=e.fileRepoId?u:null,m=(0,o.wA)(),h=(0,eE.kU)({file:e,viewOnly:r}),g=r&&!h;if(!e||p?.status==="loading"||d||"loading"===i.status||g)return null;let E=!!(e.repo&&(0,B.Ns)(e,e.repo)),y=!!(0,B.Kz)(e)&&!!e.trashedAt;return s&&!l?a.createElement("div",{className:w.s.flex.itemsCenter.wFitContent.$},a.createElement(ec.g,{variant:"toolbar-secondary",text:(0,A.t)("general.dev_mode")})):a.createElement(_.P.div,{transition:{duration:.3,ease:"easeOut",delay:.2,opactity:{ease:"linear",delay:.2}},initial:{width:0,translateX:-100,opacity:0},animate:{width:"auto",translateX:0,opacity:1}},a.createElement("div",{className:w.s.flex.itemsCenter.wFitContent.$},E&&e.fileRepoId&&a.createElement(eP,{repoId:e.fileRepoId,isEditor:e.canEdit,dispatch:m,branchInfo:p}),a.createElement(a.Fragment,null,a.createElement(e_.A,null),!y&&!c&&a.createElement(eg.a,{file:e,viewPermission:h,recordingKey:"fileNamePermission"}))))}function eP(e){let r=eO(e.repoId),{branchInfo:n}=e;if(!n||"loaded"!==n.status)return null;let i=n.data.activeBranches.length;return i<1?null:a.createElement(S.L,{text:(0,A.t)("fullscreen.filename_view.branch-count",{BRANCHES:i}),onClick:()=>e.dispatch(P.o5({trackingContextName:er.e0.EDITOR_TOOLBAR_ACTION})),showIndicator:e.isEditor&&r,indicatorStyle:ey.q3})}function eD({openFile:e,user:r}){let n=(0,ef.He)(),i=function(e,r){if(!e?.project)return"";let n=e.project;return n.path?n.path:n.id===r?.personal_drafts_folder_id?(0,A.t)("fullscreen.filename_view.drafts_to_move"):(0,A.t)("fullscreen.filename_view.drafts")}(e,r),o=i.length>25?i:void 0,s=(0,x.GS)(),l=(0,ef.CR)(),d=(0,$.H)({useCurrentPlan:!0}),u=e?.project?.activeProjectResourceConnections?.[0],p=d&&!!u&&a.createElement(a.Fragment,null,a.createElement(N.W,{hostPlanName:u.hostPlanName,connectedPlanName:u.connectedPlanName,dataOnboardingKey:C.y}),a.createElement(C.f,{resourceConnection:u,projectUrl:l}));return eS?a.createElement("span",{className:i?ey.TV:ey.jw,title:o},l?a.createElement(c._,{className:ey.ub,"aria-label":i,href:l,newTab:!0},i):a.createElement("div",{className:h()(ey.ZL)},i),!s&&a.createElement(I.B,{ariaHidden:!0,svg:eb.A,className:ey.xo}),p):a.createElement("div",{className:i?ey.TV:ey.jw,title:o},a.createElement("div",{className:ey.ub,onClick:n,role:"link",tabIndex:0},i),!s&&a.createElement(I.B,{ariaHidden:!0,svg:eb.A,className:ey.xo}),p)}class eM extends y.o6{constructor(e){super(e),i=a.createRef()}renderDropdownMenu(){let{dropdownShown:e,recordingKey:r,dispatch:n}=this.props,i=!!e&&e.type===eI;return a.createElement(em.G_,{trackEvent:(e,r)=>{this.context.trackEvent(e,r)},dropdownTargetRect:e?.data?.targetRect,recordingKey:r,dispatch:n,dropdownVisible:i,activatePathOnMount:e?.data?.activatePathOnMount})}renderChevronWithDropdown(e,r){let n=a.createElement(a.Fragment,null,a.createElement(eo.c,{ariaLabel:(0,A.t)("fullscreen.filename_view.edit_file_menu"),className:e?ey.ai:ey.fN,dataOnboardingKey:eT,dataTestId:"filename-menu-chevron",dispatch:this.props.dispatch,divRef:i,dropdownKey:eI,isUI3:this.props.isUI3,rcsHandlerId:"Filename chevron clicked",recordingKey:y.Pt(this.props,"chevron"),showingDropdown:!!r&&this.showingDropdown(),svgContainerClassName:ey.Gp,tabIndex:0}),this.renderDropdownMenu());return a.createElement("div",{className:h()({[ey.Xz]:!e}),onMouseDown:e=>{let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});i?.current?.dispatchEvent(r)},onClick:e=>{e.stopPropagation()}},n)}showingDropdown(){return this.props.dropdownShown?.type===eI}render(){let{user:e,openFile:r,isRenaming:n,isUI3:o}=this.props,s=r?.repo,l=!!(r&&(0,B.Kz)(r)),c=!!(r&&s&&(0,B.Ns)(r,s)),d=!!r&&(0,eh.DF)(r,e),u=!!this.props.user&&!!r&&!!this.props.editorIsReadOnly,p=!!r&&(0,Z.Pe)(r),m=!n&&e&&r&&!p&&!this.props.isLimitedDevMode&&!this.props.hideChevron,_=!n&&e&&r&&this.props.isLimitedDevMode,f=m||_,E=!ev&&this.props.currentWorkspace&&this.props.hasMultipleWorkspaces;return a.createElement("div",{className:h()(ey.iW,{[ey.Ij]:!e}),id:"fullscreen-filename","data-onboarding-key":eu.G8,onContextMenu:e=>{if(i.current){let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});i.current.dispatchEvent(r),e.preventDefault()}}},a.createElement("div",{className:n?ey.Tt:ey.W},r?.fileRepoId&&e?.id&&a.createElement(a.Fragment,null,a.createElement(g.aY,{openFile:r,modalShown:this.props.modalShown,topLevelMode:this.props.topLevelMode,dispatch:this.props.dispatch}),a.createElement(Y.jQ,{repoId:r.fileRepoId,openFileKey:r.key,currentUserId:e.id,appMergingStatus:this.props.mergingStatus,openFileMerge:this.props.openFileMerge})),!1,E&&!o&&a.createElement("div",{className:ey.tL},a.createElement(ef.Hl,{iconClassName:ey.ht})),a.createElement(eD,{user:e,openFile:r}),!n&&l&&s&&a.createElement(el.o,{repo:s,dispatch:this.props.dispatch,trackingContextName:er.e0.EDITOR_TOOLBAR_ACTION}),c&&s?a.createElement(eA,{dispatch:this.props.dispatch,user:e,repo:s,canRename:d,isRenaming:n}):a.createElement(eC,{recordingKey:y.Pt(this.props,"fileName")}),!n&&r&&e&&a.createElement("div",{className:ey.ld},a.createElement(eL,{file:r})),!n&&r&&a.createElement(ep.s,{openFile:r}),a.createElement("div",{className:h()({[ey.Dg]:!f})},f&&this.renderChevronWithDropdown(c,r)),(0,z.MP)()&&a.createElement(ed.e,{isUI3:!1,targetKey:eT}),!n&&r&&a.createElement(eR,{file:r,viewOnly:u})))}}eM.displayName="FilenameView",eM.contextType=F.QE;let ek=(0,p.xx)(G.vp);(0,o.Ng)(function(e){let r=(0,J.getPermissionsState)(e),n=ek(r.user,r.currentUserOrgId,r.currentTeamId),i=(0,K.T)(e.progressBarState.mode)?!e.openFile?.canEdit:e.mirror?.appModel?.isReadOnly,a=!1;return a=e.plans.length>1,{editorIsReadOnly:i,isLimitedDevMode:(0,en.$A)(e.selectedView)&&!(0,L.tn)(e),openFile:e.openFile,loadingState:e.loadingState,userStateLoaded:e.userStateLoaded,dropdownShown:e.dropdownShown,isRenaming:e.isRenaming,userFlags:e.userFlags,currentWorkspace:n,hasMultipleWorkspaces:a,workspaceName:(0,G.HE)(e,n),selectedView:e.selectedView,topLevelMode:e.mirror.appModel.topLevelMode,modalShown:e.modalShown,mergingStatus:e.mergingStatus,openFileMerge:e.openFileMerge,...r}})(eM)},742496:(e,r,n)=>{n.d(r,{G_:()=>eF});var i=n(848318),a=n(716544),o=n(741419),s=n(157907),l=n(39773),c=n(430285),d=n(351766),u=n(493554),p=n(442313),m=n(186323),h=n(444731),_=n(743500),g=n(237461),f=n(448329),E=n(610023),y=n(935529),b=n(687174),v=n(884060),T=n(719006),I=n(790355),S=n(110979),w=n(531089),A=n(667323),C=n(449737),N=n(170513),L=n(155651),O=n(39386),R=n(592845),P=n(384274),D=n(727341),M=n(481540),k=n(871117),F=n(486934),x=n(890283),U=n(796251),B=n(330850),V=n(976308),G=n(713547),H=n(254310),K=n(366494),W=n(409851),z=n(92537),$=n(992444),Y=n(933270),j=n(924569),q=n(834697),X=n(773422),Z=n(710905),J=n(369600),Q=n(661780),ee=n(918105),et=n(376780),er=n(635547),en=n(618593),ei=n(694253),ea=n(778727),eo=n(7721),es=n(920963),el=n(162371),ec=n(988540),ed=n(241917),eu=n(302302),ep=n(183905),em=n(355323),eh=n(229424),e_=n(556522),eg=n(785534),ef=n(952109),eE=n(173661),ey=n(455906),eb=n(458498),ev=n(142518),eT=n(40159),eI=n(953046),eS=n(449476),ew=n(849942),eA=n(626821),eC=n(161922),eN=n(515071),eL=n(219205),eO=n(468425),eR=n(83416),eP=n(121284),eD=n(168498);let eM=(0,q.ck)();var ek=(e=>(e.DISABLED="disabled",e.PUBLISH="publish",e.SHOW_UPSELL_MODAL="show_upsell_modal",e))(ek||{});function eF({trackEvent:e,dropdownTargetRect:r,recordingKey:n,dispatch:ek,dropdownVisible:eF,activatePathOnMount:ex,leanPadding:eU}){let eB=(0,a.d4)(e=>e.mirror.appModel),eV=(0,a.d4)(e=>e.selectedView),eG=(0,a.d4)(e=>(0,ei.getPermissionsStateMemoized)(e)),eH=(0,a.d4)(e=>e.userStateLoaded),eK=(0,J.q5)(),eW=(0,a.d4)(e=>e.fileVersion),ez=(0,J.Cq)({useSinatraType:!0}),e$=(0,a.d4)(e=>e.repos),eY=(0,a.d4)(e=>e.teams),ej=(0,a.d4)(e=>e.currentUserOrgId),eq=(0,a.d4)(e=>e.currentTeamId),eX=!!(0,Q.iZ)(),eZ=(0,e_.Q)({currentOrgId:ej,currentTeamId:eq}),eJ=(0,D.GS)(),eQ=(0,eO.sO)(),e0=(0,eL.cJ)(),e1=!!((0,s.k)().ds_pubplat_sts||(0,s.k)().ds_pubplat_sts_code),e2=(0,f.g)(),e4=(0,eD.F)(),e3=(0,Z.BI)(),e7=(0,Z.m0)(),e5=(0,u.Rs)(er.dTR,{fileKey:eK?.key||""},{enabled:!!eK?.key}),e8=(0,a.d4)(ea.fA),e9=(0,l.md)(ea.p9);(0,X.SR)();let e6=(0,u.Rs)(er.iY3,{branchFileKey:eK?.key||""},{enabled:!!eK}),te=(0,O.JT)(),tt=i.useMemo(()=>{if(eK&&"loaded"===eZ.status)return(0,W.T0)(eZ.data,eK.key)},[eK,eZ]),tr=(0,a.d4)(ea.F9),tn=(0,a.d4)(e=>e.mirror.appModel.topLevelMode),ti=(0,eI.Lu)(eK,tr),ta=(0,eI.jT)(eK,tr),to=(0,H.MF)({oldValue:c.Qw.useMemoizedLoaded(ti),newValue:ta,label:H.A5.FilenameViewDropdown.canViewFileAnalytics,enableFullRead:(0,G.DQ)(G.Pw.GROUP_1)}).data,ts=(0,U.$n)(),tl=(0,N.n6)(),tc=(0,P.kD)(),td=(0,P.J3)(),tu=(0,P.JU)(td),tp=td===P.kN.FILE_IN_DRAFTS,tm=(0,g.pH)(eK?.key??null,{enabled:!!eK}),th=(0,g.GI)("filename-context-menu"),t_=o.Ez5.uiState().isRecovery.getCopy(),tg=i.useMemo(()=>e9?e8?"publish":"show_upsell_modal":"disabled",[e8,e9]),tf=(0,Y.R6)(),{colorProfilePreference:tE}=(0,j.jK)(),ty=(0,j.hP)(tE),tb=(0,eg.S)(),tv=R.h.useTrackingContext({trigger:es.b.FILE_DUPLICATE}),tT=!1,tI=!1,tS=!1,tw=null;"loaded"===e5.status&&(tT=!!e5.data?.file?.canTrash&&!!(0,d.oA)(e5.data?.file?.canTrash),tI=!!(0,d.oA)(e5.data?.file?.canMove),tS=!!(e5.data.file&&(0,k._R)(e5.data.file.editorType??et._Y.DESIGN,e5.data.file.currentPlanUser)),tw=(0,d.oA)(e5.data?.file?.canMoveWithReasons)||null);let tA=(0,m.R)(),tC=(0,eo.jB)({files:[{editor_type:eK?.editorType??null,folder_id:eK?.project?.id??null}],repos:[],destinationFolderId:eK?.project?.id??null,isDestinationDrafts:!1}),tN=(0,eo.Cp)(tC.destinationPlan?.key.parentId||null,tC.licenseType),tL=(0,y.xo)(),tO=tI,tR=!!tA&&(0,eo.Px)(tC),tP=tL||tR,tD=eG.user,tM=(0,eP.DF)(eK,tD),tk=te&&te.profile.entityType===eu.o1.TEAM,tF=!!tD&&tT&&!tk,tU=i.useCallback(()=>({canMove:!!tO,isUserViewerRestricted:!!tS,planUser:e5.data?.file?.currentPlanUser??null,inDrafts:!!e5.data?.file?.isDraftFile,isBillingRemodelEnabled:tA,draftsMoveData:tC,hasConnectedPlanUserInOrg:tN,canMoveWithReasons:tw||void 0}),[tO,tC,e5.data?.file?.currentPlanUser,e5.data?.file?.isDraftFile,tN,tA,tS,tw]);i.useEffect(()=>{e7&&(e7._move_to_project=()=>{tO&&!tP&&(0,eP.RG)(ek,eK,e$,tU())()}),e3?.updateFilePermissionV2?.(tM,tO&&!tP,tF)},[tM,tO,tF,tP,ek,e3,e7,eK,tU,e$]);let tB=function(){let e=(0,J.q5)(),r=(0,a.wA)(),n=(0,a.d4)(e=>(0,ei.getPermissionsStateMemoized)(e)),i=(0,a.d4)(ea.F9),o=(0,u.Rs)(er.iY3,{branchFileKey:e?.key||""},{enabled:!!e}),s=(0,E.c$)(e?.key||""),l=s.data?.map(e=>e.id)??[],c=(0,a.d4)(e=>e.selectedView),d=o.data?.file?.project,m=d&&e?.editorType&&(0,en.d6)(d,e.editorType),h=e?.project,_=c.editorType!==ed.nT.Whiteboard,g=!!(e&&_&&(0,F.Kz)(e));return{duplicateFile:()=>{if(!e)return;r(I.oB());let a=(0,q.xp)(e,e.project,n);if(a){r(C.to({type:eN.DV,data:{team:a,resource:ec.vL.FILE,action:ep.ZN.DUPLICATE_FILES,editorType:e?.editorType||et._Y.DESIGN,currentPlan:V.F.Plan.STARTER,upsellPlan:V.F.Plan.PRO,upsellSource:es.b.FILE_DUPLICATE}}));return}$.Y5.dispatchIfSaved(v.YW({file:e,checkOssSalesExperiment:i,cmsCollectionIds:l}))},duplicateDisplayText:h&&m?g?(0,p.t)("fullscreen.filename_view.duplicate-as-new"):(0,p.t)("fullscreen.filename_view.duplicate"):(0,p.t)("fullscreen.filename_view.duplicate-to-drafts")}}();if(!eK||!eF)return null;let tV=eV.editorType,tG=tV!==ed.nT.Whiteboard,tH=!!(tG&&(0,F.Kz)(eK)),tK="loaded"===eZ.status&&(0,W.gV)(eZ.data,ej),tW="loaded"===e6.status&&(null===e6.data.file||e6.data.file&&(0,eE.AM)(e6.data.file)===eE.pT.MERGED),tz=tH&&("loaded"!==e6.status||tW),t$=!eK.canExport,tY=(0,ei.isFileFigjamDisabled)(eK,eG)||tV===ed.nT.Slides&&(0,d.oA)(eK.org?.isSlidesDisabled)||tV===ed.nT.Sites&&!!eK.org?.isSitesDisabled||tV===ed.nT.Cooper&&!!eK.org?.isCooperDisabled||(0,ei.isOrgUserExternallyRestrictedFromState)(eG)||t$,tj=tD&&eK.canManage,tq=!!(tH&&eK.trashedAt),tX=tq&&!tz,tZ=!!tt,tJ=eK.project,tQ=null;tJ&&""!==tJ.path&&(tQ=tJ);let t0=eK.folderId===tD?.personal_drafts_folder_id,t1=eK.canEdit&&!!eK.thumbnailGuid,t2=eZ.data?.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[],t4=eZ.data?.currentUser?.userSidebarSections!=null?(0,d.oA)(eZ.data.currentUser.userSidebarSections):null,t3=(0,W.t$)(t4??[],t2),t7=t3.find(e=>e.id===tt?.resource.sidebarSectionId),t5=()=>{let e=[];return 0===t3.length&&e.push({recordingKey:"favorite-custom",displayText:(0,p.t)("sidebar.starred"),isChecked:!1,callback:()=>re(!1)}),t3.map(r=>{e.push({recordingKey:"favorite-custom",displayText:""===r.name?(0,p.t)("sidebar.starred"):r.name,isChecked:!!t7&&t7.id===r.id,callback:()=>re(!!t7&&t7.id===r.id,r.id)})}),e},t8=()=>{if("loaded"!==tm.status||!tm.data)return[];let{canPinFileToWorkspace:e,canEditPin:r,existingFilePinId:n,workspaceHasMaxPins:i}=tm.data;return e?[{displayText:(0,p.t)("tile.dropdown.pin_to_workspace"),callback:()=>th(eK.key,i)}]:r?[{displayText:(0,p.t)("tile.dropdown.edit_workspace_pin"),callback:()=>rt(n)},{displayText:(0,p.t)("tile.dropdown.remove_workspace_pin"),callback:()=>rr(n)}]:[]},t9=()=>{ek(C.to({type:eS.dD,data:{entrypoint:ew.RR.FILENAME_VIEW_DROPDOWN}}))},t6=()=>{let e=eK.teamId&&eY[eK.teamId];ek(C.to({type:eA.$3,data:{afterFileMove:t9,team:e||null}}))},re=(e,r)=>{if(!ez)return;let n={entrypoint:"editor",favoriteId:tt?.resource.id,sectionId:r,file:ee.F.toLiveGraph(ez),fileBrowserEntryPoint:!1};e?ek(b.qP(n)):ek(b.Fb(n))},rt=e=>{ek(C.to({type:(0,h.l)(),data:{pinnedFileId:e}}))},rr=e=>{ek(C.to({type:(0,_.I)(),data:{pinnedFileId:e}}))},rn=!eM&&eV.editorType===ed.nT.Design&&eK.canEdit,ri=(0,eb.jv)((0,x.t)(ts,eh.e0.EDITOR_TOOLBAR,tn),{appModel:eB,selectedView:eV}),ra=(0,eb.jv)((0,x.m)(ts,eh.e0.EDITOR_TOOLBAR,tn,tl),{appModel:eB,selectedView:eV}),ro=(()=>{if(eM||!eX)return[];let e=[];return tb&&!t0&&((!tK||tZ)&&e.push({displayText:tZ?(0,p.t)("favorited_resources.indicate_section_prefix")+": "+(t7&&""!==t7.name?t7.name:(0,p.t)("sidebar.starred")):(0,p.t)("favorited_resources.add_to_sidebar"),children:t5()}),tZ&&e.push({recordingKey:"favorite-custom-remove",displayText:(0,p.t)("favorited_resources.remove_from_sidebar"),callback:()=>re(!0,t7?.id)})),e.push(...t8()),e})(),rs=(e,r)=>e?r:[],rl=[...ra,...rs(tH,ri),{separator:!0,displayText:""},...rs(eX&&!eM&&!t_,[{disabled:!(0,em.Yh)(eB,"enter-history-mode"),recordingKey:"toggleVersionHistory",displayText:(0,ev.Ah)(eB.activeCanvasEditModeType)?(0,p.t)("fullscreen.filename_view.version-history-hide"):(0,p.t)("fullscreen.filename_view.version-history-show"),callback:()=>{ek(I.oB()),(0,ev.Ah)(eB.activeCanvasEditModeType)?ek((0,el.Eg)()):ek((0,el._b)({source:eh.e0.EDITOR_TOOLBAR}))}}]),...rs(!!tc,[(0,ey.rC)({dispatch:ek,fileKey:tc?.fileKey||"",templateName:tc?.name||""})]),...rs(tu,[(0,ey.we)({dispatch:ek,file:{key:eK.key,name:eK.name,folder_id:eK.folderId,team_id:eK.teamId,editor_type:eK.editorType,parent_org_id:eK.parentOrgId},fileNeedsMovingBeforePublish:tp,isPublished:!!tc,source:"filename-context-menu"})]),...rs(eX&&!eM&&!(tG&&tH)&&tV!==ed.nT.Whiteboard&&!e2&&!eQ&&(!e0||e1),[{disabled:"disabled"===tg,recordingKey:"publishVersion",displayText:(0,p.t)("fullscreen.filename_view.publish-styles-and-components"),callback:()=>{"show_upsell_modal"===tg?t6():"publish"===tg&&t9()}}]),...rs(!!to,[{recordingKey:"viewFileAnalytics",displayText:(0,p.t)("fullscreen.filename_view.file_analytics"),callback:()=>{ek((0,C.to)({type:eT.e,data:{fileKey:eK.key,entrypoint:K.F.FileView}}))}}]),...rs(tG&&!eQ&&!e0&&!t_,[{disabled:!tD,recordingKey:"exportSelectedExportables",displayText:(0,p.t)("fullscreen.filename_view.export"),shortcut:eB.keyboardShortcuts&&(0,em.c1)(eB.keyboardShortcuts,"export-selected-exportables"),callback:()=>{$.Y5.triggerAction("export-selected-exportables",{source:"toolbar"})}}]),...rs(e4&&eK.canEdit,[{disabled:!tD,recordingKey:"copyToFigmaSlides",displayText:(0,p.t)("slides.general.copy_current_page_to_figma_slides"),callback:()=>{(0,M.Cu)({name:"slides_file_dropdown_entrypoint"}),(0,eR.fx)(eK,eW).then(e=>{(0,eR.PF)(ek,e)})}}]),...rs(ro.length>0,[{separator:!0,displayText:""},...ro]),{separator:!0,displayText:""},...rs(!tH,ri),{separator:!0,displayText:""},...rs(rn,[(0,B.o)(tf,ty)]),{separator:!0,displayText:""},...rs(eX&&!eM&&!t0,[{disabled:!eH||tY,recordingKey:"duplicate",displayText:tB.duplicateDisplayText,callback:tB.duplicateFile}]),...rs(eX&&!tq,[{disabled:!tM,recordingKey:"rename",displayText:tH?(0,p.t)("fullscreen.filename_view.rename-branch"):(0,p.t)("fullscreen.filename_view.rename"),callback:()=>{ek(I.oB()),ek(A.vg())}}]),...rs(eX&&!eM&&tX,[{disabled:!tj,displayText:"Restore",callback:()=>{ek(I.oB()),ez&&ek(T.R({fileKeys:{[eK.key]:ez},userInitiated:!0}))}}]),...rs(eX&&!eM&&!!tQ,[{disabled:!1,displayText:(0,p.t)("fullscreen.filename_view.go_to_project"),callback:()=>{if(tQ){let e=(0,z.cU)(tQ.id,tQ.orgId??null,tQ.teamId,eG);ek(S.V3({url:e}))}}}]),...rs(eX&&!eM&&!tH,[{disabled:tP,sideText:tA?(0,eo.zS)(tC,tP,tN):void 0,rightJustifySideText:!0,recordingKey:"moveToProject","data-onboarding-key":"FILENAME_VIEW_MOVE_TO_PROJECT",displayText:(0,p.t)("fullscreen.filename_view.move_file"),callback:(0,eP.RG)(ek,eK,e$,tU())}]),...rs(!tb&&(tZ||!tK)&&!t0,[{recordingKey:"favorite",displayText:tZ?(0,p.t)("fullscreen.filename_view.unfavorite_label"):(0,p.t)("fullscreen.filename_view.favorite_label"),callback:()=>re(!!tZ)}]),...rs(eX&&!eM&&!tq&&!t0&&tT,[{disabled:!tF,recordingKey:"delete",displayText:tH?(0,p.t)("fullscreen.filename_view.archive-branch"):(0,p.t)("fullscreen.filename_view.move_to_trash"),callback:tH?()=>{ek(I.oB()),ez&&(ek(v.VK({fileKeys:{[eK.key]:ez},userInitiated:!0})),e("Branch Archived",{fileKey:eK.key,fileRepoId:eK.fileRepoId}))}:()=>{if(ek(I.oB()),!eK||!ez)return;let e=(0,F.up)(eK,e$);e&&(0,F.SA)(eK,e)?eK.repo?.canEdit&&!e.trashed_at&&ek(w.U1({filesByKey:{},reposById:{[e.id]:{repo:e,main_file:ez}}})):tF&&ek(w.U1({filesByKey:{[eK.key]:ez}}))}}]),...rs(eX&&!eM&&tq,[{disabled:!tj,displayText:(0,p.t)("fullscreen.filename_view.delete-branch"),callback:()=>{ek(I.oB()),ek(C.to({type:ef.e,data:{fileName:eK.name,onConfirm:()=>ek(w.kj({fileKeys:{[eK.key]:!0},userInitiated:!0}))}}))}}]),...rs(!!t1,[{separator:!0,displayText:""},{recordingKey:"resetFileThumbnail",displayText:(0,s.k)().dse_library_pg_thumbnails?(0,p.t)("fullscreen.filename_view.restore_default_file_thumbnail"):(0,p.t)("fullscreen.filename_view.restore_default_thumbnail"),callback:()=>{ek(v.$m({file_key:eK.key,thumbnail_guid:null}))}}])];return i.createElement(L.fu,{name:eh.e0.EDITOR_FILENAME_DROPDOWN,properties:{...tv,slideConversionDropdownEntrypoint:e4}},i.createElement(eC.j,{activatePathOnMount:ex,allowCodegenOptions:eV.editorType===ed.nT.Design,dispatch:ek,items:rl,lean:eJ?"right":void 0,leanPadding:eU,onSelectItem:e=>{e.callback&&e.callback("",{},ek)},parentRect:r,recordingKey:n,shouldUsePortal:eJ,showPoint:!eJ}))}},121284:(e,r,n)=>{n.d(r,{DF:()=>d,Qy:()=>p,RG:()=>u});var i=n(95650),a=n(496431),o=n(790355),s=n(486934),l=n(997894),c=n(665539);function d(e,r){return!!e&&!!r&&(e.creatorId===r.id&&(0,i.A)(e.createdAt).add(30,"s").isAfter((0,i.A)())||e.canEdit)}function u(e,r,n,i){return()=>{if(e(o.oB()),!r)return;let l=(0,s.up)(r,n);(0,a.h)({key:r.key,name:r.name,folder_id:r.folderId,team_id:r.teamId,editor_type:r.editorType,is_team_template:!!r.template&&!r.template.unpublishedAt,is_published_site:r.isPublishedSite,parent_org_id:r.parentOrgId},l,e,void 0,{},void 0,!1,i)}}function p(e){return!e.parentOrgId&&!e.teamId}l.M4.Query({fetch:async e=>{if(!e)return null;let r=await c.L.getFileCanRequestEdit({fileKey:e});return!!r.data.meta?.can_request_edit},key:"fileCanRequestEdit"})},294192:(e,r,n)=>{n.d(r,{$5:()=>K,Kw:()=>W,Xo:()=>$,kU:()=>z,oH:()=>Y});var i=n(848318),a=n(716544),o=n(992277),s=n(741419),l=n(157907),c=n(579020),d=n(493554),u=n(195507),p=n(502255),m=n(473889),h=n(442313),_=n(320409),g=n(186323),f=n(936231),E=n(155651),y=n(727341),b=n(871117),v=n(710905);n(369600);var T=n(841747),I=n(860606),S=n(661780),w=n(376780),A=n(635547),C=n(746948),N=n(928001),L=n(24096),O=n(422010),R=n(263144),P=n(503024),D=n(177570),M=n(229424),k=n(60546),F=n(283661),x=n(74804),U=n(843898),B=n(922292),V=n(72178),G=n(551229),H=n(98782);let K="edit_button_upgrading_to_edit";var W=(e=>(e.EDIT_BUTTON_LOADING="editButtonLoading",e.EDIT_BUTTON="editButton",e.PRO_REQUEST_UPGRADE="proRequestUpgrade",e.ORG_REQUEST_UPGRADE="orgRequestUpgrade",e.REQUEST_EDIT_VIEW="requestEditView",e.PENDING_UPGRADE_REQUEST="pendingUpgradeRequest",e.VIEW_ONLY="viewOnly",e.PLAN_REQUEST_UPGRADE="planRequestUpgrade",e.PENDING_EDIT_ROLE_REQUEST="pendingEditRoleRequest",e))(W||{});function z(e){let r=e.file,n=(0,a.d4)(e=>e.loadingState),s=(0,a.d4)(e=>e.teams),m=(0,S.iZ)(),_=(0,i.useMemo)(()=>!!r&&(0,L.Pe)(r),[r]),E=(0,a.d4)(({openFile:e})=>e?.org?.name),y=(0,I.E)(),P=r.canEdit,M=(0,T.sj)(r),F=r.editorType===w._Y.SLIDES&&!!(0,u.oA)(r.org?.isSlidesDisabled),x=r.editorType===w._Y.SITES&&!!r.org?.isSitesDisabled,B=r.editorType===w._Y.COOPER&&!!r.org?.isCooperDisabled,V=M||F||x||B,G=(0,k.ks)(),H=r.canAccessFullDevMode,W=(0,g.R)({preferOpenFilePlan:!0}),{handleUpgrade:z,getUpgradeEligibility:$,getPendingRequest:Y,getUpgradePathway:j,getIsUpgradeHandlerLoading:q,getHasProvisionalAccess:X}=(0,O.wH)(),Z=(0,d.Rs)(A.OiG,{fileKey:r.key,orgId:r.parentOrgId}),J=(0,i.useCallback)(()=>{let e={file_key:r.key,link_access:r.linkAccess};r.parentOrgId?(e.account_type=r.currentPartialOrgUser?.designPaidStatus,e.parent_org_id=r.parentOrgId):r.teamId&&(e.team_id=r.teamId),(0,c.sx)("Edit Button Events",{edit_button_event:"click",...e})},[r]),Q=(0,v.BI)();if("loading"===Z.status)return{type:"editButtonLoading"};if("loaded"===Z.status){let i=r.org?.inviteWhitelist?.guestInviteSetting===R.Gv.REQUIRE_APPROVAL&&!!Z.data.orgJoinRequest,a=Z.data.file?.fileRoleRequests.find(e=>e.requesterUserId===m?.id);Q?.updateHasPendingEditRequest&&Q.updateHasPendingEditRequest(!!a);let c=(0,h.t)("fullscreen.toolbar.pending-org-join-request-tooltip",{orgName:E||""}),d=(0,h.t)("fullscreen.toolbar.pending-edit-request-tooltip"),u=i?c:a?d:void 0,g=r.editorType===w._Y.DESIGN?r.currentPartialOrgUser?.designAccountTypeRequest:r.currentPartialOrgUser?.whiteboardAccountTypeRequest,v=r.editorType===w._Y.DESIGN?r.currentTeamUser?.designAccountTypeRequest:r.currentTeamUser?.whiteboardAccountTypeRequest,T=g?.status==="pending",I=v?.status==="pending",S=T?g:I?v:null,A=(0,C.V1)(Z.data.file?.currentPrivilegedOrgUser??null),L=A?{...A,license_group_member:A.license_group_member?{license_group_id:A.license_group_member.licenseGroupId}:void 0}:null;if(W){if(null===r.editorType)return null;if(q())return{type:"editButtonLoading"};let e=(0,b.wR)(r.editorType),n=X(e),s=$(e,P);if(!Z.data.file?.currentPlanUser){if(i)return{type:"viewOnly",isRestrictedView:_,isDisabledView:V,pendingToolTipMessage:c,hasPendingRequest:i};if(Z.data.file?.mustRequestEditorRoleToEdit)return{type:"requestEditView",fileKey:r.key,isDevMode:G};if((0,l.k)().campfire_pending_edit_role_request&&a)return{type:"pendingEditRoleRequest",pendingToolTipMessage:d}}switch(s){case D.q.CAN_UPGRADE:let g=j(e);return{type:"planRequestUpgrade",upgrade:z({afterUpgradeCallback:()=>{},licenseType:e,upgradeReason:U.i.EDIT_BUTTON,entryPoint:f.tc.ASK_TO_EDIT}),upgradePathway:g,fileKey:r.key,planType:r.parentOrgId?w.OL.ORG:w.OL.TEAM,planId:r.parentOrgId??r.teamId,licenseType:e};case D.q.CANNOT_UPGRADE:case D.q.UPGRADE_NOT_NEEDED:let E=Y(e);if(E&&!n)return{type:"pendingUpgradeRequest",pendingUpgradeRequest:E,editorType:r.editorType,isRestrictedView:_,isDisabledView:M,pendingToolTipMessage:u,orgId:r.parentOrgId,hasPendingRequest:!0};if(Z.data.file?.mustRequestEditorRoleToEdit)return m||(0,p.$D)(o.e.MONETIZATION_EXPANSION,Error("[Monetization Expansion] User is not logged in when mustRequestEditorRoleToEdit is true")),{type:"requestEditView",fileKey:r.key,isDevMode:G};if(a)return{type:"pendingEditRoleRequest",pendingToolTipMessage:n?(0,h.t)("fullscreen.toolbar.we_ve_sent_your_request_to_the_file_s_owner_you_can_edit_other_files_up_to_3_days_while_admins_review_your_request"):(0,h.t)("fullscreen.toolbar.we_ve_sent_your_request_to_the_file_s_owner_you_can_create_and_edit_other_files_in_the_meantime")};if(P)break;return{type:"viewOnly",isRestrictedView:_,isDisabledView:V,pendingToolTipMessage:u,hasPendingRequest:!1}}}else{if(!i&&(0,N.VP)(n,K))return{type:"editButtonLoading"};if(Z.data.file?.canClickButtonToUpgradeAndEdit)return{type:"editButton",upgrade:async()=>{await y(r,K),J()}};if(Z.data.file?.mustRequestAccountUpgradeToEdit){if(r.org)return null===r.editorType?null:G&&P&&!H?null:{type:"orgRequestUpgrade",editorType:r.editorType,fileKey:r.key,orgUser:L,orgId:r.parentOrgId,isDevMode:G};{let n=r.teamId&&s[r.teamId];if(n)return{type:"proRequestUpgrade",file:e.file,team:n,isDevMode:G}}}else if(Z.data.file?.mustRequestEditorRoleToEdit)return m||(0,p.$D)(o.e.MONETIZATION_EXPANSION,Error("[Monetization Expansion] User is not logged in when mustRequestEditorRoleToEdit is true")),{type:"requestEditView",fileKey:r.key,isDevMode:G};else if(Z.data.file?.canEditCanvas||Z.data.file?.canEditToUpgrade)return null;else if(S&&!G)return null===r.editorType?null:{type:"pendingUpgradeRequest",pendingUpgradeRequest:S,editorType:r.editorType,isRestrictedView:_,isDisabledView:M,pendingToolTipMessage:u,orgId:r.parentOrgId,hasPendingRequest:!0};return{type:"viewOnly",isRestrictedView:_,isDisabledView:V,pendingToolTipMessage:u,hasPendingRequest:!!(T||I||a||i)}}}return null}function $({viewPermission:e,variant:r,recordingKey:n,hideViewOnlyText:a,disableAutoAppearingTooltips:o}){let s=(0,y.GS)();switch(e.type){case"editButtonLoading":return i.createElement("div",{className:H.Hg},i.createElement(_.$,{"aria-label":(0,h.t)("fullscreen.toolbar.edit-file-button-loading-aria-label"),disabled:!0,variant:r,recordingKey:n,width:s?"fill-parent":void 0},i.createElement("span",{className:H.yx},(0,h.t)("fullscreen.toolbar.edit-file-button")),i.createElement(m.kt,{className:H.yU})));case"editButton":{let a={"data-tooltip":(0,h.t)("fullscreen.toolbar.edit-file-button-hover-tooltip"),"data-tooltip-show-immediately":!0,"data-tooltip-type":P.Ib.TEXT,"data-tooltip-max-width":500,"data-tooltip-offset-y":5};return i.createElement(E.fu,{name:M.e0.FILE_EDIT_BUTTON},i.createElement("div",{"data-onboarding-key":"edit-button-onboarding"},i.createElement(_.$,{variant:r,onClick:e.upgrade,recordingKey:n,width:s?"fill-parent":void 0,...a},(0,h.t)("fullscreen.toolbar.edit-file-button"))))}case"requestEditView":return i.createElement(F.N,{fileKey:e.fileKey,isDevMode:e.isDevMode,buttonVariant:r,recordingKey:n});case"orgRequestUpgrade":return i.createElement(E.fu,{name:M.e0.FILE_ORG_REQUEST_UPGRADE_BUTTON,properties:{isDevMode:e.isDevMode,buttonVariant:r,orgId:e.orgId}},i.createElement(x.R7,{fig_file_key:e.fileKey,orgUser:e.orgUser,orgId:e.orgId,editorType:e.editorType,variant:r,recordingKey:n}));case"proRequestUpgrade":return i.createElement(E.fu,{name:M.e0.FILE_PRO_REQUEST_UPGRADE_BUTTON,properties:{isDevMode:e.isDevMode,buttonVariant:r,teamId:e.team.id}},i.createElement(x.sG,{file:e.file,team:e.team,entryPoint:f.tc.EDIT_FILE,variant:r,recordingKey:n}));case"pendingUpgradeRequest":{if("dltBannerViewPermission"===n&&!s)return i.createElement(G.h,{isRestrictedView:e.isRestrictedView,isDisabledView:e.isDisabledView,hasPendingRequest:e.hasPendingRequest,variant:r,hideViewOnlyText:a});let l={...e,variant:r,hideViewOnlyText:a,disableAutoAppearingTooltips:o};return i.createElement(V.K,{...l})}case"viewOnly":return i.createElement(G.h,{isRestrictedView:e.isRestrictedView,isDisabledView:e.isDisabledView,pendingToolTipMessage:e.pendingToolTipMessage,hasPendingRequest:e.hasPendingRequest,variant:r,hideViewOnlyText:a});case"planRequestUpgrade":return i.createElement(x.In,{onClick:e.upgrade,variant:r,upgradePathway:e.upgradePathway,fileKey:e.fileKey,planType:e.planType,planId:e.planId,licenseType:e.licenseType});case"pendingEditRoleRequest":return i.createElement(B.m,{variant:r,pendingToolTipMessage:e.pendingToolTipMessage})}}function Y(){return(0,a.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.isRecoveryMode&&s.Ez5.uiState().isRecovery.getCopy())}},518061:(e,r,n)=>{n.d(r,{R:()=>i});let i=(0,n(39773).eU)(!1)},733166:(e,r,n)=>{n.d(r,{Cv:()=>eA});var i=n(848318),a=n(716544),o=n(707387),s=n(846153),l=n(741419),c=n(157907),d=n(39773),u=n(536384),p=n.n(u),m=n(277930),h=n(818754),_=n(141039),g=n(44509),f=n(541525),E=n(397579),y=n(857188),b=n(209075),v=n(981798),T=n(889132),I=n(870701),S=n(266163),w=n(145015),A=n(282424),C=n(575492),N=n(566699),L=n(17755),O=n(442313),R=n(33209),P=n(117652),D=n(790355),M=n(110979),k=n(667323),F=n(405866),x=n(584305),U=n(257489),B=n(727341),V=n(366651),G=n(777288),H=n(474880),K=n(872340),W=n(369600),z=n(67919),$=n(169320),Y=n(216986),j=n(804072),q=n(401194),X=n(527342),Z=n(503024),J=n(797465),Q=n(209469),ee=n(150084),et=n(51817),er=n(159377),en=n(723744),ei=n(205397),ea=n(491724),eo=n(27776),es=n(244405);let el=(0,h.hG)(eo.rJv);function ec(){let e=(0,T.Av)();return window.innerHeight-e-22}var ed=(e=>(e.VOICE="voice",e))(ed||{});let eu={voice:es.OB};function ep(e){let r=e.pointingDropdownStyleVariant&&eu[e.pointingDropdownStyleVariant],n=p()(es.qN,r),a=ec();return i.createElement(ei.Cf,{className:n,targetRect:e.targetRect,maxHeight:a,maxWidth:el,onKeyDown:e.onKeyDown,lean:"left",disableDropdownScrollContainer:!0,propagateCloseClick:!0},i.createElement("div",{className:es.pr},e.children))}var em=n(890450),eh=n(36789),e_=n(65445),eg=n(508195);function ef(){let e=(0,a.wA)(),[r,n]=i.useState(),o=i.useCallback(e=>{n(e.target.value)},[]),s=i.useCallback(n=>{n.preventDefault(),n.stopPropagation(),r&&r.trim().length>0&&e(eg.cq({name:r})),e(D.oB())},[e,r]);return i.createElement("div",{className:"nickname_dropdown--nicknameDropdownContent--DKhRa",onClick:e=>e.stopPropagation()},i.createElement("form",{onSubmit:s},i.createElement(w.ks,{autoFocus:!0,maxLength:170,className:"nickname_dropdown--nicknameInput--bKp78",placeholder:(0,O.t)("fullscreen.toolbar.multiplayer.enter_a_name"),value:r,onChange:o})))}var eE=n(301802),ey=n(979173),eb=n(574786),ev=n(586892),eT=n(821527);let eI="multiplayer-nickname-dropdown",eS=(0,H.ck)(),ew=(0,h.jz)(eo.rJv);function eA(e){let r=(0,W.q5)(),{user:n,multiplayer:o,dropdownShown:s}=e,c=(0,a.wA)(),d=(0,a.d4)(e=>"prototype"===e.selectedView.view),u=(0,z.dR)(),p=(0,z.Ww)(),m=(0,b.B4)(),h=i.useCallback(e=>{!function(e,r,n,i,a,o,s){if(!a)return;let c=e.sessionID,d=c===r,u=o&&o.sessionID===r;if(d&&u)s();else if(i){let r=a.observingSessionID===c||a.sessionID===c?-1:e.sessionID,i=-1!==a.observingSessionID,o=a.observingSessionID!==c&&a.sessionID!==c;i&&n((0,Y._P)({name:"Prototype Observation Ended",params:{multiplayerObservingSessionID:a.observingSessionID,multiplayerSessionID:a.sessionID}})),o&&(n((0,Y._P)({name:"Prototype Observation Started",params:{multiplayerObservingSessionID:c,multiplayerSessionID:a.sessionID}})),n(F.b({aware_of_observation_mode:!0}))),n(k.J4({...a,observingSessionID:r}))}else l.h3O.observeUser(c),a.observingSessionID!==c&&a.sessionID!==c&&n(F.b({aware_of_observation_mode:!0}))}(e,p?.sessionID,c,d,o,u,m)},[p?.sessionID,c,d,o,u,m]),_=d?null:r;return n?i.createElement(i.Fragment,null,!eS&&_&&n&&i.createElement(em.k,{fileKey:_.key}),i.createElement(eC,{dropdownShown:s,multiplayer:o,user:n,editingFile:_,onUserClick:h})):i.createElement(i.Fragment,null,!eS&&_&&n&&i.createElement(em.k,{fileKey:_.key}),i.createElement(eD,{dropdownShown:s,multiplayer:o,user:n,editingFile:_,onUserClick:h}))}function eC(e){let{multiplayer:r,user:n,onUserClick:a,dropdownShown:o,editingFile:s}=e,l=(0,i.useMemo)(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]);(0,i.useEffect)(()=>{},[r,n]);let c=(0,U.DG)(s?.key||"").enabled;return i.createElement("div",{className:eb.Wh},i.createElement(ey.sK,null),l&&i.createElement(eP,{dropdownShown:o,multiplayer:r,currentUser:l,onUserClick:a}),s&&i.createElement(ea.w,{user:n,editingFile:s,isFileInWorkshop:c}))}function eN(e){let{query:r,usersToSearch:n}=e,[a,o]=i.useState(n),s=i.useRef(!1),l=(0,f.am)(),c=i.useRef(!1),d=c.current,u=i.useCallback(async e=>{if(""===e)o(n);else{s.current=!1;let r=await (0,eE.n)(e,n);s.current||(o(r.map(e=>e.item)),d||(l("Multiplayer Tools User Search",{otherUserSessionsCount:n.length}),c.current=!0))}},[d,l,n]),p=(0,m.A)(u,200);return i.useEffect(()=>(p(r),()=>{p.cancel(),s.current=!0}),[p,r,n]),{searchResults:a}}let eL=(0,i.forwardRef)(function(e,r){let{query:n,setQuery:a}=e,l=(0,E.ZC)(n),c=i.useRef(null),[d,u]=i.useState(!1),m=(0,B.GS)();return(i.useEffect(()=>{c.current&&n!==l&&(c.current.scrollWidth>c.current.clientWidth?u(!0):u(!1))},[l,n]),m)?i.createElement("div",{ref:r,className:eb.MT},i.createElement("div",{className:eb.qc},i.createElement(N.U,{svg:ev.A,"aria-label":(0,O.t)("fullscreen.accessibility.search_icon")},i.createElement(o.h,null))),i.createElement(A.L,{ref:c,placeholder:(0,O.t)("collaboration.spotlight.menu.search.placeholder"),className:p()({[eb.Rt]:!0,[eb.ro]:d}),value:n,onClick:x.dG,onChange:e=>{a(e.target.value),(0,x.dG)(e)},onKeyDown:e=>{"Escape"===e.key&&a(""),(0,x.dG)(e)},spellCheck:!1,autoFocus:!0}),i.createElement("div",{className:eb.WY},!!n&&i.createElement("button",{className:eb.Vw,onClick:e=>{e.stopPropagation(),a("")},"aria-label":(0,O.t)("search.sidebar_search_clear")},i.createElement("div",{className:eb.i3},i.createElement(N.U,{svg:eT.default},i.createElement(s.A,null)))))):null});function eO({targetRect:e,arrowOffsetFromRectLeft:r,currentUser:n,peopleList:o,previousViewerList:s,previousViewerListRenderer:l,userListRenderer:c,onUserClick:u,onKeyDown:m,shouldDisableSpotlight:h,dropdownRef:_}){let g=(0,B.GS)(),f=(0,i.useRef)(null),E=(0,i.useRef)(null),[y,I]=(0,d.fp)(v.ah),[A,N]=(0,d.fp)(v.Dv),[P,M]=i.useState(g?310:220),k=(0,i.useRef)(null),[F,x]=i.useState(0),U=(0,a.wA)(),V=(0,T.Av)(),G=Math.min(window.innerHeight-V-22,g?465:450);i.useLayoutEffect(()=>{f.current&&E.current&&M(G-f.current.offsetHeight-E.current.offsetHeight-16*F)},[g,G,F]);let H=(0,i.useCallback)(()=>{h||I(!0)},[I,h]),{start:K,cancel:W}=(0,$.Z)(H),Y=(0,i.useCallback)(()=>{W(),I(!1)},[W,I]),j=(0,b.Vi)(),q=(0,i.useCallback)(()=>{h||(j(),Y(),N(!0),U(D.oB()))},[Y,U,N,j,h]),X=(0,b.B4)(),Z=(0,i.useCallback)(()=>{X(),U(D.oB())},[U,X]),J=(0,z.dR)(),ee=J&&n.sessionID===J.sessionID?i.createElement(S.pz,{onClick:Z,className:eb.BK},(0,O.tx)("collaboration.spotlight.button.stop")):i.createElement(w.$$,{onClick:q,className:p()(eb.BK,h&&eb.r9),onMouseOver:()=>{K(300)},onMouseLeave:Y,disabled:h},(0,O.tx)("collaboration.spotlight.tooltip.spotlight_me")),et=g&&o.length+(s?.length??0)>8,[er,en]=i.useState(""),{searchResults:ea}=eN({query:er,usersToSearch:o}),{searchResults:eo}=eN({query:er,usersToSearch:s??[]}),es=ea.length>0&&eo.length>0,el=ea.length>0||eo.length>0,ec=0===ea.length&&0===eo.length,ed=i.createElement("div",{className:eb.zW},i.createElement("div",{className:eb.me}));(0,i.useEffect)(()=>{x((et?1:0)+(""!==er&&ec?1:0)+(el?1:0))},[et,er,ec,el]);let eu=i.createElement(i.Fragment,null,i.createElement("div",{ref:f,className:eb.Km},i.createElement(Q.Q,{user:n,isOverflow:!0,isCurrentUserHeaderRow:g}),i.createElement("div",{className:eb.Vr},ee,i.createElement(em.L,null))),et&&i.createElement(i.Fragment,null,ed,i.createElement("div",{className:eb.zK,ref:g?E:void 0},i.createElement(eL,{ref:g?void 0:E,query:er,setQuery:en}))),""!==er&&ec&&i.createElement(i.Fragment,null,ed,i.createElement("div",{className:`${eb.hg} ${L.s.mb8.$}`},(0,O.tx)("fullscreen.toolbar.multiplayer.no_user_found"))),el&&i.createElement(i.Fragment,null,ed,i.createElement(C.P,{width:ew-16,maxHeight:P,scrollBarAlways:!0,disableScrollbarBorder:!0,ref:k},es&&i.createElement("div",{className:eb.hg},(0,O.tx)("fullscreen.toolbar.multiplayer.currently_viewing")),ea.length>0&&i.createElement(i.Fragment,null,i.createElement(R.W,{label:(0,O.t)("fullscreen.toolbar.multiplayer.currently_viewing_users"),renderer:c,onSelect:e=>{e.length&&(u(e[0]),U(D.oB()))},initiallyNotSelected:!0,customClassName:eb.aK},ea)),eo.length>0&&i.createElement(i.Fragment,null,i.createElement("div",{className:eb.hg},(0,O.tx)("fullscreen.toolbar.multiplayer.previously_viewed")),i.createElement(R.W,{label:(0,O.t)("fullscreen.toolbar.multiplayer.previously_viewed_users"),renderer:l,initiallyNotSelected:!0,customClassName:eb.aK},eo)),g&&i.createElement("div",{className:L.s.pt12.$}))));return i.createElement(ei.Cf,{arrowOffsetFromRectLeft:r,className:p()(eb.qN,eb.QD),contentRef:_,disableDropdownScrollContainer:!0,lean:"center",maxHeight:G,maxWidth:ew,onKeyDown:m,propagateCloseClick:!0,removeUI3BorderPadding:g,showPoint:!g,targetRect:e},eu)}let eR="multiplayer-tools-dropdown",eP=i.memo(function(e){let{multiplayer:r,dropdownShown:n,currentUser:o,onUserClick:s,thresholdUsesContainerWidth:u}=e,m=(0,i.useRef)(null),h=(0,i.useRef)(null),E=(0,i.useRef)(null),T=(0,i.useRef)(null),S=(0,i.useRef)(null),w=(0,B.GS)(),A=(0,K.wF)();(0,er._7)(o.userID);let C=(0,V.k5)(),N=(0,I.WN)(),L=(0,a.wA)(),[R,k]=i.useState(!1),F=(0,eh.Oc)(),U=n?.type,H=!F&&U===eR,W=(0,i.useMemo)(()=>r.allUsers.filter(e=>e.sessionID!==o?.sessionID),[r.allUsers,o]),$=(0,P.e)(),[Y,q]=(0,d.fp)(v.ah);Y&&!H&&q(!1);let X=m.current&&h.current?m.current.clientWidth-h.current.clientWidth:void 0,ee=(0,K.Wq)(X,u),{users:ei,overflowUsers:ea}=(0,K.uC)(W,null,!1,ee),eo=(0,i.useMemo)(()=>[...ei,...ea].filter(e=>e&&e.userID!==o.userID),[ea,ei,o]),es=(0,i.useMemo)(()=>A?.filter(e=>!eo.some(r=>e.userID===r.userID)&&e.userID!==o.userID),[eo,A,o]),el=(0,f.am)(),ec=(0,i.useCallback)(e=>{if((0,x.dG)(e),!h.current)return;E.current=h.current.getBoundingClientRect();let r=n?.type===eR;L(M.gR({type:eR})),r||el("Multiplayer Tools Opened",{currentUserSessionID:o.sessionID,otherUserSessionsCount:eo.length})},[o.sessionID,L,n?.type,eo.length,el]),ed=(0,z.dR)(),eu=ed&&ed.sessionID!==o.sessionID?ed:null,ep=(0,j.q)(),em=(0,b.tu)(),eg=(0,b.oJ)(),ef=i.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:n}){let a=(0,y.Gc)(()=>{let r=`/files${ep}/user/${e.userID}`;g.Ay.redirect(r,_.eD?void 0:"_blank")}),o=[],s=r.sessionNominatedByCurrentUser===e.sessionID;return r.presenterSessionID===e.sessionID||$||(s?o.push({text:(0,O.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,K.AD)(e)&&eg(e.sessionID,r)},key:"cancel-ask-to-spotlight"}):o.push({text:(0,O.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,K.AD)(e)&&em(e.sessionID,r)},key:"ask-to-spotlight"})),o.push({text:(0,O.tx)("avatar.tooltip.view_profile"),onClick:e=>{a(e)},key:"view-profile"}),i.createElement(Q.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:n,secondaryActions:o})}}),[r,ep,em,eg,$]),eE=H||R,ey=eo.length+1,ev=i.createElement(e_.s,{featured:eu,quickAccess:ei,maxVisibleUsers:(w?K.A8:K.Q2)-1,onUserClick:s,totalUserCount:ey}),eT=i.createElement(J.x,null,i.createElement("button",{ref:h,"aria-expanded":null!=E.current&&n?.type===eR,"aria-label":(0,O.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),className:p()({[eb.XE]:!0,[eb.yx]:w&&ea.length>0,[eb.Ge]:w&&0===ea.length,[eb.wH]:H,[eb.yo]:!H&&R&&!F}),"data-tooltip":(0,O.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"data-tooltip-offset-x":h.current&&S.current?h.current.offsetWidth/2-S.current.offsetWidth/2-1.5:0,"data-tooltip-offset-y":h.current&&m.current?m.current.clientHeight/2-h.current.clientHeight/2:0,"data-tooltip-type":Z.Ib.TEXT,id:"multiplayer-toolbar-container",onClick:x.dG,onKeyDown:e=>{(0,G.hx)({e,onClickHandler:e=>{C?N(l.rcl.FOLLOW_PRESENTER):ec(e)},onEscapeHandler:()=>{h?.current?.blur()}})},onMouseDownCapture:e=>{C?N(l.rcl.FOLLOW_PRESENTER):ec(e)},onMouseLeave:()=>{k(!1)},onMouseOverCapture:e=>{k(!0),(0,x.dG)(e)}},i.createElement("span",{key:o.sessionID,ref:T,className:eb.r9},i.createElement(Q.Q,{user:o,key:o.sessionID,isOverflow:!1})),i.createElement("span",{"data-onboarding-key":"multiplayer-spotlight-nux-key",className:eb.rR},ea.length>0&&i.createElement("span",{className:p()({[eb.zk]:!0,[eb.r9]:!0,[eb.wH]:H,[eb.yo]:!H&&R&&!F}),style:{minWidth:ey<10?8:ey<100?15:22}},`${ey}`),F?null:i.createElement(en.o,{divRef:S,disableHoverAnimation:w,className:p()({[eb.ai]:!0,[eb.r9]:!0,[eb.wH]:H,[eb.yo]:!H&&R&&!F}),showingDropdown:eE})))),eI=(0,i.useCallback)(()=>{L(D.oB()),m.current?.focus()},[L]),[eS,ew]=i.useState(null);(0,i.useEffect)(()=>{eS&&eS.focus()},[eS]);let eA=(0,c.k)().file_view_history_callout&&!!es?.length;return i.createElement("span",{className:eb.EI,ref:m,"data-onboarding-key":"multiplayer-users-container"},w?i.createElement(i.Fragment,null,eT,ev):i.createElement(i.Fragment,null,ev,eT),n?.type===eR&&S.current&&i.createElement(eO,{arrowOffsetFromRectLeft:S.current?S.current.offsetWidth/2+1:0,currentUser:o,dropdownRef:ew,onKeyDown:e=>{"Escape"===e.key&&eI()},onUserClick:s,peopleList:eo,previousViewerList:es,previousViewerListRenderer:{label:e=>e.name,id:e=>String(e.userID),renderDisplay(e,{hasCursor:r}){let n=(0,y.Gc)(()=>{let r=`/files${ep}/user/${e.userID}`;g.Ay.redirect(r,_.eD?void 0:"_blank")}),a=[{text:(0,O.tx)("avatar.tooltip.view_profile"),onClick:e=>{n(e)},key:"view-profile"}];return i.createElement(Q.Q,{key:e.userID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:r,secondaryActions:a})}},shouldDisableSpotlight:$,targetRect:S.current.getBoundingClientRect(),userListRenderer:ef}),eA&&i.createElement(et.NM,{multiplayerDropdownOpen:!!n}))});function eD(e){let{multiplayer:r,user:n,onUserClick:a,dropdownShown:o,editingFile:s}=e,l=(0,i.useMemo)(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]);(0,i.useEffect)(()=>{},[r,n]);let c=(0,U.DG)(s?.key||"").enabled;return i.createElement("div",{className:eb.Wh},i.createElement(ey.sK,null),i.createElement(ek,{dropdownShown:o,multiplayer:r,currentUser:l,onUserClick:a,editingFile:s}),s&&i.createElement(ea.w,{user:n,editingFile:s,isFileInWorkshop:c}))}let eM="multiplayer-users-dropdown";function ek(e){let{editingFile:r,multiplayer:n,dropdownShown:o,currentUser:s,onUserClick:l}=e,c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useRef)(null),p=(0,a.wA)(),m=(0,i.useCallback)(e=>{(0,x.dG)(e),c.current&&(d.current=c.current.getBoundingClientRect(),p(M.gR({type:eM})))},[p]),h=o?.type,f=(0,i.useMemo)(()=>h===eI&&u.current?u.current.getBoundingClientRect():null,[h]),E=ec(),v=(0,j.q)(),T=(0,X.Lk)(),I=r?.key??null,{usersNotInCall:S}=(0,q.W5)(I,!0),w=n.allUsers,A=(0,K.D4)(),C=(0,a.d4)(e=>I&&e.voice.activeCall[I])||!1,{users:N,overflowUsers:L}=(0,K.uC)(T?S:w,s,C,A),P=i.useCallback(e=>0===e?"multiplayer-spotlight-nux-key":1===e?"multiplayer-observation-nux-key":"",[]),k=(0,b.tu)(),F=(0,b.oJ)(),U=i.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:r}){let a=(0,y.Gc)(()=>{let r=`/files${v}/user/${e.userID}`;g.Ay.redirect(r,_.eD?void 0:"_blank")}),o=[],s=n.sessionNominatedByCurrentUser===e.sessionID;return n.presenterSessionID!==e.sessionID&&(s?o.push({text:(0,O.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,K.AD)(e)&&F(e.sessionID,n)},key:"cancel-ask-to-spotlight"}):o.push({text:(0,O.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,K.AD)(e)&&k(e.sessionID,n)},key:"ask-to-spotlight"})),o.push({text:(0,O.tx)("avatar.tooltip.view_profile"),onClick:e=>{a(e)},key:"view-profile"}),i.createElement(Q.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:r,secondaryActions:o})}}),[n,v,k,F]);return i.createElement("span",{className:eb.VV,"data-onboarding-key":"multiplayer-avatars"},N.map((e,r)=>{let n=i.createElement(Q.Q,{user:e,onboardingKey:P(r),key:e.sessionID,isOverflow:!1,onUserClick:l});return e.sessionID===s?.sessionID?i.createElement("span",{key:e.sessionID,ref:u},n):n}),L.length>0&&i.createElement(i.Fragment,null,i.createElement("button",{id:"multiplayer-overflow-container","aria-label":(0,O.t)("fullscreen.toolbar.multiplayer.more_users"),"aria-expanded":null!=d.current&&o?.type===eM,className:eb.O5,ref:c,onMouseDown:m,onKeyDown:e=>{(0,G.hx)({e,onClickHandler:e=>{m(e)},onEscapeHandler:()=>{c?.current?.blur()}})},onClick:x.dG},i.createElement(ee.f,{className:eb.zb,text:`${L.length}`})),o?.type===eM&&c.current&&i.createElement(ep,{targetRect:c.current.getBoundingClientRect(),onKeyDown:e=>{"Tab"===e.key&&p(D.oB())}},i.createElement(R.W,{autofocus:!0,label:"More multiplayer users",renderer:U,onSelect:e=>{e.length&&(l(e[0]),p(D.oB()))},customClassName:eb.cu},L))),o?.type===eI&&f&&i.createElement(ei.Cf,{targetRect:f,maxHeight:E,className:eb.a1,propagateCloseClick:!0},i.createElement(ef,null)))}},979173:(e,r,n)=>{n.d(r,{sK:()=>L,vQ:()=>N});var i=n(848318),a=n(536384),o=n.n(a),s=n(239910),l=n.n(s),c=n(818754),d=n(397579),u=n(379338),p=n(889132),m=n(727341),h=n(67919),_=n(832876),g=n(177138),f=n(27776),E=n(574786);let y=e=>e?13:14,b=(0,c.jz)(f.Ocz),v=(0,c.jz)(f.bnr),T=e=>e?v:b,I=(0,c.jz)(f.Ko3);var S=(e=>(e.PRESENTING="presenting",e.SELECTED="selected",e.NONE="none",e))(S||{}),w=(e=>(e.PRESENTING="presenting",e.SELECTED="selected",e.DESELECTED="deselected",e.NONE="",e))(w||{});let A=e=>{let r=e.user.sessionID===e.observingSessionID,n=e.user.sessionID===e.presenterSessionID;return r?"selected":n?"presenting":"none"},C=l()([{current:"none",selected:"selected",presenting:"presenting",none:""},{current:"selected",selected:"selected",presenting:"presenting",none:"deselected"},{current:"presenting",selected:"selected",presenting:"presenting",none:""}],e=>e.current);function N(e){let r;let{user:n,tooltipOffsetY:a}=e,s=(0,m.GS)(),l=(0,p.Av)(),c=s?I:l,u=function(e){let[r,n]=i.useState(""),a=(0,d.ZC)(e),o=i.useMemo(()=>a&&{user:a.user,observingSessionID:a.observingSessionID,presenterSessionID:a.presenterSessionID,nominatedSessionID:a.nominatedSessionID},[a]),s=i.useMemo(()=>({user:e.user,observingSessionID:e.observingSessionID,presenterSessionID:e.presenterSessionID,nominatedSessionID:e.nominatedSessionID}),[e.observingSessionID,e.presenterSessionID,e.user,e.nominatedSessionID]);return i.useEffect(()=>{let r="";if(!e.disableSpotlightAnimation){let e=A(s);r=C[o&&A(o)||"none"][e]}n(r)},[s,o,e.disableSpotlightAnimation]),r}(e),f=E.qb,b=(0,h.Ww)(),v=A(i.useMemo(()=>({user:e.user,observingSessionID:e.observingSessionID,presenterSessionID:e.presenterSessionID,nominatedSessionID:e.nominatedSessionID}),[e.observingSessionID,e.presenterSessionID,e.user,e.nominatedSessionID])),S=n.sessionID===b?.sessionID?"var(--color-bg-brand)":n.color,w=T(s),N=y(s);return e.hasBorder&&(r="none"===v?"outward":"inward"),i.createElement("div",{className:o()({[E.C7]:!e.horizontal,[E._L]:e.horizontal})},i.createElement(g.W,{id:e.tooltipProxyId,user:{id:n.userID,handle:n.name,sessionId:n.sessionID},tooltipOffsetY:a},i.createElement("svg",{key:"multiplayer-animation-svg",className:`multiplayer-animation-svg ${e.horizontal?"horizontal":""}`,viewBox:`0 0 ${w} ${c}`,"aria-hidden":"true"},i.createElement("circle",{className:`multiplayer-animation-circle ${e.horizontal?"horizontal":""} ${u}`,cx:w/2,cy:c/2,r:N,fill:"none",stroke:S,strokeWidth:"2"})),e.showColorIndicators&&i.createElement("div",{key:"multiplayer-animation-droplet",className:`multiplayer-animation-droplet${e.horizontal?"-horizontal":""} ${u}`,"data-avatar-color-bar":!0,style:{backgroundColor:S}}),i.createElement("div",{className:f},i.createElement(_.Ro,{entity:{...n,id:n.userID},className:E.ws,borderStyle:r}))))}let L=i.memo(function(e){let r=T(e.isUI3),n=y(e.isUI3),a=`
  .multiplayer-animation-svg {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: ${r}px;
  }

  .multiplayer-animation-droplet {
    left: ${r/2-n/2}px;
    top: 0px;
    height: 2px;
    width: ${n}px;
    border-radius: 0px;
    position: absolute;
  }

  .multiplayer-animation-droplet-horizontal {
    left: 0px;
    top: 50%;
    transform: translateY(-50%);
    height: ${n}px;
    width: 2px;
    border-radius: 0px;
    position: absolute;
  }

  .multiplayer-animation-droplet.selected {
    animation: droplet 0.3s ease-in forwards;
  }

  .multiplayer-animation-droplet-horizontal.selected {
    animation: droplet-horizontal 0.3s ease-in forwards;
  }

  .multiplayer-animation-droplet.deselected {
    animation: droplet-reverse 0.2s ease-out 0.4s forwards;
    left: ${r/2-n/4}px;
    top: 0px;
    height: 0px;
    width: 0px;
    border-radius: 0px;
  }

  .multiplayer-animation-droplet-horizontal.deselected {
    animation: droplet-horizontal-reverse 0.2s ease-out 0.4s forwards;
    left: ${r/2-n/4}px;
    height: 0px;
    width: 0px;
    border-radius: 0px;
  }

  .multiplayer-animation-circle {
    stroke-dasharray: 400;
    stroke-dashoffset: 400;
    transform-origin: center;
    transform: rotateZ(-90deg);
  }

  .multiplayer-animation-circle.horizontal {
    transform: rotateZ(-180deg);
  }

  .multiplayer-animation-circle.selected {
    animation: draw-circle 0.15s ease-in 0.3s forwards;
  }

  .multiplayer-animation-circle-horizontal.selected {
    animation: draw-circle-horizontal 0.15s ease-in 0.3s forwards;
  }

  .multiplayer-animation-circle.deselected {
    animation: draw-circle-reverse 0.4s ease-in forwards;
  }

  .multiplayer-animation-circle.presenting {
    stroke-dasharray: 3.4;
    animation: rotating 30s linear infinite
  }

  @keyframes rotating {
    from {
      transform: rotateZ(0deg);
    }
    to {
      transform: rotateZ(360deg);
    }
  }

  @keyframes droplet {
    0% {
      top: 0px;
      height: 2px;
      width: ${n}px;
      border-radius: 0px;
    }
    20% {
      top: -3.5px;
      height: ${n/2}px;
      width:  ${n/2}px;
      border-radius: 100%;
    }
    66% {
      top: -2px;
      height: 7px;
    }
    98% {
      top: 5px;
      height: 3px;
      width: 3px;
      border-radius: 100%;
    }
    99% {
      top: 5px;
      height: 1px;
      width: 1px;
      border-radius: 100%;
    }
    100% {
      top: 5px;
      height: 0px;
      width: 0px;
      border-radius: 100%;
    }
  }

  @keyframes droplet-horizontal {
    0% {
      left: 0;
      height: ${n}px;
      width: 2px;
      border-radius: 0px;
    }
    20% {
      left: -3.5px;
      height: ${n/2}px;
      width: ${n/2}px;
      border-radius: 100%;
    }
    66% {
      left: -2px;
      width: ${n/2}px;
    }
    99% {
      left: 5px;
      height: 3px;
      width: 3px;
      border-radius: 100%;
    }
    100% {
      left: 5px;
      height: 0px;
      width: 0px;
      border-radius: 100%;
    }
  }

  @keyframes draw-circle {
    0% {
      stroke-dashoffset: 400;
    }
    100% {
      stroke-dashoffset: 300;
    }
  }

  @keyframes droplet-reverse {
    0% {
      top: 0px;
      height: 2px;
      width: 2px;
      border-radius: 0px;
    }
    100% {
      top: 0px;
      height: 2px;
      width: ${n};
      border-radius: 0px;
    }
  }

  @keyframes droplet-horizontal-reverse {
    0% {
      left: 0px;
      height: 2px;
      width: 2px;
      border-radius: 0px;
    }
    100% {
      left: 0px;
      width: 2px;
      height: ${n}px;
      border-radius: 0px;
    }
  }`;return i.createElement("style",{nonce:(0,u.Ay)().csp_nonce},a)})},491724:(e,r,n)=>{n.d(r,{w:()=>ei});var i=n(848318),a=n(716544),o=n(370396),s=n(157907),l=n(536384),c=n.n(l),d=n(818754),u=n(379338),p=n(493554),m=n(195507),h=n(831932),_=n(963376),g=n(882439),f=n(442313),E=n(186323),y=n(935529),b=n(119699),v=n(85442),T=n(449737),I=n(802780),S=n(155651),w=n(338108),A=n(235441),C=n(727341),N=n(871117),L=n(181427),O=n(51910),R=n(710905),P=n(369600),D=n(841747),M=n(376780),k=n(635547),F=n(710665),x=n(572699),U=n(668249),B=n(422010),V=n(241917),G=n(503024),H=n(177570),K=n(192014),W=n(95932),z=n(507554),$=n(217738),Y=n(744075),j=n(418655),q=n(345908),X=n(638738),Z=n(36789),J=n(229628),Q=n(209565),ee=n(259917),et=n(27776),er=n(466614),en=(e=>(e.PRIMARY="primary",e.SECONDARY="secondary",e.DISABLED="disabled",e.LOADING="loading",e.OPEN_SESSION="openSession",e.PERSONAL_DRAFT_DISABLED="personalDraftDisabled",e.HAS_CURRENT_UPGRADE_REQUEST="hasCurrentUpgradeRequest",e))(en||{});function ei({editingFile:e,user:r,isFileInWorkshop:n,appendedClassname:o}){let l=(0,C.GS)(),c=(0,b.l7)(),g=(0,A.my)(),S=(0,E.R)(),q=(0,N.wR)(e.editorType),{hasPendingRequest:J,getUpgradePathway:ee,getHasProvisionalAccess:en}=(0,B.wH)({folderId:e.folderId}),ei=(0,D.sj)(e),eo=g===V.nT.Slides&&(0,m.oA)(e.org?.isSlidesDisabled),es=g===V.nT.Sites&&!!e.org?.isSitesDisabled,ec=g===V.nT.Cooper&&!!e.org?.isCooperDisabled,ed=!!e.org||(0,F.XX)(e.team),eu=e.isTryFile,ep=(0,O.aV)(),em=(0,a.wA)(),eh=P.Cq({useSinatraType:!0})?.url,[e_,eg]=(0,i.useState)(null),ef=!e.teamId&&!e.parentOrgId&&e.folderId===r?.personal_drafts_folder_id&&!eu,eE=en(q),{userLacksLicenseAccess:ey}=(0,B.KI)({fileKey:e.key,userId:r?.id??null,enabled:S&&!!e&&!!r}),eb=ey(e.editorType??M._Y.DESIGN),ev=S&&eb&&J(q)&&!eE&&ee(q)!==H.J.AUTO_PATHWAY,eT=r?.id===e.creatorId,eI=(0,$.vt)(e.team?.id),eS=(0,K.jn)(),ew=(0,K.R)(e.team?.id),eA=(0,I.Yz)(),eC=(0,I.Xs)(),eN=(0,p.Rs)(k.kQI,{id:e.team?.id||""},{enabled:!!e.team}),eL="loaded"===eN.status&&!!eN.data.team?.hasPermission,eO=eA(!!e.team&&eI)||eC(!!e.team&&eS&&ew),eR=e.editorType===M._Y.SITES&&!(0,s.k)().sts_share_support&&!(0,s.k)().sites_eap_share_with_us,eP=(0,x.yN)({component:"ShareButton",migrationGroup:U.L.GROUP_2,attribute:"isProTeam",legacy:(e,r)=>!!e?.subscription&&!e.org_id,migrated:e=>!!e&&e.tier===M.Ag.PRO}),eD=(0,y.xo)();(0,w.xf)(e);let eM=(0,Z.Oc)(),ek=e.canView&&!e.canEdit,eF=(0,i.useCallback)(()=>{if(!ep&&!ei&&!eo&&!es&&!ec&&!eR&&!ef&&e){if(eu){let r;void 0!==eh&&(em(v.S({url:eh})),r=!0),em((0,T.to)({type:j.p,data:{fileKey:e.key,alreadyCopied:r}}))}else(0,_.YQ)({id:"multiplayer_toolbar_share_button"}),em((0,T.to)({type:Y.g_,data:{fileKey:e.key,source:L.nk.fullscreenToolbar,isLockedTeam:eO}}))}},[ep,ei,eo,es,ec,ef,eu,eR,eO,eh,e,em]),ex=(0,R.m0)();if((0,i.useEffect)(()=>{ex&&(ex._share_file=()=>{eF()})},[ex,eF]),h.Ay.isMeetDevice||(!eu||!n)&&!r)return null;let eU=n&&!eu&&ed,eB=!!(0,u.tl)().org_id&&(0,u.tl)().org_id===e.parentOrgId;if(eO&&"loading"===eN.status)return null;let eV=eR?"disabled":eu?"secondary":ei||eo||es||ec?"disabled":ep?"loading":eU?"openSession":ef?"personalDraftDisabled":ev?"hasCurrentUpgradeRequest":eO&&eL&&!e.canEdit||eD||eM&&ek?"secondary":"primary",eG=eR?(0,f.t)("fullscreen.toolbar.multiplayer.sharing_sites_files_disabled_in_alpha"):ei?(0,f.t)("fullscreen.toolbar.multiplayer.sharing_fig_jam_files_disabled_by_your_organization"):eo?(0,f.t)("fullscreen.toolbar.multiplayer.sharing_slides_files_disabled_by_your_organization"):es?(0,f.t)("fullscreen.toolbar.multiplayer.sharing_sites_files_disabled_by_your_organization"):ec?(0,f.t)("fullscreen.toolbar.multiplayer.sharing_buzz_files_disabled_by_your_organization"):eU?(0,f.t)("fullscreen.toolbar.multiplayer.open_session_in_progress"):ef?X.r:ev?(0,f.t)("fullscreen.toolbar.multiplayer.sharing_has_current_upgrade_request"):null,eH={"data-tooltip-is-current-user-file-owner":JSON.stringify(eT),"data-tooltip-type":ef?G.Ib.SPECIAL:G.Ib.TEXT,"data-tooltip-interactive":!!ef,"data-tooltip":eG,"data-tooltip-show-immediately":!0,"data-tooltip-offset-y":ef?0:6},eK=g===V.nT.Whiteboard,eW=l&&(eK||c),ez=eW?er.lT:er.m,e$=e.hasEditRole&&(0,m.oA)(e.hasEditRole),eY=!ep&&!eG&&e_&&eT&&(eB||eP),ej=l&&eK?(0,d.jz)(et.M$q):void 0;return i.createElement(i.Fragment,null,i.createElement("div",{className:ez,ref:eg},i.createElement(eW?el:ea,{variant:eV,onClick:eF,tooltipProps:eH,appendedClassname:o}),e$&&i.createElement(Q.$,{fileKey:e.key,isLegacyPosition:!eW})),e$&&!eG&&e_&&i.createElement(W.F,{target:e_,windowPadding:ej}),eY&&i.createElement(z.q,{file:e,target:e_}))}function ea({variant:e,onClick:r,tooltipProps:n,appendedClassname:a}){let o=(0,J.O)(),s="openSession"===e,l=c()(o?er.cR:er.OI,{[er.Mg]:"disabled"===e,[er.A9]:"loading"===e,[er.LF]:s,[er.z_]:"personalDraftDisabled"===e,[er.MI]:"secondary"===e},er.uX,a);return i.createElement(S.$z,{type:"button",className:l,onClick:r,"data-onboarding-key":q.v4,...n,dataTestId:"multiplayer-toolbar-share-button",trackingProperties:{buttonVariant:e},disabled:es(e)},s&&i.createElement(ee.r,null),(0,f.tx)("fullscreen.toolbar.multiplayer.share"))}let eo=["disabled","personalDraftDisabled","loading","hasCurrentUpgradeRequest"];function es(e){return eo.includes(e)}function el({variant:e,onClick:r,tooltipProps:n}){let a={primary:"primary",secondary:"secondary",disabled:"disabled",loading:"disabled",openSession:"primary",personalDraftDisabled:"disabled",hasCurrentUpgradeRequest:"disabled"}[e],s=null;return"openSession"===e&&(s=i.createElement(o.I,null)),i.createElement(g.c,{disabled:es(e),variant:"disabled"!==a?a:void 0,iconPrefix:s,onClick:r,trackingProperties:{buttonVariant:e},htmlAttributes:{...n,"data-testid":"multiplayer-toolbar-share-button","data-onboarding-key":q.v4}},(0,f.tx)("fullscreen.toolbar.multiplayer.share"))}},409389:(e,r,n)=>{n.d(r,{ec:()=>I});var i=n(741419),a=(n(442313),n(935529)),o=n(306414),s=n(973182);n(747863);var l=n(355323),c=n(94724),d=n(990807),u=n(108581),p=(e=>(e[e.TOOL=0]="TOOL",e[e.ACTION=1]="ACTION",e[e.CUSTOM_ACTION=2]="CUSTOM_ACTION",e[e.ACTION_SUBMENU=3]="ACTION_SUBMENU",e[e.FLYOUT=4]="FLYOUT",e[e.LABEL=5]="LABEL",e[e.TEXT_BUTTON=6]="TEXT_BUTTON",e))(p||{});let m=[i.m1T.DESIGN_LAYOUT,i.m1T.WHITEBOARD_LAYOUT,i.m1T.SLIDE_LAYOUT,i.m1T.COOPER_CONSTRAINED,i.m1T.RASTER,i.m1T.GRADIENT,i.m1T.TEXT,i.m1T.COMMENTS],h=m.concat([i.m1T.VECTOR]),_=m.concat([i.m1T.VECTOR,i.m1T.PLACE_IMAGE]),g=[i.m1T.VECTOR],f=[i.m1T.PLACE_IMAGE],E=[i.m1T.PREVIEW,i.m1T.BRANCHING,i.m1T.COMPARE_CHANGES,i.m1T.HISTORY],y=[i.m1T.DESIGN_LAYOUT,i.m1T.TEXT,i.m1T.RASTER,i.m1T.GRADIENT,i.m1T.PREVIEW,i.m1T.COMMENTS,i.m1T.BRANCHING,i.m1T.HISTORY,i.m1T.COMPARE_CHANGES],b={type:4,name:"move-flyout",children:[{action:"set-tool-default",property:"currentTool",propertyValue:i.NLJ.SELECT,recordingKey:"toolDefault"},{action:"set-tool-scale",property:"currentTool",propertyValue:i.NLJ.SCALE,recordingKey:"toolScale"}],editModes:_,recordingKey:"moveFlyout"},v={type:4,name:"shape-flyout",editModes:m,recordingKey:"shapeFlyout",children:[{action:"set-tool-rectangle",property:"currentTool",propertyValue:i.NLJ.SHAPE_RECTANGLE,recordingKey:"toolShapeRectangle"},{action:"set-tool-line",property:"currentTool",propertyValue:i.NLJ.SHAPE_LINE,recordingKey:"toolShapeLine"},{action:"set-tool-arrow",property:"currentTool",propertyValue:i.NLJ.SHAPE_ARROW,recordingKey:"toolShapeArrow"},{action:"set-tool-ellipse",property:"currentTool",propertyValue:i.NLJ.SHAPE_ELLIPSE,recordingKey:"toolShapeEllipse"},{action:"set-tool-regular-polygon",property:"currentTool",propertyValue:i.NLJ.SHAPE_REGULAR_POLYGON,recordingKey:"toolShapePolygon"},{action:"set-tool-star",property:"currentTool",propertyValue:i.NLJ.SHAPE_STAR,recordingKey:"toolShapeStar"},{action:"place",recordingKey:"toolPlaceImage",onboardingKey:"tool-place-image"}]},T={type:4,name:"comments-flyout",editModes:m,recordingKey:"commentsFlyout",children:[{action:"set-tool-comments",property:"currentTool",propertyValue:i.NLJ.COMMENTS,recordingKey:"toolComments"},{action:"set-tool-annotate",property:"currentTool",propertyValue:i.NLJ.ANNOTATE,recordingKey:"toolAnnotate"},{action:"set-tool-measure",property:"currentTool",propertyValue:i.NLJ.MEASURE,recordingKey:"toolMeasure"}]},I={type:0,tool:i.NLJ.COMMENTS,action:"set-tool-comments",editModes:m.concat([i.m1T.PREVIEW]),nonEditorsAllowed:!0,onboardingKey:"comment",recordingKey:"toolComment"},S={type:1,action:"component-insert",editModes:m,recordingKey:"toolResourceInsert",onboardingKey:"insert",isActive:s.kg};[{type:0,tool:i.NLJ.SELECT,action:"set-tool-default",nonEditorsAllowed:!0,editModes:E,recordingKey:"toolDefault"},b,{type:4,name:"region-flyout",editModes:m,onboardingKey:"frame",recordingKey:"regionFlyout",children:[{action:"set-tool-frame",property:"currentTool",propertyValue:i.NLJ.FRAME,recordingKey:"toolFrame"},{action:"set-tool-section",property:"currentTool",propertyValue:i.NLJ.SECTION,recordingKey:"toolSection"},{action:"set-tool-slice",property:"currentTool",propertyValue:i.NLJ.SLICE,recordingKey:"toolSlice"}]},v,{type:4,name:"pen-flyout",editModes:h,recordingKey:"penFlyout",onboardingKey:"pen",children:[{action:"set-tool-pen",property:"currentTool",propertyValue:i.NLJ.VECTOR_PEN,recordingKey:"toolPen"},{action:"set-tool-pencil",property:"currentTool",propertyValue:i.NLJ.VECTOR_PENCIL,recordingKey:"toolPencil"}]},{type:0,tool:i.NLJ.VECTOR_BEND,action:"set-tool-bend",editModes:g,recordingKey:"toolBend"},{type:0,tool:i.NLJ.VECTOR_PAINT_BUCKET,action:"set-tool-paint-bucket",editModes:g,recordingKey:"toolPaintBucket"},{type:0,tool:i.NLJ.VECTOR_LASSO,action:"set-tool-vector-lasso",editModes:g,recordingKey:"toolVectorLasso",featureFlags:["ce_il_la_tool"]},{type:0,tool:i.NLJ.VECTOR_VAR_WIDTH_POINT,action:"set-tool-var-width-point",editModes:g,recordingKey:"toolVarWidthPoint",featureFlags:["ce_il_var_width_points"],nonEditorsAllowed:!1,newFileDisabled:!1,onlyShowInReadOnly:!1},{type:0,tool:i.NLJ.VECTOR_CUT,action:"set-tool-cut",editModes:g,recordingKey:"toolCut",featureFlags:["ce_il_vem_cut_tool"]},{type:0,tool:i.NLJ.SHAPE_BUILDER,action:"set-tool-shape-builder",editModes:g,recordingKey:"toolShapeBuilder",featureFlags:["ce_il_sb_tool"]},{type:0,tool:i.NLJ.TYPE,action:"set-tool-type",editModes:m,recordingKey:"toolType",onboardingKey:"tool-type-onboarding"},S,{type:0,tool:i.NLJ.HAND,action:"set-tool-hand",nonEditorsAllowed:!0,loggedOutAllowed:!0,editModes:y,recordingKey:"toolHand"},I,{type:5,label:"toolbar-place-image",editModes:f,recordingKey:"toolPlaceOneImage"},{type:6,action:"place-all-images",editModes:f,recordingKey:"toolPlaceAllImages"},{type:6,action:"discard-all-images",editModes:f,recordingKey:"toolDiscardAllImages"},{type:6,action:"leave-edit-mode",editModes:g,tooltip:"leave-vector-edit-mode",recordingKey:"toolLeaveVectorEditMode"}].map(e=>e===I?T:e);let w={type:1,action:"focus-mode-component-set-toggle",editModes:[i.m1T.DESIGN_LAYOUT],recordingKey:"focusModeComponentSetToggle",isActive:()=>i.Ez5.uiState().focusModeState.getCopy()===i.xc1.COMPONENT_SET,onboardingKey:"focus-mode-component-set-toggle"},A=[{type:1,action:"multi-edit-text",editModes:m,recordingKey:"multiEditText",onboardingKey:"multi-edit-text"},{type:1,action:"select-matching",editModes:[i.m1T.DESIGN_LAYOUT,i.m1T.SLIDE_LAYOUT],recordingKey:"selectMatching"},w];function C(e){return(r,n,i)=>!!n?.[e]}var N=(e=>(e.STANDARD_BUTTON="STANDARD_BUTTON",e.DIALOG_TRIGGER_BUTTON="DIALOG_TRIGGER_BUTTON",e.DROPDOWN_TRIGGER_BUTTON="DROPDOWN_TRIGGER_BUTTON",e))(N||{});i.m1T.DESIGN_LAYOUT,i.m1T.DESIGN_LAYOUT,i.m1T.DESIGN_LAYOUT,i.m1T.SLIDE_LAYOUT,i.m1T.COOPER_CONSTRAINED,e=>(0,l.Yh)(e,"select-matching");i.m1T.DESIGN_LAYOUT,i.m1T.SLIDE_LAYOUT,[...m,i.m1T.DEV_HANDOFF],[...m,i.m1T.DEV_HANDOFF],i.m1T.DESIGN_LAYOUT,i.m1T.TEXT,i.m1T.SLIDE_LAYOUT,C(i.YnC.SIZE),C(i.YnC.EXPORTS),C(i.YnC.EFFECTS),C(i.YnC.LAYER),C(i.YnC.VISIBLE),C(i.YnC.NAME),C(i.YnC.FILL),C(i.YnC.STROKE),C(i.YnC.TEXT),C(i.YnC.TEXT_STYLE),C(i.YnC.PROTOTYPE_INTERACTIONS),C(i.YnC.OVERLAY),o.P,[...A,(o.P,()=>i.Ez5.editorState().selectionIsMask.getCopy()===i.F84.ON),(i.m1T.DESIGN_LAYOUT,i.m1T.TEXT,i.m1T.SLIDE_LAYOUT),([...m,i.m1T.DEV_HANDOFF,i.m1T.PREVIEW],(e,r,n)=>n?.canEdit||(0,a.tn)({openFile:n})),([...m,i.m1T.DEV_HANDOFF,i.m1T.PREVIEW],()=>!0)],i.NLJ.SELECT,[...m,i.m1T.PREVIEW,i.m1T.HISTORY],i.NLJ.HAND,[...m,i.m1T.PREVIEW,i.m1T.HISTORY],c.N,i.NLJ.SELECT,i.m1T.DEV_HANDOFF,i.m1T.DEV_HANDOFF_HISTORY,u.A,i.NLJ.MEASURE,i.m1T.DEV_HANDOFF,i.NLJ.ANNOTATE,i.m1T.DEV_HANDOFF,i.NLJ.COMMENTS,i.m1T.DEV_HANDOFF,m.concat([i.m1T.DEV_HANDOFF,i.m1T.PREVIEW,i.m1T.MAGIC_LINK]),d.Iv,d.Iv},259078:(e,r,n)=>{n.d(r,{p:()=>q});var i=n(848318),a=n(716544),o=n(513886),s=n(302731),l=n(622876),c=n(741419),d=n(157907),u=n(39773),p=n(536384),m=n.n(p),h=n(271933),_=n(541525),g=n(921494),f=n(857188),E=n(654104),y=n(645221),b=n(182059),v=n(93600),T=n(442313),I=n(432411),S=n(935529),w=n(790355),A=n(235441),C=n(199689),N=n(727341),L=n(508347),O=n(992444),R=n(766535),P=n(577023),D=n(822610),M=n(950738),k=n(207715),F=n(241917),x=n(503024),U=n(355323),B=n(94724),V=n(60546),G=n(113100),H=n(723744),K=n(39191),W=n(161922),z=n(560735),$=n(709864);let Y="zoom-input-dropdown";function j({targetRect:e,showingZoomDropdown:r,toggleZoomMenu:n,recordingKey:o}){let p=(0,_.am)();i.useEffect(()=>{p("View Menu Opened")},[p]);let m=(0,A.E3)(),h="ui3"===(0,l.DP)().version,f=(0,k.J2)((0,R.d)().activeCanvasCurrentZoom),E=(0,k.J2)((0,P.UK)().activeCanvasPixelPreview),b=(0,k.J2)((0,R.d)().activeCanvasRetinaMode),v=(0,g.R)(e=>e.mirror.appModel.keyboardShortcuts),T=(0,a.d4)(e=>!e.mirror.appModel.isReadOnly),w=(0,a.d4)(e=>!!e.user),C=(0,a.d4)(e=>(0,V.$A)(e.selectedView)),N=(0,S._I)(),[M,x]=(0,u.fp)(I.U5),{Sprig:B}=(0,y.A)(),H=e=>(0,a.d4)(r=>!!r.mirror.appModel[e]),K=(0,G.XR)(),W=(0,k.J2)(c.Ez5.uiState().filterAnnotationCategoryId),Y=m===F.nT.Design,j=m===F.nT.Slides,X=m===F.nT.Sites,Z=m===F.nT.Figmake,J=m===F.nT.Illustration,Q="design"===(0,F.oD)(m),ee="whiteboard"===(0,F.oD)(m),et=(0,a.d4)(e=>e.mirror.appModel.prototypeCanvasUiVisible),er=(0,k.J2)(c.Ez5.editorPreferences().showPropertyLabels),en=(0,k.J2)(c.Ez5.editorPreferences().showFrameGrids),ei=(0,k.J2)((0,R.d)().showFrameGridsViewOnly),ea=(0,z.Td)(),eo=!ea,es=eo?"showFrameGrids":"showFrameGridsViewOnly",el=(0,k.J2)((0,d.k)().figjam_snap_to_dot_grid_reset?(0,P.UK)().snapToDotGridStagingReset:(0,P.UK)().snapToDotGrid),ec=(0,k.J2)((0,P.UK)().snapToPixelGrid),ed=Q?ec:el,eu=(0,k.J2)((0,P.UK)().showDotGrid),ep=(0,k.J2)((0,P.UK)().renderGrid),em=Q?ep:eu,eh=Q?"renderGrid":"showDotGrid",e_=C,eg=!1,ef=!1;C?K.length>0?(e_=!1,eg=!1,ef=!0):(e_=!0,eg=!1,ef=!1):N&&!ea&&!J&&(e_=!1,eg=!0,ef=!1,(0,d.k)().dt_annotations_always_expand&&(e_=!0,eg=!1,ef=!1));let eE=[{type:"ZOOM_IN",shortcut:(0,U.c1)(v,"zoom-in"),recordingKey:"zoomIn",disabled:!(0,D.Zr)("zoom-in")},{type:"ZOOM_OUT",shortcut:(0,U.c1)(v,"zoom-out"),recordingKey:"zoomOut",disabled:!(0,D.Zr)("zoom-out")},{type:"ZOOM_TO_FIT",shortcut:(0,U.c1)(v,"zoom-to-fit"),recordingKey:"zoomToFit"},{type:"ZOOM_TO_50",recordingKey:"zoomTo50"},{type:"ZOOM_TO_100",shortcut:(0,U.c1)(v,"zoom-reset"),recordingKey:"zoomTo100"},{type:"ZOOM_TO_200",recordingKey:"zoomTo200"},{type:"separator"},{type:"PIXEL_PREVIEW",isChildChecked:E,recordingKey:"activeCanvasPixelPreview",hidden:!Y&&!C&&!J,disabled:(0,D.Zr)("activeCanvasPixelPreview"),children:[{type:"PIXEL_PREVIEW_DISABLED",shortcut:(0,U.c1)(v,"toggle-pixel-preview"),isChecked:!E,recordingKey:"disabled"},{type:"PIXEL_PREVIEW_1X",isChecked:E&&!b,shortcut:b?void 0:(0,U.c1)(v,"toggle-pixel-preview"),recordingKey:"1x"},{type:"PIXEL_PREVIEW_2X",isChecked:E&&b,shortcut:b?(0,U.c1)(v,"toggle-pixel-preview"):void 0,recordingKey:"2x"}]},{type:ee?"DOT_GRID":"PIXEL_GRID",shortcut:(0,U.c1)(v,Q?"toggle-grid":"toggle-show-dot-grid"),recordingKey:eh,isChecked:em,disabled:!(0,D.Zr)("toggle-grid")},{type:ee?"SNAP_TO_DOT_GRID":"SNAP_TO_PIXEL_GRID",shortcut:(0,U.c1)(v,Q||j?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),recordingKey:ee?"snapToDotGrid":"snapToPixelGrid",isChecked:ed,disabled:!(0,D.Zr)(Y||j||X||Z||J?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),hidden:C},{type:"LAYOUT_GRIDS",shortcut:(0,U.c1)(v,"toggle-shown-layout-grids"),recordingKey:es,hidden:!Q||!w,isChecked:eo?en:ei,disabled:(0,D.Zr)(es)},{type:"RULERS",shortcut:(0,U.c1)(v,"toggle-rulers"),recordingKey:"renderRulers",hidden:!Q,isChecked:(0,k.J2)((0,P.UK)().renderRulers),disabled:(0,D.Zr)("renderRulers")},{type:"OUTLINES_MENU",recordingKey:"outlinesMenu",hidden:!Q||!w,disabled:(0,D.Zr)("showOutlines"),children:[{type:"OUTLINES",shortcut:(0,U.c1)(v,"toggle-outlines"),isChecked:(0,k.J2)((0,R.d)().showOutlines),recordingKey:"showOutlines"},{type:"separator"},{type:"OUTLINES_HIDDEN_LAYERS",isChecked:(0,k.J2)((0,R.d)().showOutlineHiddenLayers),recordingKey:"hiddenLayers"},{type:"OUTLINES_OBJECT_BOUNDS",isChecked:(0,k.J2)((0,R.d)().showOutlineObjectBounds),recordingKey:"objectBounds"}]},{type:"MULTIPLAYER_CURSORS",shortcut:(0,U.c1)(v,"toggle-multiplayer-cursors"),recordingKey:"hideMultiplayerCursors",isChecked:!H("hideMultiplayerCursors"),disabled:(0,D.Zr)("hideMultiplayerCursors")},{type:"PROPERTY_LABELS",recordingKey:"toggleShowPropertyLabels",isChecked:er,hidden:!h},{type:"separator"},{type:"COMMENTS",shortcut:(0,U.c1)(v,"toggle-show-comments"),recordingKey:"showComments",isChecked:H("showComments"),disabled:(0,D.Zr)("showComments")},{type:"SHOW_ANNOTATIONS",shortcut:(0,U.c1)(v,"toggle-show-annotations"),recordingKey:"showAnnotationsInDevMode",isChecked:(0,k.J2)(c.Ez5.uiState().showAnnotationsInDevMode),disabled:!(0,D.Zr)("toggle-show-annotations"),hidden:!e_},{type:"ALWAYS_EXPAND_ANNOTATIONS",recordingKey:"alwaysExpandAnnotations",isChecked:(0,k.J2)(c.Ez5.uiState().alwaysExpandAnnotations),disabled:!(0,D.Zr)("toggle-always-expand-annotations"),hidden:!eg},{type:"ANNOTATIONS_MENU",recordingKey:"annotationFilters",hidden:!ef,children:[{type:"SHOW_ANNOTATIONS",shortcut:(0,U.c1)(v,"toggle-show-annotations"),recordingKey:"showAnnotationsInDevMode",isChecked:(0,k.J2)(c.Ez5.uiState().showAnnotationsInDevMode),disabled:!(0,D.Zr)("toggle-show-annotations")},...K.length>0?[{type:"separator"},{type:"SHOW_ALL_ANNOTATION_CATEGORIES",icon:i.createElement(s.y,{className:$.n$}),isChecked:!W,recordingKey:"showAllAnnotationCategories"},...K.map(e=>{let r=(0,G.uA)(e);return{type:"SHOW_ANNOTATION_CATEGORY",displayText:r,displayTextClassName:$.Mg,icon:i.createElement("div",{className:$.UF,style:{backgroundColor:(0,G.FQ)(e)??void 0}}),isChecked:e.id===W,callback:()=>{p("filter_annotation_category",{categoryLabel:r,source:"zoom_menu"}),c.Ez5?.uiState().filterAnnotationCategoryId.set(e.id)},recordingKey:`showAnnotationCategory-${r}`}})]:[]]},{type:"CODE_CONNECT_ANNOTATIONS",isChecked:M,hidden:!C||!(0,d.k)().dt_code_connect_overview_on_canvas},{type:"PROTOTYPING",shortcut:(0,U.c1)(v,"toggle-prototyping-info"),recordingKey:"prototypingMode",hidden:!Y||T,isChecked:et}],ey=i.useCallback(e=>{c.glU.setCanvasZoomScale(e/100)},[]);return i.createElement(q,{targetRect:e,showingZoomDropdown:r,toggleZoomMenu:n,recordingKey:o,allowCodegenOptions:Q,currentZoom:100*f,dropdownItems:eE,onSelectDropdownItem:(e,r,i)=>{switch(e){case"ZOOM_IN":O.Y5.triggerAction("zoom-in",{source:"zoom-menu"});break;case"ZOOM_OUT":O.Y5.triggerAction("zoom-out",{source:"zoom-menu"});break;case"ZOOM_TO_FIT":O.Y5.triggerAction("zoom-to-fit",{source:"zoom-menu"});break;case"ZOOM_TO_50":c.glU.setCanvasZoomScale(.5);break;case"ZOOM_TO_100":c.glU.setCanvasZoomScale(1);break;case"ZOOM_TO_200":c.glU.setCanvasZoomScale(2);break;case"PIXEL_PREVIEW":L.VU.get("toggle-pixel-preview","toolbar")(r);break;case"PIXEL_GRID":L.VU.get("toggle-grid","toolbar")(r);break;case"SNAP_TO_PIXEL_GRID":L.VU.get("toggle-snapping-to-pixels","toolbar")(r);break;case"SNAP_TO_DOT_GRID":L.VU.get("toggle-snapping-to-dots","toolbar")(r);break;case"DOT_GRID":L.VU.get("toggle-show-dot-grid","toolbar")(r);break;case"LAYOUT_GRIDS":L.VU.get("toggle-shown-layout-grids","toolbar")(r);break;case"MULTIPLAYER_CURSORS":L.VU.get("toggle-multiplayer-cursors","toolbar")(r);break;case"PROPERTY_LABELS":O.Y5.triggerAction("toggle-show-property-labels",{source:"zoom-menu"});break;case"PROTOTYPING":L.VU.get("toggle-prototyping-info","toolbar")(r);break;case"RULERS":L.VU.get("toggle-rulers","toolbar")(r);break;case"SLICES":L.VU.get("toggle-show-slices","toolbar")(r);break;case"COMMENTS":L.VU.get("toggle-show-comments","toolbar")(r);break;case"SHOW_ANNOTATIONS":L.VU.get("toggle-show-annotations","toolbar")(r);break;case"ALWAYS_EXPAND_ANNOTATIONS":L.VU.get("toggle-always-expand-annotations","toolbar")(r);break;case"SHOW_ALL_ANNOTATION_CATEGORIES":p("filter_annotation_category",{categoryLabel:"all",source:"zoom_menu"}),c.Ez5?.uiState().filterAnnotationCategoryId.set(null);break;case"SHOW_ANNOTATION_CATEGORY":i?.();break;case"CODE_CONNECT_ANNOTATIONS":(0,d.k)().dt_code_connect_overview_on_canvas_sprig&&M&&B("track","code_connect_on_canvas_hidden"),x(e=>!e);break;case"OUTLINES":O.Y5.triggerAction("toggle-outlines",{source:"zoom-menu"});break;case"OUTLINES_HIDDEN_LAYERS":O.Y5.triggerAction("toggle-outline-mode-hidden-layers",{source:"zoom-menu"});break;case"OUTLINES_OBJECT_BOUNDS":O.Y5.triggerAction("toggle-outline-mode-object-bounds",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_DISABLED":E&&O.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_1X":E||O.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),b&&O.Y5.triggerAction("toggle-retina-mode",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_2X":E||O.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),b||O.Y5.triggerAction("toggle-retina-mode",{source:"zoom-menu"})}n()},onSubmitCustomZoom:ey})}function q({targetRect:e,showingZoomDropdown:r,recordingKey:n,allowCodegenOptions:o,currentZoom:s,dropdownItems:c,displayAboveTarget:u,onSelectDropdownItem:p,onSubmitCustomZoom:m}){let h=(0,a.wA)(),_="ui3"===(0,l.DP)().version,g=(0,a.d4)(e=>(0,V.$A)(e.selectedView)),y=(0,G.XR)(),v=i.useMemo(()=>({ZOOM_IN:(0,T.t)("fullscreen_actions.zoom-in"),ZOOM_OUT:(0,T.t)("fullscreen_actions.zoom-out"),ZOOM_TO_FIT:(0,T.t)("fullscreen_actions.zoom-to-fit"),ZOOM_TO_50:(0,T.t)("fullscreen.toolbar.zoom_menu.zoom_to_50"),ZOOM_TO_100:(0,T.t)("fullscreen_actions.zoom-reset"),ZOOM_TO_200:(0,T.t)("fullscreen.toolbar.zoom_menu.zoom_to_200"),PIXEL_PREVIEW:(0,T.t)("fullscreen.toolbar.zoom_menu.pixel_preview"),PIXEL_GRID:(0,T.t)("fullscreen_actions.toggle-grid"),SNAP_TO_PIXEL_GRID:(0,T.t)("fullscreen_actions.toggle-snapping-to-pixels"),PROTOTYPING:(0,T.t)("fullscreen_actions.toggle-prototyping-information"),SNAP_TO_DOT_GRID:(0,T.t)("fullscreen_actions.toggle-snapping-to-dots"),DOT_GRID:(0,T.t)("fullscreen_actions.toggle-show-dot-grid"),LAYOUT_GRIDS:(0,d.k)().ce_tv_grid?(0,T.t)("fullscreen_actions.toggle-shown-layout-guides"):(0,T.t)("fullscreen_actions.toggle-shown-layout-grids"),MULTIPLAYER_CURSORS:(0,T.t)("fullscreen_actions.toggle-multiplayer-cursors"),PROPERTY_LABELS:(0,T.t)("fullscreen_actions.toggle-show-property-labels"),CODE_CONNECT_ANNOTATIONS:(0,T.t)("fullscreen_actions.toggle-show-code-connect-annotations"),RULERS:(0,T.t)("fullscreen_actions.toggle-rulers"),SLICES:(0,T.t)("fullscreen_actions.toggle-show-slices"),COMMENTS:(0,T.t)("fullscreen_actions.toggle-show-comments"),SHOW_ANNOTATIONS:!((0,d.k)().dt_annotations_always_expand&&!g)&&y.length>0?(0,T.t)("fullscreen_actions.toggle-show-annotations-v2"):(0,T.t)("fullscreen_actions.toggle-show-annotations"),ALWAYS_EXPAND_ANNOTATIONS:(0,T.t)("fullscreen_actions.toggle-always-expand-annotations"),ANNOTATIONS_MENU:(0,T.t)("fullscreen_actions.annotations-menu"),SHOW_ALL_ANNOTATION_CATEGORIES:(0,T.t)("fullscreen_actions.show-all-annotation-categories"),SHOW_ANNOTATION_CATEGORY:"",OUTLINES:(0,T.t)("fullscreen_actions.toggle-outlines"),OUTLINES_MENU:(0,T.t)("fullscreen_actions.outlines-menu"),OUTLINES_HIDDEN_LAYERS:(0,T.t)("fullscreen_actions.outline-mode-hidden-layers"),OUTLINES_OBJECT_BOUNDS:(0,T.t)("fullscreen_actions.outline-mode-object-bounds"),PIXEL_PREVIEW_DISABLED:(0,T.t)("fullscreen.toolbar.zoom_menu.pixel_preview_disabled"),PIXEL_PREVIEW_1X:(0,T.t)("fullscreen.toolbar.zoom_menu.pixel_preview_1x"),PIXEL_PREVIEW_2X:(0,T.t)("fullscreen.toolbar.zoom_menu.pixel_preview_2x"),SINGLE_PROPERTIES_PANEL:(0,T.t)("fullscreen_actions.single-properties-panel")}),[g,y.length]),I=i.useMemo(()=>{let e=r=>{if("separator"===r.type)return{displayText:"",disabled:!0,separator:!0};let{children:n,...i}=r,a={displayText:r.displayText??v[r.type]};switch(r.type){case"ZOOM_TO_50":a.isChecked=50===s;break;case"ZOOM_TO_100":a.isChecked=100===s;break;case"ZOOM_TO_200":a.isChecked=200===s}return n&&(a.children=n.map(e)),{...i,...a}};return c.map(e)},[s,c,v]),S=i.useCallback((e,r)=>{p(e.type,r,e.callback)},[p]);return i.createElement(W.j,{items:I,onSelectItem:S,parentRect:e,showPoint:!_,dispatch:h,recordingKey:E.Pt(n,"dropdown"),alwaysShowCheckMarkOffset:!0,allowCodegenOptions:o,displayAboveTarget:u},i.createElement("div",{style:{height:2}}),i.createElement("div",{className:$.zj,onKeyDown:e=>{(e.keyCode===f.Uz.ENTER||e.keyCode===f.Uz.ESCAPE)&&r&&h(w.oB())}},i.createElement(K.A,{className:$.hF,placeholderValue:`${Math.round(s)}%`,cancel:e=>{e&&e.blur()},submit:e=>{e.endsWith("%")&&(e=e.substr(0,e.length-1));let r=-1;try{r=parseInt(e,10)}catch(e){}r>0&&m(r)},recordingKey:E.Pt(n,"dropdown","zoomInput")})),i.createElement(b.wv,null))}i.memo(function({recordingKey:e}){let r=(0,a.wA)(),n=i.useRef(null),s=100*(0,k.J2)((0,R.d)().activeCanvasCurrentZoom),l=(0,M.BK)(Y),[c,d]=(0,i.useState)(null),u=(0,N.GS)(),{isPropertiesPanelCollapsed:p}=(0,C.iT)(),_=i.useCallback(()=>{d(n?.current?.getBoundingClientRect()||null)},[n]);i.useEffect(()=>(_(),h._.addListener(_),window.addEventListener("resize",_),()=>{h._.removeListener(_),window.removeEventListener("resize",_)}),[_]);let g=i.useCallback(e=>{e.stopPropagation(),e.preventDefault(),_(),l.toggle({hasOwnEscKeyHandler:!1})},[l,_]),f=l.showing&&c&&i.createElement(j,{targetRect:c,showingZoomDropdown:l.showing,toggleZoomMenu:l.toggle,recordingKey:e}),y=u?$.l4:$.Xf,b=u?l.showing?$.wg:p?$.Jk:$.Y7:l.showing?$.om:$.wR,I=u?l.showing?$.S0:$.i5:$.cm,S=i.createElement("div",{className:b,ref:u?n:void 0},i.createElement("div",{className:I,"data-testid":"zoom-amount"},function(){let e=Math.round(s);return u?e.toString().length<5?`${e}%`:`${e}`:`${e}%`}()),i.createElement("div",{className:m()($.FH,{[$.WB]:u&&l.showing}),ref:n},i.createElement(H.c,{dispatch:r,dropdownKey:Y,showingDropdown:l.showing,dataTestId:"zoom-menu-chevron",toggleOnClick:!0,isUI3:u})));return i.createElement("div",{className:$.sH},i.createElement(o.o,{eventListeners:["onClick"]},i.createElement(v.L,{"aria-controls":Y,"aria-expanded":l.showing,"aria-haspopup":"menu",className:y,"data-tooltip":(0,T.t)("fullscreen.zoom_menu.zoom_view_options"),"data-tooltip-type":x.Ib.TEXT,enabled:!0,isUI3:u,onClick:g,onboardingKey:B.q,recordingKey:E.Pt(e,"zoomButton"),selected:l.showing},S),f))})},768790:(e,r,n)=>{n(848318),n(730169),n(442313),n(139736),n(18262),n(401822),n(6760)},991519:(e,r,n)=>{n(848318),n(442313),n(180423),n(18262)},727277:(e,r,n)=>{n(848318),n(716544),n(741419),n(179703),n(730169),n(442313),n(18262),n(529103),n(401822)},573934:(e,r,n)=>{n(848318),n(716544),n(741419),n(179703),n(730169),n(442313),n(405866),n(139736),n(18262),n(529103),n(487497),n(401822),n(61614),n(768790)},589869:(e,r,n)=>{n(848318),n(716544),n(536384),n(379338),n(145015),n(442313),n(405866),n(155651),n(727341),n(744149),n(577023),n(461665),n(243973),n(45584),n(849752),n(207715),n(7047),n(505137),n(401822),n(334366);var i=(e=>(e.MOUSE="mouse",e.TRACKPAD="trackpad",e))(i||{});let a=e=>"dark"===e?staticAssetWithUploadsPath("d2eefebde737b9d5fba2b35193dcd51e26ed0164"):staticAssetWithUploadsPath("99d648a7ac711ba9d19976515105d6395eeb2d4c"),o=e=>"dark"===e?staticAssetWithUploadsPath("e27a5d39945685c389cd50e9f08144678edefeab"):staticAssetWithUploadsPath("2357b697bfe85711b1de702dc63611ef8bb75859"),s=e=>"dark"===e?staticAssetWithUploadsPath("f49911183f0d3a2b6ee5044b42e0a14fe549999a"):staticAssetWithUploadsPath("2a0c8ae88f72d6155bd818a0c51c8ced71fcecfa"),l=e=>"dark"===e?staticAssetWithUploadsPath("045c7e1324e953b8ee9ec91ac4e944995662e11e"):staticAssetWithUploadsPath("c764bcd0a726bf2d31f70f16808785efeae4de56"),c=e=>"dark"===e?staticAssetWithUploadsPath("7a24deb2e05c4542dbd8b6bd1f009e26ba761b48"):staticAssetWithUploadsPath("32f4843d9b24a4b95129bacd47f6b81fe439228f")},663395:(e,r,n)=>{n.d(r,{B:()=>i}),n(848318),n(716544),n(730169),n(442313),n(405866),n(727341),n(139736),n(18262),n(529103),n(401822),n(6760);let i="text-panel-container"},243929:(e,r,n)=>{n(848318),n(716544),n(39773),n(405866),n(201494),n(176629),n(684525),n(369600),n(661780),n(849752),n(312255),n(35315),n(151144),n(442313),n(173970),n(180423),n(323075),n(967867),n(51910),n(376780),n(766878),n(18262),n(768790),n(991519),n(727277),n(663395),n(741419),n(667323),n(449977),n(61614),n(401822),n(179703),n(487497),n(573934),n(589869),n(852338),n(730169),n(139736),n(6760),n(475125)},401822:(e,r,n)=>{n.d(r,{Qf:()=>o}),n(952423),n(992444),n(449977);var i=n(956207);n(45584);var a=(e=>(e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD",e))(a||{});function o(e){let r=null;try{r=e.getCurrentPage()}catch(e){if(e.message!==i.e)throw e}return r}},52953:(e,r,n)=>{n.d(r,{Cr:()=>W,Gx:()=>V,Q8:()=>q,V5:()=>Y,_X:()=>G,hu:()=>z,nE:()=>K,rf:()=>$});var i=n(848318),a=n(716544),o=n(719670),s=n(897378),l=n(415873),c=n(741419),d=n(673906),u=n(157907),p=n(921494),m=n(654104),h=n(701780),_=n(566699),g=n(442313),f=n(542052),E=n(926252),y=n(930969),b=n(992444),v=n(773422),T=n(483372),I=n(503024),S=n(651620),w=n(478622),A=n(211075),C=n(163677),N=n(302942),L=n(99091),O=n(949651),R=n(538688),P=n(931641),D=n(6760),M=n(709907),k=n(281192),F=n(337521),x=n(202758),U=n(934746),B=n(541910);function V(e,r,n){let o=(0,a.wA)(),s=(0,a.d4)(e=>e.variablePickerShown),l=(0,i.useCallback)(i=>{i?o((0,E.Yi)({item:i,callback:i=>{let a=(0,B.y$)(n,i);d.l7.user("alias-variable",()=>c.CWU.setVariableValueForMode(e,r,a))&&b.Y5.triggerAction("commit")}})):d.l7.user("unalias-variable",()=>c.CWU.detachVariableValueForMode(e,r))&&b.Y5.triggerAction("commit")},[o,e,r,n]);return[s.isShown&&"variable-picker-alias"===s.type&&s.variableID===e&&s.modeID===r,(0,i.useCallback)((i,a)=>{let s=i.getBoundingClientRect();o((0,y.C)({type:"variable-picker-alias",isShown:!0,initialPosition:new h.Mi(s.left,s.bottom),initialView:a?.initialView,variableID:e,modeID:r,resolvedType:n,onVariableSelected:l}))},[e,r,n,o,l]),l]}function G({children:e,...r}){return i.createElement(H,{...r,children:e})}function H({fields:e,children:r,resolvedType:n,requestedTypes:s,editingStyleGuid:l,responsiveTextStyleVariantIndex:c,initialPickerPosition:d,onVariableSelected:u,onExpressionSubmitted:p,onComponentPropSelected:m}){let{consumedVariable:h}=(0,B.u3)(e,l,c),_=(0,O.MH)(h),g=(0,v.u)(_??void 0),f=!!g&&(0,O.eF)(g),b=(0,B.Ek)(e),[T,I,w,A,N]=function(e,r,n,s,l,c,d,u){let{mapVariableIdToTypedValue:p}=s??{},m=(0,a.wA)(),h=(0,a.d4)(e=>e.variablePickerShown),{updateVariableConsumption:_,clearVariableConsumption:g}=(0,B.u3)(e),f=(0,i.useCallback)(e=>{n?n(e):e?m((0,E.Yi)({item:e,callback:n=>{p?_(p({variable:e,variableId:n})):_((0,B.y$)(r,n))}})):g()},[n,m,_,r,g,p]);return[h.isShown&&"variable-picker-fields"===h.type&&(0,o.c2)(h.fields,e)&&h.responsiveTextStyleVariantIndex===u&&s?.metadata===h.metadata,(0,i.useCallback)((n,i)=>{let a=i?.initialPosition??d?.()??(0,S.VZ)(n,R.d9,!1);m((0,y.C)({type:"variable-picker-fields",isShown:!0,initialPosition:a,fields:e,resolvedType:r,requestedTypes:s?.requestedTypes,currentFieldValue:i?.currentFieldValue,onVariableSelected:f,metadata:s?.metadata,variableFilters:s?.variableFilters,onExpressionSubmitted:void 0,onComponentPropSelected:c,responsiveTextStyleVariantIndex:u}))},[d,m,e,r,s?.requestedTypes,s?.metadata,s?.variableFilters,f,c,u]),f,void 0,c]}(e,n,u,{requestedTypes:s},0,m,d,c),L=(0,i.useMemo)(()=>({showBindingUI:I,isShowingBindingUI:T,onVariableSelected:w,boundVariableId:_,isBoundVariableDeleted:f,onExpressionSubmitted:A,onComponentPropSelected:N,mismatchedValue:b}),[I,T,w,_,f,A,b,N]);return i.createElement(C.p.Provider,{value:L},r)}function K({variableID:e,modeID:r,children:n,resolvedType:a}){let[o,s,l]=V(e,r,a),c=(0,v.bL)(e,r),d=(0,O.MH)(c??null),u=(0,v.u)(d??void 0),p=!!u&&(0,O.eF)(u),m=(0,i.useMemo)(()=>({showBindingUI:s,isShowingBindingUI:o,onVariableSelected:l,boundVariableId:d,isBoundVariableDeleted:p}),[s,o,l,d,p]);return i.createElement(C.p.Provider,{value:m},n)}function W({children:e,pickerType:r="create-modal",resolvedType:n,variableValue:a,onVariableValueChange:o,onVariableSelected:s}){let l=i.useRef(),[d,p]=i.useState(!1),m=(0,i.useCallback)(()=>{p(!1)},[]),_=(0,i.useCallback)(e=>{let r=e.getBoundingClientRect();l.current=new h.Mi(r.left,r.bottom),p(!0)},[]),g=a.type===c.Z_n.ALIAS?a.value:void 0,f=(0,v.u)(g),E=!!f&&(0,O.eF)(f),y=(0,i.useMemo)(()=>({showBindingUI:_,isShowingBindingUI:d,boundVariableId:g??null,isBoundVariableDeleted:E}),[_,d,g,E]),b=(0,v.BQ)(g);return i.createElement(C.p.Provider,{value:y},e,d?a.resolvedType!==c.rXF.COLOR?(0,u.k)().asset_binding_picker?i.createElement(x.fs,{resolvedType:n,onVariableSelected:s,onClose:m,initialPosition:l.current,pickerType:r}):i.createElement(M.Q,null,i.createElement(Z,{disabledVariableIds:new Set,boundVariable:null,initialPosition:l.current,resolvedType:n,onVariableSelected:s,onClose:m,pickerType:r,recordingKey:"variableBindingsDropdown"})):a.type===c.Z_n.COLOR?i.createElement(A.h,{disabledVariableIds:new Set,color:a.value,boundVariable:null,initialPosition:l.current,recordingKey:"variableBindingsDropdown",onChange:e=>o({type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:{...e,a:1}}),onVariableChange:s,onClose:m}):a.type===c.Z_n.ALIAS?i.createElement(A.h,{disabledVariableIds:new Set,color:b.value,boundVariable:f,initialPosition:l.current,recordingKey:"variableBindingsDropdown",onChange:e=>o({type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:{...e,a:1}}),onVariableChange:s,onClose:m}):void 0:null)}function z({boundVariableId:e,resolvedType:r,requestedTypes:n,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l,children:c}){let d=(0,v.u)(e??void 0),u=!!d&&(0,O.eF)(d),[p,m,_]=function({resolvedType:e,requestedTypes:r,boundVariableId:n,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l}){let c=(0,i.useId)(),d=(0,a.wA)(),u=(0,a.d4)(e=>e.variablePickerShown);return[u.isShown&&"variable-picker-controlled"===u.type&&u.key===c,(0,i.useCallback)((i,a)=>{let u=i.getBoundingClientRect();d((0,y.C)({type:"variable-picker-controlled",isShown:!0,initialPosition:a?.initialPosition??o?.()??new h.Mi(u.left,u.bottom),initialView:a?.initialView,variableID:n,key:c,resolvedType:e,requestedTypes:r,onVariableSelected:s,onComponentPropSelected:l}))},[d,n,c,e,r,o,s,l]),c]}({resolvedType:r,requestedTypes:n,boundVariableId:e,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l});return i.createElement(C.p.Provider,{value:{boundVariableId:e??null,isBoundVariableDeleted:u,isShowingBindingUI:p,showBindingUI:m,onVariableSelected:s,onComponentPropSelected:l,variableBindingContextKey:_}},c)}function $({variableScope:e}){let r=(0,a.wA)(),n=(0,i.useCallback)(()=>{r((0,y.B)())},[r]),o=(0,a.d4)(e=>e.variablePickerShown);if(!o.isShown||"variable-picker-controlled"!==o.type)return null;let{resolvedType:s,initialPosition:l,requestedTypes:c,variableID:d,onVariableSelected:u,variableFilters:p}=o;return i.createElement(j,{variableID:d,resolvedType:s,requestedTypes:c,initialPosition:l,onVariableSelected:u,onClose:n,variableScopes:e?new Set([e]):void 0,variableFilters:p})}function Y({variableScope:e,onPickerClose:r}){let n=(0,a.wA)(),o=(0,i.useCallback)(()=>{r?.(),n((0,y.B)())},[n,r]),s=i.useContext(C.p)?.isShowingBindingUI,l=i.useContext(C.p)?.variableBindingContextKey,c=(0,a.d4)(e=>e.variablePickerShown);if(!s||!c.isShown||"variable-picker-controlled"!==c.type||c.key!==l)return null;let{resolvedType:d,initialPosition:p,requestedTypes:m,variableID:h,onVariableSelected:_,onComponentPropSelected:g,variableFilters:f}=c;return(0,u.k)().asset_binding_picker?i.createElement(x.dX,{...c,onClose:o,variableScopes:e?new Set([e]):void 0}):i.createElement(j,{variableID:h,resolvedType:d,requestedTypes:m,initialPosition:p,onVariableSelected:_,onComponentPropSelected:g,onClose:o,variableScopes:e?new Set([e]):void 0,variableFilters:f})}function j({resolvedType:e,requestedTypes:r,initialPosition:n,variableID:a,onVariableSelected:o,onComponentPropSelected:s,onClose:l,variableScopes:c,variableFilters:d}){let u=(0,v.u)(a);return i.createElement(Z,{boundVariable:u,disabledVariableIds:new Set,initialPosition:n,onClose:l,onComponentPropSelected:s,onVariableSelected:o,pickerType:s?"prop-assignment":"fields",recordingKey:"variableBindingsDropdown",requestedTypes:r,resolvedType:e,variableFilters:d,variableScopes:c})}function q(){let e=(0,a.d4)(e=>e.variablePickerShown);return e.isShown&&"variable-picker-alias"===e.type?i.createElement(X,{pickerShownState:e}):null}function X({pickerShownState:e}){let r=(0,a.wA)(),{variableID:n,modeID:o,resolvedType:s,initialPosition:l,initialView:u,onVariableSelected:p,variableFilters:h}=e,_=(0,v.bL)(n,o),g=(0,v.u)(_?.type===c.Z_n.ALIAS?_?.value:void 0),f=(0,i.useCallback)(()=>{r((0,y.B)())},[r]),E=(0,i.useCallback)((e,r)=>{let i={type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:e};d.l7.user("set-color-variable-value",()=>c.CWU.setVariableValueForMode(n,o,i))&&r===T.zk.YES&&b.Y5.triggerAction("commit")},[n,o]);return _?.resolvedType===c.rXF.COLOR&&_?.type!==c.Z_n.NODE_FIELD_ALIAS?i.createElement(M.Q,null,i.createElement(U.I,{disabledVariableIds:new Set([n]),boundVariable:g,variableValue:_,initialPosition:l,initialView:u,onColorChange:E,onVariableSelected:p,onClose:f,recordingKey:"variableBindingsDropdown"}),i.createElement(P.$3,{recordingKey:m.Pt("variableBindingsDropdown","closer"),onClose:f})):i.createElement(i.Fragment,null,i.createElement(M.Q,null,i.createElement(Z,{disabledVariableIds:new Set([n]),initialPosition:l,resolvedType:s,variableFilters:h,boundVariable:g,onVariableSelected:p,onClose:f,pickerType:"alias",recordingKey:"variableBindingsDropdown"})),i.createElement(P.$3,{recordingKey:m.Pt("variableBindingsDropdown","closer"),onClose:f}))}function Z({disabledVariableIds:e,initialPosition:r,boundVariable:n,newVariableInitialValue:a,resolvedType:o,requestedTypes:c,variableFilters:d,fields:u,pickerType:h,variableScopes:E,recordingKey:y,onVariableSelected:b,onComponentPropSelected:v,onClose:T}){let A=i.useRef(null),{VariableAndComponentPropCreateModalRoot:C}=(0,i.useContext)(N.l)??{},[O,M]=(0,i.useState)(!1),x=i.useRef(),U=(0,p.R)(e=>(0,w.Nw)(e)??(0,w.y7)(e)),B=(0,i.useMemo)(()=>(0,F.Kq)(!!C,!!U,u),[C,U,u]);function V(){let e=A.current?.getEl();if(!e)return;let r=(0,S.cn)(e,L.i);x.current=r,M(!0)}return i.createElement(i.Fragment,null,i.createElement(D.vx,{ref:A,title:"",headerSize:"hidden",initialPosition:r,onClose:T,dragHeaderOnly:!1,initialWidth:R.d9,autoflowHeight:!0},i.createElement(P.Rp,{disabledVariableIds:e,onClose:T,onComponentPropSelected:v,onVariableSelected:b,pickerType:h,recordingKey:y,requestedTypes:c,resolvedType:o,selectedItem:n,setControlRightButtons:function(){if(void 0===o||"fields"!==h&&"prop-assignment"!==h)return;let e=B?(0,g.t)("variables.binding_ui.create_variable_property_button_tooltip"):(0,g.t)("variables.binding_ui.create_variable_button_tooltip");return i.createElement(s.K,{"aria-label":e,recordingKey:m.Pt(y,"createVariable"),onClick:V,htmlAttributes:{"data-tooltip":e,"data-tooltip-type":I.Ib.TEXT}},i.createElement(_.U,{svg:f.KC["plus-32"]},i.createElement(l.e,null)))}(),variableFilters:d,variableScopes:E})),i.createElement(P.$3,{recordingKey:m.Pt(y,"closer"),onClose:T}),O&&void 0!==o&&x.current&&i.createElement(k.x,{resolvedType:o,creationModalInitialPosition:x.current,newVariableInitialValue:a,onClose:()=>M(!1),onVariableSelected:b,fields:u}))}n(243315)},337521:(e,r,n)=>{n.d(r,{IQ:()=>s,Kq:()=>l});var i=n(741419);n(718451),n(773422);var a=n(353304),o=n(949651);function s(e,r,n,a){return a&&r?{type:i.Z_n.ALIAS,resolvedType:e,value:a}:n?{type:(0,o.e4)(e),resolvedType:e,value:n}:void 0}function l(e,r,n){return e&&r&&!!(0,a.fx)(n)}n(541910)},202758:(e,r,n)=>{n.d(r,{Y:()=>M,Zq:()=>F,dX:()=>k,fs:()=>x});var i=n(848318),a=n(716544),o=n(897378),s=n(415873),l=n(741419),c=n(673906),d=n(157907),u=n(921494),p=n(654104),m=n(566699),h=n(442313),_=n(542052),g=n(930969),f=n(992444),E=n(773422),y=n(483372),b=n(503024),v=n(651620),T=n(478622),I=n(873603),S=n(302942),w=n(99091),A=n(538688),C=n(931641),N=n(709907),L=n(281192),O=n(337521),R=n(934746);function P({disabledVariableIds:e,boundVariable:r,resolvedType:n,requestedTypes:a,variableFilters:l,fields:c,pickerType:d,variableScopes:g,recordingKey:f,onVariableSelected:E,onComponentPropSelected:y,onClose:v,openCreationModal:I}){let{VariableAndComponentPropCreateModalRoot:w}=(0,i.useContext)(S.l)??{},A=(0,u.R)(e=>(0,T.Nw)(e)??(0,T.y7)(e)),N=(0,i.useMemo)(()=>(0,O.Kq)(!!w,!!A,c),[w,A,c]);function L(){I?.()}return i.createElement(C.Rp,{key:"Libraries",disabledVariableIds:e,onClose:v,onComponentPropSelected:y,onVariableSelected:E,pickerType:d,recordingKey:f,requestedTypes:a,resolvedType:n,selectedItem:r,setControlRightButtons:function(){if(void 0===n||"fields"!==d&&"prop-assignment"!==d)return;let e=N?(0,h.t)("variables.binding_ui.create_variable_property_button_tooltip"):(0,h.t)("variables.binding_ui.create_variable_button_tooltip");return i.createElement(o.K,{"aria-label":e,recordingKey:p.Pt(f,"createVariable"),onClick:L,htmlAttributes:{"data-tooltip":e,"data-tooltip-type":b.Ib.TEXT}},i.createElement(m.U,{svg:_.KC["plus-32"]},i.createElement(s.e,null)))}(),variableFilters:l,variableScopes:g})}function D({variableID:e,modeID:r,resolvedType:n,initialPosition:o,initialView:s,onVariableSelected:u,variableFilters:m}){let _=(0,a.wA)(),b=(0,E.bL)(e,r),v=(0,E.u)(b?.type===l.Z_n.ALIAS?b?.value:void 0),T=(0,i.useCallback)(()=>{_((0,g.B)())},[_]),S=(0,i.useCallback)((n,i)=>{let a={type:l.Z_n.COLOR,resolvedType:l.rXF.COLOR,value:n};c.l7.user("set-color-variable-value",()=>l.CWU.setVariableValueForMode(e,r,a))&&i===y.zk.YES&&f.Y5.triggerAction("commit")},[e,r]),w=(0,d.k)().fpl_window?i.Fragment:N.Q;if(b?.resolvedType===l.rXF.COLOR&&b?.type!==l.Z_n.NODE_FIELD_ALIAS)return i.createElement(w,null,i.createElement(R.I,{disabledVariableIds:new Set([e]),boundVariable:v,variableValue:b,initialPosition:o,initialView:s,onColorChange:S,onVariableSelected:u,onClose:T,recordingKey:"variableBindingsDropdown"}),i.createElement(C.$3,{recordingKey:p.Pt("variableBindingsDropdown","closer"),onClose:T}));let L={tabs:[{name:"library",displayText:(0,h.tx)("variables.binding_ui.variable_library_tab_name"),content:i.createElement(P,{disabledVariableIds:new Set([e]),boundVariable:v,resolvedType:n,variableFilters:m,onVariableSelected:u,onClose:T,pickerType:"alias",recordingKey:"variableBindingsDropdown"})}]};return i.createElement(w,null,i.createElement(I.k,{tabProps:L,onClose:T,initialPosition:o,initialWidth:A.d9,recordingKey:"variableBindingsDropdown"}))}function M(){let e=(0,a.d4)(e=>e.variablePickerShown);return e.isShown&&"variable-picker-alias"===e.type?i.createElement(D,{...e}):null}function k({resolvedType:e,requestedTypes:r,initialPosition:n,variableID:a,onVariableSelected:o,onComponentPropSelected:s,onClose:l,variableScopes:c}){let d=(0,E.u)(a),[u,p]=(0,i.useState)(!1),m=(0,i.useRef)(null),_=m.current?(0,v.cn)(m.current,w.i):void 0,g={tabs:[{name:"library",displayText:(0,h.tx)("variables.binding_ui.variable_library_tab_name"),content:i.createElement(P,{boundVariable:d,disabledVariableIds:new Set,onClose:l,onComponentPropSelected:s,onVariableSelected:o,openCreationModal:()=>p(!0),pickerType:s?"prop-assignment":"fields",recordingKey:"variableBindingsDropdown",requestedTypes:r,resolvedType:e,variableScopes:c})}]};return i.createElement(i.Fragment,null,i.createElement(I.k,{tabProps:g,onClose:l,initialPosition:n,initialWidth:A.d9,recordingKey:"variableBindingsDropdown",ref:m}),u&&_&&i.createElement(L.x,{resolvedType:e,creationModalInitialPosition:_,onClose:()=>p(!1),onVariableSelected:o}))}function F({variableScope:e}){let r=(0,a.wA)(),n=(0,i.useCallback)(()=>{r((0,g.B)())},[r]),o=(0,a.d4)(e=>e.variablePickerShown);return o.isShown&&"variable-picker-controlled"===o.type&&(0,d.k)().asset_binding_picker?i.createElement(k,{...o,onClose:n,variableScopes:e?new Set([e]):void 0}):null}function x({resolvedType:e,onVariableSelected:r,onClose:n,initialPosition:a,pickerType:o}){let[s,l]=(0,i.useState)(!1),c=(0,i.useRef)(null),d=c.current?(0,v.cn)(c.current,w.i):void 0,u=(0,i.useMemo)(()=>(0,O.IQ)(e,null),[e]),p={tabs:[{name:"library",displayText:(0,h.tx)("variables.binding_ui.variable_library_tab_name"),content:i.createElement(P,{disabledVariableIds:new Set,boundVariable:null,resolvedType:e,onVariableSelected:r,onClose:n,pickerType:o,recordingKey:"variableBindingsDropdown",openCreationModal:()=>l(!0)})}]};return i.createElement(i.Fragment,null,i.createElement(I.k,{tabProps:p,onClose:n,initialPosition:a,initialWidth:A.d9,recordingKey:"variableBindingsDropdown",ref:c}),s&&void 0!==e&&d&&i.createElement(L.x,{resolvedType:e,creationModalInitialPosition:d,newVariableInitialValue:u,onClose:()=>l(!1),onVariableSelected:r}))}n(243315)},541910:(e,r,n)=>{n.d(r,{Ek:()=>X,JG:()=>F,Px:()=>B,QT:()=>j,R1:()=>k,_B:()=>$,e4:()=>K,kN:()=>x,oU:()=>W,pc:()=>H,u3:()=>G,uA:()=>Y,y$:()=>D,yK:()=>V});var i=n(848318),a=n(716544),o=n(719670),s=n(742464),l=n(741419);n(781131),n(673906);var c=n(897392),d=n(1329),u=n(157907),p=n(39773),m=n(239910),h=n.n(m);n(523035),n(6819);var _=n(575058),g=n(921494);n(442313),n(697714);var f=n(464079),E=n(185067),y=n(717587);n(449737),n(481540);var b=n(718451),v=n(908813),T=n(52004),I=n(773422);n(256054),n(153059);var S=n(931516),w=n(483372),A=n(60546),C=n(555841);n(432676),n(819044);var N=n(654445),L=n(243315),O=n(365581),R=n(450796),P=(e=>(e[e.LEARN_MORE=0]="LEARN_MORE",e[e.REVIEW_UPDATES=1]="REVIEW_UPDATES",e))(P||{});function D(e,r){return{type:l.Z_n.ALIAS,resolvedType:e,value:r}}function M(e){if(0===e.length)return null;if(e.length>=2){for(let r=1;r<e.length;r++)if(!(0,o.c2)(e[r],e[0]))return b.oV}let r=e[0];return r?.isMixed?b.oV:r}function k(){let e=(0,g.R)(e=>{let r=e.mirror.selectionProperties.variableConsumptionInfo;return b.E7(r)?.variableConsumptionMap||{}}),r=(0,T.A5)("variableConsumptionInfo");return{variableConsumptionMap:e,setVariableConsumptionMap:(0,i.useCallback)((e,n=w.zk.YES)=>{r({variableConsumptionMap:e},n)},[r])}}function F(){return(0,b.E7)((0,v.b)("variableConsumptionMap"))||{}}function x(){let e=(0,T.kl)("variableConsumptionInfo"),r=(0,_.k9)(()=>b.E7(e)?.variableSetKeyToModeData||{},[e]),n=function(){let e=(0,T.kl)("variableConsumptionInfo");return(0,_.k9)(()=>b.E7(e)?.variableSetKeyToPageLevelPresetMode||{},[e])}(),i=function(){let e=(0,I.jI)();return(0,_.wm)(()=>{if("loaded"===e.status){let r=e.data?.items.filter(e=>e.modes&&e.modes.length>1);return h()(r,e=>e.key)}return{}},[e])}();return(0,_.wm)(()=>{for(let[e,a]of Object.entries(n))if(!r[e]&&i[e]){let n=i[e];if(!n.modes?.find(e=>e.id===a))continue;r[e]={collectionID:n.node_id,collectionName:n.name,modeOptions:n.modes?.map(e=>({modeId:{guid:e.id,collectionKey:n.key},name:e.name,sortPosition:e.sortPosition,isCompatible:!0}))||[],explicitMode:{guid:a,collectionKey:n.key},inheritMode:null,libraryKey:n.library_key}}return r},[i,n,r])}let U=(0,u.k)().ds_modes_util_include_subtree_by_default;function B({includeSubtree:e=U}={}){let r=(0,T.kl)("variableConsumptionInfo");return(0,_.k9)(()=>(e?b.E7(r)?.variableSetKeyToModeIncludingSubtree:b.E7(r)?.variableSetKeyToMode)??{},[r,e])}function V(e){let r=function(e){let r=(0,I.u)(e),n=x(),i=(0,I.G6)(r?.variableSetId);if(!r||!i)return null;let a="LOCAL"===i.subscriptionStatus?i.keyForPublish:i.key;return n?.[a]??null}(e),n=(0,I.G6)(r?.collectionID);if(!r||!n)return null;let i=r.modeOptions,a=r.explicitMode,o=r.inheritMode,s=a??o;return"MIXED"===s?null:i.find(e=>s?e.modeId.guid===s.guid:e.modeId.guid===n.defaultModeID)??null}function G(e,r,n){let a;let{variableConsumptionMap:o,setVariableConsumptionMap:s}=k(),d=(0,v.b)("guid"),u=F(),p=(0,v.b)("responsiveTextStyleVariants"),m=p&&!(0,b.gl)(p)&&void 0!==n?p[n]:void 0,h=r&&(0,b.hS)(d)&&c.aI(r,d);return{consumedVariable:(a=h&&m?(0,b.E7)(m.variableConsumptionMap)||{}:h?u:o)&&M(e.map(e=>a[e])),updateVariableConsumption:(0,i.useCallback)(r=>{let n={};e.forEach(e=>{n[e]=r,(0,R.oz)(e,r)}),(0,C.f)(l.VD3.VARIABLE_ATTACH,l.e0R.DIRECT,()=>{s(n)})},[s,e]),clearVariableConsumption:(0,i.useCallback)((r=w.zk.YES)=>{let n={};e.forEach(e=>{n[e]=null}),(0,C.f)(l.VD3.VARIABLE_DETACH,l.e0R.DIRECT,()=>{s(n,r)})},[s,e])}}function H(e,r,n,i){return W(e,function(e,r){if(!(void 0===e||0===e&&!r||(0,b.gl)(e)))return{type:l.Z_n.FLOAT,resolvedType:l.rXF.FLOAT,value:e}}(r,i),n)}function K(e,r,n){return W(e,function(e){if(e)return{type:l.Z_n.STRING,resolvedType:l.rXF.STRING,value:e}}(r),n)}function W(e,r,n){let i=(0,E.uQ)(),a=(0,y.Q)(),o=(0,A.ks)(),s=(0,f.v4)(),{variableConsumptionMap:c}=k(),d=n||c,u=function(e){if(e&&(0,b.hS)(e)){if(e.type===l.Z_n.EXPRESSION&&1===e.value.expressionArguments.length){let r=e.value.expressionArguments[0];if(r.type===l.Z_n.ALIAS)return r.value}if(e.type===l.Z_n.FONT_STYLE){let r=e.value.asString??e.value.asFloat;if(r?.type===l.Z_n.ALIAS)return r.value}if(e.type===l.Z_n.ALIAS)return e.value}}(d&&M([e].map(e=>d[e]))||null),p=L.ZM[e]??l.j0r.ALL_SCOPES,m=!u&&o&&i&&r?l.w3z.getIdsOfVariablesWithValue(i,[p],{type:r.type,value:r.value}):[],h=(0,I.u)(u);if(!h)return m.length>0&&r?{matchingVars:{ids:m,rawValue:r}}:{};let _=(0,f.xv)(h,s.id),g=o&&"code"===a.inspectionMode&&_?_:h?.name;return{variable:h,variableDisplayName:g}}function z(e,r,n){if(!e)return{};let{colorVar:i,color:a,opacity:o}=r;if(i?.value?.alias)return{boundVar:d.dI(i.value.alias)};if(!a||!n)return{};let s=(0,I.iC)(e,Array.from(n),{type:l.Z_n.COLOR,resolvedType:l.rXF.COLOR,value:{...a,a:a.a*(o??1)}});return s?{matchingVars:{ids:s,rawValue:{type:l.Z_n.COLOR,value:{...a,a:a.a*(o??1)}}}}:{}}function $(e,r){let n=(0,E.uQ)(),i=(0,y.Q)(),a=(0,f.v4)(),o=(0,A.ks)(),{boundVar:s,matchingVars:l}=z(n,e,r);return q((0,I.u)(s),{variableId:s,matchingVars:l},a.id,o,i.inspectionMode)}function Y(e,r,n,i,a){let o=function(e,r){let n=function(e,r){let n=e.variableScope?new Set([e.variableScope]):void 0,{boundVar:i,matchingVars:a}=z(r,e.paint,n);return{variableId:i,matchingVars:a}}(e,r);if(!n.variableId)return{variable:null,variableData:n};let i=p.zl.get((0,O.Ev)(n.variableId));if(i)return{variable:i,variableData:n};let a=l.CWU.getSubscribedVariableInfo(n.variableId);return a?{variable:(0,S.ZI)(a),variableData:n}:{variable:null,variableData:n}}(e,r),s=q(o.variable,o.variableData,n,i,a);return{...e,variable:s}}function j(e,r,n,i,a){return e.map(e=>e.type===N.q.STYLE?function(e,r,n,i,a){let o=e.paints.map(e=>Y(e,r,n,i,a));return{...e,paints:o}}(e,r,i.id,a,n):Y(e,r,i.id,a,n))}function q(e,r,n,i,a){let o=(0,f.xv)(e,n),s=i&&"code"===a&&o?o:e?.name;return{variable:e,variableDisplayName:s,matchingVars:i?r.matchingVars:void 0}}function X(e){return(0,a.d4)(r=>{let n=b.E7(r.mirror.selectionProperties.variableConsumptionInfo)?.variableNotMatchingSetValue||{},i=e.map(e=>{let r=n[e]??void 0;return(0,s.UU)(r)&&"isMixed"in r?b.oV:r});return 0===i.length?void 0:1===i.length?i[0]:i.every(e=>(0,o.c2)(e,i[0]))?i[0]:b.oV})}},592562:(e,r,n)=>{n.r(r),n.d(r,{CreateVariableForm:()=>Q,CreateVariableFormInput:()=>ee,VariableCreateModalRoot_UNSAFE:()=>$,VariableFormRow:()=>X,useDetachedVariableValue:()=>q,useHandleVariableSelected:()=>J,useHideContextMenu:()=>Z,useVariableCreateModalActions:()=>Y});var i=n(848318),a=n(716544),o=n(445777),s=n(988520),l=n(274451),c=n(731755),d=n(356505),u=n(897378),p=n(605988),m=n(741419),h=n(673906),_=n(353788),g=n(157907),f=n(171659),E=n(239910),y=n.n(E),b=n(818754),v=n(730169),T=n(654104),I=n(896966),S=n(282424),w=n(566699),A=n(442313),C=n(895104),N=n(926252),L=n(773422),O=n(950738),R=n(931516),P=n(503024),D=n(256429),M=n(302839),k=n(450796),F=n(6760),x=n(504153),U=n(52953),B=n(541910),V=n(725608),G=n(923713),H=n(27776),K=n(306456),W=n(435789);let z=2*(0,b.jz)(H.dGl);function $({initialPosition:e,initialValue:r,initialWidth:n,resolvedType:a,onCreateVariable:o,onClose:s}){(0,k.NF)({resolvedType:a});let{onCreateVariableSubmit:l}=Y({onCreateVariable:o,onClose:s});return i.createElement(j,{initialPosition:e,initialValue:r,initialWidth:n,resolvedType:a,onCreateVariableSubmit:l,onClose:s,recordingKey:"createVariableModal"})}function Y({onCreateVariable:e,onClose:r}){return{onCreateVariableSubmit:function({varSetID:n,varName:i,varValue:a}){if(!m.CWU.isValidVariableName(i,n)){(0,I.x1)("variables","Attempted to submit variable name that is invalid",{varName:i,_varSetID:n});return}h.l7.user("create-variable",()=>{let r=n??m.CWU.createVariableSet((0,A.t)("variables.variable_collection"),m.G6k.AUTOMATIC_FIRST_COLLECTION),s=m.CWU.createVariable(i,r,a,m.HS4.VARIABLE_PICKER),l=m.CWU.getLocalVariableInfo(s);(0,o.B1)(l,`variable with id ${s} not found`),e((0,R.kz)(l))}),r()}}}function j({initialPosition:e,initialValue:r,initialWidth:n,resolvedType:a,recordingKey:o,onCreateVariableSubmit:s,onClose:d}){return(0,g.k)().asset_binding_picker?i.createElement(l.bL,{onClose:d,defaultPosition:e,width:n,recordingKey:o},i.createElement(c.vo,null,i.createElement(c.Y9,null,i.createElement(c.hE,null,(0,A.tx)("variables.create_modal.title"))),i.createElement(c.nB,{padding:0},i.createElement(Q,{resolvedType:a,initialValue:r,recordingKey:T.Pt(o,"createVariableForm"),onSubmit:s})))):i.createElement(F.vx,{title:i.createElement("div",{className:K.h$},(0,A.tx)("variables.create_modal.title")),initialPosition:e,initialWidth:n,onClose:d},i.createElement(Q,{resolvedType:a,initialValue:r,recordingKey:T.Pt(o,"createVariableForm"),onSubmit:s}))}function q(e){let r=(0,L.BQ)(e.type===m.Z_n.ALIAS?e.value:void 0);return(0,s.Vq)(r)&&"MIXED"!==r?r:null}function X({label:e,input:r}){return i.createElement(C.Y,{spacing:0,horizontalAlignItems:"space-between",height:"hug-contents",padding:{horizontal:z}},i.createElement(D.JU,null,e),r)}function Z(e){(0,i.useEffect)(()=>{let r=e.current;if(!r)return;let n=e=>e.preventDefault();return r.addEventListener("contextmenu",n),()=>{r.removeEventListener("contextmenu",n)}},[e])}function J(e,r,n){let o=(0,a.wA)();return(0,i.useCallback)(async i=>{if(i){let e=await o((0,N.Oe)(i));n((0,B.y$)(r,e))}else e.type===m.Z_n.ALIAS&&n((0,_.WI)(r))},[o,e,r,n])}function Q({resolvedType:e,initialValue:r,recordingKey:n,onSubmit:a}){let o=(0,i.useRef)(null);Z(o);let[s,l]=(0,i.useState)({varName:"",varValue:r??(0,_.WI)(e),varSetID:null}),c=i.useMemo(()=>m.CWU.isValidVariableName(s.varName??"",s.varSetID??null),[s]),u=T.of(n,"submit",()=>{c&&a({varName:s.varName,varValue:s.varValue,varSetID:s.varSetID??null})});return i.createElement("form",{onSubmit:u,autoComplete:"no"},i.createElement(C.Y,{direction:"vertical",spacing:0,height:"hug-contents",ref:o},i.createElement(C.Y,{direction:"vertical",spacing:`${(0,b.jz)(H.dGl)}px`,padding:{top:z},height:"hug-contents"},i.createElement(ee,{recordingKey:n??"",initialVarValue:r,resolvedType:e,setVariableFormSubmitData:l,variableFormSubmitData:s}))),i.createElement(C.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16},i.createElement(d.$n,{type:"submit",disabled:!c,recordingKey:T.Pt(n,"createButton"),htmlAttributes:{"data-tooltip":(0,A.t)("variables.create_modal.invalid_variable_name"),"data-tooltip-type":c?void 0:P.Ib.TEXT}},(0,A.tx)("variables.create_modal.create_button"))))}function ee({recordingKey:e,initialVarValue:r,resolvedType:n,setVariableFormSubmitData:a,variableFormSubmitData:o}){let s=(0,L.yp)();n===m.rXF.TEXT_DATA&&(n=m.rXF.STRING);let[l,c]=(0,f.Vc)("last-used-variable-set-bottoms-up",s.length>0?s[0].node_id:null),d=(0,i.useMemo)(()=>{let e=s.find(e=>e.node_id===l);return!e&&s.length>0?s[0]:e},[s,l]),h=(0,L.rW)(d?.node_id??null),g=(0,i.useRef)(null);function E(e,r,n){a({varName:e,varValue:r,varSetID:n})}function y(e){E(o.varName,e,o.varSetID)}(0,v.h)(()=>{g.current?.select(),E((0,V.Wc)(h,n),r??(0,_.WI)(n),d?.node_id??null)});let b=q(o.varValue),I=J(o.varValue,n,y);return i.createElement(i.Fragment,null,s.length>0&&!!d&&i.createElement(X,{label:(0,A.tx)("variables.create_modal.collection_label"),input:i.createElement("div",{className:K.hF},i.createElement(et,{selectedVariableSetID:d.node_id,variableSets:s,onChange:e=>{c(e),E(o.varName,o.varValue,e)}}))}),i.createElement(X,{label:(0,A.tx)("variables.create_modal.name_label"),input:i.createElement(S.L,{className:K._Z,name:"variableName",value:o.varName,onChange:e=>{E(e.target.value,o.varValue,o.varSetID)},ref:g,recordingKey:T.Pt(e,"variableNameInput"),delay:50,"data-1p-ignore":!0,autoFocus:!0})}),i.createElement(X,{label:(0,A.tx)("variables.create_modal.value_label"),input:i.createElement("div",{className:K.hF},i.createElement(U.Cr,{resolvedType:n,variableValue:o.varValue,onVariableValueChange:e=>y(e),onVariableSelected:I},i.createElement(G.gJ,{variableValue:o.varValue,contextType:x.$.FORM,onChange:e=>y(e),recordingKey:T.Pt(e,"variableValueInput")}),b&&i.createElement(u.K,{type:"button","aria-label":(0,A.t)("variables.authoring_modal.table.detach_alias"),onClick:()=>y(b),recordingKey:T.Pt(e,"detachVariableButton"),htmlAttributes:{"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,A.t)("variables.authoring_modal.table.detach_alias")}},i.createElement(w.U,{svg:W.A},i.createElement(p.U,null)))))}))}function et({selectedVariableSetID:e,variableSets:r,onChange:n}){let o=(0,a.wA)(),s=(0,O.Um)(),l=(0,i.useMemo)(()=>y()(r,e=>e.node_id),[r]);return i.createElement(M.l6,{id:"variable-create-modal-variable-set-select",property:l[e],formatter:{format:e=>e?.name??""},dispatch:o,chevronClassName:K.mL,inputClassName:K.NI,dropdownShown:s,onChange:e=>n(e.node_id)},r.map(function(e){return i.createElement(M.c$,{key:e.node_id,value:e})}))}},949651:(e,r,n)=>{n.d(r,{Hr:()=>y,Io:()=>g,MH:()=>function e(r){let n=(0,u.E7)(r);if(n){if("dataType"in n&&"ALIAS"===n.dataType&&n.value?.alias)return s.dI(n.value?.alias);if("type"in n){if(n.type===o.Z_n.ALIAS)return n.value;if(n.type===o.Z_n.FONT_STYLE)return e(n.value.asFloat??n.value.asString??null);if(n?.type===o.Z_n.EXPRESSION&&n.value.expressionFunction===o.JTp.STRINGIFY&&1===n.value.expressionArguments.length)return e(n.value.expressionArguments[0])}}return null},NX:()=>f,Oi:()=>p,WB:()=>E,e4:()=>h,eF:()=>_,rY:()=>m});var i=n(445777),a=n(719670),o=n(741419),s=n(1329),l=n(543072),c=n(442313),d=n(129102),u=n(718451);function p(e){if("MIXED"===e)return(0,c.t)("fullscreen.mixed");if(!e)return null;switch(e.resolvedType){case o.rXF.FLOAT:return String(parseFloat(e.value.toFixed(2)));case o.rXF.BOOLEAN:return e.value?(0,c.t)("variables.values.boolean.true"):(0,c.t)("variables.values.boolean.false");case o.rXF.COLOR:return d.TI.format(e.value);case o.rXF.STRING:return e.value;case o.rXF.IMAGE:return null;default:return JSON.stringify(e.value)}}function m(e,r){if(e===r)return!0;if(!e||!e.dataType||!e.resolvedDataType||!e.value||!r||!r.dataType||!r.resolvedDataType||!r.value||e.dataType!==r.dataType||e.resolvedDataType!==r.resolvedDataType)return!1;switch(e.dataType){case"BOOLEAN":return e.value.boolValue===r.value.boolValue;case"FLOAT":return e.value.floatValue===r.value.floatValue;case"STRING":return e.value.textValue===r.value.textValue;case"COLOR":return(0,i.B1)(e.value.colorValue),(0,i.B1)(r.value.colorValue),(0,l.YU)(e.value.colorValue)===(0,l.YU)(r.value.colorValue);default:return(0,a.c2)(e,r)}}function h(e){switch(e){case o.rXF.BOOLEAN:return o.Z_n.BOOLEAN;case o.rXF.FLOAT:return o.Z_n.FLOAT;case o.rXF.STRING:return o.Z_n.STRING;case o.rXF.COLOR:return o.Z_n.COLOR;case o.rXF.MAP:return o.Z_n.MAP;case o.rXF.SYMBOL_ID:return o.Z_n.SYMBOL_ID}}function _(e){return"LOCAL"===e.subscriptionStatus&&e.isSoftDeleted}let g={CORNER_RADIUS:[o.rXF.FLOAT],STACK_SPACING:[o.rXF.FLOAT],STACK_PADDING_LEFT:[o.rXF.FLOAT],STACK_PADDING_TOP:[o.rXF.FLOAT],STACK_PADDING_RIGHT:[o.rXF.FLOAT],STACK_PADDING_BOTTOM:[o.rXF.FLOAT],TEXT_DATA:[o.rXF.STRING,o.rXF.FLOAT],WIDTH:[o.rXF.FLOAT],HEIGHT:[o.rXF.FLOAT],RECTANGLE_TOP_LEFT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_TOP_RIGHT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:[o.rXF.FLOAT],STACK_COUNTER_SPACING:[o.rXF.FLOAT],MIN_WIDTH:[o.rXF.FLOAT],MAX_WIDTH:[o.rXF.FLOAT],MIN_HEIGHT:[o.rXF.FLOAT],MAX_HEIGHT:[o.rXF.FLOAT],STROKE_WEIGHT:[o.rXF.FLOAT],OPACITY:[o.rXF.FLOAT],BORDER_TOP_WEIGHT:[o.rXF.FLOAT],BORDER_BOTTOM_WEIGHT:[o.rXF.FLOAT],BORDER_LEFT_WEIGHT:[o.rXF.FLOAT],BORDER_RIGHT_WEIGHT:[o.rXF.FLOAT],MISSING:[],PARAGRAPH_SPACING:[o.rXF.FLOAT],PARAGRAPH_INDENT:[o.rXF.FLOAT],VISIBLE:[o.rXF.BOOLEAN],VARIANT_PROPERTIES:[o.rXF.SYMBOL_ID],OVERRIDDEN_SYMBOL_ID:[o.rXF.SYMBOL_ID],FONT_FAMILY:[o.rXF.STRING],FONT_STYLE:[o.rXF.STRING,o.rXF.FLOAT],FONT_VARIATIONS:[o.rXF.FLOAT],FONT_SIZE:[o.rXF.FLOAT],LETTER_SPACING:[o.rXF.FLOAT],LINE_HEIGHT:[o.rXF.FLOAT],HYPERLINK:[o.rXF.LINK],CMS_SERIALIZED_RICH_TEXT_DATA:[o.rXF.JS_RUNTIME_ALIAS],SLOT_CONTENT_ID:[o.rXF.SLOT_CONTENT_ID]};function f({variable:e,variableDisplayName:r}){return e?e.codeSyntax?.[o.y0x.WEB]?e.codeSyntax[o.y0x.WEB]:`var(--${(r??e.name).replace(/[^a-zA-Z0-9-]/g,"")})`:""}function E(e){switch(e){case o.rXF.BOOLEAN:return o.J0O.BOOL;case o.rXF.FLOAT:return o.J0O.NUMBER;case o.rXF.STRING:case o.rXF.TEXT_DATA:return o.J0O.TEXT;default:throw Error(`Unknown resolved type: ${e}`)}}function y(e){switch(e){case o.rXF.BOOLEAN:return"boolean";case o.rXF.FLOAT:return"number";case o.rXF.STRING:return"string";case o.rXF.COLOR:return"color";case o.rXF.MAP:return"map";case o.rXF.SYMBOL_ID:return"symbol_id";case o.rXF.FONT_STYLE:return"font_style";case o.rXF.TEXT_DATA:return"text_data";case o.rXF.IMAGE:return"image";case o.rXF.LINK:return"link";case o.rXF.JS_RUNTIME_ALIAS:return"js_runtime_alias";case o.rXF.SLOT_CONTENT_ID:return"slot_content_id"}}},542304:(e,r,n)=>{n.d(r,{HZ:()=>Z,Rm:()=>eu});var i=n(848318),a=n(716544),o=n(445777),s=n(992277),l=n(475020),c=n(376025),d=n(741419),u=n(869143),p=n(39773),m=n(536384),h=n.n(m),_=n(175196),g=n(654104),f=n(502255),E=n(792647),y=n(166365),b=n(35609),v=n(862713),T=n(17755),I=n(975806),S=n(442313),w=n(399907),A=n(584305),C=n(881393),N=n(559334),L=n(10415),O=n(161452),R=n(87089),P=n(79563),D=n(154209),M=n(298473),k=n(503024),F=n(853833),x=n(176386),U=n(60987),B=n(961662),V=n(688605),G=n(949651),H=n(138709),K=n(904717),W=n(789070),z=n(827884),$=n(512279),Y=n(323010),j=n(821561),q=n(230645);function X(e,r){(0,i.useLayoutEffect)(()=>{e&&(r?e.fauxFocus():e.fauxBlur())},[e,r])}let Z=i.forwardRef(function({listItems:e,selectedItemID:r,disabledVariableIds:n,highlightedItemID:a,pickerType:o,className:s,recordingKey:l,onItemHighlight:c,onItemSelect:d,onItemContextMenu:p,onItemMouseLeave:m},h){let _=i.useRef(null),g=(0,u.Te)({count:e.length,getScrollElement:()=>_.current,estimateSize:r=>(0,H.jx)(e[r],"list"),getItemKey:r=>(0,H.vu)(e[r],r),overscan:10});return(0,i.useImperativeHandle)(h,()=>({scrollToTop:()=>g.scrollToOffset(0),scrollToIndex:(e,r)=>g.scrollToIndex(e,r),getVirtualItems:()=>g.getVirtualItems()})),i.createElement("div",{ref:_,style:{height:(0,H.w4)({layout:"list",listHeightPx:g.getTotalSize()}),overflow:"auto"},className:s},i.createElement("div",{style:{height:`${g.getTotalSize()}px`,position:"relative"}},g.getVirtualItems().map(s=>i.createElement("div",{className:Y.ws,key:s.key,style:{position:"absolute",top:0,left:0,width:"100%",height:`${s.size}px`,transform:`translateY(${s.start}px)`}},i.createElement(J,{disabledVariableIds:n,highlightedItemID:a,index:s.index,listItem:e[s.index],onItemContextMenu:p,onItemHighlight:c,onItemMouseLeave:m,onItemSelect:d,pickerType:o,recordingKey:l,selectedItemID:r})))))});function J({listItem:e,index:r,selectedItemID:n,disabledVariableIds:a,highlightedItemID:s,pickerType:l,recordingKey:c,onItemHighlight:d,onItemSelect:u,onItemContextMenu:p,onItemMouseLeave:m}){let h=(0,i.useMemo)(()=>[1,r],[r]);switch(e.type){case H.Yc.ASSET_TYPE:return i.createElement(et,{assetType:e.name,tooltip:e.tooltip});case H.Yc.SECTION_HEADER:return i.createElement(er,{groupName:e.name,fileName:e.fileName,secondaryText:e.secondaryText});case H.Yc.HIERARCHY_PATH:return i.createElement(ei,{groupName:e.name});case H.Yc.FILE_NAME:return i.createElement(en,{fileName:e.name,libraryKey:e.libraryKey});case H.Yc.SEPARATOR:return i.createElement("div",{className:Y.me});case H.Yc.VARIABLES:{let r=e.items[0];return i.createElement(ea,{disabledVariableIds:a,isHighlighted:(0,H.UT)(r)===s,isSelected:(0,H.UT)(r)===n,keyboardNavigationPath:h,onItemHighlight:d,onItemMouseLeave:m,onItemSelect:u,pickerType:l,recordingKey:g.Pt(c,(0,H.UT)(r)),variable:r,variableSet:e.variableSet})}case H.Yc.STYLES:{let r=e.items[0];return i.createElement(V.m3,{dsStyle:r,additionalClassName:T.s.flex.wFull.$},i.createElement(es,{dsStyle:r,isSelected:(0,H.UT)(r)===n,isHighlighted:(0,H.UT)(r)===s,keyboardNavigationPath:h,recordingKey:g.Pt(c,(0,H.UT)(r)),onItemHighlight:d,onItemSelect:u,onItemContextMenu:p,onItemMouseLeave:m}))}case H.Yc.EXPRESSION:return i.createElement(el,{expression:e.expressionItem,isHighlighted:e.expressionItem.name===s,keyboardNavigationPath:h,recordingKey:g.Pt(c,e.expressionItem.name),onItemHighlight:d,onItemSelect:u,onItemMouseLeave:m});case H.Yc.COMPONENT_PROPS:{let r=e.items[0],n=(0,H.lC)(r);return i.createElement(ec,{componentPropItem:r,isHighlighted:n===s,keyboardNavigationPath:h,recordingKey:g.Pt(c,n),onItemHighlight:d,onItemSelect:u,onItemMouseLeave:m})}case H.Yc.CMS_FIELDS:{let r=e.item,n=r.value.id;return i.createElement(ed,{cmsFieldItem:r,isHighlighted:n===s,recordingKey:g.Pt(c,n),keyboardNavigationPath:h,onItemHighlight:d,onItemSelect:u,onItemMouseLeave:m})}default:(0,o.xb)(e)}}var Q=(e=>(e[e.NONE=0]="NONE",e[e.HIGHLIGHTED=1]="HIGHLIGHTED",e))(Q||{});let ee=(0,i.forwardRef)(function({isSelected:e,highlightStyle:r,isDisabled:n,itemName:a,value:o,recordingKey:s,onMouseDown:l,onMouseMove:c,onMouseLeave:d,onContextMenu:u},p){return i.createElement(I.S.recordableDiv,{forwardedRef:p,onMouseMove:c,onMouseDown:l,onMouseLeave:d,onContextMenu:u,recordingKey:s,className:h()(Y.f0,{[Y.uz]:e,[Y.Ke]:1===r})},i.createElement("div",{className:h()(Y.gV,{[Y.r9]:n})},a),o&&i.createElement("div",{className:Y.Oy},o))});function et({assetType:e,tooltip:r,recordingKey:n}){return i.createElement(ee,{itemName:i.createElement("div",{className:Y.Rn},i.createElement("span",{className:Y.ox},e),i.createElement(y.B,{className:Y.vm,svg:q.A,"data-tooltip-type":k.Ib.TEXT,"data-tooltip":r})),isSelected:!1,highlightStyle:0,recordingKey:n,isDisabled:!1})}function er({groupName:e,fileName:r,secondaryText:n,recordingKey:a}){return i.createElement(ee,{itemName:i.createElement("div",{className:Y.bV},!!r&&i.createElement("div",{className:Y.IZ},r),!!r&&i.createElement("div",{className:Y.W},"/"),i.createElement("div",{className:Y.Gz},e),!!n&&i.createElement("div",{className:Y.e9},n)),isSelected:!1,highlightStyle:0,recordingKey:a,isDisabled:!1})}function en({fileName:e,libraryKey:r}){let n=(0,R.sZ)(),a=(0,D.Oe)(n),o=(0,N.fV)(r),s=(0,p.md)(F.V9),l=r?s[r]?.hubFileId??null:null;return i.createElement(ee,{itemName:i.createElement("span",{className:Y.Md},i.createElement("span",{className:Y.$u},e),a&&o&&i.createElement("div",{className:T.s.flex.alignCenter.justifyCenter.ml4.$},i.createElement(L.KP,{libraryKey:r})),l&&i.createElement("div",{className:T.s.flex.alignCenter.justifyCenter.ml4.$},i.createElement(O.E,{libraryKey:r}))),isSelected:!1,highlightStyle:0,isDisabled:!1})}function ei({groupName:e,recordingKey:r}){let n=i.createElement(b.G,{text:e,showTooltip:v.i.WHEN_TRUNCATED});return i.createElement(ee,{itemName:n,isSelected:!1,highlightStyle:0,isDisabled:!1,recordingKey:r})}function ea({variable:e,variableSet:r,isSelected:n,disabledVariableIds:a,isHighlighted:o,recordingKey:s,pickerType:l,keyboardNavigationPath:c,onItemHighlight:u,onItemSelect:p,onItemMouseLeave:m}){let{thumbnailValue:h}=(0,K.A)({variable:e,variableCollection:r}),_=(0,P.kH)(e.name),g=(0,i.useCallback)(()=>{u(e)},[u,e]),{setKeyboardNavigationElement:f,keyboardNavigationItem:y}=(0,E.M3)({path:c,id:(0,H.UT)(e),onFauxFocus:g});X(y,o);let b=(0,i.useCallback)(()=>{o||g()},[o,g]),v=(0,i.useCallback)(()=>{p(e)},[p,e]),T=(0,i.useCallback)(()=>{m(e)},[m,e]),I="fields"===l&&e.resolvedType!==d.rXF.COLOR,S=a.has(e.node_id);return i.createElement(ee,{ref:f,highlightStyle:o?1:0,isDisabled:S,isSelected:n,itemName:i.createElement("div",{className:Y.JN},i.createElement($.L,{value:h,onColorChitMouseDown:v,resolvedTypeFallback:e.resolvedType,disabled:S}),i.createElement("div",{className:Y.Nk,"data-testid":"variable-list-item-name","data-test-variable-source":e.subscriptionStatus},_)),onMouseDown:v,onMouseLeave:T,onMouseMove:b,recordingKey:s,value:I&&i.createElement(eo,{variableValue:h})})}function eo({variableValue:e}){return i.createElement(i.Fragment,null,(0,G.Oi)(e))}function es({dsStyle:e,isSelected:r,isHighlighted:n,recordingKey:o,keyboardNavigationPath:s,onItemHighlight:c,onItemSelect:d,onItemContextMenu:u,onItemMouseLeave:p}){let m=(0,P.kH)(e.name),{showStyleDetails:h,hideStyleDetails:f}=(0,z.XM)(),b=(0,i.useCallback)(()=>{c(e)},[c,e]),{setKeyboardNavigationElement:v,keyboardNavigationItem:T}=(0,E.M3)({path:s,id:(0,H.UT)(e),onFauxFocus:b});X(T,n);let I=(0,i.useCallback)(()=>{n||b()},[b,n]),w=(0,i.useCallback)(r=>{(0,C.i)(r)||(d(e),f())},[d,e,f]),N=(0,i.useCallback)(()=>{p(e)},[p,e]),L=(0,i.useCallback)(r=>{u(e,{x:r.clientX,y:r.clientY})},[u,e]),O=i.useRef(),R=(0,a.d4)(r=>(0,M.e)(r,e)),D=(0,i.useCallback)(()=>{let r=O.current?.getBoundingClientRect();r&&h({dsStyle:e,position:r})},[e,h]);return i.createElement(ee,{ref:(0,_.A)(O,v),highlightStyle:n?1:0,isDisabled:!1,isSelected:r,itemName:i.createElement("div",{className:Y.JN},i.createElement("div",{className:Y.q3},i.createElement(B.zi,{dsStyle:e,size:B.iL.Standard,disableTooltip:!0})),i.createElement("div",{className:Y.Nk},m)),onContextMenu:L,onMouseDown:w,onMouseLeave:N,onMouseMove:I,recordingKey:o,value:i.createElement("div",{className:Y.Em},i.createElement(l.d,{"aria-label":(0,S.t)("design_systems.styles.edit_style"),recordingKey:g.Pt(o,"editStyleButton"),htmlAttributes:{"data-tooltip":(0,S.t)("design_systems.styles.edit_style"),"data-tooltip-type":k.Ib.TEXT,onMouseDown:A.dG},"aria-expanded":R,onClick:D},i.createElement(y.B,{svg:j.A})))})}function el({expression:e,isHighlighted:r,recordingKey:n,keyboardNavigationPath:a,onItemHighlight:o,onItemSelect:s,onItemMouseLeave:l}){let c=(0,i.useCallback)(()=>{o(e)},[o,e]),{setKeyboardNavigationElement:d,keyboardNavigationItem:u}=(0,E.M3)({path:a,onFauxFocus:c});X(u,r);let p=(0,i.useCallback)(()=>{r||c()},[c,r]),m=(0,i.useCallback)(()=>{s(e)},[e,s]),h=(0,i.useCallback)(()=>{l(e)},[l,e]);return i.createElement(ee,{ref:d,highlightStyle:r?1:0,isDisabled:!1,isSelected:!1,itemName:e.name,onMouseDown:m,onMouseLeave:h,onMouseMove:p,recordingKey:n,value:e.value})}function ec({componentPropItem:e,isHighlighted:r,recordingKey:n,keyboardNavigationPath:a,onItemHighlight:o,onItemSelect:s,onItemMouseLeave:l}){let c=(0,i.useCallback)(()=>{o(e)},[o,e]),{setKeyboardNavigationElement:d,keyboardNavigationItem:u}=(0,E.M3)({path:a,onFauxFocus:c});X(u,r);let p=(0,i.useCallback)(()=>{r||c()},[c,r]),m=(0,i.useCallback)(()=>{s(e)},[e,s]),h=(0,i.useCallback)(()=>{l(e)},[l,e]),_=e.value,g=(0,U.Cq)(_);return i.createElement(ee,{ref:d,highlightStyle:r?1:0,isDisabled:!1,isSelected:!1,itemName:g?i.createElement("div",{className:Y.JN},i.createElement($.L,{value:g,onColorChitMouseDown:m,resolvedTypeFallback:_.varValue.resolvedType,disabled:!1,variableThumbnailIconType:$.s.COMPONENT}),i.createElement("div",{className:Y.Nk,"data-testid":"variable-list-item-name"},_.name)):_.name,onMouseDown:m,onMouseLeave:h,onMouseMove:p,recordingKey:n,value:g&&i.createElement(eo,{variableValue:g})})}function ed({cmsFieldItem:e,isHighlighted:r,recordingKey:n,keyboardNavigationPath:a,onItemHighlight:o,onItemSelect:l,onItemMouseLeave:c}){let u=(0,i.useCallback)(()=>{o(e)},[o,e]),{setKeyboardNavigationElement:p,keyboardNavigationItem:m}=(0,E.M3)({path:a,onFauxFocus:u});X(m,r);let h=(0,i.useCallback)(()=>{r||u()},[u,r]),_=(0,i.useCallback)(()=>{l(e)},[e,l]),g=(0,i.useCallback)(()=>{c(e)},[c,e]),y=e.value,b=null;if(e.value.fieldType===w._j.IMAGE&&e?.itemField?.value)try{let r=w.Dh.parse(JSON.parse(e.itemField.value));b=i.createElement($.L,{value:{type:d.Z_n.IMAGE,resolvedType:d.rXF.IMAGE,value:r},onColorChitMouseDown:_,resolvedTypeFallback:d.rXF.STRING,disabled:!1,variableThumbnailIconType:$.s.NONE})}catch(r){(0,f.$D)(s.e.CMS,Error("could not parse CMS image field value for VariableListCMSFieldItem thumbnail"),{extra:{cmsItemFieldId:e.itemField.id,collectionFieldSchemaId:e.value.id}})}return null===b&&(b=i.createElement($.L,{value:{type:d.Z_n.STRING,resolvedType:d.rXF.STRING,value:y.name},onColorChitMouseDown:_,resolvedTypeFallback:d.rXF.STRING,disabled:!1,variableThumbnailIconType:$.s.NONE})),i.createElement(ee,{ref:p,itemName:i.createElement("div",{className:Y.JN},b,i.createElement("div",{className:Y.Nk,"data-testid":"variable-list-item-name"},y.name)),isSelected:!1,highlightStyle:r?1:0,recordingKey:n,isDisabled:!1,onMouseDown:_,onMouseMove:h,onMouseLeave:g})}let eu=i.forwardRef(function({listItems:e,selectedItemID:r,highlightedItemID:n,className:a,recordingKey:o,onItemHighlight:s,onItemSelect:l,onItemContextMenu:c,onItemMouseLeave:d},p){let m=i.useRef(null),h=(0,u.Te)({count:e.length,getScrollElement:()=>m.current,estimateSize:r=>(0,H.jx)(e[r],"grid"),getItemKey:r=>(0,H.vu)(e[r],r),overscan:10,paddingStart:H.Vc,paddingEnd:H.Vc});return(0,i.useImperativeHandle)(p,()=>({scrollToTop:()=>h.scrollToOffset(0),scrollToIndex:(e,r)=>h.scrollToIndex(e,r),getVirtualItems:()=>h.getVirtualItems()})),i.createElement("div",{ref:m,style:{height:(0,H.w4)({layout:"grid",listHeightPx:h.getTotalSize()}),overflow:"auto"},className:a},i.createElement("div",{style:{height:`${h.getTotalSize()}px`,position:"relative"}},h.getVirtualItems().map(a=>i.createElement("div",{className:Y.mz,key:a.key,style:{position:"absolute",top:0,left:0,width:"100%",height:`${a.size}px`,transform:`translateY(${a.start}px)`}},i.createElement(ep,{listItem:e[a.index],index:a.index,selectedItemID:r,highlightedItemID:n,recordingKey:o,onItemHighlight:s,onItemSelect:l,onItemContextMenu:c,onItemMouseLeave:d})))))});function ep({listItem:e,index:r,selectedItemID:n,highlightedItemID:a,recordingKey:s,onItemHighlight:l,onItemSelect:c,onItemMouseLeave:d,onItemContextMenu:u}){let p=(0,i.useMemo)(()=>[1,r],[r]);switch(e.type){case H.Yc.ASSET_TYPE:return i.createElement(et,{assetType:e.name,tooltip:e.tooltip});case H.Yc.SECTION_HEADER:return i.createElement(er,{groupName:e.name,fileName:e.fileName,secondaryText:e.secondaryText});case H.Yc.HIERARCHY_PATH:return i.createElement(ei,{groupName:e.name});case H.Yc.FILE_NAME:return i.createElement(en,{fileName:e.name,libraryKey:e.libraryKey});case H.Yc.VARIABLES:return i.createElement("div",{className:Y.Dm},e.items.map((r,o)=>i.createElement(em,{key:(0,H.UT)(r),column:o,isHighlighted:(0,H.UT)(r)===a,isSelected:(0,H.UT)(r)===n,keyboardNavigationPath:p,onItemHighlight:l,onItemMouseLeave:d,onItemSelect:c,recordingKey:g.Pt(s,(0,H.UT)(r)),variable:r,variableSet:e.variableSet})));case H.Yc.STYLES:return i.createElement("div",{className:Y.KP},e.items.map((e,r)=>i.createElement(V.m3,{key:e.key,dsStyle:e},i.createElement(eh,{column:r,dsStyle:e,isHighlighted:(0,H.UT)(e)===a,isSelected:(0,H.UT)(e)===n,keyboardNavigationPath:p,onItemContextMenu:u,onItemHighlight:l,onItemMouseLeave:d,onItemSelect:c,recordingKey:g.Pt(s,(0,H.UT)(e))}))));case H.Yc.SEPARATOR:return i.createElement("div",{className:Y.me});case H.Yc.EXPRESSION:case H.Yc.COMPONENT_PROPS:case H.Yc.CMS_FIELDS:return null;default:(0,o.xb)(e)}}function em({variable:e,variableSet:r,isSelected:n,isHighlighted:a,recordingKey:o,keyboardNavigationPath:s,column:l,onItemHighlight:u,onItemSelect:p,onItemMouseLeave:m}){let{thumbnailValue:_}=(0,K.A)({variable:e,variableCollection:r}),g=(0,i.useCallback)(()=>{u(e)},[u,e]),{setKeyboardNavigationElement:f,keyboardNavigationItem:y}=(0,E.M3)({path:s,column:l,id:(0,H.UT)(e),onFauxFocus:g});X(y,a);let b=(0,i.useCallback)(()=>{a||g()},[g,a]),v=(0,i.useCallback)(()=>{p(e)},[p,e]),T=(0,i.useCallback)(()=>{m(e)},[m,e]);if("MIXED"===_||_?.resolvedType!==d.rXF.COLOR)return null;{let r=_.value;return i.createElement(c.E,{ref:f,className:h()(Y.a5,{[Y.FL]:a,[Y.J1]:n}),htmlAttributes:{"data-tooltip":(0,P.kH)(e.name),"data-tooltip-type":k.Ib.TEXT,onMouseLeave:T,onMouseMove:b},onClick:v,recordingKey:o},i.createElement(x.J,{className:Y.xH,color:r}))}}function eh({dsStyle:e,isSelected:r,isHighlighted:n,recordingKey:a,keyboardNavigationPath:o,column:s,onItemHighlight:l,onItemSelect:c,onItemMouseLeave:d,onItemContextMenu:u}){let p=(0,i.useCallback)(()=>{l(e)},[l,e]),{setKeyboardNavigationElement:m,keyboardNavigationItem:h}=(0,E.M3)({path:o,column:s,id:(0,H.UT)(e),onFauxFocus:p});X(h,n);let _=(0,i.useCallback)(()=>{n||p()},[p,n]),g=(0,i.useCallback)(()=>{d(e)},[d,e]),f=(0,i.useCallback)(()=>{c(e)},[c,e]),y=(0,i.useCallback)(r=>{u(e,{x:r.clientX,y:r.clientY})},[u,e]);return i.createElement(e_,{ref:m,recordingKey:a,dsStyle:e,isSelected:r,isHighlighted:n,onClick:f,onMouseMove:_,onMouseLeave:g,onContextMenu:y})}let e_=i.forwardRef(function({dsStyle:e,isSelected:r,isHighlighted:n,recordingKey:a,onClick:o,onMouseMove:s,onMouseLeave:l,onContextMenu:d},u){return i.createElement(c.E,{ref:u,className:h()(Y.LH,{[Y.ut]:n,[Y.X$]:r}),htmlAttributes:{"data-tooltip-type":k.Ib.SPECIAL,"data-tooltip":W.Z,"data-tooltip-style-name":(0,P.kH)(e.name||""),"data-tooltip-style-description":e.description,onContextMenu:d,onMouseLeave:l,onMouseMove:s},recordingKey:a,onClick:o},i.createElement(B.zi,{dsStyle:e,size:B.iL.Large_variables,disableTooltip:!0}))})},130311:(e,r,n)=>{n.d(r,{Y:()=>a});var i=n(39773);let a=(0,i.eU)({type:"ALL_LIBRARIES"});(0,i.eU)({type:"LOCAL_VARIABLES"})},931641:(e,r,n)=>{n.d(r,{$3:()=>eu,Rp:()=>Q});var i=n(848318),a=n(445777),o=n(468189),s=n(741419),l=n(206651),c=n(157907),d=n(536384),u=n.n(d),p=n(730169),m=n(397579),h=n(857188),_=n(175196),g=n(654104),f=n(470403),E=n(792647),y=n(166365),b=n(357287),v=n(442313),T=n(627855),I=n(559334),S=n(668515),w=n(773422),A=n(950738),C=n(51910),N=n(369600),L=n(87089),O=n(154209),R=n(931516),P=n(338065),D=n(256429),M=n(554386),k=n(688605),F=n(199954),x=n(824724),U=n(542304),B=n(138709),V=n(336093),G=n(827884),H=n(450796),K=n(207669),W=n(541910),z=n(617514),$=n(243315),Y=n(708634),j=n(558207),q=n(794523),X=n(720598);function Z({resolvedType:e,requestedTypes:r}){return r||(e?[e]:null)}function J(e,r,n,a){return i.createElement("div",{className:q.p$,style:{height:(0,B.Ih)({layout:r})}},e.length>0?(0,v.t)("variables.binding_ui.no_search_results"):a===s.rXF.COLOR?(0,v.t)("variables.binding_ui.no_colors_empty_state"):n?(0,v.t)("variables.binding_ui.no_variables_props_empty_state"):(0,v.t)("variables.binding_ui.no_variables_empty_state"))}function Q({selectedItem:e,resolvedType:r,requestedTypes:n,variableFilters:o,pickerType:s,disabledVariableIds:l,setControlRightButtons:c,variableScopes:d,recordingKey:u,onVariableSelected:p,onStyleSelected:m,onComponentPropSelected:h,onClose:_,keepOpenOnItemSelect:g}){let{currentView:E,setCurrentView:y,toggleLayout:b}=(0,x.R)({selectedItem:e,resolvedType:r}),v=function(e){switch(e.type){case"ALL_LIBRARIES":return en;case"LOCAL_VARIABLES":return er;case"SUBSCRIBED_VARIABLES":return ee;default:(0,a.xb)(e,"Unhandled view for picker body")}}(E),T=(0,i.useMemo)(()=>Z({requestedTypes:n,resolvedType:r??null}),[n,r]),[I,S]=(0,i.useState)(""),w=i.useRef(null),A=(0,i.useCallback)(()=>{w.current&&w.current.focus(),b()},[b,w]);return i.createElement(f.tH,{boundaryKey:"VariablePicker",fallback:J(I,E.layout,!!h,r)},i.createElement(v,{currentView:E,disabledVariableIds:l,keepOpenOnItemSelect:g,onClose:_,onComponentPropSelected:h,onSearchInputChange:S,onStyleSelected:m,onVariableSelected:p,pickerType:s,recordingKey:u,renderSetControls:a=>i.createElement(ed,{currentView:E,onStyleSelected:m,onToggleLayout:A,recordingKey:u,requestedTypes:n,resolvedType:r,searchQuery:I,selectedItem:e,setControlRightButtons:c,setCurrentView:y,variableSets:a}),requestedTypes:n,resolvedType:r,searchInputRef:w,searchQuery:I,selectedItem:e,variableFilters:o,variableScopes:d}),i.createElement(F.M,{resolvedTypes:T,selectedItem:e}))}function ee({selectedItem:e,currentView:r,resolvedType:n,pickerType:a,recordingKey:o,onVariableSelected:l,onStyleSelected:c,onClose:d,requestedTypes:u,searchQuery:p,onSearchInputChange:m,variableScopes:h,variableFilters:_,searchInputRef:g,renderSetControls:f}){let E=r.fileKey,y=r.libraryKey,b=(0,w.kf)(E),v=(0,w.u5)(E),I=e?.type===R.PW.VARIABLE?e:null,S=(0,w.G6)(I?.variableSetId||""),A="loading"===v.status||"loading"===b.status,[C,N]=(0,i.useMemo)(()=>{let e=b.data??[],r=v.data??[];return I?.subscriptionStatus==="SUBSCRIBED"&&(0,T.Ui)(I,y)&&!e.find(e=>e.key===I?.key)&&S?[[...e,I],[...r,S]]:[e,r]},[y,b,v,I,S]);return n===s.rXF.COLOR&&"color-picker"===a&&c?i.createElement(et,{fileKey:E,selectedStyle:e?.type===R.PW.STYLE?e:null,render:({isLoading:s,dsStyles:E})=>i.createElement(el,{currentView:r,disabledVariableIds:new Set,dsStyles:E,isLoading:s||A,onClose:d,onSearchInputChange:m,onStyleSelected:c,onVariableSelected:l,pickerControls:f(N),pickerType:a,recordingKey:o,requestedTypes:u,resolvedType:n,searchInputRef:g,searchQuery:p,selectedItem:e,variableFilters:_,variableScopes:h,variableSets:N,variables:C})}):i.createElement(el,{currentView:r,disabledVariableIds:new Set,dsStyles:[],onClose:d,onSearchInputChange:m,onVariableSelected:l,pickerControls:f(N),pickerType:a,recordingKey:o,requestedTypes:u,resolvedType:n,searchInputRef:g,searchQuery:p,selectedItem:e,variableScopes:h,variableSets:N,variables:C})}function et({fileKey:e,selectedStyle:r,render:n}){let a=(0,M.AH)(r?.key||null,r),{status:o,stylesByFileKey:s}=(0,M.Zk)({styleType:l.s4.FILL,initialSelectedSubscribedStyle:a}),c=s[e]?.styles??[];return i.createElement(k.mY,null,n({isLoading:"loaded"!==o,dsStyles:c}))}function er({selectedItem:e,disabledVariableIds:r,currentView:n,resolvedType:a,pickerType:o,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onClose:p,requestedTypes:m,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f,onComponentPropSelected:E,searchInputRef:y,renderSetControls:b}){let v=(0,w.Rb)(),T=(0,w.yp)();return a===s.rXF.COLOR&&"color-picker"===o&&u?i.createElement(ei,{styleType:l.s4.FILL,render:s=>i.createElement(el,{currentView:n,disabledVariableIds:r,dsStyles:s,onClose:p,onSearchInputChange:_,onStyleSelected:u,onVariableSelected:d,pickerControls:b(T),pickerType:o,recordingKey:c,requestedTypes:m,resolvedType:a,searchInputRef:y,searchQuery:h,selectedItem:e,variableFilters:f,variableScopes:g,variableSets:T,variables:v})}):E?i.createElement(ea,{render:s=>i.createElement(el,{componentProps:s,currentView:n,disabledVariableIds:r,dsStyles:[],onClose:p,onComponentPropSelected:E,onSearchInputChange:_,onVariableSelected:d,pickerControls:b(T),pickerType:o,recordingKey:c,requestedTypes:m,resolvedType:a,searchInputRef:y,searchQuery:h,selectedItem:e,variableFilters:f,variableScopes:g,variableSets:T,variables:v}),pickerType:o,requestedTypes:m,resolvedType:a}):i.createElement(el,{currentView:n,disabledVariableIds:r,dsStyles:[],onClose:p,onSearchInputChange:_,onVariableSelected:d,pickerControls:b(T),pickerType:o,recordingKey:c,requestedTypes:m,resolvedType:a,searchInputRef:y,searchQuery:h,selectedItem:e,variableFilters:f,variableScopes:g,variableSets:T,variables:v})}function en({selectedItem:e,disabledVariableIds:r,currentView:n,resolvedType:a,pickerType:o,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onComponentPropSelected:p,onClose:m,keepOpenOnItemSelect:h,requestedTypes:_,searchQuery:g,onSearchInputChange:f,variableScopes:E,variableFilters:y,searchInputRef:b,renderSetControls:v}){let T=(0,w.Rb)(),I=(0,w.yp)(),S=(0,w.pN)(),A="loaded"!==S.status,C=S.data?.libraryVariables,N=S.data?.libraryVariableSets,L=(0,i.useMemo)(()=>[...T,...C??[]],[T,C]),O=(0,i.useMemo)(()=>[...I,...N??[]],[I,N]);return a===s.rXF.COLOR&&"color-picker"===o&&u?i.createElement(eo,{styleType:l.s4.FILL,selectedStyle:e?.type===R.PW.STYLE?e:null,render:({dsStyles:s,isLoading:l})=>i.createElement(el,{currentView:n,disabledVariableIds:r,dsStyles:s,isLoading:l||A,keepOpenOnItemSelect:h,onClose:m,onSearchInputChange:f,onStyleSelected:u,onVariableSelected:d,pickerControls:v(O),pickerType:o,recordingKey:c,requestedTypes:_,resolvedType:a,searchInputRef:b,searchQuery:g,selectedItem:e,variableFilters:y,variableScopes:E,variableSets:O,variables:L})}):p?i.createElement(ea,{render:s=>i.createElement(el,{componentProps:s,currentView:n,disabledVariableIds:r,dsStyles:[],isLoading:A,onClose:m,onComponentPropSelected:p,onSearchInputChange:f,onVariableSelected:d,pickerControls:v(O),pickerType:o,recordingKey:c,requestedTypes:_,resolvedType:a,searchInputRef:b,searchQuery:g,selectedItem:e,variableFilters:y,variableScopes:E,variableSets:O,variables:L}),pickerType:o,requestedTypes:_,resolvedType:a}):i.createElement(el,{currentView:n,disabledVariableIds:r,dsStyles:[],isLoading:A,onClose:m,onSearchInputChange:f,onVariableSelected:d,pickerControls:v(O),pickerType:o,recordingKey:c,requestedTypes:_,resolvedType:a,searchInputRef:b,searchQuery:g,selectedItem:e,variableFilters:y,variableScopes:E,variableSets:O,variables:L})}function ei({styleType:e,render:r}){return r((0,M.Je)(e))}function ea({render:e,pickerType:r,requestedTypes:n,resolvedType:a}){return e(i.useCallback(()=>{let e=(()=>{switch(r){case"set-variable":return(0,c.k)().ds_variable_props_proto?s.CWU.getComponentPropsForSetVariableList():[];case"prop-assignment":return(0,c.k)().ds_variable_props_binding_props?s.CWU.getComponentPropsForPropAssignmentList():[];default:return s.CWU.getComponentPropsForFieldsList()}})(),i=[];return e&&Object.keys(e).length>0&&e.forEach(e=>{i.push(...(0,B.LV)(e.values,n,a))}),i},[r,n,a])())}function eo({styleType:e,selectedStyle:r,render:n}){let a=(0,M.Je)(e),o=(0,M.AH)(r?.key||null,r),{status:s,stylesByFileKey:c}=(0,M.Zk)({styleType:l.s4.FILL,initialSelectedSubscribedStyle:o}),d=(0,i.useMemo)(()=>Object.values(c).reduce((e,{styles:r})=>(e.push(...r),e),[]),[c]),u=(0,i.useMemo)(()=>a.concat(d),[a,d]);return i.createElement(k.mY,null,n({isLoading:"loaded"!==s,dsStyles:u}))}function es(e){let r=(0,W.Px)({includeSubtree:!0});return i.useMemo(()=>e.some(e=>"MIXED"===("LOCAL"===e.subscriptionStatus?r[e.keyForPublish]:r[e.key])),[e,r])}function el({variables:e,variableSets:r,dsStyles:n,currentView:a,selectedItem:l,disabledVariableIds:c,resolvedType:d,pickerType:p,recordingKey:_,isLoading:f,onVariableSelected:y,onStyleSelected:b,onClose:T,keepOpenOnItemSelect:C,requestedTypes:M,searchQuery:k,onSearchInputChange:x,variableScopes:W,variableFilters:z,onComponentPropSelected:X,componentProps:Q,onCMSFieldSelected:ee,cmsCollectionItem:et,pickerControls:er,searchInputRef:en}){(0,H.D)({isLoading:f??!1,eventName:"variables.variable_picker_load_time"});let ei=(0,N._G)(),ea=(0,A.Um)(),eo=l?(0,B.UT)(l):null,el=(0,w.u)(l&&l.type===R.PW.VARIABLE?l.node_id:void 0),ed=(0,w.G6)(el?.variableSetId),[eu,em]=i.useState(null);i.useRef(null).current=eu;let eh=es(r),e_=k.length>0||eh?"list":a.layout,eg=(0,K.s1)(),ef=(0,i.useMemo)(()=>Z({requestedTypes:M,resolvedType:d??null}),[M,d]),eE=b?[R.ub.VARIABLE,R.ub.STYLE]:[R.ub.VARIABLE],ey=(0,F.A)(ef,l?.type!=="CMS_FIELD"?l:null,eE),eb=(0,L.sZ)(),ev=(0,I.Fl)(),eT=(0,O.Oe)(eb)&&(0,S.NX)(ev),eI=ec({selectedItem:l,resolvedType:d,requestedTypes:M,onStyleSelected:b}),eS=(0,i.useMemo)(()=>{let e={};return(eT?eI:ey).forEach(r=>{e[r.libraryKey]=r.fileName}),e},[ey,eI,eT]),ew=(0,i.useMemo)(()=>M?e.filter(e=>M.includes(e.resolvedType)):e.filter(e=>void 0===d||e.resolvedType===d),[e,d,M]);var eA=el&&!ew.find(e=>(0,B.UT)(e)===eo);let eC=(0,i.useMemo)(()=>W?ew.filter(e=>(0,B.UT)(e)===eo||(0,$.AQ)(e,W)):ew,[ew,W,eo]),eN=(0,V.qF)(eC,k),eL=(0,i.useMemo)(()=>k.length>0?eN:eN.filter(e=>{let r=e.resolvedType,n=z?.[P.t.HIDE_IN_DEFAULT_VIEW];if(n&&n[r])return!1;let i=z?.[P.t.MUST_INCLUDE_ONE_OF];if(i&&i[r]?.length){let n=i[r];if("LIBRARY"===e.subscriptionStatus||n&&!Object.values(e.modeValues).some(e=>{if(e.type===s.Z_n.STRING){let r=e.value.trim().toLocaleLowerCase();return n?.some(e=>e===r)}return!1}))return!1}return!0}),[eN,k,z]),eO=(0,V.bT)(n,k),eR=(0,V.tZ)(Q??[],k),eP=(0,V.Ui)(et?.cmsFields??[],k),eD=(0,i.useMemo)(()=>{if("ALL_LIBRARIES"===a.type)return(0,B.dC)({variables:eL,variableSets:r,styles:eO,componentProps:eR,layout:e_,fileNamesByLibraryKey:eS,openFileLibraryKey:ei,slideThemeId:eg});if("CMS_FIELDS"===a.type)return(0,B.kE)({collectionName:et?.collectionName,cmsFields:eP});if(d===s.rXF.COLOR)return(0,B.w$)({variables:eL,variableSets:r,styles:eO,layout:e_,isLocal:"LOCAL_VARIABLES"===a.type,slideThemeId:eg});{let e=(0,B.HK)({variables:eL,variableSets:r,layout:e_});if(!X)return e;let n=(0,B.dh)({componentProps:eR});return n.length>0&&e.length>0&&n.push({type:B.Yc.SECTION_HEADER,name:(0,v.t)("variables.binding_ui.set_labels.variables_created_in_file")}),n.concat(e)}},[a.type,d,eL,r,eO,eR,e_,eS,ei,eg,et?.collectionName,eP,X]);var eM=!1;eA&&ed&&(eD.unshift({type:B.Yc.VARIABLES,items:[el],variableSet:ed}),eM=!0);let ek=i.useRef([]);ek.current=eD;let eF=i.useRef(null),ex=(0,i.useCallback)(()=>{eF.current?.scrollToTop();let e=function(e){let r=null;for(let n of e)if("items"in n){r=n.items[0];break}return r}(ek.current);em(e?(0,B.UT)(e):null)},[]),eU=(0,i.useCallback)((e,r)=>{let n=(0,B.oM)(ek.current,e);n>=0&&eF.current?.scrollToIndex(n,r),em(e)},[]),eB=(0,N.tS)(),eV=(0,i.useContext)(Y.d2);(0,j.g)({variables:e,variableSets:r,subscribedLibraries:ey,variableRerankingData:eV,fileKey:eB??"",orgId:eb?.id});let eG=(0,m.ZC)(k);(0,i.useLayoutEffect)(()=>{!f&&eG!==k&&(k.length>0||!eo?ex():k||eU(eo,{align:"center"}))},[k,f,ex,eU,eo,eG]);let{showStyleContextMenu:eH,hideStyleContextMenu:eK}=(0,G.XM)(),eW=(0,i.useCallback)((e,r)=>{e.type===R.PW.STYLE&&eH({dsStyle:e,position:r})},[eH]),ez=(0,i.useCallback)(e=>{em((0,B.UT)(e))},[em]),e$=(0,i.useCallback)(e=>{eu===(0,B.UT)(e)&&em(null)},[eu,em]),eY=(0,i.useCallback)(e=>{e.type===R.PW.VARIABLE?y(e):e.type===R.PW.STYLE?b?.(e,{fromSearch:k.length>0}):"COMPONENT_PROP"===e.type?X?.(e):"CMS_FIELD"===e.type&&ee?.(e),C||T()},[C,y,b,k.length,X,ee,T]),ej=(0,i.useCallback)(e=>{x(e.currentTarget.value)},[x]),eq=(0,i.useCallback)(r=>{if(r.keyCode===h.Uz.ENTER){let r=function({highlightedItemID:e,variables:r,dsStyles:n,componentProps:i,cmsFields:a}){return e?[...r,...n,...i,...a].find(r=>(0,B.UT)(r)===e)??null:null}({variables:e,dsStyles:n,componentProps:eR,cmsFields:eP,highlightedItemID:eu});r?eY(r):l&&y(),T()}else r.keyCode===h.Uz.ESCAPE?T():((0,E.Nt)(r,!1)||(0,E.c2)(r,!1)||(0,E.yn)(r.code,!1)||(0,E.lv)(r.code,!1))&&(eu?(eF.current?.getVirtualItems()??[]).some(e=>{let r=ek.current[e.index];return"items"in r&&r.items.some(e=>(0,B.UT)(e)===eu)})||eU(eu,{align:"center"}):eo?eU(eo,{align:"center"}):ex())},[e,n,eR,eP,eu,T,eY,l,y,eo,eU,ex]);return i.createElement(E.dP,{recordingKey:_,onClick:eK},i.createElement("div",{className:q.PP},i.createElement(ep,{inputRef:en,value:k,onChange:ej,onKeyDown:eq,recordingKey:g.Pt(_,"input")})),er,i.createElement(D.Id,{className:u()({[q.eB]:d!==s.rXF.COLOR,[q.a2]:!0})},f?i.createElement("div",{className:q.S,style:{height:(0,B.Ih)({layout:e_})}},i.createElement(o.k,null)):0!==eO.length||0!==eL.length||0!==eR.length||0!==eP.length||eM?"list"===e_?i.createElement(U.HZ,{ref:eF,className:q.jG,disabledVariableIds:c,highlightedItemID:eu,listItems:eD,onItemContextMenu:eW,onItemHighlight:ez,onItemMouseLeave:e$,onItemSelect:eY,pickerType:p,recordingKey:_,selectedItemID:eo}):i.createElement(U.Rm,{ref:eF,className:q.jG,highlightedItemID:eu,listItems:eD,onItemContextMenu:eW,onItemHighlight:ez,onItemMouseLeave:e$,onItemSelect:eY,recordingKey:_,selectedItemID:eo}):J(k,e_,!!X,d)),ea?.type===G.A7&&i.createElement(G.ip,{dsStyle:ea.data.dsStyle,position:ea.data.position,recordingKey:g.Pt(_,"contextMenu")}))}function ec({selectedItem:e,resolvedType:r,requestedTypes:n,onStyleSelected:a}){let o=(0,i.useMemo)(()=>Z({requestedTypes:n,resolvedType:r??null}),[n,r]),s=a?[R.ub.VARIABLE,R.ub.STYLE]:[R.ub.VARIABLE],l=(0,F.A)(o,e?.type!=="CMS_FIELD"?e:null,s),c=(0,L.sZ)(),d=(0,I.Fl)(),u=(0,O.Oe)(c)&&(0,S.NX)(d);return(0,i.useMemo)(()=>{if(u){let e=l.map(({fileKey:e,libraryKey:r,fileName:n})=>({key:e,name:n,libraryKey:r}));return(0,S.k9)({libraries:e,approvedLibraryKeysByResourceType:d}),e.map(({key:e,libraryKey:r,name:n})=>({fileKey:e,fileName:n,libraryKey:r}))}return l.sort((e,r)=>e.fileName.localeCompare(r.fileName))},[l,u,d])}function ed({variableSets:e,currentView:r,setCurrentView:n,onToggleLayout:a,selectedItem:o,resolvedType:s,setControlRightButtons:l,recordingKey:c,onStyleSelected:d,requestedTypes:u,searchQuery:p}){let m=ec({selectedItem:o,resolvedType:s,requestedTypes:u,onStyleSelected:d}),h=es(e),_=0===p.length,g=p.length>0||h?"list":r.layout,f=(0,i.useMemo)(()=>({...r,layout:g}),[r,g]);return i.createElement(z.Z,{recordingKey:c,currentView:f,resolvedType:s,subscribedLibraries:m,setControlRightButtons:l,onSetSelect:n,onToggleLayoutIconClick:_?a:void 0,disableGridLayout:h?z.t.MIXED_MODES:void 0})}function eu({recordingKey:e,onClose:r}){let n=g.rf(e,"mousedown",i.useCallback(e=>{r(),e.stopPropagation()},[r]));return(0,C.dH)()===s.NLJ.DROPPER_COLOR?null:i.createElement(b.n.div,{className:q.ZA,onMouseDown:n})}function ep({inputRef:e,value:r,onChange:n,onKeyDown:a,recordingKey:o}){let s=i.useRef(null);return(0,p.h)(()=>{s.current&&s.current.focus()}),i.createElement("div",{className:q.ON},i.createElement(y.B,{className:q.qc,svg:X.A}),i.createElement(D.jT,{ref:(0,_.A)(e,s),className:q.Rt,value:r,onChange:n,noBorderOnFocus:!0,placeholder:(0,v.t)("variables.binding_ui.search_placeholder"),onKeyDown:a,recordingKey:o}))}},243315:(e,r,n)=>{n.d(r,{$8:()=>B,AQ:()=>U,B3:()=>P,Ku:()=>k,Mm:()=>F,Us:()=>R,ZM:()=>D,aZ:()=>V,iG:()=>x,my:()=>T});var i=n(848318),a=n(425642),o=n(299456),s=n(87454),l=n(948502),c=n(427681),d=n(744903),u=n(352937),p=n(741419),m=n(166365),h=n(442313),_=n(374356),g=n(731650),f=n(668810),E=n(936763),y=n(598494),b=n(77351),v=n(844984),T=(e=>(e.SCOPE="scope",e.LABEL="label",e))(T||{});let I=new Set([p.rXF.FLOAT,p.rXF.COLOR,p.rXF.STRING]),S=new Set([p.rrT.FILL,p.rrT.STROKE,p.rrT.EFFECT]),w=new Set([p.j0r.FRAME_FILL,p.j0r.SHAPE_FILL,p.j0r.TEXT_FILL]),A=[{type:"scope",scope:p.j0r.ALL_SCOPES,name:(0,h.tx)("variables.scopes.all_properties")},{type:"scope",scope:p.j0r.CORNER_RADIUS,name:(0,h.tx)("variables.scopes.corner_radius"),iconElement:i.createElement(m.B,{svg:_.A})},{type:"scope",scope:p.j0r.WIDTH_HEIGHT,name:(0,h.tx)("variables.scopes.width_height"),iconElement:i.createElement(m.B,{svg:y.A})},{type:"scope",scope:p.j0r.GAP,name:(0,h.tx)("variables.scopes.gap"),iconElement:i.createElement(m.B,{svg:f.A}),subLabel:(0,h.tx)("variables.scopes.auto_layout")},{type:"scope",scope:p.j0r.TEXT_CONTENT,name:(0,h.tx)("variables.scopes.text_content"),iconElement:i.createElement(m.B,{svg:v.A})},{type:"scope",scope:p.j0r.STROKE_FLOAT,name:(0,h.tx)("variables.scopes.stroke"),iconElement:i.createElement(m.B,{svg:b.A})},{type:"scope",scope:p.j0r.OPACITY,name:(0,h.tx)("variables.scopes.layer_opacity"),iconElement:i.createElement(o.N,null)},{type:"scope",scope:p.j0r.EFFECT_FLOAT,name:(0,h.tx)("variables.scopes.effects"),iconElement:i.createElement(m.B,{svg:g.A})},{type:"label",key:"typography",label:(0,h.tx)("fullscreen.type_panel.typography")},{type:"scope",scope:p.j0r.FONT_STYLE,name:(0,h.tx)("variables.scopes.font_weight"),iconElement:i.createElement(s.j,null)},{type:"scope",scope:p.j0r.FONT_SIZE,name:(0,h.tx)("variables.scopes.font_size"),iconElement:i.createElement(l.Z,null)},{type:"scope",scope:p.j0r.LINE_HEIGHT,name:(0,h.tx)("variables.scopes.line_height"),iconElement:i.createElement(c.e,null)},{type:"scope",scope:p.j0r.LETTER_SPACING,name:(0,h.tx)("variables.scopes.letter_spacing"),iconElement:i.createElement(d.y,null)},{type:"scope",scope:p.j0r.PARAGRAPH_SPACING,name:(0,h.tx)("variables.scopes.paragraph_spacing"),iconElement:i.createElement(u.o,null)},{type:"scope",scope:p.j0r.PARAGRAPH_INDENT,name:(0,h.tx)("variables.scopes.paragraph_indent"),iconElement:i.createElement(m.B,{svg:E.A})}],C=[{type:"scope",scope:p.j0r.ALL_SCOPES,name:(0,h.tx)("variables.scopes.all_properties")},{type:"scope",scope:p.j0r.ALL_FILLS,name:(0,h.tx)("variables.scopes.all_fills")},{type:"scope",scope:p.j0r.FRAME_FILL,name:(0,h.tx)("variables.scopes.frame_fill"),devModeName:(0,h.tx)("variables.scopes.frame_fill_dev_mode"),indented:!0},{type:"scope",scope:p.j0r.SHAPE_FILL,name:(0,h.tx)("variables.scopes.shape_fill"),devModeName:(0,h.tx)("variables.scopes.shape_fill_dev_mode"),indented:!0},{type:"scope",scope:p.j0r.TEXT_FILL,name:(0,h.tx)("variables.scopes.text_fill"),devModeName:(0,h.tx)("variables.scopes.text_fill_dev_mode"),indented:!0},{type:"scope",scope:p.j0r.STROKE,name:(0,h.tx)("variables.scopes.stroke")},{type:"scope",scope:p.j0r.EFFECT_COLOR,name:(0,h.tx)("variables.scopes.effects")}],N=[{type:"scope",scope:p.j0r.ALL_SCOPES,name:(0,h.tx)("variables.scopes.all_properties")},{type:"scope",scope:p.j0r.TEXT_CONTENT,name:(0,h.tx)("variables.scopes.text_content"),iconElement:i.createElement(m.B,{svg:v.A})},{type:"scope",scope:p.j0r.FONT_FAMILY,name:(0,h.tx)("variables.scopes.font_family"),iconElement:i.createElement(l.Z,null)},{type:"scope",scope:p.j0r.FONT_STYLE,name:(0,h.tx)("variables.scopes.font_weight_or_style"),iconElement:i.createElement(s.j,null)}],L=[...A,...C,...N].reduce((e,r,n,i)=>("scope"in r&&(e[r.scope]=r.name),e),{}),O=[...A,...C,...N].reduce((e,r,n,i)=>("scope"in r&&(e[r.scope]=r.devModeName??r.name),e),{});function R(e,{devMode:r=!1}={}){return r?O[e]:L[e]}function P(e){let r;if(e?.length===0)return(0,h.tx)("variables.scopes.no_supported_properties");if(e.includes(p.j0r.ALL_SCOPES))return(0,h.tx)("variables.scopes.all_properties_label");for(let n of(0,a.RP)(e,e=>R(e)))r=r?i.createElement(i.Fragment,null,(0,h.tx)("variables.scopes.scope_list",{scope1:r,scope2:n})):n;return r??(0,h.tx)("variables.scopes.no_supported_properties")}let D={CORNER_RADIUS:p.j0r.CORNER_RADIUS,STACK_SPACING:p.j0r.GAP,STACK_PADDING_LEFT:p.j0r.GAP,STACK_PADDING_TOP:p.j0r.GAP,STACK_PADDING_RIGHT:p.j0r.GAP,STACK_PADDING_BOTTOM:p.j0r.GAP,TEXT_DATA:p.j0r.TEXT_CONTENT,WIDTH:p.j0r.WIDTH_HEIGHT,HEIGHT:p.j0r.WIDTH_HEIGHT,RECTANGLE_TOP_LEFT_CORNER_RADIUS:p.j0r.CORNER_RADIUS,RECTANGLE_TOP_RIGHT_CORNER_RADIUS:p.j0r.CORNER_RADIUS,RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:p.j0r.CORNER_RADIUS,RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:p.j0r.CORNER_RADIUS,STACK_COUNTER_SPACING:p.j0r.GAP,MIN_WIDTH:p.j0r.WIDTH_HEIGHT,MAX_WIDTH:p.j0r.WIDTH_HEIGHT,MIN_HEIGHT:p.j0r.WIDTH_HEIGHT,MAX_HEIGHT:p.j0r.WIDTH_HEIGHT,STROKE_WEIGHT:p.j0r.STROKE_FLOAT,BORDER_TOP_WEIGHT:p.j0r.STROKE_FLOAT,BORDER_BOTTOM_WEIGHT:p.j0r.STROKE_FLOAT,BORDER_LEFT_WEIGHT:p.j0r.STROKE_FLOAT,BORDER_RIGHT_WEIGHT:p.j0r.STROKE_FLOAT,OPACITY:p.j0r.OPACITY,PARAGRAPH_SPACING:p.j0r.PARAGRAPH_SPACING,PARAGRAPH_INDENT:p.j0r.PARAGRAPH_INDENT,FONT_FAMILY:p.j0r.FONT_FAMILY,FONT_STYLE:p.j0r.FONT_STYLE,FONT_VARIATIONS:p.j0r.PARAGRAPH_SPACING,FONT_SIZE:p.j0r.PARAGRAPH_SPACING,LETTER_SPACING:p.j0r.LETTER_SPACING,LINE_HEIGHT:p.j0r.LINE_HEIGHT,MISSING:null,VISIBLE:null,VARIANT_PROPERTIES:null,OVERRIDDEN_SYMBOL_ID:null,HYPERLINK:null,CMS_SERIALIZED_RICH_TEXT_DATA:null,SLOT_CONTENT_ID:null};Object.keys(p.Z6A).filter(e=>isNaN(Number(e)));let M={FRAME:p.j0r.FRAME_FILL,SYMBOL:p.j0r.FRAME_FILL,INSTANCE:p.j0r.FRAME_FILL,VECTOR:p.j0r.SHAPE_FILL,BRUSH:p.j0r.SHAPE_FILL,STAR:p.j0r.SHAPE_FILL,LINE:p.j0r.SHAPE_FILL,ELLIPSE:p.j0r.SHAPE_FILL,RECTANGLE:p.j0r.SHAPE_FILL,REGULAR_POLYGON:p.j0r.SHAPE_FILL,ROUNDED_RECTANGLE:p.j0r.SHAPE_FILL,TEXT:p.j0r.TEXT_FILL,TEXT_PATH:p.j0r.TEXT_FILL,VECTOR_OPERATION:p.j0r.SHAPE_FILL,NONE:null,DOCUMENT:null,CANVAS:null,GROUP_DEPRECATED:null,SLICE:null,STICKY:null,SHAPE_WITH_TEXT:null,CONNECTOR:null,CODE_BLOCK:null,WIDGET:null,STAMP:null,MEDIA:null,HIGHLIGHT:null,SECTION:null,SECTION_OVERLAY:null,WASHI_TAPE:null,VARIABLE:null,TABLE:null,TABLE_CELL:null,VARIABLE_SET:null,VARIABLE_OVERRIDE:null,SLIDE:null,CANVAS_ROW:null,CANVAS_GRID:null,ASSISTED_LAYOUT_DEPRECATED:null,INTERACTIVE_SLIDE_ELEMENT:null,MODULE:null,RESPONSIVE_SET:null,CODE_COMPONENT:null,CODE_LIBRARY:null,CODE_FILE:null,CODE_INSTANCE:null,CODE_LAYER:null,MANAGED_STRING:null,TRANSFORM:null,CMS_RICH_TEXT:null,REPEATER:null};function k(e){return M[e]}function F(e){return e===p.rXF.FLOAT?A:e===p.rXF.COLOR?C:e===p.rXF.STRING?N:[]}function x(e){let r=new Set;for(let n of e)D[n]&&r.add(D[n]);return r}function U(e,r){if(!I.has(e.resolvedType))return!0;let n=!1;for(let e of r)if(w.has(e)){n=!0;break}for(let i of e.scopes)if(r.has(i)||i===p.j0r.ALL_SCOPES||i===p.j0r.ALL_FILLS&&n)return!0;return!1}function B(){return[p.rXF.FLOAT,p.rXF.COLOR,p.rXF.STRING]}function V(e,r){if(!e||!r||!S.has(e))return;let n=new Set;switch(e){case p.rrT.STROKE:case p.rrT.STROKE_PRESET:n.add(p.j0r.STROKE);break;case p.rrT.FILL:for(let e in r){let r=M[e];r&&n.add(r)}break;case p.rrT.EFFECT:n.add(p.j0r.EFFECT_COLOR)}return n.size?n:void 0}},365581:(e,r,n)=>{n.d(r,{A6:()=>ef,BJ:()=>e_,Cg:()=>ec,Eo:()=>K,Ev:()=>eh,Gc:()=>ep,H2:()=>W,Ho:()=>q,Jo:()=>J,LC:()=>er,Oj:()=>j,Ri:()=>Y,TD:()=>es,Yt:()=>X,ZG:()=>H,bO:()=>em,cp:()=>$,hy:()=>ed,hz:()=>Z,jt:()=>eo,qy:()=>V,uk:()=>eu,wh:()=>z,xA:()=>el});var i=n(425642),a=n(988520),o=n(781131),s=n(741419),l=n(39773),c=n(430285),d=n(223926),u=n.n(d),p=n(239910),m=n.n(p),h=n(563304),_=n.n(h),g=n(149674),f=n.n(g),E=n(934589),y=n(429136),b=n(303035),v=n(373112),T=n(896966),I=n(967867),S=n(544339),w=n(992444),A=n(586719),C=n(33069),N=n(119310),L=n(635547),O=n(931516),R=n(853833);let P=(0,C.SG)(()=>s.Ez5.libraryAssets().fileLevelVariableSetsSubscribed),D=(0,l.eU)(e=>e(P).map(O.Rn)),M=(0,C.SG)(()=>s.Ez5.libraryAssets().fileLevelVariableSetsLocal),k=(0,l.eU)(e=>e(M).map(O.Dt)),F=(0,C.SG)(()=>s.Ez5.libraryAssets().fileLevelVariablesSubscribed),x=(0,C.SG)(()=>s.Ez5.libraryAssets().fileLevelVariablesLocal),U=(0,l.eU)(e=>e(x).map(O.kz)),B=(0,l.eU)(e=>e(F).map(O.ZI));(0,l.eU)(e=>({...m()(e(k),e=>e.keyForPublish),...m()(e(D),e=>e.key)})),(0,l.eU)(e=>({...m()(e(U),e=>e.keyForPublish),...m()(e(B),e=>e.key)}));let V=(()=>{let e=(0,N.OX)({},"SYNC_ATOM_VARIABLE_SETS_BY_ID"),r=(0,l.FZ)(e,(e,r)=>{if(r){if("added"in r){let n=m()(r.added.map(O.Dt),e=>e.node_id);return{...e,...n}}if("deleted"in r){let n={...e};return delete n[r.deleted],n}}return{}});return r.onMount=e=>{w.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariableSetsInfo()})});let r=(0,A.Vr)(r=>{e(r)});return()=>{r(),e(null)}},(0,N.S9)(r,e.reducer)})(),G=(0,l.eU)(e=>({...e(V),...e(el)})),H=(0,l.Iz)(e=>(0,l.eU)(r=>r(V)[e]));(0,l.Iz)(e=>(0,l.eU)(r=>r(el)[e]));let K=(0,l.Iz)(e=>(0,l.eU)(r=>r(G)[e]));(0,l.Iz)(e=>(0,E.BV)(r=>n=>n(r({fileKey:e}))));let W=(0,l.Iz)(e=>(0,l.eU)(r=>{let n={};for(let i of e)n[i]=r(L.o9k.Query({fileKey:i}));return n}),i.lu),z=(0,l.Iz)(e=>(0,l.eU)(r=>_()(m()(e),e=>r(L.BbB.Query({libraryKey:e})))),i.lu),$=(0,l.Iz)(e=>(0,E.eS)(r=>n=>n(r({fileKey:e}))));function Y(e){return L.eHy.Query(e?{hubFileId:e}:null)}let j=(0,l.Iz)(e=>(0,l.eU)(r=>{let n={};for(let i of e)n[i]=r((0,y.he)(L.cmY)({variableCollectionKey:i}));return n}),i.lu),q=(0,l.Iz)(e=>(0,l.eU)(r=>_()(m()(e),e=>r(L.Ipg.Query({libraryKey:e})))),i.lu),X=(0,l.Iz)(e=>(0,l.eU)(r=>{let n={};for(let i of e)n[i]=r(L.jXq.Query({fileKey:i}));return n}),i.lu),Z=(0,l.Iz)(e=>(0,l.eU)(r=>{let n={};for(let i of e)n[i]=r(L.eHy.Query({hubFileId:i}));return n}),i.lu);function J(e){let r=_()(m()(e),()=>c.Qw.disabled());return(0,l.eU)(r)}let Q=(0,l.eU)(e=>{let r=e(em),n=e(R.TG),i=Object.values(r).filter(e=>!(0,S.lR)(e,n)).map(e=>e.key).sort();return e((0,E.a5)(i.map(e=>({key:e})))).reduce((e,r)=>(e[(0,o.ey)(r.args.key)]=r.result,e),{})}),ee=(0,l.eU)(e=>{let r=e(em),n=e(R.TG),i=(e(I.JB)?Object.values(r).filter(e=>(0,S.lR)(e,n)):[]).map(e=>e.key).sort().map(e=>({key:e})),a=(0,S.ku)(S.p9,i,e);return"loaded"!==a.status?{}:a.data.reduce((e,r)=>{if("loaded"!==r.result.status)return e;let n=r.result.data.variable;if(!n)return e;let i=(0,o.ey)(n.key);return{...e,[i]:r.result}},{})}),et=(0,l.eU)(e=>({...e(Q),...e(ee)}),b.lQ),er=(0,N.Pj)(et,"SYNC_ATOM_USED_LIBRARY_VARIABLES_BY_KEY",{}),en=(0,l.eU)(e=>{let r=[...new Set(Object.values(e(Q)).map(e=>e.data?.variable?.variableCollection.key).filter(a.Vq))].sort();return e((0,E.Ew)(r.map(e=>({key:e})))).reduce((e,r)=>(e[(0,o.yG)(r.args.key)]=r.result,e),{})},b.lQ),ei=(0,l.eU)(e=>{let r=[...new Set(Object.values(e(ee)).map(e=>e.data?.variable?.variableCollection.key).filter(a.Vq))].sort().map(e=>({key:e})),n=(0,S.ku)(S.nT,r,e);return"loaded"!==n.status?{}:n.data.reduce((e,r)=>{if("loaded"!==r.result.status)return e;let n=r.result.data.variableCollection;if(!n)return e;let i=(0,o.ey)(n.key);return{...e,[i]:r.result}},{})}),ea=(0,l.eU)(e=>({...e(en),...e(ei)}),b.lQ),eo=(0,N.Pj)(ea,"SYNC_ATOM_USED_LIBRARY_VARIABLE_SETS_BY_KEY",{});(0,l.eU)(e=>{let r=Object.keys(e(V));if(0!==r.length)return r[0]});let es=(0,l.eU)(e=>Object.values(e(V))),el=(()=>{let e=(0,N.OX)({},"SYNC_ATOM_SUBSCRIBED_VARIABLE_SETS_BY_ID"),r=(0,l.FZ)(e,(e,r)=>{if(r){if("added"in r){let n=m()(r.added.map(O.Rn),e=>e.node_id);return{...e,...n}}{let n={...e};return delete n[r.deleted],n}}return{}});return r.onMount=e=>{w.Y5.onReady().then(()=>{e({added:s.CWU.getSubscribedVariableSetsInfo()})});let r=(0,A._n)(r=>{e(r)});return()=>{r(),e(null)}},(0,N.S9)(r,e.reducer)})(),ec=(()=>{let e=(0,N.OX)({},"SYNC_ATOM_LOCAL_VARIABLES_BY_ID"),r=(0,l.FZ)(e,(e,r)=>{if(r){if("added"in r)return r.added&&"map"in r.added||(0,T.x1)("variableChange is malformed, expected added to be an array","variableChange",{variableChange:r},{reportAsSentryError:!0}),{...e,...m()(r.added.map(O.kz),e=>e.node_id)};if("deleted"in r){let n=new Set(r.deleted);return f()(e,e=>e.node_id&&!n.has(e.node_id))}if("setDeleted"in r)return f()(e,e=>e.variableSetId!==r.setDeleted)}return{}});return r.onMount=e=>{w.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariablesInfo()})});let r=(0,A.j2)(r=>{e(r)});return()=>{r(),e(null)}},(0,N.S9)(r,e.reducer)})(),ed=(0,l.Iz)(e=>(0,l.eU)(r=>r(ec)[e]??null)),eu=(0,l.eU)(e=>Object.keys(e(ec)).map(r=>e(ed(r))).sort((e,r)=>-(0,v.Ez)(e.sortPosition,r?.sortPosition))),ep=(0,l.eU)(e=>u()(e(eu),e=>e.variableSetId)),em=(()=>{let e=(0,N.OX)({},"SYNC_ATOM_SUBSCRIBED_VARIABLES_BY_ID"),r=(0,l.FZ)(e,(e,r)=>{if(r){if("added"in r)return{...e,...m()(r.added.map(O.ZI),e=>e.node_id)};if("deleted"in r)return f()(e,e=>e.id!==r.deleted);if("setDeleted"in r)return f()(e,e=>e.variableSetId!==r.setDeleted)}return{}});return r.onMount=e=>{w.Y5.onReady().then(()=>{e({added:s.CWU.getSubscribedVariablesInfo()})});let r=(0,A.uE)(r=>{e(r)});return()=>{r(),e(null)}},(0,N.S9)(r,e.reducer)})();(0,l.Iz)(e=>(0,l.eU)(r=>r(em)[e]??null));let eh=(0,l.Iz)(e=>(0,l.eU)(r=>r(ec)[e]??r(em)[e]??null));function e_(e,r){let n=w.Y5.isReady(),i=new Map(Object.entries(r)),a=n&&e?s.CWU.getVariableResolvedValue(e,i):null,o=(0,l.eU)(a);return e&&(o.onMount=r=>{n||w.Y5.onReady().then(()=>{r(s.CWU.getVariableResolvedValue(e,i))});let a=(0,A.RW)(e,()=>{r(s.CWU.getVariableResolvedValue(e,i))});return()=>{a(),r(null)}}),o}let eg=(()=>{let e=(0,l.eU)({}),r=(0,l.FZ)(e,(e,r)=>{if(r){if("added"in r)return{...e,...m()(r.added.map(O.Vk),e=>e.node_id)};if("deleted"in r){let n=new Set(r.deleted);return f()(e,e=>e.node_id&&!n.has(e.node_id))}return{}}return e});return r.onMount=e=>{w.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariableOverridesInfo()})});let r=(0,A.xb)(r=>{e(r)});return()=>{r(),e(null)}},r})(),ef=(0,l.Iz)(e=>(0,l.eU)(r=>{let n=Object.values(r(eg)).filter(r=>r.variableSetId===e);return m()(n,e=>e.rootVariableKey)}))},450796:(e,r,n)=>{n.d(r,{D:()=>S,NF:()=>w,oz:()=>C});var i=n(848318),a=n(741419),o=n(897392),s=n(1329),l=n(157907),c=n(39773),d=n(579020),u=n(6819),p=n(730169),m=n(397579),h=n(896966),_=n(481540),g=n(772123),f=n(673481),E=n(369600),y=n(661780),b=n(365581),v=n(46601),T=n(708634);function I(e){switch(e){case a.rXF.BOOLEAN:return"boolean";case a.rXF.FLOAT:return"float";case a.rXF.STRING:return"string";case a.rXF.COLOR:return"color";case a.rXF.MAP:return"map";case a.rXF.SYMBOL_ID:return"symbol_id";case a.rXF.FONT_STYLE:return"font_style";case a.rXF.TEXT_DATA:return"text_data";case a.rXF.IMAGE:return"image";case a.rXF.LINK:return"link";case a.rXF.JS_RUNTIME_ALIAS:return"js_runtime_alias";case a.rXF.SLOT_CONTENT_ID:return"slot_content_id"}}function S({isLoading:e,eventName:r}){let n=(0,m.ZC)(e),a=(0,i.useRef)();(0,p.h)(()=>{a.current=performance.now()});let o=function(e){let r=(0,i.useRef)(!1);return function(){r.current||(e(),r.current=!0)}}(function(){if(a.current){let e=performance.now()-a.current;d.az.trackDefinedMetric(r,{loadTimeMs:e})}});n&&!e&&o()}function w({resolvedType:e}){let r=(0,E.tS)(),n=(0,y.TA)();(0,p.h)(()=>{r&&n&&d.az.trackDefinedEvent("variables.inline_creation_dialog_opened",{fileKey:r,userId:n,resolvedType:I(e)})})}function A(e){return"type"in e}function C(e,r,n){try{if(A(r)?r.type===a.Z_n.ALIAS:"ALIAS"===r.dataType){let i=A(r)?r.value:(0,s.dI)(r.value?.alias),d=A(r)?I(r.resolvedType):r.resolvedDataType,p=u.D.getState(),m=Object.keys(p.mirror.sceneGraphSelection),h=p.openFile?.key,E=p.user&&p.user.id,y=c.zl.get((0,b.Ev)(i)),S=y?.variableSetId?c.zl.get(b.Eo(y?.variableSetId))?.node_id:null,w=y?.variableSetId?c.zl.get(b.Eo(y?.variableSetId))?.sortPosition:null,C=a.CWU.getSubscribedVariableInfo(i),N=(0,g.ZR)(y??(0,g.O8)(C),p.openFile),L=(0,f.X)(N),O=p.mirror.selectedStyleProperties.guid;O&&(m=[o.dI(O)]);let R=function(){if((0,l.k)().aip_flower_garden_design_logging&&a.mHF)return JSON.stringify(Object.fromEntries(a.mHF.getVariableSetConsumptionForDocument()))}(),P=(0,v.y)(i);for(let r of((0,v.v)(i),m)){let o=function(e){if((0,l.k)().aip_flower_garden_design_logging&&a.mHF)return JSON.stringify(Object.fromEntries(a.mHF.getVariableSetConsumptionForHighestNodeContainer(e)))}(r);(0,_.ds)("ds_variable_reference_set",h,p,{userId:E,variable_id:i,collection_id:S,value_type:d?.toString().toUpperCase(),node_id:r,variable_field_id:e,is_style:!!O,is_shared:y?.subscriptionStatus==="SUBSCRIBED",library_key:N,partner_type:L,appleEulaAccepted:!!p.userFlags.apple_eula_accepted,attachmentSurfaceKey:n?.attachmentSurfaceKey,attachmentRecordingKey:n?.attachmentRecordingKey,previousValueVariableKey:n?.previousVariableKey,previousValueStyleLibraryKey:n?.previousStyleKey,hasVisiblePaintBelow:n?.hasVisiblePaintBelow,modeContext:(0,T.ZZ)(n?.modeContext),variableSetConsumptionForSelection:o,variableSetConsumptionForDocument:R,sessionId:n?.sessionId,elapsedSecondsSinceLastInsertions:P,rerankerQueryId:n?.queryId,variable_collection_position:w},{forwardToDatadog:!0})}}else if(A(r)&&r.type===a.Z_n.FONT_STYLE){let n=r.value.asString??r.value.asFloat,i=u.D.getState(),s=Object.keys(i.mirror.sceneGraphSelection),l=i.openFile?.key,d=i.user&&i.user.id,p=c.zl.get((0,b.Ev)(n?.value)),m=p?.variableSetId?c.zl.get(b.Eo(p?.variableSetId))?.node_id:null,h=p?.variableSetId?c.zl.get(b.Eo(p?.variableSetId))?.sortPosition:null,E=a.CWU.getSubscribedVariableInfo(n?.value),y=(0,g.ZR)(p??(0,g.O8)(E),i.openFile),v=(0,f.X)(y),T=i.mirror.selectedStyleProperties.guid;for(let r of(T&&(s=[o.dI(T)]),s))(0,_.ds)("ds_variable_reference_set",l,i,{userId:d,variable_id:n?.value,collection_id:m,value_type:n?.resolvedType?I(n?.resolvedType).toUpperCase():void 0,node_id:r,variable_field_id:e,is_style:!!T,is_shared:p?.subscriptionStatus==="SUBSCRIBED",library_key:y,partner_type:v,appleEulaAccepted:!!i.userFlags.apple_eula_accepted,variable_collection_position:h},{forwardToDatadog:!0})}}catch(e){(0,h.x1)("variables","Could not log variable consumption",{exception:e},{reportAsSentryError:!0})}}},725608:(e,r,n)=>{n.d(r,{B9:()=>L,Ex:()=>v,F$:()=>A,GC:()=>function e(r){let n=[...r.variables];for(let i of r.subgroups)n.push(...e(i));return n},Lo:()=>f,Od:()=>T,Pf:()=>C,Pw:()=>b,Qo:()=>w,US:()=>N,Wc:()=>g,Wx:()=>I,ZR:()=>P,cv:()=>S,hF:()=>O,ky:()=>R,nm:()=>_,om:()=>E,qQ:()=>M,rN:()=>k,x9:()=>F,yh:()=>x});var i=n(741419),a=n(157907),o=n(39773),s=n(626715),l=n.n(s),c=n(373112),d=n(79563),u=n(7712),p=n(525210),m=n(930684),h=n(101482);let _="Mode 1";function g(e,r,n=""){let i=e.map(e=>e.name),a=(0,p.F)(r).name;return(0,u.g)(n+a,i)}function f(e,r=""){return y(e,r,e=>e.name)}function E(e,r=""){return y(e,r,e=>e)}function y(e,r="",n){let i=r.slice(0,-1).split("/"),a=1===i.length?"":i.slice(0,-1).join("/")+"/",o=Array.from(new Set(e.map(n).filter(e=>e.startsWith(a)&&e.replace(a,"").includes("/")).map(e=>e.replace(a,"").split("/")[0])));return a+(0,u.g)(i[i.length-1].replace(/\d+$/,"").trim(),o)+"/"}function b(e){return function e(r){let n=[r];for(let i of r.subgroups.sort(D))n.push(...e(i));return n}(function(e){let r={"":{name:"",subgroups:[],variables:[]}};for(let n of e.sort((e,r)=>-(0,c.Ez)(e.sortPosition,r.sortPosition))){let e=C(n.name);r.hasOwnProperty(e)||(r[e]={name:e,subgroups:[],variables:[]}),r[e].variables.push(n)}for(let e of Object.keys(r)){let n=e.split("/").slice(0,-1);for(let e=1;e<n.length;e++){let i=n.slice(0,e).join("/")+"/";r.hasOwnProperty(i)||(r[i]={name:i,subgroups:[],variables:[]})}}for(let[e,n]of Object.entries(r))""!==e&&r[I(e)].subgroups.push(n);return r[""]}(e))}function v(e,r){let n=[];for(let i of e)r.includes(i.name)&&n.push(...function e(r){let n=[r.name];for(let i of r.subgroups)n.push(...e(i));return n}(i));return l()(n)}function T(e){return 0===e.variables.length?T(e.subgroups[0]):e.variables[0]}function I(e){if(0===e.length)return"";let r=e.split("/").slice(0,-1);return 1===r.length?"":r.slice(0,-1).join("/")+"/"}function S(e,r){return null===r?0:e.filter(e=>e.name.startsWith(r)).length}function w(e,r){return null===r?[]:e.filter(e=>e.name.startsWith(r))}function A(e,r,n){return w(e,r).every(e=>i.CWU.renameVariable(e.node_id,(0,d.rh)(n+"/"+O(e,r))))}function C(e){return e.includes("/")?e.split("/").slice(0,-1).join("/")+"/":""}function N(e,r){let n=e.split("/");return(0,d.rh)(r+n[n.length-1])}function L(e){let r=e.split("/");return r[r.length-1]}function O(e,r){return e.name.replace(r,"")}function R(e){let r=e.slice(0,-1).split("/");return r[r.length-1]}function P(e,r){return I(e)+r+"/"}function D(e,r){let n=T(e).sortPosition,i=T(r).sortPosition;return-(0,c.Ez)(n,i)}function M(e,r,n,a){let o,s;if(r){let[n,a]=r;i.CWU.insertVariableBetween(e,n,a);return}if(0===a.length)return;let l=function(e,r){if(""===r)return[];let n=I(r),i=(n.match(RegExp("/","g"))||[]).length+1;return e.filter(e=>e.name.startsWith(n)&&(e.name.match(RegExp("/","g"))||[]).length===i)}(a,n),c=l.findIndex(e=>e.name===n);if(-1===c)return;let d=l[c];d&&d.variables.length>=1?o=d.variables[d.variables.length-1]:c>0&&(o=function e(r){return 0===r.variables.length?e(r.subgroups[r.subgroups.length-1]):r.variables[r.variables.length-1]}(l[c-1])),c<l.length-1&&(s=T(l[c+1])),i.CWU.insertVariableBetween(e,o?.node_id||"",s?.node_id||"")}function k(e,r){return r?e:null}function F(){let e=(0,o.md)(m.X);return e.nameColumnWidth?`${e.nameColumnWidth}px`:h.U3}function x(e){let r=(0,o.md)(m.X);return(0,a.k)().ds_reorder_modes?Array.from({length:e.length+1},(n,i)=>{if(i===e.length)return`minmax(${h.SG}, 1fr)`;let a=r.valueColumnWidths?.get(e[i]?.id??"");return a?`${a}px`:h.SG}).join(" "):e.map((n,i)=>{if(i===e.length-1)return`minmax(${h.SG}, 1fr)`;let a=r.valueColumnWidths.get(n.id);return a?`${a}px`:h.SG}).join(" ")}},492085:(e,r,n)=>{n.d(r,{C:()=>g});var i=n(848318),a=n(356505),o=n(452551),s=n(654104),l=n(166365),c=n(566699),d=n(442313),u=n(950738),p=n(223801),m=n(760339),h=n(954184),_=n(681533);function g({groups:e,recordingKey:r,selectedGroup:n,setRenamingVariableID:g,variableSetID:f,setSelectedVariableID:E}){let y=i.useRef(null),{showing:b,toggle:v,hide:T}=(0,u.BK)(p.oU);return i.createElement("div",{className:m.zr},i.createElement(l.B,{className:m.Kk,svg:_.A}),i.createElement("div",{className:m.Qq},(0,d.t)("variables.authoring_modal.null_state_text")),g&&i.createElement(a.$n,{iconPrefix:i.createElement(c.U,{svg:h.A},i.createElement(o.x,null)),"aria-label":(0,d.t)("variables.authoring_modal.create_variable_button_label"),ref:y,variant:"secondary",onClick:()=>v(),recordingKey:s.Pt(r,"createVariableButton")},(0,d.t)("variables.authoring_modal.table.create_variable")),g&&b&&y.current&&i.createElement(p.mw,{targetRect:y.current.getBoundingClientRect(),variableSetID:f??null,selectedGroup:n,groups:e,recordingKey:r,setRenamingVariableID:g,onClose:T,setSelectedVariableID:E,insertVariableBetweenIDs:null}))}},217738:(e,r,n)=>{n.d(r,{iG:()=>u,vt:()=>d});var i=n(716544),a=n(376780),o=n(710665),s=n(572699),l=n(668249),c=n(922030);function d(e){let r={component:"useIsTeamLockedDueToStarterLimits",migrationGroup:l.L.GROUP_3},n=(0,s.NP)(r),d=(0,c.cD)(),u=(0,i.d4)(e=>!!d&&(0,o.oc)(d,e)),p=(0,s.FR)({component:"useIsTeamLockedDueToStarterLimits",migrationGroup:l.L.GROUP_3}),m=(0,s.yN)({component:"useIsTeamLockedDueToStarterLimits",attribute:"isOnceEduTeam",migrationGroup:l.L.GROUP_3,legacy:(e,r)=>e?.student_team_state===a.kU.STUDENT_TEAM_CURRENT||e?.student_team_state===a.kU.STUDENT_TEAM_EXPIRED,migrated:(e,r)=>r?.studentTeamState===a.kU.STUDENT_TEAM_CURRENT||r?.studentTeamState===a.kU.STUDENT_TEAM_EXPIRED});return!!n&&(!n||n===e)&&!!u&&!p&&!m}function u(e){if(!e)return!1;let r=!!(0,o.XX)(e),n=e.studentTeamState===a.kU.STUDENT_TEAM_CURRENT||e.studentTeamState===a.kU.STUDENT_TEAM_EXPIRED;return r||n}},905676:(e,r,n)=>{n.d(r,{t:()=>C});var i=n(848318),a=n(716544),o=n(565460),s=n(329994),l=n(493554),c=n(195507),d=n(266163),u=n(991371),p=n(17755),m=n(442313),h=n(500276),_=n(895104),g=n(449737),f=n(194546),E=n(802780),y=n(180423),b=n(155651),v=n(635547),T=n(710665),I=n(464012),S=n(117592),w=n(376298);function A(e){let r=(0,a.wA)(),n=(0,l.Rs)(v.Aqu,{teamId:e.teamId}),g=(0,E.Gm)();if("loaded"!==n.status||n.data.team?.stripeCustomerId.status!=="loaded")return null;let b=!!(0,c.oA)(n.data.team?.stripeCustomerId),I=[],S=(0,c.oA)(n.data.team?.allProjects),A=S?.length??0,C=S?.filter(e=>e.isViewOnly).length??0,N=S?.filter(e=>e.isInviteOnly).length??0,L=n.data.team?.teamFileCounts?.designFileCount??0,O=n.data.team?.teamFileCounts?.whiteboardFileCount??0,R=parseInt(n.data.team?.teamFileCounts?.slideFileCount??"0",10),P=(e,r,n)=>{e>r&&I.push({limitExceededType:n,limitExceededCount:e-r})};if(P(L,T.WW,"design_file_count"),P(O,T.WW,"whiteboard_file_count"),g&&P(R,T.WW,"slides_file_count"),P(A,T.Wf,"total_project_count"),A<=T.Wf&&(P(C,T.h,"view_only_project_count"),P(N,T.PX,"invite_only_project_count")),0===I.length)return null;let D=e.canEditTeam?(0,m.tx)("locked_team.card.title"):(0,m.tx)("locked_team.card.title_viewer"),M=e.canEditTeam?b?(0,m.tx)("locked_team.card.editor_previously_paid_description"):(0,m.tx)("locked_team.card.editor_previously_on_trial_description"):(0,m.tx)("locked_team.card.view_only_description"),k=e.canEditTeam?b?(0,m.tx)("locked_team.card.editor_previously_paid_cta"):(0,m.tx)("locked_team.card.editor_previously_on_trial_cta"):null,F=e=>{switch(e.limitExceededType){case"design_file_count":return(0,m.tx)("locked_team.card.move_figma_design_files",{numDesignFiles:e.limitExceededCount});case"whiteboard_file_count":return(0,m.tx)("locked_team.card.move_figjam_boards",{numFigjamFiles:e.limitExceededCount});case"slides_file_count":return(0,m.tx)("locked_team.card.move_figma_slides_files",{numSlidesFiles:e.limitExceededCount});case"total_project_count":return(0,m.tx)("locked_team.card.move_projects",{numProjects:e.limitExceededCount});case"view_only_project_count":return(0,m.tx)("locked_team.card.change_permissions_from_view_only",{numViewOnlyProjects:e.limitExceededCount});case"invite_only_project_count":return(0,m.tx)("locked_team.card.change_permissions_from_invite_only",{numInviteOnlyProjects:e.limitExceededCount});default:throw Error("Not a valid starter plan limit")}};return i.createElement(_.Y,{direction:"vertical",padding:e.noPaddingOrBorder?0:20,spacing:24,width:e.width,cornerRadius:e.noPaddingOrBorder?void 0:8,strokeWidth:e.noPaddingOrBorder?void 0:1,strokeColor:"default",height:"hug-contents"},i.createElement("div",{className:p.s.flex.justifyBetween.wFull.$},i.createElement("div",{className:p.s.flex.itemsCenter.justifyCenter.w32.h32.bRadius5.colorBgWarning.$},i.createElement(o.s,{className:w.K})),!!e.onClose&&i.createElement(u.Jn,{onClick:e.onClose})),i.createElement("div",{className:p.s.font14.fontSemiBold.lh24.$},D),i.createElement("div",{className:p.s.font13.lh24.$},M),e.canEditTeam&&i.createElement("div",{className:p.s.wFull.bb1.bSolid.$,style:h.sx.add({borderColor:"var(--color-bg-secondary)"}).$,role:"list"},I.map(e=>i.createElement("div",{key:e.limitExceededType,className:p.s.flex.itemsCenter.gap10.wFull.bt1.bSolid.pb12.pt12.fontMedium.$,style:h.sx.add({borderColor:"var(--color-bg-secondary)"}).$,role:"listitem"},i.createElement(s.U,{className:p.s.minW24.$}),i.createElement("div",{className:p.s.font11.lh16.$},F(e))))),!!k&&i.createElement("div",{className:p.s.flex.justifyEnd.wFull.$},i.createElement(d.vd,{onClick:()=>r(f.WX({teamId:e.teamId})),className:p.s.if(e.fullWidthButton,p.s.maxWFull.wFull).hAuto.lh16.preWrap.pt8.pb8.$,trackingProperties:{teamId:e.teamId,trackingDescriptor:b?y.c.UPGRADE_TO_PROFESSIONAL:y.c.REACTIVATE_YOUR_PROFESSIONAL_PLAN}},k)))}let C=(0,I.Ju)(function(e){let r=(0,a.wA)();return i.createElement(S.aF,{size:500},i.createElement(b.fu,{name:"Locked State Team Overview Modal",properties:{teamId:e.teamId}},i.createElement(A,{...e,width:452,onClose:()=>r(g.Lo()),noPaddingOrBorder:!0})))},"LockedStateOverviewModal")},576854:(e,r,n)=>{n.d(r,{A:()=>o});var i=n(848318),a=n(442313);function o({styles:e,props:r,Event:{onSignUpClick:n,onLogInClick:o},Component:{ModalCloseButton:s,BrandButton:l,ButtonSecondaryTracked:c,Svg:d}}){return i.createElement(i.Fragment,null,i.createElement(s,{...r}),i.createElement("div",{className:e.graphic},r.icon&&i.createElement(d,{svg:r.icon,useOriginalSrcFills_DEPRECATED:!0})),i.createElement("div",{className:e.header},r.headerText),i.createElement("div",{className:e.subHeader},(0,a.tx)("community.logged_out.sign_up_modal_body")),i.createElement(l,{type:"submit",className:e.primaryWideButton,onClick:n},(0,a.tx)("community.signed_out_modal.sign_up")),i.createElement(c,{className:e.logInButton,onClick:o},(0,a.tx)("community.signed_out_modal.log_in")))}},809278:(e,r,n)=>{n.d(r,{S:()=>g});var i=n(848318),a=n(716544),o=n(145015),s=n(473889),l=n(442313),c=n(697714),d=n(125395),u=n(731040),p=n(464012),m=n(54215),h=n(117592),_=n(318500);function g(e){let{profileId:r,profileHandle:n,emptyStateText:p}=e,h=(0,a.wA)(),[g,f]=i.useState([]),[E,y]=i.useState(!1);i.useEffect(()=>{y(!0),u.s.getRestrictedProfiles({profileId:r}).then(({data:e})=>{f(e.meta),y(!1)})},[r]);let b=(e,r)=>{f(g.map(n=>n.id===e?{...n,is_restricted_by_current_user:r}:n))},v=(e,r)=>{b(e,r),h(c.F.enqueue({message:r?(0,l.t)("community.comments.restricted_this_user_s_comments"):(0,l.t)("community.comments.unrestricted_this_user_s_comments"),type:"profile-restricted-change",button:{text:(0,l.t)("community.undo"),action:()=>{r?I(e):T(e)}}}))},T=r=>{h(d._8({profileId:e.profileId,blockedProfileId:r,onSuccess:()=>v(r,!0)}))},I=r=>{h(d.dL({profileId:e.profileId,blockedProfileId:r,onSuccess:()=>v(r,!1)}))},S=g&&g.length>0;if(!p&&!S)return i.createElement(i.Fragment,null);if(E)return i.createElement(s.kt,null);let w=S?i.createElement(i.Fragment,null,n?(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_profile_handles_community_files_and_plugins",{profileHandle:n}):(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_your_community_files_and_plugins")):i.createElement(i.Fragment,null,p," ",(0,l.tx)("community.comments.learn_more_about_managing_comments_on_your_files_and_plugins_in_community",{learnMoreLink:i.createElement(o.Us,{href:"https://help.figma.com/hc/articles/1500002628062",target:"_blank",trusted:!0},(0,l.tx)("general.learn_more"))})," "),A=i.createElement("div",{className:e.wrapperClassName?e.wrapperClassName:""},i.createElement("div",{className:_.tB},g.map(e=>i.createElement(m.y,{profile:e,key:e.profile_handle,rightSide:e.is_restricted_by_current_user?i.createElement(o.nR,{onClick:I.bind(null,e.id)},(0,l.tx)("community.comments.unrestrict")):i.createElement(o.$$,{onClick:T.bind(null,e.id)},(0,l.tx)("community.comments.restrict"))}))));return i.createElement(i.Fragment,null,i.createElement("div",{className:_.bV},(0,l.tx)("settings_tab.community_commenters_label")),w,A)}(0,p.Ju)(function(e){return i.createElement(h.aF,{className:_.Iy,popStack:!0},i.createElement(g,{profileId:e.profileId,profileHandle:e.profileHandle,emptyStateText:e.emptyStateText}))},"ProfilesBlockedFromCommentingModal")},949496:(e,r,n)=>{n(848318),n(431118),n(166365),n(442313),n(582371),n(364370),n(526830),n(503024)},598326:(e,r,n)=>{n.d(r,{K:()=>I});var i=n(848318),a=n(716544),o=n(776402),s=n(777611),l=n(731755),c=n(897378),d=n(356505),u=n(893822),p=n(831932),m=n(566699),h=n(442313),_=n(895104),g=n(775038),f=n(85442),E=n(449737),y=n(698522),b=n(503024),v=n(464012),T=n(908408);let I=(0,v.Ju)(function(e){let{localPlugin:r}=e,n=(0,a.wA)(),v=o.hS({open:e.open,onClose:e.onClose}),{error:I}=r;if(!I)return null;let S=(0,y.M)(),w=!!S?.isCompatibleWith({desktopVersion:80}),A=p.Ay.mac?(0,h.tx)("universal_insert.show_in_finder"):(0,h.tx)("universal_insert.show_in_explorer");return i.createElement(s.bL,{manager:v,width:"md"},i.createElement(l.vo,null,i.createElement(l.Y9,null,i.createElement(l.hE,null,(0,h.t)("universal_insert.manifest_error_title"))),i.createElement(l.nB,null,i.createElement(_.Y,{direction:"horizontal",horizontalAlignItems:"space-between",width:"fill-parent",verticalAlignItems:"start"},i.createElement(_.Y,{backgroundColor:"secondary",padding:4,width:"fill-parent",cornerRadius:3},i.createElement(g.E,{color:"secondary",fontSize:13,fontFamily:"monospace"},I.text)),i.createElement(c.K,{onClick:()=>{n(f.lW({stringToCopy:I.text}))},"aria-label":(0,h.t)("inspect_panel.copy"),htmlAttributes:{"data-tooltip-type":b.Ib.TEXT,"data-tooltip":(0,h.t)("inspect_panel.copy")}},i.createElement(m.U,{svg:T.A},i.createElement(u.a,null))))),i.createElement(l.wi,null,i.createElement(l.jk,null,i.createElement(d.$n,{onClick:()=>n(E.Lo()),variant:"secondary"},(0,h.tx)("universal_insert.cancel")),i.createElement(d.$n,{onClick:()=>{w?S?.openExtensionManifest(r.localFileId):S?.openExtensionDirectory(r.localFileId)},variant:"primary"},w?(0,h.tx)("universal_insert.edit_manifest"):A)))))},"DevelopmentResourceErrorModal")},608010:(e,r,n)=>{n.d(r,{A:()=>m});var i=n(848318),a=n(716544),o=n(213165),s=n(17755),l=n(442313),c=n(775038),d=n(211591),u=n(339270),p=n(656444);function m({localResource:e,publishedResource:r}){let{error:n,localFilePath:a}=e||{},s=(0,u.Pt)(n?.type,e);if(!e&&r)return i.createElement(_,{resource:r});if(!e||null==a)return null;if(!n)return i.createElement(o.R,{className:p.cV,text:a.replace("/manifest.json","")});if(!s)return null;let{action:l,msg:d,buttonText:m}=s;return i.createElement(i.Fragment,null,i.createElement(c.E,{color:"danger"},d),i.createElement(h,{onClick:l,isError:!0},m))}function h({children:e,onClick:r,isError:n}){return i.createElement("button",{onClick:e=>{e.stopPropagation(),r()},className:s.s.underline.bgTransparent.with({colorTextDanger:n,colorTextSecondary:!n}).$},e)}function _({resource:e}){let r=(0,a.wA)();return i.createElement("div",{className:p.cV},i.createElement(h,{onClick:()=>{r((0,d.JZ)({resourceType:e.is_widget?"widget":"plugin"}))}},i.createElement(c.E,null,(0,l.tx)("universal_insert.locate_local_version_text"))))}},709640:(e,r,n)=>{n.d(r,{ur:()=>m,xY:()=>h});var i=n(848318),a=n(716544);n(536384),n(145015);var o=n(166365),s=n(442313),l=n(566259),c=n(503024),d=n(522242),u=n(267849),p=(e=>(e.AUTO="auto",e.CONSTRAINED="constrained",e))(p||{});function m(){let e=(0,a.wA)(),r=i.useCallback(r=>{r.stopPropagation(),e(l.v({}))},[e]);return i.createElement("button",{className:d.qS,onClick:r},(0,s.tx)("community.buyer.update_payment"))}function h(){return i.createElement("div",{className:d.QW,"data-tooltip-type":c.Ib.TEXT,"data-tooltip":(0,s.t)("community.buyer.update_payment_info_to_retain_access")},i.createElement(o.B,{svg:u.A}))}},315002:(e,r,n)=>{n.d(r,{E0:()=>o,wR:()=>s});var i=n(818754);n(442313),n(986910);var a=n(27776);(0,i.hG)(a.BuT),(0,i.hG)(a.yUQ),(0,i.hG)(a.XaD),(0,i.hG)(a.fWT),(0,i.hG)(a.nnJ);let o=(0,i.hG)(a.tui),s=(0,i.hG)(a.i_6)},670268:(e,r,n)=>{n(848318),n(831932),n(654104),n(983229),n(166365),n(442313),n(503024)},439993:(e,r,n)=>{n.d(r,{PE:()=>g});var i=n(848318),a=n(716544),o=n(356505),s=n(792978),l=n(442313),c=n(895104),d=n(775038),u=n(670804),p=n(402840);function m(e){return{...e.is_widget?{widget_id:e.id}:{plugin_id:e.id},src:u.Nn.INVITE_TILE}}function h({resource:e}){let r=function(e){let r=(0,a.wA)(),n=m(e);return()=>r((0,u.dx)(n))}(e),n=function(e){let r=(0,a.wA)(),n=m(e);return()=>r((0,u.MZ)(n))}(e);return i.createElement(c.Y,null,i.createElement(o.$n,{onClick:e=>{e.stopPropagation(),n()},variant:"secondary"},(0,l.tx)("community.detail_view.decline")),i.createElement(o.$n,{onClick:e=>{e.stopPropagation(),r()},variant:"primary"},(0,l.tx)("community.detail_view.accept")))}function _({resource:e}){let r=(0,p.uF)(e),n=e.creator,a=e.is_widget?"widget":"plugin",o=`/community/${a}/${e.id}`;return i.createElement(d.E,null,(0,l.tx)("universal_insert.invited_you_to_publish",{ownerName:i.createElement(d.E,{fontWeight:"medium"},n.handle),resourceName:i.createElement(s.N,{newTab:!0,href:o,onClick:e=>{e.stopPropagation()},trusted:!0},i.createElement(d.E,{fontWeight:"medium"},r.name))}))}function g({resource:e}){return i.createElement(c.Y,{direction:"vertical"},i.createElement(_,{resource:e}),i.createElement(h,{resource:e}))}},5285:(e,r,n)=>{n(848318)},378175:(e,r,n)=>{n(848318),n(17755)},193025:(e,r,n)=>{n.d(r,{mk:()=>c});var i=n(848318);n(716544),n(39773);var a=n(818754);n(921494);var o=n(701780);n(364370),n(111947),n(193607),n(896853),n(96447),n(342431),n(369600),n(87089),n(661780),n(391788),n(928001),n(713534),n(124614),n(324964),n(677251),n(342887),n(919699);var s=n(315002),l=n(27776);function c(e,r){let n=(0,i.useRef)(null),a=(0,i.useRef)(!1);return r.every(e=>!!e)&&!a.current&&(n.current=e,a.current=!0),null!==n.current?n.current:e}(0,a.hG)(l.Yr1),(0,a.hG)(l.Eg1),new o.Mi(s.wR,s.wR+s.E0),i.createContext(null)},507770:(e,r,n)=>{n.d(r,{I:()=>C});var i=n(848318),a=n(891627),o=n(716544),s=n(376025),l=n(741419),c=n(536384),d=n.n(c),u=n(701780),p=n(782623),m=n(357287),h=n(442313),_=n(93724),g=n(992444),f=n(111781),E=n(661780),y=n(492119),b=n(503024),v=n(39766),T=n(300129),I=n(831060),S=n(357202),w=n(740623);function A({children:e,mini:r,user:n}){return r?i.createElement("div",{className:d()(w.HG,w.ET)},e):i.createElement("div",{"data-tooltip-type":b.Ib.TEXT,"data-tooltip":n.name||n.handle||"","data-tooltip-timeout-delay":"500","data-tooltip-show-below":!0,"data-tooltip-offset-y":"-20",className:d()(w.HG)},e)}function C({user:e,hideName:r,mini:n,searchQuery:a,triggeredFrom:s}){let c=e.hi_res_img_url||e.img_url,d=`${c}?c=1`,p=(0,v.$L)(e.id,v.us),h=(0,T.LL)(d,e.name||e.handle||"",p),b=(0,E.TA)(),S=(0,I.b)(),C=(0,o.wA)(),P=i.useCallback(()=>{C(_.F9({currentUserId:b??void 0,storeInRecentsKey:y.$A.FigJam,item:{id:e.id,user:e,type:y.vt.FaceStamp}}))},[b,C,e]),{dragState:D,onInsertableResourcePointerDown:M}=(0,f.Z)({iconSrc:h,insertAction:r=>{let{dropPosition:n}=r,i=r.pointerPercentageOffset?r.pointerPercentageOffset.x:0,a=r.pointerPercentageOffset?r.pointerPercentageOffset.y:0,o=new u.Mi(50,50),s=n.subtract(new u.Mi(i*o.x,a*o.y)).subtract(new u.Mi(5,5));(0,T.xG)(h,s.x,s.y,e.id,"drag",l.zkO.USER),P(),S()},clickToInsert_DEPRECATED:!1,afterSuccessfulInsert:S,resource:{id:e.id,name:e.name||"",img:h},triggeredFrom:s,searchQuery:a,mini:n});return n&&!h?null:i.createElement(A,{mini:n,user:e},h?i.createElement(m.n.recordableDiv,{className:w.RX,onPointerDown:M},i.createElement(O,{stampImageUrl:h,username:e.handle||"",onClick:()=>{let r=g.Y5.getViewportInfo();(0,T.xG)(h,r.offsetX,r.offsetY,e.id,"click",l.zkO.USER),P(),S()},dragging:null!==D,mini:n}),i.createElement(R,{dragState:D,imageUrl:h}),!r&&i.createElement(L,{username:e.name||e.handle||""})):i.createElement(i.Fragment,null,i.createElement(N,{mini:n}),!r&&i.createElement(L,{username:""})))}function N({mini:e}={}){return i.createElement("div",{className:d()(w.HG,{[w.ET]:e,[w.M4]:!e})},i.createElement("div",{className:d()(w.eP,w.iE)}),!e&&i.createElement("div",{className:d()(w.t$,w.OP)}))}function L({username:e}){return i.createElement("div",{title:e,className:w.OP},e)}function O(e){return i.createElement(s.E,{className:w.RT,recordingKey:"facestamp",onClick:e.onClick,htmlAttributes:{"data-testid":`facestamp-${e.username}${e.mini?"-mini":""}`}},i.createElement(p.oW,{draggable:!1,src:e.stampImageUrl,className:d()(w.iE,{[w.Jy]:e.dragging,[w.dG]:e.mini}),alt:(0,h.t)("whiteboard.face_stamps.aria_label",{userName:e.username})}))}function R(e){if(!e.dragState?.dragPosition||!e.dragState.grabbedPointerPercentageOffset)return null;let r=function(){let{zoomScale:e}=g.Y5.getViewportInfo();return new u.Mi(50,50).scale(e)}(),n=e.dragState.dragPosition.subtract(new u.Mi(e.dragState.grabbedPointerPercentageOffset.x*r.x,e.dragState.grabbedPointerPercentageOffset.y*r.y));return(0,a.createPortal)(i.createElement(p.oW,{alt:"",className:d()(S.$J,{[S.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:n.x,top:n.y,width:r.x,height:r.y},src:e.imageUrl}),document.getElementById("fullscreen-root"))}},22378:(e,r,n)=>{n.d(r,{qK:()=>c});var i=n(848318),a=n(716544),o=n(277019),s=n(369600),l=n(834111);function c(){let e=(0,a.d4)(e=>e.recentlyUsed.faceStamps),r=function(){let e=!!s.q5()?.org,r=(0,a.d4)(e=>(0,l.zg)(e.selectedView)&&!e.user);return!!(e&&!r)}(),n=(0,o.o)();return i.useMemo(()=>n&&r?e.figjam.map(e=>e.user):[],[n,e,r])}n(492119)},840505:(e,r,n)=>{n(848318)},630192:(e,r,n)=>{n.d(r,{Yx:()=>E});var i=n(848318),a=n(716544),o=n(741419),s=n(673906);n(654104),n(357287);var l=n(442313);n(32772);var c=n(449737);n(93724),n(710905),n(57630),n(445770),n(124614),n(492119),n(5285),n(193025),n(840505),n(831060);var d=n(832802),u=n(973182),p=n(464012),m=n(6760),h=n(610991),_=n(770360);let g="delightful-toolbar-media-button",f="InsertMediaModal";function E(e){let r=function(e){switch(e){case"Table":return o.NLJ.TABLE;case"CodeBlock":return o.NLJ.CODE_BLOCK;case"MindMap":return o.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS;case"Text":return o.NLJ.TYPE;case"Section":return o.NLJ.SECTION;default:throw Error(`Unknown tool: ${e}`)}}(e),n=()=>{s.l7.user("click-insert-tool",()=>o.glU.createNodeAtViewportCenterFromTool(r))};return{insertToolWithDragAction:e=>{let{dropPosition:i,isClick:a}=e;a?n():s.l7.user("drag-insert-tool",()=>o.glU.createNodeFromTool(r,i.x,i.y))},insertToolOnClickAction:n}}(0,p.Ju)(function(){let e=(0,a.wA)(),r=(0,a.d4)(e=>!!e.modalShown?.data?.shouldMountCenter),n=i.useRef(null),s=r?{kind:"mountCenter"}:{kind:"buttonTarget",buttonTarget:g},{initialModalPosition:p,modalPosition:E,setModalPosition:y}=(0,u.ts)(s,157,320),b=i.useCallback(()=>{o.glU.triggerAction("set-tool-default",null),e(c.ES({type:f}))},[e]),v=i.useCallback(e=>{y(e)},[y]),T=!E||!!p?.equals(E);return(i.useEffect(()=>{let e=e=>{let r=n.current?.getEl(),i=(0,d.Tc)(g);if(!r||!i)return;let a=r.contains(e.target),o=i.contains(e.target);!T||a||o||b()};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[b,T]),p)?i.createElement(m.vx,{ref:n,arrowPosition:m.F_.BOTTOM,arrowRelativeX:r?void 0:160,containerClassName:_.jT,dragHeaderOnly:!0,headerClassName:_.N1,initialPosition:p,initialWidth:320,isFigJam:!0,onClose:b,onDragEnd:v,onDragStart:()=>o.glU.triggerActionInUserEditScope("set-tool-default",null),smallArrow:!0,title:(0,l.t)("whiteboard.embeds.insert_embed_modal.title")},i.createElement("div",{className:_.hQ,"data-testid":"insert-media-modal"},i.createElement(h.q,{onSuccess:b}))):null},f),n(688732),n(721569),n(795426),n(146493)},594656:(e,r,n)=>{n.d(r,{QK:()=>m,zX:()=>p});var i=n(848318),a=n(716544),o=n(493554),s=n(96447),l=n(105073),c=n(973182),d=n(635547),u=n(526830);function p({extensionId:e}){let r=(0,a.d4)(e=>e.currentUserOrgId),n=(0,o.Rs)(d.BB3,{orgId:r});return i.useMemo(()=>n.data?.currentUser?.installedPlugins.find(r=>r.pluginId===e)?.id,[n.data?.currentUser?.installedPlugins,e])}function m(e,r){let n=(0,s.Be)(),i=r===u.vt.PLUGIN?n.plugins[e]:n.widgets[e],o=(0,l.xp)(e),d=(0,l.aQ)(e),m=(0,a.d4)(r=>r.publishedPlugins[e]?o:d),h=p({extensionId:e}),{unsave:_,save:g}=(0,c._i)(e,r,m,h);return{unsave:_,save:g,isSavedForUser:!!(i&&"user"===i.installed_by),isSavedForOrg:!!(i&&"org"===i.installed_by),version:i}}},181464:(e,r,n)=>{var i=n(848318);n(716544),n(157907),n(536384),n(178169),n(182059),n(575492),n(166365);var a=n(442313),o=n(211591);n(142751);var s=n(449737);n(155651),n(96447),n(105073),n(911456),n(973182),n(950738),n(710905),n(928001),n(402840),n(124614),n(526830);var l=n(464012);n(932627),n(205397),n(949496),n(709640),n(315002),n(378175),n(193025),n(831060);var c=n(117592);n(269100),(0,l.Ju)(function({dispatch:e}){return i.createElement(c.Rw,{cancelText:(0,a.t)("whiteboard.inserts.widget_development_error_modal_close"),confirmText:(0,a.t)("whiteboard.inserts.widget_development_import_manifest"),confirmationTitle:(0,a.t)("whiteboard.inserts.widget_development_error_modal_title"),content:(0,a.t)("whiteboard.inserts.widget_development_error_modal_description"),disableClickOutsideToHide:!0,hideCancel:!1,hideOnConfirm:!1,onConfirm:()=>{e((0,o.JZ)({resourceType:"widget"})),e(s.Lo())},popStack:!0,size:"small"})},"FigjamPublishedDevelopmentWidgetErrorModal",l.ZU.YES)},385754:(e,r,n)=>{n.d(r,{EJ:()=>I,T9:()=>S,_n:()=>T,lD:()=>w,ms:()=>A});var i=n(848318),a=n(716544);n(141039),n(182059);var o=n(442313),s=n(211591);n(85442),n(449737);var l=n(339270),c=n(96447);n(911456);var d=n(973182),u=n(950738),p=n(87089),m=n(402840);n(526830);var h=n(677251),_=n(90874),g=n(318309);n(932627),n(561431);var f=n(60546),E=n(161922),y=n(205397);function b({pluginId:e,preferences:r}){let{pinnedPlugins:n,pinPlugin:i,unpinPlugin:a}=r;return n.find(r=>r.plugin_id===e)?{displayText:(0,o.t)("dev_handoff.inspect_panel.unpin"),callback:()=>{a(e)}}:{displayText:(0,o.t)("dev_handoff.inspect_panel.pin"),callback:()=>{i(e)}}}function v({plugin:e}){let{callback:r,isPluginSetToAutoRun:n}=(0,_.bE)(e??null);return(0,_.aY)(e)?{displayText:(0,o.t)("dev_handoff.inspect_panel.auto_run"),callback:r,isChecked:n}:null}n(181464);let T="DROPDOWN_TYPE_SAVED_AND_RECENT_ACTIONS_DROPDOWN";function I(e){let r=(0,u.Um)(),n=(0,g.VR)(),a=(0,f.ks)(),s=(0,p.sZ)(),l=(0,c.ll)(),d=v({plugin:e.plugin}),h=[];return(h.push({displayText:(0,o.t)("universal_insert.view_details"),callback:e.viewResource}),a&&((0,m.Th)(e.plugin,s,l)&&n.loaded&&h.push(b({pluginId:e.plugin.plugin_id,preferences:n})),d&&h.push(d)),r)?a?i.createElement(A,{parentRect:r?.data.targetRect,lean:"left",minWidth:64,items:h,autoHeight:!0}):i.createElement(A,{parentRect:r?.data.targetRect,lean:"left",minWidth:64,items:h}):null}function S(e){if(!e.localResource&&!e.publishedResource)throw Error("Either localResource or publishedResource is required");let r=(0,f.ks)(),n=(0,a.wA)(),p=(0,u.Um)(),_=Object.values((0,c.$1)()).find(r=>r.plugin_id===e.publishedResource?.id),E=(0,g.VR)(),y=v({plugin:e.publishedResource?(0,m.uF)(e.publishedResource):null}),T=e.localResource||_,I=(0,c.B7)(T?T.plugin_id:e.publishedResource.id),S=(0,c.Ud)(T?T.plugin_id:e.publishedResource.id),w=e.publishedResource||I||S,C=!!w?.versions[w.current_plugin_version_id],N=w?w.is_widget:T?.manifest.containsWidget,L=(0,d.LR)(),O=(0,l.NV)(T,w),R=(0,l.OX)(w),P=(0,l.x2)(T,w,L),D=(0,l.qu)(T),M=(0,l.qi)(C,()=>{T&&n(s.qR(T?.localFileId))});if(!p||!p.data.targetRect)return null;let k=[];(T&&!T.error||w)&&k.push(O),C&&e.viewResource&&k.push({displayText:(0,o.t)("universal_insert.view_details"),callback:e.viewResource}),C&&k.push(P),T&&T.error?.type!==h.ho.LOAD&&k.push(D),T||k.push({displayText:(0,o.t)("universal_insert.locate_local_version"),callback:()=>{(0,s.JZ)({resourceType:N?"widget":"plugin"})}});let F=[];w&&C&&E.loaded&&r&&F.push(b({pluginId:w.id,preferences:E})),C&&y&&F.push(y);let x=[];T&&x.push(M),R&&x.push(R);let U=k.some(Boolean)&&(x.some(Boolean)||F.some(Boolean))&&{displayText:"",separator:!0},B=x.some(Boolean)&&F.some(Boolean)&&{displayText:"",separator:!0};return i.createElement(A,{parentRect:p.data.targetRect,lean:"left",minWidth:y?220:120,rootAndSubmenuMaxWidth:y?void 0:190,disableDropdownScrollContainer:!0,hidePointWhenContentOffScreen:!0,dataTestId:"developmentResourceOptionDropdown",items:[...k,U,...F,B,...x].filter(e=>!!e)})}let w="DROPDOWN_TYPE_DEVELOPMENT_RESOURCE_OPTIONS_DROPDOWN";function A(e){let r=(0,a.wA)();return i.createElement(E.j,{...e,dispatch:r,showPoint:!0,type:y.it.DEFAULT,onSelectItem:e=>{e.callback&&e.callback("",null,r)}})}},797323:(e,r,n)=>{n.d(r,{B6:()=>m,Kr:()=>c,Nh:()=>h,Zm:()=>p,kB:()=>_});var i=n(848318);n(716544),n(39773);var a=n(818754);n(431118),n(17755);var o=n(442313);n(639375),n(339599),n(45584),n(986910),n(36523),n(60546),n(670268),n(965171),n(851968);var s=n(27776);n(968638),(0,a.hG)(s.rDe);let l=(0,a.hG)(s.SKA);(0,a.hG)(s.rZj);let c=44;(0,a.hG)(s.wgS);let d=(0,a.hG)(s.iah),u=(0,a.hG)(s.LdP);(0,a.hG)(s.paq);let p=6,m=2;function h(e){if(!e)return{x:d,y:d};let r=document.querySelector("#toolbelt-action-component-insert");if(r){let e=r.getBoundingClientRect(),n=e?e?.top-l-6:u;return{x:e?.x||284,y:n}}{let e=document.querySelector("#toolbar-action-component-insert")?.getBoundingClientRect();return{x:e?.x||284,y:e?.bottom||u}}}function _(e){if(!e.community_publishers?.accepted||0===e.community_publishers.accepted.length)return"";let r=e.community_publishers.accepted[0].name;return 1===e.community_publishers.accepted.length?(0,o.t)("community.resource.by_creator",{spaceChar:" ",creator:r}):(0,o.t)("community.resource.by_more_than_2_creators",{spaceChar:" ",creator1:r,others:(0,o.t)("community.resource.by_x_others",{numPublishers:e.community_publishers.accepted.length-1})})}i.createContext(null)},972844:(e,r,n)=>{n.d(r,{s:()=>i});var i=(e=>(e.COMPONENT="component",e.PLUGIN="plugin",e.WIDGET="widget",e))(i||{}),a=(e=>(e[e.MAIN=0]="MAIN",e[e.ORG_PRIVATE_EXPANDED_LIST=1]="ORG_PRIVATE_EXPANDED_LIST",e[e.ORG_ALLOWLIST_EXPANDED_LIST=2]="ORG_ALLOWLIST_EXPANDED_LIST",e))(a||{})},385672:(e,r,n)=>{n.d(r,{dr:()=>ef,yG:()=>eE});var i=n(848318),a=n(716544),o=n(988520),s=n(897378),l=n(792760);n(673906);var c=n(536384),d=n.n(c);n(141039),n(16196);var u=n(145015),p=n(792647),m=n(166365),h=n(566699),_=n(291499),g=n(17755),f=n(442313),E=n(500276),y=n(895104),b=n(173270),v=n(473574),T=n(125644),I=n(157410),S=n(364370);n(544795);var w=n(790355),A=n(405866),C=n(155651),N=n(764945),L=n(2626),O=n(96447),R=n(481540),P=n(105073),D=n(705724);n(911456);var M=n(950738),k=n(87089),F=n(376780),x=n(402840),U=n(526830);n(677251);var B=n(503024),V=n(90874),G=n(836301),H=n(106774),K=n(208234);n(641802);var W=n(48437),z=n(60546),$=n(161922);n(608010);var Y=n(709640);n(439993);var j=n(172007);n(181464);var q=n(385754),X=n(797323);n(972844);var Z=n(968638),J=n(957897),Q=n(580012),ee=n(415431),et=n(579393),er=(e=>(e.COMMUNITY="community",e.RECENT="recent",e.DEVELOPMENT="development",e.DEVELOPMENT_MISSING_LOCAL="development_missing_local",e.ORG_PRIVATE="org_private",e.SAVED="saved",e.INVITED="invited",e))(er||{});function en(e){let r=(0,a.d4)(e=>e.orgById);if(e.resource.is_private){let n=e.resource?.org_id&&r[e.resource.org_id]?.name;return i.createElement(m.B,{svg:et.A,className:Z.kQ,"data-tooltip-type":B.Ib.TEXT,"data-tooltip":n?(0,f.t)("community.plugins.private_for_plugin_org_name",{orgName:n}):(0,f.t)("community.plugins.private_for_plugin_org")})}return i.createElement(i.Fragment,null)}let ei=i.createContext(null);function ea(){return(0,o.sR)(i.useContext(ei),"Must be wrapped within <FdBrowseWidgetTileContext.Provider>")}let eo=i.createContext(null);function es(){return(0,o.sR)(i.useContext(eo),"Must be wrapped within <FdBrowsePluginTileContext.Provider>")}function el(e,r,n){let a=i.useRef(null),o=i.useCallback(()=>{a.current&&a.current.click()},[a]),{setKeyboardNavigationElement:s,isFauxFocused:l,keyboardNavigationItem:c}=(0,p.M3)({path:r||[0],fauxClick:o,id:e}),d=n&&r&&r.length>=2&&r[0]===X.B6&&0===r[1];return i.useEffect(()=>{d&&c?.fauxFocus()},[d,c]),{setKeyboardNavigationElement:s,isFauxFocused:l,keyboardNavigationButtonRef:a}}i.memo(function(e){let r=(0,O.Be)(),n=r.plugins[e.pluginId]||r.orgPlugins[e.pluginId],a=(0,O.b4)()[e.pluginId],o=(0,O.cW)()[e.pluginId],s=i.useMemo(()=>"recent"===e.type?a:"org_private"===e.type?(0,x.uF)(o):n,[n,e.type,o,a]),l=(0,M.Um)(),c=l?.type===q._n&&l.data.pluginId===e.pluginId&&l.data.targetRect&&l.data.viewType===e.type,d=eE(e.pluginId,e.type);return i.createElement(ec,{pluginId:e.pluginId,type:e.type,dropdownIsShown:c,runOptionsDropdownIsShown:d,version:s})});let ec=i.memo(function(e){let{dropdownIsShown:r,version:n}=e,o=(0,a.wA)(),{viewPluginDetails:s}=es(),l=i.useCallback(n=>{n.stopPropagation(),r?o(w.oB()):o(w.j7({type:q._n,data:{pluginId:e.pluginId,targetRect:n.currentTarget.getBoundingClientRect(),viewType:e.type}}))},[r,o,e.pluginId,e.type]),c=(0,L.dR)(e.pluginId,"universal-insert"),d=(0,L.Gt)(e.pluginId,"universal-insert"),u=(0,N.t)(e.pluginId,d,c),p=u.length>0,m=e.runOptionsDropdownIsShown&&p,h=i.useRef(null),{validatePublishedPluginInOrgAllowlist:_,isPluginBlockedByAllowlist:g}=(0,O.j1)(e.pluginId),f=(0,L.RK)(e.pluginId),E=i.useCallback(r=>{if(r?.stopPropagation(),_()){if(p){m?o(w.oB()):o(ef({pluginId:e.pluginId,tileType:e.type}));return}f?d():c(),o(A.b({seen_published_plugin_onboarding_modal:!0})),o(A.b({seen_development_plugin_onboarding_modal:!0}))}},[_,p,f,o,m,e.pluginId,e.type,d,c]),y=h.current?.getBoundingClientRect();if(!n)return null;let b=!!(m&&y)||r,v=i.createElement(j._W,{resourceId:e.pluginId,resourceType:U.vt.PLUGIN,parentView:j.nN.TILE,isFauxFocused:b});return i.createElement("div",null,i.createElement(eu,{isFauxFocused:b,onClick:E,onOptionsClick:l,optionsButtonIsActive:r,pluginId:e.pluginId,pluginVersion:n,primaryCTAButton:v,secondaryIcon:i.createElement(en,{resource:n}),showOnClickDropdownChevron:p,visuallyDisabled:g}),i.createElement("div",{ref:h}),m&&y&&i.createElement($.j,{showPoint:!1,lean:"center",items:u,onSelectItem:e=>{e.callback&&e.callback("",null,o)},parentRect:y,dispatch:o}),r&&i.createElement(q.EJ,{viewResource:s,plugin:n}))});function ed({pluginId:e,name:r,icon:n,iconUrl:a}){let[o,s]=i.useState(!!n);return i.createElement("div",{className:d()(o?Z.lP:Z.vt)},n||i.createElement(G.V,{plugin:{name:r,plugin_id:e,redirect_icon_url:a??""},loading:"lazy",alt:`${r} icon`,onLoad:()=>s(!0)}))}function eu(e){let r;let n=e.pluginVersion?.name??e.localPlugin?.name??"",a=e.pluginVersion?.redirect_icon_url,{isPluginSetToAutoRun:o}=(0,V.bE)(e.pluginVersion??null),c=e.localPlugin?e.localPlugin.manifest.editorType:e.pluginVersion?.manifest.editorType,u=!e.subheader,{viewPluginDetails:p,keyboardNavigationPath:I,shouldFocusFirstItem:S}=es(),{setKeyboardNavigationElement:w,isFauxFocused:A,keyboardNavigationButtonRef:N}=el(`plugin_${n}`,I,!!S),L=(0,C.j6)(),M=(0,P.ul)(e.pluginId),F=Object.values((0,O.$1)()).find(r=>String(r.plugin_id)===e.pluginId),U=(0,x.uF)(M),G=(0,x.pk)(U),H=(0,P.EO)(M)&&!F,K=(0,P.OY)(M),$=(0,P.gn)(M)&&!F,j=(0,k.sZ)(),q=(0,O.ll)(),X=!F&&(0,D.BF)({org:j,extensionVersion:U??e.pluginVersion,isWidget:!1,allowlistedExtensions:q}),et=e.isCommunityPreview&&!X&&!e.isDevModeWizard,er=H&&!K?i.createElement(ey,{plugin:M,hideFreeTrialBadge:!0}):$?i.createElement(Y.ur,null):et?i.createElement(e_,{pluginId:e.pluginId,buttonRef:N}):void 0,en=(0,v.QP)({resource:M,height:"16",validBadges:[v.op.FREEMUM,v.op.OFF_PLATFORM,v.op.PURCHASED]}),ei=e.metadataOverrideNode??i.createElement(i.Fragment,null,i.createElement("div",{className:Z.FV},i.createElement(y.Y,{spacing:4},i.createElement("div",{className:d()(Z.B6,{[g.s.colorTextDisabled.$]:e.visuallyDisabled})},n),o&&i.createElement(b.Ex,{height:"16"},(0,f.t)("universal_insert.auto_run")),e.inReview&&i.createElement(T.L,{height:"16"}),!!e.secondaryIcon&&e.secondaryIcon,en&&!$&&i.createElement("div",{className:Z.UK},en),e.publishingStatusIcon&&i.createElement("div",{className:g.s.colorIcon.$},i.createElement(_.t,{svg:e.publishingStatusIcon})),e.showOnClickDropdownChevron&&i.createElement(m.B,{svg:J.A,className:Z.o2})),e.subheader&&i.createElement("div",{className:Z.ZK},e.subheader)),er&&i.createElement("div",{className:Z.D1},er),e.onOptionsClick&&i.createElement(s.K,{onClick:e.onOptionsClick,"aria-label":(0,f.t)("universal_insert.more_options"),htmlAttributes:{"data-tooltip-type":B.Ib.TEXT,"data-tooltip":(0,f.t)("universal_insert.more_options")}},i.createElement(h.U,{svg:Q.A,fallbackSvg:ee.A,className:e.optionsButtonIsActive?Z.F$:Z.D1},i.createElement(l.J,null))),e.primaryCTAButton&&i.createElement("div",{style:E.sx.add({alignSelf:"center"}).$},e.primaryCTAButton)),ea=function(e,r){if((0,z.ks)());else if(e&&r)return!0;return!1}(e.showEditorTypeIcon,c),eo=(0,z.ks)();r=ea?i.createElement(W.li.IconAndBadgeContainer,null,i.createElement(ed,{pluginId:e.pluginId,name:n,iconUrl:a,icon:e.icon}),i.createElement(W.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"plugin"},i.createElement(W.dn,{editorType:c,is16x16:!0}))):eo&&G?i.createElement(W.li.IconAndBadgeContainer,null,i.createElement(ed,{pluginId:e.pluginId,name:n,icon:e.icon,iconUrl:a}),i.createElement(W.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"plugin"},i.createElement(W.ZA,null))):i.createElement(ed,{pluginId:e.pluginId,name:n,icon:e.icon,iconUrl:a});let ec=()=>{if((0,R.Cu)({trackingContext:L.name,pluginId:e.pluginId}),H&&!K||X){p();return}if(e.onClick){e.onClick();return}p()};return i.createElement("div",{className:d()(u?Z.$C:Z.MJ,A||e.isFauxFocused?Z.c6:void 0,e.isDevModeWizard?Z.NH:void 0),onClick:ec,role:"button",tabIndex:0,ref:I?w:void 0},i.createElement("button",{onClick:e=>{e.stopPropagation(),ec()},ref:et?void 0:N,"data-testid":"plugin-tile-button"}),i.createElement("div",{className:Z.ot},e.isNotification&&i.createElement("div",{className:Z.Vx}),r),ei)}function ep(e){let r=useDispatch(),n=useLocalWidgets(),i=React.useMemo(()=>e.localFileId?n[e.localFileId]:void 0,[n,e.localFileId]),a=usePublishingPlugins(),o=i?i.plugin_id:e.widgetId,s=useMyPublishedWidgets({includePendingPublishers:!1}),l=React.useMemo(()=>Object.values(s).find(e=>e.id===o),[s,o]),c=React.useMemo(()=>l&&l.current_plugin_version_id?l.versions[l.current_plugin_version_id]:void 0,[l]),d=useDropdownShown(),{viewWidgetDetails:u}=ea(),p=d?.type===DevelopmentPluginTile.DEVELOPMENT_WIDGET_DROPDOWN&&d?.data.isRecentTile===e.isRecentTile&&d?.data.localFileId===e.localFileId&&d?.data.pluginId===o&&d?.data.targetRect,m=React.useCallback(n=>{if(n.stopPropagation(),p)r(fileBrowserActions.hideDropdown());else{let i=n.currentTarget.getBoundingClientRect();r(fileBrowserActions.showDropdown({type:DevelopmentPluginTile.DEVELOPMENT_WIDGET_DROPDOWN,data:{localFileId:e.localFileId,pluginId:o,isRecentTile:e.isRecentTile,targetRect:i}}))}},[r,e.localFileId,o,e.isRecentTile,p]),h=React.useCallback(()=>{i&&createWidget({pluginID:i.plugin_id,widgetName:i.name,pluginVersionID:"",triggeredFrom:"universal-insert"})},[i]);if(!i&&!l)return null;let _=React.createElement(DevelopmentResourceStatus,{localResource:i,publishedResource:l}),g=l&&isInReview(l),f=l&&getPluginVersionOrEmptyVersion(l).redirect_snapshot_url||e.localFileId&&a[e.localFileId]&&a[e.localFileId].metadata.widgetSnapshotImageSrc||widgetDevelopmentSnapshotSvgIcon,E=l&&!g?l.roles.is_public?globeIcon:lock:void 0;return React.createElement(React.Fragment,null,React.createElement(eh,{iconUrl:f,inReview:g,localWidget:i,onClick:()=>h(),onOptionsClick:m,optionsButtonIsActive:p,publishingStatusIcon:E,showEditorTypeIcon:!1,subheader:_,useHorizontalLayout:!0,widget:c,widgetId:o}),p&&(i?React.createElement(DevelopmentResourceOptionsDropdown,{localResource:i,viewResource:u}):React.createElement(DevelopmentResourceOptionsDropdown,{publishedResource:l,viewResource:u})))}function em({useHorizontalLayout:e=!1,onIconClick:r,disabled:n,iconUrl:o="",widget:s,publishedWidget:l,keyboardNavigationButtonRef:c}){let d=i.useMemo(()=>e?[v.op.PRICE]:[v.op.PURCHASED,v.op.OFF_PLATFORM,v.op.FREEMUM,v.op.PRICE],[e]),u=(0,a.d4)(e=>e.authedActiveCommunityProfile);return i.createElement("div",{className:e?Z.Zv:Z.Cq,onClick:r,role:"button",tabIndex:0},n?i.createElement(H.z,{src:o,context:F._Y.DESIGN}):i.createElement(K._,{widget:s,src:o,analytics:{triggeredFrom:"universal-insert"},keyboardNavigationButtonRef:c,context:F._Y.DESIGN}),i.createElement("div",{className:Z.VJ},(0,v.$3)({resource:l,authedActiveCommunityProfile:u,validBadges:d,height:e?"16":"24"})))}let eh=i.memo(function(e){let r=e.localWidget??e.widget??x.lT,{viewWidgetDetails:n,keyboardNavigationPath:a,shouldFocusFirstItem:o}=ea(),{setKeyboardNavigationElement:c,isFauxFocused:u,keyboardNavigationButtonRef:p}=el(`widget_${r.name}`,a,!!o),m=(0,O.ZT)()[e.widgetId],b=(0,P.EO)(m),v=(0,P.gn)(m),I=m?(0,x.uF)(m):null,S=r.name;I?.name&&I?.name!==""&&(S=I?.name);let w=(0,k.sZ)(),A=(0,O.U6)(),N=!e.localWidget&&(0,D.BF)({org:w,extensionVersion:I??e.widget,isWidget:!0,allowlistedExtensions:A}),L=!!(b||N),M=(0,C.j6)(),F=L?void 0:e=>e.stopPropagation(),U=e.metadataOverrideNode??i.createElement(i.Fragment,null,i.createElement("div",{className:Z.QF},i.createElement("div",{className:Z.JW},i.createElement(y.Y,{spacing:4,verticalAlignItems:"center"},i.createElement("div",{className:d()(Z.Y2,{[g.s.colorTextDisabled.$]:e.visuallyDisabled})},S),e.inReview&&i.createElement(T.L,{height:"16"}),!!e.secondaryIcon&&e.secondaryIcon,e.publishingStatusIcon&&i.createElement("div",{className:g.s.colorIcon.$},i.createElement(_.t,{svg:e.publishingStatusIcon})),v&&i.createElement("div",{className:Z.Y9},i.createElement(Y.xY,null)))),i.createElement("div",{className:Z.ML},e.subheader)),e.onOptionsClick&&i.createElement(s.K,{"aria-label":(0,f.t)("universal_insert.more_options"),htmlAttributes:{"data-tooltip-type":B.Ib.TEXT,"data-tooltip":(0,f.t)("universal_insert.more_options")},onClick:e.onOptionsClick},i.createElement(h.U,{className:e.optionsButtonIsActive?Z.F$:Z.D1,svg:Q.A,fallbackSvg:ee.A},i.createElement(l.J,null))),e.primaryCTAButton&&i.createElement("div",{style:E.sx.add({alignSelf:"center"}).$},e.primaryCTAButton));return i.createElement("div",{className:d()(e.useHorizontalLayout?Z.Gy:Z.BG,u?Z.c6:void 0),onClick:r=>{(0,R.Cu)({trackingContext:M.name,widgetId:e.widgetId}),L?n():e.onClick?e.onClick(r):n()},role:"button",tabIndex:0,ref:a?c:void 0,"data-testid":"widget-tile"},i.createElement("div",{className:Z.ot},e.isNotification&&i.createElement("div",{className:Z.Vx}),e.showEditorTypeIcon?i.createElement(W.li.IconAndBadgeContainer,null,i.createElement(em,{useHorizontalLayout:e.useHorizontalLayout,onIconClick:F,disabled:L,iconUrl:e.iconUrl,widget:r,publishedWidget:m,keyboardNavigationButtonRef:p}),i.createElement(W.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"widget"},i.createElement(W.dn,{editorType:e.editorType,is16x16:!0}))):i.createElement(em,{useHorizontalLayout:e.useHorizontalLayout,onIconClick:F,disabled:L,iconUrl:e.iconUrl,widget:r,publishedWidget:m,keyboardNavigationButtonRef:p})),U)});function e_(e){let r=(0,a.wA)(),n=i.useRef(null),o=(0,M.Um)(),s=(0,O.JI)(),l=(0,z.ks)(),c=(0,L.dR)(e.pluginId,"universal-insert"),d=(0,L.Gt)(e.pluginId,"universal-insert"),p=(0,N.t)(e.pluginId,d,c),h=p.length>0,_=eE(e.pluginId,"community"),g=h&&o?.type===e.dropdownShownType&&o?.data.pluginId===e.pluginId,E=_||g,{validatePublishedPluginInOrgAllowlist:y}=(0,O.j1)(e.pluginId),b=(0,L.RK)(e.pluginId),v=i.useCallback(n=>{if(n.stopPropagation(),y()){if(h){E?r(w.oB()):(e.dropdownShownType&&r(w.j7({type:e.dropdownShownType,data:{pluginId:e.pluginId}})),r(ef({pluginId:e.pluginId,tileType:"community"})));return}b?d():c(),r(A.b({seen_published_plugin_onboarding_modal:!0})),r(A.b({seen_development_plugin_onboarding_modal:!0}))}},[y,h,b,r,E,e.dropdownShownType,e.pluginId,d,c]);if(l&&!s)return null;let T=n.current?.getBoundingClientRect(),I=e.usePrimaryButtonStyles?i.createElement(u.$$,{onClick:v,className:Z.lI},(0,f.tx)("universal_insert.run"),h&&i.createElement(m.B,{svg:J.A,className:Z.sI})):i.createElement("button",{className:Z.lO,onClick:v,ref:e.buttonRef},(0,f.tx)("universal_insert.run"),h&&i.createElement(m.B,{svg:J.A,className:Z.zZ}));return i.createElement("div",{className:e.usePrimaryButtonStyles?Z.od:void 0,"data-testid":"run-plugin-button"},i.createElement("div",{ref:n},I),E&&T&&i.createElement($.j,{showPoint:!1,items:p,onSelectItem:e=>{e.callback&&e.callback("",null,r)},parentRect:T,dispatch:r,lean:"left"}))}let eg="DROPDOWN_TYPE_RUN_PLUGIN_SUBMENU";function ef(e){return w.j7({type:eg,data:e})}function eE(e,r){let n=(0,M.Um)();return n?.type===eg&&n.data.pluginId===e&&r===n.data.tileType}function ey(e){let r=(0,P.lt)(e.plugin);return e.plugin.monetized_resource_metadata?i.createElement("div",{className:Z.y2},i.createElement("div",{className:Z.lO},(0,S.bV)(e.plugin.monetized_resource_metadata)),!e.hideFreeTrialBadge&&(0,S.Lt)({resource:e.plugin,payment:r})&&i.createElement(I.w5,{metadata:e.plugin.monetized_resource_metadata,condensed:!0})):null}},983230:(e,r,n)=>{n.d(r,{Kl:()=>p,e3:()=>u}),n(848318);var i=n(988520),a=n(573446),o=n(157907),s=n(39773),l=n(997894),c=n(175334);let d=l.M4.Query({fetch:async()=>(await c.Z.getDefaultLibraries({editorType:"whiteboard_shapes"})).data.meta,enabled:()=>!!(0,o.k)().figjam_diagramming_improvements_v1}),u=(0,s.eU)(e=>{let r=e(d({}));return r.data?new Set(r.data.files.map(e=>e.library_key).filter(i.Vq).map(a.l)):new Set});function p(){return(0,s.md)(u)}(0,s.eU)(e=>{let r=e(d({}));if(!r.data)return{};let n={};for(let e of r.data.files){let r=e.library_key;r&&(n[(0,a.l)(r)]=e.name)}return n})},965171:(e,r,n)=>{n(716544),n(727341),n(986910)},272659:(e,r,n)=>{n.d(r,{fD:()=>a});var i=(e=>(e.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 brainstorm template interacted",e.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team updates template interacted",e.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team chart template interacted",e.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 planning ahead template interacted",e))(i||{}),a=(e=>(e.BRAINSTORM="BRAINSTORM",e.UPDATES="TEAM UPDATES",e.PLAN="PLANNING AHEAD",e.TEAM="TEAM CHART",e.NONE="NONE",e))(a||{})},989442:(e,r,n)=>{n.d(r,{bb:()=>e_});var i=n(848318),a=n(716544),o=n(596616),s=n(960955),l=n(356505),c=n(792978),d=n(157907),u=n(39773),p=n(536384),m=n.n(p),h=n(376399),_=n(730169),g=n(359480),f=n(379338),E=n(905419),y=n(654104),b=n(889132),v=n(701780),T=n(757033),I=n(63571),S=n(145015),w=n(934369),A=n(575492),C=n(166365),N=n(442313),L=n(697714),O=n(164963),R=n(85442),P=n(449737),D=n(405866),M=n(950738),k=n(834996),F=n(849752),x=n(241917),U=n(767011),B=n(464012),V=n(302839),G=n(6760),H=n(229628),K=n(596190),W=n(105972),z=n(734215),$=n(75936),Y=n(805095),j=n(230645),q=n(794786),X=n(237029);let Z=(0,u.eU)(!1),J=e=>e.map(e=>{let r=e.name.match(/((.*)\s+-\s+)?(.*)/);return{optionCategoryName:r&&r[2]||"Other",optionSubareaName:r&&r[3]||e.name,gid:e.gid}}).reduce((e,r)=>{let n=e.get(r.optionCategoryName);return n||(n=[],e.set(r.optionCategoryName,n)),n.push({name:r.optionSubareaName,gid:r.gid}),e},new Map),Q=e=>{let r=e.match(/app\.asana\.com\/\d\/\d+\/(\d+)/);if(!r||r.length<2)throw Error((0,N.t)("bug_reporter.error_invalid_asana_url"));return r[1]};function ee(e){return!et(e)}function et(e){return"error"in e}let er={gid:"",name:"Pick an option"},en=(0,u.eU)(!0),ei=(0,u.eU)(""),ea=(0,u.eU)(""),eo=(0,u.eU)(""),es=(0,u.eU)(er),el=(0,u.eU)(er),ec=(0,u.eU)(!1);function ed(e){let[r,n]=i.useState([]),[o,s]=i.useState(new Map),l=(0,a.wA)();return i.useEffect(()=>{(async()=>{try{let{data:e}=await U.o.getMeta();n(e.meta.severity),s(J(e.meta.product_area))}catch(e){l(L.F.enqueue({message:`Could not fetch field metadata: ${e}`,error:!0}))}})()},[l]),i.createElement(eu,{...e,ReporterSuccessComponent:eh,descriptionLabel:(0,N.t)("bug_reporter.modal.description"),descriptionPlaceholder:(0,N.t)("bug_reporter.modal.description_placeholder"),endpoint:"/api/bug_reports",modalTitle:(0,N.t)("help_widget.menu.report_issue"),onError:e=>{l(L.F.enqueue({message:`${e}. Couldn't submit report. Try again or use /bug in Slack.`,error:!0}))},productAreaGroups:o,recordingKey:"bugReporter",severityOptions:r,shareFileLabel:(0,N.t)("bug_reporter.modal.include_filekey"),showTitle:!0,submitButtonText:(0,N.t)("bug_reporter.modal.submit"),supportsTaskUpdates:!0})}function eu({recordingKey:e,endpoint:r,severityOptions:n,productAreaGroups:o,ReporterSuccessComponent:s,supportsTaskUpdates:l=!1,showTitle:c=!0,descriptionLabel:d,descriptionPlaceholder:p,submitButtonText:m,modalTitle:h,shareFileLabel:y,onSubmit:b,onError:I}){let S=(0,a.d4)(e=>e.multiplayer.allUsers.length),A=(0,a.d4)(e=>e.user?.id),C=(0,k._6)(),R=(0,a.wA)(),{windowInnerHeight:M}=(0,g.l)(),B=(0,H.O)(),[V,K]=(0,u.fp)(ei),z=(0,u.Xr)(ea),$=(0,u.Xr)(eo),Y=(0,u.Xr)(es),j=(0,u.Xr)(el),q=(0,u.Xr)(ec),[X,J]=(0,u.fp)(en),[ed,eu]=i.useState(!1),[em,eh]=i.useState(!1),e_=i.useRef(""),eg=i.useRef(""),ef=i.useRef(""),eE=i.useRef(""),ey=i.useRef(""),eb=i.useRef([]),ev=i.useRef(null),eT=i.useRef(0),eI=(0,u.Xr)(Z),eS=()=>{R(P.Ce())},ew=(0,F.f)("seen_bug_reporter_modal");(0,_.h)(()=>{ew||R(D.b({seen_bug_reporter_modal:!0})),eI(!0)});let eA=()=>U.o.getGetTask({taskGid:e_.current}).then(({data:e})=>e).catch(e=>{let r=`Couldn't fetch task details from Asana. ${e.data.message}`;e instanceof T.Dr&&e.data?.message&&(r=e.data.message),R(L.F.enqueue({message:r,error:!0}))}),eC=async e=>{if(0===e.length)return{attachments:[],errorMessages:[]};let r=e.map(async e=>{try{return{uuid:await eL(e.fileContent,e.type),name:e.name}}catch(r){return{error:`Please add attachment ${e.name} directly in Asana instead. ${r}`}}}),n=await Promise.all(r);return eb.current=n.filter(et).map(({error:e})=>e),{attachments:n.filter(ee),errorMessages:n.filter(et).map(({error:e})=>e)}},eN=async e=>{if(!e)return{attachments:[],errorMessages:[]};try{return{attachments:[{uuid:await eL(JSON.stringify(e),"application/json"),name:"profile.json"}],errorMessages:[]}}catch(e){return{attachments:[],errorMessages:[`Please record a profile directly in dev tools instead. ${e}`]}}},eL=async(e,r)=>{let n=await U.o.getAttachmentUploadUrl({fileType:r});if(200!==n.status)throw Error("Failed to get presigned upload URL from S3");let{upload_url:i,fields:a,uuid:o}=n.data.meta,s=new FormData;for(let e in a)s.append(e,a[e]);if(s.append("content-type",r),s.append("file",e),204!==(await fetch(i,{method:"post",body:s})).status)throw Error("Failed to upload attachment to S3");return o},eO=async(e,n,i,a,o,s,d,u)=>{eh(!0),eE.current=e.substring(0,250),ey.current=n,R(L.F.enqueue({type:"bug-reporter-submitting",message:(0,N.t)("bug_reporter.submitting_visual_bell"),timeoutType:"exact",timeoutOverride:4e3,icon:O.zX.SPINNER})),R(L.F.enqueue({type:"bug-reporter-submitting-long",message:(0,N.t)("bug_reporter.long_submitting_visual_bell"),delay:4e3,icon:O.zX.SPINNER}));let p={env:(0,f.tl)().cluster_name,user_agent:navigator.userAgent,view:C.view,user_id:A,org_id:(0,f.tl)().org_id,tracking_session_id:(0,f.tl)().tracking_session_id,release_commit:(0,f.tl)().release_manifest_git_commit,device_info:(0,E.l)(),num_people_in_file:S,datadog_rum_session_id:window.DD_RUM?.getInternalContext()?.session_id};"fullscreen"===C.view?(p.editor_type=(0,x.Bu)(C.editorType),o&&(p.file_key=C.fileKey,p.url=window.location.href)):p.url=window.location.href;let m={title:c?e:void 0,severity:i.gid,product_area:a.gid,description:n,metadata:p,is_performance_issue:d},h=[eC(s),eN(u)],[_,g]=await Promise.all(h);_.attachments.length>0&&(m.attachments=_.attachments),g.attachments.length>0&&(m.profileUuid=g.attachments[0].uuid),(_.errorMessages.length||g.errorMessages.length)&&(eb.current=[..._.errorMessages,...g.errorMessages]);try{let e;if(!l||X?(e=await T.Ay.post(r,m),eg.current=e.data.meta.task_url,e_.current=e.data.meta.task_gid):e=await T.Ay.put(`${r}/update_task`,{...m,task_gid:Q(V)}),e.status>=200&&e.status<300)R(L.F.dequeue({matchType:"bug-reporter-submitting"})),R(L.F.dequeue({matchType:"bug-reporter-submitting-long"})),eg.current=e.data.meta.task_url,e_.current=e.data.meta.task_gid,X||(ef.current=e.data.meta.slack_url),eT.current=ev.current?.getCurrentContentSize()?.y||0,eu(!0),q(!0),eh(!1);else throw Error(`Request failed with code ${e.status}.`)}catch(r){R(L.F.dequeue({matchType:"bug-reporter-submitting"})),R(L.F.dequeue({matchType:"bug-reporter-submitting-long"}));let e=r.message;r instanceof T.Dr&&r.data?.message&&"string"==typeof r.data.message&&(e=r.data.message),I?.(e),eh(!1)}},eR=async e=>{e_.current=e,J(!1);let r=await eA();r&&(z(c?r.meta.title:""),$(r.meta.description),Y(r.meta.severity??er),j(r.meta.product_area??er))};return i.createElement(G.vx,{ref:ev,title:h,initialPosition:(()=>{let e=B?w.lc:w.Ug,r=w.lc;return ed&&(r=M-(eT.current+G.uF)-w.lc),new v.Mi(e,r)})(),initialConstraints:{x:"right",y:ed?"top":"bottom"},onClose:eS,recordingKey:e,headerClassName:W.yK,dragHeaderOnly:!0},ed?s&&i.createElement(s,{recordingKey:e,isNewReport:!l||X,taskUrl:eg.current,taskGid:e_.current,slackUrl:ef.current,title:c?eE.current:void 0,description:ey.current,submissionErrorMessages:eb.current}):i.createElement(ep,{attachFromTask:l?eR:void 0,clearForm:()=>{J(!0),z(""),$(""),j(er),Y(er),e_.current="",K("")},descriptionLabel:d,descriptionPlaceholder:p,isNewReport:!l||X,isSubmitting:em,onClose:eS,onSubmit:b,productAreaGroups:o,recordingKey:e,selectedView:C,severityOptions:n,shareFileLabel:y,showTitle:c,submitButtonText:m,submitReport:eO,supportsTaskUpdates:l}))}function ep(e){let r=e.recordingKey,n=e.isPerformanceIssue??!1,c=(0,M.Um)(),p=(0,a.wA)(),h=(0,b.Av)(),{windowInnerHeight:f}=(0,g.l)(),[E,v]=(0,u.fp)(ei),[T,O]=(0,u.fp)(ea),[R,P]=(0,u.fp)(eo),[D,k]=(0,u.fp)(es),[F,x]=(0,u.fp)(el),[U,B]=(0,u.fp)(ec),[H,$]=i.useState(!0),[Y,q]=i.useState(!1),[X,Z]=i.useState(!1),[J,ee]=i.useState([]),[et,en]=i.useState(void 0),ed=f-(h+G.uF+w.Ug)-w.lc;(0,_.h)(()=>{!0===U&&(eu(),B(!1))});let eu=()=>{$(!0),ee([]),e.clearForm()},ep=i.useCallback(()=>!e.isSubmitting&&!!R.trim()&&(!e.showTitle||!!T.trim())&&(!e.isNewReport||(!e.severityOptions||!!D.gid)&&(!e.productAreaGroups||!!F.gid)),[R,e.isNewReport,e.isSubmitting,e.severityOptions,e.productAreaGroups,e.showTitle,F.gid,D.gid,T]),eh=r=>{if(r)try{let n=Q(r);e.attachFromTask?.(n)}catch(e){p(L.F.enqueue({message:`${e}`,error:!0}))}},e_=y.AF(y.Pt(r,"link-input"),"change",e=>{let r=e.target.value;v(r),""===r&&eu()}),eg=y.AF(y.Pt(r,"title-input"),"change",e=>{O(e.target.value)}),ef=y.AF(y.Pt(r,"productAreaSearch"),"change",e=>{eL(e.target.value),""===e.target.value&&x(er)}),eE=y.AF(y.Pt(r,"description-input"),"change",e=>{let r=e.target.value;P(r),n&&O(r)}),ey=y.qP(y.Pt(r,"severity-input")??"","change",e=>{k(e)}),eb=y.qP(y.Pt(r,"product-area-input")??"","change",e=>{x(e),eL("")}),ev=i.useCallback(e=>{let r=[],n=[];for(let i of e)if(i.size>0x3200000)n.push(i.name);else{let e=URL.createObjectURL(i);r.push({fileContent:i,url:e,name:i.name,type:i.type})}if(n.length>0){let e=`Error: files could not be attached (over 50MB limit): [${n.join(", ")}].`;console.error(e),p(L.F.enqueue({error:!0,message:e}))}return r},[p]),eT=e=>{if(e.files.length>0){let r=ev([...e.files]);ee(e=>[...e,...r])}q(!1)},eI=y.AF(y.Pt(r,"include-filekey-input"),"change",e=>{$(e.currentTarget.checked)}),eS=i.useCallback(()=>{ep()&&(e.submitReport(T,R,D,F,H,J,n,et),e.onSubmit?.())},[J,ep,R,H,et,e,F,D,T,n]),ew=y.of(r,"submit",e=>{e.preventDefault(),eS()}),eA=(e,r)=>{let n=e.target;"Enter"===e.key&&(e.metaKey||e.ctrlKey?eS():("description"!==r&&e.preventDefault(),"asanaInput"===r&&eh(E),"productAreaSearch"===r&&Z(!0))),"Escape"===e.key&&n&&n.blur()},eC=y.v_(y.Pt(r,"asanaInput"),"keydown",e=>{eA(e,"asanaInput")}),[eN,eL]=i.useState("");return i.createElement(I.Y,{className:m()(Y&&W.oE),isDragTarget:()=>!0,onTargetDragEnter:()=>{q(!0)},onTargetDragLeave:()=>{q(!1)},onTargetDrop:e=>eT(e)},Y&&i.createElement("div",{className:W.$1},i.createElement(C.B,{svg:z.A}),(0,N.tx)("bug_reporter.drop_attachments")),i.createElement(A.P,{maxHeight:ed,hideScrollbar:Y},i.createElement("form",{onSubmit:ew,onPaste:e=>{if(e.clipboardData.files.length>0){let r=ev([...e.clipboardData.files]);ee(e=>[...e,...r])}},className:m()(W.yl,Y&&W.vw)},!e.isPerformanceIssue&&e.supportsTaskUpdates&&i.createElement("div",{className:W.uu},i.createElement(o.J,{className:W.y8},(0,N.tx)("bug_reporter.asana_hint")),i.createElement(S.ks,{className:W._Z,placeholder:(0,N.t)("bug_reporter.modal.asana_link_placeholder"),value:E,onChange:e_,onPaste:e=>{let r=e.clipboardData.getData("text");try{Q(r),eh(r)}catch{}},onKeyDown:eC,maxLength:150})),e.showTitle&&i.createElement("div",null,i.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.title")),i.createElement(S.ks,{className:W._Z,placeholder:(0,N.t)("bug_reporter.modal.title_placeholder"),autoFocus:!0,onKeyDown:e=>eA(e,"title"),value:T,onChange:eg,maxLength:150})),e.severityOptions&&i.createElement("div",null,i.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.severity")),i.createElement(V.l6,{id:"bug_reporter_select_severity",dispatch:p,property:D,onChange:ey,dropdownShown:c,formatter:{format:e=>e.name,isEqual:(e,r)=>e.gid===r.gid}},0===e.severityOptions.length&&i.createElement(V.c$,{key:"loading",disabled:!0},(0,N.tx)("bug_reporter.modal.loading")),e.severityOptions.map(e=>i.createElement(V.c$,{value:e,key:e.gid},e.name)))),e.productAreaGroups&&i.createElement("div",null,i.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.product_area")),i.createElement(S.ks,{className:W._Z,placeholder:(0,N.t)("bug_reporter.modal.search_filter_placeholder"),autoFocus:!0,onKeyDown:e=>eA(e,"productAreaSearch"),value:eN,onChange:ef,maxLength:150}),i.createElement(V.l6,{dispatch:p,dropdownShown:c,id:"bug_reporter_select_product_area",dataTestId:"bug_reporter_select_product_area",formatter:{format:e=>e.name,isEqual:(e,r)=>e.gid===r.gid},property:F,onChange:e=>{eb(e)},triggerDropdown:X,setTriggerDropdown:Z},(r=>{if(!e.productAreaGroups)return[];if(0===e.productAreaGroups.size)return i.createElement(V.c$,{value:null,key:"loading",disabled:!0},(0,N.tx)("bug_reporter.modal.loading"));let n=[];return e.productAreaGroups.forEach((e,a)=>{(r?e.filter(({name:e})=>e.toLowerCase().includes(r.toLowerCase())):e).length>0&&(n.push(i.createElement(V.c$,{value:null,key:a,isHeader:!0,disabled:!0},a)),e.forEach(e=>{(!r||e.name.toLowerCase().includes(r.toLowerCase()))&&n.push(i.createElement(V.c$,{value:e,key:e.gid,dataTestId:e.gid},e.name))}),n.push(i.createElement(V.sK,{key:`${a}.divider`})))}),n.pop(),n})(eN))),i.createElement("div",null,i.createElement(o.J,{className:W.Pf},e.descriptionLabel),i.createElement(S.ks,{className:[W._Z,W.Tg].join(" "),placeholder:e.descriptionPlaceholder,type:"textarea",value:R,onChange:eE,onKeyDown:e=>eA(e,"description"),maxLength:1e3})),i.createElement("div",null,i.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.images_and_videos")),i.createElement(em,{attachmentFiles:J,setAttachmentFiles:ee,validateInputFiles:ev})),(0,d.k)().in_app_performance_profiling&&i.createElement("div",null,i.createElement(i.Fragment,null,i.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.profiler.title")),i.createElement(K.J,{onProfilingFinish:e=>{en(e)}}),et&&(0,N.tx)("bug_reporter.profiler.profile_attached"))),"fullscreen"===e.selectedView.view&&i.createElement(s.S,{checked:H,onChange:(e,{event:r})=>eI(r),label:i.createElement(o.J,null,i.createElement("div",{className:W.HI},e.shareFileLabel,i.createElement("div",{className:W.kB},i.createElement(C.B,{svg:j.A}),i.createElement("div",{className:W.dX},(0,N.tx)("bug_reporter.modal.include_filekey_info")))))}),i.createElement(S.e2,{className:W.GC},i.createElement(l.$n,{variant:"secondary",onClick:e.onClose},(0,N.tx)("bug_reporter.modal.cancel")),i.createElement(l.$n,{variant:"primary",type:"submit",disabled:!ep()},e.submitButtonText)))))}function em(e){let{attachmentFiles:r,setAttachmentFiles:n,validateInputFiles:a}=e,o=i.useRef(null),s=i.useCallback(()=>{o.current&&(o.current.value="")},[]),l=i.useCallback(()=>{let e=o.current?.files||null;if(null===e||0===e.length)return;let r=a([...e]);n(e=>[...e,...r]),s()},[s,a,n]),c=(e,r,i)=>{e.preventDefault(),n(e=>(e.splice(r,1),[...e])),URL.revokeObjectURL(i)};return i.createElement("div",{className:W.VL},r.length>0&&r.map((e,r)=>i.createElement("div",{className:W.Dq,key:r},i.createElement("div",null,e.type.startsWith("image")?i.createElement("img",{className:W.cR,alt:e.name,key:r,src:e.url}):i.createElement("video",{className:W.cR,key:r,src:e.url}),i.createElement("div",{className:W.Lw})),i.createElement("button",{onClick:n=>c(n,r,e.url)},i.createElement(C.B,{className:W.Yz,svg:X.A})))),i.createElement("label",{className:W.UM,htmlFor:"file-upload"},i.createElement(C.B,{svg:Y.A})),i.createElement("input",{id:"file-upload",type:"file",accept:"image/png, image/jpeg, image/gif, video/mp4, video/quicktime",ref:o,onChange:l,multiple:!0,hidden:!0}))}function eh(e){let r=(0,a.wA)(),n=y.rf(y.Pt(e.recordingKey,"asana-link"),"click",()=>{});return i.createElement("div",{className:W.yl},i.createElement("div",{className:W.lM},(0,N.tx)("bug_reporter.success_message")),i.createElement("div",{className:W.U3},i.createElement("div",{className:W.AX},i.createElement(C.B,{svg:q.A}),i.createElement(c.N,{newTab:!0,onClick:n,href:e.taskUrl,trusted:!0},(0,N.tx)("bug_reporter.asana_link"))),i.createElement("div",{className:W.AX},i.createElement(C.B,{svg:$.A}),i.createElement(l.$n,{variant:"link",onClick:()=>{r(R.lW({stringToCopy:e.taskUrl}))}},(0,N.tx)("bug_reporter.copy_link")))),e.isNewReport&&i.createElement("div",null,(0,N.tx)("bug_reporter.urgent_bug_info",{notifyTheRelevantOncall:i.createElement(c.N,{newTab:!0,href:"https://go/find-oncall",trusted:!0},(0,N.tx)("bug_reporter.notify_oncall"))})),e.slackUrl&&i.createElement("div",null,i.createElement(c.N.Button,{href:e.slackUrl,newTab:!0},(0,N.tx)("bug_reporter.open_slack_discussion"))),e.submissionErrorMessages.length>0&&e.submissionErrorMessages.map(e=>i.createElement("p",{key:e},e.toString())))}let e_=(0,B.Ju)(e=>i.createElement(ed,{...e,recordingKey:"bugReporter"}),"BugReporterModal");(0,B.Ju)(e=>i.createElement(eu,{...e,descriptionLabel:(0,N.t)("bug_reporter.modal.description_label_performance"),descriptionPlaceholder:(0,N.t)("bug_reporter.modal.description_placeholder_performance"),endpoint:"/api/perf_reports",modalTitle:(0,N.t)("help_widget.menu.report_performance_issue"),onSubmit:()=>{h.Tf.optUserIntoDebugFlow()},recordingKey:"perfReporter",shareFileLabel:(0,N.t)("bug_reporter.modal.include_filekey_performance"),showTitle:!1,submitButtonText:(0,N.t)("bug_reporter.modal.submit_performance"),supportsTaskUpdates:!1}),"PerfReporterModal")},936830:(e,r,n)=>{n.d(r,{l:()=>u});var i=n(848318),a=n(145015),o=n(442313),s=n(449737),l=n(314272),c=n(893704);function d(e){return i.createElement("div",{style:{height:e.height}})}function u(e){let r=e.onHide||(()=>{e.dispatch(s.Lo())});return i.createElement(l.XV,{...e,isCloseHidden:!0},i.createElement(d,{height:18}),e.children&&i.createElement("div",{className:c.Vw},e.children,i.createElement(d,{height:18})),i.createElement(p,{onConfirm:e.onConfirm,onCancel:r,confirmButtonText:e.buttonText,hideCancelButton:e.hideCancelButton,makeButtonAppearNegative:e.makeButtonAppearNegative},e.checkboxText))}class p extends i.PureComponent{constructor(e){super(e),this.onCheck=()=>{this.setState({checked:!this.state.checked})},this.state={checked:!1}}render(){return i.createElement("div",{className:this.props.className},i.createElement(a.JU,{className:c.Pf},i.createElement(a.tB,{checked:this.state.checked,onChange:this.onCheck,className:c.kv}),this.props.children),i.createElement("div",{className:c.aV},!this.props.hideCancelButton&&i.createElement(a.tM,{onClick:this.props.onCancel},this.props.cancelButtonText||(0,o.t)("modal.cancel")),this.props.makeButtonAppearNegative?i.createElement(a.qM,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,o.t)("modal.confirm")):i.createElement(a.vd,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,o.t)("modal.confirm"))))}}p.displayName="CheckboxConfirmButtons"},353620:(e,r,n)=>{n.d(r,{WB:()=>k});var i=n(848318),a=n(716544),o=n(776402),s=n(777611),l=n(731755),c=n(677772),d=n(311037),u=n(596616),p=n(157907),m=n(39773),h=n(963570),_=n(17755),g=n(963376),f=n(975512),E=n(442313),y=n(542052),b=n(775038),v=n(449737),T=n(155651),I=n(611237),S=n(924569),w=n(458641),A=n(464012),C=n(447890),N=n(314272),L=n(187370);let O=(e,r)=>{switch(e){case w.M.SRGB:return{text:(0,E.t)("fullscreen.color_management.user_color_profile_modal.info.srgb_supported"),type:"info"};case w.M.DISPLAY_P3:switch(r.status){case"SupportedNatively":case"SupportedWithPolyfill":return{text:(0,E.t)("fullscreen.color_management.user_color_profile_modal.info.display_p3_supported"),type:"info"};case"ClientNotSupported":let n=r.diagnostics&&"client"in r.diagnostics&&"desktop-app"===r.diagnostics.client?(0,E.t)("fullscreen.color_management.user_color_profile_modal.client_type.desktop_app"):(0,E.t)("fullscreen.color_management.user_color_profile_modal.client_type.browser");if(r.diagnostics&&"shouldRestartDesktopAppInManagedColorSpace"in r.diagnostics&&r.diagnostics.shouldRestartDesktopAppInManagedColorSpace)return{text:(0,E.t)("fullscreen.color_management.beta.warning.desktop_unmanaged"),type:"warning"};return{text:(0,E.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.client",{client:n}),type:"warning"};case"MonitorNotSupported":if(r.diagnostics&&"alternativeMonitorName"in r.diagnostics&&r.diagnostics.alternativeMonitorName)return{text:(0,E.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.alternative_display",{displayName:r.diagnostics.alternativeMonitorName}),type:"warning"};return{text:(0,E.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.display"),type:"warning"}}}},R="user-color-profile",P={srgbOption:`${R}-srgb-option`,p3Option:`${R}-p3-option`,supportDetailsWarningIcon:`${R}-warning-icon`,supportDetailsInfoIcon:`${R}-info-icon`},D=(0,m.eU)(!1),M=(0,A.Ju)(function(e){let r=(0,a.wA)(),n=(0,S.jK)(),A=function(e){switch(e){case w.M.DEFAULT:case w.M.SRGB:return w.M.SRGB;case w.M.DISPLAY_P3:return w.M.DISPLAY_P3}}(n.colorProfilePreference),R=O(A,(0,I.Av)()),M=function(e){switch(e){case w.M.SRGB:return(0,E.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.description");case w.M.DISPLAY_P3:return(0,E.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.description")}}(A),[k,F]=(0,m.fp)(D);i.useEffect(()=>(k||F(!0),()=>{k&&((0,g.YQ)({id:"user_color_profile_modal_closed"}),F(!1))}),[F,k]);let x=o.hS(e);return i.createElement(T.fu,{name:"color_management_user_color_profile_modal"},(0,p.k)().eu_fpl_migration_modal?i.createElement(s.bL,{manager:x,width:"md"},i.createElement(l.vo,null,i.createElement(l.Y9,null,i.createElement(l.hE,null,(0,E.t)("fullscreen.color_management.user_color_profile_modal.title"))),i.createElement(l.nB,null,i.createElement("form",null,i.createElement(c.b,{legend:i.createElement(d.s,null,(0,E.tx)("fullscreen.color_management.user_color_profile_modal.options.label")),value:A,onChange:e=>{(0,S.it)({colorProfilePreference:e,id:n.id})}},i.createElement("div",{className:_.s.flex.flexRow.gap20.mb12.$},i.createElement(c.c,{value:w.M.SRGB,label:i.createElement(u.J,null,(0,E.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.value")),htmlAttributes:{"data-testid":P.srgbOption}}),i.createElement(c.c,{value:w.M.DISPLAY_P3,label:i.createElement(u.J,null,(0,E.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.value")),htmlAttributes:{"data-testid":P.p3Option}})))),i.createElement(b.E,{color:"secondary"},M),i.createElement("div",{className:L.jH}),i.createElement(b.E,{color:"secondary"},(0,E.tx)("fullscreen.color_management.user_color_profile_modal.descriptions.affected_files")),i.createElement("span",{style:{whiteSpace:"pre"}}," "),i.createElement(f.Ph,{newTab:!0,trusted:!0,href:C.s},(0,E.tx)("rcs.rcs_shared.learn_more")),i.createElement("div",{className:L.jH}),i.createElement("div",{className:L.yF}),i.createElement("div",{className:L.cd},i.createElement(y.In,{icon:"warning"===R.type?"warning-32":"info-32",dataTestId:"warning"===R.type?P.supportDetailsWarningIcon:P.supportDetailsInfoIcon}),i.createElement("span",null,R.text,"warning"===R.type&&i.createElement(i.Fragment,null,i.createElement("span",{style:{whiteSpace:"pre"}}," "),i.createElement(f.Ph,{newTab:!0,trusted:!0,href:C.s},(0,E.tx)("rcs.rcs_shared.learn_more")))))))):i.createElement(N.XV,{title:(0,E.t)("fullscreen.color_management.user_color_profile_modal.title"),minWidth:320,maxWidth:320,onClose:()=>{r((0,v.AS)())}},i.createElement("div",{className:L.yl},i.createElement("label",{className:L.fK},i.createElement(b.E,null,(0,E.tx)("fullscreen.color_management.user_color_profile_modal.options.label"))),i.createElement(h.z,{isHorizontal:!0,className:L.R$,value:A,onChange:e=>{(0,S.it)({colorProfilePreference:e,id:n.id})}},i.createElement(h.Z,{className:L.hO,value:w.M.SRGB,dataTestId:P.srgbOption},(0,E.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.value")),i.createElement(h.Z,{className:L.hO,value:w.M.DISPLAY_P3,dataTestId:P.p3Option},(0,E.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.value"))),i.createElement(b.E,{color:"secondary"},M),i.createElement("div",{className:L.jH}),i.createElement(b.E,{color:"secondary"},(0,E.tx)("fullscreen.color_management.user_color_profile_modal.descriptions.affected_files")),i.createElement("span",{style:{whiteSpace:"pre"}}," "),i.createElement(f.Ph,{newTab:!0,trusted:!0,href:C.s},(0,E.tx)("rcs.rcs_shared.learn_more")),i.createElement("div",{className:L.jH}),i.createElement("div",{className:L.yF}),i.createElement("div",{className:L.cd},i.createElement(y.In,{icon:"warning"===R.type?"warning-32":"info-32",dataTestId:"warning"===R.type?P.supportDetailsWarningIcon:P.supportDetailsInfoIcon}),i.createElement("span",null,R.text,"warning"===R.type&&i.createElement(i.Fragment,null,i.createElement("span",{style:{whiteSpace:"pre"}}," "),i.createElement(f.Ph,{newTab:!0,trusted:!0,href:C.s},(0,E.tx)("rcs.rcs_shared.learn_more"))))))))},"user_color_profile_modal");function k(){return{name:"user-color-profile-menu-option",displayForQuickCommand:"user-color-profile-quick-action",callback:(e,r,n)=>{n((0,v.to)({type:M}))}}}},288472:(e,r,n)=>{n.d(r,{FF:()=>I,G$:()=>N});var i=n(848318),a=n(716544),o=n(145015),s=n(750379),l=n(442313),c=n(125395),d=n(449737),u=n(405866),p=n(901647),m=n(155651),h=n(229424),_=n(464012),g=n(832876),f=n(880245),E=n(117592),y=n(83760),b=n(52565),v=n(884682);let T={INDIGO:b.S0,VIOLET:b.xl,RED:b.qE,GREEN:b.Ts,GOLD:b.fr};var I=(e=>(e[e.COMMENTS=0]="COMMENTS",e[e.OPT_IN=1]="OPT_IN",e))(I||{});let S=(e,r)=>e.indexOf(r)>-1;function w({user:e,variations:r}){return i.createElement(i.Fragment,null,i.createElement(g.Ro,{className:v.my,entity:e,size:100}),S(r,0)&&i.createElement("div",null,i.createElement(y.eR,{backgroundColor:T.RED,position:{top:"12px",left:"12%",transform:"rotate(-12deg)"}}),i.createElement(y.eR,{backgroundColor:T.INDIGO,position:{top:"-40px",left:"9%",transform:"rotate(60deg)"}}),i.createElement(y.eR,{backgroundColor:T.VIOLET,position:{top:"-10px",left:"27%",transform:"rotate(20deg)"}}),i.createElement(y.eR,{backgroundColor:T.GREEN,position:{top:"-30px",left:"70%",transform:"rotate(30deg)"}}),i.createElement(y.eR,{backgroundColor:T.GOLD,position:{top:"8px",left:"88%",transform:"rotate(-20deg)"}})),i.createElement("h1",{className:v.wx},e?.handle),i.createElement("h2",{className:v.m_},(0,l.tx)("community.onboarding.here_s_how_you_ll_look_when_using_the_figma_community")),i.createElement("h3",{className:v.N4},(0,l.tx)("community.onboarding.change_your_photo_or_name_in_your_settings"),S(r,0)&&i.createElement(i.Fragment,null,i.createElement("br",null),(0,l.tx)("community.onboarding.when_leaving_comments_we_ask_that_you"))))}function A(){return i.createElement(i.Fragment,null,i.createElement("h1",{className:v.wx},(0,l.tx)("community.onboarding.follow_our_guidelines")),i.createElement("h2",{className:v.m_},(0,l.tx)("community.onboarding.when_leaving_comments_we_ask_that_you")))}function C(){return i.createElement("div",{className:v.Il},i.createElement("li",null,i.createElement("div",{className:v.Qk},(0,l.tx)("community.onboarding.stay_on_topic")),i.createElement(y.iF,null)),i.createElement("li",null,i.createElement("div",{className:v.Qk},(0,l.tx)("community.onboarding.be_respectful")),i.createElement(y.B1,null)),i.createElement("li",null,i.createElement("div",{className:v.Qk},(0,l.tx)("community.onboarding.read_our_guidelines",{guidelinesLink:i.createElement("a",{href:"https://help.figma.com/hc/articles/360038510573-Figma-Community-Guidelines",target:"_blank"},(0,l.tx)("community.onboarding.guidelines"))})),i.createElement(y.$E,null)))}let N="COMMUNITY_OPT_IN";(0,_.Ju)(function({userId:e,onFinish:r,variations:n}){let _=(0,a.d4)(e=>e.user);e=e||_?.id;let g=(0,a.wA)(),y=()=>{g(d.Ce())},b=()=>{g(u.b({[f.Pn]:!0}))},T=S(n,0)&&1===n.length,I=S(n,0)?1===n.length?v.aq:v.Qc:v.FT;return i.createElement(E.aF,{className:I},i.createElement(m.fu,{name:h.e0.PROFILE_CREATE_MODAL,properties:{action:p.s0.COMMUNITY_OPT_IN,communityHubEntity:p.ZO.USERS,communityHubEntityId:e}},S(n,1)&&_?i.createElement(w,{user:_,variations:n}):i.createElement(A,null),S(n,0)&&i.createElement(C,null),i.createElement(s.Go,{type:"submit",className:v.C5,onClick:()=>{y();let i=S(n,1);i&&(g((0,c.h1)({onSuccess:r})),b()),S(n,0)&&e&&(b(),i||r?.())}},S(n,0)?(0,l.tx)("community.onboarding.got_it"):(0,l.tx)("community.onboarding.looks_good")),!T&&i.createElement(o.tM,{className:v.IK,onClick:y},(0,l.tx)("general.cancel"))))},N)},23130:(e,r,n)=>{n.d(r,{E0:()=>f,G5:()=>p,I_:()=>d,Ij:()=>E,OP:()=>_,as:()=>g,eN:()=>u,em:()=>m,lq:()=>h,uF:()=>l});var i=n(818754),a=n(701780),o=n(27776),s=n(178043);let l=(0,i.hG)(o.Flg)+1,c=(0,i.hG)(o.tui),d=16,u=c,p=0,m=0,h=0;var _=(e=>(e.TOP="top",e.BOTTOM="bottom",e.LEFT="left",e.RIGHT="right",e))(_||{});function g(e){let r=e.includes("top"),n=e.includes("bottom"),i=e.includes("left"),a=e.includes("right");return r&&i||n&&a?s.YL:r&&a||n&&i?s.wX:r||n?s.cb:i||a?s.NZ:null}function f(e,r){let{left:n,top:i,right:o,bottom:s,lockAspectRatio:c}=r,d=r.maxWidth||1/0,u=r.maxHeight||1/0,p=r.minWidth||0,m=r.minHeight||0,h=o-n,_=s-i,g=h<=0||_<=0;if(c&&g)return null;if(c){let e=_-l,r=Math.min(d/h,(u-l)/e);r<1&&(h*=r,e*=r);let n=Math.max(p/h,m/e);n>1&&(h*=n,e*=n),_=e+l}else h=Math.max(h=Math.min(h,d),p),_=Math.max(_=Math.min(_,u),m);let f=n;e.left&&(f=o-h);let E=i;return e.top&&(E=s-_),{position:new a.Mi(f,E),width:h,height:_}}function E(e,r,n){let s=n?0:(0,i.hG)(o.LdP),c=new a.Mi(e.pageX,e.pageY).subtract(r.mousePosition);return r.elementPosition.add(c).clampY({y:s,height:window.innerHeight-l-s})}},216511:(e,r,n)=>{n.d(r,{K:()=>u});var i=n(848318),a=n(818754),o=n(654104),s=n(23130),l=n(27776),c=n(178043);let d=(0,a.jz)(l.LdP);function u({allowedResizeDirections:e,onEdgeDoubleClick:r,resizeTo:n,onResizeEnd:a,getCurrentContainerBounds:l,lockAspectRatio:c,isResizing:u,setIsResizing:h,setResizeDirections:_,hidden:g,recordingKey:f,mirrorResizeHorizontally:E=!1}){let{startResizing:y}=function({resizeTo:e,getCurrentContainerBounds:r,isResizing:n,setIsResizing:a,setResizeDirections:l,onResizeEnd:c,lockAspectRatio:u,recordingKey:p,hidden:h,mirrorResizeHorizontally:_=!1}){let g=i.useRef(),f=i.useRef(),E=i.useRef([]),y=i.useRef({x:0,y:0}),[b,v]=i.useState(!1),T=i.useCallback(()=>{v(!1),a(void 0),l([]),E.current=[],c?.()},[v,a,c,l]),I=i.useCallback(({x:r,y:i},a,o)=>{if(!n||!f.current||!e){v(!1);return}if(n&&0===o){T();return}let l=u||a,c={x:r-y.current.x,y:i-y.current.y};c.y=Math.max(c.y,d);let{left:p,top:h,right:g,bottom:E}=m(c,f.current,n,l,_);e({[s.OP.TOP]:h!==f.current.top,[s.OP.BOTTOM]:E!==f.current.bottom,[s.OP.LEFT]:p!==f.current.left,[s.OP.RIGHT]:g!==f.current.right},{left:p,top:h,right:g,bottom:E,lockAspectRatio:l})},[n,u,_,e,T]),S=i.useRef(T);S.current=T,(0,i.useEffect)(()=>()=>{n&&S.current()},[n]);let w=o.rf(p,"mouseup",T),A=o.rf(p,"mousemove",i.useCallback(e=>{if(h)return o.aH;e.stopPropagation(),e.preventDefault();let r={x:e.clientX,y:e.clientY};if(g.current=r,n)I(r,e.shiftKey,e.buttons);else{let e=Object.create(null);E.current.forEach(r=>{e[r]=!0}),l(E.current),a(e)}},[h,n,I,a,l]),{recordMetadata:e=>({clientX:e.clientX,clientY:e.clientY}),playbackMetadata:e=>({clientX:e.clientX,clientY:e.clientY})}),C=o.v_(p,"keydown",i.useCallback(e=>{e.shiftKey&&g.current&&I(g.current,!0)},[I])),N=o.v_(p,"keyup",i.useCallback(e=>{g.current&&I(g.current,e.shiftKey)},[I]));return(0,i.useEffect)(()=>{if(b)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",w),document.addEventListener("keydown",C),document.addEventListener("keyup",N),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",w),document.removeEventListener("keydown",C),document.removeEventListener("keyup",N)}},[b,A,w,C,N]),{startResizing:i.useCallback((e,n)=>{E.current=e;let i=r();f.current=i;let a={x:e.includes(s.OP.LEFT)?i.left:e.includes(s.OP.RIGHT)?i.right:n.x,y:e.includes(s.OP.TOP)?i.top:e.includes(s.OP.BOTTOM)?i.bottom:n.y};y.current={x:n.x-a.x,y:n.y-a.y},v(!0)},[r,v]),stopResizing:T}}({resizeTo:n,getCurrentContainerBounds:l,onResizeEnd:a,isResizing:u,setIsResizing:h,setResizeDirections:_,lockAspectRatio:c,hidden:g,recordingKey:f,mirrorResizeHorizontally:E});return g?null:i.createElement("div",null,Object.values(s.OP).map((n,a)=>e.includes(n)?i.createElement(p,{key:a,directions:[n],startResizing:y,onDoubleClick:r,recordingKey:o.Pt(f,n)}):null),[s.OP.TOP,s.OP.BOTTOM].map(n=>[s.OP.LEFT,s.OP.RIGHT].map((a,s)=>e.includes(n)&&e.includes(a)?i.createElement(p,{key:s,directions:[n,a],startResizing:y,onDoubleClick:r,recordingKey:o.Pt(f,n,a)}):null)))}class p extends o.o6{constructor(){super(...arguments),this.onMouseDown=e=>o.cZ(this,"mousedown",r=>{r.stopPropagation(),r.preventDefault(),this.props.startResizing(e,{x:r.clientX,y:r.clientY})}),this.onDoubleClick=o.cZ(this,"dblclick",()=>{if(!this.props.onDoubleClick)return o.aH;this.props.onDoubleClick?.()}),this.directionsToStyle=e=>{if(1===e.length)switch(e[0]){case s.OP.TOP:return c.In;case s.OP.BOTTOM:return c.Mo;case s.OP.LEFT:return c.Wg;case s.OP.RIGHT:return c.N2}else if(2===e.length){if(e[0]===s.OP.TOP&&e[1]===s.OP.RIGHT)return c.Mq;if(e[0]===s.OP.TOP&&e[1]===s.OP.LEFT)return c.pg;if(e[0]===s.OP.BOTTOM&&e[1]===s.OP.RIGHT)return c.my;if(e[0]===s.OP.BOTTOM&&e[1]===s.OP.LEFT)return c.Do}}}render(){return i.createElement("div",{className:this.directionsToStyle(this.props.directions),onMouseDown:this.onMouseDown(this.props.directions),onDoubleClick:this.onDoubleClick})}}let m=(e,r,n,i,a)=>{let{x:o,y:l}=e,c=n[s.OP.LEFT]?o:r.left,d=n[s.OP.RIGHT]?o:r.right,u=n[s.OP.TOP]?l:r.top,p=n[s.OP.BOTTOM]?l:r.bottom;if(a){let e=(r.left+r.right)/2;n[s.OP.LEFT]?d=e+(e-o):n[s.OP.RIGHT]&&(c=e-(o-e))}if(i){let e=(r.right-r.left)/(r.bottom-r.top-s.uF),i=n[s.OP.LEFT]?r.left-o:o-r.right,a=n[s.OP.TOP]?r.top-l:l-r.bottom,m=n[s.OP.LEFT]||n[s.OP.RIGHT],h=n[s.OP.TOP]||n[s.OP.BOTTOM];if(m&&h){let o,l;let m=i/e;m<a?(o=i,l=m,n[s.OP.TOP]?u=r.top-l:p=r.bottom+l):(o=a*e,l=a,n[s.OP.LEFT]?c=r.left-o:d=r.right+o)}else if(m){let i=n[s.OP.LEFT]?r.left-o:o-r.right;p=r.bottom+i/e}else if(h){let i=n[s.OP.TOP]?r.top-l:l-r.bottom;d=r.right+i*e}}return{left:c,top:u,right:d,bottom:p}}},994742:(e,r,n)=>{var i=n(848318),a=n(716544),o=n(776402),s=n(777611),l=n(731755),c=n(536384),d=n.n(c),u=n(579020),p=n(994811),m=n(925025),h=n(831932),_=n(145015),g=n(750379),f=n(771186),E=n(17755),y=n(280198),b=n(882439),v=n(442313),T=n(273835),I=n(449737),S=n(155651),w=n(369600),A=n(464012),C=n(13160),N=n(554831),L=n(989426);(0,A.Ju)(function(e){let r=(0,a.wA)(),[n,c]=i.useState(""),[A,O]=i.useState(!1),R=(0,w.tS)(),P=(0,a.d4)(e=>R?e.loadingState[T.f.loadingKeyForPayload({fileKey:R,emailAddress:n})]===m.r.LOADING:null),D=o.hS({...e,onClose:()=>{(0,u.sx)("google_meet_claim_email_modal_closed",{fileKey:R}),r(I.AS())}});return i.createElement(S.fu,{name:"google_device_try_file_claim_modal"},i.createElement(s.bL,{manager:D,width:420},i.createElement(l.vo,null,i.createElement(l.nB,{padding:32},i.createElement("div",{className:L.FS},i.createElement("h1",{className:L.DX},(0,v.tx)("google_device_try_file_modal.enter_email"))),i.createElement(g.k0,{multiple:1}),i.createElement("div",{className:L.FS},i.createElement("div",{className:L.Kc},(0,v.tx)("google_device_try_file_modal.enter_email.description"))),i.createElement(g.k0,{multiple:3}),i.createElement(_.il,{autoFocus:!0,type:"email",className:d()(L._2,A&&L.cC),placeholder:(0,v.t)("google_device_try_file_modal.enter_email.placeholder_email"),onChange:e=>{c(e.target.value)},value:n}),A&&i.createElement("div",{className:L.mV},(0,v.tx)("google_device_try_file_modal.enter_email.error_message")),i.createElement(g.k0,{multiple:2}),i.createElement(b.lR,{type:"submit",onClick:i=>{if(i.preventDefault(),i.stopPropagation(),null==n||!1===(0,p.xf)(n)||!R){O(!0);return}if(!R){r(y.s.error((0,v.t)("google_device_try_file_modal.error_saving_board")));return}e.onSubmitEmail({fileKey:R,emailAddress:n})}},i.createElement(f.x,{isLoading:!!P,className:E.s.flex.justifyCenter.$},()=>(0,v.tx)("google_device_try_file_modal.enter_email.button"))),i.createElement(g.k0,{multiple:3}),i.createElement("div",{className:L.NJ},(0,v.tx)("google_device_try_file_modal.disclaimer",{tos:i.createElement(N.V,{url:h.Ay.isMeetDevice?C.A:C.Uw,title:(0,v.t)("google_device_try_file_modal.onboarding_disclaimer_tos")}),privacy_policy:i.createElement(N.V,{url:h.Ay.isMeetDevice?C.bO:C.JD,title:(0,v.t)("google_device_try_file_modal.onboarding_disclaimer_privacy_policy")})})),i.createElement(g.k0,{multiple:1})))))},"GOOGLE_DEVICE_TRY_FILE_CLAIM_MODAL")},216209:(e,r,n)=>{var i=n(848318),a=n(716544),o=n(776402),s=n(777611),l=n(731755),c=n(379338),d=n(750379),u=n(280198),p=n(882439),m=n(442313),h=n(449737),_=n(155651),g=n(369600),f=n(464012),E=n(989426);(0,f.Ju)(function(e){let{email:r,onChangeEmail:n}=e,f=(0,a.wA)(),y=(0,g.tS)(),b=o.hS({...e,preventUserClose:!0});return i.createElement(_.fu,{name:"google_device_try_file_received_email_modal"},i.createElement(s.bL,{manager:b,width:420},i.createElement(l.vo,null,i.createElement(l.nB,{padding:32},i.createElement("img",{src:(0,c.ck)("b0feff5e4abc5e66f99064463f2ad5d0a7f6c072.png"),alt:"",className:E.ZQ}),i.createElement(d.k0,{multiple:2}),i.createElement("div",{className:E.FS},i.createElement("h1",{className:E.DX},(0,m.tx)("google_device_try_file_modal.got_mail"))),i.createElement(d.k0,{multiple:1}),i.createElement("div",{className:E.FS},i.createElement("div",{className:E.Kc},(0,m.tx)("google_device_try_file_modal.got_mail.description",{email:i.createElement("p",{className:E.Fx},r)}))),i.createElement(d.k0,{multiple:3}),i.createElement(p.lR,{onClick:e=>{e.preventDefault(),e.stopPropagation(),f(h.Ce())}},(0,m.tx)("google_device_try_file_modal.got_mail.close")),i.createElement(d.k0,{multiple:3}),i.createElement("div",{className:E.NJ},(0,m.tx)("google_device_try_file_modal.got_mail.email_not_received",{send_again_link:i.createElement(p.$z,{variant:"link",onClick:n=>{if(n.preventDefault(),n.stopPropagation(),!y){f(u.s.error((0,m.t)("google_device_try_file_modal.error_saving_board")));return}e.onResendEmail({fileKey:y,emailAddress:r,isResentEmail:!0})}},(0,m.tx)("google_device_try_file_modal.got_mail.email_not_received.send_again"))})),i.createElement(d.k0,{multiple:2}),i.createElement("div",{className:E.NJ},(0,m.tx)("google_device_try_file_modal.got_mail.wrong_address",{use_different_email_link:i.createElement(p.$z,{variant:"link",onClick:e=>{e.preventDefault(),e.stopPropagation(),n()}},(0,m.tx)("google_device_try_file_modal.got_mail.wrong_address.use_different_email"))}))))))},"GOOGLE_DEVICE_TRY_FILE_RECEIVED_EMAIL_MODAL")},117592:(e,r,n)=>{n.d(r,{Nb:()=>S,Rw:()=>C,aF:()=>w});var i=n(848318),a=n(716544),o=n(536384),s=n.n(o),l=n(579020),c=n(857188),d=n(493840),u=n(329661),p=n(654104),m=n(991371),h=n(145015),_=n(473889),g=n(197933),f=n(442313),E=n(542052),y=n(449737),b=n(604613),v=n(155651),T=n(289198),I=(e=>(e.CLICK_OUTSIDE="click_outside",e.PRESS_ESCAPE="press_escape",e))(I||{});function S(e){let r,n;let{useModalViewScroll:a=!0,tintedModalBackground:o=!0,hide:l,disableClickOutsideToHide:p,size:m,alignment:h,absolutePosition:_,padding:g,height:f,maxHeight:E,width:y,title:v,titleClassName:I,className:S,fixedTop:w,backgroundClassName:A,onKeyDown:C,disableKeyboardEventPropagation:N,modalRef:L,onModalClick:O,enableEscapeToClose:R,children:P,animateIn:D,disableFocusTrap:M,noPadding:k,disableFocusOnMount:F}=e;(0,d.h)();let x=i.useCallback(()=>{p||l("click_outside")},[p,l]),U=i.useCallback(e=>{e.stopPropagation()},[]),B=i.useCallback(e=>{O&&O(e)},[O]),V=i.useCallback(e=>{if(e.keyCode===c.Uz.ESCAPE&&(!p||R)){l("press_escape"),e.preventDefault(),e.stopPropagation();return}C&&C(e),N&&(e.nativeEvent.stopImmediatePropagation(),e.stopPropagation())},[p,l,C,N,R]),G=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(F||G.current.matches(":focus-within")||G.current.focus(),M)return;let e=(0,u.M)(e=>{e.target.closest('[aria-modal="true"]')||G.current?.focus()});return document.body.addEventListener("focus",e,!0),()=>document.body.removeEventListener("focus",e,!0)},[F,M]),"number"==typeof m&&(r=m,n=m);let H=s()({[T.JY]:"small"===m,[T.ew]:"fitContent"===m,[T.Gx]:"mobile"===m,[T.R7]:!m||"medium"===m||"number"==typeof m}),K=s()(T.K1,A,b.Dm,{[T.Y0]:o,[T.CY]:w,[T.Xt]:"left"===h,[T.Ir]:"right"===h,[T.L4]:"leftNoPadding"===h}),W=s()(H,S,{[T.yl]:a,[T.Er]:!a,[T.KJ]:!!_,[T.HY]:D,[T.pN]:k}),z={minWidth:r,maxWidth:n,height:f,maxHeight:E,width:y,padding:g,..._?{top:_.top,left:_.left}:{}};return i.createElement("div",{tabIndex:0,className:K,onMouseDown:x,onKeyDown:V,ref:G,"data-testid":"modal-background"},i.createElement("div",{className:W,style:z,onMouseDown:U,onClick:B,ref:L,role:"dialog","aria-modal":"true","data-testid":e["data-testid"]},v&&i.createElement("div",{className:`${T.DD} ${I||""}`},v),P))}function w(e){let r=(0,a.wA)(),{onHide:n,popStack:o}=e,{name:s,properties:c}=(0,v.j6)(),d=c?.fileKey,u=c?.productType,p=i.useCallback(e=>{o?r(y.Lo()):r(y.Ce()),n&&n(),(0,l.sx)("Modal Close",{source:e,trackingContext:s,fileKey:d,productType:u})},[r,d,s,n,o,u]);return i.createElement(S,{...e,hide:p})}let A={playback:()=>({preventDefault:()=>{}})};function C(e){let r=e.recordingKey??"",n=e.destructive??!1,o=e.autoFocusCta??!0,s=(0,a.wA)(),{dontClose:l,popStack:c}=e,d=i.useCallback(()=>{l||(c?s(y.Lo()):s(y.Ce()))},[s,l,c]),{onCloseButtonClick:u}=e,b=i.useCallback(()=>{d(),u?.()},[d,u]),v=(0,p.rf)(r,"click",b),{hideOnConfirm:I,onConfirm:S}=e,C=i.useCallback(e=>{e.preventDefault(),(I??!0)&&d(),S()},[d,I,S]),N=(0,p.qP)(r,"confirm",C,A),{hideOnCancel:L,onCancel:O}=e,R=i.useCallback(e=>{e.preventDefault(),(L??!0)&&d(),O?.()},[d,L,O]),P=(0,p.qP)(r??"","cancel",R,A),D=n?h.qM:h.vd,M=!(e.dontClose||e.hideClose);return i.createElement(w,{size:e.size||"small",...e,className:e.className||T.yl,onHide:e.overrideOnHide??e.onCancel},M&&i.createElement(m.i0,{...e,className:e.closeClass,onClick:v}),i.createElement(g.i,{displayAs:g.C.Block},!e.hideConfirmationTitle&&i.createElement("div",{className:e.titleClass??T.DD},i.createElement("h2",null," ",e.confirmationTitle??(0,f.tx)("modal.are_you_sure"))),e.children?e.children:i.createElement("div",{className:T.jE},e.content),i.createElement("div",{className:T.v0},i.createElement("div",{className:e.helperTextClass??T._f},e.helperText),!e.hideCancel&&i.createElement(h.tM,{onClick:P,autoFocus:!!o&&n},e.cancelText??(0,f.tx)("modal.cancel")),e.isLoading?i.createElement(D,{dataTestId:"confirmation-modal-confirm-action-button",tabIndex:0,type:"submit",className:T.LO,disabled:!0,trackingProperties:e.trackedConfirmationProperties||{}},i.createElement(_.kt,{size:"small",className:e.loadingText?T.FQ:T.u1}),e.loadingText):i.createElement("form",{onSubmit:N},i.createElement(D,{dataTestId:"confirmation-modal-confirm-action-button",tabIndex:0,type:"submit",className:T.pL,disabled:e.disableConfirm,autoFocus:!!o&&!n,trackingProperties:e.trackedConfirmationProperties||{}},e.confirmText))),e.bottomWarningText&&i.createElement("div",{className:T.$$},i.createElement(E.In,{icon:"warning-32"}),e.bottomWarningText)))}},534425:(e,r,n)=>{n.d(r,{J:()=>b,M:()=>y});var i=n(848318),a=n(322035),o=n(44509),s=n(379338),l=n(145015),c=n(426189),d=n(17755),u=n(442313),p=n(87089),m=n(464012),h=n(311131),_=n(122524),g=n(965092);let f=d.s.colorIcon.h32.w28.pb32.$,E=d.s.w300.maxWFull.font13.h40.cursorPointer.$,y="LINK_EXPIRED_MODAL",b=(0,m.Ju)(function(){let{frame_context:e}=(0,s.Ay)(),r=(0,a.GZ)()&&e?.type==="embed",n=(0,p.sZ)();return(0,h.K)()&&n?i.createElement(_.H,{org:n}):i.createElement(c.u,{imageSrc:g.A,imageClassName:f,headerText:(0,u.t)("link_expired.header"),secondaryText:(0,u.t)("link_expired.description")},!r&&i.createElement(l.vd,{className:E,type:"submit",onClick:()=>{o.Ay.redirect("/")}},(0,u.tx)("link_expired.go_back_to_figma")))},y)},113176:(e,r,n)=>{n.d(r,{Lu:()=>N});var i=n(848318),a=n(716544),o=n(776402),s=n(792978),l=n(777611),c=n(731755),d=n(356505),u=n(741419),p=n(579020),m=n(44509),h=n(379338),_=n(831932),g=n(654104),f=n(442313),E=n(790355),y=n(235441),b=n(369600),v=n(241917),T=n(464012),I=n(194494),S=n(349918),w=n(639088);function A(e,r={}){(0,p.sx)("memory_warning_event",{currentAllocatedBytes:u.hMR?.getTotalUsedHeapMemory(),maxAllocatedBytes:u.hMR?.getMaxUsedHeapMemory(),...e,...r})}var C=(e=>(e.SHOW_RELOAD="showReload",e.SHOW_RECOVERY_MODE="showRecoveryMode",e.SHOW_BROWSER_UPGRADE_AND_DESKTOP_DOWNLOAD="showBrowserUpgradeAndDesktop",e))(C||{});let N="memory-warning-modal";function L(e){let r=o.hS({open:!0,preventUserClose:!0,onClose:()=>{}}),n=(0,a.d4)(e=>e.mirror.appModel.isReadOnly),p=(0,a.d4)(e=>e.selectedView),T=(0,y.XE)(p)===v.nT.Design,C=(0,b.tS)()||h.Ay().editing_file?.source_file?.key||"",N=(0,a.wA)(),L={view:"fullscreen",editorType:T?v.nT.Design:v.nT.Whiteboard,fileKey:C,isRecoveryMode:!0},O=u.hMR.getHeapMemoryMode()===u.rCR.RECOVERY,R=n||O?"showReload":_.Ay.isWasm4gbSupported?"showRecoveryMode":"showBrowserUpgradeAndDesktop",P=i.createElement(s.N,{href:_.Ay.mac?"/download/desktop/mac":"/download/desktop/win",newTab:!0},(0,f.tx)("memory_warning_modal.desktop_app_download_link")),D="showReload"===R?{title:(0,f.t)("memory_warning_modal.reload_modal_title"),content:(0,f.t)("memory_warning_modal.reload_modal_content"),contentCTA:(0,f.t)("memory_warning_modal.reload_modal_content_cta"),buttonCTA:(0,f.t)("memory_warning_modal.reload_page_button"),secondaryButtonCTA:(0,f.t)("memory_warning_modal.learn_more"),buttonExternalLink:null,secondaryButtonExternalLink:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files/"}:"showRecoveryMode"===R?{title:(0,f.t)("memory_warning_modal.recovery_mode_modal_title"),content:(0,f.t)("memory_warning_modal.recovery_mode_modal_out_of_memory"),contentCTA:(0,f.t)("memory_warning_modal.recovery_mode_modal_content"),buttonCTA:(0,f.t)("memory_warning_modal.recovery_mode_button"),secondaryButtonCTA:(0,f.t)("memory_warning_modal.learn_more"),buttonExternalLink:null,secondaryButtonExternalLink:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files/"}:{title:(0,f.t)("memory_warning_modal.old_browser_out_of_memory_modal_title"),content:(0,f.t)("memory_warning_modal.old_browser_out_of_memory_modal_content"),contentCTA:null,buttonCTA:(0,f.t)("memory_warning_modal.old_browser_primary_button_cta"),secondaryButtonCTA:null,buttonExternalLink:_.Ay.browserType&&({chrome:"https://support.google.com/chrome/answer/95414",safari:"https://support.apple.com/en-us/HT204416",firefox:"https://support.mozilla.org/en-US/kb/update-firefox-latest-release",msedge:"https://support.microsoft.com/en-us/topic/update-to-the-new-microsoft-edge-182d0668-e3f0-49da-b8bb-db5675245dc2"})[_.Ay.browserType]||null,secondaryButtonExternalLink:null};return e.isBranching?i.createElement(I.E,null):i.createElement(l.bL,{manager:r,width:"lg"},i.createElement(c.vo,null,i.createElement(c.Y9,null,i.createElement(c.hE,null,D.title)),i.createElement(c.nB,null,i.createElement("div",{className:S.j},i.createElement("div",null,D.content,i.createElement("br",null),"\xa0",i.createElement("br",null)),"showBrowserUpgradeAndDesktop"===R?(0,f.tx)("memory_warning_modal.old_browser_out_of_memory_modal_content_cta_and_download_desktop",{desktopAppLink:P}):D.contentCTA,i.createElement("br",null)),i.createElement("div",{className:w.v0},D.secondaryButtonCTA&&D.secondaryButtonExternalLink&&i.createElement(s.N.Button,{onClick:()=>{D.secondaryButtonCTA===(0,f.t)("memory_warning_modal.learn_more")&&A({warningEvent:"LEARN_MORE",fileKey:C},{isReadOnly:n})},recordingKey:g.Pt(e,"crash"),href:D.secondaryButtonExternalLink,newTab:!0,variant:"secondary"},D.secondaryButtonCTA),i.createElement("div",{className:w.pL},D.buttonExternalLink?i.createElement(s.N.Button,{variant:"primary",href:D.buttonExternalLink,newTab:!0,recordingKey:g.Pt(e,"crash")},D.buttonCTA):i.createElement(d.$n,{variant:"primary",recordingKey:g.Pt(e,"crash"),onClick:()=>{D.buttonCTA===(0,f.t)("memory_warning_modal.recovery_mode_button")&&A({warningEvent:"OPEN_RECOVERY_MODE",fileKey:C},{isReadOnly:n}),("showRecoveryMode"===R||n)&&N(E.$T(L)),("showReload"===R||"showRecoveryMode"===R)&&m.Ay.reload("Memory warning panel")}},D.buttonCTA))))))}(0,T.qK)(N,e=>{let{isBranching:r}=e.modalShown.data;return i.createElement(L,{isBranching:r})})},495052:(e,r,n)=>{n.d(r,{Ay:()=>C,CR:()=>D,NJ:()=>R,OA:()=>P,gm:()=>O,uv:()=>A});var i=n(848318),a=n(356505),o=n(897392);n(39773);var s=n(536384),l=n.n(s),c=n(818754),d=n(141920),u=n(303035),p=n(975512),m=n(442313),h=n(180423),_=n(155651),g=n(22647),f=n(744149),E=n(662275),y=n(45584),b=n(268274),v=n(6760),T=n(817920),I=n(341339),S=n(27776),w=n(809086);let A=(0,c.hG)(S.W8e);function C(e){let r=(0,g.Yk)(),n=(0,y._X)({subscribeToUpdates_expensive:!0}),a=i.useRef({x:0,y:0,width:0,height:0,angle:0,absoluteBounds:{x:0,y:0,width:0,height:0},page:o.AD}),[s,l]=i.useState({left:0,top:0,pointerOffset:0,pointerPosition:0}),c=i.useMemo(()=>(0,T.P7)(e.pointerType||T.gm.arrow),[e.pointerType]),d=e.topPadding||-c.pointerTargetOverlap,u=i.useCallback(()=>{if(!a.current){l(null);return}let i=(0,y.Yb)(n,a.current.absoluteBounds),o={x:i.x+n.x,y:i.y+n.y,height:i.height,width:i.width};l((0,T.my)({width:e.width,height:e.height,targetRect:o,positioningConstants:c,alignPointerToLeft:e.alignPointerToLeft,shouldCenterArrow:e.shouldCenterArrow,topPadding:d,arrowPosition:e.arrowPosition,targetType:"canvas",viewportTopOffset:n.y,viewportBottomOffset:r}))},[e.height,e.width,c,e.alignPointerToLeft,e.shouldCenterArrow,d,r,e.arrowPosition,n]);return i.useEffect(()=>{let r=(0,E.EE)(`useCanvasNodeRepositioning-${e.targetKey}`,[e.targetKey],e=>{a.current=e.position,u()});return a.current=r.currentNodePosition[e.targetKey]?.position||null,u(),()=>{(0,E.lB)(`useCanvasNodeRepositioning-${e.targetKey}`)}},[e.targetKey,u]),(0,I.pc)({location:s,onTargetLost:e.onTargetLost,targetKey:e.targetKey,targetType:"canvas"}),s}function N(e,r){switch(e){case v.F_.TOP:case v.F_.BOTTOM:return{left:r};case v.F_.LEFT_TITLE:case v.F_.RIGHT_BODY:return{top:r};case v.F_.RIGHT_TITLE:return{}}}let L={[v.F_.TOP]:{foregroundStyle:w.FQ,backgroundStyle:w.oX},[v.F_.BOTTOM]:{foregroundStyle:w.nW,backgroundStyle:w.a5},[v.F_.LEFT_TITLE]:{foregroundStyle:w.Hn,backgroundStyle:w.gF},[v.F_.RIGHT_TITLE]:{foregroundStyle:w.Ar,backgroundStyle:w.Ny},[v.F_.RIGHT_BODY]:{foregroundStyle:w.Ar,backgroundStyle:w.Ny}};function O(e){let{foregroundStyle:r,backgroundStyle:n}=L[e.arrowPosition],a={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.arrowOffset?N(e.arrowPosition,e.arrowOffset):{}},o={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.pointerBorder?{backgroundColor:e.pointerBorderColor||"#444444"}:{},...e.arrowOffset?N(e.arrowPosition,e.arrowOffset):{}};return i.createElement(i.Fragment,null,i.createElement("div",{"aria-hidden":!0,className:n,style:o}),i.createElement("div",{"aria-hidden":!0,className:r,style:a}))}function R(e){let r=(0,T.P7)(T.gm.arrow),n=e.width||r.defaultModalWidth,a=n+2*(e.noPadding?0:A),o=e.backgroundColor,s=e.onVisibilityChange,c=e.setArrowPosition,[d,u]=i.useState(0),p=i.useCallback(e=>{null!==e&&u(e.getBoundingClientRect().height)},[]),h=(e.isCanvasNode?C:I.eP)({targetKey:e.targetKey,height:d,width:a,topPadding:e.topPadding,alignPointerToLeft:e.alignPointerToLeft,shouldScrollTargetIntoView:e.shouldScrollTargetIntoView,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost,pointerOffsetOverride:e.pointerOffsetOverride}),_=!!h;if(i.useEffect(()=>{s&&s(_)},[_,s]),i.useEffect(()=>{h?.pointerPosition&&c&&c(h.pointerPosition)},[h?.pointerPosition,c]),!h)return null;let g={left:h.left,top:h.top,width:n};e.topOffset&&(g.marginTop=e.topOffset),e.leftOffset&&(g.marginLeft=e.leftOffset);let f=e.backgroundColor?{backgroundColor:e.backgroundColor}:{};return e.hideIfArrowPositionDoesNotMatch&&h.pointerPosition!==e.arrowPosition?null:i.createElement("div",{className:`${e.className||w.Lq} ${e.noPadding?w.$T:""} ${e.noAnimation?w.gh:""}`,style:{...g,...f},ref:p},i.createElement("div",{ref:e.containerRef,role:"tooltip"},!e.shouldHideArrow&&i.createElement(O,{arrowPosition:h.pointerPosition,arrowOffset:h.pointerOffset,modalColor:o}),e.shouldNotWrapInParagraphTag?e.children:i.createElement("p",null,e.children),e.dismissModal&&!e.hideCloseButton&&i.createElement("div",{className:l()(w.b,e.closeButtonClassName)},i.createElement(b.Jn,{onClick:e.dismissModal,innerText:"close","aria-label":(0,m.t)("general.close")}))))}function P(e){let{arrowPosition:r}=e,n=(0,T.P7)(T.gm.arrow),a=e.width||n.defaultModalWidth,o=e.backgroundColor,s="dark"===(0,f.DP)(),c="light"===e.background,[d,u]=i.useState(0),h=i.useCallback(e=>{null!==e&&u(e.getBoundingClientRect().height)},[]),g=(0,I.eP)({targetKey:e.targetKey,height:d,width:a+2*A,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,alignPointerToLeft:e.alignPointerToLeft,...r&&{arrowPosition:r}});if(!g&&!e.shouldCenterModal)return null;let E=i.createElement("div",{className:l()(w._S,{[w.uS]:!(c&&!s)&&e.isUI3})},i.createElement(b.Jn,{onClick:e.dismissModal,innerText:"close","aria-label":(0,m.t)("general.close"),emphasized:!0})),y=i.createElement("div",null,e.ctaText&&e.onClickPrimaryCta&&i.createElement("div",{className:w.ZA},e.bottomLeftText&&i.createElement("b",null,e.bottomLeftText),i.createElement("div",{className:w.OQ},e.secondaryCtaText&&e.secondaryCtaHref&&i.createElement("span",{className:w.P1},i.createElement(p.pW,{newTab:!0,href:e.secondaryCtaHref,variant:"secondary"},e.secondaryCtaText)),e.secondaryCtaText&&e.onClickSecondaryCta&&i.createElement(_.$z,{className:c?w.jS:w.dC,onClick:e.onClickSecondaryCta,"aria-hidden":!0},e.secondaryCtaText),e.ctaText&&e.onClickPrimaryCta&&i.createElement(M,{onClick:e.onClickPrimaryCta,trackingProperties:e.buttonContext?{buttonContext:e.buttonContext}:void 0},e.ctaText)))),v={backgroundColor:o,width:a,margin:e.topOffset?`${e.topOffset}px auto`:"auto"},S=g?{left:g.left,top:g.top}:{left:0,right:0,top:0,bottom:0};return i.createElement("div",{className:c?w.IL:w.wV,ref:h,style:{...v,...S}},i.createElement("div",null,g&&i.createElement(O,{arrowPosition:g.pointerPosition,arrowOffset:g.pointerOffset,modalColor:c?"var(--color-bg)":void 0}),i.createElement("h1",null,e.title),e.children,E),y)}let D=i.forwardRef(function(e,r){let[n,a]=i.useState(0),o=i.useCallback(e=>{null!==e&&a(e.getBoundingClientRect().height),null!=r&&(r.current=e)},[r]),s=i.useRef(null),c=e.disableClickOutsideToHide?u.lQ:e.dismissModal;(0,d.ww)(s,c);let p=i.useRef(null),_=(0,I.eP)({targetKey:e.targetKey,height:e.passHeightForLocation?e.height?e.height:0:n,width:e.width+2*A,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost});i.useEffect(()=>{_&&(p.current=_)},[_]);let g=_||p.current,f=e.hideIfTargetLost&&null==_;if(!g||f||e.hideModal||e.shouldDismissWhenLostDOMTarget&&!_)return null;let E=e.pointerBackgroundColor||"var(--color-border, rgba(0, 0, 0, 0.2))",y=e.pointerForegroundColor||"var(--color-bg, white)",v={left:g.left+(e.arrowPadding??0),top:g.top,width:e.width};e.height&&(v.height=e.height);let T=e.animateQuickly?w.B9:w.w0,S=e.pointerPaddingOffset??0;return i.createElement("div",{ref:s},i.createElement("div",{className:e.className?`${e.className}`:T,style:v,ref:o,"data-testid":"walkThroughModal"},!e.hidePointer&&i.createElement(O,{arrowPosition:g.pointerPosition,arrowOffset:g.pointerOffset+S,modalColor:y,pointerBorderColor:E,pointerBorder:!0}),e.children,!e.hideCloseButton&&i.createElement("div",{className:l()(w.b,e.closeButtonClassName,{[w.uS]:e.useWhiteCloseButton})},i.createElement(b.Jn,{onClick:()=>{e.additionalOnExplicitDismiss&&e.additionalOnExplicitDismiss(),e.dismissModal()},innerText:"close","aria-label":(0,m.t)("general.close"),trackingProperties:{trackingDescriptor:h.c.CLOSE_BUTTON}}))))}),M=(0,_.tf)(function(e){return i.createElement(a.$n,{...e,variant:"primary"})})},74276:(e,r,n)=>{n.d(r,{$v:()=>u});var i=n(848318);n(716544),n(741419);var a=n(453822);n(166365);var o=n(17755),s=n(442313);n(667323),n(376780),n(710665),n(35315),n(355323);var l=n(6760),c=n(969048);function d(){return i.createElement(a.Ex,{color:a.zE.DEFAULT,text:(0,s.t)("pro_onboarding.professional"),className:o.s.colorTextBrand.colorBgSelectedSecondary.font11.$})}function u({dismissModal:e}){let r="share-prototype";return i.createElement(c.Pp,{dismissModal:e,pointerTargetKey:r,calloutTargetKey:r,arrowPosition:l.F_.TOP,title:(0,s.t)("pro_onboarding.prototpye_only_links"),subtitle:(0,s.t)("pro_onboarding.on_your_professional_plan_you_can_share_prototypes"),width:300,badge:i.createElement(d,null)})}n(345908)},48878:(e,r,n)=>{n.d(r,{F4:()=>H,YG:()=>K});var i=n(848318),a=n(716544),o=n(320583),s=n(39773),l=n(541525),c=n(921494),d=n(493554),u=n(195507),p=n(303035),m=n(360589),h=n(473889),_=n(442313),g=n(186323),f=n(490775),E=n(449737),y=n(650894),b=n(936231),v=n(802780),T=n(155651),I=n(481540),S=n(871117),w=n(661780),A=n(32922),C=n(376780),N=n(635547),L=n(928001),O=n(412429),R=n(122367),P=n(576606),D=n(464012),M=n(468277),k=n(597756),F=n(314272),x=n(344675),U=n(674079),B=n(569748),V=n(595107);let G=(e,r)=>{switch(r){case S.oM.DESIGN:return e?.designAccountTypeRequest||null;case S.oM.WHITEBOARD:return e?.whiteboardAccountTypeRequest||null;case S.oM.DEV_MODE:return e?.devModeAccountTypeRequest||null;default:return null}};function H(e){let{isOneClickUpgradeRequest:r,licenseType:n}=e,D=!!e.getIsEligibleForProvisionalAccess&&e.getIsEligibleForProvisionalAccess((0,S.qA)(n)),[H,K]=(0,i.useState)(null),[W,z]=(0,i.useState)(null),$=(0,a.wA)(),Y=(0,w.iZ)(),j=e.orgUser??{id:"",permission:C._D.GUEST,org_id:e.orgId,user_id:Y?.id??""},{orgUsers:q,loadingState:X,currentUserLicenseGroup:Z}=(0,c.R)(r=>{let n=j.license_group_member?.license_group_id??r.orgUsersByOrgId[e.orgId]?.[j.user_id]?.license_group_member?.license_group_id;return{orgUsers:r.orgUsersByOrgId[e.orgId]??{},loadingState:r.loadingState,currentUserLicenseGroup:n?r.licenseGroups[n]:null}}),J=(0,d.Rs)(N.nJE,{orgId:e.orgId}),Q="loaded"===J.status&&"loaded"===J.data.currentUser.status,ee=Q&&u.oA(J.data.currentUser)?.privilegedOrgUser||null,et=(0,i.useCallback)(()=>{let e=G(ee,n);return e?.status==="pending"?e:null},[ee,n]);(0,i.useEffect)(()=>{if(null===H&&Q){let e=et();if(K(null!==e),e){let{requestCanBeNudged:r}=(0,M.q)(e);z(r)}else z(!1)}},[Q,H,et]);let er=(0,d.Rs)(N.kdQ,{orgId:e.orgId,permission:j.permission}),en="loaded"===er.status?er.data?.currentUser?.baseOrgUser?.org:null,ei=en?.sharedOrgLicenseGroupSetting?.configuredUpgradeRequestSetting,ea=(0,d.Rs)(N.HdA,{key:e.fileKey??""},{enabled:!!e.fileKey}),eo=(0,A.XY)(e.orgId),es=`ORG_USER_GET_ADMINS_${e.orgId}`,el=(0,A.EO)(e.orgId),ec=j.permission===C._D.GUEST,ed=ei===R.Sm.ALL_USERS||ei===R.Sm.MEMBERS&&!ec;i.useEffect(()=>{ec||$(f.Jt({forceRefetch:!1}))},[$,ec]),i.useEffect(()=>{ec||(0,L.VP)(X,es)||(0,L.GH)(X,es)||(0,L.aF)(X,es)||$(y.Pg({orgId:e.orgId}))});let eu=(0,l.NV)(I.WL),ep=ec||(0,L.mn)(X,es)&&!(0,L.VP)(X,es)&&(!eo||!(0,L.VP)(X,el)),em=eo&&Z?(0,O.WT)(Z,q):void 0,eh=(0,O.Xy)(q),e_=ec?[]:em||eh,eg=eh.some(e=>e.user_id===j.user_id)||em&&em.some(e=>e.user_id===j.user_id),ef=e.entryPoint.startsWith("dev_mode")||e.licenseType===S.oM.DEV_MODE,eE=(0,g.R)(),ey=ef||eE,{onClose:eb,onSuccess:ev,onError:eT,trackingProperties:eI}=(0,B.P)(ef),eS={...eI,orgId:e.orgId,licenseType:e.licenseType,billableProductKey:e.seatTypeKey,entryPoint:e.entryPoint},ew=(0,s.Xr)(U.OV),eA=(n,i)=>(e.trackForDowngradeNotificationExperiment&&eu(I.Yg,{admin_ids:i,org_id:j.org_id,referring_source:"email",user_id:j.user_id,product:e.licenseType,message:n}),eC||(ev?.(),e.onRequestAccess?.()),y.$V({orgUserId:j.id,orgId:j.org_id,entryPoint:e.entryPoint,adminIds:i.length>=1?i:void 0,message:n,licenseType:e.licenseType,seatTypeKey:e.seatTypeKey,fileKey:e.fileKey,onError:eT,handleRequestId:e=>{ew(e)},suppressVisualBell:!!r||!!D||void 0,folderId:e.folderId})),eC=(0,v.Qk)(e.entryPoint)(),eN=()=>{eC?(ev?.(),e.onRequestAccess?.()):eb?.()},eL=i.useMemo(()=>{let r=ed?(0,_.t)("org_upgrade.action_text.configurable_request_upgrade_instructions"):e.entryPoint===b.PE.CreateFileProjectView?(0,_.t)("org_upgrade.action_text.request_upgrade_instructions_from_project_view"):(0,_.t)("org_upgrade.action_text.request_upgrade_instructions");if(ef)return ed?(0,_.tx)("org_upgrade.action_text.dev_mode",{requestUpgradeInstructions:r}):eg?(0,_.tx)("request_upgrade.action_text.dev_mode_need_request_admin"):ea?.data?.file?.hasPermission?eC?(0,_.tx)("request_upgrade.description_dev_mode_grace_period_one_click",{numDays:o.Hw9}):(0,_.tx)("request_upgrade.description_dev_mode_grace_period",{numDays:o.Hw9}):(0,_.tx)("request_upgrade.action_text.dev_mode_need_request");switch(e.entryPoint){case"teams":return(0,_.tx)("org_upgrade.action_text.teams",{requestUpgradeInstructions:r});case"create-branch":return(0,_.tx)("org_upgrade.action_text.create_branch",{requestUpgradeInstructions:r});case"request-to-edit":return(0,_.tx)("org_upgrade.action_text.edit_files",{requestUpgradeInstructions:r});case"drafts":return(0,_.tx)("org_upgrade.action_text.drafts",{boldedDrafts:i.createElement("span",{className:V.Vq},(0,_.tx)("org_upgrade.drafts")),requestUpgradeInstructions:r});case"create-file":return(0,_.tx)("org_upgrade.action_text.create_file",{requestUpgradeInstructions:r});case"plugin":return(0,_.tx)("org_upgrade.action_text.plugin",{requestUpgradeInstructions:r});case b.PE.CreateFileProjectView:if(e.licenseType===S.oM.DESIGN)return(0,_.tx)("org_upgrade.action_text.create_edit_import_design_files",{requestUpgradeInstructions:r});if(e.licenseType===S.oM.WHITEBOARD)return(0,_.tx)("org_upgrade.action_text.create_edit_import_figjam_boards",{requestUpgradeInstructions:r});return(0,_.tx)("org_upgrade.action_text.edit_files",{requestUpgradeInstructions:r});case b.PE.FileMoveUpsell:return(0,_.tx)("file_browser.file_move.upgrade_seat_to_move_out_of_drafts");default:return(0,_.tx)("org_upgrade.action_text.edit_files",{requestUpgradeInstructions:r})}},[eg,ef,ea?.data?.file?.hasPermission,eC,e.entryPoint,e.licenseType,ed]);if(r){if("loaded"!==J.status||null===H||null===W)return null;let e=W?()=>{let e=et();if(!e)return;let{requestCanBeNudged:r}=(0,M.q)(e);if(r)return P.w.nudgeRequest({request_id:e.id})}:p.lQ,r=H?e:()=>$(eA("",e_.map(e=>e.user.id)));return i.createElement(T.fu,{name:"One Click Upgrade Request Confirmation Modal",properties:{...eS,permission:j.permission}},i.createElement(x.B,{sendRequest:r,onModalClose:eN,isReminder:W}))}return"loading"!==er.status||en?en&&ed?i.createElement(T.fu,{name:"Configured Request Upgrade Modal",properties:{permission:j.permission,configuredUpgradeRequestSetting:ei,...eS}},i.createElement(k.t,{actionOnProvisionalAccessGranted:e.actionOnProvisionalAccessGranted,actionText:eL,customMessage:en?.sharedOrgLicenseGroupSetting?.permittedConfiguredUpgradeRequestMessage,imgUrl:en.imgUrl??"",isEligibleForProvisionalAccess:D,licenseType:e.licenseType,onClose:eb,orgId:e.orgId,orgName:en.name,permission:j.permission,setting:ei})):i.createElement(U.R9,{actionOnProvisionalAccessGranted:e.actionOnProvisionalAccessGranted,actionText:eL,admins:e_.map(e=>e.user).filter(e=>!!e),canUserManagePaidStatus:!!eg,customTitle:e.customTitle,dispatch:$,entryPoint:e.entryPoint,hasPendingRequest:!!et(),hideAdminSelection:ey,isDevMode:ef,isDoneFetching:ep,isEligibleForProvisionalAccess:D,licenseGroupsActive:eo,licenseType:e.licenseType,onClose:eN,onRequestUpgrade:eA,orgId:e.orgId,orgUserId:j.id,planName:e.planName,trackingProperties:eS,type:U.nw.ORG}):i.createElement(F.XV,{title:i.createElement(m.Wi,null),maxWidth:360,minWidth:360,onClose:()=>$(E.Lo()),transparentBackground:ef},i.createElement("div",{className:V.g4},i.createElement(h.kt,null)))}let K=(0,D.Ju)(H,"RequestOrgUpgradeModal")},816267:(e,r,n)=>{n.d(r,{yU:()=>A});var i=n(848318),a=n(716544),o=n(741419),s=n(536384),l=n.n(s),c=n(579020),d=n(857188),u=n(654104),p=n(991371),m=n(145015),h=n(197933),_=n(442313),g=n(449737),f=n(481238),E=n(4917),y=n(727341),b=n(369600),v=n(162371),T=n(464012),I=n(314272),S=n(117592),w=n(375517);let A="savepoint-modal";(0,T.qK)(A,e=>{let r=e.modalShown,n=r.data&&r.data.description||"",a=r.data&&r.data.label||"",s=r.data&&r.data.savepointID,l=r.data&&r.data.isEditingMergeSavepoint||!1,c=(0,y.GS)(),d=!e.openFile.canEdit;return i.createElement(N,{description:n,dispatch:e.dispatch,editingSavepointID:s,editorType:e.openFile.editorType,fileKey:e.openFile.key,isEditingMergeSavepoint:l,isHistoryMode:e.mirror.appModel.topLevelMode===o.lyf.HISTORY,isUI3:c,isViewOnly:d,label:a,recordingKey:"savepointModal"})});let C=class e extends u.uA{constructor(r){super(r),this.onConfirmSavepointModal=(e,r)=>{let n=e||"",i=r||"";this.props.editingSavepointID&&this.props.fileKey?(this.props.dispatch(f.D({fileKey:this.props.fileKey,savepointID:this.props.editingSavepointID,label:n,description:i})),this.hideModal(),(0,c.sx)("History Version Edited Information",{savepointId:this.props.editingSavepointID,labelLength:n.length,descriptionLength:i.length})):n.length>0&&this.props.fileKey&&(this.props.dispatch(E.m({fileKey:this.props.fileKey,label:n,description:i})),this.hideModal(),(0,c.sx)(`History Version Created from ${this.props.isHistoryMode?"History Mode":"Keyboard Shortcut"}`,{savepointId:this.props.editingSavepointID,labelLength:n.length,descriptionLength:i.length})),this.clearSavedInputs()},this.onKeyDownMulti=e=>{e.keyCode===d.Uz.ENTER&&(e.ctrlKey||e.metaKey||e.altKey)&&(e.preventDefault(),this.hideModal(),this.onConfirmSavepointModal(this.state.label,this.state.description))},this.hideModal=()=>{this.props.dispatch(g.Ce())},this.onSubmit=u.P_(this,"submit",e=>{e.preventDefault(),this.onConfirmSavepointModal(this.state.label,this.state.description)}),this.onCancel=()=>{this.clearSavedInputs(),this.hideModal()},this.saveHistoryInputs=()=>{e.keepSavepointModalInput=!0,e.savedLabelInput=this.state.label,e.savedDescriptionInput=this.state.description},this.clearSavedInputs=()=>{e.keepSavepointModalInput=!1,e.savedLabelInput="",e.savedDescriptionInput=""},this.onLabelChange=e=>{let r=e.target.value;this.setState({label:r})},this.onLabelBlur=e=>{this.onLabelChange(e)},this.onDescriptionChange=e=>{let r=e.target.value;this.setState({description:r})},this.onDescriptionBlur=e=>{this.onDescriptionChange(e)},this.goHistoryMode=()=>{this.props.isHistoryMode||(this.props.dispatch((0,v._b)()),this.saveHistoryInputs(),this.hideModal())},this.state={label:"",description:"",disableConfirm:!this.props.isLabelReadOnly}}setLabelAndDescriptionFromProps(r){this.state.label.length<1&&this.state.description.length<1&&(e.keepSavepointModalInput?this.setState({label:e.savedLabelInput,description:e.savedDescriptionInput}):this.setState({label:this.props.label,description:this.props.description}))}componentDidMount(){this.setLabelAndDescriptionFromProps(this.props),super.componentDidMount()}UNSAFE_componentWillReceiveProps(e){this.setLabelAndDescriptionFromProps(e)}render(){if(this.props.isViewOnly)return null;let e=this.state.disableConfirm;this.state.label&&this.state.label.length>0&&(e=!1);let r=(0,_.tx)("collaboration.feedback.save_modal.save"),n=(0,_.tx)("collaboration.feedback.save_modal.cancel"),a=this.props.editingSavepointID?this.props.isEditingMergeSavepoint?(0,_.tx)("collaboration.feedback.save_modal.edit_merge_details"):(0,_.tx)("collaboration.feedback.save_modal.edit_version_information"):(0,_.tx)("collaboration.feedback.save_modal.add_to_version_history"),o=i.createElement(h.i,{displayAs:h.C.Block},i.createElement("form",{onSubmit:this.onSubmit},i.createElement("div",{className:this.props.isUI3?w.nr:void 0},i.createElement("div",{className:w.uW},this.props.isEditingMergeSavepoint&&i.createElement("div",{className:w.VA},(0,_.tx)("collaboration.feedback.save_modal.merge_name_placeholder")),i.createElement(m.ks,{autoFocus:!0,className:l()([w.NB,{[w.pR]:this.props.isLabelReadOnly}]),disabled:this.props.isLabelReadOnly,name:"label",onBlur:this.onLabelBlur,onChange:this.onLabelChange,onKeyDown:this.onKeyDownMulti,placeholder:(0,_.t)("fullscreen.savepoint_modal.title"),recordingKey:u.Pt(this.props,"title"),type:"input",value:this.state.label})),i.createElement("div",{className:this.props.isUI3?void 0:w.uW},this.props.isEditingMergeSavepoint&&i.createElement("div",{className:w.VA},(0,_.tx)("fullscreen.savepoint_modal.give_this_merge_a_description")),i.createElement(m.ks,{className:w.tV,type:"textarea",name:"description",value:this.state.description,placeholder:(0,_.t)("collaboration.feedback.save_modal.description_placeholder"),onChange:this.onDescriptionChange,onBlur:this.onDescriptionBlur,onKeyDown:this.onKeyDownMulti,recordingKey:u.Pt(this.props,"description")}))),i.createElement("div",{className:this.props.isHistoryMode?w.$8:w.v0},!this.props.isHistoryMode&&i.createElement("div",{className:w.RW,onClick:this.goHistoryMode},(0,_.tx)("fullscreen.savepoint_modal.show_full_version_history")),i.createElement(m.e2,{reversed:!0},i.createElement(m.$$,{type:"submit",className:w.pL,disabled:e},r),i.createElement(m.nR,{type:"button",className:w.Lu,onClick:this.onCancel},n)))));return this.props.isUI3?i.createElement(I.XV,{title:a,onClose:this.hideModal},i.createElement("div",{className:w.yl},o)):i.createElement(S.aF,{size:"small",...this.props,className:w.yl},i.createElement(p.s_,{...this.props}),i.createElement("div",{className:w.DD},a),o)}};C.displayName="SavepointModal",C.keepSavepointModalInput=!1,C.savedLabelInput="",C.savedDescriptionInput="";let N=C;(0,T.Ju)(function({savepointID:e,label:r,description:n}){let o=(0,b.q5)(),s=(0,a.wA)(),l=(0,y.GS)();return o?i.createElement(N,{description:n??"",dispatch:s,editingSavepointID:e,editorType:o.editorType,fileKey:o.key,isHistoryMode:!0,isLabelReadOnly:!0,isUI3:l,isViewOnly:!o.canEdit,label:r??"",recordingKey:"savepointModal"}):null},"DevModeSavepointModal")},341339:(e,r,n)=>{n.d(r,{eP:()=>u,pc:()=>c,xT:()=>d});var i=n(848318),a=n(157907),o=n(963376),s=n(53818),l=n(817920);function c({location:e,onTargetLost:r,targetKey:n,targetType:a}){let s=i.useRef(null),l=i.useRef(null),c=i.useRef(!1);i.useEffect(()=>{!c.current&&e&&(c.current=!0)},[c,e]),i.useEffect(()=>{e?(s.current=e,l.current=n):l.current===n&&((0,o.YQ)({id:"Lost DOM Target"}),r?.(c.current,a))},[e,r,n,a])}function d(e){let r=document.querySelectorAll(`[data-onboarding-key=${e}]`);if(0===r.length)return null;for(let e=0;e<r.length;e++)if(function(e){if(!e||(0,a.k)().curator_check_visibility&&("function"==typeof e.checkVisibility&&!e.checkVisibility({visibilityProperty:!0})||!e.offsetParent))return!1;let r=e.getBoundingClientRect();return!(0===r.left&&0===r.right&&0===r.height&&0===r.width)}(r[e]))return r[e];return null}let u=(0,s.D)(e=>{let r=(0,l.P7)(e.pointerType||l.gm.arrow);e.pointerOffsetOverride&&(r.standardPointerOffset=e.pointerOffsetOverride);let n=e.topPadding||-r.pointerTargetOverlap,a=i=>{let a=d(e.targetKey);if(null!=a){let o=(0,l.my)({width:e.width,height:e.height,targetRect:a.getBoundingClientRect(),positioningConstants:r,alignPointerToLeft:e.alignPointerToLeft,shouldCenterArrow:e.shouldCenterArrow,topPadding:n,targetType:"dom",arrowPosition:e.arrowPosition});return null==i||o.top!==i.top||o.left!==i.left?{type:"CHANGED",location:o}:{type:"UNCHANGED"}}return{type:"NOT_FOUND"}},o=null,[s,u]=i.useState(()=>{let e=a(null);return"CHANGED"===e.type&&(o=e.location),o}),[p,m]=i.useState(null);i.useEffect(()=>{let r=a(s);if("CHANGED"===r.type?o=r.location:"UNCHANGED"===r.type&&(o=s),void 0!==r&&u(o),m(e.targetKey),e.shouldScrollTargetIntoView){let r=d(e.targetKey);r?.scrollIntoView()}},[e.targetKey]);let h=i.useRef();function _(){let e=a(s);"CHANGED"===e.type?u(e.location):"NOT_FOUND"===e.type&&u(null)}return(i.useEffect(()=>{h.current=_}),i.useEffect(()=>{let e=setInterval(function(){h.current()},50);return()=>clearInterval(e)},[]),c({location:s,onTargetLost:e.onTargetLost,targetKey:e.targetKey,targetType:"dom"}),p!==e.targetKey)?o:s})},413206:(e,r,n)=>{n.d(r,{J4:()=>D,YU:()=>B,Kd:()=>G,Iz:()=>V,_9:()=>M,lG:()=>x,fb:()=>k,p8:()=>F,mi:()=>K,ET:()=>H});var i=n(848318),a=n(716544),o=n(552602),s=n(723472),l=n(866664),c=n(193396),d=n(601451),u=n(157907),p=n(963570),m=n(566699),h=n(442313),_=n(727341),g=n(950738),f=n(87089),E=n(376780),y=n(241917),b=n(183905),v=n(503024),T=n(980753),I=n(832876),S=n(302839);let w="audience_selector--iconContainer--W80mw",A="audience_selector--radioText--OD-3K",C="audience_selector--radioOption--4NDFa",N="audience_selector--radioSubtitle--g3Mry",L="audience_selector--blackIcon--PM3f-";var O=n(432314),R=n(591748),P=n(112829),D=(e=>(e.VIEW="view",e.EDIT="edit",e))(D||{}),M=(e=>(e.ANYONE="anyone",e.ORG="org",e.WORKSPACE="workspace",e.TEAM="team",e.FOLDER="folder",e.INVITE_ONLY="invite_only",e))(M||{});let k={[E.PQ.EDIT]:{shareAudience:"anyone",audienceAccessLevel:"edit"},[E.PQ.VIEW]:{shareAudience:"anyone",audienceAccessLevel:"view"},[E.PQ.ORG_EDIT]:{shareAudience:"org",audienceAccessLevel:"edit"},[E.PQ.ORG_VIEW]:{shareAudience:"org",audienceAccessLevel:"view"},[E.PQ.WORKSPACE_VIEW]:{shareAudience:"workspace",audienceAccessLevel:"view"},[E.PQ.WORKSPACE_EDIT]:{shareAudience:"workspace",audienceAccessLevel:"edit"},[E.PQ.INHERIT]:{shareAudience:"invite_only",audienceAccessLevel:null},[E.PQ.INVITE_ONLY]:{shareAudience:"invite_only",audienceAccessLevel:null}},F={[E.Pu.VIEW]:{shareAudience:"anyone",audienceAccessLevel:"view"},[E.Pu.ORG_VIEW]:{shareAudience:"org",audienceAccessLevel:"view"},[E.Pu.INHERIT]:{shareAudience:"invite_only",audienceAccessLevel:null}};function x(e,r){return"anyone"===e?"edit"===r?E.PQ.EDIT:E.PQ.VIEW:"org"===e?"edit"===r?E.PQ.ORG_EDIT:E.PQ.ORG_VIEW:E.PQ.INVITE_ONLY}let U=(e,r)=>{if("anyone"===e){if("anyone"!==r)return!1}else if("org"===e&&"invite_only"===r)return!1;return!0};function B(e){let r=(0,a.wA)(),n={[E.vt.TEAM]:["invite_only"],[E.vt.FOLDER]:["invite_only"],[E.vt.FILE]:["anyone","invite_only"],[E.vt.FILE_REPO]:["anyone","invite_only"]}[e.resourceType],p=null;e.org&&(e.workspace&&e.workspace.id!==T.O&&n.splice(1,0,"workspace"),n.splice(1,0,"org")),e.isPrototype&&(n=n.filter(r=>U(e.fileShareAudience,r)),"anyone"===e.fileShareAudience&&1===n.length&&"anyone"===n[0]&&(p=(0,h.t)("permissions.audience_selector.can_only_be_adjusted_in_the_main_file")));let f=(0,g.Um)(),b={anyone:(0,h.t)("permissions.audience_selector.anyone"),workspace:e.workspace?.name||"",org:e.org?.name||"",team:e.team?.name||"",folder:"",invite_only:(0,h.t)("permissions.audience_selector.only_invited_people")},A=(0,_.GS)(),C={anyone:i.createElement("div",{className:w},i.createElement(m.U,{svg:R.A,className:L},i.createElement(o.Y,null))),workspace:e.workspace&&i.createElement("div",{className:w},A?i.createElement(s.w,null):i.createElement(I.z6,{entity:e.workspace,size:16})),org:e.org&&i.createElement("div",{className:w},A?i.createElement(l.Y,null):i.createElement(m.U,{svg:P.A,className:L},i.createElement(l.Y,null))),team:e.team&&i.createElement("div",{className:w},i.createElement(I.Ro,{entity:{id:e.team.id,imgUrl:e.team.img_url,name:e.team.name},hideFallbackInitial:!1,size:16})),folder:i.createElement(i.Fragment,null),invite_only:i.createElement("div",{className:w},i.createElement(m.U,{svg:O.A,className:L},i.createElement(c.c,null)))},N=i.useCallback(()=>{let r={[E.vt.TEAM]:(0,h.t)("permissions.audience_selector.team_resource_name"),[E.vt.FOLDER]:(0,h.t)("permissions.audience_selector.project_resource_name"),[E.vt.FILE]:(0,h.t)("permissions.audience_selector.file_resource_name"),[E.vt.FILE_REPO]:(0,h.t)("permissions.audience_selector.file_resource_name")};return e.isPrototype?e.editorType===y.nT.Slides&&(0,u.k)().slides_paywall_string?(0,h.t)("permissions.audience_selector.presentation_resource_name"):(0,h.t)("permissions.audience_selector.prototype_resource_name"):r[e.resourceType]},[e.isPrototype,e.resourceType,e.editorType]),D=i.useMemo(()=>{let r=N();switch(e.value){case"anyone":return e.editorType===y.nT.Slides?(0,h.t)("permissions.audience_selector.anyone_even_outside_your_org_can_access_this_resource",{resourceName:r}):(0,h.t)("permissions.audience_selector.anyone_even_those_outside_your_org_can_access_this_resource",{resourceName:r});case"org":if(e.searchable)return(0,h.t)("permissions.audience_selector.audience_can_access_through_search_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.org_members")});return(0,h.t)("permissions.audience_selector.audience_can_access_through_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.org_members")});case"workspace":return(0,h.t)("permissions.audience_selector.audience_can_access_through_search_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.workspace_members")});case"team":case"folder":return(0,h.t)("permissions.audience_selector.can_access_through_search_file_browser_link");case"invite_only":return(0,h.t)("permissions.audience_selector.only_people_you_directly_invited_can_access",{resourceName:r})}},[e.value,e.searchable,e.editorType,N]);return i.createElement("div",{"data-testid":"create-team-modal-audience-selector"},i.createElement(S.l6,{className:"audience_selector--dropdownSelector--eEAHQ select--selectInputExpanded--Lz6m4",disabled:!!p||e.disabled,dispatch:r,dropdownClassName:"audience_selector--dropdownContainer--Xyoak",dropdownShown:f,focusedOption:n[0],formatter:{format:e=>b[e]},icon:C[e.value],iconClassName:"audience_selector--dropdownSvg--VPhRA",id:"create-team-modal-audience-selector",inputClassName:"audience_selector--dropdownSelectorTitle---y7CH",onChange:e.onChange,openBelowTarget:!A,property:e.value,rightIcon:p?i.createElement(d.b,{"data-tooltip-type":v.Ib.TEXT,"data-tooltip":p}):void 0},n.map(r=>i.createElement(S.c$,{value:r,key:r,height:28,icon:C[r],dataTestId:`audience-option-${r}`,rightCheck:!0,disabled:"anyone"===r&&e.publicLinksBanned},b[r]))),i.createElement("div",{className:"audience_selector--subtitle--MIXKn text--fontPos11--2LvXf text--_fontBase--QdLsd"},D))}function V(e){return i.createElement(i.Fragment,null,i.createElement(p.z,{value:e.selectedPermissionsLevel,onChange:e.setSelectedPermissionsLevel,isHorizontal:!0,dataTestId:"permissions-level-radio-group"},i.createElement(p.Z,{key:"view-only",value:"view",className:C,disabled:e.disabled},i.createElement("p",{className:A},(0,h.tx)("team_creation.view"))),i.createElement(p.Z,{key:"edit",value:"edit",className:C,disabled:e.disabled||e.disableEdit},i.createElement("p",{className:A},e.teamCanAccess?(0,h.tx)("permissions.level_name_capitalized.can_access"):(0,h.tx)("team_creation.edit")))))}function G(e){return f.sZ()?.k12_google_org&&(0,u.k)().student_plan_no_hidden_teams?i.createElement(p.z,{dataTestId:"org-browsable-team-radio-options",value:e.selectedDiscoverability,onChange:e.setSelectedDiscoverability},i.createElement(p.Z,{key:"org_browsable",value:b.Fb.ORG_BROWSABLE,className:C},i.createElement("p",{className:A},(0,h.tx)("team_creation.visible"))),i.createElement("p",{className:N},(0,h.tx)("team_creation.anyone_can_find_this_team"))):i.createElement(i.Fragment,null,i.createElement(p.z,{dataTestId:"org-browsable-team-radio-options",value:e.selectedDiscoverability,onChange:e.setSelectedDiscoverability},i.createElement(p.Z,{key:"org_browsable",value:b.Fb.ORG_BROWSABLE,className:C},i.createElement("p",{className:A},(0,h.tx)("team_creation.visible"))),i.createElement("p",{className:N},(0,h.tx)("team_creation.anyone_can_find_this_team")),i.createElement(p.Z,{key:"hidden",value:b.Fb.HIDDEN,className:C},i.createElement("p",{className:A},(0,h.tx)("team_creation.hidden"))),i.createElement("p",{className:N},(0,h.tx)("team_creation.only_team_members_can_find_and_access"))))}function H(e,r,n,a){return e===E.PQ.EDIT||e===E.PQ.VIEW?a?(0,h.tx)("file_audience_row.anyone_with_password"):(0,h.tx)("permissions.anyone"):e===E.PQ.ORG_EDIT||e===E.PQ.ORG_VIEW?r&&(0,h.tx)("permissions.anyone_in_container_name",{containerName:r.name}):e===E.PQ.WORKSPACE_EDIT||e===E.PQ.WORKSPACE_VIEW?n&&(0,h.tx)("permissions.anyone_in_container_name",{containerName:n.name}):e===E.PQ.INVITE_ONLY||e===E.PQ.INHERIT?(0,h.tx)("permissions.only_those_invited"):i.createElement(i.Fragment,null)}function K(e){return e===E.PQ.EDIT||e===E.PQ.ORG_EDIT||e===E.PQ.WORKSPACE_EDIT?(0,h.tx)("file_access_row.can_edit"):e===E.PQ.VIEW||e===E.PQ.ORG_VIEW||e===E.PQ.WORKSPACE_VIEW?(0,h.tx)("file_access_row.can_view"):void 0}},146402:(e,r,n)=>{n.d(r,{mK:()=>f,ox:()=>g});var i=n(848318),a=n(716544),o=n(95650),s=n(757033),l=n(963376),c=n(449737),d=n(279731),u=n(661780),p=n(534425),m=n(326872);function h(e){s.Ay.put(`/api/files/${e}/expire_public_link`)}let _=(e,r)=>{let n=i.useRef(null);i.useEffect(()=>{let i=e?(0,o.A)(e).diff((0,o.A)()):void 0;return void 0!==i&&i<0x7fffffff?(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{n.current=null,r()},i)):n.current&&(clearTimeout(n.current),n.current=null),()=>{n.current&&clearTimeout(n.current)}},[e,r])};function g(e){let r=(0,u.iZ)(),n=(0,a.wA)(),{file:o,onCanvasExpired:s}=e,m=o?.key,g=(0,d.v)(e.file),f=i.useRef(void 0),E=g?.activeExpiration,y=g?.file,b=y?.hasViewPrototypeRole,v=g?.accessReverted;i.useEffect(()=>{b&&v&&!f.current?.accessReverted&&g.expiresAt&&g.expiresAt===f.current?.expiresAt&&(0,l.YQ)({id:"link_expired_event"}),f.current=g},[g,v,b]),_(E,i.useCallback(()=>{m&&(b&&r||(n(c.to({type:p.J})),s?.()),h(m))},[n,s,m,r,b]))}function f(e,r){_(m.d4(r)?.toISOString(),i.useCallback(()=>{h(e)},[e]))}},447118:(e,r,n)=>{n.d(r,{$:()=>u});var i=n(992277),a=n(502255),o=n(449737),s=n(976308);n(376780);var l=n(988540),c=n(241917),d=n(515071);function u(e,r,n){if(!(0,c.Nw)(r)){(0,a.$D)(i.e.MONETIZATION_UPGRADES,Error("Paywall: Wrong editor type for pro feature"),{extra:{editorType:r,teamId:n.id}});return}e((0,o.to)({type:d.DV,data:{team:n,editorType:(0,c.oD)(r),resource:l.Bi.PASSWORD_PROTECTION,currentPlan:s.F.Plan.STARTER,upsellPlan:s.F.Plan.PRO}}))}},519101:(e,r,n)=>{n.d(r,{KM:()=>P,Ku:()=>F});var i=n(848318),a=n(716544),o=n(356505),s=n(677772),l=n(311037),c=n(596616),d=n(39773),u=n(322035),p=n(379338),m=n(855340),h=n(17755),_=n(442313),g=n(500276),f=n(405866),E=n(155651),y=n(369600),b=n(273121),v=n(217084),T=n(413206),I=n(452101),S=n(252325),w=n(73063),A=(e=>(e.EDIT="edit",e.DUPLICATE="duplicate",e))(A||{});let C=(0,p.ck)("cee072aec57608cbb49c64eb6cb3765896cea921"),N="share-to-google-classroom-row",L=(0,d.eU)(null),O=(0,E.tf)(S.sR);function R(e){let r=(0,a.wA)(),n=(0,d.Xr)(L),o=i.useRef(null);i.useEffect(()=>(n(o),()=>{n(null)}),[o,n]);let s=i.createElement("div",{ref:o,className:w.S},i.createElement("img",{src:C,alt:"share to google classroom",className:w.S}));return i.createElement(E.fu,{name:"share_to_google_classroom_row"},i.createElement(O,{icon:s,text:(0,_.t)("file_permissions_modal.share_as.google_classroom"),onClick:()=>{r(f.b({has_shared_to_google_classroom:!0})),e.onClick()},testId:N,dataOnboardingKey:N,expandCaret:!0,trackingProperties:{text:"Share to Google Classroom"}}))}function P({org:e,currentUser:r}){var n;let a=(0,I.o)(),o=e?.k12_google_org,s=(n=r?.profile?.jobTitle||"","education"===(0,m.HB)(n));return o||s?i.createElement(R,{onClick:()=>a(v.A5.SHARE_TO_GOOGLE_CLASSROOM)}):null}let D=(0,E.tf)(o.$n),M=g.sx.add({color:"var(--color-text-figjam)",cursor:"pointer",userSelect:"auto"}).$,k=g.sx.add({transform:"translateY(-4px)"}).$;function F(e){let r=T.fb[e.linkAccess].audienceAccessLevel!==T.J4.EDIT,n=(0,y.q5)(),[a,o]=(0,i.useState)("edit"),d=(0,I.o)();return i.createElement(E.fu,{name:"google_classroom_share_modal"},i.createElement("div",{className:h.s.flex.flexColumn.p16.$},i.createElement("form",null,i.createElement(s.b,{legend:i.createElement(l.s,null,r?i.createElement("div",{className:h.s.textBodyMedium.pb8.$,"data-testid":"share-to-google-classroom-disclaimer"},(0,_.tx)("file_permissions_modal.google_classroom_modal.disclaimer",{link:i.createElement(E.$z,{onClick:()=>d(v.A5.SHARE_SETTINGS),type:"button",style:M},(0,_.tx)("file_permissions_modal.google_classroom_modal.disclaimer_link"))})):i.createElement(i.Fragment,null)),value:a,onChange:o},i.createElement("div",{className:h.s.mt8.$},i.createElement(s.c,{value:"edit",label:i.createElement(c.J,{htmlAttributes:{"data-testid":"share-to-google-classroom-edit-option"}},(0,_.tx)("file_permissions_modal.google_classroom_modal.editable_option"))},r?i.createElement("div",{style:k},(0,_.tx)("file_permissions_modal.google_classroom_modal.editable_option_description")):null),i.createElement(s.c,{value:"duplicate",label:i.createElement(c.J,{htmlAttributes:{"data-testid":"share-to-google-classroom-duplicate-option"}},(0,_.tx)("file_permissions_modal.google_classroom_modal.duplicate_option"))},r?i.createElement("div",{style:k},(0,_.tx)("file_permissions_modal.google_classroom_modal.duplicate_option_description")):null)))),i.createElement("div",{className:h.s.flex.flexRow.justifyEnd.$},i.createElement(D,{variant:"primary",onClick:()=>{let r=n?(0,b.jN)({file:n}):"",i="duplicate"===a?"/duplicate":"",o=r?`?url=${r}${i}`:"";(0,u.FJ)(`https://classroom.google.com/share${o}`,"_blank","popup,width=650,height=505"),e.closeModal()},trackingProperties:{googleClassroomShareOption:a},htmlAttributes:{"data-testid":"share-to-google-classroom-share-button"}},(0,_.tx)("general.next")))))}},326872:(e,r,n)=>{n.d(r,{$j:()=>s,Dp:()=>l,Fn:()=>c,M3:()=>E,U:()=>f,W7:()=>_,cH:()=>p,d4:()=>y,hP:()=>g,lX:()=>d,ml:()=>h,nM:()=>b,yJ:()=>u});var i=n(445777),a=n(95650),o=n(442313),s=(e=>(e.DAY="24_hours",e.WEEK="7_days",e.CUSTOM="custom",e))(s||{}),l=(e=>(e.TWENTY_SEC="20_seconds",e.CURRENT="current",e.DAY="24_hours",e.WEEK="7_days",e.CUSTOM="custom",e))(l||{});function c(e,r){switch(r){case"24_hours":case"24_hours":return m(e.clone().add(24,"h"));case"7_days":case"7_days":return m(e.clone().add(7,"d"));default:return(0,a.A)()}}function d(e,r){let n=r.diff(e,"hours");if(n<1){let n=r.diff(e,"minutes");return{num:n<1?1:n,unit:"minute"}}if(n<24)return{num:n,unit:"hour"};let i=Math.ceil(n/24);return i%30==0?{num:Math.floor(i/30),unit:"month"}:i%7==0?{num:Math.floor(i/7),unit:"week"}:{num:i,unit:"day"}}function u(e,r){let{num:n,unit:a}=d(e,r);switch(a){case"minute":return(0,o.t)("permissions_modal.file_share_settings.minute_text",{num:n});case"hour":return(0,o.t)("permissions_modal.file_share_settings.hour_text",{num:n});case"day":return(0,o.t)("permissions_modal.file_share_settings.day_text",{num:n});case"week":return(0,o.t)("permissions_modal.file_share_settings.week_text",{num:n});case"month":return(0,o.t)("permissions_modal.file_share_settings.month_text",{num:n});default:(0,i.xb)(a)}}function p(e,r=!1){return r?e.startOf("hour"):e.clone().add(30,"minutes").startOf("hour")}function m(e,r=!1){return e.clone().add(30,"seconds").startOf("minute")}function h(e){return e.format("LT")}function _(e){return e.format("YYYY-MM-DD")}function g(e){return e.format("HH:mm")}function f(e,r){return(0,a.A)(e+" "+r,"YYYY-MM-DD HH:mm")}function E(e,r){let n=e.isSame((0,a.A)().add(1,"day"),"day"),i=h(e);if(n&&!r)return(0,o.t)("file_access_row.expiration.24_hours.timestamp",{time:i});let s=e.toDate().toLocaleDateString(e.locale(),{weekday:r?"long":"short",month:"short",day:"numeric"});return(0,a.A)().isSame(e,"year")?(0,o.t)("file_access_row.expiration.date.timestamp",{date:s,time:i}):e.format("L LT")}function y(e){return e&&!e.accessReverted&&e.expiresAt?e.expiresAt:null}function b(e){return e<24||e%24!=0?(0,o.t)("file_access_row.expiration.past_org_limit_hours",{count:e}):(0,o.t)("file_access_row.expiration.past_org_limit_days",{count:e/24})}},882369:(e,r,n)=>{n.d(r,{H:()=>C});var i=n(848318),a=n(404827),o=n(536384),s=n.n(o),l=n(818754),c=n(182059),d=n(566699),u=n(963376),p=n(895104),m=n(775038),h=n(790355),_=n(155651),g=n(205397),f=n(701417),E=n(759151),y=n(372455),b=n(769773);let v=(0,l.hG)(E.p3),T=(0,l.hG)(f.km),I=(0,l.hG)(f.LF),S=(0,l.hG)(f.hX),w=v-T/2;function A({dispatch:e,dropdownClassName:r,dropdownShown:n,options:a,value:o,onChange:l,trackingProperties:d={}}){let[u,_]=(0,i.useState)(0),[f,E]=(0,i.useState)(window.innerWidth),b=()=>{E(window.innerWidth)};(0,i.useEffect)(()=>(window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)),[]);let A=i.useRef(null),C=i.useRef(null);(0,i.useEffect)(()=>{if(A.current&&C.current){let e=A.current.getBoundingClientRect(),r=A.current.offsetParent?.getBoundingClientRect();!e||!r||e.top>=r.top&&e.bottom<=r.bottom||(A.current.scrollIntoView(!1),C.current.scrollBy(8)),_(e.width)}},[]);let N={...n?.data?.position||{top:0,left:0}},L=0,O=0,R=!1,P=-1,D=a.map((r,n)=>{if("separator"===r.type)return R||(L+=S),O+=S,i.createElement(c.wv,{key:r.key?String(r.key):n,dataTestId:`dropdown-separator-${n}`});let s=r.key===o;s&&(P=n),R=R||s;let u=r.subtext?I:T;R||(L+=u),O+=u;let _={};return r.subtext&&a[n+1]?.type!=="separator"&&(_.paddingBottom=8,O+=8),i.createElement("div",{key:String(r.key),ref:s?A:null,style:_,"data-testid":`dropdown-option-${n}`,"data-onboarding-key":`dropdown-option-${String(r.key)}`},i.createElement(c.rr,{checked:s,onClick:n=>{n.stopPropagation(),s||l(r.key),e(h.oB())},trackingProperties:{...d,key:String(r.key)},disabled:r.disabled,"data-testid":`dropdown-option-checkable-${n}`},i.createElement("div",{style:{display:"flex",alignItems:"center"}},!!r.icon&&i.createElement(i.Fragment,null,r.icon),i.createElement(p.Y,{direction:"vertical",spacing:4,height:u,verticalAlignItems:"center"},i.createElement(m.E,{fontSize:12},r.text),r.subtext&&i.createElement(m.E,{fontSize:11,color:"menu-disabled"},r.subtext)))))});u+N.left+4>f&&(N.left="auto",N.right=4);let M=16;P===a.length-1&&(M=8),"auto"!==N.top&&void 0!==N.top&&(N.top-=Math.min(L,w-M),N.top=Math.max(16,N.top));let k=i.createElement(g.g1,{maxDropdownHeight:e=>"auto"===N.top||void 0===N.top?v:Math.min(v,Math.round(e-N.top-8-16)),dropdownChildrenHeight:O,ref:C},D);return i.createElement(c.gw,{stopScrollPropagation:!0,dispatch:e,className:s()(y.N1,r),style:N},k)}function C({dispatch:e,dropdownShown:r,value:n,options:o,onChange:l,id:c,placeholder:p,disabled:m=!1,dropdownData:g={},isOpen:f,trackingProperties:E={},dataOnboardingKey:v,onOpenRcsEvent:T,ui3Icon:I}){let S=(0,i.useRef)(null),w=o.findIndex(e=>"option"===e.type&&e.key===n),C=o[w],N=C?.type==="option"?C.selectedLabel||C.text:p,L=C?.type==="option"&&C.selectedLabelClass||"";return f=f??r?.type===c,i.createElement("div",{ref:S},i.createElement(_.jm,{trackingProperties:E,className:s()({[y.Lt]:!m,[y.rp]:I}),onClick:m?void 0:n=>{n.stopPropagation(),n.preventDefault(),r&&r.type===c?e(h.oB()):o.length&&!m&&(e(h.j7({type:c,data:{...g,...function(e){let r=e.current?.getBoundingClientRect();return r?{position:{top:r.top,bottom:"auto",left:r.left,right:"auto"}}:{}}(S)}})),T&&(0,u.YQ)({id:T}))}},I,i.createElement("div",{className:`${y.Ck} ${L}`,"data-testid":"dropdown-label"},N),!m&&i.createElement("div",{className:y.Lo},i.createElement(d.U,{"data-onboarding-key":!m&&v?v:"",svg:b.A},i.createElement(a.r,null)))),f&&i.createElement(A,{dispatch:e,dropdownShown:r,dropdownClassName:y.W8,value:n,options:o,onChange:l,trackingProperties:E}))}},244434:(e,r,n)=>{n.d(r,{CM:()=>v,E4:()=>I,R9:()=>b,hP:()=>T,nu:()=>S});var i=n(848318),a=n(716544),o=n(140602),s=n(536384),l=n.n(s),c=n(166365),d=n(566699),u=n(442313),p=n(576220);n(871117);var m=n(24096);n(143983);var h=n(995946),_=n(503024),g=n(882369),f=n(372455),E=n(977613),y=n(443105);function b(e){let r="level-change-dropdown",n=(0,a.wA)(),o=()=>e.dropdownShown&&e.dropdownShown.type===r&&e.dropdownShown.data.dropdownId===e.id,s=e.virtualRowItem?{position:"absolute",top:e.virtualRowItem.start,left:0,right:0}:void 0;return i.createElement("div",{className:f.zn,style:s},i.createElement("div",{className:f.H},i.createElement(T,{user:e.user,id:e.id,pending:e.pending})),i.createElement("div",{className:f.$S},i.createElement("div",{key:`name-${e.id}`,className:e.pending?f.NE:f.UU},e.userName),e.warningMessage&&i.createElement(c.B,{className:f.QW,svg:y.A,"data-tooltip-timeout-delay":50,"data-tooltip-type":_.Ib.TEXT,"data-tooltip":e.warningMessage,"aria-label":e.warningMessage}),e.warningTooltipId&&i.createElement(c.B,{className:f.QW,svg:y.A,"data-tooltip-type":_.Ib.SPECIAL,"data-tooltip":e.warningTooltipId,"data-tooltip-timeout-delay":50,"data-tooltip-interactive":!0,"aria-label":e.warningTooltipText}),(()=>{let a=e.getRoleOptions();return a?i.createElement(g.H,{dispatch:n,onChange:e.onChangeLevel,options:a,id:r,value:e.level,dropdownShown:e.dropdownShown,dropdownData:{dropdownId:e.id},isOpen:!!o()}):e.isPrototypeRole&&e.level===h.e6.VIEW_PROTOTYPES?i.createElement("span",{className:f.C1},(0,u.t)("permissions.level_name.can_view")):i.createElement("span",{className:f.C1},(0,m.C1)(e.level,e.isBranchFile))})()))}function v(e){let{user:r,plan:n}=e;return i.createElement("div",{className:f.e0},i.createElement("img",{"data-tooltip-type":_.Ib.TEXT,"data-tooltip":r.email,key:`avatar-${e.id}`,src:r.img_url,className:l()(f.my),alt:""}),i.createElement("div",{className:f.dz},i.createElement(p.nl,{size:p.Pf.SMALL,shape:"CIRCLE",team:{id:n?.parentId??"",name:n?.name??"",imgUrl:n?.imgUrl??""}})))}function T(e){let{user:r,pending:n}=e,a=!1===n&&r.img_url;return a&&!n?i.createElement("img",{"data-tooltip-type":_.Ib.TEXT,"data-tooltip":e.user.email,key:`avatar-${e.id}`,src:a,className:l()(f.my,e.small&&f.dT,e.border&&f.kk),alt:""}):i.createElement("div",{className:l()(f.f1,e.small&&f.dT,e.border&&f.kk),"data-tooltip-type":_.Ib.TEXT,"data-tooltip":e.user.email},i.createElement(d.U,{key:`avatar-${e.id}`,svg:E.A,className:l()(f.Zk,e.small&&f.dT)},i.createElement(o.A,{className:l()(f.Zk,e.small&&f.dT)})))}function I(e,r){return!1===e.pending?e.user.handle:e.user.email in r?r.usersByEmail[e.user.email].handle:e.user.email}function S(e,r,n,i,a,o,s){let l=[],c=!1;if(!n)return null;s&&o===h.e6.VIEW_PROTOTYPES?l.push({type:"option",key:h.e6.VIEW_PROTOTYPES,text:(0,m.C1)(h.e6.VIEWER)}):r?l.push(w(o)):(e&&!a&&l.push(w(h.e6.OWNER)),i&&l.push(w(h.e6.ADMIN)),l.push(w(h.e6.EDITOR)),l.push(w(h.e6.VIEWER)),c=a);let d=r&&!e?(0,u.t)("confirm_remove_role.leave"):(0,u.t)("confirm_remove_role.remove");return l.push({type:"separator"}),c&&l.push({type:"option",key:"resend",text:(0,u.t)("role_row.resend_invite")}),l.push({type:"option",key:h.e6.NONE,text:d}),l}function w(e){return{type:"option",key:e,text:(0,m.C1)(e)}}},851968:(e,r,n)=>{n.d(r,{$f:()=>A,I$:()=>w,Jr:()=>C,UM:()=>N});var i=n(379338),a=n(991026),o=n(737539),s=n(302302),l=n(821013),c=n(728352);let d={id:"4317920",team_id:null,org_id:"675025436003846244",location:"San Francisco, CA",profile_handle:"asana",public_at:"2020-05-06T20:49:58.442Z",follower_count:341,following_count:0,primary_user_id:null,name:"Asana",img_url:"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2","500_500":"https://s3-alpha.figma.com/profile/5c98d80b-d276-446c-8080-7e586b085612"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.ORG,website:"asana.design",twitter:"twitter.com/asanadesignteam",instagram:"instagram.com/asanadesignteam",description:"We\u2019re the Design team behind Asana.\nWe design the future of teamwork. \u2728\n\nJoin us: asana.com/jobs/product",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/4317920/cover_image",is_community_beta:!0,badges:[o.s.FIGMA_PARTNER]},u={id:"1521",team_id:null,org_id:"703355754804194517",location:"Sydney, Australia",profile_handle:"atlassian",public_at:"2020-06-22T18:25:34.800Z",follower_count:4297,following_count:0,primary_user_id:null,name:"Atlassian",img_url:"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657","500_500":"https://s3-alpha.figma.com/profile/26a88a1d-27d7-460c-9301-dd0910d39614"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.ORG,website:"https://atlassian.com",twitter:null,instagram:null,description:"The official home of Atlassian's design resources in Figma.",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1521/cover_image",is_community_beta:!0,badges:[o.s.FIGMA_PARTNER]},p={id:"1608",team_id:null,org_id:"797266083973274396",location:null,profile_handle:"github",public_at:"2020-02-12T18:27:36.218Z",follower_count:126,following_count:0,primary_user_id:null,name:"GitHub",img_url:"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556","500_500":"https://s3-alpha.figma.com/profile/84ae1734-e47e-4945-884c-f536e5d3f427"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.ORG,website:"https://www.github.com",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"",is_community_beta:!1,badges:[o.s.FIGMA_PARTNER]},m={id:"1731",team_id:null,org_id:null,location:"Los Angeles, CA",profile_handle:"snap",public_at:"2020-03-02T14:56:23.081Z",follower_count:17,following_count:0,primary_user_id:null,name:"Snapchat",img_url:"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2","500_500":"https://s3-alpha.figma.com/profile/7bbd1ecd-0481-4423-9092-58ec01c00d68"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.ORG,website:"https://www.snapchat.com/l/en-gb/",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1731/cover_image",is_community_beta:!1,badges:[]},h={id:"2480257",team_id:null,org_id:null,location:"San Francisco, CA",profile_handle:"figma",public_at:"2019-10-21T22:53:16.561Z",follower_count:16253,following_count:53,primary_user_id:"768244674400796816",name:"Figma",img_url:"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577","500_500":"https://s3-alpha.figma.com/profile/c4bc0357-6f54-412a-ac89-f311905bbec5"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:s.o1.USER,website:"www.figma.com",twitter:"twitter.com/figma",instagram:"instagram.com/figma",description:"Figma is the design tool for teams who build products together. Claim your community profile here: https://bit.ly/3euhKR9",pronouns:null,has_shared_teams:!1,has_shared_orgs:null,redirect_cover_image_url:"/profile/2480257/cover_image",is_community_beta:!0,badges:[]},_="1098405969270214551",g="1094001923188252679",f="1101944648482192724",E="1151936790942917527",y={[d.id]:_,[p.id]:f,[u.id]:g,[m.id]:E},b="1220512233196109878",v="1220802563996996107",T={[p.id]:b,[u.id]:v};function I(){return"prod"===(0,i.tl)().cluster_name}function S(e){if(!I())return[];switch(e){case _:return[h,d];case v:case g:return[h,u];case b:case f:return[h,p];case E:return[h,m];default:return[]}}function w(e){if(!I())return e;let r=S(e.id);if(0===r.length)return e;let n=(e.community_publishers?.accepted??[]).filter(e=>!r.find(r=>r.id===e.id)),i=r.concat(n);return{...e,community_publishers:{...e.community_publishers,accepted:i}}}function A(e){if(!I())return e;let r=a.qY(e)?.id;if(!r)return e;let n=S(r);if(0===n.length)return e;let i=(e.community_publishers?.accepted??[]).filter(e=>!n.find(r=>r.id===e.id)),o=n.concat(i);return{...e,community_publishers:{...e.community_publishers,accepted:o}}}async function C(e){if(!I())return[];try{let r=y[e];if(r){let e=(await c.U.getVersions({widgetId:r})).data.meta.plugin;return[w(e)]}}catch(e){console.error(e)}return[]}async function N(e){if(!I())return[];try{let r=T[e];if(r){let e=(await l.V.getVersions({pluginId:r})).data.meta.plugin;return[w(e)]}}catch(e){console.error(e)}return[]}},30807:(e,r,n)=>{n.d(r,{AB:()=>eI,Ce:()=>ey,Ho:()=>eu,Q7:()=>eg,TL:()=>ew,Xg:()=>eb,v_:()=>eA});var i,a,o,s,l,c=n(848318),d=n(716544),u=n(445777),p=n(536384),m=n.n(p),h=n(44509),_=n(857188),g=n(831932),f=n(16196),E=n(736248),y=n(453822),b=n(66566),v=n(183256),T=n(166365),I=n(291499),S=n(442313),w=n(697714),A=n(453868),C=n(541550),N=n(364370),L=n(544795),O=n(991026),R=n(902213),P=n(207537),D=n(15027),M=n(790355),k=n(449737),F=n(155651),x=n(625069),U=n(867397),B=n(263148),V=n(661780),G=n(391788),H=n(402840),K=n(526830),W=n(677251),z=n(503024),$=n(836301),Y=n(832876),j=n(150084),q=n(898302),X=n(844945),Z=n(441360),J=n(561431),Q=n(208951),ee=n(36523),et=n(205397),er=n(447012),en=n(288472),ei=n(937053),ea=n(417669),eo=n(409073),es=n(903761),el=n(445903),ec=n(579393),ed=n(424579);function eu(e){let r;let[n,i]=c.useState(!1),a=!n&&e.isSet?ea.Bz:e.isWhiteboard?ea.kj:ea.h1,o=e.showNewBadge?c.createElement(eg,null):e.showFigPickBadge?c.createElement(e_,null):c.createElement(c.Fragment,null),s=m()(e.isSet?ea.mH:ea.ZX,{[ea.eB]:e.includeChromiumDownscalingFix&&g.Ay.chrome},e.imageClassName);return r=e.image?e.showOriginalThumbnail?c.createElement("img",{className:s,src:e.image,loading:"lazy",onLoad:()=>i(!0),alt:e.alt,draggable:!1}):c.createElement(A.Xy,{className:s,image:e.image,onLoad:()=>i(!0),hubFileId:e.hubFileId,alt:e.alt,thumbnailContext:e.thumbnailContext,resizedThumbnailUrls:e.resizedThumbnailUrls,draggable:e.draggable}):c.createElement(Q.Ek,null),c.createElement("div",{className:a,style:{backgroundColor:e.backgroundColor}},r,o,e.showPrototypeIcon&&c.createElement("div",{className:ea.cT},c.createElement(I.t,{svg:ed.A,className:ea.wr,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:ed.A})),e.showWhiteboardIcon&&c.createElement(ef,null))}function ep(e){let r=(0,d.d4)(e=>e.orgById),n="search"===(0,d.d4)(({selectedView:e})=>e).view,i=e.plugin.org_id&&r?.[e.plugin.org_id],a=(0,H.uF)(e.plugin),{tagline:o,description:s,name:l}=a,u=(0,L.G8)({description:e.isPublishing?"":e.descriptionOverride??s??"",tagline:o??""},f.$J);return c.createElement("div",{className:ea.Ak},c.createElement("div",{className:ea.vG},c.createElement("img",{src:a.redirect_icon_url,loading:"lazy",alt:""})),c.createElement("div",{className:ea.wA},c.createElement($.V,{plugin:a,className:ea.Az,loading:"lazy",alt:""})),l&&c.createElement("div",{className:ea.K9},l),u&&c.createElement("div",{className:l?ea.Ry:ea.Tk},u),n&&i&&c.createElement("div",{className:ea.jG},c.createElement(ei.H,{entityId:i.id,entityName:i.name,imgUrl:i.img_url,hideTooltip:!0}),i.name),e.showNewBadge?c.createElement(eg,null):e.showInstalledIcon&&c.createElement("span",{className:ea.qP},(0,S.tx)("community.plugins.saved")),e.children)}c.memo(function(e){function r(){return e.name?c.createElement("div",{className:ea.ZR},e.name):c.createElement("div",{className:ea._},e.placeholderName)}function n(){return c.createElement("div",null,e.author?e.author:c.createElement("div",{className:ea.JM}))}return c.createElement(c.Fragment,null,c.createElement("div",{className:e.showFileNameAsPrimary?ea.cR:ea.i1,onClick:e.onClick},c.createElement("div",{className:ea.__},c.createElement("a",{className:ea.t5,href:e.href,onClick:e=>e.preventDefault(),style:{backgroundColor:e.backgroundColor,backgroundClip:g.Ay.safari?"padding-box":""}},c.createElement(eu,{alt:e.name,hubFileId:e.hubFileId,image:e.backgroundImage,isSet:!!e.thumbnailIsSet,isWhiteboard:e.isWhiteboard,showFigPickBadge:e.showFigPickBadge,showNewBadge:e.showNewBadge,showOriginalThumbnail:e.showOriginalThumbnail,showPrototypeIcon:e.isPrototype,showWhiteboardIcon:e.isWhiteboard}))),c.createElement("div",{className:ea.HC},c.createElement("div",{className:ea.dB},e.showFileNameAsPrimary?c.createElement(n,null):c.createElement(r,null)),c.createElement("div",{className:ea.bI},c.createElement("div",{className:ea.vz},em(e.commentsSetting)&&c.createElement(eh,{count:e.commentCount}),e.duplicateButton),e.showFileNameAsPrimary?c.createElement(r,null):c.createElement(n,null)))))});let em=e=>e!==B.Ni.ALL_DISABLED;function eh(e){return c.createElement("div",{className:ea.Z2},c.createElement(T.B,{className:ea.Ls,svg:el.A})," ",e.count)}function e_(){return c.createElement("div",{className:ea.jq,"data-tooltip-type":z.Ib.TEXT,"data-tooltip":(0,S.t)("community.profiles.boosted_by_the_figma_team"),"data-tooltip-show-immediately":!0},c.createElement(y.Ex,{text:(0,S.t)("community.profiles.fig_pick"),color:y.zE.BRAND,className:ea.q2}))}function eg(){return c.createElement("div",{className:ea.jq},c.createElement(y.Ex,{text:(0,S.t)("community.profiles.new"),color:y.zE.SUCCESS,className:ea.q2}))}function ef(){return c.createElement("div",{className:ea.o_,"data-tooltip-type":z.Ib.TEXT,"data-tooltip":(0,S.t)("community.profiles.made_in_fig_jam"),"data-tooltip-show-immediately":!0},c.createElement(I.t,{svg:eo.A,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:eo.A}))}function eE(e){let{CreatorsOverlay:r,creatorsOverlayProps:n}=i.useCreatorsHoverOverlay({resource:e.plugin}),a=e.isPaid?{id:"0",badges:[],monetized_resource_metadata:{id:"0",price:(0,N.ae)(e.price),is_subscription:!1}}:null;return c.createElement("div",{className:g.Ay.mobile?ea.IM:e.showAuthorByDefault?ea.Gf:ea.U$,onClick:e.onClick},a&&c.createElement(C.Mr,{resource:a||e.plugin}),c.createElement(r,{...n},c.createElement("div",{className:ea.w},c.createElement("div",{className:ea._F},c.createElement(ey,{plugin:e.plugin,showNewBadge:e.showNewBadge,showInstalledIcon:e.showInstalledIcon,isPublishing:e.isPublishing,descriptionOverride:e.descriptionOverride,isPublicOverride:e.isPublicOverride})),c.createElement(eb,{plugin:e.plugin,showInstallCount:e.showInstallCount,author:e.author,isPaid:e.isPaid,isPublicOverride:e.isPublicOverride,dropdown:e.dropdown}))))}function ey({plugin:e,showNewBadge:r,showInstalledIcon:n,isPublishing:i,descriptionOverride:a,isPublicOverride:o,...s}){let l=ev(e,o);return c.createElement(ep,{showInstalledIcon:n??l,showNewBadge:r,isPublishing:i,plugin:e,descriptionOverride:a},c.createElement("div",{className:ea.bs},c.createElement(v.C,{...s})))}function eb({plugin:e,showInstallCount:r,author:n,isPaid:a,dropdown:o,isPublicOverride:s}){let{AuthorsJSX:l}=i.useCreatorsHoverOverlay({resource:e}),u=(0,d.d4)(e=>e.authedActiveCommunityProfile),p=(0,x.cs)(u),m=ev(e,s),h=s??!!e.roles.is_public,_=(0,V.iZ)(),f=(0,d.wA)(),y=e.publisher||e.creator,v=c.createElement("div",{className:ea.gx},c.createElement("div",{className:ea.MN},l)),I=c.useCallback(r=>{if(r?.stopPropagation(),r?.preventDefault(),m)_&&(f(D.s1({id:e.id,resourceType:K.vt.PLUGIN,source:D.uR.COMMUNITY_HUB})),f(w.F.enqueue({message:(0,S.t)("community.profiles.removed_from_saved_plugins"),type:"plugin-installed",button:{text:(0,S.t)("community.comments.undo"),action:()=>{f(D.oj({id:e.id,resourceType:K.vt.PLUGIN,orgId:void 0}))}}})));else{if(!_){if(g.rr){window.location.href="/login";return}f(E.Ts({origin:"plugin_install_signed_out"})),f(k.to({type:er.l,data:{headerText:(0,S.t)("community.profiles.save_this_plugin_to_give_you_and_figma_a_boost"),icon:es.A,dispatch:f}}));return}f(D.oj({id:e.id,resourceType:K.vt.PLUGIN,orgId:void 0}))}},[m,e,_,f]);return c.createElement("div",{className:ea.uB},r&&c.createElement("div",{className:ea.Rw},h&&(n||v),!h&&c.createElement("div",{className:ea.Wf},c.createElement(T.B,{className:ea.hz,svg:ec.A}),(0,S.tx)("community.cards.private")),c.createElement("div",{className:ea.y},h&&em(e.comments_setting)&&c.createElement(eh,{count:e.comment_count}),a?c.createElement(ee.Ij,{metric:e.unique_run_count||0}):c.createElement("div",{className:g.Ay.mobile?ea.hA:ea.Pw},c.createElement(b.f,{className:g.Ay.mobile||p?ea.Ys:m?ea.XC:ea.sn,count:e.install_count,prefix:c.createElement("div",{className:ea.uu},m?"\u2713 ":"\u2193 "),onClick:g.Ay.mobile||p?void 0:I}),m&&c.createElement("div",{className:ea.a_,onClick:g.Ay.mobile||p?void 0:I},(0,S.tx)("community.profiles.remove_from_saved_plugins"))),o)),!r&&c.createElement(Y.Ro,{entity:y,size:24}))}function ev(e,r){let n=(0,d.d4)(e=>e.authedActiveCommunityProfile),i=(0,x.zp)();return(void 0===r||r)&&e.roles.is_public?n?(0,Z.a)(n,e):e.profile_install_status===W.u8.PLUGIN_INSTALLED_FOR_USER:e.install_status===W.u8.PLUGIN_INSTALLED_FOR_USER||!!i&&e.install_status===W.u8.PLUGIN_INSTALLED_FOR_ORG}(e=>{function r(e){return c.createElement("div",{onMouseLeave:()=>{e.setDropdownRef(null),e.setDropdownContent(null)}},e.dropdownContent&&e.dropdownRef?.current&&c.createElement(et.Cf,{targetRect:e.dropdownRef.current.getBoundingClientRect(),maxWidth:150,minWidth:1,type:et.it.LIGHT,className:ea.s3,disableDropdownScrollContainer:!0,propagateCloseClick:!0},c.createElement("div",{className:ea.kP},e.dropdownContent)),e.children)}function n(e){let{setDropdownContent:r,setDropdownRef:n}=e,i=[c.useRef(null),c.useRef(null),c.useRef(null),c.useRef(null),c.useRef(null)],a=c.useRef(null),o=({profile:i,ref:a})=>c.createElement("span",{onMouseEnter:()=>{n(a),r(c.createElement(X.Qi,{publisher:i,className:ea.Ah}))},ref:a,className:e.avatarContainerClassName,key:`author-link-${i.id}`},c.createElement(X.Qi,{publisher:i,className:ea.CD,avatarClassName:ea.Vz,avatarSize:e.avatarSize,showAvatar:!0,hideName:!0})),s=({profile:r,stylesOverride:n})=>c.createElement(X.Qi,{key:`author-link-${r.id}`,publisher:r,className:n||ea.CD,avatarClassName:ea.my,avatarSize:e.avatarSize,showAvatar:!0}),l=({profiles:e,ref:i})=>{let a=c.createElement(X.Qi,{publisher:e[0],className:ea.CD});return c.createElement("div",{className:ea.NB},1===e.length&&(0,S.tx)("community.by_publisher",{publisher:a}),e.length>1&&(0,S.tx)("community.by_publisher_with_suffix",{publisherName:a,publishersSuffix:c.createElement(c.Fragment,null,c.createElement("span",{ref:i,className:ea.Jt,onMouseLeave:()=>{n(null)},onMouseEnter:()=>{n(i),r(c.createElement(c.Fragment,null,e.slice(1).map(e=>s({profile:e,stylesOverride:ea.Ah}))))}},(0,S.tx)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:e.length-1})))}))},{resource:d}=e;if(!d)return null;let u=d.community_publishers.accepted;return 1===u.length?e.showAuthorAndOthersTextLabel?c.createElement(c.Fragment,null,o({profile:u[0],ref:i[0]}),l({profiles:u,ref:a})):c.createElement(c.Fragment,null,s({profile:u[0]})):u.length<=4?c.createElement(c.Fragment,null,u.map((e,r)=>o({profile:e,ref:i[r]})),e.showAuthorAndOthersTextLabel&&l({profiles:u,ref:a})):c.createElement(c.Fragment,null,...u.slice(0,4).map((e,r)=>o({profile:e,ref:i[r]})),(({profiles:i,ref:a})=>c.createElement("span",{ref:a,onMouseEnter:()=>{n(a),r(c.createElement(c.Fragment,null,i.map(e=>s({profile:e,stylesOverride:ea.Ah}))))},onMouseLeave:()=>{n(null)}},c.createElement(j.f,{size:e.avatarSize,className:ea.zb,text:`${i.length}`})))({profiles:u.slice(4),ref:i[4]}),e.showAuthorAndOthersTextLabel&&l({profiles:u,ref:a}))}e.useCreatorsHoverOverlay=function({resource:e,avatarStyleOverrides:i={size:24,containerClassName:ea.H,showAuthorAndOthersTextLabel:!1}}){let[a,o]=c.useState(null),[s,l]=c.useState(null),d=c.useMemo(()=>({setDropdownRef:l,setDropdownContent:o,dropdownRef:s,dropdownContent:a,avatarStyleOverrides:i}),[l,o,s,a,i]);return{AuthorsJSX:c.useMemo(()=>c.createElement(n,{resource:e,showAuthorAndOthersTextLabel:i.showAuthorAndOthersTextLabel,avatarSize:i.size,avatarContainerClassName:i.containerClassName,setDropdownContent:o,setDropdownRef:l}),[e,o,l,i]),CreatorsOverlay:r,creatorsOverlayProps:d}},e.Authors=n})(i||(i={})),(e=>{class r extends c.PureComponent{constructor(){super(...arguments),this.onClick=e=>{if((0,_.oJ)(e)){h.Ay.redirect((0,J.ho)(this.props.plugin?.id),"_blank");return}this.props.onClick()}}render(){return c.createElement(eE,{onClick:this.onClick,showInstallCount:!0,showAuthorByDefault:this.props.showAuthorByDefault,showNewBadge:!!(this.props.lastViewedAtForNewBadge&&Date.parse(this.props.plugin.created_at)>Date.parse(this.props.lastViewedAtForNewBadge)),dropdown:this.props.dropdown,plugin:this.props.plugin,isPublicOverride:this.props.isPublicOverride})}}e.ConnectedPluginTile=(0,d.Ng)(null,(e,r)=>({onClick:()=>{r.onClick?.(),e(M.$T({view:"communityHub",subView:"plugin",publishedPluginId:r.pluginId}))},onProfileCreate:n=>{e(k.to({type:en.G$,data:{variations:[en.FF.OPT_IN],userId:n.id,onFinish:()=>e(P.C({id:r.pluginId,resourceType:K.vt.PLUGIN}))}}))}}))(r),e.PluginTile=function(r){let n=(0,d.d4)(e=>e.publishedPlugins),i=r.plugin||(0,H.my)(r.pluginId,n);return c.createElement(e.ConnectedPluginTile,{...r,plugin:i})}})(a||(a={}));let eT=a.PluginTile,eI=(0,F.tf)(eT);class eS extends c.Component{render(){let{numResources:e,maxResources:r,className:n}=this.props;return c.createElement(c.Fragment,null,e<r?Array(r-e).fill(null).map((e,r)=>c.createElement("div",{key:r,className:n})):null)}}eS.defaultProps={maxResources:4},(e=>{class r extends c.Component{constructor(){super(...arguments),this.onHubFileClick=(0,_.Gc)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onHubFileClick()})}render(){let e=(0,G.a6)(this.props.hubFile);return c.createElement("div",{className:ea.Yt},c.createElement("div",{className:ea.sj},c.createElement("a",{className:ea.Ai,style:{backgroundColor:(0,U.Cn)(this.props.hubFile.client_meta),backgroundImage:`url(${this.props.hubFile.thumbnail_url})`},onClick:this.onHubFileClick,href:(0,J.X$)(this.props.hubFile.id)},c.createElement("div",{className:ea.tr},c.createElement("div",{className:ea.Ll},e.name)))))}}r.displayName="PublicProfileHubFileTile",e.PublicProfileHubFileTile=(0,d.Ng)(null,(e,r)=>({onHubFileClick:()=>{e(M.$T({view:"communityHub",subView:"hubFile",hubFileId:r.hubFile.id}))}}))(r)})(o||(o={})),(e=>{class r extends c.Component{constructor(){super(...arguments),this.onPluginClick=(0,_.Gc)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onResourceClick()})}render(){let e=(0,H.uF)(this.props.resource),r=(0,K.xQ)(this.props.resource);return c.createElement("div",{className:ea.Yt},c.createElement("div",{className:ea.sj},c.createElement("a",{className:ea.IC,onClick:this.onPluginClick,href:r?(0,J.YW)(this.props.resource.id):(0,J.ho)(this.props.resource.id)},c.createElement($.V,{className:ea.pt,plugin:e,loading:"lazy",alt:""}),c.createElement("div",{className:ea.FK},e.name))))}}r.displayName="PublicProfilePluginTile",e.PublicProfileBasePluginTile=(0,d.Ng)(null,(e,r)=>({onResourceClick:()=>{(0,K.xQ)(r.resource)?e(M.$T({view:"communityHub",subView:"widget",widgetId:r.resource.id})):e(M.$T({view:"communityHub",subView:"plugin",publishedPluginId:r.resource.id}))}}))(r)})(s||(s={})),(e=>{class r extends c.Component{constructor(e){super(e),this.onPublicProfileClick=e=>{if((0,_.oJ)(e)){let e=this.props.publicProfile;if(!e)return;h.Ay.redirect((0,R.bL)(e.profile_handle)||"","_blank");return}this.props.onPublicProfileClick()},this.updateFollowInfoOnFollowClick=()=>{let e=this.state.currentUserIsFollowing?{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff-1,currentUserIsFollowing:!1}:{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff+1,currentUserIsFollowing:!0};this.setState(e)},this.state={currentUserFollowActionCountDiff:0,currentUserIsFollowing:e.publicProfile.current_user_is_following}}render(){let e=this.props.publicProfile;if(!e)return null;let r={id:e.id,name:e.name,img_url:e.img_url};return c.createElement("div",{className:`${ea.uy} ${this.props.notTabletSidebarOptimized?ea.HG:""}`},c.createElement("div",{className:ea.DU},c.createElement("div",{onClick:this.onPublicProfileClick},c.createElement(Y.Ro,{entity:r,size:96,className:ea.W8})),c.createElement("div",{className:ea.kl},c.createElement("div",{className:ea.r9,onClick:this.onPublicProfileClick},e.name),e.profile_handle&&c.createElement("div",{className:ea.TD},c.createElement("div",{className:ea.O3,onClick:this.onPublicProfileClick},"@",e.profile_handle),e.current_user_is_followed&&c.createElement(eA,null)),e.location&&c.createElement("div",{className:ea._7},e.location),c.createElement("div",{className:ea.k1},!this.props.isOwnProfile&&c.createElement(q.W,{profile:e,followClassName:ea.u8,followingClassName:ea.u8,unfollowClassName:ea.u8,onClick:this.updateFollowInfoOnFollowClick,onError:this.updateFollowInfoOnFollowClick}),c.createElement("div",null,c.createElement("div",{className:ea.u0},(0,S.tx)("community.follow.followers")),c.createElement("div",{className:ea.oQ},e.follower_count+this.state.currentUserFollowActionCountDiff))))),this.props.resources.length>0&&c.createElement("div",{className:ea.iR},this.props.resources.map(e=>{let r=(0,O.Vm)(e);switch(r){case K.vt.HUB_FILE:return c.createElement(o.PublicProfileHubFileTile,{hubFile:e,key:e.id});case K.vt.PLUGIN:case K.vt.WIDGET:return c.createElement(s.PublicProfileBasePluginTile,{resource:e,key:e.id});default:(0,u.xb)(r)}}),c.createElement(eS,{numResources:this.props.resources.length,maxResources:6,className:ea.Yt})),0===this.props.resources.length&&c.createElement("div",{className:ea.t9},(0,S.tx)("community.profiles.no_resources_published_yet")))}}r.displayName="PublicProfileTile";let n=(e,r)=>({isOwnProfile:e.authedActiveCommunityProfile?.id===r.publicProfile.id}),i=(e,r)=>({onPublicProfileClick:()=>{r.onClick&&r.onClick(),e(M.$T({view:"communityHub",subView:"handle",handle:r.publicProfile.profile_handle}))}});e.ConnectedPublicProfileTile=(0,d.Ng)(n,i)(r),e.ConnectedPublicProfileTileTracked=(0,d.Ng)(n,i)((0,F.tf)(r))})(l||(l={}));let ew=l.ConnectedPublicProfileTile;function eA({color:e=y.zE.DEFAULT}){return c.createElement(y.Ex,{text:(0,S.t)("community.profiles.follows_you"),color:e,className:ea.x7})}l.ConnectedPublicProfileTileTracked},112546:(e,r,n)=>{n.d(r,{xZ:()=>O,z2:()=>R});var i=n(848318),a=n(716544),o=n(741419),s=n(157907),l=n(536384),c=n.n(l),d=n(818754),u=n(141039),p=n(379338),m=n(831932),h=n(473889),_=n(166365),g=n(339599),f=n(834996),E=n(599422),y=n(376780),b=n(887057),v=n(241917),T=n(766878),I=n(60546),S=n(27776),w=n(32836),A=n(426430);let C=!1,N=()=>{if(C)return;C=!0;let e="",r=e=>Math.atan(e);for(let n=0;n<200;n++){let i=n/200,a=r(50*i)/r(50);e+=(100*i).toFixed(3)+"%{transform:scaleX("+a.toFixed(3)+");}"}let n="@-moz-keyframes progress-bar-animation {"+e+"}@-webkit-keyframes progress-bar-animation {"+e+"}",i=document.createElement("style");i.nonce=(0,p.Ay)().csp_nonce,i.textContent=n,document.head.appendChild(i)};function L(){return(0,s.k)().pride_inclusive_loading_bar?w.DT:""}function O(){let e=(0,f._6)();if("fullscreen"!==e.view)return null;let r=(0,b.ju)(e);return i.createElement(M,{editorType:(0,v.oD)(e.editorType),cover:!0,progressPaused:!0,editorTheme:r})}function R(e){switch(e.progressBarMode){case o.Oin.KEEP_UI:return i.createElement(P,{progressBarType:e.progressBarType,left:e.left});case o.Oin.HIDE_UI:case o.Oin.ON_AND_LOCKED:return i.createElement(M,{editorType:e.editorType,isViewer:e.isViewer,shouldNotOverflow:e.shouldNotOverflow});case o.Oin.OFF:return i.createElement(i.Fragment,null)}}function P(e){let r=(0,a.d4)(e=>(0,I.$A)(e.selectedView)?0:(0,d.jz)(S.uj0));return i.createElement("div",{className:w.A7},i.createElement("div",{className:w.BT}),i.createElement("div",{className:w.cE,style:{right:r}}),i.createElement(D,{progressBarType:e.progressBarType,left:e.left}))}function D(e){switch(e.progressBarType){case T.lF.SPINNER:return i.createElement("div",{className:w.AV},i.createElement(h.nt,null));case T.lF.BAR:default:return i.createElement(V,{className:w.Wn,style:{left:`${e.left||0}`}})}}function M(e){let r="whiteboard"===e.editorType?y._Y.WHITEBOARD:e.isViewer?"viewer":y._Y.DESIGN;return i.createElement("div",{"data-editor-theme":e.editorTheme,className:c()(w.A7,e.shouldNotOverflow?w.ZT:null)},i.createElement("div",{className:c()({[w.Kb]:e.cover,[w.dV]:"whiteboard"===r,[w.Dn]:"design"===r&&!m.rr,[w.k1]:"design"===r&&m.rr,[w.Mf]:"viewer"===r&&!m.rr,[w.mb]:"viewer"===r&&m.rr})}),"whiteboard"!==r&&i.createElement(F,{type:r,progressPaused:e.progressPaused}),"whiteboard"===r&&i.createElement(k,{progressPaused:e.progressPaused}))}function k(e){return i.createElement("div",{className:c()(w.Dg,{[w.cu]:e.progressPaused})},i.createElement("div",{className:w.oQ},i.createElement("div",{className:w.pm},i.createElement("div",{className:w.BL})),i.createElement("div",{className:w.pn},i.createElement("div",{className:w.Ts}),i.createElement("div",{className:w.n1})),i.createElement("div",{className:w.xo},i.createElement("div",{className:w.Ag}),i.createElement("div",null))),i.createElement(B,{type:"whiteboard",progressPaused:e.progressPaused}))}function F(e){let[r,n]=i.useState(!1),a=(0,E.aq)();return((u.eD?u.eD.getZoomFactor():m.Ay.chrome||m.Ay.safari?Promise.resolve(window.outerWidth/window.innerWidth):Promise.resolve(void 0)).then(e=>{e&&(e<.95||e>1.05)&&a()&&!r&&n(!0)}),r||(0,m.KR)()||g.z4.getIsExtension())?i.createElement(x,{type:e.type,progressPaused:e.progressPaused}):i.createElement(U,{type:e.type,progressPaused:e.progressPaused})}function x(e){let r="design"===e.type,n="viewer"===e.type&&m.rr,a="viewer"===e.type&&!m.rr;return i.createElement("div",{className:c()(w.Dg,{[w.iI]:e.progressPaused})},i.createElement("div",{className:c()({[w.OU]:!0,[w.Uo]:n,[w.v0]:a,[w.uq]:r})},i.createElement(_.B,{className:w.wn,svg:A.A})),i.createElement(B,{type:r?"design":n?"mobile_viewer":"desktop_viewer",progressPaused:e.progressPaused}))}function U(e){let r="design"===e.type,n="viewer"===e.type&&m.rr,a="viewer"===e.type&&!m.rr;return i.createElement("div",{className:c()(w.Dg,{[w.cu]:e.progressPaused})},i.createElement("div",{className:c()({[w.OU]:!0,[w.Uo]:n,[w.v0]:a})},i.createElement("div",{className:w.pm},i.createElement("div",{className:`${w.hj} ${w.nR}`}),i.createElement("div",{className:`${w.Rp} ${w.nR}`}),i.createElement("div",{className:`${w.CU} ${w.nR}`}),i.createElement("div",{className:w.U0},i.createElement("div",{className:`${w.A6} ${w.nR}`}))),i.createElement("div",{className:w.pn},i.createElement("div",{className:`${w.Ts} ${w.nR}`}),i.createElement("div",{className:`${w.n1} ${w.nR}`})),i.createElement("div",{className:w.xo},i.createElement("div",{className:`${w.Ag} ${w.nR}`}),i.createElement("div",null))),i.createElement(B,{type:r?"design":n?"mobile_viewer":"desktop_viewer",progressPaused:e.progressPaused}))}function B(e){let{type:r,progressPaused:n}=e,a=L();return i.createElement("div",{className:c()({[w.QT]:"design"===r,[w.WH]:"mobile_viewer"===r,[w.y6]:"desktop_viewer"===r,[w.Pd]:"whiteboard"===r})},i.createElement("div",{className:c()({[w.fb]:"design"===r,[w.$8]:"mobile_viewer"===r,[w.Zu]:"desktop_viewer"===r,[w._M]:"whiteboard"===r,[w.BM]:!0!==n,[a]:!0})},i.createElement("div",{className:w.On})))}function V({className:e,style:r,seconds:n=120}){let a=L();return N(),i.createElement("div",{className:`${w.pT} ${e||""} ${a}`,style:{MozAnimation:`progress-bar-animation ${n}s linear`,WebkitAnimation:`progress-bar-animation ${n}s linear`,...r}})}V.displayName="ProgressBarRelative"},144041:(e,r,n)=>{n.d(r,{HC:()=>E,dU:()=>C});var i=n(848318),a=n(716544),o=n(67074),s=n(536384),l=n.n(s),c=n(514375),d=n(442313),u=n(719244),p=n(474153),m=n(593330),h=n(249555);let _="accessibilitytree--node--xYG8O",g="accessibilitytree--disabled--m1ByR accessibilitytree--node--xYG8O",f="accessibilitytree--scrollContainer--TNuEw accessibilitytree--node--xYG8O";function E({viewer:e,autofocus:r,setAutofocus:n}){let o;let s=(0,u.e)(),c=(0,a.d4)(e=>!!e.modalShown),p=i.useRef(s);return c||(p.current=s),o=p.current&&e?.hasActiveScene()?i.createElement(y,{viewer:e,autofocus:r,setAutofocus:n}):i.createElement("p",{className:h.Q},(0,d.t)("viewer.accessibilitytree.disabled_placeholder")),i.createElement("main",{className:l()("accessibilitytree--container--CjsLk","viewer-forward-keyevents")},o)}function y({autofocus:e,setAutofocus:r,viewer:n}){let a=function(e){let r=i.useMemo(()=>new w(e),[e]),n=(0,p._)(r);return i.useEffect(()=>{let r=()=>{let r=e.getTopmostFrameNode();r&&n.updateSubtree(r)},i=r=>{let i=e.getPrototypeNode(r);i&&n.updateSubtree(i)};return r(),e.on("viewportChanged",r),e.on("canvasResize",r),e.on("topLevelFrameChange",r),e.on("accessibilityNodeInvalidated",i),()=>{e.off("accessibilityNodeInvalidated",i),e.off("topLevelFrameChange",r),e.off("canvasResize",r),e.off("viewportChanged",r)}},[r,n,e]),n}(n);return i.createElement(b,{autofocus:e,setAutofocus:r,viewer:n,accessibilityScope:a})}let b=i.memo(function({accessibilityScope:e,autofocus:r,setAutofocus:n,viewer:a}){let[o,s]=i.useState(void 0),l=function(e,r){let n=i.useRef(null),a=n.current,o=a?.contains(a?.ownerDocument?.activeElement);return i.useLayoutEffect(()=>{if(!e&&!o)return;let i=n.current;i&&(e||!i.contains(i.ownerDocument.activeElement))&&(i.focus(),e&&r?.(!1))}),n}(r,n);return(i.useEffect(()=>{let e=()=>{let e=a.getTopmostFrameNode();e&&s(a.nodeId(e))};return a.on("topLevelFrameChange",e),()=>{a.off("topLevelFrameChange",e)}},[a]),i.useEffect(()=>{let e=a.getTopmostFrameNode();s(e?a.nodeId(e):void 0)},[a]),o)?i.createElement(v,{key:o,nodeId:o,parentId:void 0,enabled:!0,focusRef:l,accessibilityScope:e,viewer:a}):null});function v({parentId:e,nodeId:r,enabled:n=!0,focusRef:a,accessibilityScope:o,viewer:s}){let l;let d=(0,p.W)(r,o),u=s.getPrototypeNode(r);if(!d||!u)return null;let{isClickable:m,tag:h="div",role:E,label:y}=d,b=S.get(h)||{};switch(s.nodeType(u)){case"TABLE":l=function(e,r){let n=e.nodeTableCells(r).map(r=>({text:e.nodeTableCellContent(r),pos:e.nodeDisplayBounds(r)})).sort((e,r)=>e.pos.x<r.pos.x?-1:1),a={};for(let e of n)a[e.pos.y]?a[e.pos.y].push(e):a[e.pos.y]=[e];let o=Object.keys(a).sort();return[i.createElement("div",{role:"rowgroup",key:"table-header"},a[o[0]].map((e,r)=>i.createElement("span",{key:`header-${r}`,role:"columnheader",style:{left:e.pos.x,top:e.pos.y,width:e.pos.width,height:e.pos.height}}))),i.createElement("div",{role:"rowgroup",key:"table-body"},o.map((e,r)=>i.createElement("div",{key:e,role:"row","aria-rowindex":r},a[e].map((r,n)=>i.createElement("span",{key:`${e}-${n}`,role:"cell",className:_,style:{display:"inline-block",left:r.pos.x,top:r.pos.y,width:r.pos.width,height:r.pos.height}},r.text)))))]}(s,u);break;case"TEXT":l=C(s.nodeText(u)||"",s.nodeLineData(u)||[],s.nodeCharacterStyles(u),s.navigateToFrameAndCloseOverlays);break;default:l=d.childIds.map(e=>i.createElement(v,{key:e,nodeId:e,accessibilityScope:o,focusRef:void 0,viewer:s,parentId:r}))}let w=s.nodeScrollBounds(u),A=e&&s.getPrototypeNode(e),N=!n&&"none"||A||"canvas",L=I(s,u,w?"scrollContainer":N),O=m?{onClick:e=>{(0,c.f)(c.h.PROTOTYPE_BUTTON_CLICKED,{isMouseEvent:e?.screenX!==0&&e?.screenY!==0}),s.nodeTriggerInteraction(u,"ON_CLICK")},onFocus:()=>void s.nodeHover(u),onBlur:()=>void s.nodeReverseHover(u)}:{},R=i.createElement(h,{className:!n&&g||!!w&&f||_,style:L,tabIndex:a?0:void 0,ref:a,role:E,key:r,"aria-label":y,...b,...O},l);return w&&(R=i.createElement(T,{displayRect:I(s,u,N),enabled:n,scrollRect:w,onScrolled:(e,r)=>s.nodeScrollTo(u,e,r),scrollAreaContent:R})),R}function T({displayRect:e,enabled:r,onScrolled:n,scrollRect:a,scrollAreaContent:o}){let s=i.useRef(null),l=i.useRef(!1),c=i.useCallback(e=>{let r=e.target;("number"==typeof r?.scrollLeft||"number"==typeof r?.scrollTop)&&(l.current?l.current=!1:n?.(r.scrollLeft*a.width/r.scrollWidth,r.scrollTop*a.height/r.scrollHeight))},[n,a.height,a.width]);return i.useEffect(()=>{let e=s.current;if(e)return e.addEventListener("scrollend",c),()=>e.removeEventListener("scrollend",c)},[c]),i.useEffect(()=>{let e=s.current;e&&(l.current=!0,a.width&&(e.scrollLeft=a.x*e.scrollWidth/a.width),a.height&&(e.scrollTop=a.y*e.scrollHeight/a.height))},[a.x,a.y,a.width,a.height]),i.createElement("div",{className:r?f:g,style:e,ref:s},o)}function I(e,r,n){switch(n){case"none":return{};case"canvas":{let{x:n,y:i,width:a,height:o}=e.nodeDisplayBounds(r);return{left:n,top:i,width:a,height:o}}case"scrollContainer":{let n=e.nodeCanvasSpaceBounds(r),i=e.nodeScrollBounds(r);if(!i)return{};{let e="100%",r="100%";return 0!==i.height&&(e=`${100*i.height/n.height}%`),0!==i.width&&(r=`${100*i.width/n.width}%`),{height:e,width:r}}}default:{let i=e.nodeCanvasSpaceBounds(n),a=e.nodeScrollBounds(n),o=e.nodeCanvasSpaceBounds(r),s=a?a.width:i.width,l=a?a.height:i.height,c=i.x,d=i.y,u=(o.x-c)/s,p=(o.y-d)/l,m=o.width/s,h=o.height/l;return{top:`${100*p}%`,left:`${100*u}%`,height:`${100*h}%`,width:`${100*m}%`}}}}let S=new Map([["form",{onSubmit:e=>e.preventDefault()}],["button",{type:"button"}],["input",{readonly:"readonly"}]]);class w{constructor(e){this.viewer=e,this.comparePayloads=void 0}id(e){return this.viewer.nodeId(e)}isRoot(e){let r=this.viewer.nodeParent(e);return!r||"CANVAS"===this.viewer.nodeType(r)}parent(e){let r=this.viewer.nodeParent(e),n=r&&this.viewer.nodeType(r);if("CANVAS"!==n&&"SECTION"!==n&&r)return r}interpret(e){return function(e,r){let n;let i=e.nodeInteractions(r),a=!!i.find(e=>"ON_CLICK"===e.trigger),o=!!i.find(e=>("URL"===e.to||"INTERNAL_NODE"===e.to)&&"NAVIGATE"===e.type&&"ON_CLICK"===e.trigger),s=!!e.nodeScrollBounds(r),l=e.getTopmostFrameNode()===r,c=!e.nodeVisible(r),{tag:d,role:u,label:p}=function({tag:e,role:r,label:n}){let i,a,o;return e&&"AUTO"!==e&&(i=e.toLowerCase()),r&&"AUTO"!==r&&(a=r.toLowerCase()),n&&""!==n&&(o=n),{tag:i,role:a,label:o}}(e.nodeAccessibilityProperties(r)),h=d||u||p?m.vF.INCLUDE:void 0;if(c)void 0===h&&(h=m.vF.OMIT),h=void 0===h?m.vF.OMIT:h,d="div";else if(a){if(void 0===h&&(h=m.vF.INCLUDE),d||="button",o&&(u||="link"),!e.nodeText(r)){let i=e.nodeName(r);n=(e,r)=>r.length?{...e,childIds:r}:{...e,label:i,childIds:r}}}else{let i=e.nodeType(r);switch((l||a||s)&&void 0===h&&(h=m.vF.INCLUDE),i){case"FRAME":if(l)d||="article",p||=e.nodeName(r),void 0===h&&(h=m.vF.INCLUDE);else{if(d||="div",!u&&A(e,r)){let i=e.nodeName(r);n=(e,r)=>r.length?{...e,childIds:r}:{...e,inclusion:m.vF.INCLUDE,role:"img",label:e.label||i,childIds:r}}void 0===h&&(h=m.vF.CHILDREN)}break;case"BOOLEAN_OPERATION":case"STAR":case"LINE":case"ELLIPSE":case"RECTANGLE":case"REGULAR_POLYGON":case"ROUNDED_RECTANGLE":case"VECTOR":A(e,r)?(d||="div",u||="img",p||=e.nodeName(r),void 0===h&&(h=m.vF.INCLUDE)):(d||="div",void 0===h&&(h=m.vF.OMIT));break;case"SYMBOL":case"INSTANCE":d||="article",void 0===h&&(h=m.vF.INCLUDE),p||=e.nodeName(r);break;case"TEXT":d||="p",void 0===h&&(h=m.vF.INCLUDE);break;case"TABLE":d||="div",u||="table",void 0===h&&(h=m.vF.INCLUDE);break;case"TABLE_CELL":d||="td",void 0===h&&(h=m.vF.OMIT);break;default:d||="div",void 0===h&&(h=m.vF.INCLUDE),n=(e,r)=>(h=r.length?m.vF.INCLUDE:m.vF.OMIT,{...e,inclusion:h,childIds:r})}}let _={inclusion:h,tag:d,role:u,label:p,isClickable:a};return n?.bind(null,_)??_}(this.viewer,e)}children(e){return this.viewer.mapChildren(e,e=>e)}}function A(e,r){let n=e.nodeFillTypes(r);return 1===n.length&&"IMAGE"===n[0]}function C(e,r,n,a){let s=e.split(/\n/mu),l=[];function c(e){for(;l.length>e+1;){let e,r;let[n,a]=l.pop();switch(n){case"UNORDERED_LIST":e="ul",r="li";break;case"ORDERED_LIST":e="ol",r="li";break;default:e="p",r="span"}l[l.length-1][1].push(i.createElement(e,{key:l[l.length-1][1].length},a.map((e,n)=>i.createElement(r,{key:n},e))))}}let d=0;for(let e=0;e<s.length;e++){let u=s[e],p=r[e]||{type:"PLAIN",indentLevel:0};for("PLAIN"===p.lineType&&(p.indentLevel=0),c(p.indentLevel),l.length>1&&l[l.length-1][0]!==p.lineType&&c(p.indentLevel-1);l.length<p.indentLevel+1;)l.push([p.lineType,[]]);l[l.length-1][1].push(function(e,r){let s=[];for(let l of n){let{start:n,end:c,props:d}=l,u=[...r].length;if(n>e+u)break;if(c<=e)continue;n=Math.max(0,n-e),c=Math.min(u,c-e);let p=RegExp(`(?:[^]{${n}})([^]{${c-n}})`,"u"),m=r.match(p)?.[1],h=d?.get?.("HYPERLINK"),_=d?.get?.("FONT_STYLE"),g=_?.toLowerCase()?.includes("italic"),f=_?.toLowerCase()?.includes("bold"),E=d?.get?.("FONT_SIZE"),y=d?.get?.("TEXT_DECORATION"),b={fontWeight:f?"bold":void 0,fontStyle:g?"italic":void 0,fontSize:E?`${E}px`:void 0,textDecoration:new Map([["UNDERLINE","underline"],["STRIKETHROUGH","line-through"]]).get(y)};if("string"==typeof h?.url)s.push(i.createElement(o._,{key:n+e,style:b,href:h.url,newTab:!0,trusted:!0},m));else if(a&&"object"==typeof h?.guid){let r=h.guid;s.push(i.createElement("button",{key:n+e,type:"button",role:"link",onClick:()=>a(`${r.sessionID}:${r.localID}`)},m))}else f||g||E||y?s.push(i.createElement("span",{key:n+e,style:b},m)):s.push(m)}return s}(d,u)),d+=u.length+1}return c(0),l[0][1].map((e,r)=>"string"!=typeof e?e:i.createElement("p",{key:r},e))}},105510:(e,r,n)=>{n.d(r,{Bt:()=>a,IO:()=>o,nO:()=>i});let i="prototyping-auth-comments-modal",a="prototype-comments-view",o="prototype-sidebar-panel"},953600:(e,r,n)=>{n.d(r,{F:()=>f});var i=n(848318),a=n(716544),o=n(442313),s=n(884060),l=n(449737),c=n(604613),d=n(181427),u=n(197925),p=n(834996),m=n(562688),h=n(33668),_=n(161922),g=n(744075);function f(e){let{nodeId:r,clientX:n,clientY:f,prototypeUrl:E,fileKey:y,startingPointsData:b}=e,v=(0,p.mr)(),T=(0,a.wA)(),I=(0,u.p)(),{showHotspots:S,showProtoSidebar:w,scalingInfo:A}=v,C=(0,m.b)(I,m.d.PROTOTYPE_FLOW_CONTEXT_MENU),N=(e,r)=>{let n=(0,h.vp)({scalingInfo:A,nodeId:e,startingPointNodeId:e,showHotspots:S,showProtoSidebar:w},null,null,C);T(s.S({fileKey:y,source:m.d.PROTOTYPE_FLOW_CONTEXT_MENU,url:`${r}${n}`,visualBellMessageOverride:(0,d.dE)({startingPointNodeId:e,startingPointsData:b}),visualBellButton:{text:(0,o.t)("permissions.copy_link_button.visual_bell.see_link_settings"),action:()=>{T((0,l.to)({type:g.g_,data:{fileKey:y,source:d.nk.prototypeCopyLinkButtonVisualBell}}))}}}))},L=[{displayText:(0,o.t)("viewer.flows_sidebar.copy_link_to_flow"),callback:()=>N(r,E)}];return i.createElement("div",{className:`${c.Dm}`},i.createElement(_.j,{dispatch:T,items:L,parentRect:{width:10,height:10,left:n+100,top:f,right:n+110,bottom:f-10},onSelectItem:e=>{e.callback&&e.callback("",null,T)},showPoint:!1}))}},250824:(e,r,n)=>{n.d(r,{e:()=>d});var i=n(98993),a=n(857188),o=n(831932),s=n(889132),l=n(152737);let c=class e{constructor(r,n){this._isUIShown=r,this._inCommentsMode=!1,this._rcsUserFlags=[],this._hideUITask=new i.W,this.handleProgressBarStoppedShowing=()=>{this.showUiAndScheduleFade()},this.onWindowFocus=()=>{this.showUiAndScheduleFade()},this.didEnterCommentsMode=()=>{this._hideUITask.reset(),this._setUIShown(!0),this._inCommentsMode=!0},this.didLeaveCommentsMode=()=>{this._inCommentsMode&&(this._inCommentsMode=!1,this.showUiAndScheduleFade())},this.didRscUserFlagsUpdate=e=>{this._rcsUserFlags=e},this.handleUnhideUI=()=>{this.showUiAndScheduleFade()},this.handlePageMouseDownOrTouchStart=e=>{"CURRENT_TLF"===e.type||"DEVICE_FRAME"===e.type?this._setUIShown(!1):"PROTOTYPE_BACKGROUND"===e.type&&(this._hideUITask.reset(),this._isUIShown()?this._setUIShown(!1):this.showUiAndScheduleFade())},this.handleHotspotClicked=()=>{this._setUIShown(!1)},this.handlePageMouseMove=(e,r)=>{let n=e.clientY,i=window.innerHeight-e.clientY,a=85>Math.abs(window.innerWidth/2+r/2-e.clientX)&&i<60;n<(0,s.bG)()?this.showUiAndScheduleFade():a?this.showUiAndScheduleFade():this.scheduleFadeIfNecessary()},this.handleHeaderOrFooterMove=e=>{this._hideUITask.reset(),this._isUIShown()||this._setUIShown(!0),e.stopPropagation()},this.handleHeaderOrFooterBlur=e=>{this.scheduleFadeIfNecessary()},this.handleHeaderOrFooterFocus=e=>{this._hideUITask.reset(),this._setUIShown(!0)},this.handleKeyDown=(e,r)=>{(r&&this._isUIShown()||e.keyCode===a.Uz.ESCAPE)&&this.showUiAndScheduleFade()},this.teardown=()=>{this._hideUITask.reset()},this.showUiAndScheduleFade=()=>{this._isUIShown()||this._setUIShown(!0),this._hideUITask.reset(),this.scheduleFadeIfNecessary()},this.scheduleFadeIfNecessary=()=>{this._hideUITask.isScheduled()||this._hideUITask.scheduleOnce(()=>{this._setUIShown(!1)},e.FADE_DELAY_MS)},this._setUIShown=r=>{let i=!r&&this._inCommentsMode,a=!r&&this._rcsUserFlags.reduce((r,n)=>r||e.RCS_SHOWN_ON_UI.has(n),!1);i||a||n(r)}}};c.FADE_DELAY_MS=o.rr?1e3:2e3,c.RCS_SHOWN_ON_UI=new Set([l.e]);let d=c},281441:(e,r,n)=>{n.d(r,{Y9:()=>eo});var i=n(848318),a=n(716544),o=n(67074),s=n(376025),l=n(792978),c=n(609697),d=n(644388),u=n(749214);let p=(0,i.memo)(function(e){return(0,u.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,u.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10 6h9a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-9zM9 6H5a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h4zM3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",clipRule:"evenodd"})})});var m=n(964102),h=n(417209),_=n(157907),g=n(39773),f=n(536384),E=n.n(f),y=n(514375),b=n(322035),v=n(543072),T=n(420216),I=n(44509),S=n(691191),w=n(303035),A=n(308746),C=n(654104),N=n(808471),L=n(182059),O=n(166365);n(93600);let R={"data-fpl-audit-approved":""};var P=n(442313),D=n(697714),M=n(972574),k=n(790355),F=n(667323),x=n(652402),U=n(423253),B=n(244767),V=n(719244),G=n(474880);n(208649);var H=n(950738),K=n(834996),W=n(661780),z=n(216986),$=n(503024),Y=n(300612),j=n(733166),q=n(304713),X=n(105510),Z=n(554974),J=n(33927),Q=n(721449),ee=n(454783),et=n(898474),er=n(688699);let en="PROTOTYPE_SETTINGS_DROPDOWN",ei="proto_header_options_dropdown",ea=(0,G.ck)();function eo(e){let{prototype:r,file:n,shouldShowUI:l,recordingKey:d,optionsMenu:u,isCommentsDisabled:p}=e,m=(0,a.wA)(),h=(0,W.iZ)(),f=(0,H.Um)(),y=(0,K.mr)(),S=(0,B.Fy)(),w=i.useRef(null),L=i.useRef(null),O=e=>{e.preventDefault(),m((0,z._P)({name:"Prototype Logo Clicked"})),m((0,F.eH)())},D=(e,r)=>w.current&&w.current.getBoundingClientRect().width<970?e:r,M=!!h&&n.canView,U=b.GZ()&&!(0,N.nl)(),V=U&&null==(0,A.qg)(I.Ay.location.search).fullscreen,G=window.matchMedia("(max-width:830px)").matches&&!(0,N.PN)(),$=ee.wx;if(V&&!ea){let r=(0,v.sN)(v.Uv,(0,v.HL)(e.prototypeBGColor));$=(0,v.HD)(r)?ee.RA:ee.cZ}let J=!!f&&f.type===en,et=(0,g.md)(Z.jH),er=(0,g.md)(Z.M);return l&&r.showProgressBar?i.createElement(el,{onClickLogo:O}):i.createElement(i.Fragment,null,i.createElement("div",{className:E()($,{[ee.Wc]:e.shouldHideHeader&&"loading"!==er&&!et,[ee.G2]:e.sidebarData.isSidebarOpen||e.isCommentsSidebarOpen}),ref:w,...R,role:"region","aria-label":(0,P.t)("viewer.menu_bar.accessible_label"),onBlurCapture:e.onBlurCapture,onFocusCapture:e.onFocusCapture,onMouseMove:e.onMouseMove,onMouseDown:e=>{e.stopPropagation()}},i.createElement("div",{className:ee.Cd},!U&&i.createElement(ed,{recordingKey:C.Pt(d,"accessibility-button"),setAccessibilityTreeFocus:e.setAccessibilityTreeFocus}),i.createElement(es,{onClickLogo:O}),!U&&e.startingPointsData&&e.startingPointsData?.length>0&&i.createElement("div",{ref:L},i.createElement(ep,{setShowSidebar:e.sidebarData.setShowSidebar,isSidebarOpen:!!y.showProtoSidebar,sidebarId:e.sidebarData.sidebarId})),(!U||ea)&&i.createElement(eu,{recordingKey:C.Pt(d,"comments-button"),selected:e.prototype.showComments,onClick:h?()=>{r.showComments?m(x.BZ()):p||m(x._b())}:e.showAuthCommentsModal,targetId:h?X.Bt:X.nO,disabled:p})),i.createElement("div",{className:ee.SP},!U&&!1,!U&&i.createElement("h1",{className:M?ee.Ou:ee.DD,dir:"auto"},n.name),U&&i.createElement("h1",null,i.createElement(o._,{newTab:!0,trusted:!0,className:ee.DD,href:`/proto/${n.key}`},n.name)),!U&&M&&i.createElement("div",{className:ee.hg},i.createElement(s.E,{"aria-label":(0,P.t)("proto.options_dropdown"),"aria-expanded":J,"aria-haspopup":"menu","aria-controls":J?ei:void 0,onClick:e=>{e.stopPropagation(),J?m(k.oB()):m(k.j7({type:en}))},className:ee.pz},i.createElement(c.k,null)),J&&i.createElement(ec,{viewer:e.viewer||null,file:n}))),i.createElement("div",{className:ee.DK},(0,_.k)().prototype_preload_offline&&i.createElement(Z.ez,null),(!U||ea)&&e.multiplayer&&!e.shouldHideHeader&&i.createElement(j.Cv,{dropdownShown:f,multiplayer:e.multiplayer,user:h}),(!U||ea)&&i.createElement(Q.Ay,{user:h,shareText:D((0,P.t)("viewer.menu_bar.share"),(0,q.f)(e.file.editorType)?(0,P.t)("viewer.menu_bar.share_presentation"):(0,P.t)("viewer.menu_bar.share_prototype")),loginText:D((0,P.t)("viewer.menu_bar.log_in"),(0,P.t)("viewer.menu_bar.log_in_or_create_account")),file:n}),!G&&u,!ea&&i.createElement(em,{inFullScreenMode:e.inFullScreenMode,dispatch:m}))),!U&&!ea&&!h&&!y.hideUI&&S()&&i.createElement(Y.PQ,{origin:T.DT.PROTOTYPE,hideOnMobile:!0,overrideUseFedCMPrompt:!1}))}function es(e){let r=b.GZ()&&!ea&&null==(0,A.qg)(I.Ay.location.search).fullscreen,n=ee.UF;return r&&(n=ee.m_),i.createElement("div",{className:n},i.createElement(l.N,{href:"/",onClick:e.onClickLogo,"aria-label":(0,P.t)("proto.file_browser")},r&&i.createElement(O.B,{svg:er.A}),!r&&i.createElement(O.B,{svg:et.A,useOriginalSrcFills_DEPRECATED:!0})))}function el(e){return i.createElement("div",{className:ee.uH},i.createElement(es,{onClickLogo:e.onClickLogo}))}function ec(e){let{viewer:r,file:n}=e,o=(0,a.wA)(),[s,l]=(0,J.nN)(),c=r?.getBaseScreenId(),d=`/file/${n.key}/${encodeURIComponent(n.name)}?node-id=${c}`;return s&&l&&(d+=`&prev-plan-id=${s}&prev-plan-type=${l}`),i.createElement("div",{className:ee.fh},i.createElement(L.X3,{id:ei,hideDropdown:()=>o(k.oB()),options:[i.createElement(L.c$,{key:"open-in-editor",href:d,onMouseDown:()=>{o((0,z._P)({name:"Prototype Original Source Clicked"}))}},(0,P.tx)("viewer.menu_bar.open_in_editor"))]}))}function ed({setAccessibilityTreeFocus:e,recordingKey:r}){let n=i.useRef(null),[o,s]=i.useState(!1),{width:l}=(0,S.wY)(n)??S.cU,c=i.useCallback(()=>s(!0),[]),d=i.useCallback(()=>s(!1),[]),u=(0,a.wA)(),p=(0,V.e)(),m=e=>{u(D.F.enqueue({type:"accessibility-dom-enabled",role:"status",get message(){return e?(0,P.t)("viewer.options.accessible_dom_enabled"):(0,P.t)("viewer.options.accessible_dom_disabled")}})),u((0,U.X7)({enabled:e,scope:"SESSION"}))},h=C.rf(r,"click",r=>{(0,y.f)(p?y.h.SKIP_TO_CONTENT:y.h.ENABLE_AND_SKIP_TO_CONTENT,{isMouseEvent:r?.screenX!==0&&r?.screenY!==0}),m(!0),e(!0)});return i.createElement("div",{ref:n,className:ee.ts,style:o?void 0:{marginLeft:-l}},i.createElement("button",{className:ee.O6,onClick:h,onFocus:c,onBlur:d},(0,P.tx)("proto.header.skip_to_content")))}class eu extends C.o6{constructor(){super(...arguments),this.onClick=C.cZ(this,"click",()=>{this.props.onClick()})}render(){return i.createElement(s.E,{onClick:this.onClick,"aria-label":(0,P.t)("proto.comment"),"aria-controls":this.props.targetId,className:E()(this.props.selected&&!this.props.disabled?ee.WB:ee.zQ,{[ee.r9]:this.props.disabled}),htmlAttributes:{"data-tooltip-type":$.Ib.TEXT,"data-testid":"prototype-header-comments-button","data-tooltip":this.props.disabled?(0,P.t)("fullscreen_actions.comments-disabled"):(0,P.t)("viewer.menu_bar.add_comment",{padding:"    ",shortcut:"C"}),"data-onboarding-key":"prototype-comment"}},i.createElement(d.f,{className:E()({[ee.WO]:this.props.disabled})}))}}function ep(e){let r=C.rf(e.recordingKey,"click",r=>{e.setShowSidebar(!e.isSidebarOpen)});return i.createElement(s.E,{htmlAttributes:{"data-tooltip-type":$.Ib.TEXT,"data-tooltip":`${e.isSidebarOpen?(0,P.t)("viewer.flows_sidebar.close_sidebar"):(0,P.t)("viewer.flows_sidebar.open_sidebar")}`},onClick:r,"aria-label":(0,P.t)("proto.flows"),"aria-controls":e.sidebarId,className:ee.e3},i.createElement(p,null))}eu.displayName="ToggleCommentsButton";class em extends i.PureComponent{constructor(){super(...arguments),this.onClick=b.R7.fullscreen?()=>{this.props.dispatch((0,M._M)())}:w.lQ}render(){let e;let r=b.R7.fullscreen;return e=r?this.props.inFullScreenMode?(0,P.t)("viewer.menu_bar.exit_full_screen",{shortcut:"F"}):(0,P.t)("viewer.menu_bar.enter_full_screen",{shortcut:"F"}):(0,P.t)("viewer.menu_bar.full_screen_is_not_supported_by_this_browser"),i.createElement(s.E,{"aria-label":e,className:this.props.classNameOverride||(b.R7.fullscreen?ee.Yd:ee.E1),disabled:!r,onClick:this.onClick,htmlAttributes:{"data-tooltip-type":$.Ib.TEXT,"data-tooltip":e}},this.props.inFullScreenMode?i.createElement(m.p,null):i.createElement(h.O,null))}}em.displayName="ToggleFullScreenButton"},656135:(e,r,n)=>{n.d(r,{HS:()=>g,hF:()=>b,l5:()=>p,xY:()=>m});var i=n(716544),a=n(445777),o=n(741419);n(442313),n(697714);var s=n(927589),l=n(992444),c=n(241917),d=n(6760),u=n(103846),p=(e=>(e[e.DEVICE=0]="DEVICE",e[e.WEBSITE=1]="WEBSITE",e[e.SMALL=2]="SMALL",e))(p||{});function m(e){return"fullscreen"===e.selectedView.view&&(e.selectedView.editorType===c.nT.Design||e.selectedView.editorType===c.nT.DevHandoff||e.selectedView.editorType===c.nT.Slides)}let h=16/9,_=(e,r)=>{let n=r.getCurrentPage();if(!n)throw Error("Expected currentPage to exist");let{prototypeDevice:i}=n;return i?i.type===o.XQq.PRESENTATION?{x:e.absoluteBoundingBox.w,y:e.absoluteBoundingBox.h}:i.type===o.XQq.NONE?null:i.rotation===o.xOL.NONE?i.size:{x:i.size.y,y:i.size.x}:null};function g(e,r){let n=_(r,e);return n?{type:0,...n}:r.absoluteBoundingBox.w>=1280?{type:1}:{type:2}}function f(e,r){return(e.getCurrentPage()?.prototypeDevice?.rotation??o.xOL.NONE)===o.xOL.NONE?{x:104,y:20+(r?d.uF:0)}:{x:104,y:104}}let E=(e,{x:r,y:n},i)=>{let a=n/e.y,o=Math.min(a,r/e.x),{x:s,y:l}=f(i);if(o<1){if(o===a){if(Math.max(e.x*o,s)!==s)return{x:e.x*o,y:e.y*o};{let r=s/e.x;return{x:s,y:e.y*r}}}if(Math.max(e.y*o,l)!==l)return{x:e.x*o,y:e.y*o};{let r=l/e.y;return{x:e.x*r,y:l}}}return e},y=(e,{x:r,y:n},i)=>{let{x:a,y:o}=f(i),s=o/e.y,l=Math.max(s,a/e.x);if(l>1){if(l===s){if(Math.min(e.x*l,r)!==r)return{x:e.x*l,y:e.y*l};{let n=r/e.x;return{x:r,y:e.y*n}}}if(Math.min(e.y*l,n)!==n)return{x:e.x*l,y:e.y*l};{let r=n/e.y;return{x:e.x*r,y:n}}}return e};function b(e,r,n,o,c){let p=c.get(o);(0,a.vA)(!!p,"expected node to exist");let m=g(c,p);if(e&&(0,i.bN)(e.breakpoint,m)&&!r)return e;let _=l.Y5.getViewportInfo(),f=_.height-d.uF-32,b=Math.max(.5*_.width,104),v=(0,u.$W)(c),T=!!v&&(0,s.L_)(v);if(!(0===m.type&&n&&T)){let e=E(function(e,r){switch(e.type){case 0:return{x:e.x,y:e.y};case 1:return{x:r.absoluteBoundingBox.w,y:r.absoluteBoundingBox.w/h};case 2:return{x:r.absoluteBoundingBox.w,y:r.absoluteBoundingBox.h};default:(0,a.xb)(e)}}(m,p),{x:b,y:f},c);return{initialViewerSize:e=y(e,{x:b,y:f},c),breakpoint:m}}let I=c.getCurrentPage()?.prototypeDevice?.rotation;(0,a.B1)(I,"expected device rotation to exist");let{idealDeviceSize:S,framePresetSize:w}=(0,u.is)(v,I),A=E(S,{x:b,y:f},c);return A=y(A,{x:b,y:f},c),{initialViewerSize:(0,u.BX)(A,w,S),breakpoint:m}}},103725:(e,r,n)=>{n.d(r,{y:()=>S});var i=n(848318),a=n(716544),o=n(157907),s=n(983229),l=n(705694),c=n(182059),d=n(166365),u=n(442313),p=n(790355),m=n(79400);let h="internal_debug_tools--button--3-eAq";var _=n(825840),g=n(204638),f=n(769773),E=n(231206),y=n(1757),b=n(954184),v=n(35715),T=n(643112);let I="PROTOTYPE_DEBUG_TOOLS_MENU";function S(e){let r=(0,a.d4)(e=>e.dropdownShown),n=(0,a.wA)(),S=r?.type===I,[,w]=i.useState({}),A=i.useCallback(()=>w({}),[]),{viewer:C}=e,[N,L]=i.useState(!1),[O,R]=i.useState(!1);return(0,o.k)().internal_prototyping_debug_tool?i.createElement("div",{className:"internal_debug_tools--debugContainer--CtxqL"},i.createElement(s.D8,{className:"internal_debug_tools--dropdownMenu--D-LuC",onClick:function(e){e.stopPropagation(),S?n(p.oB()):n(p.j7({type:I}))}},i.createElement("div",{className:"internal_debug_tools--dropdownMenuButton--5NXqo"},i.createElement("span",null,(0,u.tx)("viewer.debug_tools.debug_tools")),i.createElement("div",{className:"internal_debug_tools--buttonChevron--l5X4a"},i.createElement(d.B,{svg:f.A}))),S&&i.createElement(c.ms,{className:"internal_debug_tools--dropdown--5KC-1"},i.createElement(c.c$,{onClick:()=>{C?.isConnected()?C?.disconnectForTesting():C?.reconnectForTesting(),A()}},C?.isConnected()?(0,u.t)("viewer.debug_tools.disconnect_from_multiplayer"):(0,u.t)("viewer.debug_tools.reconnect_to_multiplayer")),i.createElement(c.c$,{onClick:()=>{(0,m.v)(!1);let e=document.getElementById("viewer_debug_stats");e?e.remove():C?(0,l.FL)(C):console.error("Viewer object doesn't exist")}},(0,u.tx)("viewer.debug_tools.toggle_debug_stats")),i.createElement(c.c$,{onClick:()=>window.testFakeLostContext?.()},(0,u.tx)("viewer.debug_tools.test_fake_web_gl_context_loss")),i.createElement(c.c$,{onClick:()=>window.testRealLostContext?.()},(0,u.tx)("viewer.debug_tools.test_real_web_gl_context_loss")),i.createElement(c.c$,{onClick:()=>{C?.takeSpectorSnapshot()}},(0,u.tx)("viewer.debug_tools.take_spector_snapshot")),i.createElement(c.c$,{onClick:()=>{C?.clearTileCachesAndTakeSpectorSnapshot()}},(0,u.tx)("viewer.debug_tools.clear_tile_caches_and_take_spector_snapshot")),i.createElement(c.c$,{onClick:()=>{C&&(N?(C.renderLayerByLayerDeactivate(),L(!1),R(!1)):(C.renderLayerByLayerActivate(),L(!0)))}},(0,u.tx)("viewer.debug_tools.render_layer_by_layer")),i.createElement(c.c$,{onClick:()=>{C?.toggleRenderTreePrinting()}},(0,u.tx)("viewer.debug_tools.toggle_render_tree_printing")))),N?i.createElement("div",{className:"internal_debug_tools--layerByLayerRenderingControls--Oj1Jd"},i.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerRewind()}},i.createElement(d.B,{svg:v.A})),i.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerBackward()}},i.createElement(d.B,{svg:_.A})),O?i.createElement("button",{className:h,onClick:()=>{C&&O&&(C.renderLayerByLayerPause(),R(!1))}},i.createElement(d.B,{svg:T.A})):i.createElement("button",{className:h,onClick:()=>{C&&!O&&(C.renderLayerByLayerPlay(),R(!0))}},i.createElement(d.B,{svg:y.A})),i.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerForward()}},i.createElement(d.B,{svg:E.A})),i.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerDecreaseSpeed()}},i.createElement(d.B,{svg:g.A})),i.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerIncreaseSpeed()}},i.createElement(d.B,{svg:b.A}))):null):null}},845262:(e,r,n)=>{n.d(r,{i:()=>g});var i=n(848318),a=n(468189),o=n(356505),s=n(579020),l=n(44509),c=n(831932),d=n(705694),u=n(166365),p=n(442313),m=n(386608),h=n(699531);function _(){let e=(0,m.b0)();return i.createElement("button",{type:"button",className:"loading_state_overlay--offlineSecondaryAction--tZCt4",onClick:()=>{e?location.reload():l.Ay.reload("The viewer is taking a long time to load.")}},(0,p.tx)("viewer.loading_overlay.reload"))}function g(e){let r=(()=>{let r=e.viewerEl?.getBoundingClientRect();return{top:r?.top||0,left:r?.left||0,width:r?.width||0,height:r?.height||0}})(),[n,l]=i.useState("LOADED"),[g,f]=i.useState(null),[E,y]=i.useState(null),[b,v]=i.useState(null),T=(0,m.b0)(),I=i.useCallback(e=>{"LOADED"!==e&&"SHORT_LOADING"!==e&&s.az.trackDefinedEvent("prototype.viewer_overlay_state",{overlayState:e,isInEmbed:(0,m.dH)(),isMirror:(0,c.Ji)(),isInlinePreview:T,interactionId:g||"",interactionCause:E||"",destinationId:b||""}),l(e)},[T,g,E,b]),S=i.useRef(null);return(i.useEffect(()=>{S.current&&clearTimeout(S.current),"SHORT_LOADING"===n?S.current=setTimeout(()=>{I("LONG_LOADING")},700):"LONG_LOADING"===n&&(S.current=setTimeout(()=>{navigator.onLine?I("LOADING_ERROR"):I("CONNECTION_ERROR")},1e4))},[n,I]),d.O5(e.viewer,"requestedStateChange",e=>{S.current&&clearTimeout(S.current),I("SHORT_LOADING"),e&&(y(e.cause),v(e.destinationId),f(e.interactionId))}),d.O5(e.viewer,"requestedStateChangeInitiated",()=>{S.current&&clearTimeout(S.current),I("LOADED")}),"LOADED"===n||"SHORT_LOADING"===n)?null:i.createElement("div",{className:"loading_state_overlay--overlayContainer--egThs"},r&&i.createElement("div",{className:"loading_state_overlay--contentContainer--20M6N",style:{...r}},"LONG_LOADING"===n?i.createElement(a.k,null):"LOADING_ERROR"===n?i.createElement("div",{className:"loading_state_overlay--longLoadingContainer--FQgxf"},i.createElement(a.k,null),i.createElement("div",{className:"loading_state_overlay--longLoadingHelperText--Vp9LZ text--fontPos12--YsUAh text--_fontBase--QdLsd"},(0,p.tx)("viewer.loading_overlay.this_is_taking_some_time_hang_on_while_this_finishes_loading")),i.createElement(_,null)):"CONNECTION_ERROR"===n?i.createElement("div",{className:"loading_state_overlay--offlineContainer--TMfk0"},i.createElement(u.B,{className:"loading_state_overlay--offlineSvg--GHCgu",svg:h.A}),i.createElement("div",{className:"loading_state_overlay--offlineTextContainer--kn7QV"},i.createElement("div",{className:"loading_state_overlay--offlineTitle--6hlCW text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,p.tx)("viewer.loading_overlay.can_t_connect_to_the_internet")),i.createElement("div",{className:"loading_state_overlay--offlineHelperText--qBa0p text--fontPos12--YsUAh text--_fontBase--QdLsd"},(0,p.tx)("viewer.loading_overlay.check_your_connection_to_continue_with_the_prototype"))),i.createElement("div",{className:"loading_state_overlay--offlineButtonContainer--MyWop"},i.createElement(o.$n,{variant:"primary",onClick:()=>I("LONG_LOADING")},(0,p.tx)("viewer.loading_overlay.try_again")),i.createElement(_,null))):void 0))}},218130:(e,r,n)=>{n.d(r,{Ag:()=>$});var i=n(848318),a=n(716544),o=n(445777),s=n(376025),l=n(198627),c=n(857625),d=n(395778),u=n(860141),p=n(162013),m=n(25651),h=n(157907),_=n(39773),g=n(536384),f=n.n(g),E=n(322035),y=n(44509),b=n(831932),v=n(308746),T=n(654104),I=n(808471),S=n(166365),w=n(566699),A=n(442313),C=n(790355),N=n(449737),L=n(927589),O=n(834996),R=n(216986),P=n(269898),D=n(662653),M=n(161922),k=n(554974),F=n(386608),x=n(33927),U=n(454783),B=n(784500),V=n(769773),G=n(205658),H=n(679914),K=n(150813),W=n(542365),z=n(63815);function $({device:e,showHotspots:r,showPrototypeOptions:n,showDeviceFrame:g,setHideUI:$,recordingKey:Y,dropdownShown:j,isFooter:q}){let X=E.GZ()&&!(0,I.nl)()&&null==(0,v.qg)(y.Ay.location.search).fullscreen,Z=(0,O.mr)(),J=(0,a.wA)(),Q=i.useRef(null),ee=(0,_.md)(F.Bf),et=(0,k.s7)(),er=(0,b.o4)(),en=null!=e&&"PRESET"===e.type;(0,o.vA)(!q||en);let ei=!q&&en,ea=q&&en,eo=n&&!ei,es=en&&!ea,el=!ea,ec=!ea&&!er,ed=ea?"PROTOTYPE_OPTIONS_MENU_FOOTER":"PROTOTYPE_OPTIONS_MENU",eu=j&&j.type===ed;function ep(e){e.stopPropagation(),eu?J(C.oB()):J(C.j7({type:ed,data:{position:Q.current?.getBoundingClientRect()}}))}let em=(0,R.M9)(Z),eh=eo?(function(e,r,n,a,o,s,d){let h=(0,F.Pz)(o,n),_=(0,F.Ac)(r,h),g=(h.findIndex(e=>e.scalingOptionId===_)+1)%h.length,f=h[g],E=n=>(function({option:e,currentScalingInfo:r,scalingHandlerOverride:n,recordingKey:a,showShortcut:o,dispatch:s,isFooter:d}){let h=(0,F.Ac)(r,[e]);return{displayText:(0,F.GP)(e.scalingOptionId,d),isChecked:h===e.scalingOptionId,callback:()=>n?n(e):void s((0,R.Jr)({...e.scalingInfo,userInitiated:!0,source:"presentation"})),recordingKey:a,shortcut:o?"Z":void 0,icon:d?void 0:function(e){switch(e){case F.IK.FIT_TO_SCREEN:return i.createElement(w.U,{svg:K.A,className:B.Fp},i.createElement(u.H,null));case F.IK.FIT_WIDTH:return i.createElement(w.U,{svg:W.A,className:B.Fp},i.createElement(p.v,null));case F.IK.FILL_SCREEN:return i.createElement(w.U,{svg:H.A,className:B.Fp},i.createElement(m.m,null));case F.IK.ACTUAL_SIZE:return i.createElement(w.U,{svg:G.A,className:B.Fp},i.createElement(l.O,null));case F.IK.RESPONSIVE:return i.createElement(w.U,{svg:z.A,className:B.Fp},i.createElement(c.V,null));default:return}}(e.scalingOptionId),unsetStrokeOnActiveOption:!0,name:e.scalingOptionId}})({dispatch:e,option:n,showShortcut:n.scalingOptionId===f.scalingOptionId,currentScalingInfo:r,scalingHandlerOverride:s,recordingKey:T.Pt({recordingKey:a},`option-${(0,F.Ti)(n.scalingOptionId)}`),isFooter:d});if(!(n!==F.Yu.DEFAULT&&!d&&h.length>=4))return h.map(e=>E(e));{let e=h.slice(0,2).map(e=>E(e)),r=h.slice(2).map(e=>E(e));return[{disabled:!0,displayText:(0,A.t)("viewer.options_menu.recommended_scaling_options")},...e,{disabled:!0,displayText:(0,A.t)("viewer.options_menu.other_scaling_options")},...r]}})(J,em,ee,Y,e?.type,void 0,q).concat(P.w):[],e_=function(){let e=!!(0,O.mr)().disableDefaultKeyboardNav,r=F.pw();return{displayText:(0,A.t)("viewer.options_menu.disable_default_keyboard_navigation_v1"),isChecked:!e,callback:function(){r(!e)}}}(),eg=e=>{e!==em.contentScalingMode&&J((0,R.Jr)({contentScalingMode:e,userInitiated:!0,source:"presentation"}))},ef=[{displayText:(0,A.t)("viewer.options_menu.fixed_size"),icon:i.createElement(w.U,{svg:G.A,className:B.Fp},i.createElement(l.O,null)),isChecked:"responsive"!==em.contentScalingMode,callback:()=>eg("fixed"),recordingKey:"fixed",unsetStrokeOnActiveOption:!0},{displayText:(0,A.t)("viewer.options_menu.responsive"),icon:i.createElement(w.U,{svg:z.A,className:B.Fp},i.createElement(c.V,null)),isChecked:"responsive"===em.contentScalingMode,callback:()=>eg("responsive"),recordingKey:"responsive",unsetStrokeOnActiveOption:!0},P.w],eE=function(e,r,n,i,a,{hideHotspots:o,hideDeviceFrame:s}={}){let l=[];return o||l.push({displayText:(0,A.t)("viewer.options_menu.show_hints_on_click"),isChecked:e,callback:function(){a((0,R.KJ)({showHotspots:!e}))},"data-onboarding-key":"toggleHotspots"}),s||l.push({displayText:(0,A.t)("viewer.options_menu.show_device_frame"),isChecked:n,callback:function(){a((0,R.t0)({showDeviceFrame:!n}))},recordingKey:"option-toggle-device-frame",hidden:!i,"data-onboarding-key":"toggleDeviceFrame"}),r?l:[]}(r,n,g,en,J,{hideHotspots:ea,hideDeviceFrame:ei}),ey=function(){let e=(0,O.mr)(),r=(0,a.wA)(),n=(0,x.gV)(e),o=i.useCallback(e=>({recordingKey:T.Pt("device-option",e.presetIdentifier),isChecked:n?.presetIdentifier===e.presetIdentifier,callback:()=>{r((0,R.Zh)({name:"prototype.viewer_device_picker_changed",params:{presetIdentifier:e.presetIdentifier,framePresetWidth:e.framePresetSize.x,framePresetHeight:e.framePresetSize.y}})),r((0,R.mf)({newDevice:{type:"PRESET",presetIdentifier:e.presetIdentifier,size:e.framePresetSize,rotation:n?.rotation||"NONE"}}))},displayText:e.getI18nDeviceName(),sideText:`${e.framePresetSize.x}\u200A\xd7\u200A${e.framePresetSize.y}`,rightJustifySideText:!0}),[r,n]),s=e.initialDevice;return i.useMemo(()=>{let e=s?.presetIdentifier?(0,L.Fh)(L.hY[s.presetIdentifier].deviceName,s):null;if(!s||!e)return[];let r=[];r.push({disabled:!0,displayText:(0,A.t)("viewer.options_menu.device_dropdown.default")}),r.push(o(e)),r.push(P.w);let n=(0,L.qt)(s.presetIdentifier),i=(0,L.WT)(L.LM[n],s);r.push(...i.map(o));let a=(0,L.WT)(L.UV[n],s).filter(e=>!i.find(r=>r.presetIdentifier===e.presetIdentifier));return a.length>0&&r.push({displayText:(0,A.t)("viewer.options_menu.device_dropdown.other"),recordingKey:T.Pt({recordingKey:"device-option"},"other-options"),children:a.map(o)}),r.push(P.w),r},[s,o])}(),eb=function(e,r,{hideUIToggle:n}={}){return n?[]:[{displayText:(0,A.t)("viewer.options_menu.hide_ui"),isChecked:!1,callback:function(){e(!0),r((0,R._P)({name:"Prototype Hide UI",params:{hide:!0}}))},recordingKey:"hide-ui",shortcut:(0,F.Fg)()}]}($,J,{hideUIToggle:ea}),ev=function(e,r=!1){return r?[]:[{displayText:(0,A.t)("viewer.options_menu.accessibility_settings"),callback:()=>{e((0,N.to)({type:D.L}))},isChecked:!1}]}(J,ea),eT=(0,h.k)().prototype_preload_offline?[{children:[...el?[e_]:[],...eE,...ec?[et]:[],...ev],displayText:(0,A.t)("proto.option_menu.advanced_settings"),recordingKey:"advanced-settings"}]:[...el?[e_]:[],...eE,...ev],eI=X?eh:[...ea?ey:[],...eh,...es?ef:[],...eT,...eb],eS=i.createElement(s.E,{onClick:ep,recordingKey:T.Pt({recordingKey:Y},"toggle"),"aria-label":(0,A.t)("viewer.options_menu.options"),className:U.My},i.createElement(d.P,{style:{margin:"0 8px"}})),ew=q?e?.presetIdentifier&&L.hY[e?.presetIdentifier].getI18nDeviceName()||"UNKNOWN DEVICE":void 0,eA=i.createElement(s.E,{onClick:ep,recordingKey:T.Pt({recordingKey:Y},"toggle"),htmlAttributes:{"data-fullscreen-intercept":!0,tabIndex:0},className:f()([B.kv,B.zG])},i.createElement("div",{className:B.g7},ew),i.createElement("div",{className:B.UT},i.createElement(S.B,{svg:V.A}))),eC=j?.data?.position??void 0,eN=f()({[B.HF]:q,[B.v6]:!q});return i.createElement("div",{className:eN,ref:Q},!q&&eS,q&&eA,eu&&!!eC&&i.createElement(M.j,{showPoint:!0,onSelectItem:e=>e.callback?.(),parentRect:eC,dispatch:J,items:eI,recordingKey:"options-menu-dropdown",displayAboveTarget:q,alwaysShowCheckMarkOffset:!0}))}},678593:(e,r,n)=>{n.d(r,{AH:()=>d,Md:()=>l,pb:()=>s,z2:()=>o,zM:()=>c});var i=n(39773),a=n(29431),o=(e=>(e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADED=1]="LOADED",e))(o||{}),s=(e=>(e[e.LOAD_LIVEGRAPH=0]="LOAD_LIVEGRAPH",e[e.LOAD_VIEWER_INSTANCE=1]="LOAD_VIEWER_INSTANCE",e))(s||{});let l=(0,i.um)({status:0,livegraphLoaded:!1,viewerInstanceLoaded:!1},(e,r)=>{if(1===e.status)return e;switch(r.type){case 0:if(e.viewerInstanceLoaded)return a.Su.handleViewerLoaded("livegraph"),{status:1,lastLoaded:"livegraph"};if(e.livegraphLoaded)return e;return{...e,livegraphLoaded:!0};case 1:if(e.livegraphLoaded)return a.Su.handleViewerLoaded("multiplayer"),{status:1,lastLoaded:"multiplayer"};if(e.viewerInstanceLoaded)return e;return{...e,viewerInstanceLoaded:!0}}});function c(e){return i.zl.sub(l,()=>{d()&&e()})}function d(){return 1===i.zl.get(l).status}},33927:(e,r,n)=>{n.d(r,{gV:()=>l,nN:()=>s,tK:()=>c});var i=n(848318),a=n(716544),o=n(834996);function s(){let e=(0,a.d4)(e=>e.lastVisitedPlan),r=(0,a.d4)(e=>e.lastVisitedPlanId),n=null;return e&&(r=e.planId,n=e.planType),[r,n]}function l(e){return e.initialDevice?.presetIdentifier===e.overrideDevice?.presetIdentifier?e.initialDevice||null:e.overrideDevice||e.initialDevice||null}function c(){let e=(0,o.mr)();return(0,i.useMemo)(()=>l(e),[e])}},478378:(e,r,n)=>{n.d(r,{z:()=>I});var i=n(848318),a=n(716544),o=n(157907),s=n(579020),l=n(44509),c=n(308746),d=n(280198),u=n(29431),p=n(224996),m=n(846070),h=n(834996),_=n(296864),g=n(241917),f=n(972813);let E=new class{constructor(){this.CanvasSchemaValidator=(0,f.vh)()}getCanvas(e){return this.CanvasSchemaValidator.validate(async({xr:r})=>await r.get(`/file/${e.fileKey}/canvas`,null,{responseType:"arraybuffer"}))}},y=new class{constructor(){this.CanvasFkSchemaValidator=(0,f.vh)()}getCanvasFk(e){return this.CanvasFkSchemaValidator.validate(async({xr:r})=>await r.get(`/version/${e.versionId}/canvas?fk=${e.fileKey}`,null,{responseType:"arraybuffer"}))}};var b=n(386608);async function v(e,r){try{return await y.getCanvasFk({versionId:e,fileKey:r})}catch{return(0,s.sx)("Prototype Version Load Failed",{file_key:r,version_id:e}),null}}async function T(e){try{return await E.getCanvas({fileKey:e})}catch{return null}}function I(e){let{viewer:r,entry:n}=e,s=(0,a.wA)(),{file:f,versionId:E,nodeId:y,startingPointNodeId:I}=(0,h.mr)(),S=i.useRef(!1);return i.useEffect(()=>{(async()=>{if(!f.key||S.current)return;let e=(0,c.qg)(l.Ay.location.search),i="1"===e["disable-mp"]&&(0,o.k)().internal_only_debug_tools;_.T(),p.Q.setLoadTimeTracker(u.Su);let a=(b.dH()||"feed"===e["redirect-src"])&&E,h=a||i;if(h){let e=null;(e=a?await v(E,f.key):await T(f.key))?(r.loadFile({bytes:e.data,nodeId:y||"",startingPointNodeId:I||"",imagePrefixURL:`/file/${f.key}/image`,videoPrefixURL:`/api/files/${f.key}/videos`,editorType:(0,g.y9)(f.editor_type)},m.M),S.current=!0):s(d.s.flash("This prototype isn't available."))}else r.connectTo({fileKey:f.key,nodeId:y||"",startingPointNodeId:I||"",editorType:(0,g.y9)(f.editor_type)},m.M),S.current=!0;u.Su.handleAfterConnectTo({entry:n,connectionType:h?"file":"multiplayer",fullscreen:"Fullview-IC",logViewerWaiting:!1})})()},[s,f,E,y,I,r,n]),null}},381744:(e,r,n)=>{n.d(r,{L:()=>u});var i=n(848318),a=n(536384),o=n.n(a),s=n(63571),l=n(575492),c=n(17755),d=n(908462);function u(e){let r=e.showSidebar;return i.createElement("div",{className:o()({[d.so]:r,[d.c6]:!r,[d.UL]:e.withoutHeaderMargin})},i.createElement(s.V,{className:c.s.flex.flex1.flexColumn.$},!1===e.scrollable?e.children:i.createElement(l.P,{className:d.jG,hideScrollbar:!0},e.children)))}},721449:(e,r,n)=>{n.d(r,{wh:()=>H,Ay:()=>G});var i=n(848318),a=n(716544),o=n(356505),s=n(322035),l=n(420216),c=n(44509),d=n(831932),u=n(736248),p=n(279694),m=n(17755),h=n(442313),_=n(449737),g=n(802780),f=n(181427),E=n(674324),y=n(503024),b=n(808765),v=n(39773),T=n(730169),I=n(155651),S=n(176629),w=n(897406),A=n(670673),C=n(511131),N=n(35315),L=n(787203),O=n(74276),R=n(151144),P=n(491641);let D="seen_pro_onboarding_prototype_only_links_overlay",M=(0,A.r1)(D);function k({teamId:e}){let r=(0,v.md)(M),n=(0,v.md)(w.e),a=(0,v.Xr)(P.n),o=(0,g.kO)(),{show:s,isShowing:l,complete:c}=(0,S.e)({overlay:R.MxF,priority:N.N.DEFAULT_MODAL,experiment:{check:o,predicate:e=>e,postCheck:e=>!e}},[r,n]);return((0,T.h)(()=>{s({canShow:(r,n)=>n.some(r=>r.id===e),onShow:()=>a(!0)})}),l)?i.createElement(L.M,{isShowing:l,userFlagOnShow:D},i.createElement(I.fu,{name:C.S.getTooltipTrackingContext("Prototype Only Links"),properties:C.S.getTrackingProperties()},i.createElement(O.$v,{dismissModal:()=>{a(!1),c()}}))):null}var F=n(744075),x=n(454783);let U="node-id",B="prototype_header_nav_google_sso",V="slides_presentation_header_nav_google_sso";function G(e){let{user:r,file:n,shareText:m,loginText:g}=e,y=(0,a.wA)(),v=!(0,d.C8)();return r?i.createElement(i.Fragment,null,i.createElement("div",{className:x.TC},i.createElement(o.$n,{onClick:()=>{y(_.to({type:F.g_,data:{fileKey:n.key,source:f.nk.prototypeHeader}}))},htmlAttributes:{"data-onboarding-key":"share-prototype"}},m)),n.teamId&&i.createElement(k,{teamId:n.teamId})):i.createElement("div",{className:x.TC},i.createElement(o.$n,{variant:v?"secondary":"primary",onClick:()=>{let e=c.Ay.location.pathname,r=new URLSearchParams(c.Ay.location.search).get(U);r&&(e=s.dR(e,{[U]:r})),y(u.Ts({origin:"prototype_header_nav",redirectUrl:e})),y(_.to({type:b.x,data:{}}))}},g),v&&i.createElement(E.H,{onClick:()=>{l.Rm({dispatch:y,origin:B,redirectUrl:c.Ay.location.pathname}).then(e=>"login"===e.type&&y(u.My({userId:e.user.id})),e=>{(0,p.g)("google_signup_error",B,{error:e.message})})}},(0,h.tx)("footer_banner.continue_with_google")))}function H(e){let{user:r,file:n,shareText:s,loginText:d,sharingDisabled:b,showDefaultAuthModal:v}=e,T=(0,a.wA)(),I=(0,g.Ns)(r);if(r)return i.createElement(i.Fragment,null,i.createElement(o.WW,{onClick:()=>{T(_.to({type:F.g_,data:{fileKey:n.key,source:f.nk.prototypeHeader}}))},disabled:b,htmlAttributes:{"data-tooltip":b?(0,h.t)("fullscreen.toolbar.multiplayer.sharing_slides_files_disabled_by_your_organization"):void 0,"data-tooltip-type":y.Ib.TEXT,"data-onboarding-key":"share-prototype"}},s),n.teamId&&i.createElement(k,{teamId:n.teamId}));let S=I();return i.createElement("div",{className:m.s.flex.gap8.$},i.createElement(o.WW,{variant:S?"secondary":"primary",onClick:v},d),S&&i.createElement(E.H,{onClick:()=>{l.Rm({dispatch:T,origin:V,redirectUrl:c.Ay.location.pathname}).then(e=>"login"===e.type&&T(u.My({userId:e.user.id}))).catch(e=>{(0,p.g)("google_signup_error",V,{error:e.message})})},large:!0},(0,h.tx)("footer_banner.continue_with_google")))}},492603:(e,r,n)=>{n.d(r,{iO:()=>v,xt:()=>b,rI:()=>C});var i=n(848318),a=n(716544),o=n(551316),s=n(171659),l=n(178169),c=n(654104),d=n(991371),u=n(63571),p=n(575492),m=n(166365),h=n(442313),_=n(790355),g=n(256429);let f="sidebar_panel--scrollContainer--Gng-6 legacy_pages_panel--scrollContainer--YR8Lw";var E=n(7452),y=n(45121);let b=240,v="PROTOTYPE_FLOW_CONTEXT_MENU_DROPDOWN";function T(e){return Math.max(b,Math.min(500,e||0))}var I=(e=>(e[e.HEIGHT=0]="HEIGHT",e[e.WIDTH=1]="WIDTH",e))(I||{});let S=(e,r,n)=>{if(s.x4){let i=JSON.parse(s.x4.getItem("viewer-sidebar-panel")||"{}");i[e]={...i[e],...0===r&&{height:n},...1===r&&{width:n}},s.x4.setItem("viewer-sidebar-panel",JSON.stringify(i))}},w=(e,r)=>{if(s.x4){let n=JSON.parse(s.x4.getItem("viewer-sidebar-panel")||"{}");0===r?delete n[e].height:1===r&&delete n[e].width,s.x4.setItem("viewer-sidebar-panel",JSON.stringify(n))}},A=e=>{if(s.x4)return JSON.parse(s.x4.getItem("viewer-sidebar-panel")||"{}")[e]};function C(e){let[r,n]=(0,i.useState)(!1),[a,o]=(0,i.useState)(null),s="SidebarPanel",l=(0,i.useRef)(!1),d=i.useMemo(()=>a?T(a):b,[a]),u=c.rf(s,"mousedown",()=>{n(!0)}),p=c.rf(s,"mousemove",e=>{if(!r)return c.aH;{let r=T(e.clientX);r!==d&&o(r)}}),m=c.rf(s,"mouseup",i=>{if(!r)return c.aH;i.stopPropagation(),e.setSidebarWidthInParent(d),n(!1)});(0,i.useEffect)(()=>(document.addEventListener("mousemove",p),document.addEventListener("mouseup",m,!0),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m,!0)}),[p,m]);let{openFileKey:h,startingPointsData:_,activePrototypeStartingPointNodeId:g,onSelectFlow:f,setShowSidebar:E,showSidebar:y,setSidebarWidthInParent:v}=e;(0,i.useEffect)(()=>{h&&a&&S(h,1,a)},[a,h]),(0,i.useEffect)(()=>{h&&(e=>{let r=A(e);r&&r.width&&(o(r.width),v(r.width))})(h)},[h,v]),(0,i.useEffect)(()=>{!l.current&&_.length>0?l.current=!0:l.current&&0===_.length&&y&&E(!1)},[_,y,E]);let I=i.createElement(i.Fragment,null,i.createElement("nav",{className:"sidebar_panel--content--Ebl5L","aria-labelledby":L,"aria-hidden":!e.showSidebar},i.createElement(R,{recordingKey:"sidebarViewerPanel",width:d,openFileKey:h,startingPointsData:_,activePrototypeStartingPointNodeId:g,onSelectFlow:f,setShowSidebar:E})),i.createElement("div",{className:"sidebar_panel--edge--Rc8Ap",style:{left:d},onMouseDown:u,onDoubleClick:()=>{o(null),e.setSidebarWidthInParent(null),e.openFileKey&&w(e.openFileKey,1)}}));return i.createElement(N,{id:e.id,showSidebar:e.showSidebar,width:d},I)}function N({id:e,children:r,showSidebar:n,width:a}){let o=n?"shown":"hidden",[s,l]=i.useState(o),c=s!==o?"transition":s,d=(0,i.useCallback)(()=>{l(o)},[o]);return(0,i.useEffect)(()=>{if("hidden"===s&&"shown"===o){let e=requestAnimationFrame(()=>void l(o));return()=>void cancelAnimationFrame(e)}},[s,o]),i.createElement("div",{id:e,className:"hidden"===c?"sidebar_panel--panelContainerDisplayNone--e6-Gw sidebar_panel--container--nl8-a":"sidebar_panel--panelContainer--0R0Wb sidebar_panel--container--nl8-a",style:{width:a,marginLeft:"shown"===c?0:-a},onTransitionEnd:d},r)}let L="sidebar-panel-heading-title";function O(){return i.createElement("div",{id:L,className:"sidebar_panel--flowsHeaderText--vATd7 text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L legacy_pages_panel--pagesHeaderText--vgHeJ",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()}},(0,h.tx)("viewer.flows_sidebar.flows"))}function R(e){let r=(0,i.useMemo)(()=>{let r={};for(let n=0;n<e.startingPointsData.length;n++)r[e.startingPointsData[n].id]=e.startingPointsData[n].description;return r},[e.startingPointsData]),[n,s]=(0,i.useState)(e.activePrototypeStartingPointNodeId),[b,T]=(0,i.useState)(r[e.activePrototypeStartingPointNodeId]),[I,C]=(0,i.useState)(!1),[N,L]=(0,i.useState)(null),[R,P]=(0,i.useState)(window.innerHeight),D=(0,i.useRef)(0),M=(0,i.useRef)(0),k=(0,i.useRef)(0),{openFileKey:F,activePrototypeStartingPointNodeId:x}=e,U=(0,a.wA)();(0,i.useEffect)(()=>{F&&N&&S(F,0,N)},[N,F]),(0,i.useEffect)(()=>{F&&(e=>{let r=A(e);r&&r.height&&L(V(r.height))})(F)},[F]);let B=e=>{M.current=D.current=e.clientY,k.current=e.clientY-86,L(k.current)},V=e=>{let r=16-(e-7)%32;return r<0&&(r+=32),e+r},G=(0,i.useCallback)(e=>Math.max(55,Math.min(e,Math.round(R-64-96))),[R]),H=(0,i.useMemo)(()=>(0,o.s)(()=>{P(window.innerHeight)},45),[]);function K(r){e.onSelectFlow(r)}(0,i.useEffect)(()=>{let e=()=>{H()};return window.addEventListener("resize",e),()=>{H.cancel(),window.removeEventListener("resize",e)}},[H]),(0,i.useEffect)(()=>{let e=e=>{e.clientY!==D.current&&(L(G(k.current+e.clientY-M.current)),D.current=e.clientY)},r=r=>{I&&(r.preventDefault(),r.stopPropagation(),e(r))},n=e=>{e.stopPropagation(),e.preventDefault(),C(!1)},i=r=>{I&&(r.preventDefault(),r.stopPropagation(),e(r.touches[0]))},a=e=>{C(!1)};return document.addEventListener("mousemove",r),document.addEventListener("mouseup",n),document.addEventListener("touchend",a),document.addEventListener("touchmove",i),()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",n),document.removeEventListener("touchend",a),document.removeEventListener("touchmove",i)}},[G,I]),(0,i.useEffect)(()=>{s(x),T(r[x])},[x,r]);let W=b&&"<p><br></p>"!==b;return i.createElement("div",{className:"sidebar_panel--verticalFlexContainer--HTP2n",style:{width:e.width}},i.createElement("div",{className:"sidebar_panel--flowsListPanelContent--vU15E"},i.createElement("div",{className:"sidebar_panel--flowsHeaderContainerWithShadow--ku5dU legacy_pages_panel--pagesHeaderContainerWithShadow--eCg-j legacy_pages_panel--pagesHeaderContainer--LWPh-"},i.createElement(O,null),i.createElement(d.Jn,{useOriginalSrcFills_DEPRECATED:!0,recordingKey:c.Pt(e,"closeSidebar"),className:"sidebar_panel--closeButton--XWnCD",onClick:()=>e.setShowSidebar(!1),innerText:"close",svg:y.A})),e.startingPointsData?i.createElement(u.V,null,i.createElement("div",{style:{height:N?G(N):(()=>{let r=32*e.startingPointsData.length,n=Math.round(.25*(R-64));return V(Math.min(r=32*Math.ceil(r/32)+16,n))})()},className:"sidebar_panel--flowsList--lbQgB legacy_pages_panel--pagesList--20gAo"},i.createElement(p.P,{className:f,width:e.width,hideScrollbar:!0},e.startingPointsData.map((e,r)=>{let a="sidebar_panel--flowsRowSpacer--fu7iG";return 0===r&&(a="sidebar_panel--flowsRowSpacerInsertBeforeTop--j7UnJ sidebar_panel--flowsRowSpacer--fu7iG"),i.createElement("div",{className:a,key:e.id},i.createElement("button",{role:"link",className:"sidebar_panel--flowRow--1yyNX legacy_pages_panel--pageRow--RXLs9 legacy_pages_panel--pageRowBase--2BLqh","aria-current":n===e.id,key:e.id,onClick:()=>K(e.id),onTouchStart:()=>K(e.id),onContextMenu:r=>(function(e,r){e.preventDefault();let{clientX:n,clientY:i}=e;U(_.j7({type:v,data:{clientX:n,clientY:i,nodeId:r}}))})(r,e.id)},i.createElement(m.B,{svg:E.A,className:`sidebar_panel--flowRowSvg--GhKTM
                        ${n===e.id?"sidebar_panel--visibleCheckmark--0Ts8X":"sidebar_panel--hiddenCheckmark--O-kpW"}`}),i.createElement(g.JU,{className:n===e.id?"sidebar_panel--flowNameSelected--T5iAg text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L":"sidebar_panel--flowNameUnselected--DUjvf text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},e.name)))})))):null),i.createElement("div",{className:"sidebar_panel--resizeLineContainer--tIXt8"},i.createElement("div",{className:"sidebar_panel--resizeLine--u3PU-",onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),B(e),C(!0)},onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),B(e.touches[0]),C(!0)},onDoubleClick:()=>{L(null),e.openFileKey&&w(e.openFileKey,0)}})),i.createElement("section",{"aria-label":(0,h.t)("proto.flow_description"),className:`sidebar_panel--flowDescriptionPanelContent--ogSmt ${W?"sidebar_panel--flowDescriptionText--pCFYA":""}`},i.createElement(p.P,{className:f,hideScrollbar:!0},i.createElement("div",{className:"sidebar_panel--flowDescriptionInnerPanelContent--H7-qc text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",dir:"auto"},i.createElement(l.R,{fallback:null,errorFallback:null,value:W?b:(0,h.t)("viewer.flows_sidebar.no_description")})))))}},609970:(e,r,n)=>{n.d(r,{V:()=>J});var i=n(848318),a=n(716544),o=n(741419),s=n(39773),l=n(322035),c=n(566668),d=n(831932),u=n(896966),p=n(16826),m=n(757033),h=n(469956),_=n(321496),g=n(111085),f=n(935529),E=n(449737),y=n(155651),b=n(81229),v=n(481540),T=n(181427),I=n(858678),S=n(710905),w=n(834996),A=n(376780),C=n(216986),N=n(887057),L=n(790866),O=n(229424),R=n(588596),P=n(147586),D=n(313605),M=n(112546),k=n(243594),F=n(223645),x=n(190037),U=n(744075),B=n(554974),V=n(678593),G=n(386608),H=n(478378),K=n(536384),W=n.n(K),z=n(818754),$=n(27776),Y=n(249555),j=n(143628);function q(e){let r;let n=(0,a.d4)(e=>!!e.modalShown),o=(0,z.jz)($.P4e);return r=e.offscreen?"translateY(100vh)":`translateY(-${o}px)`,i.createElement("div",{"aria-hidden":n,className:W()({[j.E3]:!0,[j.Oy]:!0,[Y.Q]:e.srOnly}),style:{transform:r}},e.children)}var X=n(201140);function Z(e){let{livegraphData:r}=e,n=(0,w.mr)(),o=(0,a.d4)(e=>e.prototype),l=(0,a.d4)(e=>e.multiplayer),h=(0,a.d4)(e=>e.user),_=(0,a.wA)();i.useEffect(()=>(document.body.classList.add(X.$7),()=>{document.body.classList.remove(X.$7)}),[]);let g=(0,S.Yi)(n),b=(0,c.l7)()&&!(0,c.br)(),I=(0,f.xo)(),A=g||b||I,C=o.showComments&&!A,[N,L]=i.useState(null);(0,G.kZ)();let R=(0,G.l1)(N,n,e.scalingInfo,l,e.showHotspots,e.showDeviceFrame,C,o,h,"design"),[P,D]=i.useState(!1);i.useEffect(()=>{"prototype"===n.view&&R&&D(!0)},[R,n.view]);let M=i.useRef(!1);i.useEffect(()=>{(async()=>{if(n.file.key&&!M.current&&(0,p.x2)()&&(d.Ay.ios||d.Ay.android||d.Ay.mac&&navigator.maxTouchPoints>0))try{await m.Ay.post(`/file/${n.file.key}/generate_compressed_textures`),M.current=!0}catch(e){(0,u.xi)("image","Failed to generate compressed textures",{fileKey:n.file.key,error:e})}})()},[n.file]);let F=(0,s.md)(V.Md),K=r?r.file.key:"",W=i.useRef(!1);return i.useEffect(()=>{!W.current&&F.status===V.z2.LOADED&&n.share&&""!==K&&h&&(_((0,E.to)({type:U.g_,data:{fileKey:K,source:T.nk.fullscreenToolbar}})),W.current=!0)},[F.status,n.share,_,K,h]),(0,B.lF)(),i.createElement(i.Fragment,null,r&&(0,y.T8)(i.createElement(i.Fragment,null,i.createElement(x.A,null),i.createElement(k.Yp,{file:r.file,isCommentsDisabled:A,isCommentsMode:C,org:e.org,recordingKey:"prototypeView",scalingInfo:e.scalingInfo,setViewerElement:L,showDeviceFrame:e.showDeviceFrame,showHotspots:e.showHotspots,showPrototypeOptions:!0,viewer:R,viewerElement:N})),O.e0.PROTOTYPE,(0,v.oP)(r.file)),P&&!!R&&i.createElement(H.z,{viewer:R,entry:n.inlinePreview?"Preview":"Prototype"}))}function J(){let e=(0,w.mr)(),r=(0,a.d4)(e=>e.prototype),n=(0,a.d4)(e=>e.flashes),s=(0,a.d4)(e=>e.user),u=(0,a.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),p=(0,a.d4)(e=>e.interactionTestDialogShown),m=i.useRef(null),f=(0,c.f3)(),E=(0,b.Z)(f||"dark",m,e,!0),y=(0,G.PG)(e);if((0,D.d)())return i.createElement(D.O,null);let v=null==e.showHotspots||e.showHotspots,T=null==e.showDeviceFrame||e.showDeviceFrame;return i.createElement(N.uW.Provider,{value:E},i.createElement(P.K,{recordingKey:"inAppPage",containerRef:m},d.nW&&s&&!(0,l.GZ)()&&i.createElement(h.R,{userIdForTracking:s?.id,isCompact:!0}),i.createElement(Z,{scalingInfo:(0,C.M9)(e),showHotspots:v,showDeviceFrame:T,org:u,livegraphData:y}),!(0,c.jc)()&&(!y||r.showProgressBar)&&i.createElement(M.z2,{editorType:A._Y.DESIGN,isViewer:!0,progressBarMode:o.Oin.HIDE_UI}),i.createElement(_.a,{flashes:n}),i.createElement(R.V,null),i.createElement(g.Z,{positioner:q}),i.createElement(F.hG,null),p&&null,i.createElement(L.d,null,i.createElement(I.Ji,null))))}},334366:(e,r,n)=>{n.d(r,{Gv:()=>m,Uj:()=>u,ak:()=>p,iy:()=>h});var i,a=n(848318),o=n(792978),s=n(536384),l=n.n(s),c=n(155651),d=n(169752);let u=a.createContext(void 0);function p(e){return a.createElement("div",{className:l()(d.Qs,e.className)},e.children)}function m(e){let r={width:"300px"};return e.width&&("number"==typeof e.width?r.width=`${e.width}px`:r.width=e.width),e.height&&(r.height=e.height),e.margin&&(r.margin=e.margin),a.createElement(u.Consumer,null,n=>a.createElement("div",{className:l()(d.Dg,e.containerClassName)},a.createElement("img",{src:e.src,style:r,onLoad:n,alt:e.alt})))}function h(e){return a.createElement("div",{className:e.className?e.className:d.qr},e.children)}(i||(i={})).Content=function(e){return a.createElement("div",{className:e.className||d.xC,style:e.style},e.children)},(0,c.tf)(e=>a.createElement(o.N,{newTab:!0,trusted:!0,href:e.href,onClick:e.onClick},e.children))},306794:(e,r,n)=>{var i=n(848318),a=n(716544);n(992277),n(536384),n(666428),n(397579),n(493554),n(502255),n(182059),n(145015),n(385150),n(166365),n(17755);var o=n(442313);n(697714),n(164963),n(576220),n(516397),n(790355),n(815268);var s=n(449737);n(405866),n(235441),n(727341),n(976308),n(950738),n(369600),n(376780),n(635547),n(988540),n(183905),n(503024);var l=n(464012);n(164278),n(742496),n(121284),n(6760),n(515071);var c=n(495052),d=n(345908);(0,l.Ju)(function(){let e=(0,a.wA)();return i.createElement(c.OA,{targetKey:d.v4,title:"",dismissModal:()=>{e(s.AS())},ctaText:(0,o.t)("rcs.move_drafts_nudge.got_it"),onClickPrimaryCta:()=>{e(s.AS())},width:268},i.createElement("p",{className:"move_drafts_nudge_rcs_steps--bodyWithoutTitle--H7oik"},(0,o.tx)("rcs.move_drafts_nudge.now_that_you_ve_moved_this_file_to_projects_your_teammates_can_edit_and_collaborate_with_you")))},"MoveDraftsFeedbackModal")},863671:(e,r,n)=>{n.d(r,{x:()=>c});var i=n(848318),a=n(536384),o=n.n(a),s=n(341339),l=n(884009);class c extends i.Component{componentDidMount(){this.interval=setInterval(()=>{this.forceUpdate()},1e3)}componentWillUnmount(){clearInterval(this.interval)}render(){let e=(0,s.xT)(this.props.target);if(!e||!e.offsetParent)return i.createElement("div",null);{let r=e.getBoundingClientRect(),n=r.left+r.width/2,a=r.top+r.height/2,s=o()(l.xl,{[l.Df]:this.props.isBrandColor});return i.createElement("div",{className:s,style:{top:a,left:n}})}}}c.displayName="RcsCallout"},345908:(e,r,n)=>{n.d(r,{G8:()=>o,ao:()=>a,oi:()=>s,v4:()=>i});let i="share",a={key:"figjamTrySave",value:"1"},o="FULLSCREEN_FILENAME_CONTAINER";var s=(e=>(e.PAN="PAN_PREFERENCE_ONBOARDING_KEY",e.ZOOM="ZOOM_PREFERENCE_ONBOARDING_KEY",e))(s||{})},68745:(e,r,n)=>{n.d(r,{LN:()=>i,No:()=>c,_L:()=>a,q3:()=>l});var i=(e=>(e.TOP_RIGHT="top-right",e.CENTER="center",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_RIGHT="bottom-right",e))(i||{}),a=(e=>(e.LEFT_TITLE="left_title",e.RIGHT_TITLE="right_title",e))(a||{}),o=(e=>(e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.RIGHT_TITLE=2]="RIGHT_TITLE",e[e.RIGHT_BODY=3]="RIGHT_BODY",e[e.LEFT_TITLE=4]="LEFT_TITLE",e))(o||{}),s=(e=>(e.FALLBACK="fallback",e.BEST_EFFORT="best_effort",e))(s||{}),l=(e=>(e.DRAGGABLE="draggable",e.FEATURE_UPDATE="feature_update",e.WELCOME="welcome",e.SELF_CONTAINED="self_contained",e.WALK_THROUGH="walk_through",e.ANNOUNCEMENT_POINTER="announcement_pointer",e.POINTER="pointer",e))(l||{});let c=740;var d=(e=>(e.ON_DARK="on_dark",e.ON_LIGHT="on_light",e.HIGH_CONTRAST="high_contrast",e.HIDDEN="hidden",e))(d||{})},706908:(e,r,n)=>{n.d(r,{i:()=>O});var i=n(848318),a=n(235286),o=n(776402),s=n(777611),l=n(731755),c=n(818754),d=n(303035),u=n(701780),p=n(934369),m=n(771186),h=n(17755),_=n(882439),g=n(975512),f=n(155651),E=n(481540),y=n(6760),b=n(495052),v=n(341339),T=n(334366),I=n(863671),S=n(68745),w=n(169752),A=n(27776);let C=(0,c.hG)(A.tui),N=(0,c.hG)(A.IKB),L=e=>null!==e?e:void 0;class O extends i.Component{constructor(e){super(e),this.renderIfDocumentComplete=()=>{"complete"===document.readyState&&this.forceRender()},this.getRcsKeyElementInterval=null,this.startScanningForRcsKeyElement=()=>{this.cleanUpRcsKeyElementScanner();let e=this.props.step;if(e.modalType===S.q3.DRAGGABLE){if(!e.onboardingKey){this.setState({rcsKeyLocation:null});return}this.getRcsKeyElementInterval=setInterval(()=>{let e=this.getRcsKeyElement();if(null!=e){let r=this.computeLocation(e.getBoundingClientRect());(null==this.state.rcsKeyLocation||this.state.rcsKeyLocation.top!==r.top||this.state.rcsKeyLocation.left!==r.left)&&this.setState({rcsKeyLocation:r})}else this.setState({rcsKeyLocation:null})},50)}},this.cleanUpRcsKeyElementScanner=()=>{null!=this.getRcsKeyElementInterval&&(clearInterval(this.getRcsKeyElementInterval),this.getRcsKeyElementInterval=null)},this.acceptHeight=e=>this.setState({modalHeight:e}),this.button=null,this.nextButtonRef=e=>{e&&(this.button=e,this.focusButton())},this.focusButton=()=>{this.button&&!this.props.step.UNSAFE_disableFocus&&this.button.focus()},this.computeLocation=e=>{let r=this.props.step;if(r.modalType!==S.q3.DRAGGABLE)return{top:null,left:null,arrowRelativeX:null,arrowRelativeY:null,arrowPosition:null};if(r.pointDirection===S._L.LEFT_TITLE){let r=e.top+e.height/2;return{left:e.left+e.width+16,top:r-20,arrowRelativeX:-18,arrowRelativeY:y.uF/2-9,arrowPosition:y.F_.LEFT_TITLE}}if(r.pointDirection===S._L.RIGHT_TITLE){let r=e.top+e.height/2,n=e.left-this.width-16,i=y.uF/2-9;return{left:n,top:r-20,arrowRelativeX:this.width,arrowRelativeY:i,arrowPosition:y.F_.RIGHT_TITLE}}let n=e.left+e.width/2,i=e.bottom+18,a=n-this.width/2,o=n-(a=Math.min(a=Math.max(a,10),window.innerWidth-10-this.width)),s=y.F_.TOP;return null!=this.state.modalHeight&&window.innerHeight-i<this.state.modalHeight+12&&(i=e.top-this.state.modalHeight-12,s=y.F_.BOTTOM),{left:a,top:i,arrowRelativeX:o,arrowRelativeY:null,arrowPosition:s}},this.getFramePosition=()=>this.state.rcsKeyLocation?this.state.rcsKeyLocation:{top:null,left:null,arrowPosition:null,arrowRelativeX:null,arrowRelativeY:null},this.getRcsKeyElement=()=>{let e=this.props.step;return e.modalType===S.q3.DRAGGABLE&&e.onboardingKey?(0,v.xT)(e.onboardingKey):null},this.acceptTitle=e=>{this.setState({title:e,titleSetByStep:this.props.step})},this.forceRender=()=>this.setState({renderCount:this.state.renderCount+1}),this.getPositionAndConstraints=(e,r)=>{let n=this.getFramePosition();if(n.top&&n.left)return{initialPosition:new u.Mi(n.left,n.top)};switch(e){case S.LN.BOTTOM_LEFT:return{initialPosition:r||new u.Mi(N,N),initialConstraints:{x:"left",y:"bottom"}};case S.LN.BOTTOM_RIGHT:return{initialPosition:r||new u.Mi(p.lc,16),initialConstraints:{x:"right",y:"bottom"}};case S.LN.TOP_RIGHT:return{initialPosition:r||new u.Mi(N,C+N),initialConstraints:{x:"right",y:"top"}};case S.LN.CENTER:default:return{initialPosition:r||new u.Mi(window.innerWidth/2-this.width/2,window.innerHeight/2-this.height/2)}}},this.state={modalHeight:328,rcsKeyLocation:null,renderCount:0}}componentDidMount(){window.addEventListener("beforeunload",this.props.onClose),this.startScanningForRcsKeyElement(),document.addEventListener("readystatechange",this.renderIfDocumentComplete)}componentWillUnmount(){this.props.onClose(),window.removeEventListener("beforeunload",this.props.onClose),document.removeEventListener("readystatechange",this.renderIfDocumentComplete),this.cleanUpRcsKeyElementScanner()}componentDidUpdate(e,r){this.focusButton();let n=this.props.step;if(n.modalType!==S.q3.DRAGGABLE)return;let i=e.step;(i.modalType!==S.q3.DRAGGABLE||n.onboardingKey&&n.onboardingKey!==i.onboardingKey)&&this.startScanningForRcsKeyElement()}get width(){let e=this.props.step;switch(e.modalType){case S.q3.FEATURE_UPDATE:return e.width||S.No;case S.q3.DRAGGABLE:return e.width||350;default:return 350}}get height(){return this.state.modalHeight||328}static getDerivedStateFromProps(e,r){return e.step!==r.titleSetByStep?{title:void 0,titleSetByStep:void 0}:{}}render(){let e=this.props.step,r=this.getFramePosition(),n={acceptTitle:this.acceptTitle,dismissModal:this.props.dismissModal,onClickPrimaryCta:this.props.onClickPrimaryCta,forceRender:this.forceRender},o=i.createElement(T.Uj.Provider,{value:this.forceRender},i.createElement(e.element,{...n}));return(0,f.T8)((()=>{switch(e.modalType){case S.q3.DRAGGABLE:let{initialPosition:n,initialConstraints:s}=this.getPositionAndConstraints(e.defaultLocation,e.initialPosition),l=e.title instanceof Function?e.title():e.title,c=this.state.title||l,u=e.onboardingKey||e.highlightOnlyKey;return i.createElement(i.Fragment,null,u&&!e.disableHighlight&&i.createElement(I.x,{target:u}),i.createElement(y.vx,{acceptHeight:this.acceptHeight,animatedIn:!0,arrowPosition:e.hideArrow?void 0:L(r.arrowPosition),arrowRelativeX:e.hideArrow?void 0:L(r.arrowRelativeX),arrowRelativeY:e.hideArrow?void 0:L(r.arrowRelativeY),disableDragging:e.disableDragging,dragHeaderOnly:!!c,headerClassName:e.headerClassName,initialConstraints:s,initialPosition:n,initialWidth:this.width,onClose:this.props.dismissModal,title:c,zIndex:e.zIndex},o,e.disableFooter?null:i.createElement(T.iy,{className:e.footerClassName},!e.hideStepCounter&&e.stepCounter&&i.createElement("div",{className:w.S},e.stepCounter),i.createElement("div",{className:w.v0},e.additionalButton&&i.createElement("div",{className:h.s.ml8.$},i.createElement(D,{additionalButton:e.additionalButton,dismissModal:this.props.dismissModal,dispatch:this.props.dispatch})),i.createElement("div",{className:h.s.ml8.$},i.createElement(_.$z,{ref:this.nextButtonRef,onClick:this.props.onClickPrimaryCta,trackingProperties:{trackingDescriptor:e.ctaTrackingDescriptor},disabled:!!e.ctaIsLoading},i.createElement(m.x,{isLoading:!!e.ctaIsLoading,className:w.zP},()=>i.createElement("div",null,e.ctaText))))))));case S.q3.FEATURE_UPDATE:return i.createElement(R,{width:this.width,onAdditionalExplicitDismiss:this.props.additionalOnExplicitDismiss,onDismissModal:this.props.dismissModal},o);case S.q3.WALK_THROUGH:return i.createElement(i.Fragment,null,!e.disableHighlight&&i.createElement(I.x,{target:e.onboardingKey}),i.createElement(b.CR,{additionalOnExplicitDismiss:this.props.additionalOnExplicitDismiss,className:e.className,disableClickOutsideToHide:e.disableClickOutsideToHide,dismissModal:this.props.dismissModal,height:e.height,hideCloseButton:e.hideCloseButton,pointerForegroundColor:e.pointerForegroundColor,shouldCenterArrow:e.shouldCenterArrow,shouldDismissWhenLostDOMTarget:e.shouldDismissWhenLostDOMTarget,targetKey:e.onboardingKey,topPadding:e.topPadding,width:e.width},o));case S.q3.WELCOME:return i.createElement(i.Fragment,null,e.fullscreen&&i.createElement("div",{className:w.qg}),i.createElement(P,{onDismissModal:this.props.dismissModal},i.createElement(a.i,null,o)));case S.q3.SELF_CONTAINED:return o;case S.q3.POINTER:return i.createElement(i.Fragment,null,e.showHighlight&&i.createElement(I.x,{target:e.onboardingKey}),i.createElement(b.NJ,{dismissModal:this.props.dismissModal,targetKey:e.onboardingKey,width:e.width,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,shouldNotWrapInParagraphTag:e.shouldNotWrapInParagraphTag,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost},o));case S.q3.ANNOUNCEMENT_POINTER:let p=e.title instanceof Function?e.title():e.title;return i.createElement(b.OA,{arrowPosition:e.arrowPosition,bottomLeftText:e.stepCounter,ctaText:e.ctaText,dismissModal:this.props.dismissModal,onClickPrimaryCta:this.props.onClickPrimaryCta,onClickSecondaryCta:e.preventDismissOnClickSecondaryCta?d.lQ:this.props.dismissModal,secondaryCtaText:e.secondaryCtaText,shouldCenterArrow:e.shouldCenterArrow,shouldCenterModal:e.shouldCenterModal,targetKey:e.onboardingKey,title:p,topPadding:e.topPadding,width:e.width},o)}})(),e.trackingContextName,e.trackingProperties,e.trackingEnabled)}}function R({children:e,width:r,onAdditionalExplicitDismiss:n,onDismissModal:a}){let c=(0,f.j6)(),d=i.useCallback(({source:e})=>{if("button"===e){let e=c.name;(0,E.Cu)({...c.properties,...null!=e?{trackingContext:e}:{},text:"Close"})}n?.(),a()},[n,a,c]),u=o.hS({open:!0,onClose:d});return i.createElement(s.bL,{manager:u,width:r??"fit-content"},i.createElement(l.vo,null,i.createElement(l.nB,{padding:0},e)))}function P({children:e,onDismissModal:r}){let n=o.hS({open:!0,onClose:r,preventUserClose:!0});return i.createElement(s.bL,{manager:n,width:"fit-content"},i.createElement(l.vo,null,i.createElement(l.nB,{padding:0},e)))}function D({additionalButton:e,dismissModal:r,dispatch:n}){if(!e)return null;let a=e.textForTracking?{text:e.textForTracking()}:{};return"link"===e.onClickBehavior?i.createElement(g.pW,{href:e.href,variant:"secondary",trackingProperties:a,newTab:!0},e.label):i.createElement(_.$z,{onClick:()=>{e.onClick(n),r()},trackingProperties:a,variant:"secondary"},e.label)}O.displayName="RcsFrame"},231687:(e,r,n)=>{n.d(r,{FP:()=>E});var i=n(39773),a=n(171063),o=n(670673),s=n(901498);let l=(0,i.eU)([]),c=(0,i.eU)(void 0);(0,i.eU)(e=>{let r=e(l);return 0!==r.length&&e(c)===r[r.length-1]}),(0,i.eU)("default"),(0,i.eU)(!1),(0,i.eU)(""),(0,i.eU)(["","",""]),["sneha@example.com","oscar@example.com ","molly@example.com","shiva@example.com","elynn@example.com","dian@example.com","linda@example.com"].map(e=>e.split("@")[0]),(0,i.eU)(!1);var d=(e=>(e.STARTER="starter",e.PROFESSIONAL="professional",e.ORG="org",e))(d||{});(0,i.eU)(""),(0,i.eU)("");let u=(0,i.eU)(new Set);(0,i.eU)(void 0),(0,i.eU)("");let p=(0,i.eU)(new Set);(0,i.eU)(new Set),(0,i.eU)(e=>e(u).has("student")||e(u).has("educator")||e(p).has("school")||e(_).has("school")),(0,i.eU)(e=>e(u).has("student")),(0,i.eU)(new Set),(0,i.eU)(new Set),(0,i.eU)(new Set);let m=(0,i.eU)(new Set),h=(0,i.eU)(new Set),_=(0,i.eU)(new Set);(0,i.eU)(new Set),(0,i.eU)(new Set),(0,i.eU)(e=>{let r=e(m),n=e(h);return r.has("yes_many_times")||n.has("yes_many_times")?"yes_many_times":r.has("yes_a_few_times")||n.has("yes_a_few_times")?"yes_a_few_times":r.has("no_first_time")||n.has("no_first_time")?"no_first_time":void 0}),(0,i.eU)(void 0),(0,i.eU)(!1),(0,i.eU)(!1),(0,i.eU)(e=>e(c)===s.pu.WHICH_SEAT_WOULD_YOU_LIKE);let g=(0,i.eU)({[a.ud.COLLABORATOR]:!1,[a.ud.DEVELOPER]:!1,[a.ud.EXPERT]:!1});(0,i.eU)(e=>{let r=e(f);return!!r&&!!["EXPERT","DEVELOPER","COLLABORATOR"].includes(r?.toUpperCase())&&e(g)[r]});let f=(0,i.eU)(null),E=(0,i.eU)(!1);(0,i.t_)(e=>!!e(o.qG).data?.opted_in_email)},901498:(e,r,n)=>{n.d(r,{pu:()=>i});var i=(e=>(e.NAME_SELF="Name Step",e.HOW_DO_YOU_PLAN_TO_USE_FIGMA="How do you plan to use Figma Step",e.WHAT_DO_YOU_DO="What Do You Do Step",e.WHAT_DO_YOU_DO_V2="What Do You Do Role Step",e.WHERE_OR_HOW_DO_YOU_WORK="Where Or How Do You Work Step",e.WHAT_TYPE_OR_LEVEL_OF_SCHOOL="What Type Or Level Of School Step",e.HOW_MANY_PEOPLE_WORK_IN_ORGANIZATION="How Many People Work At Your Organization Step",e.INVITE_COLLABORATORS="Invite Collaborators Step",e.WHAT_WILL_YOU_USE_FIGJAM_FOR="What Will You Use FigJam For Step",e.HAVE_USED_WHITEBOARDS_BEFORE="Have You Used Digital Whiteboarding Tools Before Step",e.HAVE_USED_FIGMA_PRODUCTS_BEFORE="Have You Used Figma Products Before Step",e.CHOOSE_PLAN="Choose Plan Step",e.CHOOSE_PRODUCT="Choose Product Step",e.WHAT_TYPE_OF_INSTITUTION="What Type Of Institution Step",e.WHO_DO_YOU_COLLAB_WITH="Who Do You Collab With Step",e.WHAT_BRINGS_YOU_HERE="What Brings You Here Step",e.WHERE_DO_YOU_WORK="Where Do You Work Step",e.WHICH_SEAT_WOULD_YOU_LIKE="Which Seat Would You Like Step",e))(i||{});let a=["Name Step","How do you plan to use Figma Step","What Do You Do Role Step","Invite Collaborators Step","Have You Used Figma Products Before Step","Choose Plan Step","Choose Product Step"];a.filter(e=>"Choose Product Step"!==e),a.filter(e=>"Choose Plan Step"!==e)},601789:(e,r,n)=>{n.d(r,{jw:()=>h});var i=n(425642),a=n(39773),o=n(442313),s=n(441802);n(849752);var l=n(376780),c=n(572699);let d=(0,a.eU)(()=>({questionKey:"what_do_you_do_k12_v1",options:new Set((0,i.k4)(["student","educator"])),getOptionDisplay:m})),u=(0,a.eU)(()=>{let e=(0,i.k4)(["developer","designer","marketer","product_manager","research","ux_writing","data_analytics"]);return e.push("something_else"),{questionKey:"what_do_you_do_org_ent_v1",options:new Set(e),getOptionDisplay:m}}),p=(0,a.eU)(()=>{let e=(0,i.k4)(["developer","designer","marketer","product_manager","research","ux_writing","data_analytics","student","educator"]);return e.push("something_else"),{questionKey:"what_do_you_do_free_pro_v1",options:new Set(e),getOptionDisplay:m}});function m(e){switch(e){case"developer":return(0,o.t)("auth.extra-info.job-type.software-development");case"designer":return(0,o.t)("auth.extra-info.job-type.design");case"product_manager":return(0,o.t)("auth.extra-info.job-type.product-management");case"marketer":return(0,o.t)("auth.extra-info.job-type.marketing");case"research":return(0,o.t)("user_onboarding_signals.v1.answer.research");case"ux_writing":return(0,o.t)("user_onboarding_signals.v1.answer.ux_writing");case"data_analytics":return(0,o.t)("user_onboarding_signals.v1.answer.data_analytics");case"educator":return(0,o.t)("user_onboarding_signals.answer.educator");case"student":return(0,o.t)("user_onboarding_signals.answer.student");case"something_else":return(0,o.t)("user_onboarding_signals.v2.answer.other")}}function h(){let e=function(){let e=(0,a.md)(u),r=(0,a.md)(p),n=(0,c.n4)(),{questionKey:i,options:s,getOptionDisplay:d}=n===l.Ag.ORG||n===l.Ag.ENTERPRISE?e:r;return{questionKey:i,options:s,questionTitle:(0,o.t)("new_user_experience.user_onboarding_signals.question.what_do_you_do"),getOptionDisplay:d}}(),r=(0,a.md)(s.eS),n=function(){let{questionKey:e,options:r,getOptionDisplay:n}=(0,a.md)(d);return{questionKey:e,options:r,questionTitle:(0,o.t)("new_user_experience.user_onboarding_signals.question.what_best_describes_you"),getOptionDisplay:n}}();return r.data?n:e}(0,a.eU)(()=>{let e=(0,i.k4)(["student","educator"]);return e.push("something_else"),{questionKey:"what_do_you_do_school_v1",options:new Set(e),getOptionDisplay:m}})},883324:(e,r,n)=>{n.d(r,{z:()=>c});var i=n(848318),a=n(541525),o=n(474020),s=n(442313),l=n(630478);function c({clientType:e}){let r=(0,a.U)();(0,i.useEffect)(()=>{let n=Date.now();return()=>{let i=Date.now()-n;r("reconnecting_modal_shown",{msElapsed:i,clientType:e}),i>1e3&&(0,o.B3)(e)}},[e,r]);let n=`${l.hd} ${l.ME}`;return i.createElement("div",{className:n},i.createElement("div",{className:l.nw},(0,s.tx)("reconnecting_modal.loading")))}},553104:(e,r,n)=>{n.d(r,{Qv:()=>b,RO:()=>y,we:()=>E});var i=n(848318);n(891627),n(716544),n(741419),n(673906),n(897392),n(179703),n(157907),n(39773);var a=n(536384),o=n.n(a);n(579020);var s=n(818754);n(857188),n(654104),n(575492);var l=n(442313),c=n(895104);n(193607);var d=n(744149),u=n(919546);n(697751),n(574146),n(992444),n(718451);var p=n(908813);n(950738),n(503024),n(468425),n(70629),n(678290),n(274831),n(754737);var m=n(639244);n(256429),n(302839);var h=n(961662),_=n(27776),g=n(464758);let f=2*(0,s.hG)(_.dGl);function E({selectedStyleProperties:e,snug:r}){let[n,a]=i.useState(!1),s=e.styleType,l="TEXT"===s,p="FILL"===s,m="dark"===(0,d.DP)(),{containerClassName:_,previewClassName:E}=i.useMemo(()=>({containerClassName:o()({[g.$9]:l,[g.vL]:!n&&p,[g.mj]:n&&p,[g.ig]:!l&&!p,[g.E7]:r}),previewClassName:o()({[g.Lq]:!n,[g.s1]:n,[g.Gv]:!0,[g.gH]:l,[g.SI]:l&&m,[g.hj]:p})}),[n,l,p,m,r]),y=i.useMemo(()=>{let e={};if(e.backgroundImage=`url('${(0,u.A)()}')`,!l)return p?n?e:void 0:e},[n,l,p]);return i.createElement(c.Y,{spacing:0,height:"hug-contents",padding:{left:p&&!r?f:0,right:p&&!r?f:0,top:p&&!r?f:0,bottom:r?0:f},verticalAlignItems:"start"},i.createElement("div",{style:y,className:_},e.url?i.createElement("img",{src:e.url,className:E,alt:"",onLoad:()=>{a(!0)}}):i.createElement(h.zi,{dsStyle:{style_type:e.styleType}})))}function y({recordingKey:e}){let r=(0,p.b)("styleType");return i.createElement(i.Fragment,null,"FILL"===r&&i.createElement(m.B8,{key:"fill",recordingKey:e,shouldUseSelectedStyleProperties:!0}),"GRID"===r&&i.createElement(m.tC,{key:"grids",shouldUseSelectedStyleProperties:!0,recordingKey:e}),"TEXT"===r&&i.createElement(m.gc,{key:"type",shouldUseSelectedStyleProperties:!0,recordingKey:e}),"EFFECT"===r&&i.createElement(m.w5,{key:"effects",shouldUseSelectedStyleProperties:!0,recordingKey:e}))}function b(e){switch(e){case"FILL":return(0,l.t)("design_systems.create_style.placeholder_name_color");case"TEXT":return(0,l.t)("design_systems.create_style.placeholder_name_text");case"EFFECT":return(0,l.t)("design_systems.create_style.placeholder_name_effect");case"GRID":return(0,l.t)("design_systems.create_style.placeholder_name_grid");default:return(0,l.t)("design_systems.create_style.placeholder_name_create_new_style_generic")}}(0,s.hG)(_.wQn)},160807:(e,r,n)=>{n.d(r,{Cj:()=>M});var i=n(848318),a=n(176677),o=n(960955),s=n(596616),l=n(157907),c=n(508242),d=n(536384),u=n.n(d),p=n(818754),m=n(993409),h=n(303035),_=n(145015),g=n(545008),f=n(360589),E=n(575492),y=n(17755),b=n(442313),v=n(500276),T=n(895104),I=n(155651),S=n(401890),w=n(723621),A=n(832675),C=n(527041),N=n(27776),L=n(927263);class O extends i.PureComponent{render(){let e=this.props.isReversed?"\u2191":"\u2193";return i.createElement("div",{className:`${A.LI} ${this.props.className||""}`,onClick:this.props.onClick,"data-onboarding-key":this.props.onboardingKey},this.props.nameElement?this.props.nameElement:this.props.name,this.props.isSelected&&i.createElement("div",{className:C.UE},e),this.props.extraContent)}}O.displayName="MultiSelectHeader";let R="msl_header_toggle_select_all_onboarding_key",P="msl_selected_row_onboarding_key",D=(0,p.hG)(N.B6G);class M extends i.Component{constructor(e){super(e),this.rangeSelectAnchorRowKey=null,this.setScrollTopState=()=>{this.setState({scrollTop:this.nextScrollTop}),this.frameRequest=null},this.onScroll=e=>{this.nextScrollTop=e,null==this.frameRequest&&(this.frameRequest=requestAnimationFrame(this.setScrollTopState)),this.props.onScroll&&this.props.onScroll()},this.itemKeys=(0,c.xx)((e,r)=>e.map(e=>r(e))),this.selectableItemKeys=()=>{let e=this.itemKeys(this.props.items,this.props.getItemKey);return this.props.unselectableItemKeys?e.filter(e=>!this.props.unselectableItemKeys?.has(e)):e},this.toggleSelectMultiple=(e,r,n=!1)=>{this.rangeSelectAnchorRowKey=null;let i=this.props.onSelectedItemsChange??h.lQ;if(r){if(n)this.setState({selectedItemKeys:new Set,selectedAll:!1}),i([]);else{let r=new Set(this.state.selectedItemKeys);e.forEach(e=>r.delete(e)),this.setState(e=>({selectedItemKeys:r,selectedAll:e.selectedAll})),i(this.filterToSelected(this.props.items,r,this.props.unselectableItemKeys,this.props.getItemKey))}}else{let r=new Set([...e,...this.state.selectedItemKeys]);this.setState(e=>({selectedItemKeys:r,selectedAll:e.selectedAll||n})),i(this.filterToSelected(this.props.items,r,this.props.unselectableItemKeys,this.props.getItemKey))}},this.isItemSelected=e=>{let r=this.props.getItemKey(e);return this.state.selectedItemKeys.has(r)&&!this.props.unselectableItemKeys?.has(r)},this.toggleSelect=e=>{let r=this.props.getItemKey(e);if(this.props.unselectableItemKeys?.has(r))return;let n=new Set(this.props.singleSelect?[]:this.state.selectedItemKeys);this.rangeSelectAnchorRowKey=r,this.isItemSelected(e)?n.delete(r):n.add(r),this.setState({selectedItemKeys:n}),this.props.onSelectedItemsChange&&this.props.onSelectedItemsChange(this.filterToSelected(this.props.items,n,this.props.unselectableItemKeys,this.props.getItemKey))},this.selectRowsInRange=(e,r,n)=>{if(e===r)return;let i=this.props.items.map(e=>this.props.getItemKey(e)).filter(e=>!this.props.unselectableItemKeys?.has(e)),a=i.indexOf(e),o=i.indexOf(r);if(-1===a||-1===o)return;let s=Math.min(a,o),l=Math.max(a,o),c=i.slice(s,l+1);n?this.toggleSelectMultiple(c,!0):this.toggleSelectMultiple(c,!1)},this.isItemSelectable=e=>{let r=this.props.getItemKey(e);return!this.props.unselectableItemKeys?.has(r)},this.onRowSelect=(e,r)=>{if(!this.isItemSelectable(r))return;let n=this.props.getItemKey(r);if(e.nativeEvent instanceof MouseEvent&&e.nativeEvent.shiftKey&&!this.props.singleSelect){let e;if(1===this.state.selectedItemKeys.size?e=[...this.state.selectedItemKeys][0]:this.rangeSelectAnchorRowKey&&(e=this.rangeSelectAnchorRowKey),e&&e!==n){let r=this.state.selectedItemKeys.has(n);this.selectRowsInRange(e,n,r),this.rangeSelectAnchorRowKey=n;return}}this.toggleSelect(r)},this.rowClickToSelectDeprecated=!!(0,l.k)().admin_table_drilldowns,this.showNewRightActionsColumns=this.rowClickToSelectDeprecated&&!!this.props.rightActionColumns,this.isRowClickable=e=>this.props.isRowClickable?this.props.isRowClickable(e):this.isItemSelectable(e),this.onRowClick=(e,r)=>{if(this.rowClickToSelectDeprecated)return(0,m.Og)(e.target)||!this.isRowClickable(r)?void 0:this.state.selectedItemKeys.size>0?this.onRowSelect(e,r):this.props.onRowClick?.(r);this.onRowSelect(e,r)},this.isFirstInSelectedGroup=e=>{let r=this.props.items[e],n=this.props.getItemKey(r);if(!this.state.selectedItemKeys.has(n))return!1;let i=this.props.items[e-1];if(!i)return!0;let a=this.props.getItemKey(i);return!this.state.selectedItemKeys.has(a)},this.isLastInSelectedGroup=e=>{let r=this.props.items[e],n=this.props.getItemKey(r);if(!this.state.selectedItemKeys.has(n))return!1;let i=this.props.items[e+1];if(!i)return!0;let a=this.props.getItemKey(i);return!this.state.selectedItemKeys.has(a)},this.rowWithCheckbox=(e,r,n)=>{let a=this.isItemSelected(e),l=this.props.getItemKey(e),c=u()(C.sM,this.props.styleOverrideClassNames?.unselectedCheckbox),d=this.props.itemBasedStyleOverride?this.props.itemBasedStyleOverride(e):void 0,p=u()(C.nM,this.props.styleOverrideClassNames?.row,d?.row),m=u()(this.props.styleOverrideClassNames?.selectedRow,d?.selectedRow),_=this.isItemSelectable(e),f=r=>{this.rowClickToSelectDeprecated&&this.onRowSelect(r,e)},E=this.rowClickToSelectDeprecated?i.createElement("div",{className:a?void 0:c},i.createElement(o.S,{label:i.createElement(s.h,null,function(){let r="name"in e&&e.name?e.name:void 0;return r?a?(0,b.t)("multi_select_list.checkbox_aria_label_deselect",{name:r}):(0,b.t)("multi_select_list.checkbox_aria_label_select",{name:r}):a?(0,b.t)("multi_select_list.checkbox_aria_label_without_name_deselect"):(0,b.t)("multi_select_list.checkbox_aria_label_without_name_select")}()),checked:a,"data-onboarding-key":a?P:void 0,"data-testid":"multi-select-list-select-item-checkbox",onChange:(e,{event:r})=>f(r)})):i.createElement(g.y,{className:a?void 0:c,allChecked:a,someChecked:!1,"data-onboarding-key":a?P:void 0,"data-testid":"multi-select-list-select-item-checkbox",onChange:e=>f(e)}),y=e.tooltipText,v=[];return this.props.shouldRoundBordersForSelectedRows&&(v.push(C.uH),a&&!this.isFirstInSelectedGroup(n)&&v.push(C.BA),a&&!this.isLastInSelectedGroup(n)&&v.push(C.D)),i.createElement(w.iA,{className:u()(C.nM,p,a?m:void 0,...v,{[C.I6]:l===this.props.highlightState?.itemKey}),selected:a,key:l,onClick:r=>this.onRowClick(r,e),tooltipText:y,useAdminTableStyles:!0,dataTestId:"multi-select-list-table-trackable-row"},!this.props.noCheckboxColumn&&i.createElement("div",{className:u()(C.E0,this.props.styleOverrideClassNames?.checkboxColumn)},_?E:null),this.props.columns.map(a=>i.createElement("div",{className:a.className,key:a.name},a.cellComponent(e,r,this.props.highlightState??{itemKey:null,setItemKey:h.lQ},n))),this.showNewRightActionsColumns&&i.createElement(T.Y,{width:"hug-contents"},this.props.rightActionColumns?.map(n=>i.createElement("div",{className:n.className,key:n.name},!r&&n.cellComponent(e,{isClickable:this.isRowClickable(e),isSelectable:this.isItemSelectable(e)})))))},this.renderLoadingRow=e=>{let r=0;return e<2?r=1:e<10&&(r=1-(e-2+1)/9),i.createElement("div",{key:e,style:{opacity:r},"data-testid":"multi-select-list-loading-row"},i.createElement(w.iA,{className:u()(C.nM,this.props.styleOverrideClassNames?.row),useAdminTableStyles:!0,dataTestId:"multi-select-list-table-loading-row"},!this.props.noCheckboxColumn&&i.createElement("div",{className:u()(C.E0,this.props.styleOverrideClassNames?.checkboxColumn)}),this.props.columns.map((r,n)=>r.name?i.createElement("div",{className:r.className,key:r.name},r.loadingComponent?r.loadingComponent:i.createElement("div",{style:v.sx.add({width:`${50*Math.abs(Math.sin(e+n+1))+30}%`}).$},i.createElement(f.Wi,{className:y.s.h12.$,animationType:f.JR.SHIMMER}))):i.createElement("div",{key:r.name,className:u()(y.s.wFull.$,r.className)})),this.showNewRightActionsColumns&&i.createElement(T.Y,{width:"hug-contents"},this.props.rightActionColumns?.map(e=>i.createElement("div",{className:e.className,key:e.name})))))},this.filterToSelected=(0,c.xx)((e,r,n,i)=>e.filter(e=>r.has(i(e))&&!n?.has(i(e)))),this.state={scrollTop:0,selectedItemKeys:new Set,selectedAll:!1},this.stickBannerRef=i.createRef(),this.scrollContainerRef=i.createRef()}componentDidUpdate(e,r){if(e.sortState.columnName!==this.props.sortState.columnName||e.sortState.isReversed!==this.props.sortState.isReversed||e.items.length!==this.props.items.length){if(this.rangeSelectAnchorRowKey=null,(e.isLoading||this.props.isLoading)&&e.items.length<this.props.items.length&&this.state.selectedAll){let r=this.props.items.slice(e.items.length).map(e=>this.props.getItemKey(e));this.setState(e=>({selectedItemKeys:new Set([...e.selectedItemKeys,...r])}))}this.props.isLoading&&0===this.props.items.length&&this.state.selectedAll&&(this.setState({selectedItemKeys:new Set,selectedAll:!1}),this.props.onToggleSelectAll?.(!0))}}onHeaderClick(e){this.props.onSetSortState(e)}renderColumnHeaders(e){let r=e.length===this.selectableItemKeys().length,n=e.length>0,a=0===e.length,l=()=>{a?(this.toggleSelectMultiple(this.selectableItemKeys(),!1,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!1)):(this.toggleSelectMultiple(this.selectableItemKeys(),!0,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!0))},c=this.selectableItemKeys().length>0&&!this.props.selectAllDisabled,d=this.rowClickToSelectDeprecated?i.createElement(o.S,{label:i.createElement(s.h,null,n?(0,b.t)("multi_select_list.deselect_all"):(0,b.t)("multi_select_list.select_all")),checked:n,mixed:n&&!r,"data-onboarding-key":R,onChange:l,"data-testid":"multi-select-list-select-all-checkbox"}):i.createElement(g.y,{allChecked:r,"data-onboarding-key":R,someChecked:n,onChange:l,"data-testid":"multi-select-list-select-all-checkbox"});return i.createElement(w.Hj,{header:!0,useAdminTableStyles:!0,className:u()(this.props.disabled?C.eO:C.U1,this.props.styleOverrideClassNames?.header),dataTestId:"multi-select-list-table-header-row"},!this.props.noCheckboxColumn&&i.createElement("div",{className:u()(C.E0,this.props.styleOverrideClassNames?.checkboxColumn)},c&&d),this.props.columns.map(e=>i.createElement("div",{className:e.className,key:e.name},i.createElement(O,{className:e.headerClassName,extraContent:e.headerExtraContent,name:e.name,nameElement:e.nameElement,isReversed:this.props.sortState.isReversed,isSelected:e.sorting_key?e.sorting_key===this.props.sortState.columnName:e.name===this.props.sortState.columnName,onClick:e.getSortValue?()=>this.onHeaderClick(e.sorting_key??e.name):void 0,onboardingKey:e.onboardingKey}))),this.showNewRightActionsColumns&&i.createElement(T.Y,{width:"hug-contents"},this.props.rightActionColumns?.map(e=>i.createElement("div",{className:e.className,key:e.name}))))}render(){let e=this.filterToSelected(this.props.items,this.state.selectedItemKeys,this.props.unselectableItemKeys,this.props.getItemKey),r=this.props.isBannerHeightDynamic?{top:this.stickBannerRef?.current?.getBoundingClientRect()?.height||0}:void 0,n=this.props.isLoading&&0===this.props.items.length,a=this.props.trackingProperties?this.props.trackingProperties.batchAction:{};return i.createElement(i.Fragment,null,i.createElement(F,{anyVisibleAndSelectedItems:e.length>0,highlightState:this.props.highlightState}),i.createElement("div",{className:u()(C.wY,{[C.TH]:this.props.hasNewScrollContext},this.props.styleOverrideClassNames?.tableWrapper)},i.createElement(E.P,{className:C.jG,innerClassName:u()(C.NM,this.props.scrollContainerInnerClassName),onScroll:this.onScroll,minContentWidth:this.props.minContentWidth||(0,p.hG)(N.fAD),scrollContainerRef:this.scrollContainerRef,scrollContentRef:this.props.scrollContentRef,scrollingDisabled:n,horizontalScrollingDisabled:this.props.hasNewScrollContext,scrollBarAlways:this.props.scrollBarAlwaysVisible},i.createElement(i.Fragment,null,i.createElement("div",{ref:this.stickBannerRef,className:C.ln},this.props.stickyBanner),i.createElement("div",null,this.props.scrollAwayContent),i.createElement("div",{className:void 0!==this.props.stickyBanner?C.T3:C.ln,style:r},i.createElement(I.fu,{name:"MultiSelectList Header",trackingTargets:S.K.NONE,properties:{tableType:this.props.itemTypeContext.itemType}},this.props.stickyContent),!this.props.hideHeader&&this.renderColumnHeaders(e)),0===this.props.items.length&&!this.props.isLoading&&i.createElement("div",{className:C.p$},this.props.emptyContent),i.createElement(I.fu,{name:"MultiSelectList - Row",trackingTargets:S.K.RCS,properties:{tableType:this.props.itemTypeContext.itemType}},i.createElement(k,{totalLoaded:this.props.items.length,isLoading:!!this.props.isLoading,disabled:!!this.props.disabled,renderLoadingRow:e=>this.renderLoadingRow(e),renderItem:r=>this.rowWithCheckbox(this.props.items[r],e.length>0,r),scrollContainerRef:this.scrollContainerRef,onFetchMore:this.props.onFetchMore,rowHeight:this.props.rowHeightOverride??D,paddingEnd:this.props.paddingEnd||32})))),this.props.actionBar&&i.createElement(I.fu,{name:"MultiSelectList BatchAction",trackingTargets:S.K.RCS,properties:{selectedAll:this.state.selectedAll,selectedCount:e.length,...a}},i.createElement("div",{className:e.length>0?C._Z:C.KY,"data-testid":"multi-select-list-action-bar"},i.createElement("div",{className:u()(e.length>0?C.SB:C.cr,this.props.actionBarClassName)},i.createElement("div",{className:C.SM},this.props.itemTypeContext.getSelectedCountString(this.props.getTotalSelected?this.props.getTotalSelected(e,this.selectableItemKeys()):e.length)),this.props.actionBar(e),i.createElement(_.RW,{className:u()(C.Ym,this.props.styleOverrideClassNames?.batchActionClearButton),svg:L.A,onClick:()=>{this.toggleSelectMultiple(this.selectableItemKeys(),!0,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!0)},trackingProperties:{action:"Clear Selection"}}))))),this.props.footer&&this.props.footer(e))}}function k({totalLoaded:e,isLoading:r,disabled:n,renderItem:o,renderLoadingRow:s,scrollContainerRef:l,onFetchMore:c,rowHeight:d,paddingEnd:u}){let p=i.useCallback(()=>d,[d]),{virtualItems:m,totalSize:h}=(0,a.z)({size:r||c?e+10:e,parentRef:l,overscan:15,estimateSize:p,paddingEnd:u||32});return i.useEffect(()=>{let r=m[m.length-1];e&&c&&r?.index>=e-1&&c()},[c,e,m]),i.createElement("div",{className:`${n?C.ry:C.jm}`,style:{height:h}},m.map(r=>i.createElement("div",{key:r.index,style:{position:"absolute",top:r.start,left:0,width:"100%",height:r.size}},r.index>=e?s(r.index-e):o(r.index))))}function F(e){let{anyVisibleAndSelectedItems:r,highlightState:n}=e;return i.useLayoutEffect(()=>{r&&n?.itemKey&&(0,n.setItemKey)(null)},[r,n?.itemKey,n?.setItemKey]),null}M.displayName="MultiSelectList"},722295:(e,r,n)=>{n.d(r,{W:()=>c});var i=n(848318),a=n(332456),o=n(855703),s=n(300035),l=n(118234);function c(e){return i.createElement(d,{tabs:e.tabs,left:e.left,center:e.center,hideToolBarOnMobile:e.hideToolBarOnMobile,resetTileSelectionOnMouseDown:e.resetTileSelectionOnMouseDown,centerFullWidth:e.centerFullWidth,collapseSidebarOnTabletView:e.collapseSidebarOnTabletView,containerClassName:e.containerClassName||l.Jw,showDividerBeforeTabIndex:e.showDividerBeforeTabIndex})}function d(e){return i.createElement(i.Fragment,null,i.createElement(o.i,{tabs:e.tabs,center:e.center,hideToolBarOnMobile:e.hideToolBarOnMobile,collapseSidebarOnTabletView:e.collapseSidebarOnTabletView}),i.createElement(a.Y,{tabs:e.tabs,left:e.left,center:e.center,resetTileSelectionOnMouseDown:e.resetTileSelectionOnMouseDown,centerFullWidth:e.centerFullWidth,collapseSidebarOnTabletView:e.collapseSidebarOnTabletView,containerClassName:e.containerClassName,showDividerBeforeTabIndex:e.showDividerBeforeTabIndex}))}d.propTypes={tabs:(e,r,n)=>{let i=e[r];if(!i)return null;if(i.some(e=>e.type.WrappedComponent.name!==s.pG))throw Error(`${r} of ${n} must be a list of elements created from calling ToolBarTabContainer`);return null}}},825038:(e,r,n)=>{n.d(r,{T:()=>c,g:()=>l});var i=n(848318),a=n(17755),o=n(442313),s=n(778935);let l=(0,s.ex)("preload_success",function(){return i.createElement("div",{className:a.s.pr8.$},i.createElement("div",{className:a.s.colorTextTooltip.textBodyMediumStrong.$},(0,o.t)("proto.preload.loaded.tooltip.header")),i.createElement("div",{className:a.s.colorTextTooltipSecondary.$},(0,o.t)("proto.preload.loaded.tooltip.body")))}),c=(0,s.ex)("preload_error",function({isSlides:e}){return i.createElement("div",{className:a.s.pr8.$},i.createElement("div",{className:a.s.colorTextTooltip.textBodyMediumStrong.$},e?(0,o.t)("proto.preload.error.tooltip.header.slides"):(0,o.t)("proto.preload.error.tooltip.header")),i.createElement("div",{className:a.s.colorTextTooltipSecondary.$},(0,o.t)("proto.preload.error.tooltip.body")))},e=>({isSlides:"true"===e.getAttribute("data-tooltip-slides")}))},177138:(e,r,n)=>{n.d(r,{W:()=>f});var i=n(848318),a=n(716544),o=n(431118),s=n(442313),l=n(257489),c=n(834996),d=n(661780),u=n(804072),p=n(995946),m=n(217084),h=n(503024),_=n(886560);function g(e,r,n){let i=(0,o.EJ)(e,25),a=n?function(e){switch(e){case p.e6.OWNER:return" (owner)";case p.e6.ADMIN:return" (admin)";default:return""}}(n):"";return r?(0,s.t)("avatar.tooltip.current_user_handle",{handle:i,roleName:a}):(0,s.t)("avatar.tooltip.other_user_handle",{handle:i,roleName:a})}function f(e){let r=(0,d.iZ)(),n=(0,a.d4)(e=>e.multiplayer),o=(0,u.q)(),s="user"in e?`user-${e.user.id}`:`role-${e.role.id}`,p="user"in e?e.user:e.role.user,f=!1,E="sessionId"in p&&p.sessionId===n.sessionID;r?f=p.id===r.id:"sessionId"in p&&(f=E);let y="role"in e?g(p.handle,f,e.role.level):g(p.handle,f),b=function(e){let r=(0,d.iZ)();return function(e){let{localUser:r,tooltipUser:n,multiplayer:i,isInWorkshop:a,selectedView:o}=e,s=n.id?.includes("VISITOR-")||!n.id,l=-1!==i.sessionID,c="sessionId"in n&&n.sessionId===i.sessionID,d="sessionId"in n&&n.sessionId===i.presenterSessionID,u="sessionId"in n&&i.observingSessionID===n.sessionId;return!l||(0,m.QB)(o)?s?_.c.NONE:_.c.VIEW_PROFILE:c?s||!r?a?_.c.EDIT_NAME:_.c.NONE:d?_.c.STOP_PRESENTING:_.c.NONE:d&&!u?_.c.FOLLOW_PRESENTER:u?_.c.STOP_OBSERVE:_.c.START_OBSERVE}({localUser:r,tooltipUser:e,multiplayer:(0,a.d4)(e=>e.multiplayer),isInWorkshop:(0,l.$D)(),selectedView:(0,c._6)()})}(p),v=`/files${o}/user/${p.id}`;return i.createElement("div",{key:`avatar-${s}`,"data-tooltip":_.M,"data-tooltip-click-action":b,"data-tooltip-interactive":!0,"data-tooltip-max-width":300,"data-tooltip-offset-y":e.tooltipOffsetY??8,"data-tooltip-timeout-delay":150,"data-tooltip-type":h.Ib.SPECIAL,"data-tooltip-user-handle":y,"data-tooltip-user-profile-url":v,"data-tooltip-user-session-id":"sessionId"in p?p.sessionId:void 0,id:e.id,style:{display:"inherit"}},e.children)}},814815:(e,r,n)=>{n.d(r,{$:()=>o,V:()=>s});var i=n(336448);let a=/https?:\/\/(?![\w.-]+\.(?:auto|map|center)[^\w.-]?)\S*/i;function o(e){try{return new URL(e),!0}catch(e){return!1}}function s(e){return i.I6(e,"url").concat(i.I6(e,"email")).filter(e=>!!o(e.href)&&a.test(e.href))}},434317:(e,r,n)=>{n.d(r,{Y:()=>d});var i=n(848318),a=n(442313),o=n(689575),s=n(574172),l=n(503024),c=n(633930);function d({userId:e,onMuteButtonClickCallback:r,disabled:n,className:d,disabledClassName:u}){let p=o.h.getInstance(),[m,h]=(0,i.useState)(null),_=(0,s.TI)(e,p),g=(0,i.useCallback)(async()=>{!n&&void 0!==_&&p&&(await r(_,p),h(_?"unmute":"mute"))},[_,r,h,p,n]);return i.useEffect(()=>{h(null)},[_]),i.createElement("button",{className:n?u:d,onClick:g,"data-tooltip-type":l.Ib.TEXT,"data-tooltip":n?(0,a.t)("collaboration.voice.check_your_microphone_permissions_to_start_chatting"):_?(0,a.t)("collaboration.voice.click_to_unmute"):(0,a.t)("collaboration.voice.click_to_mute"),"data-tooltip-timeout-delay":n?50:void 0,"aria-label":(0,a.t)("fullscreen.toolbar.mute-audio-button"),"data-fullscreen-intercept":!0},n||"unmute"!==m&&("mute"===m||_)?i.createElement(c.A.Muted,{size:32}):i.createElement(c.A.Unmuted,{size:32}))}},419521:(e,r,n)=>{var i=n(39773);(0,i.eU)(null),(0,i.eU)(null)},382326:(e,r,n)=>{n.d(r,{HX:()=>h,ad:()=>f,te:()=>m,xQ:()=>_});var i=n(992277),a=n(897392);n(157907),n(39773),n(653959);var o=n(502255);n(544339);var s=n(718451);n(369600),n(635547),n(574610);var l=n(919699);n(419521);let c=/(#[0-9]+:[0-9]+)/g;function d(e){if("string"==typeof e){let r=e.toLowerCase();if("true"===r||"yes"===r||"on"===r)return!0;if("false"===r||"no"===r||"off"===r)return!1}return e}function u(e){return e.replace(/\s+/g," ")}function p(e){return e.replace(c,"").replace(/\s+/g," ").trim()}function m(e){return(e?.publishID&&e?.publishID!==a.AD?e?.publishID:e?.guid)??null}function h(e,r,n){let i=r.get(e);if(!i)return{backingLibraryKey:null,backingNodeId:null};let{backingSymbolGUID:a,backingStateGroupGUID:o}=(0,l.nD)(new Set([(i?.type==="INSTANCE"?i?.symbolId:i?.guid)??""]),r),c=null,d=null;if((0,s.gl)(a)||null===a||(c=r.get(a)),(0,s.gl)(o)||null===o||(d=r.get(o)),"INSTANCE"===i.type&&i.symbolId){let e=r.get(i.symbolId);if(e?.isState){let e=d?.sourceLibraryKey;return{backingNodeId:m(d),backingComponentKey:c?.componentKey??void 0,backingStateGroupKey:d?.stateGroupKey??void 0,backingLibraryKey:""!==e?e:n}}{let e=c?.sourceLibraryKey;return{backingNodeId:m(c),backingComponentKey:c?.componentKey??void 0,backingLibraryKey:""!==e?e:n}}}return"SYMBOL"===i.type?i.isState?{backingNodeId:m(i.parentNode),backingLibraryKey:i.parentNode?.sourceLibraryKey&&i.parentNode?.sourceLibraryKey!==""?i.parentNode?.sourceLibraryKey:n}:{backingNodeId:m(i),backingLibraryKey:""!==i.sourceLibraryKey?i.sourceLibraryKey:n}:{backingLibraryKey:null,backingNodeId:null}}function _({codeConnect:e,node:r,label:n,filePermissionData:a}){let s=a?.file?.status==="loaded"&&!a.file.data?.hasPermission,l=e.map(e=>e.label).filter(Boolean).sort((e,r)=>e.localeCompare(r))??[],c=function(e,r){let n=[e=>"figmadoc"===e.type&&"React"===e.label,e=>"figmadoc"===e.type&&"Storybook"===e.label,e=>"figmadoc"===e.type&&"SwiftUI"===e.label,e=>"snippet"===e.type];for(let i of(r&&n.unshift(e=>e.label===r),n)){let r=e.find(i);if(r)return r}return e[0]}(e,n);if(!c||s)return{id:null,updatedAt:null,doc:null,loaded:!0,availableLabels:l,instanceFigmadocs:{},disabled:!1};let m=[],h={};try{c.instanceFigmadocs&&(h=Object.fromEntries(Object.entries(c.instanceFigmadocs).map(([e,r])=>[e,JSON.parse(r)])))}catch{}try{m=JSON.parse(c.figmadoc)}catch(e){return(0,o.$D)(i.e.DEVELOPER_TOOLS,e,{extra:{figmadoc:c.figmadoc}}),{id:null,updatedAt:null,doc:null,loaded:!0,availableLabels:l,instanceFigmadocs:{},disabled:!0}}let{id:_,updatedAt:g}=c;return(Array.isArray(m)||(m=[m]),"type"in m[0]&&"snippet"===m[0].type)?{id:_,updatedAt:g,doc:m[0],loaded:!0,availableLabels:l,instanceFigmadocs:h,disabled:!1}:"template"in m[0]?{id:_,updatedAt:g,doc:function(e,r){let n=0,a=null,s=function(e){try{if("INSTANCE"===e.type)return Object.entries(e.componentProperties()).reduce((e,[r,n])=>({...e,[p(r)]:n}),{});if("SYMBOL"===e.type){if(e.isState)return function(e){if(!e.parentNode)return{};let r=Object.entries(e.variantProperties()??{}).reduce((e,[r,n])=>({...e,[r]:{value:n,type:"VARIANT"}}),{});return Object.entries(e.parentNode.componentPropertyDefinitions()).reduce((e,[r,n])=>"VARIANT"===n.type?e:{...e,[p(r)]:{value:n.defaultValue,type:n.type}},{...r})}(e);return Object.entries(e.componentPropertyDefinitions()).reduce((e,[r,n])=>({...e,[p(r)]:{value:n.defaultValue,type:n.type}}),{})}}catch(e){"Component set for node has existing errors"!==e.message&&(0,o.$D)(i.e.DEVELOPER_TOOLS,e)}return{}}(r);for(let r of e){let e=0;Object.entries(r.variant??{}).every(([r,n])=>{let i=u(r),a=Object.entries(s).reduce((e,[r,n])=>({...e,[u(r)]:{type:n.type,value:d(n.value)}}),{})[i];return a?.value===d(n)?(e++,!0):void 0===a})&&(!a||e>n)&&(a=r,n=e)}return a}(m,r),instanceFigmadocs:h,loaded:!0,availableLabels:l,disabled:!1}:{id:_,updatedAt:g,doc:null,loaded:!0,availableLabels:l,instanceFigmadocs:h,disabled:!0}}var g=(e=>(e[e.Continue=0]="Continue",e[e.SkipChildren=1]="SkipChildren",e[e.Stop=2]="Stop",e))(g||{});function f(e,r,n,i,a){if(!n)return[];let o=new Set,c=r.get(e);return c?(!function(e,r,n,i){let a=[e];for(;a.length>0;){let e=a.pop();if(e){let o=n(e);if(2===o)return;if(1===o)continue;for(let n of i?e.visibleChildren:e.childrenGuids){let e=r.get(n);e&&a.push(e)}}}}(c,r,e=>{if("INSTANCE"===e.type){let n=function(e,r,n){if("INSTANCE"!==e.type)return null;let i=e.symbolId;if(!i)return null;let a=function(e,r,n){let{backingSymbolGUID:i,backingStateGroupGUID:a}=(0,l.nD)(new Set([e]),r);if((0,s.gl)(i)||null===i)return null;let o=r.get(i),c=(0,s.gl)(a)||null===a?null:r.get(a);return c?{backingNodeId:m(c),backingLibraryKey:""!==c.sourceLibraryKey?c.sourceLibraryKey:n}:o?{backingNodeId:m(o),backingLibraryKey:""!==o.sourceLibraryKey?o.sourceLibraryKey:n}:null}(i,r,n);if(!a)return null;let{backingNodeId:o,backingLibraryKey:c}=a;return c+","+o}(e,r,a);n&&o.add(n)}},!i),Array.from(o.values())):[]}},5506:(e,r,n)=>{n(848318),n(716544),n(157907),n(39773),n(493554),n(51910),n(369600),n(635547);var i=n(997894);n(778727),n(153059),n(196584);var a=n(985265);n(419521),n(382326),i.M4.Query({fetch:async({nodes:e})=>0===e.length?{}:(await a.Q.getComponentNames(e)).data.meta.componentsById,stalenessPolicy:"never"})},471915:(e,r,n)=>{n.d(r,{d:()=>g});var i=n(992277),a=n(157907),o=n(498363),s=n(892007),l=n(141039),c=n(379338),d=n(831932),u=n(502255),p=n(761669),m=n(837597),h=n(980645),_=n(797221);class g{constructor(){this.permissionRequestMade=!1;let e=(0,c.Ay)().firebase_cloud_messaging_browser_notifications;this.config={apiKey:e?.api_key,authDomain:e?.auth_domain,projectId:e?.project_id,storageBucket:e?.storage_bucket,messagingSenderId:e?.messaging_sender_id,appId:e?.app_id},this.vapidKey=e?.vapid_id;let r=(0,o.Wp)(this.config);this.messaging=(0,s.dG)(r);try{this.registerOnMessageListener(),this.registerVisibilityChangeListener(),this.updateServiceWorker()}catch(e){(0,u.$D)(i.e.WAYFINDING,Error("An issue was encountered while instantiating Firebase Messaging Service"))}}static getInstance(){return g.instance??=new g,g.instance}async registerServiceWorker(){return this.serviceWorkerRegistration=await navigator.serviceWorker.register(Fig.firebaseMessagingServiceWorkerURL,{type:"module"}),Promise.resolve(this.serviceWorkerRegistration)}async getServiceWorkerRegistration(){return this.serviceWorkerRegistration||(this.serviceWorkerRegistration=await navigator.serviceWorker.getRegistration(Fig.firebaseMessagingServiceWorkerURL)),Promise.resolve(this.serviceWorkerRegistration)}registerOnMessageListener(){this.onMessageUnsubscribe=(0,s.xD)(this.messaging,async e=>{if(!e.data||!e.data.title||!e.data.body)return;let r=await this.getServiceWorkerRegistration(),n=e.data;m.g.trackNotificationReceived(n);let{notificationTitle:i,notificationOptions:a}=(0,_.T)({notificationPayload:n,isBackgroundPush:!1,additionalOptions:{tag:e.messageId}});r?.showNotification(i,a)})}registerVisibilityChangeListener(){document.addEventListener("visibilitychange",e=>{"visible"===document.visibilityState?this.onMessageUnsubscribe||this.registerOnMessageListener():(this.onMessageUnsubscribe?.(),this.onMessageUnsubscribe=void 0)},!1)}async updateServiceWorker(){let e=await this.getServiceWorkerRegistration(),r=await navigator.permissions.query({name:"notifications"}),n=await this.updateServiceWorkerOnPermissionChange(r),i=!1;return"granted"!==r.state||n||e?.active?.scriptURL===Fig.firebaseMessagingServiceWorkerURL||(await this.unregisterServiceWorker(),await this.registerServiceWorkerWhenPermissionGranted(),i=!0),n||i}async updateServiceWorkerOnPermissionChange(e){return"granted"!==e.state?(this.unregisterServiceWorker(),!0):await this.getServiceWorkerRegistration()?(this.sendFirebaseTokenToServer(),!1):(this.registerServiceWorkerWhenPermissionGranted(),!0)}async unregisterServiceWorker(){let e=await this.getServiceWorkerRegistration();e?.unregister()}async sendFirebaseTokenToServer(){let e=await this.getServiceWorkerRegistration(),r=await (0,s.gf)(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:e});p.sr.sendFirebaseToken({firebaseToken:r}),m.g.trackTokenRegistered(h.iX.INTERNAL)}async registerServiceWorkerWhenPermissionGranted(){await this.registerServiceWorker(),this.sendFirebaseTokenToServer()}async shouldRequestPermission(){try{let[e,r]=await Promise.all([navigator.permissions.query({name:"notifications"}),this.getServiceWorkerRegistration()]);if("granted"===e.state){r?.update();let e=!!r;return e&&this.sendFirebaseTokenToServer(),!e}if("denied"===e.state)return!1;return!0}catch(e){return!1}}async requestPermission(e){m.g.trackPermissionRequest(e);let r=await Notification.requestPermission();if("granted"===r){let e=await this.registerServiceWorker(),r=await (0,s.gf)(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:e});return{status:h.Ke,token:r}}return"denied"===r?{status:h._F}:{status:h.Jr}}static createInstance(){return g.isBrowserNotificationSupported()?this.getInstance():null}static isUserOnMobileDevice(){return d.Xb}static isBrowserNotificationSupported(){let e="serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window;return!!(0,a.k)().browser_notifications&&!l.eD&&!g.isUserOnMobileDevice()&&e}static async requestPushNotifications(e,r){if(!g.isBrowserNotificationSupported())return;let{browserNotificationConfig:n}=r;if(!n())return;let a=g.getInstance();if(await a.shouldRequestPermission()&&!a.permissionRequestMade){a.permissionRequestMade=!0;try{let r=await a.requestPermission(e);r.status===h.Ke?(p.sr.sendFirebaseToken({firebaseToken:r.token}),m.g.trackTokenRegistered(e)):m.g.trackTokenBlocked(r.status)}catch(e){(0,u.$D)(i.e.WAYFINDING,Error("Could not request permission for firebase token")),m.g.trackTokenFailed()}}}}},980645:(e,r,n)=>{n.d(r,{Jr:()=>o,Ke:()=>i,_F:()=>a,iX:()=>s});let i="granted",a="denied",o="unknown";var s=(e=>(e.COMMENT_REPLY="comment_reply",e.INTERNAL="internal",e.NEW_COMMENT="new_comment",e.NOTIFICATION_BELL="notification_bell",e))(s||{})},440702:(e,r,n)=>{n.d(r,{i:()=>u});var i=n(848318),a=n(716544),o=n(39773),s=n(718451),l=n(52004),c=n(353515);let d={strokeWeight:"strokeWeight",paints:"strokePaints",strokeBrushGuid:"strokeBrushGuid"};function u(e,r){let[n,u]=(0,o.fp)(e),p=(0,a.d4)(e=>e.mirror.selectionProperties.numSelected),m=d[r],[h,_]=(0,l.lJ)(m),g=(0,s.E7)(h),f=(0,c.AP)(),E=!!p||f;return[E?g:n[r],(0,i.useCallback)(e=>{u(n=>({...n,[r]:e})),E&&_(e)},[u,_,r,E])]}},319523:(e,r,n)=>{n.d(r,{NS:()=>l,_c:()=>c,lr:()=>o,q1:()=>s,yw:()=>d,zY:()=>a});var i=n(794321);let a=i.C,o=i.C,s=i.C,l=i.C;i.C;let c=i.C,d=i.C},911449:(e,r,n)=>{n.d(r,{X:()=>u,v:()=>p});var i=n(379338),a=n(322627),o=n(831932);let s=o.XN?"iPadOS":o.Ay.osname,l=o.XN?0:+o.Ay.osversion;function c(e){let r=window.navigator.languages||[];return e<r.length?r[e]:void 0}let d={browser_name:o.Ay.name,browser_version:+o.Ay.version,os_name:s,os_version:l,release:i.tl().release_manifest_git_commit,release_tag:i.tl().release_git_tag,page_locale:i.mm()[0],navigatorLanguage1:c(0),navigatorLanguage2:c(1),navigatorLanguage3:c(2),navigatorLanguages:(window.navigator.languages||[]).join(","),uiVersion:(0,a.fF)()};function u(){return d}function p(e){d={...d,...e}}},716245:(e,r,n)=>{n.d(r,{Mx:()=>p,NY:()=>c,Ok:()=>s,uW:()=>d,ux:()=>l,xj:()=>m,yx:()=>u});var i=n(925025);let a={status:i.r.INIT},o={status:i.r.LOADING};function s(){return a}function l(){return o}function c(e){return{status:i.r.SUCCESS,value:e}}function d(e){return{status:i.r.FAILURE,error:e}}function u(e){return e.status===i.r.INIT}function p(e){return e.status===i.r.LOADING}function m(e){return e.status===i.r.SUCCESS}},35030:(e,r,n)=>{n.d(r,{Fe:()=>p,GH:()=>h,ce:()=>c,cm:()=>u}),n(848318);var i=n(39773),a=n(579020),o=n(911449),s=n(831932),l=n(502255);function c(){return!!(s.Ay.chromeos&&window.matchMedia("(display-mode: tabbed)").matches)}let d=/^\/(files|idle_timeout|ip_account_restriction|my_plugins|user|org|team)(\/.*)?$/;function u(e){return d.test(e)||"/"===e||""===e}function p(e){document.body.style.backgroundColor="#2c2c2c"}let m=(0,i.eU)(null);function h(){_(),s.Ay.chromeos&&s.Ay.chrome&&(window.matchMedia("(display-mode: tabbed)").addEventListener("change",()=>{c()&&(p("dark"),_())}),window.addEventListener("appinstalled",()=>{(0,a.sx)("chrome_os_app_installed")}),window.addEventListener("beforeinstallprompt",e=>{i.zl.set(m,e)}))}function _(){let e=c();(0,l.kF)("chrome_os_app",e),e&&(0,o.v)({browser_name:"Figma ChromeOS App"})}},543072:(e,r,n)=>{n.d(r,{$q:()=>_,AW:()=>R,Bx:()=>x,DA:()=>q,FN:()=>l,FO:()=>m,F_:()=>F,G$:()=>L,GL:()=>N,H0:()=>f,HD:()=>A,HL:()=>w,J1:()=>U,UE:()=>s,Uv:()=>o,X9:()=>g,YN:()=>u,YR:()=>j,YU:()=>k,_W:()=>v,di:()=>S,e3:()=>d,mx:()=>y,ol:()=>c,ql:()=>O,sN:()=>P,tK:()=>E,tM:()=>p,ty:()=>C,x1:()=>h});var i=n(464437),a=n(208720);let o={r:0,g:0,b:0,a:1},s={r:1,g:1,b:1,a:1},l=s;var c=(e=>(e.MULTIPLAYER_GRAY="#667799",e.MULTIPLAYER_BLUE="#007BE5",e.MULTIPLAYER_PURPLE="#9747FF",e.MULTIPLAYER_PINK="#FF24BD",e.MULTIPLAYER_RED="#F24822",e.MULTIPLAYER_YELLOW="#FFCD29",e.MULTIPLAYER_GREEN="#14AE5C",e))(c||{});let d="var(--color-textondarkcanvas, #ffffff)",u="var(--color-textonlightcanvas, #000000)",p="inset 0px 0px 0px 1px rgba(255, 255, 255, 0.15)",m="inset 0px 0px 0px 1px rgba(0, 0, 0, 0.1)",h="inset 0px 0px 0px 2px var(--color-bordertranslucent)",_={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function g(e,r){return{...e,a:r}}function f(e,r){if(!e)return null;if("string"!=typeof e)return e;let n=null!=r,i=r??1;return function(e,r=1){let n=e.match(/color\(\s*display-p3\s*(?<red>[-+]?[0-9]*\.?[0-9]+)\s+(?<green>[-+]?[0-9]*\.?[0-9]+)\s+(?<blue>[-+]?[0-9]*\.?[0-9]+)\s*(?:\/\s*(?<alpha>[-+]?[0-9]*\.?[0-9]+%?))?\s*\)/);if(n&&n.groups&&"red"in n.groups&&"green"in n.groups&&"blue"in n.groups){let{red:e,green:i,blue:a,alpha:o}=n.groups;return{r:parseFloat(e),g:parseFloat(i),b:parseFloat(a),a:o?parseFloat(o):r}}return null}(e,i)??S(e,i)??y(e,i)??E(e,n,i)??null}function E(e,r=!1,n=1){let i=/[^0-9a-f]*([0-9a-f]*)/i.exec(e.trim());if(!i)return null;let a=i[1];if(a.length>=8&&r)return D(V(a.substring(0,2)),V(a.substring(2,4)),V(a.substring(4,6)),V(a.substring(6,8)));if(7===a.length&&r)return D(V(a.substring(0,2)),V(a.substring(2,4)),V(a.substring(4,6)),B(a[6]));if(a.length>=6)return D(V(a.substring(0,2)),V(a.substring(2,4)),V(a.substring(4,6)),n);if(5===a.length&&r)return D(B(a[0]),B(a[1]),B(a[2]),V(a.substring(3,5)));if(4===a.length&&r)return D(B(a[0]),B(a[1]),B(a[2]),B(a[3]));if(a.length>=3)return D(B(a[0]),B(a[1]),B(a[2]),n);if(2===a.length){let e=V(a);return D(e,e,e,n)}else if(1===a.length){let e=B(a);return D(e,e,e,n)}return null}function y(e,r=1){let n;return(n=X.exec(e=e.trim()))?D(H(n[1]),H(n[2]),H(n[3]),null==n[4]?r:W(n[4])):(n=Z.exec(e))?D(G(n[1]),G(n[2]),G(n[3]),null==n[4]?r:W(n[4])):(n=J.exec(e))?function(e,r,n,i){if(0===r)return D(n,n,n,i);let a=n<.5?n*(1+r):n+r-n*r,o=2*n-a,s=[0,0,0];for(let r=0;r<3;++r){let n=e+-(1/3*(r-1));n<0&&++n,n>1&&--n,6*n<1?s[r]=o+(a-o)*6*n:2*n<1?s[r]=a:3*n<2?s[r]=o+(a-o)*(2/3-n)*6:s[r]=o}return D(s[0],s[1],s[2],i)}(z(n[1]),H(n[2]),H(n[3]),null==n[4]?r:W(n[4])):(n=Q.exec(e))?function(e,r,n,i){let a=(100*e+16)/116,o=r/500+a,s=a-n/200,l=e=>{let r=e**3;return r>b?r:(e-16/116)/7.787};a=l(a);let c=e=>e>.0031308?1.055*e**(1/2.4)-.055:12.92*e,d=c(3.2404542*(o=95.047*l(o)/100)+-1.5371385*a+-.4985314*(s=108.883*l(s)/100)),u=c(-.969266*o+1.8760108*a+.041556*s),p=c(.0556434*o+-.2040259*a+1.0572252*s);return D(Y(d),Y(u),Y(p),i)}(H(n[1]),parseFloat(n[2]),parseFloat(n[3]),null==n[4]?r:W(n[4])):(n=ee.exec(e))?(0,a.I0)({l:K(n[1],.01),c:K(n[2],.004),h:z(n[3]),a:null==n[4]?r:W(n[4])}):(n=et.exec(e))?(0,a.oq)({l:K(n[1],.01),ax:K(n[2],.01),bx:parseFloat(n[3]),a:null==n[4]?r:W(n[4])}):null}let b=(6/29)**3;function v(e,r){return I(T(e),T(r))/.002741735}let T=e=>{let r,n,i,a=1-(1-e.r/255)*e.a,o=1-(1-e.g/255)*e.a,s=1-(1-e.b/255)*e.a;return r=(.4124*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)+.3576*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92)+.1805*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92))/.95047,n=(.2126*a+.7152*o+.0722*s)/1,i=(.0193*a+.1192*o+.9505*s)/1.08883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,{l:116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,a:500*(r-n),b:200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))}},I=(e,r)=>{let n=e.l-r.l,i=e.a-r.a,a=e.b-r.b,o=Math.sqrt(e.a*e.a+e.b*e.b),s=o-Math.sqrt(r.a*r.a+r.b*r.b),l=i*i+a*a-s*s,c=n/1,d=s/(1+.045*o),u=(l=l<0?0:Math.sqrt(l))/(1+.015*o),p=c*c+d*d+u*u;return p<0?0:Math.sqrt(p)};function S(e,r=1){let n=_[e.toLowerCase()];return n?E(n,!1,r):null}function w(e){return{r:$(e.r),g:$(e.g),b:$(e.b),a:$(e.a)}}function A(e,r=.627){let n=f(e);return!!n&&U(n)<r}function C(e){if(!e)return!0;let r=f(e);return!r||r?.a===0}function N(e){return A(e)?d:u}function L(e){return A(e)?"var(--color-textondarkcanvassecondary, rgba(255,255,255,0.6))":"var(--color-textonlightcanvassecondary, rgba(0,0,0,0.6))"}function O(e,r,n){let i=f(e),a=f(r);if(!i||!a)return;let o=P(i,a),s=U(i),l=U(o);if(n){let e=U(a);return"light"===n&&e>.9||"dark"===n&&e<.25?h:void 0}return s<.2&&l<s+.1?p:s>.8&&.1>Math.abs(l-s)?m:void 0}function R(e=[]){function r(e){return null!=e}let n=e.map(e=>{if("SOLID"===e.type)return e.color;let n=(e.stops??[]).map(e=>e.color).filter(r);if(n.length)return P(...n)}).filter(r);return n.length?P(...n):void 0}function P(...e){return e.reduceRight((e,r)=>{let n=r.a,i=e.a,a=n*(1-i),o=a+i,s=a/o,l=i/o;return{r:r.r*s+e.r*l,g:r.g*s+e.g*l,b:r.b*s+e.b*l,a:o}})}function D(e,r,n,i=1){return isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i)?null:{r:e,g:r,b:n,a:i}}function M({r:e,g:r,b:n,a:i}){return{r:Math.round(255*e),g:Math.round(255*r),b:Math.round(255*n),a:Math.round(255*i)}}function k(e){let{r,g:n,b:i}=M(e);return`rgba(${r}, ${n}, ${i}, ${e.a})`}function F(e){let{r,g:n,b:i,a}=M(e),o=Math.min(Math.max(0,n),255),s=Math.min(Math.max(0,i),255),l=Math.min(Math.max(0,a),255),c=Math.min(Math.max(0,r),255).toString(16).padStart(2,"0"),d=o.toString(16).padStart(2,"0"),u=s.toString(16).padStart(2,"0"),p=l.toString(16).padStart(2,"0");return 255===l?`#${c}${d}${u}`:`#${c}${d}${u}${p}`}function x(e){switch(e){case"legacy":return"#e5e5e5";case"light":default:return"#f5f5f5";case"dark":return"#1e1e1e"}}function U(e){return .299*e.r+.587*e.g+.114*e.b}function B(e){return V(`${e}${e}`)}function V(e){return $(parseInt(e,16))}function G(e){return $(parseFloat(e))}function H(e){return Y(.01*parseFloat(e))}function K(e,r){return e.endsWith("%")?Y(parseFloat(e)*r):parseFloat(e)}function W(e){return e?e.includes("%")?H(e):Y(parseFloat(e)):1}function z(e){let r=parseFloat(e),n=0;return n=e.includes("grad")?.9*r:e.includes("rad")?180*r/Math.PI:e.includes("turn")?360*r:r,(n=(0,i._g)(n,360))/360}function $(e){return Y(e/255)}function Y(e){return(0,i.qE)(e,0,1)}function j(e){return e&&!isNaN(e.r)&&!isNaN(e.g)&&!isNaN(e.b)&&e.r>=0&&e.r<=1&&e.g>=0&&e.g<=1&&e.b>=0&&e.b<=1}function q(e,r){let{r:n,g:a,b:o,a:s}=e,{r:l,g:c,b:d,a:u}=r;return(0,i.xN)(n,l)&&(0,i.xN)(a,c)&&(0,i.xN)(o,d)&&(0,i.xN)(s,u)}let X=/^(?:rgba?\()?\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,Z=/^(?:rgba?\()?\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,J=/^(?:hsla?\()?\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,Q=/^(?:lab?\()?\s*([0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,ee=/^(?:oklch?\()\s*([0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?))?\s*\)?\s*;?$/,et=/^(?:oklab?\()\s*([0-9]*\.?[0-9]+%?)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/},314078:(e,r,n)=>{n.d(r,{Eg:()=>P,Hd:()=>p,Wn:()=>u,jA:()=>d});var i=n(464437);n(980399);var a=n(771674),o=n(615893),s=n(129102),l=n(226949),c=n(543072);function d(e,r,n="IGNORE",i){if(!e||!(0,c.YR)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;if(r<0||r>1e3)return console.warn("Invalid value passed into calculateColorWithRampValue. Ensure value is between 0 and 1000",r),null;let a=E(e),o=T(a),s=I(a.hsluv_l,o);if(i){let{LESS_THAN:r,GREATER_THAN:n}=i;if(r&&100*s<r||n&&100*s>n)return e}return v(a,r/1e3,o,s),"IGNORE"!==n&&C(a,"BLACK"===n||"BLACK_AND_WHITE"===n,"WHITE"===n||"BLACK_AND_WHITE"===n),f(a)}function u(e){if(!e||!(0,c.YR)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;let r=E(e),n=T(r);return Math.floor(100*I(r.hsluv_l,n))}function p(e,r,n="IGNORE"){if(!e||!(0,c.YR)(e))return console.warn("Invalid color passed to calculateColorWithRelativeAdjustment. Ensure r, g, b, and a are between 0 and 1",e),null;if(r<-1||r>1)return console.warn("Invalid percentage passed into calculateColorWithRelativeAdjustment. Ensure percentage is between -1 and 1",r),null;let i=E(e),a=T(i),o=i.hsluv_l,s=o;s=r>0?o+(100-o)*r:o*(1- -1*r);let l=I(o,a);return v(i,I(s,a)/10,a,l),"IGNORE"!==n&&C(i,"BLACK"===n||"BLACK_AND_WHITE"===n,"WHITE"===n||"BLACK_AND_WHITE"===n),f(i)}let m=["red","orange","yellow","green","blue","purple"],h={red:{a:-.079,b:16.1},orange:{a:-2.55,b:56.4},yellow:{a:-4.26,b:81.7},green:{a:1.67,b:131},blue:{a:3.4,b:227},purple:{a:.0136,b:282}},_={red:{d:95.2,c:-3.15,b:1.3,a:-.159},orange:{d:108,c:-11.7,b:2.8,a:-.183},yellow:{d:76.3,c:-3.03,b:1.96,a:-.151},green:{d:102,c:-44.8,b:11.8,a:-.776},blue:{d:95.5,c:-10.7,b:3.71,a:-.306},purple:{d:95.6,c:-2.82,b:1.43,a:-.189}},g={red:{d:96.4,c:-.7,b:-2.01,a:.125},orange:{d:103,c:-6.98,b:.0827,a:-.0256},yellow:{d:102,c:-5.84,b:.849,a:-.0972},green:{d:96.5,c:2.77,b:-2.86,a:.171},blue:{d:97.5,c:.173,b:-2.12,a:.127},purple:{d:98.1,c:-2.29,b:-1.94,a:.132}},f=e=>(e.hsluvToRgb(),{r:(0,i.qE)(e.rgb_r,0,1),g:(0,i.qE)(e.rgb_g,0,1),b:(0,i.qE)(e.rgb_b,0,1),a:1}),E=e=>{let r=new a.h;return r.rgb_r=e.r,r.rgb_g=e.g,r.rgb_b=e.b,r.rgbToHsluv(),r},y={red:1,orange:.75,yellow:.6,green:1,blue:1.1,purple:1};function b(e){if((0,o.f)(e,c.UE)<=S)return N(e);let r=E(e),n=new a.h;if(n.hsluv_h=r.hsluv_h,r.hsluv_l<=10)return n.hsluv_s=0,n.hsluv_l=60,f(n);if(r.hsluv_l<=30){let e=.03*r.hsluv_l;n.hsluv_s=r.hsluv_s*e}else n.hsluv_s=Math.min(100,1.5*r.hsluv_s);return n.hsluv_l=Math.min(100,.444*r.hsluv_l+55.555),O(n)}function v(e,r,n,i=5){r*=10;let a=h[n].a*i+h[n].b-e.hsluv_h;e.hsluv_h=h[n].a*r+h[n].b-a;let o=e.hsluv_s,s=_[n].a*i*i*i+_[n].b*i*i+_[n].c*i+_[n].d;e.hsluv_s=_[n].a*r*r*r+_[n].b*r*r+_[n].c*r+_[n].d,e.hsluv_s*=o/s,e.hsluv_l=g[n].a*r*r*r+g[n].b*r*r+g[n].c*r+g[n].d,e.hsluv_s>100&&(e.hsluv_s=100),e.hsluv_l>100&&(e.hsluv_l=100),e.hsluv_h>360&&(e.hsluv_h=360),e.hsluv_h<0&&(e.hsluv_h=0)}function T(e){let r={blue:0,yellow:0,green:0,purple:0,red:0,orange:0},n=e.hsluv_l/100;e.hsluvToRgb(),m.forEach(i=>{let o=new a.h;o.rgb_r=l.r[i].r,o.rgb_g=l.r[i].g,o.rgb_b=l.r[i].b,o.rgbToHsluv(),v(o,n,i,5),o.hsluvToRgb();let s=(0,c._W)(f(e),f(o));r[i]=s/y[i]});let i="yellow",o=r[i];for(let e in r)r[e]<o&&(o=r[e],i=e);return e.rgbToHsluv(),i}function I(e,r){let n=(0,i.Ae)(g[r].a,g[r].b,g[r].c,g[r].d-e),a=n.filter(e=>0<e&&e<10);return 1===a.length?a[0]:n.length>1?(n.sort(),n[Math.floor(n.length/2)]):e<50?11:-1}let S=1.31,w={BLACK:c.Uv,WHITE:c.UE},A=(e,r)=>{let{colorForContrastCheck:n,contrastMinimum:i}=r,a=()=>(0,o.f)(l,n),s=(0,c.HD)(n)?.1:-.1,l=f(e);for(;a()<i+.02&&(e.hsluv_l+=s,!(e.hsluv_l>100)&&!(e.hsluv_l<0));)l=f(e);return e.rgbToHsluv(),a()>=i+.02},C=(e,r,n)=>{let i;let a=f(e),s=(0,o.f)(c.UE,a),l=(0,o.f)(c.Uv,a);if(r&&n)i=l>=s?"BLACK":"WHITE";else{if(!r&&!n)return;i=r?"BLACK":"WHITE"}("BLACK"!==i||!(l>=4.5))&&("WHITE"===i&&s>=4.5||A(e,{contrastMinimum:4.5,colorForContrastCheck:w[i]}))},N=e=>({r:(0,i.qE)((e.r-1)/.55+1,0,1),g:(0,i.qE)((e.g-1)/.55+1,0,1),b:(0,i.qE)((e.b-1)/.55+1,0,1),a:1}),L=e=>{e.hsluvToRgb();let r=new a.h;return r.rgb_r=1-.55*(1-e.rgb_r),r.rgb_g=1-.55*(1-e.rgb_g),r.rgb_b=1-.55*(1-e.rgb_b),r.rgbToHsluv(),r},O=e=>{let r=L(e);return A(r,{contrastMinimum:S,colorForContrastCheck:w.WHITE}),N(f(r))};function R(e){let r=[],n=new Set;return e.forEach(e=>{let i=s.z5.format(e);n.has(i)||(n.add(i),r.push(e))}),r}function P(e){if(e)return{base:e,widget:e,baseLight:R(e.map(e=>p(e,.6,"BLACK_AND_WHITE")||c.Uv)),sticky:R(e.map(e=>d(e,400,"BLACK",{LESS_THAN:400})||c.Uv)),highlight:R(e.map(b)),pencilUI3:e,codeBlockTheme:e}}},193324:(e,r,n)=>{n.d(r,{B2:()=>h,H3:()=>I,I:()=>v,Kq:()=>b,Kx:()=>T,L4:()=>N,Pq:()=>A,Rc:()=>function e(r=[],n=!0){let i=(Array.isArray(r)?r:[{t:r}]).map(r=>{let n={t:null,styles:null,children:null,user:null,userId:null,link:null,isHashtag:null};if(r.user_annotated&&r.user_id)return{...n,userId:r.user_id,user:{...r.user_annotated,name:r.user_annotated.name??null,imgUrl:r.user_annotated.img_url}};if(r.profile_id||null===r.profile_id)return{...n,t:"@"+r.t,styles:["lightbold"]};let i={...n,t:r.t||n.t,styles:r.styles||n.styles,link:r.link||n.link};return r.children?.length&&(i.children=r.children.map(r=>({...n,children:e(r.children,!1)}))),i});if(n&&i.length){let e=i[i.length-1];e.t=e.t?.replace(/\s+$/g,"")??null}return i},Wf:()=>function e(r,n){if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++){let a=r[i],o=n[i];if(a.t!==o.t||a.user_id!==o.user_id)return!1;if(!g(a,o))return!1;if(a.profile_id!==o.profile_id)return!1;else if(a.link!==o.link)return!1;else if(!_(a,o))return!1;else if(!e(a.children??[],o.children??[]))return!1}return!0},_Z:()=>y,cs:()=>w,l5:()=>E,pV:()=>C,q:()=>S,sP:()=>function e(r=[]){if(!r)return"";let n=r.reduce((r,n)=>{let i=n.t||"",a=n.styles||[];n.user_annotated?(i=n.user_annotated.handle,a=["lightbold"]):n.profile_id||null===n.profile_id?(i="@"+n.t,a=["lightbold"]):n.children?.length?n.children.forEach((n,o)=>{(r||i)&&(i+="\n"),i+=a.includes("ol")?`${o+1}. `:"* ",i+=e(n.children)}):(i=(0,l.x6)(i).map(e=>"string"==typeof e?(0,u.hX)(e):`<span class="${m.mh}">${e.props["data-text"]}</span>`).join("\n"),n.link&&(a=["lightbold"]));let o=[];return a.forEach(e=>{"b"===e?o.push(m.hp):"lightbold"===e?o.push(m.XH):"i"===e?o.push(m.u5):"s"===e&&o.push(m.Vc)}),o.length&&(i=`<span class='${s()(...o)}'>`+i+"</span>"),r+i},"");return(0,d.F)(n)||""},vj:()=>f});var i=n(719670),a=n(988520),o=n(536384),s=n.n(o),l=n(586994),c=n(830789),d=n(855584),u=n(431118),p=n(701780),m=n(540111);let h=5,_=(e,r)=>{if((0,a.uy)(e.styles)&&(0,a.uy)(r.styles))return!0;if((0,a.uy)(e.styles)!==(0,a.uy)(e.styles))return!1;let n=e.styles?.filter(e=>!r.styles?.includes(e));return n?.length===0},g=(e,r)=>!!((0,a.uy)(e.user_annotated)&&(0,a.uy)(r.user_annotated))||(0,a.uy)(e.user_annotated)===(0,a.uy)(e.user_annotated)&&(0,i.c2)(e.user_annotated,r.user_annotated);var f=(e=>(e.EDITOR_MENTION="editor_mention",e.COMMUNITY_MENTION="community_mention",e.PLAIN_TEXT="plain_text",e.EMOJI="emoji",e.NONE="none",e))(f||{});function E(e){return 2===Object.keys(e).length&&Object.keys(e).includes("user_id")&&Object.keys(e).includes("user_annotated")?"editor_mention":2===Object.keys(e).length&&Object.keys(e).includes("profile_id")&&Object.keys(e).includes("t")?"community_mention":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")&&e.t&&(0,l.xM)(e.t)?"emoji":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")?"plain_text":"none"}function y(e=[],r){if(!e)return"";let n=e.reduce((e,r)=>{let n=r.t||"";return r.user_annotated?n=r.user_annotated.handle:r.profile_id||null===r.profile_id?n="@"+r.t:r.children?.length&&r.styles?.length?r.children.forEach((i,a)=>{(e||n)&&(n+="\n"),n+=r.styles.includes("ol")?`${a+1}. `:"* ",n+=y(i.children)}):r.styles?.length&&r.styles.includes("s")&&(n=""),e+n},"");return r?.includeTrailingWhitespace||(n=n.replace(/\s+$/g,"")),(0,d.F)(n)||""}function b(e,r){let n=y(e,r),i=(0,l.Bx)(n);return(globalThis.Intl?.Segmenter?Array.from(new Intl.Segmenter().segment(i)):Array.from(i)).length}function v(e){return 0===e.length||/^\s*$/.test(y(e))}function T(e){return v(e)||y(e).length<=5}function I(e){let r=!(e.activeThread?.id===c.hm&&e.newComment.discardAttempt<c.IT),n=e.activeThread?.id?e.threads[e.activeThread.id]:null,i=!(n&&!(n&&T(n.reply.messageMeta)&&0===Object.keys(n.reply.attachments||{}).length)&&(!n.discardAttempts||n.discardAttempts<c.IT));return r&&i}function S(e){return y(e).length>=17500}function w(e){if(!Array.isArray(e))return[];let r=function e(r){let n=[];return r.forEach(r=>{r.user_id?.includes("invite-")?r.t&&n.push(r.t):r.children&&n.push(...e(r.children))}),n}(e);return!function e(r){return r.forEach(r=>{r.user_id?.includes("invite-")?delete r.user_id:r.children&&e(r.children)}),r}(e),r}function A(e){return e.length>0&&(e[e.length-1].t=e[e.length-1].t?.trimEnd()),e}function C(e,r){let n=Math.min(Math.max(e.x,r.x),r.x+r.width),i=Math.min(Math.max(e.y,r.y),r.y+r.height);return new p.Mi(n,i)}function N(e){return e.includes("-")}},202767:(e,r,n)=>{n.d(r,{YD:()=>E}),n(848318),n(992277);var i=n(157907);n(502255);var a=n(878028);n(834996),n(579020);var o=n(507152);let s="BEGIN_NAVIGATION",l=(f("RecentFiles"),f("SharedFiles"),f("SharedProjects"),f("Drafts"),f("OrgAllWorkspaces"),f("Workspace"),f("Team"),f("Folder"),g("Sidebar"),g("MainBodyContent"),g("FileCreateEntrypoint"),["Sidebar","MainBodyContent","FileCreateEntrypoint"]),c=["Sidebar","MainBodyContent"],d=new Map([["RecentFiles",new Set(l)],["SharedFiles",new Set(l)],["SharedProjects",new Set(l)],["OrgAllWorkspaces",new Set(c)],["Workspace",new Set(c)],["Team",new Set(c)],["Drafts",new Set(l)],["Folder",new Set(l)]]),u=new Map([["RecentFiles",new Set([])],["SharedFiles",new Set],["SharedProjects",new Set],["OrgAllWorkspaces",new Set([])],["Workspace",new Set([])],["Team",new Set([])],["Drafts",new Set([])],["Folder",new Set([])]]),p={navigationMark:null,activeView:null},m=!!document.querySelector('meta[name="is_app_shell"]'),h=a.z.object({didInstaLoad:a.z.boolean(),navigationId:a.z.string().nullable()});function _(e){let r=h.safeParse(e.detail);return r.success?r.data:(reportErrorToSentry(FigmaTeam.WAYFINDING,Error("Invalid detail for contentful paint tracker mark"),{extra:{mark:e}}),null)}function g(e){return`ContentfulPaint:Component:${e}`}function f(e){return`ContentfulPaint:View:${e}`}function E(){(function({markName:e,didInstaLoad:r}){(0,i.k)().contentful_paint_performance_monitor&&performance.mark(e,{detail:{navigationId:e===s?(0,o.g)():null,didInstaLoad:r}})})({markName:s,didInstaLoad:!1})}},818754:(e,r,n)=>{function i(e){return parseInt(e.split("px")[0])}function a(e){return Number(e.split("px")[0])}n.d(r,{hG:()=>i,jz:()=>a})},218622:(e,r,n)=>{n.d(r,{y:()=>i});let i=n(848318).createContext(null)},592232:(e,r,n)=>{n.d(r,{Uc:()=>c,iZ:()=>l});var i=n(741419);n(157907);var a=n(171659),o=n(243973),s=n(846451);let l=new Map(Object.entries(i.XpX).map(([e,r])=>[e,r]));function c(){let e=s.dZ.get((0,s.v7)())||"UNKNOWN",r=o.y.isApple()?"mac":"!mac",n=function(){let e;if(!a.x4)return{};let r=a.x4.getItem("customKeyboardShortcuts");if(!r)return{};try{e=JSON.parse(r)}catch(e){console.error("[Custom Keyboard Shortcuts] Failed to parse from local storage",e)}return e}()??{};return n[e]?.[r]??{}}Object.entries(i.XpX).map(([e,r])=>[r,e])},666428:(e,r,n)=>{n.d(r,{yN:()=>v,ql:()=>T,lP:()=>I});var i=n(848318);n(716544);var a=n(430285),o=n(6819),s=n(858423),l=n(493554),c=n(884060),d=n(54018);n(652402);var u=n(298934),p=n(481540),m=n(635547),h=n(746948),_=n(989886),g=n(878028),f=n(379338),E=n(972813),y=n(494955);new class{constructor(){this.RecentPrototypesSchemaValidator=(0,E.YV)("RecentPrototypesSchemaValidator",e=>e.object({recent_prototypes:g.Ip.ignore(),recent_prototype_repos:g.Ip.ignore(),org_drafts_owners:e.array(y.WU)}),null,!1)}getRecentPrototypes(e){return this.RecentPrototypesSchemaValidator.validate(async({xr:r})=>await r.get("/api/recent_prototypes",E.td.toAPIParameters({...e,fuid:f.Ay().user_data?.id})))}};let b=null;async function v(e){if(!b)return;let r=[],n={},i=[];for(let a of b?.currentUser?.recentFiles2??[])a?.file?.key&&e.includes(a.file.key)&&(r.push({key:a.file.key,parent_org_id:a.file.parentOrgId,team_id:a.file.teamId,folder_id:a.file.folderId}),n[a.id]=null,i.push(a.file.key));let a=_.f.removeRecentFiles({fileKeys:i}),o=(0,s.WB)().optimisticallyDelete({RecentFile2:n},a);(0,p.OH)("File RecentFiles Removed",r),await o}function T(e){let r=(0,l.Rs)(m.wZi,{});return"loaded"===r.status&&(b=r.data),(0,i.useEffect)(()=>{r.status===a.H.LOADED&&S((0,h.YN)(r.data),e,!1)},[r,e]),i.useMemo(()=>r.transform(e=>(0,h.YN)(e).recent_files),[r])}function I(e){let r=(0,l.Rs)(m.wZi,{});return"loaded"===r.status&&(b=r.data),(0,i.useEffect)(()=>{r.status===a.H.LOADED&&S((0,h.YN)(r.data),e,!1)},[r,e]),i.useMemo(()=>r.transform(e=>(0,h.iP)(e)),[r])}function S(e,r,n){let i=e.recent_repos.map(e=>e.files).reduce((e,r)=>e.concat(r),[]);o.D.dispatch(c.uo({files:e.recent_files.concat(i),subscribeToRealtime:!1})),o.D.dispatch(u.nF({recent_repos:e.recent_repos,subscribeToRealtime:n})),o.D.dispatch(d.Kc({folderId:`recents-${r||"no-org"}`,state:"loaded"}))}},427008:(e,r,n)=>{n.d(r,{Xf:()=>f});var i,a=n(848318),o=n(397579),s=n(653959),l=n(757033),c=n(442313),d=n(570784),u=n(376780),p=n(997894),m=n(572699),h=n(668249),_=n(803437),g=n(43482);function f(e,r=!0){let n=(0,m.gI)({migrationGroup:h.L.GROUP_7,component:"useOrgBillingData"}),[l,d]=(0,s.IT)(i.orgBillingDataQuery(e),{enabled:r});(0,_.i)(l,(0,c.t)("org_billing_error_default"));let u=(0,o.ZC)(e),p=a.useMemo(()=>u!==e&&!!u,[e,u]),g=(0,o.ZC)(n),E=a.useMemo(()=>!1===g&&n&&l.data&&0===Object.keys(l.data).length,[n,l.data,g]),y=a.useMemo(()=>E||p,[E,p]);return(0,a.useEffect)(()=>{"loading"!==l.status&&y&&d.refetch()},[d,y,l.status]),l}(i||(i={})).orgBillingDataQuery=p.M4.Query({fetch:async e=>(await g.Eh.getBillingData({orgId:e})).data.meta,enabled:e=>!!e}),p.M4.Mutation(async(e,{query:r})=>{let{orgId:n,billingContacts:a,onRejected:o}=e,s=await l.Ay.put(`/api/orgs/${n}/billing_data`,{admin_email:a}).catch(e=>{throw o(e),e});r.mutate(i.orgBillingDataQuery(n),e=>{e&&(e.admin_email=s.data.meta.admin_email)})}),p.M4.Mutation(async(e,{query:r})=>{let n=await l.Ay.put(`/api/orgs/${e.orgId}/lock_invoice`,{license_quantities:e.licenseQuantities}).catch(r=>{throw e.onRejected(r),r}),a=i.orgBillingDataQuery(e.orgId);return r.mutate(a,e=>{e&&(e.invoices=n.data.meta.invoices)}),e.planInvoiceId?(r.refetch(a),await (0,d.jL)({planType:u.OL.ORG,planId:e.orgId})):await r.refetch(a),n.data.meta}),p.M4.Mutation((e,{query:r})=>{r.refetch(i.orgBillingDataQuery(e))})},922976:(e,r,n)=>{n.d(r,{G4:()=>E,IT:()=>y,SW:()=>_,Ul:()=>f,g4:()=>h,m8:()=>g,n:()=>p,v_:()=>m});var i=n(848318),a=n(430285),o=n(351766),s=n(493554),l=n(871117),c=n(376780),d=n(635547);let u=e=>(r,n)=>n?r.filter(r=>{let i=n[r];return!!i?.[e]}):[],p=u("canTrash"),m=u("canDuplicate"),h=u("canRestore"),_=u("canRestoreToOtherFolders"),g=u("canDeleteForever"),f=u("canMove"),E=u("isDraftFile");function y(e,r=!0){let n=(0,i.useMemo)(()=>e.map(e=>({fileKey:e})),[e]),u=(0,s.p)(d.XRI,n,{enabled:r});return(0,i.useMemo)(()=>a.Qw.all(u.map(e=>e.result)).transform(e=>{let r={};for(let n of e){let e=n.file;e&&(r[e.id]=function(e){let r=e.editorType===c._Y.WHITEBOARD&&e.org?.isFigJamDisabled||e.editorType===c._Y.SLIDES&&e.org?.isSlidesDisabled||e.editorType===c._Y.SITES&&e.org?.isSitesDisabled||e.editorType===c._Y.COOPER&&e.org?.isCooperDisabled||!1,n=e.canEdit,i=e.canEdit,a=e.canRename,s=!!e.project?.canView,d=!!e.project?.canEdit,u=!!(0,o.oA)(e.canTrash),p=!!(0,o.oA)(e.canMove),m=(0,o.oA)(e.canMoveWithReasons),h=(e.canEdit||!e.viewerExportRestricted)&&!r,_=!!(0,o.oA)(e.canRestore),g=!!(0,o.oA)(e.canRestoreToOtherFolders),f=e.canFavorite,E=e.isFavorited,y=e.isTeamTemplate,b=(0,l._R)(e.editorType??c._Y.DESIGN,e.currentPlanUser),v=e.isDraftFile,T=!!(0,o.oA)(e.canPermanentlyDelete),I=e.parentOrgId?"org":e.teamId?"team":null,S=e.parentOrgId||e.teamId||null;return{canEdit:n,canRename:a,canMove:p,canShowInProject:s,canPin:d,canTrash:u,canDuplicate:h,canRestore:_,canRestoreToOtherFolders:g,canFavorite:f,isFavorited:E,canDeleteForever:T,canUseInNewFile:y,canRestoreFromVersion:i,isFileTypeDisabled:r,canOpenMoveModal:!0,isUserRestrictedForSeat:b,planUser:e.currentPlanUser,planType:I,planId:S,isDraftFile:v,canMoveWithReasons:m}}(e))}return r}),[u])}},802078:(e,r,n)=>{n.d(r,{Q:()=>l});var i=n(848318),a=n(430285),o=n(493554),s=n(635547);function l(e,r=!0){let n=(0,i.useMemo)(()=>e.map(e=>({prototypeId:e})),[e]),c=(0,o.p)(s.vE,n,{enabled:r});return(0,i.useMemo)(()=>a.Qw.all(c.map(e=>e.result)).transform(e=>{let r={};for(let i of e){var n;let e=i.prototype;e&&(r[e.id]={canRead:(n=e).canRead,canFavorite:n.canRead&&!n.isFavorited,canUnfavorite:n.canRead&&n.isFavorited})}return r}),[c])}},64018:(e,r,n)=>{n.d(r,{CS:()=>_,Sk:()=>E,_H:()=>h,ae:()=>f,gX:()=>g,k8:()=>b,nL:()=>y,zj:()=>m});var i=n(848318),a=n(430285),o=n(351766),s=n(493554),l=n(871117),c=n(92537),d=n(376780),u=n(635547);let p=e=>(r,n)=>n?r.filter(r=>{let i=n[r];return!!i?.[e]}):[],m=p("canDelete"),h=p("canRestore"),_=p("canRestoreToOtherFolders"),g=p("canForeverDelete"),f=p("canMove"),E=p("isDraftRepo");function y(e,r,n){return n?e.filter(e=>{let i=r[e],a=n[e];return a?.isMainBranch(i)}):[]}function b(e,r=!0){let n=(0,i.useMemo)(()=>e.map(e=>({repoId:e})),[e]),p=(0,s.p)(u.rwE,n,{enabled:r});return(0,i.useMemo)(()=>a.Qw.all(p.map(e=>e.result)).transform(e=>{let r={};for(let n of e){let e=n.repo;e&&(r[e.id]=function(e){let r=e.canEdit,n=e.canMove,i=!!e.project?.canView,a=e.canEdit&&!e.isTrashed,s=e.canEdit&&e.isTrashed,u=e.isTrashed&&!!(0,o.oA)(e.sourceFile?.canRestore),p=(0,o.oA)(e.canMoveWithReasons),m=!!(e.isTrashed&&(0,o.oA)(e.sourceFile?.canRestoreToOtherFolders)),h=!!e.sourceFile?.isFavorited,_=e.canRead&&!!e.sourceFile&&!e.sourceFile.isFavorited,g=e.canRead&&!!e.sourceFile&&e.sourceFile.isFavorited,f=!!e.project&&e.canEdit,E=e.parentOrgId?"org":e.teamId?"team":null,y=e.parentOrgId||e.teamId||null,b=(0,l._R)(d._Y.DESIGN,e.currentPlanUser),v=(0,c.T9)(e?.project);return{canDelete:a,canRename:r,canShowInProject:i,isFavorited:h,canRestore:u,canRestoreToOtherFolders:m,canForeverDelete:s,canFavorite:_,canUnfavorite:g,isMainBranch:r=>r===e.sourceFile?.key,canMove:n,canEditBranch:r=>!!e.branches?.find(e=>e.key===r)?.canEdit,canPin:f,planId:y,planType:E,canOpenMoveModal:!0,isUserRestrictedForSeat:b,planUser:e.currentPlanUser,isDraftRepo:v,canMoveWithReasons:p}}(e))}return r}),[p])}},958214:(e,r,n)=>{n.d(r,{Av:()=>s,KV:()=>d,L2:()=>l,rT:()=>c,yd:()=>o,zZ:()=>u});var i=n(39773),a=n(792478);let o=(0,a.Wh)(()=>(0,i.eU)(null)),s=(0,a.Wh)(()=>(0,i.eU)(null)),l=(0,a.Wh)(()=>(0,i.eU)([]));(0,a.Wh)(()=>(0,i.eU)(null));let c=(0,a.Wh)(()=>(0,i.eU)(null)),d=(0,a.Wh)(()=>(0,i.eU)(null)),u=(0,a.Wh)(()=>(0,i.eU)(null));(0,a.Wh)(()=>(0,i.eU)(null)),(0,a.Wh)(()=>(0,i.eU)(null)),(0,a.Wh)(()=>(0,i.eU)(null))},708898:(e,r,n)=>{n.d(r,{F9:()=>_,FD:()=>I,G1:()=>u,Iy:()=>E,VA:()=>h,VG:()=>p,XC:()=>g,fY:()=>f,jq:()=>v,m7:()=>m,nE:()=>b,qL:()=>S,qZ:()=>d,u2:()=>T,v4:()=>y});var i=n(157907),a=n(39773),o=n(792478),s=n(542143),l=n(365581),c=n(150980);function d(){return!!((0,i.k)().aip_flower_garden&&(0,s.W7)())}function u(){return!!(0,i.k)().aip_flower_garden_library_selection}let p=(0,o.Wh)(()=>(0,a.eU)(new Map)),m=(0,o.Wh)(()=>(0,a.eU)(new Map(new Map)));(0,o.Wh)(()=>(0,a.eU)(e=>e(h).size));let h=(0,o.Wh)(()=>(0,a.eU)(new Set)),_=(0,o.Wh)(()=>(0,a.eU)(new Set)),g=(0,o.Wh)(()=>(0,a.eU)(new Set)),f=(0,o.Wh)(()=>(0,a.eU)(null)),E=(0,o.Wh)(()=>(0,a.eU)(new Map)),y=(0,o.Wh)(()=>(0,a.eU)({libraryVariables:[],libraryVariableSetIdToSet:{},status:"uninitialized",libraryKeys:new Set})),b=(0,o.Wh)(()=>(0,a.eU)(e=>{let r=e(l.uk),n=e(y),i={};return r.forEach(e=>{i[e.node_id]=e}),n.libraryVariables.forEach(e=>{i[e.node_id]=e}),i}));(0,o.Wh)(()=>(0,a.eU)(e=>({localVariableSets:e(l.qy),libraryVariableSets:e(y).libraryVariableSetIdToSet})));let v=(0,o.Wh)(()=>(0,a.eU)({status:"loading",styles:[]})),T=(0,a.eU)(c.td.UNINITIALIZED),I=(0,a.eU)(!1);(0,a.eU)([]);let S=(0,o.Wh)(()=>(0,a.eU)(new Map));(0,o.Wh)(()=>(0,a.eU)(new Map)),(0,o.Wh)(()=>(0,a.eU)(new Set))},150980:(e,r,n)=>{n.d(r,{td:()=>i});var i=(e=>(e.UNINITIALIZED="UNINITIALIZED",e.INITIALIZED="INITIALIZED",e.IDLE="IDLE",e.DETECTION_REQUESTED="DETECTION_REQUESTED",e.DETECTING="DETECTING",e.GROUPING_PENDING="GROUPING_PENDING",e))(i||{}),a=(e=>(e.LIBRARY_SELECTOR_INITIAL="LIBRARY_SELECTOR_INITIAL",e.LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW="LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW",e.LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW="LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW",e.ALL_VISUAL_GROUPS_VIEW="ALL_VISUAL_GROUPS_VIEW",e.SELECTED_VISUAL_GROUP_VIEW="SELECTED_VISUAL_GROUP_VIEW",e))(a||{}),o=(e=>(e.LOADING="LOADING",e.EMPTY="EMPTY",e.CONTENT="CONTENT",e.ERROR="ERROR",e))(o||{})},141039:(e,r,n)=>{n.d(r,{O_:()=>h,S8:()=>m,aw:()=>i.OpenTarget,eD:()=>u,fU:()=>E,hX:()=>p,hl:()=>f,y3:()=>y});var i=n(960805),a=n(911449),o=n(831932),s=n(502255),l=n(651418),c=n(681831),d=n(579631);let u=function(){let e=window.__figmaDesktop;return delete window.__figmaDesktop,e?new c.d(e):null}(),p=function(){let e=window.__figmaDesktopGetPopoutAPI?.();return e?.lockAPI(),e?new l.E(e):null}(),m=window.bellFeedAPI?window.bellFeedAPI:null;function h(e){return window.bellFeedAPI&&null!=window.bellFeedAPI.version&&window.bellFeedAPI.version>=e?window.bellFeedAPI:null}let _=u||p;_&&!navigator.userAgent.match(/figma-linux/)&&((0,a.v)({browser_name:"Figma Desktop",desktop_channel:_.beta?"beta":"stable",desktop_version:_.getInformationalVersion(),desktop_client_id:_.getClientID(),os_version:_.getOSVersion()}),(0,s.XM)("browser",{name:"Desktop",version:_.getInformationalVersion()}));let g=h(8);function f(){return(0,d.x5)(u?.getInformationalVersion()).status===d.JN.DISABLED}function E(){if(u&&o.Ay.mac){let[e,r]=`${o.Ay.osversion}`.split(".");return 10>+e||10==+e&&12>+r}return!1}function y(){return!!u}g&&(0,a.v)({browser_name:"Figma Desktop",desktop_version:g.desktopAppVersion,os_version:g.osVersion})},851112:(e,r,n)=>{n.d(r,{W2:()=>w,_A:()=>A,_p:()=>f,hW:()=>S,vn:()=>I});var i=n(157907),a=n(39773),o=n(171659),s=n(44509),l=n(405866),c=n(635547),d=n(834111),u=n(418835),p=n(322035),m=n(141039),h=n(6819),_=n(379338);let g=(()=>{if(o.Co){let e="initialPathName";if(o.Co[e])return o.Co[e];o.Co[e]=s.Ay.location.pathname}return s.Ay.location.pathname})();function f(){return!(0,p.GZ)()&&!m.eD&&!!(((0,_.tl)().editing_file||(0,_.tl)().link_password_input)&&E(y)||E(b))}function E(e){return e(g)&&e(s.Ay.location.pathname)}function y(e){return["/file/","/design/","/board/","/slides/"].some(r=>e.startsWith(r))}function b(e){let r=(0,d.YP)(e);return r.length>=4&&"files"===r[1]&&"feed-posts"===r[2]&&!!r[3]}let v="autoOpenInDesktopApp",T="openInDesktopAppMenuModal";function I(){return(0,i.k)().desktop_use_db_auto_open_pref?a.zl.get(C):o.x4?o.x4[v]:void 0}function S(e){o.x4&&(o.x4[v]=e),(0,i.k)().desktop_write_auto_open_pref&&(u.e.setPreferenceValue({key:"auto_open_in_desktop",value:e}),h.D.dispatch(l.b({user_changed_auto_open_pref:!0})))}function w(){return o.x4?o.x4[T]:void 0}function A(e){o.x4&&(o.x4[T]=e)}let C=(0,a.eU)(e=>{let r=e(c.imP.Query({})),n=_.tl().user_data?.auto_open_in_desktop;return"loaded"===r.status&&r.data?.currentUser?.userPreferences?.status==="loaded"&&(n=r.data.currentUser.userPreferences.data?.preferences.auto_open_in_desktop),n})},579631:(e,r,n)=>{n.d(r,{JN:()=>l,x5:()=>c});var i=n(463019),a=n(39773),o=n(95650);let s=[{minVersion:"124.4.0",date:"2025-02-21"},{minVersion:"124.5.0",date:"2025-04-03"},{minVersion:"124.6.0",date:"2025-04-22"},{minVersion:"124.7.0",date:"2025-05-21"},{minVersion:"125.1.0",date:"2025-08-13"},{minVersion:"125.2.0",date:"2025-08-28"},{minVersion:"125.3.0",date:"2025-09-20"}];var l=(e=>(e.SUPPORTED="SUPPORTED",e.DEPRECATED="DEPRECATED",e.DISABLED="DISABLED",e))(l||{});function c(e,r=(0,o.A)(),n=s){if(window.__figmaContent)return{status:"DISABLED"};if(null==e)return{status:"SUPPORTED"};if(!window.trustedTypes)return{status:"DISABLED"};if(1!==(0,i.Z)(e,"10.100.0")&&1===(0,i.Z)(e,"10.101.0"))return{status:"SUPPORTED"};for(let{minVersion:a,date:s}of n){if(1!==(0,i.Z)(e,a))continue;let n=(0,o.A)(s);if(n.isBefore(r))return{status:"DISABLED"};if(n.subtract(2,"month").isBefore(r))return{status:"DEPRECATED",date:n}}return{status:"SUPPORTED"}}let d=(0,a.E3)("last_dismissed_desktop_deprecation_banner","",{subscribeToChanges:!0});(0,a.eU)(e=>{let r=e(d);if(r){let e=(0,o.A)(r),n=(0,o.A)().subtract(1,"week");if(e.isAfter(n))return!0}return!1},(e,r,n)=>{r(d,n?(0,o.A)().toISOString():"")})},271933:(e,r,n)=>{n.d(r,{_:()=>i});let i=new class{constructor(){this.callbacks=[],this.matchMediaCallback=()=>{for(let e of this.callbacks)e(window.devicePixelRatio);this.updateMediaListener()},this.updateMediaListener()}updateMediaListener(){this.matchMedia&&this.matchMedia.removeListener(this.matchMediaCallback),this.matchMedia=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this.matchMedia.addListener(this.matchMediaCallback)}addListener(e){this.callbacks.push(e)}removeListener(e){for(let r=0;r<this.callbacks.length;r++)this.callbacks[r]===e&&(this.callbacks=this.callbacks.splice(r,1))}}},993409:(e,r,n)=>{function i(e,r,n){let i=e;for(;i;){if(n(i))return i;if(i===r)break;i=i.parentElement}return null}function a(e){for(;;){var r;if(null==e)return null;if(null!=(r=e)&&r instanceof HTMLElement)return e;if(!("parentNode"in e))return null;e=e.parentNode}}function o(e){return!!e&&!!(d(e)||l(e)||p(e)||e.isContentEditable||e.hasAttribute("tabindex"))}function s(e){return!!e&&"INPUT"===e.tagName}function l(e){return!!e&&!!("A"===e.tagName&&e.hasAttribute("href"))}function c(e){return"button"===e.type||"submit"===e.type}function d(e){return!!e&&!!("BUTTON"===e.tagName||s(e)&&c(e))}function u(e){return l(e)||!!e&&!!(d(e)||function(e,...r){let n=e.getAttribute("role");return null!==n&&r.includes(n)}(e,"button"))}function p(e){return!!e&&(!!s(e)&&!c(e)||"SELECT"===e.tagName||"TEXTAREA"===e.tagName)}n.d(r,{Ap:()=>p,Bu:()=>u,Og:()=>s,SD:()=>a,Xx:()=>o,qR:()=>i})},994811:(e,r,n)=>{n.d(r,{N0:()=>l,Ng:()=>E,bs:()=>p,fT:()=>y,iE:()=>g,jm:()=>f,nD:()=>h,qe:()=>_,xf:()=>s,zN:()=>m});var i=n(306099),a=n(379338),o=n(7056);function s(e){return/^[^<>\/\\:?*"|]*$/.test(e)&&/^[\u0000-\u007F]+$/.test(e)&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/i.test(e)}function l(e){let r=[];for(let n of e.split(/[;,\n]/g)){let e=n.match(/^.*<(.*)>$/);e&&(n=e[1]),(n=n.trim())&&r.push(n)}return r}let c=i.C,d={};c.forEach(e=>d[e]=!0);let u=["ge.com"];function p(e){if(e in d||u.includes(e))return null;for(let r of c)if(1===(0,o.f)(e,r))return r;return null}function m(e){return e.toLowerCase().split("@")[1]||null}function h(e){return!!e&&e.endsWith((0,a.tl)().figma_email_suffix)}function _(e){let r=m(e);return!!r&&r in d}function g(e){return"work"===(e.meta?e.meta.email_domain_type:void 0)}function f(e){return!!e&&s(e)&&(e.endsWith("@figma.com")||e.endsWith("@test.figma.com"))}function E(e){return!!e&&e.startsWith("synthetic-tester")&&e.endsWith("@test.figma.com")}function y(e){return"support-share@figma.com"===e}},566668:(e,r,n)=>{n.d(r,{Yw:()=>_,br:()=>p,f3:()=>f,ih:()=>u,jc:()=>m,l7:()=>d,qd:()=>g});var i=n(473939),a=n(157907),o=n(322035),s=n(44509),l=n(379338),c=n(308746);function d(){return(0,o.GZ)()&&l.Ay().frame_context?.type==="embed"}function u(){return(0,o.GZ)()&&l.Ay().frame_context?.type==="integration"}function p(){try{return window.self.origin===window.parent.origin}catch(e){return!1}}function m(){return d()&&!!(0,a.k)().embedkit_v2}function h(){return(0,c.v6)(s.Ay.location.search)}function _(){let e=h();return e.embed_host||e["embed-host"]}function g(){let e=h(),r=e.embed_host||e["embed-host"],n=e["node-id"],i="0"!==e["viewport-controls"];return{embedHost:r,hideUi:e.hide_ui,isCommunityViewer:!!e.community_viewer,isViewportControlsEnabled:i,nodeId:n,showFooter:"0"!==e.footer,showPageSelector:"0"!==e["page-selector"]&&!(n&&!i),theme:f(),isDevMode:"dev"===e.m||"dev"===e.mode}}function f(){if(m()){var e;return"system"===(e=(0,l.Ay)().embed_theme)?i.DARK_THEME_MEDIA_QUERY.matches?"dark":"light":e}}},814415:(e,r,n)=>{n.d(r,{n:()=>a});var i=n(896966);function a(){(0,i.ED)("[hideEmbedViewerLoader]","Hiding embed viewer loader");try{let e=document.getElementById("embed-viewer-loading-page");e&&(e.classList.add("fadeOut"),setTimeout(()=>{e.classList.add("hidden")},250))}catch(e){(0,i.ED)("[hideEmbedViewerLoader]","Failed to hide embed viewer loader",e)}}},103676:(e,r,n)=>{n.d(r,{CV:()=>u,Cg:()=>c,Js:()=>l,KJ:()=>d,LU:()=>p}),n(157907);var i=n(197638),a=n(284137);let o=RegExp("^<iframe[^>]+src\\s*=\\s*(?:(?:\"([^\">]+)\")|(?:'([^'>]+)')).*><\\/iframe>$"),s=RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");function l(e){let r=new URL(e).hostname;return 0===r.indexOf("www.")&&(r=r.slice(4)),r}function c(e){if(!e.startsWith("<iframe"))return"";let r=i.sanitize(e,{ALLOWED_TAGS:["iframe"],ALLOWED_ATTR:["src"]}),n=o.exec(r);return n&&n.length>1?n[1]:""}function d(e){let r=c(e),n=r||e,i=n.startsWith("http://")||n.startsWith("https://")?n:`https://${n}`;return s.test(i)?{isFromIFrame:!!r,url:i}:null}function u(e,r,n){let i=d(r.trim());return i?(e(a.MY({clipboardText:r,url:i.url,isTextIframe:i.isFromIFrame,entrypoint:n})),{valid:!0}):{valid:!1,reason:"Text was not a valid URL or IFrame"}}function p(e="",r){if(!e.startsWith("<meta charset='utf-8'><div><a href='https://app.asana.com"))return null;let n=i.sanitize(e,{ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href"]}).split("<a"),a=/href="(https:\/\/app\.asana\.com[^"]*)"/,o=[];for(let e of n){let r=e.match(a);r&&r[1]&&o.push({url:r[1],isFromIFrame:!1})}return o.length!==r.split("\n").length?null:o}},293964:(e,r,n)=>{n.d(r,{Dr:()=>s,K2:()=>u,Pe:()=>d,SX:()=>c,gB:()=>o,j4:()=>l,to:()=>a});var i=n(579020);function a(e,r,n,a,o,s){(0,i.sx)("resource_removed_from_favorites",{resource_id:e,selectedView:r,entrypoint:n,resource_type:a,editor_type:o,fileBrowserUnfavorite:s})}function o(e,r,n,a,o,s){(0,i.sx)("resource_added_to_favorites",{resourceId:e,editor_type:o,selectedView:r,resource_type:a,entrypoint:n,fileBrowserFavorite:s})}function s(e,r){(0,i.sx)("favorites_to_move_add_to_sidebar_click",{favorited_resource_id:e,dest_team_id:r})}function l(e){(0,i.sx)("favorites_to_move_unstar_all_click",{favorited_resource_id:e})}function c(e,r){(0,i.sx)("File Browser Sidebar Custom Section Created",{new_custom_section_name:r,new_custom_section_id:e})}function d(e){(0,i.sx)("File Browser Sidebar Custom Section Deleted",{new_custom_section_id:e})}function u(e,r){(0,i.sx)("File Browser Sidebar Custom Section Renamed",{new_custom_section_new_name:r,new_custom_section_id:e})}},431035:(e,r,n)=>{async function i(){return await Promise.resolve().then(n.bind(n,953015))}async function a(e,r={includeIDs:!1}){return(await i()).serializeJSX(e,r)}async function o(e,r={includeIDs:!1}){let n=await i();return await n.deserializeJSX(e,r)}async function s(e,r,n){let a=await i();return await a.getReactFunctionComponentDefinition(e,r,n)}n.d(r,{LZ:()=>o,gZ:()=>s,oy:()=>a})},217727:(e,r,n)=>{n.d(r,{PU:()=>o,jW:()=>i});let i=/^\/(?:file|design|board|slides|site|buzz|rev)\/([0-9a-zA-Z]{22,128})(?:\/|$)/,a=/(?:file|design|board|slides|site|buzz|rev)/;function o(e){return RegExp(`^${a.source}$`).test(e)}},845984:(e,r,n)=>{n.d(r,{AH:()=>g,_f:()=>f,jY:()=>_});var i=n(992277),a=n(741419),o=n(579020),s=n(702),l=n(427193),c=n(964804),d=n(480236),u=n(678593),p=n(905419),m=n(502255),h=n(963359);function _(e){switch(e){case a.IPZ.SWT_CREATED:return"shapeWithTextCreated";case a.IPZ.SWT_EDITED:return"shapeWithTextEdited";case a.IPZ.SWT_DELETED:return"shapeWithTextDeleted";case a.IPZ.SWT_RESIZED:return"shapeWithTextResized";case a.IPZ.STICKY_EDITED:return"stickyEdited";case a.IPZ.STICKY_DELETED:return"stickyDeleted";case a.IPZ.STICKY_RESIZED:return"stickyResized"}}class g{constructor(e,r,n=1,i=!1,d=null,u=()=>{},m=!1,_=()=>{},g=()=>{}){this._analyticsEventName=e,this._processTimersForLogging=r,this._timerDepth=n,this._forwardToDatadog=i,this._tsmerMetrics=d,this._customLogMetricsCallbackHistogram=u,this._isRecording=!1,this._isCanceled=!1,this._onFrameStartCallback=()=>{},this._isFirstLogForTab=!0,this._imagesLoadingState=null,this._ongoingSpotlight=!1,this._multiplayerUserCount=1,this._numberOfRenderedCommentsWatermark=0,this._lastRecordedNumberOfRenderedComments=0,this._distributionByWorkName=new Map,this._lastKnownFrameMs=null,this._lastKnownMetricsFrameMs=null,this._lastKnownFrameIndex=null,this._lastLogTime=null,this._scheduledLogAtMs=null,this._lastRecordedHitCountByName={},this._lastRecordedDurationSinceLastFrame={},this._fileKey=null,this._productType="unknown",this._gpuDeviceInfo=(0,p.l)(),this._activeNamedEvents=new Set,this._singleFrameNamedEvents=new Set,this._eventTrackers=new Map,this._contextRestoredCount=0,this._maxRenderLayerCount=0,this._maxRenderedTileBytesUsed=0,this._numAnimationsFromCpp=0,this._numAnimationsFromTs=0,this._tileRenderersUsed=new Set,this._currentTileRenderer="",this.scheduleLogTwoMinutesFromNow=()=>{null===this._scheduledLogAtMs&&(this._scheduledLogAtMs=performance.now()+12e4)},this._onDocumentVisibilityChange=()=>{this.handleDocumentVisibilityChange(document.visibilityState)},this.updateLastKnownFrameMs=e=>{this._lastKnownFrameMs=e},this.startRecording=e=>{this._isRecording=!0,this._resetLogState(),this._lastKnownFrameMs=performance.now(),null===this._lastLogTime&&(this._lastLogTime=this._lastKnownFrameMs),e&&this.scheduleLogTwoMinutesFromNow()},this.stopRecordingAndLog=e=>{let r={};return this._distributionByWorkName.forEach((e,n)=>{r[n]=e.toPOJO()}),this._shouldLogToAnalytics()&&(this._logToAnalytics(e),this._resetLogState()),this._isRecording=!1,r},this.setFileInfo=(e,r)=>{(e!==this._fileKey||r!==this._productType)&&(this._fileKey=e,this._productType=r,this._resetLogState())},this._startRecordingNamedEvent=e=>{this._activeNamedEvents.add(e)},this.recordSingleFrameNamedEvent=e=>{this._singleFrameNamedEvents.add(e)},this._stopRecordingNamedEvent=e=>{this._activeNamedEvents.delete(e)},this.handleZoomStart=()=>{this._startRecordingNamedEvent("zoomActive")},this.handleZoomStop=()=>{this._stopRecordingNamedEvent("zoomActive")},this.handleScrollEvent=()=>{this.recordSingleFrameNamedEvent("scrollActive")},this.onNodeDragStart=()=>{this._startRecordingNamedEvent("nodeDragActive")},this.onNodeDragEnd=()=>{this._stopRecordingNamedEvent("nodeDragActive")},this.onTileRendererChanged=e=>{this._tileRenderersUsed.add(e),this._currentTileRenderer=e},this.onContextRestored=()=>{this._contextRestoredCount++},this.updateMaxRenderLayerCount=e=>{this._maxRenderLayerCount=Math.max(this._maxRenderLayerCount,e)},this.updateMaxRenderedTileBytesUsed=e=>{this._maxRenderedTileBytesUsed=Math.max(this._maxRenderedTileBytesUsed,e)},this.incrementNumAnimationsFromCpp=()=>{this._numAnimationsFromCpp++},this.incrementNumAnimationsFromTs=()=>{this._numAnimationsFromTs++},this.handleDocumentVisibilityChange=e=>{"hidden"===e&&this._shouldLogToAnalytics()&&(this._logToAnalytics("tab-hidden"),this._resetLogState()),"hidden"!==e&&this._resetLogState()},this._logToAnalytics=(e,r=!1)=>{let n={};n.schema=new l.UP().schema(),n.reason=e,n.isFirstLogAfterLoad=this._isFirstLogForTab,n.imagesLoading="loading"===this._imagesLoadingState,n.multiplayerUserCount=this._multiplayerUserCount,n.ongoingSpotlight=this._ongoingSpotlight,n.fileKey=this._fileKey,n.productType=this._productType,n.refreshRate=this.refreshRate(),n.commentsRenderCount=this._numberOfRenderedCommentsWatermark,n.contextRestoredCount=this._contextRestoredCount,n.maxRenderLayerCount=this._maxRenderLayerCount,n.maxRenderedTileBytesUsed=this._maxRenderedTileBytesUsed,(0,p.q)(this._gpuDeviceInfo,n),n.numAnimationsFromCpp=this._numAnimationsFromCpp,n.numAnimationsFromTs=this._numAnimationsFromTs,this._isFirstLogForTab=!1,null!==this._tsmerMetrics&&(n.editFrames=this._tsmerMetrics.editFrameDistribution().toLogParams(),n.editFramesWhileNotPanningOrZooming=this._tsmerMetrics.editFrameDistributionWhileNotPanningOrZooming().toLogParams(),n.remoteFrames=this._tsmerMetrics.remoteFrameDistribution().toLogParams(),n.remoteFramesWhileNotPanningOrZooming=this._tsmerMetrics.remoteFrameDistributionWhileNotPanningOrZooming().toLogParams()),this._customLogMetricsCallbackHistogram(n),n.tileRenderersUsed=JSON.stringify(Array.from(this._tileRenderersUsed)),this._tileRenderersUsed.clear(),this._tileRenderersUsed.add(this._currentTileRenderer),this._distributionByWorkName.forEach((e,r)=>{if(r in n)throw Error(`attempt to track performance for a work item with a reserved name: ${r}`);n[r]=e.toLogParams()}),n.totalBatchTime=performance.now()-this._lastLogTime,this._lastLogTime=performance.now(),r?setTimeout(()=>{this._sendLogRequest(n)},0):this._sendLogRequest(n)},this._sendLogRequest=e=>{let r={forwardToDatadog:this._forwardToDatadog,batchRequest:!0};(0,o.sx)(this._analyticsEventName,e,r)},this._processTimerTree=(e,r,n)=>{if(r>=this._timerDepth)return[];let i=[];for(let a of e){let e=[...n,a.name],o=e.join(".");if(!(o in this._lastRecordedHitCountByName)||!(o in this._lastRecordedDurationSinceLastFrame)){this._lastRecordedHitCountByName[o]=a.hitCount,this._lastRecordedDurationSinceLastFrame[o]=a.totalElapsedTime;continue}let s=a.hitCount-this._lastRecordedHitCountByName[o];if(0===s)continue;s>a.elapsedTimes.length&&console.warn(`Logged performance for ${o} too many times in one animation frame`);let l=a.totalElapsedTime-this._lastRecordedDurationSinceLastFrame[o];this._lastRecordedHitCountByName[o]=a.hitCount,this._lastRecordedDurationSinceLastFrame[o]=a.totalElapsedTime,i.push({path:e,elapsedTime:l});let c=r+1;c<this._timerDepth&&a.children.length>0&&(i=i.concat(this._processTimerTree(a.children,c,e)))}return i},this.onFrameStart=()=>{this._isRecording&&!this._isCanceled&&"ok"===c.y.getFullscreenCrashState()&&this._onFrameStartCallback()},this.setOnFrameStartCallback=e=>{this._onFrameStartCallback=e},this.checkNotVisibleOrRecording=()=>"visible"!==document.visibilityState||!this._isRecording,this.onMetricsEventLoopFrame=()=>{if(this.checkNotVisibleOrRecording())return;let e=performance.now();if(null!=this._lastKnownMetricsFrameMs){let r=e-this._lastKnownMetricsFrameMs;r<6e4&&this._getOrCreateDistribution("metrics_loop").add(r)}this._lastKnownMetricsFrameMs=e},this.onFrame=()=>{if("ok"!==c.y.getFullscreenCrashState())return"canceled";try{if(this._isCanceled)return"canceled";if(this.checkNotVisibleOrRecording())return"not-recording";let e=performance.now();if(null!=this._lastKnownFrameMs){let r=e-this._lastKnownFrameMs;if(r<6e4){for(let e of(this._getOrCreateDistribution("all").add(r),this._activeNamedEvents))this._getOrCreateDistribution(e).add(r);let e=performance.now(),n=[];for(let[e,i]of this._eventTrackers)i.didEventOccur()&&(n.push(e),this._getOrCreateDistribution(e).add(r));let i=performance.now()-e;for(let e of(a.glU?.updatePerfMode(n),this._singleFrameNamedEvents))this._getOrCreateDistribution(e).add(r);null!==this._scheduledLogAtMs&&this._slowFrameTracker?.checkSlowFrameAndSample(r,n,i,this._fileKey,this._productType),this._singleFrameNamedEvents.clear()}}if(this._lastKnownFrameMs=e,s.rH.areTimersOpen())return this._isCanceled=!0,"canceled";let r=this._processTimerTree(s.rH.report(),0,[]);for(let e of this._processTimersForLogging(r))this._getOrCreateDistribution(e.path.join(".")).add(e.elapsedTime);return this._tsmerMetrics?.onFrame(),null!==this._scheduledLogAtMs&&performance.now()>this._scheduledLogAtMs&&(this._logToAnalytics("two-minutes-elapsed",!0),this._resetLogState()),"success"}finally{this._slowFrameTracker?.clearPerFrameMetricsAndIncrementFrameCounter()}},this.testOnlyGetAllDistribution=()=>this._getOrCreateDistribution("all"),this.pendingImagesChanged=e=>{if("loaded"===this._imagesLoadingState)return;let r=e>0?"loading":"loaded";r!==this._imagesLoadingState&&("loading"===this._imagesLoadingState&&(this._logToAnalytics("images-loaded"),this._resetLogState()),this._imagesLoadingState=r)},this._slowFrameTracker=new h.N(m,_,g),document.addEventListener("mousemove",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("keydown",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchdown",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchstart",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchmove",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("visibilitychange",this._onDocumentVisibilityChange)}uninstall(){document.removeEventListener("mousemove",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("keydown",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchdown",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchstart",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchmove",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("visibilitychange",this._onDocumentVisibilityChange)}hasScheduledLog(){return null!=this._scheduledLogAtMs}_shouldLogToAnalytics(){return this._isRecording&&null!=this._scheduledLogAtMs}productTypeForTests(){return this._productType}_resetLogState(){this._lastKnownFrameMs=null,this._imagesLoadingState=null,this._ongoingSpotlight=!1,this._multiplayerUserCount=1,this._distributionByWorkName=new Map,this._scheduledLogAtMs=null,this._lastRecordedHitCountByName={},this._lastRecordedDurationSinceLastFrame={},this._activeNamedEvents.clear(),this._singleFrameNamedEvents.clear(),this._numberOfRenderedCommentsWatermark=this._lastRecordedNumberOfRenderedComments,this._contextRestoredCount=0,this._maxRenderLayerCount=0,this._maxRenderedTileBytesUsed=0,this._numAnimationsFromCpp=0,this._numAnimationsFromTs=0,this._tsmerMetrics?.resetLogState()}getSlowFrameTracker(){return this._slowFrameTracker}refreshRate(){let e=this._distributionByWorkName.get("all");if(e){let r=e.getMode();if(r){if(r.min<9)return"120FPS";if(r.min<32)return"60FPS";if(r.min<48)return"30FPS"}}return"UNKNOWN"}estimatedRefreshRate(){let e=this._distributionByWorkName.get("all");if(e){let r=e.getMode();if(r){if(r.min<9)return{frameLength:1e3/120,fps:120};if(r.min<32)return{frameLength:1e3/60,fps:60};r.min}}return{frameLength:1e3/30,fps:30}}tsmerMetrics(){return this._tsmerMetrics}_getOrCreateDistribution(e){let r=this._distributionByWorkName.get(e);return r||(r=new l.UP,this._distributionByWorkName.set(e,r)),r}addEventTracker(e,r){this._eventTrackers.set(e,r)}addTimeEvent(e,r){this._getOrCreateDistribution(e).add(r)}setNumberOfRenderedComments(e){this._lastRecordedNumberOfRenderedComments=e,this._numberOfRenderedCommentsWatermark=Math.max(e,this._numberOfRenderedCommentsWatermark)}setMultiplayerPerfInfo(e){let{multiplayerUserCount:r,ongoingSpotlight:n}=e;this._ongoingSpotlight=n,this._multiplayerUserCount=r}trackOtherUserCursorMoved(){d.R9?.setOtherUserMouseMovedCallback(()=>{this.recordSingleFrameNamedEvent("otherUserCursorMoved")})}}class f{constructor(e,r){this._viewerMaxTimerDepth=5,this._viewer=null,this._rafHandle=-1,this._addCustomViewerLogMetrics=e=>{!function(e,r){e&&(r.optimizationExposures=JSON.stringify(Object.fromEntries(e.getAndClearHistogramBatchFields())))}(this._viewer,e)},this._addCustomSlowFrameTrackerLogMetrics=(e,r)=>{!function(e,r,n){if(e){let i=a.AiE.getAndClearHistogramBatchFields(),o=new Map;i.forEach((e,r)=>{o.set(r,e>0)}),r[h.N.optimizationExposuresKey]=JSON.stringify(Object.fromEntries(new Map([...o,...e.getAndClearSlowFrameTrackerFields()]))),r[h.N.gpuMetricsCurrentFrameKey]=e.getViewerGpuMetricsCurrentFrameJSON().toString(),r[h.N.cpuTimerTreeCurrentFrameKey]=a.fZb.getCurrentFrameCpuTimerTreeJSON().toString(),n&&(r[h.N.gpuMetricsPreviousFrameKey]=e.getViewerGpuMetricsPreviousFrameJSON().toString(),r[h.N.cpuTimerTreePreviousFrameKey]=a.fZb.getPreviousFrameCpuTimerTreeJSON().toString())}}(this._viewer,e,r)},this._clearCustomSlowFrameTrackerLogMetrics=e=>{!function(e,r){e&&(a.AiE?.clearSlowFrameTrackerFields(),e.clearAllSlowFrameTrackerFields(),e.gpuMetricsNextFrame(r),a.fZb?.nextFrame(r))}(this._viewer,e)},this._frameDistributionTracker=new g("frame_distributions",function(e){return r=>{let n=[];for(let a of r){if(a.path.length>e||a.path.length<1){(0,m.$D)(i.e.CLIENT_PLATFORM,Error(`We should not go deeper than ${e} levels into the timer tree`));continue}let r=a.path[0];if("react-render"===r||r.startsWith("viewer:")){let e=a.path.map(e=>e.startsWith("viewer:")?e.substr(7):e).join(".");n.push({...a,path:[e]})}}return n}}(this._viewerMaxTimerDepth),this._viewerMaxTimerDepth,!0,null,this._addCustomViewerLogMetrics,!0,this._addCustomSlowFrameTrackerLogMetrics,this._clearCustomSlowFrameTrackerLogMetrics),this._renderingStateTimer=null,this._renderingActive=!1,this._viewerLoadSubscription=null,this._handleRenderingStart=()=>{this._renderingActive=!0,this._renderingStateTimer=new l.M4,this._renderingStateTimer.start()},this._handleRenderingStop=()=>{this._renderingStateTimer=null,this._renderingActive=!1},this._handleInitialDocumentLoad=()=>{this._frameDistributionTracker.startRecording(!0)},this._handleDidRebuildAfterReconnect=()=>{this._frameDistributionTracker.startRecording(!1)},this._handleWillRebuildAfterReconnect=()=>{this._frameDistributionTracker.stopRecordingAndLog("about-to-rebuild-scene")},this.onFrame=()=>{"ok"===c.y.getFullscreenCrashState()&&(this._frameDistributionTracker.onFrameStart(),this._recordRenderingTimeEvent(),this._rafHandle=requestAnimationFrame(this.onFrame),"canceled"===this._frameDistributionTracker.onFrame()&&cancelAnimationFrame(this._rafHandle))},this._rafHandle=requestAnimationFrame(this.onFrame),this._frameDistributionTracker.setFileInfo(e,r)}uninstall(){this._frameDistributionTracker.uninstall(),cancelAnimationFrame(this._rafHandle),this.setViewer(null)}getFrameDistributionTrackerForTest(){return this._frameDistributionTracker}setViewer(e){null!=this._viewer&&(this._viewerLoadSubscription&&(this._viewerLoadSubscription(),this._viewerLoadSubscription=null),this._viewer.off("sceneWillRebuildAfterReconnecting",this._handleWillRebuildAfterReconnect),this._viewer.off("sceneDidRebuildAfterReconnecting",this._handleDidRebuildAfterReconnect),this._viewer.off("renderingStart",this._handleRenderingStart),this._viewer.off("renderingStop",this._handleRenderingStop),this._viewer.off("zoomStart",this._frameDistributionTracker.handleZoomStart),this._viewer.off("zoomStop",this._frameDistributionTracker.handleZoomStop),this._viewer.off("scrollEvent",this._frameDistributionTracker.handleScrollEvent)),this._frameDistributionTracker.stopRecordingAndLog("changing-viewer"),this._viewer=e,null!=this._viewer&&(this._viewerLoadSubscription=(0,u.zM)(this._handleInitialDocumentLoad),this._viewer.on("sceneWillRebuildAfterReconnecting",this._handleWillRebuildAfterReconnect),this._viewer.on("sceneDidRebuildAfterReconnecting",this._handleDidRebuildAfterReconnect),this._viewer.on("renderingStart",this._handleRenderingStart),this._viewer.on("renderingStop",this._handleRenderingStop),this._viewer.on("zoomStart",this._frameDistributionTracker.handleZoomStart),this._viewer.on("zoomStop",this._frameDistributionTracker.handleZoomStop),this._viewer.on("scrollEvent",this._frameDistributionTracker.handleScrollEvent))}_recordRenderingTimeEvent(){this._renderingActive&&(this._renderingStateTimer&&6e4>this._renderingStateTimer.getElapsedTime()&&this._frameDistributionTracker.addTimeEvent("rendererActive",this._renderingStateTimer.getElapsedTime()),this._renderingStateTimer=new l.M4,this._renderingStateTimer.start())}setInternalFrameDistributionTrackerForTest(e){this._frameDistributionTracker=e}}},420216:(e,r,n)=>{n.d(r,{Bs:()=>k,DT:()=>L,Rm:()=>M,W8:()=>x,_B:()=>R,xI:()=>D});var i=n(157907),a=n(39773),o=n(171659),s=n(579020),l=n(322035),c=n(6819),d=n(44509),u=n(757033),p=n(736248),m=n(868221),h=n(186539),_=n(722941),g=n(279694),f=n(763491),E=n(492850),y=n(72287),b=n(280198),v=n(442313),T=n(719398),I=n(449737),S=n(53818),w=n(994811),A=n(522923),C=n(896966);let N="google_sso_temp";var L=(e=>(e.COMMUNITY="google_one_tap_logged_out_community",e.LOGGED_OUT_FILE="google_one_tap_logged_out_file",e.PROTOTYPE="google_one_tap_prototype",e))(L||{}),O=(e=>(e.LOGGED_OUT_FOOTER="logged_out_footer",e.LOGGED_OUT_FOOTER_CONTINUE_WITH_GOOGLE="logged_out_footer_continue_with_google",e.FIGJAM_TRY_FOOTER_BANNER="figjam_try_footer_banner",e.FIGJAM_TRY_FOOTER_BANNER_CONTINUE_WITH_GOOGLE="figjam_try_footer_banner_continue_with_google",e))(O||{});let R="/api/session/google_auth/signin",P=(0,S.D)(()=>new Promise((e,r)=>{document.cookie=N+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let n=(0,l.FJ)("/start_google_sso","","width=600,height=600");if(null===n){(0,s.sx)("GoogleSSOError",{step:"window-not-found"}),r(Error((0,v.t)("auth.google-sso.unable-to-get-info")));return}window.setTimeout(function i(){let a=(0,o.OS)(document.cookie,N);if(null!==a){let n=JSON.parse(a);document.cookie=N+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",n.token?e(n):((0,s.sx)("GoogleSSOError",{step:"token-not-found"}),r(Error((0,v.t)("auth.google-sso.unable-to-get-info"))))}else n.closed?((0,s.sx)("GoogleSSOError",{step:"cookie-not-found"}),r(Error((0,v.t)("auth.google-sso.unable-to-get-info")))):window.setTimeout(i,250)},250)}));async function D(e,r){let n=await P();return await x(n,{dispatch:e,apiUrl:"/api/session/google_auth/signin_or_signup",origin:r})}async function M({dispatch:e,origin:r,redirectUrl:n}){let i=await P();return n&&e(p.WY({redirectUrl:n})),await x(i,{dispatch:e,apiUrl:R,origin:r})}function k(e,r,n){(0,g.g)("google_sso_login_redirect_attempt",n,{fromMsTeams:r}),document.cookie=N+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let i=JSON.stringify({apiUrl:R,redirectPath:e});document.cookie=`${N}=${encodeURIComponent(i)}; path=/`;let a=r?d.Ay.unsafeRedirectMsTeams:d.Ay.redirect,o="/start_google_sso?should_use_redirect_instead=1";r&&(o+="&from_ms_teams=1"),a(o)}class F extends Error{}async function x(e,{dispatch:r,apiUrl:n,origin:o,formId:l}){let d=!!o&&Object.values(L).includes(o);await (0,f.sT)({googleUserInfo:e});let S={};if(l){let e=document.getElementById(l);S=(0,A.t)(e)}try{let{data:a}=await function(e,r,n){let a={name:r.name,token:r.token,token_type:r.tokenType,google_fed_cm_enabled:(0,i.k)().google_federated_cm??!1,totp_key:n};return u.Ay.post(e,a)}(n,e,S?.totp_key);return r(b.s.flash((0,v.t)("auth.sign-in-success",{email:a.meta.email}))),a.meta&&a.meta.email_domain_type?((0,s.sx)("Sign Up (GTM)",{isWorkEmail:(0,w.iE)(a)}),await (0,y.p)("sign_up_google_sso")):((0,s.sx)("google_sso",{eventSubtype:"google_sso_success_signin",user_id:a?.meta?.id,origin:o}),await (0,y.p)("sign_in_google_sso")),{type:"login",user:a.meta}}catch(u){let{data:n}=u,i=(0,T.J)({data:n},n?.message),s=(0,v.t)("auth.google-sso.unable-to-auth");if(n&&n.reason&&"object"==typeof n.reason&&"two_factor"===n.reason.missing)return(0,h.MZ)()&&null!=o&&(r(p.Ts({origin:o,formState:_.qB.SIGN_IN,redirectUrl:c.D?.getState().auth.redirectUrl})),r(I.to({type:E.a,data:{}}))),a.zl.set(m._G,e),r((0,h.P8)({resp:u})),{type:"mfa"};let l=c.D?.getState().auth.redirectUrl||"";if(d&&(0,g.g)("google_one_tap_login_error",o,{error:i}),i===(0,v.t)("auth.error.account-not-found"))return function({userInfo:e,origin:r,dispatch:n,redirectUrl:i}){var a;null!=r&&(0,h.MZ)()?(n(p.Ts({origin:r,formState:_.qB.SIGN_UP,redirectUrl:i})),n(I.to({type:E.a,data:{}}))):c.D?.getState()?.modalShown?.type!==E.a&&(0,h.MZ)()&&(0,C.xi)("authenticate_google_user","Skipped launching auth modal before arkose verification",{auth_origin:r},{reportAsSentryError:!0,modeEventName:"google_sso_skipped_launching_auth_modal"}),a={...e,origin:r},n(p.OZ({googleIdToken:a.token})),n(p.fX({googleTokenType:a.tokenType})),n(p.m9({value:a.name})),a.origin&&n(p.dl({authOrigin:a.origin})),n(p.E({formState:_.qB.VERIFY_HUMAN,prevState:_.qB.SIGN_UP,postVerificationAction:p.Sr()}))}({userInfo:e,origin:o,dispatch:r,redirectUrl:l}),{type:"signup"};if(n?.reason==="saml_required"){let e=new F(i);throw e.errorType=_.By.SAML_REQUIRED,e}throw r(b.s.error(i||s,15e3)),Error(i||(0,v.t)("auth.google-sso.unable-to-auth"))}}},125899:(e,r,n)=>{n.d(r,{H:()=>s});var i=n(960805),a=n(741419),o=n(141039);let s={trigger(e){if(o.eD)switch(e){case a.JA.GENERIC:o.eD.triggerHaptic(i.HapticType.GENERIC,1,0);break;case a.JA.LEVEL:o.eD.triggerHaptic(i.HapticType.LEVEL,1,0);break;case a.JA.SNAP:o.eD.triggerHaptic(i.HapticType.SNAP,1,0);break;default:throw Error(e)}}}},905654:(e,r,n)=>{n.d(r,{o:()=>a,p:()=>o});var i=n(848318);function a(){let e=new Set;return{subscribe:r=>(e.add(r),()=>{e.delete(r)}),emit(r){for(let n of e)n(r)}}}function o(e,r){(0,i.useEffect)(()=>e.subscribe(r),[r,e])}},541525:(e,r,n)=>{n.d(r,{NV:()=>u,U:()=>l,am:()=>d,hC:()=>c});var i=n(848318),a=n(716544),o=n(277930),s=n(481540);function l(){let e=(0,a.Pj)();return i.useCallback((r,n,i)=>{let a=e.getState();(0,s.ds)(r,a.openFile?.key,a,n,i)},[e])}function c(){let e=(0,a.Pj)();return i.useCallback((r,n)=>{let i=e.getState();(0,s.GS)(r,i.openFile?.key??"",i,n??{})},[e])}function d(){let e=(0,a.Pj)();return i.useCallback((r,n,i)=>{let a=e.getState(),o=a.openFile?.key,l=a.user&&a.user.id;(0,s.ds)(r,o,a,{userId:l,...n},i)},[e])}function u(e){let r=function(){let e=(0,a.Pj)();return i.useCallback((r,n,i)=>{let a=e.getState(),o=a.currentUserOrgId??"";(0,s.Fr)(r,o,a,{...n},i)},[e])}();return(0,o.A)(r,e,{leading:!0,trailing:!1})}},691191:(e,r,n)=>{n.d(r,{cU:()=>a,wY:()=>o});var i=n(848318);let a={width:0,height:0};function o(e,r){let[n,a]=(0,i.useState)(null);return(0,i.useLayoutEffect)(()=>{if(!e||!e.current)return;let i=new ResizeObserver(i=>{for(let o of i)if(e.current===o.target){let e=o.contentRect.width,i=o.contentRect.height;if(n&&n.width===e&&n.height===i)continue;let s={width:o.contentRect.width,height:o.contentRect.height};a(s),r&&r(s)}});return i.observe(e.current),()=>i.disconnect()},[e,r,n]),n}},997976:(e,r,n)=>{n(848318),n(397579)},227736:(e,r,n)=>{n.d(r,{R:()=>a});var i=n(848318);function a(e="minute"){let[r,n]=(0,i.useState)(new Date);return(0,i.useEffect)(()=>{let r=setInterval(()=>{n(new Date)},function(e){if("number"==typeof e)return e;switch(e){case"second":return 1e3;case"minute":return 6e4;case"hour":return 36e5;case"day":return 864e5}}(e));return()=>clearInterval(r)},[e]),r}},141920:(e,r,n)=>{n.d(r,{ww:()=>a});var i=n(848318);function a(e,r){var n,a;return n="mousedown",a=[e.current],i.useEffect(()=>{function e(e){a.some(r=>r&&r.contains(e.target))||r(e)}return document.addEventListener(n,e),()=>{document.removeEventListener(n,e)}},[n,r,a]),e}},68134:(e,r,n)=>{n.d(r,{M:()=>a});var i=n(848318);function a(){let e=i.useRef(null),r=function(e){let[r,n]=i.useState(!1);return i.useEffect(()=>{let r=()=>n(!0),i=()=>n(!1),a=e.current;if(a)return a.addEventListener("mouseover",r),a.addEventListener("mouseleave",i),()=>{a.removeEventListener("mouseover",r),a.removeEventListener("mouseleave",i)}},[e.current,n]),r}(e);return[i.useCallback(r=>{e.current=r},[]),r,e]}},651386:(e,r,n)=>{n(848318)},397579:(e,r,n)=>{n.d(r,{$J:()=>i.$J,ZC:()=>i.ZC,qd:()=>i.qd});var i=n(774632)},510165:(e,r,n)=>{n.d(r,{M:()=>a});var i=n(848318);function a(e){let r=(0,i.useRef)(null);return(0,i.useImperativeHandle)(e,()=>r.current),r}},296425:(e,r,n)=>{n.d(r,{x:()=>i});let i=(0,n(39773).eU)(!1)},945281:(e,r,n)=>{n.d(r,{R_:()=>C,w5:()=>A});var i=n(157907),a=n(879378),o=n.n(a),s=n(322035),l=n(44509),c=n(379338),d=n(691885),u=n(757033),p=n(948895),m=n(449737),h=n(481540),_=n(339599),g=n(385469),f=n(156653),E=n(891028),y=n(141039),b=n(831932),v=!1;let T=null,I=null,S=null,w=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];function A(){return v}function C(e){let{user_data:r,idle_timeout_duration_in_secs:n,idle_timeout_last_active_at:a,idle_timeout_org_name:A,frame_context:C}=(0,c.Ay)();r&&n&&a&&A&&!v&&function(e,r,n,a,c,A){if((0,b.Q1)()||(0,b.Ji)()||b.Ay.isIpadNative)return;let C=`last-active-at-${e.email}`,N="idle_timeout_last_active_at_change",L=(0,s.GZ)(),O=L&&"embed"===c,R=L&&"integration"===c,P=.05*r,D=Math.min(60,r/2),M=new d.P,k=e=>{localStorage.setItem(C,e.toString()),M.sendToAllTabs(N)};k(n);let F=()=>{document.hasFocus()&&u.Ay.post(`/api/user/${e.id}/idle_timeout_last_active_at`,{is_embed:L.toString()&&!_.z4.getIsExtension()}).then(e=>{let r=e.data.meta.idle_timeout_last_active_at;r&&k(r)}).catch(e=>{401===e.status&&U()})},x=()=>!!A&&A.getState().modalShown?.type===E.xn,U=()=>{if(A&&A?.getState().authedUsers.orderedIds.length===1&&((0,h.Pg)(),p.U2.clear()),O)l.Ay.reload("idleSessionTimeout-embed");else if(R){let{pathname:e,search:r}=l.Ay.location,n=`${e}${r}&integration_host=msft`;window.location.replace(n)}else _.z4.getIsExtension()&&(0,i.k)().dt_dev_mode_vscode_idle_timeout?(0,g.$g)():l.Ay.redirect(`/idle_timeout?fuid=${e.id}&redirect_uri=${encodeURIComponent(window.location.href)}`)},B=()=>Math.floor(Date.now()/1e3);S&&w.forEach(e=>{document.removeEventListener(e,S)}),S=o()(F,1e3*P,{trailing:!1,leading:!0}),w.forEach(e=>{document.addEventListener(e,S)});let V=()=>{I&&clearTimeout(I),T&&clearTimeout(T),!x()||document.hasFocus()||y.eD||A?.dispatch(m.ES(E.eN));let n=parseInt(localStorage.getItem(C))+r-B();T=setTimeout(()=>{f.N.getIdleTimeoutPrecheck({fuid:e.id}).then(e=>{let n=e.data.meta.idle_timeout_last_active_at;n&&n+r>=B()?k(n):U()}).catch(e=>{U()})},1e3*n),O||(I=setTimeout(()=>{x()||A?.dispatch(m.to({type:E.eN,data:{orgName:a,duration:r,onHide:()=>{F()}}}))},1e3*(n-D)))};M.register(N,()=>{V()}),V(),v=!0}(r,n,a,A,C?.type,e)}},896763:(e,r,n)=>{n.d(r,{Rg:()=>s,YA:()=>c,hM:()=>d,qr:()=>l});var i=n(742464),a=n(442313),o=(e=>(e.MINUTES="minutes",e.HOURS="hours",e.DAYS="days",e))(o||{});let s="on-idle-timeout-logged-in-ipc-key";function l(e){return e<3600?[e/60,"minutes"]:e<86400?[e/3600,"hours"]:e%86400==0?[e/86400,"days"]:[e/3600,"hours"]}function c(e,r){let n={duration:r};switch(e){case"minutes":return(0,a.tx)("settings_tab.idle_session_timeout.time.minutes",n);case"hours":return(0,a.tx)("settings_tab.idle_session_timeout.time.hours",n);case"days":return(0,a.tx)("settings_tab.idle_session_timeout.time.days",n)}}function d(e){return!!(0,i.Et)(e)&&e<43200}},997649:(e,r,n)=>{n.d(r,{m:()=>a});var i=n(157907);function a(){let e=(0,i.k)();return e.ce_il_lina?{}:e}},379338:(e,r,n)=>{n.d(r,{AU:()=>P,Ay:()=>D,CZ:()=>N,DC:()=>b,Hk:()=>y,IX:()=>T,KI:()=>_,Lz:()=>M,O_:()=>S,Uv:()=>R,W4:()=>C,YG:()=>I,b5:()=>w,bg:()=>O,ck:()=>L,gq:()=>u,mm:()=>F,sL:()=>A,tl:()=>v,u3:()=>g,u4:()=>E,w0:()=>f});var i,a,o=n(886593),s=n(157907),l=n(493157),c=n(53818),d=n(308746);let u={disable_personal:!0,teams:[],team_users:[],roles:[],orgs:[],org_drafts_owners:[],user_favorite_fonts:[],is_free_user:!0,is_starter_user:!0},p=(()=>{let e=JSON.parse(JSON.stringify(v().feature_flag_rules||{}));return e.hash_function=v().feature_flags_hash_function||"md5",e})(),m=(()=>{let e=JSON.parse(JSON.stringify(v().launchdarkly_client_flags||{}));return Object.freeze(e),e})(),{zoom_client_user_agent:h}=v();h&&function(e,r){if(e.navigator.userAgent!==r){let n={get:function(){return r}};try{Object.defineProperty(e.navigator,"userAgent",n)}catch(r){e.navigator=Object.create(navigator,{userAgent:n})}}}(window,h);let _=(0,c.D)(()=>p),g={};function f(){return m}function E(e,r,n){return(0,s.k)()[e]?r:n}(a||(a={})).withFeatureFlag=function(e,r){if((0,s.k)()[e])return r;let n=e=>null;return n.displayName="",n};let y=e=>{self.INITIAL_OPTIONS={...self.INITIAL_OPTIONS,editing_file:e}};function b(){return v().payment_flow_data}function v(){return window.INITIAL_OPTIONS||{}}function T(){return"local"===v().cluster_name}function I(){return"staging"===v().cluster_name}function S(){return"prod"===v().cluster_name}function w(){return T()||I()||v().cluster_name?.startsWith("devenv")||"gov-staging"===v().cluster_name}function A(){let e=v().cluster_name;return e?"gov"===e:"figma-gov.com"===window.location.hostname}function C(){return A()?"support-figgov@figma.com":"support@figma.com"}function N(e){return e||(e=""),e.startsWith("/")&&(e=e.slice(1)),`https://${A()?"static.figma-gov.com":"static.figma.com"}/${e}`}function L(e){return e||(e=""),e.startsWith("/")&&(e=e.slice(1)),N(`uploads/${e}`)}function O(){return v().consent_region}function R(){return function(e){switch(e){case"staging":return e;case"prod":return"production";case"gov":return"gov-prod";case"gov-staging":return"gov-staging";default:return"development"}}(v().cluster_name||"")}function P(){return v().editing_file?.editor_type??void 0}i="campfire_model_enabled",Object.defineProperty(v(),i,{writable:!1,configurable:!1});let D=v,M="https://fakepath.figma.com",k=!1;function F(){let e=[(0,l.$e)(),(0,l.bQ)()];for(let r=0;r<e.length;r++){let n=e[r];if(n){let e=(0,d.xL)(n);if(e.locale)return!function(e){let r=e.locale,n=!!e.persistLocale;if(!r||!n)return;let i=v().user_data;if(!i)return;let{id:a,locale:s}=i;o.Yv.includes(r)&&s!==r&&(k||(k=!0,fetch("/api/user",{method:"PUT",body:JSON.stringify({id:a,locale:r}),headers:{"Content-Type":"application/json"}})))}(e),(0,l.$W)(e.locale)}}let r=(0,l.Np)();if(r){let e=r.split("/")[1];if(e&&o.Yv.includes(e))return(0,l.$W)(e)}let{user_data:n}=v();if(n?.locale&&n?.locale!==o.MY)return[n?.locale,o.MY];if(!n){let e=document.documentElement.lang;if(e&&o.Yv.includes(e))return[e,o.MY]}return[o.MY]}},322627:(e,r,n)=>{n.d(r,{Dz:()=>u,SI:()=>h,fF:()=>m});var i=n(157907),a=n(379338),o=n(831932),s=n(377623),l=n(257281),c=n(95238);let d=window.location.pathname;function u(){let e=window.FigmaMobile,r=!e||!!e.ui3Enabled;return f("unified_index_v3_figjam_mobile_device")&&r}function p(e){return!function({isDesign:e,isDesignPrototypeViewer:r,isDevMode:n,isEmbed:a,isEmbedKitV2Enabled:o,isFigjam:l,isFigjamUi3LabEnabled:c,isFigjamMobileDevicesEnabled:d,isMobileDevice:u,isSites:p,isSlides:m,isCooper:h,isIllustration:_,isUI3ForceDevOnly:g,isUi3LabEnabled:f,isVSCodeExtension:E,isLoggedOutCommentUser:y,isFigmake:b}){return!!g||!!y||!!m||!!p||!!h||!!_||!!b||(E?!!(0,i.k)().dt_vscode_ready_for_dev:!!a&&!!o||(l?!!c&&(!u||d):(!!e||!!n)&&!r&&!a&&!!(0,s.M)()&&f))}(e)?"ui2":"ui3"}function m(){let e=(0,a.AU)();return p({isDesign:"design"===e,isDesignPrototypeViewer:d.startsWith("/proto/"),isDevMode:"design"===e,isEmbed:a.Ay().frame_context?.type==="embed",isEmbedKitV2Enabled:f("embedkit_v2"),isFigjam:"whiteboard"===e,isFigjamUi3LabEnabled:(0,l.Y)({trueOverrideUserFlag:g("unified_index_v3_figjam_toggle_override_true"),falseOverrideUserFlag:g("unified_index_v3_figjam_toggle_override_false"),canOverride:(0,c.Q4)(),defaultValue:!0}),isFigjamMobileDevicesEnabled:u(),isMobileDevice:o.Xb,isSites:"sites"===e,isSlides:"slides"===e,isCooper:!1,isIllustration:!1,isFigmake:!1,isUI3ForceDevOnly:(0,l.Y)({trueOverrideUserFlag:g("force_ui3_dev_only_override_true"),falseOverrideUserFlag:g("force_ui3_dev_only_override_false"),canOverride:"prod"!==(0,a.Ay)().cluster_name,defaultValue:!1}),isUi3LabEnabled:_(),isVSCodeExtension:!1,isLoggedOutCommentUser:!1})}function h(){return p({isDesign:!0,isUi3LabEnabled:_(),isDesignPrototypeViewer:!1,isDevMode:!1,isEmbed:!1,isEmbedKitV2Enabled:f("embedkit_v2"),isFigjam:!1,isFigjamUi3LabEnabled:!1,isFigjamMobileDevicesEnabled:!1,isMobileDevice:!1,isSites:!1,isFigmake:!1,isSlides:!1,isCooper:!1,isIllustration:!1,isUI3ForceDevOnly:!1,isVSCodeExtension:!1,isLoggedOutCommentUser:!1})}function _(){return(0,l.Y)({trueOverrideUserFlag:g(c.pU),falseOverrideUserFlag:g(c.EM),canOverride:!0,defaultValue:(0,c.Mx)()})}function g(e){for(let r of a.Ay()?.user_flags||[])if(r.name===e)return!0;return!1}function f(e){return!0===(0,i.k)()[e]}},828887:(e,r,n)=>{n.d(r,{Is:()=>i.Is,YJ:()=>i.YJ,aH:()=>i.aH,k3:()=>i.k3,nL:()=>i.nL});var i=n(567366)},846451:(e,r,n)=>{n.d(r,{Cg:()=>E,Ug:()=>m,dZ:()=>_,rd:()=>f,v7:()=>y,xt:()=>b});var i=n(741419),a=n(171659);n(442313);var o=n(959100),s=n(481540),l=n(992444),c=n(6819),d=n(691885),u=n(757033);let p="keyboardLayoutPreference",m="keyboardLayoutPreference",h=new Map(Object.entries(i.aTn).map(([e,r])=>[e,r])),_=new Map(Object.entries(i.aTn).map(([e,r])=>[r,e]));function g(e){let[r]=e.split(":"),n=h.get(r);return r&&n?{layout:n}:{layout:i.aTn.UNKNOWN}}function f({layout:e}){if(!a.x4)return;let r=i.aTn[e];a.x4.setItem(p,r),new d.P().sendToOtherTabs(m,r),function(e){try{let r=c.D.getState();(0,s.uE)("keyboard_layout_preference",r,{layout:i.aTn[e.layout],eventName:e.eventName,detectedLayout:e.detectedLayout,detectedLayoutStr:e.detectedLayoutStr})}catch(e){}}({layout:e,eventName:"user_manual_change"}),i.glU.reloadShortcuts(e),u.Ay.put("/api/user",{keyboard_preference:i.aTn[e],keyboard_preference_method:"manual"})}function E(e){if(!a.x4)return;a.x4.setItem(p,e);let{layout:r}=g(e);l.Y5&&l.Y5.isReady()&&i.glU.reloadShortcuts(r)}function y(){return function(){if(a.x4){let e=a.x4.getItem(p);if(null!=e)return g(e)}if(!c.D)return{layout:i.aTn.UNKNOWN};let e=c.D.getState().user?.keyboard_layout,r=h.get(e);if(!e||!r)return{layout:i.aTn.UNKNOWN};let n=e?r:i.aTn.UNKNOWN;return E(i.aTn[n]),{layout:n}}().layout}function b(){return 0===Object.keys(i.aTn).length?[]:[{name:"keyboard-layout-menu-option",callback:(e,r,n)=>{n(o.FU({tab:"layout"})),l.Y5.triggerAction("toggle-keyboard-shortcuts")}}]}},21406:(e,r,n)=>{n.d(r,{C:()=>k});var i=n(848318),a=n(992277),o=n(858260),s=n(24766),l=n(491721),c=n(231521),d=n(693164),u=n(503533),p=n(164937),m=n(549470),h=n(126259),_=n(860904),g=n(382384),f=n(785544),E=n(267515),y=n(554413),b=n(191088),v=n(871930),T=n(408361),I=n(502255),S=n(400471),w=n(829488),A=n(773998),C=n(231887),N=n(469487),L=n(940027),O=n(364517),R=n(227510);let P='{"root":{"children":[{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1}],"direction":null,"format":"","indent":0,"type":"root","version":1}}',D=[T.Ey,c.v5,c.YW,l.Db,o.iK,v.jL];function M({value:e,valueFormat:r,onSave:n,themeOverride:M,lexicalContentClassName:k,namespace:F,placeholder:x,innerRef:U,plugins:B=[],hasToolbar:V=!1,isEditable:G=!0}){let H={link:G?R.nf:R.Jj,list:{listitem:R.Aw,ol:R.cg,ul:R.e6},text:{bold:R.ZS,italic:R.kQ,strikethrough:R.Hn,code:R.ti},paragraph:R.FY,heading:{h1:R.R_,h2:R.R_},code:R.DV,...M},K=(0,i.useMemo)(()=>{if("lexical"===r||!e)return P;let n=(0,s.D)({nodes:[T.Ey,c.v5,c.YW,l.Db,o.iK,v.jL],onError:r=>{console.error(r),(0,I.$D)(a.e.EXTENSIBILITY,r,{extra:{htmlString:e}})}});return(0,w.D)(e,n,"json")},[r,e]),[W,z]=(0,i.useState)(!1),[$,Y]=(0,i.useState)(null);return i.createElement(p.n,{initialConfig:{namespace:F,onError(n){console.error(n),(0,I.$D)(a.e.EXTENSIBILITY,n,{extra:{namespace:F,editorInput:"lexical"===r?e||P:K,valueFormat:r}})},theme:H,nodes:D,editorState:"lexical"===r?e||P:K,editable:G}},i.createElement("div",{ref:e=>{null!==e&&Y(e)}},i.createElement(b.$,{contentEditable:i.createElement(m.a,{className:k,ref:U}),placeholder:x,ErrorBoundary:h.A}),V&&i.createElement(O.A,{setIsLinkEditMode:z}),G&&$&&i.createElement(N.A,{anchorElem:$,isLinkEditMode:W,setIsLinkEditMode:z})),i.createElement(_.G,null),i.createElement(f.Q,null),i.createElement(E.E,{transformers:[d.mK,d.NB,d.eA,d.gb,d.d7,d.Pi,d.WY,d.Eg,d.gW,d.Sq,d.TB,d.Up]}),"lexical"===r&&i.createElement(A.D,{value:e}),!G&&"html"===r&&i.createElement(w._,{htmlString:e}),n&&i.createElement(y.D,{onChange:(e,r,i)=>{i.has("focus")||e.read(()=>{n({html:(0,S.T)(r),lexical:JSON.stringify(e.toJSON())})})},ignoreSelectionChange:!0}),i.createElement(C.A,null),i.createElement(u.x,null),i.createElement(g.W,null),i.createElement(L.A,null),...B)}function k({value:e,valueFormat:r,themeOverride:n,lexicalContentClassName:a,namespace:o,innerRef:s}){return i.createElement(M,{value:e,valueFormat:r,isEditable:!1,lexicalContentClassName:a,themeOverride:n,namespace:o,innerRef:s})}},493554:(e,r,n)=>{n.d(r,{Rs:()=>v,ZA:()=>f,oS:()=>S,p:()=>T,rp:()=>b});var i=n(848318),a=n(157907),o=n(430285),s=n(351766),l=n(357698);n(889381);var c=n(23574),d=n(440985),u=n(721571);n(579020);var p=n(575058),m=n(397579),h=n(507152),_=n(330335);function g(){let e=i.useContext(_.ob);if(!e)throw Error("Tried to use useSubscription outside a LiveGraph context provider");return e}function f(){return g().client}function E(e){return!e.hasOwnProperty("enabled")||!!e.enabled}function y(e){return Array.isArray(e)&&(1===e.length||2===e.length)&&(0,s.bu)(e[0])}function b(...e){let r=y(e)?e[0].view:e[0],n=y(e)?e[0].args:e[1],a=(y(e)?e[1]:e[2])??{},l=(0,p.zN)(n,s.lw),d=E(a),_=function(){let[e,r]=i.useState(0);return i.useCallback(()=>r(e=>e+1),[])}(),f=g(),v=a.traceId,T=function(e,r){let n=i.useRef((0,h.g)()),a=(0,m.ZC)(e),o=(0,m.ZC)(r);return void 0===a||void 0===o||a===e&&(0,s.lw)(r,o)||(n.current=(0,h.g)()),n.current}(r,l),I=i.useMemo(()=>f.client?.viewHasStaticQueries(r)?{...l,__requestId:T}:l,[l,T,r,f.client]),S=d&&I?f.mock?f.mock.useSubscription(r,I):f.client?.getViewResult(r,I)??u.F5:c.F4;return i.useEffect(()=>{if(!f.mock&&!1!==d&&I)return f.client?.subscribe(r,I,_,v)},[d,f.client,f.mock,r,v,I,_]),i.useMemo(()=>o.Qw.from(S),[S])}let v=(0,a.k)().use_subscription_v2?b:function(...e){let r=y(e)?e[0].view:e[0],n=y(e)?e[0].args:e[1],a=(y(e)?e[1]:e[2])??{},l=E(a),[d,p]=i.useState(l&&n?u.F5:c.F4),m=g(),[h,_]=i.useState(n),f=a.traceId,b=d;return m.mock&&n&&(b=m.mock.useSubscription(r,n)),n&&!(0,s.lw)(n,h)&&(_(n),p(b=l?u.F5:c.F4)),i.useEffect(()=>{if(m.mock)return;if(!1===l){p(c.F4);return}if(!h)return;let e=m.client?.subscribe(r,h,e=>{p(e)},f);return()=>{e?.()}},[l,h,m.client,m.mock,r,f]),i.useMemo(()=>o.Qw.from(b),[b])};function T(e,r,n={}){let a=g(),s=E(n),[c,d]=i.useState({}),[u]=i.useState(()=>new l.A(a.client,()=>d({})));return i.useLayoutEffect(()=>{u.update(e,s?r:[])},[u,e,r,s]),i.useLayoutEffect(()=>()=>u.clear(),[u]),i.useMemo(()=>r.map(e=>({args:e,result:s?o.Qw.from(u.currentResult(e)):o.Qw.disabled()})),[u,r,s,c])}class I{constructor(e,r,n){this.viewArgs=e,this.traceId=(0,h.g)(),this.errors=null,this._isLoading=!0,this.timer=new d.M({onTimeout:()=>r(this),timeoutMs:n})}finish(){this._isLoading=!1,this.timer.finish()}get timeElapsedMs(){return this.timer.getTime()}get wasBackgrounded(){return this.timer.backgrounded}get wasOffline(){return this.timer.wasOffline}get isLoading(){return this._isLoading}}function S(e,r,n){let a=i.useRef(null),o=!1!==n.enabled,l=n.subscriptionLogger,c=i.useRef(r),d=a.current;!a.current&&o&&(a.current=new I(r,e=>l.onEvent("stuck",p,e),l.stuckMs));let u=o?a.current.traceId:void 0,p=v(e,r,{enabled:o,traceId:u});if(null===d&&o&&l.onEvent("initiated",p,a.current),!(0,s.lw)(r,c.current)){let e=new I(r,e=>l.onEvent("stuck",p,e),l.stuckMs);a.current?.isLoading&&(a.current.finish(),l.onEvent("canceled",p,a.current,{nextTraceId:e.traceId})),a.current=e,l.onEvent("initiated",p,a.current),c.current=r}return i.useEffect(()=>{"loaded"===p.status?a.current?.isLoading&&(a.current.finish(),l.onEvent("loaded",p,a.current)):"errors"===p.status&&a.current?.isLoading&&(a.current.finish(),a.current.errors=p.errors,l.onEvent("error",p,a.current))},[p,p.errors,p.status,l]),i.useEffect(()=>()=>{a.current?.isLoading&&(a.current.finish(),l.onEvent("canceled",p,a.current))},[]),p}},163620:(e,r,n)=>{n.d(r,{Nc:()=>m,XJ:()=>d,ad:()=>c,f2:()=>p,h7:()=>l,zb:()=>u});var i=n(615312),a=n(983504),o=n(376780),s=n(195507);function l(e){return{id:e.key,key:e.key,libraryKey:e.library_key||(0,a.$)(e.key),name:e.name,fileRepoId:e.file_repo_id,editorType:e.editor_type,folderId:e.folder_id,teamId:e.team_id,hasFileLinkPassword:!1,thumbnailUrl:e.thumbnail_url||"",thumbnailUrlOverride:e.thumbnail_url_override||"",thumbnailGuid:e.thumbnail_guid||null,clientMeta:e.client_meta,touchedAt:e.touched_at,lastPublishedAt:e.last_published_at??"",canView:!0,linkAccess:e.link_access,repo:{id:e.file_repo_id||"",name:"",createdAt:new Date,deletedAt:new Date,trashedAt:null,updatedAt:new Date,linkAccess:e.link_access,protoLinkAccess:e.proto_link_access,hasFileLinkPassword:!1,hasProtoLinkPassword:!1,orgAudience:null,orgBrowsable:!0,hasActiveBranches:!1},project:null,isTeamTemplate:e.is_team_template||!1}}function c(e,r,n,i){return{userId:r,resourceType:o.bk.FOLDER,orgId:n??null,teamId:e.team_id??null,sidebarSectionId:i??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,project:{id:e.id,path:e.path,orgId:n,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:null!=e.deleted_at?new Date(e.deleted_at):null,trashedAt:null!=e.trashed_at?new Date(e.trashed_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,canEdit:!1,description:e.description,team:{id:e.team_id??"",orgId:n,name:"",licenseGroup:{name:""},studentTeamAt:null,eduGracePeriod:{id:"",isValid:!1},restrictionsList:[],subscription:o.Qh.OK,gracePeriodEnd:null,canEdit:!1,canAdmin:!1}}}}function d(e,r,n,i){return{userId:r,orgId:n??null,teamId:e.fig_file?.team_id??null,sidebarSectionId:i??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id??"",resourceType:o.bk.PROTOTYPE,prototype:{id:e.id||"unknown",name:e.name,fileKey:e.fig_file.key,pageId:e.page_id,thumbnailUrl:e.thumbnail_url,file:{parentOrgId:e.fig_file.parent_org_id||null,key:e.fig_file.key,folderId:e.fig_file.folder_id,teamId:e.fig_file.team_id,fileRepoId:e.fig_file.file_repo_id,hasProtoLinkPassword:e.fig_file.has_proto_link_password,name:e.fig_file.name,editorType:e.fig_file.editor_type,protoLinkAccess:e.fig_file.proto_link_access,createdAt:new Date(e.fig_file.created_at),trashedAt:e.fig_file.trashed_at?new Date(e.fig_file.trashed_at):null,prototypeUrl:{status:s.tT.Loaded,data:e.fig_file.prototype_url}}}}}function u(e,r,n,i){return{userId:r,orgId:n??null,sidebarSectionId:i??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,resourceType:o.bk.TEAM,teamId:null,team:{id:e.id,orgId:e.org_id,name:e.name,deletedAt:null,imgUrl:null,licenseGroup:null}}}function p(e,r,n,i){return{userId:r,orgId:n??null,teamId:e.team_id??null,sidebarSectionId:i??null,createdAt:new Date,updatedAt:new Date,resourceId:e.key,resourceType:o.bk.FILE,file:l(e)}}function m(e,r,n,a){return{userId:r,orgId:n??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,sidebarSectionId:a??null,resourceType:o.bk.WORKSPACE,teamId:null,workspace:{...e,orgId:n,colorConfig:null,description:null,orgAccess:"",createdAt:new Date,publicLinkControlsSetting:"",publicLinkControlsMaxExpiration:"",hasCustomPublicLinkControlsSetting:!1,isPluginAllowlisted:!1,canRead:!1,imgUrlTransformed:e.imgUrl,...i.fM}}}},645157:(e,r,n)=>{n.d(r,{Q:()=>d,r:()=>c});var i=n(848318),a=n(536384),o=n.n(a),s=n(302839),l=n(231639);function c({setMaxWidth:e,render:r}){let[n,a]=i.useState(new Map),o=i.useMemo(()=>n.size?Math.max(...n.values()):void 0,[n]);i.useLayoutEffect(()=>e(o),[o,e]);let s=i.useCallback((e,r)=>a(n=>{if(n.get(e)===r)return n;let i=new Map(n);return"number"==typeof r?i.set(e,r):i.delete(e),i}),[]);return i.createElement(i.Fragment,null,r({reportWidthOfValue:s}))}function d(e){return i.createElement(c,{setMaxWidth:e.setMaxWidth,render:({reportWidthOfValue:r})=>i.createElement(i.Fragment,null,e.options.map((n,a)=>i.createElement(u,{key:a,reportWidth:r,value:n,optionProps:{fullWidth:!0,formattedValue:e.formatOption(n),selected:!0,icon:e.getIcon(n)}})))})}function u({reportWidth:e,value:r,optionProps:n}){let a=i.useRef(null);return i.useLayoutEffect(()=>{let n=a.current;if(n){let i=()=>{e(r,n.getBoundingClientRect().width)};i();let a=new ResizeObserver(i);return a.observe(n),()=>{a.disconnect(),e(r,void 0)}}},[r,e,n.svg]),i.createElement("div",{className:l.D,"aria-hidden":!0},i.createElement(s.c$,{...n,additionalStylesClassName:o()(n.additionalStylesClassName,l.Z),forwardedRef:a}))}},474020:(e,r,n)=>{n.d(r,{$G:()=>m,Ad:()=>o,B3:()=>f,Hh:()=>g,Jj:()=>_,S:()=>h,Y7:()=>E,ai:()=>c,f1:()=>p,kJ:()=>d,s$:()=>u});var i=n(389191),a=n(427116);let o=["memory.fullscreen.","performance.fullscreen."],s=!0;function l(e,r){let n=-1/0;return()=>{let i=Date.now()/1e3;i-n>e&&(n=i,r())}}window.addEventListener("error",e=>{if(!s)return;s=!1;let{message:r,filename:n}=e,a=/abort/i.test(r),o=/\/compiled_/.test(n);(0,i.Rh)("unhandled_error",{abort:a,fullscreen:o})});let c=l(30,()=>{(0,i.Rh)("context_lost")}),d=l(30,()=>{(0,i.Rh)("context_restored")});function u(e){window.figmaPerfTesting&&window.postMessage({name:e,value:performance.now()/1e3},"*")}function p(){(0,i.Rh)("dirty_after_load")}function m(){(0,i.Rh)("consecutive_flushes")}function h(){(0,i.Rh)("consecutive_image_change_skips")}function _(){(0,i.Rh)("image_paste_error")}function g(){(0,i.Rh)("unsaved_changes_bell")}function f(e){(0,i.Rh)("reconnecting_banner",{client:e})}function E(e){return(0,a.x)(e,!0,e.productType)}},999872:(e,r,n)=>{n.d(r,{Sd:()=>y,Zp:()=>f,tB:()=>E,wc:()=>p}),n(157907),n(171659);var i=n(831932),a=n(481540),o=n(992444),s=n(577023),l=n(345908),c=n(6819),d=n(691885),u=n(757033),p=(e=>(e.MouseScrollToZoom="mouse-scroll-wheel-zoom",e.RightClickDragToPan="right-click-drag-to-pan",e))(p||{}),m=(e=>(e.UserManualChange="user_manual_change",e.Onboarding="onboarding",e))(m||{});function h({navigationPreference:e,enabled:r,eventOrigin:n}){var i,o;new d.P().sendToOtherTabs(e,JSON.stringify(r)),function(e){try{let r=c.D.getState();(0,a.uE)("navigation_preferences",r,{navigationPreference:e.navigationPreference,enabled:e.enabled,eventOrigin:e.eventOrigin})}catch(e){}}({navigationPreference:e,enabled:r,eventOrigin:n}),i=e,o=r,c.D.getState().user?.id&&u.Ay.put("/api/user","mouse-scroll-wheel-zoom"===i?{mouse_scroll_to_zoom:o}:{right_click_drag_to_pan:o})}let _=[!0,1,"1","true"];function g(e){return _.includes(e)}function f(e){c.D.getState().isFullscreenDocumentLoaded&&function(e){o.Y5.triggerAction(e?"set-scroll-wheel-zoom-enabled":"set-scroll-wheel-zoom-disabled")}(g(e))}function E(e){c.D.getState().isFullscreenDocumentLoaded&&function(e){o.Y5.triggerAction(e?"set-right-click-pan-enabled":"set-right-click-pan-disabled")}(g(e))}function y(){return[{separator:!0,platforms:["!ipad"]},{action:"toggle-scroll-wheel-zoom",platforms:["!ipad"],hideForQuickCommand:i.Ay.isIpad,"data-onboarding-key":l.oi.ZOOM,callback:()=>{h({navigationPreference:"mouse-scroll-wheel-zoom",enabled:!(0,s.UK)().scrollWheelZoom.getCopy(),eventOrigin:"user_manual_change"})},property:(0,s.UK)().scrollWheelZoom,propertyValue:!0,flags:["!figmake"]},{action:"toggle-right-click-pan",platforms:["!ipad"],hideForQuickCommand:i.Ay.isIpad,"data-onboarding-key":l.oi.PAN,callback:()=>{h({navigationPreference:"right-click-drag-to-pan",enabled:!(0,s.UK)().rightClickPan.getCopy(),eventOrigin:"user_manual_change"})},property:(0,s.UK)().rightClickPan,propertyValue:!0,flags:["!figmake"]},{separator:!0,platforms:["!ipad"],flags:["!edit"]}]}},967286:(e,r,n)=>{n.d(r,{d:()=>a,s:()=>o});var i=n(897392);function a(e){return`${i.dI(e.nodeID)}~${i.dI(e.interactionID)}`}function o(e){let[r,n]=e.split("~").map(e=>i.sH(e));return r&&n?{nodeID:r,interactionID:n}:null}},602836:(e,r,n)=>{n.d(r,{y:()=>s});var i=n(848318),a=n(741419),o=n(541525);function s(){let e=(0,o.U)(),r=a.h3O?.getSessionState(),n=function(){let[e,r]=i.useState(navigator.onLine);return i.useEffect(()=>{let e=()=>r(navigator.onLine);return window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),e}();return i.useEffect(()=>{!n&&r&&r!==a.kul.DETACHED&&e("offline_multiplayer_discrepancy",{isNavigatorOnline:navigator.onLine,isJoined:r===a.kul.JOINED,multiplayerSessionState:r.toString()})},[n,r,e]),n||r===a.kul.JOINED}},628055:(e,r,n)=>{n.d(r,{AS:()=>o,En:()=>l,mL:()=>s,u9:()=>c,vs:()=>a}),n(848318);var i=n(757033);let a=25,o="next",s="prev";function l(e,r,n,a=o){return new Promise((o,l)=>{let c=n&&n.pagination,d=c&&(a===s?c.prev_page:c.next_page);(null==c||d)&&(d=d||`${e}${-1===e.indexOf("?")?"?":"&"}page_size=${r}`,(0,i.k9)(d).then(({data:e})=>{let r=e.pagination;null==c?c=r:a===s?r.prev_page&&(c.prev_page=r.prev_page):c.next_page=r.next_page,e.meta.pagination=c,o(e.meta)},l))})}function c(e){return!!(!e?.pagination||e.pagination.next_page)}},66387:(e,r,n)=>{n.d(r,{_H:()=>i});function i(){let e=`figma.pc=; domain=${window.location.hostname}; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 UTC;`;document.cookie=e}},178169:(e,r,n)=>{n.d(r,{R:()=>o,X:()=>a});var i=n(41015);let a=(0,i.kf)("lazy_quill_editor",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(6896),n.e(9727),n.e(7509),n.e(3663),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(5974),n.e(8355),n.e(9567),n.e(6739),n.e(9924),n.e(764),n.e(5215)]).then(n.bind(n,520350))).QuillEditor})}),o=(0,i.kf)("lazy_readonly_quill_editor",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(6896),n.e(9727),n.e(7509),n.e(3663),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(5974),n.e(8355),n.e(9567),n.e(6739),n.e(9924),n.e(764),n.e(5215)]).then(n.bind(n,520350))).ReadOnlyQuillEditor})})},16196:(e,r,n)=>{n.d(r,{$J:()=>s,Ee:()=>l,OZ:()=>o,ZB:()=>d,mm:()=>c}),n(240854);var i=n(831932),a=n(243973);function o(e){if(!e.keyShortcutKey)return"";let r=a.y.isApple();var n=r?"\u2318":"Ctrl+";return e.keyShortcutShift&&(n+=r?"\u21E7":"Shift+"),e.keyShortcutOption&&(n+=r?"\u2325":i.Ay.chromeos?"Search+":"Alt+"),`   ${n}${e.keyShortcutKey}`}function s(e){if(!e)return"";if(e.length<1||"<"!==e.charAt(0)||">"!==e.charAt(e.length-1))return e;var r=e.replace(/(<\/[ph]\d?>)/g,"\n");return(r=(r=r.replace(/(<([^>]+)>)/gi,"")).replace(/&nbsp;/g,"\xa0")).replace(/&amp;/g,"&")}let l=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/g;function c(e){if(!e)return"";if(e.length>2&&"<"===e.charAt(0)&&">"===e.charAt(e.length-1))return e;var r=e.replace(/^.*/gm,"<p>$&</p>");return(r=(r=r.replace(l,e=>`<a href="${e}">${e}</a>`)).replace(/<p><\/p>/g,"<p><br></p>")).replace(/(\r\n|\n|\r)/gm,"")}function d(e){return""===s(e)?.trim()}},593190:(e,r,n)=>{n.d(r,{$9:()=>u,EM:()=>s,J1:()=>c,V$:()=>d,oI:()=>p});var i=n(915825);let a=[],o=0;function s(e){let r=e.split(":");return{channel:r[0],timestamp:parseInt(r[1]),generation:parseInt(r[2]),signature:r[3]}}let l=(0,i.Xs)(),c=l,d=l.v2;function u(){c.disconnect();let e=(0,i.Xs)();c=e,d=e.v2,c.connect()}function p(){(0,i.oI)()}window.realtimeClient=l,[].push(function(){o>0||a.forEach(e=>{o+=1,setTimeout(()=>{try{e()}finally{o-=1}},6e4+24e4*Math.random())})})},915825:(e,r,n)=>{n.d(r,{EM:()=>_,Xs:()=>E,oI:()=>g});var i,a=n(157907),o=n(579020),s=n(379338),l=n(180489),c=n(808471);let d=!1,u=!1,p=[],m=[],h=0;function _(e){let r=e.split(":");return{channel:r[0],timestamp:parseInt(r[1]),generation:parseInt(r[2]),signature:r[3]}}function g(){u=!0}let f=-1;function E(){let e=null,r=null,n=null,i=null,p=null,h={},g=!0,E=Date.now(),y=0,b=null,v=!0,T=null,I=null,S=null;(0,a.k)().realtime_disconnect_in_background&&(I=()=>{"hidden"===document.visibilityState?S||(S=setTimeout(()=>{w(),S=null},12e4)):(S&&(clearTimeout(S),S=null),null==i&&(console.log("[Realtime] Attempting reconnect due to page visibility change."),A()))},document.addEventListener("visibilitychange",I));let w=()=>{null!=p&&clearInterval(p),null!=i&&i.close(),p=null,i=null,g=!0},A=()=>{b&&(clearTimeout(b),b=null),T&&(window.removeEventListener("online",T),T=null),R()},C=()=>{if(w(),!v||null!=b)return;let e=4+(Math.min(128,4*Math.pow(2,y))-4)*Math.random();console.log(`[Realtime] Disconnected. Will attempt reconnect in ${e.toFixed(0)} seconds.`),b=setTimeout(()=>{console.log(`[Realtime] Attempting reconnect now after waiting ${e.toFixed(0)} seconds.`),A()},1e3*e),y++,T=()=>{console.log("[Realtime] Attempting reconnect due to connectivity change."),navigator.onLine&&A()},window.addEventListener("online",T)},N=e=>{i&&i.readyState===i.OPEN&&i.send(`tok:${e.channel}:${e.timestamp}:${e.generation}:${e.signature}`)},L=e=>{let r=(0,s.tl)().user_data;if(!r?.id){console.warn("Can't post to me channel without user id available"),(0,o.sx)("Me Channel UserId Missing");return}let n=`/me-${r?.id}`;if(!(n in h)){if(console.warn("We're not subscribed to the me channel"),(0,o.sx)("Me Channel Subscription Missing"),r?.realtime_token){(0,o.sx)("Me Channel Resubscribe");let e=_(r.realtime_token);h[n]=e,N(e)}else{console.warn("We're unable to subscribe to the me channel; server will reject this message"),(0,o.sx)("Me Channel No Token");return}}if(!i||i.readyState!==i.OPEN){(0,c.nl)()||console.warn("Sending to me without open websocket"),(0,o.sx)("Me Channel Websocket Missing");return}let a=JSON.stringify([{channel:n,data:e}]);i.send(`pme:${a}`)},O=e=>{delete h[e],i&&i.readyState===i.OPEN&&i.send(`uns:${e}`)},R=()=>{if(u||(0,a.k)().realtime_disconnect_in_background&&"hidden"===document.visibilityState&&d)return;w();let r="";r=("https:"===window.location.protocol?`wss://${window.location.host}`:`ws://${window.location.host}`)+"/api/realtime_v2";let n=window.INITIAL_OPTIONS&&window.INITIAL_OPTIONS.release_git_tag||"";r+=`?release_git_tag=${n}&user_id=${window.INITIAL_OPTIONS?.user_data?.id||""}`,(i=new WebSocket(r)).onopen=e=>{for(let e in y=0,console.log(`[Realtime] Connected to ${r}.`),p=setInterval(()=>{i.send("ping")},3e4+5e3*Math.random()-2500),d&&Date.now()-E>6e4&&m.forEach(e=>{setTimeout(e,0)}),d=!0,h)N(h[e])},i.onmessage=r=>{if("pong"===r.data){E=Date.now();return}let n=r.data.substr(0,4);if("tok:"===n){let e=_(r.data.substr(4));h[e.channel]=e;return}let i={};if("ouc:"===n){let e=r.data.substr(4).split(":");3!==e.length&&console.warn("Got ouc: command with wrong number of params");for(let r=0;r<e.length;r++)"null"===e[r]&&(e[r]=null);i={type:"verify_user_state",org_user_count:e[0]&&parseInt(e[0]),org_user_updated:e[1]&&new Date(parseInt(e[1])).toISOString(),target_user_id:e[2]}}else if("sub:"===n||"uns:"===n){let e=r.data.split(":"),n=e[e.length-1];if("ok"===n)return;if(delete h[e[1]],"expired"===n){if(!g)return;g=!1,i={type:"token_expired"}}else{console.warn(r.data);return}}else{try{i=JSON.parse(r.data)}catch(e){console.warn(`unexpected non-JSON realtime message: ${r.data}`);return}null!=i.err&&(console.warn("encountered error message from realtime",i.err),C())}e&&e(i)},i.onclose=e=>{i=null,null!=p&&(clearInterval(p),p=null),C()}},P={},D=new Set,M=new Map,k={connect:R,disconnect:()=>{v=!1,w(),h={},I&&document.removeEventListener("visibilitychange",I)},setCallback:r=>{e=e=>{let n=e.method,i=Object.keys(e).filter(e=>l.C.has(e)).map(r=>({type:r,value:e[r]})),a=!1;r(e),i.forEach(r=>{let i=P[r.type];i&&Object.keys(i).map(e=>i[e]).filter(e=>e.methods[n]).forEach(n=>{n.callback(r.value,e.method)})})}},setOnSubscribeCallback:e=>{r=e},setOnUnsubscribeCallback:e=>{n=e},subscribe:(e,n)=>{let i=h[e.channel];h[e.channel]=e,i||N(e),!1!==n&&D.add(e.channel),r&&r(e.channel)},unsubscribe:(e,r)=>{if(!1!==r&&D.delete(e),!1===r&&D.has(e))return;let i=M.get(e);i&&i.size>0||(delete h[e],O(e),n&&n(e))},postToMeChannel:e=>{L(e)}},F=()=>{let e=(0,s.tl)().user_data;return e?.realtime_token?_(e.realtime_token):null},x=["post","put","delete"],U=e=>"string"==typeof e?{type:e,token:F(),methods:x}:e,B={subscriptions:h,subscribe:function(e,r){let n=U(e),i=n.token||F();if(!i)return()=>{};let a=(f+=1,`${f}:${performance.now()}`),o=P[n.type]||{},s=n.methods||x,l={};return s.forEach(e=>{l[e]=!0}),o[a]={methods:l,callback:r},P[n.type]=o,(M.get(i.channel)||new Set).add(a),k.subscribe(i,!1),()=>{let{channel:e}=i,r=M.get(e);r?.delete(a);let o=P[n.type];if(o&&(delete o[a],0===Object.keys(o).length)){let e=n.type;delete P[e]}k.unsubscribe(e,!1)}}};return{...k,v2:B}}i=function(){h>0||p.forEach(e=>{h+=1,setTimeout(()=>{try{e()}finally{h-=1}},6e4+24e4*Math.random())})},m.push(i)},397175:(e,r,n)=>{n.d(r,{F:()=>o});var i=n(891627),a=n(693220);function o(e,r=document.createElement("div")){let n=(0,a.H)(r);return(0,i.flushSync)(()=>{n.render(e)}),r.innerHTML}},278191:(e,r,n)=>{n.d(r,{iw:()=>l,ld:()=>s});var i=n(44509),a=n(379338);let o=class e{static initialize(){let r=a.Ay().user_data?.email;if(r&&(-1!==r.indexOf("@figma)")||-1!==r.indexOf("@test.figma"))){let r=new URLSearchParams(i.Ay.location.search).get("safeModeRenderLimitMs");r&&(e.getForcedRenderTimeMsValue=parseInt(r))}}getForcedRenderTimeMs(){return e.getForcedRenderTimeMsValue}};o.getForcedRenderTimeMsValue=null,o.initialize();let s=new o,l=new class{constructor(e){this.safeModeOptions=e}getForcedRenderTimeMs(){let e=this.safeModeOptions.getForcedRenderTimeMs();return null!=e?e:-1}}(s)},983229:(e,r,n)=>{n.d(r,{D8:()=>c,GG:()=>u,T9:()=>_,lt:()=>p,mv:()=>h,oj:()=>d,u2:()=>m});var i=n(848318),a=n(869147),o=n(155651),s=n(654104);class l extends s.o6{constructor(){super(...arguments),this.onClick=s.cZ(this,"click",e=>this.props.onClick?this.props.onClick(e):s.aH),this.onContextClick=s.cZ(this,"contextmenu",e=>this.props.onContextMenu?this.props.onContextMenu(e):s.aH),this.onDoubleClick=s.cZ(this,"dblclick",e=>this.props.onDoubleClick?this.props.onDoubleClick(e):s.aH),this.onMouseDown=s.cZ(this,"mousedown",e=>this.props.onMouseDown?this.props.onMouseDown(e):s.aH),this.onMouseUp=s.cZ(this,"mouseup",e=>this.props.onMouseUp?this.props.onMouseUp(e):s.aH),this.onMouseMove=s.cZ(this,"mousemove",e=>this.props.onMouseMove?this.props.onMouseMove(e):s.aH),this.onMouseEnter=s.cZ(this,"mouseenter",e=>this.props.onMouseEnter?this.props.onMouseEnter(e):s.aH),this.onMouseLeave=s.cZ(this,"mouseleave",e=>this.props.onMouseLeave?this.props.onMouseLeave(e):s.aH),this.onPointerDown=s.Am(this,"pointerdown",e=>this.props.onPointerDown?this.props.onPointerDown(e):s.aH),this.onPointerUp=s.Am(this,"pointerup",e=>this.props.onPointerUp?this.props.onPointerUp(e):s.aH),this.onPointerMove=s.Am(this,"pointermove",e=>this.props.onPointerMove?this.props.onPointerMove(e):s.aH),this.onKeyUp=s.C0(this,"keyup",e=>this.props.onKeyUp?this.props.onKeyUp(e):s.aH),this.onKeyDown=s.C0(this,"keydown",e=>this.props.onKeyDown?this.props.onKeyDown(e):s.aH),this.onFocus=s.Ht(this,"focus",e=>this.props.onFocus?this.props.onFocus(e):s.aH),this.onBlur=s.Ht(this,"blur",e=>this.props.onBlur?this.props.onBlur(e):s.aH)}render(){let{recordingKey:e,forwardedRef:r,dataTestId:n,dataOnboardingKey:i,...a}=this.props;return this.recordingKey()&&(this.props.onClick&&(a.onClick=this.onClick),this.props.onDoubleClick&&(a.onDoubleClick=this.onDoubleClick),this.props.onMouseDown&&(a.onMouseDown=this.onMouseDown),this.props.onMouseMove&&(a.onMouseMove=this.onMouseMove),this.props.onMouseEnter&&(a.onMouseEnter=this.onMouseEnter),this.props.onMouseLeave&&(a.onMouseLeave=this.onMouseLeave),this.props.onMouseUp&&(a.onMouseUp=this.onMouseUp),this.props.onContextMenu&&(a.onContextMenu=this.onContextClick),this.props.onKeyUp&&(a.onKeyUp=this.onKeyUp),this.props.onKeyDown&&(a.onKeyDown=this.onKeyDown),this.props.onFocus&&(a.onFocus=this.onFocus),this.props.onBlur&&(a.onBlur=this.onBlur),this.props.onPointerDown&&(a.onPointerDown=this.onPointerDown),this.props.onPointerUp&&(a.onPointerUp=this.onPointerUp),this.props.onPointerMove&&(a.onPointerMove=this.onPointerMove)),n&&(a["data-testid"]=n),i&&(a["data-onboarding-key"]=i),this.node(a,r)}}class c extends l{node(e,r){return i.createElement("div",{...e,ref:r})}}c.displayName="RecordableDiv",(0,o.tf)(c);class d extends l{node(e,r){return i.createElement("span",{...e,ref:r})}}d.displayName="RecordableSpan";class u extends l{node(e,r){return i.createElement("button",{...e,ref:r})}}u.displayName="RecordableButton";class p extends l{node(e,r){return i.createElement("a",{...e,ref:r})}}p.displayName="RecordableA";class m extends l{constructor(){super(...arguments),this.onChange=s.Z7(this,"change",e=>this.props.onChange?this.props.onChange(e):s.aH)}node(e,r){return i.createElement("input",{...e,onChange:this.onChange,ref:r,dir:"auto","data-onboarding-key":this.props.dataOnboardingKey})}}m.displayName="RecordableInput";class h extends l{constructor(){super(...arguments),this.onChange=s.Z7(this,"change",e=>this.props.onChange?this.props.onChange(e):s.aH)}node(e,r){return i.createElement("textarea",{...e,onChange:this.onChange,ref:r,dir:"auto"})}}function _({children:e}){let r=(0,i.useMemo)(()=>s.Fk()?(e,r)=>{let n=s.cC(r.recordingKey);return(0,i.useMemo)(()=>{if(!e||!r.recordingKey)return e;let i=s.fA(n,r.eventName,r=>Array.isArray(r)?e(...r):e(r));return(...e)=>i(e)},[n,r.eventName,e,r.recordingKey])}:g,[]);return i.createElement(a.g.Provider,{value:{useInteraction:r}},e)}function g(e){return e}h.displayName="RecordableTextarea"},855584:(e,r,n)=>{n.d(r,{F:()=>s,p:()=>l});var i=n(197638),a=n.n(i);let o=/[\u202A-\u202E\u2060-\u206F]/g;function s(e){return e?e.replace(o,"").normalize():e}function l(e){return a().sanitize(e)}},518259:(e,r,n)=>{n.d(r,{We:()=>o,qV:()=>a});var i=n(821360);async function a(e){let r=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",r))).map(e=>e.toString(16).padStart(2,"0")).join("")}function o(e,r){return s(e,r)}async function s(e,r){let n=r.split(".");if(2!==n.length)throw Error("Could not parse message and nonce.");let a=n[0],o=n[1],s=(0,i.D4)(a),l=(0,i.D4)(o),c=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:s},e,l);return new TextDecoder().decode(c)}},502255:(e,r,n)=>{n.d(r,{$D:()=>N,Bc:()=>T,Cp:()=>f,DZ:()=>b,NU:()=>o.NUh,Tm:()=>w,XM:()=>I,Zx:()=>g,it:()=>y,kF:()=>v,mR:()=>A,us:()=>L,uy:()=>C,wp:()=>R,xO:()=>O,xZ:()=>S,xg:()=>_,xn:()=>E,yO:()=>h});var i=n(615530),a=n(992277),o=n(741419),s=n(288996),l=n(325489),c=n(996967),d=n(379338),u=n(914434),p=n(53818),m=n(571661);let h=[/a\[b\]\.target\.className\.indexOf is not a function/,/\(event\.target\.className \|\| ""\)\.indexOf is not a function/,/XHR for ".*" failed with status/,/Endpoint requires authenticated user/],_=[/\bintercomcdn\.com\b/,/\bkaspersky-labs\.com\b/,/\bchrome-extension:\/\//,/\bmoz-extension:\/\//,/\bsafari-extension:\/\//],g=new i.b("sentry");function f(e){s.Cp(e)}function E(e){for(let r of e.exception?.values||[])for(let e of r.stacktrace?.frames||[])e.filename&&(e.filename=(0,u.Br)(e.filename));e.request?.url&&(e.request.url=(0,u.Br)(e.request.url)),"string"==typeof e.tags?.url&&(e.tags.url=(0,u.Br)(e.tags.url))}function y(e){let{category:r,data:n}=e;if("xhr"===r||"fetch"===r){let e=n?.url;if(e&&(e.match(/segment.io/)||e.startsWith("/api/figment-proxy")||e.startsWith(`${location.origin}/api/figment-proxy`)))return null;n&&e&&e.startsWith("data:")&&(n.url=`${e.substring(0,36)}... (truncated from ${e.length} characters)`)}return g.trigger("breadcrumb",e),e}var b=(e=>(e.Critical="critical",e.Major="major",e.Minor="minor",e.Trivial="trivial",e))(b||{});function v(e,r){m.A.instance.enabled&&(s.NA(e,r),c.L?.setGlobalContextProperty(e,r))}function T(e){m.A.instance.enabled&&(s.Wt(e),c.L&&c.L.setGlobalContext({...e,...c.L.getGlobalContext()}))}function I(e,r){m.A.instance.enabled&&s.o(e,r)}function S(e){v("file.key",e.key),null===e.fileRepoId?v("branching","not enabled"):(v("branching_repo",e.fileRepoId),null===e.sourceFileKey?v("branching","main branch"):v("branching","user branch"))}function w(e){e&&s.gV({id:e})}function A(e){e&&s.NA("org.id",e)}function C(e){e&&s.NA("server_release",e)}let N=(0,p.n)((e,r,n)=>{let i;if(!(r.reportedToSentry||r.cause?.reportedToSentry)&&!m.A.instance.ignoreErrors)return r.reportedToSentry=!0,m.A.instance.slogToConsole&&console.error(r,n),m.A.instance.enabled&&(l.v4(function(o){e!==a.e.UNOWNED&&o.setTag("area",e);let l=c.L?.getInternalContext()?.session_id;if(l){o.setTag("rum_session_id",l);let e="gov"!==(0,d.tl)().cluster_name?"dd":"dd-gov";o.setContext("rum",{session_link:`https://go/${e}/rum/sid/${l}`})}if(r.sentryTags)for(let e in r.sentryTags)o.setTag(e,r.sentryTags[e]);i=s.Cp(r,n)}),c.L&&c.L.addError(r,{captureContext:n,...e!==a.e.UNOWNED&&{area:e},...r.sentryTags})),i},"reportErrorToSentry");function L(e){m.A.instance.slogToConsole&&console.error(e),m.A.instance.enabled&&s.wd(e)}function O(e,r){null==r&&N(e,Error(`value is ${void 0===r?"undefined":"null"}`))}function R(){let e=(0,d.tl)().release_manifest_git_commit;m.A.instance.enabled&&e&&(s.J0(),s.J5())}},457040:(e,r,n)=>{function i(e,r){let n=new Set,[i,a]=e.size<r.size?[e,r]:[r,e];for(let e of i)a.has(e)&&n.add(e);return n}function a(e,r){if(e.size!==r.size)return!1;for(let n of e)if(!r.has(n))return!1;return!0}function o(e,r,n){let i=new Map,[a,o]=e.size<r.size?[e,r]:[r,e];for(let[e,r]of a.entries()){let a=o.get(e);null!=a&&i.set(e,n(e,r,a))}return i}n.d(r,{iR:()=>i,wD:()=>o,yZ:()=>a})},20191:(e,r,n)=>{var i;n.d(r,{f:()=>i}),(e=>{let r=(e,r)=>e<r?-1:1,n=Intl.Collator().resolvedOptions().locale+"-u-co-emoji";e.LEXICOGRAPHICALLY=(e,i)=>"string"!=typeof e?r(e,i):RegExp("\\p{Extended_Pictographic}|\\p{Regional_Indicator}","u").test(e)&&RegExp("\\p{Extended_Pictographic}|\\p{Regional_Indicator}","u").test(i)?e.localeCompare(i,n):e.localeCompare(i),e.BY_DATETIME=(e,n)=>{if("string"!=typeof e)return r(e,n);let i=Date.parse(e),a=Date.parse(n);return i&&a?a-i:r(e,n)},e.byProperty=function(e,n=r){return(r,i)=>r[e]===i[e]?0:n(r[e],i[e])},e.byComparators=function(...e){return(r,n)=>{for(let i=0;i<e.length;i++){let a=(0,e[i])(r,n);if(0!==a)return a}return 0}},e.reverse=function(e){return(r,n)=>-1*e(r,n)}})(i||(i={}))},6850:(e,r,n)=>{n.d(r,{G:()=>i});var i=(e=>(e.SDKReady="sdkReady",e.Call="call",e.SetProperty="setProperty",e.GetProperty="getProperty",e.SetContainerDimensions="setContainerDimensions",e.Error="error",e.GetPermissionToShowSurvey="getPermissionToShowSurvey",e.SurveyClosed="surveyClosed",e))(i||{})},882644:(e,r,n)=>{n.d(r,{A:()=>g});var i=n(848318),a=n(157907),o=n(39773),s=n(322035),l=n(141039),c=n(379338),d=n(808471),u=n(738460),p=n(645221),m=n(421868);n(6850);let h=(0,o.eU)([]);function _(e,r){let{country:n,region:i}=e;return r.some(({country:e,region:r})=>(!e||n===e)&&(!r||i===r))}function g({children:e,onAttemptToShowSurvey:r,onSurveyClose:n,geofence:g={}}){var f;let E=(0,o.md)(u.EA),y=(f=function(){let e=(0,c.tl)();return{country:e.iso_code,region:e.viewer_region}}(),!(void 0!==g.exclude&&_(f,g.exclude))&&(void 0===g.include||_(f,g.include))),b=!(0,s.GZ)()&&!(0,d.lZ)()&&!(0,c.tl)().e2e_traffic&&E&&y&&(0,a.k)().sprig_enabled&&!l.S8,[v,T]=(0,i.useState)(m.An),I=(0,o.md)(h);return(0,i.useEffect)(()=>{T(e=>(e.tearDown(),b?new m.Ay:m.An))},[b]),(0,i.useEffect)(()=>{v.setCallbacks({onAttemptToShowSurvey:r,onSurveyClose:n})},[r,n,v]),(0,i.useLayoutEffect)(()=>{m.Ay.setScreenAreasToAvoid(I)},[I]),i.createElement(p.M.Provider,{value:v},e)}(0,o.eU)(null,(e,r,n)=>{let i=e(h);r(h,[...i,n])}),(0,o.eU)(null,(e,r,n)=>{let i=e(h),a=i.indexOf(n);-1!==a&&r(h,i.slice(0,a).concat(i.slice(a+1)))})},431118:(e,r,n)=>{n.d(r,{$M:()=>T,DV:()=>f,EJ:()=>h,FS:()=>O,H9:()=>N,LD:()=>b,Qp:()=>R,Qt:()=>_,Rw:()=>L,VZ:()=>l,Vs:()=>C,YH:()=>p,Yx:()=>y,Zr:()=>o,_5:()=>c,fs:()=>w,gU:()=>A,hX:()=>u,lH:()=>m,sy:()=>S,td:()=>v,vE:()=>d,zS:()=>s});var i=n(157907),a=n(856480);function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e){return e.toLowerCase().replace(/-(.)/g,function(e,r){return r.toUpperCase()})}function l(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function c(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}function d(e){return o(e.split("_").join(" ").toLocaleLowerCase())}function u(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function p(e){let r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(var i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}function m(e){return String.prototype.toWellFormed?e.toWellFormed():function(e){function r(e){return(63488&e)==55296}let n="";for(let i=0;i<e.length;++i){let a=e.charCodeAt(i);if(!r(a)){n+=e.charAt(i);continue}if(!((1024&a)!=0)&&i+1<e.length){let a=e.charCodeAt(i+1);if(r(a)&&(1024&a)!=0){n+=e.charAt(i),n+=e.charAt(i+1),++i;continue}}n+="\uFFFD"}return n}(e)}function h(e,r){return e.length>r?e.slice(0,r-1).trimEnd()+"\u2026":e}function _(e){let r=[];for(let n=0;n<e.length;n++){let i=function(e,r){let n=e.charCodeAt(r);if(Number.isNaN(n))return"";if(n<55296||n>57343)return e.charAt(r);if(55296<=n&&n<=56319){if(e.length<=r+1)throw Error("High surrogate without following low surrogate");let n=e.charCodeAt(r+1);if(56320>n||n>57343)throw Error("High surrogate without following low surrogate");return e.charAt(r)+e.charAt(r+1)}throw Error("Not the start of a single- or multibyte-character")}(e,n);n+=i.length-1,r.push(i)}return r}let g={numeric:!0,sensitivity:"base"};function f(e,r,n=g){let i=(0,a.Gq)().getPrimaryLocale(!1),o=new Intl.Collator(i,n);return e.sort((e,n)=>o.compare(r(e),r(n)))}let E={};function y(e,r="conjunction"){let n=(0,a.Gq)().getPrimaryLocale(!1);return E[r]||(E[r]=new Intl.ListFormat(n,{type:r})),E[r].format(e)}function b(e,r,n){return n=n||`${r}s`,1===e?r:n}function v(e,r,n){return null==e&&(e=0),`${e} ${b(e,r,n)}`}function T(e){return e<1e3?e.toString():e<1e5?`${Math.floor(e/100)/10}k`:e<1e6?`${Math.floor(e/1e3)}k`:e<1e8?`${Math.floor(e/1e5)/10}m`:e<1e9?`${Math.floor(e/1e6)}m`:e<1e11?`${Math.floor(e/1e8)/10}b`:`${Math.floor(e/1e9)}b`}let I=RegExp(`[${[":","/","?","#","[","]","@","!","$","&","'","(",")","*","+",",",";","=","%"].map(e=>"\\"+e).join("")}]`,"g");function S(e){let r=e;return(0,i.k)().strip_reserved_characters_from_file_slug&&(r=r.replace(I,"-")),encodeURIComponent(r=r.replace(/ /g,"-"))}function w(e){var r=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[ .\-_\/\\:;|,&+=*]/g,"-").replace(/[^a-z0-9\-]/g,"").replace(/\-+/g,"-").replace(/^\-+/,"").substring(0,100).replace(/\-+$/,"");return S(r=["thumbnail","icon","code","snapshot","duplicate","embed","canvas","remixes"].includes(r)?"":r)}let A=e=>/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,18}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(e);function C(e){for(var r=0,n=e.length>>>2,i=new Uint8Array(3*n),a=0,o=[],s=0;s<127;s++)o[s]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(String.fromCharCode(s));for(;r<n<<2;){var l=o[e.charCodeAt(r++)],c=o[e.charCodeAt(r++)],d=o[e.charCodeAt(r++)],u=o[e.charCodeAt(r++)];i[a++]=l<<2|c>>>4,d>=0&&(i[a++]=c<<4|d>>>2),u>=0&&(i[a++]=d<<6|u)}return a===i.length?i:i.subarray(0,a)}function N(e){for(var r="",n=e.length,i=0;i<n;i+=1024)r+=String.fromCharCode.apply(String,e.subarray(i,i+1024));return btoa(r)}function L(e){for(var r="",n=0;n<e.length;n++)r+=("00"+e[n].toString(16)).slice(-2);return r}function O(e){return e.replace(/\s+/g,"")}function R(e,r){return O(e)===O(r)}},416900:(e,r,n)=>{n.d(r,{GU:()=>l,SH:()=>o,cn:()=>a});var i=n(95650);function a(e){return e&&!!e.student_validated_at}function o(e,r){return{hasGracePeriod:!!(e&&r in e),isInValidGracePeriod:(e&&e[r]?s(e,r):0)>0}}n(995946);let s=(e,r)=>Math.ceil((0,i.A)(e[r].createdAt).add(7,"days").diff((0,i.A)(),"days",!0));function l(e,r,n,i){let a=o(e,n);if(r||!i||!a.hasGracePeriod)return{showReminder:!1,showAccessRestricted:!1};let s=a.isInValidGracePeriod;return{showReminder:s,showAccessRestricted:!s}}},808471:(e,r,n)=>{n.d(r,{Lg:()=>i.Lg,Ns:()=>i.Ns,PN:()=>i.PN,QJ:()=>i.QJ,b_:()=>i.b_,lZ:()=>i.lZ,nl:()=>i.nl});var i=n(386656)},638702:(e,r,n)=>{function i(e){return null==e?"":new URL(e).origin}function a(e){if(0!==e.indexOf("data:"))throw Error("Invalid data URL: `data:` prefix missing");let[r,n]=e.slice(5).split(",");if(!n)throw Error("Invalid data URL: data part missing");let i=!!r&&r.length>0,a=i&&r.endsWith(";base64"),o=a?r.slice(0,-7):i?r:void 0;return new Blob([a?function(e){let r=atob(e),n=r.length,i=new Uint8Array(n);for(let e=0;e<n;e++)i[e]=r.charCodeAt(e);return i}(n):decodeURIComponent(n)],{type:o})}n.d(r,{G_:()=>a,Jk:()=>i})},972813:(e,r,n)=>{n.d(r,{Rq:()=>E,YV:()=>f,_5:()=>T,q$:()=>y,td:()=>i,vh:()=>v});var i,a=n(157907),o=n(878028),s=n(979070),l=n.n(s),c=n(890446),d=n.n(c),u=n(507848),p=n.n(u),m=n(757033),h=n(579020),_=n(896966);class g{constructor(e,r,n,i=!1){this.featureFlagKey=n,this.enforce=i,this._input=null,this._output=null;let a="function"==typeof r?r(o.z):r;this.validator=new b(e,a,this.enforce?"error":"warn")}async validate(e){let r=await e({xr:m.IF});if("string"==typeof this.featureFlagKey&&!(0,a.k)()[this.featureFlagKey]||200!==r.status)return r;try{let e=await this.validator.validate(()=>Promise.resolve(r));if(this.enforce)return e;return{...e,data:{...r.data,...e.data}}}catch(e){if(this.enforce)throw e;return r}}}function f(e,r,n,i=!1){let a="function"==typeof r?r(o.z):r;return new g(e,o.z.object({meta:a}),n,i)}function E(e,r,n,i=!1){let a="function"==typeof r?r(o.z):r;return new g(e,o.z.object({meta:a,pagination:o.z.object({nextPage:o.z.string().nullable(),prevPage:o.z.string().nullable()})}),n,i)}function y(e,r){return new b(e,o.z.object({meta:r}),"error")}class b{constructor(e,r,n){this.debugKey=e,this.schema=r,this.logLevel=n,this._input=null,this._output=null}async validate(e){let r=await e({xr:m.IF}),n=this.schema.safeParse(r.data);if(n.success){let e=n.data,{data:i,...a}=r;return{...a,data:{...e}}}throw(0,h.sx)("Validator Failure",{name:this.debugKey,level:this.logLevel,error:JSON.stringify(n.error.flatten())},{forwardToDatadog:!0,batchRequest:!0}),"error"===this.logLevel&&(0,_.x1)("APIGetValidationFailure",`Validation failed for api response for ${this.debugKey}`,function(e){let r={};return e.issues.forEach(e=>{let n=e.path.map(e=>"number"==typeof e?"[#]":e).join(".");r[n]||=new Set,r[n].add(e.message)}),Object.keys(r).reduce((e,n)=>(e[n]=[...r[n]],e),{})}(n.error),{reportAsSentryError:!0}),n.error}}function v(){return{_input:null,_output:null,validate:e=>e({xr:m.IF})}}(e=>{e.toAPIParameters=function(e,r=[]){if(void 0===e)return e;let n=new Set(r);return Object.keys(e).reduce((r,i)=>{let a=n.has(i)?i:p()(i),o=e[i];switch(void 0!==o&&(r[a]=o),typeof o){case"undefined":break;case"number":case"boolean":r[a]=o.toString();break;default:r[a]=o}return r},{})},e.toCamelCase=function(e){return e.transform(e=>d()(e,(e,r)=>l()(r)))}})(i||(i={}));let T=v()},705694:(e,r,n)=>{n.d(r,{l9:()=>v,hk:()=>T,R4:()=>I,FL:()=>L,ur:()=>C,O5:()=>N});var i=n(848318),a=n(101595),o=n(197638),s=n.n(o),l=n(731889),c=n(579020);class d{constructor(e,r){this._timeOfLastDisconnectMs=null,this._timeOfLastConnectionMs=null,this._timeOfFirstConnectionMs=null,this._definedConnectionAttemptEventName=e,this._definedDisconnectEventName=r}handleSocketDisconnect(e){if(null==this._timeOfLastConnectionMs)return;this._timeOfLastDisconnectMs=this.nowMs();let r=(this._timeOfLastDisconnectMs-this._timeOfLastConnectionMs)/1e3,n=this.nowMs()/1e3;c.az.trackDefinedEvent(this._definedDisconnectEventName,{connectionDurationSeconds:r,windowIsActive:e,sessionLengthSeconds:n})}handleSocketConnectionAttempt(e,r,n,i){if(!e&&r<3)return;let a=null==this._timeOfLastDisconnectMs?0:this._timeOfLastDisconnectMs,o=(this.nowMs()-a)/1e3;e&&(this._timeOfLastConnectionMs=this.nowMs(),null==this._timeOfFirstConnectionMs&&(this._timeOfFirstConnectionMs=this._timeOfLastConnectionMs));let s=this.nowMs()/1e3;c.az.trackDefinedEvent(this._definedConnectionAttemptEventName,{success:e,timeSinceDisconnectSeconds:o,numberOfConnectionAttempts:r,firstTimeConnecting:n,windowIsActive:i,sessionLengthSeconds:s})}nowMs(){return Math.round(performance.now())}}var u=n(579463),p=n(994243),m=n(29431),h=n(291661),_=n(201261),g=n(278191),f=n(896966),E=n(808471),y=null,b=null;let v=new _.L;function T(){return y}function I(){return null}class S{bindContext(e,r){(0,p.Rx)(e,r,(0,a.iL)().WebGLEmscriptenObj)}getNewProgramId(){let e=(0,a.iL)().WebGLEmscriptenObj;return e.getNewId(e.programs)}}let w=class e{getDynamicConfigBoolean(r,n,i){return u.w$.getDynamicConfigBoolean(r,n,i,e.SourceLoggingString)}getDynamicConfigNumber(r,n,i){return u.w$.getDynamicConfigNumber(r,n,i,e.SourceLoggingString)}getDynamicConfigString(r,n,i){return u.w$.getDynamicConfigString(r,n,i,e.SourceLoggingString)}getExperimentBoolean(r,n,i){return u.w$.getExperimentBoolean(r,n,i,e.SourceLoggingString)}getExperimentNumber(r,n,i){return u.w$.getExperimentNumber(r,n,i,e.SourceLoggingString)}getExperimentString(r,n,i){return u.w$.getExperimentString(r,n,i,e.SourceLoggingString)}clearFeatureGatesForTesting(){u.w$.clear()}updateFeatureGateForTesting(e,r){u.w$.updateFeatureGateForTesting(e,r)}getFeatureGate(e){return u.w$.getFeatureGateFromInitialOptions(e)}setInRenderServerForViewerTests(){u.w$.setInRenderServerForViewerTests()}};async function A(){if(!Fig.createViewer)try{let e=Fig.tsViewerScriptURL;await (0,l.k0)(e)}catch(e){throw e}}function C(e,r,n,a){let[o,s]=i.useState(null),l=i.useRef({viewerMode:e,containerElement:r,loadTimeTracker:m.Su,statsigViewerWebConfig:new w,socketConnectionTracker:new d("prototype.multiplayer_socket_connection_attempt","prototype.multiplayer_socket_disconnect"),safeModeOptions:g.ld,emscriptenGL:new S,logError:(e,r,n,i,a)=>{switch(e){case"DEBUG":(0,f.ED)(r,n,i,a);break;case"INFO":(0,f.Lo)(r,n,i,a);break;case"WARN":(0,f.xi)(r,n,i,a);break;case"ERROR":(0,f.x1)(r,n,i,a)}},...n});i.useEffect(()=>{let e=l.current;(async function(){let{containerElement:r}=l.current;y&&!a?(JSON.stringify({...e,containerElement:null})===JSON.stringify(b)||(0,E.nl)()||console.warn("useViewer called with different options than the first call!"),r&&y.setNewContainerElement(r)):(b={...e,containerElement:null},await A(),y=await Fig.createViewer(e)),s(y)})()},[a]),i.useEffect(()=>{o&&r&&o.setNewContainerElement(r)},[o,r]);let c=r?.getBoundingClientRect();return i.useLayoutEffect(()=>{o?.forceFrame()},[o,c?.x,c?.y,c?.height,c?.width]),o}function N(e,r,n){i.useEffect(()=>(e?.on(r,n),()=>{e?.off(r,n)}),[e,r,n])}function L(e){let r=document.createElement("div");r.setAttribute("id","viewer_debug_stats"),document.body.appendChild(r),r.style.cssText=`
  font-size: 18px;
  position: fixed;
  left: 6px;
  top: 48px;
  background-color: black;
  color: white;
  border-radius: 3px;
  display: flex;
  flex-direction: column;
  padding: 6px;
  `,setInterval(()=>{for(;r.firstChild;)r.removeChild(r.firstChild);let n=e.getStatsForDebugging();for(let e in n){let i=document.createElement("div");i.innerHTML=s().sanitize(`
      <div>
        <span>
          ${e}: &nbsp;
        </span>
        <span>
          ${n[e]}
        </span>
      </div>
      `),r.appendChild(i)}let i=(0,h.rE)();for(let e in i){let n=document.createElement("div");n.innerHTML=`
      <div>
        <span>
          ${e}: &nbsp;
        </span>
        <span>
          ${i[e]}
        </span>
      </div>
      `,r.appendChild(n)}},1e3/30)}w.SourceLoggingString="viewer"},922522:(e,r,n)=>{n.d(r,{H:()=>u});var i=n(157907),a=n(185579),o=n(507152),s=n(579020),l=n(44509),c=n(379338),d=n(914434);function u(e){if(!(0,i.k)().web_vitals_report)return;let r=l.Ay.location.pathname+l.Ay.location.search,n=!!document.querySelector('meta[name="is_preload_streaming"]'),u=!!document.querySelector('meta[name="is_serving_resized_image"]'),p=!!document.querySelector('meta[name="is_app_shell"]');function m(i){let a={name:i.name,google_rating:i.rating,navigation:i.navigationType,id:i.id,value:i.value,initialPath:r,normalized_current_path:(0,d.qR)(l.Ay.location.pathname),bundle:e,used_codesplitting:!0,bundle_streaming:n,resized_images:u,is_app_shell:p,statsig_client_bootstrap:(0,c.w0)().statsig_client_bootstrap??!0,statsig_has_bootstrap_values:!!(0,c.tl)().statsig_bootstrap_values};(0,s.sx)("Web Vital Metrics",a,{forwardToDatadog:!0,sendAsBeacon:!0})}function h(i,a){let c={name:a,google_rating:"not-applicable",navigation:function(){let e=window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];return e?document.prerendering||(e.activationStart||0)>0?"prerender":document.wasDiscarded?"restore":e.type.replace(/_/g,"-"):"navigate"}(),value:i.timeStamp,initialPath:r,normalized_current_path:(0,d.qR)(l.Ay.location.pathname),id:(0,o.g)(),bundle:e,used_codesplitting:!0,bundle_streaming:n,resized_images:u,is_app_shell:p};(0,s.sx)("Web Vital Metrics",c,{forwardToDatadog:!0,sendAsBeacon:!0})}(0,a.lt)(m),(0,a.fK)(m),(0,a.zB)(m),(0,a.IN)(m),(0,a.Ck)(m),(0,a.rH)(m,{reportAllChanges:!0}),document.addEventListener("DOMContentLoaded",e=>h(e,"DCL")),window.addEventListener("load",e=>h(e,"LOAD"))}},16826:(e,r,n)=>{n.d(r,{IJ:()=>I,Vu:()=>_,WQ:()=>E,Zj:()=>v,ap:()=>f,dK:()=>y,wO:()=>g,x2:()=>T,xt:()=>h});var i=n(157907),a=n(579020),o=n(389191),s=n(831932),l=n(896966),c=n(579463),d=n(808471),u=n(994243),p=n(563180),m=n(905419),h=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.NO_WEBGL=1]="NO_WEBGL",e[e.STENCIL_TEST_FAILURE=2]="STENCIL_TEST_FAILURE",e))(h||{});function _(){if(s.Ay.safari||s.Ay.firefox||s.EC||(0,s.j9)()&&!(0,d.PN)())return!1;if(s.Ay.chrome){let e=(0,c.gP)("webgpu_platform_device_config").get("minimum_chromium_version",0);if(0>s.Ay.compareVersions([s.Ay.version.toString(),e.toString()]))return!1}return void 0!==navigator.gpu}function g(){return!!_()&&!(0,i.k)().webgl1_override&&!(0,i.k)().webgl2_override&&(!!v()||((0,s.cX)()?!!(0,i.k)().use_webgpu:(0,s.uF)()||(0,s.Zs)()?!!(0,i.k)().use_webgpu_windows_chromeos:!!((0,s.j9)()&&(0,d.PN)())&&(!!(0,i.k)().use_webgpu||!!(0,i.k)().use_webgpu_windows_chromeos)))}function f(){return!!(0,i.k)().webgl2_override||!(0,i.k)().webgl1_override&&p.X.isWebGL2Supported()}function E(){return p.X.isWebGL2Supported()}function y(){return null==window.webGLTestResult&&(window.webGLTestResult=function(){var e=0;try{let r=function(){let e=document.createElement("canvas");try{return e.getContext("webgl")}catch(e){}return null}();r||(e=1),0!==e||r?.isContextLost()||function(e){let r=e.getExtension("WEBGL_debug_renderer_info"),n=r&&(e.getParameter(r.UNMASKED_RENDERER_WEBGL)+"").toLowerCase(),i={gpu_vendor:n?/\bamd\b|\bati\b/.test(n)?"amd":/\bnvidia\b/.test(n)?"nvidia":/\bintel\b/.test(n)?"intel":"unknown":"unknown",gpu_api:n?/direct3d9/.test(n)?"d3d9":/direct3d11/.test(n)?"d3d11":/opengl/.test(n)?"opengl":"unknown":"unknown"};(0,o.Rh)("page_load",i).catch(e=>console.error("Error trying to send tags",i,e))}(r)}catch(e){}return e}()),window.webGLTestResult}class b{constructor(){this._isJSLUHDChromeOS=!1,this._isJSLUHDChromeOS=this.isJSLUHDChromeOS()}isJSLUHDChromeOS(){if(!(0,s.Zs)()||!_()||!(0,i.k)().use_webgpu_chromeos_jsl_override)return!1;let e=(0,u.zD)(f());if(!e)return!1;let r=e.getExtension("WEBGL_debug_renderer_info");if(!r)return!1;let n=e.getParameter(r.UNMASKED_RENDERER_WEBGL);return/uhd graphics \(jsl\)/i.test(n)&&/vulkan/i.test(n)}mustUseWebGPU(){return this._isJSLUHDChromeOS}static getInstance(){return this._instance||(this._instance=new b),this._instance}}function v(){try{return b.getInstance().mustUseWebGPU()}catch(e){return(0,l.x1)("Error checking if we must use WebGPU",e?.message??"Unknown error",{reportAsSentryError:!0}),!1}}function T(){let e=(0,u.j9)(f());return!!e?.getExtension("WEBGL_compressed_texture_astc")}function I(e){let r="webgl_not_supported",n="unknown",i="unknown",o="unknown";if(0===window.webGLTestResult){r=p.X.initializationStatus();let e=(0,m.l)();e&&(n=e.graphicsCardName,i=e.vendor,o=e.webGLVersion)}"webgpu_success"===e&&(r="webgpu_success"),a.az.trackDefinedEvent("rendering_and_animation.webgl_initialization",{status:r,renderer:n,vendor:i,version:o})}},964346:(e,r,n)=>{n.d(r,{jm:()=>i}),n(848318),n(442313);let i={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,orphanedBy:"deleted_pages"}},877310:(e,r,n)=>{function i(e){let r=document.visibilityState;e?(delete document.visibilityState,delete document.hidden):Object.defineProperties(document,{visibilityState:{value:"hidden",configurable:!0},hidden:{value:!0,configurable:!0}}),r!==document.visibilityState&&(a=!1,document.dispatchEvent(new Event("visibilitychange",{bubbles:!0}))),a=!e}n.d(r,{R:()=>i});let a=!1;window.addEventListener("visibilitychange",function(e){a&&(e.stopPropagation(),e.stopImmediatePropagation())},{capture:!0,passive:!0})},923255:(e,r,n)=>{n.d(r,{g:()=>i});var i=(e=>(e[e.PNG=0]="PNG",e[e.JPEG=1]="JPEG",e[e.PDF=2]="PDF",e))(i||{}),a=(e=>(e[e.SAVED=0]="SAVED",e[e.SAVING=1]="SAVING",e[e.PAUSED=2]="PAUSED",e))(a||{})},31094:(e,r,n)=>{var i=(e=>(e[e.FEATURE_DISABLED=0]="FEATURE_DISABLED",e[e.READ_ONLY_FILE=1]="READ_ONLY_FILE",e))(i||{}),a=(e=>(e[e.MOBILE_NATIVE_NAVBAR=0]="MOBILE_NATIVE_NAVBAR",e))(a||{}),o=(e=>(e[e.BEGAN=0]="BEGAN",e[e.MOVED=1]="MOVED",e[e.ENDED=2]="ENDED",e[e.CANCELLED=3]="CANCELLED",e[e.MOVED_COALESCED=4]="MOVED_COALESCED",e))(o||{})},21982:(e,r,n)=>{n.d(r,{H:()=>a}),n(848318),n(716544);var i=n(741419);n(6819),n(584305),n(992444),n(710905),n(31094);let a=[i.NLJ.VECTOR_PENCIL,i.NLJ.HIGHLIGHTER,i.NLJ.WASHI_TAPE,i.NLJ.ERASER,i.NLJ.LASSO];i.NLJ.VECTOR_PENCIL,i.NLJ.HIGHLIGHTER,i.NLJ.WASHI_TAPE},921598:(e,r,n)=>{n.d(r,{VA:()=>l,ty:()=>s});var i=n(818754),a=n(322627),o=n(27776);function s(){let e=window.FigmaMobile;return e?.shouldAllowSimulatedRightClick??!0}function l(){return(0,a.Dz)()?(0,i.hG)(o.kLt)+(0,i.hG)(o.M$q):(0,i.hG)(o.tui)}},258901:(e,r,n)=>{n.d(r,{y:()=>h}),n(559669);var i=n(848318),a=n(579020),o=n(753131),s=n(166365),l=n(442313),c=n(996849),d=n(566892),u=n(613016),p=(e=>(e.FILE="file",e.PROTOTYPE="prototype",e))(p||{});function m(e){let{access_type:r,accessed_via:n}=e,a=i.useMemo(()=>{let r={icon:d.A,message:function(e){switch(e){case"file":return(0,l.t)("proto.embeds.visible_to_people_invited_to_this_file");case"prototype":return(0,l.t)("proto.embeds.visible_to_people_invited_to_this_prototype")}}(e.type)},i={icon:d.A,message:n?(0,l.t)("proto.embeds.visible_to_org_name",{orgName:n.name}):(0,l.t)("proto.embeds.visible_to_everyone_in_your_org")};return{edit:null,view:null,org_edit:i,org_view:i,inherit:r,invite_only:r,workspace_edit:null,workspace_view:null}},[n,e.type]);if(!r)return null;let o=a[r];if(!o)return null;let{icon:c,message:u}=o;return i.createElement("div",{className:"embed_documentation_footer--documentationAccessLevel--a1Kwf"},i.createElement(s.B,{className:"embed_documentation_footer--documentationAccessLevelIcon--G-bLc",svg:c}),i.createElement("span",{className:"embed_documentation_footer--documentationAccessLevelReason--H-eVa ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},u))}function h(e){let r=`/${e.isPrototype?"proto":"file"}/${e.fileKey}${e.params.startsWith("?")?e.params:`?${e.params}`}`;return i.createElement("a",{className:"embed_documentation_footer--documentationFooter--cRlI0",target:"_blank",rel:"noopener",href:r,onClick:()=>{(0,a.sx)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:e.fileKey,kind:e.isPrototype?"proto":"file",embed_host:(0,c.jr)().embed_host})}},i.createElement("div",{className:"embed_documentation_footer--documentationFooterRight--llo4e"},i.createElement(m,{...e,type:e.isPrototype?"prototype":"file"})),i.createElement("div",{className:"embed_documentation_footer--documentationFooterLeft--LSi6J"},i.createElement(s.B,{className:"embed_documentation_footer--documentationFooterIcon--KNE1D",svg:u.A}),i.createElement("span",{className:"embed_documentation_footer--documentationFooterTitle--cJTEV ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.fileName),e.touchedAt&&i.createElement("span",{className:"embed_documentation_footer--documentationFooterUpdatedAt--AroJM text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,l.tx)("proto.embeds.last_edited",{relativeTime:i.createElement(o.h1,{date:e.touchedAt})}))))}},996849:(e,r,n)=>{n.d(r,{jr:()=>o}),n(322035);var i=n(44509),a=n(308746);function o(){return(0,a.v6)(i.Ay.location.search)}var s=(e=>(e.SET_CANVAS_SPACE_CENTER="SET_CANVAS_SPACE_CENTER",e.SET_CURRENT_PAGE_ID="SET_CURRENT_PAGE_ID",e.ADJUST_ZOOM="ADJUST_ZOOM",e.SET_ZOOM="SET_ZOOM",e.RESET_ZOOM_TO_FIT_CANVAS_CONTENT="RESET_ZOOM_TO_FIT_CANVAS_CONTENT",e.SET_COMMENT_MODE="SET_COMMENT_MODE",e.SET_CURSOR_STYLE="SET_CURSOR_STYLE",e.SET_SCROLL_TO_PAN="SET_SCROLL_TO_PAN",e))(s||{})},151144:(e,r,n)=>{function i(e,r){return{id:e,...r}}n.d(r,{$T1:()=>N,BWk:()=>F,CJk:()=>l,DFF:()=>A,GCV:()=>P,JUF:()=>Y,KdZ:()=>O,KoA:()=>s,Kze:()=>T,L6E:()=>K,LQ8:()=>z,Lg0:()=>o,MJs:()=>y,MxF:()=>S,NM0:()=>$,Nh9:()=>W,Njd:()=>E,QpH:()=>M,SqV:()=>k,UDe:()=>c,UsU:()=>u,Wd_:()=>a,aI5:()=>_,ar0:()=>m,b0J:()=>V,bIZ:()=>L,dvJ:()=>G,ePo:()=>D,hPP:()=>h,hoH:()=>B,jkr:()=>x,koo:()=>H,kp0:()=>f,lLk:()=>g,s3e:()=>U,s7O:()=>d,t0T:()=>C,tBR:()=>w,tyv:()=>I,tzJ:()=>R,wRI:()=>v,y3_:()=>p,zoI:()=>b});let a=i("FigJamAdvancedDiagrammingOnboarding",{team:"figjam",queueOnBlock:!0}),o=i("Gen0WelcomeOverlay",{team:"activation"}),s=i("Gen1WelcomeOverlay",{team:"activation",queueOnBlock:!0}),l=i("K12OrgJobTitleOverlay",{team:"activation",queueOnBlock:!0}),c=i("LibrariesWorkspaceOnboarding",{team:"scale",allowShowingIfModalPresent:!0}),d=i("MobileOnboardFileBrowser",{team:"activation",queueOnBlock:!0}),u=i("MobileOnboardMobileViewer",{team:"activation",queueOnBlock:!0}),p=i("MobileProtoDownloadModalPrompt",{team:"desktop"}),m=i("MultiplayerObservationNux",{team:"feedback",queueOnBlock:!0}),h=i("MultiplayerSpotlightNudgeNux",{team:"feedback"}),_=i("MultiplayerSpotlightNux",{team:"feedback",queueOnBlock:!0}),g=i("OnboardFigJamEditor",{team:"figjam",queueOnBlock:!0}),f=i("OnboardFigJamEditorBrowseTemplates",{team:"figjam",queueOnBlock:!0}),E=i("OnboardFigJamEditorMakeSomething",{team:"figjam",queueOnBlock:!0}),y=i("OnboardFigJamViewer",{team:"figjam",queueOnBlock:!0}),b=i("OnboardFigJamEditorUnified",{team:"figjam",queueOnBlock:!0}),v=i("OnboardFigJamEditorUnifiedPanAndZoom",{team:"figjam",queueOnBlock:!0}),T=i("OnboardFigJamEditorUnifiedProduct",{team:"figjam",queueOnBlock:!0}),I=i("PrototypePreloadedOverlay",{team:"scenegraph_and_sync"}),S=i("ProOnboardingPrototypeOnlyLinksOverlay",{team:"monetization_upgrades"}),w=i("SearchWorkspaceOnboarding",{team:"scale"}),A=i("SprigSurveysOverlay",{team:"community",queueOnBlock:!1,allowShowingIfModalPresent:!0}),C=i("ViewerToEditorOverlay",{team:"monetization_upgrades"}),N=i("MobileReplyUpsellHint",{team:"desktop"}),L=i("FeedPostDetailZoomPanNudge",{team:"explore",allowShowingIfModalPresent:!0}),O=i("SharingClarityBranchModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),R=i("SharingClarityFileAudienceOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),P=i("SharingClarityFileModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),D=i("SharingClarityPrototypeModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),M=i("SharingClarityProjectCreationPermissionOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),k=i("SharingClarityProjectCreationTeamAccessOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),F=i("SharingClarityProjectModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),x=i("SharingClarityTeamCreationOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),U=i("AdminBillingOverviewSecondaryTabOnboardingOverlay",{team:"scale",queueOnBlock:!0,lifecycle:{userFlagName:"seen_admin_billing_overview_secondary_tab_onboarding_overlay",maxTimes:1}}),B=i("OrgAdminBillingGroupsSecondaryTabOnboardingOverlay",{team:"scale",queueOnBlock:!0,lifecycle:{userFlagName:"seen_org_admin_billing_groups_secondary_tab_onboarding_overlay",maxTimes:1}}),V=i("FilePreviewOverlay",{team:"search",lifecycle:{userFlagName:"seen_file_preview_overlay",maxTimes:1}}),G=i("DevModeOnboardingTooltipOverlay",{team:"activation",queueOnBlock:!0,lifecycle:{userFlagName:"dev_mode_has_seen_onboarding_tooltip",maxTimes:1}}),H=i("DeveloperRFDUpsellOverlay",{team:"activation",queueOnBlock:!1,lifecycle:{userFlagName:"dev_mode_has_seen_rfd_upsell",maxTimes:10,cooldown:"MONTHLY"}}),K=i("DeveloperContextualUpsellExportOverlay",{team:"activation",queueOnBlock:!0,lifecycle:{userFlagName:"dev_mode_has_seen_contextual_upsell_export_overlay",maxTimes:2,cooldown:"FORTNIGHTLY"}}),W=i("DeveloperContextualUpsellMeasureOverlay",{team:"activation",queueOnBlock:!0,lifecycle:{userFlagName:"dev_mode_has_seen_contextual_upsell_measure_overlay",maxTimes:2,cooldown:"FORTNIGHTLY"}}),z=i("ConnectedProjectsUsageOverlay",{team:"workflow"}),$=i("FileViewHistoryOnboardingOverlay",{team:"workflow"}),Y=i("ColorContrastOnboardingOverlay",{team:"developer_tools",lifecycle:{userFlagName:"has_seen_color_contrast_onboarding_overlay",maxTimes:1}})},871430:(e,r,n)=>{n.d(r,{lt:()=>h,q8:()=>g,y8:()=>_});var i=n(716544),a=n(157907),o=n(39773),s=n(6819),l=n(579463),c=n(393246),d=n(87089),u=n(834111),p=n(922030),m=n(560735);let h=(0,n(53818).n)(({currentOrg:e,currentTeam:r,isViewer:n,isDisabledForViewers:i=!0})=>(!!e||!!r)&&(!!i&&!!n||!(e&&function(e){if(!e||e.k12_google_org)return!1;let r="enabled_for_gated_users"===(0,l.gP)("ai_org_use_llama").get(e.id,void 0),n=!!(0,a.k)().ai_user_use_llama;return r&&n}(e))&&!!(e?e?.ai_features_disabled:r?.ai_features_disabled)));function _({isDisabledForViewers:e}){let r=s.D.getState();return!!(0,u.zg)(r.selectedView)||!r.user||h({currentOrg:o.zl.get(c.Z),currentTeam:o.zl.get(p.Me),isViewer:o.zl.get(m.hS),isDisabledForViewers:e})}function g(){let e=!h({currentOrg:(0,d.sZ)()||null,currentTeam:(0,p.ol)(),isViewer:(0,m.Td)()});return!!(0,i.d4)(e=>(0,u.zg)(e.selectedView)||!e.user)||!e}},429819:(e,r,n)=>{n.d(r,{u4:()=>d}),n(848318);var i=n(157907),a=n(39773);n(351766),n(493554),n(235441);var o=n(87089);n(376780),n(635547),n(572699),n(668249);var s=n(922030);n(542143);var l=n(560735),c=n(871430);function d(){let e=(0,a.md)(p),r=(0,o.sZ)()||null,n=(0,s.ol)()||null,d=(0,l.Td)(),u=!(0,c.lt)({currentOrg:r,currentTeam:n,isViewer:d});return(0,i.k)().qa_ai_metering?{loading:"loading"===e,isSlidesAiEnabled:"has_permission"===e}:{loading:!1,isSlidesAiEnabled:u}}var u=(e=>(e.LOADING="loading",e.HAS_PERMISSION="has_permission",e.NO_PERMISSION="no_permission",e))(u||{});let p=(0,a.eU)("loading")},870701:(e,r,n)=>{n.d(r,{WN:()=>p});var i=n(848318),a=n(716544),o=n(741419),s=n(579020),l=n(44509),c=n(736248),d=n(449737),u=n(808765);function p(){let e=(0,a.wA)();return(0,i.useCallback)(r=>{(0,s.sx)("show_auth_for_logged_out_file",{actionType:function(e){switch(e){case o.rcl.SET_TOOL_DEFAULT:return"SET_TOOL_DEFAULT";case o.rcl.SET_TOOL_COMMENTS:return"SET_TOOL_COMMENTS";case o.rcl.FOLLOW_PRESENTER:return"CLICK_SIDEBAR_AVATAR";case o.rcl.ENTER_INSPECT_MODE:return"CLICK_SIDEBAR_PROPERTIES";case o.rcl.SET_TOOL_DEFAULT_DEV_HANDOFF:return"CLICK_TOGGLE_DEV_MODE";case o.rcl.PRESENT_AS_PROTOTYPE:return"CLICK_SIDEBAR_PROTOTYPE";case o.NLJ.COMMENTS:return"CLICK_TOOLBELT_COMMENTS";case o.NLJ.FRAME:return"CLICK_TOOLBELT_FRAME";case o.NLJ.SHAPE_RECTANGLE:return"CLICK_TOOLBELT_RECTANGLE";case o.NLJ.VECTOR_PEN:return"CLICK_TOOLBELT_PEN";case o.NLJ.TYPE:return"CLICK_TOOLBELT_TEXT";case"SELECT_COMMENT_SIDEBAR":return"SELECT_COMMENT_SIDEBAR";case"TOOLGROUP_CHEVRON":return"TOOLGROUP_CHEVRON";case"SHARE_BUTTON":return"SHARE_BUTTON";case"GOOGLE_SSO_BUTTON":return"GOOGLE_SSO_BUTTON";case"SIGN_UP_BUTTON_BANNER":return"SIGN_UP_BUTTON_BANNER";case"QUICK_ACTIONS_TOOL":return"QUICK_ACTIONS_TOOL";case"SIGN_UP_CTA_COMMENTS_PANEL":return"SIGN_UP_CTA_COMMENTS_PANEL";case"COMPONENT_INSERT":return"COMPONENT_INSERT";case"LEFT_PANEL_FILE_NAME_CHEVRON":return"LEFT_PANEL_FILE_NAME_CHEVRON";case"LEFT_PANEL_FIGMA_LOGO":return"LEFT_PANEL_FIGMA_LOGO";case"COMMENT_PIN_CLICK":return"COMMENT_PIN_CLICK";default:return"UNKNOWN_ACTION"}}(r)}),e(c.Ts({origin:"signed_out_edit",redirectUrl:l.Ay.location.pathname})),e((0,d.to)({type:u.x,data:{actionOrTool:r}}))},[e])}},945761:(e,r,n)=>{n.d(r,{Wv:()=>N,ZH:()=>C,gK:()=>A});var i=n(848318),a=n(716544),o=n(376025),s=n(171659),l=n(536384),c=n.n(l),d=n(994811),u=n(730169),p=n(753207),m=n(736248),h=n(722941),_=n(763491),g=n(775048),f=n(282424),E=n(442313),y=n(180423),b=n(155651),v=n(481540),T=n(261906),I=n(928467),S=n(512549);let w=i.forwardRef(function({className:e,showUpdatedInputDesign:r,...n},a){return r?i.createElement(g.LN,{className:e,...(0,p.d)(n),ref:a}):i.createElement(f.L,{className:c()(I.hF,e),...(0,p.d)(n),ref:a})});function A(e){let r=S.a,n=`${e.isInvalid?r:""}`,a={...e,className:n};return delete a.isInvalid,i.createElement(w,{...(0,p.d)(a)})}function C(e){let[r,n]=(0,i.useState)(null),l=(0,a.wA)(),c=(0,a.d4)(e=>e.auth.formState),p=(0,a.d4)(e=>e.auth.clickedSAMLSignIn),g=(0,a.d4)(e=>e.auth.email),f=(0,a.d4)(e=>e.auth.invalidInput),{trackEvent:S}=(0,b.j6)();(0,u.h)(()=>{g&&(0,d.xf)(g)&&(0,_.sT)({email:g})});let w=e=>{e&&c===h.qB.SIGN_IN&&l(m.E({formState:h.qB.SAML_START}))},C=async e=>{if(l(m.BZ({value:e.trim()})),!p&&(0,d.xf)(e)){await (0,_.sT)({email:e});try{let r=s.Q_()?.getItem(`SIGN-IN ${e}`);if(r){w("true"===r);return}let{data:n}=await T.F.getOrgSamlConfigRequired({email:e});s.Q_()?.setItem(`SIGN-IN ${e}`,n.meta.saml_sso_only),w(!!n.meta.saml_sso_only)}catch(e){c===h.qB.SAML_START&&l(m.E({formState:h.qB.SIGN_IN}))}}},N=()=>{let e=g.split("@")[0];C(`${e}@${r}`),n(null),S(v.Ws,{trackingDescriptor:y.c.USE_SUGGESTED_EMAIL,previousDomain:e,newDomain:r})},L=e.placeholder??(0,E.t)("auth.email-input-placeholder");return i.createElement(i.Fragment,null,i.createElement(A,{"aria-describedby":e.ariaDescribedBy,"aria-invalid":h.RE.EMAIL===f,autoCapitalize:"off",autoComplete:"username",autoCorrect:"off",id:"email",isInvalid:h.RE.EMAIL===f,name:h.RE.EMAIL,onBlur:r=>{if(e.onBlur?.(r,!0),e.showDomainSuggestions){let e=g.split("@")[1];n((0,d.bs)(e))}},onChange:e=>C(e.currentTarget.value),placeholder:L,showUpdatedInputDesign:e.showUpdatedInputDesign,type:"email",value:g}),r&&i.createElement("div",{"data-testid":"domain-suggestion",className:I.rt},(0,E.tx)("auth.email-domain-suggestion-prompt",{domainSuggestion:i.createElement(o.E,{className:I.nf,onClick:()=>N()},r)})))}function N(e){let[r,n]=(0,i.useState)(""),o=(0,a.wA)(),s=(0,a.d4)(e=>e.auth.invalidInput),l=e.placeholder??(0,E.t)("auth.password-input-placeholder"),c=e.isSignUp?"new-password":"current-password";return i.createElement(A,{"aria-describedby":e.ariaDescribedBy,"aria-invalid":s===h.RE.PASSWORD,autoCapitalize:"off",autoComplete:c,autoCorrect:"off",id:"current-password",isInvalid:s===h.RE.PASSWORD,name:h.RE.PASSWORD,onBlur:e.onBlur,onChange:function(e){n(e.currentTarget.value),o(m.OZ({googleIdToken:null}))},placeholder:l,showUpdatedInputDesign:e.showUpdatedInputDesign,type:"password",value:r})}},866832:(e,r,n)=>{n.d(r,{bv:()=>E,IU:()=>f});var i=n(848318);n(716544);var a=n(818754),o=n(182059),s=n(190823),l=n(17755),c=n(442313);n(542052);var d=n(155651);n(401890),n(950738),n(32922),n(376780);var u=n(503024),p=n(205397);n(882369);var m=n(527041),h=n(701417);let _=(0,a.hG)(h.km),g=(0,a.hG)(h.hX);function f(e){return i.createElement(d.jm,{className:e.disabled?"shared_table--optionDisabled--OhX66 shared_table--_optionBase--z8wdT shared_table--_disabled--EkV7j":"shared_table--option--hw4Sr shared_table--_optionBase--z8wdT",onClick:e.onClick,trackingProperties:e.trackingProperties,disabled:e.disabled,...e.tooltip?{"data-tooltip-type":u.Ib.TEXT,"data-tooltip":e.tooltip,"data-tooltip-show-above":!0}:{}},e.label)}function E(e){let r=e.dropdownShown?.type===e.dropdownType,n=(0,c.t)("multi_select_list.filter_default"),a=null===e.selectedValue?n:e.getDisplayText(e.selectedValue),d=e.hideDefaultOption?e.values.length*_:(e.values.length+1)*_+g;return i.createElement(s.V,{dispatch:e.dispatch,type:e.dropdownType,showingDropdown:r},i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:l.s.maxW200.ellipsis.overflowHidden.$},e.getSelectedDisplayText?i.createElement("span",{className:l.s.noWrap.$},e.getSelectedDisplayText(e.selectedValue)):i.createElement(i.Fragment,null,i.createElement("span",{className:l.s.noWrap.$},e.label,":")," ",i.createElement("span",{className:l.s.noWrap.$},a))),r&&i.createElement(o.gw,{stopScrollPropagation:!0,dispatch:e.dispatch,className:m.sI,style:e.dropdownShown.data.position},i.createElement(p.g1,{maxDropdownHeight:e=>Math.round(.5*e),dropdownChildrenHeight:d},!e.hideDefaultOption&&i.createElement(i.Fragment,null,i.createElement(o.rr,{checked:null===e.selectedValue,onClick:()=>e.updateFilter(null),trackingProperties:{filterType:e.dropdownType}},n),i.createElement(o.wv,null)),e.values.map(r=>i.createElement(o.ru,{key:e.getDisplayText(r),checked:e.selectedValue===r,onClick:()=>e.updateFilter(r),primaryText:e.getDisplayText(r),secondaryText:null===e.selectedValue&&e.getCount?e.getCount(r).toString():"",trackingProperties:{filterType:e.dropdownType,text:e.getDisplayText(r)}})))))}var y=(e=>(e.NONE="NONE",e.UNASSIGNED="UNASSIGNED",e.WORKSPACE="WORKSPACE",e))(y||{})},773969:(e,r,n)=>{n.d(r,{G:()=>s});var i=n(848318),a=n(442313),o=n(775038);function s(){return i.createElement(i.Fragment,null,i.createElement(o.E,{color:"handoff",fontWeight:"medium",fontSize:11},(0,a.tx)("checkout.dev_mode_included_text_formatted.dev_mode"))," ",i.createElement(o.E,{color:"secondary",fontSize:11},(0,a.tx)("checkout.dev_mode_included_text_formatted.included")))}},266163:(e,r,n)=>{n.d(r,{$$:()=>s,nR:()=>c,pz:()=>u,tM:()=>d,vd:()=>l});var i=n(848318),a=n(155651),o=n(190597);function s(e){let{className:r,...n}=e;return i.createElement("button",{className:`${o.xZ} ${r}`,type:"button",...n},e.children)}let l=(0,a.tf)(s);function c(e){let{className:r,...n}=e;return i.createElement("button",{className:`${o.HM} ${r}`,type:"button",...n},e.children)}let d=(0,a.tf)(c);function u(e){let{className:r,...n}=e;return i.createElement("button",{className:`${o.AJ} ${r}`,type:"button",...n},e.children)}},128153:(e,r,n)=>{n.d(r,{GY:()=>l,N0:()=>o,We:()=>s,oz:()=>c,wI:()=>u,zq:()=>i});var i=(e=>(e[e.ROW=0]="ROW",e[e.TILE=1]="TILE",e[e.SEPARATOR=2]="SEPARATOR",e))(i||{}),a=(e=>(e.LIBRARY="library",e.PAGE="page",e.NAME_GROUP="name group",e.LOCAL_COMPONENTS="local components",e.LOCAL_TEMPLATES="local templates",e.COMPONENTS="library components",e.TEMPLATES="library templates",e.RESPONSIVE_SETS="library responsive sets",e))(a||{});function o(e){return 0===e.type&&"isSticky"in e&&e.isSticky}function s(e){return 0===e.type&&"isExpandable"in e&&e.isExpandable}function l(e){return 0===e.type&&"isButton"in e&&e.isButton}class c{constructor(e){this.allElements=[],this.isExpanded=e=>s(e)&&e.isExpanded,this.offsetTop=e}static getNextRenderedElementTop(e){if(!e||0===e.length)return 0;let r=e[e.length-1];return r.top+r.height}reset(){this.allElements=[]}getTotalHeight(){let e=0;for(let r of this.allElements)s(r)&&(e+=d(r));return c.getNextRenderedElementTop(this.allElements)+e}findExpandableElementWithKey(e){for(let r of function* e(r){for(let n of r)yield n,s(n)&&n.isExpanded&&(yield*e(n.children))}(this.allElements))if(s(r)&&r.key===e)return r;return null}getActualTop(e){let r=0;for(let n of this.allElements){if(n.key===e)return n.top+r;this.isExpanded(n)&&(r+=d(n))}return null}getRenderedElementsInView(e,r){let n=e-this.offsetTop,i=Math.ceil(r/2),a=Math.max(n-i,0),l=n+r+i,c=(e,r)=>!(e+r<a||e>l),u=(e,i)=>!(e+i<n||e>n+r),p=[],m={};for(let{element:e,actualTop:r}of function* e(r,n){for(let i of r){let r=n+i.top;if(yield{element:i,actualTop:r},s(i)&&i.isExpanded){let a=r+i.height;yield*e(i.children,a),n+=d(i)}}}(this.allElements,0))if(c(r,e.height)){m[e.key]=p.length;let n={...e,top:r};p.push(n)}let h=null,_=0;for(let e of p)if(n>0&&u(e.top,e.height)){0===e.type&&"isSticky"in e&&e.isSticky&&!(s(e)&&!e.isExpanded)?h=e:e.parent&&o(e.parent)&&(h={...e.parent,key:`${e.key}:parent`,isStaticRow:!0},p.push(h));break}return null!=h&&o(h)&&n>h.top&&(h.isFixed=!0,_=Math.max(n-h.top,0)),{elementsInView:p,stickyHeader:h&&h.isFixed?h:null,stickyHeaderOffset:_}}}let d=e=>{let r=0;if(e.isExpanded)for(let n of(r+=c.getNextRenderedElementTop(e.children),e.children))s(n)&&(r+=d(n));return r};function u(e){let r=e;for(;r&&!(s(r)&&["library","local components","local templates"].includes(r.rowType));)if(!(r=r.parent))return null;return r}},286144:(e,r,n)=>{n.d(r,{Q:()=>R});var i=n(848318),a=n(716544),o=n(39773),s=n(536384),l=n.n(s),c=n(857188),d=n(654104),u=n(792647),p=n(449737),m=n(906531),h=n(345146),_=n(673481),g=n(530906),f=n(665971),E=n(369600),y=n(870769),b=n(405888),v=n(517162),T=n(335557),I=n(38348),S=n(897875),w=n(342887),A=n(523610),C=n(186056),N=n(853833),L=n(645801),O=n(545010);function R({enableKeyboardNavigation:e,colIndex:r,rowIndex:n,isList:a,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:l}){return e?i.createElement(P,{colIndex:r,rowIndex:n,isList:a,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:l}):i.createElement(D,{enableKeyboardNavigation:e,isList:a,isTileSelected:o,renderedElement:s})}function P({colIndex:e,rowIndex:r,isList:n,isTileSelected:s,renderedElement:l,shouldRefocusAfterKeyboardInsert:T}){let L=i.useContext(v.U),O=(0,a.d4)(e=>e.modalShown),R=(0,a.d4)(E.sS),P=(0,S.J)(l.item,l.sectionPosition,l.sectionNameForTracking),M=(0,A.n)(l.item),k=(0,f.u)({canSwap:!0,openFileKey:R??"",sourceForTracking:"Asset Panel",insertAsChildOfCanvas:!0}),F=i.useCallback(()=>{O?.type!==I.V||M||P()},[M,O?.type,P]),x=i.useCallback(()=>{O?.type!==I.V&&L?.onOpenFlyout(l.item,l.sectionPosition,l.sectionNameForTracking)},[L,O?.type,l.item,l.sectionPosition,l.sectionNameForTracking]),{keyboardNavigationItem:U,setKeyboardNavigationElement:B}=(0,u.M3)({path:[1,r],column:n?null:e,id:(0,m.V)(l.item),onFocus:F}),V=function({onComponentInsertSwap:e,onOpenFlyout:r,keyboardNavigationItem:n,item:s,sectionNameForTracking:l,sectionPosition:d,shouldRefocusAfterKeyboardInsert:u,rowIndex:m,colIndex:f,isList:E,sourceForTracking:v}){let T=(0,a.wA)(),S=(0,a.d4)(e=>e.modalShown),A=(0,o.md)(N.TG),L=(0,g.Ew)({assetKey:(0,b.u2)(s),assetLibraryKey:s.library_key,assetType:s.type,isList:E,sectionNameforTracking:l,sectionPosition:d,sourceForTracking:v??w.mZ,aiScore:s.ai_score??void 0,lexicalScore:s.lexical_score??void 0,isExample:(0,h.o)(s,A),partnerType:(0,_.X)(s.library_key)}),O=(0,C.ZV)(L);return i.useCallback(i=>{if((i.keyCode===c.Uz.ENTER||i.keyCode===c.Uz.SPACE)&&(0,y.dx)(s)){if(i.metaKey){r();return}if(e(i,s),O(i),u&&!(0===m&&0===f)){let e=E?n?.getItemAbove():n?.getItemToTheLeft();e?.focus()}else n?.blur();S?.type===I.V&&T(p.AS())}},[f,T,O,E,s,n,S?.type,e,r,m,u])}({colIndex:e,rowIndex:r,isList:n,keyboardNavigationItem:U,onComponentInsertSwap:k,onOpenFlyout:x,...l,shouldRefocusAfterKeyboardInsert:T}),G=i.useCallback(e=>{(0!==e.detail||e.nativeEvent.pointerType)&&(U?.focus(),x())},[x,U]),H=`componentScrollContainerTile.${e}.${r}`,K=d.rf(H,"click",G);return i.createElement(D,{enableKeyboardNavigation:!0,isList:n,isShownInFlyout:M,isTileSelected:s,onKeyDown:V,onClick:K,onSetKeyboardNavigationElement:B,renderedElement:l})}function D({enableKeyboardNavigation:e,isList:r,isShownInFlyout:n,isTileSelected:a,onKeyDown:s,onClick:c,onSetKeyboardNavigationElement:d,renderedElement:u}){let p=(0,o.md)(T.T),m=a?.(u)??!1;i.useEffect(()=>{r?u.element=i.cloneElement(u.element,{}):u.element=i.cloneElement(u.element,{selected:m})},[r,m,u]);let h={top:u.top,left:u.left,height:r?u.height:void 0},_=l()(r?O.fJ:O.ND,{[L.QT]:!r,[O.r6]:r&&n,[O.HR]:r&&n&&p});return e||s||c?i.createElement("button",{key:u.key,style:h,className:_,onKeyDown:s,onClick:c,ref:d},u.element):i.createElement("div",{key:u.key,style:h,className:_},u.element)}},344946:(e,r,n)=>{n(848318),n(536384),n(543072),n(831932),n(17755),n(442313)},182059:(e,r,n)=>{n.d(r,{MM:()=>D,OR:()=>I,Ve:()=>T,Vq:()=>A,X3:()=>S,c$:()=>N,gS:()=>L,gw:()=>x,l4:()=>w,ms:()=>C,rr:()=>k,ru:()=>F,wv:()=>O});var i=n(848318),a=n(536384),o=n.n(a),s=n(633017),l=n(857188),c=n(175196),d=n(303035),u=n(654104),p=n(808471),m=n(166365),h=n(997364),_=n(790355),g=n(604613),f=n(155651),E=n(584305),y=n(255309),b=n(954206),v=n(364616);function T(e){let[r,n]=i.useState(!1),a="label"in e,s="dropdownButton"in e;return i.createElement("div",{className:o()(y.gD,e.className,r&&y.FR,e.shouldRenderAutocompleteStyles&&y.Rp),...e.notDraggable?{"data-not-draggable":!0}:{}},a&&i.createElement("div",{className:o()(y.Ts,e.noBorder&&y.E7,e.noRightPadding&&y.zT),onClick:()=>n(!r),role:"menu",tabIndex:0},i.createElement("div",{className:y.ep},!!e.iconLabel&&i.createElement("div",{className:y.Vi},e.iconLabel),i.createElement("p",null,e.label)),i.createElement(m.B,{className:y.tZ,svg:v.A})),s&&i.createElement(e.dropdownButton,{onClick:()=>n(!r)}),r&&i.createElement(i.Fragment,null,i.createElement("div",{className:o()(y.DE,e.dropdownOptionsClassName,e.rightAlignOptions&&y.Wh,e.optionsBelowSelector&&y.fG),onClick:e.stayOpenOnSelect?void 0:()=>n(!r),role:"menu",tabIndex:0},i.createElement(f.fu,{name:e.menuTrackingContextName||"",enabled:!!e.menuTrackingContextName,properties:e.menuTrackingProperties},i.createElement(S,{options:e.options,hideDropdown:()=>n(!1),shouldRenderAutocompleteStyles:e.shouldRenderAutocompleteStyles}))),i.createElement(B,{closeDropdown:()=>n(!1)})))}function I(e){let[r,n]=i.useState(e.focusContainerOnMount?-1:0),a=i.useMemo(()=>i.Children.toArray(e.children||e.options).filter(e=>"boolean"!=typeof e),[e.children,e.options]),o=(0,i.useRef)(Array(a.length)),s=i.useRef(document.activeElement);(0,i.useEffect)(()=>{let e=o.current[r];e&&(e.tabIndex=0,e.focus())},[r,o]);let l=i.useCallback((e,r)=>{let i=o.current[e];i&&(i.tabIndex=-1,i.focus()),n(r)},[]),c=i.useCallback(()=>{let e=r-1;for(let r of o.current)if(null==o.current[e])e=e-1<0?o.current.length-1:e-1;else break;l(r,e)},[r,l]),u=i.useCallback(()=>{let e=r+1;for(let r of o.current)if(null==o.current[e])e=e+1>=o.current.length?0:e+1;else break;l(r,e)},[r,l]);return{childrenComponents:a,getSetChildRef:e=>(e=>{if("boolean"!=typeof e&&(e.type===N||e.type===D)){let r=e.props;return!!(r.disabled||r.header)}return!1})(a[e])?d.lQ:r=>o.current[e]=r,onKeyDown:n=>{switch(n.stopPropagation(),n.nativeEvent&&n.nativeEvent.stopImmediatePropagation(),n.key){case"Escape":e.autofocusPrevElementOnEsc&&s.current?.focus(),e.hideDropdown();break;case"Tab":e.autofocusPrevElementOnTab&&s.current?.focus(),e.hideDropdown();break;case" ":case"Enter":{let n=o.current[r];n&&n.click(),e.autofocusPrevElementOnSelect&&s.current?.focus();break}case"Left":case"ArrowLeft":"horizontal"===e.orientation&&c();break;case"Up":case"ArrowUp":"horizontal"!==e.orientation&&c();break;case"Right":case"ArrowRight":"horizontal"===e.orientation&&u();break;case"ArrowDown":case"Down":"horizontal"!==e.orientation&&u();break;case"Home":case"PageUp":l(r,0);break;case"End":case"PageDown":l(r,o.current.length-1)}},onFocus:e=>{if(e&&e.target){let n=o.current.indexOf(e.target);n>=0&&l(r,n)}}}}function S(e){let{childrenComponents:r,getSetChildRef:n,onKeyDown:a,onFocus:o}=I(e),{children:s,options:l,...c}=e;return i.createElement(C,{...c,onKeyDown:a,tabIndex:-1},i.Children.map(r,(e,r)=>i.cloneElement(e,{buttonRef:n(r),onFocus:o})))}function w(e,r){let[n,a]=i.useState(null);return i.useEffect(()=>{let n=e.current;if(n){let e=n.getBoundingClientRect(),i=r.left,o=r.top;i<8?i=8:i+e.width>window.innerWidth-8&&(i=window.innerWidth-8-e.width),o<8?o=8:o+e.height>window.innerHeight-8&&(o=window.innerHeight-8-e.height),a([i,o])}},[e,r.left,r.top]),i.useMemo(()=>n?{...r,left:n[0],top:n[1]}:{...r,visibility:"hidden"},[n,r])}let A=i.forwardRef(function({style:e,...r},n){let a=i.useRef(null),o=w(a,e);return i.createElement(x,{dropdownRef:(0,c.A)(a,n),style:o,...r})});class C extends u.o6{constructor(){super(...arguments),this.stopPropagationForPointerDown=e=>{(0,E.ft)()&&(0,E.dG)(e)},this.onClick=u.cZ(this,"click",e=>{if(!this.props.onClick)return u.aH;this.props.onClick(e)})}render(){return i.createElement("div",{ref:this.props.dropdownRef,"aria-labelledby":this.props["aria-labelledby"],className:o()(y.Wm,this.props.className,{[y.DY]:this.props.positionAbsolute,[y._S]:this.props.positionFixed,[y.rU]:this.props.shouldRenderAutocompleteStyles,[g.s4]:this.props.preventZoom,[g.Dm]:this.props.preventEventCapture}),"data-cancel-insertable-resource-drag-and-drop":!0,"data-onboarding-key":this.props.dataOnboardingKey,"data-testid":this.props["data-testid"],id:this.props.id,onClick:this.onClick,onContextMenu:E.wo,onFocus:this.props.onFocus,onKeyDown:this.props.onKeyDown,onMouseDown:E.dG,onPointerDown:this.stopPropagationForPointerDown,onScroll:this.props.stopScrollPropagation?E.dG:this.props.onScroll,onTouchStart:E.dG,onWheel:this.props.preventZoom?void 0:E.dG,role:"menu",style:this.props.style,tabIndex:this.props.tabIndex??0},this.props.children)}}C.displayName="Dropdown";class N extends u.o6{constructor(){super(...arguments),this.mouseOverTimestamp=0,this.state={hover:!1},this.onDragStart=e=>{e.preventDefault()},this.onPointerOver=e=>{this.props.onPointerOver&&this.props.onPointerOver(),this.setState({hover:!0}),this.props.onHover&&this.props.onHover(!0),this.props.href||(this.mouseOverTimestamp=Number(e.timeStamp))},this.onPointerOut=e=>{this.props.onPointerOut&&this.props.onPointerOut(),this.setState({hover:!1}),this.props.onHover&&this.props.onHover(!1)},this.onPointerUp=u.cZ(this,"mouseup",e=>{if(!this.props.href){if(this.props.onPointerUp){this.props.onPointerUp(e);return}if(Number(e.timeStamp)-this.mouseOverTimestamp>20){let r=e.target;null!=r.click&&(this.mouseUpTimer=setTimeout(r.click.bind(r),1))}}}),this.onTouchEnd=e=>{let r=e.target;if(r.click&&(e.preventDefault(),r&&e.changedTouches)){let n=e.changedTouches[0];document.elementFromPoint(n.clientX,n.clientY)===r&&r.click()}},this.onClick=u.cZ(this,"click",e=>{this.props.href&&(0,l.oJ)(e)||(this.props.href?(0,s.e)(this.props.href,e):clearTimeout(this.mouseUpTimer),this.props.onClick?.(e))}),this.ariaRole=()=>this.props.header?"presentation":"role"in this.props?this.props.role??"menuitem":"menuitem"}render(){let e=this.props.disabled||this.props.header,r=o()(e?y.IZ:{[y.wY]:this.state.hover||this.props.simulateHover,[y.uK]:!0},this.props.className);return i.createElement("a",{ref:this.props.buttonRef,"aria-checked":"aria-checked"in this.props?this.props["aria-checked"]:void 0,"aria-disabled":this.props.disabled,className:r,"data-dropdown-tooltip":this.props.tooltip,"data-fullscreen-intercept":this.props["data-fullscreen-intercept"],"data-onboarding-key":this.props.onboardingKey,"data-search-click-action":this.props["data-search-click-action"],"data-testid":this.props.recordingKey,href:this.props.href,id:this.props.id,onClick:e?void 0:this.onClick,onDragStart:this.onDragStart,onFocus:this.props.onFocus,onKeyDown:this.props.onKeyDown,onMouseDown:this.props.onMouseDown,onPointerOut:e?void 0:this.onPointerOut,onPointerOver:e?void 0:this.onPointerOver,onPointerUp:e?void 0:this.onPointerUp,onTouchEnd:this.onTouchEnd,rel:"noopener",role:this.ariaRole(),tabIndex:-1,target:this.props.target},this.props.children)}}N.displayName="Option";let L=(0,f.tf)(N);class O extends i.PureComponent{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation()}}render(){let e=y.me;return this.props.className&&(e+=` ${this.props.className}`),i.createElement("div",{className:e,onClick:this.onClick,style:this.props.style,"data-testid":this.props.dataTestId??"dropdown-separator"},i.createElement("div",{className:y.se}))}}O.displayName="Separator";class R extends i.PureComponent{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation()}}render(){let e=y.jv;return this.props.className&&(e+=` ${this.props.className}`),i.createElement("div",{className:e,onClick:this.onClick,style:this.props.style,"data-testid":this.props.dataTestId??"dropdown-indented-separator"},i.createElement("div",{className:y.se}))}}R.displayName="IndentedSeparator";var P=(e=>(e.Checkmark="Checkmark",e.Checkbox="Checkbox",e))(P||{});class D extends u.o6{render(){return i.createElement(N,{...this.props,className:o()(y.o6,"Checkbox"===this.props.displayType&&this.props.nested&&y.cY,this.props.className),"aria-checked":this.props.checked,role:"role"in this.props?this.props.role:void 0},"Checkbox"===this.props.displayType?i.createElement("span",{className:y.z6,"data-preferred-theme":"dark"},i.createElement(h.S,{disabled:this.props.disabled,checked:this.props.checked,mixed:this.props.mixed})):this.props.checked?i.createElement(m.B,{className:y.z6,svg:b.A,dataTestId:"dropdown-check-icon"}):i.createElement("span",{className:y.z6}),this.props.children)}}D.displayName="CheckableOption",D.defaultProps={displayType:"Checkmark"};class M extends u.o6{render(){return i.createElement(D,{...this.props},i.createElement("div",null,this.props.primaryText),!!this.props.secondaryText&&i.createElement("div",{className:y.pH},this.props.secondaryText))}}let k=(0,f.tf)(D),F=(0,f.tf)(M);class x extends u.o6{render(){return i.createElement(i.Fragment,null,i.createElement(C,{...this.props}),U(this.props)?i.createElement(B,{closeDropdown:this.props.closeDropdown,recordingKey:"dropdownModalScrim",preventEventCapture:this.props.preventEventCapture}):i.createElement(B,{dispatch:this.props.dispatch,recordingKey:"dropdownModalScrim",preventEventCapture:this.props.preventEventCapture}))}}x.displayName="DropdownWithScrim";let U=e=>!!e.closeDropdown;class B extends u.o6{constructor(){super(...arguments),this.mouseMotionSinceMouseDown=0,this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY=5,this.closeDropdown=()=>{U(this.props)?this.props.closeDropdown():this.props.dispatch(_.oB())},this.onMouseDown=u.cZ(this,"mousedown",e=>{this.mouseMotionSinceMouseDown=0,this.closeDropdown(),e.stopPropagation()}),this.onMouseMove=u.cZ(this,"mousemove",e=>{if((0,p.PN)()){if(!(this.mouseMotionSinceMouseDown<this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY))return u.aH;this.mouseMotionSinceMouseDown+=this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY}else this.mouseMotionSinceMouseDown+=Math.abs(e.nativeEvent.movementX),this.mouseMotionSinceMouseDown+=Math.abs(e.nativeEvent.movementY)}),this.onMouseUp=u.cZ(this,"mouseup",e=>{this.mouseMotionSinceMouseDown>=this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY&&(this.closeDropdown(),e.stopPropagation())})}render(){return i.createElement("div",{className:o()(y.bv,this.props.preventEventCapture&&g.Dm),onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onContextMenu:E.wo,"data-does-not-dismiss-modal":!0})}}},190823:(e,r,n)=>{n.d(r,{V:()=>d});var i=n(848318),a=n(166365),o=n(790355),s=n(503024),l=n(749493),c=n(364616);class d extends i.PureComponent{constructor(){super(...arguments),this.ref=i.createRef(),this.toggleDropdown=e=>{if(e.preventDefault(),e.stopPropagation(),this.props.showingDropdown)this.props.dispatch(o.oB());else{let e;let r=this.ref.current.getBoundingClientRect(),n=r.top>=window.innerHeight-200;e=this.props.isMultilevelDropdown?{targetRect:r}:{position:{top:n?"auto":r.top,bottom:n?36:"auto",left:this.props.isRightAligned?"auto":Math.min(r.left,window.innerWidth-180),right:this.props.isRightAligned?window.innerWidth-Math.max(r.right,180):"auto"}},this.props.dispatch(o.j7({type:this.props.type,data:e}))}}}render(){return i.createElement("div",{ref:this.ref,className:`${this.props.isDisabled?l.eh:l.Gb} ${this.props.className?this.props.className:""}`,onClick:this.props.isDisabled?void 0:this.toggleDropdown,"data-tooltip-type":this.props.tooltip?s.Ib.TEXT:void 0,"data-tooltip":this.props.tooltip?this.props.tooltip:void 0,"data-tooltip-show-above":!!this.props.tooltip||void 0,"data-testid":"dropdown-selector"},this.props.children,!this.props.isDisabled&&!this.props.hideChevron&&i.createElement(a.B,{className:`${l.ai} ${this.props.chevronClassName?this.props.chevronClassName:""}`,svg:c.A}))}}},999161:(e,r,n)=>{n.d(r,{y:()=>v}),n(559669);var i=n(848318),a=n(67074),o=n(897378),s=n(866664),l=n(389329),c=n(40778),d=n(364493),u=n(579020),p=n(322035),m=n(566668),h=n(753131),_=n(17755),g=n(442313),f=n(775038);let E=["org_edit","org_view","inherit","invite_only"],y={org_edit:s.Y,org_view:s.Y,inherit:l.$,invite_only:l.$};function b({accessData:e,isPrototype:r}){let{access_type:n}=e;if(!E.includes(n))return null;let a="";if("org_edit"===n||"org_view"===n){let r=e.accessed_via;a=r?(0,g.t)("proto.embeds.visible_to_org_name",{orgName:r.name}):(0,g.t)("proto.embeds.visible_to_everyone_in_your_org")}else("inherit"===n||"invite_only"===n)&&(a=r?(0,g.t)("proto.embeds.visible_to_people_invited_to_this_prototype"):(0,g.t)("proto.embeds.visible_to_people_invited_to_this_file"));let o=y[n];return i.createElement(o,{className:"embed_documentation_footer--accessTypeIcon--215DQ","data-tooltip":a,"data-tooltip-type":"text","data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":250})}function v({accessData:e,fileKey:r,fileName:n,isPrototype:o,nodeName:s,repoName:l,params:d,touchedAt:p}){let E=i.useMemo(()=>{let e=new URL(`${window.location.origin}/${o?"proto":"file"}/${r}`);return e.search=d.startsWith("?")?d:`?${d}`,e.toString()},[r,o,d]),y=i.useRef(null);return i.createElement("div",{ref:y,className:_.s.colorBg.h24.px16.py12.flex.gap8.itemsCenter.justifyBetween.bt1.bSolid.colorBorder.zIndex1.$},i.createElement("div",{className:_.s.flex.gap8.itemsCenter.h24.wFull.overflowHidden.$},i.createElement(T,{fileKey:r,params:d,isPrototype:o}),i.createElement("div",{className:"embed_documentation_footer--footerLink--fS-Mp"},l&&i.createElement(c.L,null),i.createElement(a._,{newTab:!0,trusted:!0,className:_.s.cursorPointer.font11.lh16.fontInter.fontMedium.colorText.flex.itemsCenter.gap4.overflowHidden.$,href:E,onClick:()=>{(0,u.sx)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:r,kind:o?"proto":"file",embed_host:(0,m.Yw)()})}},i.createElement("span",{className:_.s.truncate.$},n),s&&i.createElement(i.Fragment,null,i.createElement("span",null,"\xb7"),i.createElement("span",{className:_.s.truncate.$},s))))),i.createElement("div",{className:_.s.flex.gap4.alignCenter.itemsCenter.cursorDefault.$},e&&i.createElement(b,{accessData:e,isPrototype:o}),null!=p&&i.createElement(f.E,{truncate:!0,fontSize:9,color:"secondary"},(0,g.tx)("proto.embeds.last_edited",{relativeTime:i.createElement(h.h1,{date:p})}))))}function T({params:e,fileKey:r,isPrototype:n,showTooltip:a}){let s=`${window.location.origin}/${n?"proto":"file"}/${r}${e.startsWith("?")?e:`?${e}`}`,l=a?{"data-tooltip":(0,g.t)("embed.footer.figma_logo_aria_label"),"data-tooltip-type":"text","data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":250}:{};return i.createElement(o.K,{htmlAttributes:l,"aria-label":(0,g.t)("embed.footer.figma_logo_aria_label"),onClick:()=>{(0,p.FJ)(s,"_blank"),(0,u.sx)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:r,kind:n?"proto":"file",embed_host:(0,m.Yw)()})}},i.createElement(d.m,{className:_.s.flexShrink0.$}))}},747388:(e,r,n)=>{n.d(r,{l:()=>h});var i=n(848318),a=n(716544),o=n(376025),s=n(964102),l=n(417209),c=n(579020),d=n(322035),u=n(566668),p=n(17755),m=n(972574);function h({fileKey:e}){let r=(0,a.wA)(),n=d.R7.fullscreen,h=(0,a.d4)(e=>e.appWindow.inFullScreenMode);return n?i.createElement(o.E,{onClick:()=>{(0,c.sx)("IFrame Mobile Viewer Toggle Fullscreen",{fileKey:e,source:"click",embed_host:(0,u.Yw)()}),r((0,m._M)())},className:p.s.absolute.bRadius5.colorBg.w24.h24.cursorDefault.flex.itemsCenter.justifyCenter.elevation100.$,style:{top:16,right:16}},h?i.createElement(s.p,null):i.createElement(l.O,null)):null}},470403:(e,r,n)=>{let i;n.d(r,{As:()=>f,H4:()=>g,S1:()=>T,tH:()=>b});var a=n(848318),o=n(992277),s=n(792978),l=n(356505),c=n(157907),d=n(579020),u=n(502255),p=n(442313),m=n(856480),h=n(26729);let _=Symbol("Default"),g={DEFAULT_FULL_PAGE:_,NONE_I_KNOW_WHAT_IM_DOING:Symbol("None")};function f(e,r){if(r){e.stack+="\n\nReact stack:"+r.componentStack;let n=Error("React component stack where the error occurred");n.stack=r.componentStack,e.cause=n}}function E(e){return e?.message?.includes("The node to be removed is not a child of this node")}let y=class e extends a.Component{constructor(e){super(e),this.state={hasError:!1,isGoogleTranslateError:!1}}static getDerivedStateFromError(e){return{hasError:!0,isGoogleTranslateError:E(e),error:e}}componentDidCatch(r,n){f(r,n);try{this.props.onError?.()}catch(e){}let i=this.props.fallback===g.DEFAULT_FULL_PAGE,a=E(r),s=(0,u.$D)(this.props.team||o.e.UNOWNED,r,{tags:{react:!0,errorBoundary:this.props.boundaryKey,...this.props.sentryTags,...i||this.props.severity===u.DZ.Critical?{severity:u.DZ.Critical}:{}}});i&&!e.reportedHardCrash&&(e.reportedHardCrash=!0,a?(0,d.sx)("js_extension_dom_crash",{errorBoundary:this.props.boundaryKey},{forwardToDatadog:!0}):(0,d.sx)("js_hard_crash",{errorBoundary:this.props.boundaryKey,errorMessage:r?.message},{forwardToDatadog:!0})),this.sentryID=s}render(){if(this.state.hasError){console.log("Rendering error: "+this.state.error),console.log("Boundary key: "+this.props.boundaryKey);let e=null;return e=this.props.fallback===_?a.createElement(T,{sentryId:this.sentryID,isGoogleTranslateError:this.state.isGoogleTranslateError}):this.props.fallback===g.NONE_I_KNOW_WHAT_IM_DOING?null:this.props.fallback,a.createElement(I,{error:this.state.error},e)}return this.props.children}};y.reportedHardCrash=!1;let b=y,v={title:"Something went wrong",descriptionP1:"Our team is looking into it now. If reloading the page doesn't work, check our ",statusPage:"status page",descriptionP2:" for updates",googleTranslateDescription:"This is likely due to a Chrome Extension, such as Google Translate. Try disabling Chrome Extensions and refresh the page",reload:"Reload"};function T(e){let r=a.useMemo(()=>{let e=document.body.style.colorScheme;return e&&"dark"===e?"dark":"light"},[]),n=a.useMemo(()=>{try{let e=(0,m.Gq)(!1);return e?.initialized&&!!(0,p.t)("general.root_error_boundary_title")}catch(e){return!1}},[]),i=e.isGoogleTranslateError&&(0,c.k)().error_boundary_google_translate;return a.createElement("div",{className:h.ZX,"data-preferred-theme":r},a.createElement("div",{className:h.fi},a.createElement("div",{className:h.v2},n?(0,p.tx)("general.root_error_boundary_title"):v.title),a.createElement("div",{className:h.rU},i?n?(0,p.tx)("general.root_error_boundary_google_translate_description"):v.googleTranslateDescription:n?(0,p.tx)("general.root_error_boundary_description",{status_page:a.createElement(s.N,{trusted:!0,href:"https://status.figma.com"},(0,p.tx)("general.root_error_boundary_status_page"))}):a.createElement(a.Fragment,null,a.createElement("span",null,v.descriptionP1),a.createElement(s.N,{trusted:!0,href:"https://status.figma.com"},v.statusPage),a.createElement("span",null,v.descriptionP2))),a.createElement("div",{className:h.yV},a.createElement(l.$n,{variant:"primary",onClick:()=>location.reload()},n?(0,p.tx)("general.root_error_boundary_refresh"):v.reload)),e.sentryId&&a.createElement("div",{className:h.g6},"Error ID: ",e.sentryId)))}function I(e){let r=i??=a.createContext({}),{error:n,children:o}=e,s=a.useMemo(()=>({error:n}),[n]);return a.createElement(r.Provider,{value:s},o)}},145015:(e,r,n)=>{n.d(r,{$$:()=>C,CY:()=>eo,JU:()=>en,Kz:()=>ec,Lf:()=>et,M7:()=>U,NY:()=>q,N_:()=>ei,O0:()=>G,Ph:()=>ea,RW:()=>ed,Us:()=>es,VE:()=>el,Yo:()=>eu,cw:()=>x,e2:()=>w,il:()=>Q,ks:()=>J,nR:()=>O,ny:()=>S,qM:()=>k,qZ:()=>M,rb:()=>$,s6:()=>D,tB:()=>er,tM:()=>R,vd:()=>N,vv:()=>L,wG:()=>Z});var i=n(848318),a=n(258904),o=n(536384),s=n.n(o),l=n(633017),c=n(857188),d=n(753207),u=n(654104),p=n(282424),m=n(166365),h=n(566699),_=n(17755),g=n(155651),f=n(481540),E=n(503024),y=n(785572),b=n(190597),v=n(954206),T=n(663128);let I=null;function S(e){I=e}function w(e){return i.createElement("div",{className:s()(b.GC,e.reversed&&b.zi,e.className)},e.children)}class A extends u.uA{constructor(){super(...arguments),this.onKeyDown=e=>{I?.(e)||(this.props.onKeyDown?.(e),e.keyCode===c.Uz.ESCAPE&&e.target.blur())},this.onClick=u.cZ(this,"click",e=>{this.props.onClick?.(e)}),this.onPointerDown=u.Am(this,"pointerdown",e=>{this.props.onPointerDown?.(e)})}render(){let{forwardedRef:e,...r}=this.props;r.className=`${this.props.defaultClass} ${this.props.className||""}`;let n=this.props.dataTestId;return delete r.defaultClass,delete r.recordingKey,delete r.dataTestId,this.props.onClick&&this.props.recordingKey&&(r.onClick=this.onClick),this.props.onPointerDown&&this.props.recordingKey&&(r.onPointerDown=this.onPointerDown),i.createElement("button",{ref:e,onKeyDown:this.onKeyDown,...r,"data-testid":n},this.props.children)}}A.displayName="ButtonBase";let C=(0,i.forwardRef)(function({fullWidth:e,...r},n){return i.createElement(A,{forwardedRef:n,defaultClass:s()(b.xZ,e&&b.Ij),...r})}),N=(0,g.tf)(C);class L extends i.Component{render(){let{fullWidth:e,...r}=this.props;return i.createElement(A,{defaultClass:s()(b.fY,e&&b.Ij),...r})}}L.displayName="BigButtonPrimary",(0,g.tf)(L);class O extends i.Component{render(){return i.createElement(A,{defaultClass:b.HM,type:"button",...this.props})}}O.displayName="ButtonSecondary";let R=(0,g.tf)(O);class P extends i.Component{render(){let{fullWidth:e,...r}=this.props;return i.createElement(A,{defaultClass:s()(b.xJ,e&&b.Ij),type:"button",...r})}}P.displayName="BigButtonSecondary",(0,g.tf)(P);class D extends i.Component{render(){return i.createElement(A,{defaultClass:b.oC,type:"button",...this.props})}}D.displayName="ButtonSecondaryNegative";class M extends i.Component{render(){return i.createElement(A,{defaultClass:b.ky,type:"button",...this.props})}}M.displayName="ButtonNegative";let k=(0,g.tf)(M);class F extends i.Component{render(){return i.createElement(A,{defaultClass:b.OK,type:"button",...this.props})}}F.displayName="BigButtonNegative";class x extends i.Component{render(){return i.createElement(A,{defaultClass:b.I2,...this.props})}}x.displayName="ButtonWhite";let U=(0,g.tf)(x);class B extends i.Component{render(){return i.createElement(A,{defaultClass:b.rd,...this.props})}}B.displayName="ButtonInverse";class V extends i.Component{render(){let{fullWidth:e,...r}=this.props;return i.createElement(A,{defaultClass:s()(b.FO,e&&b.Ij),...r})}}V.displayName="BigButtonInverse",(0,g.tf)(V);class G extends i.Component{render(){return i.createElement(A,{defaultClass:b.OY,...this.props})}}G.displayName="ButtonGreen";class H extends i.Component{render(){let{customClassName:e,...r}=this.props;return i.createElement(A,{defaultClass:b.Iw,className:e,...r})}}H.displayName="ButtonGrey",(0,g.tf)(G);class K extends i.Component{render(){return i.createElement(A,{defaultClass:this.props.solidWhenDisabled?b.dy:b.sY,...this.props})}}K.displayName="BigButtonGreen";class W extends i.Component{render(){return i.createElement(A,{defaultClass:b.yT,...this.props})}}W.displayName="BigButtonBlack",(0,g.tf)(W);class z extends i.Component{render(){let e=`${b.xZ} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return i.createElement("a",{...r},this.props.children)}}z.displayName="ButtonLink";let $=(0,g.tf)(z);class Y extends i.Component{render(){let{fullWidth:e,...r}=this.props,n=s()(b.fY,this.props.fullWidth&&b.Ij),a=`${n} ${this.props.className||""}`;return r={...r,className:a,rel:"noopener"},i.createElement("a",{...r},this.props.children)}}Y.displayName="ButtonLink",(0,g.tf)(Y);class j extends i.Component{render(){let e=`${b.HM} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return i.createElement("a",{...r},this.props.children)}}j.displayName="ButtonSecondaryLink";let q=(0,g.tf)(j);class X extends i.Component{render(){let e=`${b.hz} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return i.createElement("a",{...r},this.props.children)}}X.displayName="BigButtonSecondaryLink";let Z=118,J=i.forwardRef(function({className:e,...r},n){return i.createElement(p.L,{className:s()(b._Z,e),...(0,d.d)(r),ref:n})});class Q extends i.Component{render(){let e=`${b.ki} ${this.props.className||""}`,r={...this.props,className:e};return i.createElement(p.L,{...r})}}Q.displayName="BigTextInput";let ee=(0,g.h3)(p.L);class et extends i.Component{render(){return i.createElement("div",{className:this.props.className||(this.props.disabled?b.d1:b.ri)},i.createElement("label",{htmlFor:this.props.htmlName,className:s()(b.dQ,{[b.QC]:this.props.value,[b.z3]:this.props.hasError})},this.props.label),this.props.trackingFieldName&&i.createElement(ee,{autoComplete:this.props.autoCompleteName,dataTestId:this.props.dataTestId,disabled:this.props.disabled,id:this.props.htmlName,maxLength:this.props.maxLength||50,name:this.props.htmlName,onBlur:this.props.onBlur,onChange:this.props.onChange,onFocus:this.props.onFocus,onKeyPress:this.props.onKeyPress,placeholder:this.props.placeholder||this.props.label,required:this.props.required,trackingFieldName:this.props.trackingFieldName,trackingPopulationLevel:this.props.value?f._R.POPULATED_COMPLETE:f._R.NOT_POPULATED,type:this.props.type||"text",value:this.props.value}),!this.props.trackingFieldName&&i.createElement(p.L,{autoComplete:this.props.autoCompleteName,dataTestId:this.props.dataTestId,disabled:this.props.disabled,id:this.props.htmlName,maxLength:this.props.maxLength||50,name:this.props.htmlName,onBlur:this.props.onBlur,onChange:this.props.onChange,onFocus:this.props.onFocus,onKeyPress:this.props.onKeyPress,placeholder:this.props.placeholder||this.props.label,required:this.props.required,type:this.props.type||"text",value:this.props.value}),this.props.tooltip&&i.createElement(m.B,{className:b.G,svg:T.A,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":this.props.tooltip,"data-tooltip-timeout-delay":300}))}}class er extends i.PureComponent{constructor(e){super(e),this.documentKeyDown=e=>{e.keyCode===c.Uz.TAB&&this.setState({showFocus:!0})},this.documentMouseDown=e=>{this.setState({showFocus:!1})},this.onFocus=e=>{this.state.showFocus||e.target.blur()},this.classNameForInput=()=>{let e=`${b.kv} ${this.props.className||""}`;return this.state.showFocus&&(e+=` ${b.hP}`),e},this.state={showFocus:!1}}componentDidMount(){document.addEventListener("keydown",this.documentKeyDown),document.addEventListener("mousedown",this.documentMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this.documentKeyDown),document.removeEventListener("mousedown",this.documentMouseDown)}render(){let{svgOverride:e,classOverride:r,checked:n,...o}=this.props;return i.createElement("div",{className:b.HI},i.createElement("input",{...o,type:"checkbox",onFocus:this.onFocus,className:r||this.classNameForInput(),checked:n}),n?i.createElement("div",{className:b.Eg},i.createElement(h.U,{svg:e??v.A},i.createElement(a.l,null))):null)}}function en(e){let r=`${b.Pf} ${e.className||""}`;return i.createElement("label",{...e,className:r})}er.displayName="Checkbox";let ei=y.N,ea=(0,g.tf)(ei);class eo extends i.Component{render(){let{canFocus:e,trusted:r,className:n,...a}=this.props,o=`${b.MH} ${n||""}`,s={...a,className:o,rel:r?"noopener":"noopener nofollow noreferrer ugc",onClick:e=>{this.props.onClick&&this.props.onClick(e),this.props.href&&(0,l.e)(this.props.href,e)}};return e&&(s={href:"#",tabIndex:0,...s}),i.createElement("a",{...s},this.props.children)}}eo.displayName="Link";let es=(0,g.tf)(eo);class el extends i.Component{render(){let e=`${b.X7} ${this.props.className||""}`,r={...this.props,className:e};return i.createElement("select",{...r})}}function ec(e){let r=e.multiple?8*e.multiple:e.value?e.value:0;return"x"===e.direction?i.createElement("div",{style:{width:r},className:_.s.flexShrink0.$,"aria-hidden":"true"}):i.createElement("div",{style:{height:r},className:_.s.flexShrink0.$,"aria-hidden":"true"})}el.displayName="BigSelect",ec.displayName="Spacing";let ed=(0,g.tf)(m.B),eu=(0,g.tf)(e=>i.createElement("a",{...e},e.children));(0,g.tf)(function(e){return i.createElement(A,{defaultClass:s()(b._d,e.className),...e})})},775048:(e,r,n)=>{n.d(r,{LN:()=>f});var i=n(848318),a=n(503543),o=n(90741),s=n(536384),l=n.n(s),c=n(313494),d=n(987724),u=n.n(d);n(831932);var p=n(753207),m=n(282424);n(166365);var h=n(506030),_=n(580422),g=n(367113);i.forwardRef(function(e,r){let n=`__${e.name}`;return i.createElement("fieldset",{ref:r,className:_.lI},i.createElement("label",{className:l()(_.Pf,e.inlineLabel&&_.Qg),htmlFor:n},e.label),i.createElement("select",{className:l()(_.Wm,e.responseHasError&&_.U3),id:n,name:e.name,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,value:e.value||""},i.createElement("option",{disabled:!!e.value},e.inlineLabel?e.label:""),Object.keys(e.options).map(r=>i.createElement("option",{value:r,key:r},e.options[r]))),e.error)}),i.forwardRef(function(e,r){let n=`__${e.name}`;return i.createElement("fieldset",{ref:r,className:_.lI},i.createElement("label",{className:_.Pf,htmlFor:n},e.label),i.createElement("textarea",{className:l()(_.PC,e.responseHasError&&_.U3),onChange:e.onChange,onBlur:e.onBlur,id:n,name:e.name,value:e.value}),e.error)}),i.forwardRef(function(e,r){let n=`__${e.name}`;return i.createElement("fieldset",{ref:r,className:_.lI},i.createElement("label",{className:_.Pf,htmlFor:n},e.label),i.createElement("input",{className:l()(_.En,e.className,e.responseHasError&&_.U3),disabled:e.disabled,id:n,name:e.name,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,onKeyDown:e.onKeyDown,onKeyDownCapture:e.onKeyDownCapture,type:"text",value:e.value}),e.children,e.error)}),i.forwardRef(function(e,r){let[n,a]=i.useState([]),o=i.useRef(null),s=r=>!!e.defaultOption&&(!e.maxListSizeToRevealDefaultOption||r.length<=e.maxListSizeToRevealDefaultOption),d=()=>{let r=e.options.sort().slice(0,100);s(r)&&r.unshift(e.defaultOption),a(r)},{isOpen:p,getToggleButtonProps:m,getLabelProps:h,getMenuProps:g,getInputProps:f,getItemProps:E,getComboboxProps:y,openMenu:b,highlightedIndex:v}=(0,c.Bp)({selectedItem:e.value,items:n,onSelectedItemChange({selectedItem:r}){e.onChange(r||"")},onIsOpenChange:({isOpen:e,selectedItem:r})=>{e&&!r&&d()},onInputValueChange:r=>{if(r.inputValue.trim().length>0){let n=RegExp(u()(r.inputValue),"i"),i=e.options.filter(e=>n.test(e)).sort().slice(0,100);s(i)&&i.unshift(e.defaultOption),a(i)}else d()}}),T=()=>{(!e.value||e.defaultOption&&e.defaultOption===e.value)&&d()};return i.createElement("fieldset",{ref:r,className:_.lI},i.createElement("label",{...h({className:_.Pf})},e.label),i.createElement("div",{...y({className:_.Tw})},i.createElement("input",{...f({className:l()(_.En,p&&_.qT,!p&&e.responseHasError&&_.U3,e.className),ref:o,disabled:e.disabled,onBlur:e.onBlur,onClick:()=>{T(),b()}})}),i.createElement("button",{...m({onClick:()=>{T(),o.current.select()},disabled:e.disabled,className:_.pZ,type:"button"})})),i.createElement("div",{className:l()(_.Em,!p&&_.Qg)},i.createElement("ul",{...g({className:_.es})},n.map((e,r)=>i.createElement("li",{className:l()(v===r&&_.$p,0===r&&n.length>1&&s(n)?_.KG:_.J7),key:e,...E({item:e,index:r})},e)))),e.children,!p&&e.error)}),i.forwardRef(function(e,r){let n=`__${e.name}`;return i.createElement("fieldset",{ref:r,className:_.lI},i.createElement("label",{className:_.Pf,htmlFor:n},e.label),i.createElement("input",{type:"file",id:n,name:e.name,onChange:e.onChange}),e.error)});let f=i.forwardRef(function({className:e,...r},n){return i.createElement("div",{className:g.Kf},i.createElement("label",{className:g.qf,htmlFor:r.id},r.placeholder),i.createElement(m.L,{className:l()(g.hF,e),...(0,p.d)(r),ref:n}))});i.forwardRef(function(e,r){return i.createElement("div",{className:h.kL},i.createElement("span",{className:h.zr,"data-disabled":!!e.disabled||void 0},i.createElement(a.F,{ref:r,...e,className:h.kv}),i.createElement("span",{className:h.Cv},i.createElement(o.g,{className:h.uU}))),i.createElement("label",{htmlFor:e.id},e.label))})},213165:(e,r,n)=>{n.d(r,{R:()=>o});var i=n(848318),a=n(503024);class o extends i.PureComponent{constructor(){super(...arguments),this.textContainerRef=i.createRef(),this.getFittingText=()=>{if(!this.textContainerRef.current)return null;let e=this.textContainerRef.current,r=e.getBoundingClientRect().width,{text:n}=this.props,i=document.createElement("p");if(i.className=this.props.className||"",i.style.cssText="display: inline; white-space: nowrap;",e.appendChild(i),i.innerText=n,i.getBoundingClientRect().width<=r)return e.removeChild(i),n;let a="";for(let e=0;e<n.length;e+=1){let o=`...${n.slice(n.length-e)}`;i.innerText=o;let{width:s}=i.getBoundingClientRect();if(s>r)break;a=o}return e.removeChild(i),a}}componentDidMount(){this.forceUpdate()}render(){let e=this.getFittingText();return i.createElement("div",{ref:this.textContainerRef,style:{width:this.props.maxWidth?`${this.props.maxWidth}px`:"100%"},"data-tooltip-type":this.props.text!==e?a.Ib.TEXT:void 0,"data-tooltip":this.props.text!==e?this.props.text:void 0,"aria-label":this.props.text},i.createElement("p",{className:this.props.className},e))}}o.displayName="FrontTruncatedText"},725478:(e,r,n)=>{n.d(r,{ny:()=>p});var i=n(579020),a=n(731889),o=n(379338);let s=(0,o.tl)().zendesk_web_key_public,l={productQuestion:{id:0x53d1c67aa1},bugReport:{id:0x53d1c6adf6},featureRequest:{id:0x53d1c6b4c1},account:{id:0x53d206c58a},dataPrivacy:{id:0x1623bff94217},community:{id:0x71090d38797},billing:{id:0x8d41e49e517},events:{id:0x11e3970aad17},reportAbuse:{id:0x1a704d1f0d97},other:{id:0x53d1c6e546}},c=function(){return{webWidget:{position:{horizontal:"right",vertical:"bottom"},offset:{horizontal:"0px",vertical:"40px"},contactForm:{selectTicketForm:{"*":"Please choose:"},ticketForms:Object.keys(l).map(e=>l[e])},helpCenter:{searchPlaceholder:{"*":"How can we help?"},messageButton:{"*":"Contact us"}}}}},d=null;function u(){window.zE&&(window.zE("webWidget","show"),window.zE("webWidget","open"),window.zE("webWidget:on","close",()=>{window.zE("webWidget","hide")}),window.zE("webWidget:on","userEvent",e=>{let r={action:e.action,relatedZendeskId:e.properties?.id,relatedZendeskName:e.properties?.name,searchTerm:e.properties?.term};(0,i.sx)("zendesk_help_widget",r)}))}function p(e,r){(d||(d=(async()=>{if(window.figmaPerfTesting)throw Error("testing");if(window.zE)return window.zE;if(!s)throw Error("No zendesk_web_key_public api key");window.zESettings=c();try{return await (0,a.k0)("https://static.zdassets.com/ekr/snippet.js?key="+s,{id:"ze-snippet",cors:!1}),window.zE}catch(e){throw d=null,e}})())).then(()=>{d&&window.zE&&(window.zESettings=c(),r?.ticketForms&&(window.zESettings.webWidget.contactForm={ticketForms:r.ticketForms.map(e=>l[e]),fields:(r.fields||[]).map(e=>({id:e.id,prefill:{"*":e.value}}))}),r?.suppressAnswerBot&&(window.zESettings.webWidget.helpCenter={suppress:!0},window.zESettings.webWidget.answerBot={suppress:!0}),r?.locale&&window.zE("webWidget","setLocale",r.locale),window.zE("webWidget","updateSettings",window.zESettings),window.zE("webWidget","prefill",{name:{value:e.name,readOnly:!0},email:{value:e.email,readOnly:!0}}))}).then(u).catch(()=>console.error(`Our support center is not currently available. You can email us at ${(0,o.W4)()}.`))}},26039:(e,r,n)=>{n.d(r,{LE:()=>c,y1:()=>o.y,MW:()=>d});var i=n(848318),a=n(445777),o=n(851981);let s="file_icons--designFilePrimary---6B-O",l="file_icons--figjamFilePrimary--eSLWG";var c=(e=>(e[e.LARGE=0]="LARGE",e[e.MEDIUM=1]="MEDIUM",e[e.SMALL=2]="SMALL",e))(c||{});function d(e){let r;let n=e.size??0;switch(e.type){case o.y.DESIGN:r=i.createElement(m,{size:n});break;case o.y.DESIGN_AND_DEV_MODE:r=i.createElement(h,null);break;case o.y.DEV_MODE:r=i.createElement(_,null);break;case o.y.DEV_MODE_SELECTED:r=i.createElement(_,{selected:!0});break;case o.y.WHITEBOARD:r=i.createElement(g,{size:n});break;case o.y.PUBLISHED:r=i.createElement(p,{size:n});break;case o.y.PROTOTYPE:r=i.createElement(u,{size:n});break;case o.y.TEMPLATE:r=i.createElement(v,{size:n,svgOptions:e.svgOptions});break;case o.y.REPO:r=i.createElement(T,{size:n});break;case o.y.SLIDES:r=i.createElement(f,{size:n});break;case o.y.SLIDES_TEMPLATE:r=i.createElement(E,{size:n});break;case o.y.SITES:r=i.createElement(b,{size:n});break;case o.y.COOPER:r=i.createElement(y,{size:n});break;case o.y.FIGMAKE:r=i.createElement(b,{size:n});break;case o.y.WIDGET:r=i.createElement(m,{size:n});break;default:(0,a.xb)(e.type)}return i.createElement("div",{"data-tooltip-type":e["data-tooltip-type"],"data-tooltip":e["data-tooltip"],className:e.className,"data-testid":e.dataTestId},r)}function u(e){let r="var(--color-iconprototypefile, #E6E6E6)",n="var(--color-iconprototypefilesecondary, black)";return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_1019308_55963)"},i.createElement("path",{d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z",fill:r}),i.createElement("path",{d:"M6 11.5V4.5L12 8L6 11.5Z",fill:n})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_1019308_55963"},i.createElement("rect",{width:"16",height:"16",fill:"white"})))):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",className:"file_icons--prototypeIconGridView--QmkbF"},i.createElement("circle",{cx:"16",cy:"16",r:"12",fill:r}),i.createElement("path",{d:"M13 21.5V10.5L22 16L13 21.5Z",fill:n}))}function p(e){return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M1 3C1 1.89543 1.89543 1 3 1H13C14.1046 1 15 1.89543 15 3V13C15 14.1046 14.1046 15 13 15H3C1.89543 15 1 14.1046 1 13V3Z",fill:"var(--color-iconpublishedfile, #2c2c2c)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.42809 5.94824L8.4163 5.94487L5.93954 5.23713L7.81094 7.11265C7.84908 7.10727 7.88805 7.10449 7.92768 7.10449C8.38608 7.10449 8.75769 7.47692 8.75769 7.93634C8.75769 8.39576 8.38608 8.76819 7.92768 8.76819C7.46927 8.76819 7.09766 8.39576 7.09766 7.93634C7.09766 7.89736 7.10033 7.859 7.10551 7.82144L5.24201 5.95383L5.90568 8.27402L5.91639 8.31146L5.92416 8.34963C6.11456 9.28536 6.94108 9.98642 7.92622 9.98642C8.15158 9.98642 8.36652 9.95019 8.56673 9.88397L9.15269 9.69017L9.58863 10.1271L10.2943 10.8343L10.838 10.2893L10.1189 9.56871L9.68985 9.13868L9.87373 8.55969C9.93575 8.36438 9.96962 8.15529 9.96962 7.93633C9.96962 6.98187 9.3191 6.17937 8.43996 5.95132L8.42809 5.94824ZM12.2506 10.2893L11.0006 11.5421L10.2943 12.25L9.58793 11.5421L8.88074 10.8334C8.58052 10.9327 8.25963 10.9864 7.92622 10.9864C6.45479 10.9864 5.22725 9.9399 4.94424 8.54903L3.82397 4.6326L3.5 3.5L4.63269 3.82367L8.69105 4.98335C10.0017 5.32333 10.9696 6.51654 10.9696 7.93633C10.9696 8.25918 10.9196 8.57032 10.8268 8.86238L12.2506 10.2893Z",fill:"var(--color-icon-onbrand, white)"})):1===e.size?i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_3022_62326)"},i.createElement("rect",{width:"24",height:"24",rx:"4",fill:"#2C2C2C"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9464 7.68575L12.9346 7.68238L6.56175 5.86133L10.8434 10.151C11.0417 10.0543 11.2645 10 11.5 10C12.3284 10 13 10.6716 13 11.5C13 12.3284 12.3284 13 11.5 13C10.6716 13 10 12.3284 10 11.5C10 11.2723 10.0507 11.0565 10.1415 10.8632L5.86781 6.58163L7.61385 12.6858L7.62457 12.7232L7.63233 12.7614C8.035 14.7403 9.78217 16.2262 11.8709 16.2262C12.3463 16.2262 12.8019 16.1497 13.2273 16.009L13.8132 15.8152L14.2492 16.2521L16.015 18.0218L18.026 16.0063L16.239 14.2155L15.81 13.7855L15.9938 13.2065C16.1254 12.7921 16.1968 12.3497 16.1968 11.8886C16.1968 9.86928 14.8204 8.17187 12.9583 7.68883L12.9464 7.68575ZM19.4386 16.0063L16.7213 18.7297L16.0151 19.4374L16.015 19.4375L16.0149 19.4374L15.3086 18.7297L13.5413 16.9584C13.0159 17.1322 12.4544 17.2262 11.8709 17.2262C9.29588 17.2262 7.14769 15.3948 6.65241 12.9608L4.44897 5.2576L4.125 4.125L5.25769 4.44867L13.2093 6.72087C15.5029 7.31583 17.1968 9.40395 17.1968 11.8886C17.1968 12.4536 17.1092 12.9981 16.9469 13.5092L19.4386 16.0063Z",fill:"var(--color-icon-ondesign, white)"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_3022_62326"},i.createElement("rect",{width:"24",height:"24",fill:"white"})))):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},i.createElement("path",{fill:"var(--color-iconpublishedfile, #2c2c2c)",d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z"}),i.createElement("path",{fill:"var(--color-icon-onbrand, white)",fillRule:"evenodd",clipRule:"evenodd",d:"M16.8582 12.9953L16.8466 12.992L12.4437 11.7366L15.7009 14.9938C15.8169 14.954 15.9412 14.9324 16.0707 14.9324C16.6993 14.9324 17.2089 15.442 17.2089 16.0707C17.2089 16.6993 16.6993 17.2089 16.0707 17.2089C15.442 17.2089 14.9324 16.6993 14.9324 16.0707C14.9324 15.9412 14.954 15.8169 14.9938 15.7009L11.7425 12.4496L12.9443 16.6419L12.9548 16.6784L12.9625 16.7156C13.26 18.1592 14.5397 19.2442 16.0707 19.2442C16.4199 19.2442 16.7541 19.1882 17.0659 19.0854L17.6507 18.8924L18.0862 19.3279L19.3171 20.5588L20.5858 19.2901L19.3411 18.0455L18.9107 17.615L19.0954 17.035C19.1918 16.7321 19.2443 16.4085 19.2443 16.0707C19.2443 14.5951 18.2363 13.3524 16.8699 12.9983L16.8582 12.9953ZM21.2929 18.583L22 19.2901L21.2929 19.9972L20.0242 21.2659L19.3171 21.973L18.61 21.2659L17.3791 20.035C16.9676 20.1708 16.5277 20.2442 16.0707 20.2442C14.0558 20.2442 12.3744 18.8165 11.983 16.9175L10.3246 11.1324L10 10L11.1329 10.323L17.1208 12.0303C18.9175 12.4959 20.2443 14.1283 20.2443 16.0707C20.2443 16.5127 20.1756 16.9386 20.0482 17.3384L21.2929 18.583Z"}),i.createElement("path",{fill:"var(--color-iconpublishedfilesecondary, #787878)",d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z"}))}function m(e){return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{className:s,d:"M1 3C1 1.89543 1.89543 1 3 1H13C14.1046 1 15 1.89543 15 3V13C15 14.1046 14.1046 15 13 15H3C1.89543 15 1 14.1046 1 13V3Z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.42809 5.94824L8.4163 5.94487L5.93954 5.23713L7.81094 7.11265C7.84908 7.10727 7.88805 7.10449 7.92768 7.10449C8.38608 7.10449 8.75769 7.47692 8.75769 7.93634C8.75769 8.39576 8.38608 8.76819 7.92768 8.76819C7.46927 8.76819 7.09766 8.39576 7.09766 7.93634C7.09766 7.89736 7.10033 7.859 7.10551 7.82144L5.24201 5.95383L5.90568 8.27402L5.91639 8.31146L5.92416 8.34963C6.11456 9.28536 6.94108 9.98642 7.92622 9.98642C8.15158 9.98642 8.36652 9.95019 8.56673 9.88397L9.15269 9.69017L9.58863 10.1271L10.2943 10.8343L10.838 10.2893L10.1189 9.56871L9.68985 9.13868L9.87373 8.55969C9.93575 8.36438 9.96962 8.15529 9.96962 7.93633C9.96962 6.98187 9.3191 6.17937 8.43996 5.95132L8.42809 5.94824ZM12.2506 10.2893L11.0006 11.5421L10.2943 12.25L9.58793 11.5421L8.88074 10.8334C8.58052 10.9327 8.25963 10.9864 7.92622 10.9864C6.45479 10.9864 5.22725 9.9399 4.94424 8.54903L3.82397 4.6326L3.5 3.5L4.63269 3.82367L8.69105 4.98335C10.0017 5.32333 10.9696 6.51654 10.9696 7.93633C10.9696 8.25918 10.9196 8.57032 10.8268 8.86238L12.2506 10.2893Z",fill:"var(--color-icon-ondesign, white)"})):1===e.size?i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_3022_62357)"},i.createElement("rect",{width:"24",height:"24",rx:"4",fill:"#0D99FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9464 7.68575L12.9346 7.68238L6.56175 5.86133L10.8434 10.151C11.0417 10.0543 11.2645 10 11.5 10C12.3284 10 13 10.6716 13 11.5C13 12.3284 12.3284 13 11.5 13C10.6716 13 10 12.3284 10 11.5C10 11.2723 10.0507 11.0565 10.1415 10.8632L5.86781 6.58163L7.61385 12.6858L7.62457 12.7232L7.63233 12.7614C8.035 14.7403 9.78217 16.2262 11.8709 16.2262C12.3463 16.2262 12.8019 16.1497 13.2273 16.009L13.8132 15.8152L14.2492 16.2521L16.015 18.0218L18.026 16.0063L16.239 14.2155L15.81 13.7855L15.9938 13.2065C16.1254 12.7921 16.1968 12.3497 16.1968 11.8886C16.1968 9.86928 14.8204 8.17187 12.9583 7.68883L12.9464 7.68575ZM19.4386 16.0063L16.7213 18.7297L16.0151 19.4374L16.015 19.4375L16.0149 19.4374L15.3086 18.7297L13.5413 16.9584C13.0159 17.1322 12.4544 17.2262 11.8709 17.2262C9.29588 17.2262 7.14769 15.3948 6.65241 12.9608L4.44897 5.2576L4.125 4.125L5.25769 4.44867L13.2093 6.72087C15.5029 7.31583 17.1968 9.40395 17.1968 11.8886C17.1968 12.4536 17.1092 12.9981 16.9469 13.5092L19.4386 16.0063Z",fill:"var(--color-icon-ondesign, white)"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_3022_62357"},i.createElement("rect",{width:"24",height:"24",fill:"white"})))):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},i.createElement("path",{className:s,d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8582 12.9953L16.8466 12.992L12.4437 11.7366L15.7009 14.9938C15.8169 14.954 15.9412 14.9324 16.0707 14.9324C16.6993 14.9324 17.2089 15.442 17.2089 16.0707C17.2089 16.6993 16.6993 17.2089 16.0707 17.2089C15.442 17.2089 14.9324 16.6993 14.9324 16.0707C14.9324 15.9412 14.954 15.8169 14.9938 15.7009L11.7425 12.4496L12.9443 16.6419L12.9548 16.6784L12.9625 16.7156C13.26 18.1592 14.5397 19.2442 16.0707 19.2442C16.4199 19.2442 16.7541 19.1882 17.0659 19.0854L17.6507 18.8924L18.0862 19.3279L19.3171 20.5588L20.5858 19.2901L19.3411 18.0455L18.9107 17.615L19.0954 17.035C19.1918 16.7321 19.2443 16.4085 19.2443 16.0707C19.2443 14.5951 18.2363 13.3524 16.8699 12.9983L16.8582 12.9953ZM21.2929 18.583L22 19.2901L21.2929 19.9972L20.0242 21.2659L19.3171 21.973L18.61 21.2659L17.3791 20.035C16.9676 20.1708 16.5277 20.2442 16.0707 20.2442C14.0558 20.2442 12.3744 18.8165 11.983 16.9175L10.3246 11.1324L10 10L11.1329 10.323L17.1208 12.0303C18.9175 12.4959 20.2443 14.1283 20.2443 16.0707C20.2443 16.5127 20.1756 16.9386 20.0482 17.3384L21.2929 18.583Z",fill:"var(--color-icon-ondesign, white)"}),i.createElement("path",{d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z",fill:"var(--color-icondesignfilesecondary, #9bd5fd)"}))}function h(){return i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_126_32431)"},i.createElement("path",{d:"M7 28.2725H25C25.5523 28.2725 26 27.8247 26 27.2725V10.1867C26 9.92146 25.8946 9.6671 25.7071 9.47957L20.7929 4.56535C20.6054 4.37782 20.351 4.27246 20.0858 4.27246H7C6.44772 4.27246 6 4.72018 6 5.27246V27.2725C6 27.8247 6.44772 28.2725 7 28.2725Z",fill:"var(--color-bg-design, #0d99ff)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8582 13.2677L16.8466 13.2644L12.4437 12.0091L15.7009 15.2663C15.8169 15.2265 15.9412 15.2049 16.0707 15.2049C16.6993 15.2049 17.2089 15.7145 17.2089 16.3431C17.2089 16.9718 16.6993 17.4814 16.0707 17.4814C15.442 17.4814 14.9324 16.9718 14.9324 16.3431C14.9324 16.2137 14.954 16.0893 14.9938 15.9734L11.7425 12.7221L12.9443 16.9144L12.9548 16.9509L12.9625 16.9881C13.26 18.4317 14.5397 19.5167 16.0707 19.5167C16.4199 19.5167 16.7541 19.4607 17.0659 19.3578L17.6507 19.1649L18.0862 19.6004L19.3171 20.8313L20.5858 19.5626L19.3411 18.318L18.9107 17.8875L19.0954 17.3074C19.1918 17.0046 19.2443 16.6809 19.2443 16.3431C19.2443 14.8676 18.2363 13.6249 16.8699 13.2708L16.8582 13.2677ZM21.2929 18.8555L22 19.5626L21.2929 20.2697L20.0242 21.5384L19.3171 22.2455L18.61 21.5384L17.3791 20.3075C16.9676 20.4432 16.5277 20.5167 16.0707 20.5167C14.0558 20.5167 12.3744 19.0889 11.983 17.1899L10.3246 11.4049L10 10.2725L11.1329 10.5955L17.1208 12.3028C18.9175 12.7684 20.2443 14.4008 20.2443 16.3431C20.2443 16.7851 20.1756 17.2111 20.0482 17.6109L21.2929 18.8555Z",fill:"var(--color-icon-ondesign, white)"}),i.createElement("path",{d:"M20.5 8.77246V6.68667V4.27246L22.2071 5.97957L24.2929 8.06535L26 9.77246H23.5858H21.5C20.9477 9.77246 20.5 9.32475 20.5 8.77246Z",fill:"var(--color-icondesignfilesecondary, #9bd5fd)"}),i.createElement("rect",{x:"18.5667",y:"17.8391",width:"13.8667",height:"13.8667",rx:"6.93333",fill:"var(--color-bg-handoff, #14AE5C)"}),i.createElement("rect",{x:"18.5667",y:"17.8391",width:"13.8667",height:"13.8667",rx:"6.93333",stroke:"var(--color-bg)",strokeWidth:"0.866667"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.9064 26.9361L21.3519 24.8635L21.1792 24.6332L21.3519 24.4029L22.9067 22.3299H23.8663L22.1388 24.6332L23.866 26.9361H22.9064ZM24.5473 26.9361L26.2747 22.3299H27.0946L25.3672 26.9361H24.5473ZM28.0887 26.9361H27.129L28.8562 24.6332L27.1288 22.3299H28.0884L29.6431 24.4029L29.8158 24.6332L29.6431 24.8635L28.0887 26.9361Z",fill:"var(--color-icon-ondesign, white)"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_126_32431"},i.createElement("rect",{width:"32",height:"32",fill:"var(--color-icon-ondesign, white)",transform:"translate(0 0.272461)"}))))}function _(e){return e.selected?i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M7 27.9999H25C25.5523 27.9999 26 27.5522 26 26.9999V9.9142C26 9.64898 25.8946 9.39463 25.7071 9.20709L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44771 4 6 4.44771 6 5V26.9999C6 27.5522 6.44771 27.9999 7 27.9999Z",fill:"#008043"}),i.createElement("path",{d:"M20.5 8.50035V6.41457V4.00037L22.2071 5.70747L24.2929 7.79325L26 9.50035H23.5858H21.5C20.9477 9.50035 20.5 9.05263 20.5 8.50035Z",fill:"#85E0A3"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6718 20.1257L9.26719 16.9195L9 16.5633L9.26718 16.207L11.6719 13.0007H13.1563L10.4844 16.5633L13.1562 20.1257H11.6718ZM14.2098 20.1257L16.8817 13.0007H18.1499L15.478 20.1257H14.2098ZM19.6876 20.1257H18.2032L20.875 16.5633L18.2031 13.0007H19.6875L22.0922 16.207L22.3594 16.5633L22.0922 16.9195L19.6876 20.1257Z",fill:"white"})):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M7 27.9999H25C25.5523 27.9999 26 27.5522 26 26.9999V9.9142C26 9.64898 25.8946 9.39463 25.7071 9.20709L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44771 4 6 4.44771 6 5V26.9999C6 27.5522 6.44771 27.9999 7 27.9999Z",fill:"#14AE5C"}),i.createElement("path",{d:"M20.5 8.50047V6.41469V4.00049L22.2071 5.70759L24.2929 7.79337L26 9.50047H23.5858H21.5C20.9477 9.50047 20.5 9.05276 20.5 8.50047Z",fill:"#85E0A3"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6721 20.1255L9.26743 16.9193L9.00024 16.5631L9.26743 16.2068L11.6721 13.0005H13.1565L10.4846 16.563L13.1564 20.1255H11.6721ZM14.21 20.1255L16.8819 13.0005H18.1501L15.4783 20.1255H14.21ZM19.6878 20.1255H18.2034L20.8752 16.563L18.2034 13.0005H19.6877L22.0924 16.2068L22.3596 16.5631L22.0924 16.9193L19.6878 20.1255Z",fill:"white"}))}function g(e){return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{className:l,d:"M1 3C1 1.89543 1.89543 1 3 1H13C14.1046 1 15 1.89543 15 3V13C15 14.1046 14.1046 15 13 15H3C1.89543 15 1 14.1046 1 13V3Z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.18907 3.60057L3.45361 3.45345L3.6007 4.18891L4.14615 6.9163L4.17584 7.06475L4.28289 7.1718L10.1112 13.0001C10.5017 13.3906 11.1349 13.3906 11.5254 13.0001L13.0001 11.5254C13.3906 11.1348 13.3906 10.5017 13.0001 10.1111L7.17182 4.28288L7.06478 4.17584L6.91634 4.14614L4.18907 3.60057ZM5.09705 6.57175L4.72837 4.72827L6.57175 5.09702L7.13379 5.65906L5.65906 7.13376L5.09705 6.57175ZM6.36616 7.84086L7.8409 6.36617L12.293 10.8183L10.8183 12.293L6.36616 7.84086Z",fill:"var(--color-icon-onfigjam, white)"})):1===e.size?i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_3022_62349)"},i.createElement("rect",{width:"24",height:"24",rx:"4",fill:"#9747FF"}),i.createElement("path",{d:"M7.49078 11.0263L15.8491 19.3847C16.2397 19.7752 16.8728 19.7752 17.2634 19.3847L19.3846 17.2634C19.7751 16.8729 19.7751 16.2397 19.3846 15.8492L11.0262 7.49084M7.49078 11.0263L5.67769 9.21321L4.76767 4.76782L9.21315 5.67775L11.0262 7.49084M7.49078 11.0263L11.0262 7.49084",stroke:"var(--color-icon-ondesign, white)"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_3022_62349"},i.createElement("rect",{width:"24",height:"24",fill:"white"})))):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},i.createElement("path",{className:l,d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.2966 20.8616C19.4811 21.0461 19.7802 21.0461 19.9647 20.8616L21.0059 19.8205C21.1903 19.636 21.1903 19.3369 21.0059 19.1524L15.0579 13.2045L13.3487 14.9137L19.2966 20.8616ZM12.6416 14.2066L11.7021 13.2671L11.2748 11.1305L13.4113 11.5578L14.3508 12.4974L12.6416 14.2066ZM11.0623 10.0682L13.9043 10.6366L21.713 18.4453C22.288 19.0203 22.288 19.9526 21.713 20.5276L20.6718 21.5687C20.0968 22.1438 19.1645 22.1438 18.5895 21.5687L10.7809 13.7601L10.2125 10.9181L10 9.85578L11.0623 10.0682Z",fill:"var(--color-icon-onfigjam, white)"}),i.createElement("path",{d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z",fill:"var(--color-iconfigjamfilesecondary, #C599FF)"}))}function f(e){return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"16",height:"16",rx:"2",fill:"#FF5C16"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 4H12C12.5523 4 13 4.44772 13 5V10C13 10.5523 12.5523 11 12 11H11.2618H10.2165H5.78352H4.73824H4C3.44772 11 3 10.5523 3 10V5C3 4.44772 3.44772 4 4 4ZM4.43389 12H4C2.89543 12 2 11.1046 2 10V5C2 3.89543 2.89543 3 4 3H12C13.1046 3 14 3.89543 14 5V10C14 11.1046 13.1046 12 12 12H11.5661L11.9783 13.3544C12.0587 13.6186 11.9098 13.8979 11.6456 13.9783C11.3814 14.0587 11.1021 13.9098 11.0217 13.6456L10.5208 12H5.47918L4.97835 13.6456C4.89795 13.9098 4.61861 14.0587 4.35443 13.9783C4.09025 13.8979 3.94127 13.6186 4.02167 13.3544L4.43389 12ZM5 5C4.44772 5 4 5.44772 4 6C4 6.55228 4.44772 7 5 7C5.55228 7 6 6.55228 6 6C6 5.44772 5.55228 5 5 5ZM5 8C4.44772 8 4 8.44772 4 9C4 9.55228 4.44772 10 5 10C5.55228 10 6 9.55228 6 9C6 8.44772 5.55228 8 5 8Z",fill:"white"})):1===e.size?i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"24",height:"24",rx:"5",fill:"#FF5C16"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6H19C19.5523 6 20 6.44772 20 7V15C20 15.5523 19.5523 16 19 16H5C4.44772 16 4 15.5523 4 15V7C4 6.44772 4.44772 6 5 6ZM3 7C3 5.89543 3.89543 5 5 5H19C20.1046 5 21 5.89543 21 7V15C21 16.1046 20.1046 17 19 17H17.0177L17.9628 19.3107C18.0673 19.5663 17.9449 19.8582 17.6893 19.9628C17.4337 20.0673 17.1418 19.9449 17.0372 19.6893L15.9373 17H8.06281L6.9628 19.6895C6.85826 19.9451 6.56632 20.0676 6.31073 19.963C6.05514 19.8585 5.93268 19.5666 6.03722 19.311L6.9824 17H5C3.89543 17 3 16.1046 3 15V7ZM6 9C6 8.44772 6.44772 8 7 8C7.55228 8 8 8.44772 8 9C8 9.55228 7.55228 10 7 10C6.44772 10 6 9.55228 6 9ZM7 12C6.44772 12 6 12.4477 6 13C6 13.5523 6.44772 14 7 14C7.55228 14 8 13.5523 8 13C8 12.4477 7.55228 12 7 12Z",fill:"white"})):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M8 28H24C25.1046 28 26 27.1046 26 26V10.7426C26 9.94699 25.6839 9.18393 25.1213 8.62132L21.3787 4.87868C20.8161 4.31607 20.053 4 19.2574 4H8C6.89543 4 6 4.89543 6 6V26C6 27.1046 6.89543 28 8 28Z",fill:"#FF5C16"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26 10.9998V10.7426C26 9.94699 25.6839 9.18393 25.1213 8.62132L21.3786 4.87868C20.816 4.31607 20.053 4 19.2573 4H19.0203C19.5632 4.01081 20 4.4543 20 4.9998V7.9998C20 9.10437 20.8954 9.9998 22 9.9998H25C25.5522 9.9998 26 10.4475 26 10.9998Z",fill:"white",fillOpacity:"0.4"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 12H20C20.5523 12 21 12.4477 21 13V18C21 18.5523 20.5523 19 20 19H19.2618H18.2165H13.7835H12.7382H12C11.4477 19 11 18.5523 11 18V13C11 12.4477 11.4477 12 12 12ZM12.4339 20H12C10.8954 20 10 19.1046 10 18V13C10 11.8954 10.8954 11 12 11H20C21.1046 11 22 11.8954 22 13V18C22 19.1046 21.1046 20 20 20H19.5661L19.9783 21.3544C20.0587 21.6186 19.9098 21.8979 19.6456 21.9783C19.3814 22.0587 19.1021 21.9098 19.0217 21.6456L18.5208 20H13.4792L12.9783 21.6456C12.8979 21.9098 12.6186 22.0587 12.3544 21.9783C12.0903 21.8979 11.9413 21.6186 12.0217 21.3544L12.4339 20ZM13 13C12.4477 13 12 13.4477 12 14C12 14.5523 12.4477 15 13 15C13.5523 15 14 14.5523 14 14C14 13.4477 13.5523 13 13 13ZM13 16C12.4477 16 12 16.4477 12 17C12 17.5523 12.4477 18 13 18C13.5523 18 14 17.5523 14 17C14 16.4477 13.5523 16 13 16Z",fill:"white"}))}function E(e){return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"16",height:"16",rx:"2",fill:"#2C2C2C"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 4H12C12.5523 4 13 4.44772 13 5V10C13 10.5523 12.5523 11 12 11H11.2618H10.2165H5.78352H4.73824H4C3.44772 11 3 10.5523 3 10V5C3 4.44772 3.44772 4 4 4ZM4.43389 12H4C2.89543 12 2 11.1046 2 10V5C2 3.89543 2.89543 3 4 3H12C13.1046 3 14 3.89543 14 5V10C14 11.1046 13.1046 12 12 12H11.5661L11.9783 13.3544C12.0587 13.6186 11.9098 13.8979 11.6456 13.9783C11.3814 14.0587 11.1021 13.9098 11.0217 13.6456L10.5208 12H5.47918L4.97835 13.6456C4.89795 13.9098 4.61861 14.0587 4.35443 13.9783C4.09025 13.8979 3.94127 13.6186 4.02167 13.3544L4.43389 12ZM5 5C4.44772 5 4 5.44772 4 6C4 6.55228 4.44772 7 5 7C5.55228 7 6 6.55228 6 6C6 5.44772 5.55228 5 5 5ZM5 8C4.44772 8 4 8.44772 4 9C4 9.55228 4.44772 10 5 10C5.55228 10 6 9.55228 6 9C6 8.44772 5.55228 8 5 8Z",fill:"white"})):1===e.size?i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"24",height:"24",rx:"5",fill:"#2C2C2C"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6H19C19.5523 6 20 6.44772 20 7V15C20 15.5523 19.5523 16 19 16H5C4.44772 16 4 15.5523 4 15V7C4 6.44772 4.44772 6 5 6ZM3 7C3 5.89543 3.89543 5 5 5H19C20.1046 5 21 5.89543 21 7V15C21 16.1046 20.1046 17 19 17H17.0177L17.9628 19.3107C18.0673 19.5663 17.9449 19.8582 17.6893 19.9628C17.4337 20.0673 17.1418 19.9449 17.0372 19.6893L15.9373 17H8.06281L6.9628 19.6895C6.85826 19.9451 6.56632 20.0676 6.31073 19.963C6.05514 19.8585 5.93268 19.5666 6.03722 19.311L6.9824 17H5C3.89543 17 3 16.1046 3 15V7ZM6 9C6 8.44772 6.44772 8 7 8C7.55228 8 8 8.44772 8 9C8 9.55228 7.55228 10 7 10C6.44772 10 6 9.55228 6 9ZM7 12C6.44772 12 6 12.4477 6 13C6 13.5523 6.44772 14 7 14C7.55228 14 8 13.5523 8 13C8 12.4477 7.55228 12 7 12Z",fill:"white"})):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M8 28H24C25.1046 28 26 27.1046 26 26V10.7426C26 9.94699 25.6839 9.18393 25.1213 8.62132L21.3787 4.87868C20.8161 4.31607 20.053 4 19.2574 4H8C6.89543 4 6 4.89543 6 6V26C6 27.1046 6.89543 28 8 28Z",fill:"#757575"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26 10.9998V10.7426C26 9.94699 25.6839 9.18393 25.1213 8.62132L21.3786 4.87868C20.816 4.31607 20.053 4 19.2573 4H19.0203C19.5632 4.01081 20 4.4543 20 4.9998V7.9998C20 9.10437 20.8954 9.9998 22 9.9998H25C25.5522 9.9998 26 10.4475 26 10.9998Z",fill:"white",fillOpacity:"0.4"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 12H20C20.5523 12 21 12.4477 21 13V18C21 18.5523 20.5523 19 20 19H19.2618H18.2165H13.7835H12.7382H12C11.4477 19 11 18.5523 11 18V13C11 12.4477 11.4477 12 12 12ZM12.4339 20H12C10.8954 20 10 19.1046 10 18V13C10 11.8954 10.8954 11 12 11H20C21.1046 11 22 11.8954 22 13V18C22 19.1046 21.1046 20 20 20H19.5661L19.9783 21.3544C20.0587 21.6186 19.9098 21.8979 19.6456 21.9783C19.3814 22.0587 19.1021 21.9098 19.0217 21.6456L18.5208 20H13.4792L12.9783 21.6456C12.8979 21.9098 12.6186 22.0587 12.3544 21.9783C12.0903 21.8979 11.9413 21.6186 12.0217 21.3544L12.4339 20ZM13 13C12.4477 13 12 13.4477 12 14C12 14.5523 12.4477 15 13 15C13.5523 15 14 14.5523 14 14C14 13.4477 13.5523 13 13 13ZM13 16C12.4477 16 12 16.4477 12 17C12 17.5523 12.4477 18 13 18C13.5523 18 14 17.5523 14 17C14 16.4477 13.5523 16 13 16Z",fill:"white"}))}function y({inverted:e,size:r}){return null}function b(e){return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M1 3C1 1.89543 1.89543 1 3 1H13C14.1046 1 15 1.89543 15 3V13C15 14.1046 14.1046 15 13 15H3C1.89543 15 1 14.1046 1 13V3Z",fill:"var(--ramp-violet-500, #4D49FC)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00004 11.25L8.00001 11.25L8.00001 11.25H8L7.99988 11.25L7.99766 11.2496C7.99513 11.249 7.98856 11.2471 7.97767 11.2419C7.95511 11.2312 7.91447 11.2061 7.85955 11.1518C7.74554 11.0393 7.60847 10.8393 7.47718 10.533C7.24027 9.9802 7.07021 9.19338 7.04039 8.28571H8.95961C8.92979 9.19338 8.75973 9.9802 8.52282 10.533C8.39153 10.8393 8.25446 11.0393 8.14045 11.1518C8.08553 11.2061 8.04489 11.2312 8.02233 11.2419C8.01144 11.2471 8.00487 11.249 8.00234 11.2496L8.00012 11.25L8.00004 11.25ZM8.95961 7.71429H7.04039C7.07021 6.80662 7.24027 6.0198 7.47718 5.46701C7.60847 5.16066 7.74554 4.96067 7.85955 4.84815C7.91447 4.79395 7.95511 4.76884 7.97767 4.75807C7.98856 4.75287 7.99513 4.75104 7.99766 4.75044L7.99988 4.75001L8 4.75L8.00012 4.75001L8.00234 4.75044C8.00487 4.75104 8.01144 4.75287 8.02233 4.75807C8.04489 4.76884 8.08553 4.79395 8.14045 4.84815C8.25446 4.96067 8.39153 5.16066 8.52282 5.46701C8.75973 6.0198 8.92979 6.80662 8.95961 7.71429ZM9.70998 8.28571C9.6764 9.39582 9.44869 10.3809 9.10558 11.0571C10.2706 10.6357 11.126 9.56723 11.2376 8.28571H9.70998ZM11.2376 7.71429H9.70998C9.6764 6.60418 9.44869 5.61914 9.10558 4.94288C10.2706 5.3643 11.126 6.43277 11.2376 7.71429ZM6.29002 7.71429C6.3236 6.60418 6.55131 5.61914 6.89442 4.94288C5.72936 5.3643 4.874 6.43277 4.76239 7.71429H6.29002ZM4.76239 8.28571C4.874 9.56723 5.72936 10.6357 6.89442 11.0571C6.55131 10.3809 6.3236 9.39582 6.29002 8.28571H4.76239ZM12 8C12 5.79086 10.2091 4 8 4C5.79086 4 4 5.79086 4 8C4 10.2091 5.79086 12 8 12C10.2091 12 12 10.2091 12 8Z",fill:"white"})):1===e.size?i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_4_292)"},i.createElement("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H20C22.2091 0 24 1.79086 24 4V20C24 22.2091 22.2091 24 20 24H4C1.79086 24 0 22.2091 0 20V4Z",fill:"var(--ramp-violet-500, #4D49FC)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4653 17.7382C12.2321 17.9683 12.076 18 12 18C11.924 18 11.7679 17.9683 11.5347 17.7382C11.2972 17.5038 11.0375 17.1151 10.7978 16.5558C10.364 15.5435 10.0603 14.1232 10.008 12.5H13.992C13.9397 14.1232 13.636 15.5435 13.2022 16.5558C12.9625 17.1151 12.7028 17.5038 12.4653 17.7382ZM13.992 11.5H10.008C10.0603 9.87683 10.364 8.45646 10.7978 7.44417C11.0375 6.8849 11.2972 6.4962 11.5347 6.26184C11.7679 6.03173 11.924 6 12 6C12.076 6 12.2321 6.03173 12.4653 6.26184C12.7028 6.4962 12.9625 6.8849 13.2022 7.44417C13.636 8.45646 13.9397 9.87683 13.992 11.5ZM14.9925 12.5C14.9266 14.6763 14.4344 16.578 13.7096 17.7529C16.0368 17.0624 17.7734 14.9982 17.9795 12.5H14.9925ZM17.9795 11.5C17.7734 9.00183 16.0368 6.93761 13.7096 6.24707C14.4344 7.42203 14.9266 9.32368 14.9925 11.5H17.9795ZM9.00753 11.5C9.07336 9.32368 9.56556 7.42203 10.2904 6.24707C7.96316 6.93761 6.22663 9.00183 6.02054 11.5H9.00753ZM6.02054 12.5C6.22663 14.9982 7.96316 17.0624 10.2904 17.7529C9.56556 16.578 9.07336 14.6763 9.00753 12.5H6.02054ZM19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12Z",fill:"white"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_4_292"},i.createElement("rect",{width:"24",height:"24",fill:"white"})))):i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 32 32"},i.createElement("g",{clipPath:"url(#a)"},i.createElement("path",{fill:"var(--ramp-violet-500, #4D49FC)",d:"M0 4.571A4.571 4.571 0 0 1 4.571 0H27.43A4.571 4.571 0 0 1 32 4.571V27.43A4.571 4.571 0 0 1 27.429 32H4.57A4.571 4.571 0 0 1 0 27.429V4.57Z"})),i.createElement("defs",null,i.createElement("clipPath",{id:"a"},i.createElement("path",{fill:"#fff",d:"M0 0h32v32H0z"}))))}function v(e){return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:e.svgOptions?.viewBox||"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M1 3C1 1.89543 1.89543 1 3 1H13C14.1046 1 15 1.89543 15 3V13C15 14.1046 14.1046 15 13 15H3C1.89543 15 1 14.1046 1 13V3Z",className:l}),i.createElement("mask",{id:e.svgOptions?.id+"template_msk_sm",fill:"var(--color-icon-onfigjam, white)"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4H13V12H3V4ZM4 5H12V7.00004H4V5ZM12 8.00004H7V11H12V8.00004ZM6 11H4V8.00004H6V11Z"})),i.createElement("path",{d:"M4 5V4H3V5H4ZM12 5H13V4H12V5ZM12 7.00004V8.00004H13V7.00004H12ZM4 7.00004H3V8.00004H4V7.00004ZM3 4V3H2V4H3ZM13 4H14V3H13V4ZM13 12V13H14V12H13ZM3 12H2V13H3V12ZM12 8.00004H13V7.00004H12V8.00004ZM7 8.00004V7.00004H6V8.00004H7ZM7 11H6V12H7V11ZM12 11V12H13V11H12ZM6 11V12H7V11H6ZM4 11H3V12H4V11ZM4 8.00004V7.00004H3V8.00004H4ZM6 8.00004H7V7.00004H6V8.00004ZM4 6H12V4H4V6ZM11 5V7.00004H13V5H11ZM5 7.00004V5H3V7.00004H5ZM12 7.00004H7V9.00004H12V7.00004ZM6 8.00004V11H8V8.00004H6ZM7 12H12V10H7V12ZM13 11V8.00004H11V11H13ZM6 10H4V12H6V10ZM5 11V8.00004H3V11H5ZM4 9.00004H6V7.00004H4V9.00004ZM5 8.00004V11H7V8.00004H5ZM12 6.00004H4V8.00004H12V6.00004ZM4 12V4H2V12H4ZM3 5H13V3H3V5ZM12 4V12H14V4H12ZM13 11H3V13H13V11Z",fill:"var(--color-icon-onfigjam, white)",mask:`url(#${e.svgOptions?.id+"template_msk_sm"})`})):0===e.size?i.createElement("svg",{width:"32",height:"32",viewBox:e.svgOptions?.viewBox||"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:l},i.createElement("path",{d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z"}),i.createElement("mask",{id:e.svgOptions?.id+"template_msk_lg",fill:"var(--color-icon-onfigjam, white)"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 12H22V22H10V12ZM11 13H21V15H11V13ZM21 16H14V21H21V16ZM13 21V16H11V21H13Z"})),i.createElement("path",{d:"M21 13H22V12H21V13ZM11 13V12H10V13H11ZM21 15V16H22V15H21ZM11 15H10V16H11V15ZM10 12V11H9V12H10ZM22 12H23V11H22V12ZM22 22V23H23V22H22ZM10 22H9V23H10V22ZM21 16H22V15H21V16ZM14 16V15H13V16H14ZM14 21H13V22H14V21ZM21 21V22H22V21H21ZM13 21V22H14V21H13ZM13 16H14V15H13V16ZM11 16V15H10V16H11ZM11 21H10V22H11V21ZM21 12H11V14H21V12ZM22 15V13H20V15H22ZM10 13V15H12V13H10ZM21 15H14V17H21V15ZM13 16V21H15V16H13ZM14 22H21V20H14V22ZM22 21V16H20V21H22ZM14 21V16H12V21H14ZM13 15H11V17H13V15ZM10 16V21H12V16H10ZM11 22H13V20H11V22ZM11 16H21V14H11V16ZM11 22V12H9V22H11ZM22 11H10V13H22V11ZM23 22V12H21V22H23ZM10 23H22V21H10V23Z",fill:"var(--color-icon-onfigjam, white)",mask:`url(#${e.svgOptions?.id+"template_msk_lg"})`}),i.createElement("path",{d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z",fill:"var(--color-iconfigjamfilesecondary, #C599FF)"})):i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},i.createElement("g",{clipPath:"url(#clip0_3268_73108)"},i.createElement("rect",{width:"24",height:"24",rx:"4",fill:"#9747FF"}),i.createElement("mask",{id:"path-2-inside-1_3268_73108",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 7H18V9.7H8.96991H6V7ZM5 10.7V9.7V7V6H6H18H19V7V17V18H18H6H5V17V10.7ZM6 10.7H8.46991V17H6V10.7ZM9.46991 17H18V10.7H9.46991V17Z"})),i.createElement("path",{d:"M18 7H19V6H18V7ZM6 7V6H5V7H6ZM18 9.7V10.7H19V9.7H18ZM6 9.7H5V10.7H6V9.7ZM5 6V5H4V6H5ZM19 6H20V5H19V6ZM19 18V19H20V18H19ZM5 18H4V19H5V18ZM8.46991 10.7H9.46991V9.7H8.46991V10.7ZM6 10.7V9.7H5V10.7H6ZM8.46991 17V18H9.46991V17H8.46991ZM6 17H5V18H6V17ZM9.46991 17H8.46991V18H9.46991V17ZM18 17V18H19V17H18ZM18 10.7H19V9.7H18V10.7ZM9.46991 10.7V9.7H8.46991V10.7H9.46991ZM18 6H6V8H18V6ZM19 9.7V7H17V9.7H19ZM8.96991 10.7H18V8.7H8.96991V10.7ZM6 10.7H8.96991V8.7H6V10.7ZM5 7V9.7H7V7H5ZM6 10.7V9.7H4V10.7H6ZM4 7V9.7H6V7H4ZM4 6V7H6V6H4ZM6 5H5V7H6V5ZM18 5H6V7H18V5ZM19 5H18V7H19V5ZM20 7V6H18V7H20ZM20 17V7H18V17H20ZM20 18V17H18V18H20ZM18 19H19V17H18V19ZM6 19H18V17H6V19ZM5 19H6V17H5V19ZM4 17V18H6V17H4ZM4 10.7V17H6V10.7H4ZM8.46991 9.7H6V11.7H8.46991V9.7ZM9.46991 17V10.7H7.46991V17H9.46991ZM6 18H8.46991V16H6V18ZM5 10.7V17H7V10.7H5ZM9.46991 18H18V16H9.46991V18ZM19 17V10.7H17V17H19ZM18 9.7H9.46991V11.7H18V9.7ZM8.46991 10.7V17H10.4699V10.7H8.46991Z",fill:"white",mask:"url(#path-2-inside-1_3268_73108)"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_3268_73108"},i.createElement("rect",{width:"24",height:"24",fill:"white"}))))}function T(e){return m(e)}},482675:(e,r,n)=>{n.d(r,{S:()=>h,_:()=>_});var i=n(848318),a=n(897378),o=n(629612),s=n(536384),l=n.n(s),c=n(166365),d=n(442313),u=n(500276),p=n(660757),m=n(600086),h=(e=>(e[e.INFORMATION=0]="INFORMATION",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.FIGJAM=3]="FIGJAM",e[e.PLAIN=4]="PLAIN",e))(h||{});function _({color:e,icon:r,fullWidth:n,rounded:s=!0,text:h,dataTestId:_,padding:g,onDismiss:f}){return i.createElement("div",{"data-testid":_,style:u.sx.if(!s,{borderRadius:"0px"}).if(void 0!==g,{padding:g+"px"}).$,className:l()({[p.ZI]:0===e,[p.z3]:1===e,[p.$e]:2===e,[p.hh]:3===e,[p.pj]:4===e,[p.Ij]:n})},r&&i.isValidElement(r)?i.createElement("div",{className:p.G},r):i.createElement(c.B,{autosize:!0,className:p.G,width:"16px",height:"12px",svg:r??m.A}),i.createElement("p",null,h),f&&i.createElement("div",{className:p.YE},i.createElement(a.K,{"aria-label":(0,d.t)("common.dismiss"),onClick:f},i.createElement(o.f,null))))}},361515:(e,r,n)=>{n.d(r,{T:()=>o});var i=n(848318),a=n(856480);let o=i.memo(function(e){let r=e.locale||(0,a.Gq)().getPrimaryLocale(!1),n=i.useMemo(()=>new Intl.ListFormat(r,{style:e.formatStyle||"long",type:e.formatType||"conjunction"}),[r,e.formatStyle,e.formatType]),o=i.Children.toArray(e.children),s=n.formatToParts(o.map((e,r)=>`${r}`)).map((e,r)=>"element"===e.type?o[Number(e.value)]:"literal"===e.type?i.createElement("span",{key:`${r}_literal`},e.value):null);return i.createElement("span",{className:e.className||""},s)})},792647:(e,r,n)=>{n.d(r,{M3:()=>y,Nt:()=>I,bh:()=>v,c2:()=>T,dP:()=>E,lv:()=>w,yn:()=>S,z3:()=>b});var i=n(848318),a=n(425642),o=n(445777),s=n(988520),l=n(210709),c=n(575058),d=n(857188),u=n(303035),p=n(831932),m=n(983229);let h={preventScroll:!1,block:"nearest"},_={supportHorizontalNavigation:!0,simulateClickOnEnter:!0};class g{constructor({id:e,path:r,column:n,element:i,defaultFocusOptions:a=h,setIsFauxFocused:o,fauxClick:s,keyboardItemNavigationOptions:l=_}){this.id=e,this.path=r,this.column=n,this.element=i,this.defaultFocusOptions=a,this.setIsFauxFocused=o,this.fauxClick=s,this.navigationOptions=l}addToTree(e,r){this.tree=e,function(e,r){let n;let{path:i,column:a}=r;try{n=P(e,i,!0)}catch(e){l.k.warn("Failed to add item to KeyboardNavigationProvider tree: ",r);return}let o=a??0,s=n.items[o]?.element;s&&s!==r.element&&l.k.warn("Overwriting item in KeyboardNavigationProvider tree. Existing item: ",n.items[o]," New item: ",r),n.items[o]=r}(e,this),r&&this.id&&r.set(this.id,this)}removeFromTree(e){this.tree&&(function(e,r){let n,i;let{path:o,column:c}=r;try{n=(i=P(e,o)).items[c||0]??null}catch(e){l.k.warn("Item not found in KeyboardNavigationProvider tree: ",r);return}if(!n){l.k.warn("Item not found in KeyboardNavigationProvider tree: ",r);return}if(n.element!==r.element){l.k.warn("Item found in KeyboardNavigationProvider tree, but it does not match the expected item: ",n,r);return}if(i.items[c||0]=void 0,i.items.every(s.uy)){R(e,o.slice(0,-1)).children[o[o.length-1]]=void 0;for(let r=o.length-1;r>=1;r--){let n=o.slice(0,r),[i,l]=(0,a.Vs)(n),c=R(e,i);if(R(e,n).children.every(s.uy))c.children[l]=void 0;else break}e.children.every(s.uy)&&(e.children=[])}}(this.tree,this),this.tree=void 0),e&&this.id&&e.delete(this.id)}focus(e=this.defaultFocusOptions){this.element.focus({preventScroll:!0}),e.preventScroll||this.element.scrollIntoView(e)}blur(){this.element.blur()}fauxFocus(e=this.defaultFocusOptions){this.setIsFauxFocused(!0,this),e.preventScroll||this.element.scrollIntoView(e)}fauxBlur(){this.setIsFauxFocused(!1,this)}simulateClick(){this.fauxClick?this.fauxClick():this.element.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}getItemAbove(){return this.tree&&O(this.tree,this,"up")}getItemBelow(){if(!this.tree)return null;let e=O(this.tree,this,"down")||null;for(;e&&e.navigationOptions.skipOnDownNavigation;)e=e.getItemBelow();return e}getItemToTheLeft(){return this.tree&&L(this.tree,this,"left")}getItemToTheRight(){if(!this.tree)return null;let e=L(this.tree,this,"right")||null;for(;e&&e.navigationOptions.skipOnRightNavigation;)e=e.getItemToTheRight();return e}}let f=i.createContext(null),E=i.forwardRef(function({onKeyDown:e,allowVim:r=!1,disabled:n,overrideDown:a,overrideUp:o,overrideLeft:s,overrideRight:l,allowHorizontalNavigationWhileInputFocused:c=!1,useKeyNavFauxFocusSync:d,useFocusOnly:p,useDisplayContents:h,stopPropagationOnEventHandle:_=!1,...g},E){let y=i.useRef({type:"parent",children:[]}),b=i.useRef(new Map),v=i.useRef(null),A=i.useCallback(e=>{v.current===e&&(v.current=null)},[]),C=i.useCallback(e=>{v.current=e},[]),N=i.useRef(null),L=i.useRef(null),O=i.useRef(u.lQ),R=i.useCallback(e=>{e===N.current&&(N.current=null,O.current(),O.current=u.lQ)},[]),P=i.useCallback((e,r)=>{N.current&&R(N.current),N.current=e,O.current=r},[R]),k=i.useCallback(e=>{_&&e.stopPropagation(),e.preventDefault()},[_]),F=i.useCallback(n=>{let i=v.current,d=N.current,u=M(n),m=!(n.metaKey||n.ctrlKey||n.altKey||n.shiftKey)&&c;if(T(n,r)){if(d&&!p){k(n);let e=D(y.current,d,o);e?e?.fauxFocus():d.getItemAbove()?.fauxFocus()}else if(i){k(n);let e=D(y.current,i,o);e?e?.focus():i.getItemAbove()?.focus()}}else if(I(n,r)){if(d&&!p){k(n);let e=D(y.current,d,a);e?e?.fauxFocus():d.getItemBelow()?.fauxFocus()}else if(i){k(n);let e=D(y.current,i,a);e?e?.focus():i.getItemBelow()?.focus()}else L.current&&L.current.fauxFocus()}else if(S(u,r,m)){if(d&&d.navigationOptions.supportHorizontalNavigation&&!p){k(n);let e=D(y.current,d,s);e?e?.fauxFocus():d.getItemToTheLeft()?.fauxFocus()}else if(i){k(n);let e=D(y.current,i,s);e?e?.focus():i.getItemToTheLeft()?.focus()}}else if(w(u,r,m)){if(d&&d.navigationOptions.supportHorizontalNavigation&&!p){k(n);let e=D(y.current,d,l);e?e?.fauxFocus():d.getItemToTheRight()?.fauxFocus()}else if(i){k(n);let e=D(y.current,i,l);e?e?.focus():i.getItemToTheRight()?.focus()}}else"Enter"===u?d&&!p&&(k(n),d.navigationOptions.simulateClickOnEnter&&d.simulateClick()):"Escape"===u&&(i||d)&&(k(n),i&&i.blur(),d&&d.fauxBlur());e?.(n)},[c,r,e,p,o,a,s,l,k]),x=i.useMemo(()=>({tree:y.current,lookupMap:b.current,onFocusItem:C,onBlurItem:A,onFauxFocusItem:P,onFauxBlurItem:R,fauxBlurItem:()=>N.current?.fauxBlur(),blurItem:()=>v.current?.blur(),setDefaultFauxFocusedItem:e=>{L.current||(L.current=e)},fauxFocusDefaultItem:()=>{L.current?.fauxFocus()},useKeyNavFauxFocusSync:d}),[C,A,P,R,d]);return i.createElement(f.Provider,{value:x},i.createElement(m.D8,{style:h?{display:"contents"}:void 0,onKeyDown:n?e:F,forwardedRef:E,...g}))});function y({path:e,column:r=null,id:n,defaultFocusOptions:a,onFocus:o,onBlur:l,onFauxFocus:d,onFauxBlur:u,fauxClick:p,disabled:m,navigationOptions:h}){let _=(0,c.zN)(e),E=(0,c.zN)(a),y=(0,c.zN)(h);if(0===_.length)throw Error("Path must be non-empty");if(_.some(e=>e<0))throw Error("All path indices must be non-negative");if(null!=r&&r<0)throw Error("Column must be non-negative");let[b,v]=i.useState(void 0),[T,I]=i.useState(!1),[S,w]=i.useState(!1),A=i.useRef(null),{tree:C,lookupMap:N,onFocusItem:L,onBlurItem:O,onFauxFocusItem:R,onFauxBlurItem:P,setDefaultFauxFocusedItem:D,useKeyNavFauxFocusSync:M}=(0,s.sR)(i.useContext(f),"Must use `useKeyboardNavigationItem` inside `<KeyboardNavigationProvider>");i.useEffect(()=>{if(b&&!m){let e=()=>I(!0),r=()=>I(!1);return b.addEventListener("focus",e),b.addEventListener("blur",r),b===document.activeElement&&e(),()=>{b.removeEventListener("focus",e),b.removeEventListener("blur",r),b===document.activeElement&&r()}}},[m,b]);let k=i.useCallback(e=>{w(r=>(r&&(u?.(),P(e)),!1))},[u,P]),F=i.useCallback(e=>{w(r=>(r||(d?.(),R(e,()=>{null!==A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{k(e)},0)})),!0))},[k,d,R]),x=i.useCallback((e,r)=>{e?F(r):k(r)},[F,k]);i.useEffect(()=>()=>{null!==A.current&&clearTimeout(A.current)},[]);let U=i.useMemo(()=>null==b||m?null:new g({id:n,path:_,column:r,element:b,defaultFocusOptions:E,setIsFauxFocused:M?x:w,fauxClick:p,keyboardItemNavigationOptions:y}),[b,m,n,_,r,E,M,x,p,y]);return i.useEffect(()=>{if(U)return U.addToTree(C,N),U.navigationOptions.fauxFocusByDefault&&D(U),()=>{U.removeFromTree(N),U.navigationOptions.fauxFocusByDefault&&D(null)}},[U,N,D,C]),i.useEffect(()=>{if(U&&T)return o?.(),L(U),()=>{l?.(),O(U)}},[U,T,o,l,L,O]),i.useEffect(()=>{if(!M&&U&&S)return d?.(),R(U,()=>{w(!1)}),()=>{u?.(),P(U)}},[U,S,d,u,R,P,M]),{setKeyboardNavigationElement:v,keyboardNavigationItem:U,isFocused:T,isFauxFocused:S}}function b(e="real"){let{blurItem:r,fauxBlurItem:n}=(0,s.sR)(i.useContext(f),"Must use `useBlurFocusedItem` inside `<KeyboardNavigationProvider>");return i.useCallback(()=>{switch(e){case"real":r();break;case"faux":n();break;default:(0,o.xb)(e)}},[r,n,e])}function v({preventScroll:e}={}){let{tree:r}=(0,s.sR)(i.useContext(f),"Must use `useFocusFirstItem` inside `<KeyboardNavigationProvider>");return i.useCallback(()=>{let n=function e(r){if("leaf"===r.type)return r.items.find(e=>null!=e)??null;for(let n of r.children)if(n){let r=e(n);if(r)return r}return null}(r);n?.focus({preventScroll:e})},[e,r])}function T(e,r){let n=M(e),i=(0,d.vN)(e,d.xH.CONTROL),a=p.Ay.mac&&i;return"ArrowUp"===n||"KeyK"===n&&r&&A()||a&&"KeyP"===n}function I(e,r){let n=M(e),i=(0,d.vN)(e,d.xH.CONTROL),a=p.Ay.mac&&i;return"ArrowDown"===n||"KeyJ"===n&&r&&A()||a&&"KeyN"===n}function S(e,r,n=!1){return"ArrowLeft"===e&&C(n)||"KeyH"===e&&r&&A()}function w(e,r,n=!1){return"ArrowRight"===e&&C(n)||"KeyL"===e&&r&&A()}function A(){return!N(document.activeElement)}function C(e){let r=document.activeElement;return!N(r)||!!e||(r instanceof HTMLDivElement?""===r.textContent:""===r.value)}function N(e){return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)||e instanceof HTMLDivElement&&"true"===e.contentEditable}function L(e,{path:r,column:n},i){if(null==n)return;let o=P(e,r);return("left"===i?a.lq:a.M0)(o.items,n)||O(e,{path:r,column:"left"===i?1/0:-1},"left"===i?"up":"down")}function O(e,{path:r,column:n},i){for(let o=r.length-1;o>=0;o--){let s=r.slice(0,o),l=r[o],c=R(e,s),d=("up"===i?a.lq:a.M0)(c.children,l);if(d){let e=("up"===i?function e(r){if("leaf"===r.type)return r;let n=(0,a.lq)(r.children,r.children.length);if(n)return e(n);throw Error("Expected a node but got nothing")}:function e(r){if("leaf"===r.type)return r;let n=(0,a.M0)(r.children,-1);if(n)return e(n);throw Error("Expected a node but got nothing")})(d);return(0,a.qg)(e.items,n||0)}}}function R(e,r,n=!1){for(let i of r){let r=e.children[i];if(r){if("leaf"===r.type)throw Error("Expected a parent but got a leaf");e=r}else if(n){let r={type:"parent",children:[]};e.children[i]=r,e=r}else throw Error("Expected a parent but got nothing")}return e}function P(e,r,n=!1){let[i,o]=(0,a.Vs)(r),s=R(e,i,n),l=s.children[o];if(l){if("parent"!==l.type)return l;throw Error("Expected a parent but got a leaf")}if(n){let e={type:"leaf",items:[]};return s.children[o]=e,e}throw Error("Expected a leaf but got nothing")}function D(e,r,n){try{var i,a;let o=n?.(r);return o&&(i=o.path,a=o.column,P(e,i).items[a??0])}catch(e){}}function M(e){return e.code??e.key}},600627:(e,r,n)=>{n.d(r,{S:()=>o});var i=n(848318),a=n(457693);class o extends i.PureComponent{render(){let e=["\u2318","\u2325","\u21E7","\u2303"];return i.createElement("span",{className:this.props.className},this.props.shortcut.split("").map((r,n)=>{let o=-1!==e.indexOf(r)?a.C:a.G;return i.createElement("span",{key:n,className:o},r)}))}}o.displayName="KeyboardShortcut"},116111:(e,r,n)=>{(0,n(848318).createContext)(!1)},367009:(e,r,n)=>{n.d(r,{n:()=>i.o});var i=n(161620);n(848318),n(536384),n(91888),n(5573)},161620:(e,r,n)=>{n.d(r,{o:()=>i});var i,a=n(611504);(e=>{e.set=(0,a.NC)("BLOCKED_UI_LOADING_INDICATOR_SET"),e.remove=(0,a.NC)("BLOCKED_UI_LOADING_INDICATOR_REMOVE")})(i||(i={}))},360589:(e,r,n)=>{n.d(r,{JR:()=>o,Qp:()=>c,Wi:()=>l});var i=n(848318),a=n(333571),o=(e=>(e.SHIMMER="shimmer",e.SHIMMER_ON_MENU="shimmer_on_menu",e.LIGHT_SHIMMER="light_shimmer",e.NO_SHIMMER="no_shimmer",e))(o||{});let s=e=>{switch(e){case"shimmer":default:return a._J;case"light_shimmer":return a.QH;case"shimmer_on_menu":return a.Sw;case"no_shimmer":return}};function l(e){return i.createElement("div",{style:{...e.style??{},opacity:e.opacity?`${e.opacity}%`:"100%"},className:`${"shimmer_on_menu"===e.animationType?a.ky:a.KQ} ${e.primary?a.lx:""} ${e.className||""}`,"data-testid":e.dataTestId},i.createElement("div",{className:s(e.animationType)}))}function c(e){return i.createElement("div",{style:{...e.style??{},opacity:e.opacity?`${e.opacity}%`:"100%"},className:`${a.GE} ${e.primary?a.lx:""} ${e.className||""}`,"data-testid":e.dataTestId},i.createElement("div",{className:s(e.animationType)}))}},583120:(e,r,n)=>{n.d(r,{x:()=>c});var i=n(848318),a=n(536384),o=n.n(a);n(808471);var s=n(17755),l=n(538562);function c({loaded:e,loadingSkeletonElement:r,showElementBeforeLoaded:n,children:a}){let c=i.useRef(e);return i.createElement("div",{className:s.s.grid.$},(e||n)&&i.createElement("div",{className:o()(s.s.gridRowEnd1.gridColumnEnd1.$)},a),i.createElement("div",{className:o()(s.s.eventsNone.gridRowEnd1.gridColumnEnd1.overflowHidden.$,{[l.X]:e,[s.s.opacity1.$]:!c.current})},r))}},473889:(e,r,n)=>{n.d(r,{a_:()=>_,dW:()=>h,kt:()=>u,nt:()=>m,qc:()=>p});var i=n(848318),a=n(536384),o=n.n(a),s=n(166365),l=n(498055),c=n(976727),d=n(62299);class u extends i.Component{render(){let e=l.PG,r=l.q5;switch(this.props.size){case"medium":e=l.$g,r=l.Mn;break;case"large":e=l.Pu,r=l.OZ;break;case"custom":e=null,r=null}return i.createElement("span",{className:o()(l.zr,e,this.props.shouldMatchTextColor?l.K_:l.h,this.props.className||""),"data-testid":this.props.testId},this.props.cssBacked?i.createElement("span",{className:o()(l.WL,r)}):this.props.imageBacked?i.createElement("img",{alt:"Loading",className:l.yM,src:"data:image/svg+xml;base64,"+btoa(c.A)}):i.createElement(s.B,{svg:this.props.altIcon||c.A,className:l.yM,autosize:!this.props.altIcon,dataTestId:"loading-spinner"}))}}function p(e){return i.createElement("div",{className:l.F},i.createElement(u,{...e}))}function m(){return i.createElement("div",{className:l.F},i.createElement(u,{size:"large"}))}function h(e){return i.createElement(u,{imageBacked:!0,...e})}u.displayName="LoadingSpinner";class _ extends i.PureComponent{render(){return i.createElement("span",{className:`${l.uz} ${this.props.className||""}`},i.createElement(s.B,{svg:d.A,className:l.yM}))}}_.displayName="BlueLoadingSpinner"},469956:(e,r,n)=>{n.d(r,{R:()=>b});var i=n(848318),a=n(356505),o=n(536384),s=n.n(o),l=n(579020),c=n(423995),d=n(379338),u=n(831932),p=n(975512),m=n(442313),h=n(180423),_=n(155651);let g="mobile_download_prompt--mobilePromptTitle--7Tgsn text--fontPos13--xW8hS text--_fontBase--QdLsd",f="mobile_download_prompt--mobilePromptOptionTitle--mMUYW text--fontPos13--xW8hS text--_fontBase--QdLsd",E="mobile_download_prompt--mobilePromptOptionImage--Cp9zK",y="mobile_download_prompt_dismissed";function b(e){let{isCompact:r}=e,n=u.aR?"https://apps.apple.com/us/app/figma-mirror/id1152747299#":"https://play.google.com/store/apps/details?id=com.figma.mirror",o=(0,c.UG)(),g=!r&&!!e.renderBlockingPrompt,[b,I]=i.useState(!g),[S,w]=i.useState(!g);i.useEffect(()=>{null===o.get(y)&&(I(!1),w(!1))},[o,g]);let A=()=>{g||(I(!0),(0,l.sx)("mobile_web_mobile_app_download_prompt_dismissed",{userId:e.userIdForTracking}),setTimeout(()=>{w(!0)},300),o.set(y,!0))};return null!==o.get(y)?null:i.createElement(_.fu,{name:"Mobile Download Prompt"},i.createElement("div",{className:s()({"mobile_download_prompt--overlay--OzW6J":!0,"mobile_download_prompt--overlayClosed--2FWpY":b,"mobile_download_prompt--overlayAnimateEnd--dBvI0":S}),style:{transitionDuration:"300ms"},onClick:A},i.createElement("div",{className:s()("mobile_download_prompt--mobilePromptContainer--FKz5e","mobile_download_prompt--mobileDownloadPromptContainer--FaI33",{"mobile_download_prompt--mobileDownloadPromptContainerClosed--DHusv":b,"mobile_download_prompt--mobileDownloadPromptContainerFullHeightBlocking--B100f":g}),onClick:e=>{e.stopPropagation()}},i.createElement("div",{className:s()("mobile_download_prompt--mobilePromptDescriptionContainer--1PhoH",{"mobile_download_prompt--fullHeightPrompt--U6KWw":g})},r?i.createElement(T,null):i.createElement(v,{renderBlockingPrompt:g??!1})),i.createElement("hr",{className:s()({"mobile_download_prompt--mobilePromptHR--UpOqS":!0,"mobile_download_prompt--fullWidthHR--B-2i1":g})}),i.createElement("div",{className:"mobile_download_prompt--mobilePromptGrid--Mvqf-"},i.createElement("img",{className:E,src:(0,d.ck)("249f0f055b922ecef6bffc592a8420e7e6eddcea"),alt:(0,m.t)("file_browser.mobile_prompt.app_image_alt")}),i.createElement("div",null,i.createElement("h3",{className:f},(0,m.tx)("file_browser.mobile_prompt.app_title")),i.createElement("p",{className:"mobile_download_prompt--mobilePromptOptionDescription--APlZp text--fontPos11--2LvXf text--_fontBase--QdLsd"},g?(0,m.tx)("file_browser.mobile_prompt.app_description_new"):(0,m.tx)("file_browser.mobile_prompt.app_description"))),i.createElement(p.pW,{size:"lg",trackingProperties:{userId:e.userIdForTracking,appLink:n,trackingDescriptor:h.c.MOBILE_WEB_MOBILE_APP_DOWNLOAD_PROMPT_CLICKED},width:"fill",href:n},(0,m.tx)("file_browser.mobile_prompt.app_action")),!g&&i.createElement(i.Fragment,null,i.createElement("img",{className:E,src:(0,d.ck)("741698fed49afa5e8f3becdd906e66d32c8e7fae"),alt:(0,m.t)("file_browser.mobile_prompt.browser_image_alt")}),i.createElement("div",null,i.createElement("h3",{className:f},(0,m.tx)("file_browser.mobile_prompt.browser_title"))),i.createElement(a.Pw,{onClick:A,variant:"secondary"},(0,m.tx)("file_browser.mobile_prompt.browser_action")))))))}function v(e){return i.createElement(i.Fragment,null,i.createElement("img",{className:"mobile_download_prompt--mobilePromptImage--U2Yqj",src:(0,d.ck)("5f1dc37f397dbddf711d3d950bee5dd46c07fc72"),alt:(0,m.t)("file_browser.mobile_prompt.image_alt")}),i.createElement("div",{className:"mobile_download_prompt--mobilePromptTitleContainer--o8VIK"},i.createElement("h2",{className:g},e.renderBlockingPrompt?(0,m.tx)("file_browser.mobile_prompt.modal_title_blocking"):(0,m.tx)("file_browser.mobile_prompt.modal_title")),i.createElement("p",{className:"mobile_download_prompt--mobilePromptSubTitle--GFR67 text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.renderBlockingPrompt?(0,m.tx)("file_browser.mobile_prompt.modal_body_blocking"):(0,m.tx)("file_browser.mobile_prompt.modal_body"))))}function T(){return i.createElement(i.Fragment,null,i.createElement("h2",{className:g},(0,m.tx)("file_browser.mobile_prompt.modal_title_compact")))}},197945:(e,r,n)=>{n.d(r,{Cp:()=>D,IW:()=>P,Lp:()=>F,Qv:()=>M,jq:()=>x,ne:()=>R,o_:()=>U,xD:()=>k,y2:()=>B});var i=n(848318),a=n(897378),o=n(707387),s=n(629612),l=n(846153),c=n(536384),d=n.n(c),u=n(579020),p=n(730169),m=n(397579),h=n(379338),_=n(857188),g=n(654104),f=n(282424),E=n(166365),y=n(17755),b=n(442313),v=n(500276),T=n(542052),I=n(727341),S=n(964e3),w=n(503024),A=n(60546),C=n(956371),N=n(415132),L=n(187124),O=n(720598);function R(e,r){let n=i.useCallback(e=>{setTimeout(()=>{v.current&&(v.current.focus(),e&&v.current.select())},0)},[]),a=i.useCallback(()=>{v.current&&v.current.blur()},[]),o=i.useCallback(()=>{v.current&&v.current.select()},[]);i.useImperativeHandle(r,()=>({focus:n,blur:a,select:o,searchInput:v.current}));let[s,l]=i.useState(!1),[c,d]=i.useState(!1),[u,h]=i.useState(void 0),{onFocus:f,onClick:E}=e,y=i.useCallback(()=>{f&&f(),d(!0)},[f]),b=i.useRef(!1),v=i.useRef(null),T=i.useCallback(e=>{b.current=document.activeElement!==e.target},[]),I=i.useCallback(()=>{b.current&&(v.current?.select(),y())},[y]),w=i.useCallback(()=>{e.onBlur&&e.onBlur(),d(!1)},[e]),A=g.AF(e.recordingKey,"change",r=>{let n=r.target;e.onChange(n.value)}),C=g.v_(e.recordingKey,"keydown",r=>{if(!(e.isKeyDownHandled&&e.isKeyDownHandled(r))){if(" "===r.key&&r.stopPropagation(),r.keyCode===_.Uz.ESCAPE){v.current?.blur();return}(0,S.jr)(r,S.W0.NO)}}),N=i.useCallback((e=!1)=>{e&&l(!0),n(),E&&E()},[n,E]),L=g.rf(e.recordingKey,"click",r=>{r.stopPropagation(),e.clearSearch(),l(!1),n()}),O=g.v_(e.recordingKey+".clear","keydown",r=>{r.stopPropagation(),e.clearSearch(),l(!1),n()}),R=(0,m.ZC)(e.isFocused);return i.useEffect(()=>{R||!0!==e.isFocused?!0===R&&!1===e.isFocused&&a():n()},[a,n,R,e.isFocused]),(0,p.h)(()=>{e.focusOnMount&&v.current&&(v.current.focus(),y()),e.selectTextOnMount&&v.current&&v.current.select()}),{loggedOutSearchBarActivated:s,inputFocused:c,placeholderWidth:u,setPlaceholderWidth:h,searchInputRef:v,onMouseDown:T,onMouseUp:I,onSearchClick:N,onClearSearchClick:L,onClearSearchKeyDown:O,onFocus:f,onBlur:w,onClick:E,onSearchKeyDown:C,onSearchChange:A}}let P=i.forwardRef((e,r)=>{let n=(0,I.GS)(),{searchInputRef:a,onMouseDown:s,onMouseUp:l,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:p,onSearchKeyDown:m,onSearchChange:h}=R(e,r),_=(0,A.ks)(),g=_?C.vq:C.rk;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${g} ${e.className||""}`},e.withUI3Icon?i.createElement(o.h,{className:e.iconClassName}):i.createElement(E.B,{className:e.iconClassName??C.qc,svg:N.A}),i.createElement(f.L,{ref:a,className:C.mn,dataTestId:"search-bar-input",disabled:e.disabled,maxInputLength:e.maxInputLength,onBlur:u,onChange:h,onClick:p,onFocus:d,onKeyDown:m,onMouseDown:s,onMouseUp:l,placeholder:e.placeholder||(0,b.t)("general.search"),spellCheck:!1,style:v.sx.if(e.hasTransparentBackground,v.sx.add({background:"transparent"})).if(_||e.smallFont,v.sx.if(n,v.sx.textBodyMedium,v.sx.font11.$)).$,value:e.query}),i.createElement(V,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:c,customClearSearchIcon:e.customClearSearchIcon,customContainerClassName:e.customClearSearchContainerClassName}))});i.forwardRef((e,r)=>{let n=(0,I.GS)(),{searchInputRef:a,onMouseDown:o,onMouseUp:s,onClearSearchClick:l,onFocus:c,onBlur:d,onClick:u,onSearchKeyDown:p,onSearchChange:m}=R(e,r),h=(0,A.ks)(),_=h?C.vq:C.rk;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${_} ${e.className||""}`},i.createElement("button",{onClick:e.onBack,className:y.s.colorBgSecondary.$},i.createElement(T.In,{icon:"chevron-left-32"})),i.createElement(f.L,{ref:a,className:C.mn,dataTestId:"search-bar-input",disabled:e.disabled,maxInputLength:e.maxInputLength,onBlur:d,onChange:m,onClick:u,onFocus:c,onKeyDown:p,onMouseDown:o,onMouseUp:s,placeholder:e.placeholder||(0,b.t)("general.search"),spellCheck:!1,style:v.sx.if(e.hasTransparentBackground,v.sx.add({background:"transparent"})).if(h||e.smallFont,v.sx.if(n,v.sx.textBodyMedium,v.sx.font11.$)).$,value:e.query}),i.createElement(V,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:l}))}),i.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:a,setPlaceholderWidth:o,searchInputRef:s,onMouseDown:l,onMouseUp:c,onSearchClick:d,onClearSearchClick:u,onFocus:p,onBlur:m,onClick:h,onSearchKeyDown:_,onSearchChange:g}=R(e,r),y=e.placeholder||(0,b.t)("general.search"),v=`${e.className||""} ${n?C.pp:C.MI}`;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:v},i.createElement(E.B,{className:C.MU,svg:N.A,onClick:()=>d()}),i.createElement(f.L,{ref:s,className:C.mn,onBlur:m,onChange:g,onClick:h,onFocus:p,onKeyDown:_,onMouseDown:l,onMouseUp:c,placeholder:y,spellCheck:!1,style:{width:n?void 0:a},value:e.query}),i.createElement("div",{className:C.ds,ref:e=>o(e?.getBoundingClientRect().width)},y),i.createElement(V,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:u}))}),i.forwardRef((e,r)=>{let n=i.createRef();return i.useImperativeHandle(r,()=>n.current),i.createElement("div",{className:C.$7,onMouseDown:()=>n.current?.focus()},i.createElement(P,{...e,smallFont:!0,hasTransparentBackground:!0,className:d()(y.s.wFull.$,e.className),ref:n}))});let D=i.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:a,searchInputRef:o,onMouseDown:s,onMouseUp:l,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:p,onSearchKeyDown:m,onSearchChange:h}=R(e,r),_=e.placeholder||(0,b.t)("general.search"),g=`${e.className||""} ${C.W1}`,y=e.query.length>0?C.p3:C.Rt;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:g,onMouseDown:e=>{s(e),e.target.matches("input")||e.preventDefault()},onMouseUp:l},i.createElement(E.B,{className:C.mh,svg:N.A}),i.createElement(f.L,{ref:o,className:y,onBlur:u,onChange:h,onClick:p,onFocus:d,onKeyDown:m,placeholder:_,spellCheck:!1,style:{width:n?void 0:a},value:e.query}),i.createElement(V,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:c}))}),M=i.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:a,setPlaceholderWidth:o,searchInputRef:s,onMouseDown:l,onMouseUp:c,onClearSearchClick:d,onFocus:p,onBlur:m,onClick:_,onSearchKeyDown:g,onSearchChange:E}=R(e,r);i.useEffect(()=>{u.az.trackDefinedEvent("search_experience.dead_code",{userId:h.Ay().user_data?.id,codeLocation:"SidebarSearchBar"})},[]);let y=e.placeholder||(0,b.t)("general.search"),v=`${e.className||""} ${C.Gh}`,I=e.query.length>0?C.r3:C.nP;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:v,onMouseDown:e=>{l(e),e.target.matches("input")||e.preventDefault()},onMouseUp:c},i.createElement(T.In,{icon:"search-32"}),i.createElement(f.L,{ref:s,className:I,onBlur:m,onChange:E,onClick:_,onFocus:p,onKeyDown:g,placeholder:y,spellCheck:!1,style:{width:n?void 0:a},value:e.query}),i.createElement("div",{className:C.lm,ref:e=>o(Math.max(50,e?.getBoundingClientRect().width))},y),i.createElement(V,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:d}))}),k=i.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:a,onMouseUp:o,onFocus:s,onBlur:l,onClick:c,onSearchKeyDown:d,onSearchChange:u}=R(e,r);return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:C.sb},i.createElement(f.L,{ref:n,className:C.vs,onBlur:l,onChange:u,onClick:c,onFocus:s,onKeyDown:d,onMouseDown:a,onMouseUp:o,placeholder:e.placeholder||(0,b.t)("general.search"),spellCheck:!1,value:e.query}),i.createElement(E.B,{className:C.Ck,svg:L.A,onClick:e.onSubmit}))}),F=i.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:a,onMouseUp:o,onClearSearchClick:s,onFocus:l,onBlur:c,onClick:u,onSearchKeyDown:p,onSearchChange:m}=R(e,r);return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:d()(e.className||C.HD,{[C.RT]:!e.extraSpacing,[C.qX]:e.extraSpacing,[C.Cs]:e.hideSearchIcon})},!e.hideSearchIcon&&i.createElement(E.B,{svg:O.A,className:C.nk}),i.createElement(f.L,{ref:n,className:e.query?C.CC:C.Vl,dataTestId:e.dataTestId,onBlur:c,onChange:m,onClick:u,onFocus:l,onKeyDown:p,onMouseDown:a,onMouseUp:o,placeholder:e.placeholder||(0,b.t)("design_systems.publishing_modal.search_placeholder"),spellCheck:!1,value:e.query}),i.createElement(V,{hideXIcon:e.hideXIcon,query:e.query,onClearSearchClick:s,recordingKey:g.Pt(e,"closeX")}))}),x=i.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:a,onMouseUp:o,onClearSearchClick:s,onFocus:l,onBlur:c,onClick:d,onSearchKeyDown:u,onSearchChange:p}=R(e,r);return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${C.ZG} ${e.className||""}`},i.createElement(E.B,{svg:O.A,className:C.MU}),i.createElement(f.L,{ref:n,className:C.uD,onBlur:c,onChange:p,onClick:d,onFocus:l,onKeyDown:u,onMouseDown:a,onMouseUp:o,placeholder:e.placeholder||(0,b.t)("general.search"),spellCheck:!1,style:e.hasTransparentBackground?{background:"transparent"}:void 0,value:e.query}),i.createElement(V,{hideXIcon:e.hideXIcon,query:e.query,onClearSearchClick:s,recordingKey:g.Pt(e,"clearSearch")}))}),U=i.forwardRef((e,r)=>{let{loggedOutSearchBarActivated:n,searchInputRef:a,onMouseDown:o,onMouseUp:s,onSearchClick:l,onClearSearchClick:c,onFocus:d,onBlur:p,onClick:m,onSearchKeyDown:_,onSearchChange:g}=R(e,r);return i.useEffect(()=>{u.az.trackDefinedEvent("search_experience.dead_code",{userId:h.Ay().user_data?.id,codeLocation:"LoggedOutSearchBar"})},[]),i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${C.ax} ${e.className||""}`},!n&&!e.query&&i.createElement("div",{className:C.JU,onClick:()=>l(!0)},i.createElement(E.B,{className:C.Qm,svg:L.A})),(n||!!e.query)&&i.createElement("div",{className:C.S_},i.createElement(f.L,{ref:a,autoFocus:!0,className:C.nA,onBlur:p,onChange:g,onClick:m,onFocus:d,onKeyDown:_,onMouseDown:o,onMouseUp:s,placeholder:e.placeholder||(0,b.t)("general.search"),spellCheck:!1,value:e.query}),i.createElement(V,{hideXIcon:!1,query:e.query,onClearSearchClick:c})))}),B=i.forwardRef((e,r)=>{let n=i.createRef();return i.useImperativeHandle(r,()=>n.current),i.createElement("div",{className:C.tL,style:e.styleOverrides,onMouseDown:()=>n.current?.focus()},i.createElement(P,{...e,smallFont:!0,className:d()(y.s.wFull.$,e.className),ref:n}))});function V({query:e,hideXIcon:r,withSmallXIcon:n=!1,onClearSearchClick:o,recordingKey:c,customClearSearchIcon:u,customContainerClassName:p}){return!e||r?null:i.createElement("div",{className:d()(C.i3,p)},i.createElement(a.K,{onClick:o,"aria-label":(0,b.t)("search.search_bar.clear"),recordingKey:c,htmlAttributes:{"data-tooltip-type":w.Ib.TEXT,"data-tooltip":(0,b.t)("search.search_bar.clear"),"data-testid":"clearSearchButton"}},u||(n?i.createElement(s.f,null):i.createElement(l.A,null))))}},97607:(e,r,n)=>{n.d(r,{NU:()=>m});var i=n(848318),a=n(493554),o=n(576716),s=n(390709),l=n(197809),c=n(775991),d=n(867397),u=n(376780),p=n(635547);function m({file:e,...r}){var n,m;let h=(0,a.Rs)(p.sMs,{key:e.key}),_=(n=e.editor_type,m=!!e.thumbnail_guid,n===u._Y.SLIDES?c.F.SLIDES:n===u._Y.WHITEBOARD?m?c.F.WHITEBOARD:c.F.DEFAULT_WHITEBOARD:m?c.F.DESIGN:c.F.DEFAULT_DESIGN);if((0,d.i4)(e)){if("loading"===h.status)return i.createElement(l.q,{...r});if(!h.transform(e=>!!e.file?.hasPermission).unwrapOr(!1))return i.createElement(o.N,{thumbnailType:_,...r})}return i.createElement(s.V,{key:e.key,thumbnailUrl:e.thumbnail_url_override??e.thumbnail_url,thumbnailType:_,clientMeta:e.client_meta,lastTouchedAt:e.touched_at??e.updated_at,...r})}},958951:(e,r,n)=>{n.d(r,{A:()=>u});var i=n(848318);n(629829);var a=n(166365),o=n(197809),s=n(775991),l=n(442313),c=n(255111),d=n(94342);function u({borderRadius:e,noBorder:r,size:n}){let u=i.createElement(a.B,{svg:c.A,className:"x3xsitq",svgWidth:"50px",svgHeight:"50px"}),p=i.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k"},i.createElement(a.B,{svg:d.A,className:"xayg1ih",svgWidth:"100px",svgHeight:"100px"}),i.createElement("div",{className:"x1n0bwc9 x9otpla"},(0,l.tx)("tile.offline_file_tile.offline_created_file")));return i.createElement(o.q,{borderRadius:e,noBorder:r,backgroundColor:"var(--color-bg-secondary)"},n===s.y.SMALL?u:p)}},390709:(e,r,n)=>{n.d(r,{V:()=>b});var i=n(848318),a=n(39773),o=n(536384),s=n.n(o),l=n(95650),c=n(782623),d=n(958951),u=n(197809),p=n(775991),m=n(17755),h=n(892327),_=n(992277),g=n(502255);let f=16/9;function E(e){return"#"+(0x1000000+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1)}let y=(0,a.eU)({});function b({thumbnailUrl:e,thumbnailType:r,lastTouchedAt:n,clientMeta:o,size:b,borderRadius:v,noBorder:T,addtlStyles:I,draggable:S}){let w=r!==p.F.DEFAULT_DESIGN&&r!==p.F.DEFAULT_WHITEBOARD&&r!==p.F.SLIDES&&r!==p.F.COOPER,{latestThumbnailUrl:A,smartBackgroundColor:C}=function({touchedAt:e,thumbnailUrl:r,needsSmartBackground:n}){let[o,s]=(0,a.fp)(y),c=!e||(0,l.A)(e).isBefore((0,l.A)().subtract(4,"seconds")),d=!n||r&&!!o[r],[u,p]=i.useState(c&&r&&d?r:null),h=i.useCallback(e=>{if(!n||o[e])p(e);else{let r=new Image;r.crossOrigin="anonymous",r.className=m.s.fixed.hidden.$,r.onload=()=>{let n=function(e){try{if(!e)return null;if((e.naturalWidth/e.naturalHeight).toFixed(3)===f.toFixed(3))return"transparent";let r=document.createElement("canvas"),n=r.getContext("2d");if(!n)return r.remove(),null;let{width:i,height:a}=e;r.width=i,r.height=a,n.drawImage(e,0,0,i,a);let o=n.getImageData(0,a/2,1,1).data,s=n.getImageData(i/2,0,1,1).data,l=n.getImageData(i,a/2,-1,1).data,c=n.getImageData(i/2,a,1,-1).data,d=E(o),u=E(s),p=E(l),m=E(c);return r.remove(),function(e){let r=new Map,n=null,i=0;for(let a of e){let e=(r.get(a)??0)+1;r.set(a,e),e>i&&(i=e,n=a)}return n}([d,u,p,m])}catch(r){return(0,g.$D)(_.e.WAYFINDING,r,{extra:{imageObject:e,"imageObject instanceof HTMLElement":e instanceof HTMLElement,"imageObject instanceof HTMLImageElement":e instanceof HTMLImageElement}}),null}}(r);n&&s(r=>({...r,[e]:n})),p(e),r.remove()},r.src=e,document.body.appendChild(r)}},[p,n,o,s]);i.useLayoutEffect(()=>{if(r){if(e){let n=(0,l.A)(e).diff((0,l.A)().subtract(4,"seconds"));if(n<=0){h(r);return}{let e=setTimeout(()=>{h(r)},n);return()=>clearTimeout(e)}}h(r)}else p(null)},[e,r,h]);let b=n&&u?o[u]:void 0;return{latestThumbnailUrl:u,smartBackgroundColor:b}}({thumbnailUrl:e,touchedAt:n,needsSmartBackground:w}),{thumbnailLoadError:N,onError:L}=function(e){let[{url:r,hasError:n},a]=i.useState({url:e,hasError:!1}),o=i.useCallback(()=>{a(({url:e})=>({url:e,hasError:!0}))},[]);return e!==r?(a({url:e,hasError:!1}),{thumbnailLoadError:!1,onError:o}):{thumbnailLoadError:n,onError:o}}(A);if(r===p.F.OFFLINE)return i.createElement(d.A,{size:b,borderRadius:v,noBorder:T});let O=r!==p.F.SLIDES?(0,h.C)(o):void 0,R=r===p.F.DEFAULT_DESIGN||r===p.F.DEFAULT_WHITEBOARD||r===p.F.COOPER;return i.createElement(u.q,{borderRadius:v,backgroundClassName:s()({"thumbnail--whiteboardBackground--NqVbL":r===p.F.WHITEBOARD||r===p.F.DEFAULT_WHITEBOARD,"thumbnail--checkerboardBackground--Q3H9I":r===p.F.DEFAULT_DESIGN&&(!O||"transparent"===O),"thumbnail--backgroundDefault--018Ph":r===p.F.PROTOTYPE||r===p.F.SLIDES||r===p.F.SITES&&!(w&&C)&&(!O||"transparent"===O)}),noBorder:T,backgroundColor:w?C:O},null!==A&&!N&&i.createElement(c.oW,{src:A,alt:"",onError:L,draggable:!!S,className:s()(m.s.hFull.wFull.$,"thumbnail--thumbnailContain---m6Py",{[m.s.p10.$]:R&&b!==p.y.SMALL,[m.s.p4.$]:R&&b===p.y.SMALL,[m.s.py12.$]:R&&r===p.F.COOPER,[m.s.px6.$]:R&&r===p.F.COOPER}),crossOrigin:"anonymous",style:I}))}},197809:(e,r,n)=>{n.d(r,{q:()=>l});var i=n(848318),a=n(536384),o=n.n(a),s=n(17755);function l({backgroundColor:e,backgroundClassName:r,borderRadius:n,noBorder:a,children:l}){return i.createElement("div",{"data-testid":"thumbnail-container",className:o()(s.s.hFull.wFull.borderBox.if(!a,s.s.b1.bSolid.colorBorder).overflowHidden.$,{[s.s.bRadius2.$]:2===n,[s.s.bRadius4.$]:4===n,[s.s.bRadius6.$]:6===n,[s.s.bRadius8.$]:8===n},r),style:e?{backgroundColor:e}:void 0},i.createElement("div",{className:"thumbnail_container--aspectRatio--Q7gu8"},l))}},775991:(e,r,n)=>{n.d(r,{F:()=>a,y:()=>i});var i=(e=>(e.SMALL="small",e.DEFAULT="default",e))(i||{}),a=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEFAULT_DESIGN="default_design",e.DEFAULT_WHITEBOARD="default_whiteboard",e.OFFLINE="offline",e.SLIDES="slides",e.PROTOTYPE="prototype",e.SITES="sites",e.COOPER="cooper",e))(a||{})},93600:(e,r,n)=>{n.d(r,{L:()=>g});var i=n(848318),a=n(513886),o=n(411132),s=n(536384),l=n.n(s),c=n(654104),d=n(166365),u=n(291499),p=n(279531),m=n(99033),h=n(769773);let _=e=>e.stopPropagation();i.forwardRef((e,r)=>i.createElement(a.o,{eventListeners:["onClick"]},i.createElement(g,{...e,children:void 0,recordingKey:e.recordingKey,forwardedRef:r}),e.children));class g extends c.uA{constructor(){super(...arguments),this.wrapperRef=i.createRef(),this.buttonRef=i.createRef(),this.setButtonRef=e=>{(0,p.cZ)(this.buttonRef,e),(0,p.cZ)(this.props.forwardedRef,e)},this.onClick=c.cZ(this,"click",e=>{this.props.onClick?.(e)}),this.onKeyDown=e=>{"Escape"===e.key&&(e.preventDefault(),this.wrapperRef.current?.blur(),this.buttonRef.current?.blur()),this.props.enabled&&!this.props.hidden&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),this.props.onClick(e))}}render(){let e,r="";r=this.props.selected?m.wH:this.props.enabled?m.Sn:m.r9,this.props.isUI3&&this.props.ui3Icon?e=this.props.ui3Icon:this.props.useSvgNode?e=this.props.svgNode?i.createElement("span",null,this.props.svgNode):null:this.props.svg&&(e=i.createElement(u.t,{svg:this.props.svg,fallbackSvg:this.props.fallbackSvg,useOriginalSrcFills_DEPRECATED:this.props.useOriginalSrcFills_DEPRECATED,className:this.props.svgStyle}));let n=i.createElement(i.Fragment,null,!this.props.hidden&&e,this.props.text&&i.createElement("span",{className:this.props.textStyle||(this.props.svg?m.Pf:m.Qq)},this.props.text),this.props.showIndicator&&i.createElement("span",{className:this.props.indicatorStyle?this.props.indicatorStyle:m.q3}),this.props.showChevron&&(this.props.isUI3?i.createElement("div",{className:m.VI},i.createElement(o.O,null)):this.props.positionOnChevron?i.createElement("div",{className:m.FH,ref:this.props.chevronRef},i.createElement(d.B,{svg:h.A,className:l()(m.cN,m.Ot)})):i.createElement(d.B,{svg:h.A,className:m.cN})),this.props.children);return i.createElement("button",{ref:this.setButtonRef,"aria-controls":this.props["aria-controls"],"aria-expanded":this.props["aria-expanded"],"aria-haspopup":this.props["aria-haspopup"],"aria-label":this.props.ariaLabel,className:l()(r,this.props.narrow?m.sc:null,this.props.className),"data-fullscreen-intercept":!0,"data-onboarding-key":this.props.onboardingKey,"data-testid":this.props.dataTestId,"data-tooltip":this.props["data-tooltip"],"data-tooltip-offset-x":this.props.showChevron&&!this.props.isUI3&&this.props.positionOnChevron?8:0,"data-tooltip-shortcut-key":this.props["data-tooltip-shortcut-key"],"data-tooltip-show-right":this.props["data-tooltip-show-right"],"data-tooltip-slides":this.props["data-tooltip-slides"],"data-tooltip-submenu-open":this.props["data-tooltip-submenu-open"],"data-tooltip-type":this.props["data-tooltip-type"],id:this.props.id,onClick:_,onKeyDown:this.onKeyDown,onMouseDown:this.props.enabled&&!this.props.hidden?this.onClick:void 0},n)}}g.displayName="TopBarAction",g.defaultProps={enabled:!0,hidden:!1}},531007:(e,r,n)=>{n.d(r,{h:()=>u});var i=n(848318),a=n(536384),o=n.n(a),s=n(175196),l=n(55084),c=n(17755),d=n(503024);function u({as:e,text:r,className:n,elementRef:a,...u}){let p=i.useRef(null),m=(0,s.A)(a,p),h=(0,l.NG)({text:r,textRef:p,disabled:!r});return i.createElement(e||"div",{...u,className:o()(c.s.truncate.$,n),"data-tooltip-type":r&&h&&d.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-immediately":!0,ref:m},r)}},56077:(e,r,n)=>{n.d(r,{z:()=>o}),n(848318);var i=n(39773);n(508347);let a=(0,i.eU)(null);function o(){return null!==(0,i.md)(a)}},475927:(e,r,n)=>{n.d(r,{lW:()=>h}),n(848318),n(716544);var i=n(741419),a=n(39773),o=n(997649),s=n(508347),l=n(950738),c=n(119310);n(355323),n(409389);let d=(0,c.bt)(e=>e.mirror.appModel.topLevelMode),u=(0,c.bt)(e=>e.mirror.appModel.activeCanvasEditModeType),p=(0,c.bt)(e=>e.mirror.appModel.currentTool),m=(0,a.eU)(e=>e(p),(e,r,n)=>{!function(e){s.VU.get(e,"toolbar")()}(function(e){switch(e){case i.NLJ.SELECT:return"set-tool-default";case i.NLJ.HAND:return"set-tool-hand";case i.NLJ.SCALE:return"set-tool-scale";case i.NLJ.LASSO:return"set-tool-lasso";case i.NLJ.MULTISELECT:return"set-tool-multiselect";case i.NLJ.COMMENTS:return"set-tool-comments";case i.NLJ.FRAME:return"set-tool-frame";case i.NLJ.SLICE:return"set-tool-slice";case i.NLJ.SHAPE_STAR:return"set-tool-star";case i.NLJ.SHAPE_LINE:return"set-tool-line";case i.NLJ.SHAPE_ARROW:return"set-tool-arrow";case i.NLJ.SHAPE_ELLIPSE:return"set-tool-ellipse";case i.NLJ.SHAPE_RECTANGLE:return"set-tool-rectangle";case i.NLJ.SHAPE_REGULAR_POLYGON:return"set-tool-regular-polygon";case i.NLJ.VECTOR_PEN:return"set-tool-pen";case i.NLJ.VECTOR_PENCIL:return"set-tool-pencil";case i.NLJ.BRUSH:return(0,o.m)().ce_il_brush_tool?"set-tool-brush":"set-tool-default";case i.NLJ.ERASER:return"set-tool-eraser";case i.NLJ.HIGHLIGHTER:return"set-tool-highlighter";case i.NLJ.VECTOR_BEND:return"set-tool-bend";case i.NLJ.VECTOR_CUT:return"set-tool-cut";case i.NLJ.VECTOR_LASSO:return"set-tool-vector-lasso";case i.NLJ.VECTOR_PAINT_BUCKET:return"set-tool-paint-bucket";case i.NLJ.VECTOR_VAR_WIDTH_POINT:return"set-tool-var-width-point";case i.NLJ.SHAPE_BUILDER:return"set-tool-shape-builder";case i.NLJ.TYPE:return"set-tool-type";case i.NLJ.IMAGE_OR_VIDEO:return"place";case i.NLJ.STICKY:return"set-tool-sticky";case i.NLJ.STAMP:return"set-tool-stamp";case i.NLJ.SECTION:return"set-tool-section";case i.NLJ.TABLE:return"set-tool-table";case i.NLJ.CONNECTOR_ELBOWED:return"set-tool-connector-elbowed";case i.NLJ.CONNECTOR_STRAIGHT:return"set-tool-connector-straight";case i.NLJ.CODE_BLOCK:return"set-tool-code-block";case i.NLJ.WASHI_TAPE:return"set-tool-washi-tape";case i.NLJ.SHAPE_WHITEBOARD_SQUARE:return"set-tool-shape-whiteboard-square";case i.NLJ.SHAPE_WHITEBOARD_ELLIPSE:return"set-tool-shape-whiteboard-ellipse";case i.NLJ.SHAPE_WHITEBOARD_DIAMOND:return"set-tool-shape-whiteboard-diamond";case i.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP:return"set-tool-shape-whiteboard-triangle-up";case i.NLJ.SHAPE_WHITEBOARD_TRIANGLE_DOWN:return"set-tool-shape-whiteboard-triangle-down";case i.NLJ.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE:return"set-tool-shape-whiteboard-rounded-rectangle";case i.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT:return"set-tool-shape-whiteboard-parallelogram-right";case i.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT:return"set-tool-shape-whiteboard-parallelogram-left";case i.NLJ.SHAPE_WHITEBOARD_ENG_DATABASE:return"set-tool-shape-whiteboard-eng-database";case i.NLJ.SHAPE_WHITEBOARD_ENG_QUEUE:return"set-tool-shape-whiteboard-eng-queue";case i.NLJ.SHAPE_WHITEBOARD_ENG_FILE:return"set-tool-shape-whiteboard-eng-file";case i.NLJ.SHAPE_WHITEBOARD_ENG_FOLDER:return"set-tool-shape-whiteboard-eng-folder";case i.NLJ.SHAPE_WHITEBOARD_TRAPEZOID:return"set-tool-shape-whiteboard-trapezoid";case i.NLJ.SHAPE_WHITEBOARD_STAR:return"set-tool-shape-whiteboard-star";case i.NLJ.SHAPE_WHITEBOARD_SHIELD:return"set-tool-shape-whiteboard-shield";case i.NLJ.SHAPE_WHITEBOARD_HEXAGON:return"set-tool-shape-whiteboard-hexagon";case i.NLJ.SHAPE_WHITEBOARD_PENTAGON:return"set-tool-shape-whiteboard-pentagon";case i.NLJ.SHAPE_WHITEBOARD_OCTAGON:return"set-tool-shape-whiteboard-octagon";case i.NLJ.SHAPE_WHITEBOARD_PLUS:return"set-tool-shape-whiteboard-plus";case i.NLJ.SHAPE_WHITEBOARD_PREDEFINED_PROCESS:return"set-tool-shape-whiteboard-predefined-process";case i.NLJ.SHAPE_WHITEBOARD_MANUAL_INPUT:return"set-tool-shape-whiteboard-manual-input";case i.NLJ.SHAPE_WHITEBOARD_CHEVRON:return"set-tool-shape-whiteboard-chevron";case i.NLJ.SHAPE_WHITEBOARD_DOCUMENT_SINGLE:return"set-tool-shape-whiteboard-document-single";case i.NLJ.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE:return"set-tool-shape-whiteboard-document-multiple";case i.NLJ.SHAPE_WHITEBOARD_ARROW_LEFT:return"set-tool-shape-whiteboard-arrow-left";case i.NLJ.SHAPE_WHITEBOARD_ARROW_RIGHT:return"set-tool-shape-whiteboard-arrow-right";case i.NLJ.SHAPE_WHITEBOARD_SUMMING_JUNCTION:return"set-tool-shape-whiteboard-summing-junction";case i.NLJ.SHAPE_WHITEBOARD_OR:return"set-tool-shape-whiteboard-or";case i.NLJ.SHAPE_WHITEBOARD_SPEECH_BUBBLE:return"set-tool-shape-whiteboard-speech-bubble";case i.NLJ.SHAPE_WHITEBOARD_INTERNAL_STORAGE:return"set-tool-shape-whiteboard-internal-storage";case i.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS:return"set-tool-mindmap-tree-nucleus";case i.NLJ.ANNOTATE:return"set-tool-annotate";case i.NLJ.MEASURE:return"set-tool-measure";case i.NLJ.DROPPER_COLOR:return"toggle-dropper";case i.NLJ.SLIDES_POLL:return"set-tool-slides-poll";case i.NLJ.SLIDES_EMBED:return"set-tool-slides-embed";case i.NLJ.SLIDES_FACEPILE:return"set-tool-slides-facepile";case i.NLJ.SLIDES_ALIGNMENT_SCALE:return"set-tool-slides-alignment-scale";case i.NLJ.SLIDES_YOUTUBE:return"set-tool-slides-youtube";case i.NLJ.SLIDE_NUMBER:return"set-tool-slide-number";case i.NLJ.SITES_RESPONSIVE_SET:return"set-tool-sites-responsive-set";case i.NLJ.SITES_LINK:return"set-tool-sites-link";case i.NLJ.CODE_COMPONENT:return"set-tool-code-component";case i.NLJ.SITES_EMBED:return"set-tool-sites-embed";default:return console.warn("Unsupported tool",e),"set-tool-default"}}(n))}),h={readOnlyOverlayInfoAtom:l.xc,activeToolIdAtom:m,readOnlyTopLevelModeAtom:d,readOnlyEditModeTypeAtom:u}},757617:(e,r,n)=>{n.d(r,{rM:()=>u});var i=n(848318),a=n(716544),o=n(39773),s=n(697714),l=n(790355),c=n(731849);let d={closeOverlay:!0};function u({activeToolIdAtom:e,readOnlyOverlayInfoAtom:r,readOnlyTopLevelModeAtom:n,readOnlyEditModeTypeAtom:u},m){let h=(0,o.md)(r),[_,g]=(0,o.fp)(e),f=(0,o.md)(n),E=(0,o.md)(u),y=h?.type!==void 0,b=function(){let e=(0,a.wA)(),r=(0,c.M)();return(0,i.useCallback)(n=>{var i;if(!n?.overlayId){e(l.oB());return}let a=n.anchorClientRect;e(l.j7({type:(i=n.overlayId,`${p}${String(i)}`),data:{targetRect:{top:a.top,left:a.left+74,width:a.width},items:n.items,selectedToolId:n.selectedToolId,recordingKey:n.recordingKey}})),r||e(s.F.clearAll())},[e,r])}(),v=m||b,T=(0,i.useCallback)(()=>{v(null)},[v]);return(0,i.useEffect)(()=>{y||T()},[y,T]),{activeToolId:_,dropdownShown:h,openOverlay:e=>{v(e)},closeOpenOverlay:T,activateTool:(e,r=d)=>{g(e),r.closeOverlay&&T()},topLevelMode:f,editModeType:E}}let p="TOOLBAR_STATE_OVERLAY_DROPDOWN_TYPE_"},816910:(e,r,n)=>{n.d(r,{f:()=>c});var i=n(848318);n(149334);var a=n(379338),o=n(638702);n(166365),n(442313);var s=n(997894),l=n(193168);function c(){return i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.97616 0.163086C3.56555 0.163086 0 3.75492 0 8.19851C0 11.7505 2.28457 14.7572 5.45388 15.8214C5.85012 15.9014 5.99527 15.6485 5.99527 15.4357C5.99527 15.2495 5.9822 14.6109 5.9822 13.9456C3.76343 14.4246 3.30139 12.9877 3.30139 12.9877C2.94482 12.0565 2.41649 11.8171 2.41649 11.8171C1.69029 11.3249 2.46939 11.3249 2.46939 11.3249C3.27494 11.3781 3.69763 12.1497 3.69763 12.1497C4.41061 13.3735 5.55951 13.0277 6.02171 12.8148C6.08767 12.296 6.2991 11.9368 6.52359 11.7373C4.75396 11.551 2.89208 10.8592 2.89208 7.77272C2.89208 6.89468 3.20882 6.17631 3.71069 5.61762C3.63151 5.41811 3.35412 4.59313 3.79004 3.48896C3.79004 3.48896 4.46351 3.27607 5.98204 4.31378C6.63218 4.13789 7.30265 4.04841 7.97616 4.04766C8.64963 4.04766 9.33616 4.14088 9.97012 4.31378C11.4888 3.27607 12.1623 3.48896 12.1623 3.48896C12.5982 4.59313 12.3207 5.41811 12.2415 5.61762C12.7566 6.17631 13.0602 6.89468 13.0602 7.77272C13.0602 10.8592 11.1984 11.5376 9.41551 11.7373C9.70612 11.99 9.9569 12.4689 9.9569 13.2272C9.9569 14.3048 9.94384 15.1696 9.94384 15.4356C9.94384 15.6485 10.0891 15.9014 10.4852 15.8215C13.6545 14.757 15.9391 11.7505 15.9391 8.19851C15.9522 3.75492 12.3736 0.163086 7.97616 0.163086Z",fill:"#24292f",style:{fill:"var(--color-icon)"}}))}(0,a.ck)("aae0db2814117595e45cc509d52e79e7cc31333c"),(0,a.ck)("ae3807b6d650b52da20879078b85a0df23ee056a"),s.M4.Query({fetch:async e=>e?(await l.$.getFaviconForUrlProxy({url:(0,o.Jk)(e)})).data.meta??null:null})},272287:(e,r,n)=>{n.d(r,{n:()=>l});var i=n(848318),a=n(95650),o=n(856480),s=n(503024);function l(e){let r=function(e,r=(0,o.Gq)().getPrimaryLocale(!1)){return new Intl.DateTimeFormat(r,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}).format(a.A.utc(e).toDate())}(e.date,e.locale);return i.createElement("span",{"data-tooltip-type":s.Ib.TEXT,"data-tooltip":r},e.children)}},417081:(e,r,n)=>{n.d(r,{j:()=>x});var i=n(848318),a=n(379338),o=n(320409),s=n(39773),l=n(536384),c=n.n(l),d=n(322035),u=n(691191),p=n(831932),m=n(145015),h=n(166365),_=n(442313),g=n(180423),f=n(155651),E=n(481540),y=n(738460),b=n(326540),v=n(615297);let T="base_cookie_banner--container--nUKFl",I="base_cookie_banner--body--lPBYi",S="base_cookie_banner--actions--1LAhr",w="base_cookie_banner--dismiss--gdSyk",A="base_cookie_banner--container__community--oc-bP",C="base_cookie_banner--container__fileViewer--522-P",N="base_cookie_banner--dismissIcon--0O2Nl",L="base_cookie_banner--container__prototype--A1a4y",O="base_cookie_banner--container__auth--okjXC",R="base_cookie_banner--container__authOrCommunity--cqdOl";function P(e){let[r,n]=i.useState(e.showBanner),{trackEvent:a}=(0,f.j6)(),o=i.useRef(null),l=(0,s.Xr)(y.P4),d=(0,u.wY)(o)??u.cU,p=r?d.height+(e.verticalPadding||0):0;i.useEffect(()=>{l(p)},[p,l]);let b=async()=>{n(!1),await (0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1}),a(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_OUT})},P=async()=>{n(!1),await (0,y.L3)({consentRegion:"explicit",cookiesEnabled:!0}),a(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_IN})},D=async()=>{n(!1),await (0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1}),a(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_EXPLICIT_CONSENT_DISMISS})};return r?i.createElement("div",{className:c()(T,e.variant===v.a.COMMUNITY&&[R,A],e.variant===v.a.FILE_VIEWER&&C,e.variant===v.a.PROTOTYPE&&L,e.variant===v.a.AUTH&&[R,O]),role:"region",ref:o,"aria-label":(0,_.t)("cookies.consent_manager"),"data-testid":"cookie-banner"},i.createElement("div",{className:I},(0,_.tx)("cookies.explicit_consent_body")," ",i.createElement(m.Yo,{href:(0,_.dS)("/consent-preferences/"),target:"_blank",rel:"noreferrer"},(0,_.tx)("cookies.cookies_settings"))),i.createElement("div",{className:S},i.createElement(e.SecondaryButton,{onClick:b,"data-testid":"cookie-opt-out-button"},(0,_.tx)("cookies.do_not_allow_cookies")),i.createElement(e.PrimaryButton,{onClick:P,"data-testid":"cookie-opt-in-button"},(0,_.tx)("cookies.allow_all_cookies"))),i.createElement("div",{className:w},i.createElement("button",{onClick:D,type:"button","data-testid":"cookie-dismiss-button"},i.createElement(h.B,{className:N,svg:e.dismissIcon})))):e.persistentMessage&&i.createElement(f.fu,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function D(e){let r=(0,s.md)(y.Dr),n=!1;return(r===y.S6.UNLOADED&&(n=!0),r!==y.S6.YES||e.persistentMessage||(n=!0),(0,b.V)()&&(n=!0),a.Ay().user_data?.id&&(n=!0),((0,a.Ay)().is_embed||(0,d.GZ)())&&(n=!0),p.Ay.isMeetDevice&&(n=!0),i.useEffect(()=>{!n&&p.Ay.isIpadNative&&(0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1})},[n]),n||p.Ay.isIpadNative)?null:i.createElement(f.fu,{name:"Cookie Banner",properties:{consentRegion:"explicit"}},i.createElement(P,{...e,showBanner:r===y.S6.NO}))}function M(e){let[r,n]=i.useState(e.showBanner),[a,o]=i.useState(!1),l=i.useRef(null),d=i.useRef(),p=(0,s.Xr)(y.P4),_=(0,u.wY)(l)??u.cU,b=r?_.height+(e.verticalPadding||0):0;i.useEffect(()=>{p(b)},[b,p]);let{trackEvent:P}=(0,f.j6)(),D=i.useRef(P);D.current=P,i.useEffect(()=>()=>{clearTimeout(d.current)},[]);let M=i.useCallback(e=>{l.current?.contains(e.target)||(o(!0),window.removeEventListener("click",M),d.current=setTimeout(async()=>{if(!r)return null;n(!1),await (0,y.L3)({consentRegion:"implicit",cookiesEnabled:!0}),D.current(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})},1e4))},[r]),k=i.useCallback(async()=>{clearTimeout(d.current),a&&(await (0,y.L3)({consentRegion:"implicit",cookiesEnabled:!0}),D.current(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS}))},[a]);i.useEffect(()=>{if(r)return window.addEventListener("click",M),window.addEventListener("beforeunload",k),()=>{window.removeEventListener("beforeunload",k),window.removeEventListener("click",M)}},[r,M,k]);let F=async()=>{n(!1),window.removeEventListener("click",M),await (0,y.L3)({consentRegion:"implicit",cookiesEnabled:!1}),D.current(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_IMPLICIT_CONSENT_OPT_OUT})},x=async()=>{n(!1),window.removeEventListener("click",M),await (0,y.L3)({consentRegion:"implicit",cookiesEnabled:!0}),D.current(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})};return r?i.createElement("div",{className:c()(T,e.variant===v.a.COMMUNITY&&[R,A],e.variant===v.a.FILE_VIEWER&&C,e.variant===v.a.PROTOTYPE&&L,e.variant===v.a.AUTH&&[R,O]),role:"region","aria-label":"Consent Manager",ref:l,"data-testid":"cookie-banner"},i.createElement("div",{className:I},"This website uses cookies, pixel tags, and local storage for performance, personalization, and marketing purposes. Our use of some cookies may be considered a sale, sharing for behavioral advertising, or targeted advertising. For more, see our"," ",i.createElement(m.Yo,{rel:"noopener",target:"_blank",href:"/privacy/"},"privacy policy"),". ",i.createElement("b",null,"California Residents")," can learn how personal information is"," ",i.createElement(m.Yo,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"collected"),", including how it is"," ",i.createElement(m.Yo,{href:"/privacy/#purpose",rel:"noopener",target:"_blank"},"used"),", whether it is"," ",i.createElement(m.Yo,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"\u201Csold\u201D or \u201Cshared\u201D"),", and how long it is"," ",i.createElement(m.Yo,{href:"/privacy/#retention",rel:"noopener",target:"_blank"},"retained"),"."),i.createElement("div",{className:S},i.createElement(e.SecondaryButton,{onClick:F,"data-testid":"cookie-opt-out-button"},"Opt out")),i.createElement("div",{className:w},i.createElement("button",{onClick:x,type:"button","data-testid":"cookie-dismiss-button"},i.createElement(h.B,{className:N,svg:e.dismissIcon})))):e.persistentMessage&&i.createElement(f.fu,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function k(e){let r=(0,s.md)(y.Dr),n=!1;return(r===y.S6.UNLOADED&&(n=!0),r!==y.S6.YES||e.persistentMessage||(n=!0),(0,b.V)()&&(n=!0),a.Ay().user_data?.id&&(n=!0),((0,a.Ay)().is_embed||(0,d.GZ)())&&(n=!0),p.Ay.isMeetDevice&&(n=!0),i.useEffect(()=>{!n&&p.Ay.isIpadNative&&(0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1})},[n]),n||p.Ay.isIpadNative)?null:i.createElement(f.fu,{name:"Cookie Banner",properties:{consentRegion:"implicit"}},i.createElement(M,{...e,showBanner:r===y.S6.NO}))}var F=n(172808);let x=i.memo(function(){return"implicit"===(0,a.Ay)().consent_region?i.createElement(k,{variant:v.a.PROTOTYPE,dismissIcon:F.A,SecondaryButton:e=>i.createElement(o.$,{onClick:e.onClick,variant:"secondary","data-testid":e["data-testid"]},e.children)}):"explicit"===(0,a.Ay)().consent_region?i.createElement(D,{variant:v.a.PROTOTYPE,dismissIcon:F.A,PrimaryButton:e=>i.createElement(o.$,{onClick:e.onClick,variant:"primary","data-testid":e["data-testid"]},e.children),SecondaryButton:e=>i.createElement(o.$,{onClick:e.onClick,variant:"secondary","data-testid":e["data-testid"]},e.children)}):null})},882439:(e,r,n)=>{n.d(r,{$z:()=>d,Ih:()=>m,Me:()=>_,c:()=>p,e6:()=>u,lR:()=>h});var i=n(356505),a=n(376025),o=n(475020),s=n(897378),l=n(207520),c=n(155651);let d=(0,c.tf)(i.$n),u=(0,c.tf)(a.E),p=(0,c.tf)(i.WW),m=(0,c.tf)(i.IK),h=(0,c.tf)(i.Pw);(0,c.tf)(o.d);let _=(0,c.tf)(s.K);(0,c.tf)(l.f)},442313:(e,r,n)=>{n.d(r,{TT:()=>I,YD:()=>b,Yd:()=>v,dS:()=>S,qD:()=>E,t:()=>y,tx:()=>f});var i=n(848318),a=n(886593),o=n(425642),s=n(992277),l=n(157907),c=n(579020);n(141039);var d=n(379338),u=n(502255),p=n(529613),m=n(859672),h=n(53818),_=n(856480);let g=(0,h.D)((e,r)=>(0,_.Gq)().getContent(e,r));function f(e,...[r]){return i.createElement(E,{id:e,options:r})}let E=i.memo(function({id:e,options:r}){let n=(0,o.Bq)(g(e,r));if(!n||0===n.length)return null;let a=n.map((e,r)=>i.createElement(i.Fragment,{key:r},e));if(!(0,l.k)().i18n_wrapper_element)return i.createElement(i.Fragment,null,a);{let r=(0,d.b5)()?{"data-tx-id":e}:{};return i.createElement("i18n-text",{...r},a)}});function y(e,...[r]){return(0,o.Bq)(g(e,r)).join("")}function b(e,r){return y(e,r)}function v(e,r){return(0,_.Gq)().getTranslatedDynamicContent(e,r)}let T=(0,h.D)(async e=>{let r=document.getElementById("web"===e?"dictionaryUrl":"web_english"===e?"englishDictionaryUrl":"dbDictionaryUrl")?.getAttribute("href");if(r){let e=3,n=[200,100,0];do try{n[e-1]>0&&await new Promise(r=>setTimeout(r,n[e-1]));let i=await fetch(r);if(!i.ok)throw Error(`Unable to fetch dictionary: ${i.statusText}`);return await i.json()}catch(r){if(0==--e)throw r}while(e>0)}});async function I(e=!1,r=null){let n,i,o;window.customElements.get("i18n-text")||window.customElements.define("i18n-text",w,{});let l=r??(0,d.mm)();m.X.i18nLocale=l[0];try{let[r,a,l]=await Promise.all([(0,p.ZO)("fetchI18nPreloadDict",async()=>{n=await T("web")}).then(e=>e.duration).catch(e=>{(0,u.$D)(s.e.GROWTH_PLATFORM,e)}),(0,p.ZO)("fetchEnglishPreloadDict",async()=>{try{i=await T("web_english")}catch(n){if(function(){let e=navigator.userAgent;for(let r of["PetalBot","Naver","lin.ee"])if(e.includes(r))return!0;return!1}())return;let e="unknown",r=document.getElementById("englishDictionaryUrl")?.getAttribute("href");if(r){let n=r.split("/");e=n[n.length-1]}throw(0,c.sx)("english_entry_dict_failure",{message:"string"==typeof n?n:n instanceof Error?n.message:"Unknown",dictionary:e}),n}}).then(e=>e.duration),e?(0,p.ZO)("fetchI18nDbString",async()=>{o=await T("db")}).then(e=>e.duration):0]);r&&(m.X.i18nFetchPreloadedDictMs=Math.round(r)),m.X.i18nFetchPreloadedEnglishDictMs=Math.round(a),m.X.i18nFetchPreloadedDbDictMs=Math.round(l)}catch(e){throw console.warn(e),n=void 0,o=void 0,e}(0,_.lR)(l,a.cN.concat(),n,o,i)}function S(e,r=(0,_.Gq)().getPrimaryLocale(!1)){return r===a.hT.EN?e:`/${r}${e}`}(0,h.D)(async e=>{let r=3,n=[200,100,0];do try{n[r-1]>0&&await new Promise(e=>setTimeout(e,n[r-1]));let i=await fetch(e);if(!i.ok)throw Error(`Unable to fetch dictionary: ${i.statusText}`);return await i.json()}catch(e){if(0==--r)throw e}while(r>0)throw Error("Failed to fetch dictionary after multiple retries.")});class w extends HTMLElement{constructor(){super()}}},765285:(e,r,n)=>{n.d(r,{K:()=>g});var i=n(848318),a=n(468189),o=n(496108),s=n(536384),l=n.n(s),c=n(166365),d=n(17755),u=n(882439),p=n(190597),m=n(297691),h=(e=>(e[e.BUTTON=0]="BUTTON",e[e.ICON_BUTTON=1]="ICON_BUTTON",e[e.ICON_TEXT_BUTTON=2]="ICON_TEXT_BUTTON",e[e.CUSTOM=3]="CUSTOM",e[e.CUSTOM_BUTTON=4]="CUSTOM_BUTTON",e))(h||{});function _(e){switch(e.action.kind){case 0:return i.createElement(i.Fragment,null,e.action.displayText);case 1:return i.createElement(c.B,{svg:e.action.icon});case 2:return i.createElement(i.Fragment,null,i.createElement(c.B,{svg:e.action.icon,className:e.action.svgStyleClass,style:{alignSelf:"center",paddingRight:"5px"}}),i.createElement("div",null,e.action.displayText));default:return null}}function g(e){if(3===e.action.kind)return i.createElement("div",{className:l()(e.action.showOnMobile?null:m.az,e.action.hideOnDesktop?m.i0:null),key:e.action.key},e.action.element);let r="isLoading"in e.action&&!0===e.action.isLoading,n=i.createElement(u.e6,{className:l()(d.s.flex.itemsCenter.justifyCenter.$,e.action.showOnMobile?null:m.az,e.action.hideOnDesktop?m.i0:null,"styleClass"in e.action?e.action.styleClass:null,p.HM),key:e.action.key,htmlAttributes:{"data-test-id":"dataTestId"in e.action?e.action.dataTestId:void 0,"data-onboarding-key":"data-onboarding-key"in e.action?e.action["data-onboarding-key"]:void 0,"data-tooltip":"data-tooltip"in e.action?e.action["data-tooltip"]:void 0,"data-tooltip-type":"data-tooltip-type"in e.action?e.action["data-tooltip-type"]:void 0},innerText:"displayText"in e.action?e.action.displayText:void 0,onClick:"onClick"in e.action?e.action.onClick:void 0},r?i.createElement("span",{className:d.s.px4.$},i.createElement(a.k,null)):i.createElement(_,{action:e.action}));return e.action.editorThemeMode?i.createElement(o.v,{mode:e.action.editorThemeMode},n):n}},880336:(e,r,n)=>{n.d(r,{$:()=>o,W:()=>s});var i=n(848318),a=n(992444);class o{constructor(){this.singleTapTouchStartListeners={},this.singleTapTouchMoveListeners={},this.singleTapTouchEndListeners={},this.singleTapMouseDownListeners={},this.singleTapMouseUpListeners={},this.tapCallback=null,this.multiTapTouchStartListeners={},this.multiTapTouchEndListeners={},this.multiTapMouseDownListeners={},this.multiTapMouseUpListeners={},this.multiTapCallbacks={},this.multiTouchLongPressTouchStartListeners={},this.multiTouchLongPressTouchMoveListeners={},this.multiTouchLongPressTouchEndListeners={},this.multiTouchLongPressTouchCancelListeners={},this.multiTouchLongPressPointerDownListeners={},this.multiTouchLongPressPointerMoveListeners={},this.multiTouchLongPressPointerUpListeners={},this.multiTouchLongPressPointerCancelListeners={},this.multiTouchLongPressCallbacks=new Map}installTapGestureRecognizer(e,r){let n,i;this.tapCallback=r;let a=e=>{i=Date.now(),n=e},o=()=>{i=void 0,n=void 0},s=()=>{n&&i&&Date.now()-i<500&&(this.tapCallback?.(n),o())};this.replaceEventListener(e,"touchstart",e=>{1===e.touches.length&&a({x:e.touches[0].screenX,y:e.touches[0].screenY})},this.singleTapTouchStartListeners,1),this.replaceEventListener(e,"touchmove",e=>{if(1===e.touches.length&&n){let r=e.touches[0];this.didMoveTooMuch([{identifier:0,screenX:r.screenX,screenY:r.screenY}],{0:{screenX:n.x,screenY:n.y}},10)&&o()}else o()},this.singleTapTouchMoveListeners,1),this.replaceEventListener(e,"touchend",s,this.singleTapTouchEndListeners,1),this.replaceEventListener(e,"mousedown",e=>{a({x:e.screenX,y:e.screenY})},this.singleTapMouseDownListeners,1),this.replaceEventListener(e,"mouseup",s,this.singleTapMouseUpListeners,1)}updateTapGestureRecognizer(e,r){this.tapCallback?this.tapCallback=r:this.installTapGestureRecognizer(e,r)}uninstallTapGestureRecognizer(e){this.tapCallback&&(this.tapCallback=null,e.removeEventListener("touchstart",this.singleTapTouchStartListeners[1],!0),e.removeEventListener("touchmove",this.singleTapTouchMoveListeners[1],!0),e.removeEventListener("touchend",this.singleTapTouchEndListeners[1],!0),e.removeEventListener("mousedown",this.singleTapMouseDownListeners[1],!0),e.removeEventListener("mouseup",this.singleTapMouseUpListeners[1],!0))}numTapsInRecencyThreshold(e,r){let n=Date.now(),i=0;for(let a=e.length-1;a>=0;a--)if(Math.abs(e[a]-n)<r)i++;else break;return i}installMultiTapGestureRecognizer(e,r,n){this.multiTapCallbacks[r.numTaps]=n;let i=[],a=!1,o=()=>{let e=Date.now();if(i.push(e),a=this.numTapsInRecencyThreshold(i,500)===r.numTaps)i=[];else for(;i.length>r.numTaps;)i.shift()},s=()=>{a&&(this.multiTapCallbacks[r.numTaps]?.(),a=!1)};this.replaceEventListener(e,"touchstart",e=>{1===e.touches.length&&o()},this.multiTapTouchStartListeners,r.numTaps),this.replaceEventListener(e,"touchend",s,this.multiTapTouchEndListeners,r.numTaps),this.replaceEventListener(e,"mousedown",o,this.multiTapMouseDownListeners,r.numTaps),this.replaceEventListener(e,"mouseup",s,this.multiTapMouseUpListeners,r.numTaps)}updateMultiTapGestureRecognizer(e,r,n){this.multiTapCallbacks[r.numTaps]?this.multiTapCallbacks[r.numTaps]=n:this.installMultiTapGestureRecognizer(e,r,n)}installMultiTouchLongPressGestureRecognizer(e,r,n){this.multiTouchLongPressCallbacks.set(n,r);let i=null,o=null,s=e=>{if(null==o){for(let r of(o={},e))o[r.identifier]={screenX:r.screenX,screenY:r.screenY};i=setTimeout(()=>{let r;1===e.length&&(r={x:e[0].screenX,y:e[0].screenY}),this.multiTouchLongPressCallbacks.get(n)?.(r),a.Y5&&a.Y5.cancelPendingGestures&&a.Y5.cancelPendingGestures()},500)}},l=()=>{null!=i&&(clearTimeout(i),i=null,o=null)},c=e=>{e.length===n&&o?this.didMoveTooMuch(e,o,10)&&l():l()};this.replaceEventListener(e,"touchstart",e=>{e.touches.length===n?s(e.touches):l()},this.multiTouchLongPressTouchStartListeners,n),this.replaceEventListener(e,"touchmove",e=>c(e.touches),this.multiTouchLongPressTouchMoveListeners,n),this.replaceEventListener(e,"touchend",l,this.multiTouchLongPressTouchEndListeners,n),this.replaceEventListener(e,"touchcancel",l,this.multiTouchLongPressTouchCancelListeners,n),this.replaceEventListener(e,"pointerdown",e=>{1===n&&"touch"!==e.pointerType?s([{identifier:e.pointerId,screenX:e.screenX,screenY:e.screenY}]):l()},this.multiTouchLongPressPointerDownListeners,n),this.replaceEventListener(e,"pointermove",e=>{"touch"!==e.pointerType&&c([{identifier:e.pointerId,screenX:e.screenX,screenY:e.screenY}])},this.multiTouchLongPressPointerMoveListeners,n),this.replaceEventListener(e,"pointerup",l,this.multiTouchLongPressPointerUpListeners,n),this.replaceEventListener(e,"pointercancel",l,this.multiTouchLongPressPointerCancelListeners,n)}updateMultiTouchLongPressGestureRecognizer(e,r,n){this.multiTouchLongPressCallbacks.has(n)?this.multiTouchLongPressCallbacks.set(n,r):this.installMultiTouchLongPressGestureRecognizer(e,r,n)}uninstallMultiTouchLongPressGestureRecognizer(e,r){this.multiTouchLongPressCallbacks.has(r)&&(this.multiTouchLongPressCallbacks.delete(r),e.removeEventListener("touchstart",this.multiTouchLongPressTouchStartListeners[r],!0),e.removeEventListener("touchmove",this.multiTouchLongPressTouchMoveListeners[r],!0),e.removeEventListener("touchend",this.multiTouchLongPressTouchEndListeners[r],!0),e.removeEventListener("touchcancel",this.multiTouchLongPressTouchCancelListeners[r],!0),e.removeEventListener("pointerdown",this.multiTouchLongPressPointerDownListeners[r],!0),e.removeEventListener("pointermove",this.multiTouchLongPressPointerMoveListeners[r],!0),e.removeEventListener("pointerup",this.multiTouchLongPressPointerUpListeners[r],!0),e.removeEventListener("pointercancel",this.multiTouchLongPressPointerCancelListeners[r],!0))}replaceEventListener(e,r,n,i,a){i[a]&&e.removeEventListener(r,i[a],!0),i[a]=n,e.addEventListener(r,i[a],!0)}didMoveTooMuch(e,r,n){for(let i of e){let e=r[i.identifier];if(void 0===e||Math.hypot(e.screenX-i.screenX,e.screenY-i.screenY)>n)return!0}return!1}}let s=i.createContext(new o)},111085:(e,r,n)=>{n.d(r,{Z:()=>L});var i=n(848318),a=n(716544),o=n(320040),s=n(90741),l=n(126434),c=n(264933),d=n(885265),u=n(745017),p=n(904870),m=n(40830),h=n(401077),_=n(151006),g=n(961072),f=n(233605),E=n(622876),y=n(673906),b=n(157907),v=n(579020),T=n(921494),I=n(697714),S=n(57037),w=n(164963),A=n(814468),C=n(778427);let N={root:"visual-bell-root",button:"visual-bell-button",secondaryButton:"visual-bell-secondary-button",dismissButton:"visual-bell-dismiss-button",message:"visual-bell-message"};function L(e){let r=(0,b.k)().ext_plugin_notify_run_on_dequeue,n=(0,a.wA)(),{bell:s,queueDepth:l}=(0,T.R)(e=>({bell:e.visualBell[0],queueDepth:e.visualBell.length})),c=s?.onDequeue,d=s?.onDismiss,u=(0,i.useRef)(!1);(0,i.useEffect)(()=>()=>{r&&(c&&!u.current&&c(w.WX.DISMISS),u.current=!1)},[c,r]);let p=(0,i.useCallback)(e=>{"dismiss"===e&&d?.(),r&&(u.current||!c)||(u.current=!0,c?.(function(e){switch(e){case"dismiss":return w.WX.DISMISS;case"timeout":return w.WX.TIMEOUT;case"action":return w.WX.ACTION_BUTTON_CLICKED}}(e))),n(I.F.dequeue({}))},[n,c,d,r]),m=(0,a.d4)(e=>s?.progressKey?e.progress[s.progressKey]:void 0),h=s?(0,S.zC)(s,m):null,_=s?.count?i.createElement(o.y_,null,s.count):null,[g,f]=(0,S.hB)(s||null),E=function(e,r){let n=performance.now(),a=(0,i.useMemo)(()=>n,[e]);return(0,i.useMemo)(()=>e?(0,A.L)(e,r):1/0,[e,r])-(n-a)}(s,l),y=function(e,r){let n=(0,i.useRef)(void 0),a=!!e&&!e.delay,[o,s]=(0,i.useState)(a);return((0,i.useEffect)(()=>{if(e?.delay){let n=setTimeout(()=>s(!0),e.delay);return r||e.button||v.az.trackDefinedMetric("fpl.missing_toast_message",{bellId:e?.id,bellType:e.type,description:"delay exists but no message was included",visualBellInstance:"fpl_visual_bell"}),()=>clearTimeout(n)}},[e,r]),e!==n.current)?(n.current=e,s(a),r||e?.button||v.az.trackDefinedMetric("fpl.missing_toast_message",{bellId:e?.id,bellType:e?.type,description:"Remembered bell current does not match but no message exists",visualBellInstance:"deprecated_fpl_visual_bell"}),a):o}(s,h),C=!!s?.role,L=i.createElement(o.bL,{timeout:E,onClose:p,variant:s?.error?"danger":void 0,htmlAttributes:{"data-preferred-theme":"dark","data-testid":N.root}},s?.icon&&i.createElement(R,{error:s.error,iconShape:s.iconShape,iconURL:s.iconURL,progress:m,icon:s.icon}),i.createElement(o.QB,{htmlAttributes:{"data-testid":N.message}},i.createElement("i18n-text",null,h),i.createElement("i18n-text",null,_)),g&&i.createElement(O,{key:`${s.id}-primary`,bellId:s.id,"data-testid":N.button,...g}),f&&i.createElement(O,{key:`${s.id}-secondary`,bellId:s.id,"data-testid":N.secondaryButton,...f}),(s?.onDismiss||s?.error)&&i.createElement(o.Rz,{htmlAttributes:{"data-testid":N.dismissButton}})),P=!y||!h&&!_&&!s?.button,D=(0,b.k)().fpl_hide_missing_alert?P:!y;return(i.useEffect(()=>{s&&!D&&v.az.trackDefinedEvent("fpl.visual_bell_shown",{bellId:s.id,bellType:s.type,bellMessage:s.messageComponentKey?s.messageComponentKey:s.i18n?`VisualBellTxMessageType.${s.i18n.id}`:s.message?s.message:"[unknown]"})},[s,D]),e.positioner)?i.createElement(e.positioner,{offscreen:D,srOnly:C,shouldRequestMobileNativeBottomOffset:!!s},L):L}function O({bellId:e,editScope:r,text:n,action:a,Initialize:s,...l}){let c=s?.(),d=(0,i.useMemo)(()=>{let n=r=>a(r,e,c);return r&&(n=y.nc.user(r,n)),n},[a,e,r,c]);return i.createElement(o.rA,{...l,action:d},n)}function R(e){return"ui3"===(0,E.DP)().version&&e.icon!==w.zX.FROM_URL?i.createElement(P,{icon:e.icon,progress:e.progress}):i.createElement(C.H,{...e})}function P({icon:e,progress:r}){switch(e){case w.zX.CHECK:return i.createElement(s.g,null);case w.zX.GREEN_CHECK:return i.createElement(l.g,{style:{"--color-icon":"var(--color-icon-success)"}});case w.zX.CHECK_WITH_CIRCLE:return i.createElement(c.W,null);case w.zX.EXCLAMATION:return i.createElement(d.r,null);case w.zX.UNDO:case w.zX.RETURN_TO_INSTANCE:return i.createElement(u.E,null);case w.zX.SPINNER:case w.zX.IMAGE_BACKED_SPINNER:return i.createElement(o.y$,null);case w.zX.PROGRESS:return i.createElement(o.ke,{progressFraction:(0,S.OT)(r)});case w.zX.FROM_URL:return i.createElement(p.w,null);case w.zX.NOTES_ON_RECTANGLE:return i.createElement(m.w,null);case w.zX.STACK_SELECTION:return i.createElement(h.v,null);case w.zX.CLOSE_FILLED:return i.createElement(_.C,{style:{"--color-icon":"var(--color-icon-danger)"}});case w.zX.EYEDROPPER:return i.createElement(g.G,null);case w.zX.BRUSH:return i.createElement(f.g,null);case w.zX.NONE:case void 0:return i.createElement(i.Fragment,null)}}},10347:(e,r,n)=>{n.d(r,{sL:()=>s});var i=n(157907),a=n(217727);let o=e=>{let r=new URL(e);return((0,i.k)().notif_file_url_cleanup?(0,a.PU)(r.pathname.split("/")[1]):"file"===r.pathname.split("/")[1])&&r.hash.length>1&&"#-1"!==r.hash};function s(e){if(!1===o(e))return null;let r=new URL(e),n=r.pathname.split("/");return n.length<3?null:{fileKey:n[2],threadId:r.hash.slice(1),deeplink:e}}},902166:(e,r,n)=>{n.d(r,{lA:()=>a});var i=n(39773);(0,i.eU)(!1),(0,i.eU)(null,()=>{}),(0,i.eU)({}),n(733787).K_,n(954398).o,n(34417).j,n(131180).KL,n(182188).P4;let a=n(140469).lA},861182:(e,r,n)=>{n.d(r,{B9:()=>s,LW:()=>l,Ri:()=>a,X3:()=>o,t_:()=>i}),n(944582).e,n(394966).UR,n(394966).kO;let i=n(394966).t_;n(924222).gz;let a=n(14243).Ri;n(710562).fM,n(924222).si;let o=n(710562).X3,s=n(710562).B9,l=n(710562).LW;n(944582).d},330328:(e,r,n)=>{n.d(r,{sy:()=>i}),n(439087).O,n(463862).e,n(546240).X,n(776785)._t,n(723127).ts;let i=n(35377).s;n(485155).G},786074:(e,r,n)=>{function i(e){return!!e.find(e=>e.event?.interactionType==="ON_CLICK"&&e.actions?.find(e=>"NAVIGATE"===e.navigationType||"NONE"===e.connectionType||"URL"===e.connectionType))??!1}function a(e){return e.some(e=>e.event?.interactionType==="ON_CLICK"&&e.actions?.length===1&&(e.actions[0]?.connectionType==="URL"||e.actions[0]?.navigationType==="NAVIGATE"||e.actions[0]?.connectionType==="NONE"))}n.d(r,{p4:()=>i,zL:()=>a})},939824:(e,r,n)=>{n(267670)},851929:(e,r,n)=>{n.d(r,{b:()=>i,zQ:()=>a}),n(848318),n(891627),n(716544),n(741419),n(897392),n(179703),n(39773),n(536384),n(541525),n(654104),n(182059),n(17755),n(442313),n(697714),n(998636),n(662275),n(45584),n(950738),n(166917),n(3220),n(205397),n(487497),n(597817),n(939824);let i=430,a=1024;function o(e){let{title:r,width:n,disabled:i,onClick:a,icon:o}=e;return React.createElement(ddown.Option,{disabled:i,onClick:i?void 0:a,recordingKey:joinKeys("breakpointDropdownAction",r)},React.createElement("div",{className:cx_DEPRECATED.flex.flexRow.justifyBetween.wFull.alignCenter.$},React.createElement("div",{className:cx_DEPRECATED.flex.flexRow.itemsCenter.gap4.$},o,r),n&&React.createElement("div",{className:cx_DEPRECATED.colorTextMenuTertiary.textBodyMedium.contentCenter.$},n)))}},825068:(e,r,n)=>{n.d(r,{BG:()=>s,Ct:()=>o});var i=n(822685),a=n(871128);async function o(e){return(await l(e)).files}function*s(e,r){for(let n of Array.from(e).sort((e,r)=>!e.nodePosition&&r.nodePosition?-1:e.nodePosition&&!r.nodePosition?1:e.nodePosition||r.nodePosition?(e.nodePosition?.y??0)-(r.nodePosition?.y??0):0)){if(!(0,i.gu)()&&!r)break;yield(async()=>{let e=await l([n]);if((0,i.gu)()||r)return await new Promise(e=>setTimeout(e,0)),e})()}}async function l(e){let r={},n={cacheHits:0,fillAssets:0,generatedSvgs:0,generatedImages:0,flattenedFills:0};return await Promise.all(e.map(async e=>{let i=await a.po.instance.getAssetData(e);if(i.data)switch(r[e.filename]=i.data,i.fromCache&&n.cacheHits++,e.type){case"GENERATED_ASSET":"SVG"===e.exportSetting.format?n.generatedSvgs++:n.generatedImages++;break;case"PAINT_ASSET":n.fillAssets++;break;case"PAINT_FILL_ASSET":n.flattenedFills++}})),{files:r,totals:n}}},382507:(e,r,n)=>{n.d(r,{JW:()=>B,N0:()=>v});var i=n(848318),a=n(546504),o=n(124895),s=n(991807),l=n(741419),c=n(897392),d=n(157907),u=n(39773),p=n(579020),m=n(6819),h=n(17755),_=n(442313),g=n(525518),f=n(620331);function E({text:e}){return i.createElement("span",{className:h.s.colorText.$},e)}let y=[{name:"layout/frame/rotated-child-with-stretch-constraints",category:"position",label:(0,_.tx)("sites.lint.layout/frame/rotated-child-with-stretch-constraints"),description:(0,_.tx)("sites.lint.layout/frame/rotated-child-with-stretch-constraints-description",{topBottom:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.constraints_panel.select.top_plus_bottom")}),leftRight:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.constraints_panel.select.left_plus_right")})}),recommendations:[{label:(0,_.tx)("sites.lint.set-position-constraints-center"),action:l.$XN.SET_POSITION_CONSTRAINTS_CENTER},{label:(0,_.tx)("sites.lint.remove-rotation"),action:l.$XN.REMOVE_ROTATION}],isViolation:e=>{let r="STRETCH"===e.horizontalConstraint||"STRETCH"===e.verticalConstraint,n=!!e.parentNode,i=e.rotation;return r&&n&&Math.abs(i)>.01}},{name:"styles/autolayout-negative-item-spacing",label:(0,_.tx)("sites.lint.styles/autolayout-negative-item-spacing"),description:(0,_.tx)("sites.lint.styles/autolayout-negative-item-spacing-description",{gap:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.gap")})}),category:"autoLayout",recommendations:[],isViolation:e=>{if("FRAME"!==e.type||"NONE"===e.stackMode||e.stackSpacing>=0)return!1;let r="STRETCH"===e.stackChildAlignSelf&&e.childrenNodes.every(e=>e.stackChildPrimaryGrow>0),n=e.childrenNodes.some(e=>e.isGroup),i=e.childrenNodes.some(r=>"FRAME"===r.type&&"NONE"!==r.stackMode&&(r.stackMode===e.stackMode&&"RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===r.stackPrimarySizing||"RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===r.stackCounterSizing));return r||n||i||"WRAP"===e.stackWrap}},{name:"layout/autolayout-only-absolutely-positioned-children",category:"autoLayout",label:(0,_.tx)("sites.lint.layout/resizing-position-conflict"),description:(0,_.tx)("sites.lint.layout/autolayout-only-absolutely-positioned-children-description",{hugContents:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.stack_panel.al.hug")}),absolute:i.createElement(E,{text:(0,_.tx)("sites.panel.position_panel.absolute")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-autolayout"),action:l.$XN.REMOVE_AUTOLAYOUT}],isViolation:e=>"NONE"!==e.stackMode&&0!==e.childCount&&("RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===e.stackPrimarySizing||"RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===e.stackCounterSizing)&&e.childrenNodes.every(e=>"ABSOLUTE"===e.stackPositioning)},{name:"styles/autolayout-baseline-alignment",category:"autoLayout",label:(0,_.tx)("sites.lint.styles/autolayout-baseline-alignment"),description:(0,_.tx)("sites.lint.styles/autolayout-baseline-alignment-description",{alignTextBaseline:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.stack_panel.align_text_baseline")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-alignment"),action:l.$XN.REMOVE_BASELINE_ALIGNMENT}],isViolation:e=>{if("HORIZONTAL"!==e.stackMode||"BASELINE"!==e.stackCounterAlignItems)return!1;let r=e=>e.childrenNodes.some(e=>"TEXT"===e.type||"FRAME"===e.type&&r(e));return e.childrenNodes.some(e=>"FRAME"===e.type&&r(e))}},{name:"scrolling/scrolling-enabled-with-clipped-content",category:"autoLayout",label:(0,_.tx)("sites.lint.scrolling/scrolling-enabled-with-clipped-content"),description:(0,_.tx)("sites.lint.scrolling/scrolling-enabled-with-clipped-content-description",{clipContent:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.transform_panel.clip_content")})}),recommendations:[{label:(0,_.tx)("sites.lint.set-clip-content"),action:l.$XN.SET_CLIP_CONTENT},{label:(0,_.tx)("sites.lint.remove-scrolling"),action:l.$XN.REMOVE_SCROLLING}],isViolation:e=>!e.isResponsiveNode&&"NONE"!==e.scrollDirection&&!0===e.frameMaskDisabled},{name:"layout/autolayout/rotated-frame-with-hug-contents",category:"autoLayout",label:(0,_.tx)("sites.lint.layout/resizing-position-conflict"),description:(0,_.tx)("sites.lint.layout/rotated-frame-with-hug-contents-description",{hugContents:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.stack_panel.al.hug")}),absolute:i.createElement(E,{text:(0,_.tx)("sites.panel.position_panel.absolute")}),fixed:i.createElement(E,{text:(0,_.tx)("sites.panel.position_panel.fixed")})}),recommendations:[{label:(0,_.tx)("sites.lint.fix-issue"),action:l.$XN.SET_AUTOLAYOUT_SIZING_FIXED}],isViolation:e=>{let r="ABSOLUTE"===e.stackPositioning,n="STRETCH"===e.horizontalConstraint||"MIN"===e.horizontalConstraint||"MAX"===e.horizontalConstraint||"STRETCH"===e.verticalConstraint||"MIN"===e.verticalConstraint||"MAX"===e.verticalConstraint,i="NONE"!==e.stackMode,a="RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===e.stackPrimarySizing||"RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===e.stackCounterSizing,o=Math.abs(e.rotation)>=.01;return r&&n&&i&&a&&o}},{name:"layout/autolayout-child-with-fill-and-rotation",category:"autoLayout",label:(0,_.tx)("sites.lint.layout/autolayout-child-with-fill-and-rotation"),description:(0,_.tx)("sites.lint.layout/autolayout-child-with-fill-and-rotation-description",{fill:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.fill.fill")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-fill-container"),action:l.$XN.REMOVE_FILL_CONTAINER},{label:(0,_.tx)("sites.lint.remove-rotation"),action:l.$XN.REMOVE_ROTATION}],isViolation:e=>!!e.parentNode&&"NONE"!==e.parentNode.stackMode&&"ABSOLUTE"!==e.stackPositioning&&("STRETCH"===e.stackChildAlignSelf||0!==e.stackChildPrimaryGrow)&&Math.abs(e.rotation)>=45&&135>=Math.abs(e.rotation)},{name:"layout/gap/space-between-legacy",category:"autoLayout",label:(0,_.tx)("sites.lint.version-out-of-date"),description:(0,_.tx)("sites.lint.version-out-of-date-description"),recommendations:[{label:(0,_.tx)("sites.lint.set-spacing-auto"),action:l.$XN.SET_AUTOLAYOUT_SPACING_AUTO}],isViolation:e=>"NONE"!==e.stackMode&&"SPACE_EVENLY"===e.stackPrimaryAlignItems},{name:"blendmode/plus-darker",category:"appearance",icon:i.createElement(o.N,null),label:(0,_.tx)("sites.lint.blendmode/plus-darker"),description:(0,_.tx)("sites.lint.blendmode/plus-darker-description",{multiply:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.blend_mode.multiply")})}),recommendations:[{label:(0,_.tx)("sites.lint.fix-issue"),action:l.$XN.USE_BLEND_MODE_MULTIPLY}],isViolation:e=>{let r="LINEAR_BURN";return e.blendMode===r||w(e,e=>e.blendMode===r)}},{name:"strokes/corner-smoothing",category:"appearance",icon:i.createElement(s.Q,null),label:(0,_.tx)("sites.lint.strokes/corner-smoothing"),description:(0,_.tx)("sites.lint.strokes/corner-smoothing-description",{cornerSmoothing:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.transform_panel.corner_smoothing")})}),recommendations:[{label:(0,_.tx)("sites.lint.fix-issue"),action:l.$XN.SET_CORNER_SMOOTHING_ZERO}],isViolation:e=>!!e.cornerSmoothing},{name:"text/vertical-trim",category:"typography",label:(0,_.tx)("sites.lint.text/vertical-trim"),description:(0,_.tx)("sites.lint.text/vertical-trim-description",{capHeight:i.createElement(E,{text:(0,_.tx)("type_settings.leading_trim.cap_height")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-vertical-trim"),action:l.$XN.REMOVE_VERTICAL_TRIM}],isViolation:e=>"TEXT"===e.type&&"CAP_HEIGHT"===e.leadingTrim},{name:"text/unsupported-fonts",category:"typography",label:(0,_.tx)("sites.lint.text/unsupported-fonts"),recommendations:[{label:(0,_.tx)("sites.lint.replace-font"),action:()=>{l.glU?.findMissingFontsAndShowPopoverWithScope(l.vhv.CURRENT_SELECTION),u.zl.set(f.o,!1)}}],description:(0,_.tx)("sites.lint.use-google-fonts",{fonts:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.font_picker.title")})}),isViolation:e=>{if("TEXT"!==e.type||e.isInImmutableFrame)return!1;let r=m.D.getState().fonts;return e.getRangeAllFontNames(0,e.characters.length).some(e=>{let n=r[e.family];if(!n)return!0;let i=Object.values(n).sort((e,r)=>(0,g.wG)(r)-(0,g.wG)(e));return!i[0]||i[0].source!==l.jXp.GOOGLE})}},{name:"text/mixed-line-heights",category:"typography",label:(0,_.tx)("sites.lint.text/mixed-line-heights-title"),description:(0,_.tx)("sites.lint.text/mixed-line-heights-description",{mixedLineHeights:i.createElement(E,{text:(0,_.tx)("sites.lint.text/mixed-line-heights")})}),recommendations:[],isViolation:e=>"TEXT"===e.type&&"mixed"===e.lineHeightOrMixed},{name:"styles/text-decoration-style",category:"typography",label:(0,_.tx)("sites.lint.styles/text-decoration-style"),description:(0,_.tx)("sites.lint.text-decoration-style-may-look-different"),recommendations:[],isViolation:e=>"UNDERLINE"!==e.textDecoration?!!e.textData?.styleOverrideTable?.some(r=>"UNDERLINE"===r.textDecoration&&(r.textDecorationStyle&&"SOLID"!==r.textDecorationStyle||"SOLID"!==e.textDecorationStyle)):"SOLID"!==e.textDecorationStyle||!!e.textData?.styleOverrideTable?.some(e=>e.textDecorationStyle&&"SOLID"!==e.textDecorationStyle)},{name:"text/stroke",category:"typography",label:(0,_.tx)("sites.lint.text/stroke"),description:(0,_.tx)("sites.lint.text/stroke-description"),recommendations:[{label:(0,_.tx)("sites.lint.remove-stroke"),action:l.$XN.REMOVE_STROKE}],isViolation:e=>"TEXT"===e.type&&A(e)},{name:"styles/video-fill",category:"fill",label:(0,_.tx)("sites.lint.styles/video"),description:(0,_.tx)("sites.lint.styles/video-fill-description"),recommendations:[{label:(0,_.tx)("sites.lint.remove-video"),action:l.$XN.REMOVE_VIDEO_FILL}],isViolation:e=>w(e,e=>"VIDEO"===e.type)},{name:"styles/texture-fill",category:"fill",label:(0,_.tx)("sites.lint.styles/texture-fill"),description:(0,_.tx)("sites.lint.styles/texture-fill-description"),recommendations:[{label:(0,_.tx)("sites.lint.remove-texture"),action:l.$XN.REMOVE_TEXTURE_FILL}],isViolation:e=>w(e,e=>"PATTERN"===e.type||"NOISE"===e.type)},{name:"styles/strokes-blend-mode",category:"stroke",label:(0,_.tx)("sites.lint.styles/strokes-blend-mode"),description:(0,_.tx)("sites.lint.styles/strokes-blend-mode-description",{normal:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.blend_mode.normal")})}),recommendations:[{label:(0,_.tx)("sites.lint.fix-issue"),action:l.$XN.REMOVE_STROKE_BLEND_MODE}],isViolation:e=>A(e,e=>e.blendMode&&"NORMAL"!==e.blendMode)},{name:"styles/strokes-gradient",category:"stroke",label:(0,_.tx)("sites.lint.styles/strokes-gradient"),description:(0,_.tx)("sites.lint.styles/strokes-gradient-description"),recommendations:[{label:(0,_.tx)("sites.lint.remove-gradient"),action:l.$XN.REMOVE_STROKE_GRADIENT}],isViolation:e=>!S(e)&&A(e,I)},{name:"styles/strokes-join-miter",category:"stroke",label:(0,_.tx)("sites.lint.styles/strokes-join-miter"),description:(0,_.tx)("sites.lint.styles/strokes-join-miter-description",{miter:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.stroke_settings.miter")})}),recommendations:[{label:(0,_.tx)("sites.lint.fix-issue"),action:l.$XN.REMOVE_CUSTOM_JOIN}],isViolation:e=>!e.isInImmutableFrame&&(e.strokeGeometry?.length>0&&"MITER"!==e.strokeJoin||4!==e.strokeMiterLimit)},{name:"styles/strokes-dash-pattern",category:"stroke",label:(0,_.tx)("sites.lint.styles/strokes-dash-pattern"),description:(0,_.tx)("sites.lint.stroke-dash-may-look-different"),recommendations:[],isViolation:e=>!S(e)&&e.strokeGeometry?.length>0&&e.dashPattern.length>0&&!e.isResponsiveSet},{name:"styles/strokes-image",category:"stroke",label:(0,_.tx)("sites.lint.styles/strokes-image"),description:(0,_.tx)("sites.lint.styles/strokes-image-description"),recommendations:[{label:(0,_.tx)("sites.lint.remove-image"),action:l.$XN.REMOVE_STROKE_IMAGE}],isViolation:e=>!e.isInImmutableFrame&&A(e,e=>"IMAGE"===e.type)},{name:"styles/video-stroke",category:"stroke",label:(0,_.tx)("sites.lint.styles/video"),description:(0,_.tx)("sites.lint.video-stroke-description"),recommendations:[{label:(0,_.tx)("sites.lint.remove-video"),action:l.$XN.REMOVE_VIDEO_STROKE}],isViolation:e=>A(e,e=>"VIDEO"===e.type)},{name:"styles/texture-stroke",category:"stroke",label:(0,_.tx)("sites.lint.styles/texture-stroke"),description:(0,_.tx)("sites.lint.styles/texture-stroke-description"),recommendations:[{label:(0,_.tx)("sites.lint.remove-texture-stroke"),action:l.$XN.REMOVE_TEXTURE_STROKE}],isViolation:e=>{if(!A(e))return!1;let r=e.strokeBrushGuid!==c.AD,n=1!==e.dynamicStrokeSettings.interval||0!==e.dynamicStrokeSettings.wiggle||0!==e.dynamicStrokeSettings.smoothen;return r||n}},{name:"effects/frames-no-fills",label:(0,_.tx)("sites.lint.effects/frames-no-fills"),description:(0,_.tx)("sites.lint.effects/frames-no-fills-description"),category:"effects",recommendations:[{label:(0,_.tx)("sites.lint.remove-effect"),action:l.$XN.REMOVE_EFFECTS}],isViolation:e=>["FRAME","RECTANGLE","ROUNDED_RECTANGLE","INSTANCE"].includes(e.type)&&!w(e)&&C(e)},{name:"styles/text-background-blur",category:"effects",label:(0,_.tx)("sites.lint.styles/text-background-blur"),description:(0,_.tx)("sites.lint.styles/text-background-blur-description",{backgroundBlur:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.effects.background_blur")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-blur"),action:l.$XN.REMOVE_TEXT_BACKGROUND_BLUR}],isViolation:e=>"TEXT"===e.type&&C(e,e=>"BACKGROUND_BLUR"===e.type)},{name:"effects/rotation-shadow-effects",label:(0,_.tx)("sites.lint.effects/rotation-shadow-effects"),description:(0,_.tx)("sites.lint.shadows-may-look-different"),category:"effects",recommendations:[],isViolation:(e,r)=>{let n=function(e){return Math.atan2(e.m10,e.m00)}(e.relativeTransform),i=((r?.rotationAngle||0)+n)%(2*Math.PI),a=C(e,e=>"DROP_SHADOW"===e.type||"INNER_SHADOW"===e.type);return[Math.abs(i)>.1&&a,{rotationAngle:i}]}},{name:"styles/text-inner-shadows",category:"effects",label:(0,_.tx)("sites.lint.styles/text-inner-shadows"),description:(0,_.tx)("sites.lint.styles/text-inner-shadows-description",{innerShadow:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.effects.inner_shadow")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-shadow"),action:l.$XN.REMOVE_TEXT_INNER_SHADOW}],isViolation:e=>"TEXT"===e.type&&C(e,e=>"INNER_SHADOW"===e.type)},{name:"styles/shadow-blend-mode",label:(0,_.tx)("sites.lint.styles/shadow-blend-mode"),description:(0,_.tx)("sites.lint.styles/shadow-blend-mode-description",{normal:i.createElement(E,{text:(0,_.tx)("fullscreen.properties_panel.blend_mode.normal")})}),category:"effects",recommendations:[{label:(0,_.tx)("sites.lint.fix-issue"),action:l.$XN.SET_BLEND_MODE_NORMAL}],isViolation:e=>C(e,e=>("DROP_SHADOW"===e.type||"INNER_SHADOW"===e.type)&&e.blendMode&&"NORMAL"!==e.blendMode)},{name:"a11y/linked-images-have-no-label",category:"accessibility",label:(0,_.tx)("sites.lint.a11y/linked-images-have-no-label"),description:(0,_.tx)("sites.lint.a11y/action/add-label-to-linked-images"),recommendations:[],isViolation:e=>""===e.accessibleLabel&&e.prototypeInteractions.some(e=>e.event?.interactionType==="ON_CLICK")&&!function(e){let r=[e];for(;r.length>0;){let e=r.pop();if(e.characters&&e.characters.length>0||e.accessibleLabel&&e.accessibleLabel.length>0)return!0;e.childrenNodes&&r.push(...e.childrenNodes)}return!1}(e)},{name:"a11y/flattened-node-has-no-label",category:"accessibility",label:(0,_.tx)("sites.lint.a11y/flattened-nodes-have-no-label"),description:(0,_.tx)("sites.lint.a11y/flattened-nodes-have-no-label-description"),recommendations:[],isViolation:(e,r)=>{if(!(0,d.k)().sts_lint_flattened_aria)return!1;if(r?.isDescendantOfFlattenedNode)return[!1,r];let n=r?.flattenFormatsById??new Map,i=n.get(e.guid)??function e(r){let i=!0,a=!0,o=!0,s=!1;if(r.childCount>0)for(let n of r.childrenNodes){let r=e(n);if(!r)return null;i&&=r.html,a&&=r.svg,o&&=r.png,s||=r.preferPNG}let l=r.getSitesFlattenFormats();if(!l)return null;let c={html:l.html&&i,png:l.png&&o,svg:l.svg&&a,preferPNG:l.preferPNG&&s};return n.set(r.guid,c),c}(e);if(!i)return!!r&&[!1,r];let a=!i.html&&(i.svg||i.png);return[a&&""===e.accessibleLabel,{isDescendantOfFlattenedNode:a,flattenFormatsById:n}]}},{name:"interactions/close_overlay",category:"interactions",label:(0,_.tx)("sites.lint.interactions/unsupported-action"),description:(0,_.tx)("sites.lint.is-not-supported",{action:i.createElement(E,{text:(0,_.tx)("proto.action_close_overlay")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-action"),action:l.$XN.REMOVE_CLOSE_OVERLAY_ACTIONS}],isViolation:e=>N(e,"CLOSE")},{name:"interactions/open_overlay",category:"interactions",label:(0,_.tx)("sites.lint.interactions/unsupported-action"),description:(0,_.tx)("sites.lint.is-not-supported",{action:i.createElement(E,{text:(0,_.tx)("proto.action_open_overlay")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-action"),action:l.$XN.REMOVE_OPEN_OVERLAY_ACTIONS}],isViolation:e=>L(e,"OVERLAY")},{name:"interactions/set_variable_mode",category:"interactions",label:(0,_.tx)("sites.lint.interactions/unsupported-action"),description:(0,_.tx)("sites.lint.is-not-supported",{action:i.createElement(E,{text:(0,_.tx)("proto.action_set_variable_mode")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-action"),action:l.$XN.REMOVE_SET_VARIABLE_MODE_ACTIONS}],isViolation:e=>N(e,"SET_VARIABLE_MODE")},{name:"interactions/links",category:"interactions",label:(0,_.tx)("sites.lint.trigger-conflict"),description:(0,_.tx)("sites.lint.interactions/links",{onClick:i.createElement(E,{text:(0,_.tx)("proto.interaction.type.on_click")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-trigger"),action:l.$XN.REMOVE_ON_CLICK_ACTIONS}],isViolation:e=>U(e)},{name:"animation/smart_animate_navigate_to",category:"interactions",label:(0,_.tx)("sites.lint.unsupported-animation"),description:(0,_.tx)("sites.lint.animation/smart_animate_navigate_to_description",{smartAnimate:i.createElement(E,{text:(0,_.tx)("proto.transition_behavior.smart_animate")})}),recommendations:[{label:(0,_.tx)("sites.lint.fix-issue"),action:l.$XN.REMOVE_NAVIGATE_ACTIONS_WITH_SMART_ANIMATE}],isViolation:e=>x(e,"NAVIGATE","SMART_ANIMATE")},{name:"interactions/gamepad",category:"interactions",label:(0,_.tx)("sites.lint.unsupported-trigger"),description:(0,_.tx)("sites.lint.is-not-supported",{action:i.createElement(E,{text:(0,_.tx)("proto.interaction.type.key_gamepad")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-trigger"),action:l.$XN.REMOVE_GAMEPAD_ACTIONS}],isViolation:e=>P(e)},{name:"interactions/mouse_in",category:"interactions",label:(0,_.tx)("sites.lint.unsupported-trigger"),description:(0,_.tx)("sites.lint.is-not-supported",{action:i.createElement(E,{text:(0,_.tx)("proto.interaction.type.mouse_enter_deprecated")})}),recommendations:[{label:(0,_.tx)("sites.lint.replace-trigger"),action:l.$XN.REMOVE_MOUSE_IN_ACTIONS}],isViolation:e=>R(e,"MOUSE_IN")},{name:"interactions/mouse_out",category:"interactions",label:(0,_.tx)("sites.lint.unsupported-trigger"),description:(0,_.tx)("sites.lint.is-not-supported",{action:i.createElement(E,{text:(0,_.tx)("proto.interaction.type.mouse_leave_deprecated")})}),recommendations:[{label:(0,_.tx)("sites.lint.replace-trigger"),action:l.$XN.REMOVE_MOUSE_OUT_ACTIONS}],isViolation:e=>R(e,"MOUSE_OUT")},{name:"behaviors/marquee_without_autolayout",category:"interactions",label:(0,_.tx)("sites.lint.interactions/unsupported-action"),description:(0,_.tx)("sites.lint.behaviors/marquee-without-autolayout-description",{marquee:i.createElement(E,{text:(0,_.tx)("sites.panel.interactions_panel.marquee_behavior")})}),recommendations:[{label:(0,_.tx)("sites.lint.fix-issue"),action:l.$XN.ADD_AUTOLAYOUT}],isViolation:e=>"FRAME"===e.type&&!e.isStack&&D(e,a.Xc.Marquee)},{name:"interactions/swap_overlay",category:"interactions",label:(0,_.tx)("sites.lint.interactions/unsupported-action"),description:(0,_.tx)("sites.lint.is-not-supported",{action:i.createElement(E,{text:(0,_.tx)("proto.action_swap_overlay")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-action"),action:l.$XN.REMOVE_SWAP_OVERLAY_ACTIONS}],isViolation:e=>L(e,"SWAP")},{name:"animation/smart_animate",category:"interactions",label:(0,_.tx)("sites.lint.unsupported-animation"),description:(0,_.tx)("sites.lint.smart-animate-description",{smartAnimate:i.createElement(E,{text:(0,_.tx)("proto.transition_behavior.smart_animate")})}),recommendations:[{label:(0,_.tx)("sites.lint.fix-issue"),action:l.$XN.REMOVE_NAVIGATE_ACTIONS_WITH_SMART_ANIMATE}],isViolation:e=>O(e,"SMART_ANIMATE")},{name:"interactions/on_drag",category:"interactions",label:(0,_.tx)("sites.lint.unsupported-trigger"),description:(0,_.tx)("sites.lint.is-not-supported",{action:i.createElement(E,{text:(0,_.tx)("proto.interaction.type.on_drag")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-trigger"),action:l.$XN.REMOVE_ON_DRAG_ACTIONS}],isViolation:e=>R(e,"DRAG")},{name:"animation/dissolve",category:"interactions",label:(0,_.tx)("sites.lint.unsupported-animation"),description:(0,_.tx)("sites.lint.is-not-supported",{action:i.createElement(E,{text:(0,_.tx)("proto.transition_behavior.dissolve")})}),recommendations:[{label:(0,_.tx)("sites.lint.remove-animation"),action:l.$XN.REMOVE_DISSOLVE_ANIMATIONS}],isViolation:e=>O(e,"DISSOLVE")},{name:"nodetype/connector",category:"objects",label:(0,_.tx)("sites.lint.nodetype/unsupported"),description:(0,_.tx)("sites.lint.are-not-supported",{action:(0,_.tx)("sites.lint.nodetype/connector")}),recommendations:[{label:(0,_.tx)("sites.lint.remove-object"),action:l.$XN.REMOVE_CONNECTOR}],isViolation:e=>"CONNECTOR"===e.type},{name:"nodetype/shape-with-text",category:"objects",label:(0,_.tx)("sites.lint.nodetype/unsupported"),description:(0,_.tx)("sites.lint.are-not-supported",{action:(0,_.tx)("sites.lint.nodetype/shape-with-text")}),recommendations:[{label:(0,_.tx)("sites.lint.remove-object"),action:l.$XN.REMOVE_SHAPE_WITH_TEXT}],isViolation:e=>"SHAPE_WITH_TEXT"===e.type},{name:"nodetype/sticky",category:"objects",label:(0,_.tx)("sites.lint.nodetype/unsupported"),description:(0,_.tx)("sites.lint.are-not-supported",{action:(0,_.tx)("sites.lint.nodetype/sticky")}),recommendations:[{label:(0,_.tx)("sites.lint.remove-object"),action:l.$XN.REMOVE_STICKY}],isViolation:e=>"STICKY"===e.type},{name:"nodetype/washi-tape",category:"objects",label:(0,_.tx)("sites.lint.nodetype/unsupported"),description:(0,_.tx)("sites.lint.is-not-supported",{action:(0,_.tx)("sites.lint.nodetype/washi-tape")}),recommendations:[{label:(0,_.tx)("sites.lint.remove-object"),action:l.$XN.REMOVE_WASHI_TAPE}],isViolation:e=>"WASHI_TAPE"===e.type},{name:"nodetype/highlight",category:"objects",label:(0,_.tx)("sites.lint.nodetype/unsupported"),description:(0,_.tx)("sites.lint.are-not-supported",{action:(0,_.tx)("sites.lint.nodetype/highlight")}),recommendations:[{label:(0,_.tx)("sites.lint.remove-object"),action:l.$XN.REMOVE_HIGHLIGHT}],isViolation:e=>"HIGHLIGHT"===e.type},{name:"nodetype/stamp",category:"objects",label:(0,_.tx)("sites.lint.nodetype/unsupported"),description:(0,_.tx)("sites.lint.are-not-supported",{action:(0,_.tx)("sites.lint.nodetype/stamp")}),recommendations:[{label:(0,_.tx)("sites.lint.remove-object"),action:l.$XN.REMOVE_STAMP}],isViolation:e=>"STAMP"===e.type},{name:"nodetype/table",category:"objects",label:(0,_.tx)("sites.lint.nodetype/unsupported"),description:(0,_.tx)("sites.lint.are-not-supported",{action:(0,_.tx)("sites.lint.nodetype/table")}),recommendations:[{label:(0,_.tx)("sites.lint.remove-object"),action:l.$XN.REMOVE_TABLE}],isViolation:e=>"TABLE"===e.type},{name:"nodetype/widget",category:"objects",label:(0,_.tx)("sites.lint.nodetype/unsupported"),description:(0,_.tx)("sites.lint.are-not-supported",{action:(0,_.tx)("sites.lint.nodetype/widget")}),recommendations:[{label:(0,_.tx)("sites.lint.remove-object"),action:l.$XN.REMOVE_WIDGET}],isViolation:e=>"WIDGET"===e.type&&!e.isHTMLWidget},{name:"overrides/vector-override",category:"objects",label:(0,_.tx)("sites.lint.overrides/override-unsupported"),description:(0,_.tx)("sites.lint.overrides/vector-overrides-unsupported"),recommendations:[{label:(0,_.tx)("sites.lint.remove-vector-overrides"),action:l.$XN.REMOVE_UNSUPPORTED_VECTOR_OVERRIDES}],isViolation:e=>{if("INSTANCE"!==e.type||!e.symbolId)return!1;let r=e.sceneGraph.get(e.symbolId);if(!r?.parentNode?.isStateGroup)return!1;let n=new Set(["stroke-paint-data","fill-paint-data"]);for(let r of e.overridesInternal){let{id:i,overriddenFields:a}=r;if(!a||!a.some(e=>!n.has(e)))continue;let o=i.split(";").pop();if(!o)continue;let s=function e(r,n){if(n===r.overrideKey)return r;if(!r.childrenNodes)return null;for(let i of r.childrenNodes){if(i.overrideKey===n)return i;let r=e(i,n);if(r)return r}return null}(e,o);if(s&&"VECTOR"===s.type)return!0}return!1}},{name:"vector/variable-binding",category:"objects",label:(0,_.tx)("sites.lint.variable-unsupported"),description:(0,_.tx)("sites.lint.vectors/variable-binding-unsupported-description"),recommendations:[{label:(0,_.tx)("sites.lint.remove-vector-variables"),action:l.$XN.REMOVE_VECTOR_VARIABLES}],isViolation:e=>"VECTOR"===e.type&&Object.entries(e.boundVariables).length>0},{name:"nodetype/transform",category:"objects",label:(0,_.tx)("sites.lint.nodetype/unsupported"),description:(0,_.tx)("sites.lint.are-not-supported",{action:(0,_.tx)("sites.lint.nodetype/transform")}),recommendations:[],isViolation:e=>"TRANSFORM"===e.type},{name:"nodetype/text-path",category:"objects",label:(0,_.tx)("sites.lint.nodetype/unsupported"),description:(0,_.tx)("sites.lint.are-not-supported",{action:(0,_.tx)("sites.lint.nodetype/text-path")}),recommendations:[],isViolation:e=>"TEXT_PATH"===e.type},{name:"effects/grain",category:"effects",label:(0,_.tx)("sites.lint.effects/grain"),description:(0,_.tx)("sites.lint.effects/grain-description"),recommendations:[{label:(0,_.tx)("sites.lint.remove-effect"),action:l.$XN.REMOVE_GRAIN_EFFECT}],isViolation:e=>C(e,e=>"GRAIN"===e.type)},{name:"effects/noise",category:"effects",label:(0,_.tx)("sites.lint.effects/noise"),description:(0,_.tx)("sites.lint.effects/noise-description"),recommendations:[{label:(0,_.tx)("sites.lint.remove-effect"),action:l.$XN.REMOVE_NOISE_EFFECT}],isViolation:e=>C(e,e=>"NOISE"===e.type)},{name:"effects/progressive-blur",category:"effects",label:(0,_.tx)("sites.lint.effects/progressive-blur"),description:(0,_.tx)("sites.lint.effects/progressive-blur-description"),recommendations:[{label:(0,_.tx)("sites.lint.remove-effect"),action:l.$XN.REMOVE_PROGRESSIVE_BLUR}],isViolation:e=>C(e,e=>("FOREGROUND_BLUR"===e.type||"BACKGROUND_BLUR"===e.type)&&"PROGRESSIVE"===e.blurOpType)},{name:"interactions/scroll_to_in_component_instance",label:(0,_.tx)("sites.lint.interactions/unsupported-action"),description:(0,_.tx)("sites.lint.interactions/scroll-to-in-component-instance-unsupported"),category:"interactions",recommendations:[{label:(0,_.tx)("sites.lint.remove-action"),action:l.$XN.REMOVE_SCROLL_TO_ACTIONS}],isViolation:e=>e.isInstanceSublayer&&L(e,"SCROLL_TO")}],b=e=>{let r=new Set,n=[e];for(;n.length>0;){let e=n.pop();r.add(e),n.push(...e.childrenNodes)}return r},v=(e,r)=>y.map(n=>{let i=function(e,r,n,i){if(!r)return[];let a=[{node:r,context:void 0}],o=[],s=new Set;for(;a.length>0;){let{node:r,context:i}=a.shift();if(!(r.visible||r.boundVariables.visible))continue;let l=n.isViolation(r,i),[d,u]="boolean"==typeof l?[l,void 0]:l;if(d&&("INSTANCE"===r.type&&r.symbolId&&function(e,r,n,i){let a=r.get(e);if(!a||a.isInternalOnlyNode)return!1;let o=n.isViolation(a,i),[s]="boolean"==typeof o?[o,void 0]:o;return s}(r.symbolId,e,n,i)?o.push(r.symbolId):o.push(r.guid)),["INSTANCE","SYMBOL"].includes(r.type)&&!s.has(r.guid)){if(s.add(r.guid),r.symbolId){let n=e.get(r.symbolId);n&&a.push({node:n,context:i})}[...b(r)].flatMap(r=>k(r,e=>"SWAP_STATE"===e.navigationType).map(r=>{if(!r.transitionNodeID)return;let n=c.dI(r.transitionNodeID),i=e.get(n);if(i&&!i.isInternalOnlyNode)return n}).filter(Boolean)).forEach(r=>{let n=e.get(r);n&&a.push({node:n,context:i})})}r.childrenNodes.forEach(e=>{a.push({node:e,context:u})})}return o}(e,e.get(r),n);return 0===i.length?null:{...n,nodeIds:i}}).filter(Boolean),T=e=>!!e.visible&&0!==(e.opacity||1)&&(!!("SOLID"===e.type&&(e.color?.a||1)>0)||!I(e)||e.stops?.some(e=>e.color.a>0));function I(e){return"GRADIENT_ANGULAR"===e.type||"GRADIENT_DIAMOND"===e.type||"GRADIENT_LINEAR"===e.type||"GRADIENT_RADIAL"===e.type}function S(e){return"ELLIPSE"===e.type||"REGULAR_POLYGON"===e.type||"STAR"===e.type||"VECTOR"===e.type||"LINE"===e.type}function w(e,r=()=>!0){return e.fills.length>0&&e.fills.some(e=>r(e)&&T(e))}function A(e,r=()=>!0){return e.strokePaints.data.length>0&&e.strokePaints.data.some(e=>r(e)&&T(e))}function C(e,r=()=>!0){return e.effects.some(e=>r(e)&&e.visible)}let N=(e,r)=>M(e,e=>e.connectionType===r),L=(e,r)=>M(e,e=>e.navigationType===r),O=(e,r)=>M(e,e=>e.transitionType===r),R=(e,r)=>F(e,e=>e.event?.interactionType===r),P=e=>F(e,e=>e.event?.interactionType==="ON_KEY_DOWN"&&e.event?.keyTrigger?.triggerDevice!=="KEYBOARD"),D=(e,r)=>!!e.behaviors&&r in e.behaviors,M=(e,r)=>e.prototypeInteractions.some(e=>e.actions?.some(e=>r(e)||e.conditionalActions?.some(e=>e.actions?.some(r)))),k=(e,r)=>{let n=[];return e.prototypeInteractions.forEach(e=>{e.actions?.forEach(e=>{r(e)&&n.push(e),e.conditionalActions?.forEach(e=>{e.actions?.forEach(e=>{r(e)&&n.push(e)})})})}),n},F=(e,r)=>e.prototypeInteractions.some(e=>r(e)),x=(e,r,n)=>M(e,e=>{let i="ANY"===n?"INSTANT_TRANSITION"!==e.transitionType:e.transitionType===n;return e.navigationType===r&&i}),U=e=>!!e.hyperlink&&R(e,"ON_CLICK");function B(e){Object.entries(e.reduce((e,r)=>(e[r.name]=(e[r.name]||0)+1,e),{})).map(([e,r])=>{p.az.trackDefinedEvent("sites.linting_errors",{lintRule:e,count:r,source:"sites_preview"})})}},34417:(e,r,n)=>{n.d(r,{j:()=>c});var i=n(39773),a=n(579020),o=n(990807),s=n(328162),l=n(954398);(0,i.eU)(e=>Object.fromEntries([...e(l.V)].map(r=>{let n=e((0,s.V)(r));return 0===n.length?null:[r,n]}).filter(Boolean)));let c=(0,i.eU)(e=>[...e(l.V)].every(r=>{let n=e((0,s.V)(r));return n.length>0&&(0,a.sx)(o.Is),0===n.length}))},131180:(e,r,n)=>{n.d(r,{KL:()=>s,TJ:()=>o,YD:()=>l,f3:()=>c,mh:()=>d});var i=n(39773),a=n(792478);let o=(0,a.Wh)(()=>(0,i.eU)({})),s=(0,i.eU)({}),l=(0,i.E3)("codeDrawerOpen",!1);(0,i.E3)("codeDrawerTab","console"),(0,i.E3)("codeDrawerHeight",300),(0,a.Wh)(()=>(0,i.eU)(""));let c=(0,a.Wh)(()=>(0,i.eU)(null)),d=(0,a.Wh)(()=>(0,i.eU)(null));(0,a.Wh)(()=>(0,i.eU)(0))},140469:(e,r,n)=>{n.d(r,{lA:()=>d}),n(716544);var i=n(485616);n(741419);var a=n(157907),o=n(39773);n(480236),n(67919),n(661780);var s=n(792478);let l=(0,s.Wh)(()=>(0,o.eU)({}));(0,o.Iz)(e=>(0,o.eU)(r=>r(l)[e]??"",(r,n,i)=>{n(l,r=>({...r,[e]:i}))}));let c=(0,s.Wh)(()=>(0,o.eU)({}));(0,o.Iz)(e=>(0,o.eU)(r=>r(c)[e],(r,n,i)=>{n(c,r=>{if(void 0===i){let{[e]:n,...i}=r;return i}return{...r,[e]:i}})})),(0,s.Wh)(()=>(0,o.eU)((0,a.k)().bake_sb?i._.CLAUDE_3_7_BASELINE_SUPABASE:i._.CLAUDE_3_7_THINKING_STREAMING_NO_EDIT)),(0,s.Wh)(()=>(0,o.eU)(!1)),(0,s.Wh)(()=>(0,o.eU)({}));let d=(0,o.eU)(null)},608080:(e,r,n)=>{n(741789),n(992277),n(502255);var i=n(442313),a=n(969405);n(947934),a.B.RATE_LIMIT_EXCEEDED,(0,i.tx)("ai.error.rate_limited"),a.B.CONTENT_LENGTH_LIMIT,(0,i.tx)("ai.error.content_length_limit"),a.B.UNSAFE_OR_HARMFUL_CONTENT,(0,i.tx)("ai.error.unsafe_or_harmful"),a.B.GENERIC,(0,i.tx)("ai.error.generic"),a.B.OFFLINE,(0,i.tx)("ai.error.offline"),a.B.METER_EXCEEDED,(0,i.tx)("ai.error.generic"),a.B.NOT_IMPLEMENTED,(0,i.tx)("ai.error.not_implemented");var o=(e=>(e.FIGMAKE="figmake",e.CODE_IN_SITES="code_in_sites",e))(o||{}),s=(e=>(e.SEND_MESSAGE="send_message",e.PREVIEW="preview",e.FORMAT="format",e.EDIT_LOCALLY="edit_locally",e.LINT="lint",e.RESIZE_PANEL="resize_panel",e))(s||{})},394966:(e,r,n)=>{n.d(r,{UR:()=>b,Xs:()=>g,kO:()=>y,l6:()=>_,p_:()=>h,t_:()=>E,wh:()=>m,xJ:()=>f}),n(848318);var i=n(741419),a=n(179703),o=n(39773),s=n(369600),l=n(33069),c=n(974680),d=n(410333),u=n(131180),p=n(14243);(0,o.eU)(null);let m=(0,l.SG)(()=>i.Ez5.codeSelection().selectedCodeNodeIds);(0,l.SG)(()=>i.Ez5.codeSelection().fullscreenCodeNodeIds);let h=(0,l.SG)(()=>i.Ez5.codeSelection().selectedCodeNodeSize),_=(0,l.SG)(()=>i.Ez5.codeSelection().fullscreenCodeNodeSize),g=(0,l.SG)(()=>i.Ez5.codeSelection().selectedCodeNodeBreakpoint),f=(0,l.SG)(()=>i.Ez5.codeSelection().fullscreenCodeNodeBreakpoint);(0,o.E3)("codeWindowPanelConfiguration","chat"),(0,o.E3)("codeFullViewPanelConfiguration","chat");let E=(0,o.eU)({});function y(e,r,n){let l=i.Ez5?.codeSelection();if(!l)return;let h=o.zl.get(m);if(!(n&&0===h.length||e.isCodeFile&&h.length>0&&h.some(r=>e.guid===a.UN().get(r)?.backingSourceCodeNodeId))){if(l.selectedCodeNodeIds.set([e.guid]),r){l.selectedCodeNodeSize.set(r.size);let e=r.containingResponsiveNode;e?l.selectedCodeNodeBreakpoint.set({name:e.name,width:e.size.x,height:e.size.y}):l.selectedCodeNodeBreakpoint.set({name:p.ix,width:p.Nb,height:p.co})}if(e.backingSourceCodeNodeId){o.zl.set(u.TJ,n=>{let i={...n};return r?i[e.backingSourceCodeNodeId]=r:delete i[e.backingSourceCodeNodeId],i});let n=e?.sceneGraph.get(e.backingSourceCodeNodeId),i=o.zl.get(s.ze);n&&r&&i&&function(e,r,n){let i=r?.isCodeInstance?r.backingCodeComponent?.guid:n,a=c.vZ.getComponentStorageKey(e,i);c.vZ.set(a,{width:{value:r.size.x,sizing:(0,d.a)(r)?c.Tn:c.EN},height:{value:r.size.y,sizing:(0,d.p)(r)?c.Tn:c.EN}})}(i,r,n.guid)}}}function b(e){let r=o.zl.get(m),n=i.Ez5?.codeSelection();n&&(n.selectedCodeNodeIds.set(r.filter(r=>r!==e)),n.selectedCodeNodeSize.set({x:0,y:0}),n.selectedCodeNodeBreakpoint.set({name:"",width:0,height:0}))}(0,o.E3)("codeWindowDimensions",{x:16,y:16,width:null,height:null})},710562:(e,r,n)=>{let i;n.d(r,{B9:()=>y,LW:()=>b,X3:()=>E,fM:()=>m,pS:()=>p,qs:()=>h});var a=n(445777),o=n(422006),s=n(900118);let l=0,c=new Map,d=new Map,u=new Set;function p({entrypointsOrIdentifierToFileName:e,filesystem:r,tailwind:n,minify:i,shadcn:a=!1,noWrapper:o=!1,jsxDev:s=!1,assets:l={}}){return _({type:"BUNDLE",entrypointsOrIdentifierToFileName:e,filesystem:r,tailwind:n,minify:i,shadcn:a,noWrapper:o,jsxDev:s,assets:l})}function m(e,r=!0){return _({type:"UPDATE_FILES",files:e,useLanguageService:r})}function h(e){return _({type:"STATIC_ANALYZE",sourceCode:e})}function _(e){let r=l++,s=new Promise((e,n)=>{c.set(r,e),d.set(r,n)});return function e(r){let s=function(){if(!i){let r=Fig.devtoolsWorkerURL;r&&((i=(0,o.x)(r)).onmessage=async r=>{switch(r.data.type){case"INITIALIZE_LS_RESULT":g(r.data.messageId,!0);break;case"FORMAT_RESULT":g(r.data.messageId,r.data.changes);break;case"BUNDLE_RESULT":g(r.data.messageId,r.data.bundle);break;case"UPDATE_FILES_RESULT":g(r.data.messageId,r.data.updatedFiles);break;case"LINT_RESULT":g(r.data.messageId,r.data.diagnostics);break;case"AUTOCOMPLETE_RESULT":g(r.data.messageId,r.data.completions);break;case"QUICK_INFO_RESULT":g(r.data.messageId,r.data.hoverData);break;case"STATIC_ANALYZE_RESULT":g(r.data.messageId,r.data.results);break;case"ERROR_RESULT":!function(e,r){let n=d.get(e);n&&(n(r),c.delete(e),d.delete(e))}(r.data.messageId,Error(r.data.error));break;case"DEPENDENCY_TYPES_STATUS":!function(e){for(let r of u)r(e)}(r.data);break;case"REFACTOR_RESULT":g(r.data.messageId,r.data.updatedSourceCode);break;case"RESOLVE_ASSET":{let n=await f(r.data.assetPath);e({type:"RESOLVE_ASSET_RESULT",messageId:r.data.messageId,contents:n});break}case"GET_SVG":{let{svgForDomId:i}=await Promise.all([n.e(650),n.e(3993),n.e(3754)]).then(n.bind(n,573754)),a=i(r.data.id);e({type:"GET_SVG_RESULT",messageId:r.data.messageId,svg:a});break}case"GET_CODE_SNIPPET_RESULT":g(r.data.messageId,r.data.codeSnippet);break;case"UPDATE_IMAGES_TO_ESM_IMPORTS_RESULT_OLD":case"UPDATE_IMAGES_TO_ESM_IMPORTS_RESULT":g(r.data.messageId,r.data.result);break;case"STRIP_DOM_IDS_FROM_REACT_CODE_RESULT":g(r.data.messageId,r.data.reactCode);break;default:(0,a.xb)(r.data)}})}return i}();if(!s)throw Error("Devtools worker not available");s.postMessage(r)}({...e,messageId:r}),s}function g(e,r){let n=c.get(e);n&&(n(r),c.delete(e),d.delete(e))}async function f(e){if(e.endsWith(".png")){let r=(0,s.F)(),n=e.slice(0,-4),i=r.getImageByHash(n);if(i)return await i.getBytesAsync()}return new Uint8Array}function E(...e){return _({type:"UPDATE_IMAGES_TO_ESM_IMPORTS_OLD",args:e})}function y(...e){return _({type:"UPDATE_IMAGES_TO_ESM_IMPORTS",args:e})}function b(e){return _({type:"STRIP_DOM_IDS_FROM_REACT_CODE",reactCode:e})}},924222:(e,r,n)=>{n.d(r,{H1:()=>S,IO:()=>N,S4:()=>b,bg:()=>w,gz:()=>A,jT:()=>I,si:()=>C});var i=n(848318),a=n(716544),o=n(741419),s=n(308769);n(673906);var l=n(179703);n(157907);var c=n(39773);n(6819);var d=n(896966),u=n(442313),p=n(697714);n(790355);var m=n(375536);n(480236),n(51910),n(67919),n(661780);var h=n(207715),_=n(166917),g=n(500076),f=n(710562);n(470199);var E=n(36789);n(131180),n(608080);var y=n(394966),b=(e=>(e.BUILD="build",e.RUNTIME="runtime",e))(b||{});let v=(0,c.eU)([]),T=(0,c.eU)(null);function I(){let[e,r]=(0,c.fp)(v),[n,a]=(0,c.fp)(T),o=(0,c.md)(y.wh),s=(0,E.Oc)();return(0,i.useEffect)(()=>{null===n?a(o):JSON.stringify(o)!==JSON.stringify(n)&&(s||r([]),a(o))},[o,n,r,a,s]),[e,r]}function S(e){let r=(0,c.md)(m.Mk[g.PW.CODE_COMPONENT].local);return e?.isCodeFile?Object.values(r).filter(r=>r.exportedFromCodeFileId===s.Tq.fromLocalNodeIdObj(e)).sort((e,r)=>"default"===e.codeExportName?-1:"default"===r.codeExportName?1:e.name.localeCompare(r.name)):[]}function w(e){let[r,n]=(0,i.useState)(0),[a,o]=(0,i.useState)([]),s=(0,i.useRef)(!1),c=(0,i.useRef)({}),u=(0,_.Fk)((e,r)=>{if(r)return r?.sourceCode},e),p=(0,_.Fk)((e,r)=>{let n={},i=!1;for(let e of r){let r=e.sourceCodeLength??0;n[e.guid]=r,c.current[e.guid]!==r&&(i=!0)}for(let e in c.current)if(void 0===n[e]){i=!0;break}return c.current=n,i},a);return(0,i.useEffect)(()=>{u&&e&&(0,f.qs)(u).then(({importedCodeFiles:e})=>{let r=function(){let e=(0,l.UN)();return Object.fromEntries([...(e.getRoot().findAllWithCriteriaGUIDs({types:["CODE_LAYER"]})??[]).map(r=>e.get(r)).filter(e=>null!=e).filter(e=>!e.isInstanceSublayer),...e.getInternalCanvas()?.childrenNodes.filter(e=>e.isCodeFile&&!e.isSubscribedAsset)??[]].map(e=>[e.codeFileFullPathWithoutScheme,e]))}(),i=[],a=new Set;for(let n of e){let e=n.path,o=e.slice(e.indexOf("/")),s=`${o}.tsx`,l=r[s];l&&(i.push(l),a.add(s))}for(let e in r)e.endsWith(".css")&&r[e]&&(i.push(r[e]),a.add(e));o(i),s.current?n(e=>e+1):s.current=!0}).catch(e=>{(0,d.x1)("Failed to analyze code dependencies:",e),o([]),n(e=>e+1)})},[u,e]),(0,i.useEffect)(()=>{p&&s.current&&n(e=>e+1)},[p]),{dirtyCounter:r}}async function A({node:e,tailwind:r,preprocessCode:n,jsxDev:i,shadcn:a,noWrapper:s}){let l=e.codeFileFullPath,c=o.glU.deriveFilesystemFromEntrypointNodeIds([e.guid]);n&&await Promise.all(Object.entries(c).map(async([e,r])=>{c[e]=await n(r,e)}));let d=e.imageImports,u={};for(let e of d)u[e.hash]=e.data;return(0,f.pS)({entrypointsOrIdentifierToFileName:[l],filesystem:c,tailwind:r,minify:!1,shadcn:a,jsxDev:i,noWrapper:s,assets:u})}function C(){let e=(0,a.wA)(),r=(0,c.md)(m.Mk[g.PW.CODE_FILE].local);return(0,i.useCallback)((n,i,a)=>{if(n?.isCodeFile&&a){if(i===a)return!1;if(Object.values(r).map(e=>e.name).filter(Boolean).includes(a))return e(p.F.enqueue({message:(0,u.t)("sites.code_components.code_file_duplicate_name"),type:"code-file-rename",error:!0})),!0}return!1},[e,r])}function N(e){let r=(0,h.J2)(o.Ez5.codeBuildBindings().buildNumberByNodeId);return(0,i.useMemo)(()=>r.get(e?.guid||"")??-1,[r,e])}},58313:(e,r,n)=>{n.d(r,{SW:()=>a});var i=n(403357);let a=[/^(https?:\/\/(www\.)?youtube\.com\/.*)/,/^(https?:\/\/(www\.)?youtu\.be\/.*)/];i.ol.YOUTUBE,i.Of.SHOW_UI,i.Of.AUTOPLAY,i.Of.ALLOW_FULLSCREEN,i.w2.URL,i.ol.YOUTUBE,i.Of.SHOW_UI,i.Of.AUTOPLAY,i.Of.ALLOW_FULLSCREEN,i.w2.HTML},187536:(e,r,n)=>{n.d(r,{Jh:()=>c,Oc:()=>d,aI:()=>s,u9:()=>l}),n(848318);var i=n(716544);n(741419);var a=n(157907),o=n(241917);function s(){return!!(0,a.k)().bake}function l(){return!!(0,a.k)().bake&&!!(0,a.k)().bake_file_browser}function c(e){return!!s()&&"fullscreen"===e.view&&e.editorType===o.nT.Figmake}function d(){return(0,i.d4)(e=>c(e.selectedView))}},333350:(e,r,n)=>{n.d(r,{N:()=>u,l:()=>d});var i=n(848318),a=n(50781),o=n(447543),s=n(570467),l=n(442313),c=n(851929);function d(e){return e<c.b?i.createElement(a.D,null):e>=c.b&&e<c.zQ?i.createElement(o.P,null):i.createElement(s.X,null)}function u(e){return e<c.b?(0,l.t)("sites.breakpoint_bar.add_mobile_breakpoint"):e>=c.b&&e<c.zQ?(0,l.t)("sites.breakpoint_bar.add_tablet_breakpoint"):(0,l.t)("sites.breakpoint_bar.add_desktop_breakpoint")}},776785:(e,r,n)=>{n.d(r,{_t:()=>s});var i=n(493554),a=n(195507),o=n(635547);function s(e){let r=(0,i.Rs)(o.Vny,{fileKey:e});if("loaded"!==r.status)return null;let n=(0,a.oA)(r.data?.siteMount),s=n?.customDomain,l=n?.siteDomain;return n&&l?s?{fullURL:`https://${l.domain}`,domain:l.domain,hasCustomDomain:!0,customDomain:s.domain,customDomainURL:`https://${s.domain}`,verifiedAt:s.verifiedAt,activationStatus:s.activationStatus?JSON.parse(s.activationStatus):{}}:{fullURL:`https://${l.domain}`,domain:l.domain,hasCustomDomain:!1}:null}},470199:(e,r,n)=>{n.d(r,{s0:()=>u,sm:()=>m});var i=n(741419),a=n(157907),o=n(39773),s=n(6819),l=n(790355),c=n(792478),d=n(119310);let u=(0,c.Wh)(()=>(0,o.eU)(e=>e(p),(e,r,n)=>{let o=s.D.getState().selectedView;if(!o)return;if(n===i.Nfd.DAKOTA&&!(0,a.k)().dakota){console.error("A sites view was accessed that a user did not have permission to access",n);return}let c={...o,sitesView:n};s.D.dispatch((0,l.$T)(c))})),p=(0,d.bt)(e=>{let r=e.selectedView;return r?r.sitesView!==i.Nfd.DAKOTA||(0,a.k)().dakota?r.sitesView??i.Nfd.FILE:(console.error("A sites view was accessed that a user did not have permission to access",r.sitesView),i.Nfd.FILE):i.Nfd.FILE}),m=(0,c.Wh)(()=>(0,o.eU)(!1))},184054:(e,r,n)=>{n.d(r,{h0:()=>o});var i=n(39773),a=n(792478);let o=(0,i.eU)(!0);(0,i.eU)(!0),(0,a.Wh)(()=>(0,i.eU)(null))},620331:(e,r,n)=>{n.d(r,{o:()=>i});let i=(0,n(39773).eU)(!1)},733787:(e,r,n)=>{n.d(r,{K_:()=>d});var i=n(39773),a=n(792478),o=n(620331),s=n(776332);let l=(0,a.Wh)(()=>(0,i.eU)(!1));(0,i.eU)(null,(e,r)=>{let n=!e(l);n&&(r(o.o,!1),r(c,!1)),r(l,n)});let c=(0,a.Wh)(()=>(0,i.eU)(!1));(0,i.eU)(null,(e,r)=>{let n=!e(c);n&&(r(o.o,!1),r(l,!1)),r(c,n)});let d=(0,i.eU)(null,(e,r)=>{let n=!e(o.o);n&&(r(l,!1),r(c,!1)),r(o.o,n)});(0,i.eU)(s.p.WEBSITE)},906863:(e,r,n)=>{n.d(r,{f:()=>p});var i=n(848318);n(902768);var a=n(39773);n(792647);var o=n(17755),s=n(895104),l=n(839795),c=n(62676);n(935412);var d=n(251526);n(822685),n(63529),n(440046);let u=(0,a.eU)(new Set),p=((0,a.eU)(null),(0,a.eU)(null));(0,a.eU)(e=>{let r=e(u),n=e(p);if(!n)return[];let{nodeByGuidMap:i,currentRoot:a}=n;if(void 0===i[a])return[];let o=[],s=(e,n)=>{let a=i[e];if(!a)return;let l=r.has(e);o.push(function(e,r,n){let i=e.id,a=!e.children||0===e.children.length;return{id:i,name:e.name,indent:n,isExpanded:r,isLeaf:a,leftBadges:"SVG"===e.type||"IMAGE"===e.type?[{type:"info",value:e.type}]:[{type:"type",value:e.type}],primaryId:i,secondaryId:"",longName:e.name,rightBadges:[],memoryFraction:null}}(a,l,n)),l&&a.children.forEach(e=>s(e,n+1))};return s(a,0),o}),i.memo(function({id:e,primaryId:r,name:n,index:a,isSelected:u,style:p,isLeaf:m,isExpanded:h,indent:_,leftBadges:g,onSelect:f,toggleExpanded:E}){return i.createElement(d.Z,{keyboardNavigationPath:[a],isSelected:u,isLeaf:m,isExpanded:h,indent:_,style:p,select:()=>f(e),toggleExpanded:r=>E(e,r)},i.createElement(l.IV,{badges:g}),i.createElement(c.nK,{id:r}),i.createElement("div",{title:n,className:o.s.ellipsis.noWrap.overflowHidden.$},n),i.createElement(s.M,null))})},822685:(e,r,n)=>{n.d(r,{Dw:()=>E,W:()=>f,_b:()=>v,gu:()=>h,o7:()=>S,q9:()=>b,uP:()=>_});var i=n(445777),a=n(179703),o=n(39773),s=n(6819),l=n(481540),c=n(792478),d=n(714067),u=n(328162),p=n(382507),m=n(939576);function h(){return null!==o.zl.get(v)}function _(){o.zl.set(v,null)}let g=(0,c.Wh)(()=>(0,o.eU)(null)),f=(0,o.eU)(!1);var E=(e=>(e[e.Modal=0]="Modal",e[e.Iframe=1]="Iframe",e[e.None=2]="None",e))(E||{});let y=(0,c.Wh)(()=>(0,o.eU)(0)),b=(0,o.eU)(null,(e,r,n)=>{if(2===e(y)&&2!==n&&e(f)){let r=e(g);(0,i.vA)(!!r,"sitePreviewState should not be null"),r.history.refresh(),o.zl.set(f,!1)}r(y,n)});(0,c.Wh)(()=>(0,o.eU)(null));let v=(0,o.eU)(e=>e(g),(e,r,n)=>{var o;let c;let d=e(g);if(!d?.startingNodeId&&n?.startingNodeId){!function(e){if(!e)return;let r=s.D.getState(),n=r.openFile?.key,i=r.user&&r.user.id;(0,l.ds)("sites_view_preview",n,r,{userId:i,mode:e})}(n.mode);let r=e((0,u.V)(n.startingNodeId));(0,p.JW)(r)}if(n){let e=(0,a.UN)().get(n.startingNodeId);(0,i.vA)(!!e,`Node with id ${n.startingNodeId} not found`),c={...n,history:new m.a({url:e.name})}}else c=null;r(g,c),o=c,new Promise(e=>{I=e}),null===o&&I(null)}),T=(0,o.eU)(e=>{let r=e(g)?.history;if(r)return(0,d.sF)(e(r.currentAtom).url)});(0,o.eU)(e=>{let r=e(T);return r?e((0,u.V)(r)):[]}),Promise.resolve(null);let I=e=>{};function S(e){I(e)}},599826:(e,r,n)=>{n.d(r,{xR:()=>O,jD:()=>L}),n(848318);var i=n(861951),a=n(445777),o=n(741419),s=n(673906),l=n(179703),c=n(157907),d=n(39773),u=n(579020),p=n(6819),m=n(379338),h=n(808471),_=n(507152),g=n(491486),f=n(369600),E=n(792478),y=n(906863),b=n(714067),v=n(825068),T=n(85072);n(716544),n(17755),n(442313),n(697714);let I=(0,d.eU)([]);n(939576);var S=n(822685),w=n(874196),A=n(152062),C=n(613942);let N=new EventTarget,L=(0,E.Wh)(()=>(0,d.eU)(function(){if(document.baseURI.startsWith("http://localhost:9000/"))return"http://localhost:8045/preview_page.html";let e=`${(0,_.g)()}-figmaiframepreview`,r=(0,m.Ay)().cluster_name;return"prod"===r?`https://${e}.preview.site/manual_upload/m2/preview_page.html`:"staging"===r?`https://${e}.pung.site/manual_upload/m2/preview_page.html`:"devenv01"===r?`https://${e}.pung-sandbox.site/manual_upload/m2/preview_page.html`:`https://${e}.pung-devbox.site/manual_upload/m2/preview_page.html`}()));class O{constructor({history:e,options:r,onIframeReady:n,onCloseRequested:i,onError:a,onConsoleLog:o,skipSetPreviewedNode:s,imageAssetsHolder:l=null,onInspectElementEvent:c}){this._iframe=null,this.onIframeReady=null,this.onError=null,this.onConsoleLog=null,this.onReceiveHTML=null,this.onInspectElementEvent=null,this.fetchMaterializedNodePropsPromise=null,this.perfTracker=new A.g(S._b),this.website=null,this.clonedNodes=new Map,this.setupMessageChannel(),this.history=e,this.onIframeReady=n??null,this.onCloseRequested=i||null,this.onConsoleLog=o||null,this.onError=a||null,this.onInspectElementEvent=c??null,this.imageAssetsHolder=l,this.eventTarget=new EventTarget,this.pageRenderedPromise=null,this.skipSetPreviewedNode=s||!1,r.skipPreviewUpdateListener||(0,g.g)(async e=>{let r=await (0,T.c3)(this.website,e);this.website=r,this.sendMessage("pushPageData",{website:{...this.website,flatteningTypes:void 0}})}),e.addPopStateListener(e=>{this.sendMessage("setLocation",{historyState:e})}),e.addRefreshListener(()=>{this.sendMessage("refresh",{})}),this.options=r,this.sendMessage("setOptions",{options:r});let d=this.showLayoutDebugStyles.bind(this);N.addEventListener("showLayoutDebugStyles",d),this.removeListeners=()=>{N.removeEventListener("showLayoutDebugStyles",d)}}set files(e){for(let[r,n]of(this.website&&(this.website.files=e),Object.entries(e)))this.imageAssetsHolder?.set(r,n)}setupMessageChannel(){this.messageChannel=new MessageChannel,this.messagePort=this.messageChannel.port1,this.sitesMessagePort=new w.J(this.messagePort,{status:e=>{this.eventTarget.dispatchEvent(new CustomEvent("status",{detail:e})),e.isReady&&this.onIframeReady?.(),e.error&&(console.error("[SitesPreview] ready: "+e.isReady+(e.error?", error: "+e.error:"")),(0,C.X)({name:"status_error",message:e.error,origin:"status",reduxState:p.D?.getState()}))},getPage:e=>this.getPage(e.url),pageRendered:e=>{e.url&&this.eventTarget.dispatchEvent(new CustomEvent("pageRendered",{detail:e}))},historyPush:e=>{this.history.push(e.historyState)},historyBack:()=>{this.history.back()},historyForward:()=>{this.history.forward()},requestClose:()=>{this.onCloseRequested?.()},nodeDebugInformation:e=>{let r=d.zl.get(y.f);r&&(r.nodeByGuidMap[e.materializedNode.id]=e.materializedNode,d.zl.set(y.f,{currentRoot:r.currentRoot,nodeByGuidMap:r.nodeByGuidMap}))},runtimeExpansionError:e=>{e.missingKeys.forEach(r=>{u.az.trackDefinedEvent("sites.runtime_expansion_error",{error:"missingKey",field:r}),e.extraKeys.forEach(e=>{u.az.trackDefinedEvent("sites.runtime_expansion_error",{error:"extraKey",field:e})}),e.differentKeys.forEach(e=>{u.az.trackDefinedEvent("sites.runtime_expansion_error",{error:"differingKey",field:e.key})})})},perfEvent:e=>{this.perfTracker.record(e.eventName)},testingMaterializedNodeProps:e=>{this.eventTarget.dispatchEvent(new CustomEvent("testingMaterializedNodeProps",{detail:e}))},renderComponentSuccess:()=>{(0,S.o7)(this)},renderComponentError:e=>{(0,S.o7)(this),e.error&&this.onError?.(e.error),(0,C.X)({name:e.error.name,message:e.error.message,origin:"render-component-error",reduxState:p.D?.getState()})},handleConsoleLog:e=>{this.onConsoleLog?.(e.type,e.message)},handleReactError:e=>{if((0,h.nl)())throw console.error("Caught error from sites preview",e.error.name,e.error.message),e;(0,C.X)({name:e.error.name,message:e.error.message,origin:"handle-react-error",boundary:e.boundary,reduxState:p.D?.getState()})},focusEvent:async e=>{let r=d.zl.get(S._b);if(!r||"modal"!==r.mode)return;let{type:n}=e;await new Promise(e=>requestAnimationFrame(e)),"focus"===n?d.zl.set(S.q9,S.Dw.Iframe):"blur"===n&&d.zl.set(S.q9,S.Dw.None)},resize:e=>{this.eventTarget.dispatchEvent(new CustomEvent("resize",{detail:e}))},updateMaterializationErrors:e=>{d.zl.set(I,e.errors)},inspectElementEvent:e=>{this.onInspectElementEvent&&this.onInspectElementEvent(e)}})}fetchMaterializedNodeProps(){return this.fetchMaterializedNodePropsPromise?this.fetchMaterializedNodePropsPromise:new Promise(e=>{this.eventTarget.addEventListener("testingMaterializedNodeProps",r=>{e(r.detail),this.fetchMaterializedNodePropsPromise=null},{once:!0}),this.sendMessage("testingRequestMaterializedNodePropsMessage",{method:"testingRequestMaterializedNodePropsMessage"})})}oncePageRendered(){return this.pageRenderedPromise||(this.pageRenderedPromise=new Promise(e=>{this.eventTarget.addEventListener("pageRendered",r=>{this.pageRenderedPromise=null,e(r.detail)},{once:!0})})),this.pageRenderedPromise}once(e){return new Promise(r=>{this.eventTarget.addEventListener(e,e=>{this.pageRenderedPromise=null,r(e.detail)},{once:!0})})}debugGetMaterializedTree(e,r){return this.sendMessage("materializationDebug",{website:e,url:r})}sendMessage(e,r){return this.sitesMessagePort.sendMessage(e,r)}getPage(e){return new Promise(async(r,n)=>{if("/_snapshot"===e||"/_sandbox"===e)return;let i=(0,b.sF)(e,this.options.useGuidUrls);if(!i)return n(Error(`Could not load page. Id for url not found ${e}`));this.perfTracker.record("bundle_generation_start");let{bundle:s,assetInstructions:d}=await (0,T.LE)([i],this.options.neverCombineSVGAndPNG);if(this.perfTracker.record("bundle_generation_stop"),this.website=s,this.options.generateFullAssets&&(this.files=await (0,v.Ct)(d)),(0,c.k)().internal_only_debug_tools&&console.log("Generated site result:",s),this.skipSetPreviewedNode||new o.vNG((0,l.UN)().scene).sitesPreviewObserverReference().setPreviewedNodeID(i),r({website:s}),this.perfTracker.record("asset_generation_start",{totalAssetInstructions:d.length}),!this.options.generateFullAssets)for(let e of(0,v.BG)(d,this.options.ignorePreviewClosedWhenGeneratingAssets??!1)){let r=await e;if(r){let{files:e,totals:n}=r;this.perfTracker.updateStats({totalAssetFiles:Object.keys(e).length,totalAssetCacheHits:n.cacheHits,totalFillAssets:n.fillAssets,totalFlattenedFillAssets:n.flattenedFills,totalGeneratedAssetImages:n.generatedImages,totalGeneratedAssetSvgs:n.generatedSvgs}),(0,a.vA)(!!this.website,"Website data not set. Unable to add asset files."),this.files={...this.website.files,...e},setTimeout(()=>{this.sendMessage("pushAssetData",{files:e})},0)}}this.perfTracker.record("asset_generation_stop"),(0,S.o7)(this),this.onReceiveHTML&&setTimeout(async()=>{let e=await this.sendMessage("getHTML",{});this.onReceiveHTML&&this.onReceiveHTML({html:e.html,styles:e.styles})},500)})}async debugCompareLayout(e,r,n){let o=this.clonedNodes.get(e);o?.clone||(o=new R((0,b.sF)(e)),(0,a.vA)(!!o.clone));let s=await (0,i._p)({id:o.clone.guid},r,n,{threshold:1});this.sendMessage("setDebugStyles",{debugStyles:(0,i.q5)(s)}),o.remove()}get iframe(){return this._iframe}mount(e){this._iframe=e;let r=new URL(Fig.previewIframeURL||"/webpack/preview_iframe.js",document.baseURI).href;e.onload=()=>{let n=()=>{e.contentWindow.postMessage({type:"iframe-init",initScriptURL:r,previewIframeInitialOptions:function({renderOptions:e}){let r=(0,m.Ay)();return{cluster_name:r.cluster_name,release_manifest_git_commit:r.release_manifest_git_commit,user_id:r.user_data?.id,org_id:r.org_id,local_dev_on_cluster:r.local_dev_on_cluster,frontend_sentry_dsn:r.frontend_sentry_dsn,file_key:d.zl.get(f.ze),render_options:JSON.stringify(e),reporting_domain:(0,u.Rz)()}}({renderOptions:{compactDOM:this.options.compactDOM}})},"*",[this.messageChannel.port2])};try{n()}catch(e){if("DataCloneError"===e.name){this.setupMessageChannel(),n(),this.sendMessage("setLocation",{historyState:{url:this.history.current.url}});return}throw e}}}unmount(){(0,g.g)(null),this.removeListeners(),this._iframe=null}setOptions(e){this.options!==e&&(this.options=e,this.sendMessage("setOptions",{options:e}))}async unsafeEval(e,...r){if(!(0,h.lZ)())throw Error("unsafeEval is only available in interaction tests");"function"==typeof e&&(e=`(${e.toString()}).apply(this, ${JSON.stringify(r)})`);try{return(await this.sendMessage("unsafeEval",{code:e})).data}catch(e){return String(e)}}snapshotDOMToPNG({code:e,exportName:r,width:n,height:i,minWidth:a,maxWidth:o,minHeight:s,maxHeight:l,props:c,styles:d,instanceSwapProps:u,referencedWebsiteBundle:p,withBaseStyles:m,activeBreakpoint:h}){return this.sendMessage("snapshotDOMToPNG",{code:e,exportName:r,width:n,height:i,minWidth:a,maxWidth:o,minHeight:s,maxHeight:l,props:c,styles:d,instanceSwapProps:u,referencedWebsiteBundle:p,withBaseStyles:m,activeBreakpoint:h})}renderComponent({code:e,props:r,nodeId:n,codeExportName:i,styles:a,withBaseStyles:o,instanceSwapPropertyGuids:s,referencedWebsiteBundle:l,activeBreakpoint:c}){this.sendMessage("renderComponent",{nodeId:n,codeExportName:i,code:e,styles:a,props:r,withBaseStyles:o,instanceSwapPropertyGuids:s,referencedWebsiteBundle:l,activeBreakpoint:c})}analyzeCodeFile({code:e}){return this.sendMessage("analyzeCodeFile",{code:e})}async showLayoutDebugStyles(){let e=this.history.current.url,{elementData:r,windowSize:n}=await this.sendMessage("getElementLayoutData",{});this.debugCompareLayout(e,r,n)}}class R{constructor(e){this.clone=s.l7.system("sites-debug-compare-layout",()=>(0,l.UN)().get((0,l.UN)().get(e).clone())),setTimeout(()=>{this.remove()},1e3)}remove(){this.clone,s.l7.system("sites-debug-compare-layout",()=>{this.clone?.removeSelfAndChildren()}),this.clone=null}}},182188:(e,r,n)=>{n.d(r,{P4:()=>s}),n(952423);var i=n(39773),a=n(379338),o=n(792478);n(401822);let s=(0,i.eU)(!0);(0,o.Wh)(()=>(0,i.eU)(null)),(0,i.eU)((0,a.Ay)().sites_template_picker_urls??void 0),(0,i.eU)({type:"text",id:"explore",text:"Explore"})},36789:(e,r,n)=>{n.d(r,{Jh:()=>o,Oc:()=>a,aI:()=>i});let i=n(187536).aI;n(187536).u9;let a=n(187536).Oc,o=n(187536).Jh},988707:(e,r,n)=>{n.d(r,{s0:()=>i,sm:()=>a}),n(741419),(0,n(39773).eU)(!1);let i=n(470199).s0,a=n(470199).sm;n(184054).h0},316153:(e,r,n)=>{n.d(r,{IU:()=>a,Kk:()=>l,Mq:()=>c,bC:()=>o,jT:()=>s});var i=n(848318);let a=n(714067).IU;n(251511).V,n(251511).Y;let o=n(691354).b;n(786074).p4,n(786074).zL,n(800545).zb;let s=n(800545).jT;n(800545).K8;let l=n(955268).K;n(85072).UM,n(85072).B3,n(85072).mm,n(264015).A,i.createContext(void 0),n(20614).z;let c=n(546504).Tl},810175:(e,r,n)=>{n.d(r,{E:()=>i});var i=(e=>(e.FJ_SELECTION="figjam-selection-inline-menu",e.FJ_SHARE_MODAL="figjam-share-modal",e.FJ_PAGE_MENU="figjam-page-context-menu",e.FJ_FILE_MENU="figjam-file-editor-menu",e.SLIDES_TEMPLATE="slides-template",e))(i||{})},816637:(e,r,n)=>{var i=n(757033);(0,n(53818).n)(async({fileKey:e,fileVersion:r,selectedGuids:n})=>{if(!r)throw Error("Missing file version");let a=function({fileKey:e,fileVersion:r,selectedGuids:n}){return`/api/file_proxy/file/${e}/canvas?fv=${r}${n?.length?`&nodes_to_extract=${n.join(",")}`:""}`}({fileKey:e,fileVersion:r,selectedGuids:n});return(await i.Ay.post(a,{fv:`${r}`},{responseType:"arraybuffer"})).data})},132229:(e,r,n)=>{n.d(r,{d:()=>m});var i=n(848318),a=n(185067),o=n(235441),s=n(727341),l=n(369600),c=n(850945),d=n(53818),u=n(973128),p=n(345466);function m(){let e=(0,o.Em)(),r=(0,s.GS)(),n=(0,l.Kf)(),i=(0,c.y)().transform(e=>e?.canCreateSlidesFile).unwrapOr(!1);return!!e&&!!r&&!!i&&!!n}(0,d.n)(()=>{let e=m(),r=(0,p.N)(),n=(0,a.Tv)(),o=(0,u.A)();return(0,i.useMemo)(()=>!!e&&(n.length?!!o.length:r.size>0),[e,n.length,r.size,o.length])})},468425:(e,r,n)=>{n.d(r,{sO:()=>o});var i=n(716544);n(808471),n(461665),n(166917),n(207669);var a=n(101573);function o(){return(0,i.d4)(e=>(0,a.P)(e.selectedView))}},861662:(e,r,n)=>{n.d(r,{Jb:()=>m,Wj:()=>h,Xe:()=>_,_Q:()=>g});var i=n(848318),a=n(716544),o=n(741419),s=n(897392),l=n(179703),c=n(575058),d=n(51910),u=n(207715),p=n(166917);function m(){let e=(0,a.d4)(e=>e.mirror.sceneGraphSelection);return(0,i.useMemo)(()=>{let r=new Set;Object.keys(e).forEach(e=>{let n=(0,l.UN)().get(e),i=n?.containingSlideId;i&&(0,s.fn)((0,s.sH)(i))&&r.add(i)});let n=Array.from(r);return 1===n.length?n[0]:null},[e])}function h(){let e=(0,d.KH)();return(0,c.k9)(()=>{let r=(0,l.UN)();return e&&r?Object.keys(e).filter(e=>r.get(e)?.isSlideOrTemplate()??!1):[]},[e])}function _(){let e=(0,u.J2)(o.Ez5.canvasGrid().canvasGridArray).flat();return(0,p.Fk)((e,r)=>{for(let n of r){let r=e.get(n);if(!r?.isSkippedSlide)return n}return null},e)}function g(){let e=function(){let e=(0,u.J2)(o.Ez5.canvasGrid().canvasGridArray).flat(),r=new Set(function(){let e=(0,d.KH)();return(0,c.k9)(()=>{let r=(0,l.UN)(),n=new Set;return Object.keys(e).forEach(e=>{let i=r.get(e)?.containingSlideId;i&&n.add(i)}),Array.from(n.values())},[e])}());if(!e.length||!r.size)return[];let n=[];for(let i of e)if(r.has(i)&&(n.push(i),r.delete(i)),0===r.size)break;return n}();return(0,p.Fk)((e,r)=>{for(let n of r){let r=e.get(n);if(!r?.isSkippedSlide)return n}return null},e)}},345466:(e,r,n)=>{n.d(r,{N:()=>o});var i=n(741419),a=n(207715);function o(){let e=i.Ez5.slideLikeNodeObserverState();return(0,a.ut)(e?.slideLikeNodeIdsOnCanvas,new Set([]))}},973811:(e,r,n)=>{n.d(r,{$u:()=>E,oY:()=>f,rY:()=>g});var i=n(848318),a=n(716544),o=n(741419);n(897392),n(179703);var s=n(157907),l=n(39773),c=n(442313),d=n(697714);n(232843);var u=n(207715),p=n(166917),m=n(778727),h=n(982558);n(49392);var _=n(102997);function g(e){return e.reduce((e,r)=>e.concat(r),[])}function f(e,r){let n=o.Ez5.singleSlideView().focusedSlideId.getCopy(),{row:i,col:a}=o.Ez5.getInsertGridCoord({x:-1/0,y:-1/0}),s=(0,_.Sz)(i,a,r,!1);if(!s)return"";o.Ez5?.singleSlideView()?.isSingleSlideViewEnabled()&&o.Ez5.singleSlideView().focusSlideInSingleSlideView(s,!0);let l=e.get(s),c=e.get(n);return l&&c?.sourceLibraryKey&&(l.sourceLibraryKey=c.sourceLibraryKey),o.Egt.replaceSelection([s],!0),s}function E(){let e=(0,a.wA)(),{numSkippedSlides:r,numTotalSlides:n}=function(){let e=(0,u.ut)(o.Ez5?.canvasGrid().canvasGridArray,[]);return(0,p.wA)((e,r)=>r.flat().reduce(({numSkippedSlides:r,numTotalSlides:n},i)=>{let a=e.get(i);return a&&(n+=1,a.isSkippedSlide&&(r+=1)),{numSkippedSlides:r,numTotalSlides:n}},{numSkippedSlides:0,numTotalSlides:0}),e)}(),_=(0,h.Xm)(),g=(0,l.md)((0,m.y6)(_)).productComponents.modified.erroneous;return(0,i.useCallback)(i=>{let a=o.Ez5?.canvasGrid().anySymbolsInSlides();0===n?e(d.F.enqueue({message:(0,c.t)("file_permissions_modal.share_as.publish_template_slides_error_no_slides"),onDismiss:()=>{}})):r>0?e(d.F.enqueue({message:(0,c.t)("file_permissions_modal.share_as.publish_template_slides_error_skipped_slides"),onDismiss:()=>{}})):g.length>0?e(d.F.enqueue({message:(0,c.t)("file_permissions_modal.share_as.publish_template_variant_error_slides"),onDismiss:()=>{}})):!(0,s.k)().piper_components_v2&&a?e(d.F.enqueue({message:(0,c.t)("file_permissions_modal.share_as.publish_template_slides_error_symbol_in_slide"),onDismiss:()=>{}})):i()},[e,g.length,r,n])}},550764:(e,r,n)=>{n.d(r,{R4:()=>i,w1:()=>a,wl:()=>o});let i="slides-template-preview",a="slides-template-publish-item",o="agreed_to_slides_ai_terms"},943808:(e,r,n)=>{n.d(r,{j:()=>F});var i=n(848318),a=n(157907),o=n(39773),s=n(831932),l=n(654104),c=n(474880),d=n(950738),u=n(661780),p=n(733166),m=n(554974),h=n(386608),_=n(600471),g=n(112246),f=n(936365),E=n(646572),y=n(716544),b=n(897378),v=n(647035),T=n(896966),I=n(442313),S=n(110979),w=n(834996),A=n(834111),C=n(241917),N=n(503024);function L(){let e=(0,w._6)(),r=(0,y.Pj)(),n=(0,y.wA)(),a=(0,A.U2)(e),o=i.useCallback(()=>{if(!a){(0,T.x1)("OpenInSlidesEditorButton","No fileKey found for view",{selectedView:e},{reportAsSentryError:!0});return}let i=(0,A.xS)(r.getState(),{view:"fullscreen",fileKey:a,editorType:C.nT.Slides});n(S.V3({url:i}))},[n,a,e,r]);return i.createElement(b.K,{"aria-label":(0,I.t)("viewer.menu_bar.open_in_figma_slides"),onClick:o,htmlAttributes:{"data-tooltip":(0,I.t)("viewer.menu_bar.open_in_figma_slides"),"data-tooltip-type":N.Ib.TEXT}},i.createElement(v.E,null))}var O=n(207520),R=n(644388),P=n(652402);function D({showComments:e,recordingKey:r}){let n=(0,y.wA)(),a=(0,I.t)("viewer.menu_bar.add_comment",{padding:"    ",shortcut:"C"});return i.createElement(O.f,{onChange:()=>{e?n(P.BZ()):n(P._b())},"aria-label":a,recordingKey:r,onIcon:i.createElement(R.f,null),offIcon:i.createElement(R.f,null),variant:"highlighted",checked:e,htmlAttributes:{"data-tooltip":a,"data-tooltip-type":N.Ib.TEXT,"data-testid":"prototype-header-comments-button"}})}var M=n(454783),k=n(107247);function F({file:e,fadeBehavior:r,showProgressBar:n,showComments:y,multiplayer:b,recordingKey:v,shouldShowUI:T}){let I=(0,u.iZ)(),S=(0,d.Um)(),w=i.useRef(null),A=(0,c.ck)(),C=(0,h.dH)(),N=(0,s.o4)(),O=(0,o.md)(m.jH),R=(0,o.md)(m.M);return i.createElement(f.D,{fileName:e.name,headerRef:w,fadeBehavior:r,showProgressBar:n,shouldShowUI:T||"loading"===R||O,rightColumn:i.createElement(i.Fragment,null,b&&i.createElement(p.Cv,{dropdownShown:S,multiplayer:b,user:I}),i.createElement("div",{className:M.fi},(!C||A)&&i.createElement(i.Fragment,null,i.createElement("div",{className:k.LY},i.createElement(D,{showComments:y,recordingKey:l.Pt(v,"comments-button")})),i.createElement("div",{className:k.LY},i.createElement(L,null))),!N&&(0,a.k)().prototype_preload_offline&&i.createElement(g.w,null),i.createElement("div",{className:k.LY},i.createElement(E.A,null))),i.createElement(_.o,{headerRef:w,file:e}))})}},600471:(e,r,n)=>{n.d(r,{o:()=>_});var i=n(848318),a=n(716544),o=n(44509),s=n(691191),l=n(736248),c=n(442313),d=n(449737),u=n(87089),p=n(661780),m=n(808765),h=n(721449);function _({headerRef:e,file:r}){let n=(0,p.iZ)(),_=(0,u.sZ)(),g=(0,a.wA)(),[f,E]=i.useState((0,c.t)("viewer.menu_bar.share")),[y,b]=i.useState((0,c.t)("viewer.menu_bar.log_in"));return(0,s.wY)(e,({width:e})=>{e>970?(E((0,c.t)("viewer.menu_bar.share_presentation")),b((0,c.t)("viewer.menu_bar.log_in_or_create_account"))):(E((0,c.t)("viewer.menu_bar.share")),b((0,c.t)("viewer.menu_bar.log_in")))}),i.createElement(h.wh,{user:n,shareText:f,loginText:y,file:r,showDefaultAuthModal:()=>{g(l.Ts({origin:"prototype_header_nav",redirectUrl:o.Ay.location.pathname})),g(d.to({type:m.x,data:{}}))},sharingDisabled:_?.is_slides_disabled})}},112246:(e,r,n)=>{n.d(r,{w:()=>d});var i=n(848318),a=n(897378),o=n(397257),s=n(39773),l=n(554974),c=n(107247);function d({onPreloadStart:e}){let r=(0,s.md)(l.M),n=(0,l.s7)(e);return"none"===r?i.createElement("div",{className:c.LY},i.createElement(a.K,{onClick:n.callback,"aria-label":n.displayText},i.createElement(o.b,null))):i.createElement(l.ez,{isSlides:!0})}},936365:(e,r,n)=>{n.d(r,{D:()=>w});var i=n(848318),a=n(716544),o=n(897378),s=n(364493),l=n(536384),c=n.n(l),d=n(322035),u=n(44509),p=n(308746),m=n(166365),h=n(975806),_=n(442313),g=n(667323),f=n(834697),E=n(216986),y=n(503024),b=n(386608),v=n(454783),T=n(107247),I=n(688699);let S=(0,f.ck)();function w({fileName:e,headerRef:r,showProgressBar:n,fadeBehavior:o,disableHeaderFade:s,shouldShowUI:l,hideTopLeftIcon:d,headerClassName:u,leftColumn:p,rightColumn:m}){let f=(0,a.wA)(),y=(0,b.dH)(),I=e=>{e.preventDefault(),f((0,E._P)({name:"Prototype Logo Clicked"})),f((0,g.eH)())};return n?i.createElement("div",{className:v.uH},!d&&i.createElement(A,{onClick:I})):i.createElement(h.S.div,{className:c()(v.wx,u,{[v.Wc]:!l&&!s}),ref:r,role:"region","aria-label":(0,_.t)("viewer.menu_bar.accessible_label"),onBlurCapture:o?.handleHeaderOrFooterBlur,onFocusCapture:o?.handleHeaderOrFooterFocus,onMouseMove:o?.handleHeaderOrFooterMove,onMouseDown:e=>{e.stopPropagation()}},i.createElement("div",{className:v.Cd},!d&&i.createElement(A,{onClick:I}),(!y||S)&&i.createElement("h1",{className:c()(d?T.Y_:T.DD),dir:"auto"},e),p),i.createElement("div",{className:v.SP}),i.createElement("div",{className:c()(v.DK,T.DK)},m))}function A({onClick:e}){return d.GZ()&&!S&&null==(0,p.qg)(u.Ay.location.search).fullscreen?i.createElement("a",{"aria-label":(0,_.t)("proto.file_browser"),href:"/",onClick:e,className:v.m_},i.createElement(m.B,{svg:I.A})):i.createElement("div",{className:c()(T.LY,v.kT)},i.createElement(o.K,{onClick:e,"aria-label":(0,_.t)("proto.file_browser"),htmlAttributes:{"data-tooltip":(0,_.t)("proto.file_browser"),"data-tooltip-type":y.Ib.TEXT}},i.createElement(s.m,null)))}},646572:(e,r,n)=>{n.d(r,{A:()=>h});var i=n(848318),a=n(716544),o=n(897378),s=n(964102),l=n(417209),c=n(322035),d=n(303035),u=n(442313),p=n(972574),m=n(503024);function h(){let e;let r=(0,a.wA)(),n=(0,a.d4)(e=>e.appWindow.inFullScreenMode),h=c.R7.fullscreen?()=>{r((0,p._M)())}:d.lQ,_=c.R7.fullscreen;return e=_?n?(0,u.t)("viewer.menu_bar.exit_full_screen",{shortcut:"F"}):(0,u.t)("viewer.menu_bar.enter_full_screen",{shortcut:"F"}):(0,u.t)("viewer.menu_bar.full_screen_is_not_supported_by_this_browser"),i.createElement(o.K,{"aria-label":e,onClick:h,disabled:!_,htmlAttributes:{"data-tooltip":e,"data-tooltip-type":m.Ib.TEXT}},n?i.createElement(s.p,null):i.createElement(l.O,null))}},273176:(e,r,n)=>{n.d(r,{CK:()=>T,NQ:()=>v,PG:()=>w,Vz:()=>S,o9:()=>A,rR:()=>I});var i=n(848318),a=n(716544),o=n(308769),s=n(741419),l=n(673906),c=n(157907),d=n(39773),u=n(543072),p=n(926252),m=n(992444),h=n(718451),_=n(207694),g=n(52004);n(773422);var f=n(51910),E=n(483372);n(554386),n(569571);var y=n(541910),b=n(70629);function v(e){return{type:"SOLID",color:{...e,a:1},opacity:e.a,blendMode:"NORMAL"}}function T(){let[e]=(0,g.lJ)("imageOverlayPaint");return i.useCallback((r,n)=>{_.Tm.clearCache();let i=[r];e&&(0,h.hS)(e)&&i.push(e),m.Y5.updateSelectionProperties({fillPaints:i},{shouldCommit:n})},[e])}function I(e){let r=(0,d.md)(b.E_);return i.useCallback((n,i)=>{r&&n.color?l.l7.user("slides-edit-theme-color",()=>S(r.varId,r.modeId,n)):e(n,i)},[r,e])}function S(e,r,n){s.CWU.setVariableValueForMode(e,r,{type:s.Z_n.COLOR,resolvedType:s.rXF.COLOR,value:{...n.color,a:n.opacity??1}})}function w(e){let r=(0,a.wA)(),n=(0,d.md)(b.E_);return i.useCallback(async i=>{let a=await r((0,p.Oe)(i)),d=o.sD.fromString(a);d&&(n?l.l7.user("slides-edit-theme-color",()=>{(0,c.k)().piper_theme_variable_alias?s.CWU.setVariableValueForMode(n.varId,n.modeId,(0,y.y$)(s.rXF.COLOR,a)):s.Ez5.slideThemeLibBindings().setThemeColorVariableFromSubscribedVariableColorValue(n?.varId||"",n?.modeId||"",a)}):e({type:"SOLID",opacity:1,visible:!0,blendMode:"NORMAL",colorVar:{value:{alias:o.sD.toKiwi(d)},dataType:"ALIAS",resolvedDataType:"COLOR"}},E.zk.YES))},[r,n,e])}function A(e,r){let n=(0,a.wA)(),o=(0,d.md)(b.E_),s=(0,f.eY)();return i.useCallback((i,a)=>{o?n((0,p.nh)({style:i,callback:e=>{let n=s.get(e),i=(0,u.AW)(n?.fills);i&&r&&l.l7.user("slides-edit-theme-color",()=>r(o.varId||"",o.modeId||"",v(i)))}})):n(p.AV({style:i,inheritStyleKeyField:e,fromSearch:a?.fromSearch}))},[n,o,e,s,r])}n(133731),n(207669)},963521:(e,r,n)=>{n.d(r,{qm:()=>h});var i=n(848318);n(716544);var a=n(376025);n(741419),n(673906),n(897392),n(39773);var o=n(536384),s=n.n(o);n(543072);var l=n(379338),c=n(654104),d=n(808471);n(63370),n(687012),n(566699);var u=n(17755);n(442313),n(667323),n(318672),n(129102),n(718451),n(950738);var p=n(503024);n(651620),n(6760),n(70629),n(133731),n(207669),n(273176),n(67533);var m=n(887835);(0,l.ck)("bdf32fe13fe9a9be5b40c3de4a18572f14c9a1eb");function h({backgroundString:e,opacity:r,tooltipText:n,tooltipSubtext:o,onClick:l,onContextMenu:h,isSelected:_,editIcon:g,showEditIcon:f,isEditing:E,onClickEdit:y,recordingKey:b}){let v=(0,c.rf)(b,"contextmenu",e=>{h&&h(e)});return i.createElement("div",{className:s()(m.k8,{[m.wH]:_}),"data-tooltip-type":p.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":n,"data-tooltip-subtext":o,"data-tooltip-text-inline":!0,"data-testid":b},g&&f&&y&&i.createElement(a.E,{className:s()(m.Lq,{[m.Sn]:E,[m.Qo]:(0,d.nl)()}),onClick:e=>{if((0,d.nl)())y();else{let r=e.currentTarget.getBoundingClientRect(),n=r.width/2,i=r.left+n,a=r.top+n;Math.pow(e.clientX-i,2)+Math.pow(e.clientY-a,2)<=n*n&&y()}},recordingKey:c.Pt(b,"edit")},g),i.createElement(a.E,{htmlAttributes:{onContextMenu:v},onClick:l,className:u.s.w24.h24.relative.$,recordingKey:b,"aria-label":e},i.createElement("div",{className:m.Le,style:{background:e}}),i.createElement("div",{className:m.f$,style:{opacity:void 0!==r?1-r:0}})))}},67533:(e,r,n)=>{n.d(r,{Ph:()=>ei,jP:()=>Z});var i=n(848318),a=n(716544),o=n(897378),s=n(707005),l=n(376025),c=n(86778),d=n(278599),u=n(846153),p=n(741419),m=n(673906);n(629829);var h=n(157907),_=n(39773),g=n(536384),f=n.n(g),E=n(665767),y=n(303035),b=n(654104),v=n(687012),T=n(282424),I=n(17755),S=n(442313),w=n(992444),A=n(933270),C=n(577023),N=n(207694),L=n(52004),O=n(773422),R=n(950738),P=n(51910),D=n(79563),M=n(931516),k=n(483372),F=n(503024),x=n(781806),U=n(102494),B=n(977219),V=n(90727),G=n(513807),H=n(429206),K=n(931641),W=n(243315),z=n(6760),$=n(273176),Y=n(70629),j=n(133731),q=n(207669),X=n(887835);let Z=U.qo,J={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:1,blendMode:"NORMAL"};var Q=(e=>(e[e.COLOR=0]="COLOR",e[e.GRADIENT=1]="GRADIENT",e))(Q||{});function ee(){return i.createElement(o.K,{actionOnPointerDown:!0,onClick:p.t2E?.rotateGradient90Degrees,"aria-label":(0,S.t)("fullscreen.properties_panel.gradient_picker.rotate_90"),htmlAttributes:{"data-tooltip":(0,S.t)("fullscreen.properties_panel.gradient_picker.rotate_90"),"data-tooltip-type":F.Ib.TEXT}},i.createElement(c.R,null))}function et({editVar:e}){let r=i.useCallback(()=>m.l7.user("slides-delete-theme-color",()=>{e&&p.CWU?.deleteVariable(e.varId)}),[e]);return e?i.createElement(o.K,{onClick:r,"aria-label":(0,S.t)("slides.properties_panel.color_picker.delete_template_color")},i.createElement(d.i,null)):null}function er({title:e,editVar:r,closeButton:n}){return i.createElement("div",{className:I.s.bSolid.bb1.colorBorder.$},i.createElement("div",{className:I.s.flex.justifyBetween.itemsCenter.pl16.pr8.pb8.pt8.$},i.createElement("p",{className:I.s.textBodyMediumStrong.$},e),i.createElement("div",{className:I.s.flex.gap8.$},i.createElement(et,{editVar:r}),n)))}function en({paint:e,onChange:r}){let n=(0,N.bn)(e.type),a=(0,N.x$)(e);return n&&a?i.createElement("div",{className:I.s.flex.pl8.$},i.createElement(ee,null),i.createElement(V.n,{gradientPaint:a,onChange:r})):null}function ei({paint:e,onChange:r,onClose:n,initialPosition:l,enableGradients:c,hideCustomColorPickerFillTypeToggle:d,inheritStyleKeyField:m}){let g=(0,$.PG)(r),f=(0,$.o9)(m,$.Vz),E=["custom_color","library"],[T,I,A]=s.t.useTabs({custom_color:E.includes("custom_color"),library:E.includes("library")},{defaultActive:()=>"custom_color"}),C=(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),O=(0,L.kl)("numSelectedByType"),R=i.useMemo(()=>{if(O)return(0,W.aZ)(p.rrT.FILL,O)},[O]),P=(0,q.s1)(),D=(0,j.UZ)(P),M=(0,_.md)(Y.E_),k=(0,B.X7)(),F=i.useMemo(()=>{if((0,h.k)().piper_theme_variable_alias){if(!M)return(0,H.L)(e);{let e=ec(M.varId)?.modeValues[D];if(e&&e.type===p.Z_n.ALIAS)return ec(e.value)}}return null},[M,e,D]),x=i.useMemo(()=>new Set,[]),U=i.useCallback(()=>{C===p.m1T.GRADIENT&&w.Y5.triggerAction("leave-edit-mode"),n()},[C,n]),V="slidesCustomColorPicker",G=i.createElement(o.K,{onClick:U,recordingKey:b.Pt(V,"colorPickerModalHeader","closeButton"),"aria-label":(0,S.t)("common.close")},i.createElement(u.A,null)),X=(0,N.bn)(e.type),J=!!(M||X&&k),Q=M?(0,S.t)("slides.properties_panel.text_style.edit_template_color"):X?(0,S.t)("slides.properties_panel.fill.fill_type_gradient"):null;return i.createElement(v.k,{name:"slides_custom_color_picker"},i.createElement(z.vx,{initialPosition:l,onClose:U,initialWidth:Z,recordingKey:V},i.createElement(ea,{tabManager:A,tabProps:T,actionButtons:i.createElement(en,{paint:e,onChange:r}),showNewUI:k,showTitleHeader:J,titleHeader:i.createElement(er,{title:Q,editVar:M,closeButton:G}),closeButton:G}),i.createElement(s.t.TabPanel,{...I.custom_color},i.createElement(eo,{paint:e,onPaintChange:r,enableGradients:c,recordingKey:"slidesCustomColorPicker",hideCustomColorPickerFillTypeToggle:d})),i.createElement(s.t.TabPanel,{...I.library},i.createElement(K.Rp,{selectedItem:F,resolvedType:p.rXF.COLOR,disabledVariableIds:x,pickerType:"color-picker",recordingKey:b.Pt("slidesCustomColorPicker","libraryColors"),onVariableSelected:g,onStyleSelected:f,onClose:y.lQ,variableScopes:R})),i.createElement(el,{recordingKey:b.Pt(V,"rename")})))}function ea({tabManager:e,tabProps:r,actionButtons:n,closeButton:a,showNewUI:o,showTitleHeader:l,titleHeader:c}){return i.createElement("div",{className:f()({[I.s.bSolid.bb1.colorBorder.$]:o})},l&&c,i.createElement("div",{className:I.s.flex.justifyBetween.p8.$},i.createElement(s.t.TabStrip,{manager:e},i.createElement(s.t.Tab,{...r.custom_color},(0,S.tx)("fullscreen.properties_panel.color_picker.custom")),i.createElement(s.t.Tab,{...r.library},(0,S.tx)("fullscreen.properties_panel.color_picker.libraries"))),l&&n,!l&&a),!l&&i.createElement("div",{className:"xv42yna x1kgkb76 x1y1aw1k xwib8y2"},n))}function eo({paint:e,onPaintChange:r,enableGradients:n,recordingKey:o,hideCustomColorPickerFillTypeToggle:s}){let l=(0,a.wA)(),c=(0,R.Um)(),d=(0,P.dH)(),u=(0,A.Ep)(),m=(0,E.C)(),h=(0,C.Ku)(),_=(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),g=i.useRef(null),[f,y]=i.useState((0,N.bn)(e.type)?1:0),b=(0,N.Ou)(e),v=(0,N.x$)(e),T=(0,P.p8)("currentSelectedGradientStop"),I=(0,N.iC)(b||v||J,T),S=n=>{e.type!==n&&r(N.Tm.initPaint(n,J.color,e,"slides-custom-color-picker"),!(0,N.bn)(e.type)&&(0,N.bn)(n)?k.zk.NO:k.zk.YES)};return i.createElement(i.Fragment,null,!s&&n&&i.createElement(es,{panelType:f,onPanelTypeChange:e=>{f!==e&&(S(0===e?"SOLID":"GRADIENT_LINEAR"),y(e),1===e?w.Y5.triggerAction("toggle-gradient-edit-mode"):_===p.m1T.GRADIENT&&w.Y5.triggerAction("leave-edit-mode"))},recordingKey:o}),n&&1===f&&v&&i.createElement(x.vL,{name:"Slides color picker",ref:g,handleKeyDown:e=>{v&&(0,B.T_)(e,v,_,T,r)},focusOnMount:!0,forceUpdate:m},i.createElement("div",{className:X.Xr},i.createElement(G.i,{paint:v,onChange:r,currentSelectedGradientStop:T,colorProfile:u,hasFocus:!!g.current&&g.current.hasFocus(),dispatch:l,recordingKey:o}))),i.createElement(U.S7,{canAcceptStyles:!1,canAcceptVariables:!1,color:I,colorFormat:h,currentTool:d,dispatch:l,displayType:U.sX.FULL,dropdownShown:c,dropperDisabled:!1,onColorChange:(n,i)=>{(0,B.n8)(n,e,T,r,i)},recordingKey:o}))}function es({panelType:e,onPanelTypeChange:r,recordingKey:n}){let a=[{type:0,label:(0,S.t)("slides.properties_panel.color_picker.color_toggle"),optionRecordingKey:"color"},{type:1,label:(0,S.t)("slides.properties_panel.color_picker.gradient_toggle"),optionRecordingKey:"gradient"}];return i.createElement("div",{className:I.s.wFull.py8.bb1.bSolid.colorBorder.$},i.createElement("div",{className:X.X9},a.map(({type:a,label:o,optionRecordingKey:s})=>i.createElement(l.E,{key:a,className:e===a?X.wH:void 0,onClick:()=>r(a),recordingKey:b.Pt(n,s)},o))))}function el({recordingKey:e}){let r=(0,_.md)(Y.E_),n=(0,O.tZ)(r?.varId),[a,o]=i.useState(n??"");i.useEffect(()=>{o(n??"")},[n]);let s=i.useRef(null),l=i.useCallback(()=>{p.CWU.renameVariable(r?.varId??"",(0,D.rh)(a))},[r,a]);return r?i.createElement("div",{className:I.s.px16.py12.flex.itemsCenter.bt1.bSolid.colorBorder.$},i.createElement("span",{className:I.s.colorTextSecondary.textBodyMedium.w64.$},(0,S.tx)("slides.properties_panel.color_picker.rename_color_label")),i.createElement(T.L,{ref:s,className:X.Kv,"data-1p-ignore":!0,delay:50,name:"variableName",onBlur:m.nc.user("slides-rename-theme-color",l),onChange:e=>{o(e.target.value)},onKeyDown:e=>{("Enter"===e.key||"Escape"===e.key)&&s.current?.blur()},placeholder:(0,S.t)("slides.properties_panel.color_picker.rename_color_placeholder"),recordingKey:e,value:a})):null}function ec(e){let r=p.CWU.getLocalVariableInfo(e);if(r)return(0,M.kz)(r);let n=p.CWU.getSubscribedVariableInfo(e);return n?(0,M.ZI)(n):null}},171352:(e,r,n)=>{n.d(r,{i:()=>c});var i=n(848318);n(781131);var a=n(208720);n(741419),n(673906),n(897392);var o=n(543072),s=n(318672),l=n(744149);function c(){let e=(0,l.yM)().colorText;return i.useMemo(()=>{if(e){let r=s.F.parse(e);if(r.a>0)return(0,a.oU)(r)}return(0,a.oU)(o.Uv)},[e])}n(754737)},102997:(e,r,n)=>{n.d(r,{Sz:()=>l});var i=n(741419),a=n(897392);n(179703);var o=n(39773),s=n(94451);function l(e,r,n,c=!0){let d=i.AlE?.getMutableActiveDocument();if(!d)return console.error("slide deck utils","No active document"),null;let u=o.zl.get(s.BT),p=u[e]?.[r-1]||u[e-1]?.[(u[e-1]?.length||0)-1]||u[e+1]?.[0]||u[e]?.[0]||u[0]?.[0],m=(0,a.fn)((0,a.sH)(p))?i.glU.duplicateAsBlankSlide(d,p,e,r,n):i.eLE.createSlideAtCoord(d,e,r,n);return c&&i.Ez5.commit(),setTimeout(()=>{i.Ez5.singleSlideView().isSingleSlideViewEnabled()||i.Ez5.singleSlideView().panToSlideIfOutsideViewport(m,.6)},0),m}},443899:(e,r,n)=>{n.d(r,{Ei:()=>s,F4:()=>d,Jw:()=>y,Md:()=>m,UM:()=>E,Vf:()=>o,_g:()=>g,bY:()=>l,cZ:()=>f,q7:()=>v});var i=n(39773),a=n(792478),o=(e=>(e.ALL="ALL",e.ORG="ORG",e.TEMPLATE="TEMPLATE",e.HUB_FILE="HUB_FILE",e.FILE_PICKER="FILE_PICKER",e.TEMPLATE_PICKER="TEMPLATE_PICKER",e.TEAM="TEAM",e))(o||{});let s=(0,a.Wh)(()=>(0,i.eU)(!1));(0,a.Wh)(()=>(0,i.eU)(!1));let l=(0,i.eU)({type:"ALL"});(0,i.eU)("");let c=(0,i.eU)({});(0,i.eU)(e=>e(c),(e,r,n,i)=>{r(c,e=>({...e,[n]:i}))}),(0,i.eU)(null,(e,r)=>{r(c,{})}),(0,i.eU)(0);var d=(e=>(e.PUBLISH_HUB_FILE_INITIATED="PUBLISH_HUB_FILE_INITIATED",e.PUBLISH_HUB_FILE_COMPLETED="PUBLISH_HUB_FILE_COMPLETED",e.PUBLISH_HUB_FILE_ERRORED="PUBLISH_HUB_FILE_ERRORED",e.PUBLISH_TEMPLATE_INITIATED="PUBLISH_TEMPLATE_INITIATED",e.PUBLISH_TEMPLATE_COMPLETED="PUBLISH_TEMPLATE_COMPLETED",e.PUBLISH_TEMPLATE_ERRORED="PUBLISH_TEMPLATE_ERRORED",e.UNPUBLISH_TEMPLATE_INITIATED="UNPUBLISH_TEMPLATE_INITIATED",e.UNPUBLISH_HUB_FILE_INITIATED="UNPUBLISH_HUB_FILE_INITIATED",e.UNPUBLISH_COMPLETED="UNPUBLISH_COMPLETED",e.UNPUBLISH_TEMPLATE_ERRORED="UNPUBLISH_ERRORED",e.CLEARED="CLEARED",e))(d||{});let u=["PUBLISH_HUB_FILE_INITIATED","PUBLISH_TEMPLATE_INITIATED","UNPUBLISH_TEMPLATE_INITIATED","UNPUBLISH_HUB_FILE_INITIATED"],p=[...u,"CLEARED"];function m(e){return u.includes(e)}let h={CLEARED:u,PUBLISH_TEMPLATE_INITIATED:["PUBLISH_TEMPLATE_COMPLETED","PUBLISH_TEMPLATE_ERRORED"],PUBLISH_TEMPLATE_COMPLETED:p,PUBLISH_TEMPLATE_ERRORED:p,UNPUBLISH_TEMPLATE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_HUB_FILE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_COMPLETED:p,UNPUBLISH_ERRORED:p,PUBLISH_HUB_FILE_INITIATED:["PUBLISH_HUB_FILE_COMPLETED","PUBLISH_HUB_FILE_ERRORED"],PUBLISH_HUB_FILE_COMPLETED:p,PUBLISH_HUB_FILE_ERRORED:p},_=(0,i.eU)({state:"CLEARED"}),g=(0,i.eU)(e=>e(_).state),f=(0,i.eU)(e=>{let r=e(_);return"PUBLISH_TEMPLATE_INITIATED"===r.state?r.request:null}),E=(0,i.eU)(null,(e,r,n)=>{let i=e(g),{state:a}=n;if(h[i].includes(a))r(_,n);else throw Error(`Invalid state transition from ${i} to ${a}. Please check the state transition logic.`)});function y(e){switch(e){case"PUBLISH_TEMPLATE_ERRORED":case"PUBLISH_TEMPLATE_INITIATED":return"Slides Team Template Publish";case"UNPUBLISH_TEMPLATE_INITIATED":case"UNPUBLISH_ERRORED":return"Slides Team Template Unpublish";case"PUBLISH_HUB_FILE_ERRORED":case"PUBLISH_HUB_FILE_INITIATED":return"Slides Hub File Publish";case"UNPUBLISH_HUB_FILE_INITIATED":return"Slides Hub File Unpublish";default:return e}}(0,i.eU)(null,(e,r)=>r(_,{state:"CLEARED"}));var b=(e=>(e.ALL="ALL",e.SINGLE="SINGLE",e.NONE="NONE",e))(b||{});(0,a.Wh)(()=>(0,i.eU)(null)),(0,a.Wh)(()=>(0,i.eU)(null)),(0,a.Wh)(()=>(0,i.eU)({type:"NONE"})),(0,a.Wh)(()=>(0,i.eU)(""));let v=(0,a.Wh)(()=>(0,i.eU)(!1))},230845:(e,r,n)=>{var i=n(997894),a=n(526830),o=n(341355);i.M4.Query({fetch:async e=>await o.A.getCommunityShelves({shelfType:a.cS.PIPER_TEMPLATE_MODAL}).then(e=>e.data.meta)}),i.M4.Query({fetch:async e=>await o.A.getCommunityShelfById({categoryId:e}).then(e=>{if(e.data.meta.length>0)return e.data.meta[0]})})},645937:(e,r,n)=>{n.d(r,{Jv:()=>u,YW:()=>d});var i=n(848318);n(716544),n(992277),n(741419),n(673906),n(179703),n(39773),n(430285),n(171659),n(116389),n(666428),n(379338),n(896966);var a=n(503813);n(948442),n(926252),n(93724),n(384274),n(481540),n(992444),n(369600),n(661780),n(391788),n(376780),n(997894),n(166917);var o=n(793954);n(713534),n(492119),n(783235),n(779859),n(101217);var s=n(312278);n(314506),n(468425),n(443899),n(230845);(0,a.fv)(),new o.CN({keys:["name"],ignoreLocation:!0});var l=(e=>(e[e.LOADING=0]="LOADING",e[e.NO_RECENT_FILES=1]="NO_RECENT_FILES",e[e.NO_QUERY_RESULTS=2]="NO_QUERY_RESULTS",e[e.SUCCESS=3]="SUCCESS",e))(l||{}),c=(e=>(e.OVERLAY_MODAL="OVERLAY_MODAL",e.PICKER="PICKER",e.BOARD_TO_DECK="BOARD_TO_DECK",e))(c||{});async function d(e){return!!e&&!e.parentOrgId&&!!e.teamId&&!!e.editorType&&(await s.q.getTeamTemplateLimitReached({teamId:e.teamId,editorType:e.editorType})).data.meta.template_limit_reached}async function u(e){return!!e&&!e.parent_org_id&&!!e.team_id&&!!e.editor_type&&(await s.q.getTeamTemplateLimitReached({teamId:e.team_id,editorType:e.editor_type})).data.meta.template_limit_reached}i.createContext(null)},70629:(e,r,n)=>{n.d(r,{Dh:()=>d,Dq:()=>l,E_:()=>u,TN:()=>s,i1:()=>c});var i=n(39773),a=n(792478),o=n(33069);let s=(0,o.hR)([],{changeFileBehavior:o.hW.RESET_VALUE_ON_FILE_CHANGE}),l=(0,o.hR)({},{changeFileBehavior:o.hW.RESET_VALUE_ON_FILE_CHANGE}),c=(0,i.Iz)(e=>(0,o.hR)({id:e,data:null},{changeFileBehavior:o.hW.RESET_VALUE_ON_FILE_CHANGE}));function d(e){let r=c(e);return i.zl.get(r).data}(0,a.Wh)(()=>(0,i.M2)((0,i.eU)({})));let u=(0,a.Wh)(()=>(0,i.eU)(null))},133731:(e,r,n)=>{n.d(r,{UZ:()=>T,Xo:()=>b,k1:()=>S,kO:()=>E,lK:()=>I});var i=n(848318),a=n(988520),o=n(308769),s=n(741419),l=n(897392),c=n(157907),d=n(39773);n(543072);var u=n(373112),p=n(119310),m=n(870769);n(475106);var h=n(365581),_=n(937341),g=n(643510),f=n(70629);function E(e){let r=(0,f.i1)(e),{data:n}=(0,d.md)(r);return!n}let y=(0,p.bt)(e=>e.library.local.styles);function b(e){let r=(0,d.md)(y),n=(0,f.i1)(e),{data:a}=(0,d.md)(n);return i.useMemo(()=>{if(!e)return[];if(!(0,g.X_)(e))return console.warn("Expected local theme",e),[];if(!a)return console.warn("Theme no longer exists in the theme map",e),[];let n=new Set(a?.styleGUIDs||[]);return n.size>0?(0,m.ti)(r,"TEXT").filter(e=>n.has(e.node_id)).sort((e,r)=>(0,u.Ez)(r.sort_position||"",e.sort_position||"")):[]},[e,a,r])}function v(e){let r=(0,d.md)(h.Cg),n=(0,f.i1)(e),{data:i}=(0,d.md)(n);return e?(0,g.X_)(e)?i?(i.variableIDs||[]).map(e=>r[e])||[]:(console.warn("Theme no longer exists in the theme map",e),[]):(console.warn("Expected local theme",e),[]):[]}function T(e){let r=(0,f.i1)(e),{data:n}=(0,d.md)(r),a=n?.variableSetID||"";return i.useMemo(()=>o.gr.isValid(a)?s.CWU.getVariableSetDefaultMode(a):"",[a])}function I(e){let r=function(e){let r=v(e);return(0,i.useMemo)(()=>{let n=s.Ez5.slideThemeLibBindings().getBlackColorVariableId(e),i=s.Ez5.slideThemeLibBindings().getWhiteColorVariableId(e);return r.filter(e=>e&&e.resolvedType===s.rXF.COLOR).sort((e,r)=>{for(let a of[n,i]){if(e.node_id===a)return -1;if(r.node_id===a)return 1}return e.sortPosition<r.sortPosition?-1:1}).map(e=>e.node_id)},[e,r])}(e),n=T(e),o=(0,g.X_)(e);return r.map(e=>{if(!e||0===e.length)return;let r=o?s.CWU.getLocalVariableInfo(e):s.CWU.getSubscribedVariableInfo(e);if(r&&r.modeValues){let i=function(e,r){let n=e.modeValues[r];if(!n||n.resolvedType!==s.rXF.COLOR)return null;if(n.type===s.Z_n.COLOR)return n.value;if(n.type===s.Z_n.ALIAS&&(0,c.k)().piper_theme_variable_alias){let r=s.CWU.getVariableResolvedValue(e.id,new Map);if(r)return r.value}return null}(r,n);if(i){let a={color:i,colorVar:{dataType:"ALIAS",resolvedDataType:"COLOR",value:{alias:{guid:(0,l.sH)(e.replace("VariableID:",""))||void 0}}}};return{variableId:e,variableName:r.name,variableType:r.modeValues[n].type,paint:a}}}}).filter(a.Vq)}function S(e){let r=(0,f.i1)(e),{data:n}=(0,d.md)(r),a=n?.variableSetID||"",o=T(e),l=v(e),c=(0,_.ay)();return(0,i.useCallback)(e=>{if(a){let r=c(a,l,s.rXF.COLOR,"",s.HS4.SLIDES_THEME);return r&&s.CWU.setVariableValueForMode(r,o,{type:s.Z_n.COLOR,resolvedType:s.rXF.COLOR,value:e}),r}return null},[c,a,o,l])}},207669:(e,r,n)=>{n.d(r,{s1:()=>s});var i=n(718451),a=n(52004),o=n(166917);function s(){let e=function(){let[e]=(0,a.lJ)("themeId");return e}(),r=(0,o.Fk)(e=>e.getRoot().slideThemeId);return e&&(0,i.hS)(e)?e:r}},643510:(e,r,n)=>{function i(e){return e.length>0&&!e.includes("/")}function a(e){return"TEXT"===e||"GRID"===e}n.d(r,{Rc:()=>a,X_:()=>i})},83416:(e,r,n)=>{n.d(r,{PF:()=>_,fx:()=>g}),n(848318);var i=n(741419),a=n(179703),o=n(39773),s=n(6819),l=n(896966);n(963376),n(442313),n(697714),n(164963);var c=n(173970),d=n(262626),u=n(323075);n(369600);var p=n(376780),m=n(766878);n(816637),n(468425);var h=n(973128);function _(e,r){!function(e,r){let n=s.D.getState(),i=(0,u.Kl)(n);e(c.zE({state:i,from:m.f6.DESIGN_TO_SLIDES_ENTRYPOINT,editorType:p._Y.SLIDES,openNewFileIn:m.ai.NEW_TAB,newFileDataLocalStorageKey:r}))}(e,r)}function g(e,r,n=!1){return new Promise((s,c)=>{if(null===r||null===e){(0,l.x1)("storeFigmaContentForSlidesCreation","No openFile or file version",{fileKey:e?.key,fileVersion:r},{reportAsSentryError:!0}),c();return}let u=(0,a.UN)(),p=u.getDirectlySelectedNodes(),m=[];m=n&&p.length?u.getDirectlySelectedNodes().filter(e=>(0,h.o)(e)).map(e=>e.guid):[...i.Ez5.slideLikeNodeObserverState().slideLikeNodeIdsOnCanvas.getCopy()];let _=u.getCurrentPage()?.guid;if(!_||0===m.length){(0,l.x1)("storeFigmaContentForSlidesCreation","No page guid or empty target node ids",{pageGuid:_,targetNodeIds:m},{reportAsSentryError:!0}),c();return}s(o.zl.set(d.u2,{fileKey:e.key,fileVersion:r,pageGuid:_,selectedNodeIds:m}))})}},573819:(e,r,n)=>{n.d(r,{KL:()=>i,Z3:()=>m});var i,a=n(848318),o=n(988520),s=n(741419),l=n(575058),c=n(51910),d=n(166917),u=n(133731),p=n(586976);function m({themeId:e,styleId:r,options:n,onPreviewGenerated:i}){let m=function(e){let r=(0,d.Fk)((e,r)=>{let n;let i=e.get(r);if(!i)return;let a=i.fontSize,o=i.lineHeightOrMixed;if("mixed"===o)n=a;else switch(o.units){case"RAW":n=a*o.value;break;case"PIXELS":n=o.value;break;case"PERCENT":n=a*o.value/100}return{name:i.name,fontFamily:i.fontName.family,fontStyle:i.fontName.style,fontSize:a,lineHeight:n}},e);return(0,l.k9)(()=>r,[r])}(r);!function({themeId:e,styleId:r,styleMetadata:n,options:i,onPreviewGenerated:l}){let d=function({themeId:e,minPreviewHeight:r,maxPreviewHeight:n,defaultPreviewHeight:i}){let s=function(e){let r=(0,u.Xo)(e),n=(0,c.eY)();return a.useMemo(()=>{let e=r.map(e=>n.get(e.node_id)?.fontSize).filter(o.Vq);if(e.length)return{min:Math.min(...e),max:Math.max(...e)}},[r,n])}(e);return a.useMemo(()=>{if(!s)return new class{getPreviewHeight(e){return i}};let{min:e,max:a}=s;return new class{getPreviewHeight(o){let s=function(e,r,n,i,a){if(!(e<r)&&!(e>n)&&!(i>=a)&&!(r>=n))return(e-r)/(n-r)*(a-i)+i}(o,e,a,r,n);return s?Math.round(s):i}}},[s,r,n,i])}({themeId:e,minPreviewHeight:i.minHeight,maxPreviewHeight:i.maxHeight,defaultPreviewHeight:Math.round((i.minHeight+i.maxHeight)/2)}),{fontsAreLoading:m,checkFontsAreLoading:h}=(0,p.B)();a.useEffect(()=>{h()},[n,h]),a.useEffect(()=>{if(m)return;if(!n||!s.vXe.fontIsLoaded(n.fontFamily,n.fontStyle)){l(null);return}let e=d.getPreviewHeight(n.fontSize),a=n.name;i.maxWidth&&(a=s.glU.truncateText(n.fontFamily,e,n.lineHeight*(e/n.fontSize),i.maxWidth,1,a));let o=s.Ez5.slideThemeStylePreview().generateTextPreview(r,a,i.color,n.fontFamily,n.fontStyle);if(!o){l(null);return}l({preview:o,previewHeight:e})},[m,r,n,i,d,l])}({themeId:e,styleId:r,styleMetadata:m,options:n,onPreviewGenerated:i})}(e=>{e.MIN_THEME_TEXT_STYLE_PREVIEW_HEIGHT=12,e.MAX_THEME_TEXT_STYLE_PREVIEW_HEIGHT=22})(i||(i={}))},823888:(e,r,n)=>{n.d(r,{DG:()=>k,Kc:()=>R,OQ:()=>P,Zp:()=>L,dy:()=>M,in:()=>x,rS:()=>D});var i=n(848318),a=n(716544),o=n(128080),s=n.n(o),l=n(579020),c=n(195507),d=n(26039),u=n(85442),p=n(884060),m=n(110979),h=n(593005),_=n(507720),g=n(990022),f=n(650309),E=n(51910),y=n(273121),b=n(376780),v=n(997894),T=n(572699),I=n(668249),S=n(33668),w=n(830789),A=n(877297),C=n(568496),N=n(810968),L=(e=>(e.TILE="tile",e.DETAIL_MODAL="detail",e))(L||{});function O(e,r,n){return e===n&&r!==b.Xn.GUEST}function R(e,r){let n=`${location.origin}/files/${e}/feed-posts`;return r?.uuid&&(n+=`/${r.uuid}`),n}function P({fileVersionId:e,fileKey:r,startingNodeId:n},i){let a=(0,S.lD)({startingPointNodeId:n,versionId:e});a["redirect-src"]="feed",Object.assign(a,i);let o=Object.entries(a).map(([e,r])=>`${e}=${r}`).join("&");return`${location.origin}/proto/${r}?${o}`}function D(e,r,n){let o=(0,a.wA)(),s=r.find(e=>e.type===A.cM.NODE||e.type===A.cM.PROTOTYPE),c=(s?s.fileKey:void 0)||n;i.useEffect(()=>{o(p.ZN({file_key:c??void 0}))},[o,c]);let u=v.M4.useFile(c).data,h=(0,f.$)(),_=i.useMemo(()=>u&&s&&s.type===A.cM.PROTOTYPE?d.y1.PROTOTYPE:u?h(u):void 0,[u,s,h]),g=u&&void 0!==_;return{fileData:u,fileIcon:_,fileLoaded:g,openFile:i.useCallback(()=>{if((0,l.sx)("Team Feed File Clicked",{postUuid:e}),s){if(s.type===A.cM.NODE){let r=(0,y.jN)({file:{key:s.fileKey},commentId:(0,C.iw)(e)});o(m.V3({url:r}))}else s.type===A.cM.PROTOTYPE&&o(m.V3({url:P(s)}))}if(c){let e=(0,y.jN)({file:{key:c}});o(m.V3({url:e}))}},[o,s,e,c])}}var M=(e=>(e.TILE="tile",e.DETAIL="detail",e))(M||{});function k(e,r){let n=(0,a.wA)();return i.useCallback(()=>{(0,l.sx)("Team Feed Copy Link Clicked",{postUuid:e,source:r}),n(u.le({view:"teamFeed",postUuid:e}))},[n,e,r])}let F={component:"useFeedPostInfo",migrationGroup:I.L.GROUP_7};function x(e,r,n,a){let[o,d]=i.useState({}),[u,p]=i.useState({}),m=(0,E.eY)(),f=(0,T.wy)({...F,attribute:"planUserParentOrgId",legacy:(e,r)=>r?.org_id,migrated:e=>{if(e?.key.type===b.h4.ORG_USER)return e.planKey.parentId??void 0}}),y=(0,T.wy)({...F,attribute:"planUserPermission",legacy:(e,r)=>r?.permission,migrated:e=>{if(e?.key.type===b.h4.ORG_USER)return e?.permission}});return i.useEffect(()=>{if(e.errors&&e.errors.length){let r=JSON.stringify(e.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load feed posts: ${r}`),(0,l.sx)("Livegraph Feed Post Comments Errors",{errors:r})}},[e.errors]),i.useMemo(()=>{if((0,h.y)()&&"loaded"===e.status&&e.data.file&&m?.get){let r=e.data.file.feedPosts,i=r.filter(e=>!!e.org&&!!y&&O(f,y,e.org.id)),l=(0,g.N)(i),c=n(l);Object.entries(c).every(([e,r])=>null===o[e]&&null===r||!!o[e]&&!!r&&o[e]===r)||d(c);let h=a(l,m?.get.bind(m),r);Object.entries(h).every(([e,r])=>{let n=u[e];return!!n&&s()(n,r)})||p(h)}},[e,m,n,a,y,f,o,u]),i.useMemo(()=>f?function(e,r,n,i,a,o){if("loaded"!==e.status)return e;if(!e.data.file)return(0,c.gB)([]);let s={},l=(e.data.file?.feedPosts||[]).sort((e,r)=>r.createdAt.getTime()-e.createdAt.getTime()).filter(e=>!!e.org&&O(a,o,e.org.id)).map(e=>{let a=e.comments.map(e=>({id:`feed_comment_${e.id}`,uuid:e.uuid,key:"",parent_id:null,user_id:e.user.id,created_at:e.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:(0,_.o8)(e.messageMeta),client_meta:null,order_id:null,isUnread:!1,isPendingFromSinatra:!1,user:(0,_.CR)(e.user),feed_id:e.id,attachments:e.attachments})),[o,...l]=(0,g.N)([e]);s[o]=s[o]+1||0;let c=n[o]??null,d=i[e.publicUuid]?.[o],u={};for(let r of l)n[r]===c&&(u[r]=i[e.publicUuid]?.[r]);let p=null,m=null;d&&(m={x:d.x+d.width,y:d.y},p={x:d.x,y:d.y+d.height});let h=(0,_.CR)(e.creator),f=(0,C.iw)(e.publicUuid),E=e.content.map(e=>JSON.parse(e)),{thumbnail:y,padImage:b,thumbnailBackground:v}=(0,N.i0)(E,e.backgroundColor??void 0);return{id:f,uuid:"",key:e.fileKey||"",anchored:!1,selectionAnchorCanvasPosition:null,page:c,pageName:null,isActive:r===f,isPendingFromSinatra:!1,canvasPosition:m,boundingBoxAnchorCanvasPosition:p,comments:[{id:f,uuid:"",key:e.fileKey||"",parent_id:null,user_id:h.id,created_at:e.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:(0,_.o8)(e.descriptionMeta),client_meta:null,order_id:null,isUnread:!1,isPendingFromSinatra:!1,user:h,feed_id:e.id},...a],messageMeta:[],attachments:[],isCanvasMention:!1,sidebarItemType:w.kT.FEED_POST,feedPostPublicUuid:e.publicUuid,feedPostTitle:e.title,feedPostThumbnail:y,feedPostThumbnailBackground:v,feedPostNumContent:e.content.length,padFeedPostThumbnail:b,otherBoundingBoxes:u,pinVerticalStagger:s[o]}});return(0,c.gB)(l)}(e,r,o,u,f,y):(0,c.gB)([]),[e,r,o,u,f,y])}},318342:(e,r,n)=>{n.d(r,{M2:()=>a.M,My:()=>i.My,lt:()=>i.lt,t1:()=>a.t});var i=n(158614),a=n(331322)},158614:(e,r,n)=>{let i,a;n.d(r,{My:()=>b,Xh:()=>f,lt:()=>y});var o=n(848318),s=n(41015),l=n(473889),c=n(442313),d=n(500276),u=n(87089),p=n(464012),m=n(314272),h=n(112988),_=n(243023);function g(){return o.createElement("div",{style:d.sx.add({height:"675px"}).$},o.createElement(l.nt,null))}function f(){return i??=h.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(6896),n.e(9727),n.e(7509),n.e(3663),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(5974),n.e(8355),n.e(9567),n.e(6739),n.e(3455),n.e(6514),n.e(7824),n.e(6436),n.e(1092),n.e(9890),n.e(5491)]).then(n.bind(n,699321)).then(e=>e.CreateFeedPostContent),{loading:g,error:s.H4.NONE,componentName:"CreateFeedPostContent"})}function E(){let e=(0,u.sZ)(),r=(e?.name&&(0,c.tx)("fig_feed.post_to_org_feed",{orgName:e.name}))??(0,c.tx)("fig_feed.post_to_feed");return o.createElement(m.XV,{title:r,maxWidth:_.b},o.createElement("div",{style:d.sx.add({height:"675px"}).$},o.createElement(l.nt,null)))}function y(){return a??=(0,p.Ju)(h.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(6896),n.e(9727),n.e(7509),n.e(3663),n.e(441),n.e(7476),n.e(3427),n.e(7054),n.e(214),n.e(5974),n.e(8355),n.e(9567),n.e(6739),n.e(3455),n.e(6514),n.e(7824),n.e(6436),n.e(1092),n.e(9890),n.e(5491)]).then(n.bind(n,699321)).then(e=>e.CreateFeedPostModal),{loading:E,error:s.H4.NONE,componentName:"CreateFeedPostModal"}),"CreateFeedPostModal")}var b=(e=>(e.CONTEXT_MENU="content_menu",e.SHARE="share",e.FEED_HEADER="feed_header",e))(b||{})},810968:(e,r,n)=>{n.d(r,{AK:()=>A,EU:()=>N,Px:()=>b,Rl:()=>T,WI:()=>w,X2:()=>S,i0:()=>C,mz:()=>L,pj:()=>y,zr:()=>I});var i=n(445777),a=n(741419),o=n(980399),s=n(579020),l=n(379338),c=n(427193),d=n(669602),u=n(757033),p=n(825749),m=n(158349),h=n(877297),_=n(842589),g=n(532956);let f="team_feed",E=(e,r,n)=>{let i;let a=new Image;if(a.crossOrigin="anonymous",e.type===h.cM.NODE?i=(0,g.yt)(e.image_url,a).then(async e=>{let i=new Image;if(i.crossOrigin="anonymous",!n)throw Error("Expected a oldNodeImageUrl value");let a=await (0,g.yt)(n,i).then(e=>e.naturalWidth),o=e.naturalWidth/a;return r.state.zoom/=o,(0,g.Bt)(e,r.state)}):e.type===h.cM.IMAGE&&r.url&&(i=Promise.resolve(r.url)),!i)throw Error("Expected a previewImagePromise");return i.then(e=>fetch(e)).then(e=>e.arrayBuffer()).then(e=>{let r=new Uint8Array(e),n=URL.createObjectURL(new Blob([r]));return(0,d.Q)(f,r,"image/jpeg").then(({data:e})=>({data:e,localUrl:n}))}).then(({data:e,localUrl:n})=>({previewImageUrl:e.meta.url,localUrl:n,previewState:r.state}))};async function y(e,r,n,a){let l;if(r.find(e=>e.displayContentItem.type===h.cM.NODE||e.displayContentItem.type===h.cM.PROTOTYPE)){let r=new c.M4;r.start();let i=await (0,m.J)(n,a,"",e);r.stop(),(0,s.sx)("Team Feed New Savepoint Created",{elapsedTimeMs:r.getElapsedTime()}),l=i.id}let d=r.map(e=>{switch(e.displayContentItem.type){case h.cM.NODE:return e.processedContentItem.then(r=>{let n;let i={...r,fileVersionId:l};return e.preview&&(n=new c.M4).start(),(e.preview?E(i,e.preview,e.displayContentItem.image_url):Promise.resolve(void 0)).then(e=>{n&&(n.stop(),(0,s.sx)("Team Feed Preview Uploaded",{elapsedTimeMs:n.getElapsedTime()}));let r=void 0!==e?{...i,preview_image_url:e.previewImageUrl,backgroundColor:(0,o.colorToHex)(e.previewState.backgroundColor),initialX:e.previewState.x,initialY:e.previewState.y,initialZoom:e.previewState.zoom}:i;return(0,h.hM)(r)})});case h.cM.IMAGE:return e.processedContentItem.then(r=>{let n;return e.preview&&(n=new c.M4).start(),(e.preview?E(r,e.preview):Promise.resolve(void 0)).then(e=>{n&&(n.stop(),(0,s.sx)("Team Feed Preview Uploaded",{elapsedTimeMs:n.getElapsedTime()}));let i=void 0!==e?{...r,preview_image_url:e.previewImageUrl,backgroundColor:(0,o.colorToHex)(e.previewState.backgroundColor),initialX:e.previewState.x,initialY:e.previewState.y,initialZoom:e.previewState.zoom}:r;return(0,h.hM)(i)})});case h.cM.VIDEO:return e.processedContentItem.then(e=>(0,h.hM)(e));case h.cM.PROTOTYPE:return e.processedContentItem.then(e=>(0,h.hM)({...e,fileVersionId:l}));default:(0,i.xb)(e.displayContentItem)}});return await Promise.all(d)}function b(e,r,n){return r.map(r=>{let n={type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:"",isLoading:!0};return{displayContentItem:n,processedContentItem:Promise.resolve(n)}})}let v=(e,r,n)=>_.Y.getGenerateImageToken({orgId:n,tokenVersion:"2",fileKey:e}).then(n=>{let i=n.data.meta,a=(0,l.Ay)().api_cdn_url||(0,l.Ay)().api_url;return u.Ay.crossOriginGet(`${a}/v1/images/${e}`,{token:i,scale:g.qc.toString(),ids:r.join(",")})});async function T(e,r,n,i,o,l){let d;let u=v(e,r,n);if(o)d=r.map(r=>({type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o[r],backgroundColor:l&&l[r]}));else{let n=new c.M4;n.start();let i=r.map(r=>new Promise((n,i)=>{setTimeout(()=>{let i=new Blob([function(e){let[r,n]=a.Vzr.generateThumbnailForNode(e,g.Ty.width,g.Ty.height,1,{});return n}(r)]),o=URL.createObjectURL(i);n({type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o})},0)}));d=await Promise.all(i),n.stop(),(0,s.sx)("Team Feed Client Node Image Generation",{fileKey:e,nodeIds:r,elapsedTimeMs:n.getElapsedTime()})}return r.map((r,n)=>{let a=u.then(a=>{let o=a.data.images;return{type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o[r],backgroundColor:d[n]?.backgroundColor??i}});return{nodeId:r,displayContentItem:d[n],processedContentItem:a}}).reduce((e,r)=>({...e,[r.nodeId]:r}),{})}function I(e,r){return{displayContentItem:{type:h.cM.IMAGE,...e},processedContentItem:(0,p.rH)(e,f).then(e=>({type:h.cM.IMAGE,...e})),fileIdentifier:r}}function S(e,r,n,i){return{displayContentItem:{type:h.cM.VIDEO,mediaType:e.mediaType,path:e.url,sha:"",videoFileUuid:"",coverImage:""},processedContentItem:(0,p.bu)(e,r,n,f).then(e=>({type:h.cM.VIDEO,...e})),fileIdentifier:i}}function w(e,r){let n={...e,type:h.cM.PROTOTYPE,imageUrl:"",prototypeId:0,fileVersionId:""},i=v(e.fileKey,[e.startingNodeId],r).then(r=>(n.imageUrl=r.data.images[e.startingNodeId],n));return{displayContentItem:n,processedContentItem:i}}function A(e){switch(e.displayContentItem.type){case h.cM.NODE:return;case h.cM.IMAGE:URL.revokeObjectURL(e.displayContentItem.url),e.displayContentItem.preview_image_url&&URL.revokeObjectURL(e.displayContentItem.preview_image_url);return;case h.cM.VIDEO:URL.revokeObjectURL(e.displayContentItem.path);return;case h.cM.PROTOTYPE:return;default:(0,i.xb)(e.displayContentItem)}}function C(e,r){let n=e.find(e=>e.type===h.cM.NODE),i=n?.mediumImageUrl||n?.preview_image_url||n?.image_url;if(i)return{thumbnail:i,padImage:!n.preview_image_url,thumbnailBackground:L(n,r)};let a=e.find(e=>e.type===h.cM.PROTOTYPE),o=a?.imageUrl;if(o)return{thumbnail:o,padImage:!1,thumbnailBackground:L(a,r)};let s=e.find(e=>e.type===h.cM.IMAGE),l=s?.mediumImageUrl||s?.preview_image_url||s?.url;if(l)return{thumbnail:l,padImage:!s?.preview_image_url,thumbnailBackground:L(s,r)};let c=e.find(e=>e.type===h.cM.VIDEO),d=c?.coverImage;return d?{thumbnail:d,padImage:!1,thumbnailBackground:L(c,r)}:{thumbnail:"",padImage:!1,thumbnailBackground:L(null,r)}}function N(e){return!!((0,h.aT)(e)&&void 0!==e.initialX&&void 0!==e.initialY&&void 0!==e.initialZoom&&e.backgroundColor)}function L(e,r){return e?(0,h.aT)(e)?"backgroundColor"in e&&e.backgroundColor||r:"black":"var(--color-bg-secondary)"}},905959:(e,r,n)=>{n.d(r,{a9:()=>N,$K:()=>v,aH:()=>b,Q6:()=>E});var i=n(848318),a=n(716544),o=n(536384),s=n.n(o),l=n(645157),c=n(442313),d=n(604613),u=n(950738),p=n(503024),m=n(302839),h=n(197681),_=n(71145),g=n(983187),f=n(639798),E=(e=>(e.ActualSize="Actual Size",e.Default="Default",e.Fit="Fit to Screen",e.FitWidth="Fit Width",e.FillScreen="Fill Screen",e))(E||{});let y={"Actual Size":()=>(0,c.t)("fig_feed.zoom_pan_preset.actual_size"),Default:()=>(0,c.t)("fig_feed.zoom_pan_preset.default"),"Fit to Screen":()=>(0,c.t)("viewer.options_menu.fit_to_screen"),"Fill Screen":()=>(0,c.t)("viewer.options_menu.fill_screen"),"Fit Width":()=>(0,c.t)("viewer.options_menu.fit_width")},b=Object.keys(E),v="Default",T=m.l6,I=m.c$,S={format:e=>e in E?y[E[e]]():(0,c.t)("fig_feed.zoom_pan_preset.custom")};function w({reportWidth:e,inputProps:r}){let n=i.useRef(null),a=r.property;return i.useLayoutEffect(()=>{let r=n.current;return r&&e(a,r.getBoundingClientRect().width),()=>e(a,void 0)},[n,a,e]),i.createElement("div",{className:f.D9,"aria-hidden":!0},i.createElement(m.uQ,{...r,containerClassName:s()(r.containerClassName,f.oO),ref:n}))}function A({reportWidth:e,value:r,optionProps:n}){let a=i.useRef(null);return i.useLayoutEffect(()=>{let n=a.current;return n&&e(r,n.getBoundingClientRect().width),()=>e(r,void 0)},[a,r,e]),i.createElement("div",{className:f.D9,"aria-hidden":!0},i.createElement(I,{...n,additionalStylesClassName:s()(n.additionalStylesClassName,f.ZS),forwardedRef:a}))}function C(e){let[r,n]=i.useState(void 0),[o,s]=i.useState(void 0),m=(0,a.wA)(),h=(0,u.Um)(),_=i.useMemo(()=>({inputClassName:"edit_preview_toolbar--input--FPZy0 text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",formatter:S}),[]),g=i.useMemo(()=>i.createElement(l.r,{setMaxWidth:n,render:({reportWidthOfValue:e})=>i.createElement(i.Fragment,null,b.map(r=>i.createElement(w,{key:r,reportWidth:e,inputProps:{..._,property:r}})))}),[_]),f=i.useMemo(()=>i.createElement(l.r,{setMaxWidth:s,render:({reportWidthOfValue:e})=>i.createElement(i.Fragment,null,b.map(r=>i.createElement(A,{key:r,value:r,reportWidth:e,optionProps:{height:32,value:r,formattedValue:S.format(r)}})))}),[]);return i.createElement("div",{className:"edit_preview_toolbar--zoomPanPresetSelectorContainer--45Nn2","data-tooltip-show-above":!0,"data-tooltip-type":p.Ib.TEXT,"data-tooltip":(0,c.t)("fig_feed.zoom_pan_preset.tooltip")},f,g,i.createElement(T,{..._,ariaLabel:(0,c.t)("fig_feed.zoom_pan_preset.tooltip"),blurOnChange:!0,chevronClassName:"edit_preview_toolbar--chevron--zjsKc",dispatch:m,dropdownAlignment:"right",dropdownClassName:d.Dm,dropdownShown:h,dropdownWidth:o,id:`feedZoomPanPresetControl:${e.id}`,inputWidth:r,onChange:r=>{e.setZoomPanPreset(r)},preventHiddenInput:"always",property:e.value,recordingKey:"feedZoomPanPreset",role:"combobox",targetDomNode:document.body},b.map(e=>i.createElement(I,{key:e,value:e,fullWidth:!0}))))}function N({id:e,backgroundColor:r,setBackgroundColor:n,zoomPanPreset:a,setZoomPanPreset:o,onResetCallback:l,applyToAllCallback:d}){let u=!(a in E);return i.createElement("div",{className:"edit_preview_toolbar--editPreviewToolbar--Gvlyc"},i.createElement(h.ZE,{buttonCaretType:"down",buttonSize:"small",dropperDisabled:!0,inlineButtonTooltip:(0,c.t)("fig_feed.background_color.tooltip"),onColorChange:n,onlyShowCustomColorPopover:!0,optionSize:"medium",paletteType:"base",positionX:()=>0,positionY:(e,r)=>(0,g.T1)(e,r,4),recordingKey:"teamFeedEditablePreviewBackgroundColorControl",value:r}),i.createElement(_.wv,null),i.createElement(C,{id:e,value:a,setZoomPanPreset:o}),!!d&&i.createElement(i.Fragment,null,i.createElement(_.wv,null),i.createElement(_.$n,{tooltip:(0,c.t)("fig_feed.apply_to_all.tooltip"),tooltipMaxWidth:200,caret:"none",onClick:async()=>{await d()},disabled:u,recordingKey:"teamFeedResetPreview"},i.createElement("span",{className:s()({"edit_preview_toolbar--buttonDisabled--hE0Am":u})},(0,c.t)("fig_feed.apply_to_all")))),l&&i.createElement(i.Fragment,null,i.createElement(_.wv,null),i.createElement(_.$n,{tooltip:(0,c.t)("fig_feed.reset.tooltip"),tooltipMaxWidth:200,caret:"none",onClick:l,recordingKey:"teamFeedResetPreview"},i.createElement("span",null,(0,c.t)("fig_feed.reset")))))}},582538:(e,r,n)=>{n.d(r,{K1:()=>O,Zo:()=>K,xT:()=>G});var i=n(848318),a=n(445777),o=n(536384),s=n.n(o),l=n(601925),c=n(543072),d=n(68134),u=n(266163),p=n(771186),m=n(166365),h=n(442313),_=n(320409),g=n(850898),f=n(877297),E=n(503024),y=n(823888),b=n(810968),v=n(63395),T=n(532956),I=n(715366),S=n(456505),w=n(370328),A=n(954184),C=n(342635),N=n(603386),L=n(696788);function O(e){let r;switch(e.type){case f.cM.NODE:r=e.nodeId;break;case f.cM.IMAGE:r=e.url;break;case f.cM.VIDEO:r=e.path;break;case f.cM.PROTOTYPE:r=e.startingNodeId;break;default:throw Error("unexpected content item type")}return`${e.type}:${r}`}function R(e){let[r,n]=i.useState(!e.isThumbnail&&!e.usesPreviewImage);if(i.useEffect(()=>{if(!e.imgUrl)return;let r=new Image;r.src=e.imgUrl,r.onload=()=>{let e=r.width/r.height;n(r=>r&&Math.abs(e-T.dp)>.01)}},[e.imgUrl]),null===e.imgUrl)return i.createElement("div",null,(0,h.t)("fig_feed.could_not_load_preview_image"));let a=e.isThumbnail&&e.thumbnailUrl?e.thumbnailUrl:e.imgUrl;return i.createElement(i.Fragment,null,e.showPreviewFacade&&i.createElement("div",{className:w.Hq},i.createElement(u.pz,{onClick:e.onUpdatePreviewImage},(0,h.t)("fig_feed.update_preview_image"))),i.createElement("img",{src:a,alt:(0,h.t)("fig_feed.thumbnail_alt_text"),draggable:!1,className:s()(w.tv,e.isThumbnail&&w.Jq,r&&w.Pd)}),e.isThumbnail?null:"image/gif"===e.mediaType?i.createElement("div",{className:w.mB},(0,h.t)("fig_feed.gif")):null)}function P(e){let r=!!e.editPreviewOptions;return i.createElement("div",{className:w.yE},e.contentItems.map((n,a)=>{let o;return e.editPreviewOptions?.applyToAllCallback&&(o=r=>e.editPreviewOptions.applyToAllCallback(r,O(n))),i.createElement("div",{key:a,className:s()({[w.Xt]:!0,[w.sD]:a===e.selectedIdx})},i.createElement(T.DH,{key:`details::${n.image_url}`,applyToAllCallback:o,disableReset:!!e.editPreviewOptions?.disableReset,enableSnapToGuidelines:r,enableZoomControls:e.source===y.Zp.DETAIL_MODAL,enableZoomKeyControls:a===e.selectedIdx&&(e.source===y.Zp.DETAIL_MODAL||r),imageScale:r?1:void 0,imageSrc:n.image_url,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[O(n)],pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||n.backgroundColor&&(0,c.H0)(n.backgroundColor)||e.pageBackgroundColor&&(0,c.H0)(e.pageBackgroundColor)||void 0,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,setContentPreview:a===e.selectedIdx?e.editPreviewOptions?.setContentPreview:void 0,shouldWheelPan:!0,shouldZoomToStart:!1,showEditPreviewControls:r}))}))}function D(e){return i.createElement(I.D,{item:e.prototypeContent})}function M(e){let r=!!e.editPreviewOptions;return i.createElement(T.DH,{key:`details::${e.imageContent.url}`,applyToAllCallback:e.editPreviewOptions?.applyToAllCallback?r=>e.editPreviewOptions.applyToAllCallback(r,O(e.imageContent)):void 0,disableReset:!!e.editPreviewOptions?.disableReset,enableSnapToGuidelines:r,enableZoomControls:e.source===y.Zp.DETAIL_MODAL,enableZoomKeyControls:e.source===y.Zp.DETAIL_MODAL||r,imageScale:1,imageSrc:e.imageContent.url,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[O(e.imageContent)],pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||e.imageContent.backgroundColor&&(0,c.H0)(e.imageContent.backgroundColor)||e.pageBackgroundColor&&(0,c.H0)(e.pageBackgroundColor)||void 0,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,setContentPreview:e.editPreviewOptions?.setContentPreview,shouldWheelPan:!0,shouldZoomToStart:!1,showEditPreviewControls:r})}function k(e){let r=(0,S.jI)(e.feedPostUuid,e.videoContent.path,e.source);return i.createElement(S.l0,{id:r,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,source:e.source})}function F(e){return e.isThumbnail?i.createElement("div",null,(0,h.tx)("fig_feed.video")):i.createElement("div",null,(0,h.tx)("fig_feed.transcode_after_submit"))}function x(e){if(g.cU.includes(e.videoContent.mediaType)&&""===e.videoContent.videoFileUuid)return i.createElement(F,{isThumbnail:e.isThumbnail});if(e.isThumbnail&&e.videoContent.coverImage)return i.createElement(R,{imgUrl:e.videoContent.coverImage,isThumbnail:!0});let r=(0,S.jI)(e.feedPostUuid,e.videoContent.path,e.source);return i.createElement(S.l0,{id:r,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source})}function U(e){return i.createElement(i.Fragment,null,i.createElement(p.x,{isLoading:!e.content.imageUrl},()=>i.createElement(R,{imgUrl:e.content.imageUrl,isThumbnail:e.isThumbnail})),!e.isThumbnail&&i.createElement("div",{className:w.mB},(0,h.tx)("fig_feed.prototype_badge")))}function B(e){let r=e.contentItems[e.selectedIdx];switch(r.type){case f.cM.NODE:return i.createElement(P,{selectedIdx:e.selectedIdx,contentItems:e.contentItems,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor,source:e.source});case f.cM.IMAGE:return i.createElement(M,{imageContent:r,source:e.source,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor});case f.cM.VIDEO:return i.createElement(k,{videoContent:r,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source});case f.cM.PROTOTYPE:return i.createElement(D,{prototypeContent:r});default:(0,a.xb)(r)}}function V(e){switch(e.content.type){case f.cM.NODE:let r=e.content,n=r.mediumImageUrl??r.preview_image_url??r.image_url,o=r.preview_image_url??r.image_url;return i.createElement(p.x,{isLoading:!!r.isLoading},()=>i.createElement(R,{imgUrl:e.isEditing?o:n,usesPreviewImage:!!r.preview_image_url,isThumbnail:e.isThumbnail,thumbnailUrl:e.isEditing?o:r.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage}));case f.cM.IMAGE:let s=e.content.mediumImageUrl??e.content.preview_image_url??e.content.url,l=e.content.preview_image_url??e.content.url;return i.createElement(R,{imgUrl:e.isEditing?l:s,isThumbnail:e.isThumbnail,usesPreviewImage:!!e.content.preview_image_url,mediaType:e.content.mediaType,thumbnailUrl:e.isEditing?l:e.content.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage});case f.cM.VIDEO:return i.createElement(x,{videoContent:e.content,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source});case f.cM.PROTOTYPE:return i.createElement(U,{content:e.content,isThumbnail:e.isThumbnail});default:(0,a.xb)(e.content)}}function G(e){let r=!!e.editPreviewOptions,n=e.contentItems.length>1||r,{selectedContentIdx:a,pageBackgroundColor:o,setSelectedContentIdx:l,contentItems:u,onContentHover:_}=e,[g,y]=(0,d.M)();i.useEffect(()=>{_?.(y)},[y,_]);let v=i.useMemo(()=>u[a],[u,a]),T=i.useMemo(()=>n?i.createElement(H,{direction:"horizontal",contentItems:u,selectedIdx:a,setSelectedIdx:l,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:!1}):null,[n,u,a,l,e.pageBackgroundColor,e.feedPostUuid]);e.editPreviewOptions&&v&&"node"===v.type&&v.backgroundColor&&(e.editPreviewOptions.pageBackgroundColor=(0,c.H0)(v.backgroundColor)??void 0);let{openEditPreviewModalCallback:I,deleteSelectedItemCallback:S}=e,[A,N]=i.useState(!1),L=i.useMemo(()=>{if(!I&&!S||!A||!v)return null;let e=n?w.IN:w.r$;return i.createElement("div",{className:e},v&&(0,f.aT)(v)&&I&&i.createElement("div",null,i.createElement("button",{onClick:I,className:w.nY},(0,h.tx)("fig_feed.edit_preview"))),S&&i.createElement(m.B,{svg:C.A,className:w.j5,onClick:S,autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("fig_feed.delete"),dataTestId:"delete-content-item"}))},[A,v,n,I,S]);return i.createElement("div",{className:s()(w.qG,r&&w.Mm)},i.createElement("div",{ref:g,className:n&&!r?w.Uz:w.xs,style:{backgroundColor:(0,b.mz)(v,e.pageBackgroundColor)},onMouseDown:e.onSelectedTileMouseDown,role:"button",tabIndex:0,onPointerEnter:()=>N(!0),onPointerLeave:()=>N(!1),"data-testid":"feed-post-content-section"},L,i.createElement(p.x,{isLoading:!v},()=>e.staticContent?i.createElement(V,{content:v,isThumbnail:!1,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source}):i.createElement(B,{contentItems:u.filter(e=>null!==e),selectedIdx:a,editPreviewOptions:e.editPreviewOptions,feedPostUuid:e.feedPostUuid,pageBackgroundColor:o,source:e.source}))),T)}function H(e){let r=i.useRef(null);i.useEffect(()=>{let n=r.current,i=r.current?.children[e.selectedIdx];if(!n||!i)return;let a=n?.getBoundingClientRect();a?.top>=0&&a?.left>=0&&a?.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a?.right<=(window.innerWidth||document.documentElement.clientWidth)&&i.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[e.direction,e.selectedIdx]);let n=(0,S.pN)(),{scrollToItem:a,onReorderCallback:o,setSelectedIdx:c,deleteItem:d}=e,[u,p]=i.useState(null),h=e.thumbnailType||"wide",g=i.useCallback((r,o,l)=>{let m=s()(w.iD,l&&w.Ut,"small"===h&&w.kL,"wide"===h&&w.Wr);return i.createElement("div",{className:m,onMouseDown:()=>{n(e.feedPostUuid),a?.(o),c?.(o)},onPointerEnter:()=>p(o),onPointerLeave:()=>p(null),role:"button",tabIndex:0,style:{backgroundColor:(0,b.mz)(r,e.pageBackgroundColor)},"data-testid":`content-item-${o}`},i.createElement(V,{content:r,isThumbnail:!0,isEditing:e.isEditing}),d&&o===u&&i.createElement("div",{className:w.nx},i.createElement("div",{className:w.fy,onClick:e=>{e.stopPropagation(),d(o)},role:"button",tabIndex:0},i.createElement(v.X,null))))},[e.pageBackgroundColor,e.feedPostUuid,h,e.isEditing,u,n,a,c,d]),f=r=>{if("horizontal"!==e.direction)return null;let n=e.selectedIdx===("left"===r?0:e.contentItems.length-1);return i.createElement(_.$,{onMouseDown:()=>{let n=(e.selectedIdx+("left"===r?-1:1)+e.contentItems.length)%e.contentItems.length;c?.(n)},icon:"left"===r?"chevron-left-32":"chevron-right-32",variant:"text",disabled:n})},E=s()(w.sm,"horizontal"===e.direction?w.d9:w.b1);if(o)return i.createElement("div",{className:E},i.createElement(l._.Group,{axis:"vertical"===e.direction?"y":"x",onReorder:o,values:e.contentItems,className:s()(w.M2,"horizontal"===e.direction?w.AA:w.h0),role:"button",tabIndex:0,ref:r},e.contentItems.map((r,n)=>i.createElement(l._.Item,{value:r,id:O(r),key:O(r),translate:"no"},g(r,n,!(e.canAddContent&&e.isAddingContent)&&n===e.selectedIdx))),e.canAddContent&&i.createElement("div",{className:s()(w.iD,"small"===e.thumbnailType&&w.kL,"wide"===e.thumbnailType&&w.Wr,e.isAddingContent?w.ad:w.WW),onMouseDown:e.setAddingActive,role:"button",tabIndex:0},i.createElement(m.B,{svg:A.A}))));{let n=s()(w.M2,"horizontal"===e.direction?w.n2:w.h0);return i.createElement("div",{className:E},f("left"),i.createElement("div",{className:n,ref:r},e.contentItems.map((r,n)=>i.createElement(i.Fragment,{key:n},g(r,n,n===e.selectedIdx)))),f("right"))}}function K(e){let r=e.contentItems[e.selectedIdx],n=r&&(0,f.aT)(r),{onReorderCallback:a,deleteItemAtIdx:o,setSelectedIdx:l,onFileInputChange:c,setContentPreview:d,openPostFromFileModal:u}=e,[_,g]=i.useState(0===e.contentItems.length);i.useEffect(()=>{0===e.contentItems.length?g(!0):g(!1)},[e.contentItems.length]);let y=e.contentItems.length>=1||n,v=i.useCallback(()=>{g(!0)},[]),I=i.useCallback(e=>{l(e),g(!1)},[l]),[S,A]=i.useState(!1),R=i.useMemo(()=>S&&r?i.createElement("div",{className:w.r$},o&&i.createElement(m.B,{svg:C.A,className:w.j5,onClick:()=>o(e.selectedIdx),autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("fig_feed.delete"),dataTestId:"delete-content-item"})):null,[r,S,e.selectedIdx,o]),P=i.useRef(null),D=(e,r,n,a)=>i.createElement("div",{className:w.c9,onClick:a,role:"button",tabIndex:0},i.createElement(m.B,{svg:n}),i.createElement("div",{className:w.LO},i.createElement("div",{className:w.Gq},e),r)),M=i.useCallback((n,i,a)=>{let o=O(r);r&&o&&!(0,T.L$)(i,e.snapshotStates[o])&&d(o,n,i)},[r,e.snapshotStates,d]),k=(r,n)=>{M(r,n,e.selectedIdx)},[F,x]=i.useState({}),U=i.useCallback(()=>{x(e=>({...e,[O(r)]:!0}))},[r]);return i.createElement("div",null,(()=>{if(_){let r=null===e.attachedFile?(0,h.t)("fig_feed.add_frames"):"whiteboard"===e.attachedFile.editor_type?(0,h.t)("fig_feed.share_something_from_figjam"):(0,h.t)("fig_feed.add_frames_from_this_figma_file");return i.createElement("div",{className:s()(w.Er,y&&w.QX)},i.createElement("div",{className:s()(w.hM,e.dragging&&w.cB)},D((0,h.t)("fig_feed.choose_frames"),r,N.A,u),i.createElement("form",null,i.createElement("input",{type:"file",name:"fileInput",id:"fileInput",accept:f.bB.join(","),ref:P,onChange:c(P),multiple:!0,className:w.Fg}),i.createElement("label",{htmlFor:"fileInput"},D((0,h.t)("fig_feed.upload_files"),(0,h.t)("fig_feed.add_images_or_videos"),L.A)))))}return i.createElement("div",{className:s()(w.Er,y&&w.QX),style:{backgroundColor:(0,b.mz)(r,e.pageBackgroundColor)},role:"button",tabIndex:0,onPointerEnter:()=>A(!0),onPointerLeave:()=>A(!1)},R,i.createElement(p.x,{isLoading:!r},()=>(0,f.aT)(r)&&("edit"===e.mode&&(F[O(r)]||!r.shouldBlockEditPreview)||"create"===e.mode)?i.createElement(B,{contentItems:e.contentItems,selectedIdx:e.selectedIdx,editPreviewOptions:{setContentPreview:k,initialSnapshotStates:e.snapshotStates,disableReset:!0},feedPostUuid:e.feedPostUuid,pageBackgroundColor:e.pageBackgroundColor,source:e.source}):i.createElement(V,{content:r,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source,showPreviewFacade:"edit"===e.mode&&(0,f.aT)(r)&&r.shouldBlockEditPreview,onUpdatePreviewImage:"edit"===e.mode?U:void 0})),e.dragging&&i.createElement("div",{className:w.c$},i.createElement("div",{className:w.W9})))})(),y?i.createElement(H,{canAddContent:e.contentItems.length<f.e3,contentItems:e.contentItems,deleteItem:o,direction:"horizontal",feedPostUuid:e.feedPostUuid,isAddingContent:_,isEditing:!0,onReorderCallback:a,pageBackgroundColor:e.pageBackgroundColor,selectedIdx:e.selectedIdx,setAddingActive:v,setSelectedIdx:I,thumbnailType:"wide"}):null)}},842488:(e,r,n)=>{n.d(r,{K:()=>ea});var i=n(848318),a=n(716544),o=n(445777),s=n(536384),l=n.n(s),c=n(579020),d=n(44509),u=n(397579),p=n(857188),m=n(41015),h=n(493554),_=n(757033),g=n(26039),f=n(575492),E=n(166365),y=n(963376),b=n(280198),v=n(442313),T=n(576220),I=n(196484),S=n(790355),w=n(449737),A=n(793478),C=n(507720),N=n(967064),L=n(526999),O=n(87089),R=n(834996),P=n(661780),D=n(635547),M=n(707717),k=n(877297),F=n(503024),x=n(117687),U=n(464012),B=n(828935),V=n(36172),G=n(251446),H=n(469402),K=n(255603),W=n(117592),z=n(823888),$=n(318342),Y=n(582538),j=n(664324),q=n(853807),X=n(981412),Z=n(625579),J=n(768205),Q=n(785514),ee=n(889438),et=n(628015),er=n(744239),en=n(821527);function ei(){return i.createElement("div",null,(0,v.t)("fig_feed.post_dne"))}let ea=(0,U.Ju)(function(e){let r=(0,a.wA)(),n=(0,O.dq)(),s=(0,R._6)();i.useEffect(()=>{"teamFeed"!==s.view&&"user"!==s.view&&("fullscreen"===s.view&&e.inFileView||r(w.Ce()))},[r,s,e.inFileView]);let l=i.useRef({selectedView:s,inFileView:e.inFileView});i.useEffect(()=>{l.current={selectedView:s,inFileView:e.inFileView}},[e.inFileView,s]),i.useEffect(()=>()=>{l.current.inFileView||"teamFeed"!==l.current.selectedView.view||r(S.$T({...l.current.selectedView,postUuid:void 0}))},[r]);let m=i.useRef(!1),g=i.useCallback(r=>{m.current||!r||e.autofocusCommentInput||(r.focus(),m.current=!0)},[e.autofocusCommentInput]),f=(0,u.ZC)(e.postUuid);i.useEffect(()=>{n&&(e.inFileView||f===e.postUuid||"teamFeed"!==s.view||(m.current=!1,d.Ay.replace((0,z.Kc)(n,{uuid:e.postUuid}))))},[f,e.postUuid,n,e.inFileView,s]);let E=(0,h.Rs)(D.FHz,{publicUuid:e.postUuid});i.useEffect(()=>{!e.inFileView&&E.data?.feedPost?.title&&(0,L.hL)(E.data.feedPost.title)},[e.inFileView,E.data]),i.useEffect(()=>((0,c.sx)("Team Feed Post Details View Visited",{postUuid:e.postUuid}),()=>{(0,c.sx)("Team Feed Post Closed",{postUuid:e.postUuid})}),[e.postUuid]),i.useEffect(()=>{_.Ay.post(`/api/feed_posts/${e.postUuid}/mark_viewed`)},[e.postUuid]);let[T,I]=i.useState(0);i.useEffect(()=>{I(e.selectedContentIdx||0)},[e.postUuid,e.selectedContentIdx]);let A=i.useMemo(()=>E.data?.feedPost?E.data.feedPost.content.map(e=>JSON.parse(e)):[],[E.data]),C=A.length,{requestToOpenPostByFeedIdx:N}=e,P=i.useCallback(r=>{r.keyCode===p.Uz.LEFT_ARROW?0===T?N&&void 0!==e.feedIdx&&N(e.feedIdx-1):I(T-1):r.keyCode===p.Uz.RIGHT_ARROW&&(T===C-1?N&&void 0!==e.feedIdx&&N(e.feedIdx+1):I(T+1))},[T,C,N,e.feedIdx]),[M,F]=i.useState(!0),x=i.useCallback(()=>F(e=>!e),[]),[U,H]=i.useState(!1);i.useEffect(()=>{!U&&"loaded"===E.status&&A[T]&&(0,k.Dr)(A[T])&&((0,y.YQ)({id:V.X}),H(!0))},[E.status,U,A,T]);let K=E.data?.feedPost||e.initialPreloadedPost;if(!K)switch(E.status){case"errors":return i.createElement(ei,null);case"loading":return i.createElement(W.aF,{className:Q.ZA,size:"any"});case"loaded":return r(b.s.error((0,v.t)("fig_feed.post_dne"))),r(w.Ce()),null;default:(0,o.xb)(E)}return i.createElement(i.Fragment,null,i.createElement(W.aF,{className:Q.ZA,size:"any"},i.createElement("div",{className:Q.Zp,role:"listbox",tabIndex:0,onKeyDown:P,ref:g},i.createElement("div",{className:Q.kL,"data-onboarding-key":G.O},i.createElement("div",{className:M?Q.hQ:Q.MZ},i.createElement(Y.xT,{contentItems:A,staticContent:!1,selectedContentIdx:T,setSelectedContentIdx:r=>{I(r),e.onSetSelectedContentIdx?.(r)},pageBackgroundColor:K.backgroundColor??void 0,feedPostUuid:e.postUuid,source:z.Zp.DETAIL_MODAL})),i.createElement(eo,{feedPost:K,contentItems:A,autofocusCommentInput:!!e.autofocusCommentInput,inFileView:e.inFileView,onSidebarToggle:x,show:M})))),i.createElement(B.p,null,i.createElement(G.b,null)))},N.E,U.ZU.YES);function eo(e){let r=(0,a.wA)(),n=(0,P.iZ)(),o=(0,O.dq)(),s=i.useCallback(()=>{r(w.Ce())},[r]),{fileData:l,fileIcon:c,fileLoaded:d,openFile:u}=(0,z.rS)(e.feedPost.publicUuid,e.contentItems,e.feedPost.fileKey),p=i.useCallback(()=>{let n=e.inFileView&&e.feedPost.fileKey||void 0;r((0,w.to)({type:(0,$.t1)(),data:{preloadedFeedPost:e.feedPost,entryPoint:e.inFileView?$.M2.FILE:$.M2.FEED,lockedFileKey:n}}))},[r,e.feedPost,e.inFileView]),m=(0,z.DG)(e.feedPost.publicUuid,z.dy.DETAIL);if(!o||!n)return null;let h=i.createElement(i.Fragment,null,i.createElement("div",{className:Q.Si},i.createElement(J.Wu,{feedPost:e.feedPost,source:z.Zp.DETAIL_MODAL,onEditClick:p})),i.createElement("button",{onClick:m,"data-tooltip-type":F.Ib.TEXT,"data-tooltip":(0,v.t)("fig_feed.copy_link_to_post")},i.createElement(E.B,{svg:er.A,className:Q.Gp})),i.createElement("button",{onClick:e.onSidebarToggle},i.createElement(E.B,{svg:et.A,className:Q.Gp})),i.createElement("button",{onClick:s},i.createElement(E.B,{svg:en.default,className:Q.Nk})));if(!e.show)return i.createElement("div",{className:Q.SY},h);let _=i.createElement("div",{className:Q.N1},i.createElement("div",{className:Q.qd},(0,v.tx)("fig_feed.details")),i.createElement("div",{className:Q.IE,"data-testid":"feed-modal-open-file"},h)),f=i.createElement("div",{className:Q.op},i.createElement("div",{className:Q.mY},i.createElement(q.B,{user:e.feedPost.creator,date:e.feedPost.createdAt,size:T.Pf.MEDIUM,shortDate:!1})),i.createElement(el,{feedPost:e.feedPost,currentOrgId:o,currentUser:n}),d&&!e.inFileView&&i.createElement("button",{className:Q.XE,onClick:e.inFileView?void 0:u},(0,v.tx)("fig_feed.from_file",{fileComponent:i.createElement(i.Fragment,null,i.createElement(g.MW,{className:Q.Wv,type:c,size:g.LE.SMALL}),i.createElement("span",{className:Q.q4},l.name))})),i.createElement("div",{className:Q.E_},i.createElement(X.Q$,{type:X.Us.FULL,source:X.zY.DETAIL_POST,postUuid:e.feedPost.publicUuid,postId:e.feedPost.id,feedReactions:e.feedPost.reactions})));return i.createElement("div",{className:Q.HP},_,i.createElement(es,{postInfo:f,comments:e.feedPost.comments,postUuid:e.feedPost.publicUuid,currentUser:n,currentOrgId:o,autofocusCommentInput:e.autofocusCommentInput}))}function es(e){let r=(0,a.wA)(),n=i.useRef(null),o=i.useRef(null),[s,l]=i.useState(!1),c=i.useCallback(r=>{0===r.intersectionRatio&&e.comments.length>0?l(!0):l(!1)},[e.comments.length]);(0,H.g)(o,c,{threshold:[0,1]});let d=i.useCallback(()=>{n.current&&n.current.scrollToBottom()},[]),u=e.comments.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime()),[p,h]=i.useState(e.comments.length);i.useEffect(()=>{let r=p<e.comments.length;r&&h(e.comments.length);let n=e.comments[e.comments.length-1];r&&n.user.id===e.currentUser.id&&d()},[p,e.comments,e.currentUser,d]);let[_,g]=i.useState([]),y=(0,a.d4)(e=>e.comments.newComment),b=i.useCallback(()=>{r(A.gX({postUuid:e.postUuid,messageMeta:_,attachmentIds:Object.keys(y.attachments)})),g([]),r(I.$M({resetStatusOnly:!1}))},[r,e.postUuid,_,y]),S=i.useMemo(()=>({library:new M.M8(e.currentOrgId,e.postUuid)}),[e.currentOrgId,e.postUuid]),w=i.useCallback(e=>{r(I.nb({attachmentId:e.id,attachment:e}))},[r]),N=i.useCallback((e,n)=>{r(I.nb({attachmentId:e,attachment:null})),n?n.then(()=>x.J.delete(e)):x.J.delete(e)},[r]);return i.createElement("div",{className:Q.ty},i.createElement(f.P,{innerClassName:Q.qy,useBottomPinning:!0,ref:n},e.postInfo,i.createElement("div",{ref:o,className:Q.Ai},u.map(r=>i.createElement(j.i,{key:r.id,attachments:r.attachments,commentId:r.id,commentUser:r.user,commentUuid:r.uuid||"",createdAt:r.createdAt,currentOrgId:e.currentOrgId,mentionables:S,messageMeta:(0,C.o8)(r.messageMeta),reactions:r.reactions,user:e.currentUser}))),s&&i.createElement("div",{className:Q.cm,onClick:d,role:"button",tabIndex:0},i.createElement(E.B,{svg:ee.A,className:Q.mL}),(0,v.tx)("fig_feed.num_comments",{numComments:u.length}))),i.createElement("div",{className:Q.kG},i.createElement("div",{className:Q.gK},i.createElement(T.H8,{user:e.currentUser,size:T.Pf.MEDIUM})),i.createElement(Z.o,{attachments:Object.values(y.attachments),autofocus:e.autofocusCommentInput,composerContainerClass:Q.DA,currentOrgId:e.currentOrgId,deleteAttachment:N,editableTypeaheadClass:Q.OX,editingExistingComment:!1,errorFallback:m.H4.NONE,fallback:null,hideSubmitButton:!1,mentionables:S,messageContent:_,onSubmit:b,updateAttachment:w,updateMessage:g,user:e.currentUser})))}function el(e){let r=i.useMemo(()=>(0,C.o8)(e.feedPost.descriptionMeta),[e.feedPost.descriptionMeta]);return i.createElement("div",{role:"textbox",tabIndex:0,className:Q.tL},i.createElement("div",{className:Q.pT},e.feedPost.title),i.createElement(K.HH,{messageMeta:r,commentId:e.feedPost.id,className:l()(Q.gG)}))}},853807:(e,r,n)=>{n.d(r,{A:()=>g,B:()=>_});var i=n(848318),a=n(716544),o=n(536384),s=n.n(o),l=n(785572),c=n(753131),d=n(576220),u=n(790355),p=n(584305),m=n(672182),h=n(927317);function _(e){let r=e.date&&i.createElement(c.h1,{date:e.date,style:e.shortDate?"short":void 0,capitalize:!0,key:"from-now"}),n=[i.createElement("div",{key:"from-now",onMouseDown:e.onTileMouseDown,role:"button",tabIndex:0,className:s()(e.onTileMouseDown&&h.WJ,h.PI)},r)];return i.createElement("div",{className:h.ME},i.createElement(g,{user:e.user,size:e.size,noAvatar:e.noAvatar,noHandle:e.noHandle,appendToHandle:n}))}function g(e){let r=(0,a.wA)(),n=i.useCallback(n=>{n.stopPropagation(),e.user.id&&r(u.$T({view:"user",userId:e.user.id,userViewTab:m.o.INTERNAL_PROFILE_POSTS}))},[r,e.user.id]),o=e.appendToHandle||!1===e.noHandle;return i.createElement("div",{className:h.ME},!e.noAvatar&&i.createElement(l.N,{onClick:n,trusted:!0,onMouseDown:p.dG},i.createElement(d.H8,{user:e.user,size:e.size??d.Pf.LARGE})),o&&i.createElement("div",{className:h.Qs},!e.noHandle&&i.createElement(l.N,{className:h.TK,onClick:n,trusted:!0},i.createElement("div",{className:h.p$},e.user.handle)),e.appendToHandle))}},981412:(e,r,n)=>{n.d(r,{Q$:()=>g,Us:()=>h,nn:()=>f,zY:()=>_});var i=n(848318),a=n(716544),o=n(536384),s=n.n(o),l=n(793478),c=n(950738),d=n(661780),u=n(835491),p=n(582907),m=n(166178),h=(e=>(e[e.FULL=0]="FULL",e[e.ADD_ONLY=1]="ADD_ONLY",e))(h||{}),_=(e=>(e[e.TILE_CONTENT=0]="TILE_CONTENT",e[e.TILE_POST=1]="TILE_POST",e[e.DETAIL_POST=2]="DETAIL_POST",e[e.DETAIL_COMMENT_NO_REACTION=3]="DETAIL_COMMENT_NO_REACTION",e[e.DETAIL_COMMENT_WITH_REACTION=4]="DETAIL_COMMENT_WITH_REACTION",e[e.FILE_POPOVER=5]="FILE_POPOVER",e))(_||{});function g(e){let r=(0,a.wA)(),n=(0,d.iZ)(),{existingReactionIdForCurrentUser:o}=b(e.feedReactions,n),s=i.useCallback(({emoji:n,addOnly:i})=>{let a=o(n);a?i||r(l.Oy({feedPostUuid:e.postUuid,emoji:n,reactionId:a})):r(l.EF({feedPostUuid:e.postUuid,feedPostId:e.postId,emoji:n}))},[r,o,e.postUuid,e.postId]);return i.createElement(E,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:s,feedResource:{type:"post",id:e.postUuid},feedReactions:e.feedReactions})}function f(e){let r=(0,a.wA)(),n=(0,d.iZ)(),{existingReactionIdForCurrentUser:o}=b(e.feedReactions,n),s=i.useCallback(({emoji:n,addOnly:i})=>{let a=o(n);a?i||r(l.t9({commentUuid:e.commentUuid,emoji:n,reactionId:a})):r(l.FJ({commentUuid:e.commentUuid,commentId:e.commentId,emoji:n}))},[r,o,e.commentUuid,e.commentId]);return i.createElement(E,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:s,feedResource:{type:"comment",id:e.commentUuid},feedReactions:e.feedReactions})}function E(e){let r=(0,d.iZ)(),{toggleReaction:n}=e,{reactionsWithSelected:a}=b(e.feedReactions,r),o=i.useCallback((e,r)=>{r.stopPropagation(),n({emoji:e.emoji,addOnly:!1})},[n]),s=i.useCallback(e=>{n({emoji:e,addOnly:!0})},[n]),l=i.createElement(y,{type:e.type,feedResource:e.feedResource,source:e.source,onAddReaction:s,hideAddReactionButton:e.hideAddReactionButton});return 1===e.type?l:i.createElement("div",{className:m.KD},i.createElement(p.Kb,{reactions:a,collapseOverflow:!1,onClickExisting:o,prependToList:e.prependToList},l))}function y(e){let r=i.useRef(null),{isReactionPickerVisible:n,toggleReactionPicker:a,emojiPicker:o}=T(e.feedResource,e.source,r,e.onAddReaction);return e.hideAddReactionButton&&!n?i.createElement("div",{className:m.$S}):i.createElement(i.Fragment,null,i.createElement("div",{ref:r,className:s()(1===e.type?m.D5:m.HL)},i.createElement(p.ny,{onClick:a,selected:n,styleClassName:m.$S,selectedStyleClassName:m.Qi})),n&&o)}let b=(e,r)=>{let n=i.useMemo(()=>{let n={};if(!r)return n;for(let i of e)i.user.id===r.id&&(n[i.emoji]=i.id);return n},[e,r]),a=i.useCallback(e=>n[e],[n]);return{reactionsWithSelected:i.useMemo(()=>{let r={};for(let n of e){let{emoji:e,user:i,createdAt:o}=n;r[e]||(r[e]={emoji:e,users:[],selected:!!a(e),createdAt:o.getTime(),skinTonesToUsers:{}}),r[e].createdAt=Math.min(r[e].createdAt,o.getTime()),r[e].users.push({handle:i.handle,id:i.id,img_url:i.imgUrl})}return Object.values(r).sort((e,r)=>e.createdAt-r.createdAt||e.emoji.localeCompare(r.emoji))},[e,a]),existingReactionIdForCurrentUser:a}},v=(e,r)=>`FEED_TILE_EMOJI_PICKER-${e}${r?`-${r}`:null}`,T=(e,r,n,a)=>{let o=(0,c.BK)(v(r,e?.id)),s=i.useCallback(e=>{a(e.shortcodes),o.hide()},[o,a]),l=n.current&&i.createElement(u._,{onInsert:s,onCancel:o.hide,targetRect:n.current.getBoundingClientRect()});return{isReactionPickerVisible:o.showing,toggleReactionPicker:o.toggle,emojiPicker:l}}},772637:(e,r,n)=>{n.d(r,{e:()=>w});var i=n(848318),a=n(716544),o=n(513886),s=n(536384),l=n.n(s),c=n(271933),d=n(303035),u=n(654104),p=n(93600),m=n(442313),h=n(727341),_=n(950738),g=n(503024),f=n(94724),E=n(723744),y=n(246633),b=n(709864),v=n(149444),T=n(259951),I=n(428204),S=n(212295);function w({recordingKey:e,currentZoom:r,Dropdown:n,...s}){let w=(0,a.wA)(),A=i.useRef(null),C=(0,_.BK)(s.dropdownId),[N,L]=i.useState(null),O=(0,h.GS)(),R=i.useCallback(()=>{L(A?.current?.getBoundingClientRect()||null)},[A]);i.useEffect(()=>(R(),c._.addListener(R),window.addEventListener("resize",R),()=>{c._.removeListener(R),window.removeEventListener("resize",R)}),[R]);let P=i.useCallback(()=>{R(),C.toggle({hasOwnEscKeyHandler:!1})},[C,R]),D=u.rf(u.Pt(e,"zoomButton"),"click",P),M=C.showing&&N&&i.createElement(n,{targetRect:N,showingZoomDropdown:C.showing,toggleZoomMenu:C.toggle,recordingKey:e}),k=!("canZoomIn"in s)||s.canZoomIn,F=!("canZoomOut"in s)||s.canZoomOut,x="onZoomIn"in s?s.onZoomIn:d.lQ,U="onZoomOut"in s?s.onZoomOut:d.lQ;return i.createElement("div",{className:b.sH},i.createElement(o.o,{eventListeners:["onClick"]},i.createElement(y.K0,{recordingKey:u.Pt(e,"zoomOutButton"),className:l()({[b.QO]:!0,[b.Sn]:F}),svg:v.A,fallbackSvg:T.A,disabled:!F,onClick:U,"data-tooltip-type":g.Ib.LOOKUP,"data-tooltip":"zoom-out"}),i.createElement(p.L,{ariaLabel:(0,m.t)("fullscreen.zoom_menu.zoom_view_options"),onClick:D,selected:C.showing,className:l()(b.LY,C.showing&&b.vu),onboardingKey:f.q,"data-tooltip-type":g.Ib.TEXT,"data-tooltip":(0,m.t)("fullscreen.zoom_menu.zoom_view_options")},i.createElement("div",{className:b.cm,"data-testid":"zoom-amount",ref:A},function(){let e=Math.round(r);return O?e.toString().length<5?`${e}%`:`${e}`:`${e}%`}()),i.createElement("div",{className:b.FH,ref:A},i.createElement(E.c,{dispatch:w,dropdownKey:"zoom-input-dropdown",showingDropdown:C.showing,dataTestId:"zoom-menu-chevron",className:C.showing?b.r4:b.Dn,svgContainerClassName:b.r2,toggleOnClick:!0}))),M,i.createElement(y.K0,{recordingKey:u.Pt(e,"zoomInButton"),className:l()({[b.sy]:!0,[b.Sn]:k}),svg:I.A,fallbackSvg:S.A,disabled:!k,onClick:x,"data-tooltip-type":g.Ib.LOOKUP,"data-tooltip":"zoom-in"})))}},768205:(e,r,n)=>{n.d(r,{Wu:()=>S});var i=n(848318),a=n(716544),o=n(430285),s=n(579020),l=n(757033),c=n(182059),d=n(442313),u=n(449737),p=n(793478),m=n(386117),h=n(713547),_=n(254310),g=n(661780),f=n(572699),E=n(464012),y=n(117592),b=n(159019);let v=(0,E.Ju)(function(e){let r=(0,d.tx)("fig_feed.delete_confirmation");return e.numComments&&e.numReactions?r=(0,d.tx)("fig_feed.delete_confirmation_with_comments_and_reactions",{numCommentsAndReactions:e.numComments+e.numReactions}):e.numComments?r=(0,d.tx)("fig_feed.delete_confirmation_with_comments",{numComments:e.numComments}):e.numReactions&&(r=(0,d.tx)("fig_feed.delete_confirmation_with_reactions",{numReactions:e.numReactions})),i.createElement(y.Rw,{destructive:!0,confirmationTitle:(0,d.tx)("fig_feed.delete_post"),confirmText:(0,d.tx)("fig_feed.delete"),onConfirm:e.onConfirm,popStack:!0},i.createElement("p",null,r))},"PostConfirmDeleteModal");var T=(e=>(e.USER="user_post_context_menu",e.SYSTEM="system_post_context_menu",e))(T||{});let I=e=>{let r=(0,g.iZ)(),n=(0,m.Yo)(),i=(r&&r.id===e.creator.id)??!1,a=(0,f.j_)();return{canDelete:i,canAdminDelete:(0,_.MF)({oldValue:o.Qw.useMemoizedLoaded(!!n?.isAdmin),newValue:a,label:_.A5.useUserPostPermissions.isOrgAdmin,enableFullRead:(0,h.DQ)(h.Pw.GROUP_1)}).data,canEdit:i}};function S(e){let r=(0,a.wA)(),n=i.useCallback(()=>r(p.Y9()),[r]),{onEditClick:o,feedPost:m}=e,{canDelete:h,canAdminDelete:_,canEdit:g}=I(m),f=m.comments.length,E=m.reactions.length,y=i.useCallback(()=>{r((0,u.AS)()),l.Ay.del(`/api/feed_posts/post_uuid/${m.publicUuid}`).then(()=>{(0,s.sx)("Team Feed Post Deleted",{postUuid:m.publicUuid}),n()})},[r,m.publicUuid,n]),T=i.useCallback(()=>{r((0,u.to)({type:v,data:{onConfirm:y,numComments:f,numReactions:E},showModalsBeneath:!0}))},[r,y,f,E]);if(!h&&!_)return null;let S=h?(0,d.tx)("fig_feed.delete_ellipsis"):(0,d.tx)("fig_feed.delete_admin_ellipsis"),A=[!!g&&!!o&&i.createElement(c.c$,{key:"edit",onClick:o},(0,d.tx)("fig_feed.edit")),(!!h||!!_)&&i.createElement(c.c$,{key:"delete",onClick:T},S)];return i.createElement(b.V,{dropdownId:w("user_post_context_menu",e.feedPost.publicUuid,e.source),options:A,hideTarget:e.hideTarget,lean:"left",maxWidth:120})}let w=(e,r,n)=>e+r+n},308749:(e,r,n)=>{n.d(r,{n:()=>s});var i=n(848318),a=n(832876),o=n(516397);function s({team:e,size:r=o.P.MEDIUM,shape:n="SQUARE",fallbackDisplay:s=o.U.FIRST_CHARACTER,avatarSvg:l,fallbackSvg:c,svgSizeRatio:d,opacity:u}){return i.createElement(a.w7,{entity:e,size:r,hideFallbackInitial:s===o.U.HIDDEN,shape:n,avatarSvg:l,fallbackSvg:c,svgSizeRatio:d,opacity:u})}},433735:(e,r,n)=>{n.d(r,{Ac:()=>j,D2:()=>ea,bJ:()=>F,dO:()=>ee});var i=n(992277),a=n(741419),o=n(157907),s=n(39773),l=n(6819),c=n(502255),d=n(663689),u=n(871430),p=n(405866),m=n(850184),h=n(896853),_=n(441802),g=n(670673),f=n(305719),E=n(369600),y=n(792478),b=n(119310),v=n(312885),T=n(272659),I=n(348001),S=n(2632),w=n(494230),A=n(719948),C=n(676416),N=n(100754),L=n(561187),O=n(173),R=n(454722),P=(e=>(e.NONE="none",e.TOP_BAR="top-bar",e.NEW_FILE="new-file",e))(P||{});let D="used_figjam_ai_generate",M="used_figjam_ai_generate_modal_v2",k=(0,s.eU)(!1),F=(0,s.eU)(null,(e,r)=>{r(k,!0),r(q,void 0)}),x=(0,s.eU)(null,(e,r)=>{r(H),r(k,!1)}),U=(0,s.eU)(!1),B=(0,s.eU)(null,(e,r)=>{r(H),r(U,!0)}),V=(0,b.bt)(()=>(0,A.Uy)()&&!(0,o.k)().figjam_generate_handbrake&&!(0,u.y8)({isDisabledForViewers:!0})),G=(0,s.eU)(e=>e(V)?e(k)?"top-bar":(e(I.P)===S.iH.TRUE||e($))&&!e(U)&&e(v.l5)===T.fD.NONE?"new-file":"none":"none"),H=(0,s.eU)(null,(e,r)=>{r(W),r($,!1),r(q,void 0)});(0,s.eU)(null,(e,r)=>{let n=e(G);"top-bar"===n?r(x):"new-file"===n&&r(B)});let K=(0,s.eU)(null,(e,r)=>{e(en).abort(),r(en,new AbortController),r(ee,{status:N.c.NONE})});(0,s.eU)(null,(e,r)=>{r(H),r(U,!1),r(k,!1)});let W=(0,s.eU)(null,(e,r)=>{r(K),r(Y,A.Nb.ENTRY),r(Z,void 0),r(J,(0,O.Xi)()),r(Q,a.VIy.BASIC)});(0,s.eU)(null,(e,r)=>{r(Y,A.Nb.PROMPT_BUILDER)}),(0,y.Wh)(()=>(0,s.eU)(!1));let z=(0,s.eU)(A.Nb.ENTRY),$=(0,s.eU)(!1),Y=(0,s.eU)(null,(e,r,n)=>{n===A.Nb.PROMPT_BUILDER&&r($,!0),r(z,n)});(0,s.eU)(e=>e(z));let j=(0,s.eU)(""),q=(0,s.eU)(void 0),X=(0,s.eU)(""),Z=(0,s.eU)(void 0),J=(0,s.eU)((0,O.Xi)()),Q=(0,s.eU)(a.VIy.BASIC),ee=(0,s.eU)({status:N.c.NONE}),et=(0,s.eU)(null),er=(0,y.Wh)(()=>(0,s.eU)(!1));(0,s.eU)(null,(e,r,n)=>{r(er,n)});let en=(0,s.eU)(new AbortController),ei=(0,s.eU)(null,async(e,r,{fileKey:n,prompt:a,stage:s,useCaseCategory:u,useCase:y,subtitle:b,entrypoint:v,fromGenerateModalV2:T,pageNodeId:I})=>{let S;if(null===n&&(0,c.$D)(i.e.AI_PRODUCTIVITY,Error("No file key provided for FigJam AI Generate request")),!a)return{status:N.c.NONE};r(C.Mg,e=>e+1),e((0,g.r1)(D)).data||l.D.dispatch(p.b({[D]:!0}));let P=e((0,g.r1)(M)).data;T&&!P&&l.D.dispatch(p.b({[M]:!0})),r(K);let k=e(en).signal,F={orgId:e(_._s),teamId:e(E.As)||null,fileKey:n,userId:e(f.kS)||null,trackingSessionId:(0,d.f)()};r(ee,{status:N.c.LOADING}),r(Z,u),r(Y,A.Nb.PROMPT_BUILDER),r(et,I);let x="board";try{globalThis.AI_DEBUG_XML&&(0,o.k)().figjam_text_to_template_debug?x="board":(x=await (0,w.P)({prompt:a,signal:k,authInfo:F})||"board",(0,o.k)().figjam_text_to_visual_timeline||"timeline"!==x||(x="gantt"),(0,A.$B)()||"mindmap"!==x||(x="board"))}catch(o){let e=(0,R.E$)(o,R.ez.GENERATE);return S={status:N.c.ERROR,type:x,errorMessage:e.message,trace:o.trace},(0,C.h5)(n,0,1,a,"inappropriate",s,v,u,y,b),(0,C.fK)(n,e.message),e.reportToSentry&&(0,c.$D)(i.e.AI_PRODUCTIVITY,o),r(ee,S),S}u&&(u===A.es.FLOW_CHART?x="diagram":u===A.es.GANTT_CHART?x="gantt":u===A.es.ORG_CHART&&(x="orgchart"));let U=e(X),B=U&&a.includes(U)?U:void 0;r(X,""),(0,C.h5)(n,0,1,a,x,s,v,u,y,b,B);try{S=await (0,m.B)(()=>e(C.LX)||"null",n,h.T.AI,async()=>{let r;if("board"===x){let i=e(_._s);r=await (0,L.L)({prompt:a,signal:k,fileKey:n,authInfo:F,orgId:i})}else{let r=e(Q),n=e(J),i=x;await (0,O.$D)({prompt:a,signal:k,visualType:i,authInfo:F,ganttColor:n,ganttType:r})}let i=e(C.LX);return(0,C.lx)(n,0,a,x,i),{status:N.c.SUCCESS,type:x,trace:r}})}catch(e){if(e?.name==="AbortError")S={status:N.c.NONE};else{let r=(0,R.E$)(e,R.ez.GENERATE);S={status:N.c.ERROR,type:x,errorMessage:r.message,trace:e.trace},r.reportToSentry&&(0,c.$D)(i.e.AI_PRODUCTIVITY,e),(0,C.fK)(n,r.message)}}return r(ee,S),S});(0,s.eU)(null,(e,r,{prompt:n,stage:a,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:d,fromGenerateModalV2:u,pageNodeId:p})=>{let m=e(E.ze);if(null===m||0===m.length){(0,c.$D)(i.e.AI_PRODUCTIVITY,Error("No file key found for loaded file to use for FigJam AI Generate request"));return}r(ei,{fileKey:m,prompt:n,stage:a,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:d,fromGenerateModalV2:u,pageNodeId:p})});let ea=(0,s.eU)(null,(e,r,{fileKey:n,prompt:i,stage:a,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:c,fromGenerateModalV2:d,pageNodeId:u})=>{r(ei,{fileKey:n,prompt:i,stage:a,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:c,fromGenerateModalV2:d,pageNodeId:u})})},345883:(e,r,n)=>{n.d(r,{$t:()=>_,HZ:()=>g}),n(848318),n(716544),n(179703);var i=n(157907),a=n(39773),o=n(6819),s=n(871430);n(429819);var l=n(173970),c=n(262626),d=n(323075);n(326971);var u=n(369600),p=n(376780),m=n(922030),h=n(766878);function _({dispatch:e,pageGuids:r,fileKey:n,source:i}){let s=a.zl.get(u.ze),m=o.D.getState();!function({figjamData:e,newFileState:r,dispatch:n,source:i,checkIsViewer:o}){if(!f({checkIsViewer:o}))return;let s=a.zl.set(c.s5,e);n(l.zE({state:r,from:i,editorType:p._Y.SLIDES,openNewFileIn:h.ai.NEW_TAB,slidesAiNewFileData:{source:i},newFileDataLocalStorageKey:s}))}({figjamData:{figjamFileKey:n||s,pageGuids:r},newFileState:(0,d.Kl)(m),dispatch:e,source:i,checkIsViewer:!1})}function g(){return f({checkIsViewer:!1})}function f({checkIsViewer:e}){if(!(0,i.k)().piper_present_summary||(0,s.y8)({isDisabledForViewers:e}))return!1;if(!e){let e=a.zl.get(u.yV),r=!a.zl.get(m.Me)?.starter_team&&e?.viewerExportRestricted;if(e&&!e.canEditCanvas&&r)return!1}return!0}n(810175),n(741844)},719948:(e,r,n)=>{n.d(r,{Zj:()=>d,Nb:()=>o,i_:()=>u,Dl:()=>p,es:()=>l,$B:()=>_,Uy:()=>h}),n(848318),n(425642);var i=n(157907);n(442313);var a=(e=>(e.NEVER="never",e.ONCE="once",e.MORETHANEONCE="morethanonce",e))(a||{}),o=(e=>(e[e.ENTRY=0]="ENTRY",e[e.PROMPT_BUILDER=1]="PROMPT_BUILDER",e))(o||{}),s=(e=>(e.MEETING="meeting",e.GANTT_CHART="gantt_chart",e.BRAINSTORM="brainstorm",e.FLOW_CHART="flow_chart",e.ORG_CHART="org_chart",e.PLAN="plan",e.MIND_MAP="mind_map",e.TIMELINE="timeline",e))(s||{}),l=(e=>(e.WEEKLY_SYNC="weekly_sync",e.PLAN="plan",e.BRAINSTORM="brainstorm",e.TEAM_RETRO="team_retro",e.ONEONONE="1:1",e.GANTT_CHART="gantt_chart",e.FLOW_CHART="flow_chart",e.ORG_CHART="org_chart",e.MIND_MAP="mind_map",e.TIMELINE="timeline",e))(l||{}),c=(e=>(e.IN_EDITOR="in_editor",e.COMMUNITY="community",e.ONBOARDING_MODAL="onboarding_modal",e))(c||{}),d=(e=>(e.GENERATE_MODE="generate_stage",e.REFINEMENT_MODE="refinement_stage",e))(d||{});let u="figjam_ai_diagram",p="figjam_ai_template";var m=(e=>(e.TEMPLATE="template",e.VISUAL="visual",e))(m||{});function h(){return!!(0,i.k)().figjam_text_to_visual}function _(){return!!(0,i.k)().figjam_text_to_visual_mindmap}},276551:(e,r,n)=>{n.d(r,{OU:()=>s,RA:()=>o}),n(157907),n(831932);var i=n(663689);n(871430),n(87089);var a=n(487088);let o=new Set([a.Ph,a.T0]);function s(e){let r=e.openFile,n=r?r.teamId:null;return{teamId:n,orgId:e.currentUserOrgId,fileKey:r?r.key:null,userId:e.user?.id||null,trackingSessionId:(0,i.f)()}}},676416:(e,r,n)=>{n.d(r,{F9:()=>u,LX:()=>h,Mg:()=>_,fK:()=>m,h5:()=>d,lx:()=>p});var i=n(39773),a=n(579020),o=n(518259),s=(e=>(e.FREEFORM="freeform",e.SUGGESTION="suggestion",e.AUTOCOMPLETE="autocomplete",e))(s||{}),l=(e=>(e.AI_PROMPT_EDITED="ai_prompt_edited",e.AI_PROMPT_BUILDER_OUTPUT_REQUESTED="ai_prompt_builder_output_requested",e.AI_PROMPT_BUILDER_OUTPUT_STREAMING="ai_prompt_builder_output_streaming",e.AI_PROMPT_BUILDER_OUTPUT_CREATED="ai_prompt_builder_output_created",e.AI_PROMPT_REQUEST_ERROR="ai_prompt_request_error",e.AI_PROMPT_SUGGESTIONS_VIEWED="ai_prompt_suggestions_viewed",e))(l||{});let c=e=>"board"===e?"template":"visual";function d(e,r,n,s,l,d,u,p,m,h,g){let f="inappropriate"===l?l:c(l);(0,o.qV)(s).then(o=>{(0,a.sx)("ai_prompt_builder_output_requested",{fileKey:e,variantIndex:r,numVariants:n,promptId:o,outputType:f,oneClickPromptUseCase:m,oneClickPromptUseCaseCategory:p,oneClickPromptUseCaseSubCategory:h,numCharactersInput:s.length,localOutputId:i.zl.get(_),stage:d,uiTriggeredFrom:u,autocompletePromptAddition:g},{forwardToDatadog:!0})})}function u(e,r,n,s,l){(0,o.qV)(n).then(n=>{(0,a.sx)("ai_prompt_builder_output_streaming",{fileKey:e,variantIndex:r,promptId:n,outputType:c(s),cortexRequestId:l,localOutputId:i.zl.get(_)},{forwardToDatadog:!0})})}function p(e,r,n,s,l){(0,o.qV)(n).then(n=>{(0,a.sx)("ai_prompt_builder_output_created",{fileKey:e,variantIndex:r,promptId:n,outputType:c(s),cortexRequestId:l,localOutputId:i.zl.get(_)},{forwardToDatadog:!0})})}function m(e,r){(0,a.sx)("ai_prompt_request_error",{fileKey:e,errorMessage:r},{forwardToDatadog:!0})}let h=(0,i.eU)(null),_=(0,i.eU)(0)},305282:(e,r,n)=>{n.d(r,{Vn:()=>c,mr:()=>s});var i=n(6819),a=n(481540),o=n(323075),s=(e=>(e.REQUEST="ai_summary_requested",e.CREATE="ai_summary_created",e.DELETE="ai_summary_deleted",e.LINK_COPED="ai_summary_link_copied",e.TEXT_COPIED="ai_summary_text_copied",e.TIME_TAKEN_TO_COMPLETE="figjam.summarize.time_taken_to_complete",e))(s||{}),l=(e=>(e.TIME_TAKEN_TO_COMPLETE="figjam.cluster.time_taken_to_complete",e))(l||{});function c(e,r){let n=i.D.getState(),s=o.d1(n)?.key??"";(0,a.ds)(e,s,n,{...r})}},741844:(e,r,n)=>{n(716544),n(276551)},454722:(e,r,n)=>{n.d(r,{E$:()=>d,ez:()=>l}),n(848318),n(716544);var i=n(766139),a=n(741789);n(157907),n(44509);var o=n(442313);n(697714);var s=n(53818),l=(e=>(e.SUMMARIZE="sticky-summarization-error",e.CLUSTER="sticky-cluster-error",e.GENERATE="generate-error",e))(l||{}),c=(e=>(e.Reload="reload",e.Trace="trace",e))(c||{});let d=(0,s.D)((e,r)=>{let n={"sticky-summarization-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_summary.content_length_limit_exceeded_error"),figjam_summarize_out_of_date:(0,o.t)("whiteboard.ai_summary.out_of_date_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_summary.rate_limit_exceeded_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_summary.generic_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_summary.generic_error"),not_implemented:(0,o.t)("ai.error.not_implemented")},"sticky-cluster-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_cluster.content_length_limit_exceeded_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_cluster.rate_limit_exceeded_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_cluster.generic_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_cluster.generic_error"),not_implemented:(0,o.t)("ai.error.not_implemented")},"generate-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_generate.content_length_limit_exceeded_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_generate.rate_limit_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_generate.unknown_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_generate.unknown_error"),not_implemented:(0,o.t)("ai.error.not_implemented")}},s="generic",l=!0;if(e instanceof i.CortexErrorV2)i.ClientContentLengthLimitExceededError.isInstance(e)||i.ProviderContentLengthLimitExceededError.isInstance(e)?s="content_length_limit_exceeded":i.OutOfDateFeatureVersionError.isInstance(e)?"figjam_summarize"===e.featureName&&(s="figjam_summarize_out_of_date"):i.ProviderRateLimitExceededError.isInstance(e)||i.CortexRateLimitExceededError.isInstance(e)?s="rate_limit_exceeded":i.ProviderServiceIssueError.isInstance(e)||i.ProviderServiceBusyError.isInstance(e)?s="service_issue":i.OfflineError.isInstance(e)?(s="offline",l=!1):i.UnsafeOrHarmfulPromptError.isInstance(e)||i.ProviderUnsafeOrHarmfulContentError.isInstance(e)?(s="unsafe_or_harmful_content",l=!1):i.UnauthorizedError.isInstance(e)?(s="unauthorized",l=!1):i.NotImplementedError.isInstance(e)?(s="not_implemented",l=!1):i.FigjamVisualParsingError.isInstance(e)?(s="generic",l=!1):e?.statusCode===429?s="rate_limit_exceeded":e?.statusCode===403&&(s="ai_opt_out_error");else if(e instanceof a.G1)switch(e.type){case"content_length_limit_exceeded":s="content_length_limit_exceeded";break;case"figjam_summarize_out_of_date":s="figjam_summarize_out_of_date";break;case"rate_limit_exceeded":s="rate_limit_exceeded";break;case"service_issue":s="service_issue";break;case"offline":s="offline",l=!1;break;case"unsafe_or_harmful_content":case"figjam_generate_moderation_api_unsafe_or_harmful_content":s="unsafe_or_harmful_content",l=!1;break;case"unauthorized":s="unauthorized",l=!1;break;case"figjam_visual_parsing_error":s="generic",l=!1;break;case"generic":if(429===e.data.status){s="rate_limit_exceeded";break}403===e.data.status&&(s="ai_opt_out_error")}let c=n[r],d=c[s]??c.generic;return{type:s,message:d,reportToSentry:l}})},189996:(e,r,n)=>{n.d(r,{Z9:()=>g,iN:()=>E});var i=n(848318);n(716544);var a=n(741419),o=n(39773),s=n(543072),l=n(314078);n(397579),n(858423);var c=n(653959);n(77441),n(442313),n(697714);var d=n(369600),u=n(635547);n(694253),n(922030);var p=n(390119);n(929290);var m=n(53818);n(59077);var h=n(295915),_=n(410693);let g=(0,m.D)(()=>{let e=(0,d.tS)(),[r]=(0,c.IT)((0,u.nD6)({fileKey:e||""}),{enabled:!!e}),{loadedPaletteVariations:n,loadedColorPalette:a}=function(e){let r=(0,i.useRef)(),{uuid:n,palette:a}=function(e){let r={uuid:p.fJ,palette:void 0},n=e.data?.file;if("loaded"!==e.status||!n)return r;if(n.userColorPaletteOverrideData){let e=n.userColorPaletteOverrideData.colorPaletteUuid;if(e===p.fJ)return r;if(n.userColorPaletteOverrideData.colorPalette)return{uuid:e,palette:n.userColorPaletteOverrideData.colorPalette}}return n.defaultColorPaletteData?.colorPalette?{uuid:n.defaultColorPaletteData.colorPaletteUuid,palette:n.defaultColorPaletteData.colorPalette}:r}(e);r.current=a;let o=a?.baseColors.join(":")||"";return(0,i.useMemo)(()=>{let i,a;let c=r.current;return"loaded"===e.status&&c&&n!==p.fJ&&(i=o.split(":").map(e=>(0,s.tK)(e)).filter(f),a=(0,l.Eg)(i)),{loadedPaletteVariations:a,loadedColorPalette:c}},[n,o,e.status])}(r),m=(0,o.Xr)(_.$R);return((0,i.useEffect)(()=>{m(n)},[n,m]),a&&n)?{type:p.Yv.CUSTOM,variations:n,uuid:a.uuid,name:a.name,isTeamDefault:a.isTeamDefault}:{type:p.Yv.DEFAULT,uuid:p.fJ}});function f(e){return null!==e}function E(e,r){let n=g();return!!e&&(n.type===p.Yv.CUSTOM?0>n.variations[r].findIndex(r=>(0,s.DA)(e,r)):(0,h.zS)(e,r)===a.daH.CUSTOM)}},410693:(e,r,n)=>{n.d(r,{$R:()=>c,Jq:()=>s,Uh:()=>d,db:()=>u,rN:()=>l});var i=n(741419),a=n(179703),o=n(39773);n(858423),n(442313),n(697714),n(929290);let s=(0,o.eU)(-1),l=(0,o.eU)([]);(0,o.eU)(!1);let c=(0,o.eU)(void 0);function d(e){switch(e){case i.Z6A.STICKY:return["sticky"];case i.Z6A.HIGHLIGHT:return["highlight"];default:return["base","baseLight"]}}function u(){let e=o.zl.get(c);if(!e)return;let r=e.base;if(!r)return;let n=(0,a.UN)().getDirectlySelectedNodes().filter(e=>"STICKY"===e.type||"SHAPE_WITH_TEXT"===e.type||"SECTION"===e.type||"CONNECTOR"===e.type||"VECTOR"===e.type||"HIGHLIGHT"===e.type),i=new Map;n.forEach(e=>{e.immutableFrameShape&&(e=e.immutableFrameShape);let r=e.fills.length>0?e.fills[0].color:void 0,n=e.strokePaints.data.length>0?e.strokePaints.data[0].color:void 0,a=r||n;a&&(i.has(a)?i.set(a,i.get(a)+1):i.set(a,1))});let s=Array.from(i.entries()).sort((e,r)=>r[1]-e[1]),l=new Map,d=r.sort(()=>Math.random()-.5);s.forEach((e,r)=>{l.set(e[0],d[r%d.length])}),n.forEach(e=>{if(e.immutableFrameShape&&(e=e.immutableFrameShape),e.fills.length>0){let r=e.fills[0].color,n=r?l.get(r):void 0;n&&(e.fills=[{type:"SOLID",color:n}])}else if(e.strokePaints.data.length>0){let r=e.strokePaints.data[0].color,n=r?l.get(r):void 0;n&&(e.strokePaints={data:[{type:"SOLID",color:n}],blobs:[]})}})}(0,o.eU)(0)},508125:(e,r,n)=>{n.d(r,{f:()=>l});var i=n(741419),a=n(897392),o=n(39773);let s={positionRelativeToSelection:i.cfv.ABOVE,currentlySelectedNode:{nodeId:a.AD,ariaLabel:null}},l=(0,o.um)(s,(e,r)=>{switch(r.type){case"SET_POS_RELATIVE_TO_SELECTION":return{...e,positionRelativeToSelection:r.payload};case"SET_CURRENTLY_SELECTED_NODE":return{...e,currentlySelectedNode:r.payload};default:return e}})},797108:(e,r,n)=>{n.d(r,{UM:()=>l,zW:()=>c});var i=n(848318),a=n(536384),o=n.n(a),s=n(654104);n(166365);let l="dlt_banner_shortcut_button",c=(0,i.memo)((0,i.forwardRef)(function(e,r){let{shortcut:n,onClick:a,isActive:l,recordingKey:c,dataElementTarget:d,isPressed:u}=e,p=(0,s.rf)((0,s.Pt)("dltBannerShortcutButton",c),"click",a),m=o()("dlt_banner_inline_elements--shortcutButton--LOMMi",{"dlt_banner_inline_elements--active--zWunk":l,"dlt_banner_inline_elements--pressed--36odr":u});return i.createElement("button",{ref:r,className:m,onClick:p,"data-element-target":d},n)}))},795019:(e,r,n)=>{var i=n(848318),a=n(716544),o=n(741419),s=n(87631),l=n(797108);(0,i.memo)(function(e){let r=(0,a.d4)(e=>e.mirror.appModel.currentTool===o.NLJ.COMMENTS),n=(0,i.useCallback)(()=>{r?o.glU.triggerActionInUserEditScope("set-tool-default",{source:l.UM}):o.glU.triggerActionInUserEditScope("set-tool-comments",{source:l.UM})},[r]);return i.createElement(l.zW,{shortcut:"C",onClick:n,isActive:r,recordingKey:"comment",isPressed:e.isPressed})}),(0,i.memo)(function(e){let r=(0,a.d4)(e=>"REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&e.multiplayerEmoji.isChatting),n=(0,i.useCallback)(e=>{if(r){s.CB.closeWheel();return}s.CB.startChat(e.clientX,e.clientY,l.UM)},[r]);return i.createElement(l.zW,{shortcut:"/",onClick:n,isActive:r,recordingKey:"cursorChat",dataElementTarget:"dlt-banner-chat-shortcut",isPressed:e.isPressed})}),(0,i.memo)(function(e){let r=(0,i.useRef)(null),n=(0,a.d4)(e=>{let r="WHEEL"===e.multiplayerEmoji.type,n="REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&!!e.multiplayerEmoji.imageUrl;return r||n}),o=(0,i.useCallback)(()=>{if(n){s.CB.closeWheel();return}let e=r.current?.getBoundingClientRect()??{x:0,y:0},i=e.x+100,a=e.y-200;s.CB.handleShortcutPressWithType({viewportX:i,viewportY:a,source:l.UM,wheelType:"REACTION"}),s.CB.handleShortcutRelease(i,a)},[n]);return i.createElement(l.zW,{ref:r,shortcut:"E",onClick:o,isActive:n,recordingKey:"emote",dataElementTarget:"dlt-banner-emote-shortcut",isPressed:e.isPressed})})},688732:(e,r,n)=>{n(848318),n(475927),n(973182)},239313:(e,r,n)=>{n.d(r,{c5:()=>o,gT:()=>s});var i=n(39773),a=(e=>(e.ClickOut="clickOut",e.KeyboardEsc="keyboardEsc",e.ToolSelected="toolSelected",e.ChevronClicked="chevronClicked",e.PropertyChanged="propertyChanged",e.CloseButton="closeButton",e.ClickDemotedDlt="clickDemotedDlt",e.OpenedShapesSidebar="openedShapesSidebar",e))(a||{});let o=(0,i.eU)({stage:"FULL",thresholdWidth:774,numPrimaryTools:4});(0,i.um)({state:"closed"},function(e,r){return"open"===r.type?{state:"open",tool:r.tool}:"close"===r.type&&"open"===e.state&&"clickOut"!==r.source?{state:"closed"}:e});let s=(0,i.eU)(!1)},552382:(e,r,n)=>{n.d(r,{YB:()=>a,hx:()=>o}),n(848318),n(716544),n(536384);var i=n(654104);n(732502),n(718451),n(731560);let a=1500;function o(e){return i.Pt("delightfulToolbar",e)}},59077:(e,r,n)=>{n.d(r,{Dq:()=>p,E$:()=>m,LX:()=>f,T7:()=>g,XQ:()=>c,n6:()=>h,ns:()=>_,qB:()=>d,zQ:()=>u});var i=n(741419),a=n(157907),o=n(318672),s=n(295915),l=n(683347);l.uM,l.wv,l.Iz,l.g5;let c=[{type:"SOLID",color:(0,s.BV)(i.daH.BLACK,"base")}],d=l.wv,u=1,p=[{type:"SOLID",color:(0,s.BV)(i.daH.HIGHLIGHT_YELLOW,"highlight")}];function m(){return(0,s.BV)(i.Ez5?.uiState().showUI3Colors.getCopy()?i.daH.STICKY_GRAY_UI3:i.daH.STICKY_GRAY_LIGHT,"sticky")}let h=o.F.parse((0,s.Mr)((0,a.k)().figjam_dlt_bw_shapes?i.daH.WHITE:i.daH.VIOLET_LIGHT)),_=o.F.parse((0,s.Mr)((0,a.k)().figjam_dlt_bw_shapes?i.daH.GRAY_DARK:i.daH.NONE,"rgba(0,0,0,0)")),g=(0,a.k)().figjam_dlt_bw_shapes?i.xbm.SOLID:i.xbm.NONE,f=(0,s.BV)(i.daH.GRAY,"baseLight")},199875:(e,r,n)=>{n.d(r,{nS:()=>i});let i=n(848318).createContext({state:{draggedTool:void 0,draggedToolCanCancel:!0,shouldFinishClick:!0},dispatch:()=>null})},406204:(e,r,n)=>{n.d(r,{bz:()=>c,hv:()=>l}),n(848318),n(39773);var i=n(384274),a=n(742452),o=n(51910);n(694104);var s=n(560735);function l(e={}){let{isEnabledForViewers:r}=e,n=(0,o.aV)(),i=(0,s.Td)(),c=(0,a.N)();return n||i&&!r||c&&!r}function c(){let e=(0,i.kD)(),r=(0,i.tS)(),n=(0,s.Td)();return!!e&&r&&n}n(239313),n(666782),n(96813)},642117:(e,r,n)=>{n.d(r,{Hm:()=>E,yl:()=>f});var i=n(848318),a=n(716544),o=n(741419),s=n(352809),l=n(481540),c=n(474880),d=n(503024),u=n(552382),p=n(787124),m=n(161129),h=n(532920),_=n(365068),g=n(731560);let f="delightful-toolbar-universal-insert";function E(){let e=(0,a.d4)(e=>e.universalInsertModal.showing),r=(0,a.d4)(e=>e?.mirror?.appModel?.currentTool===o.NLJ.NONE),n=e&&r,E=(0,a.wA)(),y=(0,i.useCallback)(()=>{n?(E(s.KE()),o.glU.triggerActionInUserEditScope("set-tool-default",{source:_.fK})):(o.glU.triggerActionInUserEditScope("clear-tool",{source:_.fK}),E(s.En({initialX:0,initialY:0})),(0,l.Cu)({source:_.fK},"action_open_universal_insert_modal"))},[E,n]);return i.createElement("div",{"data-element-target":"delightful-toolbar-universal-insert-button",className:g.Zh},i.createElement(m.IB,{toolType:"universal-insert",recordingKey:(0,u.hx)("universal-insert"),isSelected:n,className:c.pb.isGoogleClassroomIntegration()?g.vy:g.pN,onClick:y,"data-tooltip-type":d.Ib.LOOKUP,"data-tooltip":"browse-all-resources-dlt",hasOpenSubmenu:n,onboardingKey:f},e=>i.createElement(p.gd,{toolType:"universal-insert",inactiveIcon:i.createElement(h.lV,null),hoveredIcon:i.createElement(h.AZ,null),activeIcon:i.createElement(h.cN,null),isSelected:n,isHovered:e})))}},464351:(e,r,n)=>{n.d(r,{x:()=>H});var i=n(848318),a=n(716544),o=n(39773),s=n(536384),l=n.n(s),c=n(379338),d=n(470403),u=n(17755),p=n(700777),m=n(711107),h=n(474880),_=n(493871),g=n(87089),f=n(661780),E=n(928001),y=n(492119),b=n(503024),v=n(791848),T=n(180633),I=n(239313),S=n(552382),w=n(691671),A=n(642117),C=n(555367),N=n(787124),L=n(224948),O=n(161129),R=n(532920),P=n(365068),D=n(852507),M=n(27776),k=n(694413),F=n(731560);let x=M.YCy,U=[{src:(0,c.ck)("9cd2eb2ff31cb221dce81ca1e67aa51e12b24166"),zIndex:0,width:50,height:50,translateStart:{x:42,y:36},rotateStart:-15,translateEnd:{x:42,y:36},rotateEnd:-15},{src:(0,c.ck)("276fdbb8f6edbcb958f84235ebfc58b63eab0fc2"),zIndex:1,width:50,height:50,translateStart:{x:95,y:36},rotateStart:15,translateEnd:{x:95,y:36},rotateEnd:15},{src:(0,c.ck)("94db9cf93e2a26f927d5f1a7f066f8b045985011"),zIndex:2,width:50,height:50,translateStart:{x:42,y:66},rotateStart:-10,translateEnd:{x:42,y:66},rotateEnd:-10},{src:(0,c.ck)("004b50b1460d47029608e9aaa66c09c1c94c6741"),zIndex:3,width:50,height:50,translateStart:{x:95,y:66},rotateStart:10,translateEnd:{x:95,y:66},rotateEnd:10}];function B({recentItems:e,toolbarIconScale:r,isModalOpen:n}){let a=(0,w.ws)(e);return i.createElement("div",{className:l()(F.z6,F.ac,k.JY),style:{width:112*r}},U.map((e,o)=>{var s,l;let c=a[o];return i.createElement(G,{key:c?.id||e.src,zIndex:x+1+e.zIndex,width:e.width*r,height:e.height*r,isModalOpen:n,transform:(s={x:e.translateStart.x*r,y:e.translateStart.y*r},l=e.rotateStart,`translate(calc(-50% + ${s.x}px), calc(-50% + ${s.y}px)) rotate(${l}deg)`)},c?i.createElement(C.E,{item:c,width:e.width*r,height:e.height*r,disableTooltips:!0}):i.createElement("img",{src:e.src,alt:"",className:k.VF}))}))}function V({onClick:e,isSelected:r,isHovered:n}){return i.createElement("div",{className:u.s.flex.itemsCenter.justifyCenter.mx20.h40.w40.$},i.createElement(O.IB,{toolType:"universal-insert-collage",recordingKey:(0,S.hx)("universal-insert-plus"),isSelected:r,hasOpenSubmenu:!1,onClick:e,"data-tooltip-type":b.Ib.LOOKUP,"data-tooltip":"browse-all-resources-dlt","data-tooltip-offset-y":-2},i.createElement(N.gd,{toolType:"universal-insert-collage",inactiveIcon:i.createElement(R.nX,null),hoveredIcon:i.createElement(R.ZH,null),activeIcon:i.createElement(R.cs,null),isSelected:r,isHovered:n})))}function G({zIndex:e,width:r,height:n,transform:a,isModalOpen:o,children:s}){return i.createElement("div",{className:l()(k.s,{[k.r3]:o}),style:{zIndex:e,width:r,height:n,transform:a}},i.createElement("div",{className:k.f_},s))}function H(e,r){let[n,a]=(0,i.useState)(!1),o=(0,i.useRef)(!1),s=(0,i.useRef)([]);return s.current=r,(0,i.useEffect)(()=>{e||o.current||(o.current=!0,async function(){let e=[];for(let r of s.current)r&&e.push(new Promise(e=>{let n=new Image;n.src=r,n.addEventListener("load",()=>e()),n.addEventListener("error",()=>e())}));await Promise.all(e),a(!0)}())},[e]),n}function K({toolbarIconScale:e}){let r=(0,f.TA)(),[n,s]=(0,i.useState)(!1),l=(0,a.wA)(),c=(0,w.NT)(),d=(0,o.md)(I.c5),u=(0,_.XM)(),b=(0,g.sZ)(),N=(0,a.d4)(e=>e.universalInsertModal.showing),R=(0,m.fG)(),M=(0,D.r)(N,d?.stage!=="FULL"?T.p.MORE:void 0);(0,i.useEffect)(()=>{l(v.cd.fetchTemplatesMetadata({key:y.$A.FigJam,orgId:b?.id})),l(v.cd.fetchWidgetsMetadata({key:y.$A.FigJam})),s(!0)},[l,b?.id]);let x=(0,E.oh)(p.fC),U=(0,E.oh)(v.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:y.$A.FigJam})),G=(0,E.oh)(v.cd.fetchWidgetsMetadata.loadingKeyForPayload({key:y.$A.FigJam})),K=H(!n||x||U||G,c.map(e=>(0,C.h)(e,R,r??void 0)))?c.map(e=>e.id||"").sort((e,r)=>e.localeCompare(r)).join(""):"loading",W=u&&d?.stage==="MINIMIZED_ZERO"||d?.stage==="MINIMIZED"||d?.stage==="CUT_OFF";return i.createElement(L.XN,{alignment:"CENTER"},i.createElement(O.IB,{toolType:"universal-insert-collage",recordingKey:(0,S.hx)("universal-insert-collage"),isSelected:N,className:h.pb.isGoogleClassroomIntegration()?F.vy:F.qs,onClick:M,ariaLabel:"browse-all-resources-dlt",onboardingKey:A.yl,"data-does-not-dismiss-modal":!0,hasOpenSubmenu:N},r=>i.createElement(L.ti,{isSelected:r,noScaleAnimation:!0,isRightEdge:!0},i.createElement("div",{className:k.Ge,"data-onboarding-key":"figjam-saves","data-element-target":P.b,"data-cancel-insertable-resource-drag-and-drop":!0},!W&&i.createElement(B,{key:K,recentItems:c,toolbarIconScale:e,isModalOpen:N}),i.createElement(V,{onClick:M,isSelected:N,isHovered:r})))))}function W(){return i.createElement(L.XN,{alignment:"CENTER"},i.createElement("div",{"data-element-target":P.b,className:k.V6},i.createElement(A.Hm,null)))}(0,i.memo)(function({toolbarIconScale:e}){return i.createElement(d.tH,{fallback:i.createElement(W,null),boundaryKey:"UniversalInsertCollage"},i.createElement(K,{toolbarIconScale:e}))})},721569:(e,r,n)=>{n(848318),n(871430)},787124:(e,r,n)=>{n.d(r,{gd:()=>a});var i=n(848318);function a({toolType:e,inactiveIcon:r,hoveredIcon:n,activeIcon:a,isHovered:o,isSelected:l}){return i.createElement(s,{toolType:e},i.createElement("div",{className:"dlt_hoverable_icon--centeredIcon--clLyK"},l?a:o?n:r))}n(536384),n(654104),n(983229),n(442313),n(406204),n(532920);let o=i.createContext({enableHiding:!1,visibleTool:"text"});function s({toolType:e,children:r}){let n=i.useContext(o);return i.createElement(i.Fragment,null,n.enableHiding&&n.visibleTool!==e?null:r)}},224948:(e,r,n)=>{n.d(r,{XN:()=>s,ti:()=>l});var i=n(848318);n(39773);var a=n(536384),o=n.n(a);function s({alignment:e,children:r,onMouseEnter:n,onMouseLeave:a,innerRef:s}){return i.createElement("div",{className:o()("dlt_submenu--submenuContainer--M4ufs toolbar--passthruLayout--fN4I1",{"dlt_submenu--submenuLeftAligned--ADsMj":"LEFT"===e,"dlt_submenu--submenuCenterAligned--ryltJ":"CENTER"===e,"dlt_submenu--submenuRightAligned--kUi5D":"RIGHT"===e}),onMouseEnter:n,onMouseLeave:a,ref:s},r)}function l({isSelected:e,children:r,explicitWidth:n,shouldCenterContent:a,noScaleAnimation:s,isRightEdge:l}){return i.createElement("div",{style:{width:n},className:o()("dlt_submenu--toolBackground--St0Y2 toolbar--passthruLayout--fN4I1",{"dlt_submenu--toolBackgroundScalingHighlight--LTx6Y":!s,"dlt_submenu--toolBackgroundHighlighted--aUWM5":e,"dlt_submenu--toolBackgroundCenterContent--p466V":a,"dlt_submenu--toolBackgroundRightEdgeHighlight--hqdJJ":!!l})},r)}n(983229),n(963376),n(442313),n(207092),n(382393),n(189996),n(406204),n(715424),n(71145),n(8601),n(532920)},161129:(e,r,n)=>{n.d(r,{IB:()=>y});var i=n(848318),a=n(536384),o=n.n(a),s=n(857188),l=n(654104),c=n(983229),d=n(686500),u=n(155651),p=n(199875),m=n(406204),h=n(459191),_=n(90903),g=n(236515),f=n(731560);let E=(0,i.forwardRef)(({toolType:e,isSelected:r,onClick:n,children:a,tooltipOffset:u={offsetX:0,offsetY:12},tooltipLocation:h="above",className:E,recordingKey:y,onboardingKey:b,ButtonLayout:v=g.J,isDisabled:T=!1,clickOnMouseDown:I=!1,inTabOrder:S=!0,ariaLabel:w,isHovered:A,isEnabledForViewers:C=!1,onMouseEnter:N,onMouseMove:L,onMouseLeave:O,onTouchStart:R,onTouchEnd:P,hasOpenSubmenu:D,testId:M,...k},F)=>{let{state:x,dispatch:U}=(0,i.useContext)(p.nS),B=(0,m.hv)({isEnabledForViewers:C})||T,V=x.draggedTool===e,G=w||k["data-tooltip"],H=e=>{e.preventDefault(),e.stopPropagation(),x.shouldFinishClick&&!I&&n(e)};return i.createElement(c.D8,{className:o()(f.Zh,f.$y,{[f.ll]:B}),"data-fullscreen-intercept":!0,"data-onboarding-key":b,"data-testid":M,"data-tooltip":k["data-tooltip"],"data-tooltip-bottom-flip-margin":k["data-tooltip-bottom-flip-margin"],"data-tooltip-offset-x":k["data-tooltip-offset-x"]??u.offsetX,"data-tooltip-offset-y":k["data-tooltip-offset-y"]??u.offsetY,"data-tooltip-show-above":"above"===h||void 0,"data-tooltip-show-below":"below"===h||void 0,"data-tooltip-show-left":"left"===h||void 0,"data-tooltip-submenu-open":D,"data-tooltip-type":V?null:k["data-tooltip-type"],onClick:B?void 0:H,onMouseEnter:N,onMouseLeave:O,onMouseMove:L,onPointerDown:B?void 0:e=>{if(e.preventDefault(),e.stopPropagation(),I?(n(e),U({type:"cancel drag"})):U({type:"start click"}),!_.T.RECORD_DETAILED_EVENTS)return l.aH},onTouchEnd:P,onTouchStart:R,recordingKey:y},i.createElement(v,{className:E,isHovering:A,isSelected:r,disabled:B,isDragging:V,"aria-hidden":!0},a),i.createElement(c.D8,{"aria-disabled":B,"aria-hidden":!S,"aria-label":G&&S?function(e){try{return(0,d.A)(e)||e}catch(r){return e}}(G):void 0,className:o()(f.yG,f.dR,{[f.ll]:B,[f.vu]:r,[f.Lt]:"select"===e,[f.sD]:"hand"===e}),"data-fullscreen-intercept":!0,forwardedRef:F,onClick:B?void 0:H,onKeyDown:B?void 0:e=>{e.keyCode===s.Uz.ENTER&&x.shouldFinishClick&&!I&&n(e)},role:S?"button":void 0,tabIndex:S&&!B?0:-1}))}),y=(0,i.forwardRef)(({children:e,hasExtraLongHoverTime:r,...n},a)=>{let{isHovered:o,hoverTarget:s,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onTouchStart:u,onTouchEnd:p}=(0,h.W)(n.onClick,r),m="function"==typeof e?e(o,s):e;return i.createElement(E,{...n,ref:a,isHovered:o,onMouseEnter:l,onMouseLeave:d,onMouseMove:c,onTouchStart:u,onTouchEnd:p},m)});(0,u.tf)(y)},715424:(e,r,n)=>{var i=n(151144);i.lLk.id,i.kp0.id,i.Njd.id,i.MJs.id,i.zoI.id,i.wRI.id,i.Kze.id,i.Wd_.id},614214:(e,r,n)=>{n.d(r,{B:()=>s});var i=n(741419),a=n(39773);let o=i.cxo.SELECTION,s=(0,a.eU)(o)},666782:(e,r,n)=>{n.d(r,{Vi:()=>o});var i=n(716544),a=n(741419);function o(){return(0,i.d4)(e=>e?.mirror?.appModel?.currentTool===a.NLJ.COMMENTS)}n(157907),n(244932),n(519675)},917109:(e,r,n)=>{n.d(r,{qV:()=>l,ym:()=>s});var i=n(481540);let a={toggles_mute:"toggles_mute",changes_volume:"changes_volume"},o=(e,r,n,a)=>{(0,i.ds)(e,r.openFile?.key,r,{...n,multiplayer_count:r.multiplayer.allUsers.length},a)},s=(e,r)=>o(a.toggles_mute,e,{isMuted:r}),l=(e,r)=>o(a.changes_volume,e,{volume:r})},783575:(e,r,n)=>{n.d(r,{$_:()=>c,I8:()=>d,P0:()=>a,_s:()=>o,c4:()=>l,om:()=>u});var i=n(368611);function a(e){let r=[];return e.forEach(e=>{let n=Math.floor(Math.random()*e.cuesheet.tracks.length);e.start_at_ms=e.cuesheet.tracks[n].start_time,r.push(e)}),r}async function o({songID:e,onSuccess:r,onNotFound:n}){try{await i.N.getActive({songID:e}),r()}catch(r){if(404===r.status){n();return}throw console.warn(`Failed to fetch active song with id ${e}: ${r}`),n(),r}}let s=["play","pause","previoustrack","nexttrack","seekbackward","seekforward","seekto","stop"];function l(){return"mediaSession"in navigator&&!!navigator.mediaSession.metadata}function c(e,r){if(!e)return;let{title:n,album_art:i}=e;if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=new window.MediaMetadata({title:n,artist:"FigJam Music",artwork:[{src:i||""}]}),s))try{navigator.mediaSession.setActionHandler(e,()=>{})}catch(r){console.warn(`Attempting to stub out all action handlers for media session, but the media session action '${e}' is not supported`)}r&&navigator.mediaSession.setActionHandler("stop",()=>{r()})}}function d(){if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=null,s))try{navigator.mediaSession.setActionHandler(e,null)}catch(r){console.warn(`Attempting to null all custom action handlers for media session, but the media session action '${e}' is not supported`)}navigator.mediaSession.setActionHandler("play",()=>{})}}function u(){navigator.mediaSession.setActionHandler("play",null)}},893028:(e,r,n)=>{n.d(r,{FR:()=>s,P$:()=>a,YI:()=>o});var i=n(710905);function a(e){return e?e.isPaused?e.timeRemainingMs:e.timeRemainingMs-performance.now()+e.timeOrigin:-1/0}function o(e){return e<10?`0${e}`:`${e}`}function s(){let e=(0,i.F4)();return!!e?.shouldShowTimerOnTheLeft}},798523:(e,r,n)=>{var i=n(39773),a=n(171659),o=n(119310),s=n(893028);function l(){let e=(0,a.DN)().get("last-timer-set-time")||180;return{seconds:(0,s.YI)(e%60),minutes:(0,s.YI)(Math.floor(e/60)),lastUsedTime:e,isStopping:!1,lastAction:{type:"reset-state"}}}(0,i.um)(l(),(e,r)=>{let n={...e,lastAction:r};switch(r.type){case"set-seconds":return{...n,seconds:r.seconds};case"set-minutes":return{...n,minutes:r.minutes};case"set-time":return{...n,minutes:r.minutes,seconds:r.seconds};case"add-minutes":let i=Math.min(Math.max(0,parseInt(n.minutes)+r.minutes),99).toString(),a=1===i.length?"0"+i:i;return{...n,minutes:a};case"start-timer":let o=60*parseInt(n.minutes)+parseInt(n.seconds);if(1e3*o<=0)return n;return{...n,lastUsedTime:o};case"reset-state":return l();default:return n}});let c=(0,o.bt)(e=>e.timer),d=(0,i.eU)({});(0,i.yu)((0,i.eU)(e=>(e(d),Math.max(0,Math.ceil((0,s.P$)(e(c).time)/1e3))),(e,r,n)=>{r(d,{})}),({setSelf:e})=>{let r=setInterval(()=>{let r=i.zl.get(c);!r||!r.time||r?.time?.isPaused||e("RECOMPUTE")},200);return()=>clearInterval(r)})},139837:(e,r,n)=>{n.d(r,{V3:()=>A,w:()=>w,HG:()=>C});var i=n(848318);n(716544);var a=n(897378),o=n(846153);n(741419);var s=n(170286),l=n(20149),c=n(221769),d=n(226128),u=n(654104),p=n(575492),m=n(442313),h=n(500276);n(779073);var _=n(832802),g=n(574667),f=n(166917),E=n(300129),y=n(767252),b=n(436729),v=n(566828),T=n(943840);n(662275),n(45584);var I=n(27776),S=n(10897);let w=32,A=7.5,C=256;var N=(e=>(e.DEFAULT="default",e.HOVERED="hovered",e.SELECTED="selected",e.DIMMED="dimmed",e))(N||{}),L=(e=>(e.LARGE="large",e.MEDIUM="medium",e.SMALL="small",e.X_SMALL="xSmall",e))(L||{});function O({clientHeight:e,scrollHeight:r,scrollTop:n}){return 1>Math.abs(r-e-n)}function R({numTotalVotes:e,isMostVoted:r}){return i.createElement("span",{className:S.TK},i.createElement("span",null,(0,m.tx)("voting.pin.votes",{numVotes:e})),r&&i.createElement("img",{src:v.Ys,className:S.C0,alt:(0,m.t)("voting.pin.medal_img_alt")}))}function P({reportWidth:e,numTotalVotes:r,isMostVoted:n,scale:a,padding:o}){let s=i.useRef(null);return i.useLayoutEffect(()=>{let r=s.current;if(r){let{width:n}=r.getBoundingClientRect();window.myEl=r,e(n)}},[s,r,n,a,o.paddingLeft,o.paddingRight,o.paddingTop,o.paddingBottom,e]),i.createElement("div",{className:S.D9,style:{transform:`scale(${a})`},"aria-hidden":!0},i.createElement("span",{style:o,ref:s},i.createElement(R,{numTotalVotes:r,isMostVoted:n})))}function D({userId:e,nodeVotes:r}){let n=r.length>3,a=n?r.slice(0,2):r,o=r.length-2;return i.createElement("li",{key:e,className:S.QE},i.createElement(M,{userId:e}),i.createElement("div",{className:S.WK},a.map(e=>i.createElement(F,{key:e,stampId:e})),n&&i.createElement("span",{className:S._v},o)))}function M({userId:e}){let{user:r,loading:n}=(0,g.wW)(e);return i.createElement(i.Fragment,null,i.createElement(b.v,{userId:e,user:r,loading:n,size:24,loadingClassName:S.SD}),i.createElement(b.m,{userId:e,user:r,loading:n,defaultClassName:S.nT,loadingClassName:S.fK}))}function k({overflowCount:e}){return i.createElement("li",{className:S.Qf},i.createElement("div",{className:S.EA},i.createElement(v.xL,null)),i.createElement("span",{className:S.iG},(0,m.tx)("voting.pin.voter_list_overflow",{numOverflowingVoters:e})))}function F({stampId:e}){let r=(0,d.fU)(),n=(0,f.Fk)((e,r)=>{let n=e.get(r);return n?n.name:null},e),a=(()=>{let e=y.WJ.find(e=>e.label===n);return e&&(0,E.k6)(e,r)||y.tR})(),o=n?(0,m.t)("voting.pin.stamp_preview_alt_with_type",{stampType:n}):(0,m.t)("voting.pin.stamp_preview_alt_without_type");return i.createElement("img",{className:S.O8,src:a,alt:o})}i.memo(function({nodeVoteInfo:e,isMostVoted:r,pinState:n,setIsHovered:d,selectPin:g,deselectPin:f,viewportSize:E,currentUserId:y,recordingKey:b}){let v=(0,i.useRef)(null),C=(0,i.useRef)(null),[N,L]=(0,i.useState)(0),[M,F]=(0,i.useState)(!1),[x,U]=(0,i.useState)(!0),[B,V]=(0,i.useState)(0),[G,H]=(0,i.useState)(!1),K=(0,T.oC)(e),W={large:{paddingTop:"2px",paddingBottom:"2px",paddingLeft:"10px",paddingRight:"10px"},medium:{paddingTop:"1px",paddingBottom:"1px",paddingLeft:"8px",paddingRight:"8px"},small:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"7px",paddingRight:"7px"},xSmall:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"6px",paddingRight:"6px"}}[E],z={large:1,medium:.9,small:.8,xSmall:.7}[E];(0,i.useEffect)(()=>{if("selected"!==n)return;let e=e=>{(0,_.n3)(e.target,v.current)||f()};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[n,f,e.guid]);let $=r?h.sx.colorBgvotingtertiary.$.backgroundColor:h.sx.colorBg.$.backgroundColor,Y={default:{transform:`scale(${z})`,backgroundColor:$,borderColor:$,opacity:1,...W},dimmed:{transform:`scale(${z})`,backgroundColor:$,borderColor:$,opacity:.5,...W},hovered:{transform:"scale(1)",backgroundColor:$,borderColor:$,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"},selected:{transform:"scale(1)",backgroundColor:$,...h.sx.colorBorderSelectedStrong.$,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"}},j={default:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},dimmed:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},hovered:{width:I.$tX,height:I.$tX,marginLeft:"8px",marginRight:"12px",opacity:0},selected:{width:I.$tX,height:I.$tX,marginLeft:"8px",marginRight:"12px",opacity:1}},q=(0,i.useMemo)(()=>{let r=(0,T.zi)(y);return Object.entries(e.userIdToNodeVotes).sort((e,n)=>r(e[0],n[0]))},[e.userIdToNodeVotes,y]),X=q.length>3,Z=X?q.slice(0,2):q,J=X?q.slice(2):[],Q={hovered:{height:`${w}px`},selected:{height:"auto"}},ee=(0,i.useCallback)(e=>{let r=0!==e;r!==M&&F(r);let n=C.current?.getScrollHeight(),i=C.current?.getTrackHeight(),a=void 0===n||void 0===i||O({clientHeight:i,scrollHeight:n,scrollTop:e});a!==x&&U(a)},[M,x]),et=(0,i.useCallback)(e=>{if(!e||!C.current){F(!1),U(!0);return}let r=C.current.getScrollTop(),n=C.current.getScrollHeight(),i=C.current.getTrackHeight();F(0!==r),U(O({clientHeight:i,scrollHeight:n,scrollTop:r}))},[]);return i.createElement(s.x,{transition:{duration:.1,ease:"easeInOut"}},i.createElement("div",{role:"button",tabIndex:0,className:S.UD,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onClick:u.rf(b,"click",g),ref:v,style:{transform:`translateX(${10-N}px)`},id:e.guid},i.createElement(l.P.div,{className:S.yM,initial:!1,animate:n,variants:Y},i.createElement("p",{className:S.wx},i.createElement(R,{numTotalVotes:K,isMostVoted:r}),i.createElement(l.P.span,{className:S.cG,initial:!1,animate:n,variants:j},"selected"===n&&i.createElement(a.K,{onClick:e=>{e.stopPropagation(),f(),d(!1)},"aria-label":(0,m.t)("general.close")},i.createElement(o.A,null)))),i.createElement(c.N,null,["selected","hovered"].includes(n)&&i.createElement(i.Fragment,null,i.createElement(l.P.div,{className:S.W0,animate:"selected"===n&&M&&!G?"scrolled":"notScrolled",initial:{marginTop:"0px",opacity:0},variants:{notScrolled:{marginTop:"4px",opacity:0},scrolled:{marginTop:"4px",opacity:1}},exit:{marginTop:"0px",opacity:0}}),i.createElement(l.P.div,{className:S.sI,initial:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/z})`},animate:{width:"240px",height:"auto",opacity:1,transform:"scale(1)"},exit:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/z})`}},i.createElement(p.P,{ref:C,maxHeight:w*A,width:240,allowScrollAndZoomOver:!0,onScroll:ee,onCanScrollChange:et,forceRerenderCount:B},i.createElement("ul",{className:S.hQ},Z.map(([e,r])=>i.createElement(D,{key:e,userId:e,nodeVotes:r})),X&&i.createElement(l.P.div,{initial:!1,animate:n,variants:Q,onAnimationStart:()=>H(!0),onAnimationComplete:()=>{H(!1),V(e=>e+1)}},"hovered"===n&&i.createElement(k,{overflowCount:q.length-Z.length}),"selected"===n&&J.map(([e,r])=>i.createElement(D,{key:e,userId:e,nodeVotes:r})))))),i.createElement(l.P.div,{className:S.W0,animate:"selected"!==n||x||G?"hide":"show",initial:{opacity:0},variants:{show:{opacity:1},hide:{opacity:0}},exit:{opacity:0}}))))),i.createElement(P,{reportWidth:L,numTotalVotes:K,isMostVoted:r,scale:z,padding:W}))})},566828:(e,r,n)=>{n.d(r,{Ys:()=>o,xL:()=>s});var i=n(848318),a=n(379338);(0,a.ck)("054596349bf8a2ae155aa7818cf2a3cbf483a9f4");let o=(0,a.ck)("295306027f272a9b0931ddec9321361f7cd8299b");function s(){return i.createElement("svg",{width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 3.5C8.5 4.88071 7.38071 6 6 6C4.61929 6 3.5 4.88071 3.5 3.5C3.5 2.11929 4.61929 1 6 1C7.38071 1 8.5 2.11929 8.5 3.5ZM9.5 3.5C9.5 5.433 7.933 7 6 7C4.067 7 2.5 5.433 2.5 3.5C2.5 1.567 4.067 0 6 0C7.933 0 9.5 1.567 9.5 3.5ZM17 5C17 6.10457 16.1046 7 15 7C13.8954 7 13 6.10457 13 5C13 3.89543 13.8954 3 15 3C16.1046 3 17 3.89543 17 5ZM18 5C18 6.65685 16.6569 8 15 8C13.3431 8 12 6.65685 12 5C12 3.34315 13.3431 2 15 2C16.6569 2 18 3.34315 18 5ZM13.2108 10.4215C13.7492 10.1518 14.3569 10 15 10C17.2091 10 19 11.7909 19 14H20C20 11.2386 17.7614 9 15 9C14.1612 9 13.3706 9.20657 12.6763 9.57162C12.8743 9.83933 13.0532 10.1234 13.2108 10.4215ZM12 14H11C11 11.2386 8.76142 9 6 9C3.23858 9 1 11.2386 1 14H0C0 10.6863 2.68629 8 6 8C9.31371 8 12 10.6863 12 14Z"}))}},168649:(e,r,n)=>{n(848318),n(716544),n(351766)},943840:(e,r,n)=>{n.d(r,{oC:()=>a,zi:()=>o}),n(848318),n(716544),n(741419),n(39773),n(831932),n(442313),n(449737),n(257489),n(976308),n(992444),n(369600),n(376780),n(922030),n(988540),n(241917),n(515071),n(197771),n(301279),n(795426),n(805708),n(168649);var i=(e=>(e.FEATURE_DISABLED="featureDisabled",e.ELIGIBLE_WITH_MOVE_FILE_TO_PAID_TEAM="eligibleWithMoveFileToPaidTeam",e.ELIGIBLE_WITH_UPGRADE="eligibleWithUpgrade",e.ELIGIBLE="eligible",e))(i||{});function a(e){return Object.values(e.userIdToNodeVotes).reduce((e,r)=>e+r.length,0)}function o(e){return function(r,n){return r===e?-1:n===e?1:r.localeCompare(n)}}},795426:(e,r,n)=>{n.d(r,{Fn:()=>i,OO:()=>a}),n(848318),n(716544),n(741419),n(39773),n(541525),n(779073),n(493871),n(798523),n(301279),n(805708),n(168649);var i=(e=>(e.OPEN="meetings_panel_open",e.CLOSE="meetings_panel_close",e))(i||{}),a=(e=>(e.MEETINGS_TOOLBAR="meetings_toolbar",e.MEETINGS_MINIMIZED="meetings_minimized",e.MEETINGS_PANEL="meetings_panel",e.INSERTS_MENU="inserts_menu",e.QUICK_ACTIONS="quick_actions",e.IPAD_MENU="ipad_menu",e.MAKE_SOMETHING_V2_ONBOARDING="make_something_v2_onboarding",e))(a||{})},295915:(e,r,n)=>{n.d(r,{AF:()=>H,BV:()=>V,Cn:()=>U,Cz:()=>W,Mr:()=>K,TS:()=>x,V_:()=>G,zS:()=>B});var i=n(992277),a=n(741419),o=n(157907),s=n(502255),l=n(442313),c=n(318672),d=n(209544),u=n(409584),p=n(728075);let m=["base","baseLight","sticky","highlight","widget","pencilUI3","codeBlockTheme"];function h({colorsToCSS:e,lightDisplayColors:r,darkDisplayColors:n}){return{COLOR_TO_CSS:e,CSS_TO_COLOR:new Map(Array.from(e,([e,r])=>[r,e])),LIGHT_DISPLAY:r??e,DARK_DISPLAY:n??e}}let _=a.Hdj.V700,g=new Map;function f(e){return 0===g.size&&function(){let e=a.DV9?.getWhiteboardPaletteTypeToRampValue();if(e)for(let[r,n]of e.entries()){if(!m.includes(r)){(0,s.$D)(i.e.FIGJAM,Error(`${r} doesn't exist in the WhiteboardPaletteType union type`));continue}g.set(r,n)}}(),g.get(e)??_}let E=h({colorsToCSS:new Map([[a.daH.BLACK,p.jR],[a.daH.GRAY_DARK,p.vh],[a.daH.RED,p.N0],[a.daH.ORANGE,p.qm],[a.daH.YELLOW,p.Sb],[a.daH.GREEN,p.RO],[a.daH.BLUE,p.k0],[a.daH.VIOLET,p.zt],[a.daH.WHITE,p.t1]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[a.daH.BLACK,p.Ws],[a.daH.GRAY_DARK,p._M],[a.daH.BLUE,p.jc],[a.daH.VIOLET,p.mO],[a.daH.WHITE,p.az],[a.daH.RED,p.Af],[a.daH.ORANGE,p.n7],[a.daH.YELLOW,p.p5],[a.daH.GREEN,p.R2]])});function y(e=!1){return a.Ez5?.uiState().showUI3Colors.getCopy()&&!e?function(){let e=f("base");return h({colorsToCSS:new Map([[a.daH.BLACK,p.jR],[a.daH.GRAY_DARK,p.vh],[a.daH.YELLOW,(0,u.W)(u.r.YELLOW,e)],[a.daH.ORANGE,(0,u.W)(u.r.ORANGE,e)],[a.daH.RED,(0,u.W)(u.r.RED,e)],[a.daH.PINK,(0,u.W)(u.r.PINK,e)],[a.daH.VIOLET,(0,u.W)(u.r.VIOLET,e)],[a.daH.BLUE,(0,u.W)(u.r.BLUE,e)],[a.daH.TEAL,(0,u.W)(u.r.TEAL,e)],[a.daH.GREEN,(0,u.W)(u.r.GREEN,e)],[a.daH.WHITE,p.t1]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():E}let b=h({colorsToCSS:new Map([[a.daH.GRAY,p.Z6],[a.daH.GRAY_LIGHT,p.xr],[a.daH.RED_LIGHT,p.Po],[a.daH.ORANGE_LIGHT,p.is],[a.daH.YELLOW_LIGHT,p.Qw],[a.daH.GREEN_LIGHT,p.bu],[a.daH.BLUE_LIGHT,p.oW],[a.daH.VIOLET_LIGHT,p.Py]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[a.daH.GRAY,p._M],[a.daH.GRAY_LIGHT,p.A4],[a.daH.BLUE_LIGHT,p.X8],[a.daH.VIOLET_LIGHT,p.eN],[a.daH.RED_LIGHT,p._P],[a.daH.ORANGE_LIGHT,p.LL],[a.daH.YELLOW_LIGHT,p.fU],[a.daH.GREEN_LIGHT,p.c6]])});function v(){return a.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=f("baseLight");return h({colorsToCSS:new Map([[a.daH.GRAY,p.Z6],[a.daH.GRAY_LIGHT,p.U8],[a.daH.YELLOW_LIGHT,(0,u.W)(u.r.YELLOW,e)],[a.daH.ORANGE_LIGHT,(0,u.W)(u.r.ORANGE,e)],[a.daH.RED_LIGHT,(0,u.W)(u.r.RED,e)],[a.daH.PINK_LIGHT,(0,u.W)(u.r.PINK,e)],[a.daH.VIOLET_LIGHT,(0,u.W)(u.r.VIOLET,e)],[a.daH.BLUE_LIGHT,(0,u.W)(u.r.BLUE,e)],[a.daH.TEAL_LIGHT,(0,u.W)(u.r.TEAL,e)],[a.daH.GREEN_LIGHT,(0,u.W)(u.r.GREEN,e)]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():b}let T=h({colorsToCSS:new Map([[a.daH.STICKY_GRAY,p.oK],[a.daH.STICKY_RED,p.SW],[a.daH.STICKY_ORANGE,p.B9],[a.daH.STICKY_YELLOW,p.Pp],[a.daH.STICKY_GREEN,p.k7],[a.daH.STICKY_BLUE,p.JI],[a.daH.STICKY_VIOLET,p._x],[a.daH.STICKY_PINK,p.a6],[a.daH.STICKY_GRAY_LIGHT,p.Uw]]),lightDisplayColors:new Map([[a.daH.STICKY_GRAY_LIGHT,p.FQ],[a.daH.STICKY_GRAY,p.fh],[a.daH.STICKY_BLUE,p.yG],[a.daH.STICKY_VIOLET,p.DN],[a.daH.STICKY_RED,p.pZ],[a.daH.STICKY_PINK,p.i4],[a.daH.STICKY_ORANGE,p.Q2],[a.daH.STICKY_YELLOW,p.iU],[a.daH.STICKY_GREEN,p.h3]]),darkDisplayColors:new Map([[a.daH.STICKY_GRAY_LIGHT,p.PQ],[a.daH.STICKY_GRAY,p.T2],[a.daH.STICKY_BLUE,p.o$],[a.daH.STICKY_VIOLET,p.Zz],[a.daH.STICKY_RED,p.$b],[a.daH.STICKY_PINK,p.Q1],[a.daH.STICKY_ORANGE,p.aT],[a.daH.STICKY_YELLOW,p.K4],[a.daH.STICKY_GREEN,p.nL]])});function I(){return a.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=f("sticky");return h({colorsToCSS:new Map([[a.daH.WHITE,p.t1],[a.daH.STICKY_GRAY_UI3,p.Dd],[a.daH.STICKY_YELLOW,(0,u.W)(u.r.YELLOW,e)],[a.daH.STICKY_ORANGE,(0,u.W)(u.r.ORANGE,e)],[a.daH.STICKY_RED,(0,u.W)(u.r.RED,e)],[a.daH.STICKY_PINK,(0,u.W)(u.r.PINK,e)],[a.daH.STICKY_VIOLET,(0,u.W)(u.r.VIOLET,e)],[a.daH.STICKY_BLUE,(0,u.W)(u.r.BLUE,e)],[a.daH.STICKY_TEAL,(0,u.W)(u.r.TEAL,e)],[a.daH.STICKY_GREEN,(0,u.W)(u.r.GREEN,e)]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():T}function S(){return h({colorsToCSS:new Map([[a.daH.CODE_BLOCK_DRACULA,p.B8],[a.daH.CODE_BLOCK_DUOTONE_LIGHT,p.Tn],[a.daH.CODE_BLOCK_DUOTONE_SEA,p.OF],[a.daH.CODE_BLOCK_DUOTONE_SPACE,p.Zv],[a.daH.CODE_BLOCK_DUOTONE_EARTH,p.L5],[a.daH.CODE_BLOCK_DUOTONE_FOREST,p.QE]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}let w=h({colorsToCSS:new Map([[a.daH.HIGHLIGHT_GRAY,p.g$],[a.daH.HIGHLIGHT_RED,p.vD],[a.daH.HIGHLIGHT_ORANGE,p.Ah],[a.daH.HIGHLIGHT_YELLOW,p.wO],[a.daH.HIGHLIGHT_GREEN,p.Td],[a.daH.HIGHLIGHT_BLUE,p.qH],[a.daH.HIGHLIGHT_VIOLET,p.fV],[a.daH.HIGHLIGHT_WHITE,p.nG]]),lightDisplayColors:new Map([[a.daH.HIGHLIGHT_RED,p.qt],[a.daH.HIGHLIGHT_YELLOW,p.DE],[a.daH.HIGHLIGHT_GREEN,p.ev],[a.daH.HIGHLIGHT_BLUE,p.vY],[a.daH.HIGHLIGHT_VIOLET,p.gn],[a.daH.HIGHLIGHT_ORANGE,p.xu],[a.daH.HIGHLIGHT_GRAY,p.AN],[a.daH.HIGHLIGHT_WHITE,p.wl]]),darkDisplayColors:new Map([[a.daH.HIGHLIGHT_RED,p.qt],[a.daH.HIGHLIGHT_YELLOW,p.DE],[a.daH.HIGHLIGHT_GREEN,p.ev],[a.daH.HIGHLIGHT_BLUE,p.vY],[a.daH.HIGHLIGHT_VIOLET,p.gn],[a.daH.HIGHLIGHT_ORANGE,p.xu],[a.daH.HIGHLIGHT_GRAY,p.AN],[a.daH.HIGHLIGHT_WHITE,p.wl]])}),A=h({colorsToCSS:new Map([[a.daH.BLACK,p.jR],[a.daH.RED,p.N0],[a.daH.ORANGE,p.qm],[a.daH.YELLOW,p.Sb],[a.daH.GREEN,p.RO],[a.daH.BLUE,p.k0],[a.daH.VIOLET,p.zt],[a.daH.WHITE,p.t1]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[a.daH.BLACK,p.Ws],[a.daH.BLUE,p.jc],[a.daH.VIOLET,p.mO],[a.daH.WHITE,p.az],[a.daH.RED,p.Af],[a.daH.ORANGE,p.n7],[a.daH.YELLOW,p.p5],[a.daH.GREEN,p.R2]])});function C(){return a.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=f("pencilUI3");return h({colorsToCSS:new Map([[a.daH.BLACK,p.jR],[a.daH.RED,(0,u.W)(u.r.RED,e)],[a.daH.ORANGE,(0,u.W)(u.r.ORANGE,e)],[a.daH.YELLOW,(0,u.W)(u.r.YELLOW,e)],[a.daH.GREEN,(0,u.W)(u.r.GREEN,e)],[a.daH.BLUE,(0,u.W)(u.r.BLUE,e)],[a.daH.VIOLET,(0,u.W)(u.r.VIOLET,e)],[a.daH.WHITE,p.t1]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():A}a.daH.BLACK,a.daH.WHITE,a.daH.GRAY_DARK,a.daH.GRAY,a.daH.GRAY_LIGHT,a.daH.BLUE,a.daH.BLUE_LIGHT,a.daH.VIOLET,a.daH.VIOLET_LIGHT,a.daH.RED,a.daH.RED_LIGHT,a.daH.ORANGE,a.daH.ORANGE_LIGHT,a.daH.YELLOW,a.daH.YELLOW_LIGHT,a.daH.GREEN,a.daH.GREEN_LIGHT,a.daH.PINK,a.daH.PINK_LIGHT,a.daH.INDIGO,a.daH.INDIGO_LIGHT,a.daH.COBALT,a.daH.COBALT_LIGHT,a.daH.TEAL,a.daH.TEAL_LIGHT,a.daH.OLIVE,a.daH.OLIVE_LIGHT,a.daH.STICKY_GRAY_LIGHT,a.daH.STICKY_GRAY,a.daH.STICKY_GRAY_UI3,a.daH.STICKY_BLUE,a.daH.STICKY_VIOLET,a.daH.STICKY_RED,a.daH.STICKY_PINK,a.daH.STICKY_ORANGE,a.daH.STICKY_YELLOW,a.daH.STICKY_GREEN,a.daH.STICKY_COBALT,a.daH.STICKY_INDIGO,a.daH.STICKY_TEAL,a.daH.STICKY_OLIVE,a.daH.HIGHLIGHT_RED,a.daH.HIGHLIGHT_YELLOW,a.daH.HIGHLIGHT_GREEN,a.daH.HIGHLIGHT_BLUE,a.daH.HIGHLIGHT_VIOLET,a.daH.HIGHLIGHT_ORANGE,a.daH.HIGHLIGHT_GRAY,a.daH.HIGHLIGHT_WHITE,a.daH.CODE_BLOCK_DRACULA,a.daH.CODE_BLOCK_DUOTONE_LIGHT,a.daH.CODE_BLOCK_DUOTONE_SEA,a.daH.CODE_BLOCK_DUOTONE_SPACE,a.daH.CODE_BLOCK_DUOTONE_EARTH,a.daH.CODE_BLOCK_DUOTONE_FOREST;let N=(0,o.k)().figjam_ui3_color_palette_v2?[a.daH.BLACK,a.daH.GRAY_DARK,a.daH.RED,a.daH.ORANGE,a.daH.YELLOW,a.daH.GREEN,a.daH.TEAL,a.daH.BLUE,a.daH.VIOLET,a.daH.PINK,a.daH.WHITE]:[a.daH.BLACK,a.daH.GRAY_DARK,a.daH.GREEN,a.daH.TEAL,a.daH.BLUE,a.daH.VIOLET,a.daH.PINK,a.daH.RED,a.daH.ORANGE,a.daH.YELLOW,a.daH.WHITE],L=[a.daH.BLACK,a.daH.GRAY_DARK,a.daH.RED,a.daH.ORANGE,a.daH.YELLOW,a.daH.GREEN,a.daH.BLUE,a.daH.VIOLET,a.daH.WHITE],O=(0,o.k)().figjam_ui3_color_palette_v2?[a.daH.GRAY,a.daH.GRAY_LIGHT,a.daH.RED_LIGHT,a.daH.ORANGE_LIGHT,a.daH.YELLOW_LIGHT,a.daH.GREEN_LIGHT,a.daH.TEAL_LIGHT,a.daH.BLUE_LIGHT,a.daH.VIOLET_LIGHT,a.daH.PINK_LIGHT]:[a.daH.GRAY,a.daH.GRAY_LIGHT,a.daH.GREEN_LIGHT,a.daH.TEAL_LIGHT,a.daH.BLUE_LIGHT,a.daH.VIOLET_LIGHT,a.daH.PINK_LIGHT,a.daH.RED_LIGHT,a.daH.ORANGE_LIGHT,a.daH.YELLOW_LIGHT],R=[a.daH.GRAY,a.daH.GRAY_LIGHT,a.daH.RED_LIGHT,a.daH.ORANGE_LIGHT,a.daH.YELLOW_LIGHT,a.daH.GREEN_LIGHT,a.daH.BLUE_LIGHT,a.daH.VIOLET_LIGHT],P=[a.daH.BLACK,a.daH.RED,a.daH.ORANGE,a.daH.YELLOW,a.daH.GREEN,a.daH.BLUE,a.daH.VIOLET,a.daH.WHITE],D=[a.daH.STICKY_GRAY,a.daH.STICKY_RED,a.daH.STICKY_ORANGE,a.daH.STICKY_YELLOW,a.daH.STICKY_GREEN,a.daH.STICKY_BLUE,a.daH.STICKY_VIOLET,a.daH.STICKY_PINK,a.daH.STICKY_GRAY_LIGHT],M=(0,o.k)().figjam_ui3_color_palette_v2?[a.daH.WHITE,a.daH.STICKY_GRAY_UI3,a.daH.STICKY_RED,a.daH.STICKY_ORANGE,a.daH.STICKY_YELLOW,a.daH.STICKY_GREEN,a.daH.STICKY_TEAL,a.daH.STICKY_BLUE,a.daH.STICKY_VIOLET,a.daH.STICKY_PINK]:[a.daH.WHITE,a.daH.STICKY_GRAY_UI3,a.daH.STICKY_GREEN,a.daH.STICKY_TEAL,a.daH.STICKY_BLUE,a.daH.STICKY_VIOLET,a.daH.STICKY_PINK,a.daH.STICKY_RED,a.daH.STICKY_ORANGE,a.daH.STICKY_YELLOW],k=[a.daH.HIGHLIGHT_GRAY,a.daH.HIGHLIGHT_RED,a.daH.HIGHLIGHT_ORANGE,a.daH.HIGHLIGHT_YELLOW,a.daH.HIGHLIGHT_GREEN,a.daH.HIGHLIGHT_BLUE,a.daH.HIGHLIGHT_VIOLET,a.daH.HIGHLIGHT_WHITE],F=[a.daH.CODE_BLOCK_DRACULA,a.daH.CODE_BLOCK_DUOTONE_LIGHT,a.daH.CODE_BLOCK_DUOTONE_SEA,a.daH.CODE_BLOCK_DUOTONE_EARTH,a.daH.CODE_BLOCK_DUOTONE_SPACE,a.daH.CODE_BLOCK_DUOTONE_FOREST];function x(e){switch(e){case"widget":case"base":return(a.Ez5?.uiState().showUI3Colors.getCopy()?N:L).map(e=>V(e,"base"));case"baseLight":return(a.Ez5?.uiState().showUI3Colors.getCopy()?O:R).map(e=>V(e,"baseLight"));case"sticky":return(a.Ez5?.uiState().showUI3Colors.getCopy()?M:D).map(e=>V(e,"sticky"));case"highlight":return k.map(e=>V(e,"highlight"));case"pencilUI3":return P.map(e=>V(e,"pencilUI3"));case"codeBlockTheme":return F.map(e=>V(e,"codeBlockTheme"))}}function U(e){return"base"===e}function B(e,r,n=a.daH.CUSTOM){let i;let o=c.F.format(e);switch(r){case"widget":case"base":i=y().CSS_TO_COLOR.get(o);break;case"baseLight":i=v().CSS_TO_COLOR.get(o);break;case"sticky":i=I().CSS_TO_COLOR.get(o);break;case"highlight":i=w.CSS_TO_COLOR.get(o);break;case"pencilUI3":i=C().CSS_TO_COLOR.get(o);break;case"codeBlockTheme":i=S().CSS_TO_COLOR.get(o)}return i??n}function V(e,r){let n;switch(r){case"widget":case"base":n=y().COLOR_TO_CSS.get(e);break;case"baseLight":n=v().COLOR_TO_CSS.get(e);break;case"sticky":n=I().COLOR_TO_CSS.get(e);break;case"highlight":n=w.COLOR_TO_CSS.get(e);break;case"pencilUI3":n=C().COLOR_TO_CSS.get(e);break;case"codeBlockTheme":n=S().COLOR_TO_CSS.get(e)}return n?c.F.parse(n):void 0}function G(e,r="base",n=(0,l.t)("whiteboard.colors.custom")){let i=Array.isArray(e)?e[0]:e,o=B(i,r);return"base"===r&&o===a.daH.CUSTOM&&(o=B(i,"baseLight")),function(e){switch(e){case a.daH.BLACK:return(0,l.t)("whiteboard.colors.black");case a.daH.WHITE:return(0,l.t)("whiteboard.colors.white");case a.daH.GRAY_DARK:return(0,l.t)("whiteboard.colors.dark_gray");case a.daH.GRAY:return(0,l.t)("whiteboard.colors.gray");case a.daH.GRAY_LIGHT:return(0,l.t)("whiteboard.colors.light_gray");case a.daH.YELLOW:return(0,l.t)("whiteboard.colors.yellow");case a.daH.YELLOW_LIGHT:return(0,l.t)("whiteboard.colors.light_yellow");case a.daH.ORANGE:return(0,l.t)("whiteboard.colors.orange");case a.daH.ORANGE_LIGHT:return(0,l.t)("whiteboard.colors.light_orange");case a.daH.RED:return(0,l.t)("whiteboard.colors.red");case a.daH.RED_LIGHT:return(0,l.t)("whiteboard.colors.light_red");case a.daH.PINK:return(0,l.t)("whiteboard.colors.pink");case a.daH.PINK_LIGHT:return(0,l.t)("whiteboard.colors.light_pink");case a.daH.VIOLET:return(0,l.t)("whiteboard.colors.violet");case a.daH.VIOLET_LIGHT:return(0,l.t)("whiteboard.colors.light_violet");case a.daH.INDIGO:return(0,l.t)("whiteboard.colors.indigo");case a.daH.INDIGO_LIGHT:return(0,l.t)("whiteboard.colors.light_indigo");case a.daH.COBALT:return(0,l.t)("whiteboard.colors.cobalt");case a.daH.COBALT_LIGHT:return(0,l.t)("whiteboard.colors.light_cobalt");case a.daH.BLUE:return(0,l.t)("whiteboard.colors.blue");case a.daH.BLUE_LIGHT:return(0,l.t)("whiteboard.colors.light_blue");case a.daH.TEAL:return(0,l.t)("whiteboard.colors.teal");case a.daH.TEAL_LIGHT:return(0,l.t)("whiteboard.colors.light_teal");case a.daH.GREEN:return(0,l.t)("whiteboard.colors.green");case a.daH.GREEN_LIGHT:return(0,l.t)("whiteboard.colors.light_green");case a.daH.OLIVE:return(0,l.t)("whiteboard.colors.olive");case a.daH.OLIVE_LIGHT:return(0,l.t)("whiteboard.colors.light_olive");case a.daH.STICKY_GRAY_LIGHT:return(0,l.t)("whiteboard.colors.light_gray");case a.daH.STICKY_GRAY:case a.daH.STICKY_GRAY_UI3:return(0,l.t)("whiteboard.colors.gray");case a.daH.STICKY_BLUE:return(0,l.t)("whiteboard.colors.blue");case a.daH.STICKY_VIOLET:return(0,l.t)("whiteboard.colors.violet");case a.daH.STICKY_RED:return(0,l.t)("whiteboard.colors.red");case a.daH.STICKY_PINK:return(0,l.t)("whiteboard.colors.pink");case a.daH.STICKY_ORANGE:return(0,l.t)("whiteboard.colors.orange");case a.daH.STICKY_YELLOW:return(0,l.t)("whiteboard.colors.yellow");case a.daH.STICKY_GREEN:return(0,l.t)("whiteboard.colors.green");case a.daH.STICKY_COBALT:return(0,l.t)("whiteboard.colors.cobalt");case a.daH.STICKY_INDIGO:return(0,l.t)("whiteboard.colors.indigo");case a.daH.STICKY_TEAL:return(0,l.t)("whiteboard.colors.teal");case a.daH.STICKY_OLIVE:return(0,l.t)("whiteboard.colors.olive");case a.daH.HIGHLIGHT_RED:return(0,l.t)("whiteboard.colors.pink");case a.daH.HIGHLIGHT_YELLOW:return(0,l.t)("whiteboard.colors.yellow");case a.daH.HIGHLIGHT_GREEN:return(0,l.t)("whiteboard.colors.green");case a.daH.HIGHLIGHT_BLUE:return(0,l.t)("whiteboard.colors.blue");case a.daH.HIGHLIGHT_VIOLET:return(0,l.t)("whiteboard.colors.violet");case a.daH.HIGHLIGHT_ORANGE:return(0,l.t)("whiteboard.colors.orange");case a.daH.HIGHLIGHT_GRAY:return(0,l.t)("whiteboard.colors.gray");case a.daH.HIGHLIGHT_WHITE:return(0,l.t)("whiteboard.colors.white");case a.daH.CODE_BLOCK_DRACULA:case a.daH.CODE_BLOCK_DUOTONE_EARTH:case a.daH.CODE_BLOCK_DUOTONE_FOREST:case a.daH.CODE_BLOCK_DUOTONE_LIGHT:case a.daH.CODE_BLOCK_DUOTONE_SEA:case a.daH.CODE_BLOCK_DUOTONE_SPACE:return d.A$.format((0,d.X0)(e));default:return}}(o)??n}function H(e,r="base"){let n=e+1;switch(r){case"highlight":return(0,l.t)("whiteboard.colors.palette.highlight",{index:n});case"baseLight":return(0,l.t)("whiteboard.colors.palette.light",{index:n});default:return(0,l.t)("whiteboard.colors.palette.base",{index:n})}}function K(e,r="rgba(255, 255, 255, 1)"){return y().COLOR_TO_CSS.get(e)??r}function W(e,r,n){let i;let o={...e,a:1},s=B(o,r);if(s===a.daH.NONE||s===a.daH.CUSTOM)return c.F.format(o);switch(r){case"baseLight":i=v();break;case"sticky":i=I();break;case"highlight":i=w;break;case"pencilUI3":i=C();break;case"codeBlockTheme":i=S();break;default:i=y()}return("light"===n?i.LIGHT_DISPLAY.get(s):i.DARK_DISPLAY.get(s))??c.F.format(o)}},197681:(e,r,n)=>{n.d(r,{ZE:()=>O});var i=n(848318),a=n(536384),o=n.n(a),s=n(543072),l=n(921494),c=n(654104),d=n(983229),u=n(507152),p=n(442313),m=n(318672),h=n(129102),_=n(501736),g=n(390119),f=n(503024),E=n(189996),y=n(71145),b=n(79953),v=n(8601),T=n(382179),I=n(983187),S=n(295915),w=n(100080),A=n(270307),C=n(788567);function N(e){return Array.isArray(e)?1===e.length?e[0]:void 0:e}let L={right:I.nm,center:void 0,left:I.Gu};function O({value:e,onColorChange:r,onOpacityChange:n,recordingKey:a,paletteType:o,additionalContentsTop:s,buttonSize:c,buttonBackground:d,buttonClassName:u,buttonCaretType:p,dropperDisabled:m,optionSize:h,customOpacity:_,ariaLabel:f,alignment:y,inlineButtonTooltip:b,palettePickerPopoverWrapper:v,onlyShowCustomColorPopover:T,isColorPopoverOpen:I,shouldDisableDataTooltip:w,setIsColorPopoverOpen:A,positionX:C,positionY:N,colorButtonSizeOverride:L,swatchStyle:O,shouldRenderCirclesWithContentBoxSizing:P}){let D=(0,l.R)(e=>e.mirror.selectionProperties.whiteboardNumSelectedByType),M={name:"figjam_node_color_change",properties:{node_type:D&&1===Object.keys(D).length&&Object.keys(D).pop()||"MIXED",...D}},{variations:k,type:F}=(0,E.Z9)(),x=(F===g.Yv.DEFAULT?(0,S.TS)(o):k[o].slice()).map((e,r)=>({option:e,tooltip:F===g.Yv.DEFAULT?(0,S.V_)(e,o):(0,S.AF)(r,o)})),U=x.length;if("base"===o){let e=(F===g.Yv.DEFAULT?(0,S.TS)("baseLight"):k.baseLight).map((e,r)=>({option:e,tooltip:F===g.Yv.DEFAULT?(0,S.V_)(e,"baseLight"):(0,S.AF)(r,"baseLight")}));x.push(...e)}return i.createElement(R,{additionalContentsTop:s,alignment:y,analytics:M,ariaLabel:f,buttonBackground:d,buttonCaretType:p,buttonClassName:u,buttonSize:c,colorButtonSizeOverride:L,customOpacity:_,dropperDisabled:m,fixedNumColumns:U,inlineButtonTooltip:b,isColorPopoverOpen:I,onColorChange:e=>r(e.option),onOpacityChange:n,onlyShowCustomColorPopover:T,optionSize:h,options:x,palettePickerPopoverWrapper:v,paletteType:o,positionX:C,positionY:N,recordingKey:a,setIsColorPopoverOpen:A,shouldDisableDataTooltip:w,shouldRenderCirclesWithContentBoxSizing:P,swatchStyle:O,value:{option:e}})}function R({value:e,onColorChange:r,onOpacityChange:n,recordingKey:a,additionalContentsTop:o,additionalContentsBottom:l,options:d,inlineButtonTooltip:u,paletteType:m,fixedNumColumns:h,buttonSize:_,buttonBackground:g="dark",buttonClassName:f,buttonCaretType:E="down",dropperDisabled:b,optionSize:I,isDesignInlineMenu:w,analytics:A,customOpacity:C,ariaLabel:N,alignment:L,positionX:O,positionY:R,palettePickerPopoverWrapper:D,shouldDisableDataTooltip:M,isColorPopoverOpen:k,setIsColorPopoverOpen:F,shouldCustomColorPopoverCloseOnEscape:x,hasNonWhiteboardColors:U,onlyShowCustomColorPopover:B,customOptions:V,customOptionsHeader:G,swatchStyle:H,shouldRenderCirclesWithContentBoxSizing:K,colorButtonSizeOverride:W}){let[z,$]=i.useState(!1),Y={...(Array.isArray(e.option)?e.option[0]:e.option)??s.UE};return C&&(Y.a=C),i.useEffect(()=>{F&&F(z)},[z,F]),B||z?i.createElement(T.v,{alignment:L,analytics:A,color:Y,dropperDisabled:b,isOpen:z,onClose:()=>{$(!1)},onColorChange:e=>{r({option:e})},onOpacityChange:e=>{n&&n(e)},positionX:O,positionY:R,recordingKey:(0,c.Pt)(a,"customColorPopover"),shouldCloseOnEscape:x,showOpacity:null!=C,target:i.createElement(y.$n,{onClick:()=>$(!z),caret:E,active:"light"===g?"LOUD":"NORMAL",recordingKey:(0,c.Pt)(a,"colorSelectorButton"),className:f,tooltip:u||(0,S.V_)(e.option,m,(0,p.t)("whiteboard.inline_menu.color")),role:"combobox",ariaLabel:(0,p.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,S.V_)(e.option,m).toLocaleLowerCase()})},i.createElement(v.cd,{size:_,value:e.option,paletteType:m,background:g})),theme:"dark"}):i.createElement(P,{additionalContentsBottom:l,additionalContentsTop:o,alignment:L,analytics:A,ariaLabel:N,buttonBackground:g,buttonCaretType:E,buttonClassName:f,buttonSize:_,colorButtonSizeOverride:W,customOptions:V,customOptionsHeader:G,fixedNumColumns:h,hasNonWhiteboardColors:U,inlineButtonTooltip:u,isColorPopoverOpen:k,isDesignInlineMenu:w,onColorChange:r,onCustomColor:()=>$(!0),optionSize:I,options:d,palettePickerPopoverWrapper:D,paletteType:m,positionX:O,positionY:R,recordingKey:a,setIsColorPopoverOpen:F,shouldDisableDataTooltip:M,shouldRenderCirclesWithContentBoxSizing:K,swatchStyle:H,value:e})}function P({value:e,onColorChange:r,onCustomColor:n,recordingKey:a,additionalContentsTop:l,additionalContentsBottom:g,options:T,inlineButtonTooltip:I,paletteType:O,buttonSize:R,buttonClassName:P,buttonCaretType:D="down",buttonBackground:M="dark",optionSize:k,isDesignInlineMenu:F,fixedNumColumns:x,analytics:U,ariaLabel:B,alignment:V="center",palettePickerPopoverWrapper:G,shouldDisableDataTooltip:H,positionX:K,positionY:W,isColorPopoverOpen:z,setIsColorPopoverOpen:$,hasNonWhiteboardColors:Y,customOptions:j,customOptionsHeader:q,colorButtonSizeOverride:X,swatchStyle:Z,shouldRenderCirclesWithContentBoxSizing:J}){let Q=i.useRef((0,u.g)()),ee=i.useRef((0,u.g)()),et=N(e.option),er=(0,E.iN)(et,O),en=(0,E.iN)(et,"baseLight")&&"base"===O,ei=Y?function(e,r){try{return!r.find(r=>{let n=N(r.option),i=N(e.option);return n&&i&&(0,s.DA)(n,i)})}catch(e){return console.error(e),!1}}(e,T):er&&en,ea=()=>{z&&n()},eo=r=>ei?i.createElement(d.GG,{id:ee.current,...H?{}:{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":(0,p.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:o()(C.s,{[A.H]:r}),key:"custom-color",role:"option",tabIndex:-1,"aria-label":(0,p.t)("whiteboard.colors.custom"),recordingKey:(0,c.Pt)(a,"colorSelectorCustomOption"),onPointerUp:ea},i.createElement(v.cd,{swatchStyle:{border:"1px solid rgba(0, 0, 0, 0.2)",boxSizing:"border-box",boxShadow:"none"},value:e.option,selectionState:"selected_custom",paletteType:O,background:"dark",size:"medium"})):i.createElement(d.GG,{id:ee.current,key:"custom-color",recordingKey:(0,c.Pt)(a,"colorSelectorCustomOption"),onPointerUp:ea,role:"option",tabIndex:-1,"aria-label":(0,p.t)("whiteboard.colors.custom"),className:o()(C.s,{[A.H]:r})},i.createElement(v.ZI,{shouldDisableDataTooltip:H})),{derivedNumColumnsInGrid:es,swatchGrid:el}=(({fixedNumColumns:e})=>{if(e)return{swatchGrid:(0,v.Wj)(e,B,Q.current),derivedNumColumnsInGrid:e};let{swatchGrid:r,numColumns:n}=(0,v.lX)(T.length,B,Q.current);return{derivedNumColumnsInGrid:n,swatchGrid:r}})({fixedNumColumns:x});return i.createElement(b.Fn,{OptionWrapper:el,PopoverWrapper:G||b.wM,additionalContentsBottom:g,additionalContentsTop:l,additionalOptionId:ee.current,additionalOptionOnChange:n,additionalOptions:(e=!1)=>i.createElement(w.R,{customOption:eo(e),paletteType:O,numOptions:T.length,numColumns:es}),customOptions:j,customOptionsHeader:q,onChange:e=>{r(e),U&&_.F.trackFromFullscreen("figjam_node_color_change",{source:"default",color:h.z5.format(e.option),...U.properties})},onToggleMenuOpen:$,optionEquality:(e,r)=>!(Array.isArray(e.option)||Array.isArray(r.option))&&(0,s.DA)(e.option,r.option),options:T,positionX:K??L[V],positionY:W,renderButton:({value:e,ref:r,onClick:n,onKeyDown:o,active:s,activeOptionId:l})=>i.createElement(y.$n,{active:s?"light"===M?"LOUD":"NORMAL":"NONE",ariaActiveDescendant:l,ariaControls:Q.current,ariaLabel:(0,p.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,S.V_)(e.option,O).toLocaleLowerCase()}),buttonChildrenStyle:X?.buttonChildrenSize,buttonStyle:X?.buttonSize,caret:D,className:P,isDesignInlineMenu:F,isNewSubmenu:"light"===M,onKeyDown:o,onPointerDown:n,recordingKey:(0,c.Pt)(a,"colorSelectorButton"),role:"combobox",tooltip:I||(0,S.V_)(e.option,O,(0,p.t)("whiteboard.inline_menu.color"))},i.createElement(v.cd,{size:R,value:e.option,paletteType:O,background:M,ref:r,swatchStyle:Z,shouldRenderCirclesWithContentBoxSizing:J})),renderOption:({value:e,onClick:r,id:n,isSelected:s,isFocused:l})=>i.createElement(d.GG,{id:n,...H?{}:{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":e.tooltip||(0,S.V_)(e.option,O),"data-tooltip-show-above":!0},className:o()(C.s,{[A.H]:l}),key:m.F.format(e.option)+e.tooltip,"data-testid":"colorMenuOption",role:"option","aria-label":e.tooltip||(0,S.V_)(e.option,O),onPointerUp:e=>{z&&r(e)},recordingKey:(0,c.Pt)(a,"colorSelectorOption",m.F.format(e.option)),tabIndex:-1},i.createElement(v.cd,{value:e.option,selectionState:s?"selected":"unselected",paletteType:O,size:k,background:"dark"})),value:e})}},71145:(e,r,n)=>{n.d(r,{$n:()=>g,W1:()=>_,wv:()=>E});var i=n(848318),a=n(536384),o=n.n(a),s=n(983229),l=n(166365),c=n(503024),d=n(223645),u=n(614430),p=n(260831),m=n(154709),h=n(343650);function _({marginBottom:e,size:r,children:n,padding:a,menuRef:s,ariaLabel:l,role:c,tabIndex:d,ariaHidden:u,onBlurCapture:m,onFocus:h,propagateInputToFullscreen:_,testID:g,focusableDivTestId:f,darkModePreferred:E,editorTheme:y}){return i.createElement("div",{ref:s,"aria-hidden":u,"aria-label":l,className:p.bH,"data-editor-theme":y,"data-fullscreen-intercept":_,"data-preferred-theme":E?"dark":void 0,"data-testid":f,onBlurCapture:m,onFocus:h,role:c,tabIndex:d},i.createElement("div",{className:o()(p.zr,{[p.EX]:"small"===r}),style:{paddingRight:a,paddingLeft:a,marginBottom:e},"data-testid":g},n))}i.forwardRef((e,r)=>{let{id:n,svg:a,onClick:s,blurOnClick:c,onKeyDown:d,onMouseEnter:u,onMouseLeave:m,onPointerUp:h,onPointerDown:_,svgWidth:f,svgHeight:E,caret:y="none",size:b,tooltip:v,tooltipShortcutActionKey:T,tooltipType:I,resourceId:S,recordingKey:w,active:A="NONE",focused:C,disabled:N,svgStyle:L,buttonStyle:O,buttonChildrenStyle:R,useOriginalSrcFills_DEPRECATED:P,isNewSubmenu:D,ariaLabel:M,role:k,tabIndex:F,onboardingKey:x,testId:U}=e,{ariaActiveDescendant:B,ariaControls:V}=e;return i.createElement(g,{ref:r,active:A,ariaActiveDescendant:B,ariaControls:V,ariaLabel:M,blurOnClick:c,buttonChildrenStyle:R,buttonStyle:O,caret:y,className:o()({[p.$9]:N}),disabled:N,focused:C,id:n,isNewSubmenu:D,onClick:s,onKeyDown:d,onMouseEnter:u,onMouseLeave:m,onPointerDown:_,onPointerUp:h,onboardingKey:x,recordingKey:w,resourceId:S,role:k,size:b,tabIndex:F,testId:U,tooltip:v,tooltipShortcutActionKey:T,tooltipType:I},i.createElement(l.B,{svg:a,width:f,height:E,style:L,useOriginalSrcFills_DEPRECATED:P}))});let g=i.forwardRef((e,r)=>{let{id:n,children:a,onClick:l,onMouseEnter:m,onMouseLeave:h,onPointerUp:_,onPointerDown:g,onKeyDown:E,blurOnClick:b,disabled:v=!1,caret:T="none",animateCaret:I=!1,size:S="large",buttonStyle:w,buttonChildrenStyle:A,isNewSubmenu:C,isDesignInlineMenu:N,recordingKey:L,active:O="NONE",focused:R,tooltip:P,tooltipShortcutActionKey:D,tooltipType:M,tooltipMaxWidth:k,resourceId:F,testId:x,className:U="",ariaLabel:B,role:V,tabIndex:G,onboardingKey:H}=e,{ariaControls:K,ariaActiveDescendant:W}=e,z=(0,u._r)(),$=i.Children.toArray(a),Y=1===$.length&&"string"==typeof $[0].props.children,j=function({tooltip:e,shouldShowTooltips:r,tooltipType:n}){return e&&r?n||c.Ib.TEXT:void 0}({tooltip:P,shouldShowTooltips:z,tooltipType:M}),q="combobox"===V&&"NONE"!==O;return i.createElement(s.GG,{"aria-activedescendant":q?W:void 0,"aria-checked":"switch"===V?"NONE"!==O:void 0,"aria-controls":K,"aria-expanded":"combobox"===V?"NONE"!==O:void 0,"aria-label":function({ariaLabel:e,actualTooltipType:r,tooltip:n}){return e??(0,d.En)({"data-tooltip-type":r??c.Ib.TEXT,"data-tooltip":n??""})}({ariaLabel:B,actualTooltipType:j,tooltip:P}),"aria-owns":q?K:void 0,"aria-pressed":"button"===V||null==V?"NONE"!==O:void 0,className:o()({[p.x6]:!0,[p.BB]:!0,[p._T]:C,[p.Hh]:N,[p.cN]:"none"!==T&&!!a,[p.Ec]:"none"!==T&&!a,[p.EX]:"small"===S,[p.Pq]:"SOFT"===O,[p.k1]:"NORMAL"===O,[p.F$]:"LOUD"===O,[p.zt]:Y,[p.gK]:!v,[p.bI]:R,[U]:!!U}),"data-fullscreen-intercept":null==E?"true":void 0,"data-onboarding-key":H,"data-resource-id":F||void 0,"data-tooltip":P,"data-tooltip-max-width":k,"data-tooltip-shortcut-key":D,"data-tooltip-show-above":!0,"data-tooltip-type":j,dataTestId:x,forwardedRef:r,id:n,onClick:f(l,v),onKeyDown:f(E,v),onMouseEnter:f(m,v),onMouseLeave:f(h,v),onMouseUp:!v&&b?e=>{e.currentTarget.blur()}:void 0,onPointerDown:f(g,v),onPointerUp:f(_,v),recordingKey:L,role:V,style:w,tabIndex:function(e,r){return void 0!==e?e:"option"===r?-1:0}(G,V)},i.createElement("div",{className:o()({[p.LJ]:Y,[p.Qq]:!Y,[p.Hh]:N,[p.EX]:"small"===S}),style:A},a),"none"!==T&&i.createElement(y,{caret:T,animateCaret:I,active:O}))});function f(e,r){return r?void 0:e}function E({size:e="tall",margin:r}){return i.createElement("div",{className:p.me,style:{height:"tall"===e?40:28,marginLeft:r,marginRight:r}})}let y=i.memo(({caret:e,animateCaret:r,active:n})=>i.createElement(l.B,{className:o()({[p.OW]:!0,[p.Ln]:r,[p.y9]:r&&"LOUD"===n}),svg:"up"===e?h.A:m.A}))},79953:(e,r,n)=>{n.d(r,{Fn:()=>g,wM:()=>_});var i=n(848318),a=n(98993),o=n(857188),s=n(808471),l=n(507152),c=n(992444),d=n(964e3),u=n(71145),p=n(884841),m=n(599095),h=(e=>(e.fontFamilyControl="fontFamilyControl",e))(h||{});function _({children:e,padding:r}){return i.createElement(u.W1,{padding:r},i.createElement("div",{className:m.ec},e))}function g({value:e,onChange:r,options:n,renderOption:u,renderButton:h,optionEquality:g,OptionWrapper:f=function(e,r){return function({children:e}){return i.createElement("div",{id:void 0,role:"listbox","aria-label":void 0,tabIndex:-1,className:m.Wh},e)}}(),additionalOptions:E,additionalOptionId:y,additionalOptionOnChange:b,additionalContentsTop:v,additionalContentsBottom:T,PopoverWrapper:I=_,positionX:S,positionY:w,responsivePositionY:A,popoverClassName:C,onToggleMenuOpen:N,parentComponent:L,customOptions:O,customOptionsHeader:R,overrideMenuOpenState:P,renderButtonRef:D,overrideMenuFocused:M}){let k=(0,i.useRef)(null),[F,x]=(0,i.useState)(!1),U=P?P.isOpenOverride:F,B=P?P.setIsOpenOverride:x,[V,G]=(0,i.useState)(0),[H,K]=(0,i.useState)(!1),W=M?M.focusedIndexOverride:V,z=M?M.setFocusedIndexOverride:G,$=M?M.isFocusedByKeyboardOverride:H,Y=M?M.setIsFocusedByKeyboardOverride:K,j=n.length+(O?O.length:0)+(null!=E?1:0),[q]=(0,i.useState)(()=>{let e=Array(j);for(let r=0;r<n.length;r++)e[r]=(0,l.g)();return null!=E&&(e[n.length]=y),e}),X=new a.W,[Z,J]=(0,i.useState)(!0);return i.useEffect(()=>{N&&N(U)},[U,N]),i.createElement(p.A,{target:h({value:e,ref:D??k,onKeyDown:e=>{switch(e.keyCode){case o.Uz.ESCAPE:U?B(!1):e.currentTarget?.blur();break;case o.Uz.ENTER:U&&(W>=0&&W<n.length?r(n[W],e):W===n.length&&E&&b?.(e));break;case o.Uz.RIGHT_ARROW:case o.Uz.LEFT_ARROW:case o.Uz.UP_ARROW:case o.Uz.DOWN_ARROW:if(!(0,o.sC)(e,0)){(0,d.f7)(e);break}if(Y(!0),U&&j){let r=W;(r+=e.keyCode===o.Uz.UP_ARROW||e.keyCode===o.Uz.LEFT_ARROW?-1:1)>=j?r=0:r<0&&(r=j-1),z(r)}else U||B(!0);e.preventDefault(),e.stopPropagation();break;case o.Uz.TAB:Y(!1);break;case o.Uz.C:case o.Uz.V:case o.Uz.X:(0,o.Te)(e)&&(c.Y5.triggerAction(e.keyCode===o.Uz.C?"copy":e.keyCode===o.Uz.X?"cut":"paste"),e.stopPropagation(),e.preventDefault());break;default:(0,d.f7)(e)}},onClick:()=>{Y(!1),B(!U),L&&"fontFamilyControl"===L&&((0,s.nl)()?J(!0):(J(!1),X.reset(),X.scheduleOnce(()=>{J(!0)},250)))},active:U,activeOptionId:null!=W?q[W]:void 0}),onClose:()=>{L&&"fontFamilyControl"===L&&X.reset(),B(!1)},renderPopoverContents:a=>{let o=(n,i)=>{let a=e=>r(n,e),o=e=>{a(e),B(!1)};return u({value:n,id:q[i],onClick:e=>{(!L||"fontFamilyControl"!==L||Z)&&o(e)},isSelected:g?g(n,e):n===e,isFocused:$&&W===i})},s=n.map(o),l=O?.map((e,r)=>o(e,r+s.length));return l?i.createElement(I,{side:a},v,i.createElement(f,null,s),R,i.createElement(f,null,l,E?.($&&W===s.length+l.length)),T):i.createElement(I,{side:a},v,i.createElement(f,null,s,E?.($&&W===s.length)),T)},isOpen:U,positionX:S,positionY:w,responsivePositionY:A,className:C})}},8601:(e,r,n)=>{n.d(r,{cd:()=>S,ZI:()=>w,lX:()=>L,Wj:()=>N});var i=n(848318),a=n(536384),o=n.n(a);n(543072);var s=n(654104),l=n(983229),c=n(701780),d=n(166365);n(291499);var u=n(442313),p=n(104720),m=n(503024),h=n(295915);let _="swatch--colorCircle--MdzUZ",g="swatch--selected--B4IKr",f="swatch--circleWrapper--grusN",E="swatch--swatch--qSnpF",y="swatch--swatchBorderOnDarkBackground--dOArC",b="swatch--small--PX3Sv",v="swatch--large--jAe-V",T="swatch--xsmall--hPL9b";var I=n(954184);let S=i.forwardRef(({value:e,paletteType:r,background:n="dark",size:a="medium",selectionState:s="unselected",swatchStyle:c,onClick:d,recordingKey:u,tooltip:p,role:I,ariaLabel:S,ariaSelected:w,shouldRenderCirclesWithContentBoxSizing:A=!1},C)=>{let N,L=null;return Array.isArray(e)&&e[1]&&(L=i.createElement("div",{className:"swatch--secondarySwatch--l8c8G",style:{background:(0,h.Cz)(e[1],r,n)},"data-testid":"colorCircle"})),N=Array.isArray(e)?e.length<=2&&e[0]?(0,h.Cz)(e[0],r,n):"rgba(255, 255, 255, 1)":(0,h.Cz)(e,r,n),i.createElement("div",{ref:C,className:o()({[_]:!0,[g]:"selected"===s,"swatch--selectedCustomLight--cNeeq":"selected_custom"===s&&"light"===n,"swatch--selectedCustomDark--Obz01":"selected_custom"===s&&"dark"===n,[v]:"large"===a,[b]:"small"===a,[T]:"xsmall"===a,"swatch--circleContentBoxSizing--BTH3i":A,"swatch--accessible--xtYuq":!!I}),...I?{role:I,tabIndex:w?0:-1,"aria-selected":w,"aria-label":S}:{}},i.createElement("div",{className:f},i.createElement(l.D8,{className:o()(E,{"swatch--swatchBorderOnLightBackground--aPkrH":"light"===n,[y]:"dark"===n}),style:{background:N,...c},onClick:d,recordingKey:u,"data-tooltip-show-above":!0,"data-tooltip-type":p?m.Ib.TEXT:void 0,"data-tooltip":p,"data-testid":"colorCircle","data-clickable":!0}),L))});function w({onClick:e,swatchStyle:r,recordingKey:n,shouldDisableDataTooltip:a,selectionState:c,size:d="medium"}){return i.createElement(l.D8,{...a?{}:{"data-tooltip-type":m.Ib.TEXT,"data-tooltip":(0,u.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:o()({[_]:!0,[g]:"selected"===c,[v]:"large"===d,[b]:"small"===d,[T]:"xsmall"===d}),onClick:e,recordingKey:(0,s.Pt)(n,"colorSelectorCustomOption")},i.createElement("div",{className:f},i.createElement(l.D8,{className:o()("swatch--customSwatch---Nq7y swatch--swatch--qSnpF",y),style:r,"data-clickable":!0})))}let A=i.forwardRef(({value:e,size:r="medium",selectionState:n="unselected",swatchStyle:a,onClick:s,onPointerUp:c,recordingKey:d,tooltip:u},p)=>i.createElement("div",{ref:p,className:o()({[_]:!0,[g]:"selected"===n,[b]:"small"===r})},i.createElement("div",{className:f},i.createElement(l.D8,{className:o()(E,y),style:{backgroundImage:`url(${e})`,backgroundSize:"auto 100%",...a},onClick:s,onPointerUp:c,recordingKey:d,"data-tooltip-show-above":!0,"data-tooltip-type":u?m.Ib.TEXT:void 0,"data-tooltip":u}))));function C({children:e,numColumns:r=4,ariaLabel:n,id:a}){return i.createElement("div",{className:"swatch--swatchGrid--y6deW",style:{"--columns":r},"aria-label":n,role:"listbox",id:a,"data-fullscreen-intercept":!0},e)}function N(e,r,n){return function({children:a}){return i.createElement(C,{numColumns:e,ariaLabel:r,id:n},a)}}function L(e,r,n){let a;return{swatchGrid:function({children:e}){return i.createElement(C,{numColumns:a,ariaLabel:r,id:n},e)},numColumns:a=e<6?e:6===e?3:e<=8?4:5}}i.forwardRef(({imagePaint:e,background:r,size:n="medium",selectionState:a="unselected",hovered:s,onClick:l,onMouseEnter:h,onMouseLeave:_,onPointerUp:g},f)=>{let[E,y]=i.useState(""),v=i.useCallback(e=>{let r=p.jS(e,new c.Mi((e.originalImageWidth||244)/(e.originalImageHeight||244)*244,244),{r:0,g:0,b:0,a:0});r&&r.pixels&&r.pixelSize&&y(p.Pv(r.pixels,r.pixelSize))},[]);return i.useEffect(()=>{e&&v(e)},[e,v]),i.createElement("div",{style:{position:"relative"},onMouseEnter:h,onMouseLeave:_,"data-tooltip-type":m.Ib.TEXT,"data-tooltip":(0,u.t)("whiteboard.delightful_toolbar.custom_upload"),"data-tooltip-show-above":!0},i.createElement(A,{value:E,size:n,selectionState:a,onClick:l,onPointerUp:g,ref:f}),s&&i.createElement("div",{className:"swatch--swatchOverlayContainer--0Ye8z"},i.createElement(d.B,{svg:I.A,style:{fill:"dark"===r?"white":void 0},className:o()({"swatch--swatchOverlay--QA2QQ swatch--swatch--qSnpF":!0,"swatch--backgroundLight--ZkW6n":"light"===r,"swatch--backgroundDark--mMH1v":"dark"===r,[b]:"small"===n})})))})},983187:(e,r,n)=>{n.d(r,{Mj:()=>m,T1:()=>u,DH:()=>p,Al:()=>l,Gu:()=>c,nm:()=>d});var i=n(848318);n(536384);var a=n(691191),o=n(311160),s=n(210724);let l=(e,r)=>e.x+e.width/2-r.width/2,c=(e,r)=>e.x,d=(e,r)=>e.x+e.width-r.width,u=(e,r,n)=>e.y-r.height-n,p=(e,r,n)=>e.height+e.y+n;function m({targetRect:e,targetRef:r,children:n,onClose:c,onMeasure:d,onMouseEnter:p,onMouseLeave:m,style:h,offset:_=4,positionX:g=l,positionY:f=u,positionXY:E,childRef:y,onPosition:b,frozen:v,setSizeChanged:T}){let[I,S]=i.useState({x:0,y:0}),[w,A]=i.useState(!1),C=i.useRef(null),N=i.useCallback(e=>{let r=0!==e.width||0!==e.height;A(r),d&&d(e),r||S({x:0,y:0})},[d]),L=(0,a.wY)(C,N)??a.cU;(0,s.Y)(c,{ignore:[r?.current,C.current]});let O=(0,o.$)(w)&&w,R=(0,o.$)(L);i.useEffect(()=>T&&T(R),[T,R]);let{x:P,y:D}=I,M=0!==P||0!==D?[P,D]:void 0;(O||w&&!v)&&(E?[P,D]=E(e,L,_,M):(P=g(e,L,_),D=f(e,L,_))),i.useEffect(()=>{S({x:P,y:D})},[P,D]);let{width:k,height:F}=L;return i.useEffect(()=>{w&&b&&b(P,D,{width:k,height:F},_)},[P,D,k,F,b,_,w]),i.createElement("div",{style:{position:"absolute",width:"fit-content",height:"fit-content",transform:`translate3d(${P}px, ${D}px, 0)`,...h,...w?{}:{opacity:0}},onMouseEnter:p,onMouseLeave:m,ref:e=>{C.current=e,y&&y(e)}},n)}},786975:(e,r,n)=>{n.d(r,{w:()=>u});var i=n(39773),a=n(831932),o=n(235441),s=n(526830),l=n(241917),c=n(341355),d=n(560735);let u=(0,i.eU)(e=>{let r=e(o.u8)===l.nT.Whiteboard,n=e(d.hS);return r&&!n&&!a.Xb}),p=(0,i.eU)(async()=>await c.A.getCommunityShelves({shelfType:s.cS.FIGJAM_SECTION_PRESET_PICKER}).then(e=>e.data.meta));(0,i.Rq)(p)},463230:(e,r,n)=>{n.d(r,{BQ:()=>s});var i=n(790355),a=n(604613);n(711107);var o=n(992444);function s(e,r){if(!e||!e.isSection||!o.Y5.isReady())return!1;let n=e.sectionPresetShelfId,s=e.sectionPresetTemplateId,l=e.name,c=e.hasSectionPresetWithEdits;return!!l&&(r(i.j7({type:a.si,data:{sectionId:e.guid,sectionName:l,initialShelfId:n,initialTemplateId:s,showAlertOnSelect:c}})),!0)}n(713534)},190698:(e,r,n)=>{n.d(r,{Gn:()=>c,Rg:()=>u});var i=n(39773),a=n(579020),o=n(507152),s=n(741485);(0,i.eU)(void 0),(0,i.eU)("");let l=(0,i.eU)({state:"closed"});(0,i.eU)(null,(e,r)=>{r(l,{state:"closed"})}),(0,i.eU)(null,(e,r,{title:n,items:i,libraryKey:a})=>{r(l,{state:"open",title:n,items:i,libraryKey:a})}),(0,i.eU)(!1);let c=(0,i.E3)(s.Ec,[],{subscribeToChanges:!0}),d=(0,a.pp)()??(0,o.g)(),u=(0,i.eU)(d)},741485:(e,r,n)=>{n.d(r,{Ec:()=>u});var i=n(818754),a=n(558773),o=n(27776),s=n(645728),l=n(437082),c=n(943701),d=n(569339);(0,i.jz)(o.Np$),(0,i.jz)(o.K_L),(0,i.jz)(o.pUJ),(0,i.jz)(o.e7),(0,i.jz)(o.hIF);let u="recent-diagramming-shapes-figjam";l.A,d.A,s.A,c.A,a.XD,a.vO,a.Mm,a.sF},524775:(e,r,n)=>{n.d(r,{KE:()=>e7});var i,a=n(848318);n(53620),n(992277),n(781131);var o=n(741419);n(673906),n(157907);var s=n(39773),l=n(946678),c=n.n(l),d=n(518290);n(379338),n(502255),n(77441);var u=n(442313);(e=>{e.AWS=function(){return a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"100",height:"100"}),a.createElement("g",{clipPath:"url(#clip0_1_45297)"},a.createElement("path",{d:"M28.4523 41.8662C28.4523 43.0846 28.5841 44.0725 28.8146 44.797C29.078 45.5215 29.4073 46.3118 29.8684 47.168C30.033 47.4315 30.0989 47.6949 30.0989 47.9255C30.0989 48.2548 29.9013 48.5841 29.4732 48.9134L27.3986 50.2965C27.1022 50.4941 26.8058 50.5929 26.5423 50.5929C26.213 50.5929 25.8837 50.4282 25.5544 50.1318C25.0934 49.6379 24.6982 49.111 24.3689 48.5841C24.0396 48.0242 23.7103 47.3986 23.3481 46.6412C20.7794 49.6708 17.5522 51.1856 13.6664 51.1856C10.9002 51.1856 8.69381 50.3953 7.0802 48.8146C5.46658 47.2339 4.64331 45.1263 4.64331 42.4919C4.64331 39.6927 5.63124 37.4205 7.64002 35.7081C9.64881 33.9957 12.3162 33.1395 15.7081 33.1395C16.8277 33.1395 17.9803 33.2383 19.1988 33.4029C20.4172 33.5676 21.6686 33.831 22.9858 34.1274V31.7235C22.9858 29.2207 22.4589 27.4754 21.4381 26.4545C20.3843 25.4337 18.606 24.9397 16.0703 24.9397C14.9177 24.9397 13.7322 25.0714 12.5138 25.3678C11.2953 25.6642 10.1098 26.0264 8.95726 26.4874C8.43036 26.718 8.03519 26.8497 7.80468 26.9156C7.57416 26.9814 7.4095 27.0143 7.27778 27.0143C6.81675 27.0143 6.58623 26.685 6.58623 25.9935V24.3799C6.58623 23.853 6.65209 23.4578 6.81675 23.2273C6.9814 22.9968 7.27778 22.7663 7.73881 22.5357C8.89139 21.943 10.2745 21.449 11.8881 21.0539C13.5017 20.6258 15.2141 20.4282 17.0253 20.4282C20.9441 20.4282 23.8091 21.3173 25.6532 23.0956C27.4644 24.8738 28.3865 27.5742 28.3865 31.1966V41.8662H28.4523ZM15.0824 46.8717C16.1691 46.8717 17.2888 46.6741 18.4743 46.2789C19.6598 45.8837 20.7136 45.1593 21.6027 44.1713C22.1296 43.5456 22.5248 42.8541 22.7224 42.0638C22.92 41.2734 23.0517 40.3184 23.0517 39.1988V37.8157C22.0967 37.5852 21.0758 37.3876 20.022 37.2558C18.9682 37.1241 17.9474 37.0583 16.9265 37.0583C14.7202 37.0583 13.1065 37.4864 12.0198 38.3755C10.9331 39.2646 10.4062 40.516 10.4062 42.1626C10.4062 43.7103 10.8014 44.8629 11.6247 45.6532C12.415 46.4765 13.5676 46.8717 15.0824 46.8717ZM41.5259 50.4282C40.9331 50.4282 40.538 50.3294 40.2745 50.0989C40.0111 49.9013 39.7806 49.4403 39.583 48.8146L31.8442 23.359C31.6466 22.7004 31.5478 22.2723 31.5478 22.0418C31.5478 21.5149 31.8113 21.2185 32.3382 21.2185H35.5654C36.1911 21.2185 36.6192 21.3173 36.8497 21.5478C37.1132 21.7454 37.3107 22.2064 37.5083 22.8321L43.0407 44.6324L48.1779 22.8321C48.3426 22.1735 48.5402 21.7454 48.8036 21.5478C49.0671 21.3502 49.5281 21.2185 50.1209 21.2185H52.7553C53.381 21.2185 53.8091 21.3173 54.0726 21.5478C54.336 21.7454 54.5665 22.2064 54.6983 22.8321L59.9013 44.8958L65.5984 22.8321C65.796 22.1735 66.0265 21.7454 66.257 21.5478C66.5204 21.3502 66.9485 21.2185 67.5413 21.2185H70.6039C71.1308 21.2185 71.4271 21.482 71.4271 22.0418C71.4271 22.2064 71.3942 22.3711 71.3613 22.5687C71.3283 22.7663 71.2625 23.0297 71.1308 23.3919L63.1944 48.8475C62.9968 49.5061 62.7663 49.9342 62.5029 50.1318C62.2394 50.3294 61.8113 50.4611 61.2515 50.4611H58.4194C57.7938 50.4611 57.3657 50.3623 57.1022 50.1318C56.8388 49.9013 56.6082 49.4732 56.4765 48.8146L51.3722 27.5742L46.3009 48.7817C46.1362 49.4403 45.9386 49.8684 45.6752 50.0989C45.4117 50.3294 44.9507 50.4282 44.358 50.4282H41.5259ZM83.8421 51.3173C82.1297 51.3173 80.4173 51.1198 78.7707 50.7246C77.1242 50.3294 75.8399 49.9013 74.9837 49.4073C74.4568 49.111 74.0945 48.7817 73.9628 48.4853C73.8311 48.1889 73.7652 47.8596 73.7652 47.5632V45.8837C73.7652 45.1922 74.0287 44.8629 74.5226 44.8629C74.7202 44.8629 74.9178 44.8958 75.1154 44.9617C75.313 45.0275 75.6094 45.1593 75.9387 45.291C77.0583 45.7849 78.2768 46.1801 79.5611 46.4436C80.8783 46.707 82.1626 46.8387 83.4798 46.8387C85.5545 46.8387 87.1681 46.4765 88.2878 45.752C89.4074 45.0275 90.0002 43.9737 90.0002 42.6236C90.0002 41.7015 89.7038 40.9441 89.111 40.3184C88.5183 39.6927 87.3986 39.1329 85.785 38.606L81.01 37.1241C78.6061 36.3667 76.8278 35.2471 75.7411 33.7652C74.6544 32.3162 74.0945 30.7026 74.0945 28.9902C74.0945 27.6071 74.3909 26.3887 74.9837 25.3349C75.5764 24.2811 76.3668 23.359 77.3547 22.6345C78.3426 21.8771 79.4623 21.3173 80.7795 20.9221C82.0967 20.527 83.4798 20.3623 84.9288 20.3623C85.6533 20.3623 86.4107 20.3952 87.1352 20.494C87.8926 20.5928 88.5841 20.7245 89.2757 20.8563C89.9343 21.0209 90.56 21.1856 91.1527 21.3832C91.7455 21.5807 92.2065 21.7783 92.5358 21.9759C92.9969 22.2394 93.3262 22.5028 93.5238 22.7992C93.7214 23.0626 93.8201 23.4249 93.8201 23.8859V25.4337C93.8201 26.1252 93.5567 26.4874 93.0627 26.4874C92.7993 26.4874 92.3712 26.3557 91.8114 26.0923C89.9343 25.2361 87.8267 24.808 85.4886 24.808C83.6116 24.808 82.1297 25.1044 81.1088 25.73C80.088 26.3557 79.5611 27.3107 79.5611 28.6609C79.5611 29.583 79.8904 30.3733 80.549 30.999C81.2076 31.6247 82.4261 32.2504 84.1714 32.8102L88.8476 34.2921C91.2186 35.0495 92.931 36.1033 93.9519 37.4534C94.9727 38.8036 95.4667 40.3514 95.4667 42.0638C95.4667 43.4798 95.1703 44.7641 94.6105 45.8837C94.0177 47.0034 93.2274 47.9913 92.2065 48.7817C91.1857 49.6049 89.9672 50.1977 88.5512 50.6258C87.0693 51.0868 85.5216 51.3173 83.8421 51.3173Z",fill:"#252F3E"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M90.066 67.3222C79.2317 75.3244 63.4908 79.5725 49.9562 79.5725C30.988 79.5725 13.8969 72.5582 0.987961 60.9007C-0.032896 59.9786 0.889169 58.7272 2.10761 59.4517C16.0703 67.5527 33.2932 72.4594 51.1088 72.4594C63.1285 72.4594 76.3338 69.9567 88.4853 64.8195C90.2965 63.9962 91.8443 66.005 90.066 67.3222Z",fill:"#FF9900"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M94.5775 62.1846C93.1945 60.4064 85.4228 61.3284 81.8992 61.7565C80.8454 61.8883 80.6807 60.9662 81.6357 60.2747C87.8267 55.9278 98.0024 57.1792 99.1879 58.6281C100.373 60.11 98.8586 70.2856 93.0627 75.1594C92.1736 75.9168 91.3174 75.5217 91.7126 74.5337C93.0298 71.2736 95.9606 63.93 94.5775 62.1846Z",fill:"#FF9900"})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1_45297"},a.createElement("rect",{width:"100.11",height:"59.9342",fill:"white",transform:"translate(0 20)"}))))},e.Azure=function(){return a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"100",height:"100"}),a.createElement("path",{d:"M37.1708 13.7265H59.9541L36.3028 83.8026C36.0598 84.5227 35.597 85.1484 34.9796 85.5917C34.3623 86.0349 33.6215 86.2734 32.8615 86.2736H15.1305C14.5546 86.2737 13.9871 86.1366 13.4747 85.8738C12.9624 85.611 12.5199 85.2299 12.1841 84.7622C11.8482 84.2945 11.6285 83.7535 11.5432 83.184C11.4579 82.6146 11.5094 82.033 11.6935 81.4873L33.7286 16.1975C33.9716 15.4771 34.4344 14.8511 35.052 14.4076C35.6695 13.9642 36.4106 13.7265 37.1708 13.7265Z",fill:"url(#paint0_linear_1_45304)"}),a.createElement("path",{d:"M70.2781 60.7285H34.1493C33.8134 60.7281 33.4852 60.8289 33.2074 61.0178C32.9296 61.2066 32.7152 61.4747 32.5919 61.7872C32.4687 62.0996 32.4424 62.442 32.5166 62.7696C32.5907 63.0972 32.7617 63.3949 33.0074 63.6239L56.2229 85.2924C56.8989 85.9229 57.7888 86.2735 58.7132 86.2733H79.1707L70.2781 60.7285Z",fill:"#0078D4"}),a.createElement("path",{d:"M37.1709 13.7256C36.4023 13.7227 35.6529 13.9655 35.0322 14.4188C34.4115 14.872 33.952 15.5118 33.7207 16.2447L11.7206 81.427C11.5241 81.9746 11.4625 82.5614 11.5408 83.1379C11.6191 83.7144 11.8351 84.2635 12.1706 84.7389C12.506 85.2142 12.951 85.6018 13.4679 85.8687C13.9847 86.1357 14.5583 86.2743 15.1401 86.2727H33.3287C34.0061 86.1517 34.6393 85.853 35.1635 85.4072C35.6877 84.9614 36.0842 84.3844 36.3125 83.7352L40.6997 70.8054L56.371 85.4222C57.0277 85.9654 57.8515 86.2658 58.7037 86.2727H79.0851L70.1461 60.728L44.0877 60.7341L60.0364 13.7256H37.1709Z",fill:"url(#paint1_linear_1_45304)"}),a.createElement("path",{d:"M66.2705 16.1931C66.0279 15.4739 65.5657 14.8489 64.9491 14.4062C64.3325 13.9636 63.5926 13.7255 62.8335 13.7256H37.4419C38.2009 13.7256 38.9408 13.9637 39.5574 14.4064C40.1739 14.849 40.6361 15.4739 40.8789 16.1931L62.9149 81.4856C63.0991 82.0313 63.1507 82.613 63.0655 83.1827C62.9803 83.7523 62.7606 84.2934 62.4248 84.7613C62.0889 85.2292 61.6464 85.6104 61.134 85.8734C60.6215 86.1364 60.0539 86.2736 59.4779 86.2736H84.8704C85.4463 86.2734 86.0139 86.1361 86.5262 85.8731C87.0385 85.6101 87.4809 85.2289 87.8166 84.761C88.1524 84.2931 88.372 83.752 88.4572 83.1825C88.5423 82.6129 88.4907 82.0312 88.3065 81.4856L66.2705 16.1931Z",fill:"url(#paint2_linear_1_45304)"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"paint0_linear_1_45304",x1:"45.4746",y1:"19.1025",x2:"21.8137",y2:"89.0027",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#114A8B"}),a.createElement("stop",{offset:"1",stopColor:"#0669BC"})),a.createElement("linearGradient",{id:"paint1_linear_1_45304",x1:"52.8657",y1:"51.677",x2:"47.3926",y2:"53.5276",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopOpacity:"0.3"}),a.createElement("stop",{offset:"0.071",stopOpacity:"0.2"}),a.createElement("stop",{offset:"0.321",stopOpacity:"0.1"}),a.createElement("stop",{offset:"0.623",stopOpacity:"0.05"}),a.createElement("stop",{offset:"1",stopOpacity:"0"})),a.createElement("linearGradient",{id:"paint2_linear_1_45304",x1:"49.8555",y1:"17.0628",x2:"75.8281",y2:"86.2587",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#3CCBF4"}),a.createElement("stop",{offset:"1",stopColor:"#2892DF"}))))},e.GoogleCloud=function(){return a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"100",height:"100"}),a.createElement("path",{d:"M62.4184 33.9607H65.2209L73.2082 26.2159L73.6006 22.9278C69.0249 19.0118 63.4953 16.2915 57.534 15.0239C51.5727 13.7562 45.3765 13.9831 39.5308 15.683C33.685 17.383 28.3827 20.4999 24.1247 24.7393C19.8667 28.9787 16.7935 34.2007 15.1956 39.912C16.0854 39.5583 17.0711 39.501 17.9981 39.7489L33.9726 37.1945C33.9726 37.1945 34.7853 35.8901 35.2057 35.9716C38.6285 32.3266 43.3588 30.0881 48.4281 29.7142C53.4975 29.3404 58.5225 30.8595 62.4745 33.9607H62.4184Z",fill:"#EA4335"}),a.createElement("path",{d:"M84.5879 39.9121C82.752 33.3565 78.9825 27.4632 73.742 22.9551L62.5319 33.8249C64.8682 35.676 66.7405 38.0173 68.0076 40.6722C69.2747 43.3272 69.9035 46.2265 69.8465 49.1514V51.0809C71.1567 51.0809 72.4541 51.3311 73.6646 51.8173C74.875 52.3034 75.9749 53.016 76.9013 53.9144C77.8278 54.8127 78.5627 55.8792 79.0641 57.0529C79.5655 58.2266 79.8236 59.4846 79.8236 60.755C79.8236 62.0255 79.5655 63.2835 79.0641 64.4572C78.5627 65.6309 77.8278 66.6974 76.9013 67.5957C75.9749 68.494 74.875 69.2066 73.6646 69.6928C72.4541 70.179 71.1567 70.4292 69.8465 70.4292H49.8924L47.9026 72.3858V83.9894L49.8924 85.9188H69.8465C75.4186 85.9608 80.8567 84.2627 85.3564 81.0756C89.856 77.8885 93.1782 73.3817 94.8315 68.2219C96.4848 63.0621 96.3814 57.5233 94.5366 52.4248C92.6918 47.3264 89.2035 42.9392 84.5879 39.9121Z",fill:"#4285F4"}),a.createElement("path",{d:"M29.9106 85.8093H49.8647V70.3198H29.9106C28.489 70.3195 27.084 70.0229 25.7909 69.4502L22.9883 70.2926L14.945 78.0374L14.2444 80.7549C18.7549 84.0574 24.2587 85.8331 29.9106 85.8093Z",fill:"#34A853"}),a.createElement("path",{d:"M29.9108 35.5666C24.5042 35.5979 19.2427 37.2658 14.8611 40.3374C10.4796 43.4089 7.19679 47.7307 5.47131 52.6992C3.74583 57.6676 3.6638 63.0345 5.23668 68.0503C6.80957 73.0662 9.95882 77.4804 14.2446 80.6765L25.8191 69.4534C24.3482 68.809 23.0605 67.8282 22.0665 66.5952C21.0724 65.3622 20.4018 63.9138 20.112 62.3742C19.8222 60.8346 19.9219 59.2498 20.4027 57.7558C20.8834 56.2618 21.7308 54.9032 22.872 53.7965C24.0133 52.6899 25.4145 51.8682 26.9553 51.4021C28.496 50.936 30.1304 50.8392 31.7182 51.1202C33.306 51.4012 34.7998 52.0516 36.0714 53.0154C37.343 53.9793 38.3545 55.2279 39.0191 56.6541L50.5936 45.431C48.1642 42.3514 45.033 39.8585 41.445 38.1473C37.857 36.436 33.9093 35.5527 29.9108 35.5666Z",fill:"#FBBC05"}))},e.Kubernetes=function(){return a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"100",height:"100"}),a.createElement("path",{d:"M49.7013 8.00735C48.941 8.0456 48.1961 8.23389 47.5103 8.56115L17.6123 22.8303C16.8385 23.1994 16.1586 23.7365 15.623 24.4017C15.0875 25.0669 14.7101 25.8431 14.5189 26.6726L7.14291 58.7246C6.97258 59.4631 6.95352 60.228 7.08685 60.9739C7.22018 61.7198 7.50319 62.4316 7.91913 63.0673C8.01998 63.2226 8.12845 63.3731 8.24415 63.5179L28.9383 89.2184C29.4739 89.8834 30.154 90.4204 30.9278 90.7893C31.7016 91.1583 32.5495 91.3498 33.4083 91.3496L66.5946 91.342C67.4531 91.3426 68.3007 91.1517 69.0745 90.7834C69.8484 90.4151 70.5285 89.8789 71.0646 89.2146L91.7511 63.5103C92.287 62.845 92.6647 62.0685 92.856 61.2386C93.0473 60.4088 93.0474 59.5469 92.8561 58.717L85.4686 26.6649C85.2775 25.8354 84.9001 25.0593 84.3645 24.3941C83.829 23.7289 83.149 23.1918 82.3752 22.8226L52.4735 8.56115C51.6108 8.14948 50.6576 7.95905 49.7013 8.00735Z",fill:"#326CE5"}),a.createElement("path",{d:"M49.9976 18.915C49.0093 18.9151 48.208 19.8043 48.2081 20.9011C48.2081 20.9179 48.2116 20.934 48.2119 20.9508C48.2105 21.0998 48.2033 21.2793 48.2081 21.4091C48.2317 22.0417 48.3697 22.5259 48.4528 23.1087C48.6034 24.3562 48.7295 25.3902 48.6517 26.3513C48.576 26.7138 48.3087 27.0452 48.0704 27.2756L48.0284 28.0319C46.9545 28.1207 45.8733 28.2835 44.7935 28.5284C40.1469 29.5822 36.1463 31.9729 33.1005 35.2008C32.9028 35.0661 32.5571 34.8184 32.4542 34.7425C32.1347 34.7856 31.8118 34.884 31.3912 34.6394C30.5904 34.1009 29.861 33.3576 28.9784 32.4623C28.574 32.034 28.2812 31.6262 27.8007 31.2134C27.6916 31.1196 27.5251 30.9928 27.4031 30.8964C27.0274 30.5972 26.5844 30.4412 26.1565 30.4266C25.6064 30.4078 25.0768 30.6226 24.7303 31.0568C24.1142 31.8287 24.3114 33.0084 25.17 33.6921C25.1787 33.6991 25.188 33.7045 25.1968 33.7112C25.3147 33.8068 25.4592 33.9292 25.5677 34.0092C26.0775 34.3852 26.5433 34.5777 27.0513 34.8762C28.1216 35.5364 29.0088 36.0838 29.7126 36.7438C29.9874 37.0364 30.0355 37.552 30.072 37.775L30.6456 38.2868C27.5752 42.9023 26.1541 48.6033 26.9939 54.4122L26.2445 54.6299C26.0469 54.8847 25.7678 55.2856 25.4759 55.4052C24.5551 55.6949 23.5188 55.8013 22.2678 55.9323C21.6804 55.9811 21.1736 55.952 20.5509 56.0698C20.4138 56.0957 20.2229 56.1454 20.0729 56.1805C20.0677 56.1816 20.0628 56.1832 20.0576 56.1844C20.0495 56.1863 20.0387 56.1902 20.0309 56.192C18.9761 56.4466 18.2985 57.4149 18.5167 58.369C18.7348 59.3234 19.7651 59.9037 20.8262 59.6753C20.8339 59.6735 20.845 59.6732 20.853 59.6714C20.865 59.6687 20.8755 59.6629 20.8874 59.66C21.0353 59.6276 21.2207 59.5915 21.3501 59.5569C21.9623 59.3931 22.4057 59.1526 22.956 58.942C24.1401 58.5178 25.1208 58.1634 26.0762 58.0253C26.4753 57.9941 26.8957 58.2712 27.1048 58.3881L27.8849 58.2545C29.6799 63.8134 33.4417 68.3064 38.2052 71.1257L37.8801 71.9049C37.9973 72.2074 38.1265 72.6168 38.0392 72.9155C37.6919 73.8152 37.0969 74.7648 36.4195 75.8235C36.0914 76.3126 35.7557 76.6922 35.4597 77.252C35.3889 77.3859 35.2987 77.5917 35.2303 77.7332C34.7704 78.7161 35.1077 79.8482 35.9912 80.2731C36.8802 80.7006 37.9838 80.2497 38.4614 79.2648C38.4621 79.2634 38.4645 79.2624 38.4652 79.261C38.4657 79.2599 38.4647 79.2582 38.4652 79.2571C38.5332 79.1175 38.6296 78.934 38.6869 78.8026C38.9405 78.2225 39.0249 77.7253 39.2032 77.1641C39.6766 75.9761 39.9368 74.7296 40.5886 73.9529C40.7671 73.7402 41.0581 73.6584 41.3598 73.5778L41.7651 72.8444C45.9178 74.4366 50.566 74.8638 55.2094 73.8107C56.2686 73.5705 57.2913 73.2596 58.2799 72.8865C58.3938 73.0883 58.6055 73.4762 58.6622 73.5739C58.9688 73.6736 59.3034 73.725 59.5761 74.1277C60.0638 74.9599 60.3973 75.9444 60.8035 77.1336C60.9819 77.6947 61.07 78.1919 61.3236 78.7721C61.3814 78.9043 61.4772 79.0905 61.5453 79.2304C62.0219 80.2185 63.1289 80.671 64.0193 80.2425C64.9027 79.8175 65.2404 78.6855 64.7802 77.7027C64.7118 77.5611 64.6178 77.3554 64.547 77.2214C64.2509 76.6617 63.9153 76.2859 63.5872 75.7968C62.9097 74.7381 62.3478 73.8587 62.0004 72.959C61.8551 72.495 62.0249 72.2064 62.138 71.9049C62.0703 71.8273 61.9253 71.3891 61.8398 71.183C66.7901 68.2634 70.4415 63.6028 72.1563 58.2201C72.3878 58.2565 72.7903 58.3276 72.921 58.3538C73.1901 58.1765 73.4376 57.9451 73.9228 57.9833C74.8783 58.1213 75.8589 58.4758 77.043 58.9C77.5934 59.1105 78.0368 59.355 78.649 59.5187C78.7784 59.5533 78.9637 59.5856 79.1117 59.618C79.1236 59.6209 79.1341 59.6267 79.1461 59.6294C79.1541 59.6312 79.1652 59.6315 79.1728 59.6333C80.234 59.8614 81.2644 59.2814 81.4824 58.327C81.7003 57.3729 81.023 56.4043 79.9682 56.15C79.8147 56.1152 79.5972 56.056 79.4481 56.0278C78.8254 55.91 78.3187 55.939 77.7313 55.8903C76.4802 55.7593 75.4439 55.6529 74.5232 55.3632C74.1477 55.2177 73.8806 54.7715 73.7508 54.5879L73.0281 54.3778C73.4028 51.6701 73.3017 48.8521 72.6533 46.0325C71.9989 43.1867 70.8424 40.5839 69.2999 38.2907C69.4853 38.1223 69.8354 37.8127 69.9346 37.7216C69.9637 37.4009 69.9387 37.0646 70.2711 36.7094C70.9749 36.0494 71.8622 35.502 72.9325 34.8418C73.4405 34.5433 73.9101 34.3508 74.4199 33.9748C74.5352 33.8897 74.6926 33.7551 74.8138 33.6578C75.6722 32.9738 75.8698 31.7941 75.2535 31.0224C74.6372 30.2507 73.4429 30.178 72.5845 30.862C72.4623 30.9587 72.2965 31.0848 72.1868 31.179C71.7064 31.5919 71.4097 31.9996 71.0053 32.4279C70.1228 33.3233 69.3933 34.0703 68.5925 34.6088C68.2455 34.8106 67.7372 34.7408 67.5066 34.7272L66.8259 35.2123C62.9448 31.1472 57.6606 28.5482 51.9707 28.0433C51.9548 27.8051 51.9339 27.3746 51.9286 27.2451C51.6957 27.0224 51.4143 26.8323 51.3436 26.3513C51.2657 25.3902 51.3957 24.3562 51.5462 23.1087C51.6293 22.5259 51.7674 22.0417 51.791 21.4091C51.7963 21.2653 51.7877 21.0566 51.7871 20.9011C51.787 19.8043 50.9859 18.9149 49.9976 18.915ZM47.7569 32.7793L47.2254 42.1559L47.1872 42.175C47.1515 43.0138 46.4604 43.6836 45.6118 43.6836C45.2642 43.6836 44.9433 43.5721 44.6826 43.3819L44.6673 43.3895L36.9701 37.9393C39.3358 35.6157 42.3616 33.8987 45.8489 33.1078C46.4859 32.9633 47.1226 32.8561 47.7569 32.7793ZM52.2422 32.7793C56.3135 33.2795 60.0787 35.1209 62.964 37.9431L55.3165 43.359L55.2897 43.3475C54.6109 43.8427 53.6545 43.7198 53.1255 43.0572C52.9087 42.7858 52.795 42.4666 52.7813 42.1444L52.7737 42.1406L52.2422 32.7793ZM34.1788 41.4416L41.2068 47.7207L41.1992 47.7589C41.8335 48.3097 41.9271 49.2656 41.398 49.9283C41.1813 50.1997 40.8912 50.3818 40.5797 50.4668L40.5721 50.4973L31.5633 53.0945C31.1048 48.9066 32.093 44.8357 34.1788 41.4416ZM65.7668 41.4454C66.811 43.1361 67.6017 45.0243 68.0725 47.0714C68.5376 49.0939 68.6543 51.1128 68.4625 53.0639L59.4079 50.4591L59.4002 50.4209C58.5894 50.1996 58.0911 49.3758 58.2799 48.5495C58.3572 48.211 58.5371 47.9246 58.7808 47.713L58.777 47.6939L65.7668 41.4454ZM48.5561 48.2057H51.4354L53.2249 50.44L52.5825 53.2282L49.9976 54.4695L47.4051 53.2244L46.7627 50.4362L48.5561 48.2057ZM57.7866 55.8521C57.909 55.8459 58.0308 55.8569 58.1499 55.8788L58.1652 55.8597L67.4836 57.4333C66.1199 61.2604 63.5103 64.5758 60.0235 66.7945L56.4062 58.0673L56.4177 58.052C56.0854 57.2808 56.4179 56.3765 57.1824 56.0087C57.3782 55.9145 57.5827 55.8624 57.7866 55.8521ZM42.136 55.8903C42.8471 55.9002 43.485 56.3932 43.6502 57.1163C43.7275 57.4548 43.6899 57.7902 43.5622 58.0864L43.589 58.1208L40.01 66.7602C36.6638 64.6154 33.9985 61.404 32.5728 57.4639L41.811 55.8979L41.8263 55.917C41.9296 55.898 42.0344 55.8888 42.136 55.8903ZM49.9403 59.6753C50.188 59.6662 50.4393 59.7169 50.6782 59.8319C50.9914 59.9825 51.2334 60.2197 51.3856 60.5041H51.4201L55.9741 68.7233C55.3831 68.9212 54.7755 69.0904 54.154 69.2313C50.6711 70.0212 47.1993 69.7819 44.0555 68.7119L48.5981 60.5079H48.6058C48.8784 59.9989 49.3953 59.6953 49.9403 59.6753Z",fill:"white",stroke:"white",strokeWidth:"0.25"}))}})(i||(i={})),n(574146),n(992444),n(207715),n(931516),n(666782);var p=n(190698);n(741485);var m=n(967299),h=n(548998),_=n(230648),g=n(485486),f=n(869015),E=n(727959),y=n(128515),b=n(500132),v=n(925484),T=n(147518),I=n(392992),S=n(431743),w=n(994593),A=n(166826),C=n(352300),N=n(915158),L=n(933038),O=n(108966),R=n(368101),P=n(263509),D=n(549171),M=n(434087),k=n(330644),F=n(925669),x=n(923403),U=n(287422),B=n(903264),V=n(226755),G=n(977719),H=n(295373),K=n(334222),W=n(625634),z=n(781308),$=n(887861),Y=n(959985),j=n(533429),q=n(352971),X=n(576386),Z=n(451894),J=n(630129),Q=n(918253),ee=n(226191),et=n(651805),er=n(827825),en=n(633698),ei=n(356560),ea=n(955852),eo=n(64390),es=n(219151),el=n(32938),ec=n(827072),ed=n(26015),eu=n(113386),ep=n(837144),em=n(261637),eh=n(867224),e_=n(770285),eg=n(682370),ef=n(650509),eE=n(494989),ey=n(485106),eb=n(707383),ev=n(373800),eT=n(267196),eI=n(54279),eS=n(514675),ew=n(166970),eA=n(481432),eC=n(885536),eN=n(216436),eL=n(20479),eO=n(118314),eR=n(765281),eP=n(494199),eD=n(797876),eM=n(672615),ek=n(316663),eF=n(918765),ex=n(70414),eU=n(687811),eB=n(650385),eV=n(412745),eG=n(428383),eH=n(549059),eK=n(976161),eW=n(690776),ez=n(540057),e$=n(434476),eY=n(107636),ej=n(345114),eq=n(208900),eX=n(166073),eZ=n(805688),eJ=n(542915),eQ=n(851908),e0=n(885408),e1=n(738587),e2=n(553770),e4=n(419921),e3=n(538752);function e7(e,r,n){if(r===o.VTL.NO)return;let i=n??s.zl.get(p.Rg);if(r===o.VTL.YES_WITHOUT_REORDER){let r=s.zl.get(p.Gn).map(r=>r.id===e?{...r,lastAddedAtByUserId:{...r.lastAddedAtByUserId,[i]:Date.now()}}:r);s.zl.set(p.Gn,r);return}let[[a],l]=c()(s.zl.get(p.Gn),r=>r.id===e),d={id:e,lastAddedAtByUserId:{...a?.lastAddedAtByUserId||{},[i]:Date.now()}};s.zl.set(p.Gn,[d,...l])}m.A,h.A,_.A,g.A,f.A,E.A,y.A,b.A,v.A,T.A,I.A,S.A,w.A,A.A,C.A,N.A,L.A,O.A,R.A,P.A,D.A,M.A,k.A,F.A,x.A,U.A,B.A,V.A,G.A,H.A,K.A,W.A,z.A,$.A,Y.A,j.A,q.A,X.A,Z.A,J.A,Q.A,ee.A,et.A,er.A,en.A,ei.A,ea.A,eo.A,es.A,el.A,ec.A,ed.A,eu.A,ep.A,em.A,eh.A,e_.A,eg.A,ef.A,eE.A,ey.A,eb.A,ev.A,eT.A,eI.A,eS.A,ew.A,eA.A,eC.A,eN.A,eL.A,eO.A,eR.A,eP.A,eD.A,eM.A,ek.A,eF.A,ex.A,eU.A,eB.A,eV.A,eG.A,eH.A,eK.A,eW.A,ez.A,e$.A,eY.A,ej.A,eq.A,eX.A,eZ.A,eJ.A,eQ.A,e0.A,e1.A,e2.A,e4.A,e3.A,(0,d.A)(()=>({advanced:{activity:(0,u.t)("whiteboard.shapes_sidebar.shapes.activity"),archive:(0,u.t)("whiteboard.shapes_sidebar.shapes.archive"),authentication:(0,u.t)("whiteboard.shapes_sidebar.shapes.authentication"),chat:(0,u.t)("whiteboard.shapes_sidebar.shapes.chat"),cloud:(0,u.t)("whiteboard.shapes_sidebar.shapes.cloud"),compute:(0,u.t)("whiteboard.shapes_sidebar.shapes.compute"),database:(0,u.t)("whiteboard.shapes_sidebar.shapes.database"),desktop:(0,u.t)("whiteboard.shapes_sidebar.shapes.desktop"),email:(0,u.t)("whiteboard.shapes_sidebar.shapes.email"),file:(0,u.t)("whiteboard.shapes_sidebar.shapes.file"),frontEndService:(0,u.t)("whiteboard.shapes_sidebar.shapes.frontEndService"),instant:(0,u.t)("whiteboard.shapes_sidebar.shapes.instant"),location:(0,u.t)("whiteboard.shapes_sidebar.shapes.location"),mobile:(0,u.t)("whiteboard.shapes_sidebar.shapes.mobile"),package:(0,u.t)("whiteboard.shapes_sidebar.shapes.package"),payment:(0,u.t)("whiteboard.shapes_sidebar.shapes.payment"),security:(0,u.t)("whiteboard.shapes_sidebar.shapes.security"),send:(0,u.t)("whiteboard.shapes_sidebar.shapes.send"),server:(0,u.t)("whiteboard.shapes_sidebar.shapes.server"),service:(0,u.t)("whiteboard.shapes_sidebar.shapes.service"),settings:(0,u.t)("whiteboard.shapes_sidebar.shapes.settings"),storage:(0,u.t)("whiteboard.shapes_sidebar.shapes.storage"),terminal:(0,u.t)("whiteboard.shapes_sidebar.shapes.terminal"),user:(0,u.t)("whiteboard.shapes_sidebar.shapes.user"),wallet:(0,u.t)("whiteboard.shapes_sidebar.shapes.wallet"),web:(0,u.t)("whiteboard.shapes_sidebar.shapes.web")}})),(0,d.A)(()=>({advanced:(0,u.t)("whiteboard.shapes_sidebar.section_title.advanced")}))},532920:(e,r,n)=>{n.d(r,{AZ:()=>R,ZH:()=>M,cN:()=>P,cs:()=>k,lV:()=>O,nX:()=>D});var i=n(848318),a=n(208720),o=n(741419),s=n(157907),l=n(39773),c=n(536384),d=n.n(c),u=n(831932),p=n(77441),m=n(17755),h=n(318672),_=n(284092),g=n(731560);i.forwardRef(({color:e,toolbarIconScale:r=1,toolOrder:n=1,shouldAnimate:a=!0,stickyAnimationState:o=_.k.DEFAULT},s)=>{let l=!a||o===_.k.DRAG_RETURN_TO_DLT,c=o===_.k.DRAG_ON_CANVAS,u=4===n,p=o===_.k.DRAG_RETURN_TO_DLT,m=o===_.k.DRAG_ON_CANVAS,h=16,f=25;r<1&&(u?(h=24,f=32):h=32);let E={[g.Sk]:1===n,[g.gz]:2===n,[g.eB]:3===n,[g.ID]:u};return i.createElement("div",{className:d()({[g.xI]:2===n,[g.t3]:3===n,[g.iD]:u}),style:{width:116*r,height:116*r}},i.createElement("div",{className:d()({...E,[g.ZJ]:!0,[g.B4]:l&&1===n||c&&2===n,[g.i0]:m,[g.BE]:p,[g.rh]:!p&&!a&&2===n}),style:{top:h*r,left:f*r,width:104*r,height:104*r},ref:s},i.createElement("div",{className:d()({[g.uh]:!0,[g.WX]:!0})},i.createElement("svg",{className:g.SN,width:104*r,height:104*r,viewBox:"-20 -20 104 104",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",null,i.createElement("path",{className:d()(g.Wq,{[g.cq]:!0}),style:{clipPath:`url(#stickyMaskV3-${n})`},d:"M0.459717 0.680176L104.46 0.680243V104.68H0.459717V2.09514V0.680176Z",fill:e}),i.createElement("g",{className:g.BN},i.createElement("mask",{id:`stickyCurlMaskV3-${n}`,style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:84,height:84},i.createElement("path",{d:"M31.9819 3.8766C34.7398 1.38156 38.3262 7.51147e-07 42.0452 2.10768e-06L104 2.47061e-05V104H3.61353e-05L3.37915e-06 39.4677C1.22757e-06 35.2289 1.7934 31.188 4.9367 28.3443L31.9819 3.8766Z",fill:"white"})),i.createElement("g",{mask:`url(#stickyCurlMaskV3-${n})`},i.createElement("path",{d:"M104 6.74129e-05L54.8928 48.5492L0 104V0L104 6.74129e-05Z",fill:e,className:g.cq}),i.createElement("g",{filter:"url(#stickyCurlBlurFilter)"},i.createElement("rect",{x:"-26",y:"50.6831",width:"96.831",height:"16.7797",transform:"rotate(-41.9127 -26 50.6831)",fill:"black",fillOpacity:"0.3"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.526 4.26953L3.2583 29.8513C10.3683 23.4168 26.3782 24.6229 26.3782 24.6229C26.3782 24.6229 25.0586 10.1224 31.526 4.26953Z",fill:e,className:g.cq}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.5262 4.26953L3.25854 29.8513C10.3686 23.4168 26.3784 24.6229 26.3784 24.6229C26.3784 24.6229 25.0588 10.1224 31.5262 4.26953Z",fill:"url(#paint0_linear_221_5067)"})))),i.createElement("defs",null,i.createElement("clipPath",{id:`stickyMaskV3-${n}`},i.createElement("path",{className:g.cP,d:"M50.9701 6.74129e-05L104.97 0V104H0.970459V46.9909L50.9701 6.74129e-05Z",fill:"#C20000"}),i.createElement("path",{className:g.dP,d:"M32.2236 3.8766C34.9815 1.38156 38.5679 7.51147e-07 42.2869 2.10768e-06L104.242 2.47061e-05V104H0.241735L0.241703 39.4677C0.2417 35.2289 2.0351 31.188 5.1784 28.3443L32.2236 3.8766Z",fill:"#2400FF"}),i.createElement("rect",{x:"250",y:"520",width:"1",height:"1"})),i.createElement("filter",{xmlns:"http://www.w3.org/2000/svg",id:`sticky_shadow-${n}`,x:"0",y:"0",width:"200%",height:"200%",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:"1.5"}),i.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),i.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_276_2240"}),i.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:"4"}),i.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.17 0"}),i.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow_276_2240",result:"effect2_dropShadow_276_2240"}),i.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_276_2240",result:"shape"})),i.createElement("filter",{id:"stickyCurlBlurFilter",x:"-58",y:"-45.9995",width:"147.267",height:"141.169",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feGaussianBlur",{stdDeviation:"16",result:"effect1_foregroundBlur_221_5067"})),i.createElement("linearGradient",{id:"paint0_linear_221_5067",x1:"18.1477",y1:"15.5989",x2:"25.7005",y2:"25.3824",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"white",stopOpacity:"0.5"}),i.createElement("stop",{offset:"0.319642",stopColor:"white",stopOpacity:"0.2"}),i.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.2"})))))))});let f="#699BF7";function E({toolbarIconScale:e,children:r,isBeingDraggedForPlacement:n}){let a=u.Ay.safari&&n;return i.createElement("svg",{fill:"none",height:144*e,width:144*e,viewBox:"0 0 144 144",xmlns:"http://www.w3.org/2000/svg",className:d()({[g.WX]:!a,[g.$d]:!0})},r)}let y=new Map([[o.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,104],[o.NLJ.SHAPE_WHITEBOARD_ELLIPSE,128],[o.NLJ.SHAPE_WHITEBOARD_SQUARE,112]]),b=2/38,v=.5/38,T=8/38;function I(){let e=(0,l.md)(p.lC),r=(0,l.md)(p.U9);return i.useMemo(()=>S(e,r),[r,e])}let S=(e,r)=>r===o.xbm.NONE?"#000000":h.F.format(e);function w(e){let r=h.F.parse(e),n=o.DV9?.getShapeWithTextStrokeColorForFill(a.oU(r));return n?h.F.format((0,a.aH)(n)):"#757575"}function A(e){return i.useMemo(()=>w(e),[e])}function C(e,r){if(!r)return{};let{styleType:n,isDragging:i}=r,a=function(e){let r=y.get(e);return void 0===r?112:r}(e);return{strokeWidth:n===o.xbm.NONE?a*v:a*b,strokeOpacity:n===o.xbm.NONE?.2:1,strokeDasharray:n===o.xbm.DASHED?`${a*T} ${a*T}`:"",strokeLinecap:"round",className:m.s.if(i,m.s.hidden).$}}function N(e,r){if(!r)return{};let{styleType:n,svgToCanvasScale:i,isDragging:a}=r;return r?{stroke:(0,s.k)().figjam_track_stroke_color?S(l.zl.get(p.lC),l.zl.get(p.U9)):w(e),strokeWidth:function(e,r,n=!1){return n&&(e===o.xbm.SOLID||e===o.xbm.DASHED)?4*r:0}(n,i,a),strokeDasharray:function(e,r,n=!1){return n&&e===o.xbm.DASHED?`${16*r} ${10*r}`:""}(n,i,a),strokeLinecap:"round"}:{}}function L(e){return!!e&&e.styleType===o.xbm.NONE}function O(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("mask",{id:"path-3-inside-1_1019679_55716",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"black",fillOpacity:"0.9"}),i.createElement("path",{d:"M32 11L33.7789 10.086L32 6.6237L30.2211 10.086L32 11ZM33.3576 13.6424L31.5787 14.5564L31.8723 15.1277L32.4436 15.4213L33.3576 13.6424ZM30.6424 13.6424L31.5564 15.4213L32.1277 15.1277L32.4213 14.5564L30.6424 13.6424ZM28 15L27.086 13.2211L23.6237 15L27.086 16.7789L28 15ZM30.6424 16.3576L32.4213 15.4436L32.1277 14.8723L31.5564 14.5787L30.6424 16.3576ZM32 19L30.2211 19.914L32 23.3763L33.7789 19.914L32 19ZM33.3576 16.3576L32.4436 14.5787L31.8723 14.8723L31.5787 15.4436L33.3576 16.3576ZM36 15L36.914 16.7789L40.3763 15L36.914 13.2211L36 15ZM39.1682 26L37.1715 26.1162L37.2812 28H39.1682V26ZM42 26H44V24H42V26ZM14 26V24H12V26H14ZM28.1837 26V28H30.0729L30.1804 26.1138L28.1837 26ZM28.6965 23.9794L26.8858 23.1302V23.1302L28.6965 23.9794ZM36.0114 21.3352L35.1622 23.146V23.146L36.0114 21.3352ZM37.1625 26V28H39.3533L39.1542 25.8183L37.1625 26ZM35.1622 23.146L34.313 24.9567V24.9567L35.1622 23.146ZM30.5073 24.8287L28.6965 23.9794L28.6965 23.9794L30.5073 24.8287ZM30.1893 26L28.1974 25.8203L28.0008 28H30.1893V26ZM22.4218 15.828L23.8593 14.4375L22.4688 13L21.0312 14.3905L22.4218 15.828ZM25.8981 19.4218L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L25.8981 19.4218ZM18.828 19.3044L17.4375 17.8669L16 19.2574L17.3905 20.6949L18.828 19.3044ZM22.3044 22.8981L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L22.3044 22.8981ZM22.4688 13L23.9063 11.6095L22.5157 10.172L21.0782 11.5625L22.4688 13ZM23.8593 14.4375L22.4218 15.828L22.4218 15.828L23.8593 14.4375ZM21.0312 14.3905L22.4218 15.828L22.4218 15.828L21.0312 14.3905ZM17.4375 17.8669L16.047 16.4294H16.047L17.4375 17.8669ZM16 19.2574L14.6095 17.8199L13.172 19.2104L14.5625 20.6479L16 19.2574ZM17.3905 20.6949L18.828 19.3044L18.828 19.3044L17.3905 20.6949ZM20.8669 24.2887L22.3044 22.8981H22.3044L20.8669 24.2887ZM22.2574 25.7262L20.8199 27.1167L22.2104 28.5542L23.6479 27.1637L22.2574 25.7262ZM23.6949 24.3356L22.3044 22.8981V22.8981L23.6949 24.3356ZM27.2887 20.8593L28.6792 22.2968V22.2968L27.2887 20.8593ZM28.7262 19.4688L30.1167 20.9063L31.5542 19.5157L30.1637 18.0782L28.7262 19.4688ZM27.3356 18.0313L28.7731 16.6407L28.7731 16.6407L27.3356 18.0313ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM30.2211 11.914L31.5787 14.5564L35.1366 12.7283L33.7789 10.086L30.2211 11.914ZM32.4213 14.5564L33.7789 11.914L30.2211 10.086L28.8634 12.7283L32.4213 14.5564ZM28.914 16.7789L31.5564 15.4213L29.7283 11.8634L27.086 13.2211L28.914 16.7789ZM31.5564 14.5787L28.914 13.2211L27.086 16.7789L29.7283 18.1366L31.5564 14.5787ZM33.7789 18.086L32.4213 15.4436L28.8634 17.2717L30.2211 19.914L33.7789 18.086ZM31.5787 15.4436L30.2211 18.086L33.7789 19.914L35.1366 17.2717L31.5787 15.4436ZM35.086 13.2211L32.4436 14.5787L34.2717 18.1366L36.914 16.7789L35.086 13.2211ZM32.4436 15.4213L35.086 16.7789L36.914 13.2211L34.2717 11.8634L32.4436 15.4213ZM39.1682 28H41V24H39.1682V28ZM41 28H42V24H41V28ZM40 26V27H44V26H40ZM40 27V38H44V27H40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM38 40H18V44H38V40ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM16 38V27H12V38H16ZM16 27V26H12V27H16ZM14 28H15V24H14V28ZM15 28H28.1837V24H15V28ZM30.1804 26.1138C30.2049 25.6836 30.3102 25.2488 30.5073 24.8287L26.8858 23.1302C26.4684 24.0201 26.24 24.955 26.1869 25.8862L30.1804 26.1138ZM30.5073 24.8287C31.3281 23.0786 33.4121 22.3252 35.1622 23.146L36.8607 19.5244C33.1105 17.7657 28.6446 19.38 26.8858 23.1302L30.5073 24.8287ZM35.1622 23.146C36.3641 23.7096 37.099 24.8697 37.1715 26.1162L41.1648 25.8838C41.0104 23.2309 39.4437 20.7359 36.8607 19.5244L35.1622 23.146ZM39.1542 25.8183C38.9831 23.9427 37.8478 22.1964 36.0114 21.3352L34.313 24.9567C34.811 25.1903 35.1234 25.6625 35.1708 26.1817L39.1542 25.8183ZM36.0114 21.3352C33.2613 20.0454 29.9863 21.2293 28.6965 23.9794L32.318 25.6779C32.6698 24.9278 33.563 24.605 34.313 24.9567L36.0114 21.3352ZM28.6965 23.9794C28.4179 24.5735 28.2537 25.1964 28.1974 25.8203L32.1812 26.1797C32.1963 26.013 32.2401 25.8441 32.318 25.6779L28.6965 23.9794ZM30.1893 28H37.1625V24H30.1893V28ZM20.9843 17.2186L24.4606 20.8123L27.3356 18.0313L23.8593 14.4375L20.9843 17.2186ZM20.2186 20.7419L23.8123 17.2655L21.0312 14.3905L17.4375 17.8669L20.2186 20.7419ZM23.7419 21.5076L20.2655 17.9138L17.3905 20.6949L20.8669 24.2887L23.7419 21.5076ZM24.5076 17.9843L20.9138 21.4606L23.6949 24.3356L27.2887 20.8593L24.5076 17.9843ZM21.0312 14.3905L22.4218 15.828L25.2968 13.047L23.9063 11.6095L21.0312 14.3905ZM22.4218 15.828L23.8593 14.4375L21.0782 11.5625L19.6407 12.953L22.4218 15.828ZM18.828 19.3044L22.4218 15.828L19.6407 12.953L16.047 16.4294L18.828 19.3044ZM17.3905 20.6949L18.828 19.3044L16.047 16.4294L14.6095 17.8199L17.3905 20.6949ZM18.828 19.3044L17.4375 17.8669L14.5625 20.6479L15.953 22.0854L18.828 19.3044ZM22.3044 22.8981L18.828 19.3044L15.953 22.0854L19.4294 25.6792L22.3044 22.8981ZM23.6949 24.3356L22.3044 22.8981L19.4294 25.6792L20.8199 27.1167L23.6949 24.3356ZM22.3044 22.8981L20.8669 24.2887L23.6479 27.1637L25.0854 25.7731L22.3044 22.8981ZM25.8981 19.4218L22.3044 22.8981L25.0854 25.7731L28.6792 22.2968L25.8981 19.4218ZM27.3356 18.0313L25.8981 19.4218L28.6792 22.2968L30.1167 20.9063L27.3356 18.0313ZM25.8981 19.4218L27.2887 20.8593L30.1637 18.0782L28.7731 16.6407L25.8981 19.4218ZM22.4218 15.828L25.8981 19.4218L28.7731 16.6407L25.2968 13.047L22.4218 15.828ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-3-inside-1_1019679_55716)"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function R(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{d:"M11.5269 4L22.3945 9.08856L17.306 19.9562L6.4383 14.8677L11.5269 4Z",fill:"#FF8577"}),i.createElement("path",{d:"M51.3739 20.2821C49.7324 23.7823 45.5642 25.2891 42.064 23.6475C38.5639 22.006 37.0571 17.8378 38.6986 14.3376C40.3402 10.8375 44.5084 9.33072 48.0085 10.9723C51.5087 12.6138 53.0155 16.782 51.3739 20.2821Z",fill:"#C7B9FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.377 23.8507L25.8165 22.6624L27.3151 27.0003H28.4367L30.6793 20.0203L27.2397 21.2085L25.16 15.1885L22.377 23.8507Z",fill:"#FFC700"}),i.createElement("mask",{id:"path-6-inside-1_1019679_55739",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"white"}),i.createElement("path",{d:"M36.5002 2L38.2791 1.08599L36.5002 -2.3763L34.7213 1.08599L36.5002 2ZM38.0275 4.97265L36.2486 5.88666L36.5422 6.45801L37.1135 6.75158L38.0275 4.97265ZM34.9728 4.97265L35.8868 6.75158L36.4582 6.45801L36.7518 5.88666L34.9728 4.97265ZM32.0002 6.5L31.0862 4.72107L27.6239 6.5L31.0862 8.27893L32.0002 6.5ZM34.9728 8.02735L36.7518 7.11334L36.4582 6.54199L35.8868 6.24842L34.9728 8.02735ZM36.5002 11L34.7213 11.914L36.5002 15.3763L38.2791 11.914L36.5002 11ZM38.0275 8.02735L37.1135 6.24842L36.5422 6.54199L36.2486 7.11334L38.0275 8.02735ZM41.0002 6.5L41.9142 8.27893L45.3765 6.5L41.9142 4.72107L41.0002 6.5ZM32.5002 10L34.2791 9.08599L32.5002 5.6237L30.7213 9.08599L32.5002 10ZM33.3487 11.6515L31.5698 12.5655L31.8633 13.1368L32.4347 13.4304L33.3487 11.6515ZM31.6517 11.6515L32.5657 13.4304L33.137 13.1368L33.4306 12.5655L31.6517 11.6515ZM30.0002 12.5L29.0862 10.7211L25.6239 12.5L29.0862 14.2789L30.0002 12.5ZM31.6517 13.3485L33.4306 12.4345L33.137 11.8632L32.5657 11.5696L31.6517 13.3485ZM32.5002 15L30.7213 15.914L32.5002 19.3763L34.2791 15.914L32.5002 15ZM33.3487 13.3485L32.4347 11.5696L31.8633 11.8632L31.5698 12.4345L33.3487 13.3485ZM35.0002 12.5L35.9142 14.2789L39.3765 12.5L35.9142 10.7211L35.0002 12.5ZM12.4902 6.65937L13.3383 4.84809L11.527 4L10.6789 5.81128L12.4902 6.65937ZM19.7353 10.0517L21.5466 10.8998L22.3947 9.08856L20.5834 8.24047L19.7353 10.0517ZM9.09785 13.9045L7.28657 13.0564L6.43848 14.8677L8.24976 15.7158L9.09785 13.9045ZM16.343 17.2969L15.4949 19.1082L17.3062 19.9562L18.1543 18.145L16.343 17.2969ZM6.43848 14.8677L4.6272 14.0196L3.7791 15.8309L5.59038 16.679L6.43848 14.8677ZM11.527 4L12.3751 2.18872L10.5638 1.34063L9.71575 3.15191L11.527 4ZM17.3062 19.9562L16.4581 21.7675L18.2693 22.6156L19.1174 20.8043L17.3062 19.9562ZM22.3947 9.08856L24.206 9.93665L25.0541 8.12537L23.2428 7.27728L22.3947 9.08856ZM42.9134 21.8368L43.7626 20.026L42.9134 21.8368ZM49.5634 19.4329L47.7526 18.5837L49.5634 19.4329ZM40.5096 15.1869L38.6988 14.3376V14.3376L40.5096 15.1869ZM47.1595 12.783L48.0087 10.9723L47.1595 12.783ZM42.0642 23.6475L41.215 25.4583H41.215L42.0642 23.6475ZM51.3741 20.2821L49.5634 19.4329L51.3741 20.2821ZM38.6988 14.3376L36.8881 13.4884V13.4884L38.6988 14.3376ZM48.0087 10.9723L47.1595 12.783L47.1595 12.783L48.0087 10.9723ZM22.377 23.8504L20.4729 23.2386L19.2493 27.0469L23.0301 25.7408L22.377 23.8504ZM25.1601 15.1882L27.0505 14.5352L25.0913 8.86403L23.256 14.5764L25.1601 15.1882ZM25.8166 22.6621L27.707 22.0091L27.0539 20.1187L25.1635 20.7718L25.8166 22.6621ZM26.9697 26L25.0793 26.6531L25.5446 28H26.9697V26ZM28.758 26V28H30.2161L30.6622 26.6118L28.758 26ZM30.6794 20.02L32.5835 20.6318L33.8071 16.8235L30.0263 18.1296L30.6794 20.02ZM27.2398 21.2082L25.3494 21.8613L26.0025 23.7517L27.8929 23.0986L27.2398 21.2082ZM30.8587 26L28.9546 25.3882L28.1155 28H30.8587V26ZM32.5835 20.6318L34.4876 21.2436V21.2436L32.5835 20.6318ZM30.0263 18.1296L30.6794 20.02H30.6794L30.0263 18.1296ZM28.4771 18.6648L26.5868 19.3179L27.2398 21.2082L29.1302 20.5552L28.4771 18.6648ZM27.0505 14.5352L28.9409 13.8821L27.0505 14.5352ZM25.1384 13.1883L25.1601 15.1882L25.1384 13.1883ZM23.256 14.5764L21.3519 13.9646L23.256 14.5764ZM20.4729 23.2386L22.377 23.8504H22.377L20.4729 23.2386ZM23.0301 25.7408L23.6831 27.6311L23.6831 27.6311L23.0301 25.7408ZM24.5793 25.2056L26.4696 24.5525L25.8166 22.6621L23.9262 23.3152L24.5793 25.2056ZM24.8537 26V28H27.6606L26.7441 25.3469L24.8537 26ZM14 26V24H12V26H14ZM42 26H44V24H42V26ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM34.7213 2.91401L36.2486 5.88666L39.8065 4.05864L38.2791 1.08599L34.7213 2.91401ZM36.7518 5.88666L38.2791 2.91401L34.7213 1.08599L33.1939 4.05863L36.7518 5.88666ZM32.9142 8.27893L35.8868 6.75158L34.0588 3.19372L31.0862 4.72107L32.9142 8.27893ZM35.8868 6.24842L32.9142 4.72107L31.0862 8.27893L34.0588 9.80628L35.8868 6.24842ZM38.2791 10.086L36.7518 7.11334L33.1939 8.94136L34.7213 11.914L38.2791 10.086ZM36.2486 7.11334L34.7213 10.086L38.2791 11.914L39.8065 8.94136L36.2486 7.11334ZM40.0862 4.72107L37.1135 6.24842L38.9415 9.80628L41.9142 8.27893L40.0862 4.72107ZM37.1135 6.75158L40.0862 8.27893L41.9142 4.72107L38.9415 3.19372L37.1135 6.75158ZM30.7213 10.914L31.5698 12.5655L35.1276 10.7375L34.2791 9.08599L30.7213 10.914ZM33.4306 12.5655L34.2791 10.914L30.7213 9.08599L29.8727 10.7375L33.4306 12.5655ZM30.9142 14.2789L32.5657 13.4304L30.7376 9.87255L29.0862 10.7211L30.9142 14.2789ZM32.5657 11.5696L30.9142 10.7211L29.0862 14.2789L30.7376 15.1275L32.5657 11.5696ZM34.2791 14.086L33.4306 12.4345L29.8727 14.2625L30.7213 15.914L34.2791 14.086ZM31.5698 12.4345L30.7213 14.086L34.2791 15.914L35.1276 14.2625L31.5698 12.4345ZM34.0862 10.7211L32.4347 11.5696L34.2627 15.1275L35.9142 14.2789L34.0862 10.7211ZM32.4347 13.4304L34.0862 14.2789L35.9142 10.7211L34.2627 9.87255L32.4347 13.4304ZM11.6421 8.47065L18.8873 11.863L20.5834 8.24047L13.3383 4.84809L11.6421 8.47065ZM10.9091 14.7526L14.3015 7.50747L10.6789 5.81128L7.28657 13.0564L10.9091 14.7526ZM17.1911 15.4856L9.94594 12.0932L8.24976 15.7158L15.4949 19.1082L17.1911 15.4856ZM17.9241 9.20365L14.5317 16.4488L18.1543 18.145L21.5466 10.8998L17.9241 9.20365ZM8.24976 15.7158L13.3383 4.84809L9.71575 3.15191L4.6272 14.0196L8.24976 15.7158ZM18.1543 18.145L7.28657 13.0564L5.59038 16.679L16.4581 21.7675L18.1543 18.145ZM20.5834 8.24047L15.4949 19.1081L19.1174 20.8043L24.206 9.93665L20.5834 8.24047ZM10.6789 5.81128L21.5466 10.8998L23.2428 7.27728L12.3751 2.18872L10.6789 5.81128ZM42.0642 23.6475C45.5644 25.2891 49.7326 23.7823 51.3741 20.2821L47.7526 18.5837C47.0491 20.0838 45.2627 20.7295 43.7626 20.026L42.0642 23.6475ZM38.6988 14.3376C37.0573 17.8378 38.564 22.006 42.0642 23.6475L43.7626 20.026C42.2626 19.3225 41.6168 17.5362 42.3203 16.0361L38.6988 14.3376ZM48.0087 10.9723C44.5085 9.33072 40.3404 10.8375 38.6988 14.3376L42.3203 16.0361C43.0238 14.536 44.8102 13.8902 46.3103 14.5938L48.0087 10.9723ZM51.3741 20.2821C53.0156 16.782 51.5089 12.6138 48.0087 10.9723L46.3103 14.5938C47.8104 15.2973 48.4561 17.0836 47.7526 18.5837L51.3741 20.2821ZM41.215 25.4583C45.7152 27.5688 51.0743 25.6316 53.1849 21.1314L49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368L41.215 25.4583ZM36.8881 13.4884C34.7775 17.9887 36.7148 23.3478 41.215 25.4583L42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869L36.8881 13.4884ZM48.8579 9.1615C44.3577 7.05096 38.9986 8.98819 36.8881 13.4884L40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783L48.8579 9.1615ZM53.1849 21.1314C55.2954 16.6311 53.3582 11.272 48.8579 9.1615L47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329L53.1849 21.1314ZM24.2812 24.4622L27.0643 15.8L23.256 14.5764L20.4729 23.2386L24.2812 24.4622ZM25.1635 20.7718L21.724 21.96L23.0301 25.7408L26.4696 24.5525L25.1635 20.7718ZM28.8601 25.3469L27.707 22.0091L23.9262 23.3152L25.0793 26.6531L28.8601 25.3469ZM26.9697 28H28.758V24H26.9697V28ZM28.7752 19.4082L26.8539 25.3882L30.6622 26.6118L32.5835 20.6318L28.7752 19.4082ZM27.8929 23.0986L31.3324 21.9104L30.0263 18.1296L26.5868 19.3179L27.8929 23.0986ZM23.2698 15.8413L25.3494 21.8613L29.1302 20.5552L27.0505 14.5352L23.2698 15.8413ZM32.7629 26.6118L34.4876 21.2436L30.6794 20.02L28.9546 25.3882L32.7629 26.6118ZM34.4876 21.2436C34.9511 19.8011 34.5598 18.2206 33.4769 17.161L30.6794 20.02V20.02L34.4876 21.2436ZM33.4769 17.161C32.394 16.1014 30.8053 15.7445 29.3733 16.2392L30.6794 20.02L30.6794 20.02L33.4769 17.161ZM29.3733 16.2392L27.8241 16.7744L29.1302 20.5552L30.6794 20.02L29.3733 16.2392ZM30.3675 18.0117L28.9409 13.8821L25.1601 15.1882L26.5868 19.3179L30.3675 18.0117ZM28.9409 13.8821C28.3787 12.2548 26.8382 11.1697 25.1166 11.1884L25.1601 15.1882H25.1601L28.9409 13.8821ZM25.1166 11.1884C23.395 11.2072 21.8785 12.3254 21.3519 13.9646L25.1601 15.1882H25.1601L25.1166 11.1884ZM21.3519 13.9646L18.5688 22.6268L22.377 23.8504L25.1601 15.1882L21.3519 13.9646ZM18.5688 22.6268C18.1053 24.0693 18.4966 25.6498 19.5795 26.7094L22.377 23.8504L22.377 23.8504L18.5688 22.6268ZM19.5795 26.7094C20.6625 27.769 22.2511 28.1258 23.6831 27.6311L22.377 23.8504L22.377 23.8504L19.5795 26.7094ZM23.6831 27.6311L25.2323 27.096L23.9262 23.3152L22.377 23.8504L23.6831 27.6311ZM22.6889 25.8586L22.9633 26.6531L26.7441 25.3469L26.4696 24.5525L22.6889 25.8586ZM15 28H24.8537V24H15V28ZM14 28H15V24H14V28ZM16 27V26H12V27H16ZM16 38V27H12V38H16ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM38 40H18V44H38V40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM40 27V38H44V27H40ZM40 26V27H44V26H40ZM41 28H42V24H41V28ZM30.8587 28H41V24H30.8587V28ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-6-inside-1_1019679_55739)"}))}function P(){return i.createElement("svg",{width:"56",height:"62",viewBox:"0 0 56 62",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"11",width:"40",height:"40",rx:"8",fill:"#9747FF"}),i.createElement("path",{d:"M11.9511 6.09433L11.0454 5.67028L10.6214 6.57592L5.53284 17.4436L5.10879 18.3492L6.01443 18.7733L16.8821 23.8619L17.7878 24.2859L18.2118 23.3803L23.3004 12.5126L23.7244 11.6069L22.8188 11.1829L11.9511 6.09433Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),i.createElement("path",{d:"M41.6394 27.5529C45.6396 29.4289 50.4033 27.7069 52.2793 23.7067C54.1553 19.7065 52.4334 14.9429 48.4331 13.0668C44.4329 11.1908 39.6693 12.9128 37.7933 16.913C35.9172 20.9132 37.6392 25.6769 41.6394 27.5529Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.3772 26.8504L25.8167 25.6621L27.3153 30H28.4369L30.6795 23.02L27.2399 24.2082L25.1602 18.1882L22.3772 26.8504Z",fill:"#9747FF"}),i.createElement("path",{d:"M15 30H41V41C41 42.6569 39.6569 44 38 44H18C16.3431 44 15 42.6569 15 41V30Z",stroke:"white",strokeWidth:"2"}),i.createElement("path",{d:"M37.3897 4.54299L36.5002 2.81185L35.6108 4.54299L34.2302 7.22997L31.5432 8.61054L29.8121 9.5L31.5432 10.3895L34.2302 11.77L35.6108 14.457L36.5002 16.1881L37.3897 14.457L38.7703 11.77L41.4573 10.3895L43.1884 9.5L41.4573 8.61054L38.7703 7.22997L37.3897 4.54299Z",fill:"white",stroke:"#9747FF",strokeWidth:"2"}),i.createElement("path",{d:"M32.5002 13L33.3488 14.6515L35.0002 15.5L33.3488 16.3485L32.5002 18L31.6517 16.3485L30.0002 15.5L31.6517 14.6515L32.5002 13Z",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.7354 13.0517L12.4903 9.65937L9.09791 16.9045L16.343 20.2969L19.7354 13.0517ZM11.5271 7L6.43854 17.8677L17.3062 22.9562L22.3948 12.0886L11.5271 7Z",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.9135 24.8368C45.4136 26.0093 48.3909 24.9331 49.5634 22.4329C50.7359 19.9328 49.6597 16.9555 47.1596 15.783C44.6594 14.6105 41.6822 15.6867 40.5096 18.1869C39.3371 20.687 40.4134 23.6643 42.9135 24.8368ZM42.0643 26.6475C45.5645 28.2891 49.7327 26.7823 51.3742 23.2821C53.0157 19.782 51.509 15.6138 48.0088 13.9723C44.5086 12.3307 40.3404 13.8375 38.6989 17.3376C37.0574 20.8378 38.5641 25.006 42.0643 26.6475Z",fill:"white"}),i.createElement("mask",{id:"path-10-inside-1_1_174",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z",fill:"white"}),i.createElement("path",{d:"M22.3767 26.8505L20.4726 26.2387L19.249 30.047L23.0297 28.7409L22.3767 26.8505ZM25.1598 18.1883L27.0502 17.5353L25.091 11.8642L23.2557 17.5766L25.1598 18.1883ZM25.8163 25.6623L27.7066 25.0092L27.0536 23.1189L25.1632 23.7719L25.8163 25.6623ZM26.9693 29.0001V31.0001H29.7763L28.8597 28.3471L26.9693 29.0001ZM24.8534 29.0001L22.963 29.6532L23.4283 31.0001H24.8534V29.0001ZM24.5789 28.2057L26.4693 27.5527L25.8163 25.6623L23.9259 26.3153L24.5789 28.2057ZM23.0297 28.7409L22.3767 26.8505L22.3767 26.8505L23.0297 28.7409ZM20.9779 28.28L22.3767 26.8505L22.3767 26.8505L20.9779 28.28ZM20.4726 26.2387L22.3767 26.8505L22.3767 26.8505L20.4726 26.2387ZM23.2557 17.5766L21.3515 16.9648L21.3515 16.9648L23.2557 17.5766ZM25.138 16.1885L25.1598 18.1883L25.138 16.1885ZM27.0502 17.5353L28.9405 16.8822L28.9405 16.8822L27.0502 17.5353ZM28.4768 21.6649L26.5864 22.318L27.2395 24.2084L29.1298 23.5553L28.4768 21.6649ZM30.026 21.1297L30.679 23.0201L30.679 23.0201L30.026 21.1297ZM32.0778 21.5906L30.679 23.0201L30.679 23.0201L32.0778 21.5906ZM32.5832 23.6319L34.4873 24.2437L34.4873 24.2437L32.5832 23.6319ZM30.8584 29.0001V31.0001H32.3165L32.7625 29.6119L30.8584 29.0001ZM28.7577 29.0001L26.8536 28.3883L26.0144 31.0001H28.7577V29.0001ZM30.679 23.0201L32.5832 23.6319L33.8067 19.8236L30.026 21.1297L30.679 23.0201ZM27.2395 24.2084L25.3491 24.8614L26.0021 26.7518L27.8925 26.0987L27.2395 24.2084ZM24.2808 27.4623L27.0639 18.8001L23.2557 17.5766L20.4726 26.2387L24.2808 27.4623ZM25.1632 23.7719L21.7236 24.9601L23.0297 28.7409L26.4693 27.5527L25.1632 23.7719ZM28.8597 28.3471L27.7066 25.0092L23.9259 26.3153L25.079 29.6532L28.8597 28.3471ZM24.8534 31.0001H26.9693V27.0001H24.8534V31.0001ZM26.7437 28.3471L26.4693 27.5527L22.6885 28.8588L22.963 29.6532L26.7437 28.3471ZM23.9259 26.3153L22.3767 26.8505L23.6828 30.6313L25.232 30.0961L23.9259 26.3153ZM22.3767 26.8505L22.3767 26.8505L19.5792 29.7095C20.6621 30.7692 22.2508 31.126 23.6828 30.6313L22.3767 26.8505ZM22.3767 26.8505L22.3767 26.8505L18.5684 25.6269C18.105 27.0694 18.4963 28.6499 19.5792 29.7095L22.3767 26.8505ZM22.3767 26.8505L25.1598 18.1883L21.3515 16.9648L18.5684 25.6269L22.3767 26.8505ZM25.1598 18.1883L25.1598 18.1883L25.1163 14.1886C23.3947 14.2073 21.8782 15.3256 21.3515 16.9648L25.1598 18.1883ZM25.1598 18.1883L25.1598 18.1883L28.9405 16.8822C28.3783 15.2549 26.8379 14.1699 25.1163 14.1886L25.1598 18.1883ZM25.1598 18.1883L26.5864 22.318L30.3672 21.0119L28.9405 16.8822L25.1598 18.1883ZM29.1298 23.5553L30.679 23.0201L29.3729 19.2394L27.8237 19.7746L29.1298 23.5553ZM30.679 23.0201L30.679 23.0201L33.4765 20.1611C32.3936 19.1015 30.805 18.7447 29.3729 19.2394L30.679 23.0201ZM30.679 23.0201L30.679 23.0201L34.4873 24.2437C34.9507 22.8012 34.5594 21.2207 33.4765 20.1611L30.679 23.0201ZM30.679 23.0201L28.9543 28.3883L32.7625 29.6119L34.4873 24.2437L30.679 23.0201ZM28.7577 31.0001H30.8584V27.0001H28.7577V31.0001ZM28.7749 22.4083L26.8536 28.3883L30.6618 29.6119L32.5832 23.6319L28.7749 22.4083ZM27.8925 26.0987L31.3321 24.9105L30.026 21.1297L26.5864 22.318L27.8925 26.0987ZM23.2694 18.8414L25.3491 24.8614L29.1298 23.5553L27.0502 17.5353L23.2694 18.8414Z",fill:"white",mask:"url(#path-10-inside-1_1_174)"}))}function D(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function M(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function k(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#9747FF"}),i.createElement("rect",{width:"32",height:"32",transform:"translate(12 12)",fill:"#9747FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"white"}))}i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M109.821 18.253A3 3 0 00106.916 16H11.87a3 3 0 00-2.906 3.747l25.215 98.001A3 3 0 0037.084 120h95.046a3 3 0 002.906-3.748l-25.215-98z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M34.179 18.253A3 3 0 0137.084 16h95.046a3 3 0 012.906 3.747l-25.215 98.001a3 3 0 01-2.905 2.252H11.87a3 3 0 01-2.906-3.748l25.215-98z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M68.787 118.279c1.324 2.295 5.102 2.295 6.426 0l56.403-97.77c1.195-2.072-.542-4.509-3.213-4.509H15.597c-2.67 0-4.408 2.437-3.213 4.508l56.403 97.771z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},l)=>{let c=I(),d=A(e),u=(0,s.k)().figjam_track_stroke_color?c:d;return i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M68.787 17.721c1.324-2.295 5.102-2.295 6.426 0l56.403 97.771c1.195 2.071-.542 4.508-3.213 4.508H15.597c-2.67 0-4.408-2.437-3.213-4.508l56.403-97.77z",fill:e,className:g.cq,ref:l,...N(e,n)}),i.createElement("path",{d:"M130.75 115.992L130.75 115.992C131.134 116.658 131.057 117.364 130.645 117.942C130.223 118.534 129.432 119 128.403 119H15.5971C14.5693 119 13.7776 118.534 13.3555 117.942C12.9431 117.364 12.8659 116.658 13.2503 115.992L13.2503 115.992L69.6533 18.221C70.0992 17.4482 70.9999 17 72.0001 17C73.0004 17 73.9011 17.4482 74.347 18.221L130.75 115.992Z",stroke:u,...C(o.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,n)}))}),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},l)=>{let c=I(),d=A(e),u=(0,s.k)().figjam_track_stroke_color?c:d;return i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("circle",{cx:"72",cy:"72",r:"64",fill:e,className:g.cq,ref:l,...N(e,n)}),i.createElement("circle",{cx:"72",cy:"72",r:"62",fill:"none",stroke:u,...C(o.NLJ.SHAPE_WHITEBOARD_ELLIPSE,n)}))}),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("rect",{x:"8",y:"20",width:"128",height:"104",rx:"40",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("rect",{x:"16",y:"32",width:"112",height:"80",rx:"40",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("rect",{width:"79.374",height:"79.374",x:"15.874",y:"71.874",rx:"3.175",transform:"rotate(-45 15.874 71.874)",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},l)=>{let c=I(),d=A(e),u=(0,s.k)().figjam_track_stroke_color?c:d;return i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("rect",{x:"16",y:"16",width:"112",height:"112",rx:"3.23077",fill:e,className:g.cq,ref:l,...N(e,n)}),i.createElement("rect",{x:"16",y:"16",width:"110",height:"110",fill:"none",rx:"3.23077",stroke:u,...C(o.NLJ.SHAPE_WHITEBOARD_SQUARE,n)}))}),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:L(n)?"M16.1763 30.5665C16.1763 28.9381 17.4061 27.1478 20.2318 25.336C23.0129 23.5529 27.1015 21.9106 32.2405 20.517C42.5046 17.7335 56.7388 16 72.5 16C88.2612 16 102.495 17.7335 112.759 20.517C117.898 21.9106 121.987 23.5529 124.768 25.336C127.594 27.1478 128.824 28.9381 128.824 30.5665C128.824 32.1949 127.594 33.9852 124.768 35.7969C121.987 37.5801 117.898 39.2224 112.759 40.616C102.495 43.3995 88.2612 45.1329 72.5 45.1329C56.7388 45.1329 42.5046 43.3995 32.2405 40.616C27.1015 39.2224 23.0129 37.5801 20.2318 35.7969C17.4061 33.9852 16.1763 32.1949 16.1763 30.5665Z M125.816 37.4319C126.996 36.6756 128.019 35.8576 128.824 34.9796V113.434C128.824 115.062 127.594 116.852 124.768 118.664C121.987 120.447 117.898 122.089 112.759 123.483C102.495 126.267 88.2612 128 72.5 128C56.7388 128 42.5046 126.267 32.2405 123.483C27.1015 122.089 23.0129 120.447 20.2318 118.664C17.4061 116.852 16.1763 115.062 16.1763 113.434V34.9796C16.981 35.8576 18.0038 36.6756 19.1835 37.4319C22.201 39.3666 26.5029 41.0724 31.7322 42.4905C42.2047 45.3305 56.6179 47.0751 72.5 47.0751C88.3821 47.0751 102.795 45.3305 113.268 42.4905C118.497 41.0724 122.799 39.3666 125.816 37.4319Z":"M15.5289 30.5664C15.5289 21.9851 41.0355 15.0288 72.5 15.0288C103.964 15.0288 129.471 21.9851 129.471 30.5664V113.433C129.471 122.015 103.964 128.971 72.5 128.971C41.0355 128.971 15.5289 122.015 15.5289 113.433V30.5664Z",fill:e,className:g.cq,ref:o}),i.createElement("path",{d:"M129.471 30.5664C129.471 39.1477 103.964 46.104 72.5 46.104C41.0355 46.104 15.5289 39.1477 15.5289 30.5664M129.471 30.5664C129.471 21.9851 103.964 15.0288 72.5 15.0288C41.0355 15.0288 15.5289 21.9851 15.5289 30.5664M129.471 30.5664V113.433C129.471 122.015 103.964 128.971 72.5 128.971C41.0355 128.971 15.5289 122.015 15.5289 113.433V30.5664",...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:L(n)?"M22.1503 121H117.979C117.215 120.301 116.503 119.415 115.844 118.393C114.15 115.767 112.657 112.023 111.417 107.473C108.931 98.3601 107.405 85.8189 107.405 72C107.405 58.1811 108.931 45.6399 111.417 36.5273C112.657 31.9771 114.15 28.2333 115.844 25.6072C116.503 24.5851 117.215 23.6986 117.979 23H22.1503C20.7231 23 19.1567 24.0712 17.5724 26.5282C16.0127 28.9471 14.5759 32.5037 13.3566 36.9744C10.9214 45.9038 9.40463 58.2875 9.40463 72C9.40463 85.7125 10.9214 98.0962 13.3566 107.026C14.5759 111.496 16.0127 115.053 17.5724 117.472C19.1567 119.929 20.7231 121 22.1503 121Z M117.272 26.5282C118.856 24.0712 120.423 23 121.85 23C123.277 23 124.843 24.0712 126.428 26.5282C127.987 28.9471 129.424 32.5037 130.643 36.9744C133.079 45.9038 134.595 58.2875 134.595 72C134.595 85.7125 133.079 98.0962 130.643 107.026C129.424 111.496 127.987 115.053 126.428 117.472C124.843 119.929 123.277 121 121.85 121C120.423 121 118.856 119.929 117.272 117.472C115.712 115.053 114.275 111.496 113.056 107.026C110.621 98.0962 109.104 85.7125 109.104 72C109.104 58.2875 110.621 45.9038 113.056 36.9744C114.275 32.5037 115.712 28.9471 117.272 26.5282Z":"M122.229 22.1504C129.738 22.1504 135.824 44.4687 135.824 72.0001C135.824 99.5315 129.738 121.85 122.229 121.85H22.5295C15.0209 121.85 8.93413 99.5315 8.93413 72.0001C8.93413 44.4687 15.0209 22.1504 22.5295 22.1504H122.229Z",fill:e,className:g.cq,ref:o}),i.createElement("path",{d:"M121.85 121.85C114.341 121.85 108.254 99.5315 108.254 72.0001C108.254 44.4687 114.341 22.1504 121.85 22.1504M121.85 121.85C129.358 121.85 135.445 99.5315 135.445 72.0001C135.445 44.4687 129.358 22.1504 121.85 22.1504M121.85 121.85H22.1503C14.6417 121.85 8.55492 99.5315 8.55492 72.0001C8.55492 44.4687 14.6417 22.1504 22.1503 22.1504H121.85",...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:L(n)?"M10.3815 22.7052C10.3815 21.211 11.5925 20 13.0867 20H103.561V46.1503C103.561 48.3081 105.31 50.0578 107.468 50.0578H133.618V121.295C133.618 122.789 132.407 124 130.913 124H13.0867C11.5925 124 10.3815 122.789 10.3815 121.295V22.7052Z M132.343 48.2543L105.364 21.2752V46.1503C105.364 47.3121 106.306 48.2543 107.468 48.2543H132.343Z":"M9.47974 121.295V22.7051C9.47974 20.7128 11.0944 19.0981 13.0867 19.0981H104.462L134.52 49.1559V121.295C134.52 123.287 132.905 124.902 130.913 124.902H13.0867C11.0944 124.902 9.47974 123.287 9.47974 121.295Z",fill:e,className:g.cq,ref:o}),i.createElement("path",{d:"M104.462 19.0981H13.0867C11.0944 19.0981 9.47974 20.7128 9.47974 22.7051V121.295C9.47974 123.287 11.0944 124.902 13.0867 124.902H130.913C132.905 124.902 134.52 123.287 134.52 121.295V49.1559M104.462 19.0981L134.52 49.1559M104.462 19.0981V46.1502C104.462 47.81 105.808 49.1559 107.468 49.1559H134.52",...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:L(n)?"M20.2185 21.6806C20.6341 20.6642 21.6236 20 22.7221 20H66.5728C67.6712 20 68.6608 20.6642 69.0763 21.6806L78.4719 44.6474H10.823L20.2185 21.6806Z M10.3815 46.4509H130.913C132.408 46.4509 133.619 47.6618 133.619 49.1561V121.295C133.619 122.789 132.408 124 130.913 124H13.0867C11.5925 124 10.3815 122.789 10.3815 121.295V46.4509Z":"M9.4798 121.295V45.549L19.3838 21.3393C19.9381 19.9836 21.2576 19.0981 22.7221 19.0981H66.5728C68.0372 19.0981 69.3567 19.9836 69.911 21.3393L79.815 45.549H130.913C132.906 45.549 134.52 47.1637 134.52 49.1559V121.295C134.52 123.287 132.906 124.902 130.913 124.902H13.0867C11.0945 124.902 9.4798 123.287 9.4798 121.295Z",fill:e,className:g.cq,ref:o}),i.createElement("path",{d:"M9.4798 45.549V121.295C9.4798 123.287 11.0945 124.902 13.0867 124.902H130.913C132.906 124.902 134.52 123.287 134.52 121.295V49.1559C134.52 47.1637 132.906 45.549 130.913 45.549H79.815M9.4798 45.549L19.3838 21.3393C19.9381 19.9836 21.2576 19.0981 22.7221 19.0981H66.5728C68.0372 19.0981 69.3567 19.9836 69.911 21.3393L79.815 45.549M9.4798 45.549H79.815",...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M132.825 31H11.1751C9.11354 31 7.59918 32.9715 8.0945 35.0106L27.3025 110.463C27.653 111.906 28.924 112.92 30.3831 112.92H113.617C115.076 112.92 116.347 111.906 116.698 110.463L135.906 35.0106C136.401 32.9715 134.886 31 132.825 31Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M93.2603 48.8289L74.8382 18.1385C73.7284 16.4493 71.2511 16.4493 70.1413 18.1385L51.7195 48.8289C51.3354 49.4134 50.7472 49.8337 50.0698 50.0076L14.5248 57.5829C12.5231 58.0968 11.7423 60.523 13.0688 62.1078L37.2107 88.5999C37.6704 89.1492 37.903 89.8531 37.8609 90.5682L34.3002 125.894C34.1806 127.929 36.2 129.41 38.1052 128.685L71.4895 114.399C72.1339 114.154 72.8457 114.154 73.49 114.399L106.874 128.685C108.779 129.41 110.799 127.929 110.679 125.894L107.118 90.5682C107.077 89.8531 107.309 89.1492 107.769 88.5999L131.911 62.1078C133.237 60.523 132.457 58.0968 130.455 57.5829L94.9096 50.0076C94.2325 49.8337 93.6443 49.4134 93.2603 48.8289Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M120.45 27H23.55C22.1417 27 21 28.1454 21 29.5583V86.4924C21 87.408 21.4877 88.2538 22.2789 88.7102L70.7289 116.66C71.5159 117.113 72.4841 117.114 73.2711 116.66L121.721 88.7102C122.512 88.2538 123 87.408 123 86.4924V29.5583C123 28.1454 121.858 27 120.45 27Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M8.24869 71.3645L24.1079 34.3397C24.6034 33.1629 25.7559 32.3976 27.0328 32.3976H116.967C118.244 32.3976 119.397 33.1629 119.892 34.3397L135.751 71.3645C136.083 72.152 136.083 73.04 135.751 73.8275L119.892 110.852C119.397 112.029 118.244 112.794 116.967 112.794H27.0328C25.7559 112.794 24.6034 112.029 24.1079 110.852L8.24869 73.8275C7.9171 73.04 7.9171 72.152 8.24869 71.3645Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M129.24 59.4647L74.475 16.7477C73.1969 15.7508 71.4046 15.7508 70.1265 16.7477L15.3612 59.4647C14.1752 60.3897 13.7044 61.9638 14.1876 63.388L34.9562 124.601C35.4429 126.035 36.7893 127 38.304 127H106.298C107.812 127 109.159 126.035 109.645 124.601L130.414 63.388C130.897 61.9638 130.426 60.3897 129.24 59.4647Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M94.8699 16H49.1301C48.3125 16 47.5284 16.3248 46.9503 16.9029L16.9029 46.9503C16.3248 47.5284 16 48.3125 16 49.1301V94.8699C16 95.6875 16.3248 96.4716 16.9029 97.0497L46.9503 127.097C47.5284 127.675 48.3125 128 49.1301 128H94.8699C95.6875 128 96.4716 127.675 97.0497 127.097L127.097 97.0497C127.675 96.4716 128 95.6875 128 94.8699V49.1301C128 48.3125 127.675 47.5284 127.097 46.9503L97.0497 16.9029C96.4716 16.3248 95.6875 16 94.8699 16Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M47.1111 47.1099V18.8718C47.1111 17.2857 48.3969 16 49.9829 16H94.0171C95.6031 16 96.8889 17.2857 96.8889 18.8718V46.632C96.8889 46.6325 96.8896 46.6325 96.8901 46.6325H125.128C126.714 46.6325 128 47.9182 128 49.5043V94.0171C128 95.6031 126.714 96.8889 125.128 96.8889H96.8894C96.8889 96.8889 96.8889 96.8896 96.8889 96.8901V125.128C96.8889 126.714 95.6031 128 94.0171 128H49.9829C48.3969 128 47.1111 126.714 47.1111 125.128V96.8894C47.1111 96.8889 47.1104 96.8889 47.1099 96.8889H18.8718C17.2857 96.8889 16 95.6031 16 94.0171V49.9829C16 48.3969 17.2857 47.1111 18.8718 47.1111H47.1106C47.1111 47.1111 47.1111 47.1104 47.1111 47.1099Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:L(n)?"M8.28613 31.5551C8.28613 30.119 9.45004 28.9551 10.8862 28.9551H16.664V115.045H10.8862C9.45004 115.045 8.28613 113.881 8.28613 112.445V31.5551Z M18.3974 115.045V28.9551H127.021V115.045H18.3974Z M128.754 115.045V28.9551H134.532C135.968 28.9551 137.132 30.119 137.132 31.5551V112.445C137.132 113.881 135.968 115.045 134.532 115.045H128.754Z":"M7.68134 31.5551C7.68134 29.6403 9.23327 28.0884 11.148 28.0884H17.7926H128.15H134.794C136.709 28.0884 138.261 29.6403 138.261 31.5551V112.445C138.261 114.36 136.709 115.912 134.794 115.912H128.15H17.7926H11.148C9.23327 115.912 7.68134 114.36 7.68134 112.445V31.5551Z",fill:e,className:g.cq,ref:o}),i.createElement("path",{d:"M17.7926 28.0884H11.148C9.23327 28.0884 7.68134 29.6403 7.68134 31.5551V112.445C7.68134 114.36 9.23327 115.912 11.148 115.912H17.7926M17.7926 28.0884V115.912M17.7926 28.0884H128.15M17.7926 115.912H128.15M128.15 28.0884V115.912M128.15 28.0884H134.794C136.709 28.0884 138.261 29.6403 138.261 31.5551V112.445C138.261 114.36 136.709 115.912 134.794 115.912H128.15",...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M3 31.9044C3 28.2578 6.22596 25.4544 9.83687 25.963L136.837 43.8517C139.798 44.2688 142 46.8027 142 49.793V112C142 115.314 139.314 118 136 118H9C5.68629 118 3 115.314 3 112V31.9044Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M27.8014 70.724L8.31687 37.526C7.36024 35.695 8.68491 33.5 10.7466 33.5H112.245C113.225 33.5 114.13 34.0241 114.62 34.8749L135.632 70.6249C136.122 71.4758 136.122 72.5242 135.632 73.3751L114.62 109.125C114.13 109.976 113.225 110.5 112.245 110.5H10.7466C8.68491 110.5 7.36024 108.305 8.31687 106.474L27.8014 73.276C28.219 72.4768 28.219 71.5232 27.8014 70.724Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M33.129 70.5542L11.8756 36.4458C10.776 34.4464 12.2225 32 14.5043 32H106.561C107.609 32 108.582 32.5478 109.126 33.4447L132.065 70.4447C132.645 71.4006 132.645 72.5994 132.065 73.5553L109.126 110.555C108.582 111.452 107.609 112 106.561 112H14.5043C12.2225 112 10.776 109.554 11.8756 107.554L33.129 73.4458C33.6241 72.5455 33.6241 71.4545 33.129 70.5542Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M8 24.41C8 23.0789 9.07886 22 10.41 22H133.59C134.921 22 136 23.0789 136 24.4095V109.272C136 110.813 134.515 111.919 133.037 111.477L117.877 106.938C101.942 102.167 84.7341 104.324 70.4706 112.88C55.667 121.76 37.6577 123.527 21.4094 117.693L9.33252 113.356C8.53306 113.069 8 112.312 8 111.462V24.41Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:L(n)?"M8.00262 23.8137C8.00262 22.5661 9.01375 21.5549 10.2614 21.5549H124.704C125.951 21.5549 126.962 22.5661 126.962 23.8137V28.0802H18.2924C16.2163 28.0802 14.5278 29.7638 14.5278 31.8442V105.774L9.51934 104.138L9.49978 104.132C8.61172 103.869 8.00262 103.052 8.00262 102.126V23.8137Z M18.2924 29.586H133.739C134.986 29.586 135.997 30.5972 135.997 31.8442V111.379C135.997 112.823 134.605 113.86 133.221 113.445L119.012 109.191C104.078 104.72 87.9501 106.742 74.5822 114.761C60.7079 123.083 43.8294 124.739 28.6012 119.271L17.2825 115.207C16.5333 114.937 16.0337 114.227 16.0337 113.432V31.8442C16.0337 30.5967 17.0466 29.586 18.2924 29.586Z":"M7.24973 23.8136C7.24973 22.1502 8.59794 20.802 10.2614 20.802H124.704C126.367 20.802 127.715 22.1502 127.715 23.8136V28.833H133.739C135.402 28.833 136.75 30.1813 136.75 31.8442V111.379C136.75 113.328 134.872 114.726 133.005 114.166L118.796 109.912C104.064 105.502 88.1559 107.496 74.9695 115.406C60.9016 123.845 43.7874 125.524 28.3468 119.979L17.028 115.915C15.98 115.539 15.2808 114.545 15.2808 113.432V106.812L9.28559 104.854C8.07793 104.495 7.24973 103.386 7.24973 102.126V23.8136Z",fill:e,className:g.cq,ref:o}),i.createElement("path",{d:"M127.715 28.833V23.8136C127.715 22.1502 126.367 20.802 124.704 20.802H10.2614C8.59794 20.802 7.24973 22.1502 7.24973 23.8136V102.126C7.24973 103.386 8.07793 104.495 9.28559 104.854L15.2808 106.812M127.715 28.833H18.2924C16.6315 28.833 15.2808 30.1803 15.2808 31.8442V106.812M127.715 28.833H133.739C135.402 28.833 136.75 30.1813 136.75 31.8442V111.379C136.75 113.328 134.872 114.726 133.005 114.166L118.796 109.912C104.064 105.502 88.1559 107.496 74.9695 115.406C60.9016 123.845 43.7874 125.524 28.3468 119.979L17.028 115.915C15.98 115.539 15.2808 114.545 15.2808 113.432V106.812",...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M8.94141 70.0367L59.3021 28.0736C60.95 26.7503 63.3967 27.9234 63.3967 30.037V50.1764C63.3967 50.1765 63.3968 50.1767 63.3969 50.1769V50.1769C63.3971 50.177 63.3973 50.1771 63.3974 50.1771H133.482C134.873 50.1771 136 51.3044 136 52.6951V91.3049C136 92.6956 134.873 93.823 133.482 93.823H63.3974C63.3973 93.823 63.3971 93.8231 63.3969 93.8232V93.8232C63.3968 93.8233 63.3967 93.8235 63.3967 93.8237V113.963C63.3967 116.077 60.95 117.25 59.3021 115.926L8.9414 73.9634C7.6862 72.9554 7.6862 71.0446 8.94141 70.0367Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M12.5068 70.5597C11.8311 71.4272 11.8311 72.5728 12.5068 73.4403L47.1369 117.894C48.7381 119.95 52.3844 118.949 52.3844 116.454V99.4781H129C130.657 99.4781 132 98.135 132 96.4781V48.7638C132 47.107 130.657 45.7638 129 45.7638H52.3844V27.5458C52.3844 25.0508 48.7381 24.05 47.1369 26.1055L12.5068 70.5597Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M135.059 73.9634L84.6979 115.926C83.05 117.25 80.6033 116.077 80.6033 113.963V93.8237C80.6033 93.8235 80.6032 93.8233 80.6031 93.8232V93.8232C80.6029 93.8231 80.6028 93.823 80.6026 93.823H10.518C9.12736 93.823 8 92.6956 8 91.3049V52.6951C8 51.3044 9.12736 50.1771 10.518 50.1771H80.6026C80.6027 50.1771 80.6029 50.177 80.6031 50.1769V50.1769C80.6032 50.1767 80.6033 50.1765 80.6033 50.1764V30.037C80.6033 27.9234 83.05 26.7503 84.6979 28.0736L135.059 70.0367C136.314 71.0446 136.314 72.9554 135.059 73.9634Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M131.493 70.5597C132.169 71.4272 132.169 72.5728 131.493 73.4403L96.8631 117.894C95.2619 119.95 91.6156 118.949 91.6156 116.454V99.4781H15C13.3432 99.4781 12 98.135 12 96.4781V48.7638C12 47.107 13.3432 45.7638 15 45.7638H91.6156V27.5458C91.6156 25.0508 95.2619 24.05 96.8631 26.1055L131.493 70.5597Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:L(n)?"M24.029 72C24.029 59.2726 28.9314 47.6903 36.951 39.0383L70.4029 72.4902L37.4306 105.472C29.1273 96.7676 24.029 84.9792 24.029 72Z M72.5239 70.3686L39.0571 36.9017C47.7613 28.5984 59.5497 23.5 72.529 23.5C85.5032 23.5 97.2876 28.5945 105.991 36.8921L72.5239 70.3686Z M74.6452 72.4899L108.098 39.0281C116.123 47.6811 121.029 59.2676 121.029 72C121.029 84.9793 115.931 96.7677 107.627 105.472L74.6452 72.4899Z M72.5242 74.6115L105.491 107.578C96.8387 115.598 85.2564 120.5 72.529 120.5C59.8015 120.5 48.2191 115.598 39.5671 107.578L72.5242 74.6115Z":"M72.529 122C100.143 122 122.529 99.6142 122.529 72C122.529 58.3137 117.03 45.9117 108.121 36.883C99.0547 27.6948 86.4569 22 72.529 22C44.9148 22 22.529 44.3858 22.529 72C22.529 99.6142 44.9148 122 72.529 122Z",fill:e,className:g.cq,ref:o}),i.createElement("path",{d:"M108.121 36.883C99.0547 27.6948 86.4569 22 72.529 22C44.9148 22 22.529 44.3858 22.529 72C22.529 99.6142 44.9148 122 72.529 122C100.143 122 122.529 99.6142 122.529 72C122.529 58.3137 117.03 45.9117 108.121 36.883ZM108.121 36.883L72.524 72.49M108.121 36.883L108.129 36.875M36.929 36.895L72.524 72.49M72.524 72.49L107.634 107.6M72.524 72.49L37.424 107.6",...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:L(n)?"M71.058 70.5H24.0807C24.8582 44.9063 45.4643 24.3002 71.058 23.5227V70.5Z M74.058 70.5V23.5227C99.6516 24.3002 120.258 44.9063 121.035 70.5H74.058Z M74.058 73.5H121.035C120.258 99.0936 99.6516 119.7 74.058 120.477V73.5Z M71.058 73.5V120.477C45.4643 119.7 24.8582 99.0936 24.0807 73.5H71.058Z":"M122.558 72C122.558 99.6142 100.172 122 72.558 122C44.9437 122 22.558 99.6142 22.558 72C22.558 44.3858 44.9437 22 72.558 22C100.172 22 122.558 44.3858 122.558 72Z",fill:e,className:g.cq,ref:o}),i.createElement("path",{d:"M122.558 72C122.558 99.6142 100.172 122 72.558 122M122.558 72C122.558 44.3858 100.172 22 72.558 22M122.558 72H72.558M72.558 122C44.9437 122 22.558 99.6142 22.558 72M72.558 122V72M22.558 72C22.558 44.3858 44.9437 22 72.558 22M22.558 72H72.558M72.558 22V72",...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M8 43.5V84.2344C8 98.0415 19.1929 109.234 33 109.234H33.4992C33.4994 109.234 33.4996 109.235 33.4997 109.235V109.235C33.4999 109.235 33.5 109.235 33.5 109.235V121.505C33.5 124.734 37.147 126.624 39.7975 124.769L61.9993 109.235V109.235C62.0001 109.235 62.001 109.234 62.002 109.234H111C124.807 109.234 136 98.0415 136 84.2344V43.5C136 29.6929 124.807 18.5 111 18.5H33C19.1929 18.5 8 29.6929 8 43.5Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M128 50V80.5754C128 92.7257 118.15 102.575 106 102.575H60.4126V102.575C60.4117 102.575 60.411 102.576 60.4103 102.577L42.151 115.27C39.9715 117.123 36.972 115.234 36.972 112.007L36.9715 102.576C36.9715 102.576 36.9717 102.576 36.9718 102.575C36.9718 102.575 36.9719 102.575 36.9718 102.575H26.486C20.6947 102.575 16 97.8807 16 92.0894V50C16 37.8497 25.8497 28 38 28H106C118.15 28 128 37.8497 128 50Z",fill:e,className:g.cq,ref:o,...N(e,n)}))),i.forwardRef(({color:e=f,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(E,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:L(n)?"M8.00348 31.8228C8.00348 30.3962 9.15968 29.24 10.5863 29.24H15.465V36.7015H8.00348V31.8228Z M17.1868 36.7015V29.24H133.414C134.84 29.24 135.997 30.3962 135.997 31.8228V36.7015H17.1868Z M17.1868 38.4233H135.997V112.177C135.997 113.604 134.84 114.76 133.414 114.76H17.1868V38.4233Z M15.465 38.4233V114.76H10.5863C9.15968 114.76 8.00348 113.604 8.00348 112.177V38.4233H15.465Z":"M7.64255 31.8229C7.64255 29.9208 9.1842 28.3792 11.0863 28.3792H16.8259H133.914C135.816 28.3792 137.357 29.9208 137.357 31.8229V37.5625V112.177C137.357 114.079 135.816 115.621 133.914 115.621H16.8259H11.0863C9.1842 115.621 7.64255 114.079 7.64255 112.177V37.5625V31.8229Z",fill:e,className:g.cq,ref:o}),i.createElement("path",{d:"M7.64255 37.5625V31.8229C7.64255 29.9208 9.1842 28.3792 11.0863 28.3792H16.8259M7.64255 37.5625V112.177C7.64255 114.079 9.1842 115.621 11.0863 115.621H16.8259M7.64255 37.5625H16.8259M16.8259 115.621H133.914C135.816 115.621 137.357 114.079 137.357 112.177V37.5625M16.8259 115.621V37.5625M137.357 37.5625V31.8229C137.357 29.9208 135.816 28.3792 133.914 28.3792H16.8259M137.357 37.5625H16.8259M16.8259 28.3792V37.5625",...N(e,n)})))},236515:(e,r,n)=>{n.d(r,{J:()=>l});var i=n(848318),a=n(536384),o=n.n(a),s=n(731560);function l({className:e,disabled:r,isDragging:n,children:a,"aria-hidden":l}){return i.createElement("div",{"aria-disabled":r,"aria-hidden":l,className:o()(s.F0,{[e||""]:!!e,[s.FK]:r,[s.Bx]:n,[s.ll]:r}),"data-fullscreen-intercept":!0},a)}},365068:(e,r,n)=>{n.d(r,{H1:()=>c,HY:()=>a,NZ:()=>d,b:()=>l,fK:()=>o,tV:()=>s});var i=n(741419);let a="delightful-toolbar",o="delightful_toolbar",s="action_open_universal_insert_collage_modal",l="delightful-toolbar-universal-insert-button-icon",c=14,d="delightful-toolbar-stamp-button";i.NLJ.VECTOR_PENCIL},244932:(e,r,n)=>{n.d(r,{BG:()=>a});var i=n(741419);function a(e){return(e===i.NLJ.VECTOR_PENCIL||e===i.NLJ.ERASER||e===i.NLJ.HIGHLIGHTER||e===i.NLJ.WASHI_TAPE)&&(e===i.NLJ.VECTOR_PENCIL||e===i.NLJ.HIGHLIGHTER)}n(831932)},558773:(e,r,n)=>{n.d(r,{Mm:()=>o,XD:()=>s,sF:()=>c,vO:()=>l});var i=n(848318);let a="#B3B3B3",o=i.forwardRef(({color:e=a,toolbarIconScale:r=1},n)=>i.createElement("svg",{width:31*r,height:33*r,viewBox:"0 0 31 33",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.3484 1.24428C20.5997 0.752516 21.2022 0.557643 21.6939 0.809017L29.4918 4.79506C30.3786 5.24836 30.5855 6.42412 29.9068 7.15295L23.8487 13.6581C23.4723 14.0623 22.8395 14.0848 22.4354 13.7084C22.0312 13.3321 22.0087 12.6993 22.3851 12.2951L26.7031 7.65837C23.3565 7.93 21.1523 9.25901 19.5061 11.1229C17.5967 13.2849 16.3954 16.2071 15.1574 19.3441C15.1068 19.4724 15.056 19.6011 15.0052 19.7301C13.8426 22.6811 12.6142 25.7988 10.6634 28.215C8.56933 30.8086 5.65676 32.5872 1.2261 32.7215C0.674068 32.7382 0.212997 32.3043 0.196269 31.7522C0.17954 31.2002 0.613489 30.7391 1.16552 30.7224C4.98486 30.6067 7.36139 29.1209 9.10725 26.9586C10.8608 24.7867 11.9886 21.9273 13.1934 18.8727C13.2278 18.7852 13.2624 18.6976 13.297 18.6099C14.5122 15.5307 15.8266 12.2679 18.0071 9.799C20.0405 7.49663 22.7904 5.91827 26.7668 5.64826L20.7836 2.58984C20.2918 2.33847 20.097 1.73604 20.3484 1.24428Z",fill:e,ref:n}))),s=i.forwardRef(({color:e=a,toolbarIconScale:r=1},n)=>i.createElement("svg",{width:31*r,height:34*r,viewBox:"0 0 32 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.7929 1.70711C22.4024 1.31658 22.4024 0.683417 22.7929 0.292893C23.1834 -0.0976311 23.8166 -0.0976311 24.2071 0.292893L30.2071 6.29289C30.5976 6.68342 30.5976 7.31658 30.2071 7.70711L24.2071 13.7071C23.8166 14.0976 23.1834 14.0976 22.7929 13.7071C22.4024 13.3166 22.4024 12.6834 22.7929 12.2929L27.0858 8H20.6834C17.922 8 15.6834 10.2386 15.6834 13V27C15.6834 30.866 12.5494 34 8.68341 34H1.5C0.947715 34 0.5 33.5523 0.5 33C0.5 32.4477 0.947715 32 1.5 32H8.68341C11.4448 32 13.6834 29.7614 13.6834 27V13C13.6834 9.13401 16.8174 6 20.6834 6H27.0858L22.7929 1.70711Z",fill:e,ref:n}))),l=i.forwardRef(({color:e=a,toolbarIconScale:r=1},n)=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:28*r,height:30*r,viewBox:"0 0 28 30",fill:"none"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.8987 2.17466C17.3465 2.18604 16.8897 1.74765 16.8783 1.19548C16.8669 0.643314 17.3053 0.186467 17.8575 0.175085L26.341 0.000216699C26.8931 -0.011165 27.35 0.427228 27.3614 0.979396L27.5362 9.46288C27.5476 10.015 27.1092 10.4719 26.5571 10.4833C26.0049 10.4947 25.548 10.0563 25.5367 9.50409L25.4197 3.82765L1.73377 29.4084C1.35854 29.8137 0.725841 29.838 0.320597 29.4628C-0.0846483 29.0875 -0.108983 28.4548 0.266244 28.0496L24.3476 2.04173L17.8987 2.17466Z",fill:e,ref:n}))),c=i.forwardRef(({color:e=a,toolbarIconScale:r=1},n)=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:28*r,height:30*r,viewBox:"-1 -1 31 33",fill:"none"},i.createElement("line",{x1:"1",y1:"30",x2:"28",y2:"1",stroke:e,strokeWidth:2,strokeLinecap:"round",ref:n})));i.forwardRef(({color:e=a,toolbarIconScale:r=1},n)=>i.createElement("svg",{width:28*r,height:24*r,viewBox:"0 0 17 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M1.5 10.9999C1.5 11.2761 1.27614 11.4999 1 11.4999C0.723858 11.4999 0.5 11.2761 0.5 10.9999C0.5 7.14238 3.62715 4.01523 7.48468 4.01523H15.2961L12.1458 0.85288C11.9509 0.657247 11.9515 0.340665 12.1471 0.145775C12.3427 -0.0491153 12.6593 -0.0485136 12.8542 0.147119L16.8542 4.16236C16.9478 4.25631 17.0002 4.38359 17 4.5162C16.9997 4.64881 16.9468 4.77589 16.8529 4.86948L12.8529 8.85408C12.6572 9.04897 12.3406 9.04836 12.1458 8.85272C11.9509 8.65708 11.9515 8.3405 12.1471 8.14561L15.2896 5.01523H7.48468C4.17943 5.01523 1.5 7.69466 1.5 10.9999Z",stroke:e,strokeWidth:1,fill:"none",ref:n})))},519675:(e,r,n)=>{var i=n(848318),a=n(741419);n(442313),n(741485),n(532920),n(365068),i.createContext({hoveredShape:null,onMouseEnter:()=>{},onMouseLeave:()=>{},draggedShape:null,shouldDragCancel:!1,onDragStart:()=>{},onDrag:()=>{},onDragEnd:()=>{}}),Array.from(new Map([["SQUARE",a.NLJ.SHAPE_WHITEBOARD_SQUARE],["ELLIPSE",a.NLJ.SHAPE_WHITEBOARD_ELLIPSE],["ROUNDED_RECTANGLE",a.NLJ.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE],["DIAMOND",a.NLJ.SHAPE_WHITEBOARD_DIAMOND],["TRIANGLE_UP",a.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP],["TRIANGLE_DOWN",a.NLJ.SHAPE_WHITEBOARD_TRIANGLE_DOWN],["PARALLELOGRAM_RIGHT",a.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT],["PARALLELOGRAM_LEFT",a.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT],["ENG_DATABASE",a.NLJ.SHAPE_WHITEBOARD_ENG_DATABASE],["ENG_QUEUE",a.NLJ.SHAPE_WHITEBOARD_ENG_QUEUE],["ENG_FILE",a.NLJ.SHAPE_WHITEBOARD_ENG_FILE],["ENG_FOLDER",a.NLJ.SHAPE_WHITEBOARD_ENG_FOLDER],["TRAPEZOID",a.NLJ.SHAPE_WHITEBOARD_TRAPEZOID],["STAR",a.NLJ.SHAPE_WHITEBOARD_STAR],["SHIELD",a.NLJ.SHAPE_WHITEBOARD_SHIELD],["HEXAGON",a.NLJ.SHAPE_WHITEBOARD_HEXAGON],["PENTAGON",a.NLJ.SHAPE_WHITEBOARD_PENTAGON],["OCTAGON",a.NLJ.SHAPE_WHITEBOARD_OCTAGON],["PLUS",a.NLJ.SHAPE_WHITEBOARD_PLUS],["PREDEFINED_PROCESS",a.NLJ.SHAPE_WHITEBOARD_PREDEFINED_PROCESS],["MANUAL_INPUT",a.NLJ.SHAPE_WHITEBOARD_MANUAL_INPUT],["CHEVRON",a.NLJ.SHAPE_WHITEBOARD_CHEVRON],["DOCUMENT_SINGLE",a.NLJ.SHAPE_WHITEBOARD_DOCUMENT_SINGLE],["DOCUMENT_MULTIPLE",a.NLJ.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE],["ARROW_LEFT",a.NLJ.SHAPE_WHITEBOARD_ARROW_LEFT],["ARROW_RIGHT",a.NLJ.SHAPE_WHITEBOARD_ARROW_RIGHT],["SUMMING_JUNCTION",a.NLJ.SHAPE_WHITEBOARD_SUMMING_JUNCTION],["OR",a.NLJ.SHAPE_WHITEBOARD_OR],["SPEECH_BUBBLE",a.NLJ.SHAPE_WHITEBOARD_SPEECH_BUBBLE],["INTERNAL_STORAGE",a.NLJ.SHAPE_WHITEBOARD_INTERNAL_STORAGE],["MINDMAP_TREE_NUCLEUS",a.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS]]),([e,r])=>[r,e]),a.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,a.NLJ.SHAPE_WHITEBOARD_ELLIPSE,a.NLJ.SHAPE_WHITEBOARD_SQUARE},146493:(e,r,n)=>{n.d(r,{X:()=>l}),n(848318),n(716544),n(831932);var i=n(832802),a=n(87631),o=n(230556),s=n(365068);function l({source:e,openedViaHover:r=!1,offsetFromToolbelt:n=s.H1}){let l=(0,i.Tc)(s.NZ),c=(0,i.Tc)(s.HY),d=l||c;if(d){let i=d.getBoundingClientRect(),s=i.x+i.width/2,l=i.y-(o.l+2)-n;a.CB.handleShortcutPressWithType({viewportX:s,viewportY:l,source:e,openedViaHover:r,wheelType:"STAMP"}),a.CB.handleShortcutRelease(s,l)}}},96813:(e,r,n)=>{n.d(r,{K4:()=>m,_P:()=>p,w5:()=>u});var i=n(716544),a=n(831932),o=n(235441),s=n(742452),l=n(51910),c=n(560735);function d(){let e=(0,l.aV)(),r=(0,i.d4)(e=>!!e.user);return!e&&!a.Ay.isIpadNative&&r}function u(){let e=d(),r=(0,s.N)();return e&&r}function p(){let e=(0,i.d4)(e=>e.mirror?.appModel.showUi),r=(0,o.ow)(),n=(0,i.d4)(e=>e.mirror?.appModel.isReadOnly),a=m(),s=u();return r&&e&&(!n||a||s)}function m(){let e=d(),r=(0,c.Td)();return e&&r}},2632:(e,r,n)=>{n.d(r,{iH:()=>i}),n(848318),n(716544),n(741419),n(109728),n(997976),n(397579),n(508195),n(600392),n(481540),n(111383),n(103446),n(45584),n(369600),n(849752),n(834111),n(291714),n(303210);var i=(e=>(e[e.TRUE=0]="TRUE",e[e.FALSE=1]="FALSE",e[e.LOADING=2]="LOADING",e))(i||{})},880434:(e,r,n)=>{n.d(r,{bj:()=>b});var i=n(741419),a=n(673906),o=n(39773),s=n(17629),l=n(461665),c=n(194622);let d=(0,o.eU)(null),u=(0,o.eU)(null),p=(0,o.eU)({x:0,y:0}),m=(0,o.eU)(null),h=(0,o.eU)(!1),_=(0,o.eU)(!1);(0,o.eU)(e=>e(u)),(0,o.eU)(e=>e(h)),(0,o.eU)(e=>e(_)),(0,o.eU)(e=>e(p));let g=(0,o.eU)(!1),f="new_preview",E=null;function y(){E&&E.abort(f),E=null}(0,o.eU)(null,async(e,r,n,a)=>{let o=!e(h)&&(0,c.t)(n.template,e(u));if(e(_)||o||e(g))return!1;r(T),r(h,!0),r(d,a.previewManager),r(u,n.template),y();let s=(E||(E=new TaskController({priority:"background"})),E);function b(r){return scheduler.postTask(()=>!!((0,c.t)(n.template,e(u))&&e(l.w))&&(r(),!0),{signal:s.signal}).catch(e=>{if(e===f)return!1;throw e})}s.setPriority(a.priority);let v=e(d),I=(async()=>{try{let o=await e(S(n)),s=v?.nodeType===i.Z6A.SECTION?v.options:null,l=a?.position||null;if(!await b(()=>i.Hyj.prepareTemplatePreview(o,s,l))||!await b(()=>i.Hyj.insertTemplatePreview(a.moveViewportAfterPreview,a.viewportOptions||null)))return!1;let c=i.Hyj.getTemplatePreviewSize();return r(p,c),r(h,!1),!0}catch(i){throw(0,c.t)(n.template,e(u))&&r(T),i}})();return r(m,I),await I});let b=(0,o.eU)(null,async(e,r,n)=>{let o=e(m);if(!o||e(_))return!1;r(_,!0);try{if(!await o||!e(l.w))return!1;return await scheduler.postTask((0,a.nc)(n.editScopeType,"commit-figjam-template-preview",()=>i.Hyj.commitTemplatePreview(n.selectTemplateAfterCommit,n.moveViewportAfterCommit)),{priority:n.priority}),r(u,null),r(g,!0),r(I),!0}finally{r(_,!1)}}),v=(0,o.eU)(null,(e,r)=>{r(g,!1),e(h)&&(y(),r(T))}),T=(0,o.eU)(null,(e,r)=>{r(u,null),r(m,null),r(h,!1),r(_,!1),e(l.w)&&i.Hyj.clearTemplatePreview()});(0,o.eU)(null,(e,r)=>{r(v),r(T)});let I=(0,o.eU)(null,(e,r)=>{r(d,null),i.Hyj.clearSectionPreviewSupport()}),S=(0,o.Iz)(e=>(0,o.eU)(async()=>await (0,s.dT)(e)),(e,r)=>e.fileKey===r.fileKey&&e.fileVersion===r.fileVersion&&(0,c.t)(e.template,r.template))},303210:(e,r,n)=>{n(442313),n(849752),n(124614),n(87748)},229628:(e,r,n)=>{n.d(r,{O:()=>u});var i=n(848318);n(741419),n(536384),n(359480);var a=n(831932);n(882644);var o=n(448329),s=n(235441);n(766535),n(207715),n(503024);var l=n(442313),c=n(778935),d=n(591519);(0,c.ex)("zoom_slider",function(e){let{zoomPercentage:r}=e;return i.createElement("div",{className:d.P},(0,l.tx)("whiteboard.zoom_slider.zoom_percentage",{zoomProportion:r/100}))},e=>({zoomPercentage:Number(e.dataset.tooltipZoomPercentage)}));function u(){let e=(0,s.ow)(),r=(0,o.g)();return(e||r)&&!a.Ay.isIpad}},1025:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AutoLayout=r.styleForAutoLayout=void 0;let i=n(56636),a=n(848318),o=n(135287),s=n(503527),l=n(980399),c=n(194053),d=n(736251);function u(e,r,n){let{style:i,overlayStyle:a,wrapperStyle:o}=(0,s.styleForFrame)(e,r,n);return{style:Object.assign(Object.assign(Object.assign({},i),(0,l.getParentLayout)(e)),(0,l.getVisibility)(e)),overlayStyle:a,wrapperStyle:o}}r.styleForAutoLayout=u,r.AutoLayout=a.forwardRef(function(e,r){let{attributes:n,children:l}=e,p=(0,i.__rest)(e,["attributes","children"]),m=a.useContext(o.ParentContext);(0,o.warnInvalidConstraints)(Object.assign(Object.assign({},p),{parent:m}));let h=(0,d.normalizeProps)(Object.assign(Object.assign({},(0,c.getDefaultAutoLayoutProps)()),p)),_=(0,o.getInvalidFillParentCheckerRef)(Object.assign(Object.assign({},h),{parent:m})),g=u(h,m,a.Children.count(l)>0);return a.createElement(o.ParentContext.Provider,{value:{type:"autolayout",props:h}},(0,s.domNodeFromFrame)({figmaLayerName:h.name,styles:g,attributes:n,children:l,ref:(0,o.mergeRefs)([_,r])}))})},359713:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.applyMatrixToPoint=r.roundBoundingBox=r.roundTransform=r.isRotated=r.getRelativeBoundsAndRotation=r.skipPosition=r.rotatePoint=r.multiply=r.getCenteredRotation=r.flipVertical=r.isFlippedVertical=r.getAngleDeg=r.getAngle=void 0;let i=n(941443);function a(e){let r=e[0][0];return Math.atan2(e[0][1],r)}function o(e,r){let[[n,i,a],[o,s,l]]=e,[[c,d,u],[p,m,h]]=r;return[[n*c+i*p,n*d+i*m,n*u+i*h+a],[o*c+s*p,o*d+s*m,o*u+s*h+l]]}function s(e,r){let[[n,i,a],[o,s,l]]=e,[c,d]=r;return[n*c+i*d+a,o*c+s*d+l]}function l(e){let[[r,n],[i,a]]=e;return[[r,n,0],[i,a,0]]}r.getAngle=a,r.getAngleDeg=function(e){return a(e)*(180/Math.PI)},r.isFlippedVertical=function(e){let[[r,n],[i,a]]=e;return r*a-n*i<0},r.flipVertical=function(e){return o([[1,0,0],[0,-1,0]],e)},r.getCenteredRotation=function(e,r,n){let i=e*Math.PI/180;return o([[1,0,r/2],[0,1,n/2]],o([[Math.cos(i),Math.sin(i),0],[-Math.sin(i),Math.cos(i),0]],[[1,0,-r/2],[0,1,-n/2]]))},r.multiply=o,r.rotatePoint=s,r.skipPosition=l,r.getRelativeBoundsAndRotation=function(e){let{width:r,height:n}=e,i=o([[1,0,r/2],[0,1,n/2]],o(l(e.relativeTransform),[[1,0,-r/2],[0,1,-n/2]])),[a,c]=s(i,[0,0]),[d,u]=s(i,[0,n]),[p,m]=s(i,[r,0]),[h,_]=s(i,[r,n]),g=Math.min(a,d,p,h),f=Math.min(c,u,m,_),E=Math.max(a,d,p,h)-g,y=Math.max(c,u,m,_)-f,b=o([[1,0,(E-r)/2],[0,1,(y-n)/2]],i),[[,,v],[,,T]]=b;return{relativeBoundingBox:{x:e.relativeTransform[0][2]-v,y:e.relativeTransform[1][2]-T,width:E,height:y},rotationOnlyTransform:b,relativeTransform:e.relativeTransform}},r.isRotated=function(e){if(!e.relativeTransform)return!1;let r=e.relativeTransform[0][0],n=e.relativeTransform[0][1],i=e.relativeTransform[1][0],a=e.relativeTransform[1][1];return!(r-1<1e-5&&n-0<1e-5&&i-0<1e-5&&a-1<1e-5)},r.roundTransform=function(e){return[[(0,i.round)(e[0][0],5),(0,i.round)(e[0][1],5),(0,i.round)(e[0][2],5)],[(0,i.round)(e[1][0],5),(0,i.round)(e[1][1],5),(0,i.round)(e[1][2],5)]]},r.roundBoundingBox=function(e){return{x:(0,i.round)(e.x),y:(0,i.round)(e.y),width:(0,i.round)(e.width),height:(0,i.round)(e.height)}},r.applyMatrixToPoint=function(e,r){return[r[0]*e[0][0]+r[1]*e[0][1]+e[0][2],r[0]*e[1][0]+r[1]*e[1][1]+e[1][2]]}},137161:(e,r,n)=>{n.d(r,{_:()=>s});var i=n(401630),a=n(847077),o=n(353858);class s{constructor(){this.queues_={},o.r.forEach(e=>{this.queues_[e]=new a.C}),this.pendingHostCallback_=null,this.signals_=new WeakMap}postTask(e,r){if(void 0!==(r=Object.assign({},r)).signal){if(null===r.signal||!("aborted"in r.signal)||"function"!=typeof r.signal.addEventListener)return Promise.reject(TypeError("'signal' is not a valid 'AbortSignal'"));if(r.signal&&r.signal.priority&&!o.r.includes(r.signal.priority))return Promise.reject(TypeError(`Invalid task priority: '${r.signal.priority}'`))}if(void 0!==r.priority&&(null===r.priority||!o.r.includes(r.priority)))return Promise.reject(TypeError(`Invalid task priority: '${r.priority}'`));if(void 0===r.delay&&(r.delay=0),r.delay=Number(r.delay),r.delay<0)return Promise.reject(TypeError("'delay' must be a positive number."));let n={callback:e,options:r,resolve:null,reject:null,hostCallback:null,abortCallback:null,onTaskCompleted:function(){this.options.signal&&!this.abortCallback&&(this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null)},onTaskAborted:function(){this.hostCallback&&(this.hostCallback.cancel(),this.hostCallback=null),this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null,this.reject(this.options.signal.reason)},isAborted:function(){return this.options.signal&&this.options.signal.aborted}},i=new Promise((e,r)=>{n.resolve=e,n.reject=r});return this.schedule_(n),i}schedule_(e){let r=e.options.signal;if(r){if(r.aborted){e.reject(new DOMException("The task was aborted.","AbortError"));return}e.abortCallback=()=>{e.onTaskAborted()},r.addEventListener("abort",e.abortCallback)}if(e.options.delay>0){e.hostCallback=new i.g(()=>{e.hostCallback=null,this.onTaskDelayExpired_(e)},null,e.options.delay);return}this.pushTask_(e),this.scheduleHostCallbackIfNeeded_()}onTaskDelayExpired_(e){this.pushTask_(e),this.pendingHostCallback_&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.schedulerEntryCallback_()}onPriorityChange_(e){let r=this.signals_.get(e);if(void 0===r)throw Error("Attempting to change priority on an unregistered signal");if(r===e.priority)return;let n=this.queues_[r];this.queues_[e.priority].merge(n,r=>r.options.signal===e),this.signals_.set(e,e.priority)}schedulerEntryCallback_(){this.pendingHostCallback_=null,this.runNextTask_(),this.scheduleHostCallbackIfNeeded_()}scheduleHostCallbackIfNeeded_(){let e=this.nextTaskPriority_();null!=e&&("background"!==e&&this.pendingHostCallback_&&this.pendingHostCallback_.isIdleCallback()&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.pendingHostCallback_||(this.pendingHostCallback_=new i.g(()=>{this.schedulerEntryCallback_()},e,0)))}pushTask_(e){let r;if(r=e.options.priority?e.options.priority:e.options.signal&&e.options.signal.priority?e.options.signal.priority:"user-visible",!o.r.includes(r))throw TypeError(`Invalid task priority: ${r}`);if(e.options.signal&&e.options.signal.priority){let r=e.options.signal;this.signals_.has(r)||(r.addEventListener("prioritychange",()=>{this.onPriorityChange_(r)}),this.signals_.set(r,r.priority))}this.queues_[r].push(e)}runNextTask_(){let e=null;do{let r=this.nextTaskPriority_();if(null==r)return;e=this.queues_[r].takeNextTask()}while(e.isAborted())try{let r=e.callback();e.resolve(r)}catch(r){e.reject(r)}finally{e.onTaskCompleted()}}nextTaskPriority_(){for(let e=0;e<o.r.length;e++){let r=o.r[e];if(!this.queues_[r].isEmpty())return r}return null}}},860392:(e,r,n)=>{n.d(r,{i:()=>o,w:()=>a});var i=n(353858);class a extends Event{constructor(e,r){if(!r||!i.r.includes(r.previousPriority))throw TypeError(`Invalid task priority: '${r.previousPriority}'`);super(e),this.previousPriority=r.previousPriority}}class o extends AbortController{constructor(e={}){if(super(),null==e&&(e={}),"object"!=typeof e)throw TypeError("'init' is not an object");let r=void 0===e.priority?"user-visible":e.priority;if(!i.r.includes(r))throw TypeError(`Invalid task priority: '${r}'`);this.priority_=r,this.isPriorityChanging_=!1,function(e){let r=e.signal;Object.defineProperties(r,{priority:{get:function(){return e.priority_},enumerable:!0},onprioritychange:{value:null,writable:!0,enumerable:!0}}),r.addEventListener("prioritychange",e=>{r.onprioritychange&&r.onprioritychange(e)})}(this)}setPriority(e){if(!i.r.includes(e))throw TypeError("Invalid task priority: "+e);if(this.isPriorityChanging_)throw new DOMException("","NotAllowedError");if(this.signal.priority===e)return;this.isPriorityChanging_=!0;let r=this.priority_;this.priority_=e;let n=new a("prioritychange",{previousPriority:r});this.signal.dispatchEvent(n),this.isPriorityChanging_=!1}}},719296:(e,r,n)=>{n.d(r,{CH:()=>p,g4:()=>f.g4});var i=n(848318),a=n(59696),o=n(306947),s=n(686082),l=n(523708);let c=a.YH.define(),d=[],u=(0,i.forwardRef)((e,r)=>{let{className:n,value:u="",selection:p,extensions:m=[],onChange:h,onStatistics:_,onCreateEditor:g,onUpdate:f,autoFocus:E,theme:y="light",height:b,minHeight:v,maxHeight:T,width:I,minWidth:S,maxWidth:w,basicSetup:A,placeholder:C,indentWithTab:N,editable:L,readOnly:O,root:R,initialState:P,...D}=e,M=(0,i.useRef)(null),{state:k,view:F,container:x}=function(e){let{value:r,selection:n,onChange:u,onStatistics:p,onCreateEditor:m,onUpdate:h,extensions:_=d,autoFocus:g,theme:f="light",height:E=null,minHeight:y=null,maxHeight:b=null,width:v=null,minWidth:T=null,maxWidth:I=null,placeholder:S="",editable:w=!0,readOnly:A=!1,indentWithTab:C=!0,basicSetup:N=!0,root:L,initialState:O}=e,[R,P]=(0,i.useState)(),[D,M]=(0,i.useState)(),[k,F]=(0,i.useState)(),x=o.Lz.theme({"&":{height:E,minHeight:y,maxHeight:b,width:v,minWidth:T,maxWidth:I},"& .cm-scroller":{height:"100% !important"}}),U=[o.Lz.updateListener.of(e=>{e.docChanged&&"function"==typeof u&&!e.transactions.some(e=>e.annotation(c))&&u(e.state.doc.toString(),e),p&&p((0,l.m)(e))}),x,...(0,s.IA)({theme:f,editable:w,readOnly:A,placeholder:S,indentWithTab:C,basicSetup:N})];return h&&"function"==typeof h&&U.push(o.Lz.updateListener.of(h)),U=U.concat(_),(0,i.useEffect)(()=>{if(R&&!k){let e={doc:r,selection:n,extensions:U},i=O?a.$t.fromJSON(O.json,e,O.fields):a.$t.create(e);if(F(i),!D){let e=new o.Lz({state:i,parent:R,root:L});M(e),m&&m(e,i)}}return()=>{D&&(F(void 0),M(void 0))}},[R,k]),(0,i.useEffect)(()=>P(e.container),[e.container]),(0,i.useEffect)(()=>()=>{D&&(D.destroy(),M(void 0))},[D]),(0,i.useEffect)(()=>{g&&D&&D.focus()},[g,D]),(0,i.useEffect)(()=>{D&&D.dispatch({effects:a.Pe.reconfigure.of(U)})},[f,_,E,y,b,v,T,I,S,w,A,C,N,u,h]),(0,i.useEffect)(()=>{if(void 0===r)return;let e=D?D.state.doc.toString():"";D&&r!==e&&D.dispatch({changes:{from:0,to:e.length,insert:r||""},annotations:[c.of(!0)]})},[r,D]),{state:k,setState:F,view:D,setView:M,container:R,setContainer:P}}({container:M.current,root:R,value:u,autoFocus:E,theme:y,height:b,minHeight:v,maxHeight:T,width:I,minWidth:S,maxWidth:w,basicSetup:A,placeholder:C,indentWithTab:N,editable:L,readOnly:O,selection:p,onChange:h,onStatistics:_,onCreateEditor:g,onUpdate:f,extensions:m,initialState:P});if((0,i.useImperativeHandle)(r,()=>({editor:M.current,state:k,view:F}),[M,x,k,F]),"string"!=typeof u)throw Error(`value must be typeof string but got ${typeof u}`);let U="string"==typeof y?`cm-theme-${y}`:"cm-theme";return i.createElement("div",{ref:M,className:`${U}${n?` ${n}`:""}`,...D})});u.displayName="CodeMirror";let p=u;n(97490);var m=n(401644),h=n(548993);let _={PURPLE:"#AF00DB",GREEN:"#098658",BLUE600:"#007BE5",PINK600:"#EA10AC",BLACK900:"#00000090",BLACK500:"#00000050",GREY100:"#F5F5F5"};o.Lz.theme({"&":{color:_.BLACK900,backgroundColor:"#FFFFFF"},".cm-gutters":{backgroundColor:"#FFFFFF",color:_.BLACK500,border:"none"},".cm-activeLineGutter":{backgroundColor:_.GREY100}}),o.Lz.theme({".cm-custom-quick-info-punctuation":{color:_.BLACK500},".cm-custom-quick-info-aliasName":{color:_.PURPLE},".cm-custom-quick-info-keyword":{color:_.PURPLE},".cm-custom-quick-info-numericLiteral":{color:_.GREEN},".cm-custom-quick-info-stringLiteral":{color:_.GREEN},".cm-custom-quick-info-operator":{color:_.PURPLE},".cm-custom-quick-info-functionName":{color:_.PINK600},".cm-custom-quick-info-moduleName":{color:_.BLUE600},".cm-custom-quick-info-parameterName":{color:_.PINK600},".cm-custom-quick-info-propertyName":{color:_.PINK600},".cm-custom-quick-info-localName":{color:_.BLUE600},".cm-custom-quick-info-interfaceName":{color:_.BLUE600},".cm-custom-quick-info-typeParameterName":{color:_.BLUE600}});let g=m.cr.define([{tag:[h._A.name,h._A.deleted,h._A.character,h._A.macroName,h._A.propertyName,h._A.definition(h._A.name)],color:_.BLUE600},{tag:[h._A.keyword,h._A.processingInstruction,h._A.inserted,h._A.url,h._A.escape,h._A.regexp,h._A.link,h._A.color,h._A.standard(h._A.name),h._A.className,h._A.changed,h._A.annotation,h._A.modifier,h._A.self,h._A.namespace,h._A.operatorKeyword,h._A.function(h._A.punctuation),h._A.typeName],color:_.PURPLE},{tag:[h._A.string,h._A.number,h._A.bool,h._A.atom],color:_.GREEN},{tag:[h._A.labelName,h._A.constant(h._A.name),h._A.definition(h._A.name)],color:_.PINK600},{tag:[h._A.separator,h._A.meta,h._A.comment],color:_.BLACK500},{tag:h._A.strong,fontWeight:"bold"},{tag:h._A.emphasis,fontStyle:"italic"},{tag:h._A.link,textDecoration:"underline"},{tag:h._A.heading,fontWeight:"bold",color:_.BLACK900},{tag:h._A.strikethrough,textDecoration:"line-through"}]);(0,m.y9)(g);var f=n(831678)},988910:(e,r,n)=>{n.d(r,{$y:()=>l,Cs:()=>s});var i=n(749214),a=n(848318),o=n(234991);let s=(0,a.forwardRef)((e,r)=>(0,i.jsx)(o.b,{ref:r,type:"full-width",...e}));s.displayName="Banner.FullWidth",(0,a.forwardRef)((e,r)=>(0,i.jsx)(o.b,{ref:r,type:"inline",...e})).displayName="Banner.Inline",(0,a.forwardRef)((e,r)=>(0,i.jsx)(o.b,{ref:r,type:"informational",...e})).displayName="Banner.Informational";let l=(0,a.forwardRef)((e,r)=>(0,i.jsx)(o.b,{ref:r,type:"inset-modal",...e}));l.displayName="Banner.InsetModal",(0,a.forwardRef)((e,r)=>(0,i.jsx)(o.b,{ref:r,type:"inset",...e})).displayName="Banner.Inset"},292799:(e,r,n)=>{n.d(r,{Ck:()=>p,FM:()=>y,LC:()=>_,LO:()=>h,P2:()=>f,Qs:()=>a,Sp:()=>E,W:()=>c,YE:()=>d,e1:()=>g,eJ:()=>s,eW:()=>u,iU:()=>o,tp:()=>m,zc:()=>l,zr:()=>i});var i="fpl_13_0",a="fpl_13_1",o="fpl_13_2",s="fpl_13_3 fpl_1_7",l="fpl_13_4",c="fpl_13_6",d="fpl_13_7",u="fpl_13_8",p="fpl_13_9",m="fpl_13_a",h="fpl_13_b",_="fpl_13_c",g="fpl_13_d",f="fpl_13_e",E="fpl_13_f",y="fpl_13_g"},172340:(e,r,n)=>{n.d(r,{S:()=>o}),n(749214);var i=n(848318);let a=(0,i.createContext)("dark");function o(){return(0,i.useContext)(a)}},874368:(e,r,n)=>{n.d(r,{B:()=>a});var i=n(749214);let a=(0,n(848318).memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.577 3.584a.5.5 0 0 1 .139.693l-6 9a.5.5 0 0 1-.77.076l-3.6-3.6a.5.5 0 1 1 .708-.707l3.168 3.169 5.662-8.493a.5.5 0 0 1 .693-.138M5 14.5a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 5.5 18h13a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5z",clipRule:"evenodd"})})})},67074:(e,r,n)=>{n.d(r,{_:()=>d});var i=n(749214),a=n(848318),o=n(869147),s=n(474586),l=n(189197);let c=(0,a.createContext)(void 0);c.Provider;let d=(0,a.forwardRef)(({recordingKey:e,children:r,href:n,trusted:d,newTab:u,onClick:p,htmlAttributes:m,...h},_)=>{let g=(0,a.useContext)(c),f=d??function(e){if(!l.A)return!1;try{let r=window.location.origin;return new URL(e,r).origin===r}catch{return!1}}(n)?"noopener":"noopener nofollow noreferrer ugc",E=(0,o.Q)(p||g?e=>{g?.(e),p?.(e)}:void 0,{eventName:"click",recordingKey:e},[p,g]);return(0,i.jsx)("a",{target:u?"_blank":void 0,rel:f,...s.r,...m,...h,ref:_,onClick:E,href:n,children:r})});d.displayName="LinkPrimitive"},764932:(e,r,n)=>{n.d(r,{MJ:()=>b,Q$:()=>w,ZP:()=>y,b:()=>f,bL:()=>T,g8:()=>E,hE:()=>I,mc:()=>v,q7:()=>S,wv:()=>A});var i=n(749214),a=n(848318),o=n(622876),s=n(821416),l=n(723372),c=n(172340),d=n(424435),u=n(404827),p=n(187653),m=n(989246),h=n(209045),_=n(333613),g=n(537545);let f=e=>(0,h.b)({...e,offset:4});function E(e){let{version:r}=(0,o.DP)();return(0,i.jsx)(h.g8,{offset:{mainAxis:"ui2"===r?0:4,alignmentAxis:-8},...e})}E.displayName="Menu.SubMenu";let y=(0,a.forwardRef)(({children:e,hasChecked:r,...n},a)=>(0,i.jsx)(h.ZP,{className:g.iM,...n,ref:a,hasChecked:r,children:(0,i.jsxs)("span",{className:g.p$,children:[(0,i.jsxs)("span",{className:g.AR,children:[void 0!==r&&(0,i.jsx)(d.c,{className:g.CT,"aria-hidden":!0}),e]}),(0,i.jsx)("span",{className:g.zc,children:(0,i.jsx)(p.R,{})})]})}));y.displayName="Menu.SubTrigger";let b=(0,a.forwardRef)(({children:e,...r},n)=>{let a=(0,c.S)(),{color:d}=(0,o.GA)();return(0,i.jsx)(h.MJ,{className:(0,l.A)([g.kL,"light"===("dark"===a?"dark":d)?g.BB:g.XT]),...r,ref:n,children:(0,i.jsxs)(s.J,{mode:"dark"===a?"dark":void 0,children:[(0,i.jsx)(h.LJ,{className:g.Th,direction:"up",children:(0,i.jsx)(m.a,{})}),e,(0,i.jsx)(h.LJ,{className:g.Th,direction:"down",children:(0,i.jsx)(u.r,{})})]})})});b.displayName="Menu.SubContainer";let v=(0,a.forwardRef)(({children:e,...r},n)=>{let a=(0,c.S)(),{color:d}=(0,o.GA)();return(0,i.jsx)(h.mc,{className:(0,l.A)([g.kL,"light"===("dark"===a?"dark":d)?g.BB:g.XT]),...r,ref:n,children:(0,i.jsxs)(s.J,{mode:"dark"===a?"dark":void 0,children:[(0,i.jsx)(h.LJ,{className:g.Th,direction:"up",children:(0,i.jsx)(m.a,{})}),e,(0,i.jsx)(h.LJ,{className:g.Th,direction:"down",children:(0,i.jsx)(u.r,{})})]})})});function T(e){return(0,i.jsx)(h.bL,{...e})}v.displayName="Menu.Container",T.displayName="Menu.Root";let I=(0,a.forwardRef)((e,r)=>(0,i.jsx)(h.hE,{className:g.DD,...e,ref:r}));I.displayName="Menu.Title",(0,a.forwardRef)((e,r)=>(0,i.jsx)(h.hE,{className:_.s,...e,ref:r})).displayName="Menu.HiddenTitle",(0,a.forwardRef)((e,r)=>(0,i.jsx)(h.YJ,{className:g.Os,...e,ref:r})).displayName="Menu.Group";let S=(0,a.forwardRef)(({children:e,...r},n)=>(0,i.jsx)(h.q7,{className:g.AS,...r,ref:n,children:(0,i.jsx)("span",{className:g.rv,children:e})}));function w(e){return(0,i.jsx)("span",{className:g._5,...e})}function A(){return(0,i.jsx)("li",{className:g.me,role:"separator"})}S.displayName="Menu.Item",(0,a.forwardRef)(({children:e,...r},n)=>(0,i.jsx)(h.N_,{className:g.AS,...r,ref:n,children:(0,i.jsx)("span",{className:g.rv,children:e})})).displayName="Menu.Link",w.displayName="Menu.ItemLead",A.displayName="Menu.Separator"},537545:(e,r,n)=>{n.d(r,{AR:()=>u,AS:()=>s,BB:()=>i,CT:()=>_,DD:()=>m,Os:()=>g,Pq:()=>E,Sv:()=>c,Th:()=>b,XT:()=>a,_5:()=>y,iM:()=>h,kL:()=>o,me:()=>f,p$:()=>d,rv:()=>l,zc:()=>p});var i="fpl_c_0",a="fpl_c_1",o="fpl_c_2",s="fpl_c_3 fpl_1_6",l="fpl_c_4",c="fpl_c_5",d="fpl_c_6 fpl_c_4",u="fpl_c_7",p="fpl_c_8",m="fpl_c_9 fpl_1_6",h="fpl_c_a fpl_c_3 fpl_1_6",_="fpl_c_b",g="fpl_c_c",f="fpl_c_d",E="fpl_c_e",y="fpl_c_f",b="fpl_c_o"},708788:(e,r,n)=>{n.d(r,{Uk:()=>h,fP:()=>g,mc:()=>f,nK:()=>_});var i=n(749214),a=n(848318),o=n(710197),s=n(367271),l=n(542280),c=n(622876),d=n(493080),u=n(513886),p=n(397445),m=n(333613);let h=(0,a.createContext)(void 0);function _({children:e}){let r=(0,a.useRef)(null);return(0,i.jsx)("div",{className:m.P,ref:r,children:(0,i.jsx)(h.Provider,{value:r,children:e})})}function g({type:e,softDismiss:r,provideOwnDismiss:n,isOpen:i,openOnHover:c=!1,middleware:d,...u}){let p=(0,a.useId)(),m=(0,a.useRef)(null),[h,_]=(0,a.useState)(p),{refs:g,floatingStyles:f,context:E}=(0,o.we)({...u,middleware:d?d?.concat([s.UE({element:m})]):[(0,s.cY)(8),(0,s.UU)({padding:8,fallbackAxisSideDirection:"start"}),(0,s.UE)({element:m})],open:i,whileElementsMounted:l.ll}),y=void 0===r?"listbox"===e||"menu"===e:r,b=(0,o.kp)(E,{enabled:"tutorial"!==e}),v=(0,o.s9)(E,{enabled:!n,outsidePress:r}),T=(0,o.Mk)(E,{enabled:c,move:!1,delay:{open:500,close:0},handleClose:(0,o.iB)({requireIntent:!1,blockPointerEvents:!0,buffer:1})}),{getReferenceProps:I,getFloatingProps:S}=(0,o.bv)([b,v,T]),w=(0,a.useCallback)(({style:r,...n}={})=>(n.id&&_(n.id),{isOpen:i,type:e,context:E,useSoftDismiss:y,id:h,ref:g.setFloating,style:{...r,...f},...n,...S({})}),[h,E,y,f,S,i,g.setFloating,e]),A=(0,a.useCallback)(()=>({ref:m,context:E}),[E,m]);return{getTriggerProps:(0,a.useCallback)((r={})=>{let n=g.setReference;if("tutorial"===e){let{onClick:e,...r}=I({ref:n,"aria-details":h});return r}return I({...r,ref:n,"aria-controls":h,"aria-haspopup":e,"aria-expanded":i})},[h,I,i,g.setReference,e]),getArrowProps:A,getContainerProps:w,context:E}}_.displayName="PopoverOutlet",(0,a.forwardRef)(({fill:e="var(--color-bg)",...r},n)=>{let s=(0,a.useRef)(),l=(0,o.SV)([s,n]);return(0,i.jsx)(o.ie,{ref:l,tipRadius:1,fill:e,...r})}).displayName="PopoverPrimitive.Arrow";let f=(0,a.forwardRef)(({isOpen:e,type:r,children:n,context:s,useSoftDismiss:l,style:m,...g},f)=>{let E=(0,a.useContext)(h),y="listbox"===r||"menu"===r,[b,v]=(0,p.q)(),{version:T}=(0,c.DP)(),I={dialog:"var(--z-index-window)",grid:"var(--z-index-window)",tree:"var(--z-index-window)",listbox:"var(--z-index-dropdown)",menu:"var(--z-index-dropdown)",tutorial:"var(--z-index-window)"};return e||"listbox"!==r?e?l?(0,i.jsx)(u.o,{display:"contents",eventListeners:y?["onKeyDown","onKeyUp","onKeyPress"]:[],children:(0,i.jsx)(o.XF,{root:E,children:(0,i.jsx)(_,{children:(0,i.jsx)(d.J,{enabled:"ui3"===T,children:(0,i.jsx)(o.zR,{style:{zIndex:I[r]},lockScroll:!0,children:(0,i.jsx)(o.s3,{context:s,modal:y,children:(0,i.jsx)("div",{ref:f,style:m,...g,children:n})})})})})})}):(0,i.jsx)(v,{value:b,children:(0,i.jsx)(o.XF,{root:E,children:(0,i.jsx)(_,{children:(0,i.jsx)("section",{"aria-labelledby":b,ref:f,...g,style:{...m,zIndex:I[r]},children:n})})})}):null:(0,i.jsx)("div",{style:{display:"none"},children:n})});f.displayName="PopoverPrimitive.Container"},679334:(e,r,n)=>{n.d(r,{DZ:()=>E,bL:()=>S,c$:()=>v,l9:()=>y,mc:()=>f,zW:()=>T});var i=n(749214),a=n(848318),o=n(622876),s=n(723372),l=n(289452),c=n(353386),d=n(397445),u=n(258904),p=n(404827),m=n(989246),h=n(907343),_=n(961300),g=n(628663);let f=(0,a.forwardRef)(({children:e,...r},n)=>(0,i.jsxs)(h.mc,{className:g.container,...r,ref:n,children:[e,(0,i.jsx)(h.LJ,{className:g.scrollArrow,direction:"up",children:(0,i.jsx)(m.a,{})}),(0,i.jsx)(h.LJ,{className:g.scrollArrow,direction:"down",children:(0,i.jsx)(p.r,{})})]}));f.displayName="Select.Container";let E=(0,a.forwardRef)(({placeholder:e,children:r,iconLead:n,width:a="hug",size:l="md",...c},d)=>{let{selectedItem:u}=(0,h.WM)(),m=(0,_.Lh)("select"),{version:f}=(0,o.DP)(),E=u?u.label:e??m;return(0,i.jsxs)(h.l9,{...c,className:(0,s.A)(g.trigger,g[a],g[l]),ref:d,children:[n&&(0,i.jsx)(I,{children:n}),(0,i.jsxs)("div",{className:g.triggerContainer,children:[(0,i.jsx)("span",{className:g.triggerContent,children:r??E}),"ui3"===f?(0,i.jsx)(p.r,{}):(0,i.jsx)(A,{})]})]})});E.displayName="Select.ManuallyLabeledTrigger";let y=(0,a.forwardRef)(({label:e,description:r,...n},a)=>{let[o,s]=(0,d.q)(),u=(0,c.e)(o);return(0,i.jsx)(s,{value:o,children:(0,i.jsxs)("div",{className:g.inputGroup,children:[e,(0,i.jsx)(E,{id:u,...n,ref:a}),r&&(0,i.jsx)(l.V,{children:r})]})})});y.displayName="Select.Trigger";let b=(0,a.forwardRef)(({children:e,...r},n)=>{let{version:a}=(0,o.DP)();return(0,i.jsx)(h.c$,{className:g.option,...r,ref:n,children:(0,i.jsxs)("span",{className:g.optionInner,children:["ui3"===a?(0,i.jsx)(u.l,{"aria-hidden":!0,className:g.optionIcon}):(0,i.jsx)(w,{"aria-hidden":!0,className:g.optionIcon}),(0,i.jsx)("span",{className:g.optionText,children:e})]})})});b.displayName="Select.OptionBase";let v=(0,a.forwardRef)((e,r)=>(0,i.jsx)(b,{...e,ref:r}));v.displayName="Select.Option";let T=(0,a.forwardRef)((e,r)=>(0,i.jsx)(b,{...e,ref:r}));T.displayName="Select.OptionReset",(0,a.forwardRef)((e,r)=>(0,i.jsx)(h.YJ,{className:g.group,ref:r,...e})).displayName="Select.Group",(0,a.forwardRef)((e,r)=>(0,i.jsx)(h.WL,{className:g.groupLabel,ref:r,...e})).displayName="Select.GroupLabel";let I=(0,a.forwardRef)((e,r)=>(0,i.jsx)("span",{className:g.lead,ref:r,...e}));function S(e){return(0,i.jsx)(h.bL,{...e,offsetAmount:8,padding:{top:12,bottom:12,left:8,right:8}})}function w(e){return(0,i.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2069 5.20724L7.70694 10.7072L6.99983 11.4144L6.29272 10.7072L3.29272 7.70724L4.70694 6.29303L6.99983 8.58592L11.7927 3.79303L13.2069 5.20724Z",fill:"var(--color-icon)"})})}function A(){return(0,i.jsx)("svg",{width:"8",height:"8",viewBox:"0 0 8 8",children:(0,i.jsx)("path",{d:"M.646 3.354l.708-.708L4 5.293l2.646-2.647.708.708L4 6.707.646 3.354z",fillRule:"nonzero",fillOpacity:"1",fill:"var(--select-icon)",stroke:"none"})})}I.displayName="Select.Lead",S.displayName="Select.Root"},97466:(e,r,n)=>{n.d(r,{N7:()=>a});let i={reportError:()=>{}},a=(...e)=>i.reportError(...e)},961300:(e,r,n)=>{n.d(r,{Lh:()=>o}),n(749214);var i=n(848318);let a=(0,i.createContext)({back:"Back",close:"Close",dismiss:"Dismiss",loading:"Loading",mixed:"Mixed",select:"Select an option",hasChecked:"Contains checked item",warning:"Warning:",danger:"Danger:",moveRowToTop:"Move to top",moveRowToBottom:"Move to bottom",moveRowUp:"Move up",moveRowDown:"Move down"});function o(e){return(0,i.useContext)(a)[e]}},308769:(e,r,n)=>{n.d(r,{GU:()=>d,PK:()=>u,Tq:()=>a,Ws:()=>c,YB:()=>g,_H:()=>o,cd:()=>l,eJ:()=>i,gr:()=>h,sD:()=>p});var i,a,o,s,l,c,d,u,p,m,h,_,g,f=n(781131),E=n(897392),y=n(445777);function b(e,r){function n(r,n){return r.startsWith(e)?n(r.slice(e.length)):null}function i(e){return r.fromString(e)}function a(e){return n(e,e=>i(e)?null:E.sH(e))}function o(e){return n(e,e=>i(e))}function s(r){return e+E.dI(r)}function l(n){return e+r.toString(n)}return{toString:function(e){return e},toKiwi:function(e){return n(e,e=>{let r=i(e);if(r)return{assetRef:r};let n=E.sH(e);if(n)return{guid:n}})??{guid:E.Hr}},toGuidObjIfLocal:a,toGuidStrIfLocal:function(e){return n(e,e=>i(e)?null:e)},toRefIfSubscribed:o,fromString:function(e){return n(e,r=>E.sH(r)||i(r)?e:null)},fromLocalNodeIdObj:s,fromLocalNodeIdStr:function(r){return E.sH(r)?e+r:null},fromRef:l,fromKiwi:function(e){if(!e)return null;let{guid:n,assetRef:i}=e;if(n&&!i)return s(n);if(!n&&i){let e=r.fromKiwi(i);if(e)return l(e)}return null},isValid:function(e){let n=a(e);if(n)return E.fn(n);let i=o(e);return!!i&&r.isValid(i)}}}!function(e){let r=b("CodeLibraryId:",f.sS);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(i||(i={})),function(e){let r=b("CodeFileId:",f.VP);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(a||(a={})),function(e){let r=b("CodeComponentId:",f.kY);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(o||(o={})),function(e){let r=b("ManagedStringId:",f.iF);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(s||(s={})),function(e){let r=b("ResponsiveSetId:",f.I0);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(l||(l={})),function(e){let r=b("SymbolId:",f.Uw);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(c||(c={})),function(e){let r=b("StateGroupId:",f.Kj);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(d||(d={})),function(e){let r=b("StyleId:",f.$y);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid,e.fromBindingsObj=function(r){return r.guid?e.fromLocalNodeIdStr(r.guid):e.fromRef(r.ref)}}(u||(u={})),function(e){let r=b("VariableID:",f.M4);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(p||(p={})),function(e){let r=b("VariableOverrideId:",f.cI);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(m||(m={})),function(e){let r="VariableSetID:",n=b("VariableCollectionId:",f.iV),i=b(r,f.iV);function a({current:e,deprecated:n}){return i=>i.startsWith(r)?n(i):e(i)}e.INVALID=n.fromLocalNodeIdStr(E.AD),e.toString=n.toString,e.toKiwi=a({current:n.toKiwi,deprecated:i.toKiwi}),e.toGuidObjIfLocal=a({current:n.toGuidObjIfLocal,deprecated:i.toGuidObjIfLocal}),e.toGuidStrIfLocal=a({current:n.toGuidStrIfLocal,deprecated:i.toGuidStrIfLocal}),e.toRefIfSubscribed=a({current:n.toRefIfSubscribed,deprecated:i.toRefIfSubscribed}),e.fromString=a({current:n.fromString,deprecated:i.fromString}),e.fromLocalNodeIdObj=n.fromLocalNodeIdObj,e.fromLocalNodeIdStr=n.fromLocalNodeIdStr,e.fromRef=n.fromRef,e.fromKiwi=n.fromKiwi,e.isValid=a({current:n.isValid,deprecated:i.isValid})}(h||(h={})),function(e){let r=b("ModuleId:",f.UG);e.INVALID=r.fromLocalNodeIdStr(E.AD),e.toString=r.toString,e.toKiwi=r.toKiwi,e.toGuidObjIfLocal=r.toGuidObjIfLocal,e.toGuidStrIfLocal=r.toGuidStrIfLocal,e.toRefIfSubscribed=r.toRefIfSubscribed,e.fromString=r.fromString,e.fromLocalNodeIdObj=r.fromLocalNodeIdObj,e.fromLocalNodeIdStr=r.fromLocalNodeIdStr,e.fromRef=r.fromRef,e.fromKiwi=r.fromKiwi,e.isValid=r.isValid}(_||(_={})),function(e){e.fromKiwi=e=>{if(e.guid)return{type:"guid",guid:E.dI(e.guid)};if(e.stateGroupId){let r=d.fromKiwi(e.stateGroupId);if(r)return{type:"stateGroup",stateGroupId:r}}if(e.symbolId){let r=c.fromKiwi(e.symbolId);if(r)return{type:"symbol",symbolId:r}}(0,y.KF)(!1,"Unhandled CanvasNodeId type")},e.toGuidStrIfLocal=e=>{switch(e.type){case"guid":return e.guid;case"symbol":return c.toGuidStrIfLocal(e.symbolId);case"stateGroup":return d.toGuidStrIfLocal(e.stateGroupId)}},e.toRefIfSubscribed=e=>{switch(e.type){case"guid":return null;case"symbol":return c.toRefIfSubscribed(e.symbolId);case"stateGroup":return d.toRefIfSubscribed(e.stateGroupId)}},e.toString=e=>{switch(e.type){case"guid":return e.guid;case"symbol":return c.toString(e.symbolId);case"stateGroup":return d.toString(e.stateGroupId)}},e.fromString=e=>{let r=c.fromString(e);if(r)return{type:"symbol",symbolId:r};let n=d.fromString(e);return n?{type:"stateGroup",stateGroupId:n}:E.sH(e)?{type:"guid",guid:e}:null}}(g||(g={}))},192187:(e,r,n)=>{n.d(r,{K0:()=>T,wL:()=>b,x1:()=>y});var i=n(108487),a=n(445777),o=n(741419),s=n(480841),l=n(810317),c=n(308769),d=n(731896),u=n(353788),p=n(652815),m=n(300315),h=n(246274),_=n(138798),g=n(933581),f=n(897392);function E(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}let y=1;class b extends Error{}class v extends Error{}class T{get nodeContext(){return this._nodeContext}get scene(){if(this.sceneType===h.G)return o.AlE.getActiveDocument();switch((0,a.KF)("symbol"!=typeof this.sceneType,"this.sceneType cannot be Symbol"),this.sceneType){case o.juq.DETACHED_COMPONENTS:return o.glU.getDetachedComponentsScene();case o.juq.LIVE_FILE:return o.AlE.getDocumentByIndex(0);case o.juq.HISTORY:return o.AlE.getDocumentByIndex(y);case o.juq.PLAYGROUND:return o.glU.getPlaygroundScene();case o.juq.FIRST_DRAFT:return o.XJn.getOrCreateFDScene();case o.juq.LINTER:return o.mHF.getOrCreateLinterScene();case o.juq.AUTO_SUGGEST:throw Error("Auto suggest scene should be retrieved via TSAutoSuggestSceneGraph");default:(0,a.xb)(this.sceneType)}}get isValidScene(){return -1!==this.scene}getConnectorNode(e){let r=this.get(e);return r?.asConnector()??null}getFromStablePath(e){let r=o.UNF.setGlobalUnstableNodeByStablePath(this.scene,e,this.nodeContext);return o.CUU.exists(this.nodeContext)&&r?this.getInternal(r,!1):null}getFromDeveloperFriendlyId(e){let r=o.UNF.setGlobalUnstableNodeByDeveloperFriendlyId(this.scene,e);return o.CUU.exists(this.nodeContext)&&r?this.getInternal(r,!1):null}getCurrentPage(){let e=o.CUU.getCurrentPage(this.nodeContext,this.scene);return e?this.getInternal(e,!1):null}async setCurrentPageAsync(e){if(this.sceneType!==h.G)throw Error("TSSceneGraph.setCurrentPage - Not implemented except for current document");let r=new Promise(e=>{(0,s.o)(e)});o.CUU.setCurrentPageAsync(e,this.nodeContext);let n=await r;if(n)throw Error(n)}async setCurrentPageFromNodeAsync(e){if(this.sceneType!==h.G)throw Error("TSSceneGraph.setCurrentPage - Not implemented except for current document");let r=new Promise(e=>{(0,s.o)(e)});o.CUU.setCurrentPageFromNodeAsync(e,this.nodeContext),await r}createNode(e,r={tracking:o.HzA.TRACK}){let n=o.CUU.createNode(i.w.NodeType[e],r,this.nodeContext,this.scene);if(!n)throw Error(`Cannot create node with type ${e}`);return this.getInternal(n,!1)}createNodeFromSVG(e,r={tracking:o.HzA.TRACK}){let n=o.CUU.createNodeFromSVG(e,r,this.nodeContext,this.scene);if(!n)throw Error("Cannot create node from SVG");return this.getInternal(n,!1)}createComponentFromNode(e){let r=o.CUU.createSymbolFromNode(e,this.nodeContext);if(!r)throw Error(`Cannot create component from node ${e}`);return this.getInternal(r,!1)}isDeveloperFriendlyIdAGuidPath(e){return o.CUU.isDeveloperFriendlyIdAGuidPath(e)}guidFromDeveloperFriendlyId(e){return o.CUU.guidFromDeveloperFriendlyId(e,this.scene)??""}developerFriendlyIdFromGuid(e){return o.CUU.developerFriendlyIdFromGuid(e,this.scene)??""}setChangeListenersConfig(e){this.changeListeners.config=e}onChange(e,r){return this.changeListeners.add(e,r)}onDelete(e){return this.deleteListeners.add(e),()=>this.deleteListeners?.delete(e)}triggerChange(){this.changeListeners.trigger()}triggerDeleteCallbacks(e){for(let r of this.deleteListeners)r(e)}getVariableNode(e){return this.getVariableNodeInternal(e,!0)??void 0}getCodeFileNode(e){if(!e)return;if(!o.mSn)throw new v;let r=o.mSn.getGUIDForAssetId(this.scene,e,o.PWo.CODE_FILE);if(r)return this.get(r)??void 0}getLocalVariableNodes(e){return o.CWU.getLocalVariablesInfoForScene(this.scene).map(e=>this.getVariableNodeInternal(e.id,!1)).filter(r=>!!e?.includeSoftDeleted||!r.isSoftDeleted).filter(r=>e?.resolvedDataType===void 0||r.variableResolvedType===e.resolvedDataType)}createVariable(e,r,n){let i=(0,u.WI)(n),a=o.CUU.createVariable(this.scene,e,r,i),s=c.sD.fromString(a);if(!s)throw Error("Failed to create variable");return this.getVariableNodeInternal(s,!1)}getVariableCollectionNode(e){return this.getVariableCollectionNodeInternal(e,!0)??void 0}getLocalVariableCollectionNodes(e){return o.CWU.getLocalVariableSetsInfoForScene(this.scene).map(e=>this.getVariableCollectionNodeInternal(e.id,!1)).filter(r=>!!e?.includeSoftDeleted||!r.isSoftDeleted)}createVariableCollection(e){let r=o.CUU.createVariableCollection(this.scene,e),n=c.gr.fromString(r);if(!n)throw Error("Failed to create variable collection");return this.getVariableCollectionNodeInternal(n,!1)}getStyleNode(e){return this.getStyleNodeInternal(e,!0)??void 0}getStyleNodeByRef(e){return this.getStyleNodeInternal(o.Pt4.styleIdFromKeyAndVersion(this.scene,e.key,e.version),!0)??void 0}getLocalStyleNodes(e){let r=i.w.StyleType[e];if("number"!=typeof r)throw Error("Invalid style type");return o.glU.getAllLocalStyles(this.scene,r).map(e=>this.getStyleNodeByRef({key:e.styleKey,version:e.versionHash})).filter(e=>!!e)}createStyle(e){let r=i.w.StyleType[e];if("number"!=typeof r)throw Error("Invalid style type");let n=o.CUU.createStyle(r,this.nodeContext,this.scene);if(!n)throw Error("Failed to create style");return this.getStyleNodeInternal(o.Pt4.styleIdFromKeyAndVersion(this.scene,n.key,n.version),!1)}getDirectlySelectedNodes(){return this.getCurrentPage()?.directlySelectedNodes||[]}getInternal(e,r){if(!e)return null;if(!o.UNF)throw new b;let n=(0,l.G)(e,0),i=(0,l.G)(e,e.indexOf(":")+1);return r&&(o.UNF.setGlobalUnstableNodeByID(this.scene,n,i,this.nodeContext),o.CUU&&!o.CUU.exists(this.nodeContext))?null:new _.S(e,this)}getVariableNodeInternal(e,r){if(!e)return null;if(!o.UNF)throw new b;if(!o.mSn)throw new v;let n=o.mSn.getGUIDForAssetId(this.scene,e,o.PWo.VARIABLE)??f.AD,i=(0,l.G)(n,0),a=(0,l.G)(n,n.indexOf(":")+1);return r&&(o.UNF.setGlobalUnstableNodeByID(this.scene,i,a,this.nodeContext),o.CUU&&!o.CUU.exists(this.nodeContext))?null:new d.Q(e,this)}getVariableCollectionNodeInternal(e,r){if(!e)return null;if(!o.UNF)throw new b;if(!o.mSn)throw new v;let n=o.mSn.getGUIDForAssetId(this.scene,e,o.PWo.VARIABLE_SET)??f.AD,i=(0,l.G)(n,0),a=(0,l.G)(n,n.indexOf(":")+1);return r&&(o.UNF.setGlobalUnstableNodeByID(this.scene,i,a,this.nodeContext),o.CUU&&!o.CUU.exists(this.nodeContext))?null:new p.S(e,this)}getStyleNodeInternal(e,r){if(!e)return null;if(!o.UNF)throw new b;if(!o.mSn)throw new v;let n=o.mSn.getGUIDForAssetId(this.scene,e,o.PWo.STYLE)??f.AD,i=(0,l.G)(n,0),a=(0,l.G)(n,n.indexOf(":")+1);return r&&(o.UNF.setGlobalUnstableNodeByID(this.scene,i,a,this.nodeContext),o.CUU&&!o.CUU.exists(this.nodeContext))?null:new m.F(e,this)}applyTextStylingActionToNodes(e,r){return o.CUU.applyTextStylingActionToNodes(e,this.nodeContext,r)}getSlideGrid(){let e=o.CUU.getSlideGrid(this.scene);return e?e.map(e=>e.map(e=>this.getInternal(e,!1))):[]}setSlideGrid(e){let r=e.map(e=>e.map(e=>e.guid));o.CUU.setSlideGrid(r,this.nodeContext,this.scene)}updateDerivedSymbolDataOnPrimaryInstances(e){o.Egt.updateDerivedSymbolDataOnPrimaryInstances(e,this.scene)}updateAll(){new o.vNG(this.scene).updateAll()}runWithPluginContext(e,...r){let n=this.nodeContext;this._nodeContext=o.Sie.PLUGIN;try{return e(...r)}finally{this._nodeContext=n}}combineAsVariants(e,r,n){let i=o.NfO.groupNodes(o.fHP.STATE_GROUP,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(i,!1)}group(e,r,n){let i=o.NfO.groupNodes(o.fHP.GROUP,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(i,!1)}union(e,r,n){let i=o.NfO.groupNodes(o.fHP.UNION,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(i,!1)}subtract(e,r,n){let i=o.NfO.groupNodes(o.fHP.SUBTRACT,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(i,!1)}intersect(e,r,n){let i=o.NfO.groupNodes(o.fHP.INTERSECT,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(i,!1)}exclude(e,r,n){let i=o.NfO.groupNodes(o.fHP.XOR,e.map(e=>e.guid),r.sessionID,r.localID,n??-1,this.scene);return this.getInternal(i,!1)}flatten(e,r,n){let i=o.NfO.flattenNodes(e.map(e=>e.guid),r?.sessionID??-1,r?.localID??-1,n??-1,this.scene);return this.getInternal(i,!1)}ungroup(e){return o.NfO.ungroupNode(e.guid,this.scene).map(e=>this.getInternal(e,!1))}constructor(e,r=h.G){E(this,"sceneType",void 0),E(this,"_nodeContext",void 0),E(this,"getSceneType",void 0),E(this,"getSceneTypeDebugString",void 0),E(this,"get",void 0),E(this,"getOrThrow",void 0),E(this,"getRoot",void 0),E(this,"getInternalCanvas",void 0),E(this,"setCurrentPage_DEPRECATED",void 0),E(this,"changeListeners",void 0),E(this,"deleteListeners",void 0),this.sceneType=r,this.getSceneType=()=>this.sceneType,this.getSceneTypeDebugString=()=>{if(this.sceneType===h.G)return"CURRENT_DOCUMENT";switch((0,a.KF)("symbol"!=typeof this.sceneType,"this.sceneType cannot be Symbol"),this.sceneType){case o.juq.DETACHED_COMPONENTS:return"DETACHED_COMPONENTS";case o.juq.LIVE_FILE:return"LIVE_FILE";case o.juq.HISTORY:return"HISTORY";case o.juq.PLAYGROUND:return"PLAYGROUND";case o.juq.FIRST_DRAFT:return"FIRST_DRAFT";case o.juq.LINTER:return"LINTER";case o.juq.AUTO_SUGGEST:return"AUTO_SUGGEST";default:(0,a.xb)(this.sceneType)}},this.get=e=>this.getInternal(e,!0),this.getOrThrow=e=>this.getInternal(e,!1),this.getRoot=()=>this.getInternal("0:0",!1),this.getInternalCanvas=()=>{if(this.sceneType!==h.G)throw Error("TSSceneGraph.getInternalCanvas - Not implemented except for current document");let e=o.CUU.getInternalCanvas();return e?this.getInternal(e,!1):null},this.setCurrentPage_DEPRECATED=e=>{let r=o.CUU.setCurrentPageAsync(e,this.nodeContext);if(r)throw Error(r)},this.changeListeners=new g.P(g.Q),this.deleteListeners=new Set,this._nodeContext=e}}},791256:(e,r,n)=>{n.d(r,{a:()=>o});var i=n(758159);let a=class{fontResourceStatusChanged(e,r,n){(0,i.dF)(e,r,n)}};function o(){new a}},208720:(e,r,n)=>{function i(e){if(0===e.s)return{r:e.l,g:e.l,b:e.l,a:e.a};let r=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,n=2*e.l-r,i=[0,0,0];for(let a=0;a<3;a++){let o=e.h+-(1/3*(a-1));o<0&&o++,o>1&&o--,6*o<1?i[a]=n+(r-n)*6*o:2*o<1?i[a]=r:3*o<2?i[a]=n+(r-n)*(2/3-o)*6:i[a]=n}return{r:i[0],g:i[1],b:i[2],a:e.a}}function a(e){let r=e.r,n=e.g,i=e.b,a=Math.min(Math.min(r,n),i),o=Math.max(Math.max(r,n),i),s=o-a,l=0;o===a?l=0:r===o?l=(n-i)/s:n===o?l=2+(i-r)/s:i===o&&(l=4+(r-n)/s),(l=Math.min(60*l,360))<0&&(l+=360);let c=(a+o)/2;return{h:l/=360,s:o===a?0:c<=.5?s/(o+a):s/(2-o-a),l:c,a:e.a}}function o(e){let r=(e.h-Math.floor(e.h))*6,n=e.v*e.s,i=n*(1-Math.abs(r%2-1)),a=e.s<=0?0:r<1?n:r<2?i:r<3?0:r<4?0:r<5?i:n,o=e.s<=0?0:r<1?i:r<2?n:r<3?n:r<4?i:0,s=e.s<=0?0:r<1?0:r<2?0:r<3?i:r<4?n:r<5?n:i,l=e.v-n;return{r:a+l,g:o+l,b:s+l,a:e.a}}function s(e){let r=Math.max(Math.max(e.r,e.g),e.b),n=r-Math.min(Math.min(e.r,e.g),e.b);return{h:(0===n?0:r===e.r?((e.g-e.b)/n+6)%6:r===e.g?(e.b-e.r)/n+2:(e.r-e.g)/n+4)/6,s:0===r?0:n/r,v:r,a:e.a}}function l(e){return"l"in e?i(e):o(e)}function c(e){return"l"in e?{...e,s:1,l:.5,a:1}:{...e,s:1,v:1,a:1}}function d(e,r){let n=a(e),o=360*n.h;return i({...n,h:(o+r)%360/360})}function u(e){return 255&(e>0?255*e+.5:0)}function p(e,r,n){return u(e)|u(r)<<8|u(n)<<16|-0x1000000}function m(e){return u(e.red)|u(e.green)<<8|u(e.blue)<<16|u(e.alpha)<<24}function h(e){return{red:(255&e)/255,green:(e>>8&255)/255,blue:(e>>16&255)/255,alpha:(e>>24&255)/255}}function _(e,r){let n=e.alpha,i=r.alpha,a=n*(1-i),o=a+i,s=a/o,l=i/o;return{red:e.red*s+r.red*l,green:e.green*s+r.green*l,blue:e.blue*s+r.blue*l,alpha:o}}function g(e){return{red:e.r,green:e.g,blue:e.b,alpha:e.a}}function f(e){return{r:e.red,g:e.green,b:e.blue,a:e.alpha}}function E(e,r){let n=[];for(let i=0;i<3;i++)n.push(e[i][0]*r[0]+e[i][1]*r[1]+e[i][2]*r[2]);return n}function y(e){return b({l:e.l,ax:e.c*Math.cos(360*e.h*Math.PI/180),bx:e.c*Math.sin(360*e.h*Math.PI/180),a:e.a})}function b(e){let r=E([[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]],[e.l,e.ax,e.bx]),n=E([[1.2268798733741557,-.5578149965554813,.28139105017721583],[-.04057576262431372,1.1122868293970594,-.07171106666151701],[-.07637294974672142,-.4214933239627914,1.5869240244272418]],r.map(e=>e**3)),i=E([[12831/3959,-329/214,-1974/3959],[-851781/878810,1648619/878810,36519/878810],[705/12673,-2585/12673,705/667]],n).map(function(e){let r=Math.abs(e);return r>.0031308?(e<0?-1:1)*(1.055*Math.pow(r,1/2.4)-.055):12.92*e});return{r:i[0],g:i[1],b:i[2],a:e.a}}n.d(r,{Ad:()=>d,I0:()=>y,Ih:()=>c,QR:()=>p,R0:()=>h,aH:()=>f,au:()=>_,bi:()=>m,kE:()=>o,oB:()=>a,oU:()=>g,oq:()=>b,qN:()=>s,w_:()=>l})},256543:(e,r,n)=>{var i,a,o,s;n.d(r,{RR:()=>i,uN:()=>a}),function(e){e.VISIBLE="visible",e.TEXT="text-data",e.OVERRIDDEN_SYMBOL_ID="overridden-symbol-id"}(i||(i={})),function(e){e.TYPED="typed",e.VARIANT="variant"}(a||(a={})),function(e){e.DEFAULT="default",e.SLIDER="slider",e.INPUT="input",e.SELECT="select"}(o||(o={})),function(e){e.GPT="GPT",e.FS="FRAGMENT_SEARCH"}(s||(s={}))},5260:(e,r,n)=>{function i(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}n.d(r,{$C:()=>O,A1:()=>m,A2:()=>K,Ag:()=>P,Bj:()=>$,Bz:()=>X,CJ:()=>ep,DG:()=>N,EU:()=>f,Fe:()=>F,Gh:()=>Y,Iz:()=>en,LY:()=>b,Lz:()=>k,M0:()=>ei,RN:()=>a,RU:()=>j,Rx:()=>B,TC:()=>M,Ud:()=>V,V3:()=>q,Vm:()=>L,WF:()=>z,Z3:()=>x,ZD:()=>S,_L:()=>y,a5:()=>l,aO:()=>G,b_:()=>er,be:()=>ea,c2:()=>C,d1:()=>eo,dJ:()=>ee,d_:()=>ed,di:()=>s,eZ:()=>g,jw:()=>d,k0:()=>_,l5:()=>w,lM:()=>D,mk:()=>U,nn:()=>Q,o$:()=>o,p6:()=>v,pG:()=>el,qP:()=>ec,qQ:()=>W,qV:()=>es,rf:()=>T,rm:()=>c,ry:()=>R,sG:()=>eu,tO:()=>u,tg:()=>p,tz:()=>I,uH:()=>et,vv:()=>J,w4:()=>A,wm:()=>H,xJ:()=>h,yR:()=>Z,yy:()=>E});class a{onMissingEditScope(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onGuardrailViolation(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class o{reportEditAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class s{readyToAcceptAutosaveChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}hasOngoingCommitTask(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}enqueueAutosaveCommit(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}createAutosaveManager(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyAutosaveManager(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isConnected(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class l{logShadowReadSuggestionsOnPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class c{hasAiPermission(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}generateRequestId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}generateSessionId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getSuggestion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class d{jsEchoUintValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}jsEchoUint64Value(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"0"}jsEchoInt64Value(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"0"}jsEchoInt64Struct(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{uvalue:"0",ivalue:"0"}}jsEchoStringValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}jsEchoIntArrayValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoBoolArrayValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoJsonValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}jsEchoJsValue(...e){if(this.shouldThrow)throw Error("Method not implemented.")}jsEchoDeeplyNestedJsValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoIntMapValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}jsEchoIntSetValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Set}jsEchoOptionalStringValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}jsEchoOptionalStringStruct(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{valueOpt2:null}}jsEchoFastParseableStructValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{intValue:0,uintValue:0,int64Value:"0",uint64Value:"0",strValue:"",doubleValue:0,boolValue:!1,guidValue:"-1:-1",structValue:{value:0},arrayIntValue:[],arrayStringValue:[],arrayBoolValue:[],jsValue:void 0}}jsEchoNonFastParseableStructValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{jsonValue:"",intValue:0,uintValue:0,int64Value:"0",uint64Value:"0",strValue:"",doubleValue:0,boolValue:!1,guidValue:"-1:-1",structValue:{value:0},arrayIntValue:[],arrayStringValue:[],arrayBoolValue:[],jsValue:void 0}}jsEchoCallbackValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return()=>{}}getObservableCounter(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getObservableArray(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}jsValueTestsDone(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class u{rerunSearch(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getTextMatches(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}rebuildIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setResultInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFocusAndNavigate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setCategoryCounts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateCategoryCounts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReplace(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMissingFontBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}detectTextTransform(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}applyTextTransform(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getAnnotationTextContent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class p{handleMouseDown(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMouseMove(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMouseUp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createNewCommentAtPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class m{openTemplatePicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class h{trackStyleAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackVariableAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackComponentAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class _{convertEmojiNameToString(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setEmojiTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearEmojiTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isShowingEmojiTypeaheadResults(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setEmojiTypeaheadImageSet(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setEmojiTypeaheadTargetRect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class g{startChat(...e){if(this.shouldThrow)throw Error("Method not implemented.")}closeWheel(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleShortcutPress(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleShortcutRelease(...e){if(this.shouldThrow)throw Error("Method not implemented.")}figPalReact(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class f{requestEditorType(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDeviceInfoForSize(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}presetDeviceSupportsTouch(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}sizeMatchesFramePreset(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getFramePresetForSize(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getCurrentFileName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}isUserPresent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}backToFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}documentIsLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}fullscreenIsReady(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isFontListLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}afterFontsLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFileVersion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewSketchFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewWhiteboardFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewSitesFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewSlidesFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewBuzzFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openFontSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}attemptedSketchFileDrop(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openExportPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openExportSettingsPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openPdfExportSettingsModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openShortcuts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleBrowseAllResourcesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openPreferencesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showNudgeAmountPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openFplDebug(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hidePicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createFeedPost(...e){if(this.shouldThrow)throw Error("Method not implemented.")}findInspiration(...e){if(this.shouldThrow)throw Error("Method not implemented.")}findCodebaseSuggestions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openQuickActionsAssetsTab(...e){if(this.shouldThrow)throw Error("Method not implemented.")}inspectFragment(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleSignedOutEditAttempt(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hasUnsavedChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}shouldSuppressUnsavedChangesUI(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}toggleInteractionRecorderVisibility(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showCanvasContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showSelectLayerContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTextEditModeContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showRulerGuideContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showSelectionContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showLeftPanelTab(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleTeamLibraryModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleComponentInsertModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleVariablesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPublishDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTemplatePublishModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forcePublishStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppPush(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAutosaveVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReturnToInstanceVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReturnToVariantVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPasteWidgetsAsSublayersVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAiContentFillSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearAiContentFillSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMagicLinkSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showUpscaleImageSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPushOverridesVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showVisualBellInf(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showMobileNativeToast(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMobileNativeToastLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellForMultiEdit(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithUndo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithNodesLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellLocalizedInf(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithUrlButtonLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}dismissEphemeralVisualBells(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithDelayLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithCloseButtonLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearVisualBellType(...e){if(this.shouldThrow)throw Error("Method not implemented.")}dismissMobileMediaLoadingToast(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getUserLocale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getNaturalStyleKey(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalizedString(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}closeManageMemoryModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPasteLoadingIndicatorAndPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPromptToMoveLibraryItems(...e){if(this.shouldThrow)throw Error("Method not implemented.")}triggerFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateViewportInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMissingFontDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideMissingFontDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getClipboardData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}canUseClipboardAPI(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}readClipboardData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}readFilesFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}clipboardHasUnsanitizedPng(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}decodePackedHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}decodeMetadataFromHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}detectSpreadsheetDataInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}writeToClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}writeDataToClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}sendSerializedClipboardDataToS3(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSerializedClipboardDataFromS3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}getKeyboardLayout(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}setKeyboardLayoutPreference(...e){if(this.shouldThrow)throw Error("Method not implemented.")}saveUseNumbersForOpacityPreference(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectedStyleProperties(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectedStyleThumbnail(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateStyleThumbnail(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createSavepoint(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}showSavepointModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showBrowserAlert(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleHistoryMode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showViewChangesNotification(...e){if(this.shouldThrow)throw Error("Method not implemented.")}togglePerfHUDVisibility(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleFakeMPActivity(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleTSMERConfig(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showImageScaledDownWarning(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showGIFConvertedAndScaledDownWarning(...e){if(this.shouldThrow)throw Error("Method not implemented.")}checkForImageBackgroundRemoval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}usedKeyboardShortcut(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingPage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingPages(...e){if(this.shouldThrow)throw Error("Method not implemented.")}insertComponentOrShowError__DEPRECATED(...e){if(this.shouldThrow)throw Error("Method not implemented.")}fetchComponentBuffers(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}fetchComponentBufferForSevRepair(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}getLatestPublishedVersionHashForComponent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLatestPublishedVersionForStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}fetchVariableSetBuffers(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}startLoadingDroppedImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}finishLoadingDroppedImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackInteractiveSlideElementInsertedForSprig(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isCopyExportRestricted(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isInWorkshopMode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}requestOpenExternalSourceFileLibraryKey(...e){if(this.shouldThrow)throw Error("Method not implemented.")}validateAndParseURL(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}navigateToURL(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setHyperlinkPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateHyperlinkPopupPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleUserClickOnHyperlink(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setCanvasMentionPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateCanvasMentionPopupPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openHelp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openSupportForum(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openTutorials(...e){if(this.shouldThrow)throw Error("Method not implemented.")}keyboardWillShow(...e){if(this.shouldThrow)throw Error("Method not implemented.")}keyboardWillShowWithHeight(...e){if(this.shouldThrow)throw Error("Method not implemented.")}runLastPlugin(...e){if(this.shouldThrow)throw Error("Method not implemented.")}viewWidgetDetails(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startMovePagesJob(...e){if(this.shouldThrow)throw Error("Method not implemented.")}retrieveMetadataAndSelectBrokenFixedScrollingNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}desktopAppQueueFileForWriting(...e){if(this.shouldThrow)throw Error("Method not implemented.")}desktopAppWriteFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}enableCodegenMcpServer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppExportFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobileCutEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobileCopyEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobilePasteEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppShowContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDefaultOnOTFeatures(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}copyLinkToPage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}generateLinkToNode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}generateLinkToRemoteNode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalGUIDFromUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalVersionIdFromUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}syncPencilStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncBrushStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncPenStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncHighlighterStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncToolStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncCurrentToolSetSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setVideoShouldAutoplay(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendActiveStackRegionAnalytics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getUserName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getIsEmojiWheelOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}openStartingPointFlowInPrototypeViewer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}focusPrototypeStartingPointPanelToEditName(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSentryTag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openTimerModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resendTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMusic(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resendMusic(...e){if(this.shouldThrow)throw Error("Method not implemented.")}activateVotingStampTool(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setActiveAgendaItemId(...e){if(this.shouldThrow)throw Error("Method not implemented.")}escapeAndSaveCSVData(...e){if(this.shouldThrow)throw Error("Method not implemented.")}parseCsvStringAndCreateNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHtmlStringAndCreateNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHtmlStringAndTriggerSmartPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHTMLStringIntoLineDirectionalities(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isNavigatorClipboardWriteSupported(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}onNodePositionChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onSectionPresetPickerCreated(...e){if(this.shouldThrow)throw Error("Method not implemented.")}generateEmbed(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}generateWidgetFromURL(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}handleAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startExportAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendEventToResponsiveContentHandler(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onAgendaChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onFigjamStarterKitAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}canUploadAndEditVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getVariableSetNumberOfModesAllowed(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getDefaultStateKeyForStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}selectPublishedAssetGuids(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}handleZoomActionTriggeredToSetOnboardingFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handlePanActionTriggeredToSetOnboardingFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleNodeCountReachedForMoveDraft(...e){if(this.shouldThrow)throw Error("Method not implemented.")}selectLocalStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}formatDateTime(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setFigjamStarterKitBoundingBox(...e){if(this.shouldThrow)throw Error("Method not implemented.")}loadedCompareChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setUserFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onViewOnlyJiggle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}shouldViewOnlyJiggle(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}upsellLibrariesHandleConsecutivePaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onPlaygroundNodeChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}triggerHaptics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logEnterMode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}evaluateMathExpression(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}changeDocumentColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addWhiteboardToolToRecents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addWhiteboardDiagrammingShapeToRecents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onTilesRendered(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onCreateTable(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onEditTableText(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onNodeDragStart(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onNodeDragEnd(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onCreateSticky(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onDifferentSectionClicked(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onConnectDiagramShapeWithConnector(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onTileRendererChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}afterPageChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}afterComputeViewportSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getNextQueryRequestId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}afterQueryCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}rejectAllSceneGraphQueries(...e){if(this.shouldThrow)throw Error("Method not implemented.")}movedSingleNodeVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createSlideAfterFocusedSlide(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"-1:-1"}generateFlappFromPastedText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiDisabled(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiActionMetered(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiDisabledFigJam(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isInAiExperimentOrGrantlist(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}removeImageBackground(...e){if(this.shouldThrow)throw Error("Method not implemented.")}upscaleImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}autoRenameLayers(...e){if(this.shouldThrow)throw Error("Method not implemented.")}autoRenameLayersDevHandoff(...e){if(this.shouldThrow)throw Error("Method not implemented.")}regenerateText(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openMakePrototypeModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isMagicLinkDone(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isMagicLinkDoneToastShowing(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}linkToComponent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getLabValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}hasAiRenameLayersPermission(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}logFullscreenActionToDatadogRum(...e){if(this.shouldThrow)throw Error("Method not implemented.")}designToCodeFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}generateCodeLayerPreview(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}clearCodeLayerPreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}bulkExportDesignsToReact(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onDirectExportCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSitesViewFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSitesViewCode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSitesViewCms(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSitesInsertsOverlay(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setAnnotationEditingIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class E{fontResourceStatusChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class y{connect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}disconnect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}send(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class b{getDefaultDocumentColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getCanvasColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getUserColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class v{getIsExtension(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setNodesReady(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setNodesCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forwardExportsToExtension(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showStatusContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isStatusContextMenuShowing(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showAnnotationsButtonContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isDevModeOverview(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}exitDevModeFocusOrOverview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}shouldAvoidScaling(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class T{nodeChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class I{createMouseBehavior(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tableUiReorderHandleHoveredLength(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}tableUiAddButtonHoveredRadius(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class S{updateViolationsForNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class w{setMentionsTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearMentionsTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isShowingMentionsTypeaheadResults(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setMentionsTypeaheadTargetRect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startSearchSession(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}endSearchSession(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}showVisualBellForPastedMentions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class A{getPdfSource(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}resetPdfSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}convertPdfToScene(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class C{selectionChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}boxSelectionEnded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}currentPageChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}timerChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}slidesViewChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}documentChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}codegenPreferencesChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stackInvariantsEnforced(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pluginPageLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pluginAccessibleNodeIds(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}pluginAccessiblePages(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class N{setSitesViewState(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class L{getAPIName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getSuggestionsForWord(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}spellCheckText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}runTextReviewPlugin(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}shouldEnableWhenFirstActivated(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class O{isQuickActionsShown(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class R{isMinimizedInUI3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class P{pasteVariablesWithLocalizationPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class D{reconnectingStarted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reconnectingSucceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorHidden(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorUnhiddenFromObserver(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorUnhiddenFromConnectionCount(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyEditorConvertedToViewer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSaveStatus(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateMultiplayerState(...e){if(this.shouldThrow)throw Error("Method not implemented.")}restartPresentation(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPresentationStoppedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}cancelPresentationStoppedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setBackgroundFlushInterval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startMonitorInterval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMultiplayerSignal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showRestoreComponentDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showComponentRemovedDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isWindowActive(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}buildMultiplayerUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}requestedChunkedFileLoad(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}socketBufferedAmount(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}prettyPrintMessage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reconnectSequenceNumberChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class M{showEyedropper(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideEyedropper(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintsWithFillEncodedPaints(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionImages(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintsWithStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updatePaintsDirectlyOnSingleNodeWithFillEncodedPaints(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updatePaintsDirectlyOnSingleNodeWithStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearSelectionPaintsDueToLimitExceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintFromDropper(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}pickerHasSelectionPaintOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}originalPaintForCurrentSelectionPaintsPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}colorPickerSelectedVariable(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}clearSelectionTextAndEffectStylesDueToLimitExceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionTextAndEffectStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isPrototypingModalOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}validateCopyBuffer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class k{handleConnect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addUser(...e){if(this.shouldThrow)throw Error("Method not implemented.")}removeUser(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMouseCursor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMousePosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setIsHoveringWidgetWithHiddenCursors(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setHighFiveStatus(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setChatMessage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFocusOnTextCursor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setVoiceMetadata(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleReactionFromServer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendReaction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class F{clearTemplatePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class x{getEyedropperContext(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}updateEditPaletteModalColor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isCustomPaletteApplied(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showSectionPresets(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class U{dispatchAction(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getCustomKeyboardShortcuts(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}getDisplayStringFromKey(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getKeyboardShortcutFromText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getTextFromKeyboardShortcut(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class B{trackFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackDefinedEventFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetDefinedAnalyticsForDocument(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportConsecutiveFlushes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportConsecutiveImageChangeSkips(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextRestore(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportBranchingLoadTime(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportMultiplayerRoundTripTime(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportPerfEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportQuantizedColorEqualsUse(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextLost(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextRestored(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportDirtyAfterLoad(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryReportError(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startPerfTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stopPerfTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stopOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}pauseOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resumeOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryStopOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}trySetAttributeOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryGetAttributesOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}addToDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}removeDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDistributionAnalyticsProperties(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}resetDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportRenderLayerCount(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerAnimationActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportNonIndependentLayerAnimationActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportRenderedTileBytesUsed(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportAnimationFromCpp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportAnimationFromTs(...e){if(this.shouldThrow)throw Error("Method not implemented.")}recordRenderingEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}saveRenderingTrace(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerAdded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerRemoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logNumericMetric(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logStringMetric(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleAllocationFailureWithNative(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}slogFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class V{getDefaultPencilStrokeWeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getDefaultHighlighterStrokeWeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class G{isUI3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showUI3Colors(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showUI3ColorsInitialValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class H{readSync(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}writeSync(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class K{decodeImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}encodeImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}scaleImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}cancelCurrentImageWorkers(...e){if(this.shouldThrow)throw Error("Method not implemented.")}init(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class W{createVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}deleteVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWidth(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getHeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getCoverImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}loadVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}copyVideoPermissions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}copyVideoPermissionsFromLibraryKey(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSignedUrls(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}setExternalSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}loadAllVideos(...e){if(this.shouldThrow)throw Error("Method not implemented.")}contextLost(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class z{autoSegmentNodesByRegion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}shouldRunSimpleStackDetection(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}runMakeResponsiveHeuristics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackShouldShowMSALOnboarding(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyAllAutoLayout(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}makeResponsive2(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class ${getUserId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getUserLocale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}hasUserFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class Y{markMissingFontScannerAsComplete(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class j{submitDeveloperRelatedLinks(...e){if(this.shouldThrow)throw Error("Method not implemented.")}didGetNodeStatusChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isVariableAvailableInLibraryAsset(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class q{copyImagePermissions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}copyImagePermissionsFromLibraryKey(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setImageDownloadPriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forceDownloadImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSignedUrls(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}getImageHostDomain(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setMinimumImagePriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forgetImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setImageDecodePending(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearImageDecodePending(...e){if(this.shouldThrow)throw Error("Method not implemented.")}downloadEmoji(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}markImageUploading(...e){if(this.shouldThrow)throw Error("Method not implemented.")}markImageUploaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startUploadingImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pendingUploadStats(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[new Set,new Set]}logDebugInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pauseImageDownloads(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resumeImageDownloads(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExternalSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}staticAssetWithPath(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class X{rgbaToThumbhash(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}thumbhashToRgba(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{rgba:new Uint8Array,width:0,height:0}}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class Z{readRichTextFromHtml(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}createHtmlFromTextNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}createHtmlFromTextData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class J{getParsedCodeTokens(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getBackgroundColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLineNumberColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getCursorColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class Q{onInsertFromExisting(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onImpression(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}mountWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mountWidgetLowPriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackSelectionStateInteraction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clickWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}queueRender(...e){if(this.shouldThrow)throw Error("Method not implemented.")}renderFirstPartyWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isRenderingWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}runPropertyMenuCallback(...e){if(this.shouldThrow)throw Error("Method not implemented.")}terminateRunningWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clickHyperlink(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWidgetIconBuffer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}onTextEditEnd(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showNonInteractableWidgetTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logMultipleInputEditorsInWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stickableAdded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stickableRemoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}canInteractWithWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}canViewWidgetDetails(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class ee{prefersReducedMotion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}debounceNodeResizeUpdate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}debounceNodeMovementUpdate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceDomChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWCAG2Contrast(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class et{onFrameDistributionTrackedEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class er{isCustomPaletteColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class en{clearSlideThemeStylePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncSlideThemeAtom(...e){if(this.shouldThrow)throw Error("Method not implemented.")}computeThemeSwapColorVariableMapping(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class ei{updatePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateDirtyResponsiveSets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setLeftPanelTabToCode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}closeCodeWindowForNodeId(...e){if(this.shouldThrow)throw Error("Method not implemented.")}markCodeNodesDirty(...e){if(this.shouldThrow)throw Error("Method not implemented.")}refactorAndConvertToCodeLayerAsync(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openCodeWindowForNodeId(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncNodeSourceCode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getAutomaticCodeFileNameForNodeName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}updateCodeSnapshotState(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getTimestampForCodeSnapshotInvalidatedAt(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}isCodeSnapshotStale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}resnapshotIfStale(...e){if(this.shouldThrow)throw Error("Method not implemented.")}regenerateDerivedCodeFileDebounced(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class ea{isInOrg(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class eo{getSummaryAsClipboardText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class es{calculateColorWithRampValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}calculateColorWithRelativeAdjustment(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getRampValueForColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class el{isZombieStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class ec{storeVariableData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}fetchVariableData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class ed{syncChangedSubscribedConsumptions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetMirrorCache(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class eu{syncAddedOrChangedAssets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncRemovedAssets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetMirrorCache(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class ep{windowSetupComplete(...e){if(this.shouldThrow)throw Error("Method not implemented.")}windowHandleBeforeTick(...e){if(this.shouldThrow)throw Error("Method not implemented.")}initPrefersReducedMotion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyWindow(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTitle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}title(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}alert(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTextCaretBounds(...e){if(this.shouldThrow)throw Error("Method not implemented.")}usingMultiTouchPointerEvents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setExpectingTextInput(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExpectingCopyCutEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExpectingPasteEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}execCommandCopy(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}readClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}writeClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}clearClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryToReadFromClipboardAsBlobInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToReadSubstringFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToReadFilesFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToDetectSpreadsheetDataOnClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}tryToDetectLineDataOnClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}writeToClipboardAsBlobInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}focusView(...e){if(this.shouldThrow)throw Error("Method not implemented.")}viewWithFocus(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}},809431:(e,r,n)=>{n.d(r,{D7:()=>p,K:()=>o,PT:()=>f,SJ:()=>E,T_:()=>u,V1:()=>c,cQ:()=>m,cp:()=>h,qB:()=>d,qI:()=>s,rj:()=>l});var i=n(445777);function a({baseUrl:e,shouldUseLocalFontIndex:r}){return void 0!==e?e:r?"http://localhost:8003/font":window.location?.hostname==="figma-gov.com"?"https://static.figma-gov.com/font":"https://static.figma.com/font"}function o(e){return`${a(e)}/${function(e){let r=e.shouldUse250317Index?"798305269cb5be7625b77c5a0ed170a8":"168b60c183c56896337507ffc5acc38f";switch(e.format){case"json":return`index_${r}.json`;case"kiwi":return`index_${r}.kiwi.json`;default:(0,i.xb)(e.format)}}(e)}`}let s="SFPro",l="SF Pro",c="SF Pro Rounded",d="SFCompact",u="SF Compact",p="SF Compact Rounded",m={[l]:s,[c]:s,[u]:d,[p]:d};function h(e,r){let n=r.sfProFontEnabled&&e===s?"Inter_1":e;return`${a(r)}/${n}`}let _={thin:100,extralight:200,light:300,regular:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},g={100:"Thin",200:"Extra Light",300:"Light",400:"Regular",500:"Medium",600:"Semi Bold",700:"Bold",800:"Extra Bold",900:"Black"};function f(e){return{fontWeight:_[e.replace(/italic/gi,"").replace(/ /g,"").toLowerCase()]??400,italic:e.includes("Italic")}}function E(e,r){if(!e)return r?"Italic":"Regular";let n=g[e]??"Regular";return r?"Regular"===n?"Italic":`${n} Italic`:n}},952423:(e,r,n)=>{n.d(r,{DS:()=>d,F0:()=>p,GI:()=>_,Ji:()=>y,MT:()=>h,O5:()=>f,Ql:()=>E,Si:()=>l,UP:()=>v,hD:()=>c,hV:()=>o,kh:()=>b,oY:()=>m,rV:()=>u});var i=n(505567),a=n(179703);function o(e,r){let n=r(e);if("stop"===n||"skip"===n)return n;for(let n of e.childrenNodes)if("stop"===o(n,r))return"stop"}function s(e,r){return e.get(r)?.parentNode||null}function l(e,r,n){let i=s(e,r);for(;i;){if("CANVAS"===i.type||"DOCUMENT"===i.type)return;if("stop"===n(i))break;i=i.parentNode}}function c(e,r,n){let i=e.get(r);i&&"stop"!==n(i)&&l(e,r,n)}function d(e,r){let n=[];return l(e,r,e=>{n.push(e)}),n}function u(e,r,n){if(r===n)return!0;let i=s(e,n);for(;i;){if(i.guid===r)return!0;i=i.parentNode}return!1}function p(e,r){let n=0,i=e.get(r)||null;for(;i&&"CANVAS"!==i.type&&"DOCUMENT"!==i.type;)n++,i=s(e,i.guid);return n}function m(e){return"VECTOR"===e||"STAR"===e||"LINE"===e||"ELLIPSE"===e||"RECTANGLE"===e||"REGULAR_POLYGON"===e||"ROUNDED_RECTANGLE"===e}function h(e){return"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"MEDIA"===e||"SECTION_OVERLAY"===e||"TABLE"===e}function _(e){return"STAMP"===e.type||"ROUNDED_RECTANGLE"===e.type&&e.name?.includes("FigJam Stamp Icon")}function g(e,r){return r&&"CANVAS"===r.type&&r.visible&&(0,i.F)(e.type)&&e.visible}function f(e,r){let n=[],i=e.get(r);if(!i)return[];for(let r of i.uiOrderedChildren){let a=e.get(r);a.isResponsiveSet&&g(a,i)&&n.push(a)}return n}function E(e,r){let n=null;return l(e,r,e=>{if(!n){if("NONE"!==e.scrollDirection)return n=e,"stop";{let r=e.parentNode;if(r&&g(e,r))return n=e,"stop"}}}),n}function y(e){let r=null,n=e.parentNode;for(;n;){if(n.isStackOrFixedSizeContainer){r=n;break}n=n.parentNode}return r}function b(e,r){let n=null;return c(e,r,e=>{let r=e.parentNode;r&&r&&("CANVAS"===r.type||"SECTION"===r.type)&&r.visible&&(0,i.F)(e.type)&&e.visible&&"SECTION"!==e.type&&(n=e)}),n}function v(){let e=(0,a.UN)(),r=[];return o(e.getRoot(),e=>{r.push(e.guid)}),r}},206651:(e,r,n)=>{n.d(r,{$P:()=>l,M7:()=>c,Ms:()=>o,UC:()=>s,eX:()=>u,nM:()=>d,s4:()=>i});var i,a=n(781131);!function(e){e.NONE="NONE",e.FILL="FILL",e.STROKE="STROKE",e.TEXT="TEXT",e.EFFECT="EFFECT",e.GRID="GRID"}(i||(i={}));let o={inheritEffectStyleKey:"inheritEffectStyleName",inheritExportStyleKey:"inheritExportStyleName",inheritFillStyleKey:"inheritFillStyleName",inheritFillStyleKeyForStroke:"inheritFillStyleNameForStroke",inheritGridStyleKey:"inheritGridStyleName",inheritTextStyleKey:"inheritTextStyleName"},s={inheritEffectStyleKey:"softDeletedEffectStyleId",inheritExportStyleKey:"softDeletedExportStyleId",inheritFillStyleKey:"softDeletedFillStyleId",inheritFillStyleKeyForStroke:"softDeletedFillStyleForStrokeId",inheritGridStyleKey:"softDeletedGridStyleId",inheritTextStyleKey:"softDeletedTextStyleId"};function l(e){return!!e?.key}function c(e){return e.startsWith("S:")}function d(e){return e&&l(e)?`S:${e.key},${e.version||""}`:""}function u(e){if(!e||!c(e))return null;let r=e.substring(2).split(",");if(!r||2!==r.length)return null;let n=(0,a.n3)(r[0]),i=(0,a.IA)(r[1]);return n===a.n3.INVALID?null:{key:n,version:i}}},101595:(e,r,n)=>{n.d(r,{N4:()=>l,eS:()=>c,iL:()=>s,jS:()=>d});var i=n(519246),a=n(741419);let o={};function s(){return o}function l({isProduction:e,executeEmscriptenJS:r}){let n,a;let s=(0,i.n)();(o={}).instantiateWasm=function(e,r){return n=e,a=r,{}},s.Module=o;let l=!1;e||Object.defineProperty(o,"wasmOffsetData",{get:()=>(l=!0,{offset_map:{},func_starts:[],name_map:{},import_functions:0}),set:()=>{}});try{r(),l&&(o.emscripten_realloc_buffer??o.growMemory)(0x60000000)}finally{delete s.Module}if(void 0===n)throw Error('Expected WebAssembly code to set "imports"');if(void 0===a)throw Error('Expected WebAssembly code to set "receiveInstance"');return{imports:n,receiveInstance:a,getReservedHeapSize:()=>o.HEAPU8.buffer.byteLength}}function c(){let e=(0,i.n)(),r=e.executeFullscreenEmscriptenCode;return delete e.executeFullscreenEmscriptenCode,r}function d({callMain:e,tsApisForCpp:r,registerRefreshCallback:n,leakBindings:s}){let l=(0,i.n)();try{l.tsapi_init=(e,r)=>{(0,a.LQj)(e),n?.(r)},l.tsApisForCpp=r,o.jsHelpers=r.jsHelpers,e()}finally{s||(delete l.tsapi_init,delete l.tsApisForCpp)}}},53620:(e,r,n)=>{n.r(r),n.d(r,{BOOLEAN_TYPE_REPR:()=>i.oo,COMPONENT_PREFIX:()=>a.FE,CUSTOM_IMAGE_TYPE_STR:()=>i.Vk,IMAGE_NAME_FORMAT:()=>a.Ii,IMAGE_TYPE_REPR:()=>i.dX,STRING_TYPE_REPR:()=>i.NU,cleanComponentPropNameForUsage:()=>a.j3,extractModifiersFromProp:()=>a.rB,filterComponentProps:()=>l.A,getComponentInfoById:()=>i.Ye,getComponentInfoByIdUncached:()=>i.Z1,getComponentJSXName:()=>a.WG,getInstanceIdsForDef:()=>a.wn,getInstanceNodeProps:()=>c.Y,getNestedImageNodes:()=>a._j,getNodeParentPath:()=>o.yu,getTypeInfoCached:()=>i.NY,groupByCommonPrefixSorted:()=>a.hM,isPartOfGroup:()=>o.Se,moveNumbersToEnd:()=>s.wP,resetTypeInfoCache:()=>i.UY,toCamelCase:()=>s.Cb,toTitleCase:()=>s.Sn,usagePropsToRawProps:()=>c.R});var i=n(63585),a=n(337880),o=n(875420),s=n(997789),l=n(404155),c=n(345131)},209254:(e,r,n)=>{n(794973),n(194715),n(955411)},955411:(e,r,n)=>{async function i(){return await n.e(1470).then(n.bind(n,161470))}n.d(r,{_o:()=>i}),n(548746),n(194715)},394273:(e,r,n)=>{n(870879);var i=n(194715);n(209254),i.Q_,i.cq,i.Eo,i.SR,i.ut},753846:(e,r,n)=>{n.d(r,{_o:()=>a._o,f6:()=>i.f6}),n(394273);var i=n(194715);n(548746),n(870879),n(209254);var a=n(955411)},953015:(e,r,n)=>{n.r(r),n.d(r,{deserializeJSX:()=>i.LZ,deserializeJSXElement:()=>i.BZ,generateComponentsSchema:()=>o.D,generateSchema:()=>a.B,getReactFunctionComponentDefinition:()=>s.g,reconcileJSX:()=>i.Go,reconcileJSXElement:()=>i.m,serializeJSX:()=>i.oy});var i=n(404361),a=n(353188),o=n(166565),s=n(562739)},171638:(e,r,n)=>{n.d(r,{Ed:()=>i.Ed});var i=n(930079);n(138430),n(741419),n(179703),n(961233),n(530429)},138430:(e,r,n)=>{n.d(r,{KY:()=>d,Pm:()=>g,c1:()=>l,h:()=>c,iz:()=>p,jd:()=>u,qK:()=>_,rt:()=>h,s$:()=>f,v6:()=>m});var i=n(445777),a=n(961233),o=n(64290),s=n(530429);function l(e){let r=e.slice(1).join(o.rR);if("transparent"===r)return[];let n=r.split("/"),i=n[0],l=n[1]??"",c=a.Fy[i]??(0,o.G2)(i);if(!c||!c.match(/^#?[0-9a-f]{3,8}$/i))return null;if(!l||!a.KF[l])return c;let d=(0,s.QW)(c);return d&&a.KF[l]&&(d.a=a.KF[l]??1),d}function c(e){return a.UF[e]||`[${e.toFixed(0)}px]`}function d(e){return a._L[e]||`[${e.toFixed(0)}px]`}function u(e){return a.hN[e]||`[${e.toFixed(0)}]`}function p(e){let r=e.toLowerCase(),n=a.c[r];if(n)return n;if(/^#[0-9A-Fa-f]{3}$/.test(r)){let e="#"+r.slice(1).split("").map(e=>e+e).join(""),n=a.c[e];if(n)return n}return`[${r}]`}function m(e,r){let n=a.uZ[e];return!r?.alwaysUsePreciseValues&&e>=999?"-full":"string"==typeof n?n?`-${n}`:"":`-[${e.toFixed(0)}px]`}function h(e,r){switch(r){case"PIXELS":{let r=a.dP[e];if(r)return r;return`[${e.toFixed(0)}px]`}case"PERCENT":for(let[r,n]of Object.entries(a.u0))if(Math.round(100*n)===Math.round(e))return r;return`[${e.toFixed(0)}%]`;default:(0,i.xb)(r)}}function _(e){let r=parseFloat(e.toFixed(2)).toString();return["0","2","4","8"].includes(r)?`${r}`:`[${r}px]`}function g(e){let r=parseFloat(e.toFixed(2));return a.dJ[r]||`[${r.toString()}]`}function f(e,r){return r<0?`-${e}-${c(-r)}`:`${e}-${c(r)}`}},64290:(e,r,n)=>{n.d(r,{G2:()=>l,Hc:()=>o,kX:()=>s,mu:()=>u,rR:()=>d});var i=n(202832);let a=/^\[(?:([a-z-]+):)?(.+)\]$/i;function o(e,r=0){let n=a.exec(e);if(n&&n[2].endsWith("px")){let e=n[2].slice(0,n[2].length-2);if(r>0){let r=Number(e);return isNaN(r)?null:Number(r.toFixed(2))}return i.y$.isInteger(e)?Number(e):null}return null}function s(e){let r=a.exec(e);if(r&&r[2].endsWith("%")){let e=r[2].slice(0,r[2].length-1);return i.y$.isInteger(e)?Number(e):null}return null}function l(e){let r=a.exec(e);return r&&r[2].startsWith("#")?r[2]:null}let c=/\s+/,d="-";function u(e){let r=(0,i.QP)(e),n=r.includes("flex-col")?"vertical":"horizontal";return r.split(c).map(e=>({...function(e){let r=!1,n=e.split(d);return""===n[0]&&1!==n.length&&(r=!0,n.shift()),{classParts:n,isNegative:r,className:e}}(e),flexDirection:n}))}},539406:(e,r,n)=>{n.d(r,{J3:()=>i.J3});var i=n(781070);n(770131),n(283106),n(227796)},530429:(e,r,n)=>{n.d(r,{QW:()=>a,si:()=>c});var i=n(121641);function a(e){if(!e)return null;e=e.replace(/^#([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,(e,r,n,i,a)=>"#"+r+r+n+n+i+i+(a?a+a:""));let r=/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);return r?{r:parseInt(r[1],16)/255,g:parseInt(r[2],16)/255,b:parseInt(r[3],16)/255,a:void 0===r[4]?1:parseInt(r[4],16)/255}:null}i.z.object({r:i.z.number().min(0).max(1),g:i.z.number().min(0).max(1),b:i.z.number().min(0).max(1),a:i.z.number().min(0).max(1)}).describe("@name(RGBA)");let o=e=>("00"+Math.round(255*e).toString(16).toUpperCase()).substr(-2),s=e=>`${o(e.r)}${o(e.g)}${o(e.b)}`,l=(e,r=1)=>`${o(e.r)}${o(e.g)}${o(e.b)}${o(e.a*r)}`;function c(e,r=1){if(1===e.a&&1===r){let r=s(e);return r[0]===r[1]&&r[2]===r[3]&&r[4]===r[5]?`#${r[0]}${r[2]}${r[4]}`:`#${r}`}{let n=l(e,r);return n[0]===n[1]&&n[2]===n[3]&&n[4]===n[5]&&n[6]===n[7]?`#${n[0]}${n[2]}${n[4]}${n[6]}`:`#${n}`}}},281542:(e,r,n)=>{n.d(r,{__:()=>p}),n(719670);n(53620),n(171638);var i=n(202832),a=n(708067),o=n(890984);function s(...e){return(0,i.QP)(e.join(" "))}function l({type:e,props:r,children:n}){let i=[],{description:a,w:l,aspect:c,className:d,sharedPluginData:u}=r,p=36;if("string"==typeof l){let e=(0,o.qM)("w",l);e&&i.push(e),l in o.tr&&(p=o.tr[l])}else"number"==typeof l&&(p=l,i.push((0,o.vE)("w",l)));return"video"===c?i.push((0,o.vE)("h",9*p/16)):i.push((0,o.vE)("h",p)),{type:e,props:{name:a??"Image description",sharedPluginData:{...u??{},isImage:"true",description:a},className:s("flex p-2 bg-[#eee]",...i,d??"")},children:n??[]}}function c({type:e,props:r,children:n}){let{name:i,className:a}=r,l="string"==typeof a?a:"",c={className:s(o.Wo,(0,o.xe)(l),l)};return i&&"string"==typeof i&&(c.name=i),{type:e,props:c,children:n}}function d({type:e,props:r}){let{className:n,msg:i}=r;return{type:e,props:{className:s("flex justify-center items-center",("string"==typeof n?n:"")??"","border bg-red-100 border-red-100")},children:[{type:"Text",props:{},children:[i]}]}}a.Xo,a.Ls,a.W7,a.jJ,a.wv,a._A,a.Fj,a.O5,n(975441);var u=n(179703);function p({rootNodes:{includeSelection:e,dsKitKey:r,pageChildrenName:n,useAllPages:i}={}}){let a=[],o=(0,u.UN)();if(r?.type==="1P_LIBRARY"||r?.type==="USER_LIBRARY"){let e=o.getInternalCanvas();e&&a.push(e)}if(i){let e=o.getInternalCanvas();o.getRoot().childrenNodes.forEach(r=>{"CANVAS"===r.type&&r.guid!==e?.guid&&a.push(r)})}else{let e=o.getCurrentPage(),n=r?.type==="LOCAL"&&r.pageId?o.get(r.pageId):e;n&&a.push(n)}if(0===a.length||a.some(e=>!e||"CANVAS"!==e.type))return[];let s=[];for(let r of a)if(r){if(e&&s.push(...r.directlySelectedNodes),n)for(let e of r.reversedChildrenNodes){var l,c;l=e.name,c=n,(l=l.replace(/[^0-9a-z]/gi,"").toLowerCase())===(c=c.replace(/[^0-9a-z]/gi,"").toLowerCase())&&s.push(e)}else s.push(r)}return s}n(902931),n(615530);var m=n(121641);m.z.object({runtimeDuration:m.z.number(),firstByteReceivedAtOffset:m.z.number(),jsxStreamDuration:m.z.number(),numComponents:m.z.number(),componentLookupSuccesses:m.z.number(),primitiveComponents:m.z.number(),componentLookupFailures:m.z.number(),numImages:m.z.number(),imageFailures:m.z.number(),imageSuccesses:m.z.number(),imageBlocked:m.z.number(),firstImageLoadedAtOffset:m.z.number(),lastStreamByteReceivedAtOffset:m.z.number(),imageDurations:m.z.array(m.z.object({start:m.z.number(),end:m.z.number(),duration:m.z.number(),status:m.z.enum(["success","failure","blocked"])}))})},643774:(e,r,n)=>{n.d(r,{EK:()=>_,_A:()=>h});var i=n(121641);let a=i.z.object({type:i.z.literal("toolCall"),toolCallId:i.z.string(),toolName:i.z.string(),partialArgs:i.z.record(i.z.string(),i.z.any())}),o=i.z.object({type:i.z.literal("toolResult"),toolCallId:i.z.string(),toolName:i.z.string(),result:i.z.any()}),s=i.z.discriminatedUnion("type",[i.z.object({type:i.z.literal("node"),guid:i.z.string(),code:i.z.string().describe("Design2React output").optional()}),i.z.object({type:i.z.literal("image"),guid:i.z.string(),image:i.z.string().describe("Image data URI").optional()})]),l=i.z.object({filePath:i.z.string(),snippetStartLine:i.z.number().describe("A 1-indexed line number for the start of the snippet"),tagLine:i.z.number().describe("The line that the selected element / tag is on. Also 1-indexed"),snippet:i.z.string(),tagName:i.z.string(),fileImports:i.z.string().optional(),componentHeader:i.z.string().optional()}),c=i.z.object({plainText:i.z.string(),code:i.z.string().optional(),hidden:i.z.boolean().optional().describe("Used to hide automatic error handling messages, which are obfuscated from the user.")}),d=c.merge(i.z.object({files:i.z.record(i.z.string(),i.z.string()).optional(),imports:s.array().optional(),inspectedElement:l.optional(),errors:i.z.array(i.z.string()).optional()})),u=c.merge(i.z.object({reasoning:i.z.array(i.z.union([i.z.object({text:i.z.string(),signature:i.z.string().optional()}),i.z.object({data:i.z.string()})])).optional()}));c.merge(i.z.object({type:i.z.literal("restore"),restoredTo:i.z.string().optional()}));let p=i.z.object({role:i.z.literal("user"),content:i.z.discriminatedUnion("type",[i.z.object({type:i.z.literal("content")}).merge(d)]),nodeThumbnailBase64:i.z.string().optional()}),m=i.z.discriminatedUnion("role",[i.z.object({role:i.z.literal("assistant"),content:i.z.union([i.z.object({type:i.z.literal("content")}).merge(u),i.z.object({type:i.z.literal("toolCalls"),toolCalls:i.z.array(a)})])}),p,i.z.object({role:i.z.literal("tool"),toolCallId:i.z.string(),toolName:i.z.string(),result:i.z.any()})]),h=i.z.object({chats:m.array(),modelConfig:i.z.string(),files:i.z.record(i.z.string(),i.z.string()),systemPromptOverride:i.z.string().optional(),supabase:i.z.object({projectId:i.z.string().optional(),publicAnonKey:i.z.string().optional(),fileKeyPrefix:i.z.string().optional()}).optional()});i.z.enum(["work"]);let _=i.z.discriminatedUnion("type",[a,o,i.z.object({type:i.z.literal("message"),message:i.z.string()}),i.z.object({type:i.z.literal("code"),code:i.z.string(),file:i.z.string(),reset:i.z.boolean().optional()}),i.z.object({type:i.z.literal("reasoning"),reasoning:i.z.string()}),i.z.object({type:i.z.literal("reasoning-signature"),signature:i.z.string()}),i.z.object({type:i.z.literal("redacted-reasoning"),data:i.z.string()}),i.z.object({type:i.z.literal("heartbeat")}),i.z.object({type:i.z.literal("plan"),message:i.z.string()}),i.z.object({type:i.z.literal("work"),message:i.z.string()}),i.z.object({type:i.z.literal("summary"),message:i.z.string()})]);i.z.object({files:i.z.record(i.z.string(),i.z.string())})},741789:(e,r,n)=>{function i(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}n.d(r,{G1:()=>a});class a extends Error{constructor(e,r,n,a,o){super(n??function(e){let r=e.message;return"string"==typeof r?r:void 0}(r)??`CortexError of type ${e}`),i(this,"type",void 0),i(this,"data",void 0),i(this,"trace",void 0),i(this,"metadata",void 0),i(this,"sentryTags",void 0),null!=a&&(this.stack=a),void 0!==o&&(this.trace=o),this.type=e,this.data=r}}},766139:(e,r,n)=>{n.r(r),n.d(r,{CLIPTextImageEmbeddingsAPIError:()=>o.dW,CLIPTextImageEmbeddingsInvalidSchemaError:()=>o.jr,ClientContentLengthLimitExceededError:()=>o.j0,ClientNoTextSelectedError:()=>o.b6,ContentFillIncorrectNumberOfResultsError:()=>o.Es,ContentFillParsingError:()=>o.Dr,CortexClientError:()=>o.jG,CortexErrorV2:()=>i.G,CortexProviderAPIError:()=>o.HW,CortexProviderSDKError:()=>o.HA,CortexRateLimitExceededError:()=>o.qD,CortexServerError:()=>o.XA,CortexSetupError:()=>o.BA,FigjamClusterToolNotCalledError:()=>o.dJ,FigjamTemplateParsingError:()=>o.dr,FigjamVisualParsingError:()=>o.b3,GeneratePromptNoKitKeyOrIsLocalError:()=>o.gU,GeneratePromptNoTemplateError:()=>o.Bq,ImageCreationError:()=>o.Bv,ImageRequestError:()=>o.Nv,InvalidCoreFunctionArgumentError:()=>o.oW,InvalidDataContentError:()=>o.tm,InvalidImageSizeError:()=>o.AY,InvalidModelError:()=>o.DT,InvalidPromptArgumentError:()=>o.x0,InvalidProviderError:()=>o.d8,MeterExceededError:()=>o.NZ,NoFallbackError:()=>o.Gx,NotImplementedError:()=>o.EH,OfflineError:()=>o.M_,OutOfDateFeatureVersionError:()=>o.CV,PayloadTooLargeError:()=>o.O3,ProviderContentLengthLimitExceededError:()=>o.FA,ProviderEmptyResponseError:()=>o.cD,ProviderInvalidResponseDataError:()=>o.ES,ProviderInvalidToolArgumentsError:()=>o.ns,ProviderNoContentGeneratedError:()=>o.de,ProviderNoObjectGeneratedError:()=>o.$F,ProviderNoSuchToolError:()=>o.UR,ProviderParseResponseError:()=>o.o6,ProviderRateLimitExceededError:()=>o.Mm,ProviderResponseClientError:()=>o.U,ProviderResponseServerError:()=>o.Ay,ProviderServiceBusyError:()=>o.u8,ProviderServiceIssueError:()=>o.c5,ProviderSetupError:()=>o.br,ProviderTimedOutError:()=>o.Tn,ProviderUnsafeOrHarmfulContentError:()=>o.v9,StreamingJSONParseError:()=>o.mP,TooManyEmbeddingValuesForCallError:()=>o.Ch,UnauthorizedError:()=>o.D_,UnsafeOrHarmfulPromptError:()=>o.bt,UnsupportedFunctionalityError:()=>o.b8,deserializeCortexErrorV2:()=>a.j,isSerializedCortexErrorV2:()=>a.G});var i=n(705585),a=n(594860),o=n(990310)},738516:(e,r,n)=>{n.d(r,{Dd:()=>M,H:()=>m,KU:()=>D,L6:()=>R,TM:()=>C,XM:()=>L,bv:()=>l,jR:()=>s,po:()=>k,pp:()=>w,r6:()=>S,tl:()=>v});var i=n(121641),a=n(719178);i.z.object({prompt_data:i.z.string(),negative_prompt_data:i.z.string().default("blurry, bad"),cfg_scale:i.z.number().default(10),seed:i.z.number().default(20),steps:i.z.number().default(50),style_preset:i.z.string().default("photographic"),height:i.z.number().default(512),width:i.z.number().default(512),additionalPrefix:i.z.string().optional().default("")}),i.z.object({image:i.z.string(),metadata:i.z.object({height:i.z.number(),width:i.z.number()})}),i.z.object({componentQueries:i.z.array(i.z.string())});let o=i.z.union([i.z.object({role:i.z.union([i.z.literal("assistant"),i.z.literal("system")]),content:i.z.string()}),i.z.object({role:i.z.literal("user"),content:i.z.union([i.z.string(),i.z.array(i.z.union([i.z.object({type:i.z.literal("text"),text:i.z.string()}),i.z.object({type:i.z.literal("image"),image:i.z.string()})]))])})]),s=i.z.object({userPrompt:i.z.string(),kitKey:i.z.string().nullable().optional(),isLocal:i.z.boolean().nullable().optional(),isDirectGenerationCompatible:i.z.boolean().nullable().optional(),extraMessagesFigmateOnly:i.z.array(o).optional(),componentQueries:i.z.array(i.z.string()).optional()});i.z.string(),i.z.object({recommendedKitKey:i.z.string()});let l=i.z.object({presets:i.z.array(i.z.string()).optional(),theme:i.z.record(i.z.any()).optional(),jsx:i.z.string().optional(),dsKit:i.z.object({kitKey:i.z.string(),isLocal:i.z.boolean(),isDirectGenLibrary:i.z.boolean()}).optional(),trace:a.B.optional()});i.z.object({userPrompt:i.z.string()}),i.z.object({content:i.z.string()});let c=i.z.object({version:i.z.literal(2),darkMode:i.z.boolean(),fontFamilies:i.z.object({title:i.z.array(i.z.string()),body:i.z.array(i.z.string()),label:i.z.array(i.z.string())}),brandColor:i.z.string(),colors:i.z.object({text:i.z.string().array(),background:i.z.string().array(),border:i.z.string().array()}),borderRadii:i.z.array(i.z.number()),spacing:i.z.array(i.z.number())});c.omit({version:!0}).keyof();let d=i.z.object({fontFamilies:i.z.array(i.z.string()),colors:i.z.array(i.z.string()),borderRadii:i.z.array(i.z.number()),spacing:i.z.array(i.z.number())}),u=i.z.union([c,d]),p=i.z.object({prompt:i.z.string()}),m=i.z.object({userPrompt:i.z.string(),promptHistory:i.z.array(p).optional(),storedInitialPrompt:i.z.string(),jsx:i.z.string(),jsxInsertReplace:i.z.string().optional(),currentTheme:u,kitKey:i.z.string(),isLocal:i.z.boolean()}),h=i.z.object({type:i.z.literal("text_or_image"),affectedId:i.z.string(),content:i.z.string()}),_=i.z.enum(["font","layout","component","other"]),g=i.z.object({type:i.z.literal("theme"),content:c.partial()}),f=i.z.object({type:i.z.literal("iCantDoThis"),rationaleCategory:_.optional()}),E=[i.z.object({type:i.z.literal("remove"),affectedId:i.z.string()}),i.z.object({type:i.z.literal("move"),affectedId:i.z.string(),insertBehavior:i.z.enum(["above","below"]),destinationId:i.z.string()}),i.z.object({type:i.z.literal("replaceClasses"),affectedId:i.z.string(),classes:i.z.string().array()})],y=[i.z.object({type:i.z.literal("insert"),affectedId:i.z.string(),insertBehavior:i.z.enum(["above","below"]),jsxToInsert:i.z.string()}),i.z.object({type:i.z.literal("replace"),affectedId:i.z.string(),jsxToInsert:i.z.string()})],b=i.z.discriminatedUnion("type",[h,...E,...y,g,f]),v=i.z.object({action:b.optional(),cortex_error:i.z.object({type:i.z.string(),data:i.z.any()}).optional(),trace:a.B.optional()}),T=i.z.object({key:i.z.string(),name:i.z.string(),is_local:i.z.boolean(),description:i.z.string()});i.z.object({meta:i.z.object({kits:i.z.array(T)}),error:i.z.boolean().optional(),message:i.z.string().optional()});let I=i.z.enum(["normal","transparent","segment"]),S=i.z.object({imageB64:i.z.string()}),w=i.z.object({conflictScore:i.z.number(),reasoning:i.z.string()}),A=i.z.object({imageB64:i.z.string(),jsx:i.z.string()}),C=i.z.object({requests:i.z.array(A)}),N=i.z.object({isMobileDesign:i.z.boolean(),components:i.z.array(i.z.object({guid:i.z.string(),name:i.z.string()}))}),L=i.z.object({responses:i.z.array(N.nullable())}),O=i.z.object({imageB64:i.z.string(),jsx:i.z.string(),isStateGroup:i.z.boolean()}),R=i.z.object({requests:i.z.array(O)}),P=i.z.object({componentName:i.z.string(),componentDescription:i.z.string(),nodeIdsToPropertyNames:i.z.array(i.z.object({id:i.z.string(),propertyName:i.z.string()}))}),D=i.z.object({responses:i.z.array(P.nullable())}),M=i.z.object({id:i.z.string().optional(),initialUserPrompt:i.z.string().optional(),jsxJSON:i.z.string().optional(),prompt:i.z.string().optional(),desc:i.z.string().optional(),transparent:i.z.boolean().optional(),background:I.optional(),height:i.z.number(),width:i.z.number(),description:i.z.string().optional()}),k=i.z.object({image:i.z.string(),foregroundImage:i.z.string().optional(),description:i.z.string(),trace:a.B.optional()})},440618:(e,r,n)=>{n.d(r,{aC:()=>u,e3:()=>d});var i,a,o=n(121641);!function(e){e.NEUTRAL="neutral",e.CASUAL="casual",e.PROFESSIONAL="professional",e.CONCISE="concise",e.EXPANDED="expanded"}(i||(i={})),function(e){e.DESIGN="design",e.SLIDES="slides"}(a||(a={}));let s=o.z.object({id:o.z.string(),text:o.z.string()}).array(),l=o.z.object({tone:o.z.nativeEnum(i),weight:o.z.number()}).array(),c=o.z.enum(["design","slides"]),d=o.z.union([o.z.object({text:o.z.string(),tones:l,productType:c.optional()}),o.z.object({texts:s,tones:l,productType:c.optional()})]),u=o.z.object({id:o.z.string().optional(),delta:o.z.string()})},425642:(e,r,n)=>{n.d(r,{AM:()=>m,Af:()=>L,Bq:()=>function e(r,n=[]){for(let i=0;i<r.length;i++){let a=r[i];Array.isArray(a)?e(a,n):n.push(a)}return n},Ef:()=>u,GK:()=>E,Jk:()=>c,KQ:()=>g,Kg:()=>l,LN:()=>b,M0:()=>I,N9:()=>s,RP:()=>N,TR:()=>C,Ul:()=>v,Vs:()=>A,WI:()=>T,_j:()=>o,g6:()=>O,hR:()=>h,k4:()=>p,lX:()=>R,lq:()=>S,lu:()=>d,my:()=>y,qg:()=>w,v7:()=>f});var i=n(988520),a=n(464437);function o(e){return Array.isArray(e)?e:[e]}function s(e,r){-1===e.indexOf(r)&&e.push(r)}function l(e,r){-1===e.indexOf(r)&&e.unshift(r)}function c(e,r){let n=e.indexOf(r);-1!==n&&e.splice(n,1)}function d(e,r){if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}function u(e){for(let r=1;r<e.length;r++)if(void 0===e[r]||e[r]!==e[r-1])return!1;return!0}function p(e,r){let n,i,a=e.length;for(;0!==a;)i=Math.floor((r?function(e=Date.now()){return(9301*e+49297)%233280/233280}(r):Math.random())*a),a-=1,n=e[a],e[a]=e[i],e[i]=n;return e}function m(e,r,n=!1){return h(e,e=>e[r],n)}function h(e,r,n=!1,i,a=!1){e.sort((e,o)=>{if(r(e)===r(o)&&i){let r=a?-1:1;return i(e)<i(o)?-r:r}let s=n?-1:1;return r(e)<r(o)?-s:s})}let _=new Intl.Collator("en",{numeric:!0,sensitivity:"base"});function g(e,r,n={}){f(e,e=>e[r],n)}function f(e,r,n={},i){let a=e=>{let n=r(e);return n&&n.toLowerCase?n.toLowerCase():""},o=e=>{if(!i)return"";let r=i(e);return r&&r.toLowerCase?r.toLowerCase():""},s=n.isDescending?-1:1;n.useExpensiveNaturalComparison?e.sort((e,r)=>_.compare(a(e),a(r))*s):e.sort((e,r)=>{if(a(e)===a(r)&&i){let i=n.isSecondaryDescending?-1:1;return o(e)<o(r)?-i:i}return a(e)<a(r)?-s:s})}function E(e,r,n=!1){return e.sort((e,i)=>{let a=new Date(r(e)).getTime()<new Date(r(i)).getTime()?1:-1;return n?-a:a})}function y(e,r,n=!1){return E(e,e=>e[r],n)}function b(e){return E(e,e=>e.created_at)}function v(e,...r){return e.sort((e,n)=>{for(let i of r){let r=i(e,n);if(0!==r)return r}return 0})}function T(e){return e.filter(i.Vq)}function I(e,r,n=i.Vq){for(let i=r+1;i<e.length;i++){let r=e[i];if(n(r,i))return r}}function S(e,r,n=i.Vq){for(let i=r-1;i>=0;i--){let r=e[i];if(n(r,i))return r}}function w(e,r,n="left",o=i.Vq){r=(0,a.qE)(r,0,e.length-1);for(let i=0;r-i>=0||r+i<e.length;i++){let[a,s]="left"===n?[r-i,r+i]:[r+i,r-i];if(a>=0&&a<e.length){let r=e[a];if(o(r,a))return r}if(s>=0&&s<e.length){let r=e[s];if(o(r,s))return r}}}function A(e){let r=[...e],n=(0,i.sR)(r.pop(),"input must be non-empty");return[r,n]}function C(e,r,n=String){let i={};r.forEach((e,r)=>{i[n(e)]=r});let a=0,o=0,s=[];for(;;){let l=e[a],c=r[o];if(void 0===l||void 0===c){if(void 0===l&&void 0===c)return s;void 0!==l&&void 0===c?(s.push({hasBoth:!1,left:l,right:void 0}),a++):void 0===l&&void 0!==c&&(s.push({hasBoth:!1,left:void 0,right:c}),o++)}else{let e=i[n(l)];void 0===e||e<o?(s.push({hasBoth:!1,left:l,right:void 0}),a++):(e===o?(s.push({hasBoth:!0,left:l,right:c}),a++):s.push({hasBoth:!1,left:void 0,right:c}),o++)}}}function N(e,r){let n=[];for(let i of e){let e=r(i);null!=e&&n.push(e)}return n}function L(e,r){for(let n of e){let e=r(n);if(null!=e)return e}}function O(e,r){return e.includes(r)?e.filter(e=>e!==r):e.concat(r)}async function R(e,r){let n=e.map(r);return await Promise.all(n)}},464437:(e,r,n)=>{function i(e,r,n){return Math.min(Math.max(e,r),n)}function a(e,r,n){return e=null==r?e:Math.max(e,r),null==n?e:Math.min(e,n)}function o(e,r){if(e===r)return e;if(e>r)throw Error("random: start must be larger than end");return Math.random()*(r-e+1)+e}function s(e,r,n){let i=null!=r,a=i?r:e,o=i?e:0;n=null==n?Math.sign(a-o):n;let{result:s}=Array.from({length:Math.abs((a-o)/(n||1))}).reduce(({result:e,current:r})=>({result:[...e,r],current:r+n}),{current:o,result:[]});return s}function l(e,r){let n=[];for(let i=0;i<e;++i)n.push(r(i));return n}function c(e,r,n=1e-6){return Math.abs(e-r)<n}function d(e,r){return(e%r+r)%r}function u(e,r){return Math.round(e/r)*r}function p(e,r,n,i){let a;if(1e-8>Math.abs(e)){if(e=r,r=n,n=i,1e-8>Math.abs(e))return(e=r,r=n,1e-8>Math.abs(e))?[]:[-r/e];let a=r*r-4*e*n;return 1e-8>Math.abs(a)?[-r/(2*e)]:a>0?[(-r+Math.sqrt(a))/(2*e),(-r-Math.sqrt(a))/(2*e)]:[]}let o=(3*e*n-r*r)/(3*e*e),s=(2*r*r*r-9*e*r*n+27*e*e*i)/(27*e*e*e);if(1e-8>Math.abs(o))a=[Math.cbrt(-s)];else if(1e-8>Math.abs(s))a=[0].concat(o<0?[Math.sqrt(-o),-Math.sqrt(-o)]:[]);else{let e=s*s/4+o*o*o/27;if(1e-8>Math.abs(e))a=[-1.5*s/o,3*s/o];else if(e>0){let r=Math.cbrt(-s/2-Math.sqrt(e));a=[r-o/(3*r)]}else{let e=2*Math.sqrt(-o/3),r=Math.acos(3*s/o/e)/3,n=2*Math.PI/3;a=[e*Math.cos(r),e*Math.cos(r-n),e*Math.cos(r-2*n)]}}for(let n=0;n<a.length;n++)a[n]-=r/(3*e);return a}n.d(r,{Ae:()=>p,KY:()=>a,M9:()=>l,YE:()=>u,_g:()=>d,qE:()=>i,xN:()=>c,y1:()=>s,yT:()=>o})},988520:(e,r,n)=>{function i(e){return null==e}function a(e){return!i(e)}function o(e,r){if(i(e))throw Error(r??"Expected value not to be nullish");return e}n.d(r,{Vq:()=>a,sR:()=>o,uy:()=>i})},133696:(e,r,n)=>{function i(e){for(let r in e)return!1;return!0}function a(e){for(let r in e)return r;return null}function o(e,r){let n={...e};for(let[e,i]of Object.entries(r))null!=i&&(n[e]=i);return n}function s(e,r){let n={};for(let[i,a]of Object.entries(e).sort(r))n[i]=a;return n}n.d(r,{Dy:()=>function e(r,n,i){for(let a in r){let o=""===i?a:i+"."+a;Array.isArray(r[a])?n[o]=JSON.stringify(r[a]):"object"==typeof r[a]&&null!==r[a]?e(r[a],n,o):n[o]=r[a]}},Im:()=>i,b$:()=>o,mf:()=>s,o:()=>a})},210301:(e,r,n)=>{function i(e){return new Promise(r=>{let n=Array(e.length),i=e.length,a=()=>{0===i&&r(n)};for(let r=0;r<e.length;r++)e[r].then(e=>{n[r]={type:"resolve",resolve:e,reject:void 0},i--,a()},e=>{n[r]={type:"reject",resolve:void 0,reject:e},i--,a()});a()})}function a(e,r){return new Promise(n=>{let i=0,a=e.length,o=()=>{0===a&&n(s)},s=Array(e.length),l=r=>{let n=e[r];return void 0!==n&&(n().then(e=>{s[r]={type:"resolve",resolve:e,reject:void 0},a--,c(),o()},e=>{s[r]={type:"reject",resolve:void 0,reject:e},a--,c(),o()}),!0)},c=()=>{let e=l(i);return i++,e};for(let e=0;e<r&&c();e++);o()})}function o(e){let r=null;return()=>(null===r&&(r=e()).catch(()=>r=null),r)}n.d(r,{Ed:()=>a,Kt:()=>o,_7:()=>i})},742464:(e,r,n)=>{function i(e){return"object"==typeof e&&null!==e}function a(e){return"number"==typeof e}n.d(r,{Et:()=>a,UU:()=>i})},861951:(e,r,n)=>{n.d(r,{_p:()=>u,q5:()=>m});var i=n(445777),a=n(464437),o=n(741419),s=n(673906),l=n(179703),c=n(593584);async function d(e,r,n,i){let a=s.l7.testSetup("sites-compare-layout",()=>{let n=function e(r){return"INSTANCE"===r.type&&(r=(0,l.UN)().get(r.detachInstance())),r.childrenNodes?.map(e),r}((0,c.X)(e)),i=r.width,a=n.stackVerticalLayoutSize===o.mKm.HUG_CONTENT?n.size.y:r.height;return(n.size.x!==i||n.size.y!==a)&&n.resizeWithConstraints(i,a),n});try{return await n(a)}finally{s.l7.testSetup("sites-compare-layout",()=>{i?.keepClone?a.name=`cloned: ${a.name}`:a?.removeSelfAndChildren()})}}async function u(e,r,n,o={}){let c;await document.fonts.ready;let m=e?(0,l.UN)().get(e.id):void 0;if(!m)throw Error("node not found");o={...o,debugOutlines:!0};let h=n.width;if((0,i.KF)(void 0!==h,"Expect site preview window size to be defined"),m.isResponsiveSet){let e=m.childrenNodes.sort((e,r)=>e.size.x-r.size.x),r=e[0].size.x;for(let n of(m=e[0],e)){let e=n.size.x;e<=h&&e>r&&(r=e,m=n)}}if(!m)throw Error("node not found");return await d(m,r.rect,e=>{s.l7.testSetup("sites-compare-layout",()=>{c=[...function(e,r){let n=_(e),i=[];return f((e,r)=>{if(!e||!r)return;let{node:n}=e;"TEXT"===n.type&&("HEIGHT"===n.textAutoResize?((0,a.xN)(e.rect.height,r.rect.height,.1*e.rect.height)||i.push(p("textsize",e,r)),n.textAutoResize="NONE",n.resizeWithConstraints(n.size.x,r.rect.height)):"WIDTH_AND_HEIGHT"===n.textAutoResize&&((0,a.xN)(e.rect.width,r.rect.width,.1*e.rect.width)&&(0,a.xN)(e.rect.height,r.rect.height,.1*e.rect.height)||i.push(p("textsize",e,r)),n.textAutoResize="NONE",n.resizeWithConstraints(r.rect.width,r.rect.height)))},n,r,n,r),i}(e,r),...function(e,r,n){let i=_(e),{threshold:o}=n,s=[],l=0,c=0;return f((e,r,n,i)=>{if(!e||!r){s.push(p("missing",e,r));return}if("VECTOR"===e.node.type||r.isDisplayContents)return;let d=n.rect.width-(e.rect.x+e.rect.width),u=n.rect.height-(e.rect.y+e.rect.height),m=i.rect.width-(r.rect.x+r.rect.width),h=i.rect.height-(r.rect.y+r.rect.height),_=((0,a.xN)(e.rect.x,r.rect.x,o)||(0,a.xN)(d,m,o))&&((0,a.xN)(e.rect.y,r.rect.y,o)||(0,a.xN)(u,h,o)),g=(0,a.xN)(e.rect.width,r.rect.width,o)&&(0,a.xN)(e.rect.height,r.rect.height,o),f=e.rect.width*e.rect.height,E=function(e,r){let n=Math.min(e.x,r.x),i=Math.min(e.y,r.y),a=Math.max(e.x+e.width,r.x+r.width)-n,o=Math.max(e.y+e.height,r.y+r.height)-i;return{x:n,y:i,width:a,height:o}}(e.rect,r.rect),y=E.width*E.height,b=function(e,r){let n=(0,a.qE)(e.x,r.x,r.x+r.width),i=(0,a.qE)(e.x+e.width,r.x,r.x+r.width)-n,o=(0,a.qE)(e.y,r.y,r.y+r.height),s=(0,a.qE)(e.y+e.height,r.y,r.y+r.height)-o;return{x:n,y:o,width:i,height:s}}(e.rect,r.rect),v=Math.min(1,(y-b.width*b.height)/f)*(e?.areaFraction??0);_||s.push(p("position",e,r)),g||(s.push(p("size",e,r)),c+=v),g&&_||(l+=v)},i,r,i,r),{differences:s,layoutDifferenceScore:l,sizeDifferenceScore:c}}(e,r,o).differences]})},o),c}function p(e,r,n){return{type:e,node:r,element:n}}function m(e,r=!1){let n=[];for(let{type:i,element:a}of e)a&&("position"===i?n.push({id:a.id,prop:"outline",value:"dashed rgba(255, 156, 0, 0.75) 1px"}):"size"===i?n.push({id:a.id,prop:"outline",value:"dashed red 1px"}):"textsize"===i&&r&&n.push({id:a.id,prop:"outline",value:"dashed blue"}));return n}function h(e){var r;return(r=e).id&&(r.id.match(/^node-(.*)[0-9]+_[0-9]+$/)||r.id.match(/;node-[0-9]+_[0-9]+$/))?[e]:[...e.children].map(h).flat()}function _(e){let r=e.absoluteBoundingBox;return(0,i.vA)(null!==e.absoluteRenderBounds,"Node being compared should not be clipped."),function e(r,n,i,a){let o=r.childrenNodes.filter(e=>e.visible),s=function(e){let{x:r,y:n,w:i,h:a}=e;return{x:r,y:n,width:i,height:a}}(function(e,r){if(!e.parentNode?.bordersTakeSpace||!e.strokePaints.data.length)return r;let{x:n,y:i,w:a,h:o}=r,s="OUTSIDE"===e.strokeAlign?1:"CENTER"===e.strokeAlign?.5:0,l=r=>(e.borderStrokeWeightsIndependent?r:e.strokeWeight)*s,c=l(e.borderLeftWeight),d=l(e.borderRightWeight),u=l(e.borderTopWeight),p=l(e.borderBottomWeight),m=e.relativeTransform,h=e=>({x:e.x*m.m00+e.y*m.m01,y:e.x*m.m10+e.y*m.m11}),_=h({x:-c,y:-u}),g=h({x:d,y:-u}),f=h({x:-c,y:p}),E=h({x:d,y:p}),y=Math.min(_.x,g.x,f.x,E.x),b=Math.max(_.x,g.x,f.x,E.x),v=Math.min(_.y,g.y,f.y,E.y);return{x:n+y,y:i+v,w:a-y+b,h:o-v+Math.max(_.y,g.y,f.y,E.y)}}(r,r.absoluteBoundingBox)),l=function(e,r){let{x:n,y:i,width:a,height:o}=e;return{x:n-r.x,y:i-r.y,width:a,height:o}}(s,n),c=r.resizeToFit&&(!r.parentNode?.isStack||"ABSOLUTE"===r.stackPositioning),d=g(r);for(let e of o)d+=g(e);let u=e=>a*(0===d?0:g(e)/d),p=[...i,r.name];return{id:r.guid,name:p.join(" > "),node:r,children:o.map(r=>e(r,c?n:s,p,u(r))),rect:l,isDisplayContents:c,areaFraction:u(r)}}(e,r,[],1)}function g(e){return(e.absoluteRenderBounds?.w??0)*(e.absoluteRenderBounds?.h??0)}function f(e,r,n,i,a){if(e(r,n,i,a),!r||!n)return;let o=n.isFlattenedToImage?[]:r.children;for(let i=0;i<Math.max(n.children.length,o.length);i++)f(e,o[i],n.children[i],r,n)}},546504:(e,r,n)=>{n.d(r,{Xc:()=>i.Xc,z8:()=>a.z,Tl:()=>s.T});var i=n(138412),a=n(444417);function o(e,r,n=1){return{m00:n,m01:0,m02:e,m10:0,m11:n,m12:r}}o(0,0,.5),o(0,50,.5),o(0,-150),o(0,150),o(-150,0),o(150,0),n(630790);var s=n(188326),l=n(26911),c=n(930196),d=n(782946);class u{static kEpsilon=1e-6;static kEpsilonSqr=this.kEpsilon*this.kEpsilon;m00;m01;m02;m10;m11;m12;constructor(){this.m00=this.m01=this.m02=this.m10=this.m11=this.m12=0}static identity(){return this.fromNumbers(1,0,0,0,1,0)}static fromNumbers(e,r,n,i,a,o){let s=new u;return s.m00=e,s.m01=r,s.m02=n,s.m10=i,s.m11=a,s.m12=o,s}static copy(e){let r=new u;return r.m00=e.m00,r.m01=e.m01,r.m02=e.m02,r.m10=e.m10,r.m11=e.m11,r.m12=e.m12,r}static fromArray(e){let r=new u;return r.m00=e[0][0],r.m01=e[0][1],r.m02=e[0][2],r.m10=e[1][0],r.m11=e[1][1],r.m12=e[1][2],r}static fromVectors(e,r,n){let i=new u;return i.m00=r.x,i.m01=n.x,i.m02=e.x,i.m10=r.y,i.m11=n.y,i.m12=e.y,i}axisX(){return new d.Mi(this.m00,this.m10)}axisY(){return new d.Mi(this.m01,this.m11)}offset(){return new d.Mi(this.m02,this.m12)}toDegrees(){return 180*Math.atan2(this.m10,this.m00)/Math.PI}toScale(){let{m00:e,m01:r,m10:n,m11:i}=this;return new d.Mi(Math.sqrt(e*e+n*n),Math.sqrt(r*r+i*i))}hasNaN(){return this.m00!=this.m00&&this.m01!=this.m01&&this.m02!=this.m02&&this.m10!=this.m10&&this.m11!=this.m11&&this.m12!=this.m12}translate(e,r){this.m02=e*this.m00+r*this.m01+this.m02,this.m12=e*this.m10+r*this.m11+this.m12}rotate(e){if(0===e)return;let r=Math.sin(e),n=Math.cos(e),i=n*this.m00+r*this.m01,a=n*this.m01-r*this.m00,o=n*this.m10+r*this.m11,s=n*this.m11-r*this.m10;this.m00=i,this.m01=a,this.m10=o,this.m11=s}scale(e,r){this.m00*=e,this.m01*=r,this.m10*=e,this.m11*=r}multiply(e){let r=this.m00*e.m00+this.m01*e.m10,n=this.m00*e.m01+this.m01*e.m11,i=this.m00*e.m02+this.m01*e.m12+this.m02,a=this.m10*e.m00+this.m11*e.m10,o=this.m10*e.m01+this.m11*e.m11,s=this.m10*e.m02+this.m11*e.m12+this.m12;this.m00=r,this.m01=n,this.m02=i,this.m10=a,this.m11=o,this.m12=s}determinant(){return this.m00*this.m11-this.m01*this.m10}invert(){let e=1/this.determinant();if(!isFinite(e))return!1;let r=u.fromNumbers(this.m11*e,-this.m01*e,(this.m01*this.m12-this.m11*this.m02)*e,-this.m10*e,this.m00*e,(this.m10*this.m02-this.m00*this.m12)*e);return!r.hasNaN()&&(this.m00=r.m00,this.m01=r.m01,this.m02=r.m02,this.m10=r.m10,this.m11=r.m11,this.m12=r.m12,!0)}transformRect(e){if(e.isInvalid())return e;if(0===this.axisX().y&&0===this.axisY().x)return l.r.computeBounds(this.transformPoint(e.topLeft()),this.transformPoint(e.bottomRight()));let r=[this.transformPoint(e.topLeft()),this.transformPoint(e.topRight()),this.transformPoint(e.bottomLeft()),this.transformPoint(e.bottomRight())];return l.r.computeBoundsFromPointArray(r)}transformPoint(e){return new d.Mi(this.m00*e.x+this.m01*e.y+this.m02,this.m10*e.x+this.m11*e.y+this.m12)}toSvgTransform(){return`matrix(${(0,c.aT)(this.m00)} ${(0,c.aT)(this.m10)} ${(0,c.aT)(this.m01)} ${(0,c.aT)(this.m11)} ${(0,c.aT)(this.m02)} ${(0,c.aT)(this.m12)})`}toMatrix(){return[[this.m00,this.m01,this.m02],[this.m10,this.m11,this.m12]]}transformDirection(e){return new d.Mi(this.m00*e.x+this.m01*e.y,this.m10*e.x+this.m11*e.y)}inverseTransformPoint(e){let r=1/this.determinant();if(!isFinite(r))return d.Mi.invalid();let n=new d.Mi((this.m11*e.x-this.m01*e.y+this.m01*this.m12-this.m11*this.m02)*r,(this.m00*e.y-this.m10*e.x+this.m10*this.m02-this.m00*this.m12)*r);return n.hasNaN()?d.Mi.invalid():n}static fromTransform(e){return u.fromNumbers(e[0][0],e[0][1],e[0][2],e[1][0],e[1][1],e[1][2])}toTransform(){return[[this.m00,this.m01,this.m02],[this.m10,this.m11,this.m12]]}}},774632:(e,r,n)=>{n.d(r,{$J:()=>s,ZC:()=>a,qd:()=>o});var i=n(848318);function a(e){let r=(0,i.useRef)();return(0,i.useEffect)(()=>{r.current=e},[e]),r.current}function o(e){let r=(0,i.useRef)({value:e,prev:void 0}),n=r.current.value;return e!==n&&(r.current={value:e,prev:n}),r.current.prev}function s(e){let[r,n]=(0,i.useState)(void 0);return(0,i.useEffect)(()=>{n(e)},[e]),r}},567366:(e,r,n)=>{function i(){return!1}n.d(r,{Is:()=>function e(r){let n=r.recordingKey();if(n){if(r.__registeredRecordingKey)n!==r.__registeredRecordingKey&&(c(r),e(r));else for(let e in r.__registeredRecordingKey=n,r.__playbackHandlers)o(l(n,e),r.__playbackHandlers[e])}},YJ:()=>u,aH:()=>d,k3:()=>i,nL:()=>c});let a=Object.create(null);function o(e,r){if(-1!==(e in a?a[e].indexOf(r):-1))throw Error(`Tried to register already registered playback handler for ${e}`);a[e]||(a[e]=[]),a[e].push(r)}function s(e,r){let n=e in a?a[e].indexOf(r):-1;if(-1===n)throw Error(`Tried to unregister unknown playback handler for ${e}`);a[e].splice(n,1),0===a[e].length&&delete a[e]}function l(e,r){return`${e}.${r}`}function c(e){if(e.__registeredRecordingKey){for(let r in e.__playbackHandlers)s(l(e.__registeredRecordingKey,r),e.__playbackHandlers[r]);e.__registeredRecordingKey=null}}let d="SKIP_RECORDING";function u(e,r,n,i={}){i.record||(e=>e);let a=i.playback||(e=>e),c=e.__playbackHandlers||(e.__playbackHandlers=Object.create(null)),d=c[r];if(c[r]=e=>n(a(e)),d&&e.__registeredRecordingKey){let n=l(e.__registeredRecordingKey,r);s(n,d),o(n,c[r])}return function(e){0===n.length&&(e=void 0),n(e)}}},508242:(e,r,n)=>{function i(e){let r=null;return function(...n){if(null!=r&&r.args.length===n.length){let e=!0;for(let i=0,a=n.length;i<a;i++)if(n[i]!=r.args[i]){e=!1;break}if(e)return r.result}return(r={args:n,result:e(...n)}).result}}function a(e){let r=new WeakMap;return n=>{let i=r.get(n);if(i)return i;let a=e(n);return r.set(n,a),a}}n.d(r,{cm:()=>a,xx:()=>i})},386703:(e,r,n)=>{n.d(r,{WE:()=>a,d4:()=>o});let i=[];function a(e){throw o(Error().stack||"stack unavailable?"),e}function o(e){i.unshift(e),setTimeout(()=>{i=i.filter(r=>r!==e)},300)}},386656:(e,r,n)=>{n.d(r,{Lg:()=>d,Ns:()=>i.k3,PN:()=>c,QJ:()=>p,b_:()=>a,lZ:()=>l,nl:()=>s});var i=n(567366);let a=!1,o="/test/interactions"===window.location.pathname||"/test/interactions/proto"===window.location.pathname||"/test/interactions/deck"===window.location.pathname||"/test/interactions/presenter"===window.location.pathname;function s(){return o}function l(){return o}function c(){return o||(0,i.k3)()}function d(){try{return!1}catch{return!1}}o&&new URLSearchParams(window.location.search).get("mode");let u="/test/eval/view"===window.location.pathname;function p(){return u}},51052:(e,r,n)=>{n.r(r),n.d(r,{coerce:()=>o,filteredArray:()=>s,ignore:()=>a});var i=n(121641);function a(e){return i.z.any().transform(e=>e)}let o={...i.z.coerce,null:e=>i.z.preprocess(e=>void 0===e?null:e,e),undefined:e=>i.z.preprocess(e=>{if(null!==e)return e},e)};function s(e){return i.z.array(i.z.unknown()).transform(r=>r.filter(r=>e.safeParse(r).success))}}}]);

//# debugId=09d02f6a-8baa-5d28-80c8-b85075908c5e

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/e93cd0fd7f6f702015ced16f6b51e9f56d211fc4/8137-17b168905c23acd3.min.js.map